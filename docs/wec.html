<!DOCTYPE html><html><head><title>Help for package wec</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {wec}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BMI'><p>Data on BMI of Dutch citizens</p></a></li>
<li><a href='#contr.wec'><p>Function calculates contrasts for a factor variable based on weighted effect coding.</p></a></li>
<li><a href='#PUMS'><p>Public Use Microdata Sample files (PUMS) 2013</p></a></li>
<li><a href='#wec.interact'><p>Function to create an interaction between two variables based on weighted effect coding.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Weighted Effect Coding</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-10-30</td>
</tr>
<tr>
<td>Author:</td>
<td>Rense Nieuwenhuis, Manfred te Grotenhuis, Ben Pelzer, Alexander Schmidt, Ruben Konig, Rob Eisinga</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rense Nieuwenhuis &lt;rense.nieuwenhuis@sofi.su.se&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions to create factor variables with contrasts based on weighted effect coding, and their interactions. In weighted effect coding the estimates from a first order regression model show the deviations per group from the sample mean. This is especially useful when a researcher has no directional hypotheses and uses a sample from a population in which the number of observation per group is different.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.ru.nl/sociology/mt/wec/downloads/">http://www.ru.nl/sociology/mt/wec/downloads/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-10-31 14:23:37 UTC; rensenieuwenhuis</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-10-31 14:34:46 UTC</td>
</tr>
</table>
<hr>
<h2 id='BMI'>Data on BMI of Dutch citizens</h2><span id='topic+BMI'></span>

<h3>Description</h3>

<p>The <code>BMI</code> data contains information on Dutch individuals' BMI, in addition to select socio-demographic variables.</p>


<h3>Format</h3>

<p>A data frame with 3323 observations on the following 6 variables.
</p>

<dl>
<dt><code>sex</code></dt><dd><p>a factor with levels <code>male</code> and <code>female</code></p>
</dd>
<dt><code>education</code></dt><dd><p>a factor with levels <code>lowest</code>, <code>middle</code>, and <code>highest</code></p>
</dd>
<dt><code>year</code></dt><dd><p>a factor with levels <code>2000</code>, <code>2005</code>, and <code>2011</code></p>
</dd>
<dt><code>BMI</code></dt><dd><p>interval variable representing respondents' Body Mass Index (BMI)</p>
</dd>
<dt><code>childless</code></dt><dd><p>a factor with levels <code>no</code> and <code>yes</code></p>
</dd>
<dt><code>log_age</code></dt><dd><p>interval variable representing the natural log of respondents' age</p>
</dd>
<dt><code>age_categorical</code></dt><dd><p>a factor with levels <code>Young (18-30)</code>, <code>Middle (31-59)</code> and <code>Older (60-70)</code></p>
</dd>
</dl>



<h3>Source</h3>

<p>These data are a subset from three waves of the &lsquo;Socio-Cultural Developments in the Netherlands&rsquo; (SOCON) datasets, collected at the Radboud University in the Netherlands (see references for original codebooks).</p>


<h3>References</h3>

<p>Eisinga, R., G., Kraaykamp, P. Scheepers, P. Thijs (2012). <em>Religion in Dutch society 2011-2012. Documentation of a national survey on religious and secular attitudes and behaviour in 2011-2012</em>, DANS Data Guide 11, The Hague: DANS/Pallas Publications  Amsterdam University Press, 184p.
</p>
<p>Eisinga, R., A. Need, M. Coenders, N.D. de Graaf, M. Lubbers, P. Scheepers, M. Levels, P. Thijs (2012).
<em>Religion in Dutch society 2005. Documentation of a national survey on religious and secular attitudes and behaviour in 2005</em>, DANS Data Guide 10, The Hague: DANS/Pallas Publications  Amsterdam University Press, 246p.
</p>
<p>Eisinga, R., M. Coenders, A. Felling, M. te Grotenhuis, S. Oomens, P. Scheepers (2002). <em>Religion in Dutch society 2000. Documentation of a national survey on religious and secular attitudes in 2000</em>, Amsterdam: NIWI-Steinmetz Archive, 374p.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(BMI)

# Without Controls
model.dummy &lt;- lm(BMI ~ education, data=BMI)
summary(model.dummy)

# With Controls
model.dummy.controls &lt;- lm(BMI ~ education + sex + log_age + childless + year, data=BMI)
summary(model.dummy.controls)

</code></pre>

<hr>
<h2 id='contr.wec'>Function calculates contrasts for a factor variable based on weighted effect coding.</h2><span id='topic+contr.wec'></span>

<h3>Description</h3>

<p>This function calculates contrasts for a factor variable based on weighted effect coding. In weighted effect coding the estimates from a first order regression model show the deviations per group from the sample mean. This is especially useful when a researcher has no directional hypotheses and uses a sample from a population in which the number of observations per group is different.</p>


<h3>Usage</h3>

<pre><code class='language-R'>contr.wec(x, omitted)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contr.wec_+3A_x">x</code></td>
<td>
<p>Factor variable</p>
</td></tr>
<tr><td><code id="contr.wec_+3A_omitted">omitted</code></td>
<td>
<p>Label of the factor label that should be taken as the omitted category</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a contrast matrix based on weighted effect coding.</p>


<h3>Author(s)</h3>

<p>Rense Nieuwenhuis, Manfred te Grotenhuis, Ben Pelzer, Alexander Schmidt, Ruben Konig, Rob Eisinga</p>


<h3>References</h3>

<p>Grotenhuis, M. Te, Pelzer, B., Schmidt-Catran, A., Nieuwenhuis, R., Konig, R., and Eisinga, R. (2016). When size matters: advantages of weighted effect coding in observational studies. <em>International Journal of Public Health</em>, online access: http://link.springer.com/article/10.1007/s00038-016-0901-1
</p>
<p>Grotenhuis, M. Te, Pelzer, B., Schmidt-Catran, A., Nieuwenhuis, R., Konig, R., and Eisinga, R. (2016). Weighted effect coded interactions: a novel moderation regression analysis for observational studies. <em>International Journal of Public Health</em>, online access: http://link.springer.com/article/10.1007/s00038-016-0902-0
</p>
<p>Sweeney, Robert E. and Ulveling, Edwin F. (1972) A Transformation for Simplifying the Interpretation of Coefficients of Binary Variables in Regression Analysis. <em>The American Statistician</em>, 26(5): 30-32.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wec.interact">wec.interact</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(BMI)


# Without controls
BMI$educ.wec.lowest &lt;- BMI$educ.wec.highest &lt;- BMI$educ

contrasts(BMI$educ.wec.lowest) &lt;- contr.wec(BMI$education, omitted="lowest")
contrasts(BMI$educ.wec.highest) &lt;- contr.wec(BMI$education, omitted="highest")

model.wec.lowest &lt;- lm(BMI ~ educ.wec.lowest, data=BMI)
model.wec.highest &lt;- lm(BMI ~ educ.wec.highest, data=BMI)
summary(model.wec.lowest)
summary(model.wec.highest)

# With Controls
BMI$sex.wec.female &lt;- BMI$sex.wec.male &lt;- BMI$sex
contrasts(BMI$sex.wec.female) &lt;- contr.wec(BMI$sex, omitted="female")
contrasts(BMI$sex.wec.male) &lt;- contr.wec(BMI$sex, omitted="male")

BMI$year.wec.2000 &lt;- BMI$year.wec.2011 &lt;- BMI$year
contrasts(BMI$year.wec.2000) &lt;- contr.wec(BMI$year, omitted="2000")
contrasts(BMI$year.wec.2011) &lt;- contr.wec(BMI$year, omitted="2011")

model.wec.lowest.controls &lt;- lm(BMI ~ educ.wec.lowest +
  sex.wec.female + log_age + year.wec.2000,
  data=BMI)
model.wec.highest.controls &lt;- lm(BMI ~ educ.wec.highest +
  sex.wec.male + log_age + year.wec.2011,
  data=BMI)
summary(model.wec.lowest.controls)
summary(model.wec.highest.controls)
</code></pre>

<hr>
<h2 id='PUMS'>Public Use Microdata Sample files (PUMS) 2013</h2><span id='topic+PUMS'></span>

<h3>Description</h3>

<p>The ACS Public Use Microdata Sample files (<code>PUMS</code>) are a sample of the actual responses to the American Community Survey and include most population and housing characteristics. </p>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 4 variables.
</p>

<dl>
<dt><code>wage</code></dt><dd><p>annual wages (binned to 1000s, top-coded, in US dollar)</p>
</dd>
<dt><code>race</code></dt><dd><p>a factor with levels <code>Hispanic</code>, <code>Black</code>, <code>Asian</code>, and <code>White</code></p>
</dd>
<dt><code>education.int</code></dt><dd><p>level of education</p>
</dd>
<dt><code>education.cat</code></dt><dd><p>a factor variable with levels <code>High School</code>, and <code>Degree</code></p>
</dd>
</dl>



<h3>Source</h3>

<p>These data are a random subset of 10000 observations from working individuals aged over 25 in the 2013 ACS Public Use Microdata Sample files (<code>PUMS</code>).</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PUMS)

PUMS$race.wec &lt;- factor(PUMS$race)
contrasts(PUMS$race.wec) &lt;- contr.wec(PUMS$race.wec, "White")
contrasts(PUMS$race.wec)

m.wec &lt;- lm(wage ~ race.wec, data=PUMS)
summary(m.wec)

PUMS$race.educint &lt;- wec.interact(PUMS$race.wec, PUMS$education.int)
m.wec.educ &lt;- lm(wage ~ race.wec + education.int + race.educint, data=PUMS)
summary(m.wec.educ)

</code></pre>

<hr>
<h2 id='wec.interact'>Function to create an interaction between two variables based on weighted effect coding.</h2><span id='topic+wec.interact'></span>

<h3>Description</h3>

<p>This function facilitates the estimation of an interaction between two factor variables that are based on weighted effect coding. To that end, it creates a third variable that, together with the two original factor variables, forms the complete interaction. In interaction models, weighted effect coding displays the extra effect on top of the main effects found in a model without the interaction effect(s).</p>


<h3>Usage</h3>

<pre><code class='language-R'>wec.interact(x1, x2, output.contrasts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wec.interact_+3A_x1">x1</code></td>
<td>
<p>Factor variable (with contrasts based on weighted effect coding)</p>
</td></tr>
<tr><td><code id="wec.interact_+3A_x2">x2</code></td>
<td>
<p>Factor variable (with contrasts based on weighted effect coding) <em>or</em> interval or ratio variable.</p>
</td></tr>
<tr><td><code id="wec.interact_+3A_output.contrasts">output.contrasts</code></td>
<td>
<p>Specifies whether the contrast matrix of the interaction should be returned. Defaults to FALSE, returning the model matrix. Option currently only implemented for interactions between one weighted effect coded and one interval or ratio variable.</p>
</td></tr></table>


<h3>Value</h3>

<p>Returns a model matrix or contrast matrix for the interaction terms of (a.) two weighted effect coded variables, or (b.) one weighted effect coded and one interval or ratio variable.</p>


<h3>Note</h3>

<p>It should be noted that the procedure of applying weighted effect coding with interactions differs from the convential way to apply contrasts in R. This is becasue the contrast matrix of the interaction differs from the multiplication of the contrast matrix/matrices of the interacted variables.</p>


<h3>Author(s)</h3>

<p>Rense Nieuwenhuis, Manfred te Grotenhuis, Ben Pelzer, Alexander Schmidt, Ruben Konig, Rob Eisinga</p>


<h3>References</h3>

<p>Grotenhuis, M. Te, Pelzer, B., Schmidt-Catran, A., Nieuwenhuis, R., Konig, R., and Eisinga, R. (2016). When size matters: advantages of weighted effect coding in observational studies. <em>International Journal of Public Health</em>, online access:http://link.springer.com/article/10.1007/s00038-016-0901-1
</p>
<p>Grotenhuis, M. Te, Pelzer, B., Schmidt-Catran, A., Nieuwenhuis, R., Konig, R., and Eisinga, R. (2016). Weighted effect coded interactions: a novel moderation regression analysis for observational studies. <em>International Journal of Public Health</em>, online access: http://link.springer.com/article/10.1007/s00038-016-0902-0
</p>
<p>Sweeney, Robert E. and Ulveling, Edwin F. (1972) A Transformation for Simplifying the Interpretation of Coefficients of Binary Variables in Regression Analysis. <em>The American Statistician</em>, 26(5): 30-32.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+contr.wec">contr.wec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(BMI)

# Interaction two weighted effect coded categorical variables
BMI$childless.wec.yes &lt;- BMI$childless.wec.no &lt;- BMI$childless
contrasts(BMI$childless.wec.yes) &lt;- contr.wec(BMI$childless, omitted="yes")
contrasts(BMI$childless.wec.no) &lt;- contr.wec(BMI$childless, omitted="no")

BMI$age.wec.young &lt;- BMI$age.wec.older &lt;- BMI$age
contrasts(BMI$age.wec.young) &lt;- contr.wec(BMI$age_categorical, omitted="Young (18-30)")
contrasts(BMI$age.wec.older) &lt;- contr.wec(BMI$age_categorical, omitted="Older (60-70)")

model3a &lt;- lm(BMI ~ childless.wec.yes + age.wec.young, data=BMI)
model3b &lt;- lm(BMI ~ childless.wec.no + age.wec.older, data=BMI)
summary(model3a)
summary(model3b)


# Interaction
BMI$interact_c &lt;- wec.interact(BMI$childless.wec.yes, BMI$age.wec.young)
BMI$interact_d &lt;- wec.interact(BMI$childless.wec.yes, BMI$age.wec.older)
BMI$interact_e &lt;- wec.interact(BMI$childless.wec.no, BMI$age.wec.young)
BMI$interact_f &lt;- wec.interact(BMI$childless.wec.no, BMI$age.wec.older)

model3c &lt;- lm(BMI ~ childless.wec.yes + age.wec.young + interact_c, data=BMI)
model3d &lt;- lm(BMI ~ childless.wec.yes + age.wec.older + interact_d, data=BMI)
model3e &lt;- lm(BMI ~ childless.wec.no + age.wec.young + interact_e, data=BMI)
model3f &lt;- lm(BMI ~ childless.wec.no + age.wec.older + interact_f, data=BMI)

summary(model3c)
summary(model3d)
summary(model3e)
summary(model3f)


# Interaction weighted effect coded categorical variable and ratio/interval variable

data(PUMS)


PUMS$race.wec &lt;- factor(PUMS$race)
contrasts(PUMS$race.wec) &lt;- contr.wec(PUMS$race.wec, "White")
contrasts(PUMS$race.wec)

m.wec &lt;- lm(wage ~ race.wec, data=PUMS)
summary(m.wec)

PUMS$race.educint &lt;- wec.interact(PUMS$race.wec, PUMS$education.int)
m.wec.educ &lt;- lm(wage ~ race.wec + education.int + race.educint, data=PUMS)
summary(m.wec.educ)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
