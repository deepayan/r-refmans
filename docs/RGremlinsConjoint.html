<!DOCTYPE html><html><head><title>Help for package RGremlinsConjoint</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RGremlinsConjoint}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cbc.df'><p>Simulated data for the &quot;Gremlins in the Data Model&quot;</p></a></li>
<li><a href='#code_sawtooth_design'><p>Convert a Sawtooth Software generated design file to a dummy coded design</p>
file</a></li>
<li><a href='#convert_to_bayesm'><p>Convert 'RGremlinsConjoint' formatted Data to 'bayesm' format</p></a></li>
<li><a href='#estimateGremlinsModel'><p>Estimate Gremlin's Model - Hierarchical MNL</p></a></li>
<li><a href='#gremlins'><p>'RGremlinsConjoint': A package for estimating the &quot;Gremlins in the Data&quot; model</p></a></li>
<li><a href='#gremlinsEnv'><p>Set global options for the gremlins models.  These options are not expected to be modified by the user</p>
but are extracted from the functions to simplify the coding.</a></li>
<li><a href='#RGremlinsConjoint-package'><p>RGremlinsConjoint: Estimate the &quot;Gremlins in the Data&quot; Model for Conjoint Studies</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimate the "Gremlins in the Data" Model for Conjoint Studies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.1</td>
</tr>
<tr>
<td>Description:</td>
<td>The tools and utilities to estimate the model described in "Gremlin's in the
    Data: Identifying the Information Content of Research Subjects" (Howell et al.
    (2021) &lt;<a href="https://doi.org/10.1177%2F0022243720965930">doi:10.1177/0022243720965930</a>&gt;)  using conjoint analysis data such as
    that collected in Sawtooth Software's 'Lighthouse' or 'Discover' products.
    Additional utilities are included for formatting the input data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>bayesm</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/statuser/RGremlinsConjoint">https://github.com/statuser/RGremlinsConjoint</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/statuser/RGremlinsConjoint/issues">https://github.com/statuser/RGremlinsConjoint/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-08 21:25:29 UTC; jrhowell</td>
</tr>
<tr>
<td>Author:</td>
<td>John Howell [aut, cre, cph],
  Peter Ebbes [aut],
  John Leichty [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Howell &lt;john_howell@byu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-08 21:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cbc.df'>Simulated data for the &quot;Gremlins in the Data Model&quot;</h2><span id='topic+cbc.df'></span>

<h3>Description</h3>

<p>A dataset containing simulated choices from a CBC study where some of the
respondents are information poor or 'Gremlins'.  The data is simulated data
and does not reflect actual preferences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cbc.df
</code></pre>


<h3>Format</h3>

<p>A data frame with 32000 rows and 10 variables:
</p>

<dl>
<dt>resp.id</dt><dd><p>A respondent identifier</p>
</dd>
<dt>ques</dt><dd><p>The question or task number</p>
</dd>
<dt>alt</dt><dd><p>The choice alternative</p>
</dd>
<dt>choice</dt><dd><p>An indicator that takes on a value of 1 if the alternative was chosen.  (Default is 0.)</p>
</dd>
<dt>brandFord</dt><dd><p>A dummy coded variable indicating the brand is Ford</p>
</dd>
<dt>brandGM</dt><dd><p>A dummy coded variable indicating the brand is GM</p>
</dd>
<dt>brandDodge</dt><dd><p>A dummy coded variable indicating the brand is Dodge</p>
</dd>
<dt>enghyb</dt><dd><p>A dummy coded variable indicating the engine is a hybrid</p>
</dd>
<dt>engelec</dt><dd><p>A dummy coded variable indicating the engine is electric</p>
</dd>
<dt>price</dt><dd><p>A continuous variable for the relative price of the individual offerings.</p>
</dd>
</dl>


<hr>
<h2 id='code_sawtooth_design'>Convert a Sawtooth Software generated design file to a dummy coded design
file</h2><span id='topic+code_sawtooth_design'></span>

<h3>Description</h3>

<p>Take a design file such as those generated by the Sawtooth Software
'Lighthouse Studio' and convert it into a dummy coded design file.  The last
level in the attribute is considered the reference level and will be dropped.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_sawtooth_design(
  sawtooth_design,
  columns_to_code = c(4:ncol(sawtooth_design)),
  include_none_option = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="code_sawtooth_design_+3A_sawtooth_design">sawtooth_design</code></td>
<td>
<p>A matrix that contains the Sawtooth design.  Can be
loaded with read.csv.</p>
</td></tr>
<tr><td><code id="code_sawtooth_design_+3A_columns_to_code">columns_to_code</code></td>
<td>
<p>(Optional, Default = all columns) A vector listing the
numeric index of the columns to code. Note: The first column is column 4
due to the control variables</p>
</td></tr>
<tr><td><code id="code_sawtooth_design_+3A_include_none_option">include_none_option</code></td>
<td>
<p>(Optional, Default = FALSE) A boolean value
indicating whether to expand the task to include a none option</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is written to not require converting columns to be factors. All
variables should be numeric indexes for the levels of the attributes. If you
would like to manually code a attribute of the design, for example if you
have a price variable, you must manually code that attribute and then can
call the function with the optional columns to code parameter.
</p>


<h3>Value</h3>

<p>A matrix object chat contains the dummy coded design file.  The last
attribute is considered the reference level
</p>


<h3>See Also</h3>

<p>/urlhttp://www.sawtoothsoftware.com/help/lighthouse-studio/manual/index.html?hid_web_cbc_exporting.html
</p>
<p>Documentation for the Sawtooth Software Design file format can be found at
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Read in the Sawtooth Formatted data
 design &lt;- read.csv("Design.csv")
 prices = c(0.79, 1.29, 1.79, 2.29, 2.79)
 design$price &lt;- prices[design$price]
 codedDesign &lt;- codeSawtoothDesignFile(design, c(4:9))

## End(Not run)


</code></pre>

<hr>
<h2 id='convert_to_bayesm'>Convert 'RGremlinsConjoint' formatted Data to 'bayesm' format</h2><span id='topic+convert_to_bayesm'></span>

<h3>Description</h3>

<p>Converts a data file and a coded design file from the format expected by the
package to a format appropriate for estimation in 'bayesm'
<code><a href="bayesm.html#topic+rhierMnlRwMixture">rhierMnlRwMixture</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_to_bayesm(data, design)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_to_bayesm_+3A_data">data</code></td>
<td>
<p>The data.frame or matrix that contains the respondents answers</p>
</td></tr>
<tr><td><code id="convert_to_bayesm_+3A_design">design</code></td>
<td>
<p>The data.frame or matrix that contains the coded design</p>
</td></tr>
</table>


<h3>Value</h3>

<p>lgtdata The list data structure for use with 'bayesm'
</p>


<h3>See Also</h3>

<p><code><a href="#topic+code_sawtooth_design">code_sawtooth_design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data &lt;- read.csv("data.csv")
 design &lt;- read.csv("design.csv")
 design &lt;- code_sawtooth_design(design)
 convert_to_bayesm(data, design)

## End(Not run)
</code></pre>

<hr>
<h2 id='estimateGremlinsModel'>Estimate Gremlin's Model - Hierarchical MNL</h2><span id='topic+estimateGremlinsModel'></span>

<h3>Description</h3>

<p>The function estimates the model described in &quot;Gremlin's in the Data: Identifying the
Information Content of Research Subjects&quot; (Howell et al.
(2021) &lt;doi:10.1177/0022243720965930&gt;) using a hierarchical multinomial logit model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimateGremlinsModel(
  data,
  design,
  Priors = NULL,
  R = NULL,
  keepEvery = 1,
  verbose = TRUE,
  num_lambda_segments = 2,
  constraints = NULL,
  startingValues = NULL,
  previous_iterations = 0,
  Atchade_slope_tuning = 0.1,
  Atchade_lambda_tuning = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimateGremlinsModel_+3A_data">data</code></td>
<td>
<p>A matrix containing the raw data.
The first column the respondent identifier, followed by the design number, the remaining
columns indicate the choices for the tasks that coincide to the design file.</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_design">design</code></td>
<td>
<p>A matrix representing the coded (dummy of effects) design file.  The design file should be
formatted as a matrix with number of versions X number of tasks X number of alternatives
rows and number of parameters + 3 columns.  The first column contains the version number,
the second columns contains the task number, the third column contains the alternative,
and the remaining columns contain the coded design.  A generic Sawtooth Software design
file can be converted to this format using the <code><a href="#topic+code_sawtooth_design">code_sawtooth_design</a></code> function.</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_priors">Priors</code></td>
<td>
<p>A data structure that contains the priors for to the model.  Can be null indicating
the use of default priors or must contain a full prior specification.</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_r">R</code></td>
<td>
<p>The number of repetitions in the chain</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_keepevery">keepEvery</code></td>
<td>
<p>saves every keepEvery-th draw for output</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_verbose">verbose</code></td>
<td>
<p>Print intermediate results to the screen (default = TRUE)</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_num_lambda_segments">num_lambda_segments</code></td>
<td>
<p>(Default = 2) The number of segments for the scale factor</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_constraints">constraints</code></td>
<td>
<p>(Optional) a vector of length n-param specifying the constraints
to impose on the parameters or NULL.  a 1 indicates the parameter is constrained to be positive
a -1 constrains to be  negative, and a 0 indicates no constraint.</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_startingvalues">startingValues</code></td>
<td>
<p>(Optional) starting values to use for the MCMC algorithm.  This is a list of
containing: slope = a nRespondent by nParamter matrix of slopes for the respondent
slopeBar = a nParameter vector of the slopeBar parameter
slopeCov = a nParameter by nParameter matrix containing the variance covariance matrix
for the slopeBar parameter
lambda = a nSegment vector containing the starting values for the lambda parameters.  The first
element in the vector should be 1.
segMembership = a nRespondent vector containing the segment membership for each respondent.
phi_lambda = a nParameter vector containing the base probabilities that an individual belongs
to each segment.  Should sum to 1.</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_previous_iterations">previous_iterations</code></td>
<td>
<p>The number of previous iterations run.  This parameter is used for the Atchade
adaptive MCMC step size algorithm.  This is used since the Atchade update does not happen for less
than 1000 iterations.  (Default = 0)</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_atchade_slope_tuning">Atchade_slope_tuning</code></td>
<td>
<p>The tuning factor to use for Atchade step for the slopes parameter.  Larger values
decrease the acceptance rate.  (Default = 0.01)</p>
</td></tr>
<tr><td><code id="estimateGremlinsModel_+3A_atchade_lambda_tuning">Atchade_lambda_tuning</code></td>
<td>
<p>The tuning factor to use for the Atchade step for the lambda parameter.  Larger
values decrease the acceptance rate. (Default = 10)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data structure containing the draws from the complete MCMC chain
</p>


<h3>See Also</h3>

<p><code><a href="#topic+code_sawtooth_design">code_sawtooth_design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
truck_design_file &lt;- system.file("extdata", "simTruckDesign.csv", package = "RGremlinsConjoint")
truck_data_file &lt;- system.file("extdata", "simTruckData.csv", package = "RGremlinsConjoint")

truckDesign &lt;- read.csv(truck_design_file)
truckData &lt;- read.csv(truck_data_file)
outputSimData_burn &lt;- estimateGremlinsModel(truckData,
                                            truckDesign,
                                            R = 10,
                                            keepEvery = 1,
                                            num_lambda_segments = 2)

</code></pre>

<hr>
<h2 id='gremlins'>'RGremlinsConjoint': A package for estimating the &quot;Gremlins in the Data&quot; model</h2><span id='topic+gremlins'></span>

<h3>Description</h3>

<p>The tools and utilities to estimate the model described in &quot;Gremlin's in the
Data: Identifying the Information Content of Research Subjects&quot; (Howell et al.
(2021) &lt;doi:10.1177/0022243720965930&gt;)  using conjoint analysis data such as
that collected in Sawtooth Software's 'Lighthouse' or 'Discover' products.
Additional utilities are included for formatting the input data.
</p>

<hr>
<h2 id='gremlinsEnv'>Set global options for the gremlins models.  These options are not expected to be modified by the user
but are extracted from the functions to simplify the coding.</h2><span id='topic+gremlinsEnv'></span>

<h3>Description</h3>

<p>Set global options for the gremlins models.  These options are not expected to be modified by the user
but are extracted from the functions to simplify the coding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gremlinsEnv
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 4.
</p>

<hr>
<h2 id='RGremlinsConjoint-package'>RGremlinsConjoint: Estimate the &quot;Gremlins in the Data&quot; Model for Conjoint Studies</h2><span id='topic+RGremlinsConjoint'></span><span id='topic+RGremlinsConjoint-package'></span>

<h3>Description</h3>

<p>The tools and utilities to estimate the model described in &quot;Gremlin's in the Data: Identifying the Information Content of Research Subjects&quot; (Howell et al. (2021) <a href="https://doi.org/10.1177/0022243720965930">doi:10.1177/0022243720965930</a>) using conjoint analysis data such as that collected in Sawtooth Software's 'Lighthouse' or 'Discover' products. Additional utilities are included for formatting the input data.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: John Howell <a href="mailto:john_howell@byu.edu">john_howell@byu.edu</a> [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Peter Ebbes
</p>
</li>
<li><p> John Leichty
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/statuser/RGremlinsConjoint">https://github.com/statuser/RGremlinsConjoint</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/statuser/RGremlinsConjoint/issues">https://github.com/statuser/RGremlinsConjoint/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
