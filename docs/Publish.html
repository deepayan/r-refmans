<!DOCTYPE html><html lang="en"><head><title>Help for package Publish</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Publish}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Publish-package'><p>Publish package</p></a></li>
<li><a href='#acut'><p>Automatic selection and formatting of breaks in <code>cut</code></p></a></li>
<li><a href='#ci.mean'><p>Compute mean values with confidence intervals</p></a></li>
<li><a href='#ci.mean.default'><p>Compute mean values with confidence intervals</p></a></li>
<li><a href='#CiTable'><p>CiTable data</p></a></li>
<li><a href='#coxphSeries'><p>Run a series of Cox regression models</p></a></li>
<li><a href='#Diabetes'><p>Diabetes data of Dr John Schorling</p></a></li>
<li><a href='#fixRegressionTable'><p>Expand regression coefficient table</p></a></li>
<li><a href='#followupTable'><p>Summary tables for a given followup time point.</p></a></li>
<li><a href='#formatCI'><p>Formatting confidence intervals</p></a></li>
<li><a href='#glmSeries'><p>Run a series of generalized linear regression analyses</p></a></li>
<li><a href='#labelUnits'><p>labelUnits</p></a></li>
<li><a href='#lazyDateCoding'><p>Efficient coding of date variables</p></a></li>
<li><a href='#lazyFactorCoding'><p>Efficient coding of factor levels</p></a></li>
<li><a href='#org'><p>Wrapper function for publish with output format org</p></a></li>
<li><a href='#parseInteractionTerms'><p>Parse interaction terms</p></a></li>
<li><a href='#plot.ci'><p>Plot confidence intervals</p></a></li>
<li><a href='#plot.regressionTable'><p>Plotting regression coefficients with confidence limits</p></a></li>
<li><a href='#plot.subgroupAnalysis'><p>plot.subgroupAnalysis</p></a></li>
<li><a href='#plotConfidence'><p>Plot confidence intervals</p></a></li>
<li><a href='#print.ci'><p>Print confidence intervals</p></a></li>
<li><a href='#print.subgroupAnalysis'><p>Printing univariate tables</p></a></li>
<li><a href='#print.table2x2'><p>print results of 2x2 contingency table analysis</p></a></li>
<li><a href='#print.univariateTable'><p>Printing univariate tables</p></a></li>
<li><a href='#pubformat'><p>Format numbers for publication</p></a></li>
<li><a href='#publish'><p>Publishing tables and figures</p></a></li>
<li><a href='#publish.CauseSpecificCox'><p>Tabulizing cause-specific hazard ratio from all causes with confidence limits and Wald test p-values.</p></a></li>
<li><a href='#publish.ci'><p>Publish tables with confidence intervals</p></a></li>
<li><a href='#publish.coxph'><p>Tabulize hazard ratios with confidence intervals and</p>
p-values.</a></li>
<li><a href='#publish.glm'><p>Tabulize regression coefficients with confidence intervals and p-values.</p></a></li>
<li><a href='#publish.htest'><p>Pretty printing of test results.</p></a></li>
<li><a href='#publish.matrix'><p>Publishing a matrix in raw, org, latex, or muse format</p></a></li>
<li><a href='#publish.MIresult'><p>Present logistic regression and Cox regression  obtained with mitools::MIcombine based on smcfcs::smcfcs multiple imputation analysis</p></a></li>
<li><a href='#publish.riskRegression'><p>Publishing results of riskRegression</p></a></li>
<li><a href='#publish.Score'><p>Publish predictive accuracy results</p></a></li>
<li><a href='#publish.summary.aov'><p>Format summary table of aov results</p></a></li>
<li><a href='#publish.survdiff'><p>Alternative summary of survdiff results</p></a></li>
<li><a href='#regressionTable'><p>Regression table</p></a></li>
<li><a href='#SpaceT'><p>A study was made of all 26 astronauts on the first eight space shuttle flights (Bungo et.al., 1985).</p>
On a voluntary basis 17 astronauts consumed large quantities of salt and fluid prior to landing as
a countermeasure to space deconditioning, while nine did not.</a></li>
<li><a href='#spaghettiogram'><p>Spaghettiogram</p></a></li>
<li><a href='#specialFrame'><p>Special frame</p></a></li>
<li><a href='#splinePlot.lrm'><p>Plot predictions of logistic regression</p></a></li>
<li><a href='#stripes'><p>Background and grid color control.</p></a></li>
<li><a href='#subgroupAnalysis'><p>Subgroup Analysis - Interactions and estimates</p></a></li>
<li><a href='#summary.ci'><p>Summarize confidence intervals</p></a></li>
<li><a href='#summary.regressionTable'><p>Formatting regression tables</p></a></li>
<li><a href='#summary.subgroupAnalysis'><p>summary.subgroupAnalysis</p></a></li>
<li><a href='#summary.univariateTable'><p>Preparing univariate tables for publication</p></a></li>
<li><a href='#sutable'><p>Fast summary of a univariate table</p></a></li>
<li><a href='#table2x2'><p>2x2 table calculus for teaching</p></a></li>
<li><a href='#trace'><p>trace data</p></a></li>
<li><a href='#traceR'><p>traceR data</p></a></li>
<li><a href='#Units'><p>Add units to data set</p></a></li>
<li><a href='#univariateTable'><p>Univariate table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Format Output of Various Routines in a Suitable Way for Reports
and Publication</td>
</tr>
<tr>
<td>Description:</td>
<td>A bunch of convenience functions that transform the results of some basic statistical analyses
       into table format nearly ready for publication. This includes descriptive tables, tables of
       logistic regression and Cox regression results as well as forest plots. </td>
</tr>
<tr>
<td>Version:</td>
<td>2023.01.17</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>prodlim (&ge; 1.5.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival (&ge; 2.38), data.table (&ge; 1.10.4), lava (&ge; 1.5.1),
multcomp (&ge; 1.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>riskRegression (&ge; 2020.09.07), testthat, smcfcs (&ge; 1.4.1),
rms (&ge; 6.1.0), mitools (&ge; 2.4), nlme (&ge; 3.1-131)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-17 14:12:57 UTC; tag</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas A. Gerds [aut, cre],
  Christian Torp-Pedersen [ctb],
  Klaus K Holst [ctb],
  Brice Ozenne [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-17 17:40:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='Publish-package'>Publish package</h2><span id='topic+Publish-package'></span>

<h3>Description</h3>

<p>This package processes results of descriptive statistcs and regression analysis into final tables and figures of a manuscript
</p>

<hr>
<h2 id='acut'>Automatic selection and formatting of breaks in <code>cut</code></h2><span id='topic+acut'></span>

<h3>Description</h3>

<p>A version of <code>cut</code> that easily formats the labels and places breaks by default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>acut(
  x,
  n = 5,
  type = "default",
  format = NULL,
  format.low = NULL,
  format.high = NULL,
  dig.lab = 3,
  right = TRUE,
  breaks,
  labels = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="acut_+3A_x">x</code></td>
<td>
<p>a numeric vector which is to be converted to a factor by cutting (passed directly to <code>cut</code>).</p>
</td></tr>
<tr><td><code id="acut_+3A_n">n</code></td>
<td>
<p>number of bins to create based on the empirical quantiles of x. This will be overruled if <code>breaks</code> is supplied.</p>
</td></tr>
<tr><td><code id="acut_+3A_type">type</code></td>
<td>
<p>a high-level formatting option. For now, the only other option than the default setting is &quot;<code>age</code>&quot;. See details and examples.</p>
</td></tr>
<tr><td><code id="acut_+3A_format">format</code></td>
<td>
<p>string used to make labels. %l and %u identifies the lower and upper value of the breaks respectively. See examples.</p>
</td></tr>
<tr><td><code id="acut_+3A_format.low">format.low</code></td>
<td>
<p>string used specifically on the lowest label.</p>
</td></tr>
<tr><td><code id="acut_+3A_format.high">format.high</code></td>
<td>
<p>string used specifically on the highest label.</p>
</td></tr>
<tr><td><code id="acut_+3A_dig.lab">dig.lab</code></td>
<td>
<p>integer which is used when labels are not given. It determines the number of digits used in formatting the break numbers. (Passed directly to <code>cut</code>.)</p>
</td></tr>
<tr><td><code id="acut_+3A_right">right</code></td>
<td>
<p>logical, indicating if the intervals should be closed on the right (and open on the left) or vice versa (passed directly to <code>cut</code>).</p>
</td></tr>
<tr><td><code id="acut_+3A_breaks">breaks</code></td>
<td>
<p>specify breaks manually as in <code>cut</code>.</p>
</td></tr>
<tr><td><code id="acut_+3A_labels">labels</code></td>
<td>
<p>logical, indicating whether or not to make labels or simply use ordered numbers. If TRUE, the labels are constructed as discribed above.</p>
</td></tr>
<tr><td><code id="acut_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>cut</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formats are supplied by specifiyng the text around the lower (%l) and upper (%l) value (see examples).
If user specified breaks are supplied, the default labels from <code>cut</code> are used.
If automatic breaks are used, the default labels are a slight modification at the end point of the default from <code>cut</code>
All this can of course be adjusted manually through the format functionality (see below). 
</p>
<p>By default, 5 breaks are constructed according to the quantiles with of the input <code>x</code>.
The number of breaks can be adjusted, and default specifying breaks (as in <code>cut</code>) can be supplied instead.
</p>
<p>If <code>type</code> is changed from &quot;<code>default</code>&quot; to another option, a different formatting template is used.
For now the only other option is &quot;<code>age</code>&quot;, which is designed to be well suited to easily group age variables.
When <code>type</code>=&quot;<code>age</code>&quot; only the <code>breaks</code> argument is used, and it behaves different from otherwise.
If a single number is supplied, intervals of length <code>breaks</code> will automatically be constructed (starting from 0).
If a vector is supplied, the intervals are used as in <code>cut</code> but formatted differently, see examples.
</p>


<h3>Value</h3>

<p>same as for cut. A vector of 'factors' is created, unless 'labels=FALSE'.
</p>


<h3>Author(s)</h3>

<p>Anders Munch
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes) # load dataset

## The default uses format similar to cut
chol.groups &lt;- acut(Diabetes$chol)
table(chol.groups)

## The formatting can easily be changed
chol.groups &lt;- acut(Diabetes$chol,format="%l-%u",n=5)
table(chol.groups)

## The default is to automatic place the breaks, so the number of this can easily be changed.
chol.groups &lt;- acut(Diabetes$chol,n=7)
table(chol.groups)

## Manually setting format and breaks
age.groups &lt;- acut(Diabetes$age,format="%l-%u",breaks=seq(0,100,by=10))
table(age.groups)

## Other variations 
age.groups &lt;- acut(Diabetes$age,
                   format="%l-%u",
                   format.low="below %u",
                   format.high="above %l",
                   breaks=c(0, seq(20,80,by=10), Inf))
table(age.groups)

BMI.groups &lt;- acut(Diabetes$BMI,
                   format="BMI between %l and %u",
                   format.low="BMI below %u",
                   format.high="BMI above %l")
table(BMI.groups)
org(as.data.frame(table(BMI=BMI.groups)))

## Instead of using the quantiles, we can specify equally spaced breaks,
## but still get the same formatting
BMI.grouping &lt;-
   seq(min(Diabetes$BMI,na.rm=TRUE), max(Diabetes$BMI,na.rm=TRUE), length.out=6)
BMI.grouping[1] &lt;- -Inf # To get all included
BMI.groups &lt;- acut(Diabetes$BMI,
                   breaks=BMI.grouping,
                   format="BMI between %l and %u",
                   format.low="BMI below %u",
                   format.high="BMI above %l")
table(BMI.groups)
org(as.data.frame(table(BMI=BMI.groups)))

## Using type="age"
## When using type="age", categories of 10 years are constructed by default.
## The are formatted to be easier to read when the values are ages.
table(acut(Diabetes$age, type="age"))

## This can be changes with the breaks argument.
## Note that this is diffent from cut when breaks is a single number.
table(acut(Diabetes$age, type="age", breaks=20))

## Of course We can also supply the breaks manually.
## The formatting depends on whether or not all the values fall within the breaks:
## All values within the breaks
table(acut(Diabetes$age, type="age", breaks=c(0, 30, 50, 80, 100)))
## Some values below and above the breaks
table(acut(Diabetes$age, type="age", breaks=c(30, 50, 80))) 

</code></pre>

<hr>
<h2 id='ci.mean'>Compute mean values with confidence intervals</h2><span id='topic+ci.mean'></span>

<h3>Description</h3>

<p>Compute mean values with confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci.mean(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ci.mean_+3A_x">x</code></td>
<td>
<p>object passed to methods</p>
</td></tr>
<tr><td><code id="ci.mean_+3A_...">...</code></td>
<td>
<p>passed to methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Normal approximation
</p>


<h3>Value</h3>

<p>a list with mean values and confidence limits
</p>

<hr>
<h2 id='ci.mean.default'>Compute mean values with confidence intervals</h2><span id='topic+ci.mean.default'></span>

<h3>Description</h3>

<p>Compute mean values with confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
ci.mean(
  x,
  alpha = 0.05,
  normal = TRUE,
  na.rm = TRUE,
  statistic = "arithmetic",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ci.mean.default_+3A_x">x</code></td>
<td>
<p>numeric vector</p>
</td></tr>
<tr><td><code id="ci.mean.default_+3A_alpha">alpha</code></td>
<td>
<p>level of significance</p>
</td></tr>
<tr><td><code id="ci.mean.default_+3A_normal">normal</code></td>
<td>
<p>If <code>TRUE</code> use quantile of t-distribution else use normal approximation and quantile of normal approximation. Do you think this is confusing?</p>
</td></tr>
<tr><td><code id="ci.mean.default_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>TRUE</code> remove missing values from <code>x</code>.</p>
</td></tr>
<tr><td><code id="ci.mean.default_+3A_statistic">statistic</code></td>
<td>
<p>Decide which mean to compute: either <code>"arithmetic"</code> or <code>"geometric"</code></p>
</td></tr>
<tr><td><code id="ci.mean.default_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Normal approximation
</p>


<h3>Value</h3>

<p>a list with mean values and confidence limits
</p>


<h3>Author(s)</h3>

<p>Thomas Gerds
</p>

<hr>
<h2 id='CiTable'>CiTable data</h2><span id='topic+CiTable'></span>

<h3>Description</h3>

<p>These data are used for testing Publish package functionality.
</p>


<h3>Format</h3>

<p>A data frame with 27 observations on the following 9 variables.
</p>

<dl>
<dt>Drug</dt><dd></dd>
<dt>Time</dt><dd></dd>
<dt>Drug.Time</dt><dd></dd>
<dt>Dose</dt><dd></dd>
<dt>Mean</dt><dd></dd>
<dt>SD</dt><dd></dd>
<dt>n</dt><dd></dd>
<dt>HazardRatio</dt><dd></dd>
<dt>lower</dt><dd></dd>
<dt>upper</dt><dd></dd>
<dt>p</dt><dd></dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
data(CiTable)
labellist &lt;- split(CiTable[,c("Dose","Mean","SD","n")],CiTable[,"Drug"])
labellist
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")], labels=labellist)


</code></pre>

<hr>
<h2 id='coxphSeries'>Run a series of Cox regression models</h2><span id='topic+coxphSeries'></span>

<h3>Description</h3>

<p>Run a series of Cox regression analyses for a list of predictor variables
and summarize the results in a table.
The Cox models can be adjusted for a fixed set of covariates
</p>
<p>This function runs on <code>coxph</code> from the survival package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coxphSeries(formula, data, vars, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coxphSeries_+3A_formula">formula</code></td>
<td>
<p>The fixed part of the regression formula. For
univariate analyses this is simply <code>Surv(time,status)~1</code>
where <code>Surv(time,status)</code> is the outcome variable. When the
aim is to control the effect of <code>vars</code> in each element of the
series by a fixed set of variables it is
<code>Surv(time,status)~x1+x2</code> where again Surv(time,status) is
the outcome and x1 and x2 are confounders.</p>
</td></tr>
<tr><td><code id="coxphSeries_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> in which the <code>formula</code> gets
evaluated.</p>
</td></tr>
<tr><td><code id="coxphSeries_+3A_vars">vars</code></td>
<td>
<p>A list of variable names, the changing part of the
regression formula.</p>
</td></tr>
<tr><td><code id="coxphSeries_+3A_...">...</code></td>
<td>
<p>passed to publish.coxph</p>
</td></tr>
</table>


<h3>Value</h3>

<p>matrix with results
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(pbc)
## collect hazard ratios from three univariate Cox regression analyses
pbc$edema &lt;- factor(pbc$edema,levels=c("0","0.5","1"),labels=c("0","0.5","1"))
uni.hr &lt;- coxphSeries(Surv(time,status==2)~1,vars=c("edema","bili","protime"),data=pbc)
uni.hr

## control the logistic regression analyses for age and gender
## but collect only information on the variables in `vars'.
controlled.hr &lt;- coxphSeries(Surv(time,status==2)~age+sex,vars=c("edema","bili","protime"),data=pbc)
controlled.hr

</code></pre>

<hr>
<h2 id='Diabetes'>Diabetes data of Dr John Schorling</h2><span id='topic+Diabetes'></span>

<h3>Description</h3>

<p>These data are courtesy of Dr John Schorling, Department of Medicine, University of Virginia School of Medicine.
The data consist of 19 variables on 403 subjects from 1046 subjects who were interviewed in a study to understand
the prevalence of obesity, diabetes, and other cardiovascular risk factors in central Virginia for African Americans.
According to Dr John Hong, Diabetes Mellitus Type II (adult onset diabetes) is associated most strongly with obesity.
The waist/hip ratio may be a predictor in diabetes and heart disease. DM II is also agssociated with hypertension -
they may both be part of &quot;Syndrome X&quot;. The 403 subjects were the ones who were actually screened for diabetes.
Glycosolated hemoglobin &gt; 7.0 is usually taken as a positive diagnosis of diabetes.
</p>


<h3>Format</h3>

<p>A data frame with 205 observations on the following 12 variables.
</p>

<dl>
<dt>id</dt><dd><p>subject id</p>
</dd>
<dt>chol</dt><dd><p>Total Cholesterol</p>
</dd>
<dt>stab.glu</dt><dd><p>Stabilized Glucose</p>
</dd>
<dt>hdl</dt><dd><p>High Density Lipoprotein</p>
</dd>
<dt>ratio</dt><dd><p>Cholesterol/HDL Ratio</p>
</dd>
<dt>glyhb</dt><dd><p>Glycosolated Hemoglobin</p>
</dd>
<dt>location</dt><dd><p>a factor with levels (Buckingham,Louisa)</p>
</dd>
<dt>age</dt><dd><p>age (years)</p>
</dd>
<dt>gender</dt><dd><p>male or female</p>
</dd>
<dt>height</dt><dd><p>height (inches)</p>
</dd>
<dt>height.europe</dt><dd><p>height (cm)</p>
</dd>
<dt>weight</dt><dd><p>weight (pounds)</p>
</dd>
<dt>weight.europe</dt><dd><p>weight (kg)</p>
</dd>
<dt>frame</dt><dd><p>a factor with levels (small,medium,large)</p>
</dd>
<dt>bp.1s</dt><dd><p>First Systolic Blood Pressure</p>
</dd>
<dt>bp.1d</dt><dd><p>First Diastolic Blood Pressure</p>
</dd>
<dt>bp.2s</dt><dd><p>Second Diastolic Blood Pressure</p>
</dd>
<dt>bp.2d</dt><dd><p>Second Diastolic Blood Pressure</p>
</dd>
<dt>waist</dt><dd><p>waist in inches</p>
</dd>
<dt>hip</dt><dd><p>hip in inches</p>
</dd>
<dt>time.ppn</dt><dd><p>Postprandial Time when Labs were Drawn in minutes</p>
</dd>
<dt>AgeGroups</dt><dd><p>Categorized age</p>
</dd>
<dt>BMI</dt><dd><p>Categorized BMI</p>
</dd>
</dl>



<h3>References</h3>

<p>Willems JP, Saunders JT, DE Hunt, JB Schorling: Prevalence of coronary heart disease risk factors among rural blacks: A community-based study. Southern Medical Journal 90:814-820; 1997
Schorling JB, Roach J, Siegel M, Baturka N, Hunt DE, Guterbock TM, Stewart HL: A trial of church-based smoking cessation interventions for rural African Americans. Preventive Medicine 26:92-101; 1997.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Diabetes)

</code></pre>

<hr>
<h2 id='fixRegressionTable'>Expand regression coefficient table</h2><span id='topic+fixRegressionTable'></span>

<h3>Description</h3>

<p>Expand regression coefficient table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixRegressionTable(
  x,
  varnames,
  reference.value,
  reference.style = NULL,
  factorlevels,
  scale = NULL,
  nmiss,
  intercept
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fixRegressionTable_+3A_x">x</code></td>
<td>
<p>object resulting from <code>lm</code>, <code>glm</code> or <code>coxph</code>.</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_varnames">varnames</code></td>
<td>
<p>Names of variables</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_reference.value">reference.value</code></td>
<td>
<p>Reference value for reference categories</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_reference.style">reference.style</code></td>
<td>
<p>Style for showing results for categorical
variables. If <code>"extraline"</code> show an additional line for the
reference category.</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_factorlevels">factorlevels</code></td>
<td>
<p>Levels of the categorical variables.</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_scale">scale</code></td>
<td>
<p>Scale for some or all of the variables</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_nmiss">nmiss</code></td>
<td>
<p>Number of missing values</p>
</td></tr>
<tr><td><code id="fixRegressionTable_+3A_intercept">intercept</code></td>
<td>
<p>Intercept</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function expands results from &quot;regressionTable&quot; with
extralines and columns
</p>
<p>For factor variables the reference group is shown.
For continuous variables the units are shown and
for transformed continuous variables also the scale.
For all variables the numbers of missing values are added.
</p>


<h3>Value</h3>

<p>a table with regression coefficients
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds &lt;tag@biostat.ku.dk&gt;
</p>

<hr>
<h2 id='followupTable'>Summary tables for a given followup time point.</h2><span id='topic+followupTable'></span>

<h3>Description</h3>

<p>Summarize baseline variables in groups defined by outcome
at a given followup time point
</p>


<h3>Usage</h3>

<pre><code class='language-R'>followupTable(formula, data, followup.time, compare.groups, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="followupTable_+3A_formula">formula</code></td>
<td>
<p>Formula A formula whose left hand side is a
<code>Hist</code> object. In some special cases it can also be a
<code>Surv</code> response object.  The right hand side is as in
<code><a href="#topic+utable">utable</a></code>.</p>
</td></tr>
<tr><td><code id="followupTable_+3A_data">data</code></td>
<td>
<p>A data.frame in which all the variables of
<code>formula</code> can be interpreted.</p>
</td></tr>
<tr><td><code id="followupTable_+3A_followup.time">followup.time</code></td>
<td>
<p>Time point at which to evaluate outcome
status.</p>
</td></tr>
<tr><td><code id="followupTable_+3A_compare.groups">compare.groups</code></td>
<td>
<p>Method for comparing groups.</p>
</td></tr>
<tr><td><code id="followupTable_+3A_...">...</code></td>
<td>
<p>Passed to <code>utable</code>. All arguments of <code>utable</code>
can be controlled in this way except for <code>compare.groups</code>
which is set to <code>"Cox"</code>. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>compare.groups!=FALSE</code>, p-values are obtained from stopped Cox regression, i.e., all events are censored at follow-up time.
A univariate Cox regression model is fitted to assess the effect of each variable on the right hand side of the formula on the event hazard and shown is the p-value of <code>anova(fit)</code>, see <code><a href="survival.html#topic+anova.coxph">anova.coxph</a></code>.
</p>


<h3>Value</h3>

<p>Summary table.
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>univariateTable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(pbc)
pbc$edema &lt;- factor(pbc$edema,levels=c("0","0.5","1"),labels=c("0","0.5","1"))
pbc$sex &lt;- factor(pbc$sex,levels=c("m","f"),labels=c("m","f"))
followupTable(Hist(time,status)~age+edema+sex,data=pbc,followup.time=1000)

</code></pre>

<hr>
<h2 id='formatCI'>Formatting confidence intervals</h2><span id='topic+formatCI'></span>

<h3>Description</h3>

<p>Format confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formatCI(
  x,
  lower,
  upper,
  show.x = FALSE,
  handler = "sprintf",
  format = "[l;u]",
  degenerated = "asis",
  digits = 2,
  nsmall = digits,
  sep = "",
  reference.pos,
  reference.label = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formatCI_+3A_x">x</code></td>
<td>
<p>not used (for compatibility with format)</p>
</td></tr>
<tr><td><code id="formatCI_+3A_lower">lower</code></td>
<td>
<p>Numeric vector of lower limits</p>
</td></tr>
<tr><td><code id="formatCI_+3A_upper">upper</code></td>
<td>
<p>Numeric vector of upper limits</p>
</td></tr>
<tr><td><code id="formatCI_+3A_show.x">show.x</code></td>
<td>
<p>Logical. If <code>TRUE</code> show value of x in front of confidence interval.</p>
</td></tr>
<tr><td><code id="formatCI_+3A_handler">handler</code></td>
<td>
<p>Function to format numeric values. Default is
<code>sprintf</code>, also supported are <code>format</code> and
<code>prettyNum</code></p>
</td></tr>
<tr><td><code id="formatCI_+3A_format">format</code></td>
<td>
<p>Character string in which <code>l</code> will be replaced
by the value of the lower limit (argument lower) and <code>u</code>
by the value of the upper upper limit. For example,
<code>(l,u)</code> yields confidence intervals in round parenthesis
in which the upper and lower limits are comma
separated. Default is <code>[l;u]</code>.</p>
</td></tr>
<tr><td><code id="formatCI_+3A_degenerated">degenerated</code></td>
<td>
<p>String to show when lower==upper.  Default is
'&ndash;'</p>
</td></tr>
<tr><td><code id="formatCI_+3A_digits">digits</code></td>
<td>
<p>If handler <code>format</code> or <code>prettyNum</code> used
format numeric vectors.</p>
</td></tr>
<tr><td><code id="formatCI_+3A_nsmall">nsmall</code></td>
<td>
<p>If handler <code>format</code> or <code>prettyNum</code> used
format numeric vectors.</p>
</td></tr>
<tr><td><code id="formatCI_+3A_sep">sep</code></td>
<td>
<p>Field separator</p>
</td></tr>
<tr><td><code id="formatCI_+3A_reference.pos">reference.pos</code></td>
<td>
<p>Position of factor reference</p>
</td></tr>
<tr><td><code id="formatCI_+3A_reference.label">reference.label</code></td>
<td>
<p>Label for factor reference</p>
</td></tr>
<tr><td><code id="formatCI_+3A_...">...</code></td>
<td>
<p>passed to handler</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default format for confidence intervals is [lower; upper].
</p>


<h3>Value</h3>

<p>String vector with confidence intervals
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>plot.ci ci.mean
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x=ci.mean(rnorm(10))
formatCI(lower=x[3],upper=x[4])
formatCI(lower=c(0.001,-2.8413),upper=c(1,3.0008884))
# change format
formatCI(lower=c(0.001,-2.8413),upper=c(1,3.0008884),format="(l, u)")
# show x
formatCI(x=x$mean,lower=x$lower,upper=x$upper,format="(l, u)",show.x=TRUE)

# change of handler function
l &lt;- c(-0.0890139,0.0084736,144.898333,0.000000001)
u &lt;- c(0.03911392,0.3784706,3338944.8821221,0.00001)
cbind(format=formatCI(lower=l,upper=u,format="[l;u)",digits=2,nsmall=2,handler="format"),
      prettyNum=formatCI(lower=l,upper=u,format="[l;u)",digits=2,nsmall=2,handler="prettyNum"),
      sprintf=formatCI(lower=l,upper=u,format="[l;u)",digits=2,nsmall=2,handler="sprintf"))

</code></pre>

<hr>
<h2 id='glmSeries'>Run a series of generalized linear regression analyses</h2><span id='topic+glmSeries'></span>

<h3>Description</h3>

<p>Run a series of generalized linear regression analyses for a list of predictor variables
and summarize the results in a table.
The regression models can be adjusted for a fixed set of covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glmSeries(formula, data, vars, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="glmSeries_+3A_formula">formula</code></td>
<td>
<p>The fixed part of the regression formula. For
univariate analyses this is simply <code>y~1</code> where <code>y</code> is
the outcome variable. When the aim is to control the effect of
<code>vars</code> in each element of the series by a fixed set of
variables it is <code>y~x1+x2</code> where again y is the outcome and x1
and x2 are confounders.</p>
</td></tr>
<tr><td><code id="glmSeries_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> in which we evaluate the formula.</p>
</td></tr>
<tr><td><code id="glmSeries_+3A_vars">vars</code></td>
<td>
<p>A list of variable names, the changing part of the
regression formula.</p>
</td></tr>
<tr><td><code id="glmSeries_+3A_...">...</code></td>
<td>
<p>passed to glm</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix with regression coefficients, one for each element of <code>vars</code>.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Diabetes)
Diabetes$hyper1 &lt;- factor(1*(Diabetes$bp.1s&gt;140))
## collect odds ratios from three univariate logistic regression analyses
uni.odds &lt;- glmSeries(hyper1~1,vars=c("chol","hdl","location"),data=Diabetes,family=binomial)
uni.odds
## control the logistic regression analyses for age and gender
## but collect only information on the variables in `vars'.
controlled.odds &lt;- glmSeries(hyper1~age+gender,
                             vars=c("chol","hdl","location"),
                             data=Diabetes, family=binomial)
controlled.odds
</code></pre>

<hr>
<h2 id='labelUnits'>labelUnits</h2><span id='topic+labelUnits'></span>

<h3>Description</h3>

<p>Label output tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>labelUnits(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="labelUnits_+3A_x">x</code></td>
<td>
<p>A matrix obtained with <code>univariateTable</code>.</p>
</td></tr>
<tr><td><code id="labelUnits_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Modify labels and values of variables in summary tables
</p>


<h3>Value</h3>

<p>The re-labeled matrix
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>univariateTable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Diabetes)
tab &lt;- summary(univariateTable(gender~AgeGroups+chol+waist,data=Diabetes))
publish(tab)
ltab &lt;- labelUnits(tab,"chol"="Cholesterol (mg/dL)","&lt;40"="younger than 40")
publish(ltab)

## pass labels immediately to utable
utable(gender~AgeGroups+chol+waist,data=Diabetes,
      "chol"="Cholesterol (mg/dL)","&lt;40"="younger than 40")

## sometimes useful to state explicitly which variables value
## should be re-labelled
utable(gender~AgeGroups+chol+waist,data=Diabetes,
      "chol"="Cholesterol (mg/dL)","AgeGroups.&lt;40"="younger than 40")
</code></pre>

<hr>
<h2 id='lazyDateCoding'>Efficient coding of date variables</h2><span id='topic+lazyDateCoding'></span>

<h3>Description</h3>

<p>This function eases the process of generating date variables.
All variables in a data.frame which match a regular expression
are included
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lazyDateCoding(data, format, pattern, varnames, testlength = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lazyDateCoding_+3A_data">data</code></td>
<td>
<p>Data frame in which to search for date variables.</p>
</td></tr>
<tr><td><code id="lazyDateCoding_+3A_format">format</code></td>
<td>
<p>passed to as.Date</p>
</td></tr>
<tr><td><code id="lazyDateCoding_+3A_pattern">pattern</code></td>
<td>
<p>match date variables</p>
</td></tr>
<tr><td><code id="lazyDateCoding_+3A_varnames">varnames</code></td>
<td>
<p>variable names</p>
</td></tr>
<tr><td><code id="lazyDateCoding_+3A_testlength">testlength</code></td>
<td>
<p>how many rows of data should be evaluated to guess the format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The code needs to be copy-and-pasted from the R-output
buffer into the R-code buffer. This can be customized
for the really efficiently working people, e.g., in emacs.
</p>


<h3>Value</h3>

<p>R-code one line for each variable.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(x0="190101",x1=c("12/8/2019"),x2="12-8-2019",x3="20190812",stringsAsFactors=FALSE)
lazyDateCoding(d,pattern="x")
lazyDateCoding(d,pattern="3")

</code></pre>

<hr>
<h2 id='lazyFactorCoding'>Efficient coding of factor levels</h2><span id='topic+lazyFactorCoding'></span>

<h3>Description</h3>

<p>This function eases the process of generating factor variables
with relevant labels. All variables in a data.frame with less than
a user set number of levels result in a line which suggests levels and
labels. The result can then be modified for use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lazyFactorCoding(data, max.levels = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lazyFactorCoding_+3A_data">data</code></td>
<td>
<p>Data frame in which to search for categorical variables.</p>
</td></tr>
<tr><td><code id="lazyFactorCoding_+3A_max.levels">max.levels</code></td>
<td>
<p>Treat non-factor variables only if the number of unique values less than max.levels. Defaults to 10.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The code needs to be copy-and-pasted from the R-output
buffer into the R-code buffer. This can be customized
for the really efficiently working people e.g. in emacs.
</p>


<h3>Value</h3>

<p>R-code one line for each variable.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
lazyFactorCoding(Diabetes)

</code></pre>

<hr>
<h2 id='org'>Wrapper function for publish with output format org</h2><span id='topic+org'></span>

<h3>Description</h3>

<p>Wrapper for <code>publish(...,org=TRUE)</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>org(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="org_+3A_x">x</code></td>
<td>
<p>object to format as org</p>
</td></tr>
<tr><td><code id="org_+3A_...">...</code></td>
<td>
<p>passed to publish</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See publish
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>

<hr>
<h2 id='parseInteractionTerms'>Parse interaction terms</h2><span id='topic+parseInteractionTerms'></span>

<h3>Description</h3>

<p>Parse interaction terms for regression tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseInteractionTerms(
  terms,
  xlevels,
  units,
  format.factor,
  format.contrast,
  format.scale,
  format.scale.unit,
  sep = ": ",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parseInteractionTerms_+3A_terms">terms</code></td>
<td>
<p>Terms of a formula</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_xlevels">xlevels</code></td>
<td>
<p>Factor levels corresponding to the variables in
<code>terms</code></p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_units">units</code></td>
<td>
<p>named list with unit labels. names should match variable names in formula.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_format.factor">format.factor</code></td>
<td>
<p>For categorical variables. A string which specifies the print format for factor labels.
The string has to contain the keywords <code>"var"</code> and <code>"level"</code> which will be
replaced by the name of the variable and the current level, respectively.
Default is <code>"var(level)"</code>.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_format.contrast">format.contrast</code></td>
<td>
<p>For categorical variables. A string which specifies the print format for constrast statements.
The string has to contain the keywords <code>"var"</code>, <code>"level"</code> and <code>"ref"</code> which will be
replaced by the name of the variable, the current level and the reference level, respectively.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_format.scale">format.scale</code></td>
<td>
<p>A string which specifies the print format for continuous variables without units. 
The string has to contain the keyword <code>"var"</code> which will be
replaced by the name of the variable and the unit, respectively.
Default is <code>"var"</code>.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_format.scale.unit">format.scale.unit</code></td>
<td>
<p>A string which specifies the print format for continuous variables with units. 
The string has to contain the keywords <code>"var"</code> and <code>"unit"</code> which will be
replaced by the name of the variable and the unit, respectively.
Default is <code>"var(unit)"</code>.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_sep">sep</code></td>
<td>
<p>a character string to separate the terms. Default is <code>": "</code>.</p>
</td></tr>
<tr><td><code id="parseInteractionTerms_+3A_...">...</code></td>
<td>
<p>Not yet used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Prepare a list of contrasts which combines regression coefficients
to describe statistical interactions.
</p>


<h3>Value</h3>

<p>List of contrasts which can be passed to
<code>lava::estimate</code>.
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>lava::estimate
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tt &lt;- terms(formula(SBP~age+sex*BMI))
xlev &lt;- list(sex=c("male","female"),BMI=c("normal","overweight","obese"))
parseInteractionTerms(terms=tt,xlevels=xlev)
parseInteractionTerms(terms=tt,xlevels=xlev,format.factor="var level")
parseInteractionTerms(terms=tt,xlevels=xlev,format.contrast="var(level:ref)")

tt2 &lt;- terms(formula(SBP~age*factor(sex)+BMI))
xlev2 &lt;- list("factor(sex)"=c("male","female"))
parseInteractionTerms(terms=tt2,xlevels=xlev2)
parseInteractionTerms(terms=tt2,xlevels=xlev2,units=list(age="yrs"))


data(Diabetes)
fit &lt;- glm(bp.2s~age*factor(gender)+BMI,data=Diabetes)
parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels,
                      format.scale="var -- level:ref",units=list("age"='years'))
parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels,
                      format.scale.unit="var [unit]",units=list("age"='years'))
it &lt;- parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels)
ivars &lt;- unlist(lapply(it,function(x)attr(x,"variables")))
lava::estimate(fit,function(p)lapply(unlist(it),eval,envir=sys.parent(-1)))


</code></pre>

<hr>
<h2 id='plot.ci'>Plot confidence intervals</h2><span id='topic+plot.ci'></span>

<h3>Description</h3>

<p>Function to plot confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ci'
plot(x, xlim, xlab = "", labels, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.ci_+3A_x">x</code></td>
<td>
<p>List, data.frame or other object of this form containing point estimates (first element) and the corresponding confidence intervals as elements lower and upper.</p>
</td></tr>
<tr><td><code id="plot.ci_+3A_xlim">xlim</code></td>
<td>
<p>Limit of the x-axis</p>
</td></tr>
<tr><td><code id="plot.ci_+3A_xlab">xlab</code></td>
<td>
<p>Label for the y-axis</p>
</td></tr>
<tr><td><code id="plot.ci_+3A_labels">labels</code></td>
<td>
<p>labels</p>
</td></tr>
<tr><td><code id="plot.ci_+3A_...">...</code></td>
<td>
<p>Used to transport arguments to <code>plotConfidence</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to plot means and other point estimates with confidence
intervals
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Diabetes)
x=ci.mean(bp.2s~AgeGroups,data=Diabetes)
plot(x,title.labels="Age groups",xratio=c(0.4,0.3))
x=ci.mean(bp.2s/500~AgeGroups+gender,data=Diabetes)
plot(x,xratio=c(0.4,0.2))
plot(x,xratio=c(0.4,0.2),
     labels=split(x$labels[,"AgeGroups"],x$labels[,"gender"]),
     title.labels="Age groups")
## Not run: 
plot(x, leftmargin=0, rightmargin=0)
plotConfidence(x, leftmargin=0, rightmargin=0)

data(CiTable)
with(CiTable,plotConfidence(x=list(HazardRatio),
                               lower=lower,
                               upper=upper,
                               labels=CiTable[,2:6],
                               factor.reference.pos=c(1,10,19),
                               format="(u-l)",
                               points.col="blue",
                               digits=2))

with(CiTable,Publish::plot.ci(x=list(HazardRatio),
                               lower=lower,
                               upper=upper,
                               labels=CiTable[,2:6],
                               factor.reference.pos=c(1,10,19),
                               format="(u-l)",
                               points.col="blue",
                               digits=2,
                               leftmargin=-2,
                               title.labels.cex=1.1,
                               labels.cex=0.8,values.cex=0.8))

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.regressionTable'>Plotting regression coefficients with confidence limits</h2><span id='topic+plot.regressionTable'></span>

<h3>Description</h3>

<p>Plotting regression coefficients with confidence limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'regressionTable'
plot(x, xlim, xlab, style = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.regressionTable_+3A_x">x</code></td>
<td>
<p>regression table obtained with regressionTable</p>
</td></tr>
<tr><td><code id="plot.regressionTable_+3A_xlim">xlim</code></td>
<td>
<p>Limits for x-axis</p>
</td></tr>
<tr><td><code id="plot.regressionTable_+3A_xlab">xlab</code></td>
<td>
<p>Label for x-axis</p>
</td></tr>
<tr><td><code id="plot.regressionTable_+3A_style">style</code></td>
<td>
<p>Determines how to arrange variable names and their corresponding units</p>
</td></tr>
<tr><td><code id="plot.regressionTable_+3A_...">...</code></td>
<td>
<p>passed to plotConfidence</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>regressionTable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## linear regression
data(Diabetes)
f &lt;- glm(bp.1s~AgeGroups+chol+gender+location,data=Diabetes)
rtf &lt;- regressionTable(f,factor.reference = "inline")
plot(rtf,cex=1.3)

## logistic regression
data(Diabetes)
f &lt;- glm(I(BMI&gt;25)~bp.1s+AgeGroups+chol+gender+location,data=Diabetes,family=binomial)
rtf &lt;- regressionTable(f,factor.reference = "inline")
plot(rtf,cex=1.3)

## Poisson regression
data(trace)
fit &lt;- glm(dead ~ smoking+ sex+ age+Time+offset(log(ObsTime)), family = poisson,data=trace)
rtab &lt;- regressionTable(fit,factor.reference = "inline")
plot(rtab,xlim=c(0.85,1.15),cex=1.8,xaxis.cex=1.5)

## Cox regression
library(survival)
data(pbc)
coxfit &lt;- coxph(Surv(time,status!=0)~age+log(bili)+log(albumin)+factor(edema)+sex,data=pbc)
pubcox &lt;- publish(coxfit)
plot(pubcox,cex=1.5,xratio=c(0.4,0.2))

</code></pre>

<hr>
<h2 id='plot.subgroupAnalysis'>plot.subgroupAnalysis</h2><span id='topic+plot.subgroupAnalysis'></span>

<h3>Description</h3>

<p>This function operates on a &quot;subgroupAnalysis&quot; object to produce a formatted
table and a forest plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'subgroupAnalysis'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.subgroupAnalysis_+3A_x">x</code></td>
<td>
<p>- a subgroupAnalysis object</p>
</td></tr>
<tr><td><code id="plot.subgroupAnalysis_+3A_...">...</code></td>
<td>
<p>- passed on to plotConfidence</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function produces a formatted table of a subgroupAnalysis object and
adds a forest plot.  If further details needs attention before plotting is
is advisable use adjust the table produced by the summary function and then
plotting with the plotConfidence function
</p>


<h3>Author(s)</h3>

<p>Christian Torp-Pedersen
</p>


<h3>See Also</h3>

<p>subgroupAnalysis, plotConfidence
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#load libraries
library(Publish)
library(survival)
library(data.table)
data(traceR) #get dataframe traceR
setDT(traceR)
traceR[,':='(wmi2=factor(wallMotionIndex&lt;0.9,levels=c(TRUE,FALSE), 
                labels=c("bad","good")),
             abd2=factor(abdominalCircumference&lt;95, levels=c(TRUE,FALSE), 
                labels=c("slim","fat")),
             sex=factor(sex))]
fit_cox &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR)
# Selected subgroups - univariable analysis
sub_cox &lt;- subgroupAnalysis(fit_cox,traceR,treatment="treatment",
  subgroup=c("smoking","sex","wmi2","abd2")) # subgroups as character string
plot(sub_cox)  
</code></pre>

<hr>
<h2 id='plotConfidence'>Plot confidence intervals</h2><span id='topic+plotConfidence'></span>

<h3>Description</h3>

<p>Function to plot confidence intervals with their values and additional labels.
One anticipated use of this function involves first the generation of a regression object,
then arrangement of a result table with &quot;regressionTable&quot;, further arrangment of table with
with e.g. &quot;fixRegressionTable&quot; and various user defined changes - and then finally table
along with forest plot using the current function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotConfidence(
  x,
  y.at,
  lower,
  upper,
  pch = 16,
  cex = 1,
  lwd = 1,
  col = 4,
  xlim,
  xlab,
  labels,
  title.labels,
  values,
  title.values,
  section.pos,
  section.sep,
  section.title = NULL,
  section.title.x,
  section.title.offset,
  order,
  leftmargin = 0.025,
  rightmargin = 0.025,
  stripes,
  factor.reference.pos,
  factor.reference.label = "Reference",
  factor.reference.pch = 16,
  refline = 1,
  title.line = TRUE,
  xratio,
  y.offset = 0,
  y.title.offset,
  digits = 2,
  format,
  extremearrows.length = 0.05,
  extremearrows.angle = 30,
  add = FALSE,
  layout = TRUE,
  xaxis = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotConfidence_+3A_x">x</code></td>
<td>
<p>Either a vector containing the point estimates or a list
whose first element contains the point estimates. Further list
elements can contain the confidence intervals and labels. In this
case the list needs to have names 'lower' and 'upper' to indicate
the values of the lower and the upper limits of the confidence
intervals, respectively, and may have an element 'labels' which is
a vector or matrix or list with labels.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_y.at">y.at</code></td>
<td>
<p>Optional vector of y-position for the confidence intervals and corresponding values and labels.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_lower">lower</code></td>
<td>
<p>Lower confidence limits. Used if object <code>x</code> is a
vector and if <code>x</code> is a list <code>lower</code> overwrites element
<code>x$lower</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_upper">upper</code></td>
<td>
<p>Upper confidence limits. Used if object <code>x</code> is a
vector and if <code>x</code> is a list <code>upper</code> overwrites element
<code>x$upper</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_pch">pch</code></td>
<td>
<p>Symbol for points.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_cex">cex</code></td>
<td>
<p>Defaults size of all figures and plotting symbol.
Single elements are controlled separately. See <code>...</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_lwd">lwd</code></td>
<td>
<p>Default width of all lines Single elements are
controlled separately. See <code>...</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_col">col</code></td>
<td>
<p>Default colour of confidence intervals.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_xlim">xlim</code></td>
<td>
<p>Plotting limits for the confidence intervals. See also
<code>xratio</code> on how to control the layout.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_xlab">xlab</code></td>
<td>
<p>Label for the x-axis.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_labels">labels</code></td>
<td>
<p>Vector or matrix or list with <code>labels</code>. Used if
object <code>x</code> is a vector and if <code>x</code> is a list it
overwrites element <code>x$labels</code>. To avoid drawing of labels, set <code>labels=FALSE</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_title.labels">title.labels</code></td>
<td>
<p>Main title for the column which shows the <code>labels</code>. If <code>labels</code>
is a matrix or list <code>title.labels</code> should be a vector with as
many elements as labels has columns or elements.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_values">values</code></td>
<td>
<p>Either logical or vector, matrix or list with
values. If <code>values=TRUE</code> values are constructed according to
<code>format</code> from <code>lower</code> and <code>upper</code> overwrites
constructed values. If <code>values=FALSE</code> do not draw values.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_title.values">title.values</code></td>
<td>
<p>Main title for the column <code>values</code>. If <code>values</code>
is a matrix or list <code>title.labels</code> should be a vector with as
many elements as values has columns or elements.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_section.pos">section.pos</code></td>
<td>
<p>Vector with y-axis posititions for section.titles.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_section.sep">section.sep</code></td>
<td>
<p>Amount of space between paragraphs (applies only if <code>labels</code> is a named  list)</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_section.title">section.title</code></td>
<td>
<p>Intermediate section headings.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_section.title.x">section.title.x</code></td>
<td>
<p>x-position for section.titles</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_section.title.offset">section.title.offset</code></td>
<td>
<p>Y-offset for section.titles</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_order">order</code></td>
<td>
<p>Order of the three columns: labels, confidence limits,
values. See examples.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_leftmargin">leftmargin</code></td>
<td>
<p>Percentage of plotting region used for
leftmargin. Default is 0.025. See also Details.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_rightmargin">rightmargin</code></td>
<td>
<p>Percentage of plotting region used for
rightmargin. Default is 0.025. See also Details.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_stripes">stripes</code></td>
<td>
<p>Vector of up to three Logicals. If <code>TRUE</code> draw
stripes into the background. The first applies to the labels, the
second to the graphical presentation of the confidence intervals
and the third to the values. Thus, stripes</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_factor.reference.pos">factor.reference.pos</code></td>
<td>
<p>Position at which factors attain
reference values.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_factor.reference.label">factor.reference.label</code></td>
<td>
<p>Label to use at
<code>factor.reference.pos</code> instead of values.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_factor.reference.pch">factor.reference.pch</code></td>
<td>
<p>Plotting symbol to use at
<code>factor.reference.pos</code></p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_refline">refline</code></td>
<td>
<p>Position of a vertical line to indicate the null
hypothesis. Default is 1 which would work for odds ratios and
hazard ratios.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_title.line">title.line</code></td>
<td>
<p>Position of a horizontal line to separate the title line from the plot</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_xratio">xratio</code></td>
<td>
<p>One or two values between 0 and 1 which determine
how to split the plot window in horizontal x-direction. If there
are two columns (labels, CI) or (CI, values) only one value is used
and the default is 0.618 (goldener schnitt) which gives the
graphical presentation of the confidence intervals 38.2 
graph. The remaining 61.8 
If there are three columns (labels, CI, values), xratio has two
values which default to fractions of 0.7 according to the relative
widths of labels and values, thus by default only 0.3 are used for
the graphical presentation of the confidence intervals. The
remaining 30 
confidence intervals. See examles.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_y.offset">y.offset</code></td>
<td>
<p>Either a single value or a vector determining the
vertical offset of all rows. If it is a single value all rows are
shifted up (or down if negative) by this value. This can be used
to add a second set of confidence intervals to an existing graph
or to achieve a visual grouping of rows that belong
together. See examples.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_y.title.offset">y.title.offset</code></td>
<td>
<p>Numeric value by which to vertically shift
the titles of the labels and values.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_digits">digits</code></td>
<td>
<p>Number of digits, passed to <code>pubformat</code> and
<code>formatCI</code>.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_format">format</code></td>
<td>
<p>Format for constructing values of confidence
intervals. Defaults to '(u;l)' if there are negative lower or
upper values and to '(u-l)' otherwise.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_extremearrows.length">extremearrows.length</code></td>
<td>
<p>Length of the arrows in case of
confidence intervals that stretch beyond xlim.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_extremearrows.angle">extremearrows.angle</code></td>
<td>
<p>Angle of the arrows in case of
confidence intervals that stretch beyond xlim.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_add">add</code></td>
<td>
<p>Logical. If <code>TRUE</code> do not draw labels or values
and add confidence intervals to existing plot.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_layout">layout</code></td>
<td>
<p>Logical. If <code>FALSE</code> do not call layout. This is useful when
several plotConfidence results should be combined in one graph and hence layout is called
externally.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_xaxis">xaxis</code></td>
<td>
<p>Logical. If <code>FALSE</code> do not draw x-axis.</p>
</td></tr>
<tr><td><code id="plotConfidence_+3A_...">...</code></td>
<td>
<p>Used to control arguments of the following subroutines:
<code>plot</code>: Applies to plotting frame of the graphical
presentation of confidence intervals. Use arguments of
<code>plot</code>, e.g., <code>plot.main="Odds ratio"</code>.  <code>points</code>,
<code>arrows</code>: Use arguments of <code>points</code> and <code>arrows</code>,
respectively. E.g., <code>points.pch=8</code> and <code>arrows.lwd=2</code>.
<code>refline</code>: Use arguments of <code>segments</code>, e.g.,
<code>refline.lwd=2</code>. See <a href="graphics.html#topic+segments">segments</a>.  <code>labels</code>,
<code>values</code>, <code>title.labels</code>, <code>title.values</code>: Use
arguments of <code>text</code>, e.g., <code>labels.col="red"</code> or
<code>title.values.cex=1.8</code>.  <code>xaxis</code>: Use arguments of
<code>axis</code>, e.g., <code>xaxis.at=c(-0.3,0,0.3)</code> <code>xlab</code>: Use
arguments of <code>mtext</code>, e.g., <code>xlab.line=2</code>.
<code>stripes</code>: Use arguments of <code>stripes</code>. See examples.
See examples for usage.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to plot means and other point estimates with confidence intervals,
their values and additional labels .
Horizonal margins as determined by par()$mar are ignored.
Instead layout is used to divide the plotting region horizontally
into two or three parts plus leftmargin and rightmargin.
</p>
<p>When values is FALSE there are only two parts. The default order is
labels on the left confidence intervals on the right.
When no labels are given or labels is FALSE there are only two parts. The default order is
confidence intervals on the left values on the right.
</p>
<p>The default order of three parts from left to right is
labels, confidence intervals, values. The order can be changed as shown
by the examples below. The relative widths of the two or three parts
need to be adapted to the actual size of the text of the labels. This
depends on the plotting device and the size of the font and figures and
thus has to be adjusted manually.
</p>
<p>Oma can be used to further control horizontal margins, e.g., par(oma=c(0,4,0,4)).
</p>
<p>If confidence limits extend beyond the range determined by xlim, then
arrows are drawn at the x-lim borders to indicate that the confidence
limits continue.
</p>


<h3>Value</h3>

<p>List of dimensions and coordinates
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(Publish)
data(CiTable) 

## A first draft version of the plot is obtained as follows
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper","p")],
          labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")])

## if argument labels is a named list the table is subdivided:
labellist &lt;- split(CiTable[,c("Dose","Time","Mean","SD","n")],CiTable[,"Drug"])
labellist
## the data need to be ordered accordingly
CC= data.table::rbindlist(split(CiTable[,c("HazardRatio","lower","upper")],CiTable[,"Drug"]))
plotConfidence(x=CC, labels=labellist)


## The graph consist of at most three columns:
##
## column 1: labels
## column 2: printed values of the confidence intervals
## column 3: graphical presentation of the confidence intervals
##
## NOTE: column 3 appears always, the user decides if also
##       column 1, 2 should appear
##
## The columns are arranged with the function layout
## and the default order is 1,3,2 such that the graphical
## display of the confidence intervals appears in the middle
##
## the order of appearance of the three columns can be changed as follows
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               order=c(1,3,2))
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               order=c(2,3,1))
## if there are only two columns the order is 1, 2
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               values=FALSE,
               order=c(2,1))
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               values=FALSE,
               order=c(1,2))



## The relative size of the columns needs to be controlled manually
## by using the argument xratio. If there are only two columns
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xratio=c(0.4,0.15))

## The amount of space on the left and right margin can be controlled
## as follows:
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xratio=c(0.4,0.15),
               leftmargin=0.1,rightmargin=0.00)

## The actual size of the current graphics device determines
## the size of the figures and the space between them.
## The sizes and line widths are increased as follows:
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               xlab="Hazard ratio",
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               points.cex=3,
               cex=2,
               lwd=3,
               xaxis.lwd=1.3,
               xaxis.cex=1.3)
## Note that 'cex' of axis ticks is controlled via 'par' but
## cex of the label via argument 'cex' of 'mtext'.
## The sizes and line widths are decreased as follows:
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               cex=0.8,
               lwd=0.8,
               xaxis.lwd=0.8,
               xaxis.cex=0.8)

## Another good news is that all figures can be controlled separately

## The size of the graphic device can be controlled in the usual way, e.g.:
## Not run: 
    pdf("~/tmp/testCI.pdf",width=8,height=8)
    plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
                   labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")])
    dev.off()

## End(Not run)

## More control of the x-axis and confidence intervals that
## stretch outside the x-range end in an arrow. 
## the argument xlab.line adjusts the distance of the x-axis
## label from the graph
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               xlab="Hazard ratio",
               xlab.line=1.8,
               xaxis.at=c(0.8,1,1.3),
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlim=c(0.8,1.3))

## log-scale
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               xlab="Hazard ratio",
               xlab.line=1.8,
               xaxis.at=c(0.8,1,1.3),
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlim=c(0.8,1.3),plot.log="x")
## More pronounced arrows
## Coloured xlab expression
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               xlab=expression(HR[1](s)),
               xlab.line=1.8,
               xlab.col="darkred",
               extremearrows.angle=50,
               extremearrows.length=0.1,
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlim=c(0.8,1.3))

## Controlling the labels and their titles
## and the values and their titles
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlab="Hazard ratio",
               title.values=expression(bold(HR (CI[95]))),
               title.labels=c("Drug/Time","Dose","Mean","St.dev.","N"),
               factor.reference.pos=c(1,10,19),
               factor.reference.pch=16,
               cex=1.3,
               xaxis.at=c(0.75,1,1.25,1.5,2))

## For factor reference groups, one may want to replace the
## confidence intervals by the word Reference, as in the previous example.
## To change the word 'Reference' we use the argument factor.reference.label:
## To change the plot symbol for the reference lines factor.reference.pch
## To remove the plot symbol in the reference lines use 'NA' as follows:
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlab="Hazard ratio",
               factor.reference.label="Ref",
               title.values=expression(bold(HR (CI[95]))),
               title.labels=c("Drug/Time","Dose","Mean","St.dev.","N"),
               factor.reference.pos=c(1,10,19),
               factor.reference.pch=NA,
               cex=1.3,
               xaxis.at=c(0.75,1,1.25,1.5,2))


## changing the style of the graphical confidence intervals
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               xlab="Hazard ratio",
               factor.reference.pos=c(1,10,19),
               points.pch=15,
               points.col=rainbow(27),
               points.cex=2,
               arrows.col="darkblue",
               cex=1.3,
               order=c(1,3,2),
               xaxis.at=c(0.75,1,1.25,1.5))

## the values column of the graph can have multiple columns as well
## to illustrate this we create the confidence intervals
## before calling the function and then cbind them
## to the pvalues
HR &lt;- pubformat(CiTable[,6])
CI95 &lt;- formatCI(lower=CiTable[,7],upper=CiTable[,8],format="(l-u)")
pval &lt;- format.pval(CiTable[,9],digits=3,eps=10^{-3})
pval[pval=="NA"] &lt;- ""
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               values=list("HR"=HR,"CI-95"=CI95,"P-value"=pval),
               cex=1.2,
               xratio=c(0.5,0.3))

## Finally, vertical columns can be delimited with background color
## NOTE: this may slow things down and potentially create
##       large figures (many bytes)
col1 &lt;- rep(c(prodlim::dimColor("green",density=22),
              prodlim::dimColor("green")),length.out=9)
col2 &lt;- rep(c(prodlim::dimColor("orange",density=22),
              prodlim::dimColor("orange")),length.out=9)
col3 &lt;- rep(c(prodlim::dimColor("blue",density=22),
              prodlim::dimColor("blue")),length.out=9)
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               stripes=c(1,0,1),
               stripes.col=c(col1,col2,col3))
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               stripes=c(1,1,1),
               stripes.col=c(col1,col2,col3))

threegreens &lt;- c(prodlim::dimColor("green",density=55),
                 prodlim::dimColor("green",density=33),
                 prodlim::dimColor("green",density=22))
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
               labels=CiTable[,c("Drug.Time","Dose","Mean","SD","n")],
               values=FALSE,
               xlim=c(0.75,1.5),
               stripes=c(1,1,1),
               xratio=c(0.5,0.15),
               stripes.horizontal=c(0,9,18,27)+0.5,
               stripes.col=threegreens)

# combining multiple plots into one
layout(t(matrix(1:5)))
plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
       labels=CiTable[,c("Mean","n")],
       layout=FALSE)
 plotConfidence(x=CiTable[,c("HazardRatio","lower","upper")],
       layout=FALSE)


</code></pre>

<hr>
<h2 id='print.ci'>Print confidence intervals</h2><span id='topic+print.ci'></span>

<h3>Description</h3>

<p>Print confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ci'
print(x, se = FALSE, print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.ci_+3A_x">x</code></td>
<td>
<p>Object containing point estimates and the corresponding
confidence intervals</p>
</td></tr>
<tr><td><code id="print.ci_+3A_se">se</code></td>
<td>
<p>If <code>TRUE</code> add the standard error.</p>
</td></tr>
<tr><td><code id="print.ci_+3A_print">print</code></td>
<td>
<p>Logical: if <code>FALSE</code> do not actually print
confidence intervals but just return them invisibly.</p>
</td></tr>
<tr><td><code id="print.ci_+3A_...">...</code></td>
<td>
<p>passed to summary.ci</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This format of the confidence intervals is user-manipulable.
</p>


<h3>Value</h3>

<p>A string: the formatted confidence intervals
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>ci plot.ci formatCI summary.ci
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(lava)
m &lt;- lvm(Y~X)
m &lt;- categorical(m,Y~X,K=4)
set.seed(4)
d &lt;- sim(m,24)
ci.mean(Y~X,data=d)
x &lt;- ci.mean(Y~X,data=d)
print(x,format="(l,u)")
</code></pre>

<hr>
<h2 id='print.subgroupAnalysis'>Printing univariate tables</h2><span id='topic+print.subgroupAnalysis'></span>

<h3>Description</h3>

<p>Print function for subgroupAnalysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'subgroupAnalysis'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.subgroupAnalysis_+3A_x">x</code></td>
<td>
<p>- An object obtained with <code>subgroupAnalysis</code></p>
</td></tr>
<tr><td><code id="print.subgroupAnalysis_+3A_...">...</code></td>
<td>
<p>Passed to summary.subgroupAnalysis</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is simply calling <code>summary.subgroupAnalysis</code>
</p>


<h3>Value</h3>

<p>The result of <code>summary.subgroupAnalysis(x)</code>
</p>


<h3>Author(s)</h3>

<p>Christian Torp-Pedersen (ctp@heart.dk)
</p>


<h3>See Also</h3>

<p><code>subgroupAnalysis</code>
</p>

<hr>
<h2 id='print.table2x2'>print results of 2x2 contingency table analysis</h2><span id='topic+print.table2x2'></span>

<h3>Description</h3>

<p>print results of 2x2 contingency table analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'table2x2'
print(x, digits = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.table2x2_+3A_x">x</code></td>
<td>
<p>object obtained with table2x2</p>
</td></tr>
<tr><td><code id="print.table2x2_+3A_digits">digits</code></td>
<td>
<p>rounding digits</p>
</td></tr>
<tr><td><code id="print.table2x2_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible x
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>table2x2
</p>


<h3>Examples</h3>

<pre><code class='language-R'>table2x2(table("marker"=rbinom(100,1,0.4),"response"=rbinom(100,1,0.1)))
table2x2(matrix(c(71,18,38,8),ncol=2),stats="table")
table2x2(matrix(c(71,18,38,8),ncol=2),stats=c("rr","fisher"))
</code></pre>

<hr>
<h2 id='print.univariateTable'>Printing univariate tables</h2><span id='topic+print.univariateTable'></span>

<h3>Description</h3>

<p>Print function for univariate tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'univariateTable'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.univariateTable_+3A_x">x</code></td>
<td>
<p>An object obtained with <code>univariateTable</code></p>
</td></tr>
<tr><td><code id="print.univariateTable_+3A_...">...</code></td>
<td>
<p>Passed to summary.univariateTable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is simply calling <code>summary.univariateTable</code>
</p>


<h3>Value</h3>

<p>The result of <code>summary.univariateTable(x)</code>
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p><code>univariateTable</code>
</p>

<hr>
<h2 id='pubformat'>Format numbers for publication</h2><span id='topic+pubformat'></span>

<h3>Description</h3>

<p>Format numbers according to a specified handler function.
Currently supported are sprintf, format and prettyNum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pubformat(x, digits = 2, nsmall = digits, handler = "sprintf", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pubformat_+3A_x">x</code></td>
<td>
<p>numeric vector</p>
</td></tr>
<tr><td><code id="pubformat_+3A_digits">digits</code></td>
<td>
<p>number of digits</p>
</td></tr>
<tr><td><code id="pubformat_+3A_nsmall">nsmall</code></td>
<td>
<p>see handler</p>
</td></tr>
<tr><td><code id="pubformat_+3A_handler">handler</code></td>
<td>
<p>String specififying the name of the function which should
perform the formatting. See <code>sprintf</code>, <code>format</code> and <code>prettyNum</code>.</p>
</td></tr>
<tr><td><code id="pubformat_+3A_...">...</code></td>
<td>
<p>Passed to handler function if applicable, i.e., not to <code>sprintf</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Formatted number
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p><code>sprintf</code>, <code>format</code>, <code>prettyNum</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pubformat(c(0.000143,12.8,1))
pubformat(c(0.000143,12.8,1),handler="format")
pubformat(c(0.000143,12.8,1),handler="format",trim=TRUE)
pubformat(c(0.000143,12.8,1),handler="prettyNum")
</code></pre>

<hr>
<h2 id='publish'>Publishing tables and figures</h2><span id='topic+publish'></span>

<h3>Description</h3>

<p>Publish provides summary functions for data
and results of statistical analysis in ready-for-publication
design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish_+3A_object">object</code></td>
<td>
<p>object to be published</p>
</td></tr>
<tr><td><code id="publish_+3A_...">...</code></td>
<td>
<p>Passed to method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some warnings are currently suppressed.
</p>


<h3>Value</h3>

<p>Tables and figures
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds  &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>publish.CauseSpecificCox publish.ci publish.coxph publish.glm publish.riskRegression publish.survdiff
</p>

<hr>
<h2 id='publish.CauseSpecificCox'>Tabulizing cause-specific hazard ratio from all causes with confidence limits and Wald test p-values.</h2><span id='topic+publish.CauseSpecificCox'></span>

<h3>Description</h3>

<p>Publish cause-specific Cox models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CauseSpecificCox'
publish(
  object,
  cause,
  confint.method,
  pvalue.method,
  factor.reference = "extraline",
  units = NULL,
  print = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.CauseSpecificCox_+3A_object">object</code></td>
<td>
<p>Cause-specific hazard model obtained with
<code>CSC</code>.</p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_cause">cause</code></td>
<td>
<p>Show a table for this cause. If omitted, list all
causes.</p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_confint.method">confint.method</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_pvalue.method">pvalue.method</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_factor.reference">factor.reference</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_units">units</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> print the table(s).</p>
</td></tr>
<tr><td><code id="publish.CauseSpecificCox_+3A_...">...</code></td>
<td>
<p>passed on to control formatting of parameters,
confidence intervals and p-values.  See
<code>summary.regressionTable</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The cause-specific hazard ratio's are combined into one table.
</p>


<h3>Value</h3>

<p>Table with cause-specific hazard ratios, confidence limits and p-values.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds &lt;tab@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("riskRegression",quietly=TRUE)){
library(riskRegression)
library(prodlim)
library(survival)
data(Melanoma,package="riskRegression")
fit1 &lt;- CSC(list(Hist(time,status)~sex,Hist(time,status)~invasion+epicel+age),
            data=Melanoma)
publish(fit1)
publish(fit1,pvalue.stars=TRUE)
publish(fit1,factor.reference="inline",units=list("age"="years"))

# wide format (same variables in both Cox regression formula) 
fit2 &lt;- CSC(Hist(time,status)~invasion+epicel+age, data=Melanoma)
publish(fit2)

# with p-values
x &lt;- publish(fit2,print=FALSE)
table &lt;- cbind(x[[1]]$regressionTable,
           x[[2]]$regressionTable[,-c(1,2)])
}

</code></pre>

<hr>
<h2 id='publish.ci'>Publish tables with confidence intervals</h2><span id='topic+publish.ci'></span>

<h3>Description</h3>

<p>Publish tables with confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ci'
publish(object, format = "[u;l]", se = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.ci_+3A_object">object</code></td>
<td>
<p>Object of class ci containing point estimates and the
corresponding confidence intervals</p>
</td></tr>
<tr><td><code id="publish.ci_+3A_format">format</code></td>
<td>
<p>A string which indicates the format used for
confidence intervals.  The string is passed to
<code><a href="#topic+formatCI">formatCI</a></code> with two arguments: the lower and the upper
limit. For example <code>'(l;u)'</code> yields confidence intervals with
round parenthesis in which the upper and the lower limits are
separated by semicolon.</p>
</td></tr>
<tr><td><code id="publish.ci_+3A_se">se</code></td>
<td>
<p>If <code>TRUE</code> add standard error.</p>
</td></tr>
<tr><td><code id="publish.ci_+3A_...">...</code></td>
<td>
<p>passed to <code>publish</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calls summary.ci with print=FALSE and then publish
</p>


<h3>Value</h3>

<p>table with confidence intervals
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>summary.ci
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Diabetes)
publish(ci.mean(chol~location+gender,data=Diabetes),org=TRUE)

</code></pre>

<hr>
<h2 id='publish.coxph'>Tabulize hazard ratios with confidence intervals and
p-values.</h2><span id='topic+publish.coxph'></span>

<h3>Description</h3>

<p>Tabulize the part of the result of a Cox regression analysis which is commonly shown in publications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'coxph'
publish(
  object,
  confint.method,
  pvalue.method,
  print = TRUE,
  factor.reference = "extraline",
  units = NULL,
  probindex = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.coxph_+3A_object">object</code></td>
<td>
<p>A <code>coxph</code> object.</p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_confint.method">confint.method</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_pvalue.method">pvalue.method</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_print">print</code></td>
<td>
<p>If <code>FALSE</code> do not print results.</p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_factor.reference">factor.reference</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_units">units</code></td>
<td>
<p>See <code>regressionTable</code></p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_probindex">probindex</code></td>
<td>
<p>Logical. If <code>TRUE</code> show coefficients on probabilistic index scale instead of hazard ratio scale.</p>
</td></tr>
<tr><td><code id="publish.coxph_+3A_...">...</code></td>
<td>
<p>passed to <code>summary.regressionTable</code> and also to
<code>labelUnits</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Transforms the log hazard ratios to hazard ratios and returns them
with confidence limits and p-values.  If explanatory variables are
log transformed or log2 transformed, a scaling factor is
multiplied to both the log-hazard ratio and its standard-error.
</p>


<h3>Value</h3>

<p>Table with hazard ratios, confidence intervals and
p-values.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(pbc)
pbc$edema &lt;- factor(pbc$edema,
             levels=c("0","0.5","1"), labels=c("0","0.5","1"))
fit = coxph(Surv(time,status!=0)~age+sex+edema+log(bili)+log(albumin),
            data=na.omit(pbc))
publish(fit)
## forest plot
plot(publish(fit),cex=1.3)

publish(fit,ci.digits=2,pvalue.eps=0.01,pvalue.digits=2,pvalue.stars=TRUE)
publish(fit,ci.digits=2,ci.handler="prettyNum",pvalue.eps=0.01,
        pvalue.digits=2,pvalue.stars=TRUE)
publish(fit, ci.digits=2, ci.handler="sprintf", pvalue.eps=0.01,
        pvalue.digits=2,pvalue.stars=TRUE, ci.trim=FALSE)

fit2 = coxph(Surv(time,status!=0)~age+sex+edema+log(bili,base=2)+log(albumin)+log(protime),
    data=na.omit(pbc))
publish(fit2)

# with cluster variable
fit3 = coxph(Surv(time,status!=0)~age+cluster(sex)+edema+log(bili,base=2)
                                    +log(albumin)+log(protime),
    data=na.omit(pbc))
publish(fit3)

# with strata and cluster variable
fit4 = coxph(Surv(time,status!=0)~age+cluster(sex)+strata(edema)+log(bili,base=2)
                 +log(albumin)+log(protime),
    data=pbc)
publish(fit4)

</code></pre>

<hr>
<h2 id='publish.glm'>Tabulize regression coefficients with confidence intervals and p-values.</h2><span id='topic+publish.glm'></span>

<h3>Description</h3>

<p>Tabulate the results of a generalized linear regression analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'glm'
publish(
  object,
  confint.method,
  pvalue.method,
  digits = c(2, 4),
  print = TRUE,
  factor.reference = "extraline",
  intercept = ifelse((is.null(object$family) || object$family$family == "gaussian"), 1L,
    0L),
  units = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.glm_+3A_object">object</code></td>
<td>
<p>A <code>glm</code> object.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_confint.method">confint.method</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_pvalue.method">pvalue.method</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_digits">digits</code></td>
<td>
<p>A vector of two integer values. These determine how to round
numbers (first value) and p-values (second value). E.g., c(1,3) would
mean 1 digit for all numbers and 3 digits for p-values.
The actual rounding is done by <code>summary.regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_print">print</code></td>
<td>
<p>If <code>FALSE</code> do not print results.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_factor.reference">factor.reference</code></td>
<td>
<p>Style for showing results for categorical. See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_intercept">intercept</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_units">units</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_...">...</code></td>
<td>
<p>passed to <code>summary.regressionTable</code> and also
to <code>labelUnits</code>.</p>
</td></tr>
<tr><td><code id="publish.glm_+3A_reference">reference</code></td>
<td>
<p>Style for showing results for categorical
variables. If <code>"extraline"</code> show an additional line for the
reference category.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The table shows changes in mean for linear regression and
odds ratios for logistic regression (family = binomial).
</p>


<h3>Value</h3>

<p>Table with regression coefficients, confidence intervals and p-values.
</p>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
## Linear regression
f = glm(bp.2s~frame+gender+age,data=Diabetes)
publish(f)
publish(f,factor.reference="inline")
publish(f,pvalue.stars=TRUE)
publish(f,ci.format="(l,u)")

### interaction
fit = glm(bp.2s~frame+gender*age,data=Diabetes)
summary(fit)
publish(fit)

Fit = glm(bp.2s~frame*gender+age,data=Diabetes)
publish(Fit)

## Logistic regression
Diabetes$hyper1 &lt;- factor(1*(Diabetes$bp.1s&gt;140))
lrfit &lt;- glm(hyper1~frame+gender+age,data=Diabetes,family=binomial)
publish(lrfit)

### interaction
lrfit1 &lt;- glm(hyper1~frame+gender*age,data=Diabetes,family=binomial)
publish(lrfit1)

lrfit2 &lt;- glm(hyper1~frame*gender+age,data=Diabetes,family=binomial)
publish(lrfit2)

## Poisson regression
data(trace)
trace &lt;- Units(trace,list("age"="years"))
fit &lt;- glm(dead ~ smoking+sex+age+Time+offset(log(ObsTime)), family="poisson",data=trace)
rtf &lt;- regressionTable(fit,factor.reference = "inline")
summary(rtf)
publish(fit)

## gls regression
if (requireNamespace("nlme",quietly=TRUE)){
    requireNamespace("lava",quietly=TRUE)
library(lava)
library(nlme)
m &lt;- lvm(Y ~ X1 + gender + group + Interaction)
distribution(m, ~gender) &lt;- binomial.lvm()
distribution(m, ~group) &lt;- binomial.lvm(size = 2)
constrain(m, Interaction ~ gender + group) &lt;- function(x){x[,1]*x[,2]}
d &lt;- sim(m, 1e2)
d$gender &lt;- factor(d$gender, labels = letters[1:2])
d$group &lt;- factor(d$group)

e.gls &lt;- gls(Y ~ X1 + gender*group, data = d,
             weights = varIdent(form = ~1|group))
publish(e.gls)

## lme
fm1 &lt;- lme(distance ~ age*Sex, 
            random = ~1|Subject,
            data = Orthodont) 
res &lt;- publish(fm1)
}
</code></pre>

<hr>
<h2 id='publish.htest'>Pretty printing of test results.</h2><span id='topic+publish.htest'></span>

<h3>Description</h3>

<p>Pretty printing of test results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'htest'
publish(object, title, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.htest_+3A_object">object</code></td>
<td>
<p>Result of <code>t.test</code> or <code>wilcox.test</code></p>
</td></tr>
<tr><td><code id="publish.htest_+3A_title">title</code></td>
<td>
<p>Decoration also used to name output</p>
</td></tr>
<tr><td><code id="publish.htest_+3A_...">...</code></td>
<td>
<p>Used to transport arguments <code>ci.arg</code> and <code>pvalue.arg</code> to subroutines <code>format.pval</code> and <code>formatCI</code>. See also <code>prodlim::SmartControl</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
publish(t.test(bp.2s~gender,data=Diabetes))
publish(wilcox.test(bp.2s~gender,data=Diabetes))
publish(with(Diabetes,t.test(bp.2s,bp.1s,paired=TRUE)))
publish(with(Diabetes,wilcox.test(bp.2s,bp.1s,paired=TRUE)))

</code></pre>

<hr>
<h2 id='publish.matrix'>Publishing a matrix in raw, org, latex, or muse format</h2><span id='topic+publish.matrix'></span>

<h3>Description</h3>

<p>This is the heart of the Publish package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'matrix'
publish(
  object,
  title,
  colnames = TRUE,
  rownames = TRUE,
  col1name = "",
  digits = 4,
  try.convert = TRUE,
  sep = " ",
  endhead,
  endrow,
  style,
  inter.lines,
  latex = FALSE,
  wiki = FALSE,
  org = FALSE,
  markdown = FALSE,
  tabular = TRUE,
  latex.table.format = NA,
  latex.hline = 1,
  latex.nodollar = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.matrix_+3A_object">object</code></td>
<td>
<p>Matrix to be published</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_title">title</code></td>
<td>
<p>Title for table, only in wiki and muse format</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_colnames">colnames</code></td>
<td>
<p>If <code>TRUE</code> show column names</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_rownames">rownames</code></td>
<td>
<p>If <code>TRUE</code> show row names</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_col1name">col1name</code></td>
<td>
<p>Name for first column</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_digits">digits</code></td>
<td>
<p>Numbers are rounded according to digits</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_try.convert">try.convert</code></td>
<td>
<p>Logical. If <code>TRUE</code> try to convert also non-numeric
formats such as character to numeric before rounding. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_sep">sep</code></td>
<td>
<p>Field separator when style is <code>"none"</code></p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_endhead">endhead</code></td>
<td>
<p>String to be pasted at the end of the first row
(header)</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_endrow">endrow</code></td>
<td>
<p>String to be pasted at the end of each row</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_style">style</code></td>
<td>
<p>Table style for export to <code>"latex"</code>,
<code>"org"</code>, <code>"markdown"</code>, <code>"wiki"</code>,
<code>"none"</code>. Overwritten by argments below.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_inter.lines">inter.lines</code></td>
<td>
<p>A named list which contains strings to be
placed between the rows of the table. An element with name
<code>"0"</code> is used to place a line before the first column,
elements with name <code>"r"</code> are placed between line r and
r+1.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_latex">latex</code></td>
<td>
<p>If <code>TRUE</code> use latex table format</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_wiki">wiki</code></td>
<td>
<p>If <code>TRUE</code> use mediawiki table format</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_org">org</code></td>
<td>
<p>If <code>TRUE</code> use emacs orgmode table format</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_markdown">markdown</code></td>
<td>
<p>If <code>TRUE</code> use markdown table format</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_tabular">tabular</code></td>
<td>
<p>For style <code>latex</code> only: if <code>TRUE</code> enclose
the table in begin/end tabular environement.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_latex.table.format">latex.table.format</code></td>
<td>
<p>For style <code>latex</code> only: format of
the tabular environement.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_latex.hline">latex.hline</code></td>
<td>
<p>For style <code>latex</code> only: if <code>TRUE</code> add
hline statements add the end of each line.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_latex.nodollar">latex.nodollar</code></td>
<td>
<p>For style <code>latex</code> only: if <code>TRUE</code>
do not enclose numbers in dollars.</p>
</td></tr>
<tr><td><code id="publish.matrix_+3A_...">...</code></td>
<td>
<p>Used to transport arguments. Currently supports
<code>wiki.class</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- matrix(1:12,ncol=3)
publish(x)

# rounding the numeric part of data mixtures 
y &lt;- cbind(matrix(letters[1:12],ncol=3),x,matrix(rnorm(12),ncol=3))
publish(y,digits=1)

publish(x,latex=TRUE,
inter.lines=list("1"="text between line 1 and line 2",
                          "3"="text between line 3 and line 4"))

</code></pre>

<hr>
<h2 id='publish.MIresult'>Present logistic regression and Cox regression  obtained with mitools::MIcombine based on smcfcs::smcfcs multiple imputation analysis</h2><span id='topic+publish.MIresult'></span>

<h3>Description</h3>

<p>Regression tables after multiple imputations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MIresult'
publish(
  object,
  confint.method,
  pvalue.method,
  digits = c(2, 4),
  print = TRUE,
  factor.reference = "extraline",
  intercept,
  units = NULL,
  fit,
  data,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.MIresult_+3A_object">object</code></td>
<td>
<p>Object obtained with mitools::MIcombine based on smcfcs::smcfcs multiple imputation analysis</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_confint.method">confint.method</code></td>
<td>
<p>No options here. Only Wald type confidence
intervals.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_pvalue.method">pvalue.method</code></td>
<td>
<p>No options here. Only Wald type tests.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_digits">digits</code></td>
<td>
<p>Rounding digits for all numbers but the p-values.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_print">print</code></td>
<td>
<p>If <code>FALSE</code> suppress printing of the results</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_factor.reference">factor.reference</code></td>
<td>
<p>Style for showing results for
categorical. See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_intercept">intercept</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_units">units</code></td>
<td>
<p>See <code>regressionTable</code>.</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_fit">fit</code></td>
<td>
<p>One fitted model using the same formula as
<code>object</code>. This can be the fit to the complete case data or
the fit to one of the completed data. It is used to get
xlevels, formula and terms. For usage see examples.  is used to
fit</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_data">data</code></td>
<td>
<p>Original data set which includes the missing values</p>
</td></tr>
<tr><td><code id="publish.MIresult_+3A_...">...</code></td>
<td>
<p>passed to summary.regressionTable, labelUnits and publish.default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Show results of smcfcs based multiple imputations of missing covariates in publishable format
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
if (requireNamespace("riskRegression",quietly=TRUE)
  &amp; requireNamespace("mitools",quietly=TRUE)
  &amp; requireNamespace("smcfcs",quietly=TRUE)){
library(riskRegression)
library(mitools)
library(smcfcs)
## continuous outcome: linear regression
# lava some data with missing values
set.seed(7)
d=sampleData(78)
## generate missing values
d[X1==1,X6:=NA] 
d[X2==1,X3:=NA]
d=d[,.(X8,X4,X3,X6,X7)]
sapply(d,function(x)sum(is.na(x)))

# multiple imputation (should set m to a large value)

set.seed(17)
f= smcfcs(d,smtype="lm",
           smformula=X8~X4+X3+X6+X7,
           method=c("","","logreg","norm",""),m=3)
ccfit=lm(X8~X4+X3+X6+X7,data=d)
mifit=MIcombine(with(imputationList(f$impDatasets),
                lm(X8~X4+X3+X6+X7)))
publish(mifit,fit=ccfit,data=d)
publish(ccfit)

## binary outcome
# lava some data with missing values
set.seed(7)
db=sampleData(78,outcome="binary")
## generate missing values
db[X1==1,X6:=NA] 
db[X2==1,X3:=NA]
db=db[,.(Y,X4,X3,X6,X7)]
sapply(db,function(x)sum(is.na(x)))

# multiple imputation (should set m to a large value)
set.seed(17)
fb= smcfcs(db,smtype="logistic",
           smformula=Y~X4+X3+X6+X7,
           method=c("","","logreg","norm",""),m=2)
ccfit=glm(Y~X4+X3+X6+X7,family="binomial",data=db)
mifit=MIcombine(with(imputationList(fb$impDatasets),
                glm(Y~X4+X3+X6+X7,family="binomial")))
publish(mifit,fit=ccfit)
publish(ccfit)

## survival: Cox regression
library(survival)
# lava some data with missing values
set.seed(7)
ds=sampleData(78,outcome="survival")
## generate missing values
ds[X5==1,X6:=NA] 
ds[X2==1,X3:=NA]
ds=ds[,.(time,event,X4,X3,X6,X7)]
sapply(ds,function(x)sum(is.na(x)))

set.seed(17)
fs= smcfcs(ds,smtype="coxph",
           smformula="Surv(time,event)~X4+X3+X6+X7",
           method=c("","","","logreg","norm",""),m=2)
ccfit=coxph(Surv(time,event)~X4+X3+X6+X7,data=ds)
mifit=MIcombine(with(imputationList(fs$impDatasets),
                coxph(Surv(time,event)~X4+X3+X6+X7)))
publish(mifit,fit=ccfit,data=ds)
publish(ccfit)

## competing risks: Cause-specific Cox regression 
library(survival)
# lava some data with missing values
set.seed(7)
dcr=sampleData(78,outcome="competing.risks")
## generate missing values
dcr[X5==1,X6:=NA] 
dcr[X2==1,X3:=NA]
dcr=dcr[,.(time,event,X4,X3,X6,X7)]
sapply(dcr,function(x)sum(is.na(x)))

set.seed(17)
fcr= smcfcs(dcr,smtype="compet",
           smformula=c("Surv(time,event==1)~X4+X3+X6+X7",
                       "Surv(time,event==2)~X4+X3+X6+X7"),
           method=c("","","","logreg","norm",""),m=2)
## cause 2 
ccfit2=coxph(Surv(time,event==2)~X4+X3+X6+X7,data=dcr)
mifit2=MIcombine(with(imputationList(fcr$impDatasets),
                coxph(Surv(time,event==2)~X4+X3+X6+X7)))
publish(mifit2,fit=ccfit2,data=dcr)
publish(ccfit2)
}

## End(Not run) 

</code></pre>

<hr>
<h2 id='publish.riskRegression'>Publishing results of riskRegression</h2><span id='topic+publish.riskRegression'></span>

<h3>Description</h3>

<p>Preparing a publishable table from riskRegression results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'riskRegression'
publish(object, digits = c(2, 4), print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.riskRegression_+3A_object">object</code></td>
<td>
<p>object of class riskRegression as obtained with
functions ARR and LRR.</p>
</td></tr>
<tr><td><code id="publish.riskRegression_+3A_digits">digits</code></td>
<td>
<p>Number of digits for regression coefficients</p>
</td></tr>
<tr><td><code id="publish.riskRegression_+3A_print">print</code></td>
<td>
<p>If <code>FALSE</code> do not print the results</p>
</td></tr>
<tr><td><code id="publish.riskRegression_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+publish.matrix">publish.matrix</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Table with regression coefficients, confidence intervals and p-values
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>ARR LRR
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("riskRegression",quietly=TRUE)){
library(riskRegression)
library(prodlim)
library(lava)
library(survival)
set.seed(20)
d &lt;- SimCompRisk(20)
f &lt;- ARR(Hist(time,event)~X1+X2,data=d,cause=1)
publish(f)
publish(f,digits=c(1,3))
}
</code></pre>

<hr>
<h2 id='publish.Score'>Publish predictive accuracy results</h2><span id='topic+publish.Score'></span>

<h3>Description</h3>

<p>Write output of <code>riskRegression::Score</code> in tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Score'
publish(object, metrics, score = TRUE, contrasts = TRUE, level = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.Score_+3A_object">object</code></td>
<td>
<p>Object obtained with <code>riskRegression::Score</code></p>
</td></tr>
<tr><td><code id="publish.Score_+3A_metrics">metrics</code></td>
<td>
<p>Which metrics to put into tables. Defaults to
<code>object$metrics</code>.</p>
</td></tr>
<tr><td><code id="publish.Score_+3A_score">score</code></td>
<td>
<p>Logical. If <code>TRUE</code> print the score elements, i.e., metric applied to the risk prediction models.</p>
</td></tr>
<tr><td><code id="publish.Score_+3A_contrasts">contrasts</code></td>
<td>
<p>Logical. If <code>TRUE</code> print the contrast elements (if any). These compare risk prediction models according to metrics.</p>
</td></tr>
<tr><td><code id="publish.Score_+3A_level">level</code></td>
<td>
<p>Level of subsection headers, i.e., ** for level 2 and
*** for level 3 (useful for emacs org-users). Default is plain
subsection headers no stars.  A negative value will suppress
subjection headers.</p>
</td></tr>
<tr><td><code id="publish.Score_+3A_...">...</code></td>
<td>
<p>Passed to publish</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Collect prediction accuracy results in tables
</p>


<h3>Value</h3>

<p>Results of Score in tabular form
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("riskRegression",quietly=TRUE)){
library(riskRegression)
library(survival)
learn = sampleData(100)
val= sampleData(100)
f1=CSC(Hist(time,event)~X1+X8,data=learn)
f2=CSC(Hist(time,event)~X1+X5+X6+X8,learn)
xs=Score(list(f1,f2),data=val,formula=Hist(time,event)~1)
publish(xs)
}
</code></pre>

<hr>
<h2 id='publish.summary.aov'>Format summary table of aov results</h2><span id='topic+publish.summary.aov'></span>

<h3>Description</h3>

<p>Format summary table of aov results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.aov'
publish(
  object,
  print = TRUE,
  handler = "sprintf",
  digits = c(2, 4),
  nsmall = digits,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.summary.aov_+3A_object">object</code></td>
<td>
<p>glm object</p>
</td></tr>
<tr><td><code id="publish.summary.aov_+3A_print">print</code></td>
<td>
<p>Logical. Decide about whether or not to print the results.</p>
</td></tr>
<tr><td><code id="publish.summary.aov_+3A_handler">handler</code></td>
<td>
<p>see <code>pubformat</code></p>
</td></tr>
<tr><td><code id="publish.summary.aov_+3A_digits">digits</code></td>
<td>
<p>see <code>pubformat</code></p>
</td></tr>
<tr><td><code id="publish.summary.aov_+3A_nsmall">nsmall</code></td>
<td>
<p>see <code>pubformat</code></p>
</td></tr>
<tr><td><code id="publish.summary.aov_+3A_...">...</code></td>
<td>
<p>used to transport further arguments</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(Diabetes)
f &lt;- glm(bp.1s~age+chol+gender+location,data=Diabetes)
publish(summary(aov(f)),digits=c(1,2))

</code></pre>

<hr>
<h2 id='publish.survdiff'>Alternative summary of survdiff results</h2><span id='topic+publish.survdiff'></span>

<h3>Description</h3>

<p>Alternative summary of survdiff results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survdiff'
publish(object, digits = c(2, 4), print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish.survdiff_+3A_object">object</code></td>
<td>
<p>Object obtained with <code>survival::survdiff</code>.</p>
</td></tr>
<tr><td><code id="publish.survdiff_+3A_digits">digits</code></td>
<td>
<p>Vector with digits for rounding numbers: the second for pvalues, the first for all other numbers.</p>
</td></tr>
<tr><td><code id="publish.survdiff_+3A_print">print</code></td>
<td>
<p>If <code>FALSE</code> do not print results.</p>
</td></tr>
<tr><td><code id="publish.survdiff_+3A_...">...</code></td>
<td>
<p>Not (yet) used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(pbc)
sd &lt;- survdiff(Surv(time,status!=0)~sex,data=pbc)
publish(sd)
publish(sd,digits=c(3,2))

</code></pre>

<hr>
<h2 id='regressionTable'>Regression table</h2><span id='topic+regressionTable'></span>

<h3>Description</h3>

<p>Tabulate the results of a regression analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regressionTable(
  object,
  param.method = "coef",
  confint.method = c("default", "profile", "robust", "simultaneous"),
  pvalue.method = c("default", "robust", "simultaneous"),
  factor.reference = "extraline",
  intercept = 0L,
  units = NULL,
  noterms = NULL,
  probindex = 0L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="regressionTable_+3A_object">object</code></td>
<td>
<p>Fitted regression model obtained with <code>lm</code>,
<code>glm</code> or <code>coxph</code>.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_param.method">param.method</code></td>
<td>
<p>Method to obtain model coefficients.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_confint.method">confint.method</code></td>
<td>
<p>Method to obtain confidence
intervals. Default is 'default' which leads to Wald
type intervals using the model based estimate of standard
error. 'profile' yields profile likelihood confidence
intervals, available from library MASS for <code>lm</code> and
<code>glm</code> objects. 'robust' uses the sandwich form
standard error to construct Wald type intervals (see
<code>lava::estimate.default</code>). 'simultaneous' calls
<code>multcomp::glht</code> to obtain simultaneous confidence
intervals.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_pvalue.method">pvalue.method</code></td>
<td>
<p>Method to obtain p-values. If
<code>'default'</code> show raw p-values.  If <code>'robust'</code> use
p-value corresponding to robust standard error as provided by
<code>lava::estimate.default</code>. If <code>'simultaneous'</code> call
<code>multcomp::glht</code> to obtain p-values.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_factor.reference">factor.reference</code></td>
<td>
<p>Style for showing results for categorical
variables. If <code>'extraline'</code> show an additional line for
the reference category. If <code>'inline'</code> display as level
vs. reference.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_intercept">intercept</code></td>
<td>
<p>Logical. If <code>FALSE</code> suppress intercept.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_units">units</code></td>
<td>
<p>List of units for continuous variables. See examples.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_noterms">noterms</code></td>
<td>
<p>Position of terms that should be ignored. E.g., for
a Cox model with a cluster(id) term, there will be no hazard
ratio for variable id.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_probindex">probindex</code></td>
<td>
<p>Logical. If <code>TRUE</code> show coefficients on probabilistic index scale instead of hazard ratio scale.</p>
</td></tr>
<tr><td><code id="regressionTable_+3A_...">...</code></td>
<td>
<p>Not yet used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The basic use of this function is to generate a near publication worthy table from a regression
object. As with summary(object) reference levels of factor variables are not included. Expansion
of the table with such values can be performed using the &quot;fixRegressionTable&quot; function. Forest
plot can be added to the output with &quot;plotRegressionTable&quot;.
</p>
<p>regressionTable produces an object (list) with the parameters deriveds. The summary function creates
a data frame which can be used as a (near) publication ready table.
</p>
<p>The table shows changes in mean for linear regression, odds ratios
for logistic regression (family = binomial) and hazard ratios for
Cox regression.
</p>


<h3>Value</h3>

<p>List of regression blocks
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># linear regression
data(Diabetes)
f1 &lt;- glm(bp.1s~age+gender+frame+chol,data=Diabetes)
summary(regressionTable(f1))
summary(regressionTable(f1,units=list("chol"="mmol/L","age"="years")))
## with interaction
f2 &lt;- glm(bp.1s~age*gender+frame+chol,data=Diabetes)
summary(regressionTable(f2))
#Add reference values
summary(regressionTable(f2))
f3 &lt;- glm(bp.1s~age+gender*frame+chol,data=Diabetes)
publish(f3)
regressionTable(f3)

# logistic regression
Diabetes$hyp1 &lt;- factor(1*(Diabetes$bp.1s&gt;140))
l1 &lt;- glm(hyp1~age+gender+frame+chol,data=Diabetes,family="binomial")
regressionTable(l1)
publish(l1)
plot(regressionTable(l1))

## with interaction
l2 &lt;- glm(hyp1~age+gender+frame*chol,data=Diabetes,family="binomial")
regressionTable(l2)
l3 &lt;- glm(hyp1~age*gender+frame*chol,data=Diabetes,family="binomial")
regressionTable(l3)

# Cox regression
library(survival)
data(pbc)
pbc$edema &lt;- factor(pbc$edema,levels=c("0","0.5","1"),labels=c("0","0.5","1"))
c1 &lt;- coxph(Surv(time,status!=0)~log(bili)+age+protime+sex+edema,data=pbc)
regressionTable(c1)
# with interaction
c2 &lt;- coxph(Surv(time,status!=0)~log(bili)+age+protime*sex+edema,data=pbc)
regressionTable(c2)
c3 &lt;- coxph(Surv(time,status!=0)~edema*log(bili)+age+protime+sex+edema+edema:sex,data=pbc)
regressionTable(c3)


if (requireNamespace("nlme",quietly=TRUE)){ 
## gls regression
library(lava)
library(nlme)
m &lt;- lvm(Y ~ X1 + gender + group + Interaction)
distribution(m, ~gender) &lt;- binomial.lvm()
distribution(m, ~group) &lt;- binomial.lvm(size = 2)
constrain(m, Interaction ~ gender + group) &lt;- function(x){x[,1]*x[,2]}
d &lt;- sim(m, 1e2)
d$gender &lt;- factor(d$gender, labels = letters[1:2])
d$group &lt;- factor(d$group)

e.gls &lt;- gls(Y ~ X1 + gender*group, data = d,
             weights = varIdent(form = ~1|group))
regressionTable(e.gls)
summary(regressionTable(e.gls))
}
</code></pre>

<hr>
<h2 id='SpaceT'>A study was made of all 26 astronauts on the first eight space shuttle flights (Bungo et.al., 1985).
On a voluntary basis 17 astronauts consumed large quantities of salt and fluid prior to landing as
a countermeasure to space deconditioning, while nine did not.</h2><span id='topic+SpaceT'></span>

<h3>Description</h3>

<p>A study was made of all 26 astronauts on the first eight space shuttle flights (Bungo et.al., 1985).
On a voluntary basis 17 astronauts consumed large quantities of salt and fluid prior to landing as
a countermeasure to space deconditioning, while nine did not.
</p>


<h3>Format</h3>

<p>A data frame with 52 observations on the following 4 variables:
</p>

<dl>
<dt>Status</dt><dd><p>Factor with levels Post (after flight) and Pre (before flight)</p>
</dd>
<dt>HR</dt><dd><p>Supine heart rate(beats per minute)</p>
</dd>
<dt>Treatment</dt><dd><p>Countermeasure salt/fluid (1= yes, 0=no)</p>
</dd>
<dt>ID</dt><dd><p>Person id</p>
</dd>
</dl>



<h3>References</h3>

<p>Altman, Practical statistics for medical research, Page 223, Ex. 9.1.
Bungo et.al., 1985
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(SpaceT)
</code></pre>

<hr>
<h2 id='spaghettiogram'>Spaghettiogram</h2><span id='topic+spaghettiogram'></span><span id='topic+Spaghettiogram'></span>

<h3>Description</h3>

<p>A spaghettiogram is showing repeated measures (longitudinal data)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spaghettiogram(
  formula,
  data,
  xlim,
  ylim,
  xlab = "",
  ylab = "",
  axes = TRUE,
  col,
  lwd,
  lty,
  pch,
  legend = FALSE,
  add = FALSE,
  background = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spaghettiogram_+3A_formula">formula</code></td>
<td>
<p>A formula which specifies the variables for the
spaghettiograms. If Y ~ X + id(Z) then for each value of Z the
spaghettiogram is the graph (X,Y) in the subset defined by the
value of Z. Data are expected to be in the &quot;long&quot; format. Y is
a numeric vector and X is a factor whose levels define the X-axis.
Each level of the id-vector corresponds to 
one line (spaghetti) in the plot.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_data">data</code></td>
<td>
<p>data set in which variables X, Y and Z are defined.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_xlim">xlim</code></td>
<td>
<p>Limits for x-axis</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_ylim">ylim</code></td>
<td>
<p>Limits for y-axis</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_xlab">xlab</code></td>
<td>
<p>Label for x-axis</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_ylab">ylab</code></td>
<td>
<p>Label for x-axis</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_axes">axes</code></td>
<td>
<p>Logical indicating if axes should be drawn.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_col">col</code></td>
<td>
<p>Colors for the spaghettiograms</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_lwd">lwd</code></td>
<td>
<p>Widths for the spaghettiograms</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_lty">lty</code></td>
<td>
<p>Type for the spaghettiograms</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_pch">pch</code></td>
<td>
<p>Point-type for the spaghettiograms</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_legend">legend</code></td>
<td>
<p>If <code>TRUE</code> add a legend. Argument A of legend is
controlled as legend.A. E.g., when <code>legend.cex=2</code> legend will
be called with argument cex=2.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_add">add</code></td>
<td>
<p>If <code>TRUE</code> add to existing plot device.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_background">background</code></td>
<td>
<p>Control the background color of the graph.</p>
</td></tr>
<tr><td><code id="spaghettiogram_+3A_...">...</code></td>
<td>
<p>used to transport arguments which are passed to the
following subroutines: <code>"plot"</code>, <code>"lines"</code>,
<code>"legend"</code>, <code>"background"</code>, <code>"axis1"</code>,
<code>"axis2"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with data of each subject
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(SpaceT)
Spaghettiogram(HR~Status+id(ID),
               data=SpaceT)
</code></pre>

<hr>
<h2 id='specialFrame'>Special frame</h2><span id='topic+specialFrame'></span>

<h3>Description</h3>

<p>Extract data and design matrix including specials from call
</p>


<h3>Usage</h3>

<pre><code class='language-R'>specialFrame(
  formula,
  data,
  unspecials.design = TRUE,
  specials,
  specials.factor = TRUE,
  specials.design = FALSE,
  strip.specials = TRUE,
  strip.arguments = NULL,
  strip.alias = NULL,
  strip.unspecials = NULL,
  drop.intercept = TRUE,
  response = TRUE,
  na.action = options()$na.action
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="specialFrame_+3A_formula">formula</code></td>
<td>
<p>Formula whose left hand side specifies the event
history, i.e., either via Surv() or Hist().</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_data">data</code></td>
<td>
<p>Data frame in which the formula is interpreted</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_unspecials.design">unspecials.design</code></td>
<td>
<p>Passed as is to
<code><a href="prodlim.html#topic+model.design">model.design</a></code>.</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_specials">specials</code></td>
<td>
<p>Character vector of special function names.
Usually the body of the special functions is function(x)x but
e.g., <code><a href="survival.html#topic+strata">strata</a></code> from the survival package does treat
the values</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_specials.factor">specials.factor</code></td>
<td>
<p>Passed as is to <code><a href="prodlim.html#topic+model.design">model.design</a></code>.</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_specials.design">specials.design</code></td>
<td>
<p>Passed as is to <code><a href="prodlim.html#topic+model.design">model.design</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_strip.specials">strip.specials</code></td>
<td>
<p>Passed as <code>specials</code> to
<code><a href="prodlim.html#topic+strip.terms">strip.terms</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_strip.arguments">strip.arguments</code></td>
<td>
<p>Passed as <code>arguments</code> to
<code><a href="prodlim.html#topic+strip.terms">strip.terms</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_strip.alias">strip.alias</code></td>
<td>
<p>Passed as <code>alias.names</code> to
<code><a href="prodlim.html#topic+strip.terms">strip.terms</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_strip.unspecials">strip.unspecials</code></td>
<td>
<p>Passed as <code>unspecials</code> to
<code><a href="prodlim.html#topic+strip.terms">strip.terms</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_drop.intercept">drop.intercept</code></td>
<td>
<p>Passed as is to <code><a href="prodlim.html#topic+model.design">model.design</a></code></p>
</td></tr>
<tr><td><code id="specialFrame_+3A_response">response</code></td>
<td>
<p>If FALSE do not get response data.</p>
</td></tr>
<tr><td><code id="specialFrame_+3A_na.action">na.action</code></td>
<td>
<p>Decide what to do with missing values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Obtain a list with the data used for event history regression analysis. This
function cannot be used directly on the user level but inside a function
to prepare data for survival analysis.
</p>


<h3>Value</h3>

<p>A list which contains
- the response
- the design matrix (see <code><a href="prodlim.html#topic+model.design">model.design</a></code>)
- one entry for each special (see <code><a href="prodlim.html#topic+model.design">model.design</a></code>)
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>model.frame model.design Hist
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Here are some data with an event time and no competing risks
## and two covariates X1 and X2.
## Suppose we want to declare that variable X1 is treated differently
## than variable X2. For example, X1 could be a cluster variable, or
## X1 should have a proportional effect on the outcome.
d &lt;- data.frame(y=1:7,
                X2=c(2.24,3.22,9.59,4.4,3.54,6.81,5.05),
                X3=c(1,1,1,1,0,0,1),
                X4=c(44.69,37.41,68.54,38.85,35.9,27.02,41.84),
                X1=factor(c("a","b","a","c","c","a","b"),
                    levels=c("c","a","b")))
## define special functions prop and cluster
prop &lt;- function(x)x
cluster &lt;- function(x)x
## We pass a formula and the data
e &lt;- specialFrame(y~prop(X1)+X2+cluster(X3)+X4,
                  data=d,
                  specials=c("prop","cluster"))
## The first element is the response
e$response
## The other elements are the design, i.e., model.matrix for the non-special covariates
e$design
## and a data.frame for the special covariates
e$prop
## The special covariates can be returned as a model.matrix 
e2 &lt;- specialFrame(y~prop(X1)+X2+cluster(X3)+X4,
                   data=d,
                   specials=c("prop","cluster"),
                   specials.design=TRUE)
e2$prop
## and the non-special covariates can be returned as a data.frame
e3 &lt;- specialFrame(y~prop(X1)+X2+cluster(X3)+X4,
                   data=d,
                   specials=c("prop","cluster"),
                   specials.design=TRUE,
                   unspecials.design=FALSE)
e3$design
</code></pre>

<hr>
<h2 id='splinePlot.lrm'>Plot predictions of logistic regression</h2><span id='topic+splinePlot.lrm'></span>

<h3>Description</h3>

<p>Plotting the prediction of a logistic regression model
with confidence bands against one continuous variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splinePlot.lrm(
  object,
  xvar,
  xvalues,
  xlim = range(xvalues),
  ylim,
  xlab = xvar,
  ylab = scale[[1]],
  col = 1,
  lty = 1,
  lwd = 3,
  confint = TRUE,
  newdata = NULL,
  scale = c("risk", "odds"),
  add = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="splinePlot.lrm_+3A_object">object</code></td>
<td>
<p>Logistic regression model fitted with <code>rms::lrm</code></p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_xvar">xvar</code></td>
<td>
<p>Name of the variable to show on x-axis</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_xvalues">xvalues</code></td>
<td>
<p>Sequence of <code>xvar</code> values</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_xlim">xlim</code></td>
<td>
<p>x-axis limits</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_ylim">ylim</code></td>
<td>
<p>y-axis limits</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_xlab">xlab</code></td>
<td>
<p>x-axis labels</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_ylab">ylab</code></td>
<td>
<p>y-axis labels</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_col">col</code></td>
<td>
<p>color of the line</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_lty">lty</code></td>
<td>
<p>line style</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_lwd">lwd</code></td>
<td>
<p>line width</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_confint">confint</code></td>
<td>
<p>Logical. If <code>TRUE</code> show confidence shadows</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_newdata">newdata</code></td>
<td>
<p>How to adjust</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_scale">scale</code></td>
<td>
<p>Character string that determines the outcome scale (y-axis). Choose between <code>"risk"</code> and <code>"odds"</code>.</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_add">add</code></td>
<td>
<p>Logical. If <code>TRUE</code> add lines to an existing graph</p>
</td></tr>
<tr><td><code id="splinePlot.lrm_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code>plot</code>. Only if <code>add</code> is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function which extracts from a logistic regression model
fitted with <code>rms::lrm</code> the predicted risks or odds.
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
Diabetes$hypertension=  1*(Diabetes$bp.1s&gt;140)
library(rms)
uu &lt;- datadist(Diabetes)
options(datadist="uu")
fit=lrm(hypertension~rcs(age)+gender+hdl,data=Diabetes)
splinePlot.lrm(fit,xvar="age",xvalues=seq(30,50,1))
</code></pre>

<hr>
<h2 id='stripes'>Background and grid color control.</h2><span id='topic+stripes'></span>

<h3>Description</h3>

<p>Some users like background colors, and it may be helpful to have grid lines
to read off e.g. probabilities from a Kaplan-Meier graph. Both things can be
controlled with this function. However, it mainly serves
<code><a href="prodlim.html#topic+plot.prodlim">plot.prodlim</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stripes(
  xlim,
  ylim,
  col = "white",
  lwd = 1,
  gridcol = "gray77",
  fill = "white",
  horizontal = NULL,
  vertical = NULL,
  border = "black",
  xpd = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stripes_+3A_xlim">xlim</code></td>
<td>
<p>Limits for the horizontal x-dimension. Defaults to
par(&quot;usr&quot;)[1:2].</p>
</td></tr>
<tr><td><code id="stripes_+3A_ylim">ylim</code></td>
<td>
<p>Limits for the vertical y-dimension.</p>
</td></tr>
<tr><td><code id="stripes_+3A_col">col</code></td>
<td>
<p>Colors use for the stripes. Can be a vector of colors
which are then repeated appropriately.</p>
</td></tr>
<tr><td><code id="stripes_+3A_lwd">lwd</code></td>
<td>
<p>Line width</p>
</td></tr>
<tr><td><code id="stripes_+3A_gridcol">gridcol</code></td>
<td>
<p>Color of grid lines</p>
</td></tr>
<tr><td><code id="stripes_+3A_fill">fill</code></td>
<td>
<p>Color to fill the background rectangle given by
par(&quot;usr&quot;).</p>
</td></tr>
<tr><td><code id="stripes_+3A_horizontal">horizontal</code></td>
<td>
<p>Numerical values at which to show horizontal grid
lines, and at which to change the color of the stripes.</p>
</td></tr>
<tr><td><code id="stripes_+3A_vertical">vertical</code></td>
<td>
<p>Numerical values at which to show vertical grid
lines.</p>
</td></tr>
<tr><td><code id="stripes_+3A_border">border</code></td>
<td>
<p>If a fill color is provided, the color of the border
around the background.</p>
</td></tr>
<tr><td><code id="stripes_+3A_xpd">xpd</code></td>
<td>
<p>From <code>help(par)</code>: A logical value or NA.  If FALSE,
all plotting is clipped to the plot region, if TRUE, all plotting
is clipped to the figure region, and if NA, all plotting is clipped
to the device region.  See also <code>clip</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Alexander Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

plot(0,0)
backGround(bg="beige",fg="red",vertical=0,horizontal=0)

plot(0,0)
stripes(col=c("yellow","green"),gridcol="red",xlim=c(-1,1),horizontal=seq(0,1,.1))
stripes(col=c("yellow","green"),gridcol="red",horizontal=seq(0,1,.1))

</code></pre>

<hr>
<h2 id='subgroupAnalysis'>Subgroup Analysis - Interactions and estimates</h2><span id='topic+subgroupAnalysis'></span>

<h3>Description</h3>

<p>The function can examine Cox regression, logistic regression 
and Poisson regression (Poisson regression for survival analysis)
where the effect of one variable is of particular interest. This function
systematically checks for effect modification with a list of other variables.
</p>
<p>In randomised studies the main regression analysis is often univariate and
includes only the exposure of interest. In
observational studies the main regression analysis can readily be adjusted for
other variables including those which may modify the effect of the variable 
of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subgroupAnalysis(
  object,
  data,
  treatment,
  subgroups,
  confint.method = "default",
  factor.reference = "extraline",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="subgroupAnalysis_+3A_object">object</code></td>
<td>
<p>- glm, coxph or cph object for which subgroups should be
analyzed.</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_data">data</code></td>
<td>
<p>- Dataset including all relevant variables</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_treatment">treatment</code></td>
<td>
<p>- Must be numeric - 0/1</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_subgroups">subgroups</code></td>
<td>
<p>- A vector of variable names presenting the factor variables
where subgroups should be formed. These variables should
all be &quot;factors&quot;</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_confint.method">confint.method</code></td>
<td>
<p>&quot;default&quot; creates Wald type confidence interval, &quot;robust&quot;,
creates creates robust standard errors - see regressionTable function.</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_factor.reference">factor.reference</code></td>
<td>
<p>&quot;extraline&quot; creates an extraline for the reference,
&quot;inline&quot; avoids this line.</p>
</td></tr>
<tr><td><code id="subgroupAnalysis_+3A_...">...</code></td>
<td>
<p>additional arguments such as case weights, which are passed on to <code>glm</code> and <code>coxph</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can only handle a bivariate treatment, which MUST coded as
zero or one. The p-value for interaction is obtained with a likelihood ratio test
comparing the main regression analysis with the interaction model. 
</p>
<p>There are plot and print functions available for the function
see helppages for plot.subgroupAnalysis and print.subgroupAnalysis
</p>


<h3>Value</h3>

<p>A data.frame with subsgroup specifications, number in each subgroup,
parameter estimates and p-value for interaction.  A forest plot
can be obtained with &quot;plotConfidence&quot;.
</p>


<h3>Author(s)</h3>

<p>Christian Torp-Pedersen
</p>


<h3>See Also</h3>

<p>coxph, glm, plotConfidence
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#load libraries
library(data.table)
library(Publish)
library(survival)
data(traceR) #get dataframe traceR
data.table::setDT(traceR)
traceR[,':='(wmi2=factor(wallMotionIndex&lt;0.9,levels=c(TRUE,FALSE), 
                labels=c("bad","good")),
             abd2=factor(abdominalCircumference&lt;95, levels=c(TRUE,FALSE), 
                labels=c("slim","fat")))]
traceR[,sex:=as.factor(sex)] # all subgroup variables needs to be factor                
traceR[observationTime==0,observationTime:=1]
# remove missing covariate values
traceR=na.omit(traceR)
# univariate analysis of smoking in subgroups of age and sex
# Main regression analysis is a simple/univariate Cox regression
fit_cox &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR)
sub_cox &lt;- subgroupAnalysis(fit_cox,traceR,treatment="treatment", 
  subgroups=c("smoking","sex","wmi2","abd2"))
sub_cox

# to see how the results are obtained consider the variable: smoking
fit_cox_smoke &lt;- coxph(Surv(observationTime,dead)~treatment*smoking,data=traceR)
# the last three rows of the following output:
publish(fit_cox_smoke)
# are included in the first 3 rows of the result of the sub group analysis:
sub_cox[1:3,]
# the p-value is obtained as:
fit_cox_smoke_add &lt;- coxph(Surv(observationTime,dead)~treatment+smoking,data=traceR)
anova(fit_cox_smoke_add,fit_cox_smoke,test="Chisq")

# Note that a real subgroup analysis would be to subset the data
fit_cox1a &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR[smoking=="never"])
fit_cox1b &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR[smoking=="current"])
fit_cox1c &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR[smoking=="prior"])


## when the main analysis is already adjusted 
fit_cox_adj &lt;- coxph(Surv(observationTime,dead)~treatment+smoking+sex+wmi2+abd2,
                 data=traceR)
sub_cox_adj &lt;- subgroupAnalysis(fit_cox_adj,traceR,treatment="treatment",
  subgroups=c("smoking","sex","wmi2","abd2")) # subgroups as character string
sub_cox_adj

# When both start and end are in the Surv statement:
traceR[,null:=0]
fit_cox2 &lt;- coxph(Surv(null,observationTime,dead)~treatment+smoking+sex+wmi2+abd2,data=traceR)
summary(regressionTable(fit_cox))
sub_cox2 &lt;- subgroupAnalysis(fit_cox2,traceR,treatment="treatment",
  subgroups=c("smoking","sex","wmi2","abd2")) 
# Analysis with Poisson - and the unrealistic assumption of constant hazard
# and adjusted for age in all subgroups
fit_p &lt;- glm(dead~treatment+age+offset(log(observationTime)),family="poisson",
           data=traceR)
sub_pois &lt;- subgroupAnalysis(fit_p,traceR,treatment="treatment",
  subgroups=~smoking+sex+wmi2+abd2) 
# Analysis with logistic regression - and very wrongly ignoring censoring
fit_log &lt;- glm(dead~treatment+age,family="binomial",data=traceR)
sub_log &lt;- subgroupAnalysis(fit_log,traceR,treatment="treatment",
   subgroups=~smoking+sex+wmi2+abd2, factor.reference="inline")
</code></pre>

<hr>
<h2 id='summary.ci'>Summarize confidence intervals</h2><span id='topic+summary.ci'></span>

<h3>Description</h3>

<p>Summarize confidence intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ci'
summary(object, format = "[u;l]", se = FALSE, print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.ci_+3A_object">object</code></td>
<td>
<p>Object of class ci containing point estimates and the
corresponding confidence intervals</p>
</td></tr>
<tr><td><code id="summary.ci_+3A_format">format</code></td>
<td>
<p>A string which indicates the format used for
confidence intervals.  The string is passed to
<code><a href="#topic+formatCI">formatCI</a></code> with two arguments: the lower and the upper
limit. For example <code>'(l;u)'</code> yields confidence intervals with
round parenthesis in which the upper and the lower limits are
separated by semicolon.</p>
</td></tr>
<tr><td><code id="summary.ci_+3A_se">se</code></td>
<td>
<p>If <code>TRUE</code> add standard error.</p>
</td></tr>
<tr><td><code id="summary.ci_+3A_print">print</code></td>
<td>
<p>Logical: if <code>FALSE</code> do not actually print
confidence intervals but just return them invisibly.</p>
</td></tr>
<tr><td><code id="summary.ci_+3A_...">...</code></td>
<td>
<p>used to control formatting of numbers</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This format of the confidence intervals is user-manipulable.
</p>


<h3>Value</h3>

<p>Formatted confidence intervals
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>ci plot.ci format.ci
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(lava)
m &lt;- lvm(Y~X)
m &lt;- categorical(m,Y~X,K=4)
set.seed(4)
d &lt;- sim(m,24)
ci.mean(Y~X,data=d)
x &lt;- summary(ci.mean(Y~X,data=d),digits=2)
x
x &lt;- summary(ci.mean(Y~X,data=d),format="(u,l)",digits=2)
x &lt;- summary(ci.mean(Y~X,data=d),format="(u,l)",digits=1,se=TRUE)
x &lt;- summary(ci.mean(Y~X,data=d),format="(u,l)",digits=1,handler="format")
x &lt;- summary(ci.mean(Y~X,data=d),format="(u,l)",digits=1,handler="prettyNum")
</code></pre>

<hr>
<h2 id='summary.regressionTable'>Formatting regression tables</h2><span id='topic+summary.regressionTable'></span><span id='topic+print.summary.regressionTable'></span>

<h3>Description</h3>

<p>Preparing regression results for publication
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'regressionTable'
summary(object, show.missing = "ifany", print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.regressionTable_+3A_object">object</code></td>
<td>
<p>object obtained with <code>regressionTable</code> or <code>summary.regressionTable</code>.</p>
</td></tr>
<tr><td><code id="summary.regressionTable_+3A_show.missing">show.missing</code></td>
<td>
<p>Decide if number of missing values are shown.
Either logical or character. If <code>'ifany'</code> then number missing values are
shown if there are some.</p>
</td></tr>
<tr><td><code id="summary.regressionTable_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> print results.</p>
</td></tr>
<tr><td><code id="summary.regressionTable_+3A_...">...</code></td>
<td>
<p>Used to control formatting of parameter estimates,
confidence intervals and p-values. See examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with two elements:
</p>

<ul>
<li><p> regressionTable: the formatted regression table (a data.frame)
</p>
</li>
<li><p> rawTable: table with the unformatted values (a data.frame)
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>publish.glm publish.coxph
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(pbc)
pbc$edema &lt;- factor(pbc$edema,levels=c("0","0.5","1"),labels=c("0","0.5","1"))
fit = coxph(Surv(time,status!=0)~age+sex+edema+log(bili)+log(albumin)+log(protime),
            data=pbc)
u=summary(regressionTable(fit))
u$regressionTable
u$rawTable
summary(regressionTable(fit),handler="prettyNum")
summary(regressionTable(fit),handler="format")
summary(regressionTable(fit),handler="sprintf",digits=c(2,2),pValue.stars=TRUE)
summary(regressionTable(fit),handler="sprintf",digits=c(2,2),pValue.stars=TRUE,ci.format="(l,u)")
</code></pre>

<hr>
<h2 id='summary.subgroupAnalysis'>summary.subgroupAnalysis</h2><span id='topic+summary.subgroupAnalysis'></span>

<h3>Description</h3>

<p>This function operates on a &quot;subgroupAnalysis&quot; object to produce a formatted
table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'subgroupAnalysis'
summary(
  object,
  digits = 3,
  eps = 0.001,
  subgroup.p = FALSE,
  keep.digital = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.subgroupAnalysis_+3A_object">object</code></td>
<td>
<p>- a subgroupAnalysis object</p>
</td></tr>
<tr><td><code id="summary.subgroupAnalysis_+3A_digits">digits</code></td>
<td>
<p>- number of digits for risk ratios</p>
</td></tr>
<tr><td><code id="summary.subgroupAnalysis_+3A_eps">eps</code></td>
<td>
<p>- lowest value of p to be shown exactly, others will be &quot;&lt;eps&quot;</p>
</td></tr>
<tr><td><code id="summary.subgroupAnalysis_+3A_subgroup.p">subgroup.p</code></td>
<td>
<p>- present p-values for analyses in subgroups</p>
</td></tr>
<tr><td><code id="summary.subgroupAnalysis_+3A_keep.digital">keep.digital</code></td>
<td>
<p>- prevents formatting risk ratio and confidence limits. Useful
for cases when further manipulations of rows and columns prior to adding a
forest plot is relevant.</p>
</td></tr>
<tr><td><code id="summary.subgroupAnalysis_+3A_...">...</code></td>
<td>
<p>- not currently used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function produces a formatted or unformatted table of a subgroupAnalysis object.
A forest plot can be added with the plot function.
</p>


<h3>Value</h3>

<p>A data.frame with formatted values for subgroups
</p>


<h3>Author(s)</h3>

<p>Christian Torp-Pedersen
</p>


<h3>See Also</h3>

<p>subgroupAnalysis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#load libraries
library(Publish)
library(survival)
library(data.table)
data(traceR) #get dataframe traceR
setDT(traceR)
traceR[,':='(wmi2=factor(wallMotionIndex&lt;0.9,levels=c(TRUE,FALSE), 
                labels=c("bad","good")),
             abd2=factor(abdominalCircumference&lt;95, levels=c(TRUE,FALSE), 
                labels=c("slim","fat")))]
traceR[,sex:=as.factor(sex)] # all subgroup variables needs to be factor                
traceR[observationTime==0,observationTime:=1]           
# univariate analysis of smoking in subgroups of age and sex
# Basic model from randomised study - but observed for 12 years
fit_cox &lt;- coxph(Surv(observationTime,dead)~treatment,data=traceR)
sub_cox &lt;- subgroupAnalysis(fit_cox,traceR,treatment="treatment",
  subgroup=c("smoking","sex","wmi2","abd2")) # subgroups as character string
summary(sub_cox)   
</code></pre>

<hr>
<h2 id='summary.univariateTable'>Preparing univariate tables for publication</h2><span id='topic+summary.univariateTable'></span><span id='topic+summary.utable'></span>

<h3>Description</h3>

<p>Summary function for univariate table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'univariateTable'
summary(
  object,
  n = "inNames",
  drop.reference = FALSE,
  pvalue.stars = FALSE,
  pvalue.digits = 4,
  show.missing = c("ifany", "always", "never"),
  show.pvalues,
  show.totals,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.univariateTable_+3A_object">object</code></td>
<td>
<p><code>univariateTable</code> object as obtained with
function <code>univariateTable</code>.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_n">n</code></td>
<td>
<p>If not missing, show the number of subjects in each
column. If equal to <code>"inNames"</code>, show the numbers in
parentheses in the column names.  If missing the value
<code>object$n</code> is used.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_drop.reference">drop.reference</code></td>
<td>
<p>Logical or character (vector). Decide if line with reference
level should be suppressed for factors. If <code>TRUE</code> or <code>"all"</code>
suppress for all categorical factors. If <code>'binary'</code> suppress only for binary variables.
Can be character vector in which case reference lines are suppressed for variables
that are included in the vector.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_pvalue.stars">pvalue.stars</code></td>
<td>
<p>If TRUE use <code>symnum</code> to parse p-values
otherwise use <code>format.pval</code>.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_pvalue.digits">pvalue.digits</code></td>
<td>
<p>Passed to <code>format.pval</code>.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_show.missing">show.missing</code></td>
<td>
<p>Decides if number of missing values are shown in table.
Defaults to <code>"ifany"</code>, and can also be set to <code>"always"</code> or <code>"never"</code>.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_show.pvalues">show.pvalues</code></td>
<td>
<p>Logical. If set to <code>FALSE</code> the column
<code>p-values</code> is removed. If missing the value
<code>object$compare.groups[[1]]==TRUE</code> is used.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_show.totals">show.totals</code></td>
<td>
<p>Logical. If set to <code>FALSE</code> the column
<code>Totals</code> is removed. If missing the value
<code>object$show.totals</code> is used.</p>
</td></tr>
<tr><td><code id="summary.univariateTable_+3A_...">...</code></td>
<td>
<p>passed on to <code>labelUnits</code>. This overwrites labels
stored in <code>object$labels</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Collects results of univariate table in a matrix.
</p>


<h3>Value</h3>

<p>Summary table
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
u &lt;- univariateTable(gender~age+location+Q(BMI)+height+weight,
                data=Diabetes)
summary(u)
summary(u,n=NULL)
summary(u,pvalue.digits=2,"age"="Age (years)","height"="Body height (cm)")

u2 &lt;- univariateTable(location~age+AgeGroups+gender+height+weight,
                data=Diabetes)
summary(u2)
summary(u2,drop.reference=TRUE)
## same but more flexible
summary(u2,drop.reference=c("binary"))
## same but even more flexible
summary(u2,drop.reference=c("gender"))


</code></pre>

<hr>
<h2 id='sutable'>Fast summary of a univariate table</h2><span id='topic+sutable'></span>

<h3>Description</h3>

<p>First apply univariateTable then call summary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sutable(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sutable_+3A_...">...</code></td>
<td>
<p>Unnamed arguments and are passed to <code>univariateTable</code> as well as named arguments
that match <code>univariateTable</code>'s arguments, other arguments
are passed to <code>summary.univariateTable</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary table
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>summary.univariateTable univariateTable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
sutable(gender~age+location+Q(BMI)+height+weight,data=Diabetes,BMI="Body mass index (kg/m^2)")
</code></pre>

<hr>
<h2 id='table2x2'>2x2 table calculus for teaching</h2><span id='topic+table2x2'></span>

<h3>Description</h3>

<p>2x2 table calculus for teaching
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table2x2(
  x,
  digits = 1,
  conf.level = 0.95,
  stats = c("table", "rd", "rr", "or", "chisq", "fisher")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="table2x2_+3A_x">x</code></td>
<td>
<p>2x2 table</p>
</td></tr>
<tr><td><code id="table2x2_+3A_digits">digits</code></td>
<td>
<p>rounding digits</p>
</td></tr>
<tr><td><code id="table2x2_+3A_conf.level">conf.level</code></td>
<td>
<p>Confidence level used for constructing confidence intervals. Default is 0.95.</p>
</td></tr>
<tr><td><code id="table2x2_+3A_stats">stats</code></td>
<td>
<p>subset or all of <code>c("table","rd","or","rr","chisq","fisher")</code> where rd= risk difference, rr = risk ratio, or = odds ratio, chisq = chi-square test, fisher= fisher's exact test and table = the 2x2 table</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2x2 table calculus for teaching
</p>


<h3>Value</h3>

<p>see example
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>table2x2(table("marker"=rbinom(100,1,0.4),"response"=rbinom(100,1,0.1)))
table2x2(matrix(c(71,18,38,8),ncol=2),stats="table")
table2x2(matrix(c(71,18,38,8),ncol=2),stats=c("rr","fisher"))
</code></pre>

<hr>
<h2 id='trace'>trace data</h2><span id='topic+trace'></span>

<h3>Description</h3>

<p>These data are from screening to the TRACE study, a comparison between the angiotensin converting
enzyme inhibitor trandolapril and placebo ford large myocardial infarctions. A total of 6676
patients were screened for the study. Survival has been followed for the screened population for
16 years. The current data has been prepared for a poisson regression to examine survival. The data
has been &quot;split&quot; in 0.5 year intervals (plitLexis function from Epi package) and then collapsed
on all variables (aggregate function).
</p>


<h3>Format</h3>

<p>A data frame with 1832 observations on the following 6 variables.
</p>

<dl>
<dt>Time</dt><dd><p>Time after myocardial infarction, in 6 months intervals</p>
</dd>
<dt>smoking</dt><dd><p>Smoking status. A factor with levels (Never, Current, Previous)</p>
</dd>
<dt>sex</dt><dd><p>A factor with levels (Female, Male)</p>
</dd>
<dt>age</dt><dd><p>Age in years at the time of myocardial infarction</p>
</dd>
<dt>ObsTime</dt><dd><p>Cumulative risk time in each split</p>
</dd>
<dt>dead</dt><dd><p>Count of deaths</p>
</dd>
</dl>



<h3>References</h3>

<p>Kober et al 1995 Am. J. Cardiol 76,1-5
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(trace)
Units(trace,list("age"="years"))
fit &lt;- glm(dead ~ smoking+sex+age+Time+offset(log(ObsTime)), family="poisson",data=trace)
rtf &lt;- regressionTable(fit,factor.reference = "inline")
summary(rtf)
publish(fit)

</code></pre>

<hr>
<h2 id='traceR'>traceR data</h2><span id='topic+traceR'></span>

<h3>Description</h3>

<p>These data are from the TRACE randomised trial,  a comparison between the angiotensin converting
enzyme inhibitor trandolapril and placebo ford large myocardial infarctions. In all, 1749 patients
were randomised. The current data are from a 15 year follow-up.
</p>


<h3>Format</h3>

<p>A data frame with 1749 observations on the following variables.
</p>

<dl>
<dt>weight</dt><dd><p>Weight in kilo</p>
</dd>
<dt>height</dt><dd><p>Height in meters</p>
</dd>
<dt>abdominalCircumference</dt><dd><p>in centimeters</p>
</dd>
<dt>seCreatinine</dt><dd><p>in mmol per liter</p>
</dd>
<dt>wallMotionIndex</dt><dd><p>left ventricular function 0-2, 0 worst, 2 normal</p>
</dd>
<dt>observationTime</dt><dd><p>time to death or censor</p>
</dd>
<dt>age</dt><dd><p>age in years</p>
</dd>
<dt>sex</dt><dd><p>0=female,1=male</p>
</dd>
<dt>smoking</dt><dd><p>0=never,1=prior,2=current</p>
</dd>
<dt>dead</dt><dd><p>0=censor,1=dead</p>
</dd>
<dt>treatment</dt><dd><p>placebo or trandolapril</p>
</dd>
</dl>



<h3>References</h3>

<p>Kober et al 1995 NEJM 333,1670
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(trace)
Units(trace,list("age"="years"))
fit &lt;- glm(dead ~ smoking+sex+age+Time+offset(log(ObsTime)), family="poisson",data=trace)
rtf &lt;- regressionTable(fit,factor.reference = "inline")
summary(rtf)
publish(fit)

</code></pre>

<hr>
<h2 id='Units'>Add units to data set</h2><span id='topic+Units'></span>

<h3>Description</h3>

<p>Add variable units to data.frame (or data.table).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Units(object, units)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Units_+3A_object">object</code></td>
<td>
<p>A data.frame or data.table</p>
</td></tr>
<tr><td><code id="Units_+3A_units">units</code></td>
<td>
<p>Named list of units. Names are variable names. If omitted, show existing units.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the object has units existing units are replaced by given units.
</p>


<h3>Value</h3>

<p>The object augmented with attribute <code>"units"</code>
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
Diabetes &lt;- Units(Diabetes,list(BMI="kg/m^2"))
Units(Diabetes)
Diabetes &lt;- Units(Diabetes,list(bp.1s="mm Hg",bp.2s="mm Hg"))
Units(Diabetes)
</code></pre>

<hr>
<h2 id='univariateTable'>Univariate table</h2><span id='topic+univariateTable'></span><span id='topic+utable'></span>

<h3>Description</h3>

<p>Categorical variables are summarized using counts and frequencies and compared .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>univariateTable(
  formula,
  data = parent.frame(),
  summary.format = "mean(x) (sd(x))",
  Q.format = "median(x) [iqr(x)]",
  freq.format = "count(x) (percent(x))",
  column.percent = TRUE,
  digits = c(1, 1, 3),
  big.mark = ",",
  short.groupnames,
  compare.groups = TRUE,
  show.totals = TRUE,
  n = "inNames",
  outcome = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="univariateTable_+3A_formula">formula</code></td>
<td>
<p>Formula specifying the grouping variable (strata)
on the left hand side (can be omitted) and on the right hand side
the variables for which to obtain (descriptive) statistics.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_data">data</code></td>
<td>
<p>Data set in which formula is evaluated</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_summary.format">summary.format</code></td>
<td>
<p>Format for the numeric (non-factor)
variables. Default is mean (SD).  If different formats are
desired, either special Q can be used or the function is called
multiple times and the results are rbinded. See examples.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_q.format">Q.format</code></td>
<td>
<p>Format for quantile summary of numerical
variables: Default is median (inter quartile range).</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_freq.format">freq.format</code></td>
<td>
<p>Format for categorical variables. Default is
count (percentage).</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_column.percent">column.percent</code></td>
<td>
<p>Logical, if <code>TRUE</code> and the default
freq.format is used then column percentages are given instead of
row percentages for categorical variables (factors).</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_digits">digits</code></td>
<td>
<p>Number of digits</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_big.mark">big.mark</code></td>
<td>
<p>For formatting large numbers (i.e., greater than 1,000). <code>""</code> turn this off.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_short.groupnames">short.groupnames</code></td>
<td>
<p>If <code>TRUE</code> group names are abbreviated.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_compare.groups">compare.groups</code></td>
<td>
<p>Method used to compare groups. If
<code>"logistic"</code> and there are exactly two groups logistic
regression is used instead of t-tests and Wilcoxon rank tests to
compare numeric variables across groups.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_show.totals">show.totals</code></td>
<td>
<p>If <code>TRUE</code> show a column with totals.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_n">n</code></td>
<td>
<p>If <code>TRUE</code> show the number of subjects as a separate
row.  If equal to <code>"inNames"</code>, show the numbers in
parentheses in the column names. If <code>FALSE</code> do not show
number of subjects.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_outcome">outcome</code></td>
<td>
<p>Outcome data used to calculate p-values when
compare groups method is <code>'logistic'</code> or <code>'cox'</code>.</p>
</td></tr>
<tr><td><code id="univariateTable_+3A_...">...</code></td>
<td>
<p>saved as part of the result to be passed on to
<code>labelUnits</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can generate the baseline demographic characteristics
that forms table 1 in many publications. It is also useful for generating
other tables of univariate statistics.
</p>
<p>The result of the function is an object (list) which containe the various data
generated. In most applications the <code>summary</code> function should be applied which generates
a data.frame with a (nearly) publication ready table. Standard manipulation can be
used to modify, add or remove columns/rows and for users not accustomed to R the table
generated can be exported to a text file which can be read by other software, e.g., via
write.csv(table,file=&quot;path/to/results/table.csv&quot;)
</p>
<p>By default, continuous variables are summarized by means and standard deviations
and compared with t-tests. When continuous variables are summarized by medians
and interquartile ranges the 
Deviations from the above defaults are obtained when the
arguments summary.format and freq.format are combined with suitable
summary functions.
</p>


<h3>Value</h3>

<p>List with one summary table element for each variable on the right hand side of formula.
The summary tables can be combined with <code>rbind</code>. The function <code>summary.univariateTable</code>
combines the tables, and shows p-values in custom format.
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds
</p>


<h3>See Also</h3>

<p>summary.univariateTable, publish.univariateTable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Diabetes)
library(data.table)
univariateTable(~age,data=Diabetes)
univariateTable(~gender,data=Diabetes)
univariateTable(~age+gender+ height+weight,data=Diabetes)
## same thing but less typing
utable(~age+gender+ height+weight,data=Diabetes)

## summary by location: 
univariateTable(location~Q(age)+gender+height+weight,data=Diabetes)
## continuous variables marked with Q() are (by default) summarized
## with median (IQR) and kruskal.test (with two groups equivalent to wilcox.test)
## variables not marked with Q() are (by default) summarized
## with mean (sd) and anova.glm(...,test="Chisq")
## the p-value of anova(glm()) with only two groups is similar
## but not exactly equal to that of a t.test
## categorical variables are (by default) summarized by count
## (percent) and chi-square tests (\code{chisq.test}). When \code{compare.groups ='logistic'}
## anova(glm(...,family=binomial,test="Chisq")) is used to calculate p-values.

## export result to csv
table1 = summary(univariateTable(location~age+gender+height+weight,data=Diabetes),
show.pvalues=FALSE)
# write.csv(table1,file="~/table1.csv",rownames=FALSE)

## change labels and values
utable(location~age+gender+height+weight,data=Diabetes,
       age="Age (years)",gender="Sex",
       gender.female="Female",
       gender.male="Male",
       height="Body height (inches)",
       weight="Body weight (pounds)")

## Use quantiles and rank tests for some variables and mean and standard deviation for others
univariateTable(gender~Q(age)+location+Q(BMI)+height+weight,
                data=Diabetes)

## Factor with more than 2 levels
Diabetes$AgeGroups &lt;- cut(Diabetes$age,
                          c(19,29,39,49,59,69,92),
                          include.lowest=TRUE)
univariateTable(location~AgeGroups+gender+height+weight,
                data=Diabetes)

## Row percent
univariateTable(location~gender+age+AgeGroups,
                data=Diabetes,
                column.percent=FALSE)

## change of frequency format
univariateTable(location~gender+age+AgeGroups,
                data=Diabetes,
                column.percent=FALSE,
                freq.format="percent(x) (n=count(x))")

## changing Labels
u &lt;- univariateTable(location~gender+AgeGroups+ height + weight,
                     data=Diabetes,
                     column.percent=TRUE,
                     freq.format="count(x) (percent(x))")
summary(u,"AgeGroups"="Age (years)","height"="Height (inches)")

## more than two groups
Diabetes$frame=factor(Diabetes$frame,levels=c("small","medium","large"))
univariateTable(frame~gender+BMI+age,data=Diabetes)

Diabetes$sex=as.numeric(Diabetes$gender)
univariateTable(frame~sex+gender+BMI+age,
                data=Diabetes,freq.format="count(x) (percent(x))")

## multiple summary formats
## suppose we want for some reason mean (range) for age
## and median (range) for BMI.
## method 1:
univariateTable(frame~Q(age)+BMI,
                data=Diabetes,
                Q.format="mean(x) (range(x))",
                summary.format="median(x) (range(x))")
## method 2:
u1 &lt;- summary(univariateTable(frame~age,
                              data=na.omit(Diabetes),
                              summary.format="mean(x) (range(x))"))
u2 &lt;- summary(univariateTable(frame~BMI,
                              data=na.omit(Diabetes),
                              summary.format="median(x) (range(x))"))
publish(rbind(u1,u2),digits=2)

## Large number format (big.mark)
n=100000
dat=data.frame(id=1:n,z=rbinom(n,1,.3),x=factor(sample(1:8,size=n,replace=TRUE)))
u3 &lt;- summary(univariateTable(z~x,
                              data=dat,big.mark=","))
u3

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
