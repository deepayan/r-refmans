<!DOCTYPE html><html><head><title>Help for package ndjson</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ndjson}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#flatten'><p>Flatten a character vector of individual JSON lines into a <code>data.table</code></p></a></li>
<li><a href='#ndjson'><p>Wicked-fast Streaming JSON ('ndjson) Reader</p></a></li>
<li><a href='#stream_in'><p>Stream in &amp; flatten an ndjson file into a <code>data.table</code></p></a></li>
<li><a href='#validate'><p>Validate ndjson file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Wicked-Fast Streaming 'JSON' ('ndjson') Reader</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-14</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bob Rudis &lt;bob@rud.is&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Streaming 'JSON' ('ndjson') has one 'JSON' record per-line
        and many modern 'ndjson' files contain large numbers of records.
        These constructs may not be columnar in nature, but it is often
        useful to read in these files and "flatten" the structure out to
        enable working with the data in an R 'data.frame'-like context.
        Functions are provided that make it possible to read in plain
        'ndjson' files or compressed ('gz') 'ndjson' files and either
        validate the format of the records or create "flat" 'data.table'
        structures from them.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hrbrmstr/ndjson">https://github.com/hrbrmstr/ndjson</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hrbrmstr/ndjson/issues">https://github.com/hrbrmstr/ndjson/issues</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>zlib, C++17</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest, covr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, data.table, tibble</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-16 12:47:45 UTC; hrbrmstr</td>
</tr>
<tr>
<td>Author:</td>
<td>Bob Rudis <a href="https://orcid.org/0000-0001-5670-2640"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Niels Lohmann [aut] (C++ json parser),
  Deepak Bandyopadhyay [aut] (C++ gzstream),
  Lutz Kettner [aut] (C++ gzstream),
  Neal Fultz [ctb] (Rcpp integration),
  Maarten Demeyer [ctb] (dtplyr cleanup)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-17 07:10:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='flatten'>Flatten a character vector of individual JSON lines into a <code>data.table</code></h2><span id='topic+flatten'></span>

<h3>Description</h3>

<p>Flatten a character vector of individual JSON lines into a <code>data.table</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flatten(x, cls = c("dt", "tbl"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flatten_+3A_x">x</code></td>
<td>
<p>character vector of individual JSON lines to flatten</p>
</td></tr>
<tr><td><code id="flatten_+3A_cls">cls</code></td>
<td>
<p>the package uses <code>data.table::rbindlist</code> for speed but
that's not always the best return type for everyone, so you have
option of keeping it a <code>data.table</code> or converting it to a <code>tbl</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.table</code> or <code>tbl</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>flatten('{"top":{"next":{"final":1,"end":true},"another":"yes"},"more":"no"}')
</code></pre>

<hr>
<h2 id='ndjson'>Wicked-fast Streaming JSON ('ndjson) Reader</h2><span id='topic+ndjson'></span>

<h3>Description</h3>

<p>Streaming 'JSON' ('ndjson') has one 'JSON' record per-line
and many modern 'ndjson' files contain large numbers of records.
These constructs may not be columnar in nature, but it is often
useful to read in these files and &quot;flatten&quot; the structure out to
enable working with the data in an R 'data.frame'-like context.
Functions are provided that make it possible to read in plain
ndjson' files or compressed ('gz') 'ndjson' files and either
validate the format of the records or create &quot;flat&quot; 'data.table'
structures from them.
</p>


<h3>Author(s)</h3>

<p>Bob Rudis (bob@rud.is)
</p>

<hr>
<h2 id='stream_in'>Stream in &amp; flatten an ndjson file into a <code>data.table</code></h2><span id='topic+stream_in'></span>

<h3>Description</h3>

<p>Given a file of streaming JSON (ndjson) this function reads in the records
and creates a flat <code>data.table</code> / <code>tbl</code> from it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stream_in(path, cls = c("dt", "tbl"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stream_in_+3A_path">path</code></td>
<td>
<p>path to file (supports &quot;<code>gz</code>&quot; files)</p>
</td></tr>
<tr><td><code id="stream_in_+3A_cls">cls</code></td>
<td>
<p>the package uses <code>data.table::rbindlist</code> for speed but
that's not always the best return type for everyone, so you have
option of keeping it a <code>data.table</code> or converting it to a <code>tbl</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.table</code> or <code>tbl</code>
</p>


<h3>References</h3>

<p><a href="http://ndjson.org/">http://ndjson.org/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- system.file("extdata", "test.json", package="ndjson")
nrow(stream_in(f))

gzf &lt;- system.file("extdata", "testgz.json.gz", package="ndjson")
nrow(stream_in(gzf))
</code></pre>

<hr>
<h2 id='validate'>Validate ndjson file</h2><span id='topic+validate'></span>

<h3>Description</h3>

<p>Given a file of streaming JSON (ndjson) this function reads in the records
and validates that they are all legal JSON records. If the <code>verbose</code>
parameter is <code>TRUE</code> and errors are found, the line numbers of the
errant records will be displayed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate(path, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_+3A_path">path</code></td>
<td>
<p>path to file (supports &quot;<code>gz</code>&quot; files)</p>
</td></tr>
<tr><td><code id="validate_+3A_verbose">verbose</code></td>
<td>
<p>display verbose information (filename and line numbers with bad records)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical
</p>


<h3>References</h3>

<p><a href="http://ndjson.org/">http://ndjson.org/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- system.file("extdata", "test.json", package="ndjson")
validate(f)

gzf &lt;- system.file("extdata", "testgz.json.gz", package="ndjson")
validate(gzf)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
