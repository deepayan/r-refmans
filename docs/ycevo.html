<!DOCTYPE html><html><head><title>Help for package ycevo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ycevo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ycevo-package'><p>Nonparametric Estimation of the Yield Curve Evolution</p></a></li>
<li><a href='#augment.ycevo'><p>Augment data with predicted discount functions and yield curves</p></a></li>
<li><a href='#autoplot.ycevo'><p>Plot the estimated discount functions and yield curves</p></a></li>
<li><a href='#generate_yield'><p>Generate a yield curve with cubic time evolution</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#vis_kernel'><p>Visualise kernel weights</p></a></li>
<li><a href='#ycevo'><p>Estimate yield function</p></a></li>
<li><a href='#ycevo_data'><p>Simulate bond data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Nonparametric Estimation of the Yield Curve Evolution</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yangzhuoran Fin Yang &lt;yangyangzhuoran@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Nonparametric estimation of discount functions and yield curves from 
    transaction data of coupon paying bonds. 
    Koo, B., La Vecchia, D., &amp; Linton, O. B. (2021) &lt;<a href="https://doi.org/10.1016%2Fj.jeconom.2020.04.014">doi:10.1016/j.jeconom.2020.04.014</a>&gt; 
    describe an application of this package using the Center for Research in 
    Security Prices (CRSP) Bond Data and document its implementation.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bonsook/ycevo">https://github.com/bonsook/ycevo</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bonsook/ycevo/issues">https://github.com/bonsook/ycevo/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.0), future.apply, generics, ggplot2, lubridate,
Matrix, progressr, Rcpp (&ge; 0.12.18), rlang, stats, tibble,
tidyr, tidyselect</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, rmarkdown, plotly</td>
</tr>
<tr>
<td>Language:</td>
<td>en-AU</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-05 12:27:17 UTC; fyan0012</td>
</tr>
<tr>
<td>Author:</td>
<td>Bonsoo Koo [aut],
  Nathaniel Tomasetti [ctb],
  Kai-Yang Goh [ctb],
  Yangzhuoran Fin Yang
    <a href="https://orcid.org/0000-0002-1232-8017"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-05 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ycevo-package'>Nonparametric Estimation of the Yield Curve Evolution</h2><span id='topic+ycevo-package'></span>

<h3>Description</h3>

<p>Nonparametric estimation of discount functions and yield curves.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yangzhuoran Fin Yang <a href="mailto:yangyangzhuoran@gmail.com">yangyangzhuoran@gmail.com</a> (<a href="https://orcid.org/0000-0002-1232-8017">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Bonsoo Koo <a href="mailto:Bonsoo.Koo@monash.edu">Bonsoo.Koo@monash.edu</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Nathaniel Tomasetti [contributor]
</p>
</li>
<li><p> Kai-Yang Goh [contributor]
</p>
</li></ul>



<h3>References</h3>

<p>Koo, B., La Vecchia, D., &amp; Linton, O. (2021). Estimation of a nonparametric model for bond prices from cross-section and time series information. Journal of Econometrics, 220(2), 562-588.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/bonsook/ycevo">https://github.com/bonsook/ycevo</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bonsook/ycevo/issues">https://github.com/bonsook/ycevo/issues</a>
</p>
</li></ul>


<hr>
<h2 id='augment.ycevo'>Augment data with predicted discount functions and yield curves</h2><span id='topic+augment.ycevo'></span>

<h3>Description</h3>

<p>Augment data with predicted discount functions and yield curves
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ycevo'
augment(x, newdata = NULL, loess = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="augment.ycevo_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+ycevo">ycevo</a> object</p>
</td></tr>
<tr><td><code id="augment.ycevo_+3A_newdata">newdata</code></td>
<td>
<p>A data frame containing time-to-maturity in years <code>tau</code> and
the quotation date at which the discount functions and the yield curves are to
be predicted. The quotation date is to be named after the quotation
date column in <code>x</code>, which is also the name of the quotation date column of
the <code>data</code> argument in <code><a href="#topic+ycevo">ycevo()</a></code> that produces <code>x</code>. The default is <code>qdate</code>.</p>
</td></tr>
<tr><td><code id="augment.ycevo_+3A_loess">loess</code></td>
<td>
<p>Logical. If TRUE, the returned discount functions and yield curves
are loess smoothed.</p>
</td></tr>
<tr><td><code id="augment.ycevo_+3A_...">...</code></td>
<td>
<p>Additional arguments required for generic consistency. Currently
not used. Warning: A misspelled argument will not raise an error. The
misspelled argument will be either disregarded, or the default value will
be applied if one exists.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>newdata</code> is not provided, returns the discount function and yield curve
at the specified estimation points in <code><a href="#topic+ycevo">ycevo()</a></code>.
</p>
<p>If <code>newdata</code> is provided, the discount functions at the time-to-maturities
specified in <code>newdata</code> are generated from loess smoothing (see
<code><a href="stats.html#topic+loess">stats::loess()</a></code>), and interpolated to produce the discount function values at the
quotation date specified in <code>newdata</code>, before being converted to the yield curves.
</p>


<h3>Value</h3>

<p><code>newdata</code> augmented with <code>.discount</code> and <code>.yield</code> for the discount
function and the yield curve respectively.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ycevo">ycevo()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulating bond data
bonds &lt;- ycevo_data(n = 10)

# Estimation can take up to 30 seconds
res &lt;- ycevo(bonds, x = lubridate::ymd("2023-03-01"))
# Augmentation
augment(res)


</code></pre>

<hr>
<h2 id='autoplot.ycevo'>Plot the estimated discount functions and yield curves</h2><span id='topic+autoplot.ycevo'></span>

<h3>Description</h3>

<p>Plots the estimated discount functions and yield curves from a <code><a href="#topic+ycevo">ycevo()</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ycevo'
autoplot(
  object,
  est = c("both", "discount", "yield"),
  against = c("tau", "x", "both"),
  loess = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.ycevo_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+ycevo">ycevo</a> object</p>
</td></tr>
<tr><td><code id="autoplot.ycevo_+3A_est">est</code></td>
<td>
<p>String. Indicates which estimated values to plot: discount function, yield curve, or
both. Default is both.</p>
</td></tr>
<tr><td><code id="autoplot.ycevo_+3A_against">against</code></td>
<td>
<p>String. Indicates which variable to plot against, i.e. what is on the x axis.
Time-to-maturity <code>tau</code>, quotation date <code>x</code>, or both (requires package
<code>plotly</code>). If both, an interactive 3D plot is generated.</p>
</td></tr>
<tr><td><code id="autoplot.ycevo_+3A_loess">loess</code></td>
<td>
<p>Logical. If TRUE, the returned discount functions and yield curves
are loess smoothed.</p>
</td></tr>
<tr><td><code id="autoplot.ycevo_+3A_...">...</code></td>
<td>
<p>Additional arguments required for generic consistency. Currently
not used. Warning: A misspelled argument will not raise an error. The
misspelled argument will be either disregarded, or the default value will
be applied if one exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object if only one dimension is specified in
<code>against</code>. A <code><a href="plotly.html#topic+plot_ly">plotly::plot_ly()</a></code> object if <code>against</code> is set to both.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ycevo">ycevo()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulating bond data
bonds &lt;- ycevo_data(n = 10)

# Estimation can take up to 30 seconds
res &lt;- ycevo(bonds, x = lubridate::ymd("2023-03-01"))
# Plot
autoplot(res)


</code></pre>

<hr>
<h2 id='generate_yield'>Generate a yield curve with cubic time evolution</h2><span id='topic+generate_yield'></span><span id='topic+get_yield_at'></span><span id='topic+get_yield_at_vec'></span>

<h3>Description</h3>

<p>Generate a yield curve using the extended version of Nelson &amp; Siegel model
(Nelson, C. R., &amp; Siegel, A. F., 1987). This has been used in the simulation
setting (Equation (30)) of Koo, B., La Vecchia, D., &amp; Linton, O. (2021). See
<code>Details</code> and <code>References</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_yield(
  n_qdate = 12,
  periods = 36,
  b0 = 0,
  b1 = 0.05,
  b2 = 2,
  t1 = 0.75,
  t2 = 125,
  linear = -0.55,
  quadratic = 0.55,
  cubic = -0.55
)

get_yield_at(
  time,
  maturity,
  b0 = 0,
  b1 = 0.05,
  b2 = 2,
  t1 = 0.75,
  t2 = 125,
  linear = -0.55,
  quadratic = 0.55,
  cubic = -0.55
)

get_yield_at_vec(
  time,
  maturity,
  b0 = 0,
  b1 = 0.05,
  b2 = 2,
  t1 = 0.75,
  t2 = 125,
  linear = -0.55,
  quadratic = 0.55,
  cubic = -0.55
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_yield_+3A_n_qdate">n_qdate</code></td>
<td>
<p>Integer. Number of quotation dates to use in the
data. Defaults to 12.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_periods">periods</code></td>
<td>
<p>Integer. Maximum number of time-to-maturity periods
in 10 years that the yield curve is estimated for each quotation date.
Defaults to 36</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_b0">b0</code></td>
<td>
<p>Level term in yield curve equation, Defaults is 0. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_b1">b1</code></td>
<td>
<p>Slope term in yield curve equation, Defaults is 0.05. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_b2">b2</code></td>
<td>
<p>Curvature term in yield curve equation, Defaults is 2. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_t1">t1</code></td>
<td>
<p>Scaling parameter in yield curve equation, Defaults is 0.75. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_t2">t2</code></td>
<td>
<p>Scaling parameter in yield curve equation, Defaults is 125. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_linear">linear</code></td>
<td>
<p>Linear term in yield curve evolution, Defaults is -0.55. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_quadratic">quadratic</code></td>
<td>
<p>Quadratic term in yield curve evolution. Defaults is 0.55.
See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_cubic">cubic</code></td>
<td>
<p>Cubic term in yield curve evolution. Defaults is -0.55. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_time">time</code></td>
<td>
<p>Numeric value.</p>
</td></tr>
<tr><td><code id="generate_yield_+3A_maturity">maturity</code></td>
<td>
<p>Numeric value. Maturity in years.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The initial curve at time zero is generated from the following equation
</p>
<p style="text-align: center;"><code class="reqn">Yield_{i, 0} = b_0 + b_1 * ((1 - \exp(-\tau_i / t_1)) / (\tau_i / t_1)) +
b_2 * ((1 - \exp(-\tau_i / t_2)) / (\tau_i / t_2) - \exp(-\tau_i / t_2))</code>
</p>

<p>where <code class="reqn">\tau_i</code> is the time to maturity, usually measured in years. This
defines the yield curve for the quotation date = 0. The yield curve for
quotation dates <code>time</code> is obtained by multiplying this curve
by the cubic equation,
</p>
<p style="text-align: center;"><code class="reqn">Yield_{i, time} = Yield_{i, 0} * (1 + linear * time + quadratic *
time^2 + cubic * time^3)</code>
</p>

<p>so the yield curve slowly changes over different quotation dates.
</p>


<h3>Value</h3>


<dl>
<dt><code>generate_yield()</code></dt><dd>
<p>Numeric matrix. Each column contains the yield curve values at a point in time (a quotation date).
Each row contains the yield curve values for a time-to-maturity.
For example, the number in the second column third row is the yield at the second quotation date,
for the third time-to-maturity ranking from shortest to longest.
See <code>Details</code> for the equation to generate a yield curve.
See <code>Examples</code> for a example with the code to visually inspect the yield curves.</p>
</dd>
</dl>


<dl>
<dt><code>get_yield_at()</code></dt><dd><p>Numeric vector.</p>
</dd>
</dl>


<dl>
<dt><code>get_yield_at_vec()</code></dt><dd><p>Numeric vector.</p>
</dd>
</dl>



<h3>Functions</h3>


<ul>
<li> <p><code>get_yield_at()</code>: Return the yield at specific points in time of
specific maturities.
</p>
</li>
<li> <p><code>get_yield_at_vec()</code>: Deprecated. Vectorised version of
<code>get_yield_at()</code>. Use <code>get_yield_at()</code> instead.
</p>
</li></ul>


<h3>References</h3>

<p>Nelson, C. R., &amp; Siegel, A. F. (1987). Parsimonious Modeling of
Yield Curves. The Journal of Business, 60(4), 473-489.
</p>
<p>Koo, B., La Vecchia, D., &amp; Linton, O. (2021). Estimation of a
nonparametric model for bond prices from cross-section and time series
information. Journal of Econometrics, 220(2), 562-588.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ycevo_data">ycevo_data()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>out &lt;- generate_yield()

# plots
library(ggplot2)
out &lt;- data.frame(out)
colnames(out) &lt;- 1:12
out &lt;- dplyr::mutate(out, time = 1:36)
out &lt;- tidyr::pivot_longer(out, -time, names_to = "qdate", values_to = "yield")
ggplot(out) +
  geom_line(aes(x=time, y=yield, color = qdate))

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+augment'></span><span id='topic+autoplot'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+augment">augment</a></code></p>
</dd>
<dt>ggplot2</dt><dd><p><code><a href="ggplot2.html#topic+autoplot">autoplot</a></code></p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+augment.ycevo">augment.ycevo()</a></code>
</p>
<p><code><a href="#topic+autoplot.ycevo">autoplot.ycevo()</a></code>
</p>

<hr>
<h2 id='vis_kernel'>Visualise kernel weights</h2><span id='topic+vis_kernel'></span>

<h3>Description</h3>

<p><code>vis_kernel()</code> visualises kernel weights assigned to the intervals
surrounding specific grid points using the Epanechnikov
kernel function and given bandwidths.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_kernel(data, x = NULL, hx = NULL, tau = NULL, ht = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vis_kernel_+3A_data">data</code></td>
<td>
<p>Bond data. If <code>x</code> and <code>hx</code> are not NULL, <code>data</code>
needs to include one time index column <code>qdate</code>. If <code>tau</code> and
<code>ht</code> are not NULL, <code>data</code> needs to include one column of time to
maturity in days <code>tupq</code>.</p>
</td></tr>
<tr><td><code id="vis_kernel_+3A_x">x</code></td>
<td>
<p>Time grids at which the discount curve is evaluated. Should be
specified using the same class of object as the quotation date (<code>qdate</code>)
column in <code>data</code>.</p>
</td></tr>
<tr><td><code id="vis_kernel_+3A_hx">hx</code></td>
<td>
<p>Numeric vector. Bandwidth parameters corresponding to each time
point <code>x</code>.</p>
</td></tr>
<tr><td><code id="vis_kernel_+3A_tau">tau</code></td>
<td>
<p>Numeric vector. Time-to-maturities in years where
discount function and yield curve will be estimated for each of time points <code>x</code>.
See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="vis_kernel_+3A_ht">ht</code></td>
<td>
<p>Numeric vector. Bandwidth parameters corresponding to each value of
time-to-maturities <code>tau</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="vis_kernel_+3A_...">...</code></td>
<td>
<p>Specification of an additional covariate, taking the form of <code>var = list(grid, bandwidth)</code>, where <code>var</code> is the name of the covariate in
<code>data</code>, <code>grid</code> is the values at which the yield curve is estimated,
similar to <code>x</code>, and <code>bandwidth</code> is the bandwidth parameter corresponding to
each of the <code>grid</code> values, similar to <code>hx</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> and <code>hx</code> are provided, the kernel weights assigned to the intervals
surrounding each of time points <code>x</code> will be plotted.
</p>
<p>If <code>tau</code> and <code>ht</code> are provided, the kernel weights assigned to the intervals
surrounding each of time-to-maturities <code>tau</code> will be plotted.
</p>
<p>If the grid and bandwidth of a covariate are provided in <code>...</code>, the
kernel weights of that covariate will be plotted.
</p>
<p>The kernel weights can only be plotted in one dimension (time,
time-to-maturity, or covariate) at a time.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ycevo_data">ycevo_data()</a></code>, <code><a href="#topic+ycevo">ycevo()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bonds &lt;- ycevo_data()
vis_kernel(bonds, x = lubridate::ymd("2023-06-01"), hx = 0.2)

</code></pre>

<hr>
<h2 id='ycevo'>Estimate yield function</h2><span id='topic+ycevo'></span><span id='topic+estimate_yield'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Nonparametric estimation of discount functions and yield curves at given
dates, time-to-maturities, and one additional covariate, usually interest
rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ycevo(
  data,
  x,
  span_x = 60,
  hx = NULL,
  tau = NULL,
  ht = NULL,
  tau_p = tau,
  htp = NULL,
  cols = NULL,
  ...
)

estimate_yield(
  data,
  xgrid,
  hx,
  tau,
  ht,
  tau_p = tau,
  htp = ht,
  rgrid = NULL,
  hr = NULL,
  interest = NULL,
  cfp_slist = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ycevo_+3A_data">data</code></td>
<td>
<p>Data frame; bond data to estimate discount curve from. See
<code><a href="#topic+ycevo_data">ycevo_data()</a></code> for an example bond data structure. Minimum required columns
are <code>qdate</code>, <code>id</code>, <code>price</code>, <code>tupq</code>, and <code>pdint</code>. The columns can be named
differently: see <code>cols</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_x">x</code></td>
<td>
<p>Time grids at which the discount curve is evaluated. Should be
specified using the same class of object as the quotation date (<code>qdate</code>)
column in <code>data</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_span_x">span_x</code></td>
<td>
<p>Half of the window size, or the distance from the centre <code>x</code> to
the maximum (or the minimum) <code>qdate</code> with non-zero weight using the kernel
function, measured by the number of regular interval between two
consecutive <code>qdate</code>. Ignored if <code>hx</code> is specified. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_hx">hx</code></td>
<td>
<p>Numeric vector. Bandwidth parameters corresponding to each time
point <code>x</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_tau">tau</code></td>
<td>
<p>Numeric vector. Time-to-maturities in years where
discount function and yield curve will be estimated for each of time points <code>x</code>.
See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_ht">ht</code></td>
<td>
<p>Numeric vector. Bandwidth parameters corresponding to each value of
time-to-maturities <code>tau</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_tau_p">tau_p</code></td>
<td>
<p>Numeric vector. Auxiliary time-to-maturities in
years. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_htp">htp</code></td>
<td>
<p>Numeric vector. Bandwidth parameters corresponding to each of
auxiliary time-to-maturities <code>tau_p</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_cols">cols</code></td>
<td>
<p>&lt;<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>&gt; A named list or vector of
alternative names of required variables, following the <code>new_name = old_name</code> syntax of the <code><a href="dplyr.html#topic+rename">dplyr::rename()</a></code>, where the <code>new_nam</code> takes one of
the five column names required in <code>data</code>. This enables the user to provide
<code>data</code> with columns named differently from required.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_...">...</code></td>
<td>
<p>Specification of an additional covariate, taking the form of <code>var = list(grid, bandwidth)</code>, where <code>var</code> is the name of the covariate in
<code>data</code>, <code>grid</code> is the values at which the yield curve is estimated,
similar to <code>x</code>, and <code>bandwidth</code> is the bandwidth parameter corresponding to
each of the <code>grid</code> values, similar to <code>hx</code>.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_xgrid">xgrid</code></td>
<td>
<p>Numeric vector. Values between 0 and 1. Time grids over the
entire time horizon (percentile) of the data at which the discount function is
evaluated.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_rgrid">rgrid</code></td>
<td>
<p>(Optional) Numeric vector. Interest rate grids in percentage
at which the discount function is evaluated, e.g. 4.03 means at interest rate
of 4.03%.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_hr">hr</code></td>
<td>
<p>(Optional) Numeric vector. Bandwidth parameter in percentage
determining the size of the window in the kernel function that corresponds
to each interest rate grid ('rgrid').</p>
</td></tr>
<tr><td><code id="ycevo_+3A_interest">interest</code></td>
<td>
<p>(Optional) Numeric vector. Daily short term interest rates.
The length is the same as the number of quotation dates included in the
data, i.e. one interest rate per day.</p>
</td></tr>
<tr><td><code id="ycevo_+3A_cfp_slist">cfp_slist</code></td>
<td>
<p>(Internal) Experienced users only. A list of matrices,
generated by the internal function 'get_cfp_slist'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Suppose that a bond <code class="reqn">i</code> has a price <code class="reqn">p_i</code> at time <code class="reqn">t</code> with a
set of cash payments, say <code class="reqn">c_1, c_2, \ldots, c_m</code> with a set of
corresponding discount values <code class="reqn">d_1, d_2, \ldots, d_m</code>. In the bond
pricing literature, the market price of a bond should reflect the
discounted value of cash payments. Thus, we want to minimise
</p>
<p style="text-align: center;"><code class="reqn">(p_i-\sum^m_{j=1}c_j\times d_j)^2.</code>
</p>
<p> For the estimation of <code class="reqn">d_k(k=1,
\ldots, m)</code>, solving the first order condition yields
</p>
<p style="text-align: center;"><code class="reqn">(p_i-\sum^m_{j=1}c_j \times d_j)c_k = 0, </code>
</p>
<p> and </p>
<p style="text-align: center;"><code class="reqn">\hat{d}_k =
\frac{p_i c_k}{c_k^2} - \frac{\sum^m_{j=1,k\neq k}c_k c_j d_j}{c_k^2}.</code>
</p>

<p>There are challenges: <code class="reqn">\hat{d}_k</code> depends on all the relevant discount
values for the cash payments of the bond. Our model contains random errors
and our interest lies in expected value of <code class="reqn">d(.)</code> where the expected
value of errors is zero. <code class="reqn">d(.)</code> is an infinite-dimensional function not
a discrete finite-dimensional vector. Generally, cash payments are made
biannually, not dense at all. Moreover, cash payment schedules vary over
different bonds.
</p>
<p>Let <code class="reqn">d(\tau, X_t)</code> be the discount function at given covariates
<code class="reqn">X_t</code> (dates <code>x</code> and interest rates <code>rgrid</code>), and given
time-to-maturities <code class="reqn">\tau</code> (<code>tau</code>). <code class="reqn">y(\tau, X_t)</code> is the yield
curve at given covariates <code class="reqn">X_t</code> (dates <code>x</code> and interest rates
<code>rgrid</code>), and given time-to-maturities <code class="reqn">\tau</code> (<code>tau</code>).
</p>
<p>We pursue the minimum of the following smoothed sample least squares
objective function for any smooth function <code class="reqn">d(.)</code>: </p>
<p style="text-align: center;"><code class="reqn">Q(d) =
\sum^T_{t=1}\sum^n_{i=1}\int\{p_{it}-\sum^{m_{it}}_{j=1}c_{it}(\tau_{ij})d(s_{ij},
x)\}^2 \sum^{m_{it}}_{k=1}\{K_h(s_{ik}-\tau_{ik})ds_{ik}\}K_h(x-X_t)dx,</code>
</p>

<p>where a bond <code class="reqn">i</code> has a price <code class="reqn">p_i</code> at time <code class="reqn">t</code> with a set of cash
payments <code class="reqn">c_1, c_2, \ldots, c_m</code> with a set of corresponding discount
values <code class="reqn">d_1, d_2, \ldots, d_m</code>, <code class="reqn">K_h(.) = K(./h)</code> is the kernel
function with a bandwidth parameter <code class="reqn">h</code>, the first kernel function is
the kernel in space with bonds whose maturities <code class="reqn">s_{ik}</code> are close to
the sequence <code class="reqn">\tau_{ik}</code>, the second kernel function is the kernel in
time and in interest rates with <code class="reqn">x</code>, which are close to the sequence
<code class="reqn">X_t</code>. This means that bonds with similar cash flows, and traded in
contiguous days, where the short term interest rates in the market are
similar, are combined for the estimation of the discount function at a
point in space, in time, and in &quot;interest rates&quot;.
</p>
<p>The estimator for the discount function over time to maturity and time is
</p>
<p style="text-align: center;"><code class="reqn">\hat{d}=\arg\min_d Q(d).</code>
</p>
<p> This function provides a data frame of the
estimated yield and discount rate at each combination of the provided
grids. The estimated yield is transformed from the estimated discount rate.
</p>
<p>An alternative specification of bandwidth <code>hx</code> is <code>span_x</code>, which provides
kernel coverage invariant to the length of <code>data</code>. <code>span_x</code> takes an
absolute measure of time depending on the unit of <code>x</code>. The default value is
60. If the data is daily on trading days, i.e., the interval between every
two consecutive <code>qdate</code> is one trading day, then the window of the kernel
function allows the estimation at each point <code>x</code> to contain information
from 60 trading days prior to and after the time point <code>x</code>.
</p>
<p>For more information on the estimation method, please refer to
<code>References</code>.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object of class <code>ycevo</code> with the following
columns.
</p>

<dl>
<dt>qdate</dt><dd><p>The time points that user-specified as <code>x</code>. The name of this
column will be consistent with the name of the time index column in the
<code>data</code> input, if the user choose to provide a data frame with the time
index column named differently from <code>qdate</code> with the <code>cols</code> argument.</p>
</dd>
<dt>.est</dt><dd><p>A nested columns of estimation results containing a
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> for each <code>qdate</code>. Each <code>tibble</code> contains three columns:
<code>tau</code> for the time-to-maturity specified by the user in the <code>tau</code> argument,
<code>.disount</code> for the estimated discount function at this time and this
time-to-maturity, and <code>.yield</code> for the estimated yield curve.</p>
</dd>
</dl>



<h3>Functions</h3>


<ul>
<li> <p><code>estimate_yield()</code>: Experienced users only. Yield estimation with interest rate
and manually selected bandwidth parameters.
Only length one x and length one hx are supported at a time.
Returns a data frame of the yield and discount rate at each combination of
the provided grids.
</p>

<dl>
<dt>discount</dt><dd><p>Estimated discount rate</p>
</dd>
<dt>xgrid</dt><dd><p>Same as input 'xgrid'</p>
</dd>
<dt>tau</dt><dd><p>Same as input 'tau'</p>
</dd>
<dt>yield</dt><dd><p>Estimated yield</p>
</dd>
</dl>

</li></ul>


<h3>References</h3>

<p>Koo, B., La Vecchia, D., &amp; Linton, O. (2021). Estimation of a
nonparametric model for bond prices from cross-section and time series
information. Journal of Econometrics, 220(2), 562-588.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+augment.ycevo">augment.ycevo()</a></code>, <code><a href="#topic+autoplot.ycevo">autoplot.ycevo()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulating bond data
bonds &lt;- ycevo_data(n = 10)

# Estimation can take up to 30 seconds
ycevo(bonds, x = lubridate::ymd("2023-03-01"))


</code></pre>

<hr>
<h2 id='ycevo_data'>Simulate bond data</h2><span id='topic+ycevo_data'></span>

<h3>Description</h3>

<p>Simulates bond transaction data at each weekday throughout the year 2023,
following the extended version of Nelson &amp; Siegel model (Nelson, C. R., &amp;
Siegel, A. F., 1987).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ycevo_data(
  n = 40,
  b0 = 0,
  b1 = 0.05,
  b2 = 2,
  t1 = 0.75,
  t2 = 125,
  linear = -0.55,
  quadratic = 0.55,
  cubic = -0.55
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ycevo_data_+3A_n">n</code></td>
<td>
<p>Integer. Number of bonds of each maturity to simulation</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_b0">b0</code></td>
<td>
<p>Level term in yield curve equation, Defaults is 0. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_b1">b1</code></td>
<td>
<p>Slope term in yield curve equation, Defaults is 0.05. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_b2">b2</code></td>
<td>
<p>Curvature term in yield curve equation, Defaults is 2. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_t1">t1</code></td>
<td>
<p>Scaling parameter in yield curve equation, Defaults is 0.75. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_t2">t2</code></td>
<td>
<p>Scaling parameter in yield curve equation, Defaults is 125. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_linear">linear</code></td>
<td>
<p>Linear term in yield curve evolution, Defaults is -0.55. See
<code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_quadratic">quadratic</code></td>
<td>
<p>Quadratic term in yield curve evolution. Defaults is 0.55.
See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="ycevo_data_+3A_cubic">cubic</code></td>
<td>
<p>Cubic term in yield curve evolution. Defaults is -0.55. See
<code>Details</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>n</code> bonds for each of the following maturities are simulated: 20, 10, 5,
3, 2 and 0.8 years. The face value of all bonds is 100. Bonds with 0.8 years
of maturity are similar to the US Treasury bills with no coupon. Bonds with
maturity between 2 and 10 years correspond to the US Treasury notes. Their
coupon rates are simulated from an Epanechnikov distribution with mean 4, and
the distance from the mean to the boundary is 2.65. Bonds with maturity of 20
years corresponds to the US Treasury bonds. Their coupon rates are simulated
from an Epanechnikov distribution with mean 7.5, and the distance from the
mean to the boundary is 2.65. Coupons are payable every 6 months.
</p>
<p>We artificially &quot;observe&quot; quotation data of bonds on every weekday through
out 2023, starting with 2 Jan 2023. To ensure an adequate number of
transactions are observed for the estimation of the yield curve, the earliest
bond is issued prior to the beginning of 2023, determined by the length of
maturity of that type of bond, such that the last payment can still be
observed at the beginning of 2023. For example, the first bond with 20 years
of maturity is issued at the beginning of 2003. The last bond within this type
is issued at the end of 2023. The rest of the bonds have issue dates evenly
distributed between the first and the last bonds.
</p>
<p>The initial yield at the beginning of 2023 is generated from the following
equation
</p>
<p style="text-align: center;"><code class="reqn">Yield_{i, 0} = b_0 + b_1 * ((1 - \exp(-\tau_i / t_1)) / (\tau / t_1)) +
b_2 * ((1 - \exp(-\tau_i / t_2)) / (\tau_i / t_2) - \exp(-\tau_i / t_2))</code>
</p>

<p>where <code class="reqn">\tau_i</code> is the time to maturity in years. The yield curve at
quotation time <code class="reqn">t</code> is obtained by multiplying this curve by the cubic
equation, </p>
<p style="text-align: center;"><code class="reqn">Yield_{i, t} = Yield_{i, 0} * (1 + linear * time + quadratic *
time^2 + cubic * time^3)</code>
</p>
<p> so the yield curve slowly changes over different
quotation dates. The time <code class="reqn">t</code> is a value between 0 and 1, the proportion
of time that has passed by a quotation date, identifying the progression
through 2023. For example, the time <code class="reqn">t</code> corresponding to 31 Mar 2023 is
0.25.
</p>
<p>The discount function is then derived from the yield curve, </p>
<p style="text-align: center;"><code class="reqn">d_t(\tau) =
\exp(-\tau y_t(\tau))</code>
</p>
<p> to discount all the future cash flows of a bond and
calculate the price of that bond at the quotation date.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object with 5 variables
</p>

<dl>
<dt>qdate</dt><dd><p>The quotation date of a bond in a <code><a href="base.html#topic+Date">Date()</a></code> class.</p>
</dd>
<dt>id</dt><dd><p>The unique identifier of a bond.</p>
</dd>
<dt>price</dt><dd><p>The price of a bond.</p>
</dd>
<dt>tupq</dt><dd><p>The remaining time until the given cash flow in days.</p>
</dd>
<dt>pdint</dt><dd><p>The payment amount of the cash flow.
For a non-coupon-paying bond, the only cash flow occurs on the maturity
date with a payment of 100, i.e., the face value of the bond.
For a coupon-paying bond, the stream of cash flows includes the coupon
payable on the interest payment date before maturity and the face value
100 plus the coupon payment for the last cash flow on the maturity date.</p>
</dd>
</dl>



<h3>References</h3>

<p>Nelson, C. R., &amp; Siegel, A. F. (1987). Parsimonious Modeling of
Yield Curves. The Journal of Business, 60(4), 473-489.
</p>
<p>Koo, B., La Vecchia, D., &amp; Linton, O. (2021). Estimation of a
nonparametric model for bond prices from cross-section and time series
information. Journal of Econometrics, 220(2), 562-588.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_yield_at">get_yield_at()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ycevo_data()

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
