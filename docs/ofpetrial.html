<!DOCTYPE html><html lang="en"><head><title>Help for package ofpetrial</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ofpetrial}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ofpetrial-package'><p>ofpetrial: Design on-Farm Precision Field Agronomic Trials</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#add_blocks'><p>Add blocks to trial design</p></a></li>
<li><a href='#assign_rates'><p>Assign rates to the plots of experimental plots</p></a></li>
<li><a href='#assign_rates_conditional'><p>Assign rates to the plots of experimental plots for a single input based on existing trial designs created by assign_rates()</p></a></li>
<li><a href='#change_rates'><p>Change the assigned rates</p></a></li>
<li><a href='#check_alignment'><p>Check the alignment of harvester and applicator/planter</p></a></li>
<li><a href='#check_ortho_inputs'><p>Check the correlation of the two inputs</p></a></li>
<li><a href='#check_ortho_with_chars'><p>Check the orthogonality with field/topographic characteristics</p></a></li>
<li><a href='#exp_data'><p>Experiment data</p></a></li>
<li><a href='#make_exp_plots'><p>Make experimental plots/strips inside the field boundary</p></a></li>
<li><a href='#make_trial_report'><p>Create trial design report</p></a></li>
<li><a href='#plot_info'><p>Plot information</p></a></li>
<li><a href='#prep_plot'><p>Prepare plot information for a single-input experiment (length in meter)</p></a></li>
<li><a href='#prep_rate'><p>Create data of input rate information for a single input</p></a></li>
<li><a href='#rate_info'><p>Rate information</p></a></li>
<li><a href='#td_curved'><p>Trial design (single-input) for a curved field</p></a></li>
<li><a href='#td_single_input'><p>Trial design (single-input)</p></a></li>
<li><a href='#td_two_input'><p>Trial design (two-input)</p></a></li>
<li><a href='#viz'><p>Visualize various aspects of a trial design</p></a></li>
<li><a href='#write_trial_files'><p>Write trial design files for field implementation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Design on-Farm Precision Field Agronomic Trials</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Taro Mieno &lt;tmieno2@unl.edu&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://difm-brain.github.io/ofpetrial/">https://difm-brain.github.io/ofpetrial/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DIFM-Brain/ofpetrial/issues">https://github.com/DIFM-Brain/ofpetrial/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>A comprehensive system for designing and implementing on-farm precision field agronomic trials. You provide field data, tell 'ofpetrial' how to design a trial, and get readily-usable trial design files and a report checks the validity and reliability of the trial design.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, ggplot2, sf, lwgeom, purrr, tidyr, tibble, ggpubr,
ggExtra, terra, zip, rmarkdown, tmap, magrittr, dplyr,
bookdown, leaflet</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-11 22:48:17 UTC; tmieno2</td>
</tr>
<tr>
<td>Author:</td>
<td>Taro Mieno <a href="https://orcid.org/0000-0002-0614-0771"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph],
  Brittani Edge <a href="https://orcid.org/0009-0005-2051-1048"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-11 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ofpetrial-package'>ofpetrial: Design on-Farm Precision Field Agronomic Trials</h2><span id='topic+ofpetrial'></span><span id='topic+ofpetrial-package'></span>

<h3>Description</h3>

<p>A comprehensive system for designing and implementing on-farm precision field agronomic trials. You provide field data, tell 'ofpetrial' how to design a trial, and get readily-usable trial design files and a report checks the validity and reliability of the trial design.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Taro Mieno <a href="mailto:tmieno2@unl.edu">tmieno2@unl.edu</a> (<a href="https://orcid.org/0000-0002-0614-0771">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Brittani Edge <a href="mailto:bedge2@illinois.edu">bedge2@illinois.edu</a> (<a href="https://orcid.org/0009-0005-2051-1048">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://difm-brain.github.io/ofpetrial/">https://difm-brain.github.io/ofpetrial/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/DIFM-Brain/ofpetrial/issues">https://github.com/DIFM-Brain/ofpetrial/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='add_blocks'>Add blocks to trial design</h2><span id='topic+add_blocks'></span>

<h3>Description</h3>

<p>Delineate blocks on a trial design and assign block id to all the plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_blocks(td)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_blocks_+3A_td">td</code></td>
<td>
<p>trial design made by applying assign_rates() to experimental plots made by make_exp_plots()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trial design with block_id added
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load rate information ---#
data(td_single_input)

#--- add blocks ---#
td_with_blocks &lt;- add_blocks(td_single_input)

#--- take a look ---#
td_with_blocks$trial_design

#--- visualize ---#
viz(td_with_blocks, type = "block_id")

</code></pre>

<hr>
<h2 id='assign_rates'>Assign rates to the plots of experimental plots</h2><span id='topic+assign_rates'></span>

<h3>Description</h3>

<p>This functions assign input rates for the plots created by make_exp_plots() according to the rate designs specified by the user in rate_info, which can be created by prep_rateingle().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_rates(exp_data, rate_info)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assign_rates_+3A_exp_data">exp_data</code></td>
<td>
<p>experiment plots created by make_exp_plots()</p>
</td></tr>
<tr><td><code id="assign_rates_+3A_rate_info">rate_info</code></td>
<td>
<p>rate information created by prep_rate()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trial design as sf (experiment plots with rates assigned)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load experiment plots made by make_exp_plots() ---#
data(exp_data)
exp_data

#--- load rate information ---#
data(rate_info)
rate_info

#--- assign rates ---#
td &lt;- assign_rates(exp_data, rate_info)

#--- visualization of the assigned rates ---#
viz(td)
</code></pre>

<hr>
<h2 id='assign_rates_conditional'>Assign rates to the plots of experimental plots for a single input based on existing trial designs created by assign_rates()</h2><span id='topic+assign_rates_conditional'></span>

<h3>Description</h3>

<p>This functions assign input rates for the plots created by make_exp_plots() for a single input according to the rate design specified by the user in rate_info. It assigns rates to the input so that the resulting design avoids significant correlation with the rate of another input specified as existing_design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_rates_conditional(exp_data, rate_info, existing_design)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assign_rates_conditional_+3A_exp_data">exp_data</code></td>
<td>
<p>experiment plots created by make_exp_plots()</p>
</td></tr>
<tr><td><code id="assign_rates_conditional_+3A_rate_info">rate_info</code></td>
<td>
<p>rate information created by prep_rate()</p>
</td></tr>
<tr><td><code id="assign_rates_conditional_+3A_existing_design">existing_design</code></td>
<td>
<p>trial design of another input created with assign_rates()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trial design as sf (experiment plots with rates assigned)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load experiment plots made by make_exp_plots() ---#
data(td_single_input)
exp_data

seed_plot_info &lt;-
 prep_plot(
   input_name = "seed",
   unit_system = "imperial",
   machine_width = 60,
   section_num = 24,
   harvester_width = 30,
   plot_width = 30
 )

exp_data &lt;-
 make_exp_plots(
   input_plot_info = seed_plot_info,
   boundary_data = system.file("extdata", "boundary-simple1.shp", package = "ofpetrial"),
   abline_data = system.file("extdata", "ab-line-simple1.shp", package = "ofpetrial"),
   abline_type = "free"
 )

seed_rate_info &lt;-
 prep_rate(
   plot_info = seed_plot_info,
   gc_rate = 32000,
   unit = "seed",
   min_rate = 16000,
   max_rate = 40000,
   num_rates = 5,
   design_type = "ls"
 )

assign_rates_conditional(
 exp_data = exp_data, 
 rate_info = seed_rate_info, 
 existing_design = td_single_input
)
</code></pre>

<hr>
<h2 id='change_rates'>Change the assigned rates</h2><span id='topic+change_rates'></span>

<h3>Description</h3>

<p>Change the assigned rates by plot and strip
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change_rates(
  td,
  input_name = NA,
  strip_ids,
  plot_ids = NULL,
  new_rates,
  rate_by = "all"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="change_rates_+3A_td">td</code></td>
<td>
<p>trial design</p>
</td></tr>
<tr><td><code id="change_rates_+3A_input_name">input_name</code></td>
<td>
<p>(character) input name</p>
</td></tr>
<tr><td><code id="change_rates_+3A_strip_ids">strip_ids</code></td>
<td>
<p>(numeric) vector of strip_ids</p>
</td></tr>
<tr><td><code id="change_rates_+3A_plot_ids">plot_ids</code></td>
<td>
<p>(numeric) vector of plot_ids</p>
</td></tr>
<tr><td><code id="change_rates_+3A_new_rates">new_rates</code></td>
<td>
<p>(numeric) single numeric number for 'rate_by = &quot;all&quot;&ldquo;, a vector of numeric values for 'rate_by = &quot;strip&quot;&ldquo;, a matrix of numeric numbers for 'rate_by = &quot;plot&quot;'.</p>
</td></tr>
<tr><td><code id="change_rates_+3A_rate_by">rate_by</code></td>
<td>
<p>(character) default is &quot;all&quot;. The other options are &quot;plot&quot; and &quot;strip&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trial design with changed rates
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load rate information ---#
data(td_single_input)

#--- change rates of some strips ---#
strip_ids &lt;- 1:5
plot_ids &lt;- 5:10
new_rates &lt;- 200

td_modified &lt;- change_rates(td_single_input, "NH3", strip_ids, plot_ids, new_rates)

#--- visualize ---#
viz(td_modified)
</code></pre>

<hr>
<h2 id='check_alignment'>Check the alignment of harvester and applicator/planter</h2><span id='topic+check_alignment'></span>

<h3>Description</h3>

<p>Check the alignment of harvester and applicator/planter for mixed treatment problems where multiple input rates are associated with yield monitor data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_alignment(td)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_alignment_+3A_td">td</code></td>
<td>
<p>trial design data created by make_exp_plots() and assign_rates()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load trial design ---#
data(td_single_input)

#--- check the alignment of harvester and applicator/planter ---#
machine_alignment &lt;- check_alignment(td_single_input)

#--- check the degree of mixed treatment problem ---#
machine_alignment$overlap_data

#--- visualize the degree of mixed treatment problem ---#
machine_alignment$g_overlap[[1]]
</code></pre>

<hr>
<h2 id='check_ortho_inputs'>Check the correlation of the two inputs</h2><span id='topic+check_ortho_inputs'></span>

<h3>Description</h3>

<p>Check the correlation between the rates of the two inputs for a two-input experiment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ortho_inputs(td)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ortho_inputs_+3A_td">td</code></td>
<td>
<p>trial design for a two-input experiment with rates assigned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load a trial design for a two-input experiment ---#
data(td_two_input)

#--- check correlation ---#
check_ortho_inputs(td_two_input)
</code></pre>

<hr>
<h2 id='check_ortho_with_chars'>Check the orthogonality with field/topographic characteristics</h2><span id='topic+check_ortho_with_chars'></span>

<h3>Description</h3>

<p>Check the orthogonality of the trial input rates and observed characteristics provided by the user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ortho_with_chars(td, sp_data_list, vars_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ortho_with_chars_+3A_td">td</code></td>
<td>
<p>(tibble) trial design data created by make_exp_plots() and assign_rates()</p>
</td></tr>
<tr><td><code id="check_ortho_with_chars_+3A_sp_data_list">sp_data_list</code></td>
<td>
<p>(list) list of spatial datasets as 'sf' from the 'sf' package or 'SpatRaster' from the 'terra' package</p>
</td></tr>
<tr><td><code id="check_ortho_with_chars_+3A_vars_list">vars_list</code></td>
<td>
<p>(list) list of character vectors indicating the name of the variables to be used in the datasets specified in sp_data_list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(td_single_input)
yield_sf &lt;- sf::st_read(system.file("extdata", "yield-simple1.shp", package = "ofpetrial"))
ssurgo_sf &lt;-
  sf::st_read(system.file("extdata", "ssurgo-simple1.shp", package = "ofpetrial")) %&gt;%
  dplyr::mutate(mukey = factor(mukey))
topo_rast &lt;-
  c(
    terra::rast(system.file("extdata", "slope.tif", package = "ofpetrial")),
    terra::rast(system.file("extdata", "twi.tif", package = "ofpetrial"))
  )

checks &lt;-
  check_ortho_with_chars(
    td = td_single_input,
    sp_data_list = list(yield_sf, ssurgo_sf, topo_rast),
    vars_list = list("Yld_Vol_Dr", c("mukey", "clay"), names(topo_rast))
  )

checks$summary_data[[1]]

checks$summary_fig[[1]]
</code></pre>

<hr>
<h2 id='exp_data'>Experiment data</h2><span id='topic+exp_data'></span>

<h3>Description</h3>

<p>Data on the experiment created by running the 'make_exp_plot()' function, which includes various sf objects (e.g., experiment plots, ab-line, headland, etc). This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_data
</code></pre>


<h3>Format</h3>

<p>tbl_df tbl data.frame 'exp_data'
A data frame with 1 rows and 9 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>harvester_width</dt><dd><p>width of the harvester</p>
</dd>
<dt>plot_width</dt><dd><p>width of the plots to be made</p>
</dd>
<dt>field_sf</dt><dd><p>field boundary as an sf object</p>
</dd>
<dt>headland</dt><dd><p>headland as an sf object</p>
</dd>
<dt>exp_plots</dt><dd><p>experiment plots as an sf object</p>
</dd>
<dt>ab_lines</dt><dd><p>ab-lines for the applicator/planter as an sf object</p>
</dd>
<dt>harvest_ab_lines</dt><dd><p>ab-lines for the harvester as an sf object</p>
</dd>
<dt>abline_type</dt><dd><p>(character) one of &quot;free&quot;, &quot;lock&quot;, &quot;none&quot; indicating the way ab-line is (or not) created</p>
</dd>
</dl>


<hr>
<h2 id='make_exp_plots'>Make experimental plots/strips inside the field boundary</h2><span id='topic+make_exp_plots'></span>

<h3>Description</h3>

<p>Make experimental plots/strips inside the field boundary, harvester ab-line, and applicator/planter ab-line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_exp_plots(
  input_plot_info,
  boundary_data,
  abline_data = NA,
  abline_type = "free"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_exp_plots_+3A_input_plot_info">input_plot_info</code></td>
<td>
<p>(data.fram or a list of two data.frames) list of plot information created by make_input_plot()</p>
</td></tr>
<tr><td><code id="make_exp_plots_+3A_boundary_data">boundary_data</code></td>
<td>
<p>(character) path of the field boundary file or boundary as an sf</p>
</td></tr>
<tr><td><code id="make_exp_plots_+3A_abline_data">abline_data</code></td>
<td>
<p>(character or sf) path of the ab-line file or ab-line as an sf</p>
</td></tr>
<tr><td><code id="make_exp_plots_+3A_abline_type">abline_type</code></td>
<td>
<p>(character) the type of ab-line generation. Select from &quot;free&quot;, &quot;lock&quot;, and &quot;none&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble that include experimental plots as sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n_plot_info &lt;-
  prep_plot(
    input_name = "NH3",
    unit_system = "imperial",
    machine_width = 30,
    section_num = 1,
    harvester_width = 20,
    headland_length = 30,
    side_length = 60
  )

exp_data &lt;-
  make_exp_plots(
    input_plot_info = n_plot_info,
    boundary_data = system.file("extdata", "boundary-simple1.shp", package = "ofpetrial"),
    abline_data = system.file("extdata", "ab-line-simple1.shp", package = "ofpetrial"),
    abline_type = "free"
  )

exp_data$exp_plots
</code></pre>

<hr>
<h2 id='make_trial_report'>Create trial design report</h2><span id='topic+make_trial_report'></span>

<h3>Description</h3>

<p>This function creates an html report describing the trial design created by the user with assign_rates() and includes figures showing machine alignment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_trial_report(td, folder_path, trial_name = NA, keep_rmd = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_trial_report_+3A_td">td</code></td>
<td>
<p>trial design created by assign_rates()</p>
</td></tr>
<tr><td><code id="make_trial_report_+3A_folder_path">folder_path</code></td>
<td>
<p>(character) path to the folder in which the report will be saved</p>
</td></tr>
<tr><td><code id="make_trial_report_+3A_trial_name">trial_name</code></td>
<td>
<p>(character) name of trial to be used in report</p>
</td></tr>
<tr><td><code id="make_trial_report_+3A_keep_rmd">keep_rmd</code></td>
<td>
<p>(logical) If FALSE (Default), the original rmd file will be deleted upon creating an html report. Otherwise, the rmd file will be saved in the folder specified by 'folder_path'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>path to the resulting html file (invisible)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load experiment made by assign_rates() ---#

data(td_single_input)
make_trial_report(
  td = td_single_input,
  folder_path = tempdir()
)

</code></pre>

<hr>
<h2 id='plot_info'>Plot information</h2><span id='topic+plot_info'></span>

<h3>Description</h3>

<p>Plot information for creating experiment plots using 'make_exp_plot()'. This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_info
</code></pre>


<h3>Format</h3>

<p>data.frame 'plot_info'
A data frame with 1 rows and 10 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>unit_system</dt><dd><p>measurement system (metric or imperial)</p>
</dd>
<dt>machine_width</dt><dd><p>width of the applicator/planter</p>
</dd>
<dt>section_num</dt><dd><p>number of the sections of the machine</p>
</dd>
<dt>section_width</dt><dd><p>width of a section of the machine</p>
</dd>
<dt>harvester_width</dt><dd><p>width of the harvester</p>
</dd>
<dt>plot_width</dt><dd><p>width of the plots to be made</p>
</dd>
<dt>headland_length</dt><dd><p>length of the headland</p>
</dd>
<dt>side_length</dt><dd><p>length of the side</p>
</dd>
<dt>min_plot_length</dt><dd><p>minimum plot length allowed</p>
</dd>
<dt>max_plot_length</dt><dd><p>maximum plot length allowed</p>
</dd>
</dl>


<hr>
<h2 id='prep_plot'>Prepare plot information for a single-input experiment (length in meter)</h2><span id='topic+prep_plot'></span>

<h3>Description</h3>

<p>Prepare plot information for a single-input experiment case. All the length values need to be specified in meter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prep_plot(
  input_name,
  unit_system,
  machine_width,
  section_num,
  harvester_width,
  plot_width = NA,
  headland_length = NA,
  side_length = NA,
  max_plot_width = NA,
  min_plot_length = NA,
  max_plot_length = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prep_plot_+3A_input_name">input_name</code></td>
<td>
<p>(character) Input name</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_unit_system">unit_system</code></td>
<td>
<p>(character) A character of either 'metric' or 'imperial' indicating the system of measurement used</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_machine_width">machine_width</code></td>
<td>
<p>(numeric) A numeric number in units specified in unit_system that indicates the width of the applicator or planter of the input</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_section_num">section_num</code></td>
<td>
<p>(numeric) A numeric number that indicates the number of sections of the applicator or planter of the input</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_harvester_width">harvester_width</code></td>
<td>
<p>(numeric) A numeric number that indicates the width of the harvester</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_plot_width">plot_width</code></td>
<td>
<p>(numeric) Default is c(NA, NA).</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_headland_length">headland_length</code></td>
<td>
<p>(numeric) A numeric number that indicates the length of the headland (how long the non-experimental space is in the direction machines drive). Default is NA.</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_side_length">side_length</code></td>
<td>
<p>(numeric) A numeric number that indicates the length of the two sides of the field (how long the non-experimental space is in the direction perpendicular to the direction of machines). Default is NA.</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_max_plot_width">max_plot_width</code></td>
<td>
<p>(numeric) Maximum width of the plots. Default is 36.576 meter (120 feet).</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_min_plot_length">min_plot_length</code></td>
<td>
<p>(numeric) Minimum length of the plots. Default is 73.152 meter (240 feet).</p>
</td></tr>
<tr><td><code id="prep_plot_+3A_max_plot_length">max_plot_length</code></td>
<td>
<p>(numeric) Maximum length of the plots. Default is 91.440 meter (300 feet)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with plot information necessary to create experiment plots
</p>


<h3>Examples</h3>

<pre><code class='language-R'>input_name &lt;- "seed"
unit_system &lt;- "metric"
machine_width &lt;- 12
section_num &lt;- 12
plot_width &lt;- NA
harvester_width &lt;- 24
prep_plot(input_name, unit_system, machine_width, section_num, harvester_width)

</code></pre>

<hr>
<h2 id='prep_rate'>Create data of input rate information for a single input</h2><span id='topic+prep_rate'></span>

<h3>Description</h3>

<p>Create data of input rate information for a single input with some checks on the validity of the information provided by the user. This can be used to assign rates to experiment plots using assign_rates().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prep_rate(
  plot_info,
  gc_rate,
  unit,
  rates = NULL,
  min_rate = NA,
  max_rate = NA,
  num_rates = 5,
  design_type = NA,
  rank_seq_ws = NULL,
  rank_seq_as = NULL,
  rate_jump_threshold = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prep_rate_+3A_plot_info">plot_info</code></td>
<td>
<p>(data.frame) plot information created by make_input_plot_data</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_gc_rate">gc_rate</code></td>
<td>
<p>(numeric) Input rate the grower would have chosen if not running an experiment. This rate is assigned to the non-experiment part of the field. This rate also becomes one of the trial input rates unless you specify the trial rates directly using rates argument</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_unit">unit</code></td>
<td>
<p>(string) unit of input</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_rates">rates</code></td>
<td>
<p>(numeric vector) Default is NULL. Sequence of trial rates in the ascending order.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_min_rate">min_rate</code></td>
<td>
<p>(numeric) minimum input rate. Ignored if rates are specified.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_max_rate">max_rate</code></td>
<td>
<p>(numeric) maximum input rate. Ignored if rates are specified</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_num_rates">num_rates</code></td>
<td>
<p>(numeric) Default is 5. It has to be an even number if design_type is &quot;ejca&quot;. Ignored if rates are specified.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_design_type">design_type</code></td>
<td>
<p>(string) type of trial design. available options are Latin Square (&quot;ls&quot;), Strip (&quot;str&quot;), Randomized Strip (&quot;rstr&quot;), Randomized Block (&quot;rb&quot;), Sparse (&quot;sparse&quot;), and Extra Jump-conscious Alternate &quot;ejca&quot;. See the article on trial design for more details.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_rank_seq_ws">rank_seq_ws</code></td>
<td>
<p>(integer) vector of integers indicating the order of the ranking of the rates, which will be repeated &quot;within&quot; a strip.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_rank_seq_as">rank_seq_as</code></td>
<td>
<p>(integer) vector of integers indicating the order of the ranking of the rates, which will be repeated &quot;across&quot; strip for their first plots.</p>
</td></tr>
<tr><td><code id="prep_rate_+3A_rate_jump_threshold">rate_jump_threshold</code></td>
<td>
<p>(integer) highest jump in rate rank acceptable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of input rate information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_info &lt;-
  prep_plot(
    input_name = "seed",
    unit_system = "imperial",
    machine_width = 60,
    section_num = 24,
    harvester_width = 30,
    plot_width = 30
  )

prep_rate(
  plot_info,
  gc_rate = 30000,
  unit = "seeds",
  rates = c(20000, 25000, 30000, 35000, 40000)
)
</code></pre>

<hr>
<h2 id='rate_info'>Rate information</h2><span id='topic+rate_info'></span>

<h3>Description</h3>

<p>Rate information for assigning rates to the experiment plots using the 'assign_rates()' function. This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rate_info
</code></pre>


<h3>Format</h3>

<p>data.frame 'rate_info'
A data frame with 1 rows and 7 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>design_type</dt><dd><p>type of the trial design to be created</p>
</dd>
<dt>gc_rate</dt><dd><p>normal rate the grower would have used if not running an experiment</p>
</dd>
<dt>unit</dt><dd><p>unit of the input</p>
</dd>
<dt>rates_data</dt><dd><p>data.frame of rates and their ranks</p>
</dd>
<dt>rank_seq_ws</dt><dd><p>vector of the ranking of rates that will repeated within a strip</p>
</dd>
<dt>rank_seq_as</dt><dd><p>vector of the ranking of rates that will repeated as the first rate of the strips</p>
</dd>
</dl>


<hr>
<h2 id='td_curved'>Trial design (single-input) for a curved field</h2><span id='topic+td_curved'></span>

<h3>Description</h3>

<p>Trial design data created by assigning rates to experiment plots running the 'assign_rates()' function. This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_curved
</code></pre>


<h3>Format</h3>

<p>tbl_df tbl data.frame 'td_curved'
A data frame with 1 rows and 9 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>input_type</dt><dd><p>shorthand for the type of the input: &quot;N&quot; for nitrogen, &quot;S&quot; for seed, etc.</p>
</dd>
<dt>trial_design</dt><dd><p>experiment plots with input rats assigned as an sf object</p>
</dd>
<dt>design_type</dt><dd><p>type of the trial design used</p>
</dd>
<dt>unit</dt><dd><p>unit of the input</p>
</dd>
<dt>abline_type</dt><dd><p>(character) one of &quot;free&quot;, &quot;lock&quot;, &quot;none&quot; indicating the way ab-line is (or not) created</p>
</dd>
<dt>ab_lines</dt><dd><p>ab-lines for the applicator/planter as an sf object</p>
</dd>
<dt>harvest_ab_lines</dt><dd><p>ab-lines for the harvester as an sf object</p>
</dd>
<dt>field_sf</dt><dd><p>field boundary as an sf object</p>
</dd>
<dt>harvest_width</dt><dd><p>width of the harvester</p>
</dd>
</dl>


<hr>
<h2 id='td_single_input'>Trial design (single-input)</h2><span id='topic+td_single_input'></span>

<h3>Description</h3>

<p>Trial design data created by assigning rates to experiment plots running the 'assign_rates()' function. This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_single_input
</code></pre>


<h3>Format</h3>

<p>tbl_df tbl data.frame 'td_single_input'
A data frame with 1 rows and 9 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>input_type</dt><dd><p>shorthand for the type of the input: &quot;N&quot; for nitrogen, &quot;S&quot; for seed, etc.</p>
</dd>
<dt>trial_design</dt><dd><p>experiment plots with input rats assigned as an sf object</p>
</dd>
<dt>design_type</dt><dd><p>type of the trial design used</p>
</dd>
<dt>unit</dt><dd><p>unit of the input</p>
</dd>
<dt>abline_type</dt><dd><p>(character) one of &quot;free&quot;, &quot;lock&quot;, &quot;none&quot; indicating the way ab-line is (or not) created</p>
</dd>
<dt>ab_lines</dt><dd><p>ab-lines for the applicator/planter as an sf object</p>
</dd>
<dt>harvest_ab_lines</dt><dd><p>ab-lines for the harvester as an sf object</p>
</dd>
<dt>field_sf</dt><dd><p>field boundary as an sf object</p>
</dd>
<dt>harvest_width</dt><dd><p>width of the harvester</p>
</dd>
</dl>


<hr>
<h2 id='td_two_input'>Trial design (two-input)</h2><span id='topic+td_two_input'></span>

<h3>Description</h3>

<p>Trial design data created by assigning rates to experiment plots running the 'assign_rates()' function. This data exists only for the purpose of making examples in some function references succinct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_two_input
</code></pre>


<h3>Format</h3>

<p>tbl_df tbl data.frame 'td_two_input'
A data frame with 1 rows and 9 columns:
</p>

<dl>
<dt>input_name</dt><dd><p>input name</p>
</dd>
<dt>input_type</dt><dd><p>shorthand for the type of the input: &quot;N&quot; for nitrogen, &quot;S&quot; for seed, etc.</p>
</dd>
<dt>trial_design</dt><dd><p>experiment plots with input rats assigned as an sf object</p>
</dd>
<dt>design_type</dt><dd><p>type of the trial design used</p>
</dd>
<dt>unit</dt><dd><p>unit of the input</p>
</dd>
<dt>abline_type</dt><dd><p>(character) one of &quot;free&quot;, &quot;lock&quot;, &quot;none&quot; indicating the way ab-line is (or not) created</p>
</dd>
<dt>ab_lines</dt><dd><p>ab-lines for the applicator/planter as an sf object</p>
</dd>
<dt>harvest_ab_lines</dt><dd><p>ab-lines for the harvester as an sf object</p>
</dd>
<dt>field_sf</dt><dd><p>field boundary as an sf object</p>
</dd>
<dt>harvest_width</dt><dd><p>width of the harvester</p>
</dd>
</dl>


<hr>
<h2 id='viz'>Visualize various aspects of a trial design</h2><span id='topic+viz'></span>

<h3>Description</h3>

<p>Create plots of experiment rates, plot layout, plot_id, strip_id, and block_id, which can be specified by the 'type' argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viz(
  td,
  type = "rates",
  input_index = c(1, 2),
  text_size = 3,
  abline = FALSE,
  leaflet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viz_+3A_td">td</code></td>
<td>
<p>(tibble) experiment plots made by make_exp_plots()</p>
</td></tr>
<tr><td><code id="viz_+3A_type">type</code></td>
<td>
<p>(character) type of plots to create. Available options are &quot;rates&quot;, &quot;layout&quot;, &quot;plot_id&quot;, &quot;strip_id&quot;, &quot;block_id&quot;, &quot;ab_line&quot;</p>
</td></tr>
<tr><td><code id="viz_+3A_input_index">input_index</code></td>
<td>
<p>(numeric) a vector of length 1 or 2. 1 means the 1st input of the td, 2 means the second input of the td, and c(1, 2) means both of the inputs, which is the DEFAULT</p>
</td></tr>
<tr><td><code id="viz_+3A_text_size">text_size</code></td>
<td>
<p>(numeric) the size of plot ID, strip ID, and block ID numbers printed in the plots</p>
</td></tr>
<tr><td><code id="viz_+3A_abline">abline</code></td>
<td>
<p>(logical) If TRUE, ab-lines are displayed as well. Default = FALSE. This applies only ton type = &quot;rates&quot; and type = &quot;layout&quot;.</p>
</td></tr>
<tr><td><code id="viz_+3A_leaflet">leaflet</code></td>
<td>
<p>(logical) If TRUE, the plot will be superimposed on a satellite imagery of the field. Default is FALSE. This option is effective only for type = &quot;rates&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot or leaflet (if leaflet == TRUE) object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load trial design ---#
data(td_two_input)
viz(td_two_input)

</code></pre>

<hr>
<h2 id='write_trial_files'>Write trial design files for field implementation</h2><span id='topic+write_trial_files'></span>

<h3>Description</h3>

<p>Write out all the necessary files to implement the trial design created. Exported files include
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_trial_files(td, folder_path, ext = "shp", zip = FALSE, zip_name = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_trial_files_+3A_td">td</code></td>
<td>
<p>(tibble) a tibble of a trial design created by applying assign_rate() to experimental plots made by make_exp_plots().</p>
</td></tr>
<tr><td><code id="write_trial_files_+3A_folder_path">folder_path</code></td>
<td>
<p>(character) path to the folder in which the files will be saved</p>
</td></tr>
<tr><td><code id="write_trial_files_+3A_ext">ext</code></td>
<td>
<p>(character) Default = &quot;shp&quot;. Extension to use to save the files, &quot;geojson&quot; or any other extension supported by sf::st_write()</p>
</td></tr>
<tr><td><code id="write_trial_files_+3A_zip">zip</code></td>
<td>
<p>(logical) Default = FALSE. If TRUE, all the files that are being written will be zipped.</p>
</td></tr>
<tr><td><code id="write_trial_files_+3A_zip_name">zip_name</code></td>
<td>
<p>(character) name of the zip file created when zip = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- load trial design ---#
data(td_two_input)

write_trial_files(
  td = td_two_input,
  folder_path = tempdir(),
  zip = FALSE
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
