<!DOCTYPE html><html><head><title>Help for package iBreakDown</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {iBreakDown}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#break_down'><p>Model Agnostic Sequential Variable Attributions</p></a></li>
<li><a href='#break_down_uncertainty'><p>Explanation Level Uncertainty of Sequential Variable Attribution</p></a></li>
<li><a href='#describe'><p>Generates Textual Explanations for Predictive Models</p></a></li>
<li><a href='#local_attributions'><p>Model Agnostic Sequential Variable attributions</p></a></li>
<li><a href='#local_interactions'><p>Model Agnostic Sequential Variable Attributions with Interactions</p></a></li>
<li><a href='#plot.break_down'><p>Plot Generic for Break Down Objects</p></a></li>
<li><a href='#plot.break_down_uncertainty'><p>Plot Generic for Break Down Uncertainty Objects</p></a></li>
<li><a href='#plotD3'><p>Plot Break Down Objects in D3 with r2d3 package.</p></a></li>
<li><a href='#plotD3.shap'><p>Plot Shap (Break Down Uncertainty) Objects in D3 with r2d3 package.</p></a></li>
<li><a href='#print.break_down'><p>Print Generic for Break Down Objects</p></a></li>
<li><a href='#print.break_down_description'><p>Print Generic for Break Down Objects</p></a></li>
<li><a href='#print.break_down_uncertainty'><p>Print Generic for Break Down Uncertainty Objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Model Agnostic Instance Level Variable Attributions</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Model agnostic tool for decomposition of predictions from black boxes.
    Supports additive attributions and attributions with interactions.
    The Break Down Table shows contributions of every variable to a final prediction. 
    The Break Down Plot presents variable contributions in a concise graphical way. 
    This package works for classification and regression models. 
    It is an extension of the 'breakDown' package (Staniak and Biecek 2018) &lt;<a href="https://doi.org/10.32614%2FRJ-2018-072">doi:10.32614/RJ-2018-072</a>&gt;,
    with new and faster strategies for orderings. 
    It supports interactions in explanations and has interactive visuals (implemented with 'D3.js' library). 
    The methodology behind is described in the 'iBreakDown' article (Gosiewska and Biecek 2019) &lt;<a href="https://arxiv.org/abs/1903.11420">arXiv:1903.11420</a>&gt;
    This package is a part of the 'DrWhy.AI' universe (Biecek 2018) &lt;<a href="https://arxiv.org/abs/1806.08915">arXiv:1806.08915</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DALEX, knitr, rmarkdown, randomForest, e1071, ranger, nnet,
testthat, r2d3, jsonlite, covr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ModelOriented.github.io/iBreakDown/">https://ModelOriented.github.io/iBreakDown/</a>,
<a href="https://github.com/ModelOriented/iBreakDown">https://github.com/ModelOriented/iBreakDown</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ModelOriented/iBreakDown/issues">https://github.com/ModelOriented/iBreakDown/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-30 22:52:24 UTC; pbiecek</td>
</tr>
<tr>
<td>Author:</td>
<td>Przemyslaw Biecek <a href="https://orcid.org/0000-0001-8423-1823"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Alicja Gosiewska <a href="https://orcid.org/0000-0001-6563-5742"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Hubert Baniecki <a href="https://orcid.org/0000-0001-6661-5364"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Adam Izdebski [aut],
  Dariusz Komosinski [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Przemyslaw Biecek &lt;przemyslaw.biecek@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-01 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='break_down'>Model Agnostic Sequential Variable Attributions</h2><span id='topic+break_down'></span><span id='topic+break_down.explainer'></span><span id='topic+break_down.default'></span>

<h3>Description</h3>

<p>This function finds Variable Attributions via Sequential Variable Conditioning.
It calls either <code><a href="#topic+local_attributions">local_attributions</a></code> for additive attributions
or <code><a href="#topic+local_interactions">local_interactions</a></code> for attributions with interactions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>break_down(x, ..., interactions = FALSE)

## S3 method for class 'explainer'
break_down(x, new_observation, ..., interactions = FALSE)

## Default S3 method:
break_down(
  x,
  data,
  predict_function = predict,
  new_observation,
  keep_distributions = FALSE,
  order = NULL,
  label = class(x)[1],
  ...,
  interactions = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="break_down_+3A_x">x</code></td>
<td>
<p>an explainer created with function <code><a href="DALEX.html#topic+explain">explain</a></code> or a model.</p>
</td></tr>
<tr><td><code id="break_down_+3A_...">...</code></td>
<td>
<p>parameters passed to <code>local_*</code> functions.</p>
</td></tr>
<tr><td><code id="break_down_+3A_interactions">interactions</code></td>
<td>
<p>shall interactions be included?</p>
</td></tr>
<tr><td><code id="break_down_+3A_new_observation">new_observation</code></td>
<td>
<p>a new observation with columns that correspond to variables used in the model.</p>
</td></tr>
<tr><td><code id="break_down_+3A_data">data</code></td>
<td>
<p>validation dataset, will be extracted from <code>x</code> if it is an explainer.</p>
</td></tr>
<tr><td><code id="break_down_+3A_predict_function">predict_function</code></td>
<td>
<p>predict function, will be extracted from <code>x</code> if it's an explainer.</p>
</td></tr>
<tr><td><code id="break_down_+3A_keep_distributions">keep_distributions</code></td>
<td>
<p>if <code>TRUE</code>, then distribution of partial predictions is stored and can be plotted with the generic <code>plot()</code>.</p>
</td></tr>
<tr><td><code id="break_down_+3A_order">order</code></td>
<td>
<p>if not <code>NULL</code>, then it will be a fixed order of variables. It can be a numeric vector or vector with names of variables.</p>
</td></tr>
<tr><td><code id="break_down_+3A_label">label</code></td>
<td>
<p>name of the model. By default it is extracted from the 'class' attribute of the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of the <code>break_down</code> class.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+local_attributions">local_attributions</a></code>, <code><a href="#topic+local_interactions">local_interactions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- break_down(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plot(bd_glm, max_features = 3)

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)
# example with interaction
# classification for HR data
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000,1:5])

bd_rf &lt;- break_down(explainer_rf,
                           new_observation)
head(bd_rf)
plot(bd_rf)

## End(Not run)
</code></pre>

<hr>
<h2 id='break_down_uncertainty'>Explanation Level Uncertainty of Sequential Variable Attribution</h2><span id='topic+break_down_uncertainty'></span><span id='topic+break_down_uncertainty.explainer'></span><span id='topic+break_down_uncertainty.default'></span><span id='topic+shap'></span>

<h3>Description</h3>

<p>This function calculates the break down algorithm for <code>B</code> random orderings.
Then it calculates the distribution of attributions for these different orderings.
Note that the <code>shap()</code> function is just a simplified interface to the <code>break_down_uncertainty()</code> function
with a default value set to <code>B=25</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>break_down_uncertainty(x, ..., keep_distributions = TRUE, B = 10)

## S3 method for class 'explainer'
break_down_uncertainty(
  x,
  new_observation,
  ...,
  keep_distributions = TRUE,
  B = 10
)

## Default S3 method:
break_down_uncertainty(
  x,
  data,
  predict_function = predict,
  new_observation,
  label = class(x)[1],
  ...,
  path = NULL,
  keep_distributions = TRUE,
  B = 10
)

shap(x, ..., B = 25)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="break_down_uncertainty_+3A_x">x</code></td>
<td>
<p>an explainer created with function <code><a href="DALEX.html#topic+explain">explain</a></code> or a model.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_keep_distributions">keep_distributions</code></td>
<td>
<p>if <code>TRUE</code> then we will keep distribution for predicted values. It's needed by the describe function.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_b">B</code></td>
<td>
<p>number of random paths</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_new_observation">new_observation</code></td>
<td>
<p>a new observation with columns that correspond to variables used in the model.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_data">data</code></td>
<td>
<p>validation dataset, will be extracted from <code>x</code> if it is an explainer.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_predict_function">predict_function</code></td>
<td>
<p>predict function, will be extracted from <code>x</code> if it is an explainer.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_label">label</code></td>
<td>
<p>name of the model. By default it's extracted from the 'class' attribute of the model.</p>
</td></tr>
<tr><td><code id="break_down_uncertainty_+3A_path">path</code></td>
<td>
<p>if specified, then this path will be highlighed on the plot. Use <code>average</code> in order to show an average effect</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of the <code>break_down_uncertainty</code> class.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+break_down">break_down</a></code>, <code><a href="#topic+local_attributions">local_attributions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                               data = titanic_imputed,
                               y = titanic_imputed$survived,
                           label = "glm")

# there is no explanation level uncertanity linked with additive models
bd_glm &lt;- break_down_uncertainty(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plot(bd_glm)

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000, 1:5])

bd_rf &lt;- break_down_uncertainty(explainer_rf,
                           new_observation)
bd_rf
plot(bd_rf)

# example for regression - apartment prices
# here we do not have intreactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
                        data = apartments_test[1:1000, 2:6],
                        y = apartments_test$m2.price[1:1000])

bd_rf &lt;- break_down_uncertainty(explainer_rf, apartments_test[1,])
bd_rf
plot(bd_rf)

bd_rf &lt;- break_down_uncertainty(explainer_rf, apartments_test[1,], path = 1:5)
plot(bd_rf)

bd_rf &lt;- break_down_uncertainty(explainer_rf,
                                     apartments_test[1,],
                                     path = c("floor", "no.rooms", "district",
                                         "construction.year", "surface"))
plot(bd_rf)

bd &lt;- break_down(explainer_rf,
                    apartments_test[1,])
plot(bd)

s &lt;- shap(explainer_rf,
                   apartments_test[1,])
plot(s)

## End(Not run)
</code></pre>

<hr>
<h2 id='describe'>Generates Textual Explanations for Predictive Models</h2><span id='topic+describe'></span><span id='topic+describe.break_down'></span><span id='topic+describe.break_down_uncertainty'></span>

<h3>Description</h3>

<p>Generic function <code>describe</code> generates natural language explanations based on
<code><a href="#topic+break_down">break_down</a></code> and <code><a href="#topic+shap">shap</a></code> explanations, what enhances their interpretability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>describe(x, nonsignificance_treshold = 0.15, ...)

## S3 method for class 'break_down'
describe(
  x,
  nonsignificance_treshold = 0.15,
  ...,
  label = NULL,
  short_description = FALSE,
  display_values = FALSE,
  display_numbers = FALSE,
  display_distribution_details = FALSE,
  display_shap = FALSE
)

## S3 method for class 'break_down_uncertainty'
describe(
  x,
  nonsignificance_treshold = 0.15,
  ...,
  label = NULL,
  short_description = FALSE,
  display_values = FALSE,
  display_numbers = FALSE,
  display_distribution_details = FALSE,
  display_shap = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="describe_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down">break_down</a></code> or <code><a href="#topic+shap">shap</a></code></p>
</td></tr>
<tr><td><code id="describe_+3A_nonsignificance_treshold">nonsignificance_treshold</code></td>
<td>
<p>a numeric specifying a threshold for variable importance</p>
</td></tr>
<tr><td><code id="describe_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
<tr><td><code id="describe_+3A_label">label</code></td>
<td>
<p>a character string describing model's prediction</p>
</td></tr>
<tr><td><code id="describe_+3A_short_description">short_description</code></td>
<td>
<p>a boolean, returns a short description</p>
</td></tr>
<tr><td><code id="describe_+3A_display_values">display_values</code></td>
<td>
<p>a boolean, displays variables' values</p>
</td></tr>
<tr><td><code id="describe_+3A_display_numbers">display_numbers</code></td>
<td>
<p>a boolean, displays a description containing numerical values</p>
</td></tr>
<tr><td><code id="describe_+3A_display_distribution_details">display_distribution_details</code></td>
<td>
<p>a boolean, displays details about the distribution of model's predictions</p>
</td></tr>
<tr><td><code id="describe_+3A_display_shap">display_shap</code></td>
<td>
<p>a boolean, adds information about variables' average contribution. Use only with <code><a href="#topic+shap">shap</a></code> explanation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function <code>describe</code> generates a textual explanations by extracting information from
a <code><a href="#topic+break_down">break_down</a></code> or <code><a href="#topic+shap">shap</a></code> explanation. It makes an argument justifying why
the model's prediction is lower or higher, than it's average prediction. The description consists of
an introduction, argumenation and summary making use from the claim, support, evidence argumentation
structure, as recomended for the World Universities Debating style.
</p>
<p>The function first selects one of four different scenarios, due to
<code>nonsignificance_treshold</code>. The chosen scenario can be one of the following:
1. Model's prediction for the selected instance is significantly higher than the average prediction.
2. Model's prediction is significantly lower.
3. Model's prediction is close to it's average prediction, however there are significant
variables counteracting with each other
4. Model's prediction is close to it's average prediction and all the variables are rather nonsignificant.
Then an explanation due to the chosen scenario is generated.
</p>


<h3>Value</h3>

<p>A character string of textual explanation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("randomForest")
library("iBreakDown")

titanic &lt;- na.omit(titanic)
model_titanic_rf &lt;- randomForest(survived == "yes" ~ gender + age + class + embarked +
                                  fare + sibsp + parch,  data = titanic)

explain_titanic_rf &lt;- explain(model_titanic_rf,
                              data = titanic[ ,-9],
                              y = titanic$survived == "yes",
                              label = "Random Forest v7")

bd_explanation &lt;- break_down(explain_titanic_rf, titanic[1, ], keep_distributions = TRUE)
plot(bd_explanation)

description &lt;- describe(bd_explanation,
                        label = "the passanger will survive with probability",
                        short_description = FALSE,
                        display_values =  TRUE,
                        display_numbers = TRUE,
                        display_distribution_details = FALSE)

description

library("DALEX")
library("iBreakDown")
titanic &lt;- na.omit(titanic)
model_titanic_glm &lt;- glm(titanic$survived == "yes" ~ age + gender + class + fare + sibsp,
                         data = titanic[ ,-9], family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                              data = titanic[,-9],
                              y = titanic$survived == "yes",
                              label = "glm")
passanger &lt;- titanic[1, -9]
shap_glm &lt;- shap(explain_titanic_glm, passanger)
plot(shap_glm)

describe(shap_glm,
         label = "the selected passanger survives with probability",
         display_shap = TRUE,
         display_numbers = TRUE)

</code></pre>

<hr>
<h2 id='local_attributions'>Model Agnostic Sequential Variable attributions</h2><span id='topic+local_attributions'></span><span id='topic+local_attributions.explainer'></span><span id='topic+local_attributions.default'></span>

<h3>Description</h3>

<p>This function finds Variable attributions via Sequential Variable Conditioning.
The complexity of this function is O(2*p).
This function works in a similar way to step-up and step-down greedy approximations in function <code><a href="#topic+break_down">break_down</a></code>.
The main difference is that in the first step the order of variables is determined.
And in the second step the impact is calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_attributions(x, ...)

## S3 method for class 'explainer'
local_attributions(x, new_observation, keep_distributions = FALSE, ...)

## Default S3 method:
local_attributions(
  x,
  data,
  predict_function = predict,
  new_observation,
  label = class(x)[1],
  keep_distributions = FALSE,
  order = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="local_attributions_+3A_x">x</code></td>
<td>
<p>an explainer created with function <code><a href="DALEX.html#topic+explain">explain</a></code> or a model.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_new_observation">new_observation</code></td>
<td>
<p>a new observation with columns that correspond to variables used in the model.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_keep_distributions">keep_distributions</code></td>
<td>
<p>if <code>TRUE</code>, then distribution of partial predictions is stored and can be plotted with the generic <code>plot()</code>.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_data">data</code></td>
<td>
<p>validation dataset, will be extracted from <code>x</code> if it is an explainer.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_predict_function">predict_function</code></td>
<td>
<p>predict function, will be extracted from <code>x</code> if it is an explainer.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_label">label</code></td>
<td>
<p>name of the model. By default it's extracted from the 'class' attribute of the model.</p>
</td></tr>
<tr><td><code id="local_attributions_+3A_order">order</code></td>
<td>
<p>if not <code>NULL</code>, then it will be a fixed order of variables. It can be a numeric vector or vector with names of variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of the <code>break_down</code> class.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+break_down">break_down</a></code>, <code><a href="#topic+local_interactions">local_interactions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- local_attributions(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plot(bd_glm, max_features = 3)

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)
# example with interaction
# classification for HR data
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000,1:5])

bd_rf &lt;- local_attributions(explainer_rf,
                           new_observation)
bd_rf
plot(bd_rf)
plot(bd_rf, baseline = 0)

# example for regression - apartment prices
# here we do not have interactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
                        data = apartments_test[1:1000,2:6],
                        y = apartments_test$m2.price[1:1000])

bd_rf &lt;- local_attributions(explainer_rf,
                           apartments_test[1,])
bd_rf
plot(bd_rf, digits = 1)

bd_rf &lt;- local_attributions(explainer_rf,
                           apartments_test[1,],
                           keep_distributions = TRUE)
plot(bd_rf, plot_distributions = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='local_interactions'>Model Agnostic Sequential Variable Attributions with Interactions</h2><span id='topic+local_interactions'></span><span id='topic+local_interactions.explainer'></span><span id='topic+local_interactions.default'></span>

<h3>Description</h3>

<p>This function implements decomposition of model predictions with identification
of interactions.
The complexity of this function is O(2*p) for additive models and O(2*p^2) for interactions.
This function works in a similar way to step-up and step-down greedy approximations in function <code>break_down()</code>.
The main difference is that in the first step the order of variables and interactions is determined.
And in the second step the impact is calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_interactions(x, ...)

## S3 method for class 'explainer'
local_interactions(x, new_observation, keep_distributions = FALSE, ...)

## Default S3 method:
local_interactions(
  x,
  data,
  predict_function = predict,
  new_observation,
  label = class(x)[1],
  keep_distributions = FALSE,
  order = NULL,
  interaction_preference = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="local_interactions_+3A_x">x</code></td>
<td>
<p>an explainer created with function <code><a href="DALEX.html#topic+explain">explain</a></code> or a model.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_new_observation">new_observation</code></td>
<td>
<p>a new observation with columns that correspond to variables used in the model.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_keep_distributions">keep_distributions</code></td>
<td>
<p>if <code>TRUE</code>, then the distribution of partial predictions is stored in addition to the average.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_data">data</code></td>
<td>
<p>validation dataset, will be extracted from <code>x</code> if it's an explainer.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_predict_function">predict_function</code></td>
<td>
<p>predict function, will be extracted from <code>x</code> if it's an explainer.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_label">label</code></td>
<td>
<p>character - the name of the model. By default it's extracted from the 'class' attribute of the model.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_order">order</code></td>
<td>
<p>if not <code>NULL</code>, then it will be a fixed order of variables. It can be a numeric vector or vector with names of variables/interactions.</p>
</td></tr>
<tr><td><code id="local_interactions_+3A_interaction_preference">interaction_preference</code></td>
<td>
<p>an integer specifying which interactions will be present in an explanation. The larger the integer, the more frequently interactions will be presented.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of the <code>break_down</code> class.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+break_down">break_down</a></code>, <code><a href="#topic+local_attributions">local_attributions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- local_interactions(explain_titanic_glm, titanic_imputed[1, ],
       interaction_preference = 500)
bd_glm
plot(bd_glm, max_features = 2)

## Not run: 
library("randomForest")
# example with interaction
# classification for HR data
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                 data = HR[1:1000,1:5])

bd_rf &lt;- local_interactions(explainer_rf,
                 new_observation)

bd_rf
plot(bd_rf)

# example for regression - apartment prices
# here we do not have intreactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
         data = apartments_test[1:1000,2:6],
         y = apartments_test$m2.price[1:1000])

new_observation &lt;- apartments_test[1,]

bd_rf &lt;- local_interactions(explainer_rf,
                 new_observation,
                 keep_distributions = TRUE)

bd_rf
plot(bd_rf)
plot(bd_rf, plot_distributions = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.break_down'>Plot Generic for Break Down Objects</h2><span id='topic+plot.break_down'></span>

<h3>Description</h3>

<p>Displays a waterfall break down plot for objects of <code>break_down</code> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'break_down'
plot(
  x,
  ...,
  baseline = NA,
  max_features = 10,
  min_max = NA,
  vcolors = DALEX::colors_breakdown_drwhy(),
  digits = 3,
  rounding_function = round,
  add_contributions = TRUE,
  shift_contributions = 0.05,
  plot_distributions = FALSE,
  vnames = NULL,
  title = "Break Down profile",
  subtitle = "",
  max_vars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.break_down_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down">break_down</a></code></p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_baseline">baseline</code></td>
<td>
<p>if numeric then veritical line starts in <code>baseline</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_max_features">max_features</code></td>
<td>
<p>maximal number of features to be included in the plot. default value is <code>10</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_min_max">min_max</code></td>
<td>
<p>a range of OX axis. By default <code>NA</code>, therefore it will be extracted from the contributions of <code>x</code>. But it can be set to some constants, useful if these plots are to be used for comparisons.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_vcolors">vcolors</code></td>
<td>
<p>If <code>NA</code> (default), DrWhy colors are used.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_digits">digits</code></td>
<td>
<p>number of decimal places (<code><a href="base.html#topic+round">round</a></code>) or significant digits (<code><a href="base.html#topic+signif">signif</a></code>) to be used.
See the <code>rounding_function</code> argument.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_rounding_function">rounding_function</code></td>
<td>
<p>a function to be used for rounding numbers.
This should be <code><a href="base.html#topic+signif">signif</a></code> which keeps a specified number of significant digits or <code><a href="base.html#topic+round">round</a></code> (which is default) to have the same precision for all components.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_add_contributions">add_contributions</code></td>
<td>
<p>if <code>TRUE</code>, variable contributions will be added to the plot</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_shift_contributions">shift_contributions</code></td>
<td>
<p>number describing how much labels should be shifted to the right, as a fraction of range. By default equal to <code>0.05</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_plot_distributions">plot_distributions</code></td>
<td>
<p>if <code>TRUE</code> then distributions of conditional propotions will be plotted. This requires <code>keep_distributions=TRUE</code> in the
<code><a href="#topic+break_down">break_down</a></code>, <code><a href="#topic+local_attributions">local_attributions</a></code>, or <code><a href="#topic+local_interactions">local_interactions</a></code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_vnames">vnames</code></td>
<td>
<p>a character vector, if specified then will be used as labels on OY axis. By default NULL</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_title">title</code></td>
<td>
<p>a character. Plot title. By default <code>"Break Down profile"</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_subtitle">subtitle</code></td>
<td>
<p>a character. Plot subtitle. By default <code>""</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_+3A_max_vars">max_vars</code></td>
<td>
<p>alias for the <code>max_features</code> parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> object.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- break_down(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plot(bd_glm, max_features = 3)
plot(bd_glm, max_features = 3,
     vnames = c("average","+ male","+ young","+ cheap ticket", "+ other factors", "final"))

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)
# example with interaction
# classification for HR data
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000,1:5])

bd_rf &lt;- local_attributions(explainer_rf,
                           new_observation)
bd_rf
plot(bd_rf)
plot(bd_rf, baseline = 0)
plot(bd_rf, min_max = c(0,1))

bd_rf &lt;- local_attributions(explainer_rf,
                           new_observation,
                           keep_distributions = TRUE)
bd_rf
plot(bd_rf, plot_distributions = TRUE)

bd_rf &lt;- local_interactions(explainer_rf,
                 new_observation,
                 keep_distributions = TRUE)

bd_rf
plot(bd_rf)
plot(bd_rf, plot_distributions = TRUE)

# example for regression - apartment prices
# here we do not have intreactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
                        data = apartments_test[1:1000,2:6],
                        y = apartments_test$m2.price[1:1000])

bd_rf &lt;- local_attributions(explainer_rf,
                           apartments_test[1,])
bd_rf
plot(bd_rf, digits = 1)
plot(bd_rf, digits = 1, baseline = 0)

bd_rf &lt;- local_attributions(explainer_rf,
                           apartments_test[1,],
                           keep_distributions = TRUE)
plot(bd_rf, plot_distributions = TRUE)

bd_rf &lt;- local_interactions(explainer_rf,
                 new_observation = apartments_test[1,],
                 keep_distributions = TRUE)

bd_rf
plot(bd_rf)
plot(bd_rf, plot_distributions = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.break_down_uncertainty'>Plot Generic for Break Down Uncertainty Objects</h2><span id='topic+plot.break_down_uncertainty'></span>

<h3>Description</h3>

<p>Plot Generic for Break Down Uncertainty Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'break_down_uncertainty'
plot(
  x,
  ...,
  vcolors = DALEX::colors_breakdown_drwhy(),
  show_boxplots = TRUE,
  max_features = 10,
  max_vars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.break_down_uncertainty_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down_uncertainty">break_down_uncertainty</a></code></p>
</td></tr>
<tr><td><code id="plot.break_down_uncertainty_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="plot.break_down_uncertainty_+3A_vcolors">vcolors</code></td>
<td>
<p>If <code>NA</code> (default), DrWhy colors are used.</p>
</td></tr>
<tr><td><code id="plot.break_down_uncertainty_+3A_show_boxplots">show_boxplots</code></td>
<td>
<p>logical if <code>TRUE</code> (default) boxplot will be plotted to show uncertanity of attributions</p>
</td></tr>
<tr><td><code id="plot.break_down_uncertainty_+3A_max_features">max_features</code></td>
<td>
<p>maximal number of features to be included in the plot. By default it's <code>10</code>.</p>
</td></tr>
<tr><td><code id="plot.break_down_uncertainty_+3A_max_vars">max_vars</code></td>
<td>
<p>alias for the <code>max_features</code> parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> object.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

sh_glm &lt;- shap(explain_titanic_glm, titanic_imputed[1, ])

sh_glm
plot(sh_glm)

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)

model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000,1:5])

bd_rf &lt;- break_down_uncertainty(explainer_rf,
                           new_observation,
                           path = c(3,2,4,1,5),
                           show_boxplots = FALSE)
bd_rf
plot(bd_rf, max_features = 3)

# example for regression - apartment prices
# here we do not have intreactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
                        data = apartments_test[1:1000,2:6],
                        y = apartments_test$m2.price[1:1000])

bd_rf &lt;- break_down_uncertainty(explainer_rf,
                                     apartments_test[1,],
                                     path = c("floor", "no.rooms", "district",
                                         "construction.year", "surface"))
bd_rf
plot(bd_rf)

bd_rf &lt;- shap(explainer_rf,
              apartments_test[1,])
bd_rf
plot(bd_rf)
plot(bd_rf, show_boxplots = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='plotD3'>Plot Break Down Objects in D3 with r2d3 package.</h2><span id='topic+plotD3'></span><span id='topic+plotD3.break_down'></span>

<h3>Description</h3>

<p>Plots waterfall break down for objects of the <code>break_down</code> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotD3(x, ...)

## S3 method for class 'break_down'
plotD3(
  x,
  ...,
  baseline = NA,
  max_features = 10,
  digits = 3,
  rounding_function = round,
  bar_width = 12,
  margin = 0.2,
  scale_height = FALSE,
  min_max = NA,
  vcolors = NA,
  chart_title = NA,
  time = 0,
  max_vars = NULL,
  reload = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotD3_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down">break_down</a></code></p>
</td></tr>
<tr><td><code id="plotD3_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_baseline">baseline</code></td>
<td>
<p>if numeric then veritical line will start in <code>baseline</code>.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_max_features">max_features</code></td>
<td>
<p>maximal number of features to be included in the plot. By default it's <code>10</code>.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_digits">digits</code></td>
<td>
<p>number of decimal places (<code><a href="base.html#topic+round">round</a></code>) or significant digits (<code><a href="base.html#topic+signif">signif</a></code>) to be used.
See the <code>rounding_function</code> argument.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_rounding_function">rounding_function</code></td>
<td>
<p>a function to be used for rounding numbers.
This should be <code><a href="base.html#topic+signif">signif</a></code> which keeps a specified number of significant digits or <code><a href="base.html#topic+round">round</a></code> (which is default) to have the same precision for all components.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_bar_width">bar_width</code></td>
<td>
<p>width of bars in px. By default it's 12px</p>
</td></tr>
<tr><td><code id="plotD3_+3A_margin">margin</code></td>
<td>
<p>extend x axis domain range to adjust the plot. Usually value between 0.1 and 0.3, by default it's <code>0.2</code></p>
</td></tr>
<tr><td><code id="plotD3_+3A_scale_height">scale_height</code></td>
<td>
<p>if <code>TRUE</code>, the height of the plot scales with window size</p>
</td></tr>
<tr><td><code id="plotD3_+3A_min_max">min_max</code></td>
<td>
<p>a range of OX axis. By deafult <code>NA</code> therefore will be extracted from the contributions of <code>x</code>.
But can be set to some constants, usefull if these plots are used for comparisons.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_vcolors">vcolors</code></td>
<td>
<p>If <code>NA</code> (default), DrWhy colors are used.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_chart_title">chart_title</code></td>
<td>
<p>a character. Set custom title</p>
</td></tr>
<tr><td><code id="plotD3_+3A_time">time</code></td>
<td>
<p>in ms. Set the animation length</p>
</td></tr>
<tr><td><code id="plotD3_+3A_max_vars">max_vars</code></td>
<td>
<p>alias for the <code>max_features</code> parameter.</p>
</td></tr>
<tr><td><code id="plotD3_+3A_reload">reload</code></td>
<td>
<p>Reload the plot on resize. By default it's <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>r2d3</code> object.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- local_attributions(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plotD3(bd_glm)

## Not run: 
## Not run:
library("randomForest")

m_rf &lt;- randomForest(status ~ . , data = HR[2:2000,])
new_observation &lt;- HR_test[1,]
new_observation

p_fun &lt;- function(object, newdata){predict(object, newdata=newdata, type = "prob")}

bd_rf &lt;- local_attributions(m_rf,
                           data = HR_test,
                           new_observation =  new_observation,
                           predict_function = p_fun)

bd_rf
plotD3(bd_rf)

## End(Not run)

</code></pre>

<hr>
<h2 id='plotD3.shap'>Plot Shap (Break Down Uncertainty) Objects in D3 with r2d3 package.</h2><span id='topic+plotD3.shap'></span>

<h3>Description</h3>

<p>Plots Shapley values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'shap'
plotD3(
  x,
  ...,
  baseline = NA,
  max_features = 10,
  digits = 3,
  rounding_function = round,
  bar_width = 12,
  margin = 0.2,
  scale_height = FALSE,
  min_max = NA,
  vcolors = NA,
  chart_title = NA,
  time = 0,
  max_vars = NULL,
  reload = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotD3.shap_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+shap">shap</a></code></p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_baseline">baseline</code></td>
<td>
<p>if numeric then veritical line will start in <code>baseline</code>.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_max_features">max_features</code></td>
<td>
<p>maximal number of features to be included in the plot. By default it's <code>10</code>.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_digits">digits</code></td>
<td>
<p>number of decimal places (<code><a href="base.html#topic+round">round</a></code>) or significant digits (<code><a href="base.html#topic+signif">signif</a></code>) to be used.
See the <code>rounding_function</code> argument.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_rounding_function">rounding_function</code></td>
<td>
<p>a function to be used for rounding numbers.
This should be <code><a href="base.html#topic+signif">signif</a></code> which keeps a specified number of significant digits or <code><a href="base.html#topic+round">round</a></code> (which is default) to have the same precision for all components.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_bar_width">bar_width</code></td>
<td>
<p>width of bars in px. By default it's 12px</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_margin">margin</code></td>
<td>
<p>extend x axis domain range to adjust the plot. Usually value between 0.1 and 0.3, by default it's 0.2</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_scale_height">scale_height</code></td>
<td>
<p>if <code>TRUE</code>, the height of the plot scales with window size.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_min_max">min_max</code></td>
<td>
<p>a range of OX axis. By deafult <code>NA</code> therefore will be extracted from the contributions of <code>x</code>.
But can be set to some constants, usefull if these plots are used for comparisons.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_vcolors">vcolors</code></td>
<td>
<p>If <code>NA</code> (default), DrWhy colors are used.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_chart_title">chart_title</code></td>
<td>
<p>a character. Set custom title</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_time">time</code></td>
<td>
<p>in ms. Set the animation length</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_max_vars">max_vars</code></td>
<td>
<p>alias for the <code>max_features</code> parameter.</p>
</td></tr>
<tr><td><code id="plotD3.shap_+3A_reload">reload</code></td>
<td>
<p>Reload the plot on resize. By default it's <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>r2d3</code> object.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

s_glm &lt;- shap(explain_titanic_glm, titanic_imputed[1, ])
s_glm
plotD3(s_glm)

## Not run: 
## Not run:
library("randomForest")

HR_small &lt;- HR[2:500,]
m_rf &lt;- randomForest(status ~. , data = HR_small)
new_observation &lt;- HR_test[1,]
new_observation

p_fun &lt;- function(object, newdata){predict(object, newdata=newdata, type = "prob")}

s_rf &lt;- shap(m_rf,
             data = HR_small[,-6],
             new_observation =  new_observation,
             predict_function = p_fun)

plotD3(s_rf, time = 500)

## End(Not run)
</code></pre>

<hr>
<h2 id='print.break_down'>Print Generic for Break Down Objects</h2><span id='topic+print.break_down'></span>

<h3>Description</h3>

<p>Print Generic for Break Down Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'break_down'
print(x, ..., digits = 3, rounding_function = round)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.break_down_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down">break_down</a></code></p>
</td></tr>
<tr><td><code id="print.break_down_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="print.break_down_+3A_digits">digits</code></td>
<td>
<p>number of decimal places (round) or significant digits (signif) to be used.
See the <code>rounding_function</code> argument.</p>
</td></tr>
<tr><td><code id="print.break_down_+3A_rounding_function">rounding_function</code></td>
<td>
<p>a function to be used for rounding numbers.
This should be <code><a href="base.html#topic+signif">signif</a></code> which keeps a specified number of significant digits or <code><a href="base.html#topic+round">round</a></code> (which is default) to have the same precision for all components.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>

<hr>
<h2 id='print.break_down_description'>Print Generic for Break Down Objects</h2><span id='topic+print.break_down_description'></span>

<h3>Description</h3>

<p>Print Generic for Break Down Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'break_down_description'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.break_down_description_+3A_x">x</code></td>
<td>
<p>a description of <code>break_down_description</code> class.</p>
</td></tr>
<tr><td><code id="print.break_down_description_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>

<hr>
<h2 id='print.break_down_uncertainty'>Print Generic for Break Down Uncertainty Objects</h2><span id='topic+print.break_down_uncertainty'></span>

<h3>Description</h3>

<p>Print Generic for Break Down Uncertainty Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'break_down_uncertainty'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.break_down_uncertainty_+3A_x">x</code></td>
<td>
<p>an explanation created with <code><a href="#topic+break_down_uncertainty">break_down_uncertainty</a></code></p>
</td></tr>
<tr><td><code id="print.break_down_uncertainty_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame.
</p>


<h3>References</h3>

<p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href="https://ema.drwhy.ai">https://ema.drwhy.ai</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("DALEX")
library("iBreakDown")
set.seed(1313)
model_titanic_glm &lt;- glm(survived ~ gender + age + fare,
                       data = titanic_imputed, family = "binomial")
explain_titanic_glm &lt;- explain(model_titanic_glm,
                           data = titanic_imputed,
                           y = titanic_imputed$survived,
                           label = "glm")

bd_glm &lt;- break_down_uncertainty(explain_titanic_glm, titanic_imputed[1, ])
bd_glm
plot(bd_glm)

## Not run: 
## Not run:
library("randomForest")
set.seed(1313)
model &lt;- randomForest(status ~ . , data = HR)
new_observation &lt;- HR_test[1,]

explainer_rf &lt;- explain(model,
                        data = HR[1:1000,1:5],
                        y = HR$status[1:1000],
                        verbose = FALSE)

bd_rf &lt;- break_down_uncertainty(explainer_rf,
                           new_observation)
bd_rf

# example for regression - apartment prices
# here we do not have intreactions
model &lt;- randomForest(m2.price ~ . , data = apartments)
explainer_rf &lt;- explain(model,
                        data = apartments_test[1:1000,2:6],
                        y = apartments_test$m2.price[1:1000])

bd_rf &lt;- break_down_uncertainty(explainer_rf, apartments_test[1,])
bd_rf

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
