<!DOCTYPE html><html lang="en-US"><head><title>Help for package R4GoodPersonalFinances</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {R4GoodPersonalFinances}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#R4GoodPersonalFinances-package'><p>R4GoodPersonalFinances: Make Better Financial Decisions</p></a></li>
<li><a href='#calc_gompertz_joint_parameters'><p>Calculating the Gompertz model parameters for joint survival</p></a></li>
<li><a href='#calc_gompertz_parameters'><p>Calculating Gompertz model parameters</p></a></li>
<li><a href='#calc_gompertz_survival_probability'><p>Calculating Gompertz survival probability</p></a></li>
<li><a href='#calc_optimal_risky_asset_allocation'><p>Calculate optimal risky asset allocation</p></a></li>
<li><a href='#calc_purchasing_power'><p>Calculate purchasing power</p></a></li>
<li><a href='#calc_retirement_ruin'><p>Calculating retirement ruin probability</p></a></li>
<li><a href='#calc_risk_adjusted_return'><p>Calculate risk adjusted return</p></a></li>
<li><a href='#life_tables'><p>HMD life tables</p></a></li>
<li><a href='#plot_gompertz_calibration'><p>Plotting the results of Gompertz model calibration</p></a></li>
<li><a href='#plot_joint_survival'><p>Plotting the results of Gompertz model calibration for joint survival</p></a></li>
<li><a href='#plot_purchasing_power'><p>Plotting changes to the purchasing power over time</p></a></li>
<li><a href='#plot_retirement_ruin'><p>Plotting retirement ruin</p></a></li>
<li><a href='#plot_risk_adjusted_returns'><p>Plotting risk adjusted returns</p></a></li>
<li><a href='#print_currency'><p>Printing currency values or percentages</p></a></li>
<li><a href='#read_hmd_life_tables'><p>Reading HMD life tables</p></a></li>
<li><a href='#run_app'><p>Run a package app</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Make Better Financial Decisions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Make informed, data-driven decisions for your personal or
    household finances. Use tools and methods that are selected carefully
    to align with academic consensus, bridging the gap between theoretical
    knowledge and practical application. They assist you in finding
    optimal asset allocation, preparing for retirement or financial
    independence, calculating optimal spending, and more. 
    For more details see: 
    Haghani V., White J. (2023, ISBN:978-1-119-74791-8),
    Idzorek T., Kaplan P. (2024, ISBN:9781952927379).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.r4good.academy/">https://www.r4good.academy/</a>,
<a href="https://r4goodacademy.github.io/R4GoodPersonalFinances/">https://r4goodacademy.github.io/R4GoodPersonalFinances/</a>,
<a href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances">https://github.com/R4GoodAcademy/R4GoodPersonalFinances</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances/issues">https://github.com/R4GoodAcademy/R4GoodPersonalFinances/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>bsicons, bslib, dplyr, ggplot2, ggrepel, ggtext, glue,
PrettyCols, scales, shiny, tidyr, readr, fs, purrr, stringr,
withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, testthat (&ge; 3.0.0), vdiffr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-12 14:54:21 UTC; kamil</td>
</tr>
<tr>
<td>Author:</td>
<td>Kamil Wais <a href="https://orcid.org/0000-0002-4062-055X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph, fnd],
  Olesia Wais <a href="https://orcid.org/0000-0002-8741-8674"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kamil Wais &lt;kamil.wais@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-13 20:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='R4GoodPersonalFinances-package'>R4GoodPersonalFinances: Make Better Financial Decisions</h2><span id='topic+R4GoodPersonalFinances'></span><span id='topic+R4GoodPersonalFinances-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Make informed, data-driven decisions for your personal or household finances. Use tools and methods that are selected carefully to align with academic consensus, bridging the gap between theoretical knowledge and practical application. They assist you in finding optimal asset allocation, preparing for retirement or financial independence, calculating optimal spending, and more. For more details see: Haghani V., White J. (2023, ISBN:978-1-119-74791-8), Idzorek T., Kaplan P. (2024, ISBN:9781952927379).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kamil Wais <a href="mailto:kamil.wais@gmail.com">kamil.wais@gmail.com</a> (<a href="https://orcid.org/0000-0002-4062-055X">ORCID</a>) [copyright holder, funder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Olesia Wais <a href="mailto:olesia.wais@gmail.com">olesia.wais@gmail.com</a> (<a href="https://orcid.org/0000-0002-8741-8674">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.r4good.academy/">https://www.r4good.academy/</a>
</p>
</li>
<li> <p><a href="https://r4goodacademy.github.io/R4GoodPersonalFinances/">https://r4goodacademy.github.io/R4GoodPersonalFinances/</a>
</p>
</li>
<li> <p><a href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances">https://github.com/R4GoodAcademy/R4GoodPersonalFinances</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances/issues">https://github.com/R4GoodAcademy/R4GoodPersonalFinances/issues</a>
</p>
</li></ul>


<hr>
<h2 id='calc_gompertz_joint_parameters'>Calculating the Gompertz model parameters for joint survival</h2><span id='topic+calc_gompertz_joint_parameters'></span>

<h3>Description</h3>

<p>Calculating the Gompertz model parameters for joint survival
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_gompertz_joint_parameters(
  p1 = list(age = NULL, mode = NULL, dispersion = NULL),
  p2 = list(age = NULL, mode = NULL, dispersion = NULL),
  max_age = 120
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_gompertz_joint_parameters_+3A_p1">p1</code></td>
<td>
<p>A list with <code>age</code>, <code>mode</code> and <code>dispersion</code> parameters
for the first person (p1).</p>
</td></tr>
<tr><td><code id="calc_gompertz_joint_parameters_+3A_p2">p2</code></td>
<td>
<p>A list with <code>age</code>, <code>mode</code> and <code>dispersion</code> parameters
for the second person (p2).</p>
</td></tr>
<tr><td><code id="calc_gompertz_joint_parameters_+3A_max_age">max_age</code></td>
<td>
<p>A numeric. The maximum age for the Gompertz model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table role = "presentation">
<tr><td><code>data</code></td>
<td>
<p>A data frame with survival rates for 'p1', 'p2', 'joint' survival, and the fitted Gompertz model</p>
</td></tr>
<tr><td><code>mode</code></td>
<td>
<p>The mode of the joint Gompertz distribution</p>
</td></tr>
<tr><td><code>dispersion</code></td>
<td>
<p>The dispersion parameter of the joint Gompertz distribution</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>calc_gompertz_joint_parameters(
  p1 = list(
    age        = 65,
    mode       = 88,
    dispersion = 10.65
  ),
  p2 = list(
    age        = 60,
    mode       = 91,
    dispersion = 8.88
  ),
  max_age = 110
)
</code></pre>

<hr>
<h2 id='calc_gompertz_parameters'>Calculating Gompertz model parameters</h2><span id='topic+calc_gompertz_parameters'></span>

<h3>Description</h3>

<p>Calculating Gompertz model parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_gompertz_parameters(
  mortality_rates,
  current_age,
  estimate_max_age = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_gompertz_parameters_+3A_mortality_rates">mortality_rates</code></td>
<td>
<p>A data frame
with columns <code>mortality_rate</code> and <code>age</code>.
Usually the output of <code><a href="#topic+read_hmd_life_tables">read_hmd_life_tables()</a></code> function or
filtered data from <a href="#topic+life_tables">life_tables</a> object.</p>
</td></tr>
<tr><td><code id="calc_gompertz_parameters_+3A_current_age">current_age</code></td>
<td>
<p>A numeric. Current age.</p>
</td></tr>
<tr><td><code id="calc_gompertz_parameters_+3A_estimate_max_age">estimate_max_age</code></td>
<td>
<p>A logical. Should the maximum age be estimated?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table role = "presentation">
<tr><td><code>data</code></td>
<td>
<p>The input mortality rates data frame with additional columns like 'survival_rate' and 'probability_of_death'</p>
</td></tr>
<tr><td><code>mode</code></td>
<td>
<p>The mode of the Gompertz distribution</p>
</td></tr>
<tr><td><code>dispersion</code></td>
<td>
<p>The dispersion parameter of the Gompertz distribution</p>
</td></tr>
<tr><td><code>current_age</code></td>
<td>
<p>The current age parameter</p>
</td></tr>
<tr><td><code>max_age</code></td>
<td>
<p>The maximum age parameter</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blanchet, David M., and Paul D. Kaplan. 2013. &quot;Alpha, Beta, and Now... Gamma.&quot; Journal of Retirement 1 (2): 29-45. <a href="https://doi.org/10.3905/jor.2013.1.2.029">doi:10.3905/jor.2013.1.2.029</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortality_rates &lt;- 
  dplyr::filter(
    life_tables,
    country == "USA" &amp; 
    sex     == "male" &amp;
    year    == 2022
  )
  
calc_gompertz_parameters(
  mortality_rates = mortality_rates,
  current_age     = 65
)
</code></pre>

<hr>
<h2 id='calc_gompertz_survival_probability'>Calculating Gompertz survival probability</h2><span id='topic+calc_gompertz_survival_probability'></span>

<h3>Description</h3>

<p>Calculating Gompertz survival probability
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_gompertz_survival_probability(
  current_age,
  target_age,
  mode,
  dispersion,
  max_age = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_gompertz_survival_probability_+3A_current_age">current_age</code></td>
<td>
<p>Current age</p>
</td></tr>
<tr><td><code id="calc_gompertz_survival_probability_+3A_target_age">target_age</code></td>
<td>
<p>Target age</p>
</td></tr>
<tr><td><code id="calc_gompertz_survival_probability_+3A_mode">mode</code></td>
<td>
<p>Mode of the Gompertz distribution</p>
</td></tr>
<tr><td><code id="calc_gompertz_survival_probability_+3A_dispersion">dispersion</code></td>
<td>
<p>Dispersion of the Gompertz distribution</p>
</td></tr>
<tr><td><code id="calc_gompertz_survival_probability_+3A_max_age">max_age</code></td>
<td>
<p>Maximum age. Defaults to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric. The probability of survival from 'current_age'
to 'target_age' based on the Gompertz distribution
with the given parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calc_gompertz_survival_probability(
  current_age = 65, 
  target_age  = 85, 
  mode        = 80, 
  dispersion  = 10
)
</code></pre>

<hr>
<h2 id='calc_optimal_risky_asset_allocation'>Calculate optimal risky asset allocation</h2><span id='topic+calc_optimal_risky_asset_allocation'></span>

<h3>Description</h3>

<p>Calculates the optimal allocation to the risky asset
using the Merton Share formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_optimal_risky_asset_allocation(
  risky_asset_return_mean,
  risky_asset_return_sd,
  safe_asset_return,
  risk_aversion
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_optimal_risky_asset_allocation_+3A_risky_asset_return_mean">risky_asset_return_mean</code></td>
<td>
<p>A numeric.
The expected (average) yearly return of the risky asset.</p>
</td></tr>
<tr><td><code id="calc_optimal_risky_asset_allocation_+3A_risky_asset_return_sd">risky_asset_return_sd</code></td>
<td>
<p>A numeric.
The standard deviation of the yearly returns of the risky asset.</p>
</td></tr>
<tr><td><code id="calc_optimal_risky_asset_allocation_+3A_safe_asset_return">safe_asset_return</code></td>
<td>
<p>A numeric.
The expected yearly return of the safe asset.</p>
</td></tr>
<tr><td><code id="calc_optimal_risky_asset_allocation_+3A_risk_aversion">risk_aversion</code></td>
<td>
<p>A numeric.
The risk aversion coefficient.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Can be used to calculate the optimal allocation to the risky asset
for vectors of inputs.
</p>


<h3>Value</h3>

<p>A numeric.
The optimal allocation to the risky asset.
In case of <code><a href="base.html#topic+NaN">NaN()</a></code> (because of division by zero)
the optimal allocation to the risky asset is set to 0.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://www.r4good.academy/en/blog/optimal-asset-allocation/index.en.html#what-do-you-need-to-calculate-your-optimal-asset-allocation">How to Determine Our Optimal Asset Allocation?</a>
</p>
</li>
<li><p> Haghani V., White J. (2023) &quot;The Missing Billionaires: A Guide to Better Financial Decisions.&quot; ISBN:978-1-119-74791-8.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>calc_optimal_risky_asset_allocation(
  risky_asset_return_mean = 0.05,
  risky_asset_return_sd   = 0.15,
  safe_asset_return       = 0.02,
  risk_aversion           = 2
)

calc_optimal_risky_asset_allocation(
  risky_asset_return_mean = c(0.05, 0.06),
  risky_asset_return_sd   = c(0.15, 0.16),
  safe_asset_return       = 0.02,
  risk_aversion           = 2
)
</code></pre>

<hr>
<h2 id='calc_purchasing_power'>Calculate purchasing power</h2><span id='topic+calc_purchasing_power'></span>

<h3>Description</h3>

<p>Calculates changes in purchasing power over time,
taking into account the real interest rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_purchasing_power(x, years, real_interest_rate)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_purchasing_power_+3A_x">x</code></td>
<td>
<p>A numeric. The initial amount of money.</p>
</td></tr>
<tr><td><code id="calc_purchasing_power_+3A_years">years</code></td>
<td>
<p>A numeric. The number of years.</p>
</td></tr>
<tr><td><code id="calc_purchasing_power_+3A_real_interest_rate">real_interest_rate</code></td>
<td>
<p>A numeric. The yearly real interest rate.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The real interest rate is the interest rate after inflation.
If negative (e.g. equal to the average yearly inflation rate)
it can show diminishing purchasing power over time.
If positive, it can show increasing purchasing power over time,
and effect of compounding interest on the purchasing power.
</p>


<h3>Value</h3>

<p>A numeric. The purchasing power.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://www.r4good.academy/en/blog/optimal-asset-allocation/index.en.html#why-keeping-all-your-savings-in-cash-isnt-the-best-idea">How to Determine Our Optimal Asset Allocation?</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>calc_purchasing_power(x = 10, years = 30, real_interest_rate = -0.02)
calc_purchasing_power(x = 10, years = 30, real_interest_rate = 0.02)

</code></pre>

<hr>
<h2 id='calc_retirement_ruin'>Calculating retirement ruin probability</h2><span id='topic+calc_retirement_ruin'></span>

<h3>Description</h3>

<p>Calculating retirement ruin probability
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_retirement_ruin(
  portfolio_return_mean,
  portfolio_return_sd,
  age,
  gompertz_mode,
  gompertz_dispersion,
  portfolio_value,
  monthly_spendings,
  yearly_spendings = 12 * monthly_spendings,
  spending_rate = yearly_spendings/portfolio_value
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_retirement_ruin_+3A_portfolio_return_mean">portfolio_return_mean</code></td>
<td>
<p>A numeric. Mean of portfolio returns.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_portfolio_return_sd">portfolio_return_sd</code></td>
<td>
<p>A numeric. Standard deviation of portfolio returns.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_age">age</code></td>
<td>
<p>A numeric. Current age.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_gompertz_mode">gompertz_mode</code></td>
<td>
<p>A numeric. Gompertz mode.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_gompertz_dispersion">gompertz_dispersion</code></td>
<td>
<p>A numeric. Gompertz dispersion.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_portfolio_value">portfolio_value</code></td>
<td>
<p>A numeric. Initial portfolio value.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_monthly_spendings">monthly_spendings</code></td>
<td>
<p>A numeric. Monthly spendings.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_yearly_spendings">yearly_spendings</code></td>
<td>
<p>A numeric. Yearly spendings.</p>
</td></tr>
<tr><td><code id="calc_retirement_ruin_+3A_spending_rate">spending_rate</code></td>
<td>
<p>A numeric. Spending rate
(initial withdrawal rate).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric. The probability of retirement ruin (between 0 and 1),
representing the likelihood of running out of money during retirement.
</p>


<h3>References</h3>

<p>Milevsky, M.A. (2020). Retirement Income Recipes in R: From Ruin Probabilities to Intelligent Drawdowns. Use R! Series. <a href="https://doi.org/10.1007/978-3-030-51434-1">doi:10.1007/978-3-030-51434-1</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calc_retirement_ruin(
  age                   = 65,
  gompertz_mode         = 88,
  gompertz_dispersion   = 10,
  portfolio_value       = 1000000,
  monthly_spendings     = 3000,  
  portfolio_return_mean = 0.02,
  portfolio_return_sd   = 0.15
)
</code></pre>

<hr>
<h2 id='calc_risk_adjusted_return'>Calculate risk adjusted return</h2><span id='topic+calc_risk_adjusted_return'></span>

<h3>Description</h3>

<p>Calculates the risk adjusted return for portfolio
of given allocation to the risky asset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_risk_adjusted_return(
  safe_asset_return,
  risky_asset_return_mean,
  risky_asset_allocation,
  risky_asset_return_sd = NULL,
  risk_aversion = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_risk_adjusted_return_+3A_safe_asset_return">safe_asset_return</code></td>
<td>
<p>A numeric.
The expected yearly return of the safe asset.</p>
</td></tr>
<tr><td><code id="calc_risk_adjusted_return_+3A_risky_asset_return_mean">risky_asset_return_mean</code></td>
<td>
<p>A numeric.
The expected (average) yearly return of the risky asset.</p>
</td></tr>
<tr><td><code id="calc_risk_adjusted_return_+3A_risky_asset_allocation">risky_asset_allocation</code></td>
<td>
<p>A numeric.
The allocation to the risky asset. Could be a vector.
If it is the optimal allocation then parameters
<code>risky_asset_return_sd</code> and <code>risk_aversion</code>
can be omitted.</p>
</td></tr>
<tr><td><code id="calc_risk_adjusted_return_+3A_risky_asset_return_sd">risky_asset_return_sd</code></td>
<td>
<p>A numeric.
The standard deviation of the yearly returns of the risky asset.</p>
</td></tr>
<tr><td><code id="calc_risk_adjusted_return_+3A_risk_aversion">risk_aversion</code></td>
<td>
<p>A numeric.
The risk aversion coefficient.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric. The risk adjusted return.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://www.r4good.academy/en/blog/optimal-asset-allocation/index.en.html#how-much-risk-is-enough">How to Determine Our Optimal Asset Allocation?</a>
</p>
</li>
<li><p> Haghani V., White J. (2023) &quot;The Missing Billionaires: A Guide to Better Financial Decisions.&quot; ISBN:978-1-119-74791-8.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>calc_risk_adjusted_return(
  safe_asset_return = 0.02,
  risky_asset_return_mean = 0.04,
  risky_asset_return_sd = 0.15,
  risky_asset_allocation = 0.5,
  risk_aversion = 2
)

calc_risk_adjusted_return(
  safe_asset_return = 0.02,
  risky_asset_return_mean = 0.04,
  risky_asset_allocation = c(0.25, 0.5, 0.75),
  risky_asset_return_sd = 0.15,
  risk_aversion = 2
)
</code></pre>

<hr>
<h2 id='life_tables'>HMD life tables</h2><span id='topic+life_tables'></span>

<h3>Description</h3>

<p>A data frame based on: HMD. Human Mortality Database. Max Planck Institute for Demographic Research (Germany), University of California, Berkeley (USA), and French Institute for Demographic Studies (France). Available at www.mortality.org.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>life_tables
</code></pre>


<h3>Format</h3>



<h4><code>life_tables</code></h4>

<p>A data frame with 6 columns:
</p>

<dl>
<dt>country</dt><dd><p>Country name</p>
</dd>
<dt>sex</dt><dd><p>Sex: &quot;male&quot;, &quot;female&quot;, &quot;both&quot;</p>
</dd>
<dt>year</dt><dd><p>Year</p>
</dd>
<dt>age</dt><dd><p>Age</p>
</dd>
<dt>mortality_rate</dt><dd><p>Mortality rate</p>
</dd>
<dt>life_expectancy</dt><dd><p>Life expectancy</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://www.mortality.org">https://www.mortality.org</a>
</p>

<hr>
<h2 id='plot_gompertz_calibration'>Plotting the results of Gompertz model calibration</h2><span id='topic+plot_gompertz_calibration'></span>

<h3>Description</h3>

<p>Plotting the results of Gompertz model calibration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_gompertz_calibration(params, mode, dispersion, max_age)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_gompertz_calibration_+3A_params">params</code></td>
<td>
<p>A list returned by <code><a href="#topic+calc_gompertz_parameters">calc_gompertz_parameters()</a></code> function.</p>
</td></tr>
<tr><td><code id="plot_gompertz_calibration_+3A_mode">mode</code></td>
<td>
<p>A numeric. The mode of the Gompertz model.</p>
</td></tr>
<tr><td><code id="plot_gompertz_calibration_+3A_dispersion">dispersion</code></td>
<td>
<p>A numeric. The dispersion of the Gompertz model.</p>
</td></tr>
<tr><td><code id="plot_gompertz_calibration_+3A_max_age">max_age</code></td>
<td>
<p>A numeric. The maximum age of the Gompertz model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object showing the comparison between
actual survival rates from life tables and the fitted Gompertz model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortality_rates &lt;- 
  dplyr::filter(
    life_tables,
    country == "USA" &amp; 
    sex     == "female" &amp;
    year    == 2022
  )
  
params &lt;- calc_gompertz_parameters(
  mortality_rates = mortality_rates,
  current_age     = 65
)

plot_gompertz_calibration(params = params)
</code></pre>

<hr>
<h2 id='plot_joint_survival'>Plotting the results of Gompertz model calibration for joint survival</h2><span id='topic+plot_joint_survival'></span>

<h3>Description</h3>

<p>Plotting the results of Gompertz model calibration for joint survival
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_joint_survival(params, include_gompertz = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_joint_survival_+3A_params">params</code></td>
<td>
<p>A list returned by <code><a href="#topic+calc_gompertz_joint_parameters">calc_gompertz_joint_parameters()</a></code> function.</p>
</td></tr>
<tr><td><code id="plot_joint_survival_+3A_include_gompertz">include_gompertz</code></td>
<td>
<p>A logical. Should the Gompertz survival curve be included in the plot?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object showing the survival probabilities
for two individuals and their joint survival probability.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>params &lt;- calc_gompertz_joint_parameters(
  p1 = list(
    age        = 65,
    mode       = 88,
    dispersion = 10.65
  ),
  p2 = list(
    age        = 60,
    mode       = 91,
    dispersion = 8.88
  ),
  max_age = 110
)

plot_joint_survival(params = params, include_gompertz = TRUE)
</code></pre>

<hr>
<h2 id='plot_purchasing_power'>Plotting changes to the purchasing power over time</h2><span id='topic+plot_purchasing_power'></span>

<h3>Description</h3>

<p>Plots the effect of real interest rates (positive or negative)
on the purchasing power of savings over the span of 50 years (default).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_purchasing_power(
  x,
  real_interest_rate,
  years = 50,
  legend_title = "Real interest rate",
  seed = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_purchasing_power_+3A_x">x</code></td>
<td>
<p>A numeric. The initial amount of money.</p>
</td></tr>
<tr><td><code id="plot_purchasing_power_+3A_real_interest_rate">real_interest_rate</code></td>
<td>
<p>A numeric. The yearly real interest rate.</p>
</td></tr>
<tr><td><code id="plot_purchasing_power_+3A_years">years</code></td>
<td>
<p>A numeric. The number of years.</p>
</td></tr>
<tr><td><code id="plot_purchasing_power_+3A_legend_title">legend_title</code></td>
<td>
<p>A character.</p>
</td></tr>
<tr><td><code id="plot_purchasing_power_+3A_seed">seed</code></td>
<td>
<p>A numeric. Seed passed to <code>geom_label_repel()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://www.r4good.academy/en/blog/optimal-asset-allocation/index.en.html#why-keeping-all-your-savings-in-cash-isnt-the-best-idea">How to Determine Our Optimal Asset Allocation?</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>plot_purchasing_power(
  x = 10,
  real_interest_rate = seq(-0.02, 0.04, by = 0.02)
)
</code></pre>

<hr>
<h2 id='plot_retirement_ruin'>Plotting retirement ruin</h2><span id='topic+plot_retirement_ruin'></span>

<h3>Description</h3>

<p>Plotting retirement ruin
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_retirement_ruin(
  portfolio_return_mean,
  portfolio_return_sd,
  age,
  gompertz_mode,
  gompertz_dispersion,
  portfolio_value,
  monthly_spendings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_retirement_ruin_+3A_portfolio_return_mean">portfolio_return_mean</code></td>
<td>
<p>A numeric. Mean of portfolio returns.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_portfolio_return_sd">portfolio_return_sd</code></td>
<td>
<p>A numeric. Standard deviation of portfolio returns.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_age">age</code></td>
<td>
<p>A numeric. Current age.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_gompertz_mode">gompertz_mode</code></td>
<td>
<p>A numeric. Gompertz mode.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_gompertz_dispersion">gompertz_dispersion</code></td>
<td>
<p>A numeric. Gompertz dispersion.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_portfolio_value">portfolio_value</code></td>
<td>
<p>A numeric. Initial portfolio value.</p>
</td></tr>
<tr><td><code id="plot_retirement_ruin_+3A_monthly_spendings">monthly_spendings</code></td>
<td>
<p>A numeric. Monthly spendings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object showing the probability of
retirement ruin for different monthly spending levels.
If a specific 'monthly_spendings' value is provided,
it will be highlighted on the plot with annotations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_retirement_ruin(
  portfolio_return_mean = 0.034,
  portfolio_return_sd   = 0.15,
  age                   = 65,
  gompertz_mode         = 88,
  gompertz_dispersion   = 10,
  portfolio_value       = 1000000,
  monthly_spendings     = 3000
)
</code></pre>

<hr>
<h2 id='plot_risk_adjusted_returns'>Plotting risk adjusted returns</h2><span id='topic+plot_risk_adjusted_returns'></span>

<h3>Description</h3>

<p>Plots the risk adjusted returns for portfolios
of various allocations to the risky asset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_risk_adjusted_returns(
  safe_asset_return,
  risky_asset_return_mean,
  risky_asset_return_sd,
  risk_aversion = 2,
  current_risky_asset_allocation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_risk_adjusted_returns_+3A_safe_asset_return">safe_asset_return</code></td>
<td>
<p>A numeric.
The expected yearly return of the safe asset.</p>
</td></tr>
<tr><td><code id="plot_risk_adjusted_returns_+3A_risky_asset_return_mean">risky_asset_return_mean</code></td>
<td>
<p>A numeric.
The expected (average) yearly return of the risky asset.</p>
</td></tr>
<tr><td><code id="plot_risk_adjusted_returns_+3A_risky_asset_return_sd">risky_asset_return_sd</code></td>
<td>
<p>A numeric.
The standard deviation of the yearly returns of the risky asset.</p>
</td></tr>
<tr><td><code id="plot_risk_adjusted_returns_+3A_risk_aversion">risk_aversion</code></td>
<td>
<p>A numeric.
The risk aversion coefficient.</p>
</td></tr>
<tr><td><code id="plot_risk_adjusted_returns_+3A_current_risky_asset_allocation">current_risky_asset_allocation</code></td>
<td>
<p>A numeric.
The current allocation to the risky asset.
For comparison with the optimal allocation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://www.r4good.academy/en/blog/optimal-asset-allocation/index.en.html#how-much-risk-is-enough">How to Determine Our Optimal Asset Allocation?</a>
</p>
</li>
<li><p> Haghani V., White J. (2023) &quot;The Missing Billionaires: A Guide to Better Financial Decisions.&quot; ISBN:978-1-119-74791-8.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>plot_risk_adjusted_returns(
  safe_asset_return              = 0.02,
  risky_asset_return_mean        = 0.04,
  risky_asset_return_sd          = 0.15,
  risk_aversion                  = 2,
  current_risky_asset_allocation = 0.8
)
</code></pre>

<hr>
<h2 id='print_currency'>Printing currency values or percentages</h2><span id='topic+print_currency'></span><span id='topic+print_percent'></span>

<h3>Description</h3>

<p>Wrapper functions for printing nicely formatted values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_currency(
  x,
  suffix = "",
  big.mark = ",",
  accuracy = NULL,
  prefix = NULL,
  ...
)

print_percent(x, accuracy = 0.1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print_currency_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
<tr><td><code id="print_currency_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="print_currency_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="print_currency_+3A_prefix">prefix</code>, <code id="print_currency_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="print_currency_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character. Formatted value.
</p>
<p>A character. Formatted value.
</p>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+dollar_format">scales::dollar()</a></code>
</p>
<p><code><a href="scales.html#topic+percent_format">scales::percent()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>print_currency(2345678, suffix = " PLN")
print_percent(0.52366)
</code></pre>

<hr>
<h2 id='read_hmd_life_tables'>Reading HMD life tables</h2><span id='topic+read_hmd_life_tables'></span>

<h3>Description</h3>

<p>Reading HMD life tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_hmd_life_tables(
  path = getwd(),
  files = c("mltper_1x1.txt", "fltper_1x1.txt", "bltper_1x1.txt")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_hmd_life_tables_+3A_path">path</code></td>
<td>
<p>A character. Path to the folder with life tables.</p>
</td></tr>
<tr><td><code id="read_hmd_life_tables_+3A_files">files</code></td>
<td>
<p>A character. Names of files with life tables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing mortality data with columns:
</p>
<table role = "presentation">
<tr><td><code>sex</code></td>
<td>
<p>Character - sex ('male', 'female', or 'both')</p>
</td></tr>
<tr><td><code>year</code></td>
<td>
<p>Integer - the year of the data</p>
</td></tr>
<tr><td><code>age</code></td>
<td>
<p>Integer - age</p>
</td></tr>
<tr><td><code>mortality_rate</code></td>
<td>
<p>Numeric - mortality rate</p>
</td></tr>
<tr><td><code>life_expectancy</code></td>
<td>
<p>Numeric - life expectancy</p>
</td></tr>
</table>


<h3>References</h3>

<p>HMD. Human Mortality Database. Max Planck Institute for Demographic Research (Germany), University of California, Berkeley (USA), and French Institute for Demographic Studies (France). Available at www.mortality.org
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Download 'txt' files 
# ("mltper_1x1.txt", "fltper_1x1.txt", "bltper_1x1.txt") 
# for a given country to the working directory
# from https://www.mortality.org after registration.

read_hmd_life_tables(path = getwd())

## End(Not run)
</code></pre>

<hr>
<h2 id='run_app'>Run a package app</h2><span id='topic+run_app'></span>

<h3>Description</h3>

<p>Run a package app
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_app(
  which = c("risk-adjusted-returns", "purchasing-power", "retirement-ruin"),
  res = 120,
  shinylive = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_app_+3A_which">which</code></td>
<td>
<p>A character. The name of the app to run.
Currently available:
</p>

<ul>
<li> <p><code>risk-adjusted-returns</code> - Plotting risk-adjusted returns for various allocations to the risky asset allows you to find the optimal allocation.
</p>
</li>
<li> <p><code>purchasing-power</code> - Plotting the effect of real interest rates
(positive or negative) on the purchasing power of savings over time.
</p>
</li>
<li> <p><code>retirement-ruin</code> - Plotting the probability of retirement ruin.
</p>
</li></ul>
</td></tr>
<tr><td><code id="run_app_+3A_res">res</code></td>
<td>
<p>A numeric. The initial resolution of the plots.</p>
</td></tr>
<tr><td><code id="run_app_+3A_shinylive">shinylive</code></td>
<td>
<p>A logical. Whether to use <code>shinylive</code> for the app.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+shinyApp">shiny::shinyApp()</a></code> object if <code>shinylive</code> is <code>TRUE</code>.
Runs the app if <code>shinylive</code> is <code>FALSE</code> with <code><a href="shiny.html#topic+runApp">shiny::runApp()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
run_app("risk-adjusted-returns")
run_app("purchasing-power")
run_app("retirement-ruin")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
