<!DOCTYPE html><html lang="en"><head><title>Help for package DrugUtilisation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DrugUtilisation}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DrugUtilisation-package'><p>DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model</p></a></li>
<li><a href='#addCumulativeDose'><p>To add a new column with the cumulative dose. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addCumulativeQuantity'><p>To add a new column with the cumulative quantity. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addDailyDose'><p>add daily dose information to a drug_exposure table</p></a></li>
<li><a href='#addDaysExposed'><p>To add a new column with the days exposed. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addDaysPrescribed'><p>To add a new column with the days prescribed. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addDrugRestart'><p>Summarise the drug restart per window.</p></a></li>
<li><a href='#addDrugUse'><p>Add new columns with drug use related information</p></a></li>
<li><a href='#addDrugUtilisation'><p>Add new columns with drug use related information</p></a></li>
<li><a href='#addExposedTime'><p>To add a new column with the exposed time. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addIndication'><p>Add a variable indicating individuals indications</p></a></li>
<li><a href='#addInitialDailyDose'><p>To add a new column with the initial daily dose. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addInitialExposureDuration'><p>To add a new column with the duratio of the first exposure.</p>
To add multiple columns use <code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addInitialQuantity'><p>To add a new column with the initial quantity. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addNumberEras'><p>To add a new column with the number of eras. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addNumberExposures'><p>To add a new column with the number of exposures. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addRoute'><p>add route column to a table containing drug_exposure information</p></a></li>
<li><a href='#addTimeToExposure'><p>To add a new column with the time to exposure. To add multiple columns use</p>
<code>addDrugUtilisation()</code> for efficiency.</a></li>
<li><a href='#addTreatment'><p>Add a variable indicating individuals medications</p></a></li>
<li><a href='#benchmarkDrugUtilisation'><p>Run benchmark of drug utilisation cohort generation</p></a></li>
<li><a href='#cdmDoc'><p>Helper for consistent documentation of <code>cdm</code>.</p></a></li>
<li><a href='#censorDateDoc'><p>Helper for consistent documentation of <code>censorDate</code>.</p></a></li>
<li><a href='#cohortDoc'><p>Helper for consistent documentation of <code>cohort</code>.</p></a></li>
<li><a href='#cohortGapEra'><p>Get the gapEra used to create a cohort</p></a></li>
<li><a href='#cohortIdDoc'><p>Helper for consistent documentation of <code>cohortId</code>.</p></a></li>
<li><a href='#compNameDoc'><p>Helper for consistent documentation of <code>name</code> for computed tables.</p></a></li>
<li><a href='#conceptSetDoc'><p>Helper for consistent documentation of <code>conceptSet</code>.</p></a></li>
<li><a href='#dailyDoseCoverage'><p>Check coverage of daily dose computation in a sample of the cdm for selected</p>
concept sets and ingredient</a></li>
<li><a href='#daysPrescribedDoc'><p>Helper for consistent documentation of <code>daysPrescribed</code>.</p></a></li>
<li><a href='#drugUtilisationDoc'><p>Helper for consistent documentation of <code>add</code>/<code>summariseDrugUtilisation</code></p>
functions.</a></li>
<li><a href='#erafyCohort'><p>Erafy a cohort_table collapsing records separated gapEra days or less.</p></a></li>
<li><a href='#gapEraDoc'><p>Helper for consistent documentation of <code>gapEra</code>.</p></a></li>
<li><a href='#generateAtcCohortSet'><p>Generate a set of drug cohorts based on ATC classification</p></a></li>
<li><a href='#generateDrugUtilisationCohortSet'><p>Generate a set of drug cohorts based on given concepts</p></a></li>
<li><a href='#generateIngredientCohortSet'><p>Generate a set of drug cohorts based on drug ingredients</p></a></li>
<li><a href='#indexDateDoc'><p>Helper for consistent documentation of <code>indexDate</code>.</p></a></li>
<li><a href='#ingredientConceptIdDoc'><p>Helper for consistent documentation of <code>ingredientConceptId</code>.</p></a></li>
<li><a href='#mockDrugUtilisation'><p>It creates a mock database for testing DrugUtilisation package</p></a></li>
<li><a href='#nameStyleDoc'><p>Helper for consistent documentation of <code>nameStyle</code>.</p></a></li>
<li><a href='#newNameDoc'><p>Helper for consistent documentation of <code>name</code> for new cohorts.</p></a></li>
<li><a href='#numberExposuresDoc'><p>Helper for consistent documentation of <code>numberExposures</code>.</p></a></li>
<li><a href='#patternsWithFormula'><p>Patterns valid to compute daily dose with the associated formula.</p></a></li>
<li><a href='#patternTable'><p>Function to create a tibble with the patterns from current drug strength table</p></a></li>
<li><a href='#plotDoc'><p>Helper for consistent documentation of <code>plot</code>.</p></a></li>
<li><a href='#plotDrugRestart'><p>Generate a custom ggplot2 from a summarised_result object generated with</p>
summariseDrugRestart() function.</a></li>
<li><a href='#plotDrugUtilisation'><p>Plot the results of <code>summariseDrugUtilisation</code></p></a></li>
<li><a href='#plotIndication'><p>Generate a plot visualisation (ggplot2) from the output of</p>
summariseIndication</a></li>
<li><a href='#plotProportionOfPatientsCovered'><p>Plot proportion of patients covered</p></a></li>
<li><a href='#plotTreatment'><p>Generate a custom ggplot2 from a summarised_result object generated with</p>
summariseTreatment function.</a></li>
<li><a href='#readConceptList'><p>Get concept ids from a provided path to json files</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#requireDrugInDateRange'><p>Restrict cohort to only cohort records within a certain date range</p></a></li>
<li><a href='#requireIsFirstDrugEntry'><p>Restrict cohort to only the first cohort record per subject</p></a></li>
<li><a href='#requireObservationBeforeDrug'><p>Restrict cohort to only cohort records with the given amount of prior</p>
observation time in the database</a></li>
<li><a href='#requirePriorDrugWashout'><p>Restrict cohort to only cohort records with a given amount of time since the</p>
last cohort record ended</a></li>
<li><a href='#restrictIncidentDoc'><p>Helper for consistent documentation of <code>restrictIncident</code>.</p></a></li>
<li><a href='#resultDoc'><p>Helper for consistent documentation of <code>result</code>.</p></a></li>
<li><a href='#strataDoc'><p>Helper for consistent documentation of <code>strata</code>.</p></a></li>
<li><a href='#stratifyByUnit'><p>Function to stratify a conceptSet by unit</p></a></li>
<li><a href='#summariseDoseCoverage'><p>Check coverage of daily dose computation in a sample of the cdm for selected</p>
concept sets and ingredient</a></li>
<li><a href='#summariseDrugRestart'><p>Summarise the drug restart per window.</p></a></li>
<li><a href='#summariseDrugUse'><p>This function is used to summarise the dose table over multiple cohorts.</p></a></li>
<li><a href='#summariseDrugUtilisation'><p>This function is used to summarise the dose utilisation table over multiple</p>
cohorts.</a></li>
<li><a href='#summariseIndication'><p>Summarise the indications of individuals in a drug cohort</p></a></li>
<li><a href='#summariseProportionOfPatientsCovered'><p>Summarise proportion Of patients covered</p></a></li>
<li><a href='#summariseTreatment'><p>This function is used to summarise treatments received</p></a></li>
<li><a href='#tableDoc'><p>Helper for consistent documentation of <code>table</code>.</p></a></li>
<li><a href='#tableDoseCoverage'><p>Format a dose_coverage object into a visual table.</p></a></li>
<li><a href='#tableDrugRestart'><p>Format a drug_restart object into a visual table.</p></a></li>
<li><a href='#tableDrugUtilisation'><p>Format a drug_utilisation object into a visual table.</p></a></li>
<li><a href='#tableIndication'><p>Create a table showing indication results</p></a></li>
<li><a href='#tableProportionOfPatientsCovered'><p>Create a table with proportion of patients covered results</p></a></li>
<li><a href='#tableTreatment'><p>Format a summarised_treatment result into a visual table.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Summarise Patient-Level Drug Utilisation in Data Mapped to the
OMOP Common Data Model</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Summarise patient-level drug utilisation cohorts using data mapped 
    to the Observational Medical Outcomes Partnership (OMOP) common data model. 
    New users and prevalent users cohorts can be generated and their 
    characteristics, indication and drug use summarised.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.1.5), odbc, CohortSurvival, here,
RPostgres, duckdb, knitr, rmarkdown, ggplot2, tibble, gt,
flextable, ggtext, scales, DBI, bit64, visOmopResults (&ge;
0.5.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>CDMConnector (&ge; 1.4.0), CodelistGenerator (&ge; 3.1.0), dplyr,
glue, clock, tidyr, rlang, cli, PatientProfiles (&ge; 1.0.0),
purrr, omopgenerics (&ge; 0.4.0), lifecycle, stringr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://darwin-eu.github.io/DrugUtilisation/">https://darwin-eu.github.io/DrugUtilisation/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/darwin-eu/DrugUtilisation/issues">https://github.com/darwin-eu/DrugUtilisation/issues</a></td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-20 14:15:44 UTC; martics</td>
</tr>
<tr>
<td>Author:</td>
<td>Martí Català <a href="https://orcid.org/0000-0003-3308-9905"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Mike Du <a href="https://orcid.org/0000-0002-9517-8834"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Yuchen Guo <a href="https://orcid.org/0000-0002-0847-4855"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Kim Lopez-Guell <a href="https://orcid.org/0000-0002-8462-8668"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Edward Burn <a href="https://orcid.org/0000-0002-9286-1128"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Xintong Li <a href="https://orcid.org/0000-0002-6872-5804"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Marta Alcalde-Herraiz
    <a href="https://orcid.org/0009-0002-4405-1814"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Nuria Mercade-Besora
    <a href="https://orcid.org/0009-0006-7948-3747"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Xihang Chen <a href="https://orcid.org/0009-0001-8112-8959"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martí Català &lt;marti.catalasabate@ndorms.ox.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-20 14:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='DrugUtilisation-package'>DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model</h2><span id='topic+DrugUtilisation'></span><span id='topic+DrugUtilisation-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Summarise patient-level drug utilisation cohorts using data mapped to the Observational Medical Outcomes Partnership (OMOP) common data model. New users and prevalent users cohorts can be generated and their characteristics, indication and drug use summarised.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Martí Català <a href="mailto:marti.catalasabate@ndorms.ox.ac.uk">marti.catalasabate@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0003-3308-9905">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Yuchen Guo <a href="mailto:yuchen.guo@ndorms.ox.ac.uk">yuchen.guo@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-0847-4855">ORCID</a>)
</p>
</li>
<li><p> Kim Lopez-Guell <a href="mailto:kim.lopez@spc.ox.ac.uk">kim.lopez@spc.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-8462-8668">ORCID</a>)
</p>
</li>
<li><p> Edward Burn <a href="mailto:edward.burn@ndorms.ox.ac.uk">edward.burn@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-9286-1128">ORCID</a>)
</p>
</li>
<li><p> Nuria Mercade-Besora <a href="mailto:nuria.mercadebesora@ndorms.ox.ac.uk">nuria.mercadebesora@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0009-0006-7948-3747">ORCID</a>)
</p>
</li>
<li><p> Xihang Chen <a href="mailto:xihang.chen@ndorms.ox.ac.uk">xihang.chen@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0009-0001-8112-8959">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Mike Du <a href="mailto:mike.du@ndorms.ox.ac.uk">mike.du@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-9517-8834">ORCID</a>) [contributor]
</p>
</li>
<li><p> Xintong Li <a href="mailto:xintong.li@ndorms.ox.ac.uk">xintong.li@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-6872-5804">ORCID</a>) [contributor]
</p>
</li>
<li><p> Marta Alcalde-Herraiz <a href="mailto:marta.alcaldeherraiz@ndorms.ox.ac.uk">marta.alcaldeherraiz@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0009-0002-4405-1814">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://darwin-eu.github.io/DrugUtilisation/">https://darwin-eu.github.io/DrugUtilisation/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/darwin-eu/DrugUtilisation/issues">https://github.com/darwin-eu/DrugUtilisation/issues</a>
</p>
</li></ul>


<hr>
<h2 id='addCumulativeDose'>To add a new column with the cumulative dose. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addCumulativeDose'></span>

<h3>Description</h3>

<p>To add a new column with the cumulative dose. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addCumulativeDose(
  cohort,
  ingredientConceptId,
  conceptSet = NULL,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "cumulative_dose_{concept_name}_{ingredient}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addCumulativeDose_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addCumulativeDose_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 |&gt;
  addCumulativeDose(ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='addCumulativeQuantity'>To add a new column with the cumulative quantity. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addCumulativeQuantity'></span>

<h3>Description</h3>

<p>To add a new column with the cumulative quantity. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addCumulativeQuantity(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "cumulative_quantity_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addCumulativeQuantity_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addCumulativeQuantity_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addCumulativeQuantity(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addDailyDose'>add daily dose information to a drug_exposure table</h2><span id='topic+addDailyDose'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDailyDose(drugExposure, ingredientConceptId, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDailyDose_+3A_drugexposure">drugExposure</code></td>
<td>
<p>drugExposure it must contain drug_concept_id, quantity,
drug_exposure_start_date and drug_exposure_end_date as columns</p>
</td></tr>
<tr><td><code id="addDailyDose_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>ingredientConceptId for which to filter the
drugs of interest</p>
</td></tr>
<tr><td><code id="addDailyDose_+3A_name">name</code></td>
<td>
<p>Name of the computed table, if NULL a temporary table will be
generated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>same input table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm[["drug_exposure"]] |&gt;
  filter(drug_concept_id == 2905077) |&gt;
  addDailyDose(ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='addDaysExposed'>To add a new column with the days exposed. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addDaysExposed'></span>

<h3>Description</h3>

<p>To add a new column with the days exposed. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDaysExposed(
  cohort,
  conceptSet,
  gapEra,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "days_exposed_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDaysExposed_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addDaysExposed_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addDaysExposed(conceptSet = codelist, gapEra = 1)


</code></pre>

<hr>
<h2 id='addDaysPrescribed'>To add a new column with the days prescribed. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addDaysPrescribed'></span>

<h3>Description</h3>

<p>To add a new column with the days prescribed. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDaysPrescribed(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "days_prescribed_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDaysPrescribed_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addDaysPrescribed_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addDaysPrescribed(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addDrugRestart'>Summarise the drug restart per window.</h2><span id='topic+addDrugRestart'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDrugRestart(
  cohort,
  switchCohortTable,
  switchCohortId = NULL,
  followUpDays = Inf,
  censorDate = NULL,
  incident = TRUE,
  nameStyle = "drug_restart_{follow_up_days}"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDrugRestart_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_switchcohorttable">switchCohortTable</code></td>
<td>
<p>A cohort table in the cdm that contains possible
alternative treatments.</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_switchcohortid">switchCohortId</code></td>
<td>
<p>The cohort ids to be used from switchCohortTable. If
NULL all cohort definition ids are used.</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_followupdays">followUpDays</code></td>
<td>
<p>A vector of number of days to follow up. It can be
multiple values.</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_incident">incident</code></td>
<td>
<p>Whether the switch treatment has to be incident (start after
discontinuation) or not (it can start before the discontinuation and last
till after).</p>
</td></tr>
<tr><td><code id="addDrugRestart_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarised_result object with the percentages of restart, switch
and not exposed per window.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

conceptlist &lt;- list("a" = 1125360, "b" = c(1503297, 1503327))
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "switch_cohort",
  conceptSet = conceptlist
)

cdm$cohort1 |&gt;
  addDrugRestart(switchCohortTable = "switch_cohort")

CDMConnector::cdmDisconnect(cdm = cdm)

</code></pre>

<hr>
<h2 id='addDrugUse'>Add new columns with drug use related information</h2><span id='topic+addDrugUse'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDrugUse(
  cohort,
  cdm = lifecycle::deprecated(),
  ingredientConceptId,
  conceptSet = NULL,
  duration = TRUE,
  quantity = TRUE,
  dose = TRUE,
  gapEra = 0,
  eraJoinMode = "zero",
  overlapMode = "sum",
  sameIndexMode = "sum",
  imputeDuration = "none",
  imputeDailyDose = "none",
  durationRange = c(1, Inf),
  dailyDoseRange = c(0, Inf)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDrugUse_+3A_cohort">cohort</code></td>
<td>
<p>Cohort in the cdm</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_cdm">cdm</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study. It is a compulsory input, no default value is provided.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included. If NULL all the
descendants of ingredient concept id will be used.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_duration">duration</code></td>
<td>
<p>Whether to add duration related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_quantity">quantity</code></td>
<td>
<p>Whether to add quantity related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_dose">dose</code></td>
<td>
<p>Whether to add dose related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_erajoinmode">eraJoinMode</code></td>
<td>
<p>How two different continuous exposures are joined in an
era. There are four options:
&quot;zero&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with a daily dose of zero. The
time between both exposures contributes to the total exposed time.
&quot;join&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with a daily dose of zero. The
time between both exposures does not contribute to the total exposed time.
&quot;previous&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with the daily dose of the
previous subexposure. The time between both exposures contributes to the
total exposed time.
&quot;subsequent&quot; the exposures are joined considering that the period between
both continuous exposures the subject is treated with the daily dose of the
subsequent subexposure. The time between both exposures contributes to the
total exposed time.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_overlapmode">overlapMode</code></td>
<td>
<p>How the overlapping between two exposures that do not
start on the same day is solved inside a subexposure. There are five possible
options:
&quot;previous&quot; the considered daily_dose is the one of the earliest exposure.
&quot;subsequent&quot; the considered daily_dose is the one of the new exposure that
starts in that subexposure.
&quot;minimum&quot; the considered daily_dose is the minimum of all of the exposures in
the subexposure.
&quot;maximum&quot; the considered daily_dose is the maximum of all of the exposures in
the subexposure.
&quot;sum&quot; the considered daily_dose is the sum of all the exposures present in
the subexposure.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_sameindexmode">sameIndexMode</code></td>
<td>
<p>How the overlapping between two exposures that start on
the same day is solved inside a subexposure. There are three possible options:
&quot;minimum&quot; the considered daily_dose is the minimum of all of the exposures in
the subexposure.
&quot;maximum&quot; the considered daily_dose is the maximum of all of the exposures in
the subexposure.
&quot;sum&quot; the considered daily_dose is the sum of all the exposures present in
the subexposure.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Whether/how the duration should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot; or a number</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_imputedailydose">imputeDailyDose</code></td>
<td>
<p>Whether/how the daily_dose should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot; or a number</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_durationrange">durationRange</code></td>
<td>
<p>Range between the duration must be comprised. It should
be a numeric vector of length two, with no NAs and the first value should be
equal or smaller than the second one. It must not be NULL if imputeDuration
is not &quot;none&quot;. If NULL no restrictions are applied.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_dailydoserange">dailyDoseRange</code></td>
<td>
<p>Range between the daily_dose must be comprised. It
should be a numeric vector of length two, with no NAs and the first value
should be equal or smaller than the second one. It must not be NULL if
imputeDailyDose is not &quot;none&quot;. If NULL no restrictions are applied.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added columns.
</p>

<hr>
<h2 id='addDrugUtilisation'>Add new columns with drug use related information</h2><span id='topic+addDrugUtilisation'></span>

<h3>Description</h3>

<p>Add new columns with drug use related information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDrugUtilisation(
  cohort,
  gapEra,
  conceptSet = NULL,
  ingredientConceptId = NULL,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  numberExposures = TRUE,
  numberEras = TRUE,
  daysExposed = TRUE,
  daysPrescribed = TRUE,
  timeToExposure = TRUE,
  initialExposureDuration = TRUE,
  initialQuantity = TRUE,
  cumulativeQuantity = TRUE,
  initialDailyDose = TRUE,
  cumulativeDose = TRUE,
  nameStyle = "{value}_{concept_name}_{ingredient}",
  name = NULL,
  exposedTime = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDrugUtilisation_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_numbereras">numberEras</code></td>
<td>
<p>Whether to include 'number_eras' (number of continuous
exposure episodes between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_daysexposed">daysExposed</code></td>
<td>
<p>Whether to include 'days_exposed' (number of days that the
individual is in a continuous exposure episode, including allowed treatment
gaps, between indexDate and censorDate; sum of the length of the different
drug eras).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (sum of the number
of days for each prescription that contribute in the analysis).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_timetoexposure">timeToExposure</code></td>
<td>
<p>Whether to include 'time_to_exposure' (number of days
between indexDate and the first episode).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_initialexposureduration">initialExposureDuration</code></td>
<td>
<p>Whether to include 'initial_exposure_duration'
(number of prescribed days of the first drug exposure record).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_initialquantity">initialQuantity</code></td>
<td>
<p>Whether to include 'initial_quantity' (quantity of the
first drug exposure record).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_cumulativequantity">cumulativeQuantity</code></td>
<td>
<p>Whether to include 'cumulative_quantity' (sum of
the quantity of the different exposures considered in the analysis).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_initialdailydose">initialDailyDose</code></td>
<td>
<p>Whether to include 'initial_daily_dose_{unit}'
(daily dose of the first considered prescription).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_cumulativedose">cumulativeDose</code></td>
<td>
<p>Whether to include 'cumulative_dose_{unit}' (sum of
the cumulative dose of the analysed drug exposure records).</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
<tr><td><code id="addDrugUtilisation_+3A_exposedtime">exposedTime</code></td>
<td>
<p>deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)

cdm &lt;- generateDrugUtilisationCohortSet(cdm, "dus_cohort", codelist)
cdm[["dus_cohort"]] |&gt;
  addDrugUtilisation(ingredientConceptId = 1125315, gapEra = 30)


</code></pre>

<hr>
<h2 id='addExposedTime'>To add a new column with the exposed time. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addExposedTime'></span>

<h3>Description</h3>

<p>To add a new column with the exposed time. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addExposedTime(
  cohort,
  conceptSet,
  gapEra,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "days_exposed_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addExposedTime_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addExposedTime_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>

<hr>
<h2 id='addIndication'>Add a variable indicating individuals indications</h2><span id='topic+addIndication'></span>

<h3>Description</h3>

<p>Add a variable to a drug cohort indicating their presence in an indication
cohort in a specified time window. If an individual is not in one of the
indication cohorts, they will be considered to have an unknown indication if
they are present in one of the specified OMOP CDM clinical tables. If they
are neither in an indication cohort or a clinical table they will be
considered as having no observed indication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addIndication(
  cohort,
  indicationCohortName,
  indicationCohortId = NULL,
  indicationWindow = list(c(0, 0)),
  unknownIndicationTable = NULL,
  indexDate = "cohort_start_date",
  censorDate = NULL,
  mutuallyExclusive = TRUE,
  nameStyle = NULL,
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addIndication_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationcohortname">indicationCohortName</code></td>
<td>
<p>Name of indication cohort table</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationcohortid">indicationCohortId</code></td>
<td>
<p>target cohort Id to add indication</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationwindow">indicationWindow</code></td>
<td>
<p>time window of interests</p>
</td></tr>
<tr><td><code id="addIndication_+3A_unknownindicationtable">unknownIndicationTable</code></td>
<td>
<p>Tables to search unknown indications</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addIndication_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addIndication_+3A_mutuallyexclusive">mutuallyExclusive</code></td>
<td>
<p>Whether to consider mutually exclusive categories
(one column per window) or not (one column per window and indication).</p>
</td></tr>
<tr><td><code id="addIndication_+3A_namestyle">nameStyle</code></td>
<td>
<p>Name style for the indications. By default:
'indication_{window_name}' (mutuallyExclusive = TRUE),
'indication_{window_name}_{cohort_name}' (mutuallyExclusive = FALSE).</p>
</td></tr>
<tr><td><code id="addIndication_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original table with a variable added that summarises the
individual´s indications.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CDMConnector)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

indications &lt;- list("headache" = 378253, "asthma" = 317009)
cdm &lt;- generateConceptCohortSet(
  cdm = cdm, conceptSet = indications, name = "indication_cohorts"
)

cdm &lt;- generateIngredientCohortSet(
  cdm = cdm, name = "drug_cohort",
  ingredient = "acetaminophen"
)

cdm$drug_cohort |&gt;
  addIndication(
    indicationCohortName = "indication_cohorts",
    indicationWindow = list(c(0, 0)),
    unknownIndicationTable = "condition_occurrence"
  ) |&gt;
  glimpse()


</code></pre>

<hr>
<h2 id='addInitialDailyDose'>To add a new column with the initial daily dose. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addInitialDailyDose'></span>

<h3>Description</h3>

<p>To add a new column with the initial daily dose. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addInitialDailyDose(
  cohort,
  ingredientConceptId,
  conceptSet = NULL,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "initial_daily_dose_{concept_name}_{ingredient}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addInitialDailyDose_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addInitialDailyDose_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 |&gt;
  addInitialDailyDose(ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='addInitialExposureDuration'>To add a new column with the duratio of the first exposure.
To add multiple columns use <code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addInitialExposureDuration'></span>

<h3>Description</h3>

<p>To add a new column with the duratio of the first exposure.
To add multiple columns use <code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addInitialExposureDuration(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "initial_exposure_duration_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addInitialExposureDuration_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addInitialExposureDuration_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addInitialExposureDuration(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addInitialQuantity'>To add a new column with the initial quantity. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addInitialQuantity'></span>

<h3>Description</h3>

<p>To add a new column with the initial quantity. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addInitialQuantity(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "initial_quantity_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addInitialQuantity_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addInitialQuantity_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addInitialQuantity(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addNumberEras'>To add a new column with the number of eras. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addNumberEras'></span>

<h3>Description</h3>

<p>To add a new column with the number of eras. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addNumberEras(
  cohort,
  conceptSet,
  gapEra,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "number_eras_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addNumberEras_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addNumberEras_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addNumberEras(conceptSet = codelist, gapEra = 1)


</code></pre>

<hr>
<h2 id='addNumberExposures'>To add a new column with the number of exposures. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addNumberExposures'></span>

<h3>Description</h3>

<p>To add a new column with the number of exposures. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addNumberExposures(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "number_exposures_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addNumberExposures_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addNumberExposures_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addNumberExposures(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addRoute'>add route column to a table containing drug_exposure information</h2><span id='topic+addRoute'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRoute(drugTable)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addRoute_+3A_drugtable">drugTable</code></td>
<td>
<p>Table in the cdm that must contain drug_concept_id</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It adds route to the current table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm[["drug_exposure"]] |&gt;
  addRoute()


</code></pre>

<hr>
<h2 id='addTimeToExposure'>To add a new column with the time to exposure. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.</h2><span id='topic+addTimeToExposure'></span>

<h3>Description</h3>

<p>To add a new column with the time to exposure. To add multiple columns use
<code>addDrugUtilisation()</code> for efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addTimeToExposure(
  cohort,
  conceptSet,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  nameStyle = "time_to_exposure_{concept_name}",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addTimeToExposure_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
<tr><td><code id="addTimeToExposure_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm,
  name = "acetaminophen"
)
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm, name = "dus_cohort", conceptSet = codelist
)

cdm$dus_cohort |&gt;
  addTimeToExposure(conceptSet = codelist)


</code></pre>

<hr>
<h2 id='addTreatment'>Add a variable indicating individuals medications</h2><span id='topic+addTreatment'></span>

<h3>Description</h3>

<p>Add a variable to a drug cohort indicating their presence of a medication
cohort in a specified time window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addTreatment(
  cohort,
  treatmentCohortName,
  treatmentCohortId = NULL,
  window = list(c(0, 0)),
  indexDate = "cohort_start_date",
  censorDate = NULL,
  mutuallyExclusive = TRUE,
  nameStyle = NULL,
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addTreatment_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_treatmentcohortname">treatmentCohortName</code></td>
<td>
<p>Name of treatment cohort table</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_treatmentcohortid">treatmentCohortId</code></td>
<td>
<p>target cohort Id to add treatment</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_window">window</code></td>
<td>
<p>time window of interests.</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_mutuallyexclusive">mutuallyExclusive</code></td>
<td>
<p>Whether to consider mutually exclusive categories
(one column per window) or not (one column per window and treatment).</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_namestyle">nameStyle</code></td>
<td>
<p>Name style for the treatment columns. By default:
'treatment_{window_name}' (mutuallyExclusive = TRUE),
'treatment_{window_name}_{cohort_name}' (mutuallyExclusive = FALSE).</p>
</td></tr>
<tr><td><code id="addTreatment_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original table with a variable added that summarises the
individual´s indications.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CDMConnector)
library(dplyr)

cdm &lt;- mockDrugUtilisation(numberIndividuals = 50)


cdm &lt;- generateIngredientCohortSet(
  cdm = cdm, name = "drug_cohort", ingredient = "acetaminophen"
)

cdm &lt;- generateIngredientCohortSet(
  cdm = cdm, name = "treatments", ingredient = c("metformin", "simvastatin")
)

cdm$drug_cohort |&gt;
  addTreatment("treatments", window = list(c(0, 0), c(1, 30), c(31, 60))) |&gt;
  glimpse()


</code></pre>

<hr>
<h2 id='benchmarkDrugUtilisation'>Run benchmark of drug utilisation cohort generation</h2><span id='topic+benchmarkDrugUtilisation'></span>

<h3>Description</h3>

<p>Run benchmark of drug utilisation cohort generation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>benchmarkDrugUtilisation(
  cdm,
  ingredient = "acetaminophen",
  alternativeIngredient = c("ibuprofen", "aspirin", "diclofenac"),
  indicationCohort = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="benchmarkDrugUtilisation_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="benchmarkDrugUtilisation_+3A_ingredient">ingredient</code></td>
<td>
<p>Name of ingredient to benchmark.</p>
</td></tr>
<tr><td><code id="benchmarkDrugUtilisation_+3A_alternativeingredient">alternativeIngredient</code></td>
<td>
<p>Name of ingredients to use as alternative
treatments.</p>
</td></tr>
<tr><td><code id="benchmarkDrugUtilisation_+3A_indicationcohort">indicationCohort</code></td>
<td>
<p>Name of a cohort in the cdm_reference object to use
as indicatiomn.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarise_result object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CDMConnector)
library(duckdb)

requireEunomia()
con &lt;- dbConnect(duckdb(), eunomiaDir())
cdm &lt;- cdmFromCon(con = con, cdmSchema = "main", writeSchema = "main")

timings &lt;- benchmarkDrugUtilisation(cdm)

timings


</code></pre>

<hr>
<h2 id='cdmDoc'>Helper for consistent documentation of <code>cdm</code>.</h2><span id='topic+cdmDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>cdm</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cdmDoc_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='censorDateDoc'>Helper for consistent documentation of <code>censorDate</code>.</h2><span id='topic+censorDateDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>censorDate</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="censorDateDoc_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
</table>

<hr>
<h2 id='cohortDoc'>Helper for consistent documentation of <code>cohort</code>.</h2><span id='topic+cohortDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>cohort</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohortDoc_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
</table>

<hr>
<h2 id='cohortGapEra'>Get the gapEra used to create a cohort</h2><span id='topic+cohortGapEra'></span>

<h3>Description</h3>

<p>Get the gapEra used to create a cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohortGapEra(cohort, cohortId = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohortGapEra_+3A_cohort">cohort</code></td>
<td>
<p>A <code>cohort_table</code> object.</p>
</td></tr>
<tr><td><code id="cohortGapEra_+3A_cohortid">cohortId</code></td>
<td>
<p>Integer vector refering to cohortIds from cohort. If NULL all
cohort definition ids in settings will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>gapEra values for the specific cohortIds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(CDMConnector)
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

druglist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm, c("acetaminophen", "metformin")
)

cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "drug_cohorts",
  conceptSet = druglist,
  gapEra = 100
)

cohortGapEra(cdm$drug_cohorts)


</code></pre>

<hr>
<h2 id='cohortIdDoc'>Helper for consistent documentation of <code>cohortId</code>.</h2><span id='topic+cohortIdDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>cohortId</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohortIdDoc_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
</table>

<hr>
<h2 id='compNameDoc'>Helper for consistent documentation of <code>name</code> for computed tables.</h2><span id='topic+compNameDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>name</code> for computed tables.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compNameDoc_+3A_name">name</code></td>
<td>
<p>Name of the new computed cohort table, if NULL a temporary table
will be created.</p>
</td></tr>
</table>

<hr>
<h2 id='conceptSetDoc'>Helper for consistent documentation of <code>conceptSet</code>.</h2><span id='topic+conceptSetDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>conceptSet</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="conceptSetDoc_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
</table>

<hr>
<h2 id='dailyDoseCoverage'>Check coverage of daily dose computation in a sample of the cdm for selected
concept sets and ingredient</h2><span id='topic+dailyDoseCoverage'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dailyDoseCoverage(cdm, ingredientConceptId)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dailyDoseCoverage_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="dailyDoseCoverage_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns information of the coverage of computeDailyDose.R
for the selected ingredients and concept sets
</p>

<hr>
<h2 id='daysPrescribedDoc'>Helper for consistent documentation of <code>daysPrescribed</code>.</h2><span id='topic+daysPrescribedDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>daysPrescribed</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="daysPrescribedDoc_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (number of days
prescribed used to create each era).</p>
</td></tr>
</table>

<hr>
<h2 id='drugUtilisationDoc'>Helper for consistent documentation of <code>add</code>/<code>summariseDrugUtilisation</code>
functions.</h2><span id='topic+drugUtilisationDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>add</code>/<code>summariseDrugUtilisation</code>
functions.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="drugUtilisationDoc_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_numbereras">numberEras</code></td>
<td>
<p>Whether to include 'number_eras' (number of continuous
exposure episodes between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_daysexposed">daysExposed</code></td>
<td>
<p>Whether to include 'days_exposed' (number of days that the
individual is in a continuous exposure episode, including allowed treatment
gaps, between indexDate and censorDate; sum of the length of the different
drug eras).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (sum of the number
of days for each prescription that contribute in the analysis).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_timetoexposure">timeToExposure</code></td>
<td>
<p>Whether to include 'time_to_exposure' (number of days
between indexDate and the first episode).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_initialexposureduration">initialExposureDuration</code></td>
<td>
<p>Whether to include 'initial_exposure_duration'
(number of prescribed days of the first drug exposure record).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_initialquantity">initialQuantity</code></td>
<td>
<p>Whether to include 'initial_quantity' (quantity of the
first drug exposure record).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_cumulativequantity">cumulativeQuantity</code></td>
<td>
<p>Whether to include 'cumulative_quantity' (sum of
the quantity of the different exposures considered in the analysis).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_initialdailydose">initialDailyDose</code></td>
<td>
<p>Whether to include 'initial_daily_dose_{unit}'
(daily dose of the first considered prescription).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_cumulativedose">cumulativeDose</code></td>
<td>
<p>Whether to include 'cumulative_dose_{unit}' (sum of
the cumulative dose of the analysed drug exposure records).</p>
</td></tr>
<tr><td><code id="drugUtilisationDoc_+3A_exposedtime">exposedTime</code></td>
<td>
<p>deprecated.</p>
</td></tr>
</table>

<hr>
<h2 id='erafyCohort'>Erafy a cohort_table collapsing records separated gapEra days or less.</h2><span id='topic+erafyCohort'></span>

<h3>Description</h3>

<p>Erafy a cohort_table collapsing records separated gapEra days or less.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>erafyCohort(
  cohort,
  gapEra,
  cohortId = NULL,
  nameStyle = "{cohort_name}_{gap_era}",
  name = omopgenerics::tableName(cohort)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="erafyCohort_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="erafyCohort_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="erafyCohort_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="erafyCohort_+3A_namestyle">nameStyle</code></td>
<td>
<p>String to create the new names of cohorts. Must contain
'{cohort_name}' if more than one cohort is present and '{gap_era}' if more
than one gapEra is provided.</p>
</td></tr>
<tr><td><code id="erafyCohort_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A cohort_table object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cdm &lt;- mockDrugUtilisation()

cdm$cohort2 &lt;- cdm$cohort1 |&gt;
  erafyCohort(gapEra = 30, name = "cohort2")

cdm$cohort2

settings(cdm$cohort2)

mockDisconnect(cdm)

</code></pre>

<hr>
<h2 id='gapEraDoc'>Helper for consistent documentation of <code>gapEra</code>.</h2><span id='topic+gapEraDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>gapEra</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gapEraDoc_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
</table>

<hr>
<h2 id='generateAtcCohortSet'>Generate a set of drug cohorts based on ATC classification</h2><span id='topic+generateAtcCohortSet'></span>

<h3>Description</h3>

<p>Adds a new cohort table to the cdm reference with individuals who have drug
exposure records that belong to the specified Anatomical Therapeutic Chemical
(ATC) classification. Cohort start and end dates will be based on drug record
start and end dates, respectively. Records that overlap or have fewer days
between them than the specified gap era will be concatenated into a single
cohort entry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateAtcCohortSet(
  cdm,
  name,
  atcName = NULL,
  gapEra = 1,
  subsetCohort = NULL,
  subsetCohortId = NULL,
  numberExposures = FALSE,
  daysPrescribed = FALSE,
  ...,
  durationRange = lifecycle::deprecated(),
  imputeDuration = lifecycle::deprecated(),
  priorUseWashout = lifecycle::deprecated(),
  priorObservation = lifecycle::deprecated(),
  cohortDateRange = lifecycle::deprecated(),
  limit = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generateAtcCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_atcname">atcName</code></td>
<td>
<p>Names of ATC classification of interest.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era. Records that have fewer days between them than
this gap will be concatenated into the same cohort record.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_subsetcohort">subsetCohort</code></td>
<td>
<p>Cohort table to subset.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_subsetcohortid">subsetCohortId</code></td>
<td>
<p>Cohort id to subset.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (number of days
prescribed used to create each era).</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>CodelistGenerator::getATCCodes()</code>.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_limit">limit</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the cdm reference provided with the addition of
the new cohort table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm &lt;- generateAtcCohortSet(
  cdm = cdm,
  atcName = "alimentary tract and metabolism",
  name = "drugs"
)

cdm$drugs |&gt;
  glimpse()

</code></pre>

<hr>
<h2 id='generateDrugUtilisationCohortSet'>Generate a set of drug cohorts based on given concepts</h2><span id='topic+generateDrugUtilisationCohortSet'></span>

<h3>Description</h3>

<p>Adds a new cohort table to the cdm reference with individuals who have drug
exposure records with the specified concepts. Cohort start and end dates will
be based on drug record start and end dates, respectively. Records that
overlap or have fewer days between them than the specified gap era will be
concatenated into a single cohort entry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateDrugUtilisationCohortSet(
  cdm,
  name,
  conceptSet,
  gapEra = 1,
  subsetCohort = NULL,
  subsetCohortId = NULL,
  numberExposures = FALSE,
  daysPrescribed = FALSE,
  durationRange = lifecycle::deprecated(),
  imputeDuration = lifecycle::deprecated(),
  priorUseWashout = lifecycle::deprecated(),
  priorObservation = lifecycle::deprecated(),
  cohortDateRange = lifecycle::deprecated(),
  limit = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_subsetcohort">subsetCohort</code></td>
<td>
<p>Cohort table to subset.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_subsetcohortid">subsetCohortId</code></td>
<td>
<p>Cohort id to subset.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (number of days
prescribed used to create each era).</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_limit">limit</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the cdm reference provided with the addition of
the new cohort table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(CDMConnector)
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

druglist &lt;- CodelistGenerator::getDrugIngredientCodes(
  cdm, c("acetaminophen", "metformin"), nameStyle = "{concept_name}"
)

cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "drug_cohorts",
  conceptSet = druglist,
  gapEra = 30,
  numberExposures = TRUE,
  daysPrescribed = TRUE
)

cdm$drug_cohorts |&gt;
  glimpse()


</code></pre>

<hr>
<h2 id='generateIngredientCohortSet'>Generate a set of drug cohorts based on drug ingredients</h2><span id='topic+generateIngredientCohortSet'></span>

<h3>Description</h3>

<p>Adds a new cohort table to the cdm reference with individuals who have drug
exposure records with the specified drug ingredient. Cohort start and end
dates will be based on drug record start and end dates, respectively. Records
that overlap or have fewer days between them than the specified gap era will
be concatenated into a single cohort entry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateIngredientCohortSet(
  cdm,
  name,
  ingredient = NULL,
  gapEra = 1,
  subsetCohort = NULL,
  subsetCohortId = NULL,
  numberExposures = FALSE,
  daysPrescribed = FALSE,
  ...,
  durationRange = lifecycle::deprecated(),
  imputeDuration = lifecycle::deprecated(),
  priorUseWashout = lifecycle::deprecated(),
  priorObservation = lifecycle::deprecated(),
  cohortDateRange = lifecycle::deprecated(),
  limit = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generateIngredientCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_ingredient">ingredient</code></td>
<td>
<p>Accepts both vectors and named lists of ingredient names.
For a vector input, e.g., c(&quot;acetaminophen&quot;, &quot;codeine&quot;), it generates a
cohort table with descendant concept codes for each ingredient, assigning
unique cohort_definition_id. For a named list input, e.g., list(
&quot;test_1&quot; = c(&quot;simvastatin&quot;, &quot;acetaminophen&quot;), &quot;test_2&quot; = &quot;metformin&quot;),
it produces a cohort table based on the structure of the input, where
each name leads to a combined set of descendant concept codes for the
specified ingredients, creating distinct cohort_definition_id for each
named group.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_subsetcohort">subsetCohort</code></td>
<td>
<p>Cohort table to subset.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_subsetcohortid">subsetCohortId</code></td>
<td>
<p>Cohort id to subset.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (number of days
prescribed used to create each era).</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to
<code>CodelistGenerator::getDrugIngredientCodes()</code>.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_limit">limit</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the cdm reference provided with the addition of
the new cohort table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm &lt;- generateIngredientCohortSet(
  cdm = cdm,
  ingredient = "acetaminophen",
  name = "acetaminophen"
)

cdm$acetaminophen |&gt;
  glimpse()


</code></pre>

<hr>
<h2 id='indexDateDoc'>Helper for consistent documentation of <code>indexDate</code>.</h2><span id='topic+indexDateDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>indexDate</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="indexDateDoc_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
</table>

<hr>
<h2 id='ingredientConceptIdDoc'>Helper for consistent documentation of <code>ingredientConceptId</code>.</h2><span id='topic+ingredientConceptIdDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>ingredientConceptId</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ingredientConceptIdDoc_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
</table>

<hr>
<h2 id='mockDrugUtilisation'>It creates a mock database for testing DrugUtilisation package</h2><span id='topic+mockDrugUtilisation'></span>

<h3>Description</h3>

<p>It creates a mock database for testing DrugUtilisation package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mockDrugUtilisation(
  con = NULL,
  writeSchema = NULL,
  numberIndividuals = 10,
  seed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mockDrugUtilisation_+3A_con">con</code></td>
<td>
<p>A DBIConnection object to a database. If NULL a new duckdb
connection will be used.</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_writeschema">writeSchema</code></td>
<td>
<p>A schema with writing permissions to copy there the cdm
tables.</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_numberindividuals">numberIndividuals</code></td>
<td>
<p>Number of individuals in the mock cdm.</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_seed">seed</code></td>
<td>
<p>Seed for the random numbers. If NULL no seed is used.</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_...">...</code></td>
<td>
<p>Tables to use as basis to create the mock. If some tables are
provided they will be used to construct the cdm object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A cdm reference with the mock tables
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm


</code></pre>

<hr>
<h2 id='nameStyleDoc'>Helper for consistent documentation of <code>nameStyle</code>.</h2><span id='topic+nameStyleDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>nameStyle</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nameStyleDoc_+3A_namestyle">nameStyle</code></td>
<td>
<p>Character string to specify the nameStyle of the new columns.</p>
</td></tr>
</table>

<hr>
<h2 id='newNameDoc'>Helper for consistent documentation of <code>name</code> for new cohorts.</h2><span id='topic+newNameDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>name</code> for new cohorts.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="newNameDoc_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>

<hr>
<h2 id='numberExposuresDoc'>Helper for consistent documentation of <code>numberExposures</code>.</h2><span id='topic+numberExposuresDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>numberExposures</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="numberExposuresDoc_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
</table>

<hr>
<h2 id='patternsWithFormula'>Patterns valid to compute daily dose with the associated formula.</h2><span id='topic+patternsWithFormula'></span>

<h3>Description</h3>

<p>Patterns valid to compute daily dose with the associated formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patternsWithFormula
</code></pre>


<h3>Format</h3>

<p>A data frame with eight variables: <code>pattern_id</code>, <code>amount</code>,
<code>amount_unit</code>, <code>numerator</code>, <code>numerator_unit</code>,
<code>denominator</code>, <code>denominator_unit</code>, <code>formula_name</code> and
<code>formula</code>.
</p>

<hr>
<h2 id='patternTable'>Function to create a tibble with the patterns from current drug strength table</h2><span id='topic+patternTable'></span>

<h3>Description</h3>

<p>Function to create a tibble with the patterns from current drug strength table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patternTable(cdm)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="patternTable_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function creates a tibble with the different patterns found in
the table, plus a column of potentially valid and invalid combinations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

patternTable(cdm)


</code></pre>

<hr>
<h2 id='plotDoc'>Helper for consistent documentation of <code>plot</code>.</h2><span id='topic+plotDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>plot</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotDoc_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotDoc_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='plotDrugRestart'>Generate a custom ggplot2 from a summarised_result object generated with
summariseDrugRestart() function.</h2><span id='topic+plotDrugRestart'></span>

<h3>Description</h3>

<p>Generate a custom ggplot2 from a summarised_result object generated with
summariseDrugRestart() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDrugRestart(
  result,
  facet = cdm_name + cohort_name ~ follow_up_days,
  colour = "variable_level"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotDrugRestart_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="plotDrugRestart_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotDrugRestart_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

conceptlist &lt;- list("a" = 1125360, "b" = c(1503297, 1503327))
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "switch_cohort",
  conceptSet = conceptlist
)

result &lt;- cdm$cohort1 |&gt;
  summariseDrugRestart(switchCohortTable = "switch_cohort")

plotDrugRestart(result)


## End(Not run)

</code></pre>

<hr>
<h2 id='plotDrugUtilisation'>Plot the results of <code>summariseDrugUtilisation</code></h2><span id='topic+plotDrugUtilisation'></span>

<h3>Description</h3>

<p>Plot the results of <code>summariseDrugUtilisation</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDrugUtilisation(
  result,
  variable = "number exposures",
  plotType = "barplot",
  facet = strataColumns(result),
  colour = "cohort_name"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotDrugUtilisation_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="plotDrugUtilisation_+3A_variable">variable</code></td>
<td>
<p>Variable to plot. See <code>unique(result$variable_name)</code> for
options.</p>
</td></tr>
<tr><td><code id="plotDrugUtilisation_+3A_plottype">plotType</code></td>
<td>
<p>Must be a choice between: 'scatterplot', 'barplot',
'densityplot', and 'boxplot'.</p>
</td></tr>
<tr><td><code id="plotDrugUtilisation_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotDrugUtilisation_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cdm &lt;- mockDrugUtilisation(numberIndividuals = 100)
codes &lt;- list(aceta = c(1125315, 1125360, 2905077, 43135274))
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "cohort",
  conceptSet = codes
)

result &lt;- cdm$cohort |&gt;
  PatientProfiles::addSex() |&gt;
  summariseDrugUtilisation(
    strata = "sex",
    ingredientConceptId = 1125315,
    estimates = c("min", "q25", "median", "q75", "max", "density")
  )

result |&gt;
  dplyr::filter(estimate_name == "median") |&gt;
  plotDrugUtilisation(
    variable = "days prescribed",
    plotType = "barplot"
  )

result |&gt;
  plotDrugUtilisation(
    variable = "days exposed",
    facet = cohort_name ~ cdm_name,
    colour = "sex",
    plotType = "boxplot"
  )

result |&gt;
  plotDrugUtilisation(
    variable = "cumulative dose milligram",
    plotType = "densityplot",
    facet = "cohort_name",
    colour = "sex"
  )

mockDisconnect(cdm)


</code></pre>

<hr>
<h2 id='plotIndication'>Generate a plot visualisation (ggplot2) from the output of
summariseIndication</h2><span id='topic+plotIndication'></span>

<h3>Description</h3>

<p>Generate a plot visualisation (ggplot2) from the output of
summariseIndication
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotIndication(
  result,
  facet = cdm_name + cohort_name ~ window_name,
  colour = "variable_level"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotIndication_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="plotIndication_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotIndication_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CDMConnector)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

indications &lt;- list("headache" = 378253, "asthma" = 317009)
cdm &lt;- generateConceptCohortSet(cdm, indications, "indication_cohorts")

cdm &lt;- generateIngredientCohortSet(
  cdm = cdm, name = "drug_cohort", ingredient = "acetaminophen"
)

result &lt;- cdm$drug_cohort |&gt;
  summariseIndication(
    indicationCohortName = "indication_cohorts",
    unknownIndicationTable = "condition_occurrence",
    indicationWindow = list(c(-Inf, 0), c(-365, 0))
  )

plotIndication(result)


</code></pre>

<hr>
<h2 id='plotProportionOfPatientsCovered'>Plot proportion of patients covered</h2><span id='topic+plotProportionOfPatientsCovered'></span>

<h3>Description</h3>

<p>Plot proportion of patients covered
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotProportionOfPatientsCovered(
  result,
  facet = "cohort_name",
  colour = strataColumns(result),
  ribbon = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotProportionOfPatientsCovered_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="plotProportionOfPatientsCovered_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotProportionOfPatientsCovered_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="plotProportionOfPatientsCovered_+3A_ribbon">ribbon</code></td>
<td>
<p>Whether to plot a ribbon with the confidence intervals.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plot of proportion Of patients covered over time
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "my_cohort",
  conceptSet = list(drug_of_interest = c(1503297, 1503327))
)

result &lt;- cdm$my_cohort |&gt;
  summariseProportionOfPatientsCovered(followUpDays = 365)

plotProportionOfPatientsCovered(result)

CDMConnector::cdmDisconnect(cdm = cdm)


</code></pre>

<hr>
<h2 id='plotTreatment'>Generate a custom ggplot2 from a summarised_result object generated with
summariseTreatment function.</h2><span id='topic+plotTreatment'></span>

<h3>Description</h3>

<p>Generate a custom ggplot2 from a summarised_result object generated with
summariseTreatment function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotTreatment(
  result,
  facet = cdm_name + cohort_name ~ window_name,
  colour = "variable_level"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotTreatment_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="plotTreatment_+3A_facet">facet</code></td>
<td>
<p>Columns to facet by. See options with
<code>availablePlotColumns(result)</code>. Formula is also allowed to specify rows and
columns.</p>
</td></tr>
<tr><td><code id="plotTreatment_+3A_colour">colour</code></td>
<td>
<p>Columns to color by. See options with
<code>availablePlotColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
result &lt;- cdm$cohort1 |&gt;
  summariseTreatment(
    treatmentCohortName = "cohort2",
    window = list(c(0, 30), c(31, 365))
  )

plotTreatment(result)

## End(Not run)

</code></pre>

<hr>
<h2 id='readConceptList'>Get concept ids from a provided path to json files</h2><span id='topic+readConceptList'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readConceptList(path, cdm)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readConceptList_+3A_path">path</code></td>
<td>
<p>path to a file or folder containing jsons to be read</p>
</td></tr>
<tr><td><code id="readConceptList_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created with CDMConnector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of concept_ids and respective concept_ids of interest
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+cohortCount'></span><span id='topic+settings'></span><span id='topic+attrition'></span><span id='topic+cohortCodelist'></span><span id='topic+bind'></span><span id='topic+suppress'></span><span id='topic+exportSummarisedResult'></span><span id='topic+importSummarisedResult'></span><span id='topic+tidy'></span><span id='topic+groupColumns'></span><span id='topic+strataColumns'></span><span id='topic+additionalColumns'></span><span id='topic+settingsColumns'></span><span id='topic+mockDisconnect'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>omopgenerics</dt><dd><p><code><a href="omopgenerics.html#topic+additionalColumns">additionalColumns</a></code>, <code><a href="omopgenerics.html#topic+attrition">attrition</a></code>, <code><a href="omopgenerics.html#topic+bind">bind</a></code>, <code><a href="omopgenerics.html#topic+cohortCodelist">cohortCodelist</a></code>, <code><a href="omopgenerics.html#topic+cohortCount">cohortCount</a></code>, <code><a href="omopgenerics.html#topic+exportSummarisedResult">exportSummarisedResult</a></code>, <code><a href="omopgenerics.html#topic+groupColumns">groupColumns</a></code>, <code><a href="omopgenerics.html#topic+importSummarisedResult">importSummarisedResult</a></code>, <code><a href="omopgenerics.html#topic+settings">settings</a></code>, <code><a href="omopgenerics.html#topic+settingsColumns">settingsColumns</a></code>, <code><a href="omopgenerics.html#topic+strataColumns">strataColumns</a></code>, <code><a href="omopgenerics.html#topic+suppress">suppress</a></code>, <code><a href="omopgenerics.html#topic+reexports">tidy</a></code></p>
</dd>
<dt>PatientProfiles</dt><dd><p><code><a href="PatientProfiles.html#topic+mockDisconnect">mockDisconnect</a></code></p>
</dd>
</dl>

<hr>
<h2 id='requireDrugInDateRange'>Restrict cohort to only cohort records within a certain date range</h2><span id='topic+requireDrugInDateRange'></span>

<h3>Description</h3>

<p>Filter the cohort table keeping only the cohort records for which the
specified index date is within a specified date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>requireDrugInDateRange(
  cohort,
  dateRange,
  indexDate = "cohort_start_date",
  cohortId = NULL,
  name = omopgenerics::tableName(cohort)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="requireDrugInDateRange_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="requireDrugInDateRange_+3A_daterange">dateRange</code></td>
<td>
<p>Date interval to consider. Any records with the index date
outside of this range will be dropped.</p>
</td></tr>
<tr><td><code id="requireDrugInDateRange_+3A_indexdate">indexDate</code></td>
<td>
<p>The column containing the date that will be checked against
the date range.</p>
</td></tr>
<tr><td><code id="requireDrugInDateRange_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="requireDrugInDateRange_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cohort table having applied the date requirement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 &lt;- cdm$cohort1 |&gt;
  requireDrugInDateRange(
    dateRange = as.Date(c("2020-01-01", NA))
  )

attrition(cdm$cohort1) |&gt; glimpse()


</code></pre>

<hr>
<h2 id='requireIsFirstDrugEntry'>Restrict cohort to only the first cohort record per subject</h2><span id='topic+requireIsFirstDrugEntry'></span>

<h3>Description</h3>

<p>Filter the cohort table keeping only the first cohort record per subject.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>requireIsFirstDrugEntry(
  cohort,
  cohortId = NULL,
  name = omopgenerics::tableName(cohort)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="requireIsFirstDrugEntry_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="requireIsFirstDrugEntry_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="requireIsFirstDrugEntry_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cohort table having applied the first entry requirement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 &lt;- cdm$cohort1 |&gt;
  requireIsFirstDrugEntry()

attrition(cdm$cohort1) |&gt; glimpse()


</code></pre>

<hr>
<h2 id='requireObservationBeforeDrug'>Restrict cohort to only cohort records with the given amount of prior
observation time in the database</h2><span id='topic+requireObservationBeforeDrug'></span>

<h3>Description</h3>

<p>Filter the cohort table keeping only the cohort records for which the
individual has the required observation time in the database prior to their
cohort start date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>requireObservationBeforeDrug(
  cohort,
  days,
  cohortId = NULL,
  name = omopgenerics::tableName(cohort)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="requireObservationBeforeDrug_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="requireObservationBeforeDrug_+3A_days">days</code></td>
<td>
<p>Number of days of prior observation required before cohort start
date. Any records with fewer days will be dropped.</p>
</td></tr>
<tr><td><code id="requireObservationBeforeDrug_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="requireObservationBeforeDrug_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cohort table having applied the prior observation requirement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 &lt;- cdm$cohort1 |&gt;
  requireObservationBeforeDrug(days = 365)

attrition(cdm$cohort1) |&gt; glimpse()


</code></pre>

<hr>
<h2 id='requirePriorDrugWashout'>Restrict cohort to only cohort records with a given amount of time since the
last cohort record ended</h2><span id='topic+requirePriorDrugWashout'></span>

<h3>Description</h3>

<p>Filter the cohort table keeping only the cohort records for which the
required amount of time has passed since the last cohort entry ended for that
individual.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>requirePriorDrugWashout(
  cohort,
  days,
  cohortId = NULL,
  name = omopgenerics::tableName(cohort)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="requirePriorDrugWashout_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="requirePriorDrugWashout_+3A_days">days</code></td>
<td>
<p>The number of days required to have passed since the last cohort
record finished. Any records with fewer days than this will be dropped. Note
that setting days to Inf will lead to the same result as that from using the
<code>requireIsFirstDrugEntry</code> function (with only an individual´s first cohort
record kept).</p>
</td></tr>
<tr><td><code id="requirePriorDrugWashout_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="requirePriorDrugWashout_+3A_name">name</code></td>
<td>
<p>Name of the new cohort table, it must be a length 1 character
vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cohort table having applied the washout requirement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm$cohort1 &lt;- cdm$cohort1 |&gt;
  requirePriorDrugWashout(days = 90)

attrition(cdm$cohort1) |&gt; glimpse()


</code></pre>

<hr>
<h2 id='restrictIncidentDoc'>Helper for consistent documentation of <code>restrictIncident</code>.</h2><span id='topic+restrictIncidentDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>restrictIncident</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="restrictIncidentDoc_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
</table>

<hr>
<h2 id='resultDoc'>Helper for consistent documentation of <code>result</code>.</h2><span id='topic+resultDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>result</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resultDoc_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
</table>

<hr>
<h2 id='strataDoc'>Helper for consistent documentation of <code>strata</code>.</h2><span id='topic+strataDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>strata</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strataDoc_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
</table>

<hr>
<h2 id='stratifyByUnit'>Function to stratify a conceptSet by unit</h2><span id='topic+stratifyByUnit'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratifyByUnit(conceptSet, cdm, ingredientConceptId)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stratifyByUnit_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="stratifyByUnit_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="stratifyByUnit_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The conceptSet stratified by unit
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

codelist &lt;- CodelistGenerator::getDrugIngredientCodes(cdm, "acetaminophen")

codelistStratified &lt;- stratifyByUnit(codelist, cdm, 1125315)

codelistStratified


</code></pre>

<hr>
<h2 id='summariseDoseCoverage'>Check coverage of daily dose computation in a sample of the cdm for selected
concept sets and ingredient</h2><span id='topic+summariseDoseCoverage'></span>

<h3>Description</h3>

<p>Check coverage of daily dose computation in a sample of the cdm for selected
concept sets and ingredient
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseDoseCoverage(
  cdm,
  ingredientConceptId,
  estimates = c("count_missing", "percentage_missing", "mean", "sd", "q25", "median",
    "q75"),
  sampleSize = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseDoseCoverage_+3A_cdm">cdm</code></td>
<td>
<p>A <code>cdm_reference</code> object.</p>
</td></tr>
<tr><td><code id="summariseDoseCoverage_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
<tr><td><code id="summariseDoseCoverage_+3A_estimates">estimates</code></td>
<td>
<p>Estimates to obtain.</p>
</td></tr>
<tr><td><code id="summariseDoseCoverage_+3A_samplesize">sampleSize</code></td>
<td>
<p>Maximum number of records of an ingredient to estimate dose
coverage. If an ingredient has more, a random sample equal to <code>sampleSize</code>
will be considered. If NULL, all records will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns information of the coverage of computeDailyDose.R
for the selected ingredients and concept sets
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

summariseDoseCoverage(cdm, 1125315)


</code></pre>

<hr>
<h2 id='summariseDrugRestart'>Summarise the drug restart per window.</h2><span id='topic+summariseDrugRestart'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseDrugRestart(
  cohort,
  cohortId = NULL,
  switchCohortTable,
  switchCohortId = NULL,
  strata = list(),
  followUpDays = Inf,
  censorDate = NULL,
  incident = TRUE,
  restrictToFirstDiscontinuation = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseDrugRestart_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_switchcohorttable">switchCohortTable</code></td>
<td>
<p>A cohort table in the cdm that contains possible
alternative treatments.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_switchcohortid">switchCohortId</code></td>
<td>
<p>The cohort ids to be used from switchCohortTable. If
NULL all cohort definition ids are used.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_followupdays">followUpDays</code></td>
<td>
<p>A vector of number of days to follow up. It can be
multiple values.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_incident">incident</code></td>
<td>
<p>Whether the switch treatment has to be incident (start after
discontinuation) or not (it can start before the discontinuation and last
till after).</p>
</td></tr>
<tr><td><code id="summariseDrugRestart_+3A_restricttofirstdiscontinuation">restrictToFirstDiscontinuation</code></td>
<td>
<p>Whether to consider only the first
discontinuation episode or all of them.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarised_result object with the percentages of restart, switch
and not exposed per window.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

conceptlist &lt;- list("a" = 1125360, "b" = c(1503297, 1503327))
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "switch_cohort",
  conceptSet = conceptlist
)

result &lt;- cdm$cohort1 |&gt;
  summariseDrugRestart(switchCohortTable = "switch_cohort")

tableDrugRestart(result)

CDMConnector::cdmDisconnect(cdm = cdm)

</code></pre>

<hr>
<h2 id='summariseDrugUse'>This function is used to summarise the dose table over multiple cohorts.</h2><span id='topic+summariseDrugUse'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseDrugUse(
  cohort,
  cdm = lifecycle::deprecated(),
  strata = list(),
  estimates = c("min", "q05", "q25", "median", "q75", "q95", "max", "mean", "sd",
    "count_missing", "percentage_missing"),
  minCellCount = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseDrugUse_+3A_cohort">cohort</code></td>
<td>
<p>Cohort with drug use variables and strata.</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_cdm">cdm</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_strata">strata</code></td>
<td>
<p>Stratification list.</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_estimates">estimates</code></td>
<td>
<p>Estimates that we want for the columns.</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of the drug use stratified by cohort_name and strata_name
</p>

<hr>
<h2 id='summariseDrugUtilisation'>This function is used to summarise the dose utilisation table over multiple
cohorts.</h2><span id='topic+summariseDrugUtilisation'></span>

<h3>Description</h3>

<p>This function is used to summarise the dose utilisation table over multiple
cohorts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseDrugUtilisation(
  cohort,
  cohortId = NULL,
  strata = list(),
  estimates = c("q25", "median", "q75", "mean", "sd", "count_missing",
    "percentage_missing"),
  ingredientConceptId = NULL,
  conceptSet = NULL,
  indexDate = "cohort_start_date",
  censorDate = "cohort_end_date",
  restrictIncident = TRUE,
  gapEra = 1,
  numberExposures = TRUE,
  numberEras = TRUE,
  daysExposed = TRUE,
  daysPrescribed = TRUE,
  timeToExposure = TRUE,
  initialExposureDuration = TRUE,
  initialQuantity = TRUE,
  cumulativeQuantity = TRUE,
  initialDailyDose = TRUE,
  cumulativeDose = TRUE,
  exposedTime = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseDrugUtilisation_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_estimates">estimates</code></td>
<td>
<p>Estimates that we want for the columns.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_restrictincident">restrictIncident</code></td>
<td>
<p>Whether to include only incident prescriptions in the
analysis. If FALSE all prescriptions that overlap with the study period will
be included.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_numberexposures">numberExposures</code></td>
<td>
<p>Whether to include 'number_exposures' (number of drug
exposure records between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_numbereras">numberEras</code></td>
<td>
<p>Whether to include 'number_eras' (number of continuous
exposure episodes between indexDate and censorDate).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_daysexposed">daysExposed</code></td>
<td>
<p>Whether to include 'days_exposed' (number of days that the
individual is in a continuous exposure episode, including allowed treatment
gaps, between indexDate and censorDate; sum of the length of the different
drug eras).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_daysprescribed">daysPrescribed</code></td>
<td>
<p>Whether to include 'days_prescribed' (sum of the number
of days for each prescription that contribute in the analysis).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_timetoexposure">timeToExposure</code></td>
<td>
<p>Whether to include 'time_to_exposure' (number of days
between indexDate and the first episode).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_initialexposureduration">initialExposureDuration</code></td>
<td>
<p>Whether to include 'initial_exposure_duration'
(number of prescribed days of the first drug exposure record).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_initialquantity">initialQuantity</code></td>
<td>
<p>Whether to include 'initial_quantity' (quantity of the
first drug exposure record).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_cumulativequantity">cumulativeQuantity</code></td>
<td>
<p>Whether to include 'cumulative_quantity' (sum of
the quantity of the different exposures considered in the analysis).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_initialdailydose">initialDailyDose</code></td>
<td>
<p>Whether to include 'initial_daily_dose_{unit}'
(daily dose of the first considered prescription).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_cumulativedose">cumulativeDose</code></td>
<td>
<p>Whether to include 'cumulative_dose_{unit}' (sum of
the cumulative dose of the analysed drug exposure records).</p>
</td></tr>
<tr><td><code id="summariseDrugUtilisation_+3A_exposedtime">exposedTime</code></td>
<td>
<p>deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of drug utilisation stratified by cohort_name and strata_name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(cdm, "acetaminophen")
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm, "dus_cohort", codelist
)
cdm[["dus_cohort"]] |&gt;
  summariseDrugUtilisation(ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='summariseIndication'>Summarise the indications of individuals in a drug cohort</h2><span id='topic+summariseIndication'></span>

<h3>Description</h3>

<p>Summarise the observed indications of patients in a drug cohort based on
their presence in an indication cohort in a specified time window. If an
individual is not in one of the indication cohorts, they will be considered
to have an unknown indication if they are present in one of the specified
OMOP CDM clinical tables. Otherwise, if they  are neither in an indication
cohort or a clinical table they will be considered as having no observed
indication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseIndication(
  cohort,
  strata = list(),
  indicationCohortName,
  cohortId = NULL,
  indicationCohortId = NULL,
  indicationWindow = list(c(0, 0)),
  unknownIndicationTable = NULL,
  indexDate = "cohort_start_date",
  mutuallyExclusive = TRUE,
  censorDate = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseIndication_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_indicationcohortname">indicationCohortName</code></td>
<td>
<p>Name of the cohort table with potential
indications.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_indicationcohortid">indicationCohortId</code></td>
<td>
<p>The target cohort ID to add indication. If NULL all
cohorts will be considered.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_indicationwindow">indicationWindow</code></td>
<td>
<p>The time window over which to identify indications.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_unknownindicationtable">unknownIndicationTable</code></td>
<td>
<p>Tables in the OMOP CDM to search for unknown
indications.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_mutuallyexclusive">mutuallyExclusive</code></td>
<td>
<p>Whether to report indications as mutually exclusive
or report them as independent results.</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarised result
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CDMConnector)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

indications &lt;- list("headache" = 378253, "asthma" = 317009)
cdm &lt;- generateConceptCohortSet(cdm, indications, "indication_cohorts")

cdm &lt;- generateIngredientCohortSet(
  cdm = cdm, name = "drug_cohort",
  ingredient = "acetaminophen"
)

cdm$drug_cohort |&gt;
  summariseIndication(
    indicationCohortName = "indication_cohorts",
    unknownIndicationTable = "condition_occurrence",
    indicationWindow = list(c(-Inf, 0))
  ) |&gt;
  glimpse()


</code></pre>

<hr>
<h2 id='summariseProportionOfPatientsCovered'>Summarise proportion Of patients covered</h2><span id='topic+summariseProportionOfPatientsCovered'></span>

<h3>Description</h3>

<p>Gives the proportion of patients still in observation who are
in the cohort on any given day following their first cohort entry. This is
known as the “proportion of patients covered” (PPC) method for assessing
treatment persistence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseProportionOfPatientsCovered(
  cohort,
  cohortId = NULL,
  strata = list(),
  followUpDays = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseProportionOfPatientsCovered_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="summariseProportionOfPatientsCovered_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="summariseProportionOfPatientsCovered_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
<tr><td><code id="summariseProportionOfPatientsCovered_+3A_followupdays">followUpDays</code></td>
<td>
<p>Number of days to follow up individuals for. If NULL the
maximum amount of days from an individuals first cohort start date to their
last cohort end date will be used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarised result
</p>

<hr>
<h2 id='summariseTreatment'>This function is used to summarise treatments received</h2><span id='topic+summariseTreatment'></span>

<h3>Description</h3>

<p>This function is used to summarise treatments received
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseTreatment(
  cohort,
  window,
  treatmentCohortName,
  cohortId = NULL,
  treatmentCohortId = NULL,
  strata = list(),
  indexDate = "cohort_start_date",
  censorDate = NULL,
  mutuallyExclusive = FALSE,
  minCellCount = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summariseTreatment_+3A_cohort">cohort</code></td>
<td>
<p>A cohort_table object.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_window">window</code></td>
<td>
<p>Time window over which to summarise the treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_treatmentcohortname">treatmentCohortName</code></td>
<td>
<p>Name of a cohort in the cdm that contains the
treatments of interest.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_cohortid">cohortId</code></td>
<td>
<p>A cohort definition id to restrict by. If NULL, all cohorts
will be included.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_treatmentcohortid">treatmentCohortId</code></td>
<td>
<p>Cohort definition id of interest from
treatmentCohortName.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_strata">strata</code></td>
<td>
<p>A list of variables to stratify results. These variables
must have been added as additional columns in the cohort table.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_indexdate">indexDate</code></td>
<td>
<p>Name of a column that indicates the date to start the
analysis.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_censordate">censorDate</code></td>
<td>
<p>Name of a column that indicates the date to stop the
analysis, if NULL end of individuals observation is used.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_mutuallyexclusive">mutuallyExclusive</code></td>
<td>
<p>Whether to include mutually exclusive treatments or
not.</p>
</td></tr>
<tr><td><code id="summariseTreatment_+3A_mincellcount">minCellCount</code></td>
<td>
<p>defunct.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of treatments stratified by cohort_name and strata_name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
cdm$cohort1 |&gt;
  summariseTreatment(
    treatmentCohortName = "cohort2",
    window = list(c(0, 30), c(31, 365))
  )


</code></pre>

<hr>
<h2 id='tableDoc'>Helper for consistent documentation of <code>table</code>.</h2><span id='topic+tableDoc'></span>

<h3>Description</h3>

<p>Helper for consistent documentation of <code>table</code>.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableDoc_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableDoc_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDoc_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDoc_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='tableDoseCoverage'>Format a dose_coverage object into a visual table.</h2><span id='topic+tableDoseCoverage'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableDoseCoverage(
  result,
  header = c("variable_name", "estimate_name"),
  groupColumn = c("cdm_name", "ingredient_name"),
  type = "gt",
  hide = c("variable_level", "sample_size")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableDoseCoverage_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableDoseCoverage_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDoseCoverage_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDoseCoverage_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableDoseCoverage_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseDrugCoverage() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

result &lt;- summariseDoseCoverage(cdm, 1125315)

tableDoseCoverage(result)


</code></pre>

<hr>
<h2 id='tableDrugRestart'>Format a drug_restart object into a visual table.</h2><span id='topic+tableDrugRestart'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableDrugRestart(
  result,
  header = c("cdm_name", "cohort_name"),
  groupColumn = "variable_name",
  type = "gt",
  hide = c("censor_date", "restrict_to_first_discontinuation", "follow_up_days")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableDrugRestart_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableDrugRestart_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDrugRestart_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDrugRestart_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableDrugRestart_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseDrugRestart() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

conceptlist &lt;- list("a" = 1125360, "b" = c(1503297, 1503327))
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "switch_cohort",
  conceptSet = conceptlist
)

result &lt;- cdm$cohort1 |&gt;
  summariseDrugRestart(switchCohortTable = "switch_cohort")

tableDrugRestart(result)

CDMConnector::cdmDisconnect(cdm = cdm)


</code></pre>

<hr>
<h2 id='tableDrugUtilisation'>Format a drug_utilisation object into a visual table.</h2><span id='topic+tableDrugUtilisation'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableDrugUtilisation(
  result,
  header = c("cdm_name"),
  groupColumn = c("cohort_name", strataColumns(result)),
  type = "gt",
  hide = "variable_level"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableDrugUtilisation_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableDrugUtilisation_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDrugUtilisation_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableDrugUtilisation_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableDrugUtilisation_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseIndication() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

library(DrugUtilisation)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
codelist &lt;- CodelistGenerator::getDrugIngredientCodes(cdm, "acetaminophen")
cdm &lt;- generateDrugUtilisationCohortSet(cdm, "dus_cohort", codelist)

drugUse &lt;- cdm$dus_cohort |&gt;
  summariseDrugUtilisation(ingredientConceptId = 1125315)

tableDrugUtilisation(drugUse)


</code></pre>

<hr>
<h2 id='tableIndication'>Create a table showing indication results</h2><span id='topic+tableIndication'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableIndication(
  result,
  header = c("cdm_name", "cohort_name", strataColumns(result)),
  groupColumn = "variable_name",
  hide = c("window_name", "mutually_exclusive", "unknown_indication_table"),
  type = "gt"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableIndication_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableIndication_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableIndication_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableIndication_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableIndication_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseIndication() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

result &lt;- cdm$cohort1 |&gt;
  summariseIndication(
    indicationCohortName = "cohort2",
    indicationWindow = list(c(-30, 0)),
    unknownIndicationTable = "condition_occurrence"
  )

tableIndication(result)


</code></pre>

<hr>
<h2 id='tableProportionOfPatientsCovered'>Create a table with proportion of patients covered results</h2><span id='topic+tableProportionOfPatientsCovered'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableProportionOfPatientsCovered(
  result,
  header = c("cohort_name", strataColumns(result)),
  groupColumn = "cdm_name",
  type = "gt",
  hide = c("variable_name", "variable_level")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableProportionOfPatientsCovered_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableProportionOfPatientsCovered_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableProportionOfPatientsCovered_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableProportionOfPatientsCovered_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableProportionOfPatientsCovered_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseProportionOfPatientsCovered() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "my_cohort",
  conceptSet = list(drug_of_interest = c(1503297, 1503327))
)

result &lt;- cdm$my_cohort |&gt;
  summariseProportionOfPatientsCovered(followUpDays = 365)

tableProportionOfPatientsCovered(result)

CDMConnector::cdmDisconnect(cdm = cdm)


</code></pre>

<hr>
<h2 id='tableTreatment'>Format a summarised_treatment result into a visual table.</h2><span id='topic+tableTreatment'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableTreatment(
  result,
  header = c("cdm_name", "cohort_name"),
  groupColumn = "variable_name",
  type = "gt",
  hide = c("window_name", "mutually_exclusive")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableTreatment_+3A_result">result</code></td>
<td>
<p>A summarised_result object.</p>
</td></tr>
<tr><td><code id="tableTreatment_+3A_header">header</code></td>
<td>
<p>Columns to use as header. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableTreatment_+3A_groupcolumn">groupColumn</code></td>
<td>
<p>Columns to group by. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
<tr><td><code id="tableTreatment_+3A_type">type</code></td>
<td>
<p>Type of table. Check supported types with
<code>visOmopResults::tableType()</code>.</p>
</td></tr>
<tr><td><code id="tableTreatment_+3A_hide">hide</code></td>
<td>
<p>Columns to hide from the visualisation. See options with
<code>availableTableColumns(result)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a formatted version of summariseTreatment() results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

result &lt;- cdm$cohort1 |&gt;
  summariseTreatment(
    treatmentCohortName = "cohort2",
    window = list(c(0, 30), c(31, 365))
  )

tableTreatment(result)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
