<!DOCTYPE html><html><head><title>Help for package DrugUtilisation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DrugUtilisation}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DrugUtilisation-package'><p>DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#addDailyDose'><p>add daily dose information to a drug_exposure table</p></a></li>
<li><a href='#addDrugUse'><p>Add new columns with drug use related information</p></a></li>
<li><a href='#addIndication'><p>Get indication for a target cohort</p></a></li>
<li><a href='#addRoute'><p>add route column to a table containing drug_exposure information</p></a></li>
<li><a href='#benchmarkDUS'><p>Run benchmark of drug utilisation cohort generation</p></a></li>
<li><a href='#dailyDoseCoverage'><p>Check coverage of daily dose computation in a sample of the cdm for selected</p>
concept sets and ingredient</a></li>
<li><a href='#generateAtcCohortSet'><p>Generates a cohort of the drug use of ATC name(s) of interest.</p></a></li>
<li><a href='#generateDrugUtilisationCohortSet'><p>Generates a cohort of the drug use of a certain list of concepts.</p></a></li>
<li><a href='#generateIngredientCohortSet'><p>Generates a cohort of the drug use of ingredient name(s) of interest.</p></a></li>
<li><a href='#indicationToStrata'><p>Create new variables summarising the data of indication that can be used as</p>
stratification columns</a></li>
<li><a href='#mockDrugUtilisation'><p>It creates a mock database for testing drugutilisation package</p></a></li>
<li><a href='#patternsWithFormula'><p>Patterns valid to compute daily dose with the associated formula.</p></a></li>
<li><a href='#patternTable'><p>Function to create a tibble with the patterns from current drug strength table</p></a></li>
<li><a href='#readConceptList'><p>Get concept ids from a provided path to json files</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#stratifyByUnit'><p>Function to stratify a conceptSet by unit</p></a></li>
<li><a href='#summariseCharacteristicsFromCodelist'><p>Summarise a cohort from multipl codelist and windows</p></a></li>
<li><a href='#summariseDrugUse'><p>This function is used to summarise the dose table over multiple cohorts.</p></a></li>
<li><a href='#summariseIndication'><p>This function is used to summarise the indication table over multiple</p>
cohorts.</a></li>
<li><a href='#summariseTreatmentFromCohort'><p>This function is used to summarise the dose table over multiple cohorts.</p></a></li>
<li><a href='#summariseTreatmentFromConceptSet'><p>This function is used to summarise the dose table over multiple cohorts.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Summarise Patient-Level Drug Utilisation in Data Mapped to the
OMOP Common Data Model</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Summarise patient-level drug utilisation cohorts using data mapped 
    to the Observational Medical Outcomes Partnership (OMOP) common data model. 
    New users and prevalent users cohorts can be generated and their 
    characteristics, indication and drug use summarised.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.1.5), odbc, here, RPostgres, duckdb,
CodelistGenerator, knitr, PaRe, rmarkdown, DT, magick,
DiagrammeRsvg, ggplot2, cowplot, plotly, tibble</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>CDMConnector (&ge; 1.3.0), checkmate, DBI, dbplyr, dplyr, glue,
lubridate, tidyr, rlang, RJSONIO, cli, PatientProfiles (&ge;
0.7.0), magrittr, purrr, tictoc, omopgenerics (&ge; 0.0.2),
visOmopResults, lifecycle</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">https://darwin-eu-dev.github.io/DrugUtilisation/</a></td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-02 17:16:36 UTC; martics</td>
</tr>
<tr>
<td>Author:</td>
<td>Marti Catala <a href="https://orcid.org/0000-0003-3308-9905"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Mike Du <a href="https://orcid.org/0000-0002-9517-8834"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Yuchen Guo <a href="https://orcid.org/0000-0002-0847-4855"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Kim Lopez-Guell <a href="https://orcid.org/0000-0002-8462-8668"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Edward Burn <a href="https://orcid.org/0000-0002-9286-1128"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Xintong Li <a href="https://orcid.org/0000-0002-6872-5804"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Marta Alcalde-Herraiz
    <a href="https://orcid.org/0009-0002-4405-1814"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marti Catala &lt;marti.catalasabate@ndorms.ox.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-02 17:55:00 UTC</td>
</tr>
</table>
<hr>
<h2 id='DrugUtilisation-package'>DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model</h2><span id='topic+DrugUtilisation'></span><span id='topic+DrugUtilisation-package'></span>

<h3>Description</h3>

<p>Summarise patient-level drug utilisation cohorts using data mapped to the Observational Medical Outcomes Partnership (OMOP) common data model. New users and prevalent users cohorts can be generated and their characteristics, indication and drug use summarised.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Marti Catala <a href="mailto:marti.catalasabate@ndorms.ox.ac.uk">marti.catalasabate@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0003-3308-9905">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Mike Du <a href="mailto:mike.du@ndorms.ox.ac.uk">mike.du@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-9517-8834">ORCID</a>)
</p>
</li>
<li><p> Yuchen Guo <a href="mailto:yuchen.guo@ndorms.ox.ac.uk">yuchen.guo@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-0847-4855">ORCID</a>)
</p>
</li>
<li><p> Kim Lopez-Guell <a href="mailto:kim.lopez@spc.ox.ac.uk">kim.lopez@spc.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-8462-8668">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Edward Burn <a href="mailto:edward.burn@ndorms.ox.ac.uk">edward.burn@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-9286-1128">ORCID</a>) [contributor]
</p>
</li>
<li><p> Xintong Li <a href="mailto:xintong.li@ndorms.ox.ac.uk">xintong.li@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-6872-5804">ORCID</a>) [contributor]
</p>
</li>
<li><p> Marta Alcalde-Herraiz <a href="mailto:marta.alcaldeherraiz@ndorms.ox.ac.uk">marta.alcaldeherraiz@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0009-0002-4405-1814">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">https://darwin-eu-dev.github.io/DrugUtilisation/</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='addDailyDose'>add daily dose information to a drug_exposure table</h2><span id='topic+addDailyDose'></span>

<h3>Description</h3>

<p>add daily dose information to a drug_exposure table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDailyDose(
  drugExposure,
  cdm = attr(drugExposure, "cdm_reference"),
  ingredientConceptId
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addDailyDose_+3A_drugexposure">drugExposure</code></td>
<td>
<p>drugExposure it must contain drug_concept_id, quantity,
drug_exposure_start_date and drug_exposure_end_date as columns</p>
</td></tr>
<tr><td><code id="addDailyDose_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference</p>
</td></tr>
<tr><td><code id="addDailyDose_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>ingredientConceptId for which to filter the
drugs of interest</p>
</td></tr>
</table>


<h3>Value</h3>

<p>same input table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm[["drug_exposure"]] %&gt;%
  filter(drug_concept_id == 2905077) %&gt;%
  addDailyDose(ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='addDrugUse'>Add new columns with drug use related information</h2><span id='topic+addDrugUse'></span>

<h3>Description</h3>

<p>Add new columns with drug use related information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDrugUse(
  cohort,
  cdm = lifecycle::deprecated(),
  ingredientConceptId,
  conceptSet = NULL,
  duration = TRUE,
  quantity = TRUE,
  dose = TRUE,
  gapEra = 0,
  eraJoinMode = "zero",
  overlapMode = "sum",
  sameIndexMode = "sum",
  imputeDuration = "none",
  imputeDailyDose = "none",
  durationRange = c(1, Inf),
  dailyDoseRange = c(0, Inf)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addDrugUse_+3A_cohort">cohort</code></td>
<td>
<p>Cohort in the cdm</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_cdm">cdm</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study. It is a compulsory input, no default value is provided.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concepts to be included. If NULL all the
descendants of ingredient concept id will be used.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_duration">duration</code></td>
<td>
<p>Whether to add duration related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_quantity">quantity</code></td>
<td>
<p>Whether to add quantity related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_dose">dose</code></td>
<td>
<p>Whether to add dose related columns.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_erajoinmode">eraJoinMode</code></td>
<td>
<p>How two different continuous exposures are joined in an
era. There are four options:
&quot;zero&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with a daily dose of zero. The
time between both exposures contributes to the total exposed time.
&quot;join&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with a daily dose of zero. The
time between both exposures does not contribute to the total exposed time.
&quot;previous&quot; the exposures are joined considering that the period between both
continuous exposures the subject is treated with the daily dose of the
previous subexposure. The time between both exposures contributes to the
total exposed time.
&quot;subsequent&quot; the exposures are joined considering that the period between
both continuous exposures the subject is treated with the daily dose of the
subsequent subexposure. The time between both exposures contributes to the
total exposed time.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_overlapmode">overlapMode</code></td>
<td>
<p>How the overlapping between two exposures that do not
start on the same day is solved inside a subexposure. There are five possible
options:
&quot;previous&quot; the considered daily_dose is the one of the earliest exposure.
&quot;subsequent&quot; the considered daily_dose is the one of the new exposure that
starts in that subexposure.
&quot;minimum&quot; the considered daily_dose is the minimum of all of the exposures in
the subexposure.
&quot;maximum&quot; the considered daily_dose is the maximum of all of the exposures in
the subexposure.
&quot;sum&quot; the considered daily_dose is the sum of all the exposures present in
the subexposure.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_sameindexmode">sameIndexMode</code></td>
<td>
<p>How the overlapping between two exposures that start on
the same day is solved inside a subexposure. There are three possible options:
&quot;minimum&quot; the considered daily_dose is the minimum of all of the exposures in
the subexposure.
&quot;maximum&quot; the considered daily_dose is the maximum of all of the exposures in
the subexposure.
&quot;sum&quot; the considered daily_dose is the sum of all the exposures present in
the subexposure.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Whether/how the duration should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot; or a number</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_imputedailydose">imputeDailyDose</code></td>
<td>
<p>Whether/how the daily_dose should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot; or a number</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_durationrange">durationRange</code></td>
<td>
<p>Range between the duration must be comprised. It should
be a numeric vector of length two, with no NAs and the first value should be
equal or smaller than the second one. It must not be NULL if imputeDuration
is not &quot;none&quot;. If NULL no restrictions are applied.</p>
</td></tr>
<tr><td><code id="addDrugUse_+3A_dailydoserange">dailyDoseRange</code></td>
<td>
<p>Range between the daily_dose must be comprised. It
should be a numeric vector of length two, with no NAs and the first value
should be equal or smaller than the second one. It must not be NULL if
imputeDailyDose is not &quot;none&quot;. If NULL no restrictions are applied.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same cohort with the added columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm, "dus_cohort", getDrugIngredientCodes(cdm, name = "acetaminophen")
)
cdm[["dus_cohort"]] %&gt;%
  addDrugUse(cdm, ingredientConceptId = 1125315)


</code></pre>

<hr>
<h2 id='addIndication'>Get indication for a target cohort</h2><span id='topic+addIndication'></span>

<h3>Description</h3>

<p>Get indication for a target cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addIndication(
  x,
  cdm = lifecycle::deprecated(),
  indicationCohortName,
  indicationGap = 0,
  unknownIndicationTable = NULL,
  indicationDate = "cohort_start_date"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addIndication_+3A_x">x</code></td>
<td>
<p>Table in the cdm</p>
</td></tr>
<tr><td><code id="addIndication_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created using CDMConnector</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationcohortname">indicationCohortName</code></td>
<td>
<p>Name of indication cohort table</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationgap">indicationGap</code></td>
<td>
<p>Gap between the event and the indication</p>
</td></tr>
<tr><td><code id="addIndication_+3A_unknownindicationtable">unknownIndicationTable</code></td>
<td>
<p>Tables to search unknown indications</p>
</td></tr>
<tr><td><code id="addIndication_+3A_indicationdate">indicationDate</code></td>
<td>
<p>Date of the indication</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same cohort adding the indications
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()

indications &lt;- list("headache" = 378253, "asthma" = 317009)
cdm &lt;- generateConceptCohortSet(
  cdm, indications, "indication_cohorts"
)

acetaminophen &lt;- getDrugIngredientCodes(cdm, "acetaminophen")
cdm &lt;- generateDrugUtilisationCohortSet(cdm, "drug_cohort", acetaminophen)

cdm[["drug_cohort"]] %&gt;%
  addIndication(cdm, "indication_cohorts", indicationGap = c(0, 30, 365))


</code></pre>

<hr>
<h2 id='addRoute'>add route column to a table containing drug_exposure information</h2><span id='topic+addRoute'></span>

<h3>Description</h3>

<p>add route column to a table containing drug_exposure information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRoute(drugTable, cdm = attr(drugTable, "cdm_reference"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRoute_+3A_drugtable">drugTable</code></td>
<td>
<p>Table in the cdm that must contain drug_concept_id</p>
</td></tr>
<tr><td><code id="addRoute_+3A_cdm">cdm</code></td>
<td>
<p>'cdm' object created with CDMConnector::cdm_from_con(). It must
must contain 'concept_relationship' table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It adds route to the current table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(dplyr)

cdm &lt;- mockDrugUtilisation()

cdm[["drug_exposure"]] %&gt;%
  addRoute()


</code></pre>

<hr>
<h2 id='benchmarkDUS'>Run benchmark of drug utilisation cohort generation</h2><span id='topic+benchmarkDUS'></span>

<h3>Description</h3>

<p>Run benchmark of drug utilisation cohort generation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>benchmarkDUS(
  cdm,
  numberOfCohort = 1:4,
  indicationCohortName = "cohort1",
  ingredientId = 1125315,
  drugExposureName = "drug_exposure"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="benchmarkDUS_+3A_cdm">cdm</code></td>
<td>
<p>A CDM reference object</p>
</td></tr>
<tr><td><code id="benchmarkDUS_+3A_numberofcohort">numberOfCohort</code></td>
<td>
<p>Number of cohort to generate for benchmarking. An integer or a vector of integers</p>
</td></tr>
<tr><td><code id="benchmarkDUS_+3A_indicationcohortname">indicationCohortName</code></td>
<td>
<p>Name of indication cohort table</p>
</td></tr>
<tr><td><code id="benchmarkDUS_+3A_ingredientid">ingredientId</code></td>
<td>
<p>Ingredient OMOP concept that we are interested for
the study. It is a compulsory input, no default value is provided.</p>
</td></tr>
<tr><td><code id="benchmarkDUS_+3A_drugexposurename">drugExposureName</code></td>
<td>
<p>Name of drug_exposure table in cdm, the table must contain drug_concept_id, quantity,
drug_exposure_start_date and drug_exposure_end_date as columns</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with time taken for different analyses
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cdm &lt;- DrugUtilisation::mockDrugUtilisation()
timings &lt;- DrugUtilisation::benchmarkDUS(cdm)

</code></pre>

<hr>
<h2 id='dailyDoseCoverage'>Check coverage of daily dose computation in a sample of the cdm for selected
concept sets and ingredient</h2><span id='topic+dailyDoseCoverage'></span>

<h3>Description</h3>

<p>Check coverage of daily dose computation in a sample of the cdm for selected
concept sets and ingredient
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dailyDoseCoverage(cdm, ingredientConceptId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dailyDoseCoverage_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created using CDMConnector</p>
</td></tr>
<tr><td><code id="dailyDoseCoverage_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>Code indicating the ingredient of interest</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns information of the coverage of computeDailyDose.R
for the selected ingredients and concept sets
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

dailyDoseCoverage(cdm, 1125315)


</code></pre>

<hr>
<h2 id='generateAtcCohortSet'>Generates a cohort of the drug use of ATC name(s) of interest.</h2><span id='topic+generateAtcCohortSet'></span>

<h3>Description</h3>

<p>Generates a cohort of the drug use of ATC name(s) of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateAtcCohortSet(
  cdm,
  name,
  atcName = NULL,
  durationRange = c(1, Inf),
  imputeDuration = "none",
  gapEra = 0,
  priorUseWashout = 0,
  priorObservation = 0,
  cohortDateRange = as.Date(c(NA, NA)),
  limit = "all",
  level = c("ATC 1st"),
  doseForm = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateAtcCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A cdm_reference object.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the GeneratedCohortSet</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_atcname">atcName</code></td>
<td>
<p>Names of ATC of interest.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Range between the duration must be comprised. It should
be a numeric vector of length two, with no NAs and the first value should be
equal or smaller than the second one. It is only required if imputeDuration
= TRUE. If NULL no restrictions are applied.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Whether/how the duration should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot;, or it can be a count</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Prior days without exposure.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Minimum number of days of prior observation
required for the incident eras to be considered.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Range for cohort_start_date and cohort_end_date</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_limit">limit</code></td>
<td>
<p>Choice on how to summarise the exposures. There are
two options:
&quot;all&quot; we summarise the output will be a summary of the exposed eras of
each individual. Each individual can contribute multiple times.
&quot;first&quot; we only consider the first observable era of each individual that fulfills the criteria provided
in previous parameters. In this case each individual can not contribute with multiple rows.</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_level">level</code></td>
<td>
<p>ATC level. Can be one or more of &quot;ATC 1st&quot;, &quot;ATC 2nd&quot;,
&quot;ATC 3rd&quot;, &quot;ATC 4th&quot;, and &quot;ATC 5th&quot;</p>
</td></tr>
<tr><td><code id="generateAtcCohortSet_+3A_doseform">doseForm</code></td>
<td>
<p>Only descendants codes with the specified dose form
will be returned. If NULL, descendant codes will be returned regardless
of dose form.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the 'cdm' object with the created cohorts as
references of the object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
cdm &lt;- mockDrugUtilisation()
cdm &lt;- generateAtcCohortSet(cdm, name =  "test")
cdm
cdm$test
settings(cdm$test)

</code></pre>

<hr>
<h2 id='generateDrugUtilisationCohortSet'>Generates a cohort of the drug use of a certain list of concepts.</h2><span id='topic+generateDrugUtilisationCohortSet'></span>

<h3>Description</h3>

<p>Generates a cohort of the drug use of a certain list of concepts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateDrugUtilisationCohortSet(
  cdm,
  name,
  conceptSet,
  durationRange = c(1, Inf),
  imputeDuration = "none",
  gapEra = 0,
  priorUseWashout = 0,
  priorObservation = 0,
  cohortDateRange = as.Date(c(NA, NA)),
  limit = "all"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A cdm_reference object.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the GeneratedCohortSet</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_conceptset">conceptSet</code></td>
<td>
<p>Named list of concept sets.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Range between the duration must be comprised. It should
be a numeric vector of length two, with no NAs and the first value should be
equal or smaller than the second one. It is only required if imputeDuration
= TRUE. If NULL no restrictions are applied.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Whether/how the duration should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot;, or it can be a count</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Prior days without exposure.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Minimum number of days of prior observation
required for the incident eras to be considered.</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Range for cohort_start_date and cohort_end_date</p>
</td></tr>
<tr><td><code id="generateDrugUtilisationCohortSet_+3A_limit">limit</code></td>
<td>
<p>Choice on how to summarise the exposures. There are
two options:
&quot;all&quot; we summarise the output will be a summary of the exposed eras of
each individual. Each individual can contribute multiple times.
&quot;first&quot; we only consider the first observable era of each individual that fulfills the criteria provided
in previous parameters. In this case each individual can not contribute with multiple rows.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the 'cdm' object with the created tables as
references of the object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(CodelistGenerator)
library(CDMConnector)
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

druglist &lt;- getDrugIngredientCodes(cdm, c("acetaminophen", "metformin"))

cdm &lt;- generateDrugUtilisationCohortSet(
  cdm = cdm,
  name = "drug_cohorts",
  conceptSet = druglist,
  priorObservation = 365
)

cdm[["drug_cohorts"]]

settings(cdm[["drug_cohorts"]])

cohortCount(cdm[["drug_cohorts"]])

attrition(cdm[["drug_cohorts"]])


</code></pre>

<hr>
<h2 id='generateIngredientCohortSet'>Generates a cohort of the drug use of ingredient name(s) of interest.</h2><span id='topic+generateIngredientCohortSet'></span>

<h3>Description</h3>

<p>Generates a cohort of the drug use of ingredient name(s) of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateIngredientCohortSet(
  cdm,
  name,
  ingredient = NULL,
  durationRange = c(1, Inf),
  imputeDuration = "none",
  gapEra = 0,
  priorUseWashout = 0,
  priorObservation = 0,
  cohortDateRange = as.Date(c(NA, NA)),
  limit = "all",
  doseForm = NULL,
  ingredientRange = c(1, Inf)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateIngredientCohortSet_+3A_cdm">cdm</code></td>
<td>
<p>A cdm_reference object.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_name">name</code></td>
<td>
<p>Name of the GeneratedCohortSet</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_ingredient">ingredient</code></td>
<td>
<p>Accepts both vectors and named lists of ingredient names.
For a vector input, e.g., c(&quot;acetaminophen&quot;, &quot;codeine&quot;), it generates a
cohort table with descendant concept codes for each ingredient, assigning
unique cohort_definition_id. For a named list input, e.g., list(
&quot;test_1&quot; = c(&quot;simvastatin&quot;, &quot;acetaminophen&quot;), &quot;test_2&quot; = &quot;metformin&quot;),
it produces a cohort table based on the structure of the input, where
each name leads to a combined set of descendant concept codes for the
specified ingredients, creating distinct cohort_definition_id for each
named group.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_durationrange">durationRange</code></td>
<td>
<p>Range between the duration must be comprised. It should
be a numeric vector of length two, with no NAs and the first value should be
equal or smaller than the second one. It is only required if imputeDuration
= TRUE. If NULL no restrictions are applied.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_imputeduration">imputeDuration</code></td>
<td>
<p>Whether/how the duration should be imputed
&quot;none&quot;, &quot;median&quot;, &quot;mean&quot;, &quot;mode&quot;, or it can be a count</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_gapera">gapEra</code></td>
<td>
<p>Number of days between two continuous exposures to be
considered in the same era.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_priorusewashout">priorUseWashout</code></td>
<td>
<p>Prior days without exposure.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_priorobservation">priorObservation</code></td>
<td>
<p>Minimum number of days of prior observation
required for the incident eras to be considered.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_cohortdaterange">cohortDateRange</code></td>
<td>
<p>Range for cohort_start_date and cohort_end_date</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_limit">limit</code></td>
<td>
<p>Choice on how to summarise the exposures. There are
two options:
&quot;all&quot; we summarise the output will be a summary of the exposed eras of
each individual. Each individual can contribute multiple times.
&quot;first&quot; we only consider the first observable era of each individual that fulfills the criteria provided
in previous parameters. In this case each individual can not contribute with multiple rows.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_doseform">doseForm</code></td>
<td>
<p>Only descendants codes with the specified dose form
will be returned. If NULL, descendant codes will be returned regardless
of dose form.</p>
</td></tr>
<tr><td><code id="generateIngredientCohortSet_+3A_ingredientrange">ingredientRange</code></td>
<td>
<p>Used to restrict descendant codes to those
associated with a specific number of ingredients. Must be a vector of length
two with the first element the minimum number of ingredients allowed and
the second the maximum. A value of c(2, 2) would restrict to only concepts
associated with two ingredients.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the 'cdm' object with the created cohorts as
references of the object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
cdm &lt;- mockDrugUtilisation()
cdm &lt;- generateIngredientCohortSet(
  cdm = cdm,
  ingredient = "acetaminophen",
  name = "test"
)
cdm


</code></pre>

<hr>
<h2 id='indicationToStrata'>Create new variables summarising the data of indication that can be used as
stratification columns</h2><span id='topic+indicationToStrata'></span>

<h3>Description</h3>

<p>Create new variables summarising the data of indication that can be used as
stratification columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>indicationToStrata(
  cohort,
  indicationVariables = indicationColumns(cohort),
  keep = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="indicationToStrata_+3A_cohort">cohort</code></td>
<td>
<p>A cohort in the cdm</p>
</td></tr>
<tr><td><code id="indicationToStrata_+3A_indicationvariables">indicationVariables</code></td>
<td>
<p>Indication variables that we want to join</p>
</td></tr>
<tr><td><code id="indicationToStrata_+3A_keep">keep</code></td>
<td>
<p>Whether to keep the prior indication variables or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>description The cohort with the new variable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()
cdm[["cohort1"]] &lt;- cdm[["cohort1"]] %&gt;%
  addIndication(cdm, "cohort2") %&gt;%
  indicationToStrata()


</code></pre>

<hr>
<h2 id='mockDrugUtilisation'>It creates a mock database for testing drugutilisation package</h2><span id='topic+mockDrugUtilisation'></span>

<h3>Description</h3>

<p>It creates a mock database for testing drugutilisation package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mockDrugUtilisation(
  connectionDetails = list(con = DBI::dbConnect(duckdb::duckdb(), ":memory:"),
    writeSchema = "main"),
  numberIndividuals = 10,
  seed = 1,
  concept = NULL,
  concept_ancestor = NULL,
  drug_strength = NULL,
  person = NULL,
  observation_period = NULL,
  drug_exposure = NULL,
  condition_occurrence = NULL,
  observation = NULL,
  concept_relationship = NULL,
  extraTables = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mockDrugUtilisation_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>Details of the connection</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_numberindividuals">numberIndividuals</code></td>
<td>
<p>Number of individuals in the mock cdm</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_seed">seed</code></td>
<td>
<p>Seed for the random numbers</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_concept">concept</code></td>
<td>
<p>A concept tibble, if NULL a mock one is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_concept_ancestor">concept_ancestor</code></td>
<td>
<p>A concept_ancestor tibble, if NULL a mock one is
created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_drug_strength">drug_strength</code></td>
<td>
<p>A drug_strength tibble, if NULL a mock one is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_person">person</code></td>
<td>
<p>A person tibble, if NULL a mock one is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_observation_period">observation_period</code></td>
<td>
<p>A observation_period tibble, if NULL a mock one is
created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_drug_exposure">drug_exposure</code></td>
<td>
<p>A drug_exposure tibble, if NULL a mock one is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_condition_occurrence">condition_occurrence</code></td>
<td>
<p>A condition_occurrence tibble, if NULL a mock one
is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_observation">observation</code></td>
<td>
<p>A observation tibble, if NULL a mock one is created</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_concept_relationship">concept_relationship</code></td>
<td>
<p>A concept_relationship tibble, if NULL a mock one
is created.</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_extratables">extraTables</code></td>
<td>
<p>Extra tibbles to be instantiated that are not cohorts or
cdm tables</p>
</td></tr>
<tr><td><code id="mockDrugUtilisation_+3A_...">...</code></td>
<td>
<p>Cohorts can be added to the cdm reference, cohort1 and cohort2
will be created if not provided</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A cdm reference with the mock tables
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

cdm


</code></pre>

<hr>
<h2 id='patternsWithFormula'>Patterns valid to compute daily dose with the associated formula.</h2><span id='topic+patternsWithFormula'></span>

<h3>Description</h3>

<p>Patterns valid to compute daily dose with the associated formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patternsWithFormula
</code></pre>


<h3>Format</h3>

<p>A data frame with eight variables: <code>pattern_id</code>, <code>amount</code>,
<code>amount_unit</code>, <code>numerator</code>, <code>numerator_unit</code>,
<code>denominator</code>, <code>denominator_unit</code>, <code>formula_name</code> and
<code>formula</code>.
</p>

<hr>
<h2 id='patternTable'>Function to create a tibble with the patterns from current drug strength table</h2><span id='topic+patternTable'></span>

<h3>Description</h3>

<p>Function to create a tibble with the patterns from current drug strength table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patternTable(cdm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="patternTable_+3A_cdm">cdm</code></td>
<td>
<p>'cdm' object created with CDMConnector::cdm_from_con(). It must
must contain 'drug_strength' and 'concept' tables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function creates a tibble with the different patterns found in
the table, plus a column of potentially valid and invalid combinations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

patternTable(cdm)


</code></pre>

<hr>
<h2 id='readConceptList'>Get concept ids from a provided path to json files</h2><span id='topic+readConceptList'></span>

<h3>Description</h3>

<p>Get concept ids from a provided path to json files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readConceptList(path, cdm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readConceptList_+3A_path">path</code></td>
<td>
<p>path to a file or folder containing jsons to be read</p>
</td></tr>
<tr><td><code id="readConceptList_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created with CDMConnector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of concept_ids and respective concept_ids of interest
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)

cdm &lt;- mockDrugUtilisation()

codelist &lt;- readConceptList(
  path = system.file("concepts",package="DrugUtilisation"), cdm = cdm
)


</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+generateConceptCohortSet'></span><span id='topic+cohortCount'></span><span id='topic+settings'></span><span id='topic+attrition'></span><span id='topic+summariseCharacteristics'></span><span id='topic+summariseLargeScaleCharacteristics'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>CDMConnector</dt><dd><p><code><a href="CDMConnector.html#topic+generateConceptCohortSet">generateConceptCohortSet</a></code></p>
</dd>
<dt>omopgenerics</dt><dd><p><code><a href="omopgenerics.html#topic+attrition">attrition</a></code>, <code><a href="omopgenerics.html#topic+cohortCount">cohortCount</a></code>, <code><a href="omopgenerics.html#topic+settings">settings</a></code></p>
</dd>
<dt>PatientProfiles</dt><dd><p><code><a href="PatientProfiles.html#topic+summariseCharacteristics">summariseCharacteristics</a></code>, <code><a href="PatientProfiles.html#topic+summariseLargeScaleCharacteristics">summariseLargeScaleCharacteristics</a></code></p>
</dd>
</dl>

<hr>
<h2 id='stratifyByUnit'>Function to stratify a conceptSet by unit</h2><span id='topic+stratifyByUnit'></span>

<h3>Description</h3>

<p>Function to stratify a conceptSet by unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratifyByUnit(conceptSet, cdm, ingredientConceptId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stratifyByUnit_+3A_conceptset">conceptSet</code></td>
<td>
<p>List of concept sets</p>
</td></tr>
<tr><td><code id="stratifyByUnit_+3A_cdm">cdm</code></td>
<td>
<p>cdm reference</p>
</td></tr>
<tr><td><code id="stratifyByUnit_+3A_ingredientconceptid">ingredientConceptId</code></td>
<td>
<p>ConceptId that refers to an ingredient</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The conceptSet stratified by unit
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()

codelist &lt;- getDrugIngredientCodes(cdm, "acetaminophen")

codelistStratified &lt;- stratifyByUnit(codelist, cdm, 1125315)

codelistStratified


</code></pre>

<hr>
<h2 id='summariseCharacteristicsFromCodelist'>Summarise a cohort from multipl codelist and windows</h2><span id='topic+summariseCharacteristicsFromCodelist'></span>

<h3>Description</h3>

<p>Summarise a cohort from multipl codelist and windows
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseCharacteristicsFromCodelist(
  cohort,
  cdm = lifecycle::deprecated(),
  conceptSet,
  strata = list(),
  window = list(c(-Inf, -366), c(-365, -31), c(-30, -1), c(0, 0), c(1, 30), c(31, 365),
    c(366, Inf)),
  overlap = TRUE,
  minCellCount = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_cohort">cohort</code></td>
<td>
<p>Cohort to summarise</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_conceptset">conceptSet</code></td>
<td>
<p>A list of concept sets</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_strata">strata</code></td>
<td>
<p>Stratification list</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_window">window</code></td>
<td>
<p>Windows to characterize</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_overlap">overlap</code></td>
<td>
<p>Whether we consider episodes (overlap = TRUE) or incident
(overlap = FALSE)</p>
</td></tr>
<tr><td><code id="summariseCharacteristicsFromCodelist_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Minimum cell counts</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SummarisedResults object that contains the characterization
</p>

<hr>
<h2 id='summariseDrugUse'>This function is used to summarise the dose table over multiple cohorts.</h2><span id='topic+summariseDrugUse'></span>

<h3>Description</h3>

<p>This function is used to summarise the dose table over multiple cohorts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseDrugUse(
  cohort,
  cdm = lifecycle::deprecated(),
  strata = list(),
  drugUseEstimates = c("min", "q05", "q25", "median", "q75", "q95", "max", "mean", "sd",
    "missing"),
  minCellCount = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseDrugUse_+3A_cohort">cohort</code></td>
<td>
<p>Cohort with drug use variables and strata</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference generated by CDMConnector</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_strata">strata</code></td>
<td>
<p>Stratification list</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_druguseestimates">drugUseEstimates</code></td>
<td>
<p>Estimates that we want for the columns</p>
</td></tr>
<tr><td><code id="summariseDrugUse_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Below this number counts will be supressed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of the drug use stratified by cohort_name and strata_name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(PatientProfiles)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm, "dus_cohort", getDrugIngredientCodes(cdm, "acetaminophen")
)
cdm[["dus_cohort"]] &lt;- cdm[["dus_cohort"]] %&gt;%
  addDrugUse(cdm, 1125315)
result &lt;- summariseDrugUse(cdm[["dus_cohort"]], cdm)
print(result)

cdm[["dus_cohort"]] &lt;- cdm[["dus_cohort"]] %&gt;%
  addSex(cdm) %&gt;%
  addAge(cdm, ageGroup = list("&lt;40" = c(0, 30), "&gt;40" = c(40, 150)))

summariseDrugUse(
  cdm[["dus_cohort"]], cdm, strata = list(
   "age_group" = "age_group", "sex" = "sex",
   "age_group and sex" = c("age_group", "sex")
  )
)


</code></pre>

<hr>
<h2 id='summariseIndication'>This function is used to summarise the indication table over multiple
cohorts.</h2><span id='topic+summariseIndication'></span>

<h3>Description</h3>

<p>This function is used to summarise the indication table over multiple
cohorts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseIndication(
  cohort,
  cdm = lifecycle::deprecated(),
  strata = list(),
  minCellCount = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseIndication_+3A_cohort">cohort</code></td>
<td>
<p>Cohort with indications and strata</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference created by CDMConnector</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_strata">strata</code></td>
<td>
<p>Stratification list</p>
</td></tr>
<tr><td><code id="summariseIndication_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Minimum counts that a group can have. Cohorts with
less counts than this value are obscured.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Tibble with 4 columns: cohort_definition_id, variable, estimate and
value. There will be one row for each cohort, variable and cohort
combination.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(PatientProfiles)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
indications &lt;- list("headache" = 378253, "asthma" = 317009)
cdm &lt;- generateConceptCohortSet(cdm, indications, "indication_cohorts")
acetaminophen &lt;- getDrugIngredientCodes(cdm, "acetaminophen")
cdm &lt;- generateDrugUtilisationCohortSet(cdm, "drug_cohort", acetaminophen)
cdm[["drug_cohort"]] &lt;- cdm[["drug_cohort"]] %&gt;%
  addIndication(cdm, "indication_cohorts", indicationGap = c(0, 30, 365))

summariseIndication(cdm[["drug_cohort"]], cdm)

cdm[["drug_cohort"]] &lt;- cdm[["drug_cohort"]] %&gt;%
  addAge(cdm, ageGroup = list("&lt;40" = c(0, 39), "&gt;=40" = c(40, 150))) %&gt;%
  addSex(cdm)

summariseIndication(
  cdm[["drug_cohort"]], cdm, strata = list(
    "age_group" = "age_group", "age_group and sex" = c("age_group", "sex")
  )
)


</code></pre>

<hr>
<h2 id='summariseTreatmentFromCohort'>This function is used to summarise the dose table over multiple cohorts.</h2><span id='topic+summariseTreatmentFromCohort'></span>

<h3>Description</h3>

<p>This function is used to summarise the dose table over multiple cohorts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseTreatmentFromCohort(
  cohort,
  strata = list(),
  window,
  treatmentCohortName,
  treatmentCohortId = NULL,
  combination = FALSE,
  minCellCount = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseTreatmentFromCohort_+3A_cohort">cohort</code></td>
<td>
<p>Cohort with drug use variables and strata.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_strata">strata</code></td>
<td>
<p>Stratification list.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_window">window</code></td>
<td>
<p>Window where to summarise the treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_treatmentcohortname">treatmentCohortName</code></td>
<td>
<p>Name of a cohort in the cdm that contains the
interest treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_treatmentcohortid">treatmentCohortId</code></td>
<td>
<p>Cohort definition id of interest from
treatmentCohortName.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_combination">combination</code></td>
<td>
<p>Whether to include combination treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromCohort_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Below this number counts will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of the drug use stratified by cohort_name and strata_name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(DrugUtilisation)
library(PatientProfiles)
library(CodelistGenerator)

cdm &lt;- mockDrugUtilisation()
cdm &lt;- generateDrugUtilisationCohortSet(
  cdm, "dus_cohort", getDrugIngredientCodes(cdm, "acetaminophen")
)
cdm[["dus_cohort"]] &lt;- cdm[["dus_cohort"]] %&gt;%
  addDrugUse(cdm, 1125315)
result &lt;- summariseDrugUse(cdm[["dus_cohort"]], cdm)
print(result)

cdm[["dus_cohort"]] &lt;- cdm[["dus_cohort"]] %&gt;%
  addSex(cdm) %&gt;%
  addAge(cdm, ageGroup = list("&lt;40" = c(0, 30), "&gt;40" = c(40, 150)))

summariseDrugUse(
  cdm[["dus_cohort"]], cdm, strata = list(
   "age_group" = "age_group", "sex" = "sex",
   "age_group and sex" = c("age_group", "sex")
  )
)


</code></pre>

<hr>
<h2 id='summariseTreatmentFromConceptSet'>This function is used to summarise the dose table over multiple cohorts.</h2><span id='topic+summariseTreatmentFromConceptSet'></span>

<h3>Description</h3>

<p>This function is used to summarise the dose table over multiple cohorts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseTreatmentFromConceptSet(
  cohort,
  strata = list(),
  window,
  treatmentConceptSet,
  combination = FALSE,
  minCellCount = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_cohort">cohort</code></td>
<td>
<p>Cohort with drug use variables and strata.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_strata">strata</code></td>
<td>
<p>Stratification list.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_window">window</code></td>
<td>
<p>Window where to summarise the treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_treatmentconceptset">treatmentConceptSet</code></td>
<td>
<p>Concept set list to summarise.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_combination">combination</code></td>
<td>
<p>Whether to include combination treatments.</p>
</td></tr>
<tr><td><code id="summariseTreatmentFromConceptSet_+3A_mincellcount">minCellCount</code></td>
<td>
<p>Below this number counts will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of the drug use stratified by cohort_name and strata_name
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
