<!DOCTYPE html><html><head><title>Help for package xplain</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {xplain}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#xplain-package'>
<p>xplain Package</p></a></li>
<li><a href='#xplain'>
<p>Showing interpretation information for the results of a function</p></a></li>
<li><a href='#xplain.getcall'>
<p>Generating function calls for xplain wrapper functions</p></a></li>
<li><a href='#xplain.overview'>
<p>Summarizing the content of xplain XML files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Providing Interactive Interpretations and Explanations of
Statistical Results</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joachim Zuckarelli &lt;joachim@zuckarelli.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows to provide live interpretations and explanations of statistical 
    functions in R. These interpretations and explanations are shown when the explained function 
    is called by the user. They can interact with the values of the explained function's actual 
    results to offer relevant, meaningful insights. The 'xplain' interpretations and explanations 
    are based on an easy-to-use XML format that allows to include R code to interact with the 
    returns of the explained function.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>car, methods</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jsugarelli/xplain/issues">https://github.com/jsugarelli/xplain/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jsugarelli/xplain/">https://github.com/jsugarelli/xplain/</a>,
<a href="https://www.zuckarelli.de/xplain/index.html">https://www.zuckarelli.de/xplain/index.html</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>XML, readr, RCurl, httr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-07-30 10:41:37 UTC; Jozu01</td>
</tr>
<tr>
<td>Author:</td>
<td>Joachim Zuckarelli
    <a href="https://orcid.org/0000-0002-9280-3016"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-07-30 11:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='xplain-package'>
xplain Package
</h2><span id='topic+xplain-package'></span>

<h3>Description</h3>

<p>This package allows to provide live interpretations and explanations of statistical functions in R. These interpretations and explanations are shown when the explained function is called by the user. They can interact with the values of the explained function's actual results to offer relevant, meaningful insights. The xplain interpretations and explanations are based on an easy-to-use XML format that allows to include R code to interact with the returns of the explained function.
</p>


<h3>Ressources on the internet</h3>

<p>Web tutorial on how to work with xplain: <a href="https://www.zuckarelli.de/xplain/index.html">https://www.zuckarelli.de/xplain/index.html</a><br />
xplain cheat sheet: <a href="https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf">https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf</a><br />
xplain on GitHub: <a href="https://www.github.com/jsugarelli/xplain">https://www.github.com/jsugarelli/xplain</a>
</p>


<h3>Comments and suggestions</h3>

<p>Your comments and suggestions are highly appreciated.
</p>


<h3>Author(s)</h3>

<p>Author and maintainer: Joachim Zuckarelli, <a href="mailto:joachim@zuckarelli.de">joachim@zuckarelli.de</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xplain">xplain</a></code>, <code><a href="#topic+xplain.overview">xplain.overview</a></code>, <code><a href="#topic+xplain.getcall">xplain.getcall</a></code>
</p>

<hr>
<h2 id='xplain'>
Showing interpretation information for the results of a function
</h2><span id='topic+xplain'></span>

<h3>Description</h3>

<p>Interprets/explains the results of a function call. Main function of the <span class="pkg">xplain</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xplain(call, xml="", lang = "", level = -1, filename="", sep="\n", title.char="-",
    before=TRUE, addfun="", addfun.args="", addfun.title="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xplain_+3A_call">call</code></td>
<td>

<p>Function call (as string) to be explained/interpreted.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_xml">xml</code></td>
<td>

<p>Path to the xplain XML file containing the interpretation/explanation information (optional). Can be either a local path or an URL. See below for more details on how <code>xplain()</code> tries to find xplain XML files if no file is specified with <code>xml</code>.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_lang">lang</code></td>
<td>

<p>ISO country code of the language of the interpretations/explanations that shall be shown (optional). If none is specified, <code>xplain()</code> tries to determine the language of the user's current work environment. If that is not possible then English is taken as defualt value (same effect as <code>lang="EN"</code>).
</p>
</td></tr>
<tr><td><code id="xplain_+3A_level">level</code></td>
<td>

<p>Integer number indicating the complexity level of the interpretations/explanations that shall be shown (optional). <code>level</code> is cumulative: All interpretations/explanations with a level number up to the number provided are shown. Default: -1, i.e. all interpretations/explanations are shown.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_filename">filename</code></td>
<td>

<p>File to write the <code>xplain()</code> output to (optional). If no file name is provided the <code>xplain()</code> output is shown in the console.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_sep">sep</code></td>
<td>

<p>Separator used to separate the outputs from consecutive XML text elements (&lt;text&gt;...&lt;/text&gt;) (optional). Default: <code>"\n"</code>.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_title.char">title.char</code></td>
<td>

<p>Character used for underlining titles (optional). Default: <code>"-"</code>.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_before">before</code></td>
<td>

<p>Indicates if the results of the call of the explained function shall be shown before the xplain interpretations/explanations, or after (optional). Default: <code>TRUE</code>, i.e. function output is shown before the interpretations/explanations.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_addfun">addfun</code></td>
<td>

<p>Vector of names of additional functions that shall be called (e.g. <code>summary()</code>), without brackets (optional). It is assumed that these functions take the return object of the explained function as their first argument. Further arguments can be specified with <code>addfun.args</code>. Results of the additional functions are shown right after the output of the explained function.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_addfun.args">addfun.args</code></td>
<td>

<p>Vector of arguments (apart from the return object of the explained function) for the additional functions (optional).
Example: <code>addfun.args = "trim = 0, na.rm = FALSE"</code>. Argument must be of the same length as <code>addfun</code>; <code>addfun.args</code> must be <code>""</code> (empty string) if the respective additional function does not take any additional arguments.
</p>
</td></tr>
<tr><td><code id="xplain_+3A_addfun.title">addfun.title</code></td>
<td>

<p>Vector of titles that will be shown as headers to the outputs of the addional functions (optional). Argument must be of the same length as <code>addfun</code>; <code>addfun.args</code> must be <code>""</code> (empty string) if the respective the output of the additional function shall have no title.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>xplain</code> interprets/explains the results of a function call (argument <code>call</code>) by using the information provided in the xplain XML file specified by the <code>xml</code> argument.
</p>


<h4>1. xplain XML files</h4>

<p>xplain XML files follow a simple structure (here an example for the <code>lm()</code> function from the <code>stats</code> package):<br />
</p>
<p>&lt;xml&gt;<br />
____&lt;xplain&gt;<br />
________&lt;package name = &quot;stats&quot;&gt;<br />
____________&lt;function name = &quot;lm&quot;&gt;<br />
________________&lt;title&gt;...&lt;/title&gt;<br />
________________&lt;text&gt;...&lt;/text&gt;<br />
________________&lt;result name = &quot;coefficients&quot;&gt;<br />
____________________&lt;title&gt;...&lt;title&gt;<br />
____________________&lt;text&gt;...&lt;/text&gt;<br />
________________&lt;/result&gt;<br />
____________&lt;/function&gt;<br />
________&lt;/package&gt;<br />
____&lt;/xplain&gt;<br />
&lt;/xml&gt;<br />
</p>
<p><code>&lt;title&gt;</code> elements contain plain text and can be used to structure the output of <code>xplain()</code>. They are underlined by the character given in the <code>title.char</code> argument.
</p>
<p><code>&lt;text&gt;</code> elements contain the actual explanations and interpretations. They may consist of plain text as well as R code. R code must be enclosed by special opening and closing tags like this: <code>!%% Here comes the R code %%!</code>. The placeholder <code>@</code> can be used to access the explained function's return object, e.g. <code>!%% summary(@) %%!</code>.
</p>
<p>With a <code>&lt;result&gt;</code> block you can interpret specific elements of the explained function's return object. The element of the current <code>&lt;result&gt;</code> block can be accessed with the <code>##</code> placeholder from within an R code section delimited by <code>!%%</code> and <code>%%!</code>. Example: <code>&lt;text&gt; The mean is: !%% mean(##) %%!&lt;/text&gt;</code>.
</p>
<p>If you use certain R code expressions multiple times and want to save typing effort and reduce error-proness, you can work with a <code>&lt;define&gt;</code> block. Like a <code>&lt;text&gt;</code> block, <code>&lt;define&gt;</code> can encompass both, plain text and R code, e.g.<br />
<code>&lt;define name="my.summary"&gt;The summary is: !%% summary(@) %%! &lt;/define&gt;</code>. After having defined an expression this way, you can call it from within an R code section by using its name and placing it between the special placeholder tags <code>!**</code> and <code>**!</code>, like <code>&lt;text&gt;Let us have a lookt at the summary: !** my.summary **! &lt;/text&gt;</code>.
</p>

<p>Sometimes you will want to apply a <code>&lt;text&gt;</code> block not only to one element of the explained function's return object. Consider, for example, the case in which the return object contains a vector and you want to run through each element of that vector. In this case, you can use a <code>&lt;text&gt;</code> element with the <code>foreach</code> attribute, e.g. <code>&lt;text foreach="rows"&gt;</code>. The attribute's value defines how xplain iterates over the object. Possible values are <code>"rows"</code>, <code>"columns"</code>, <code>"rows, columns"</code>, <code>"columns, rows"</code> and <code>"items"</code> for list items. Within R code included in your <code>&lt;text&gt;</code> block you can then refer to the index of the current object with the <code>$</code> placeholder, e.g. <code>!%% The current element is: @$coefficients[$,1] %%!</code>. If two different indices are in play (e.g. when <code>foreach="rows, columns"</code>) then you can work with two index placeholders <code>$</code>, e.g. <code>coefficients[$,$]</code>.<br />
Because <code>xplain()</code> needs to know which object to iterate over, you can use <code>&lt;text&gt;</code>  with the <code>foreach</code> attribute only form within a <code>&lt;result&gt;</code> block.
</p>
<p><code>xplain()</code> can access XML files both locally and from the internet. xplain XML fiels are not case-sensitive.
</p>


<h4>2. XML Attributes</h4>

<p><code>&lt;package&gt;</code>, <code>&lt;function&gt;</code>, <code>&lt;result&gt;</code> and <code>&lt;define&gt;</code> blocks always need a <code>name</code> attribute.
</p>
<p><code>&lt;title&gt;</code> and <code>&lt;text&gt;</code> blocks can have <code>lang</code> and <code>level</code> attributes, for the language and the complexity level of the explanations, respectively. <code>lang</code> is an ISO country code and <code>level</code> an integer number (for details, see the explanantion of the corresponding arguments of <code>xplain()</code> above). The values of these two attributes are inherited from higher-level XML elements, e.g. from <code>&lt;package&gt;</code> or <code>&lt;function&gt;</code>. Attributes defined at lower levels (e.g. in an individual <code>&lt;text&gt;</code> element) overrule these inherited attributes.
</p>



<h4>3. Search paths from xplain XML files</h4>

<p>If no path is provided with the <code>xml</code> argument of <code>xplain()</code> or the provided file does not exist then <code>xplain()</code> searches for a suitable XML file in various locations:<br />
</p>

<ol>
<li><p> in the path of the package containing the function from which <code>xplain()</code> was called for a file of the name &quot;package_of_the_calling_function.xml&quot;;<br />
</p>
</li>
<li><p> in the same path for a file with the name &quot;package_of_the_explained_function.xml&quot; (the function given in the <code>call</code> argument);<br />
</p>
</li>
<li><p> in the path of the package containing the explained function for a file with the name &quot;package_of_the_explained_function.xml&quot;;<br />
</p>
</li>
<li><p> in the current working directory for a file with the name &quot;package_of_the_explained_function.xml&quot;; and<br />
</p>
</li>
<li><p> in the current working directory for a file with the name &quot;explained_function.xml&quot;.
</p>
</li></ol>




<h4>4. More information on xplain XML files</h4>

<p>For more details on the structure of xplain XML files, please consult the web tutorial on <a href="http://www.zuckarelli.de/xplain/index.html">http://www.zuckarelli.de/xplain/index.html</a>.
</p>



<h3>Value</h3>

<p><code>xplain()</code> returns the return value of the explained function call (argument <code>call</code>) as if the function were called without <code>xplain()</code>. The interpretation/explanation information is either shown on the screen or written to a file (depending on the <code>filename</code> argument).
</p>


<h3>More material on the internet</h3>

<p>Web tutorial on how to work with xplain: <a href="http://www.zuckarelli.de/xplain/index.html">http://www.zuckarelli.de/xplain/index.html</a><br />
xplain cheat sheet: <a href="https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf">https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf</a>
</p>


<h3>Author(s)</h3>

<p>Joachim Zuckarelli, <a href="mailto:joachim@zuckarelli.de">joachim@zuckarelli.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xplain-package">xplain-package</a></code>, <code><a href="#topic+xplain.overview">xplain.overview</a></code>, <code><a href="#topic+xplain.getcall">xplain.getcall</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(car)

xml.path &lt;- system.file("", "example_lm.xml", package = "xplain")

xplain(call="lm(education ~ young + income + urban, data=Anscombe)",
  xml=xml.path)
</code></pre>

<hr>
<h2 id='xplain.getcall'>
Generating function calls for xplain wrapper functions
</h2><span id='topic+xplain.getcall'></span>

<h3>Description</h3>

<p>This function returns a string containing the call to the explained function to be used in an xplain wrapper function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xplain.getcall(fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xplain.getcall_+3A_fun">fun</code></td>
<td>
<p>Name of the explained function as string</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>xplain.getcall()</code> can be called from an xplain wrapper function. It returns a string containing the call to the explained function with all arguments provided to the wrapper function. With xplain.getcall() it is very easy to write xplain wrapper functions.
</p>
<p>Wrapper functions are an elegant way to provide access to xplain interpretation/explanation information. The wrapper function takes the sames arguments as the explained function and then calls <code>xplain()</code>. <code>xplain.getcall()</code> identifies the arguments provided to the wrapper function and returns the complete call of the explained function as a string which can then be handed over to <code>xplain()</code> as argument <code>call</code>.
</p>
<p>The Examples section illustrates how to build a wrapper function using <code>xplain.getcall()</code>.
</p>


<h3>Value</h3>

<p>The full call of the explained function as a string, including the arguments provided by the user to the wrapper function.
</p>


<h3>More material on the internet</h3>

<p>Web tutorial on how to work with xplain: <a href="https://www.zuckarelli.de/xplain/index.html">https://www.zuckarelli.de/xplain/index.html</a><br />
xplain cheat sheet: <a href="https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf">https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf</a>
</p>


<h3>Author(s)</h3>

<p>Joachim Zuckarelli, <a href="mailto:joachim@zuckarelli.de">joachim@zuckarelli.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xplain-package">xplain-package</a></code>, <code><a href="#topic+xplain">xplain</a></code>, <code><a href="#topic+xplain.overview">xplain.overview</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(car)

xml.path &lt;- system.file("", "example_lm.xml", package = "xplain")

# Example of a wrapper function for lm()
lm.xplain &lt;- function(formula, data, subset, weights, na.action,
                      method = "qr", model = TRUE, x = FALSE, y = FALSE, qr = TRUE,
                      singular.ok = TRUE, contrasts = NULL, offset, ...) {
  call&lt;-xplain.getcall("lm")
  xplain(call, xml=xml.path)
}

lm.xplain(education ~ young + income + urban, data=Anscombe)

</code></pre>

<hr>
<h2 id='xplain.overview'>
Summarizing the content of xplain XML files
</h2><span id='topic+xplain.overview'></span>

<h3>Description</h3>

<p><code>xplain.overview</code> summarizes the content of an xplain XML file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xplain.overview(xml, show.text=FALSE, preserve.seq=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xplain.overview_+3A_xml">xml</code></td>
<td>

<p>Path to the xplain XML file. Can be either a local path or an URL.
</p>
</td></tr>
<tr><td><code id="xplain.overview_+3A_show.text">show.text</code></td>
<td>

<p>Indicates if the full interpretation/explanation texts shall be included in the summary (optional). Default: <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="xplain.overview_+3A_preserve.seq">preserve.seq</code></td>
<td>

<p>Indicates if the overview results for the interpretation/explanation texts shall be shown in the same sequence as they appear in the XML file (optional). If <code>FALSE</code>, the results are sorted, e.g. by package, function, language and complexity level. Default: <code>FALSE</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame summarizing the XML file. Each row corresponds to a <code>&lt;title&gt;</code> or <code>&lt;text&gt;</code> element in the xplain XML file.<br />
The column structure is as follows:
</p>

<ul>
<li> <p><b><code>Package</code></b>: The package to which the explained function belongs.
</p>
</li>
<li> <p><b><code>Function</code></b>: The explained function.
</p>
</li>
<li> <p><b><code>Type</code></b>: Indicates whether the element is a <code>&lt;title&gt;</code> or a <code>&lt;text&gt;</code> element.
</p>
</li>
<li> <p><b><code>Language</code></b>: Language of the element (also considering inheritance from higher-level XML elements).
</p>
</li>
<li> <p><b><code>Level</code></b>: Complexity level of the element (also considering inheritance from higher-level XML elements).
</p>
</li>
<li> <p><b><code>Result object</code></b>: Element of the explained function's return object to which the <code>&lt;title&gt;</code> or  <code>&lt;text&gt;</code> element relates (if any).
</p>
</li>
<li> <p><b><code>Iteration</code></b>: Type of iteration (if any). Value of the <code>foreach</code> attribute of the <code>&lt;text&gt;</code> element.
</p>
</li>
<li> <p><b><code>Has R code</code></b>: Indicates if the <code>&lt;text&gt;</code> element includes R code.
</p>
</li>
<li> <p><b><code>Uses return obj.</code></b>: Indicates if the <code>&lt;text&gt;</code> element refers to the explained function's return object.
</p>
</li>
<li> <p><b><code>Text</code></b>: The text of the respective <code>&lt;text&gt;</code> or <code>&lt;title&gt;</code> element (including R code). This column is only included if <code>show.text=TRUE</code>.
</p>
</li></ul>

<p>To learn more about the structure of xplain XML files, go to the <code><a href="#topic+xplain">xplain</a></code> help page or consult the <a href="https://www.zuckarelli.de/xplain/index.html">web tutorial</a>.
</p>


<h3>More material on the internet</h3>

<p>Web tutorial on how to work with xplain: <a href="https://www.zuckarelli.de/xplain/index.html">https://www.zuckarelli.de/xplain/index.html</a><br />
xplain cheat sheet: <a href="https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf">https://www.zuckarelli.de/xplain/xplain_cheatsheet.pdf</a>
</p>


<h3>Author(s)</h3>

<p>Joachim Zuckarelli, <a href="mailto:joachim@zuckarelli.de">joachim@zuckarelli.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xplain-package">xplain-package</a></code>, <code><a href="#topic+xplain">xplain</a></code>, <code><a href="#topic+xplain.getcall">xplain.getcall</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xml.path &lt;- system.file("", "example_lm.xml", package = "xplain")
xplain.overview(xml.path)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
