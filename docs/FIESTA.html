<!DOCTYPE html><html><head><title>Help for package FIESTA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {FIESTA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#FIESTA-package'><p>EcoMap SpatialPolygonsDataFrame</p></a></li>
<li><a href='#datBarplot'><p>Data - Generates frequency barplot.</p></a></li>
<li><a href='#datBarStacked'><p>Data - Generates frequency barplot.</p></a></li>
<li><a href='#datFilter'><p>Data - Filters data table.</p></a></li>
<li><a href='#datFreq'><p>Data - Get frequency table for specified variable(s).</p></a></li>
<li><a href='#datLineplot'><p>Data - Generates line graph.</p></a></li>
<li><a href='#datLUTclass'><p>Data - Create a variable with classified values.</p></a></li>
<li><a href='#datLUTnm'><p>Data - Gets variable description or class.</p></a></li>
<li><a href='#datLUTspp'><p>Data - Gets variable description or class for SPCD.</p></a></li>
<li><a href='#datPBplotchg'><p>Data - Generates barplot of photo-based change estimates.</p></a></li>
<li><a href='#datPBpnt2pct'><p>Data - Transpose point data to plot-level percent by domain.</p></a></li>
<li><a href='#datPivot'><p>Data - Generates a pivot table.</p></a></li>
<li><a href='#datPlotcnt'><p>Database - Get plot counts.</p></a></li>
<li><a href='#datSumCond'><p>Data - Aggregates numeric condition data to plot level.</p></a></li>
<li><a href='#datSumTree'><p>Data - Aggregates tree and/or seedling data to the plot, condition,</p>
or subplot level.</a></li>
<li><a href='#datSumTreeDom'><p>Data - Aggregates numeric tree data by tree domain (i.e. species) to plot or</p>
condition-level.</a></li>
<li><a href='#DBgetCSV'><p>Database - Extracts data table(s) from FIA DataMart.</p></a></li>
<li><a href='#DBgetEvalid'><p>Database - Gets or checks FIA EVALIDs and/or gets inventory years from FIA's</p>
online publicly-available DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).</a></li>
<li><a href='#DBgetPlots'><p>Database - Extracts inventory plot data from FIA DataMart.</p></a></li>
<li><a href='#DBgetSQLite'><p>Database - Queries a SQLite database table.</p></a></li>
<li><a href='#DBgetStrata'><p>Database - Gets stratification information from FIA database.</p></a></li>
<li><a href='#DBgetXY'><p>Database - Extracts plot coordinates.</p></a></li>
<li><a href='#DBqryCSV'><p>Database - Queries FIA Online Database.</p></a></li>
<li><a href='#dbTables'><p>List of population tables.</p></a></li>
<li><a href='#GDT_NAMES'><p>Reference tables - gdal data types.</p></a></li>
<li><a href='#internal_desciption'><p>Internal functions used for development of FIESTA</p></a></li>
<li><a href='#kindcd3old'><p>Reference table - List of RMRS plots that have fallen out of inventory</p>
because they were not found or they were in the wrong place.</a></li>
<li><a href='#modGBarea'><p>Green-Book module - Generate area estimates.</p></a></li>
<li><a href='#modGBchng'><p>Green-Book module - Generate area estimates.</p></a></li>
<li><a href='#modGBdwm'><p>Green-Book module - Generate area estimates.</p></a></li>
<li><a href='#modGBp2veg'><p>Green-Book module - Generate area estimates.</p></a></li>
<li><a href='#modGBpop'><p>Green-Book module - Generate population data for GB module.</p></a></li>
<li><a href='#modGBratio'><p>Green-Book module - Generate ratio estimates.</p></a></li>
<li><a href='#modGBtree'><p>Green-Book module - Generate tree estimates.</p></a></li>
<li><a href='#modMAarea'><p>Model-Assisted module - Generate model-assisted area estimates.</p></a></li>
<li><a href='#modMApop'><p>Model-Assisted module - Generate population data for MA module.</p></a></li>
<li><a href='#modMAratio'><p>Model-Assisted module - Generate model-assisted tree estimates.</p></a></li>
<li><a href='#modMAtree'><p>Model-Assisted module - Generate model-assisted tree estimates.</p></a></li>
<li><a href='#modPB'><p>Photo-Based module - Generate photo-based estimates.</p></a></li>
<li><a href='#modPBpop'><p>Photo-Based module - Generate population data for PB module.</p></a></li>
<li><a href='#modSAarea'><p>Small area module - Generate small area tree estimates.</p></a></li>
<li><a href='#modSApop'><p>Small area module - Compile population data for SA module.</p></a></li>
<li><a href='#modSAtree'><p>Small area module - Generate small area tree estimates.</p></a></li>
<li><a href='#modWFarea'><p>West-Fest module - Generate population data for WF module.</p></a></li>
<li><a href='#modWFpop'><p>West-Fest module - Generate population data for WF module.</p></a></li>
<li><a href='#modWFtree'><p>West-Fest module - Generate population data for WF module.</p></a></li>
<li><a href='#popFilters'><p>Population data filters.</p></a></li>
<li><a href='#popTableIDs'><p>List of population table unique IDs.</p></a></li>
<li><a href='#popTables'><p>List of population tables.</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#ref_codes'><p>Reference tables - Code definitions.</p></a></li>
<li><a href='#ref_cond'><p>Reference table - Metadata for cond default variables output from</p>
DBgetPlots()</a></li>
<li><a href='#ref_conversion'><p>Reference table - for conversion factors.</p></a></li>
<li><a href='#ref_diacl2in'><p>Reference table - diameter 2-inch class codes (DIA).</p></a></li>
<li><a href='#ref_domain'><p>Reference table - for generating tables.</p></a></li>
<li><a href='#ref_estvar'><p>Reference table - for generating estimates</p></a></li>
<li><a href='#ref_plt'><p>Reference table - Metadata for plt default variables output from</p>
DBgetPlots()</a></li>
<li><a href='#ref_popType'><p>Reference table - popType codes.</p></a></li>
<li><a href='#ref_shp'><p>Reference table - Metadata for shp_* default variables output from</p>
DBgetPlots()</a></li>
<li><a href='#ref_species'><p>Reference table - Code definitions.</p></a></li>
<li><a href='#ref_statecd'><p>Reference table - state codes (STATECD).</p></a></li>
<li><a href='#ref_titles'><p>Reference table - Variable titles.</p></a></li>
<li><a href='#ref_tree'><p>Reference table - Metadata for tree default variables output from</p>
DBgetPlots()</a></li>
<li><a href='#ref_units'><p>Reference table - for variable units.</p></a></li>
<li><a href='#spClassifyRast'><p>Data - Reclass raster.</p></a></li>
<li><a href='#spClipPoint'><p>Spatial - Clip (intersect) point vector layer with polygon vector layer.</p></a></li>
<li><a href='#spClipPoly'><p>Spatial - Clip (intersect) polygon vector layer with polygon vector layer.</p></a></li>
<li><a href='#spClipRast'><p>Spatial - Subsets a raster to a polygon extent or boundary.</p></a></li>
<li><a href='#spExportSpatial'><p>Spatial - Exports an sf object.</p></a></li>
<li><a href='#spExtractPoly'><p>Spatial - Extracts point attribute values from SpatialPolygons layer(s).</p></a></li>
<li><a href='#spExtractRast'><p>Spatial - Extracts point attribute values from raster layer(s).</p></a></li>
<li><a href='#spGetAuxiliary'><p>Spatial wrapper - Extracts and compiles auxiliary data within a specified</p>
boundary.</a></li>
<li><a href='#spGetEstUnit'><p>Spatial wrapper - Extracts point attribute values and area from a simple</p>
feature or raster estimation unit layer.</a></li>
<li><a href='#spGetPlots'><p>Spatial wrapper - Extracts plot data within a given boundary.</p></a></li>
<li><a href='#spGetSAdoms'><p>Spatial wrapper - Generate a set of model domain units for Small Area Estimation</p>
(SAE) strategies.</a></li>
<li><a href='#spGetStates'><p>Spatial wrapper - Extracts states that intersect a boundary.</p></a></li>
<li><a href='#spGetStrata'><p>Spatial wrapper - Extracts point attribute values and pixel counts for</p>
strata and estimation unit spatial layers.</a></li>
<li><a href='#spGetXY'><p>Spatial wrapper - Extracts XY coordinates within a given boundary.</p></a></li>
<li><a href='#spImportSpatial'><p>Spatial - Imports a spatial vector layer to an S4 Spatial object.</p></a></li>
<li><a href='#spMakeSpatialPoints'><p>Spatial - Generates an S4 SpatialPoints object from X/Y coordinates.</p></a></li>
<li><a href='#spPoly2Rast'><p>Spatial - Converts SpatialPolygons layer to raster.</p></a></li>
<li><a href='#spReprojectRaster'><p>Spatial - Reprojects an Esri shapefile (*shp) or S4 Spatial object.</p></a></li>
<li><a href='#spReprojectVector'><p>Spatial - Reprojects an sf spatial object.</p></a></li>
<li><a href='#spUnionPoly'><p>Spatial - Generate a unioned sf object with polygons and attributes from</p>
two sf polygon objects.</a></li>
<li><a href='#spZonalRast'><p>Spatial - Extracts summary statistics by polygon (i.e., zone) for a raster.</p></a></li>
<li><a href='#stunitco'><p>SpatialPolygonsDataFrame with FIA state, unit, county codes and names</p></a></li>
<li><a href='#WYcond'><p>FIA data. Condition-level data from FIA public database.</p></a></li>
<li><a href='#WYp2veg_subp_structure'><p>FIA data. P2 vegetation structure data from FIA public database.</p></a></li>
<li><a href='#WYp2veg_subplot_spp'><p>FIA data. P2 vegetation species data from FIA public database.</p></a></li>
<li><a href='#WYplt'><p>FIA data. Plot-level data from FIA public database.</p></a></li>
<li><a href='#WYpltassgn'><p>FIA data. Plot assignment data from FIA public database.</p></a></li>
<li><a href='#WYseed'><p>FIA data. Seedling data from FIA public database.</p></a></li>
<li><a href='#WYstratalut'><p>FIA data. Post-stratification data from FIA public database.</p></a></li>
<li><a href='#WYsubp_cond'><p>FIA data. Subplot condition data from FIA public database.</p></a></li>
<li><a href='#WYsubplot'><p>FIA data. Subplot data from FIA public database.</p></a></li>
<li><a href='#WYtree'><p>FIA data. Tree-level data from FIA public database.</p></a></li>
<li><a href='#WYunitarea'><p>FIA data. Acres data from FIA public database.</p></a></li>
<li><a href='#WYunitzonal'><p>Zonal data. Zonal means for auxiliary data in counties in Wyoming.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Forest Inventory Estimation and Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>3.6.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-06-07</td>
</tr>
<tr>
<td>Description:</td>
<td>A research estimation tool for analysts that work with sample-based
    inventory data from the U.S. Department of Agriculture, Forest Service,
    Forest Inventory and Analysis (FIA) Program. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, DBI, FIESTAutils (&ge; 1.2.3), gdalraster,
grDevices, graphics, methods, RSQLite, sf, sqldf, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, terra, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>See file COPYRIGHTS for details.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://usdaforestservice.github.io/FIESTA/">https://usdaforestservice.github.io/FIESTA/</a>,
<a href="https://github.com/USDAForestService/FIESTA">https://github.com/USDAForestService/FIESTA</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/USDAForestService/FIESTA/issues">https://github.com/USDAForestService/FIESTA/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-07 20:02:06 UTC; grayson</td>
</tr>
<tr>
<td>Author:</td>
<td>Tracey Frescino [aut],
  Gretchen Moisen [aut],
  Paul Patterson [aut],
  Chris Toney [aut],
  Grayson White <a href="https://orcid.org/0000-0003-4993-2792"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Joshua Yamamoto [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Grayson White &lt;graysonwhite13@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-07 20:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='FIESTA-package'>EcoMap SpatialPolygonsDataFrame</h2><span id='topic+FIESTA-package'></span><span id='topic+FIESTA'></span>

<h3>Description</h3>

<p>Contains regional geographic delineations for analysis of ecological
relationships across ecological units. ECOMAP is the term used for a USDA
Forest Service initiative to map ecological units and encourage their use in
ecosystem-based approaches to forest land conservation and management. It is
coordinated at the national and regional levels by USDA Forest Service staff
and implemented in cooperation with State forestry agencies and others.
ECOMAP mapping criteria are outlined in the National Hierarchical Framework
of Ecological Units (https://www.ncrs.fs.fed.us/gla/reports/hierarch-
y.htm). The framework systematically divides the country into progressively
smaller areas of land and water that have similar physical and biological
characteristics and ecological processes.
</p>


<h3>Details</h3>

<p>The EcoMap Provinces feature class contains ecological province polygons
attributed with names and descriptions. The EcomapSections 2007 data set
describes the ecological sections within the conterminous United States. The
EcomapSubections 2007 data set describes the ecological subsections within
the conterminous United States.
</p>
<p>Converted to simple feature<br /> Transformed CRS from longlat(EPSG:4269) to
Albers (EPSG:5070)<br /> Saved to R object, with compression='xz'
</p>
<p>FIESTA - Forest Inventory Estimation for Analysis
</p>
<p>FIESTA is a research estimation tool for analysts that work with sample-based 
inventory data from the U.S. Department of Agriculture, Forest Service, 
Forest Inventory and Analysis (FIA) Program. 
</p>
<p>FIESTA can generate FIA's traditional state-wide estimates while also accommodate: 
unique population boundaries, different evaluation time periods, customized 
stratification schemes, non-standard variance equations, integration of 
multi-scale remotely-sensed data and other auxiliary information, and 
interaction with other modeling and estimation tools from CRAN's library of 
packages. 
</p>
<p>FIESTA contains a collection of functions that can query FIA databases, 
summarize and compile plot and spatial data, and generate estimates with 
associated sampling errors.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino Maintainer: Tracey S. Frescino
</p>


<h3>References</h3>

<p>Bechtold, William A.; Patterson, Paul L.; [Editors] 2005. The enhanced
forest inventory and analysis program - national sampling design and
estimation procedures. Gen. Tech. Rep. SRS-80. Asheville, NC: U.S.
Department of Agriculture, Forest Service, Southern Research Station. 85p.
</p>
<p>R Development Core Team (2011). R: A language and environment for
statistical computing. R Foundation for Statistical Computing, Vienna,
Austria. ISBN 3-900051-07-0, URL http://www.R-project.org/.
</p>
<p>Burrill, E.A., Wilson, A.M., Turner, J.A., Pugh, S.A., Menlove, J.,
Christiansen, G., Conkling, B.L., Winnie, D., 2018. Forest Inventory and
Analysis Database [WWW Document].  St Paul MN US Dep. Agric. For. Serv.
North. Res. Stn.  URL http://apps.fs.fed.us/fiadb-downloads/datamart.html
(accessed 3.6.21).
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://usdaforestservice.github.io/FIESTA/">https://usdaforestservice.github.io/FIESTA/</a>
</p>
</li>
<li> <p><a href="https://github.com/USDAForestService/FIESTA">https://github.com/USDAForestService/FIESTA</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/USDAForestService/FIESTA/issues">https://github.com/USDAForestService/FIESTA/issues</a>
</p>
</li></ul>


<hr>
<h2 id='datBarplot'>Data - Generates frequency barplot.</h2><span id='topic+datBarplot'></span>

<h3>Description</h3>

<p>Generate a barplot of from a frequency data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datBarplot(
  x,
  xvar = NULL,
  yvar = "FREQ",
  grpvar = NULL,
  errbars = FALSE,
  x.order = NULL,
  sevar = NULL,
  psevar = NULL,
  device.type = "dev.new",
  jpeg.res = 300,
  device.height = 5,
  device.width = 8,
  horiz = FALSE,
  toplabelvar = NULL,
  ylim = NULL,
  divideby = NULL,
  ylabel = NULL,
  xlabel = NULL,
  mar = NULL,
  addlegend = FALSE,
  main = NULL,
  cex.main = 1,
  cex.label = 1,
  cex.names = 0.8,
  las.xnames = 0,
  las.ynames = 1,
  savedata = FALSE,
  outfolder = NULL,
  outfn = NULL,
  outfn.pre = NULL,
  outfn.date = TRUE,
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datBarplot_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) - a frequency table.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_xvar">xvar</code></td>
<td>
<p>String. Name of X variable.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_yvar">yvar</code></td>
<td>
<p>String. Name of the y variable (e.g., FREQ).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_grpvar">grpvar</code></td>
<td>
<p>String. Name of the variable for grouping.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_errbars">errbars</code></td>
<td>
<p>Logical. If TRUE, error bars are added to bar plot (sevar or
psevar must also be populated).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_x.order">x.order</code></td>
<td>
<p>String or Vector. Define order of xvar based on y values:
descending (&quot;DESC&quot;) or ascending (&quot;ASC&quot;) or vector of row numbers.  If NULL,
the order of the input table is used.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_sevar">sevar</code></td>
<td>
<p>String. Name of the variable with standard error values.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_psevar">psevar</code></td>
<td>
<p>String. Name of the variable with percent standard error.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_device.type">device.type</code></td>
<td>
<p>String. Type(s) of device for plotting (&quot;dev.new&quot;, &quot;jpg&quot;,
&quot;pdf&quot;).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_jpeg.res">jpeg.res</code></td>
<td>
<p>Integer. Resolution for jpeg image.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_device.height">device.height</code></td>
<td>
<p>Integer. Height (in inches) of barplot, if writing to
file.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_device.width">device.width</code></td>
<td>
<p>Integer. Width (in inches) of barplot, if writing to
file.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_horiz">horiz</code></td>
<td>
<p>Logical. If TRUE, bars are drawn horizontally with first bar at
the bottom.  If FALSE, bars are drawn vertically with first bar to the left
(barplot parameter).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_toplabelvar">toplabelvar</code></td>
<td>
<p>String. Name of variable in x for adding labels to place
above each bar (e.g., NBRPLOTS.gt0).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_ylim">ylim</code></td>
<td>
<p>Number. A vector of min and max values, c(min,max) for the y
axis (or x axis if horiz=TRUE). If NULL, defaults to maximum y value. If
errbars=TRUE, the ylim defaults to the maximum y value plus the standard
error.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_divideby">divideby</code></td>
<td>
<p>String. Conversion number for output ('hundred', 'thousand',
'million').</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_ylabel">ylabel</code></td>
<td>
<p>String. Label for the y axis (same as ylab).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_xlabel">xlabel</code></td>
<td>
<p>String. Label for the x axis (same as xlab).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_mar">mar</code></td>
<td>
<p>See par.. A numerical vector representing number of lines for
margins (c(bottom, left, top, right).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_addlegend">addlegend</code></td>
<td>
<p>Logical. If TRUE, adds legend to bar plot (only applicable
if grouping).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_main">main</code></td>
<td>
<p>String. Title for plot.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_cex.main">cex.main</code></td>
<td>
<p>Number. Expansion factor for title.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_cex.label">cex.label</code></td>
<td>
<p>Number. A number representing cex in barplot (size
expansion of x and/or ylabels.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_cex.names">cex.names</code></td>
<td>
<p>Number. Expansion factor for axis names (bar labels) (e.g.,
0.5 represents half the size.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_las.xnames">las.xnames</code></td>
<td>
<p>Number. The direction of x variable names (0,1,3).
0:diagonal (Default), 1:horizontal; 3:vertical.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_las.ynames">las.ynames</code></td>
<td>
<p>Number. The direction of y variable names (0,1,3).
0:diagonal (Default), 1:horizontal; 3:vertical.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder (jpg and
pdf).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The name of the output folder. If savedata=TRUE,
all output saved to the outfolder. If savedata=FALSE, only a text file of
input parameters is saved.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_outfn">outfn</code></td>
<td>
<p>String. The name of the output file if savedata=TRUE (*.csv).
Do not include extension. If NULL, the file will be named
BARPLOT_'yvar_date'.csv</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_outfn.pre">outfn.pre</code></td>
<td>
<p>String. Add a prefix to output name (e.g., &quot;01&quot;).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_outfn.date">outfn.date</code></td>
<td>
<p>Logical. If TRUE, add date to end of outfile (e.g.,
outfn_'date'.csv).</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE and exportshp=TRUE, overwrite files in
outfolder.</p>
</td></tr>
<tr><td><code id="datBarplot_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to barplot(), including a list of
arguments for legend() arguments (e.g., args.legend=list(x=&quot;topleft&quot;,
bty=&quot;n&quot;), for moving legend to topleft and removing box around legend).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If parameters = NULL, then it will prompt user for input.
</p>


<h3>Value</h3>

<p>Outputs barplot to display window.
</p>


<h3>Note</h3>

<p>If savedata = TRUE, writes a jpg and pdf of barplot to outfolder.
</p>
<p>To add legend parameters, add a parameter named args.legend, defined as a
list of specific legend parameters (see ?legend)...  e.g., 
args.legend=list(x=&quot;topright&quot;). If specifying x and y, x defines the lower
right corner of legend box and y defines the upper right corner of box.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up data frame for example
ftyptab &lt;- data.frame(cbind(FORTYPCD = c(182, 184, 201, 221, 265),
                            FREQ = c(110, 7, 900, 410, 155),
                            SE = c(10, 11, 18, 14, 22)))
                            
# Create basic barplot                           
datBarplot(x = ftyptab, xvar = "FORTYPCD")
	
# Add standard errors to basic barplot
datBarplot(x = ftyptab, xvar = "FORTYPCD", errbars = TRUE, sevar = "SE")
</code></pre>

<hr>
<h2 id='datBarStacked'>Data - Generates frequency barplot.</h2><span id='topic+datBarStacked'></span>

<h3>Description</h3>

<p>Generate a barplot of frequencies in order from most to least.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datBarStacked(
  x,
  main.attribute,
  sub.attribute,
  response = "phat",
  percent = FALSE,
  LUT.color = NULL,
  color = "rainbow",
  device.type = "default",
  jpeg.res = 300,
  device.width = 9,
  device.height = 6,
  mar = NULL,
  horiz = TRUE,
  bar.lim = NULL,
  bar.ratio = 1,
  ylabel = NULL,
  xlabel = NULL,
  las.xnames = NULL,
  main.order = NULL,
  sub.order = NULL,
  legend.fit = NULL,
  legend.cex = 0.8,
  legend.x = NULL,
  legend.y = NULL,
  legend.title = NULL,
  legend.bty = "o",
  legend.bg = par("bg"),
  legend.inset = 0,
  legend.xpd = par("xpd"),
  main = NULL,
  cex.main = 1,
  cex.label = 1,
  cex.names = 0.8,
  sub.add0 = FALSE,
  savedata = FALSE,
  outfolder = NULL,
  outfn = NULL,
  outfn.pre = NULL,
  outfn.date = TRUE,
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datBarStacked_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) - table of values to be
plotted.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_main.attribute">main.attribute</code></td>
<td>
<p>String. The column to be used for each bar.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_sub.attribute">sub.attribute</code></td>
<td>
<p>String. The column to be used to subdivide each bar.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_response">response</code></td>
<td>
<p>String. The column of values to be plotted. Currently
defaults to &quot;phat&quot;.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_percent">percent</code></td>
<td>
<p>Logical. If TRUE, values cover values in a stack are
converted to percent of stack.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_lut.color">LUT.color</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) - look up table
for colors.  Must contain column with same name as sub.attribute.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_color">color</code></td>
<td>
<p>String. Automated color selection (&quot;rainbow&quot;, &quot;topo&quot;, &quot;heat&quot;,
&quot;terrain&quot;, &quot;cm&quot;).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_device.type">device.type</code></td>
<td>
<p>String. The type(s) of device for plotting (&quot;default&quot;,
&quot;jpg&quot;, &quot;pdf&quot;, or &quot;ps&quot;).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_jpeg.res">jpeg.res</code></td>
<td>
<p>Integer. The resolution for jpeg image.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_device.width">device.width</code></td>
<td>
<p>Integer. The width of output device (in inches)'</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_device.height">device.height</code></td>
<td>
<p>Integer. The height of output device (in inches)'</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_mar">mar</code></td>
<td>
<p>See par.. A numerical vector representing number of lines for
margins (c(bottom, left, top, right).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_horiz">horiz</code></td>
<td>
<p>Logical. See barplot. If FALSE, the bars are drawn vertically
with the first bar to the left. If TRUE, the bars are drawn horizontally
with the first bar at the bottom.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_bar.lim">bar.lim</code></td>
<td>
<p>Number vector. Equivalent to xlim or ylim, for whichever is
the lengthwise axis in barcharts (ex. c(0,10)). Warning: for lower limits
other than zero (ex. c(20,100), will behave strangely because par(xpd) is
set to NA.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_bar.ratio">bar.ratio</code></td>
<td>
<p>Proportion of figure area taken up by barplot vs taken by
legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_ylabel">ylabel</code></td>
<td>
<p>String. A label for the y axis (same as ylab).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_xlabel">xlabel</code></td>
<td>
<p>String. A label for the x axis (same as xlab).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_las.xnames">las.xnames</code></td>
<td>
<p>Number. The direction of x variable names (0,1,2,3).
0:Default, parallel; 1:horizontal; 2:perpendicular; 3:vertical.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_main.order">main.order</code></td>
<td>
<p>String vector. A vector of main.attribute names in desired
order for bars. May also be 'DESC' or 'ASC'.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_sub.order">sub.order</code></td>
<td>
<p>String vector. Avector of sub.attribute names in desired
order for stack, with the first name used as the column in each stack. If
NULL, the order is based on the overall cover of each sub.attribute. May
also be 'DESC' or 'ASC'.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.fit">legend.fit</code></td>
<td>
<p>Logical. Should bar.lim be changed to fit the legend of
the plot.  Will only be used if the legend is on the right side of a
horizontal plot or the top of a vertical plot. (i.e. horiz=FALSE).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.cex">legend.cex</code></td>
<td>
<p>Number. Expansion factor for legend text.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.x">legend.x</code></td>
<td>
<p>See legend. The x coordinate to be used to position the
legend. If horiz=TRUE, suggested options include &quot;topright&quot; or
&quot;bottomright&quot;. If horiz=FALSE, suggested options include &quot;topleft&quot; or
&quot;topright&quot;.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.y">legend.y</code></td>
<td>
<p>See legend. The y coordinate to be used to position the
legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.title">legend.title</code></td>
<td>
<p>See legend. A title for the legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.bty">legend.bty</code></td>
<td>
<p>See legend. the type of box to be drawn around the legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.bg">legend.bg</code></td>
<td>
<p>See legend. The background color for the legend box.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.inset">legend.inset</code></td>
<td>
<p>See legend. The distance from the margins as a fraction
of the plot region.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_legend.xpd">legend.xpd</code></td>
<td>
<p>See legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_main">main</code></td>
<td>
<p>String. Title for plot.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_cex.main">cex.main</code></td>
<td>
<p>Number. Expansion factor for title.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_cex.label">cex.label</code></td>
<td>
<p>Number. A number representing cex in barplot (size
expansion of x and/or ylabels.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_cex.names">cex.names</code></td>
<td>
<p>Number. Expansion factor for axis names (bar labels). Ex.
0.5 represents half the size.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_sub.add0">sub.add0</code></td>
<td>
<p>Logical. If TRUE, adds categories with 0 values to
sub.attribute legend.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder (jpg and
pdf).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The name of the output folder. If savedata=TRUE,
all output saved to the outfolder. If savedata=FALSE, only a text file of
input parameters is saved.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_outfn">outfn</code></td>
<td>
<p>String. The name of the output file if savedata=TRUE (*.csv).
Do not include extension. If NULL, the file will be named
BARPLOT_'yvar_date'.csv</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_outfn.pre">outfn.pre</code></td>
<td>
<p>String. Add a prefix to output name (e.g., &quot;01&quot;).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_outfn.date">outfn.date</code></td>
<td>
<p>Logical. If TRUE, add date to end of outfile (e.g.,
outfn_'date'.csv).</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE and exportshp=TRUE, overwrite files in
outfolder.</p>
</td></tr>
<tr><td><code id="datBarStacked_+3A_...">...</code></td>
<td>
<p>list of additional arguments to pass to barplot(); names of the
list are used as argument names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p># Note: This function uses a customized lengthwise axis (y axis if horiz=F,
x axis if horiz=T) # Therefore to modify this axis by par commands (other
than the # ones specifically included above) may require changing the
function. For example par(yaxp) # may not work.  # # # The arguments bar.lab
and bar.lim are equivalent to xlab/ylab, xlim/ylim, controlling # whichever
is the lengthwise axis in the bar charts (as determined by horiz).  # # #
bar.ratio is only used when bar.lim is specified, it controls what
percentage of the # plot area will be occupied by the specified range of the
chart itself. For example, setting # bar.lim=c(0,80) and bar.ratio=0.75 will
result in the 80
region, leaving 25
the bars are taller than 80
bar.lim is not specified, the function will automatically scale the
lengthwise axis so # that all the bars are as tall as possible, but none of
the bars over lap the legend.  # # The main purpose of specifying bar.lim is
if you want multiple forest types to be shown at # the same scale,
sacrificing individual forest type details to make the graphs comparable #
across forest types. Then you may need to fiddle with bar.ratio till the
plots all look good.
</p>


<h3>Value</h3>

<p>Outputs stacked barplot to display window.
</p>


<h3>Note</h3>

<p>If savedata = TRUE, writes a jpg and pdf of barplot to outfolder.
</p>


<h3>Author(s)</h3>

<p>Elizabeth Freeman, Tracey S. Frescino
</p>

<hr>
<h2 id='datFilter'>Data - Filters data table.</h2><span id='topic+datFilter'></span>

<h3>Description</h3>

<p>Subsets a data table by specified filter(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datFilter(
  x,
  xfilter = NULL,
  xfiltervar = NULL,
  othertabnms = NULL,
  uniqueid = "PLT_CN",
  vardelete = NULL,
  title.filter = NULL,
  savedata = FALSE,
  filternm = NULL,
  stopifnull = FALSE,
  returnDT = TRUE,
  xnm = NULL,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datFilter_+3A_x">x</code></td>
<td>
<p>Data frame, sf data frame or comma-delimited file (*.csv). A data
frame to filter.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_xfilter">xfilter</code></td>
<td>
<p>String. A filter expression. Must be R syntax.  (e.g.,
&quot;STATUSCD == 1&quot;, &quot;INVYR 
within double quotes (e.g., &quot;SPP == 'Lodgepole'&quot;). If NULL, a window pops up
to select filter variable(s) and filter value(s).</p>
</td></tr>
<tr><td><code id="datFilter_+3A_xfiltervar">xfiltervar</code></td>
<td>
<p>String. The filtervar if you know what it is. If NULL, a
window will pop up to select filter value(s).</p>
</td></tr>
<tr><td><code id="datFilter_+3A_othertabnms">othertabnms</code></td>
<td>
<p>String vector. Name(s) of the objects or comma-delimited
files to subset.  Names must be in quotes (e.g., othertables=c('tree',
'cond')).</p>
</td></tr>
<tr><td><code id="datFilter_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String. Unique identifier of x. Only needed if othertables
!= NULL.  The uniqueid must be the same for all tables except if PLT_CN and
CN.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_vardelete">vardelete</code></td>
<td>
<p>String vector. Vector of variables you would like deleted
from filter list. Mostly used for internal queries.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_title.filter">title.filter</code></td>
<td>
<p>String. Title of the filter query window. Mostuly used
for internal queries.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_filternm">filternm</code></td>
<td>
<p>String. Optional. Name of filter, for feedback purposes.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_stopifnull">stopifnull</code></td>
<td>
<p>Logical. If TRUE, stop if output is NULL.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, returns a data table. If FALSE, returns a
data frame.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_xnm">xnm</code></td>
<td>
<p>String. Name for filter attribute. Used for warning messages.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.  If out_layer = NULL,
default = 'datf'.</p>
</td></tr>
<tr><td><code id="datFilter_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, pop-up windows will appear for user-interface.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, then user is prompted for input. If partial parameters,
default parameter values are used.
</p>


<h3>Value</h3>

<p>A list of the following items:
</p>
<table>
<tr><td><code>xf</code></td>
<td>
<p> A data frame of filtered x. </p>
</td></tr> <tr><td><code>xfilter</code></td>
<td>
<p> The xfilter. </p>
</td></tr></table>
<p> If
othertables != NULL, the other tables, named with 'in' prefix
</p>


<h3>Note</h3>

<p>If message returned is 'filter removed all records', either the filter
removed all records in x or the filter is incorrect.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up data for example
tab &lt;- data.frame(cbind(CONDCLASS=c(1, 1, 2, 1, 3, 3, 3, 1, 1, 1, 2, 1),
			                   FORTYPCD = c(182, 184, 201, 221, 221, 184, 221, 182,
			                                182, 201, 182, 221)))
			                    
	# Filter for value not equal to 182
	datFilter(x = tab, xfilter = "FORTYPCD != 182")

# Filter on two conditions, grab xf object from list
datFilter(x = WYcond, xfilter = "FORTYPCD == c(221) &amp; STDSZCD == 3")$xf
</code></pre>

<hr>
<h2 id='datFreq'>Data - Get frequency table for specified variable(s).</h2><span id='topic+datFreq'></span>

<h3>Description</h3>

<p>Generates a frequency table from a data frame, including number of records
by a specified variable or variables in the data frame with optional totals
and/or subtotals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datFreq(
  x,
  xvar = NULL,
  total = FALSE,
  subtotal = FALSE,
  subtotalcol = NULL,
  savedata = FALSE,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datFreq_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). The table with the
variable(s).</p>
</td></tr>
<tr><td><code id="datFreq_+3A_xvar">xvar</code></td>
<td>
<p>String (vector).* The name of the variable(s) to summarize.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_total">total</code></td>
<td>
<p>Logical. If TRUE, a row is added to bottom of table with a
total for the whole table.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_subtotal">subtotal</code></td>
<td>
<p>Logical. If TRUE, a row is added to bottom of each section
for subtotals.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_subtotalcol">subtotalcol</code></td>
<td>
<p>Logical. If subtotal=TRUE, the column(s) to generate
subtotals.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'datfreq'.</p>
</td></tr>
<tr><td><code id="datFreq_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, pop-up windows will appear for user-interface.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, then user is prompted for input. If partial parameters,
default parameter values are used.
</p>


<h3>Value</h3>

<table>
<tr><td><code>freqtable</code></td>
<td>
<p> Data frame. The frequency table. </p>
</td></tr></table>
<p> If
savedata=TRUE, a comma-delimited file of the frequency table is written to
the outfolder.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up data for example
tab &lt;- data.frame(cbind(CONDCLASS = c(1, 1, 2, 1, 3, 3, 3, 1, 1, 1, 2, 1), 
		                     FORTYPCD = c(182, 184, 201, 221, 221, 184, 221, 182,
		                                  182, 201, 182, 221)))

# Frequency table with "FORTYPCD"       
datFreq(x = tab,
        xvar = "FORTYPCD")
		                                  
# Frequency table with "CONDCLASS" and "FORTYPCD" 		                                   
datFreq(x = tab,
        xvar = c("CONDCLASS", "FORTYPCD"))

# Frequency table with "CONDCLASS" and "FORTYPCD", adding total and subtotal
# rows 		                                   
datFreq(x = tab,
        xvar = c("CONDCLASS", "FORTYPCD"), 
        total = TRUE, 
        subtotal = TRUE)
        
# Frequency table for WYtree, multiple variables, subtotal options
datFreq(x = FIESTA::WYtree,
        xvar = c("SPGRPCD", "SPCD", "STATUSCD"), 
	       subtotal = TRUE, subtotalcol = "SPCD")
</code></pre>

<hr>
<h2 id='datLineplot'>Data - Generates line graph.</h2><span id='topic+datLineplot'></span>

<h3>Description</h3>

<p>Generate a line plot of multiple estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datLineplot(
  x,
  xvar,
  yvar,
  plotCI = FALSE,
  sevar = NULL,
  CIlst = c(68, 95),
  CIcolorlst = c("dark grey", "black"),
  addshade = FALSE,
  device.type = "dev.new",
  jpeg.res = 300,
  device.height = 5,
  device.width = 8,
  ylim = NULL,
  divideby = NULL,
  ylabel = NULL,
  xlabel = NULL,
  xticks = NULL,
  mar = NULL,
  addlegend = FALSE,
  main = NULL,
  cex.main = 1,
  cex.label = 1,
  cex.names = 0.9,
  las.xnames = 0,
  las.ynames = 1,
  savedata = FALSE,
  outfolder = NULL,
  outfn = NULL,
  outfn.pre = NULL,
  outfn.date = TRUE,
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datLineplot_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) - a frequency table.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_xvar">xvar</code></td>
<td>
<p>String. Name of X variable.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_yvar">yvar</code></td>
<td>
<p>String. Name of the y variable (e.g., FREQ).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_plotci">plotCI</code></td>
<td>
<p>Logical. If TRUE, adds confidence intervals to plot as dotted
lines.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_sevar">sevar</code></td>
<td>
<p>String. Name of the variable with standard error values.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_cilst">CIlst</code></td>
<td>
<p>String. Numeric vector. If plotCI=TRUE, identifies percent
confidence interval to add to plot.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_cicolorlst">CIcolorlst</code></td>
<td>
<p>String. Character vector. If plotCI=TRUE, identifies
colors to plot confidence interval lines. Must be same length as CIlst and
from colors() list.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_addshade">addshade</code></td>
<td>
<p>Logical. If TRUE, adds a light grey shading between the
large confidence interval lines.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_device.type">device.type</code></td>
<td>
<p>String. Type(s) of device for plotting (&quot;dev.new&quot;, &quot;jpg&quot;,
&quot;pdf&quot;).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_jpeg.res">jpeg.res</code></td>
<td>
<p>Integer. Resolution for jpeg image.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_device.height">device.height</code></td>
<td>
<p>Integer. Height (in inches) of barplot, if writing to
file.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_device.width">device.width</code></td>
<td>
<p>Integer. Width (in inches) of barplot, if writing to
file.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_ylim">ylim</code></td>
<td>
<p>Number. A vector of min and max values, c(min,max) for the y
axis (or x axis if horiz=TRUE). If NULL, defaults to maximum y value. If
errbars=TRUE, the ylim defaults to the maximum y value plus the standard
error.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_divideby">divideby</code></td>
<td>
<p>String. Conversion number for output ('hundred', 'thousand',
'million').</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_ylabel">ylabel</code></td>
<td>
<p>String. Label for the y axis (same as ylab).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_xlabel">xlabel</code></td>
<td>
<p>String. Label for the x axis (same as xlab).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_xticks">xticks</code></td>
<td>
<p>Numeric vector. Vector of tick marks for x axis.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_mar">mar</code></td>
<td>
<p>See par.. A numerical vector representing number of lines for
margins (c(bottom, left, top, right).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_addlegend">addlegend</code></td>
<td>
<p>Logical. If TRUE, adds legend to bar plot (only applicable
if grouping).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_main">main</code></td>
<td>
<p>String. Title for plot.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_cex.main">cex.main</code></td>
<td>
<p>Number. Expansion factor for title.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_cex.label">cex.label</code></td>
<td>
<p>Number. A number representing cex in barplot (size
expansion of x and/or ylabels.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_cex.names">cex.names</code></td>
<td>
<p>Number. Expansion factor for axis names (bar labels) (e.g.,
0.5 represents half the size.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_las.xnames">las.xnames</code></td>
<td>
<p>Number. The direction of x variable names (0,1,3).
0:diagonal (Default), 1:horizontal; 3:vertical.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_las.ynames">las.ynames</code></td>
<td>
<p>Number. The direction of y variable names (0,1,3).
0:diagonal (Default), 1:horizontal; 3:vertical.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder (jpg and
pdf).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The name of the output folder. If savedata=TRUE,
all output saved to the outfolder. If savedata=FALSE, only a text file of
input parameters is saved.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_outfn">outfn</code></td>
<td>
<p>String. The name of the output file if savedata=TRUE (*.csv).
Do not include extension. If NULL, the file will be named
BARPLOT_'yvar_date'.csv</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_outfn.pre">outfn.pre</code></td>
<td>
<p>String. Add a prefix to output name (e.g., &quot;01&quot;).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_outfn.date">outfn.date</code></td>
<td>
<p>Logical. If TRUE, add date to end of outfile (e.g.,
outfn_'date'.csv).</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE and exportshp=TRUE, overwrite files in
outfolder.</p>
</td></tr>
<tr><td><code id="datLineplot_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to barplot(), including a list of
arguments for legend() arguments (e.g., args.legend=list(x=&quot;topleft&quot;,
&quot;bty=&quot;n&quot;), for moving legend to topleft and removing box around legend).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If parameters = NULL, then it will prompt user for input.
</p>


<h3>Value</h3>

<p>Outputs barplot to display window.
</p>


<h3>Note</h3>

<p>If savedata = TRUE, writes a jpg and pdf of barplot to outfolder.
</p>
<p>To add legend parameters, add a parameter named args.legend, defined as a
list of specific legend parameters (see ?legend)...  ex. ..,
args.legend=list(x=&quot;topright&quot;). If specifying x and y, x defines the lower
right corner of legend box and y defines the upper right corner of box.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Lineplot of cubic foot volume by above-ground biomass, Wyoming tree data
# datLineplot(x = WYtree, xvar = "VOLCFNET", yvar = "DRYBIO_AG") # needs work
</code></pre>

<hr>
<h2 id='datLUTclass'>Data - Create a variable with classified values.</h2><span id='topic+datLUTclass'></span>

<h3>Description</h3>

<p>Merge a look-up table to define categories of continuous data in x (e.g.,
DIA).  Adds a variable to x, defining as: xvar &gt;= MIN (and xvar &lt; MAX).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datLUTclass(
  x,
  xvar = NULL,
  LUT = NULL,
  minvar = NULL,
  maxvar = NULL,
  cutbreaks = NULL,
  cutlabels = NULL,
  LUTclassnm = NULL,
  label.dec = 1,
  NAto0 = FALSE,
  vars2keep = NULL,
  keepcutbreaks = FALSE,
  dsn = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  dbwrite = FALSE,
  dbreturn = TRUE,
  overwrite = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datLUTclass_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) or table in dsn. 
The data table with variable to classify.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_xvar">xvar</code></td>
<td>
<p>String. Name of variable in the data table to join to.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_lut">LUT</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). Name of the look-up
table with collapsed classes. Lookup table should include minimum values for
classes, maximum values for classes, and a name of class (i.e., LUTclassnm).
Maximum values and names are optional.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_minvar">minvar</code></td>
<td>
<p>String. If LUT is not null, name of variable with minimimum
class value (&gt;= minvar).</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_maxvar">maxvar</code></td>
<td>
<p>String. Optional. If LUT is not null, name of variable with
maximum class value (&lt;= maxvar).</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_cutbreaks">cutbreaks</code></td>
<td>
<p>Numeric vector. Vector of numbers for minimum class values.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_cutlabels">cutlabels</code></td>
<td>
<p>String vector. Optional. Vector of names for classes. If
NULL, class names are generated from cutbreaks.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_lutclassnm">LUTclassnm</code></td>
<td>
<p>String. Optional. Name of classified variable in x. If LUT
is not null and class names are included, this is the name of variable with
class names. If NULL, a class names are generated from minvar or minvar and
maxvar with default name equal to 'xvar'CL.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_label.dec">label.dec</code></td>
<td>
<p>Integer. Number of decimals to include in label.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, converts NA values to 0 before
classification.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_vars2keep">vars2keep</code></td>
<td>
<p>String vector. Variable names from LUT to keep (append) to
x.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_keepcutbreaks">keepcutbreaks</code></td>
<td>
<p>Logical. If TRUE, the cutbreaks used for creating
classes are appended to dataset.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_dsn">dsn</code></td>
<td>
<p>String. Data source name of database with x.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_dbwrite">dbwrite</code></td>
<td>
<p>Logical. If TRUE, write class column to database table x.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_dbreturn">dbreturn</code></td>
<td>
<p>Logical. If TRUE, return table with class column.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, and the class name already exists 
in x, overwrites class name.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'datlutcl'.</p>
</td></tr>
<tr><td><code id="datLUTclass_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use datLUTclass() to prompt for input.
</p>


<h3>Value</h3>

<table>
<tr><td><code>xLUT</code></td>
<td>
<p> Input data table with look-up table variable(s). </p>
</td></tr>
<tr><td><code>LUTclassnm</code></td>
<td>
<p> Name of the classified variable. </p>
</td></tr> <tr><td><code>LUT</code></td>
<td>
<p> Look-up
table with categories. </p>
</td></tr>
</table>
<p>tablst
If savedata = TRUE, a comma-delimited file is output to the outfolder as
outfn.  If outfn = NULL, the name of the file will be datlut_'date'.csv.
</p>


<h3>Note</h3>

<p>The look-up table format must be similar to the following table Set
LUTclassnm = VARCLNM. MAX and VALCLNM columns are optional.
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>MIN</b> </td><td style="text-align: left;"> <b>MAX</b> </td><td style="text-align: left;"> <b>VARCLNM</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
1.0 </td><td style="text-align: left;"> 4.9 </td><td style="text-align: left;"> 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 5.0 </td><td style="text-align: left;"> 9.9 </td><td style="text-align: left;"> 2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 10.0 </td><td style="text-align: left;"> 15.0
</td><td style="text-align: left;"> 3 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 15.0 </td><td style="text-align: left;"> 19.9 </td><td style="text-align: left;"> 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 20.0 </td><td style="text-align: left;"> 24.9 </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 25.0 </td><td style="text-align: left;"> 49.9 </td><td style="text-align: left;"> 6 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(FIESTA::ref_diacl2in)
WYtreelut &lt;- datLUTclass(FIESTA::WYtree,
                         xvar = "DIA",
                         LUT = FIESTA::ref_diacl2in,
                         LUTclassnm = "DIACL2IN")
names(WYtreelut)
head(WYtreelut$xLUT)
table(WYtreelut$xLUT$DIACL2IN)

WYtreelut2 &lt;- datLUTclass(FIESTA::WYtree,
                          xvar = "DIA",
                          cutbreaks = c(1, 5, 25, 50, 100),
                          LUTclassnm = "DIACL2IN")
names(WYtreelut2)
head(WYtreelut2$xLUT)
table(WYtreelut2$xLUT$DIACL2IN)

#' Create look-up table of stand age classes
MIN &lt;- c(0, 20, 40, 60, 80, 101)
STDAGENM &lt;- c("0-20", "21-40", "41-60", "61-80", "81-100", "101+")
stdagelut &lt;- data.frame(MIN = MIN, STDAGENM = STDAGENM)
stdagelut

WYcondlut &lt;- datLUTclass(FIESTA::WYcond,
                         xvar = "STDAGE",
                         LUT = stdagelut,
                         LUTclassnm = "STDAGENM")
names(WYcondlut)
head(WYcondlut$xLUT)
table(WYcondlut$xLUT$STDAGENM)
</code></pre>

<hr>
<h2 id='datLUTnm'>Data - Gets variable description or class.</h2><span id='topic+datLUTnm'></span>

<h3>Description</h3>

<p>Merge a look-up table to append new variables, names, or categories to x.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datLUTnm(
  xvar,
  x = NULL,
  uniquex = NULL,
  LUT = NULL,
  LUTvar = NULL,
  LUTnewvar = NULL,
  LUTnewvarnm = NULL,
  FIAname = FALSE,
  group = FALSE,
  NAclass = "Other",
  add0 = FALSE,
  spcdname = "COMMON_SCIENTIFIC",
  stopifmiss = FALSE,
  xtxt = NULL,
  dsn = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  dbwrite = FALSE,
  dbreturn = TRUE,
  overwrite = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datLUTnm_+3A_xvar">xvar</code></td>
<td>
<p>String. Name of variable in the data table to join to.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). The data table with
variable to classify.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_uniquex">uniquex</code></td>
<td>
<p>String. Unique values to match, if x is NULL.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_lut">LUT</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). Name of the file with
collapsed classes (If FIAname=FALSE).</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_lutvar">LUTvar</code></td>
<td>
<p>String. Name of variable in LUT with values matching that
xvar.  If LUTvar=NULL, LUTvar=xvar.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_lutnewvar">LUTnewvar</code></td>
<td>
<p>String. Name(s) of other variable(s) in the look-up table
to include in join. If NULL, all other variables in table will be included.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_lutnewvarnm">LUTnewvarnm</code></td>
<td>
<p>String. Different name(s) for LUTnewvar. If NULL, names
will default to LUTnewvar. The length of LUTnewvarnm must equal the length
for LUTnewvar.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_fianame">FIAname</code></td>
<td>
<p>Logical. If TRUE, get FIA reference name based on (ref_codes)
within FIESTA.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_group">group</code></td>
<td>
<p>Logical. If TRUE and FIA=TRUE, the group variables in reference
table (ref_codes) are merged to data table (GROUPCD, GROUPNM).</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_naclass">NAclass</code></td>
<td>
<p>String. NA values in xvar will be changed to NAclass.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_add0">add0</code></td>
<td>
<p>Logical. IF TRUE, keep all codes in look up table. If FALSE,
only include codes that are in x.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_spcdname">spcdname</code></td>
<td>
<p>String. Name for species output type ('COMMON', 'SCIENTIFIC', 
'SYMBOL', 'COMMON_SCIENTIFIC').</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_stopifmiss">stopifmiss</code></td>
<td>
<p>Logical. IF TRUE, stops function if missing codes in LUTx.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_xtxt">xtxt</code></td>
<td>
<p>String.* Name of x table for more useful information in
warnings.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_dsn">dsn</code></td>
<td>
<p>String. Data source name of database with x.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logica. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_dbwrite">dbwrite</code></td>
<td>
<p>Logical. If TRUE, write class column to database table x.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_dbreturn">dbreturn</code></td>
<td>
<p>Logical. If TRUE, return table with class column.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, and the class name already exists 
in x, overwrites class name.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'datlut'.</p>
</td></tr>
<tr><td><code id="datLUTnm_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>xLUT</code></td>
<td>
<p> The input data table with look-up table variable(s). </p>
</td></tr>
<tr><td><code>xLUTnm</code></td>
<td>
<p> Name of the new variable(s). </p>
</td></tr> <tr><td><code>LUT</code></td>
<td>
<p> Look up table with
categories. </p>
</td></tr>
</table>
<p>If savedata = TRUE, a comma-delimited file is output to the outfolder as
outfn.  If outfn = NULL, the name of the file will be datlut_'date'.csv.
</p>


<h3>Note</h3>

<p>For available reference tables:
sort(unique(ref_codes$VARIABLE))
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Append forest type names using the reference table above.
ref_fortypcd &lt;- ref_codes[ref_codes$VARIABLE == "FORTYPCD",]
WYcondlut &lt;- datLUTnm(WYcond,
                      xvar = "FORTYPCD",
                      LUT = ref_fortypcd,
                      LUTvar = "VALUE",
                      LUTnewvar = "MEANING",
                      LUTnewvarnm = "FORTYPNM")
names(WYcondlut)
WYcond2 &lt;- WYcondlut$xLUT
head(WYcond2[WYcond2$FORTYPCD &gt; 0, ])

# Append forest type names the FIAname parameter. If the xvar is in the stored
# reference table, the name and values will automatically be appended.
WYcondlut2 &lt;- datLUTnm(WYcond,
                       xvar = "FORTYPCD",
                       FIAname = TRUE)
names(WYcondlut2)
WYcond3 &lt;- WYcondlut2$xLUT
head(WYcond3[WYcond3$FORTYPCD &gt; 0, ])
</code></pre>

<hr>
<h2 id='datLUTspp'>Data - Gets variable description or class for SPCD.</h2><span id='topic+datLUTspp'></span>

<h3>Description</h3>

<p>Merge the ref_species table to append new variables, names, or categories to x.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datLUTspp(
  x = NULL,
  uniquex = NULL,
  NAclass = "Other",
  group = FALSE,
  states = NULL,
  spcdname = "COMMON",
  add0 = FALSE,
  stopifmiss = FALSE,
  xtxt = NULL,
  dsn = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  dbwrite = FALSE,
  dbreturn = TRUE,
  overwrite = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datLUTspp_+3A_x">x</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). The data table with
variable to classify.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_uniquex">uniquex</code></td>
<td>
<p>String. Unique values of SPCD to match, if x is NULL.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_naclass">NAclass</code></td>
<td>
<p>String. NA values in xvar will be changed to NAclass.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_group">group</code></td>
<td>
<p>Logical. If TRUE, the group variable in ref_species
are merged to data table (E_SPGRPCD, W_SPGRPCD), depending on state(s) 
specified. If states overlap both E and W regions, the region with 
majority is used or E if equal. The group name is merged from 
ref_codes, SPGRPCD Variable.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_states">states</code></td>
<td>
<p>String. Name of state(s) the x table is from.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_spcdname">spcdname</code></td>
<td>
<p>String. Name for species output type ('COMMON', 'SCIENTIFIC', 
'SYMBOL', 'COMMON_SCIENTIFIC').</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_add0">add0</code></td>
<td>
<p>Logical. IF TRUE, keep all codes in look up table. If FALSE,
only include codes that are in x.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_stopifmiss">stopifmiss</code></td>
<td>
<p>Logical. IF TRUE, stops function if missing codes in LUTx.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_xtxt">xtxt</code></td>
<td>
<p>String.* Name of x table for more useful information in
warnings.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_dsn">dsn</code></td>
<td>
<p>String. Data source name of database with x.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logica. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_dbwrite">dbwrite</code></td>
<td>
<p>Logical. If TRUE, write class column to database table x.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_dbreturn">dbreturn</code></td>
<td>
<p>Logical. If TRUE, return table with class column.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, and the class name already exists 
in x, overwrites class name.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'datlut'.</p>
</td></tr>
<tr><td><code id="datLUTspp_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>xLUT</code></td>
<td>
<p> The input data table with look-up table variable(s). </p>
</td></tr>
<tr><td><code>xLUTnm</code></td>
<td>
<p> Name of the new variable(s). </p>
</td></tr> <tr><td><code>LUT</code></td>
<td>
<p> Look up table with
categories. </p>
</td></tr>
</table>
<p>If savedata = TRUE, a comma-delimited file is output to the outfolder as
outfn.  If outfn = NULL, the name of the file will be datlut_'date'.csv.
</p>


<h3>Note</h3>

<p>For available reference tables:
sort(unique(ref_codes$VARIABLE))
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>WYtreelut &lt;- datLUTspp(WYtree)
names(WYtreelut)
WYtree2 &lt;- WYtreelut$xLUT
head(WYtree2)
</code></pre>

<hr>
<h2 id='datPBplotchg'>Data - Generates barplot of photo-based change estimates.</h2><span id='topic+datPBplotchg'></span>

<h3>Description</h3>

<p>Generate a bar plot of net change for photo-based estimates of land use /
land cover change.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datPBplotchg(gainloss, CI = 95, figTitle = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datPBplotchg_+3A_gainloss">gainloss</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv) - table with gain
loss estimates.</p>
</td></tr>
<tr><td><code id="datPBplotchg_+3A_ci">CI</code></td>
<td>
<p>Number. Confidence Interval to include on plot.</p>
</td></tr>
<tr><td><code id="datPBplotchg_+3A_figtitle">figTitle</code></td>
<td>
<p>String. Title of figure.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Outputs barplot to display window.
</p>


<h3>Note</h3>

<p>If savedata = TRUE, writes a jpg and pdf of barplot to outfolder.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>

<hr>
<h2 id='datPBpnt2pct'>Data - Transpose point data to plot-level percent by domain.</h2><span id='topic+datPBpnt2pct'></span>

<h3>Description</h3>

<p>Calculates percent point by plot and domain and transpose to plot level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datPBpnt2pct(pnt, uniqueid, tvar, othervars = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datPBpnt2pct_+3A_pnt">pnt</code></td>
<td>
<p>DF/DT or comma-delimited file (*.csv). Point-level table with one
record per point. If NULL, aggregated point counts must be in pntcnt.</p>
</td></tr>
<tr><td><code id="datPBpnt2pct_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String. Name of unique identifier of plot in pnt.</p>
</td></tr>
<tr><td><code id="datPBpnt2pct_+3A_tvar">tvar</code></td>
<td>
<p>String. Name of variable to transpose.</p>
</td></tr>
<tr><td><code id="datPBpnt2pct_+3A_othervars">othervars</code></td>
<td>
<p>String vector. Name(s) of plot-level variables to merge
with transposed data.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>pltdom.pct</code></td>
<td>
<p> Data frame with transposed data. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load necessary data from FIESTA
## Point data
icepntfn &lt;- system.file("extdata",
                        "PB_data/icepnt_utco1135.csv",
                         package = "FIESTA")
icepnt &lt;- read.csv(icepntfn)

# Convert to percent
percent &lt;- datPBpnt2pct(pnt = icepnt,
                        uniqueid = "plot_id",
                        tvar = "cover_1")
head(percent)
</code></pre>

<hr>
<h2 id='datPivot'>Data - Generates a pivot table.</h2><span id='topic+datPivot'></span>

<h3>Description</h3>

<p>Generates a pivot table of values by x row and y column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datPivot(
  x,
  pvar,
  xvar,
  yvar,
  pfun = sum,
  xfilter = NULL,
  NAto0 = TRUE,
  dropNAxvar = TRUE,
  dropNAyvar = TRUE,
  pvar.round = 6,
  returnDT = FALSE,
  savedata = FALSE,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datPivot_+3A_x">x</code></td>
<td>
<p>Dataframe. Table with pivot variables.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_pvar">pvar</code></td>
<td>
<p>String. The name of the variable for pivot table values.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_xvar">xvar</code></td>
<td>
<p>String. The name of the variable for rows.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_yvar">yvar</code></td>
<td>
<p>String. The name of the variable for columns.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_pfun">pfun</code></td>
<td>
<p>Function. The name of the function to use for pivot table values
(ex. sum, mean, max).</p>
</td></tr>
<tr><td><code id="datPivot_+3A_xfilter">xfilter</code></td>
<td>
<p>String. A filter to subset the datatable table x before
pivoting (ex. &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="datPivot_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, converts NA values to 0.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_dropnaxvar">dropNAxvar</code></td>
<td>
<p>Logical. If TRUE, removes columns that are NA.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_dropnayvar">dropNAyvar</code></td>
<td>
<p>Logical. If TRUE, removes rows that have NA values.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_pvar.round">pvar.round</code></td>
<td>
<p>Integer. Number to round pvar values to.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, returns a datatable.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output data to outfolder.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.  If out_layer = NULL, 
default = 'datpivot'.</p>
</td></tr>
<tr><td><code id="datPivot_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, pop-up windows will appear for user-interface.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>ptab</code></td>
<td>
<p> Matrix. The pivot table. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Pivot WYcond table
datPivot(x = FIESTA::WYcond,
         pvar = "CONDPROP_UNADJ",
         xvar = "FORTYPCD",
         yvar = "STDSZCD")

# Pivot WYtree table
datPivot(x = FIESTA::WYtree,
         pvar = "TPA_UNADJ",
         xvar = "SPCD",
         yvar = "STATUSCD",
         pfun = mean,
         NAto0 = TRUE)
</code></pre>

<hr>
<h2 id='datPlotcnt'>Database - Get plot counts.</h2><span id='topic+datPlotcnt'></span>

<h3>Description</h3>

<p>Extract plot counts by inventory year and state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datPlotcnt(
  plt,
  yrtype = "INVYR",
  states = NULL,
  designcd = FALSE,
  forsamp = TRUE,
  total = TRUE,
  subtotal = TRUE,
  savedata = FALSE,
  outfolder = NULL,
  outfn = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datPlotcnt_+3A_plt">plt</code></td>
<td>
<p>Data frame. Table of plot-level variables to count plots. If
using this table, it must include INVYR.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_yrtype">yrtype</code></td>
<td>
<p>String. Type of year to categorize data (&quot;INVYR&quot;, &quot;MEASYEAR&quot;).</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_states">states</code></td>
<td>
<p>String vector.  The states in plt table.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_designcd">designcd</code></td>
<td>
<p>Logical. If TRUE, includes FIA design codes in the table.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_forsamp">forsamp</code></td>
<td>
<p>Logical. If TRUE, includes forest/nonforest/nonsampled codes
in the table.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_total">total</code></td>
<td>
<p>Logical. If TRUE, a row is added to bottom of table with a
total for the whole table.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_subtotal">subtotal</code></td>
<td>
<p>Logical. If TRUE, a row is added to bottom of each section
for subtotals.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder as comma-delimited
file (*.csv).  No objects are returned. If FALSE, the data are saved as R
objects and returned to user.  See details for caveats.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The output folder path. If NULL and savedata=TRUE
or parameters=TRUE, outfolder is the working directory.</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_outfn">outfn</code></td>
<td>
<p>String. The name of the output file. If NULL, defaults to
pltcnt_'date'.csv</p>
</td></tr>
<tr><td><code id="datPlotcnt_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, gui windows pop up for parameter selection.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pltcnt - a dataframe of counts (YEAR, STABBR, STCD, PLOTS,
NONSAMPLED, FOREST, NONFOREST)
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>

<hr>
<h2 id='datSumCond'>Data - Aggregates numeric condition data to plot level.</h2><span id='topic+datSumCond'></span>

<h3>Description</h3>

<p>Aggregates CONDPROP_UNADJ variable or other continuous condition variables
to plot level with option to apply condition filters. If condition variable
is not CONDPROP_UNADJ the variable is multiplied by CONDPROP_UNADJ for
weighted sum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datSumCond(
  cond = NULL,
  datsource = "obj",
  data_dsn = NULL,
  plt = NULL,
  subp_cond = NULL,
  subplot = NULL,
  cuniqueid = "PLT_CN",
  puniqueid = "CN",
  condid = "CONDID",
  bycond = FALSE,
  bysubp = FALSE,
  subpid = "SUBP",
  csumvar = NULL,
  csumvarnm = NULL,
  cfilter = NULL,
  getadjplot = FALSE,
  adjcond = FALSE,
  NAto0 = FALSE,
  cround = 5,
  returnDT = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datSumCond_+3A_cond">cond</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). Condition-level
table with aggregate variable and CONDPROP_UNADJ.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of data ('obj', 'csv', 'sqlite', 'gdb').</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_plt">plt</code></td>
<td>
<p>Data frame, comma-delimited file (*.csv), shapefile (*.shp), or
database file. Plot-level table to join the aggregated tree data to (if
bycond=FALSE). Nonsampled plots (PLOT_STATUS_CD = 3) are removed. Optional.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_subp_cond">subp_cond</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot condition-level table to use to sum condition proportions, 
if bysubp=TRUE.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_subplot">subplot</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot-level table to used to calculate adjustment factors, to remove 
nonsampled conditions (SUBP_STATUS_CD = 3). This table is optional.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_cuniqueid">cuniqueid</code></td>
<td>
<p>String. Unique identifier of cond (default = &quot;PLT_CN&quot;).</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Unique identifier of plt (default = &quot;CN&quot;).</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_condid">condid</code></td>
<td>
<p>String. Unique identifier for conditions.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_bycond">bycond</code></td>
<td>
<p>Logical. If TRUE, the data are aggregated to the condition
level (by: cuniqueid, condid). If FALSE, the data are aggregated to the plot
level (by: puniqueid).</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_bysubp">bysubp</code></td>
<td>
<p>Logical. If TRUE, data are aggregated to the subplot level.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_subpid">subpid</code></td>
<td>
<p>String. Unique identifier of each subplot.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_csumvar">csumvar</code></td>
<td>
<p>String. One or more variable names to sum to plot level.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_csumvarnm">csumvarnm</code></td>
<td>
<p>String. Name of the resulting aggregated plot-level
variable(s).  Default = csumvar + '_PLT'.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_cfilter">cfilter</code></td>
<td>
<p>String. A filter to subset the cond data before aggregating
(e.g., &quot;COND_STATUS_CD == 1&quot;). Must be R syntax.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_getadjplot">getadjplot</code></td>
<td>
<p>Logical. If TRUE, adjustments are calculated for
nonsampled conditions on plot.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_adjcond">adjcond</code></td>
<td>
<p>Logical. If TRUE, csumvar condition variables are adjusted
for nonsampled conditions by plot.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, convert NA values to 0.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_cround">cround</code></td>
<td>
<p>Number. The number of digits to round to. If NULL, default=5.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, returns data.table object(s). If FALSE,
returns data.frame object(s).</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'condsum'.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datSumCond_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variable = NULL, then it will prompt user for input.
</p>


<h3>Value</h3>

<p>A list of the following items: </p>
<table>
<tr><td><code>condsum</code></td>
<td>
<p> Data frame.
Plot-level table with aggregated condition attribute. </p>
</td></tr> <tr><td><code>cfilter</code></td>
<td>

<p>Condition filter. </p>
</td></tr>
</table>
<p>If savedata=TRUE, condsum is saved to the outfolder.
</p>


<h3>Note</h3>

<p>Nonsampled plots are removed from table.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Aggregate LIVE_CANOPY_CVR_PCT to plot, weighted by CONDPROP_UNADJ
condsum &lt;- datSumCond(cond = FIESTA::WYcond,
                      csumvar = "LIVE_CANOPY_CVR_PCT")$condsum

# Check results
condsum[condsum$PLT_CN == 40404737010690,]
FIESTA::WYcond[FIESTA::WYcond$PLT_CN == 40404737010690,]
</code></pre>

<hr>
<h2 id='datSumTree'>Data - Aggregates tree and/or seedling data to the plot, condition,
or subplot level.</h2><span id='topic+datSumTree'></span>

<h3>Description</h3>

<p>Aggregates tree data (e.g., VOLCFNET) and/or seedling data (e.g., TPA_UNADJ) 
to plot, condition, or subplot. Includes options for filtering tree data, 
expanding to plot by multiplying by trees per acre (TPA_UNADJ), or adjusting 
for nonresponse at the plot level (getadjplot).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datSumTree(
  tree = NULL,
  seed = NULL,
  cond = NULL,
  plt = NULL,
  subp_cond = NULL,
  subplot = NULL,
  datsource = "obj",
  data_dsn = NULL,
  tuniqueid = "PLT_CN",
  cuniqueid = "PLT_CN",
  puniqueid = "CN",
  bycond = FALSE,
  condid = "CONDID",
  bysubp = FALSE,
  subpuniqueid = "PLT_CN",
  subpid = "SUBP",
  tsumvarlst = NULL,
  tsumvarnmlst = NULL,
  addseed = FALSE,
  seedonly = FALSE,
  woodland = "Y",
  TPA = TRUE,
  tfun = sum,
  ACI = FALSE,
  tfilter = NULL,
  lbs2tons = TRUE,
  metric = FALSE,
  getadjplot = FALSE,
  adjtree = FALSE,
  adjvar = "tadjfac",
  adjTPA = 1,
  NAto0 = FALSE,
  tround = 5,
  returnDT = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datSumTree_+3A_tree">tree</code></td>
<td>
<p>Dataframe or comma-delimited file (*.csv). The tree-level table.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_seed">seed</code></td>
<td>
<p>Dataframe or comma-delimited file (*.csv). The seedling table.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_cond">cond</code></td>
<td>
<p>Dataframe or comma-delimited file (*.csv). Condition-level table
to join the aggregated Ftree data to, if bycond=TRUE. This table also may be
used for condition proportion or strata variables used if adjcond or
adjstrata = TRUE (See details below).  This table is optional.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_plt">plt</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Plot-level table to join the aggregated tree data to, if bycond=FALSE. This
table is optional.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_subp_cond">subp_cond</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot condition-level table to use to sum condition proportions, 
if bysubp=TRUE.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_subplot">subplot</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot-level table to used to calculate adjustment factors, to remove 
nonsampled conditions (SUBP_STATUS_CD = 3). This table is optional. If 
included the aggregated tree data are joined to subplot before returning.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of data ('obj', 'csv', 'sqlite', 'gdb').</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tuniqueid">tuniqueid</code></td>
<td>
<p>String. Unique identifier of plt in tree table.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_cuniqueid">cuniqueid</code></td>
<td>
<p>String. Unique identifier of plt in cond table if cond is
NOT NULL.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Unique identifier of plt table if plt is NOT NULL.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_bycond">bycond</code></td>
<td>
<p>Logical. If TRUE, the data are aggregated to the condition
level (by: cuniqueid, condid). If FALSE, the data are aggregated to the plot
level (by: puniqueid). If bysubp = TRUE and bycond = TRUE, data are 
aggregated by subpuniqueid, subpid, condid.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_condid">condid</code></td>
<td>
<p>String. Unique identifier for conditions.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_bysubp">bysubp</code></td>
<td>
<p>Logical. If TRUE, data are aggregated to the subplot level.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_subpuniqueid">subpuniqueid</code></td>
<td>
<p>String. Unique identifier of plot in subplot and 
subp_cond table.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_subpid">subpid</code></td>
<td>
<p>String. Unique identifier of each subplot.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tsumvarlst">tsumvarlst</code></td>
<td>
<p>String (vector). Tree-level variable(s) to aggregate
(e.g., &quot;TPA_UNADJ&quot;, &quot;BA&quot;). Use &quot;TPA_UNADJ&quot; (tfun=sum) for summed tree
count.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tsumvarnmlst">tsumvarnmlst</code></td>
<td>
<p>String (vector). Name of the tree-level variable(s) to
aggregate (e.g., &quot;TPALIVE&quot;, &quot;BALIVE&quot;). This list must have the same number
of variables as tsumvarlst and be in respective order. If NULL, the default
names will be tsumvar'_tfun' (e.g., &quot;TPA_UNADJ_SUM&quot;, &quot;BA_SUM&quot;).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_addseed">addseed</code></td>
<td>
<p>Logical. If TRUE, add seedling counts to tree counts. Note:
tdomvar must be 'SPCD' or 'SPGRPCD'.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_seedonly">seedonly</code></td>
<td>
<p>Logical. If TRUE, seedling counts only. Note: tdomvar
must be 'SPCD' or 'SPGRPCD'.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tpa">TPA</code></td>
<td>
<p>Logical. If TRUE, tsumvarlst variable(s) are multiplied by the
respective trees-per-acre variable (see details) to get per-acre
measurements.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tfun">tfun</code></td>
<td>
<p>Function. The name of the function to use to aggregate the data
(e.g., sum, mean, max).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_aci">ACI</code></td>
<td>
<p>Logical. If TRUE, if ACI (All Condition Inventory) plots exist,
any trees on these plots will be included in summary. If FALSE, you must
include condition table.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tfilter">tfilter</code></td>
<td>
<p>String. Filter to subset the tree data before aggregating
(e.g., &quot;STATUSCD == 1&quot;). This must be in R syntax. If tfilter=NULL, user is
prompted.  Use tfilter=&quot;NONE&quot; if no filters.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_lbs2tons">lbs2tons</code></td>
<td>
<p>Logical. If TRUE, converts biomass or carbon variables from
pounds to tons (1 pound = 0.0005 short tons).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_metric">metric</code></td>
<td>
<p>Logical. If TRUE, converts response to metric units based on
FIESTA::ref_conversion, if any variable in tsumvarlst is in
FIESTAutils::ref_units.  Note: if TPA, TPA is converted to trees per hectare
(TPH: 1/ tpavar * 0.4046860).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_getadjplot">getadjplot</code></td>
<td>
<p>Logical. If TRUE, adjustments are calculated for
nonsampled conditions on plot.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_adjtree">adjtree</code></td>
<td>
<p>Logical. If TRUE, trees are individually adjusted by
adjustment factors.  Adjustment factors must be included in tree table (see
adjvar).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_adjvar">adjvar</code></td>
<td>
<p>String. If adjtree=TRUE, the name of the variable to use for
multiplying by adjustment (e.g., tadjfac).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_adjtpa">adjTPA</code></td>
<td>
<p>Numeric. A tree-per-acre adjustment. Use for DESIGNCD=1
(annual inventory), if using less than 4 subplots. If using only 1 sublot
for estimate, adjTPA=4. The default is 1.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, convert NA values to 0.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_tround">tround</code></td>
<td>
<p>Number. The number of digits to round to. If NULL, default=5.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, returns data.table object(s). If FALSE,
returns data.frame object(s).</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'treesum'.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datSumTree_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For adjcond (bycond=FALSE): <br /> If you want to summarize trees-per-acre
information aggregated to plot or condition level, you need to include a TPA
variable in tree table. <br /> For tsumvars = GROWCFGS, GROWBFSL, GROWCFAL,
FGROWCFGS, FGROWBFSL, or FGROWCFAL, you must have TPAGROW_UNADJ <br /> For
tsumvars = MORTCFGS, MORTBFSL, MORTCFAL, FMORTCFGS, FMORTBFSL, or FMORTCFAL,
you must have TPAMORT_UNADJ <br /> For tsumvars = REMVCFGS, REMVBFSL, REMVCFAL,
FREMVCFGS, FREMVBFSL, or FREMVCFAL, you must have TPAREMV_UNADJ <br />
</p>
<p>If you want to adjust plot-level or subplot-level information by condition 
proportions (adjplot), you need to include CONDID &amp; CONDPROP_UNADJ in cond 
or tree table and COND_STATUS_CD. <br />
</p>


<h3>Value</h3>

<p>A list of the following items: 
</p>
<table>
<tr><td><code>treedat</code></td>
<td>
<p> Data frame. Plot or condition-level table with aggregated 
tree attributes. </p>
</td></tr> 
<tr><td><code>sumvars</code></td>
<td>
<p> String vector. Name(s) of the output aggregated tree 
attributes. </p>
</td></tr>
<tr><td><code>tunitlst</code></td>
<td>
<p> String list. Units of output, when available. </p>
</td></tr>
<tr><td><code>tfilter</code></td>
<td>
<p> String list. Filter used. </p>
</td></tr>
<tr><td><code>meta</code></td>
<td>
<p> Data frame. Associated metadata, when available. </p>
</td></tr>
</table>
<p>If savedata=TRUE<br /> - treedat will be saved to the outfolder. <br /> - a text
file of input parameters is saved to outfolder
('outfn'_parameters_'date'.txt).
</p>


<h3>Note</h3>

<p>If a dat table is provided, the aggregated tree data will be merged to
table and NULL values will be output as 0.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Aggregate LIVE_CANOPY_CVR_PCT to plot, weighted by CONDPROP_UNADJ
treesum &lt;- datSumTree(tree = FIESTA::WYtree,
                      tsumvarlst = "TPA_UNADJ")$treedat

# Check results
treesum[treesum$PLT_CN == 40404737010690,]
FIESTA::WYtree[FIESTA::WYtree$PLT_CN == 40404737010690,]

</code></pre>

<hr>
<h2 id='datSumTreeDom'>Data - Aggregates numeric tree data by tree domain (i.e. species) to plot or
condition-level.</h2><span id='topic+datSumTreeDom'></span>

<h3>Description</h3>

<p>Aggregates numeric tree domain data (e.g., SPCD) to plot or condition,
including options for filtering tree data or extrapolating to plot acre by
multiplying by TPA. Includes options for generating barplots, proportion
data, and cover data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datSumTreeDom(
  tree = NULL,
  seed = NULL,
  cond = NULL,
  plt = NULL,
  subp_cond = NULL,
  subplot = NULL,
  datsource = "obj",
  data_dsn = NULL,
  tuniqueid = "PLT_CN",
  cuniqueid = "PLT_CN",
  puniqueid = "CN",
  bycond = FALSE,
  condid = "CONDID",
  bysubp = FALSE,
  subpid = "SUBP",
  tsumvar = NULL,
  addseed = FALSE,
  seedonly = FALSE,
  woodland = "Y",
  TPA = TRUE,
  tfun = sum,
  ACI = FALSE,
  tfilter = NULL,
  lbs2tons = TRUE,
  metric = FALSE,
  tdomvar = "SPCD",
  tdomvarlst = NULL,
  tdomvar2 = NULL,
  tdomvar2lst = NULL,
  tdomprefix = NULL,
  tdombarplot = FALSE,
  tdomtot = FALSE,
  tdomtotnm = NULL,
  FIAname = FALSE,
  spcd_name = "COMMON",
  pivot = TRUE,
  presence = FALSE,
  proportion = FALSE,
  cover = FALSE,
  getadjplot = FALSE,
  adjtree = FALSE,
  adjvar = "tadjfac",
  NAto0 = FALSE,
  adjTPA = 1,
  tround = 5,
  returnDT = TRUE,
  savedata = FALSE,
  savedata_opts = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datSumTreeDom_+3A_tree">tree</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). The tree-level table
with tree domain data.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_seed">seed</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). The seedling table
with tree seedling counts. Only applicable for counts (tsumvar=&quot;PLT_CN&quot;).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_cond">cond</code></td>
<td>
<p>Data frame or comma-delimited file (*.csv). Condition-level
table to join the aggregated tree data to, if bycond=TRUE. This table also
may be used for condition proportion or strata variables used if adjcond or
adjstrata = TRUE (See details below).  This table is optional. If included,
CONDID must be present in table.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_plt">plt</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Plot-level table to join the aggregated tree data to, if bycond=FALSE. This
table is optional.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_subp_cond">subp_cond</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot condition-level table to use to sum condition proportions, 
if bysubp=TRUE.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_subplot">subplot</code></td>
<td>
<p>Dataframe, comma-delimited file (*.csv), or shapefile (*.shp).
Subplot-level table to used to calculate adjustment factors, to remove 
nonsampled conditions (SUBP_STATUS_CD = 3). This table is optional.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of data ('obj', 'csv', 'sqlite', 'gdb').</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tuniqueid">tuniqueid</code></td>
<td>
<p>String. Unique identifier of the tree table.  If including
seedling table, this should be the same for seed.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_cuniqueid">cuniqueid</code></td>
<td>
<p>String. Unique identifier of the cond table if cond is NOT
NULL.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Unique identifier of the plt table if plt is NOT
NULL.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_bycond">bycond</code></td>
<td>
<p>Logical. If TRUE, data are aggregated to the condition level
(by: uniqueid, CONDID). If FALSE, data are aggregated to the plot level (by:
uniqueid).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_condid">condid</code></td>
<td>
<p>String. Unique identifier for conditions.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_bysubp">bysubp</code></td>
<td>
<p>Logical. If TRUE, data are aggregated to the subplot level.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_subpid">subpid</code></td>
<td>
<p>String. Unique identifier of each subplot.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tsumvar">tsumvar</code></td>
<td>
<p>String. Name of the variable to aggregate (e.g., &quot;BA&quot;). For
summing number of trees, use tsumvar=&quot;TPA_UNADJ&quot; with tfun=sum.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_addseed">addseed</code></td>
<td>
<p>Logical. If TRUE, add seedling counts to tree counts. Note:
tdomvar must be 'SPCD' or 'SPGRPCD'.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_seedonly">seedonly</code></td>
<td>
<p>Logical. If TRUE, seedling counts only. Note: tdomvar
must be 'SPCD' or 'SPGRPCD'.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tpa">TPA</code></td>
<td>
<p>Logical. If TRUE, tsumvarlst variable(s) are multiplied by the
respective trees-per-acre variable (see details) to get per-acre
measurements.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tfun">tfun</code></td>
<td>
<p>Function. Name of the function to use to aggregate the data
(e.g., sum, mean, max).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_aci">ACI</code></td>
<td>
<p>Logical. If TRUE, if ACI (All Condition Inventory) plots exist,
any trees on these plots will be included in summary. If FALSE, you must
include condition table.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tfilter">tfilter</code></td>
<td>
<p>String. A filter to subset the tree data before aggregating
(e.g., &quot;STATUSCD == 1&quot;). This must be in R syntax. If tfilter=NULL, user is
prompted.  Use tfilter=&quot;NONE&quot; if no filters.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_lbs2tons">lbs2tons</code></td>
<td>
<p>Logical. If TRUE, converts biomass or carbon variables from
pounds to tons (1 pound = 0.0005 short tons).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_metric">metric</code></td>
<td>
<p>Logical. If TRUE, converts response to metric units based on
FIESTA::ref_conversion, if tsumvar is in FIESTAutils::ref_units. Note: if TPA,
TPA is converted to trees per hectare (TPH: 1/ tpavar * 0.4046860).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomvar">tdomvar</code></td>
<td>
<p>String. The tree domain (tdom) variable used to aggregate by
(e.g., &quot;SPCD&quot;, &quot;SPGRPCD&quot;).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomvarlst">tdomvarlst</code></td>
<td>
<p>String (vector). List of specific tree domains of tdomvar
to aggregate (e.g., c(108, 202)). If NULL, all domains of tdomvar are used.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomvar2">tdomvar2</code></td>
<td>
<p>String. A second tree domain variable to use to aggregate by
(e.g. &quot;DIACL&quot;).  The variables, tdomvar and tdomvar2 will be concatenated
before summed.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomvar2lst">tdomvar2lst</code></td>
<td>
<p>String (vector). List of specific tree domains of
tdomvar2 to aggregate.  If NULL, all domains of tdomvar2 are used.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomprefix">tdomprefix</code></td>
<td>
<p>String. The prefix used for naming the aggregated tree
data, before numeric codes (e.g., &quot;SP&quot; = SP102, SP746).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdombarplot">tdombarplot</code></td>
<td>
<p>Logical. If TRUE and pivot=TRUE, calls datBarplot() and
outputs a barplot of tdom distributions. If savedata=TRUE, barplots are
written to outfolder.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomtot">tdomtot</code></td>
<td>
<p>Logical. If TRUE and pivot=TRUE a total of all tree domains
in tdomvarlst is calculated and added to output data frame.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tdomtotnm">tdomtotnm</code></td>
<td>
<p>String. If tdomtot=TRUE, the variable name for the total
column in output data frame. If NULL, the default will be tdomvar + 'TOT'.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_fianame">FIAname</code></td>
<td>
<p>Logical. If TRUE, changes names of columns for SPCD and
SPGRPCD from code to FIA names.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_spcd_name">spcd_name</code></td>
<td>
<p>String. Output name type if tdomvar or tdomvar2 = &quot;SPCD&quot;
('COMMON', 'SCIENTIFIC', 'SYMBOL').</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_pivot">pivot</code></td>
<td>
<p>Logical. If TRUE, tdomvar data are transposed (pivoted) to
separate columns.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_presence">presence</code></td>
<td>
<p>Logical. If TRUE, an additional table is output with tree
domain values as presence/absence (1/0).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_proportion">proportion</code></td>
<td>
<p>Logical. If TRUE and pivot=TRUE, an additional table will
be output with tree domain data as proportions of total tsumvar.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_cover">cover</code></td>
<td>
<p>Logical. If TRUE and pivot=TRUE, , an additional table will be
output with tree domain data as percent cover, based on proportions of
tsumvar (see proportion) and tree canopy cover variable in cond
(LIVE_CANOPY_CVR_PCT) or in plt (CCLIVEPLT).  Does not include seedlings.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_getadjplot">getadjplot</code></td>
<td>
<p>Logical. If TRUE, adjustments are calculated for
nonsampled conditions on plot.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_adjtree">adjtree</code></td>
<td>
<p>Logical. If TRUE, trees are individually adjusted by
adjustment factors.  Adjustment factors must be included in tree table (see
adjvar).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_adjvar">adjvar</code></td>
<td>
<p>String. If adjtree=TRUE, the name of the variable to use for
multiplying by adjustment (e.g., tadjfac).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, convert NA values to 0.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_adjtpa">adjTPA</code></td>
<td>
<p>Numeric. A tree-per-acre adjustment. Use for DESIGNCD=1
(annual inventory), if using less than 4 subplots. If using only 1 sublot
for estimate, adjTPA=4. The default is 1.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_tround">tround</code></td>
<td>
<p>Number. The number of digits to round to. If NULL, default=6.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, returns data.table object(s). If FALSE,
returns data.frame object(s).</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'tdomsum'.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, keep database connection open.</p>
</td></tr>
<tr><td><code id="datSumTreeDom_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variable = NULL, then it will prompt user for input.
</p>
<p>If you want to get trees-per-acre information aggregated to plot or
condition level, you need to include a TPA variable in tree table. <br /> For
tsumvars = GROWCFGS, GROWBFSL, GROWCFAL, FGROWCFGS, FGROWBFSL, or FGROWCFAL,
you must have TPAGROW_UNADJ <br /> For tsumvars = MORTCFGS, MORTBFSL, MORTCFAL,
FMORTCFGS, FMORTBFSL, or FMORTCFAL, you must have TPAMORT_UNADJ <br /> For
tsumvars = REMVCFGS, REMVBFSL, REMVCFAL, FREMVCFGS, FREMVBFSL, or FREMVCFAL,
you must have TPAREMV_UNADJ <br />
</p>
<p>If you want to adjust plot-level information by condition proportions, you
need to include CONDID &amp; CONDPROP_UNADJ in cond or tree table. <br />
</p>
<p>If you want to adjust the aggregated tree data by the area of the strata
(estimation unit), you need to either have a variable in your tree data
named adjfact or you need to included the following variables in your
datasets: <br /> Condition table: STATECD, CONDID, STRATA, ESTUNIT,
SUBPPROP_UNADJ, MICRPROP_UNADJ (if microplot trees) MACRPROP_UNADJ (if
macroplot trees). <br /> Tree table: TPA_UNADJ
</p>
<p>All trees where DIA=NA are removed from analysis. These are trees that were
remeasured but are no longer in inventory (ex. a tree that is dead and not
standing in the current inventory).
</p>


<h3>Value</h3>

<p>tdomdata - a list of the following objects:
</p>
<table>
<tr><td><code>tdomdat</code></td>
<td>
<p> Data frame. Plot or condition-level table with aggregated
tree domain (tdom) attributes (filtered). </p>
</td></tr> 
<tr><td><code>tdomsum</code></td>
<td>
<p> Data frame. The tdom look-up table with data aggregated 
by species. </p>
</td></tr> 
<tr><td><code>tdomvar</code></td>
<td>
<p> String. Name of the tdom variable used to aggregate by. </p>
</td></tr>
<tr><td><code>tsumvar</code></td>
<td>
<p> String. Name of the aggregated output variable. </p>
</td></tr> 
<tr><td><code>tdomlst</code></td>
<td>
<p> Vector. List of the aggregated tree data in tdomdat. </p>
</td></tr> 
<tr><td><code>tdomdat.pres</code></td>
<td>
<p> Data frame. Plot or condition-level table with 
aggregated tree domain attributes represented as presence/absence (1/0). </p>
</td></tr> 
<tr><td><code>tdomdat.prop</code></td>
<td>
<p> Data frame. Plot or condition-level table with 
aggregated tree domain attributes represented as proportion of total by 
plot. </p>
</td></tr> 
<tr><td><code>tdomdat.cov</code></td>
<td>
<p> Data frame. Plot or condition-level table with 
aggregated tree domain attributes represented as percent cover, multipying 
cover attribute by tdom proportion by plot. </p>
</td></tr>
</table>
<p>If savedata=TRUE<br /> - tdomdat will be saved to the outfolder
('tdomprefix'_DAT.csv). <br /> - a text file of input parameters is saved to
outfolder ('outfn'_parameters_'date'.txt). <br /> - if presence=TRUE,
tdomdat.prop is saved to outfolder ('tdomprefix'_PRESDAT.csv) - if
proportion=TRUE, tdomdat.prop is saved to outfolder
('tdomprefix'_PROPDAT.csv) - if cover=TRUE, tdomdat.prop is saved to
outfolder ('tdomprefix'_COVDAT.csv)
</p>


<h3>Note</h3>

<p>This function can be used to get tree domain data. This data can be
used for mapping tree domain distributions.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Sum of Live Basal Area Per Acre by Species
datSumTreeDom(tree = FIESTA::WYtree, 
              cond = FIESTA::WYcond, 
              plt = FIESTA::WYplt, 
              puniqueid = "CN", 
              bycond = FALSE, 
              tsumvar = "BA", 
              TPA = TRUE, 
              tdomtot = TRUE, 
              tdomtotnm = "BA_LIVE", 
              tdomprefix = "BA_LIVE", 
              tround = 2, 
              tfilter = "STATUSCD==1")
              
# Sum of Number of Live Trees by Species
datSumTreeDom(tree = FIESTA::WYtree, 
              cond = FIESTA::WYcond, 
              plt = FIESTA::WYplt, 
              puniqueid = "CN", 
              bycond = FALSE, 
              tsumvar = "PLT_CN", 
              TPA = TRUE, 
              tdomtot = TRUE, 
              tdomprefix = "CNT", 
              tround = 0, 
              tfilter = "STATUSCD==1")
              
# Sum of Number of Live Trees by Species, Including Seedlings
datSumTreeDom(cond = WYcond, 
              plt = WYplt, 
              seed = WYseed, 
              puniqueid = "CN", 
              bycond = FALSE, 
              tsumvar = "PLT_CN", 
              TPA = TRUE, 
              tdomtot = TRUE, 
              tdomprefix = "CNT", 
              tround = 0)

</code></pre>

<hr>
<h2 id='DBgetCSV'>Database - Extracts data table(s) from FIA DataMart.</h2><span id='topic+DBgetCSV'></span>

<h3>Description</h3>

<p>Downloads and extracts compressed comma-delimited file(s) (*.zip) from FIA
DataMart (https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).
Only 1 table can be specified, but multiple states may be included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetCSV(
  DBtable,
  states = NULL,
  returnDT = FALSE,
  stopifnull = TRUE,
  noIDate = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetCSV_+3A_dbtable">DBtable</code></td>
<td>
<p>String. Name of table to download. Only 1 table allowed.</p>
</td></tr>
<tr><td><code id="DBgetCSV_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name (e.g., &quot;Arizona&quot;, &quot;New Mexico&quot;)
or code (e.g., 4, 35) of states to download data. If NULL, tables that are
not state-level are downloaded.</p>
</td></tr>
<tr><td><code id="DBgetCSV_+3A_returndt">returnDT</code></td>
<td>
<p>Logical. If TRUE, a data table is returned, else, a data
frame.</p>
</td></tr>
<tr><td><code id="DBgetCSV_+3A_stopifnull">stopifnull</code></td>
<td>
<p>Logical. If TRUE, stop if table is NULL.</p>
</td></tr>
<tr><td><code id="DBgetCSV_+3A_noidate">noIDate</code></td>
<td>
<p>Logical. If TRUE, do not include columns with type IDate.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The compressed data files are downloaded from FIA DataMart; saved to a
temporary space; extracted and imported; and deleted from temporary space.
Accessibility and download time depends on access and speed of internet
connection.
</p>


<h3>Value</h3>

<p>Returns a data table (returnDT=TRUE), or data.frame (returnDT=FALSE)
of downloaded table(s). If more than one state, returned as one table.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get plot data for multiple states
FIAplots &lt;- DBgetCSV("PLOT", c("Georgia", "Utah"))
table(FIAplots$STATECD)

## End(Not run)
</code></pre>

<hr>
<h2 id='DBgetEvalid'>Database - Gets or checks FIA EVALIDs and/or gets inventory years from FIA's
online publicly-available DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).</h2><span id='topic+DBgetEvalid'></span>

<h3>Description</h3>

<p>Extracts FIA EVALIDs for identifying an estimation group of plots. EVALIDs
may be extracted by most current evaluation (evalCur=TRUE) or by the end
year of an evaluation (evalEndyr) or all evaluations in the database for one
or more states. See details for more information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetEvalid(
  states = NULL,
  RS = NULL,
  datsource = "datamart",
  data_dsn = NULL,
  invtype = "ANNUAL",
  evalCur = TRUE,
  evalEndyr = NULL,
  evalid = NULL,
  evalAll = FALSE,
  evalType = "VOL",
  invyrtab = NULL,
  dbTabs = dbTables(),
  dbconn = NULL,
  dbconnopen = FALSE,
  returnPOP = FALSE,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetEvalid_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_rs">RS</code></td>
<td>
<p>String vector. Name of research station(s)
('RMRS','SRS','NCRS','NERS','PNWRS').  Do not use if states is populated.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_datsource">datsource</code></td>
<td>
<p>Source of data ('datamart', 'sqlite').</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_data_dsn">data_dsn</code></td>
<td>
<p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.sqlite).</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_invtype">invtype</code></td>
<td>
<p>String. The type of FIA data to extract ('PERIODIC',
'ANNUAL').  Only 1 allowed at a time. See further details below.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_evalcur">evalCur</code></td>
<td>
<p>Logical. If TRUE, the most current FIA Evaluation is extracted
for state(s).</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_evalendyr">evalEndyr</code></td>
<td>
<p>Number. The end year of the FIA Evaluation period of interest.
Selects only sampled plots and conditions for the evaluation period. If
more than one state, create a named list object with evalEndyr labeled for
each state (e.g., list(Utah=2014, Colorado=2013).</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_evalid">evalid</code></td>
<td>
<p>Integer. One or more EVALID to check if exists.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_evalall">evalAll</code></td>
<td>
<p>Logical. If TRUE, gets all EVALIDs for invtype.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_evaltype">evalType</code></td>
<td>
<p>String vector. The type(s) of evaluation of interest ('ALL',
'CURR', 'VOL', 'GRM', 'P2VEG', 'DWM&quot;, 'INV', 'REGEN', 'CRWN').  The evalType
'ALL' includes nonsampled plots; 'CURR' includes plots used for area
estimates; 'VOL' includes plots used for area and/or tree estimates; The
evalType 'GRM' includes plots used for growth, removals, mortality, and
change estimates (eval_typ 
are accepted. See details below and FIA database manual for regional
availability and/or differences.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_invyrtab">invyrtab</code></td>
<td>
<p>Data frame. A data frame including inventory years by state.
If NULL, it is generated from SURVEY table from FIA database based on states
and invtype.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_dbtabs">dbTabs</code></td>
<td>
<p>List of database tables the user would like returned.
See help(dbTables) for a list of options.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, the dbconn connection is not closed.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_returnpop">returnPOP</code></td>
<td>
<p>Logical. If TRUE, returns pop tables (SURVEY, 
POP_PLOT_STRATUM_ASSGN) as R objects instead of table names, if in db.</p>
</td></tr>
<tr><td><code id="DBgetEvalid_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, gui windows pop up for parameter selection.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FIA Evaluation<br /> An Evaluation defines a group of plots in the FIA Database
used for state-level estimates, representing different spans of data and
different stratification and area adjustments. An Evaluation Type (evalType)
is used to identify a specific set of plots for a particular response to be
able to ensure a sample-based estimate for a population. See FIA's Database
documentation for current available Evaluation Types and descriptions
(https://www.fia.fs.fed.us/library/database-documentation/index.php).
</p>
<p>EVALID<br /> An EVALID is a unique code defining an Evaluation, generally in
the format of a 2-digit State code, a 2-digit year code, and a 2-digit
Evaluation Type code.
</p>
<p>EVAL_TYP<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>EVALIDCD</b> </td><td style="text-align: left;"> <b>EVAL_TYP</b> </td><td style="text-align: left;">
<b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 00 </td><td style="text-align: left;"> EXPALL </td><td style="text-align: left;"> All area</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 01 </td><td style="text-align: left;">
EXPVOL/EXPCURR </td><td style="text-align: left;"> Area/Volume</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 03 </td><td style="text-align: left;">
EXPCHNG/EXPGROW/EXPMORT/EXPREMV </td><td style="text-align: left;"> Area Change/GRM</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 07 </td><td style="text-align: left;"> EXPDWM
</td><td style="text-align: left;"> DWM</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 08 </td><td style="text-align: left;"> EXPREGEN </td><td style="text-align: left;"> Regeneration</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 09 </td><td style="text-align: left;"> EXPINV
</td><td style="text-align: left;"> Invasive</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 10 </td><td style="text-align: left;"> EXPP2VEG </td><td style="text-align: left;"> Veg profile</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 12 </td><td style="text-align: left;">
EXPCRWN </td><td style="text-align: left;"> Crown</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Value</h3>

<p>A list of the following objects: </p>
<table>
<tr><td><code>states</code></td>
<td>
<p> String vector. State
names. </p>
</td></tr> <tr><td><code>rslst</code></td>
<td>
<p> String vector. FIA research station names included in
output. </p>
</td></tr> <tr><td><code>evalidlist</code></td>
<td>
<p> Named list. evalid by state. </p>
</td></tr> <tr><td><code>invtype</code></td>
<td>

<p>String. Inventory type for states(s) (ANNUAL/PERIODIC). </p>
</td></tr> <tr><td><code>invyrtab</code></td>
<td>

<p>Data frame. Inventory years by state for evalidlist. </p>
</td></tr> <tr><td><code>evalTypelist</code></td>
<td>

<p>Named list. Evaluation type(s) by state. </p>
</td></tr> <tr><td><code>invyrs</code></td>
<td>
<p> Named list.
Inventory years by state for evalidlist. </p>
</td></tr> <tr><td><code>SURVEY</code></td>
<td>
<p> Data frame. If
returnPOP=TRUE, the SURVEY table from FIADB. </p>
</td></tr>
</table>


<h3>Note</h3>

<p>FIA database tables used:<br /> 1. SURVEY - To get latest inventory year,
invyrtab = NULL<br /> 2. POP_EVAL - To get EVALID and EVALID years
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get evalid and inventory years for Wyoming
WYeval &lt;- DBgetEvalid(states="Wyoming")
names(WYeval)

WYeval$evalidlist
WYeval$invtype
WYeval$invyrtab
WYeval$evalType
WYeval$invyrs


# Get evalid for Utah and Wyoming
DBgetEvalid(states=c("Wyoming", "Utah"))

# Get evalid for an FIA Research Station
RSevalid &lt;- DBgetEvalid(RS="NERS")
names(RSevalid)
RSevalid$evalidlist

## End(Not run)
</code></pre>

<hr>
<h2 id='DBgetPlots'>Database - Extracts inventory plot data from FIA DataMart.</h2><span id='topic+DBgetPlots'></span>

<h3>Description</h3>

<p>Extracts data from FIA's online publicly-available DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetPlots(
  states = NULL,
  RS = NULL,
  datsource = "datamart",
  data_dsn = NULL,
  dbTabs = dbTables(),
  eval = "FIA",
  eval_opts = NULL,
  puniqueid = "CN",
  invtype = "ANNUAL",
  intensity1 = FALSE,
  issubp = FALSE,
  istree = TRUE,
  isseed = FALSE,
  greenwt = FALSE,
  addplotgeom = FALSE,
  othertables = NULL,
  getxy = FALSE,
  xy_datsource = NULL,
  xy_dsn = NULL,
  xy = "PLOT",
  xy_opts = xy_options(),
  xymeasCur = FALSE,
  coordType = "PUBLIC",
  pjoinid = NULL,
  issp = FALSE,
  spcond = FALSE,
  spcondid1 = FALSE,
  defaultVars = TRUE,
  regionVars = FALSE,
  regionVarsRS = "RMRS",
  ACI = FALSE,
  subcycle99 = FALSE,
  stateFilter = NULL,
  allFilter = NULL,
  alltFilter = NULL,
  returndata = TRUE,
  savedata = FALSE,
  exportsp = FALSE,
  saveqry = FALSE,
  savePOP = FALSE,
  savedata_opts = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  evalInfo = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetPlots_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_rs">RS</code></td>
<td>
<p>String vector. Name of research station(s) to get public XY
coordinates for ('RMRS','SRS','NCRS','NERS','PNWRS'). Do not use if states 
is populated. See FIESTA::ref_statecd for reference to RS and states.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of data ('datamart', 'sqlite').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_dbtabs">dbTabs</code></td>
<td>
<p>List. Source of tables needed for estimation based on what
is defined in eval_opts(Type). The source can be a layer in data_dsn or
a comma delimited file. For example, if Type='P2VEG', vsubpspp_layer 
and/or vsubpstr_layer must be defined. Defaults are 'P2VEG_SUBPLOT_SPP'
and 'P2VEG_SUBP_STRUCTURE', respectively.
See help(dbTables) for a list of options.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_eval">eval</code></td>
<td>
<p>String. Type of evaluation time frame for data extraction 
('FIA', 'custom'). See eval_opts for more further options.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_eval_opts">eval_opts</code></td>
<td>
<p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Name of unique identifier in plot_layer in dbTabs.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_invtype">invtype</code></td>
<td>
<p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL', 'BOTH').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_intensity1">intensity1</code></td>
<td>
<p>Logical. If TRUE, includes only plots where INTENSITY = 1.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_issubp">issubp</code></td>
<td>
<p>Logical. If TRUE, subplot tables are extracted from FIA
database (SUBPLOT, SUBP_COND).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_istree">istree</code></td>
<td>
<p>Logical. If TRUE, include tree data.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_isseed">isseed</code></td>
<td>
<p>Logical. If TRUE, include seedling data.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_greenwt">greenwt</code></td>
<td>
<p>Logical. If TRUE, green weight biomass is calculated.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_addplotgeom">addplotgeom</code></td>
<td>
<p>Logical. If TRUE, variables from the PLOTGEOM table are
appended to the plot table.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_othertables">othertables</code></td>
<td>
<p>String Vector. Name of other table(s) in FIADB to include
in output. The table must have PLT_CN as unique identifier of a plot.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_getxy">getxy</code></td>
<td>
<p>Logical. If TRUE, gets separate XY table.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_xy_datsource">xy_datsource</code></td>
<td>
<p>Source of XY data ('obj', 'csv', 'datamart', 'sqlite').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_xy_dsn">xy_dsn</code></td>
<td>
<p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.sqlite) where XY data are.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_xy">xy</code></td>
<td>
<p>sf R object or String. Table with xy coordinates. Can be a spatial
polygon object, data frame, full pathname to a shapefile, or name of a layer
within a database.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_xy_opts">xy_opts</code></td>
<td>
<p>List of xy data options to specify if xy is NOT NULL. 
See xy_options (e.g., xy_opts = list(xvar='LON', yvar='LAT').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_xymeascur">xymeasCur</code></td>
<td>
<p>Logical. If TRUE, include XY coordinates from the most 
current sampled measurement of each plot.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_coordtype">coordType</code></td>
<td>
<p>String. Type of xy coordinates using ('PUBLIC', 'ACTUAL')</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Variable in plt to join to XY data. Not necessary to
be unique. If using most current XY coordinates, use identifier for a plot
(e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_issp">issp</code></td>
<td>
<p>Logical. If TRUE, an sf spatial object is generated from the
public X/Y coordinates in the plot table.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_spcond">spcond</code></td>
<td>
<p>Logical. If TRUE, a set of condition-level attributes (e.g.,
FORTYPCD) represented at the plot-level are extracted from FIA DataMart COND
table.  (See Notes for more info on how condition attributes were added).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_spcondid1">spcondid1</code></td>
<td>
<p>Logical. If TRUE and issp=TRUE and spcond=TRUE, condition
variables are determined by condition 1 attributes. If FALSE, an algorithm
is used to select the condition to use (See details for alorithm used).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_defaultvars">defaultVars</code></td>
<td>
<p>Logical. If TRUE, a set of default variables are selected
in query.  See notes for variable descriptions.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_regionvars">regionVars</code></td>
<td>
<p>Logical. If TRUE, regional variables are included in query
(e.g., SDI_RMRS, SDIPCT_RMRS, SDIMAX_RMRS, QMD_RMRS).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_regionvarsrs">regionVarsRS</code></td>
<td>
<p>String. Region for regionVars
('RMRS','SRS','NCRS','NERS','PNWRS').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_aci">ACI</code></td>
<td>
<p>Logical. If TRUE, the data from All Condition Inventories (ACI)
are included in dataset (NF_SAMPLING_STATUS_CD = 1). See below for more
details.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_subcycle99">subcycle99</code></td>
<td>
<p>Logical. If TRUE, includes plots with SUBCYCLE = 99. These
plots are plots that are measured more than once and are not included in the
estimation process.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_statefilter">stateFilter</code></td>
<td>
<p>Character string or Named list. Logical statement to use
as plot and filter in sql query. Must include plot alias ('p.') and be sql
syntax (e.g., 'p.COUNTYCD = 1'). If more than 1 state, stateFilter must be a
named list with names as state(s) (e.g., list(Utah='p.COUNTYCD = 1').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_allfilter">allFilter</code></td>
<td>
<p>String. An overall filter for plot or condition data in all
states in query. The expression must be R syntax (e.g., 'PLOT_STATUS_CD ==
1').</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_alltfilter">alltFilter</code></td>
<td>
<p>String. If istree=TRUE, an overall filter for tree data in
all states (e.g., only Whitebark pine trees - 'SPCD == 101'). Note: returns
only plots with trees included in filter.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns data objects.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder as comma-delimited
file (*.csv).  No objects are returned. If FALSE, the data are saved as R
objects and returned to user.  See details for caveats.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, and issp=TRUE, exports spatial plots.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_saveqry">saveqry</code></td>
<td>
<p>Logical. If TRUE, saves queries to outfolder (by state).</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_savepop">savePOP</code></td>
<td>
<p>Logical. If TRUE, save and return the POP_PLOT_STRATUM_ASSGN
table.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, the dbconn connection is not closed.</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_evalinfo">evalInfo</code></td>
<td>
<p>List. List object output from DBgetEvalid or DBgetXY</p>
</td></tr>
<tr><td><code id="DBgetPlots_+3A_...">...</code></td>
<td>
<p>For extendibility.
FIESTA functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><b>FIA forest land definition</b>
</p>
<p><em>Current</em><br /> Forested plots include plots with &gt;= 10 percent cover (or
equivalent stocking) by live trees of any size, including land that formerly
had such tree cover and that will be naturally or artificially regenerated.
To qualify, the area must be &gt;= 1.0 acre in size and 120.0 feet wide (See
Burrill et al. 2018).
</p>
<p>*ACI (All Condition Inventory)*<br /> RMRS National Forest plots. For nonforest
conditions that have been visited in the field (NF_SAMPLING_STATUS_CD = 
if trees exist on the condition, the data exist in the tree table. If you do
not want these trees included, ACI=FALSE. This will filter the data to only
forested conditions (COND_STATUS_CD = 1)
</p>
<p>*Nevada*<br /> In 2016, the population area of Nevada changed to exclude the
large restricted area owned by Department of Defense (Area 51) from the
sample. Prior to 2016, the plots within this area were observed using aerial
photos and if they were definitely nonforest the plots were entered in the
database with nonforest information.  If they were observed as forested or
potentially forested, they were given a PLOT_STATUS_CD=3 because they were
Denied Access. From 2016 on, all plots within this area are removed from the
sample, and thus, removed from database.
</p>
<p><b>FIA DataMart Data</b>
</p>
<p>FIA data available on FIA DataMart include the following information.<br />
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - the PLOT variable is renumbered.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - the LON/LAT coordinates are fuzzed &amp; swapped.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - the OWNERCD variable is based on fuzzed &amp; swapped locations.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - ECOSUBCD, CONGCD, ELEV, and EMAP_HEX are GIS-extracted values 
based on fuzzed &amp; swapped locations.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - For annual data, forested plots represent the current definition 
of &gt;= 10 percent cover...</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - For periodic data, forested plots are defined by a definition 
of Other Wooded Land (OWL), including &gt;= 5 percent cover...</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><b>FIA Evaluations</b>
</p>
<p>An evaluation is a group of plots within the FIA database that is used for
generating population estimates, representing different inventory spans of
data with different stratification or area adjustments. Each evaluation is
determined by the type of estimation (Type) including: area and tree
estimates; growth, removal, and mortality estimates; and area change
estimates (EVAL_TYPE). These plots are identified by an evalid, which is a
unique identifier in the format of a 2-digit State code, a 2-digit year
code, and a 2-digit evaluation type code. For example, EVALID '491601'
represents the Utah 2016 evaluation for current area estimates.
</p>
<p><b>FIA Evaluation Types</b>
</p>
<p>Define one or more Evaluation Type for Cur=TRUE or Endyr=YYYY. An
Evaluation type is used to identify a specific set of plots for a particular
response that can be used to a make a statistically valid sample-based
estimate. If Type='CURR', the evaluation includes all sampled and
nonsampled plots or plots that were missed in an inventory year.
</p>
<p>Regional differences may occur on how missed plots are represented in a FIA
Evaluation.  For example, RMRS Evaluations are static; missed plots are
included in an Evaluation as nonsampled, and when measured, are included in
a following Evaluation.  Therefore, the number of nonsampled plots in
previous Evaluations may change, depending on when missed plot are measured.
In the PNW Research Station, plots are brought forward to replace missed
plots in an evaluation, depending on the Type.
</p>
<p>EVAL_TYP<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> <b>EVALIDCD</b> </td><td style="text-align: left;"> <b>EVAL_TYP</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 00 </td><td style="text-align: left;"> EXPALL </td><td style="text-align: left;"> All area</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 01 </td><td style="text-align: left;"> EXPVOL/EXPCURR </td><td style="text-align: left;"> Area/Volume</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 03 </td><td style="text-align: left;"> EXPCHNG/EXPGROW/EXPMORT/EXPREMV </td><td style="text-align: left;"> Area Change/GRM</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 07 </td><td style="text-align: left;"> EXPDWM </td><td style="text-align: left;"> DWM</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 08 </td><td style="text-align: left;"> EXPREGEN </td><td style="text-align: left;"> Regeneration</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 09 </td><td style="text-align: left;"> EXPINV </td><td style="text-align: left;"> Invasive</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 10 </td><td style="text-align: left;"> EXPP2VEG </td><td style="text-align: left;"> Veg profile</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 12 </td><td style="text-align: left;"> EXPCRWN </td><td style="text-align: left;"> Crown</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p><b>Inventory span defining variables</b>
</p>
<p>Data can be extracted using FIA Evaluations or a custom-defined Evaluation
for one or more states, one or more FIA Research Stations (RS), or all
available states in database (states=NULL, RS=NULL).
</p>
<p>*FIA Evaluation (eval=FIA)*<br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>eval_option</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> evalid </td><td style="text-align: left;"> Specified FIA EVALID (e.g., 491801)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Cur </td><td style="text-align: left;"> Most current FIA Evaluation</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Endyr </td><td style="text-align: left;"> End year of an FIA Evaluation (e.g., 2018)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> All </td><td style="text-align: left;"> All evaluations in database</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Type of FIA Evaluation (response)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>*Custom evaluation (eval=&quot;custom&quot;)*<br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>eval_option</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Cur </td><td style="text-align: left;"> Most current measurement of plot in database</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Endyr </td><td style="text-align: left;"> Most current measurement of plot in database in or
before year</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> All </td><td style="text-align: left;"> All years for invtype (ANNUAL or PERIODIC or BOTH)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Type of custom Evaluation (response)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> invyrs </td><td style="text-align: left;"> Specified inventory years (e.g., 2015:2018)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p><b>Spatial data</b>
</p>
<p>If issp=TRUE, an sf spatial object of plot-level attributes is generated
from public coordinates, with NAD83 Geographic Coordinate Reference System.
</p>
<p>*Exporting*<br /> If savedata=TRUE and out_fmt=&quot;shp&quot;, the spatial object is
exported to the outfolder using the ESRI Shapefile driver. The driver
truncates variable names to 10 characters or less. Variable names are
changed using an internal function.  The name changes are written to a csv
file and saved to the outfolder (shpfile_newnames.csv).
</p>
<p>*spcond*<br /> Only one condition per plot is used for spatial representation
of condition attributes. IF CONDID1=TRUE, condition 1 is selected. If
CONDID1=FALSE, the condition is selected based on the following criteria. A
column named CONDMETHOD is added to the attribute table to show the method
and steps used, identified by the abbreviation in parentheses.
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> (1) minimum COND_STATUS_CD (_ST)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> (2) maximum condition proportion (_CP)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> (3) maximum live_canopy_cvr_pct (_CC)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> (4) minimum STDSZCD (_SZ)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> (5) minimum CONDID (_C1)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p><b>Derived Variables</b>
</p>
<p>If defaultVars=TRUE, the following derived variables are calculated after
extracting data from the FIA database.
</p>
<p>Plot-level variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRCND - Number of conditions on plot, including nonsampled conditions 
(COND_STATUS_CD = 5)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRCNDSAMP - Number of sampled conditions on plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRCNDFOR - Number of sampled forested conditions on plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRCNDFTYP - Number of sampled forested conditions with different 
forest types on plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRCNDFGRP - Number of sampled forested conditions with different forest
type groups on plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CCLIVEPLT - Percent live canopy cover of condition aggregated to plot-level 
(LIVE_CANOPY_CVR_PCT * CONDPROP_UNADJ).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> PLOT_ID - Unique Identifier for a plot ('ID' + STATECD(2) + UNITCD(2) + 
COUNTYCD(3) + PLOT(5)).  This variable can be used to identify multiple records 
for each measurement of plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Condition-level variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> FORTYPGRP - TYPGRPCD merged to FORTYPCD</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> FLDTYPGRP - TYPGRPCD merged to FLDTYPCD</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> FORNONSAMP - Combination of PLOT_STATUS_CD and PLOT_NONSAMPLE_REASN_CD</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> QMD - Quadratic Mean Diameter</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Tree-level variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> BA - the basal area of a tree (BA = DIA * DIA * 0.005454)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> TREE AGE Notes:</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - Available for live timber and woodland trees in the following states: 
AZ,CO,ID,MT,NV,UT,OR,WA.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - BHAGE - Breast height age (4.5' above ground) of timber trees.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - PNW - one tree is sampled for each species, within each crown class, 
and for each condition class present on plot. Age of saplings (&lt;5.0" DIA) 
may be aged by counting branch whorls above 4.5ft. No timber hardwood species 
other than red alder are bored for age.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - RMRS - one tree is sampled for each species and broad diameter 
class present on plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> DRYBIO Notes:</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> DRYBIO_AG - Aboveground oven-dry biomass, in pounds (DRYBIO_AG = 
(DRYBIO_BOLE + DRYBIO_STUMP + DRYBIO_TOP + DRYBIO_SAPLING + DRYBIO_WDLD_SPP).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - Available for both timber and woodland species, live trees &gt;= 1.0" 
DIA and dead trees &gt;= 5.0" DIA. Summed dry biomass of the top, bole, and 
stump of a tree, excluding foliage based on component ratio method 
(Heath and others, 2009).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - DRYBIO_BOLE - dry biomass of sound wood in live and dead trees, 
including bark, from a 1-foot stump to a min 4-inch top DIA of central stem 
(Calculated for timber trees &gt;= 5.0" DIA).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - DRYBIO_STUMP - dry biomass in the tree stump, including the portion 
of the tree from the ground to the bottom of merchantable bole, 1-foot 
(Calculated for live and dead trees &gt;= 5.0" DIA).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - DRYBIO_TOP - dry biomass in the top of the tree, including the 
portion of the tree above merchantable bole, 4-inch top, and all branches, 
excludes foliage (Calculated for live and dead trees &gt;= 5.0" DIA).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - DRYBIO_SAPLING - dry biomass of saplings, including aboveground 
portion, excluding foliage, of live timber trees &gt;=1.0" and &lt;5.0" DIA.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - DRYBIO_WDLD_SPP - dry biomass of woodland trees, live or dead, 
including the aboveground portion, excluding foliage, the top of
the tree above 1.5" DIA, and a portion of the stump from ground to DRC
(Calculated for woodland trees &gt;= 1.0" DIA.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>ABOVEGROUND CARBON ESTIMATES (IN POUNDS)<br /> 
Available for both timber and woodland species, live trees &gt;= 1.0&quot; DIA 
and dead trees &gt;= 5.0&quot; DIA. Calculated as 1/2 of the aboveground 
estimates of biomass: <br /> CARBON_AG = 0.5 * (DRYBIO_AG)
</p>
<p>TREE AGE DATA ONLY IN FOR (&quot;AZ&quot;, &quot;CO&quot;, &quot;ID&quot;, &quot;MT&quot;, &quot;NV&quot;, &quot;UT&quot;) <br /> 
FMORTCFAL includes trees &gt;= 5.0&quot; DIA and greater and is not populated 
for states(&quot;CA&quot;, &quot;OR&quot;, &quot;WA&quot;, &quot;OK&quot;) <br /> Mortality variables only 
available in: AZ, CO, ID, MT, NV, NM, UT, WY, ND, SD, NE, KS, OK.
</p>
<p><b>TPA</b> If TPA=TRUE and istree=TRUE or isseed=TRUE, the following
tree/seedling variables are multiplied by trees-per-acre (TPA_UNADJ).
TPA_UNADJ is set to a constant derived from the plot size and equals
6.018046 for trees sampled on subplots, 74.965282 for trees sampled on
microplots, and 0.999188 for trees sampled on macroplots. Variable-radius
plots were often used in earlier inventories, so the value in TPA_UNADJ
decreases as the tree diameter increases (FIADB User Guide)
</p>
<p>Variables: VOLCFNET, VOLCFGRS, GROWCFGS, GROWCFAL, FGROWCFGS, FGROWCFAL,
MORTCFGS, MORTCFAL, FMORTCFGS, FMORTCFAL, REMVCFGS, REMVCFAL, FREMVCFGS,
FREMVCFAL, DRYBIO_BOLE, DRYBIO_STUMP, DRYBIO_TOP, DRYBIO_SAPLING,
DRYBIO_WDLD_SPP, DRYBIO_BG, CARBON_BG, CARBON_AG
</p>
<p><b>MISC</b>
</p>
<p>For regions outside RMRS, there is no OWNCD attached to nonforest lands.
</p>


<h3>Value</h3>

<p>if returndata=TRUE, a list of the following objects: 
</p>
<table>
<tr><td><code>states</code></td>
<td>
<p> Vector. Input state(s) (full state names: Arizona). </p>
</td></tr> 
<tr><td><code>tabs</code></td>
<td>
<p> List. A list of data frames from FIA database, including 
plt and cond; and tree (if Type='VOL'); seed (if isseed=TRUE), 
p2veg_subplot_spp, p2veg_subp_structure, and invasive_subplot_spp 
(if Type='P2VEG'). See below 'Output Tables - FIA Table Names' 
for reference to FIA database tables.
See FIESTA:ref_* for variable descriptions (e.g., FIESTAutils::ref_tree). 
If istree and the number of states &gt; 3, tree data are saved to outfolder 
and not returned to accommodate R memory issues. </p>
</td></tr> 
<tr><td><code>xy*_PUBLIC</code></td>
<td>
<p> Data frame. XY data from FIA's public database. If 
measCur=TRUE, named xyCur_PUBLIC, else named xy_PUBLIC. The data frame 
has 10 columns ('PLT_CN', 'LON_PUBLIC', 'LAT_PUBLIC', 'STATECD', 'UNITCD',
'COUNTYCD', 'PLOT', 'INTENSITY', 'PLOT_ID' (ID+STATECD+UNTCD+COUNTYCD+PLOT), 
'COUNTYFIPS'. If issp=TRUE, returns an sf object. </p>
</td></tr>
<tr><td><code>spconddat</code></td>
<td>
<p> If spcond=TRUE, the condition variables representing 
each plot for spatial display. For plots with multiple conditions, 
the selected condition is based on CONDID=1 (if spcondid1=TRUE) or a 
set if criteria defined in Details - spcond (if spcondid1=FALSE). </p>
</td></tr>
<tr><td><code>evalid</code></td>
<td>
<p> Number. If evalCur=TRUE or evalEndyr is not NULL, the
Evalidation ID from the FIA database used to define the output data. </p>
</td></tr> 
<tr><td><code>pltcnt</code></td>
<td>
<p> Data frame. Number of plots (NBRPLOTS) by state, cycle, 
inventory year, and plot status. </p>
</td></tr>
<tr><td><code>pop_plot_stratum_assgn</code></td>
<td>
<p> Data frame. If savePOP=TRUE, and FIA Evaluations
are used to extract data from database, return the POP_PLOT_STRATUM_ASSGN
table or, if more than one Type and savePOP=FALSE. If more than one
Type, only the records for the evalTypes are returned, otherwise all
Types for the state evaluation are returned. </p>
</td></tr>
</table>
<p>*Output Tables - FIA Table Names*<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> <b>tab</b> </td><td style="text-align: left;"> <b>FIA Table</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> plt </td><td style="text-align: left;"> plot</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cond</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tree</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> p2veg_subplot_spp </td><td style="text-align: left;"> P2VEG_SUBPLOT_SPP</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> p2veg_subp_structure </td><td style="text-align: left;"> P2VEG_SUBP_STRUCTURE</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> invsubp </td><td style="text-align: left;"> INVASIVE_SUBPLOT_SPP</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> subplot </td><td style="text-align: left;"> SUBPLOT</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> subp_cond </td><td style="text-align: left;"> SUBP_COND</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond_dwm_calc </td><td style="text-align: left;"> COND_DWM_CALC</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> grm </td><td style="text-align: left;"> TREE_GRM_COMPONENT</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> issccm </td><td style="text-align: left;"> SUBP_COND_CHNG_MTRX</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>#' Outputs to outfolder (if savedata=TRUE): 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - If saveqry=TRUE, text file(s) of SQL queries used to extract data 
from database (_.txt). Note: one query is used for extracting both plt
and cond (pltcondqry*.txt). </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> - CSV file of plot and condition counts (pltcnt*.txt).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - Layers in a database or CSV files of output tables.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - If issp=TRUE, a feature class or ESRI shapefile of plot-level 
level attributes. If shapefile (.shp), variable names are truncated to 
10 characters or less. See notes for more info.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> - If issp=TRUE and out_fmt='sqlite', the SQLite data is SpatiaLite.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>To deal with limitations of R object size and/or computer memory issues, if
istree=TRUE and more than three states are desired, the tree data are saved
to a CSV file, with no tree data object returned. <br />
</p>


<h3>Note</h3>

<p>If no parameters are included, the user is prompted for input. If partial
parameters, the default parameter values are used for those not specified.
</p>
<p><b>Data Access</b> All data are downloaded from FIA's publicly-available
online Datamart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).
</p>
<p>Because of FIA's confidentiality agreement to protect the privacy of
landowners as well as protecting the scientific integrity of FIA's sample
design, the exact coordinates of the sample plot locations are not included.
The X/Y coordinates (LON_PUBLIC/LAT_PUBLIC) for download are perturbed up to
a mile from the original location
(https://www.fia.fs.fed.us/tools-data/spatial/Policy/index.php).  If the
exact location of the plots are necessary for your analysis, contact FIA's
Spatial Data Services
(https://www.fia.fs.fed.us/tools-data/spatial/index.php).
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>References</h3>

<p>DeBlander, Larry T.; Shaw, John D.; Witt, Chris; Menlove, Jim;
Thompson, Michael T.; Morgan, Todd A.; DeRose, R. Justin; Amacher, Michael,
C. 2010. Utah's forest resources, 2000-2005. Resour. Bull. RMRS-RB-10. Fort
Collins, CO; U.S. Department of Agriculture, Forest Service, Rocky Mountain
Research Station. 144 p.
</p>
<p>Heath, L.S.; Hansen, M. H.; Smith, J.E. [and others]. 2009. Investigation
into calculating tree biomass and carbon in the FIADB using a biomass
expansion factor approach. In: Forest Inventory and Analysis (FIA) Symposium
2008. RMRS-P-56CD. Fort Collins, CO: U.S. Department of Agriculture, Forest
Service, Rocky Mountain Research Station. 1 CD.
</p>
<p>Burrill, E.A., Wilson, A.M., Turner, J.A., Pugh, S.A., Menlove, J.,
Christiansen, G., Conkling, B.L., Winnie, D., 2018. Forest Inventory and
Analysis Database [WWW Document].  St Paul MN US Dep. Agric. For. Serv.
North. Res. Stn.  URL http://apps.fs.fed.us/fiadb-downloads/datamart.html
(accessed 3.6.21).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Extract the most current evaluation of data for Utah
UTdat &lt;- DBgetPlots(states = "Utah", 
                    eval = "FIA",
                    eval_opts = list(Cur = TRUE))
names(UTdat)
head(UTdat$plot)
UTdat$pltcnt

# Look at number of plots by inventory year
table(UTdat$plot$INVYR)

# Note: see FIESTAutils::ref_plot and FIESTAutils::ref_cond for variable descriptions
# Or consult FIA Database documentation
# \link{https://www.fia.fs.fed.us/library/database-documentation/index.php}

# Extract specified inventory years 2012:2014 and spatial information
UTdat2 &lt;- DBgetPlots(states = "Utah",
                     eval = "custom",
                     eval_opts = list(invyrs = 2012:2014), 
                     issp = TRUE)
names(UTdat2)
UTdat2$pltcnt
UTdat2$xy_PUBLIC

# Extract and display plots with aspen forest type
UTdat3 &lt;- DBgetPlots(states = "Utah",
                     eval = "custom",
                     eval_opts = eval_options(invyrs = 2012:2014),
                     issp = TRUE,
                     allFilter = "FORTYPCD == 901")
names(UTdat3)
UTdat3$pltcnt

plot(sf::st_geometry(FIESTA::stunitco[FIESTA::stunitco$STATENM == "Utah",]),
                     border = "light grey")
plot(sf::st_geometry(UTdat3$xy_PUBLIC), add=TRUE, pch=18, cex=.5)

## End(Not run)
</code></pre>

<hr>
<h2 id='DBgetSQLite'>Database - Queries a SQLite database table.</h2><span id='topic+DBgetSQLite'></span>

<h3>Description</h3>

<p>Extracts and queries data from a SQLite (*.sqlite) database (Note: must use
SQL syntax).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetSQLite(states = NULL, outfolder = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetSQLite_+3A_states">states</code></td>
<td>
<p>String. Vector of one or more state names.</p>
</td></tr>
<tr><td><code id="DBgetSQLite_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The output folder path. If NULL, outfolder is the
working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns nothing.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Extract data from Washington state
DBgetSQLite(states = "WA")

# Extract data from Utah and California, save to an outfolder
DBgetSQLite(states = c("UT", "CA"),
            outfolder = tempdir()) 

## End(Not run)
</code></pre>

<hr>
<h2 id='DBgetStrata'>Database - Gets stratification information from FIA database.</h2><span id='topic+DBgetStrata'></span>

<h3>Description</h3>

<p>Gets strata information from FIA's Oracle database or FIA DataMart,
including: (1) strata and estimation unit assignment per plot; (2) total
area by estimation unit; (3) pixel counts and number plots by
strata/estimation unit. Include a data frame of plots, states, or evaluation
information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetStrata(
  dat = NULL,
  uniqueid = "CN",
  datsource = "datamart",
  data_dsn = NULL,
  states = NULL,
  eval_opts = eval_options(Cur = TRUE),
  savedata = FALSE,
  getassgn = TRUE,
  pop_plot_stratum_assgn = NULL,
  savedata_opts = NULL,
  dbconn = NULL,
  dbconnopen = FALSE,
  evalInfo = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetStrata_+3A_dat">dat</code></td>
<td>
<p>Data frame, comma-delimited file (*.csv), or shapefile (*.shp).
The strata value is merged to this table and returned as a data frame. See
details for necessary variables.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String. The unique plot identifier of dat (e.g., 'CN').</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of data ('datamart', 'sqlite').</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name(s) (e.g., 'Arizona','New
Mexico') or code(s) (e.g., 4, 35) of states for strata if dat=NULL.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_eval_opts">eval_opts</code></td>
<td>
<p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, writes output to outfolder.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_getassgn">getassgn</code></td>
<td>
<p>Logical. If TRUE, extracts plot assignments from
pop_plot_stratum_assgn table in database.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_pop_plot_stratum_assgn">pop_plot_stratum_assgn</code></td>
<td>
<p>Data frame. The pop_plot_stratum_assgn for
state(s).</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_dbconn">dbconn</code></td>
<td>
<p>Open database connection.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, the dbconn connection is not closed.</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_evalinfo">evalInfo</code></td>
<td>
<p>List. List object output from DBgetEvalid or DBgetXY</p>
</td></tr>
<tr><td><code id="DBgetStrata_+3A_...">...</code></td>
<td>
<p>For extendibility.
FIESTA functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following variables must be present in dat: STATECD, UNITCD, INVYR, a
uniqueid (e.g. &quot;PLT_CN&quot;), and PLOT_STATUS_CD (if nonsampled plots in
dataset).
</p>
<p>FIADB TABLES USED: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> FS_FIADB.SURVEY </td><td style="text-align: left;"> To get latest
inventory year.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> FS_FIADB.POP_EVAL </td><td style="text-align: left;"> To get EVALID and EVALID
years.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> FS_FIADB.POP_ESTN_UNIT </td><td style="text-align: left;"> To get total area by estimation
unit (AREATOT_EU-includes water).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> FS_FIADB.POP_STRATUM </td><td style="text-align: left;"> To get
pixel counts by stratum and estimation unit.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
FS_FIADB.POP_PLOT_STRATUM_ASSGN </td><td style="text-align: left;"> To get estimation unit &amp; stratum
assignment for each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Area by estimation unit includes total area for all plots (Type=&quot;CURR&quot;).
</p>


<h3>Value</h3>

<p>FIAstrata - a list of the following objects: </p>
<table>
<tr><td><code>pltassgn</code></td>
<td>
<p> Data
frame. Plot-level strata/estimation unit assignment.  If dat is not NULL,
strata/estimation unit variables are appended to dat. </p>
</td></tr> <tr><td><code>pltassgnid</code></td>
<td>

<p>String. Name of unique identifier of plot in pltassgn. </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>

<p>Data frame. Total acres by estimation unit. </p>
</td></tr> <tr><td><code>unitvar</code></td>
<td>
<p> String. Name
of the estimation unit variable (ESTN_UNIT). </p>
</td></tr> <tr><td><code>areavar</code></td>
<td>
<p> String. Name
of the acre variable (ACRES). </p>
</td></tr> <tr><td><code>stratalut</code></td>
<td>
<p> Data frame. Strata look-up
table with summarized pixel counts (P1POINTCNT) by strata/estimation unit. </p>
</td></tr>
<tr><td><code>strvar</code></td>
<td>
<p> String. Name of the strata variable (STRATA). </p>
</td></tr>
<tr><td><code>strwtvar</code></td>
<td>
<p> String. Name of the strata weight variable (P1POINTCNT). </p>
</td></tr>
<tr><td><code>evalid</code></td>
<td>
<p> List. evalid by state. </p>
</td></tr>
</table>
<p>Outputs to outfolder (if savedata=TRUE): </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> - CSV file of
pltassgn (*'date'.csv).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> - CSV file of unitarea (*'date'.csv).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> - CSV file of stratalut (*'date'.csv).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> - If collapsed, a CSV
file of original classes and new collapsed classes.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Note</h3>

<p>Steps used in data extraction:
</p>
 <ol>
<li><p> Get EVALID and EVALID years by state - DBgetEvalid().
</p>
</li>
<li><p> unitarea: get total area by estimation unit for EVALID
(POP_ESTN_UNIT).  </p>
</li>
<li><p> stratalut: get pixel counts by estimation unit and
stratum for EVALID (POP_STRATUM).  </p>
</li>
<li><p> pltassgn: get estimation unit and
stratum assignment for each plot for EVALID.  (POP_PLOT_STRATUM_ASSGN).
</p>
</li>
<li><p> If dat is not NULL, merge pltassgn assignment to dat.  </p>
</li>
<li><p> Merge
number of plots to stratalut </p>
</li>
<li><p> Check for only 1 MEASYEAR or 1 INVYR and
number of plots by strata/estimation unit.  If less than minimumnum plots
per strata/estimation unit collapse using the following algorithm.  </p>
</li></ol>

<p>Strata collapsing: <br /> If there are less than minplotnum (10) plots in the
smallest strata of the estimation unit, these plots are grouped with the
larger strata in the same estimation unit and defined as the highest strata
value. If, after grouping, there are still less than minplotnum, all of
these plots are combined with the corresponding strata of the estimation
unit above.  If there are no records above, then they are combined with the
estimation unit below.  The process repeats, grouping the strata to the
highest strata value if necessary.  All grouping is restrained within survey
units (UNITCD).
</p>
<p>More than one evaluation: <br /> If attributing a table of plots and there are
plots that have been visited more than once, all plots are assigned an
estimation unit and strata value, but the area and strata proportions are
from the most current evaluation for the dataset. The plots outside the most
current evaluation are attributes with values from the next most current
evaluation occurring in the database.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get strata for the most current evaluation of a state (ex. Wyoming)
WYstrat1 &lt;- DBgetStrata(states = "Wyoming",
                        eval_opts = list(Cur = TRUE))
names(WYstrat1)

head(WYstrat1$pltassgn)
WYstrat1$unitarea
WYstrat1$unitvar
WYstrat1$areavar
WYstrat1$strvar
WYstrat1$evalid

# Get strata information for a specific set of plots
WYstrat4 &lt;- DBgetStrata(dat = WYplt)
names(WYstrat4)

head(WYstrat4$pltassgn)
WYstrat4$unitarea
WYstrat4$evalid

## End(Not run)
</code></pre>

<hr>
<h2 id='DBgetXY'>Database - Extracts plot coordinates.</h2><span id='topic+DBgetXY'></span>

<h3>Description</h3>

<p>Extracts public plot coordinates for an FIA evaluation or a custom 
evaluation. Plots are extracted from FIA's public Datamart 
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBgetXY(
  states = NULL,
  RS = NULL,
  xy_datsource,
  xy_dsn = NULL,
  xy = "PLOT",
  xy_opts = xy_options(),
  datsource = NULL,
  data_dsn = NULL,
  dbTabs = dbTables(),
  pjoinid = "CN",
  eval = "FIA",
  eval_opts = eval_options(),
  invtype = "ANNUAL",
  coordType = "PUBLIC",
  intensity1 = FALSE,
  pvars2keep = NULL,
  issp = FALSE,
  returndata = TRUE,
  savedata = FALSE,
  exportsp = FALSE,
  savedata_opts = NULL,
  PLOT = NULL,
  POP_PLOT_STRATUM_ASSGN = NULL,
  SURVEY = NULL,
  dbconnopen = FALSE,
  evalInfo = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBgetXY_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_rs">RS</code></td>
<td>
<p>String vector. Name of research station(s) to get public XY
coordinates for ('RMRS','SRS','NCRS','NERS','PNWRS'). Do not use if states 
is populated. See FIESTA::ref_statecd for reference to RS and states.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_xy_datsource">xy_datsource</code></td>
<td>
<p>Source of XY data ('datamart', 'sqlite', 'obj', 'csv').</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_xy_dsn">xy_dsn</code></td>
<td>
<p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.db) where XY data reside.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_xy">xy</code></td>
<td>
<p>sf R object or String. If xy_dsn = 'datamart', name of xy table 
in FIA DataMart. If xy_dsn = 'sqlite', name of xy layer in database. If 
datsource = 'csv', full pathname of xy CSV file(s). If datsource = 'obj', 
name of xy R object. If datsource = 'shp', full pathname of shapefile.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_xy_opts">xy_opts</code></td>
<td>
<p>List of xy data options for xy (e.g., xy_opts = list(xvar='LON', 
yvar='LAT'). See xy_options() for more options and defaults.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of FIA data for defining FIA evaluations or 
appending variables ('datamart', 'sqlite', 'obj', 'csv'). If datsource = NULL, 
datsource = xy_datsource. If datsource = 'datamart', data are downloaded
extracted from FIA DataMart (http://apps.fs.usda.gov/fia/datamart/datamart.html). 
If datsource='sqlite', specify database name(s) in data_dsn and table name(s) 
in dbTabs() argument. If datsource = ('obj','csv'), specify *.csv file name in 
dbTabs argument.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. Name of database with plot_layer and/or ppsa_layer.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_dbtabs">dbTabs</code></td>
<td>
<p>String or R Object. If data_dsn = 'datamart', name of table(s) 
in FIA DataMart. If data_dsn = 'sqlite', name of layer(s) in database. If 
datsource = 'csv', name of CSV file(s). If datsource = 'obj', name of R object.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Variable in plot table to join to XY data, if 
plot_layer is not NULL. Not necessary to be unique. If using most current 
XY coordinates, use identifier for a plot (e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_eval">eval</code></td>
<td>
<p>String. Type of evaluation time frame for data extraction 
('FIA', 'custom'). See eval_opts for more further options.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_eval_opts">eval_opts</code></td>
<td>
<p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_invtype">invtype</code></td>
<td>
<p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_coordtype">coordType</code></td>
<td>
<p>String. c('PUBLIC', 'ACTUAL'). Defines type of coordinates and is
used for the output name.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_intensity1">intensity1</code></td>
<td>
<p>Logical. If TRUE, includes only XY coordinates where 
INTENSITY = 1 (FIA base grid).</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_pvars2keep">pvars2keep</code></td>
<td>
<p>String vector. One or more variables in plot_layer to append 
to output.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_issp">issp</code></td>
<td>
<p>Logical. If TRUE, returns spatial XY data as a list object with
query.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns XY data as a list object with
query.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves XY data. Specify outfolder and 
format using savedata_opts.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, exports data as spatial.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE or exportsp = TRUE.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_plot">PLOT</code></td>
<td>
<p>Data frame. The name of the PLOT data frame object if 
it is already downloaded and stored in environment.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_pop_plot_stratum_assgn">POP_PLOT_STRATUM_ASSGN</code></td>
<td>
<p>Data frame. The name of the 
POP_PLOT_STRATUM_ASSGN data frame object if it is already downloaded 
and stored in environment.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_survey">SURVEY</code></td>
<td>
<p>Data frame. The name of the SURVEY data frame object
if it has been already downloaded and stored in environment.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_dbconnopen">dbconnopen</code></td>
<td>
<p>Logical. If TRUE, the dbconn connection is not closed.</p>
</td></tr>
<tr><td><code id="DBgetXY_+3A_evalinfo">evalInfo</code></td>
<td>
<p>List. List object output from DBgetEvalid or DBgetXY 
FIESTA functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if returndata=TRUE, a list of the following objects: 
</p>
<table>
<tr><td><code>xy</code></td>
<td>
<p> Data frame. XY data from database. The output name is based on
coordType parameter (e.g., xy_PUBLIC). the data frame include xy.uniqueid,
xvar, yvar and appended plot variables in pvars2keep if plot_layer is not 
NULL. The default plot variables included are 'STATECD','UNITCD','COUNTYCD',
'PLOT','PLOT_ID' (ID+STATECD+UNTCD+COUNTYCD+PLOT), 'COUNTYFIPS'. 
If issp=TRUE, returns an sf object. </p>
</td></tr>
<tr><td><code>xyqry</code></td>
<td>
<p> String. Query to extract coordinates. </p>
</td></tr>
<tr><td><code>xvar</code></td>
<td>
<p> String. Name of X variable in xy*. </p>
</td></tr>
<tr><td><code>yvar</code></td>
<td>
<p> String. Name of Y variable in xy*. </p>
</td></tr>
</table>
<p>If savedata=TRUE, outputs the xy* based on savedata_opts. 
If exportsp=TRUE, the output xy saved as spatial layer based on savedata_opts.
</p>


<h3>Note</h3>

<p>If no parameters are included, the user is prompted for input. If partial
parameters, the default parameter values are used for those not specified.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Most current evaluation and shapefile with public coordinates
COxylst &lt;- DBgetXY(states = "Colorado",
                   eval = "FIA",
                   eval_opts=eval_options(Endyr = 2019))
names(COxylst)

head(COxylst$xy_PUBLIC)
COxylst$xyqry

## End(Not run)
</code></pre>

<hr>
<h2 id='DBqryCSV'>Database - Queries FIA Online Database.</h2><span id='topic+DBqryCSV'></span>

<h3>Description</h3>

<p>Downloads, extracts, and queries compressed comma-delimited file(s) (*.zip)
from FIA DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).  (Note: must
use SQL syntax).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DBqryCSV(sql, states = NULL, sqltables = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DBqryCSV_+3A_sql">sql</code></td>
<td>
<p>String. A sql query. Must be appropriate sql syntax.</p>
</td></tr>
<tr><td><code id="DBqryCSV_+3A_states">states</code></td>
<td>
<p>String vector. Name of state(s) in query. If not by state, set
to NULL.</p>
</td></tr>
<tr><td><code id="DBqryCSV_+3A_sqltables">sqltables</code></td>
<td>
<p>String vector. Name of table(s) in sql statement to
download.  The sqltables must match tables in the sql statement (i.e.,
case-sensitive).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The compressed data files are downloaded from FIA DataMart; saved to a
temporary space; extracted and imported; and deleted from temporary space.
Accessibility and download time depends on access and speed of internet
connection.
</p>


<h3>Value</h3>

<p>Returns a data frame from resulting query.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Number of plots by inventory year for the state of Wyoming
sql &lt;- "select INVYR, count(*) AS NBRPLOTS
        from plot
        where statecd=56 group by INVYR"
DBqryCSV(sql = sql,
         states = "Wyoming",
         sqltables = "plot")

## End(Not run)
</code></pre>

<hr>
<h2 id='dbTables'>List of population tables.</h2><span id='topic+dbTables'></span>

<h3>Description</h3>

<p>Returns a list of user-supplied parameters and parameter values for data 
tables to be supplied to *DB functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbTables(
  plot_layer = "PLOT",
  cond_layer = "COND",
  tree_layer = "TREE",
  seed_layer = "SEEDLING",
  plotgeom_layer = "PLOTGEOM",
  vsubpspp_layer = "P2VEG_SUBPLOT_SPP",
  vsubpstr_layer = "P2VEG_SUBP_STRUCTURE",
  invsubp_layer = "INVASIVE_SUBPLOT_SPP",
  subplot_layer = "SUBPLOT",
  subpcond_layer = "SUBP_COND",
  dwm_layer = "COND_DWM_CALC",
  sccm_layer = "SUBP_COND_CHNG_MTRX",
  grm_layer = "TREE_GRM_COMPONENT",
  grmb_layer = "TREE_GRM_BEGIN",
  grmm_layer = "TREE_GRM_MIDPT",
  survey_layer = "SURVEY",
  popeval_layer = "POP_EVAL",
  popevalgrp_layer = "POP_EVAL_GRP",
  popevaltyp_layer = "POP_EVAL_TYP",
  popstratum_layer = "POP_STRATUM",
  popestnunit_layer = "POP_ESTN_UNIT",
  ppsa_layer = "POP_PLOT_STRATUM_ASSGN",
  refspp_layer = "REF_SPECIES",
  other_layers = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dbTables_+3A_plot_layer">plot_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Plot-level data (PLOT).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_cond_layer">cond_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Condition-level data (COND).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_tree_layer">tree_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Tree-level data (TREE).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_seed_layer">seed_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Seedling data (SEEDLING).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_plotgeom_layer">plotgeom_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Plot-level GIS extracted data (PLOTGEOM).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_vsubpspp_layer">vsubpspp_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Understory vegetation species data 
(P2VEG_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_vsubpstr_layer">vsubpstr_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Understory vegetation structure data 
(P2VEG_SUBP_STRUCTURE).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_invsubp_layer">invsubp_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Understory vegetation invasives data 
(INVASIVE_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_subplot_layer">subplot_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Subplot-level data (SUBPLOT).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_subpcond_layer">subpcond_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Subplot condition-level data (SUBP_COND).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_dwm_layer">dwm_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Down wood material data (COND_DWM_CALC)</p>
</td></tr>
<tr><td><code id="dbTables_+3A_sccm_layer">sccm_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Subplot-level change matrix data
(SUBP_COND_CHNG_MTRX).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_grm_layer">grm_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Tree growth, removal, mortality data 
(TREE_GRM_COMPONENT).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_grmb_layer">grmb_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Tree growth, removal, mortality begin data 
(TREE_GRM_BEGIN).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_grmm_layer">grmm_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Tree growth, removal, mortality midpoint data 
(TREE_GRM_MIDPT).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_survey_layer">survey_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population survey (SURVEY) data.</p>
</td></tr>
<tr><td><code id="dbTables_+3A_popeval_layer">popeval_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population evaluation (POP_EVAL) data.</p>
</td></tr>
<tr><td><code id="dbTables_+3A_popevalgrp_layer">popevalgrp_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population evaluation group data (POP_EVAL_GRP).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_popevaltyp_layer">popevaltyp_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population evaluation type data (POP_EVAL_TYP).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_popstratum_layer">popstratum_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population stratum data (POP_STRATUM).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_popestnunit_layer">popestnunit_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population estimation unit data (POP_ESTN_UNIT).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_ppsa_layer">ppsa_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Population plot stratum assignment data (
(POP_PLOT_STRATUM_ASSGN).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_refspp_layer">refspp_layer</code></td>
<td>
<p>R object, comma-delimited file(*.csv), or name of
layer in database. Reference table for species (REF_SPECIES).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_other_layers">other_layers</code></td>
<td>
<p>String. Other layer(s) in database to clip and/or
extract from database (Note: must include PLT_CN variable as unique
identifier).</p>
</td></tr>
<tr><td><code id="dbTables_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, an empty list is returned.
</p>


<h3>Value</h3>

<p>A list of user-supplied parameters and parameter values for strata.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dbTables(plot_layer = FIESTA::WYplt)
</code></pre>

<hr>
<h2 id='GDT_NAMES'>Reference tables - gdal data types.</h2><span id='topic+GDT_NAMES'></span>

<h3>Description</h3>

<p>Reference tables - gdal data types.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GDT_NAMES
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 12.
</p>


<h3>Source</h3>

<p>gdal values.
</p>

<hr>
<h2 id='internal_desciption'>Internal functions used for development of FIESTA</h2><span id='topic+internal_desciption'></span>

<h3>Description</h3>

<p>These functions are used internally by developers of the FIESTA and
FIESTAnalysis R packages. They are not meant to be used on their own, or by
users. While some functions may be useful on their own, they will not be
regularly updated, documented, or changed for a particular use.
</p>


<h3>Details</h3>

<p>These functions are not to be called by a user, and are for development
purposes only.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Chris Toney, Grayson W. White
</p>

<hr>
<h2 id='kindcd3old'>Reference table - List of RMRS plots that have fallen out of inventory
because they were not found or they were in the wrong place.</h2><span id='topic+kindcd3old'></span>

<h3>Description</h3>

<p>Reference table - List of RMRS plots that have fallen out of inventory
because they were not found or they were in the wrong place.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kindcd3old
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 38 rows and 8 columns.
</p>


<h3>Source</h3>

<p>FIA query.
SELECT bp.STATECD, bp.COUNTYCD, bp.PLOT_FIADB NEW_PLOT, bp.START_DATE NEW_START_DATE,
bp_old.COUNTYCD OLD_COUNTYCD, bp_old.PLOT_FIADB OLD_PLOT, 
bp_old.END_DATE OLD_END_DATE, p.CN
FROM fs_nims_rmrs.NIMS_BASE_PLOT bp
JOIN fs_nims_rmrs.NIMS_BASE_PLOT bp_old on (bp.PREV_NBP_CN=bp_old.CN)
JOIN fs_nims_rmrs.NIMS_PLOT_RMRS_VW p on(p.NBP_CN=bp_old.CN)
WHERE p.KINDCD = 1
ORDER BY bp.STATECD, bp.COUNTYCD, bp_old.PLOT_FIADB&quot;
</p>

<hr>
<h2 id='modGBarea'>Green-Book module - Generate area estimates.</h2><span id='topic+modGBarea'></span>

<h3>Description</h3>

<p>Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBarea(
  GBpopdat,
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBarea_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from modGBpop().</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;ALL&quot;,
&quot;FOREST&quot;, &quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of row domain variable in cond. If only one
domain, rowvar = domain variable. If more than one domain, include colvar.
If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of column domain variable in cond.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBarea_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> 
</td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each plot. Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link
to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled). If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame. </p>
</td></tr> 
<tr><td><code>pse</code></td>
<td>
<p> Data frame. Percent sampling errors (Confidence level 68
for estimates by rowvar and colvar (and estimation unit). </p>
</td></tr> 
<tr><td><code>titlelst</code></td>
<td>
<p> List. If returntitle=TRUE a list with table title(s). The 
list contains one title if est and pse are in the same table and two titles 
if est and pse are in separate tables. Row and column tables are also included 
in list. </p>
</td></tr> 
<tr><td><code>raw</code></td>
<td>
<p> List. If rawdata=TRUE, a list including the processing data used 
for estimation including: number of plots and conditions; stratification 
information; and 1 to 8 tables with calculated values for table cells and 
totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> 
<tr><td><code>condsampcnt</code></td>
<td>
<p> DF. Number of conditions by condition status 
(forest land, nonforest land, noncensus water, census water, nonsampled). </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by estimation unit. </p>
</td></tr> 
<tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion factors. </p>
</td></tr> 
<tr><td><code>domdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwtvar </td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata (after totally nonsampled 
plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwt </td><td style="text-align: left;"> proportion of area (or plots) by strata and estimation 
unit (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition 
proportion by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonresponse plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> average area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimate proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est </td><td style="text-align: left;"> estimated area of land nhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance estimate of estimate acres of land 
nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.se </td><td style="text-align: left;"> standard error of estimated area of land sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.cv </td><td style="text-align: left;"> coefficient of variation of estimated area of land est.se/est 
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse </td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>savedata<br /> 
if savedata=TRUE...<br /> 
tables with estimate and percent standard error will be written as *csv 
files to outfolder.  if rawdata=TRUE, the rawdata will be output to the 
outfolder in a folder named rawdata (if raw_fmt=&quot;csv&quot;) or a database in 
the outfolder, if (raw_fmt != &quot;csv&quot;).
</p>
<p>if outfn.pre is not null...<br /> 
a prefix is added to output files if raw_fmt = 'csv', prefix is added to 
file names in rawdata folder if raw_fmt != 'csv', prefix is added to dsn name
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.
</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GBpopdat &lt;- modGBpop(
popTabs = list(cond = FIESTA::WYcond,  
               tree = FIESTA::WYtree,        
               seed = FIESTA::WYseed),      
popTabIDs = list(cond = "PLT_CN"),            
pltassgn = FIESTA::WYpltassgn,  
pltassgnid = "CN",        
pjoinid = "PLT_CN",         
unitarea = FIESTA::WYunitarea,
unitvar = "ESTN_UNIT",        
strata = TRUE,           
stratalut = WYstratalut,    
strata_opts = strata_options(getwt = TRUE)   
)

forest_area &lt;- modGBarea(
GBpopdat = GBpopdat, 
landarea = "FOREST",  
sumunits = TRUE,      
)
str(forest_area, max.level = 1)

forest_area_by_forest_type &lt;- modGBarea(
GBpopdat = GBpopdat,        
landarea = "FOREST",       
rowvar = "FORTYPCD",        
sumunits = TRUE            
)
str(forest_area_by_forest_type, max.level = 1)

</code></pre>

<hr>
<h2 id='modGBchng'>Green-Book module - Generate area estimates.</h2><span id='topic+modGBchng'></span>

<h3>Description</h3>

<p>Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBchng(
  GBpopdat,
  chngtype = "total",
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  cdomdat = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBchng_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from modGBpop().</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_chngtype">chngtype</code></td>
<td>
<p>String. The type of change estimates ('total', 'annual').</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;ALL&quot;,
&quot;FOREST&quot;, &quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of row domain variable in cond. If only one
domain, rowvar = domain variable. If more than one domain, include colvar.
If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of column domain variable in cond.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_cdomdat">cdomdat</code></td>
<td>
<p>Data.frame of condition-domain data. Output from modGBchng().</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBchng_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> 
</td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each plot. Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link
to cond (e.g., CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled). If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame. </p>
</td></tr> 
<tr><td><code>pse</code></td>
<td>
<p> Data frame. Percent sampling errors (Confidence level 68
for estimates by rowvar and colvar (and estimation unit). </p>
</td></tr> 
<tr><td><code>titlelst</code></td>
<td>
<p> List. If returntitle=TRUE a list with table title(s). The 
list contains one title if est and pse are in the same table and two titles 
if est and pse are in separate tables. Row and column tables are also included 
in list. </p>
</td></tr> 
<tr><td><code>raw</code></td>
<td>
<p> List. If rawdata=TRUE, a list including the processing data used 
for estimation including: number of plots and conditions; stratification 
information; and 1 to 8 tables with calculated values for table cells and 
totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> 
<tr><td><code>condsampcnt</code></td>
<td>
<p> DF. Number of conditions by condition status 
(forest land, nonforest land, noncensus water, census water, nonsampled). </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by estimation unit. </p>
</td></tr> 
<tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion factors. </p>
</td></tr> 
<tr><td><code>domdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwtvar </td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata (after totally nonsampled 
plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwt </td><td style="text-align: left;"> proportion of area (or plots) by strata and estimation 
unit (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition 
proportion by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonresponse plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> average area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimate proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est </td><td style="text-align: left;"> estimated area of land nhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance estimate of estimate acres of land 
nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.se </td><td style="text-align: left;"> standard error of estimated area of land sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.cv </td><td style="text-align: left;"> coefficient of variation of estimated area of land est.se/est 
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse </td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>savedata<br /> 
if savedata=TRUE...<br /> 
tables with estimate and percent standard error will be written as *csv 
files to outfolder.  if rawdata=TRUE, the rawdata will be output to the 
outfolder in a folder named rawdata (if raw_fmt=&quot;csv&quot;) or a database in 
the outfolder, if (raw_fmt != &quot;csv&quot;).
</p>
<p>if outfn.pre is not null...<br /> 
a prefix is added to output files if raw_fmt = 'csv', prefix is added to 
file names in rawdata folder if raw_fmt != 'csv', prefix is added to dsn name
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.
</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='modGBdwm'>Green-Book module - Generate area estimates.</h2><span id='topic+modGBdwm'></span>

<h3>Description</h3>

<p>Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBdwm(
  GBpopdat = NULL,
  dwmtype = "CWD",
  dwmvar = "VOLCF",
  peracre = FALSE,
  lbs2tons = FALSE,
  landarea = "FOREST",
  pcfilter = NULL,
  vfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBdwm_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from modGBpop().</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_dwmtype">dwmtype</code></td>
<td>
<p>String. Type of dwm estimate ('CWD', 'FWD_LG', &quot;FWD_MD&quot;, &quot;FWD_SM&quot;).</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_dwmvar">dwmvar</code></td>
<td>
<p>String. Type of dwm estimate ('VOLCF', 'BIOMASS', &quot;CARBON&quot;).</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_peracre">peracre</code></td>
<td>
<p>Logical. If TRUE, generates per-acre estimates.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_lbs2tons">lbs2tons</code></td>
<td>
<p>Logical. If TRUE, converts biomass or carbon variables from
pounds to tons. If metric=TRUE, converts to metric tons, else short tons.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;ALL&quot;,
&quot;FOREST&quot;, &quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_vfilter">vfilter</code></td>
<td>
<p>String. A filter for the P2 vegetation table used for
estimate.  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of row domain variable in cond. If only one
domain, rowvar = domain variable. If more than one domain, include colvar.
If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of column domain variable in cond.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBdwm_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted
proportion of condition on each plot.  Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested
condition on plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link
to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is
located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled,
nonsampled).  If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame. Percent sampling errors
(Confidence level 68
unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List. If returntitle=TRUE a list with table
title(s). The list contains one title if est and pse are in the same table
and two titles if est and pse are in separate tables. Row and column tables
are also included in list. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List. If rawdata=TRUE, a list
including the processing data used for estimation including: number of plots
and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>domdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (strata weight)
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by strata and
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion
by strata after nonresponse plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> average area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimate
proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated
proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in
estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est
</td><td style="text-align: left;"> estimated area of land nhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance
estimate of estimate acres of land nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se </td><td style="text-align: left;">
standard error of estimated area of land sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.cv </td><td style="text-align: left;">
coefficient of variation of estimated area of land est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse
</td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left </td><td style="text-align: left;">
left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>savedata<br /> if savedata=TRUE...<br /> tables with estimate and percent standard
error will be written as *csv files to outfolder.  if rawdata=TRUE, the
rawdata will be output to the outfolder in a folder named rawdata (if
raw_fmt=&quot;csv&quot;) or a database in the outfolder, if (raw_fmt != &quot;csv&quot;).
</p>
<p>if outfn.pre is not null...<br /> a prefix is added to output files if raw_fmt
= 'csv', prefix is added to file names in rawdata folder if raw_fmt !=
'csv', prefix is added to dsn name
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.
</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='modGBp2veg'>Green-Book module - Generate area estimates.</h2><span id='topic+modGBp2veg'></span>

<h3>Description</h3>

<p>Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBp2veg(
  GBpopdat = NULL,
  p2vegtype = "str",
  peracre = FALSE,
  landarea = "FOREST",
  pcfilter = NULL,
  vfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBp2veg_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from modGBpop().</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_p2vegtype">p2vegtype</code></td>
<td>
<p>String. Type of p2veg estimate ('str', 'spp').</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_peracre">peracre</code></td>
<td>
<p>Logical. If TRUE, generates per-acre estimates.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;ALL&quot;,
&quot;FOREST&quot;, &quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_vfilter">vfilter</code></td>
<td>
<p>String. A filter for the P2 vegetation table used for
estimate.  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of row domain variable in cond (e.g., 'FORTYPCD') 
or P2VEG_SUBP_STRUCTURE (e.g., 'GROWTH_HABIT_CD', 'LAYER') or 
P2VEG_SUBPLOT_SPP (e.g., 'VEG_FLDSPCD', 'VEG_SPCD', 'GROWTH_HABIT_CD', 'LAYER'). 
If only one domain, rowvar = domain variable. If more than one domain, include 
colvar. If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of column domain variable in cond.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBp2veg_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted
proportion of condition on each plot.  Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested
condition on plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link
to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is
located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled,
nonsampled).  If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame. Percent sampling errors
(Confidence level 68
unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List. If returntitle=TRUE a list with table
title(s). The list contains one title if est and pse are in the same table
and two titles if est and pse are in separate tables. Row and column tables
are also included in list. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List. If rawdata=TRUE, a list
including the processing data used for estimation including: number of plots
and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>domdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (strata weight)
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by strata and
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion
by strata after nonresponse plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> average area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimate
proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated
proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in
estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est
</td><td style="text-align: left;"> estimated area of land nhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance
estimate of estimate acres of land nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se </td><td style="text-align: left;">
standard error of estimated area of land sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.cv </td><td style="text-align: left;">
coefficient of variation of estimated area of land est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse
</td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left </td><td style="text-align: left;">
left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>savedata<br /> if savedata=TRUE...<br /> tables with estimate and percent standard
error will be written as *csv files to outfolder.  if rawdata=TRUE, the
rawdata will be output to the outfolder in a folder named rawdata (if
raw_fmt=&quot;csv&quot;) or a database in the outfolder, if (raw_fmt != &quot;csv&quot;).
</p>
<p>if outfn.pre is not null...<br /> a prefix is added to output files if raw_fmt
= 'csv', prefix is added to file names in rawdata folder if raw_fmt !=
'csv', prefix is added to dsn name
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.
</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='modGBpop'>Green-Book module - Generate population data for GB module.</h2><span id='topic+modGBpop'></span>

<h3>Description</h3>

<p>Generates population data for generating 'green-book' estimates (Scott et
al. 2005).  Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1.
Attributes adjusted to a per-acre value are summed by plot, divided by the
adjustment factor, and averaged by stratum.  Strata means are combined using
the strata weights and then expanded to using the total land area in the
population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBpop(
  popType = "VOL",
  popTabs = popTables(),
  popTabIDs = popTableIDs(),
  popFilter = popFilters(),
  pltassgn = NULL,
  pltassgnid = "PLT_CN",
  dsn = NULL,
  pjoinid = "CN",
  areawt = "CONDPROP_UNADJ",
  areawt2 = NULL,
  adj = "samp",
  defaultVars = TRUE,
  unitvar = NULL,
  unitarea = NULL,
  areavar = "ACRES",
  strata = TRUE,
  stratalut = NULL,
  strvar = "STRATUMCD",
  returndata = TRUE,
  savedata = FALSE,
  saveobj = FALSE,
  objnm = "GBpopdat",
  unit_opts = NULL,
  strata_opts = NULL,
  savedata_opts = NULL,
  GBdata = NULL,
  pltdat = NULL,
  stratdat = NULL,
  auxdat = NULL,
  keepadjvars = FALSE,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBpop_+3A_poptype">popType</code></td>
<td>
<p>String. Type of evaluation(s) to include in population data.
Note: currently only c('CURR', 'VOL', 'LULC', 'DWM') 
are available. See details below for descriptions of each.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_poptabs">popTabs</code></td>
<td>
<p>List of population tables the user would like returned.
See help(popTables) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_poptabids">popTabIDs</code></td>
<td>
<p>List of unique IDs corresponding to the population tables
that the user has requested. See help(popTableIDs) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_popfilter">popFilter</code></td>
<td>
<p>List of population filters. See help(popFilters) for a 
list of options.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_pltassgn">pltassgn</code></td>
<td>
<p>DF/DT, Optional. R object, sf R object, comma-delimited
file(.csv), layer or spatial layer in dsn, or shapefile(.shp). Plot-level
assignment of estimation unit and/or strata, with one record for each plot.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_pltassgnid">pltassgnid</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_dsn">dsn</code></td>
<td>
<p>String. Name of database where tree, cond, and plot-level tables
reside.  The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Join variable in plot to match pltassgnid. Does not
need to be uniqueid. If using most current XY coordinates for plot
assignments, use identifier for plot (e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_areawt">areawt</code></td>
<td>
<p>String. Name of variable in cond for summarizing area 
weights (e.g., CONDPROP_UNADJ).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_areawt2">areawt2</code></td>
<td>
<p>String. An equation to multiply to areawt for estimation. 
All variables in equation must be in cond.
weights (e.g., CONDPROP_UNADJ).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_adj">adj</code></td>
<td>
<p>String. How to calculate adjustment factors for nonsampled
(nonresponse) conditions based on summed proportions for by plot ('samp',
'plot').  'samp' - adjustments are calculated at strata/estimation unit
level; 'plot' - adjustments are calculated at plot-level. Adjustments are
only calculated for annual inventory plots (DESIGNCD=1).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_defaultvars">defaultVars</code></td>
<td>
<p>Logical. If TRUE, a set of default variables are selected.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of the estimation unit variable in unitarea and
cond or pltassgn data frame with estimation unit assignment for each plot
(e.g., 'ESTN_UNIT'). Optional if only one estimation unit.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_unitarea">unitarea</code></td>
<td>
<p>Numeric or DF. Total area by estimation unit. If only 1
estimation unit, include number of total acreage for the area of interest or
a data frame with area and estimation unit. If more than one estimation
unit, provide a data frame of total area by estimation unit, including
unitvar and areavar.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable in unitarea. Default=&quot;ACRES&quot;.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_strata">strata</code></td>
<td>
<p>Logical. If TRUE, include information for post-stratification.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_stratalut">stratalut</code></td>
<td>
<p>DF/DT. If strata=TRUE, look-up table with pixel counts or
area by strata or proportion or area ('strwt') by strata (and estimation
unit).  If 'strwt' is not included, set getwt=TRUE and getwtvar as the name
of variable to calculate weights from (e.g., pixel counts).</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_strvar">strvar</code></td>
<td>
<p>String. If strata=TRUE, name of the strata variable in
stratalut and cond or pltassgn data frame with stratum assignment for each
plot (Default = 'STRATUMCD').</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns data objects.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, saves returned list object to outfolder.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rds object.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_unit_opts">unit_opts</code></td>
<td>
<p>List. See help(unit_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_strata_opts">strata_opts</code></td>
<td>
<p>List. See help(strata_options()) for a list of options.
Only used when strata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_gbdata">GBdata</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::anGBdata().</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_pltdat">pltdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetPlots().</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_stratdat">stratdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetStrata().</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_auxdat">auxdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetAuxiliary().</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_keepadjvars">keepadjvars</code></td>
<td>
<p>Logical. If TRUE, keep adjustment factors from 
pop_stratum table in FIA database.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBpop_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Population types <br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>popType</b>
<b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> ALL </td><td style="text-align: left;"> Population data, including nonsampled plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CURR </td><td style="text-align: left;"> Population data for area estimates, excluding nonsampled 
plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> VOL </td><td style="text-align: left;"> Population data for area/tree estimates, excluding 
nonsampled plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> LULC </td><td style="text-align: left;"> Population data for land use/land cover transitional estimates, 
including only plots with previous measurements and excluding nonsampled 
plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;"> Unique identifier for each plot in tree 
table.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  
Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ </td><td style="text-align: left;"> Number of trees per acre each sample tree represents 
(e.g., DESIGNCD=1: TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for 
trees on microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot in cond 
table.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot. Set 
CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each 
plot. Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on
plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest 
condition on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site 
productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of subplot conditions 
on each plot. Set SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted 
proportion of microplot conditions on each plot. Set MICRPROP_UNADJ=1, 
if only 1 condition per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree attributes. Unadjusted 
proportion of macroplot conditions on each plot. Set MACRPROP_UNADJ=1, 
if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> pltassgnid </td><td style="text-align: left;"> Unique identifier for each plot in 
pltassgn.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  
If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with population data for Green-Book estimates.
</p>
<table>
<tr><td><code>condx</code></td>
<td>
<p> Data frame. Condition-level data including plot-level
assignment of estimation unit and stratum (if strata=TRUE), condition
proportion adjustment factor (cadjfac), and adjusted condition proportions
(CONDPROP_ADJ). </p>
</td></tr> 
<tr><td><code>cuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>condid</code></td>
<td>
<p> String. Unique identifier of condition in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>treex</code></td>
<td>
<p> Data frame. Tree data within population, used for estimation, 
including trees per acre adjustment factor (tadjfac), and adjusted trees per 
acre (TPA_ADJ) (if treef is included). </p>
</td></tr>
<tr><td><code>tuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in treex (if treef is
included). </p>
</td></tr> 
<tr><td><code>ACI.filter</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot;. </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> String. Returned table of area by estimation unit. </p>
</td></tr> 
<tr><td><code>unitvar</code></td>
<td>
<p> String. Variable name for estimation unit. </p>
</td></tr> 
<tr><td><code>strlut</code></td>
<td>
<p> String. Strata-level table with pixel counts by strata 
(P1POINTCNT), strata weights (strwt), number of plots by strata (n.strata), 
total number of plots in estimation unit (n.total), sum of condition proportions 
(_UNADJ_SUM), area adjustments (*_ADJFAC), total area, and area expansion 
by strata (EXPNS). </p>
</td></tr> 
<tr><td><code>strvar</code></td>
<td>
<p> String. Variable name for strata. If strata=FALSE, 
strvar=&quot;ONESTRAT&quot;. </p>
</td></tr>
<tr><td><code>expcondtab</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot;.</p>
</td></tr> 
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Data frame. Number of plots by PLOT_STATUS_CD. </p>
</td></tr>
<tr><td><code>condsampcnt</code></td>
<td>
<p> Data frame. Number of conditions by COND_STATUS_CD. </p>
</td></tr>
<tr><td><code>states</code></td>
<td>
<p> String. State names in dataset. </p>
</td></tr> 
<tr><td><code>invyrs</code></td>
<td>
<p> String. Range of inventory years in dataset. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar </td><td style="text-align: left;"> number of pixels by 
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata (after totally nonsampled 
plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwt </td><td style="text-align: left;"> proportion of area (or plots) by strata and estimation 
unit (i.e., strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed conditionproportion by strata and 
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA_USED </td><td style="text-align: left;"> total area of estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> expfac </td><td style="text-align: left;"> strata-level expansion factor after nonsampled plots and 
conditions removed (AREA_USED/n.strata) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> EXPNS </td><td style="text-align: left;"> strata-level area expansions (expfac * strwt)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>unitcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one strata class
within an estimation unit, all strata classes with 2 or less plots are
combined. The current method for combining is to group the strata with less
than 2 plots with the strata class following in consecutive order (numeric
or alphabetical), restrained by estimation unit (if unitcombine=FALSE), and
continuing until the number of plots equals 10. If there are no strata
classes following in order, it is combined with the estimation unit previous
in order.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GBpopdat &lt;- modGBpop(
popTabs = list(cond = FIESTA::WYcond,  
               tree = FIESTA::WYtree,        
               seed = FIESTA::WYseed),      
popTabIDs = list(cond = "PLT_CN"),            
pltassgn = FIESTA::WYpltassgn,  
pltassgnid = "CN",        
pjoinid = "PLT_CN",         
unitarea = FIESTA::WYunitarea,
unitvar = "ESTN_UNIT",        
strata = TRUE,           
stratalut = WYstratalut,    
strata_opts = strata_options(getwt = TRUE)   
)

str(GBpopdat, max.level = 1)

</code></pre>

<hr>
<h2 id='modGBratio'>Green-Book module - Generate ratio estimates.</h2><span id='topic+modGBratio'></span>

<h3>Description</h3>

<p>Generates per-acre and per-tree estimates by domain and/or tree domain (and
estimation unit). Calculations are based on chapter 4 of Scott et al. 2005
('the green-book') for mapped forest inventory plots. The ratio estimator
for estimating per-acre or per-tree by stratum and domain is used, referred
to as Ratio of Means (ROM).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBratio(
  GBpopdat,
  estseed = "none",
  ratiotype = "PERACRE",
  woodland = "Y",
  landarea = "FOREST",
  pcfilter = NULL,
  estvarn = NULL,
  estvarn.filter = NULL,
  estvard = NULL,
  estvard.filter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBratio_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from modGBpop().</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_ratiotype">ratiotype</code></td>
<td>
<p>String. The type of ratio estimates (&quot;PERACRE&quot;, &quot;PERTREE&quot;).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;FOREST&quot;,
&quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD = 1; If
landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_estvarn">estvarn</code></td>
<td>
<p>String. Name of the tree estimate variable (numerator).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_estvarn.filter">estvarn.filter</code></td>
<td>
<p>String. A tree filter for the estimate variable
(numerator).  Must be R syntax (e.g., &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_estvard">estvard</code></td>
<td>
<p>String. Name of the tree estimate variable (denominator).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_estvard.filter">estvard.filter</code></td>
<td>
<p>String. A tree filter for the estimate variable
(denominator).  Must be R syntax (e.g., &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of the row domain variable in cond or tree. If
only one domain, rowvar = domain variable. If more than one domain, include
colvar. If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of the column domain variable in cond or tree.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBratio_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variable = NULL, then it will prompt user for input.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (ex. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If sumunits=TRUE or one estimation unit and colvar=NULL, estimates
and percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors (Confidence level 68
colvar (and estimation unit). Note: for 95
percent sampling error by 1.96. </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string
vectors. If returntitle=TRUE a list with table title(s). The list contains
one title if est and pse are in the same table and two titles if est and pse
are in separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE,
a list including the processing data used for estimation including: number
of plots and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>tdomdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (i.e., strata
weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition
proportion by strata after nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames of variables used
in estimation process for the rowvar, colvar and combination of rowvar and
colvar (if colvar is not NULL), and grand total by estimation unit
(unit.rowest, unit.colest, unit.grpest, unit.totest, respectively) and
summed estimation units, if sumunits=TRUE (roweset, colest, grpest, totest,
respectively).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimated
proportion of trees for numerator </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate
of estimated proportion of trees for numerator </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> dhat </td><td style="text-align: left;"> estimated
proportion of trees for denominator </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> dhat.var </td><td style="text-align: left;"> variance estimate
of estimated proportion of trees for denominator </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> covar </td><td style="text-align: left;">
covariance for ratio </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used
in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
estn </td><td style="text-align: left;"> estimated area of trees, for numerator nhat*ACRES </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
estn.var </td><td style="text-align: left;"> variance estimate of estimated area of trees
nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> estd </td><td style="text-align: left;"> estimated area of land
(ratiotype="PERACRE"), for denominator dhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> estd.var </td><td style="text-align: left;">
variance of estimated area, for denominator dhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
estd.covar </td><td style="text-align: left;"> estimated covariance of numerator and denominator
covar*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat </td><td style="text-align: left;"> estimated ratio estn/estd </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
rhat.var </td><td style="text-align: left;"> variance estimate of estimation ratio
estn.var+rhat^2*estd.var-2*rhat*est.covar)/estd^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.se </td><td style="text-align: left;">
estimated standard error of ratio sqrt(rhat.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.cv </td><td style="text-align: left;">
estimated coefficient of variation of ratio rhat.se/rhat </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.pse
</td><td style="text-align: left;"> estimated percent standard error or ratio rhat.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left
</td><td style="text-align: left;"> left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (in NIMS) to
short tons by multiplying the variable by 0.0005.  DRYBIO_AG, DRYBIO_BG,
DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP, DRYBIO_BOLE,
DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GBpopdat &lt;- modGBpop(
popTabs = list(cond = FIESTA::WYcond,  
               tree = FIESTA::WYtree,        
               seed = FIESTA::WYseed),      
popTabIDs = list(cond = "PLT_CN"),            
pltassgn = FIESTA::WYpltassgn,  
pltassgnid = "CN",        
pjoinid = "PLT_CN",         
unitarea = FIESTA::WYunitarea,
unitvar = "ESTN_UNIT",        
strata = TRUE,           
stratalut = WYstratalut,    
strata_opts = strata_options(getwt = TRUE)   
)

## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 
ratio1.1 &lt;- modGBratio(
GBpopdat = GBpopdat,         # pop - population calculations
landarea = "TIMBERLAND",     # est - forest land filter
sumunits = TRUE,             # est - sum estimation units to population
estvarn = "VOLCFNET",               # est - net cubic-foot volume, numerator
estvarn.filter = "STATUSCD == 1",   # est - live trees only, numerator
returntitle = TRUE           # out - return title information
)
str(ratio1.1, max.level = 1)

ratio1.2 &lt;- modGBratio(
GBpopdat = GBpopdat,         # pop - population calculations
landarea = "TIMBERLAND",     # est - forest land filter
sumunits = TRUE,             # est - sum estimation units to population
estvarn = "VOLCFNET",               # est - net cubic-foot volume
estvarn.filter = "STATUSCD == 1",   # est - live trees only
rowvar = "FORTYPCD",         # est - row domain 
returntitle = TRUE           # out - return title information
)
str(ratio1.2, max.level = 1)

</code></pre>

<hr>
<h2 id='modGBtree'>Green-Book module - Generate tree estimates.</h2><span id='topic+modGBtree'></span>

<h3>Description</h3>

<p>Generates tree and or seedling estimates by domain and/or tree domain (and
estimation unit).  Calculations are based on Scott et al. 2005 ('the
green-book') for mapped forest inventory plots. The non-ratio estimator for
estimating tree attributes by stratum and domain is used. Plots that are
totally nonsampled are excluded from estimation dataset. Next, an adjustment
factor is calculated by strata to adjust for nonsampled (nonresponse)
conditions that have proportion less than 1. Attributes adjusted to a
per-acre value are summed by plot, divided by the adjustment factor, and
averaged by stratum. Strata means are combined using the strata weights and
then expanded to using the total land area in the population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modGBtree(
  GBpopdat,
  estvar,
  estvar.filter = NULL,
  estseed = "none",
  woodland = "Y",
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modGBtree_+3A_gbpopdat">GBpopdat</code></td>
<td>
<p>List. Population data objects returned from
FIESTA::modGBpop().</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_estvar">estvar</code></td>
<td>
<p>String. Name of the tree-level estimate variable (e.g.,
'VOLCFNET').</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_estvar.filter">estvar.filter</code></td>
<td>
<p>String. A tree-level filter for estvar. Must be R
syntax (e.g., 'STATUSCD == 1').</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_landarea">landarea</code></td>
<td>
<p>String. The condition-level filter for defining land area
('ALL', 'FOREST', 'TIMBERLAND'). If landarea='FOREST', COND_STATUS_CD = 1;
if landarea='TIMBERLAND', SITECLCD in(1:6) &amp; RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Optional. Name of domain variable to group estvar by
for rows in table output. Rowvar must be included in an input data frame
(i.e., plt, cond, tree). If no rowvar is included, an estimate is returned
for the total estimation unit. Include colvar for grouping by 2 variables.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_colvar">colvar</code></td>
<td>
<p>String. Optional. If rowvar != NULL, name of domain variable
to group estvar by for columns in table output. Colvar must be included in
an input data frame (i.e., plt, cond, tree).</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modGBtree_+3A_...">...</code></td>
<td>
<p>Parameters for modGBpop() if GBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (ex. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identfier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If sumunits=TRUE or one estimation unit and colvar=NULL, estimates
and percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors (Confidence level 68
colvar (and estimation unit). Note: for 95
percent sampling error by 1.96. </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string
vectors. If returntitle=TRUE a list with table title(s). The list contains
one title if est and pse are in the same table and two titles if est and pse
are in separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE,
a list including the processing data used for estimation including: number
of plots and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>tdomdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (i.e., strata
weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition
proportion by strata after nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), and if colvar is
not NULL, colvar totals, (unit.colvar); and a combination of rowvar and
colvar (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively). These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used
in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est
</td><td style="text-align: left;"> estimated area of trees nhat*ACRES </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance
estimate of estimated area of trees nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se </td><td style="text-align: left;">
standard error of estimated area of trees sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.cv </td><td style="text-align: left;">
coefficient of variation of estimated area of trees est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse
</td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left </td><td style="text-align: left;">
left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (from FIA
database) to short tons by multiplying the variable by 0.0005.  DRYBIO_AG,
DRYBIO_BG, DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP,
DRYBIO_BOLE, DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GBpopdat &lt;- modGBpop(
  popTabs = list(cond = FIESTA::WYcond,  
                 tree = FIESTA::WYtree,        
                 seed = FIESTA::WYseed),      
  popTabIDs = list(cond = "PLT_CN"),            
  pltassgn = FIESTA::WYpltassgn,  
  pltassgnid = "CN",        
  pjoinid = "PLT_CN",         
  unitarea = FIESTA::WYunitarea,
  unitvar = "ESTN_UNIT",        
  strata = TRUE,           
  stratalut = WYstratalut,    
  strata_opts = strata_options(getwt = TRUE)   
)

tree1.1 &lt;- modGBtree(
  GBpopdat = GBpopdat,         # pop - population calculations
  landarea = "FOREST",         # est - forest land filter
  sumunits = TRUE,             # est - sum estimation units to population
  estvar = "VOLCFNET",               # est - net cubic-foot volume
  estvar.filter = "STATUSCD == 1",   # est - live trees only
  returntitle = TRUE           # out - return title information
)
str(tree1.1, max.level = 1)

tree1.2 &lt;- modGBtree(
  GBpopdat = GBpopdat,         # pop - population calculations
  landarea = "FOREST",         # est - forest land filter
  sumunits = TRUE,             # est - sum estimation units to population
  estvar = "VOLCFNET",               # est - net cubic-foot volume
  estvar.filter = "STATUSCD == 1",   # est - live trees only
  rowvar = "FORTYPCD",         # est - row domain 
  returntitle = TRUE           # out - return title information
)
str(tree1.2, max.level = 1)

</code></pre>

<hr>
<h2 id='modMAarea'>Model-Assisted module - Generate model-assisted area estimates.</h2><span id='topic+modMAarea'></span>

<h3>Description</h3>

<p>Generates area estimates by estimation unit. Estimates are calculated from
McConville et al. (2018)'s mase R package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modMAarea(
  MApopdat,
  MAmethod,
  FIA = TRUE,
  prednames = NULL,
  modelselect = FALSE,
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  bootstrap = FALSE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  modelselect_bydomain = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modMAarea_+3A_mapopdat">MApopdat</code></td>
<td>
<p>List. Population data objects returned from modMApop().</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_mamethod">MAmethod</code></td>
<td>
<p>String. mase (i.e., model-assisted) method to use 
('greg', 'gregEN', 'ratio').</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_fia">FIA</code></td>
<td>
<p>Logical. If TRUE, the finite population term is removed from
estimator to match FIA estimates.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to include in
model.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_modelselect">modelselect</code></td>
<td>
<p>Logical. If TRUE, an elastic net regression model is fit 
to the entire plot level data, and the variables selected in that model are 
used for the proceeding estimation.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates ('ALL',
'FOREST', 'TIMBERLAND').  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of the row domain variable in cond or tree. If
only one domain, rowvar = domain variable. If more than one domain, include
colvar. If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of the column domain variable in cond or tree.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_bootstrap">bootstrap</code></td>
<td>
<p>Logical. If TRUE, returns bootstrap variance estimates,
otherwise uses Horvitz-Thompson estimator under simple random sampling
without replacement.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_modelselect_bydomain">modelselect_bydomain</code></td>
<td>
<p>Logical. If TRUE, modelselection will occur at 
the domain level as specified by rowvar and/or colvar and not at the level of
the entire sample.</p>
</td></tr>
<tr><td><code id="modMAarea_+3A_...">...</code></td>
<td>
<p>Parameters for modMApop() if MApopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltstrat (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;">
cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to pltstrat (ex.
PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on
plot.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each plot.  Set
CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD
</td><td style="text-align: left;"> Status of each forested condition on plot (i.e. accessible forest,
nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE.
Status of each nonforest condition on plot (i.e. accessible nonforest,
nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND.
Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltstrat </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR
</td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD
</td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not included, all
plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Reference names are available for the following variables: <br /> ADFORCD,
AGENTCD, CCLCD, DECAYCD, DSTRBCD, KINDCD, OWNCD, OWNGRPCD, FORTYPCD,
FLDTYPCD, FORTYPCDCALC, TYPGRPCD, FORINDCD, RESERVCD, LANDCLCD, STDSZCD,
FLDSZCD, PHYSCLCD, MIST_CL_CD, PLOT_STATUS_CD, STATECD, TREECLCD, TRTCD,
SPCD, SPGRPCD
</p>


<h3>Value</h3>

<p>If FIA=TRUE or unitvar=NULL and colvar=NULL, one data frame is
returned with tree estimates and percent sample errors. Otherwise, a list is
returned with tree estimates in one data frame (est) and percent sample
errors in another data frame (est.pse). If rawdata=TRUE, another list is
returned including raw data used in the estimation process.  If
addtitle=TRUE and returntitle=TRUE, the title for est/pse is returned. If
savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If FIA=TRUE or one estimation unit and colvar=NULL, estimates and
percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors for estimates by rowvar and colvar (and estimation
unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string vectors. If
returntitle=TRUE a list with table title(s). The list contains one title if
est and pse are in the same table and two titles if est and pse are in
separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE, a list
including: number of plots by plot status, if in dataset (plotsampcnt);
number of conditions by condition status (condsampcnt); data used for
post-stratification (stratdat); and 1-8 tables with calculated variables
used for processing estimates and percent sampling error for table cell
values and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ESTUNIT
</td><td style="text-align: left;"> estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> STRATA </td><td style="text-align: left;"> strata </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> area by
strata for estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata
(and estimation unit) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation
unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> TOTACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt
</td><td style="text-align: left;"> proportion of area (or number of plots) by strata (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> expfac.strata </td><td style="text-align: left;"> expansion factor (in area unit (e.g., acres) by
strata (areavar/n.strata) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), and if colvar is
not NULL, colvar totals, (unit.colvar); and a combination of rowvar and
colvar (unit.grpvar). If FIA=TRUE, the raw data for the summed estimation
units are also included (totest, rowest, colest, grpest, respectively).
These tables do not included estimate proportions (nhat and nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> estimated variance of estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> est </td><td style="text-align: left;"> estimated area of trees nhat*ACRES </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;">
estimated variance of estimated area of trees nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
est.se </td><td style="text-align: left;"> standard error of estimated area of trees sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
est.cv </td><td style="text-align: left;"> coefficient of variation of estimated area of trees est.se/est
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse </td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for estimated area
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;">
right tail of 67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>stratcombine:<br /> If MAmethod='PS', and stratcombine=TRUE, and less than 2
plots in any one estimation unit, all estimation units with 10 or less plots
are combined. The current method for combining is to group the estimation
unit with less than 10 plots with the estimation unit following in
consecutive order (numeric or alphabetical), restrained by survey unit
(UNITCD) if included in dataset, and continuing until the number of plots
equals 10. If there are no estimation units following in order, it is
combined with the estimation unit previous in order.
</p>
<p>autoxreduce:<br /> If MAmethod='GREG', and autoxreduce=TRUE, and there is an
error because of multicolinearity, a variable reduction method is applied to
remove correlated variables. The method used is based on the
variance-inflation factor (vif) from a linear model. The vif estimates how
much the variance of each x variable is inflated due to mulitcolinearity in
the model.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (from FIA
database) to short tons by multiplying the variable by 0.0005.  DRYBIO_AG,
DRYBIO_BG, DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP,
DRYBIO_BOLE, DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>References</h3>

<p>Kelly McConville, Becky Tang, George Zhu, Shirley Cheung, and
Sida Li (2018). mase: Model-Assisted Survey Estimation. R package version
0.1.2 https://cran.r-project.org/package=mase
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up population dataset (see ?modMApop() for more information)
MApopdat &lt;- modMApop(popTabs = list(tree = FIESTA::WYtree,
                                    cond = FIESTA::WYcond),
                     pltassgn = FIESTA::WYpltassgn,
                     pltassgnid = "CN",
                     unitarea = FIESTA::WYunitarea,
                     unitvar = "ESTN_UNIT",
                     unitzonal = FIESTA::WYunitzonal,
                     prednames = c("dem", "tcc", "tpi", "tnt"),
                     predfac = "tnt")

# Use GREG estimator to estimate area of forest land in our population
mod1 &lt;- modMAarea(MApopdat = MApopdat, 
          MAmethod = "greg", 
          landarea = "FOREST")

str(mod1)
          
# Use GREG estimator to estimate area of forest land by forest type and
# stand-size class
mod2 &lt;- modMAarea(MApopdat = MApopdat,
          MAmethod = "greg",
          landarea = "FOREST",
          rowvar = "FORTYPCD",
          colvar = "STDSZCD")
          
str(mod2)

</code></pre>

<hr>
<h2 id='modMApop'>Model-Assisted module - Generate population data for MA module.</h2><span id='topic+modMApop'></span>

<h3>Description</h3>

<p>Generates population data for generating model-assisted estimation.  Plots
that are totally nonsampled are excluded from estimation dataset. Next, an
adjustment factor is calculated by strata (if MAmethod=&quot;PS&quot;) or by
estimation unit to adjust for nonsampled (nonresponse) conditions that have
proportion less than 1. Attributes adjusted to a per-acre value are summed
by plot, divided by the adjustment factor, and averaged by stratum and/or
estimation unit. Note: population data must be generated by MA method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modMApop(
  popType = "VOL",
  popTabs = popTables(),
  popTabIDs = popTableIDs(),
  popFilter = popFilters(),
  pltassgn = NULL,
  pltassgnid = "PLT_CN",
  dsn = NULL,
  pjoinid = "CN",
  areawt = "CONDPROP_UNADJ",
  adjplot = TRUE,
  unitvar = NULL,
  unitarea = NULL,
  areavar = "ACRES",
  unitzonal = NULL,
  prednames = NULL,
  predfac = NULL,
  standardize = TRUE,
  returndata = TRUE,
  savedata = FALSE,
  saveobj = FALSE,
  objnm = "MApopdat",
  unit_opts = NULL,
  savedata_opts = NULL,
  MAdata = NULL,
  pltdat = NULL,
  auxdat = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modMApop_+3A_poptype">popType</code></td>
<td>
<p>String. Type of evaluation(s) to include in population data.
Note: currently only c('CURR', 'VOL', 'LULC') are available. See details
below for descriptions of each.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_poptabs">popTabs</code></td>
<td>
<p>List of population tables the user would like returned.
See help(popTables) for a list of options.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_poptabids">popTabIDs</code></td>
<td>
<p>List of unique IDs corresponding to the population tables
that the user has requested. See help(popTableIDs) for a list of
options.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_popfilter">popFilter</code></td>
<td>
<p>List of population filters. See help(popFilters) for a 
list of options.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_pltassgn">pltassgn</code></td>
<td>
<p>DF/DT, Optional. R object, sf R object, comma-delimited
file(.csv), layer or spatial layer in dsn, or shapefile(.shp). Plot-level
assignment of estimation unit and/or strata, with one record for each plot.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_pltassgnid">pltassgnid</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_dsn">dsn</code></td>
<td>
<p>String. Name of database where tree, cond, and plot-level tables
reside.  The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="modMApop_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Join variable in plot to match pltassgnid. Does not
need to be uniqueid. If using most current XY coordinates for plot
assignments, use identifier for plot (e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="modMApop_+3A_areawt">areawt</code></td>
<td>
<p>String. Name of variable for summarizing area weights (e.g.,
CONDPROP_UNADJ).</p>
</td></tr>
<tr><td><code id="modMApop_+3A_adjplot">adjplot</code></td>
<td>
<p>Logical. If TRUE, adjusts for nonresponse at plot-level.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of the estimation unit variable in unitarea and
cond or pltassgn data frame with estimation unit assignment for each plot
(e.g., 'ESTN_UNIT'). Optional if only one estimation unit.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_unitarea">unitarea</code></td>
<td>
<p>Numeric or DF. Total area by estimation unit. If only 1
estimation unit, include number of total acreage for the area of interest or
a data frame with area and estimation unit. If more than one estimation
unit, provide a data frame of total area by estimation unit, including
unitvar and areavar.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable in unitarea. Default=&quot;ACRES&quot;.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_unitzonal">unitzonal</code></td>
<td>
<p>DF/DT. Table with zonal auxiliary information by estimation
unit. For continuous data, means by estimation unit; for categorical data,
proportion of class by estimation unit.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to include in
model.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_predfac">predfac</code></td>
<td>
<p>String vector. Name(s) of prednames that are factors (i.e.,
categorical). Names will change in output depending on number of categories.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_standardize">standardize</code></td>
<td>
<p>Logical. If TRUE, predictors are standardized.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns data objects.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, saves returned list object to outfolder.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rds object.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_unit_opts">unit_opts</code></td>
<td>
<p>List. See help(unit_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_madata">MAdata</code></td>
<td>
<p>List. Data output from FIESTA::MAdata().</p>
</td></tr>
<tr><td><code id="modMApop_+3A_pltdat">pltdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetPlots().</p>
</td></tr>
<tr><td><code id="modMApop_+3A_auxdat">auxdat</code></td>
<td>
<p>List. Auxiliary data output from FIESTA::spGetAuxiliary().</p>
</td></tr>
<tr><td><code id="modMApop_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modMApop_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid 
</td><td style="text-align: left;"> Unique identifier for each plot, to link to pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ </td><td style="text-align: left;"> Number of trees per acre each sample tree represents 
(e.g. DESIGNCD=1: TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for 
trees on microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to 
pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot. Set 
CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot 
(i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest 
condition on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site 
productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of subplot conditions 
on each plot. Set SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted 
proportion of microplot conditions on each plot. Set MICRPROP_UNADJ=1, 
if only 1 condition per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree attributes. Unadjusted 
proportion of macroplot conditions on each plot. Set MACRPROP_UNADJ=1, 
if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid 
</td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (e.g. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, 
nonsampled). If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with population data for Green-Book estimates.
</p>
<table>
<tr><td><code>condx</code></td>
<td>
<p> Data frame. Condition-level data including plot-level
assignment of estimation unit and stratum (if strata=TRUE) and adjusted
condition proportion. </p>
</td></tr> 
<tr><td><code>pltcondx</code></td>
<td>
<p> Data frame. Condition-level data, merged with plot data. </p>
</td></tr> 
<tr><td><code>cuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>condid</code></td>
<td>
<p> String. Unique identifier of condition in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>treex</code></td>
<td>
<p> Data frame. If esttype='TREE', tree-level data, including 
sample adjustment factor. </p>
</td></tr>
<tr><td><code>tuniqueid</code></td>
<td>
<p> String. If esttype='TREE', unique identifier of plot in
treex. </p>
</td></tr> 
<tr><td><code>ACI.filter</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD
== 1&quot; . </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> String. Returned table of area by estimation unit. </p>
</td></tr> 
<tr><td><code>unitvar</code></td>
<td>
<p> String. Variable name for estimation unit. </p>
</td></tr>
<tr><td><code>expcondtab</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot;. </p>
</td></tr> 
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Data frame. Number of plots by PLOT_STATUS_CD. </p>
</td></tr> 
<tr><td><code>condsampcnt</code></td>
<td>
<p> Data frame. Number of conditions by COND_STATUS_CD. </p>
</td></tr> 
<tr><td><code>states</code></td>
<td>
<p> String. State names in dataset. </p>
</td></tr> 
<tr><td><code>invyrs</code></td>
<td>
<p> String. Range of inventory years in dataset. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by strata and 
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA_USED </td><td style="text-align: left;"> total area of estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> expfac </td><td style="text-align: left;"> strata-level expansion factor after nonsampled plots and 
conditions removed (AREA_USED/n.strata) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> EXPNS </td><td style="text-align: left;"> strata-level area expansions (expfac * strwt)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> SUBPLOT </td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;"> 0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> 
If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>unitcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one strata class
within an estimation unit, all strata classes with 2 or less plots are
combined. The current method for combining is to group the strata with less
than 2 plots with the strata class following in consecutive order (numeric
or alphabetical), restrained by estimation unit (if unitcombine=FALSE), and
continuing until the number of plots equals 10. If there are no strata
classes following in order, it is combined with the estimation unit previous
in order.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# NOTE: FIA data objects used in these examples are stored in `FIESTA`, but
# can be generated for populations of interest by the user with functions in
# `FIESTA` such as `spGetPlots()`, `spGetAuxiliary()`, etc. For more
# information, see `FIESTA`'s extensive vignettes.
 
# Population data for counties in Wyoming
modMApop(popTabs = list(tree = FIESTA::WYtree,
                        cond = FIESTA::WYcond),
         pltassgn = FIESTA::WYpltassgn,
         pltassgnid = "CN",
         unitarea = FIESTA::WYunitarea,
         unitvar = "ESTN_UNIT",
         unitzonal = FIESTA::WYunitzonal,
         prednames = c("dem", "tcc", "tpi", "tnt"),
         predfac = "tnt")
         
# Adding seedling data as well
modMApop(popTabs = list(tree = FIESTA::WYtree,
                        cond = FIESTA::WYcond,
                        seed = FIESTA::WYseed),
         pltassgn = FIESTA::WYpltassgn,
         pltassgnid = "CN",
         unitarea = FIESTA::WYunitarea,
         unitvar = "ESTN_UNIT",
         unitzonal = FIESTA::WYunitzonal,
         prednames = c("dem", "tcc", "tpi", "tnt"),
         predfac = "tnt")

</code></pre>

<hr>
<h2 id='modMAratio'>Model-Assisted module - Generate model-assisted tree estimates.</h2><span id='topic+modMAratio'></span>

<h3>Description</h3>

<p>Generates tree estimates by estimation unit. Estimates are calculated from
McConville et al. (2018)'s mase R package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modMAratio(
  MApopdat,
  ratiotype = "PERACRE",
  woodland = "Y",
  landarea = "FOREST",
  estseed = "none",
  pcfilter = NULL,
  estvarn = NULL,
  estvarn.filter = NULL,
  estvard = NULL,
  estvard.filter = NULL,
  prednames = NULL,
  FIA = TRUE,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  bootstrap = FALSE,
  modelselect = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modMAratio_+3A_mapopdat">MApopdat</code></td>
<td>
<p>List. Population data objects returned from modMApop().</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_ratiotype">ratiotype</code></td>
<td>
<p>String. The type of ratio estimates (&quot;PERACRE&quot;, &quot;PERTREE&quot;).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;FOREST&quot;,
&quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD = 1; If
landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_estvarn">estvarn</code></td>
<td>
<p>String. Name of the tree estimate variable (numerator).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_estvarn.filter">estvarn.filter</code></td>
<td>
<p>String. A tree filter for the estimate variable
(numerator).  Must be R syntax (e.g., &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_estvard">estvard</code></td>
<td>
<p>String. Name of the tree estimate variable (denominator).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_estvard.filter">estvard.filter</code></td>
<td>
<p>String. A tree filter for the estimate variable
(denominator).  Must be R syntax (e.g., &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to include in
model.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_fia">FIA</code></td>
<td>
<p>Logical. If TRUE, the finite population term is removed from
estimator to match FIA estimates.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Optional. Name of domain variable to group estvarn and
estvard by for rows in table output. Rowvar must be included in an input data frame
(i.e., plt, cond, tree). If no rowvar is included, an estimate is returned
for the total estimation unit. Include colvar for grouping by 2 variables.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_colvar">colvar</code></td>
<td>
<p>String. Optional. If rowvar != NULL, name of domain variable
to group estvarn and estvard by for columns in table output. Colvar must be included in
an input data frame (i.e., plt, cond, tree).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_bootstrap">bootstrap</code></td>
<td>
<p>Logical. If TRUE, returns bootstrap variance estimates,
otherwise uses Horvitz-Thompson estimator under simple random sampling
without replacement.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_modelselect">modelselect</code></td>
<td>
<p>Logical. If TRUE, an elastic net regression model is fit 
to the entire plot level data, and the variables selected in that model are 
used for the proceeding estimation.</p>
</td></tr>
<tr><td><code id="modMAratio_+3A_...">...</code></td>
<td>
<p>Parameters for modMApop() if MApopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (e.g., DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Reference names are available for the following variables: <br /> ADFORCD,
AGENTCD, CCLCD, DECAYCD, DSTRBCD, KINDCD, OWNCD, OWNGRPCD, FORTYPCD,
FLDTYPCD, FORTYPCDCALC, TYPGRPCD, FORINDCD, RESERVCD, LANDCLCD, STDSZCD,
FLDSZCD, PHYSCLCD, MIST_CL_CD, PLOT_STATUS_CD, STATECD, TREECLCD, TRTCD,
SPCD, SPGRPCD
</p>


<h3>Value</h3>

<p>If FIA=TRUE or unitvar=NULL and colvar=NULL, one data frame is
returned with tree estimates and percent sample errors. Otherwise, a list is
returned with tree estimates in one data frame (est) and percent sample
errors in another data frame (est.pse). If rawdata=TRUE, another list is
returned including raw data used in the estimation process.  If
addtitle=TRUE and returntitle=TRUE, the title for est/pse is returned. If
savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If FIA=TRUE or one estimation unit and colvar=NULL, estimates and
percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors for estimates by rowvar and colvar (and estimation
unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string vectors. If
returntitle=TRUE a list with table title(s). The list contains one title if
est and pse are in the same table and two titles if est and pse are in
separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE, a list
including: number of plots by plot status, if in dataset (plotsampcnt);
number of conditions by condition status (condsampcnt); data used for
post-stratification (stratdat); and 1-8 tables with calculated variables
used for processing estimates and percent sampling error for table cell
values and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>tdomdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
</table>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat </td><td style="text-align: left;"> estimated ratio estn/estd
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.var </td><td style="text-align: left;"> variance estimate
of estimated ratio estn/estd </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT Number of plots used in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> 
ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.se </td><td style="text-align: left;">
estimated standard error of ratio sqrt(rhat.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.cv </td><td style="text-align: left;">
estimated coefficient of variation of ratio rhat.se/rhat </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.pse
</td><td style="text-align: left;"> estimated percent standard error or ratio rhat.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left
</td><td style="text-align: left;"> left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>autoxreduce:<br /> If MAmethod='GREG', and autoxreduce=TRUE, and there is an
error because of multicolinearity, a variable reduction method is applied to
remove correlated variables. The method used is based on the
variance-inflation factor (vif) from a linear model. The vif estimates how
much the variance of each x variable is inflated due to mulitcolinearity in
the model.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (from FIA
database) to short tons by multiplying the variable by 0.0005.  DRYBIO_AG,
DRYBIO_BG, DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP,
DRYBIO_BOLE, DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Josh Yamamoto
</p>


<h3>References</h3>

<p>Kelly McConville, Becky Tang, George Zhu, Shirley Cheung, and
Sida Li (2018). mase: Model-Assisted Survey Estimation. R package version
0.1.4 https://cran.r-project.org/package=mase
</p>

<hr>
<h2 id='modMAtree'>Model-Assisted module - Generate model-assisted tree estimates.</h2><span id='topic+modMAtree'></span>

<h3>Description</h3>

<p>Generates tree estimates by estimation unit. Estimates are calculated from
McConville et al. (2018)'s mase R package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modMAtree(
  MApopdat,
  MAmethod,
  estvar,
  estvar.filter = NULL,
  estseed = "none",
  woodland = "Y",
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  prednames = NULL,
  modelselect = FALSE,
  FIA = TRUE,
  bootstrap = FALSE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  modelselect_bydomain = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modMAtree_+3A_mapopdat">MApopdat</code></td>
<td>
<p>List. Population data objects returned from modMApop().</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_mamethod">MAmethod</code></td>
<td>
<p>String. mase (i.e., model-assisted) method to use 
('greg', 'gregEN', 'ratio').</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_estvar">estvar</code></td>
<td>
<p>String. Name of the tree-level estimate variable (e.g.,
'VOLCFNET').</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_estvar.filter">estvar.filter</code></td>
<td>
<p>String. A tree-level filter for estvar. Must be R
syntax (e.g., 'STATUSCD == 1').</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_landarea">landarea</code></td>
<td>
<p>String. The condition-level filter for defining land area
('ALL', 'FOREST', 'TIMBERLAND'). If landarea='FOREST', COND_STATUS_CD = 1;
if landarea='TIMBERLAND', SITECLCD in(1:6) &amp; RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Optional. Name of domain variable to group estvar by
for rows in table output. Rowvar must be included in an input data frame
(i.e., plt, cond, tree). If no rowvar is included, an estimate is returned
for the total estimation unit. Include colvar for grouping by 2 variables.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_colvar">colvar</code></td>
<td>
<p>String. Optional. If rowvar != NULL, name of domain variable
to group estvar by for columns in table output. Colvar must be included in
an input data frame (i.e., plt, cond, tree).</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to include in
model.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_modelselect">modelselect</code></td>
<td>
<p>Logical. If TRUE, an elastic net regression model is fit 
to the entire plot level data, and the variables selected in that model are 
used for the proceeding estimation.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_fia">FIA</code></td>
<td>
<p>Logical. If TRUE, the finite population term is removed from
estimator to match FIA estimates.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_bootstrap">bootstrap</code></td>
<td>
<p>Logical. If TRUE, returns bootstrap variance estimates,
otherwise uses Horvitz-Thompson estimator under simple random sampling
without replacement.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_modelselect_bydomain">modelselect_bydomain</code></td>
<td>
<p>Logical. If TRUE, modelselection will occur at 
the domain level as specified by rowvar and/or colvar and not at the level of
the entire sample.</p>
</td></tr>
<tr><td><code id="modMAtree_+3A_...">...</code></td>
<td>
<p>Parameters for modMApop() if MApopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (e.g., DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Reference names are available for the following variables: <br /> ADFORCD,
AGENTCD, CCLCD, DECAYCD, DSTRBCD, KINDCD, OWNCD, OWNGRPCD, FORTYPCD,
FLDTYPCD, FORTYPCDCALC, TYPGRPCD, FORINDCD, RESERVCD, LANDCLCD, STDSZCD,
FLDSZCD, PHYSCLCD, MIST_CL_CD, PLOT_STATUS_CD, STATECD, TREECLCD, TRTCD,
SPCD, SPGRPCD
</p>


<h3>Value</h3>

<p>If FIA=TRUE or unitvar=NULL and colvar=NULL, one data frame is
returned with tree estimates and percent sample errors. Otherwise, a list is
returned with tree estimates in one data frame (est) and percent sample
errors in another data frame (est.pse). If rawdata=TRUE, another list is
returned including raw data used in the estimation process.  If
addtitle=TRUE and returntitle=TRUE, the title for est/pse is returned. If
savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If FIA=TRUE or one estimation unit and colvar=NULL, estimates and
percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors for estimates by rowvar and colvar (and estimation
unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string vectors. If
returntitle=TRUE a list with table title(s). The list contains one title if
est and pse are in the same table and two titles if est and pse are in
separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE, a list
including: number of plots by plot status, if in dataset (plotsampcnt);
number of conditions by condition status (condsampcnt); data used for
post-stratification (stratdat); and 1-8 tables with calculated variables
used for processing estimates and percent sampling error for table cell
values and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ESTUNIT
</td><td style="text-align: left;"> estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> STRATA </td><td style="text-align: left;"> strata </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> area by
strata for estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata
(and estimation unit) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation
unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> TOTACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt
</td><td style="text-align: left;"> proportion of area (or number of plots) by strata (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> expfac.strata </td><td style="text-align: left;"> expansion factor (in area unit (e.g., acres) by
strata (areavar/n.strata) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), and if colvar is
not NULL, colvar totals, (unit.colvar); and a combination of rowvar and
colvar (unit.grpvar). If FIA=TRUE, the raw data for the summed estimation
units are also included (totest, rowest, colest, grpest, respectively).
These tables do not included estimate proportions (nhat and nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> estimated variance of estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> est </td><td style="text-align: left;"> estimated area of trees nhat*ACRES </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;">
estimated variance of estimated area of trees nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
est.se </td><td style="text-align: left;"> standard error of estimated area of trees sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
est.cv </td><td style="text-align: left;"> coefficient of variation of estimated area of trees est.se/est
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse </td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for estimated area
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;">
right tail of 67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>stratcombine:<br /> If MAmethod='PS', and stratcombine=TRUE, and less than 2
plots in any one estimation unit, all estimation units with 10 or less plots
are combined. The current method for combining is to group the estimation
unit with less than 10 plots with the estimation unit following in
consecutive order (numeric or alphabetical), restrained by survey unit
(UNITCD) if included in dataset, and continuing until the number of plots
equals 10. If there are no estimation units following in order, it is
combined with the estimation unit previous in order.
</p>
<p>autoxreduce:<br /> If MAmethod='GREG', and autoxreduce=TRUE, and there is an
error because of multicolinearity, a variable reduction method is applied to
remove correlated variables. The method used is based on the
variance-inflation factor (vif) from a linear model. The vif estimates how
much the variance of each x variable is inflated due to mulitcolinearity in
the model.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (from FIA
database) to short tons by multiplying the variable by 0.0005.  DRYBIO_AG,
DRYBIO_BG, DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP,
DRYBIO_BOLE, DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>References</h3>

<p>Kelly McConville, Becky Tang, George Zhu, Shirley Cheung, and
Sida Li (2018). mase: Model-Assisted Survey Estimation. R package version
0.1.2 https://cran.r-project.org/package=mase
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up population dataset (see ?modMApop() for more information)
MApopdat &lt;- modMApop(popTabs = list(tree = FIESTA::WYtree,
                                    cond = FIESTA::WYcond),
                     pltassgn = FIESTA::WYpltassgn,
                     pltassgnid = "CN",
                     unitarea = FIESTA::WYunitarea,
                     unitvar = "ESTN_UNIT",
                     unitzonal = FIESTA::WYunitzonal,
                     prednames = c("dem", "tcc", "tpi", "tnt"),
                     predfac = "tnt")
                     
# Use GREG Estimator to Estimate cubic foot volume of live trees in our
# population
mod1 &lt;- modMAtree(MApopdat = MApopdat,
          MAmethod = "greg",
          estvar = "VOLCFNET",
          estvar.filter = "STATUSCD == 1")
          
str(mod1)
          
# Use GREG Elastic Net Estimator to Estimate basal area of live trees in our
# population
mod2 &lt;- modMAtree(MApopdat = MApopdat,
          MAmethod = "gregEN",
          estvar = "BA",
          estvar.filter = "STATUSCD == 1")
          
str(mod2)

</code></pre>

<hr>
<h2 id='modPB'>Photo-Based module - Generate photo-based estimates.</h2><span id='topic+modPB'></span>

<h3>Description</h3>

<p>Generates percent, area or ratio-of-means estimates, with associated
sampling error by domain (and estimation unit). Calculations are based on
Patterson (2012) photo-based estimators for the Nevada photo-based
inventory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modPB(
  PBpopdat = NULL,
  tabtype = "PCT",
  sumunits = FALSE,
  ratio = FALSE,
  landarea = "ALL",
  landarea.filter = NULL,
  nonsamp.pntfilter = NULL,
  pntfilter = NULL,
  pfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  domlut = NULL,
  domvarlst = NULL,
  ratioden = "ROWVAR",
  gainloss = FALSE,
  gainloss.vals = NULL,
  addtitle = FALSE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modPB_+3A_pbpopdat">PBpopdat</code></td>
<td>
<p>List. Population data objects returned from modPBpop().</p>
</td></tr>
<tr><td><code id="modPB_+3A_tabtype">tabtype</code></td>
<td>
<p>String. Type of units for the table (&quot;PCT&quot;, &quot;AREA&quot;).</p>
</td></tr>
<tr><td><code id="modPB_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are combined to one table
for output. Note: only available if tabtype=&quot;AREA&quot;. Acres</p>
</td></tr>
<tr><td><code id="modPB_+3A_ratio">ratio</code></td>
<td>
<p>Logical. If TRUE, ratio estimates are generated.</p>
</td></tr>
<tr><td><code id="modPB_+3A_landarea">landarea</code></td>
<td>
<p>String. Sample area for estimates (&quot;ALL&quot;, &quot;CHANGE&quot;). Used to
describe landarea.filter.</p>
</td></tr>
<tr><td><code id="modPB_+3A_landarea.filter">landarea.filter</code></td>
<td>
<p>String. filter for land area. Must be R syntax.</p>
</td></tr>
<tr><td><code id="modPB_+3A_nonsamp.pntfilter">nonsamp.pntfilter</code></td>
<td>
<p>String. An expression for filtering nonsampled
points (e.g., cloud coverage). Must be R syntax.</p>
</td></tr>
<tr><td><code id="modPB_+3A_pntfilter">pntfilter</code></td>
<td>
<p>String. A global filter for the pnt file. Must be R syntax.</p>
</td></tr>
<tr><td><code id="modPB_+3A_pfilter">pfilter</code></td>
<td>
<p>String. A global filter for the plt file. Must be R syntax.</p>
</td></tr>
<tr><td><code id="modPB_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of domain variable in pnt used for output
estimation table rows. If only 1 domain, must be rowvar. If no domain,
rowvar=NULL.</p>
</td></tr>
<tr><td><code id="modPB_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of domain variable in pnt used for output
estimation table columns. If only 1 domain, colvar=NULL.</p>
</td></tr>
<tr><td><code id="modPB_+3A_domlut">domlut</code></td>
<td>
<p>DF/DT or comma-delimited (*.csv). Look-up table to define the
variables in the pnt table with category codes (DOMCODE) and code names
(DOMNAME), and to set a pretty name for the variable to use in output table
(DOMTITLE). This table is also used to populate rowvar/colvar,
row.orderby/col.orderby, and title.rowvar/title.colvar parameters. Optional.</p>
</td></tr>
<tr><td><code id="modPB_+3A_domvarlst">domvarlst</code></td>
<td>
<p>String vector. A vector of variable names that can be row
or column domains (codes and names). Optional.</p>
</td></tr>
<tr><td><code id="modPB_+3A_ratioden">ratioden</code></td>
<td>
<p>String. (&quot;ROWVAR&quot; or &quot;COLVAR&quot;). If ratio, defines whether
the rowvar or colvar in estimation output table is the denominator.</p>
</td></tr>
<tr><td><code id="modPB_+3A_gainloss">gainloss</code></td>
<td>
<p>Logical. If TRUE, a table with the difference of gain and
loss along with the variance and standard error, in percent, is generated.</p>
</td></tr>
<tr><td><code id="modPB_+3A_gainloss.vals">gainloss.vals</code></td>
<td>
<p>String vector. A vector of names for values in gainloss
table.</p>
</td></tr>
<tr><td><code id="modPB_+3A_addtitle">addtitle</code></td>
<td>
<p>Logical. If TRUE and savedata=TRUE, adds title to outfile.</p>
</td></tr>
<tr><td><code id="modPB_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns a character string of the title
of the output data frame.</p>
</td></tr>
<tr><td><code id="modPB_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modPB_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modPB_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modPB_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modPB_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modPB_+3A_...">...</code></td>
<td>
<p>Parameters for modPBpop() if PBpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> DF. Estimated percent cover or area by rowvar, colvar, (and
estimation unit).  </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> DF. Percent sampling error of estimates by
rowvar, colvar (and estimation unit). </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2
string vectors. If returntitle=TRUE a list with table title(s). The list
contains one title if est and pse are in the same table and two titles if
est and pse are in separate tables. Row and column tables are also included
in list. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE, a list
including the processing data used for estimation including: number of plots
and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>pntsampcnt</code></td>
<td>
<p> Table. Number of points by rowvar/colvar (sampled and
nonsampled). </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> strata </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> areavar </td><td style="text-align: left;"> If
tabtype='AREA', area by strata for estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> TOTAREA </td><td style="text-align: left;"> If
tabtype='AREA', total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or number of plots) by strata (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames of variables used
in estimation process for the rowvar, colvar and combination of rowvar and
colvar (if colvar is not NULL), and grand total by estimation unit
(unit.rowest, unit.colest, unit.grpest, respectively) and summed estimation
units, if FIA=TRUE (rowest, colest, grpest, respectively).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> phat </td><td style="text-align: left;"> estimated
proportion of covered land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> phat.var </td><td style="text-align: left;"> variance of estimated
proportion of covered land </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> areavar </td><td style="text-align: left;"> If tabtype='AREA', total
area for estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est </td><td style="text-align: left;"> If tabtype='AREA', estimated area
of land phat*areavar If tabtype='PCT', estimated percent cover of land
phat*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance of estimated area of land
phat.var*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> If tabtype='PCT', estimated percent cover of land
phat.var*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se </td><td style="text-align: left;"> standard error of estimated area or
percent cover sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.cv </td><td style="text-align: left;"> coefficient of variance of
estimated area or percent cover est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.pse </td><td style="text-align: left;"> percent
sampling error of estimated area of percent cover est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for estimate </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for
estimate </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval
for estimate </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimate </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimate </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of 67
percent confidence interval for estimate </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>if ratio=TRUE: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;">
<b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> phat.n </td><td style="text-align: left;"> estimated proportion of covered land,
for numerator (colvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> phat.var.n </td><td style="text-align: left;"> variance of estimated
proportion of covered land, for numerator (colvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> phat.d </td><td style="text-align: left;">
estimated proportion of covered land, for denominator (rowvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
phat.var.d </td><td style="text-align: left;"> variance of estimated proportion of covered land, for
denominator (rowvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> covar </td><td style="text-align: left;"> covariance of estimated proportion
of numerator (rowvar) and denominator (colvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat </td><td style="text-align: left;"> ratio of
estimated proportions (numerator-colvar / denominator-rowvar) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
rhat.var </td><td style="text-align: left;"> variance of ratio of estimated proportions </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> rhat.se
</td><td style="text-align: left;"> standard error of ratio of estimated proportions sqrt(rhat.var) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> rhat.cv </td><td style="text-align: left;"> coefficient of variation of ratio of estimated proportions
rhat.se/rhat </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> areavar </td><td style="text-align: left;"> If tabtype='AREA', total area for
estimation unit</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est </td><td style="text-align: left;"> If tabtype='AREA', estimated area of land
rhat*areavar If tabtype='PCT', estimated percent cover of land rhat*100 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance of estimated area of land rhat.var*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> If
tabtype='PCT', estimated percent cover of land rhat.var*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se
</td><td style="text-align: left;"> standard error of estimated area or percent cover sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> est.cv </td><td style="text-align: left;"> coefficient of variance of estimated area or percent cover
est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.pse </td><td style="text-align: left;"> percent sampling error of estimated area of
percent cover est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left </td><td style="text-align: left;"> left tail of 99 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of
99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;">
left tail of 95 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of 67 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>


<h3>Note</h3>

<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Frescino, Tracey S.; Moisen, Gretchen G.; Megown, Kevin A.;
Nelson, Val J.; Freeman, Elizabeth A.; Patterson, Paul L.; Finco, Mark;
Brewer, Ken; Menlove, James 2009.  Nevada Photo-Based Inventory Pilot (NPIP)
photo sampling procedures. Gen. Tech. Rep.  RMRS-GTR-222. Fort Collins, CO:
U.S. Department of Agriculture, Forest Service, Rocky Mountain Research
Station. 30 p.
</p>
<p>Patterson, Paul L. 2012. Photo-based estimators for the Nevada photo-based
inventory.  Res. Pap. RMRS-RP-92. Fort Collins, CO: U.S. Department of
Agriculture, Forest Service, Rocky Mountain Research Station. 14 p.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load necessary data from FIESTA
## Point data
icepntfn &lt;- system.file("extdata",
                        "PB_data/icepnt_utco1135.csv",
                         package = "FIESTA")
icepnt &lt;- read.csv(icepntfn)

## Plot data
icepltfn &lt;- system.file("extdata",
                        "PB_data/icepltassgn_utco1135.csv",
                         package = "FIESTA")
iceplt &lt;- read.csv(icepltfn)

## County data
unitareafn &lt;- system.file("extdata", 
                          "PB_data/unitarea_utco1135.csv",
                           package = "FIESTA")
unitarea &lt;- read.csv(unitareafn)

## ICE Cover
icecoverfn &lt;- system.file("extdata",
                          "PB_data/cover_LUT.csv",
                           package = "FIESTA")
icecover &lt;- read.csv(icecoverfn)
names(icecover) &lt;- sub("cover", "cover_1", names(icecover))

# Set up population data (see ?modPBpop() for more information)
PBpopunit &lt;- modPBpop(pnt = icepnt, 
                      pltassgn = iceplt, 
                      pltassgnid = "plot_id", 
                      pntid = "dot_cnt",
                      unitarea = unitarea, 
                      unitvar = "ESTN_UNIT")
# Photo-based estimation with point-level data by estimation unit (county)                       
## Without summing units
cover1.unit.area &lt;- modPB(
  PBpopdat = PBpopunit,
  tabtype = "AREA",
  rowvar = "cover_1",
  nonsamp.pntfilter = "cover_1 != 999",
  table_opts = list(rowlut = icecover),
  title_opts = list(title.rowvar = "Land Cover (2011)")
) 

cover1.unit.area$est
                          
## With summing units
cover1.unit.area.sum &lt;- modPB(
  PBpopdat = PBpopunit,
  tabtype = "AREA",
  rowvar = "cover_1",
  nonsamp.pntfilter = "cover_1 != 999",
  sumunits = TRUE,
  table_opts = list(rowlut = icecover),
  title_opts = list(title.rowvar = "Land Cover (2011)")
)

cover1.unit.area.sum$est   
          
</code></pre>

<hr>
<h2 id='modPBpop'>Photo-Based module - Generate population data for PB module.</h2><span id='topic+modPBpop'></span>

<h3>Description</h3>

<p>Generates population data for generating photo-based estimation.  Plots that
are totally nonsampled are excluded from estimation dataset. Next, an
adjustment factor is calculated by strata to adjust for nonsampled
(nonresponse) conditions that have proportion less than 1. Attributes
adjusted to a per-acre value are summed by plot, divided by the adjustment
factor, and averaged by stratum.  Strata means are combined using the strata
weights and then expanded to using the total land area in the population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modPBpop(
  pntdat = NULL,
  pltpct = NULL,
  plotid = "plot_id",
  pntid = NULL,
  pltpctvars = NULL,
  plt = NULL,
  pltassgn = NULL,
  puniqueid = "CN",
  pltassgnid = "CN",
  nonsamp.pfilter = NULL,
  sumunits = FALSE,
  unitvar = NULL,
  unitarea = NULL,
  areavar = "ACRES",
  strata = FALSE,
  strtype = "POST",
  stratalut = NULL,
  strvar = "STRATUMCD",
  pvars2keep = NULL,
  saveobj = FALSE,
  objnm = "PBpopdat",
  savedata = FALSE,
  unit_opts = NULL,
  strata_opts = NULL,
  savedata_opts = NULL,
  PBstratdat = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modPBpop_+3A_pntdat">pntdat</code></td>
<td>
<p>DF/DT or comma-delimited file (*.csv). Point-level table with
one record per point. If NULL, aggregated point counts must be in pntcnt.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pltpct">pltpct</code></td>
<td>
<p>DF/DT or comma-delimited file (*.csv). Plot-domain-level table
with percent observed by domain per plot.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_plotid">plotid</code></td>
<td>
<p>String. Unique identifier of plot in pnt. All values must
match puniqueid values, if pltassgn is not NULL.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pntid">pntid</code></td>
<td>
<p>String. Unique identifier of points in pnt.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pltpctvars">pltpctvars</code></td>
<td>
<p>String vector. Variables in pltpct for estimation. If
NULL, all variables are used except plotid in pltpct.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_plt">plt</code></td>
<td>
<p>DF/DT, comma-separated values (CSV) file(*.csv), or layer in dsn,
Can also be a shapefile(*.shp) with one record per plot, a spatial layer in
dsn, or a sf R object. Plot-level variables. If nonsampled plots are
included, PLOT_STATUS_CD variable must be in table. Optional.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pltassgn">pltassgn</code></td>
<td>
<p>DF/DT, comma-delimited file(*.csv), SpatialDataFrame, or
shapefile(*.shp). The plot-level data with one record per plot, including
estimation unit and/or strata information. Optional.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Unique identifier of plot.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pltassgnid">pltassgnid</code></td>
<td>
<p>String. Name of unique identifier of plot in pltassgn with
All values must match plotid values if pnt is not NULL.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_nonsamp.pfilter">nonsamp.pfilter</code></td>
<td>
<p>String. An expression for filtering nonsampled plots.
Must be R syntax.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are combined to one table
for output. Note: only available if tabtype=&quot;AREA&quot;. Acres</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of the estimation unit variable in cond or
pltassgn with estimation unit assignment for each plot (e.g., 'ESTN_UNIT').
If one estimation unit, set unitvar=NULL.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_unitarea">unitarea</code></td>
<td>
<p>Numeric or DF. Total area by estimation unit. If only 1
estimation unit, include number of total acreage for the area of interest or
a data frame with areavar. If more than one estimation unit, provide a data
frame of total area by estimation unit, including unitvar and areavar.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of acre variable in unitarea. Default=&quot;ACRES&quot;.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_strata">strata</code></td>
<td>
<p>Logical. If TRUE, add data information for stratification.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_strtype">strtype</code></td>
<td>
<p>String. If strata=TRUE, the type of strata ('POST', 'PRE').
Note: the variance equations are slightly different.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_stratalut">stratalut</code></td>
<td>
<p>DF/DT. If strata=TRUE, look-up table with strata
proportions ('strwt') by strata (and estimation unit). To calculate 'strwt',
set getwt=TRUE and getwtvar= name of variable with information to calculate
weights from (e.g., pixel counts)</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_strvar">strvar</code></td>
<td>
<p>String. If strata=TRUE, name of the strata variable in
stratalut and cond or pltassgn data frame with stratum assignment for each
plot (Default = 'STRATUMCD').</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pvars2keep">pvars2keep</code></td>
<td>
<p>String vector. Additional plot variables to keep in
dataset.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, saves SApopdat object to outfolder.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rda object.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_unit_opts">unit_opts</code></td>
<td>
<p>List. See help(unit_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_strata_opts">strata_opts</code></td>
<td>
<p>List. See help(strata_options()) for a list of options.
Only used when strata = TRUE.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_pbstratdat">PBstratdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::DBgetStrata().</p>
</td></tr>
<tr><td><code id="modPBpop_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (ex. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with population data for Green-Book estimates.
</p>
<table>
<tr><td><code>condx</code></td>
<td>
<p> Data frame. Condition-level data including plot-level
assignment of estimation unit and stratum (if strata=TRUE) and adjusted
condition proportion. </p>
</td></tr> <tr><td><code>pltcondx</code></td>
<td>
<p> Data frame. Condition-level data,
merged with plot data. </p>
</td></tr> <tr><td><code>cuniqueid</code></td>
<td>
<p> String. Unique identifier of plot
in condx and pltcondx. </p>
</td></tr> <tr><td><code>condid</code></td>
<td>
<p> String. Unique identifier of
condition in condx and pltcondx. </p>
</td></tr> <tr><td><code>treex</code></td>
<td>
<p> Data frame. If
esttype='TREE', tree-level data, including sample adjustment factor. </p>
</td></tr>
<tr><td><code>tuniqueid</code></td>
<td>
<p> String. If esttype='TREE', unique identifier of plot in
treex. </p>
</td></tr> <tr><td><code>ACI.filter</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD
== 1&quot; . </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> String. Returned table of area by estimation
unit. </p>
</td></tr> <tr><td><code>unitvar</code></td>
<td>
<p> String. Variable name for estimation unit. </p>
</td></tr>
<tr><td><code>strlut</code></td>
<td>
<p> String. Strata-level table with pixel counts by strata
(P1POINTCNT), strata weights (strwt), number of plots by strata (n.strata),
total number of plots in estimation unit (n.total), sum of condition
proportions (*_UNADJ_SUM), area adjustments (*_ADJFAC), total area, and area
expansion by strata (EXPNS). </p>
</td></tr> <tr><td><code>strvar</code></td>
<td>
<p> String. Variable name for
strata. If strata=FALSE, strvar=&quot;ONESTRAT&quot;. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> String. If
ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot; . </p>
</td></tr> <tr><td><code>plotsampcnt</code></td>
<td>
<p> Data
frame. Number of plots by PLOT_STATUS_CD. </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> Data frame.
Number of conditions by COND_STATUS_CD. </p>
</td></tr> <tr><td><code>states</code></td>
<td>
<p> String. State names
in dataset. </p>
</td></tr> <tr><td><code>invyrs</code></td>
<td>
<p> String. Range of inventory years in dataset. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (i.e., strata
weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition
proportion by strata after nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> AREA_USED </td><td style="text-align: left;">
total area of estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> expfac </td><td style="text-align: left;"> strata-level expansion
factor after nonsampled plots and conditions removed (AREA_USED/n.strata)
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> EXPNS </td><td style="text-align: left;"> strata-level area expansions (expfac * strwt)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>unitcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one strata class
within an estimation unit, all strata classes with 2 or less plots are
combined. The current method for combining is to group the strata with less
than 2 plots with the strata class following in consecutive order (numeric
or alphabetical), restrained by estimation unit (if unitcombine=FALSE), and
continuing until the number of plots equals 10. If there are no strata
classes following in order, it is combined with the estimation unit previous
in order.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load necessary data from FIESTA
## Point data
icepntfn &lt;- system.file("extdata",
                        "PB_data/icepnt_utco1135.csv",
                         package = "FIESTA")
icepnt &lt;- read.csv(icepntfn)

## Plot data
icepltfn &lt;- system.file("extdata",
                        "PB_data/icepltassgn_utco1135.csv",
                         package = "FIESTA")
iceplt &lt;- read.csv(icepltfn)

# Percent land cover at Time 1 (2011) for all land in Davis and Salt Lake
# Counties, UT
PBpopdat &lt;- modPBpop(pnt = icepnt, 
                     pltassgn = iceplt,
                     pltassgnid = "plot_id",
                     pntid = "dot_cnt")

str(PBpopdat, max.level = 1)

# We can also create population data for estimates by estimation unit
## Read in data for multiple estimation units
unitareafn &lt;- system.file("extdata", 
                          "PB_data/unitarea_utco1135.csv",
                           package = "FIESTA")
unitarea &lt;- read.csv(unitareafn)

## Run modPBpop
PBpopunit &lt;- modPBpop(pnt = icepnt, 
                      pltassgn = iceplt, 
                      pltassgnid = "plot_id", 
                      pntid = "dot_cnt",
                      unitarea = unitarea, 
                      unitvar = "ESTN_UNIT")
</code></pre>

<hr>
<h2 id='modSAarea'>Small area module - Generate small area tree estimates.</h2><span id='topic+modSAarea'></span>

<h3>Description</h3>

<p>Generates small area estimates by domain and/or tree domain (and estimation
unit).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modSAarea(
  SApopdatlst = NULL,
  prednames = NULL,
  SApackage = "JoSAE",
  SAmethod = "area",
  largebnd.unique = NULL,
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  modelselect = FALSE,
  prior = function(x) 1/(sqrt(x) * (1 + x)),
  na.fill = "NONE",
  savedata = FALSE,
  savesteps = FALSE,
  multest = TRUE,
  addSAdomsdf = TRUE,
  SAdomvars = NULL,
  savemultest = FALSE,
  returntitle = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  multest_opts = NULL,
  save4testing = FALSE,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modSAarea_+3A_sapopdatlst">SApopdatlst</code></td>
<td>
<p>List. List of population data objects returned from
modSApop().</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to use in
model.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_sapackage">SApackage</code></td>
<td>
<p>String. Small area package to use ('JoSAE', 'sae', 'hbsae')</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_samethod">SAmethod</code></td>
<td>
<p>String. Small area method to use ('unit', 'area')</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_largebnd.unique">largebnd.unique</code></td>
<td>
<p>String. Name of the large boundary unique identifer
to define plots within a model extent. If NULL, all plots are used for model
extent.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates ('ALL',
'FOREST', 'TIMBERLAND').  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of the row domain variable in cond or tree. If
only one domain, rowvar = domain variable. If more than one domain, include
colvar. If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_modelselect">modelselect</code></td>
<td>
<p>Logical. If TRUE, selects useful predictors using
mase:ElasticNet.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_prior">prior</code></td>
<td>
<p>Function. A prior function to use for hbsae models.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_na.fill">na.fill</code></td>
<td>
<p>String. An estimate to fill in for NA values (i.e., when 
model is unstable or no predictors are selected). Choose from the following 
list that does not include SApackage used ('NONE', 'DIR', 'JoSAE', 'sae', 
'hbsae'). DIR is suggested value for no NA values.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_savesteps">savesteps</code></td>
<td>
<p>Logical. Saves graphs of predictors and response with
labels whether selected or not for both area- and unit-level models.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_multest">multest</code></td>
<td>
<p>Logical. If TRUE, returns a data frame of SA estimates using
both unit-level and area-level estimates.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_addsadomsdf">addSAdomsdf</code></td>
<td>
<p>Logical. If TRUE, appends SAdomdf to unit.multest table
for output.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_sadomvars">SAdomvars</code></td>
<td>
<p>String vector. List of attributes from SAdoms to include in
multest output.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_savemultest">savemultest</code></td>
<td>
<p>Logical. If TRUE, save table with area- and unit-level
estimates.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_multest_opts">multest_opts</code></td>
<td>
<p>List. See help(multest_options()) for a list of options.
Only used when multest = TRUE.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_save4testing">save4testing</code></td>
<td>
<p>Logical. If TRUE, saves intermediate steps as R objects
to outfolder for testing (pdomdat, dunitlut).</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modSAarea_+3A_...">...</code></td>
<td>
<p>Parameters for modSApop if SApopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltstrat (e.g., PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (ex. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltstrat (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassign </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Reference names are available for the following variables: <br /> ADFORCD,
AGENTCD, CCLCD, DECAYCD, DSTRBCD, KINDCD, OWNCD, OWNGRPCD, FORTYPCD,
FLDTYPCD, FORTYPCDCALC, TYPGRPCD, FORINDCD, RESERVCD, LANDCLCD, STDSZCD,
FLDSZCD, PHYSCLCD, MIST_CL_CD, PLOT_STATUS_CD, STATECD, TREECLCD, TRTCD,
SPCD, SPGRPCD
</p>


<h3>Value</h3>

<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates and percent sampling error by
domain. Estimates are based on the SApackage and SAmethod parameters defined. </p>
</td></tr> 
<tr><td><code>titlelst</code></td>
<td>
<p> List. List of titles used for table output. </p>
</td></tr>
<tr><td><code>raw</code></td>
<td>
<p> List of raw data. If rawdata=TRUE, a list including raw data
components used for calculating estimate. </p>
</td></tr> 
<tr><td><code>dunit.multest</code></td>
<td>
<p> Data frame. Table comparing different estimation 
strategies for SAE. </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>domdat</code></td>
<td>
<p> Data frame. Domain-level data used for estimation. </p>
</td></tr>
<tr><td><code>dunit.totest</code></td>
<td>
<p>String. Table of estimates, including more details. </p>
</td></tr>
</table>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions.  For model-based estimation, we calculate adjustment
factors by plot.
</p>
<p>It is calculated by dividing 1 / summed condition proportions by plot. An
adjustment factor is determined for each tree based on the size of the plot
it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Breidenbach, J. 2018. JoSAE: Unit-Level and Area-Level Small
Area Estimation.  R package version 0.3.0.
https://CRAN.R-project.org/package=JoSAE.
</p>
<p>Molina I, Marhuenda Y. 2015. sae: An R Package for Small Area Estimation.
The R Journal 7(1), 81-98.
https://journal.r-project.org/archive/2015/RJ-2015-007/RJ-2015-007.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up population dataset (see ?modSApop() for more information)
SApopdat &lt;- modSApop(popTabs = list(tree = FIESTA::WYtree,
                                    cond = FIESTA::WYcond),
                     pltassgn = FIESTA::WYpltassgn,
                     pltassgnid = "CN",
                     dunitarea = FIESTA::WYunitarea,
                     dunitvar = "ESTN_UNIT",
                     dunitzonal = FIESTA::WYunitzonal,
                     prednames = c("dem", "tcc", "tpi", "tnt"),
                     predfac = "tnt")

# Fit a unit level EBLUP with `JoSAE`
modSAarea(SApopdatlst = SApopdat,
          SApackage = "JoSAE",
          SAmethod = "unit") 
          
# Fit an area level Fay-Herriot hierarchical Bayesian model with `hbsae`
modSAarea(SApopdatlst = SApopdat,
          SApackage = "hbsae",
          SAmethod = "area") 

# Fit an area level Fay-Herriot EBLUP with `sae`, while using Elastic Net
# variable selection
modSAarea(SApopdatlst = SApopdat,
          SApackage = "sae",
          SAmethod = "area",
          modelselect = TRUE) 

</code></pre>

<hr>
<h2 id='modSApop'>Small area module - Compile population data for SA module.</h2><span id='topic+modSApop'></span>

<h3>Description</h3>

<p>Compile population data for input to the modSA* modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modSApop(
  popType = "VOL",
  popTabs = popTables(),
  popTabIDs = popTableIDs(),
  popFilter = popFilters(),
  pltassgn = NULL,
  pltassgnid = "PLT_CN",
  dsn = NULL,
  pjoinid = "CN",
  areawt = "CONDPROP_UNADJ",
  adjplot = TRUE,
  dunitvar = NULL,
  dunitarea = NULL,
  areavar = "ACRES",
  dunitzonal = NULL,
  prednames = NULL,
  predfac = NULL,
  addxy = FALSE,
  returndata = TRUE,
  savedata = FALSE,
  saveobj = FALSE,
  objnm = "SApopdat",
  unit_opts = NULL,
  savedata_opts = NULL,
  SAdoms = NULL,
  smallbnd = NULL,
  smallbnd.domain = NULL,
  largebnd.unique = NULL,
  SAdata = NULL,
  pltdat = NULL,
  auxdat = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modSApop_+3A_poptype">popType</code></td>
<td>
<p>String. Type of evaluation(s) to include in population data.
Note: currently only c('CURR', 'VOL', 'LULC') are available. See details
below for descriptions of each.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_poptabs">popTabs</code></td>
<td>
<p>List of population tables the user would like returned.
See help(popTables) for a list of options.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_poptabids">popTabIDs</code></td>
<td>
<p>List of unique IDs corresponding to the population tables
that the user has requested. See help(popTableIDs) for a list of
options.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_popfilter">popFilter</code></td>
<td>
<p>List of population filters. See help(popFilters) for a 
list of options.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_pltassgn">pltassgn</code></td>
<td>
<p>DF/DT, comma-separated values (CSV) file(*.csv), or layer in
dsn, Can also be a shapefile(*.shp) with one record per plot, a spatial
layer in dsn, or a sf R object. Plot-level assignment of estimation unit
and/or strata. Optional.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_pltassgnid">pltassgnid</code></td>
<td>
<p>String. Unique identifier of plot in pltassgn.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_dsn">dsn</code></td>
<td>
<p>String. Name of database where tree, cond, and pltassgn tables
reside.  The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="modSApop_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Join variable in plot to match pltassgnid. Does not
need to be uniqueid. If using most current XY coordinates for plot
assignments, use identifier for plot (e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="modSApop_+3A_areawt">areawt</code></td>
<td>
<p>String. Name of variable for summarizing area weights (e.g.,
CONDPROP_UNADJ).</p>
</td></tr>
<tr><td><code id="modSApop_+3A_adjplot">adjplot</code></td>
<td>
<p>Logical. If TRUE, adjusts for nonresponse at plot-level.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_dunitvar">dunitvar</code></td>
<td>
<p>String. Name of the domain unit variable in cond, plt, or
pltassgn with domain unit assignment for each plot.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_dunitarea">dunitarea</code></td>
<td>
<p>Numeric or DF. Total area by domain unit.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable in unitarea. Default=&quot;ACRES&quot;.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_dunitzonal">dunitzonal</code></td>
<td>
<p>DF/DT. Data frame with zonal auxiliary information by
domain unit. For continuous data, means by domain unit; for categorical
data, proportion of class by domain unit.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to use in
model.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_predfac">predfac</code></td>
<td>
<p>String vector. Name(s) of factor predictor variables to use
in model. Names will change in output depending on number of categories.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_addxy">addxy</code></td>
<td>
<p>Logical. If TRUE, adds X/Y attributes to pltassgn.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns data objects.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, saves returned list object to outfolder.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rds object.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_unit_opts">unit_opts</code></td>
<td>
<p>List. See help(unit_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_sadoms">SAdoms</code></td>
<td>
<p>sf object. SA domains with attributes for joining.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_smallbnd">smallbnd</code></td>
<td>
<p>sf object. small bound.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_smallbnd.domain">smallbnd.domain</code></td>
<td>
<p>String. Name of attribute defining domain attribute.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_largebnd.unique">largebnd.unique</code></td>
<td>
<p>String. Name of the large boundary unique identifer
to define plots within a model extent. If NULL, all plots are used for model
extent.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_sadata">SAdata</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::SAdata().</p>
</td></tr>
<tr><td><code id="modSApop_+3A_pltdat">pltdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetPlots().</p>
</td></tr>
<tr><td><code id="modSApop_+3A_auxdat">auxdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetAuxiliary().</p>
</td></tr>
<tr><td><code id="modSApop_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modSApop_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to 
pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ </td><td style="text-align: left;"> Number of trees per acre each sample tree 
represents (e.g. DESIGNCD=1: TPA_UNADJ=6.018046 for trees on subplot; 
74.965282 for trees on microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to 
pltassgn (e.g. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot. Set 
CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest 
condition on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of subplot conditions 
on each plot. Set SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted 
proportion of microplot conditions on each plot. Set MICRPROP_UNADJ=1, 
if only 1 condition per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree attributes. Unadjusted 
proportion of macroplot conditions on each plot. Set MACRPROP_UNADJ=1, 
if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to 
link to cond (e.g. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  
If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with population data for Small-Area estimates.
</p>
<table>
<tr><td><code>SAdomsdf</code></td>
<td>
<p> Data frame. Attribute table from SAdoms spatial layer.
Includes DOMAIN and AOI attributes. DOMAIN represents modeling domains.  AOI
identifies the small area of interest. </p>
</td></tr> 
<tr><td><code>condx</code></td>
<td>
<p> Data frame. Condition-level data with condition proportions, 
domain and predictor assignments, and adjusted condition proportions, 
if adjplot = TRUE. </p>
</td></tr> 
<tr><td><code>pltcondx</code></td>
<td>
<p> Data frame. Plot/Condition data used for estimation. </p>
</td></tr>
<tr><td><code>cuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in condx and pltcondx. </p>
</td></tr>
<tr><td><code>condid</code></td>
<td>
<p> String. Unique identifier of condition in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>treex</code></td>
<td>
<p> Data frame. If esttype='TREE', tree-level data, including
adjustment factors, if adjplot = TRUE. </p>
</td></tr> 
<tr><td><code>tuniqueid</code></td>
<td>
<p> String. If esttype='TREE', unique identifier of plot in 
treex. </p>
</td></tr> 
<tr><td><code>ACI.filter</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot; . </p>
</td></tr> 
<tr><td><code>dunitarea</code></td>
<td>
<p> Data frame. Area by model domain unit. </p>
</td></tr> 
<tr><td><code>areavar</code></td>
<td>
<p> String. Name of area variable in dunitarea. </p>
</td></tr> 
<tr><td><code>dunitvar</code></td>
<td>
<p> String. Name of variable defining model domain units in 
dunitarea. </p>
</td></tr> 
<tr><td><code>dunitlut</code></td>
<td>
<p> Data frame. Table of model domain units with zonal statistics 
of predictor values, number of plots by domain unit. </p>
</td></tr> 
<tr><td><code>prednames</code></td>
<td>
<p> String vector. Name of variables in dunitlut and condx 
defining potential predictors for small area estimation. </p>
</td></tr> 
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Data frame. Number of plots by PLOT_STATUS_CD. </p>
</td></tr> 
<tr><td><code>condsampcnt</code></td>
<td>
<p> Data frame. Number of conditions by COND_STATUS_CD. </p>
</td></tr> 
<tr><td><code>states</code></td>
<td>
<p> String. State names in dataset. </p>
</td></tr>
<tr><td><code>invyrs</code></td>
<td>
<p> String. Range of inventory years in dataset. </p>
</td></tr>
<tr><td><code>adjtree</code></td>
<td>
<p> Logical. If TRUE, treex includes adjustment factors. </p>
</td></tr>
</table>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions.  For model-based estimation, we calculate adjustment
factors by plot.
</p>
<p>It is calculated by dividing 1 / summed condition proportions by plot. An
adjustment factor is determined for each tree based on the size of the plot
it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> SUBPLOT </td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;"> 0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> 
If ACI=TRUE, the nonsampled nonforest conditions are removed as well and 
accounted for in adjustment factor.  This is if you are interested in 
estimates for all lands or nonforest lands in the All-Condition-Inventory.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# NOTE: FIA data objects used in these examples are stored in `FIESTA`, but
# can be generated for populations of interest by the user with functions in
# `FIESTA` such as `spGetPlots()`, `spGetAuxiliary()`, etc. For more
# information, see `FIESTA`'s extensive vignettes.
 
# Population data for counties in Wyoming
modSApop(popTabs = list(tree = FIESTA::WYtree,
                        cond = FIESTA::WYcond),
         pltassgn = FIESTA::WYpltassgn,
         pltassgnid = "CN",
         dunitarea = FIESTA::WYunitarea,
         dunitvar = "ESTN_UNIT",
         dunitzonal = FIESTA::WYunitzonal,
         prednames = c("dem", "tcc", "tpi", "tnt"),
         predfac = "tnt")
         
# Adding seedling data as well
modSApop(popTabs = list(tree = FIESTA::WYtree,
                        cond = FIESTA::WYcond,
                        seed = FIESTA::WYseed),
         pltassgn = FIESTA::WYpltassgn,
         pltassgnid = "CN",
         dunitarea = FIESTA::WYunitarea,
         dunitvar = "ESTN_UNIT",
         dunitzonal = FIESTA::WYunitzonal,
         prednames = c("dem", "tcc", "tpi", "tnt"),
         predfac = "tnt")

</code></pre>

<hr>
<h2 id='modSAtree'>Small area module - Generate small area tree estimates.</h2><span id='topic+modSAtree'></span>

<h3>Description</h3>

<p>Generates small area estimates by domain and/or tree domain (and estimation
unit).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modSAtree(
  SApopdatlst = NULL,
  prednames = NULL,
  SApackage = "JoSAE",
  SAmethod = "area",
  estseed = "none",
  woodland = "Y",
  largebnd.unique = NULL,
  landarea = "FOREST",
  pcfilter = NULL,
  estvar = NULL,
  estvar.filter = NULL,
  rowvar = NULL,
  modelselect = FALSE,
  prior = function(x) 1/(sqrt(x) * (1 + x)),
  na.fill = "NONE",
  savedata = FALSE,
  savesteps = FALSE,
  multest = TRUE,
  addSAdomsdf = TRUE,
  SAdomvars = NULL,
  savemultest = FALSE,
  returntitle = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  multest_opts = NULL,
  save4testing = FALSE,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modSAtree_+3A_sapopdatlst">SApopdatlst</code></td>
<td>
<p>List. List of population data objects returned from
modSApop().</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_prednames">prednames</code></td>
<td>
<p>String vector. Name(s) of predictor variables to use in
model.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_sapackage">SApackage</code></td>
<td>
<p>String. Small area package to use ('JoSAE', 'sae', 'hbsae')</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_samethod">SAmethod</code></td>
<td>
<p>String. Small area method to use ('unit', 'area')</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_largebnd.unique">largebnd.unique</code></td>
<td>
<p>String. Name of the large boundary unique identifier
to define plots within a model extent. If NULL, all plots are used for model
extent.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates ('ALL',
'FOREST', 'TIMBERLAND').  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_estvar">estvar</code></td>
<td>
<p>String. Name of the tree estimate variable.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_estvar.filter">estvar.filter</code></td>
<td>
<p>String. A tree filter for estimate variable. Must be R
syntax (e.g., &quot;STATUSCD == 1&quot;).</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of the row domain variable in cond or tree. If
only one domain, rowvar = domain variable. If more than one domain, include
colvar. If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_modelselect">modelselect</code></td>
<td>
<p>Logical. If TRUE, selects useful predictors using
mase:ElasticNet.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_prior">prior</code></td>
<td>
<p>Function. A prior function to use for hbsae models.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_na.fill">na.fill</code></td>
<td>
<p>String. An estimate to fill in for NA values (i.e., when 
model is unstable or no predictors are selected). Choose from the following 
list that does not include SApackage used ('NONE', 'DIR', 'JoSAE', 'sae', 
'hbsae'). DIR is suggested value for no NA values.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_savesteps">savesteps</code></td>
<td>
<p>Logical. Saves graphs of predictors and response with
labels whether selected or not for both area- and unit-level models.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_multest">multest</code></td>
<td>
<p>Logical. If TRUE, returns a data frame of SA estimates using
both unit-level and area-level estimates.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_addsadomsdf">addSAdomsdf</code></td>
<td>
<p>Logical. If TRUE, appends SAdomdf to unit.multest table
for output.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_sadomvars">SAdomvars</code></td>
<td>
<p>String vector. List of attributes from SAdoms to include in
multest output.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_savemultest">savemultest</code></td>
<td>
<p>Logical. If TRUE, save table with area- and unit-level
estimates.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_multest_opts">multest_opts</code></td>
<td>
<p>List. See help(multest_options()) for a list of options.
Only used when multest = TRUE.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_save4testing">save4testing</code></td>
<td>
<p>Logical. If TRUE, saves intermediate steps as R objects
to outfolder for testing (pdomdat, dunitlut).</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modSAtree_+3A_...">...</code></td>
<td>
<p>Parameters for modSApop() if SApopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltstrat (e.g., PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (e.g. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltstrat (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassign </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Reference names are available for the following variables: <br /> ADFORCD,
AGENTCD, CCLCD, DECAYCD, DSTRBCD, KINDCD, OWNCD, OWNGRPCD, FORTYPCD,
FLDTYPCD, FORTYPCDCALC, TYPGRPCD, FORINDCD, RESERVCD, LANDCLCD, STDSZCD,
FLDSZCD, PHYSCLCD, MIST_CL_CD, PLOT_STATUS_CD, STATECD, TREECLCD, TRTCD,
SPCD, SPGRPCD
</p>


<h3>Value</h3>

<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates and percent sampling error by
domain.  Estimates are based on the SApackage and SAmethod parameters
defined. </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List. List of titles used for table output. </p>
</td></tr>
<tr><td><code>raw</code></td>
<td>
<p> List of raw data. If rawdata=TRUE, a list including raw data
components used for calculating estimate. </p>
</td></tr> <tr><td><code>dunit.multest</code></td>
<td>
<p> Data
frame. Table comparing different estimation strategies for SAE. </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>domdat</code></td>
<td>
<p> Data frame. Domain-level data used for estimation. </p>
</td></tr>
<tr><td><code>estvar</code></td>
<td>
<p> String. Name of estimation variable. </p>
</td></tr> <tr><td><code>estvar.filter</code></td>
<td>

<p>String. Logical filter specified for tree data. </p>
</td></tr> <tr><td><code>dunit.totest</code></td>
<td>

<p>String. Table of estimates, including more details. </p>
</td></tr>
</table>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions.  For model-based estimation, we calculate adjustment
factors by plot.
</p>
<p>It is calculated by dividing 1 / summed condition proportions by plot. An
adjustment factor is determined for each tree based on the size of the plot
it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>Common tree filters for estvar.filter: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Breidenbach, J. 2018. JoSAE: Unit-Level and Area-Level Small
Area Estimation.  R package version 0.3.0.
https://CRAN.R-project.org/package=JoSAE.
</p>
<p>Molina I, Marhuenda Y. 2015. sae: An R Package for Small Area Estimation.
The R Journal 7(1), 81-98.
https://journal.r-project.org/archive/2015/RJ-2015-007/RJ-2015-007.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up population dataset (see ?modSApop() for more information)
SApopdat &lt;- modSApop(popTabs = list(tree = FIESTA::WYtree,
                                    cond = FIESTA::WYcond),
                     pltassgn = FIESTA::WYpltassgn,
                     pltassgnid = "CN",
                     dunitarea = FIESTA::WYunitarea,
                     dunitvar = "ESTN_UNIT",
                     dunitzonal = FIESTA::WYunitzonal,
                     prednames = c("dem", "tcc", "tpi", "tnt"),
                     predfac = "tnt")

# Use an area level Fay-Herriot model to estimate total net cubic-foot volume 
# of live trees (at least 5 inches diameter) 
modSAtree(SApopdatlst = SApopdat,
          SApackage = "JoSAE",        
          SAmethod = "unit",           
          landarea = "FOREST",      
          estvar = "VOLCFNET",         
          estvar.filter = "STATUSCD == 1")   
          
# Use a unit level EBLUP to estimate basal area of live trees (at least 5
# inches diameter) 
modSAtree(SApopdatlst = SApopdat,    
          SApackage = "JoSAE",        
          SAmethod = "unit",         
          landarea = "FOREST",      
          estvar = "BA",              
          estvar.filter = "STATUSCD == 1")  

</code></pre>

<hr>
<h2 id='modWFarea'>West-Fest module - Generate population data for WF module.</h2><span id='topic+modWFarea'></span>

<h3>Description</h3>

<p>Generates population data for generating 'Westfall' Ratio2Size estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modWFarea(
  WFpopdat,
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modWFarea_+3A_wfpopdat">WFpopdat</code></td>
<td>
<p>List. Population data objects returned from modWFpop().</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_landarea">landarea</code></td>
<td>
<p>String. The sample area filter for estimates (&quot;ALL&quot;,
&quot;FOREST&quot;, &quot;TIMBERLAND&quot;).  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Name of row domain variable in cond. If only one
domain, rowvar = domain variable. If more than one domain, include colvar.
If no domain, rowvar = NULL.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_colvar">colvar</code></td>
<td>
<p>String. Name of column domain variable in cond.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modWFarea_+3A_...">...</code></td>
<td>
<p>Parameters for modWFpop() if WFpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> 
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> 
</td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each plot. Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link
to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled). If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame. </p>
</td></tr> 
<tr><td><code>pse</code></td>
<td>
<p> Data frame. Percent sampling errors (Confidence level 68
for estimates by rowvar and colvar (and estimation unit). </p>
</td></tr> 
<tr><td><code>titlelst</code></td>
<td>
<p> List. If returntitle=TRUE a list with table title(s). The 
list contains one title if est and pse are in the same table and two titles 
if est and pse are in separate tables. Row and column tables are also included 
in list. </p>
</td></tr> 
<tr><td><code>raw</code></td>
<td>
<p> List. If rawdata=TRUE, a list including the processing data used 
for estimation including: number of plots and conditions; stratification 
information; and 1 to 8 tables with calculated values for table cells and 
totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> 
<tr><td><code>condsampcnt</code></td>
<td>
<p> DF. Number of conditions by condition status 
(forest land, nonforest land, noncensus water, census water, nonsampled). </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by estimation unit. </p>
</td></tr> 
<tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion factors. </p>
</td></tr> 
<tr><td><code>domdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwtvar </td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata (after totally nonsampled 
plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwt </td><td style="text-align: left;"> proportion of area (or plots) by strata and estimation 
unit (strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition 
proportion by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonresponse plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> average area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimate proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated proportion of land </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est </td><td style="text-align: left;"> estimated area of land nhat*areavar </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance estimate of estimate acres of land 
nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.se </td><td style="text-align: left;"> standard error of estimated area of land sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> est.cv </td><td style="text-align: left;"> coefficient of variation of estimated area of land est.se/est 
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse </td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99left </td><td style="text-align: left;"> left tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of 67 percent confidence interval for 
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>savedata<br /> 
if savedata=TRUE...<br /> 
tables with estimate and percent standard error will be written as *csv 
files to outfolder.  if rawdata=TRUE, the rawdata will be output to the 
outfolder in a folder named rawdata (if raw_fmt=&quot;csv&quot;) or a database in 
the outfolder, if (raw_fmt != &quot;csv&quot;).
</p>
<p>if outfn.pre is not null...<br /> 
a prefix is added to output files if raw_fmt = 'csv', prefix is added to 
file names in rawdata folder if raw_fmt != 'csv', prefix is added to dsn name
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.
</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>STRATA:<br /> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='modWFpop'>West-Fest module - Generate population data for WF module.</h2><span id='topic+modWFpop'></span>

<h3>Description</h3>

<p>Generates population data for generating 'Westfall' Ratio2Size estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modWFpop(
  popType = "VOL",
  popTabs = popTables(),
  popTabIDs = popTableIDs(),
  popFilter = popFilters(),
  pltassgn = NULL,
  pltassgnid = "PLT_CN",
  dsn = NULL,
  pjoinid = "CN",
  areawt = "CONDPROP_UNADJ",
  adj = "samp",
  unitvar = NULL,
  unitarea = NULL,
  areavar = "ACRES",
  strata = TRUE,
  stratalut = NULL,
  strvar = "STRATUMCD",
  savedata = FALSE,
  saveobj = FALSE,
  objnm = "GBpopdat",
  unit_opts = NULL,
  strata_opts = NULL,
  savedata_opts = NULL,
  GBdata = NULL,
  pltdat = NULL,
  stratdat = NULL,
  auxdat = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modWFpop_+3A_poptype">popType</code></td>
<td>
<p>String. Type of evaluation(s) to include in population data.
Note: currently only c('CURR', 'VOL', 'LULC', 'DWM') 
are available. See details below for descriptions of each.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_poptabs">popTabs</code></td>
<td>
<p>List of population tables the user would like returned.
See help(popTables) for a list of options.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_poptabids">popTabIDs</code></td>
<td>
<p>List of unique IDs corresponding to the population tables
that the user has requested. See help(popTableIDs) for a list of
options.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_popfilter">popFilter</code></td>
<td>
<p>List of population filters. See help(popFilters) for a 
list of options.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_pltassgn">pltassgn</code></td>
<td>
<p>DF/DT, Optional. R object, sf R object, comma-delimited
file(.csv), layer or spatial layer in dsn, or shapefile(.shp). Plot-level
assignment of estimation unit and/or strata, with one record for each plot.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_pltassgnid">pltassgnid</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_dsn">dsn</code></td>
<td>
<p>String. Name of database where tree, cond, and plot-level tables
reside.  The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Join variable in plot to match pltassgnid. Does not
need to be uniqueid. If using most current XY coordinates for plot
assignments, use identifier for plot (e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_areawt">areawt</code></td>
<td>
<p>String. Name of variable for summarizing area weights (e.g.,
CONDPROP_UNADJ).</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_adj">adj</code></td>
<td>
<p>String. How to calculate adjustment factors for nonsampled
(nonresponse) conditions based on summed proportions for by plot ('samp',
'plot').  'samp' - adjustments are calculated at strata/estimation unit
level; 'plot' - adjustments are calculated at plot-level. Adjustments are
only calculated for annual inventory plots (DESIGNCD=1).</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of the estimation unit variable in unitarea and
cond or pltassgn data frame with estimation unit assignment for each plot
(e.g., 'ESTN_UNIT'). Optional if only one estimation unit.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_unitarea">unitarea</code></td>
<td>
<p>Numeric or DF. Total area by estimation unit. If only 1
estimation unit, include number of total acreage for the area of interest or
a data frame with area and estimation unit. If more than one estimation
unit, provide a data frame of total area by estimation unit, including
unitvar and areavar.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable in unitarea. Default=&quot;ACRES&quot;.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_strata">strata</code></td>
<td>
<p>Logical. If TRUE, include information for post-stratification.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_stratalut">stratalut</code></td>
<td>
<p>DF/DT. If strata=TRUE, look-up table with pixel counts or
area by strata or proportion or area ('strwt') by strata (and estimation
unit).  If 'strwt' is not included, set getwt=TRUE and getwtvar as the name
of variable to calculate weights from (e.g., pixel counts).</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_strvar">strvar</code></td>
<td>
<p>String. If strata=TRUE, name of the strata variable in
stratalut and cond or pltassgn data frame with stratum assignment for each
plot (Default = 'STRATUMCD').</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, saves returned list object to outfolder.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rds object.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_unit_opts">unit_opts</code></td>
<td>
<p>List. See help(unit_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_strata_opts">strata_opts</code></td>
<td>
<p>List. See help(strata_options()) for a list of options.
Only used when strata = TRUE.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_gbdata">GBdata</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::anGBdata().</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_pltdat">pltdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetPlots().</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_stratdat">stratdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetStrata().</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_auxdat">auxdat</code></td>
<td>
<p>R List object. Output data list components from
FIESTA::spGetAuxiliary().</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modWFpop_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Population types <br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>popType</b>
<b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> ALL </td><td style="text-align: left;"> Population data, including nonsampled plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CURR </td><td style="text-align: left;"> Population data for area estimates, excluding nonsampled 
plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> VOL </td><td style="text-align: left;"> Population data for area/tree estimates, excluding 
nonsampled plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> LULC </td><td style="text-align: left;"> Population data for land use/land cover transitional estimates, 
including only plots with previous measurements and excluding nonsampled 
plots.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;"> Unique identifier for each plot in tree 
table.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot.  
Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ </td><td style="text-align: left;"> Number of trees per acre each sample tree represents 
(e.g., DESIGNCD=1: TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for 
trees on microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each plot in cond 
table.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot. Set 
CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on each 
plot. Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on
plot (i.e. accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD </td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest 
condition on plot (i.e. accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Measure of site 
productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD </td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of subplot conditions 
on each plot. Set SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted 
proportion of microplot conditions on each plot. Set MICRPROP_UNADJ=1, 
if only 1 condition per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree attributes. Unadjusted 
proportion of macroplot conditions on each plot. Set MACRPROP_UNADJ=1, 
if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;"> pltassgnid </td><td style="text-align: left;"> Unique identifier for each plot in 
pltassgn.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  
If not included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with population data for Green-Book estimates.
</p>
<table>
<tr><td><code>condx</code></td>
<td>
<p> Data frame. Condition-level data including plot-level
assignment of estimation unit and stratum (if strata=TRUE), condition
proportion adjustment factor (cadjfac), and adjusted condition proportions
(CONDPROP_ADJ). </p>
</td></tr> 
<tr><td><code>cuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>condid</code></td>
<td>
<p> String. Unique identifier of condition in condx and pltcondx. </p>
</td></tr> 
<tr><td><code>treex</code></td>
<td>
<p> Data frame. Tree data within population, used for estimation, 
including trees per acre adjustment factor (tadjfac), and adjusted trees per 
acre (TPA_ADJ) (if treef is included). </p>
</td></tr>
<tr><td><code>tuniqueid</code></td>
<td>
<p> String. Unique identifier of plot in treex (if treef is
included). </p>
</td></tr> 
<tr><td><code>ACI.filter</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot;. </p>
</td></tr> 
<tr><td><code>unitarea</code></td>
<td>
<p> String. Returned table of area by estimation unit. </p>
</td></tr> 
<tr><td><code>unitvar</code></td>
<td>
<p> String. Variable name for estimation unit. </p>
</td></tr> 
<tr><td><code>strlut</code></td>
<td>
<p> String. Strata-level table with pixel counts by strata 
(P1POINTCNT), strata weights (strwt), number of plots by strata (n.strata), 
total number of plots in estimation unit (n.total), sum of condition proportions 
(_UNADJ_SUM), area adjustments (*_ADJFAC), total area, and area expansion 
by strata (EXPNS). </p>
</td></tr> 
<tr><td><code>strvar</code></td>
<td>
<p> String. Variable name for strata. If strata=FALSE, 
strvar=&quot;ONESTRAT&quot;. </p>
</td></tr>
<tr><td><code>expcondtab</code></td>
<td>
<p> String. If ACI=FALSE, ACI.filter=&quot;COND_STATUS_CD == 1&quot;.</p>
</td></tr> 
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Data frame. Number of plots by PLOT_STATUS_CD. </p>
</td></tr>
<tr><td><code>condsampcnt</code></td>
<td>
<p> Data frame. Number of conditions by COND_STATUS_CD. </p>
</td></tr>
<tr><td><code>states</code></td>
<td>
<p> String. State names in dataset. </p>
</td></tr> 
<tr><td><code>invyrs</code></td>
<td>
<p> String. Range of inventory years in dataset. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> unitvar </td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar </td><td style="text-align: left;"> number of pixels by 
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.strata </td><td style="text-align: left;"> number of plots in strata (after totally nonsampled 
plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> strwt </td><td style="text-align: left;"> proportion of area (or plots) by strata and estimation 
unit (i.e., strata weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed conditionproportion by strata and 
estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition proportion by strata after 
nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> AREA_USED </td><td style="text-align: left;"> total area of estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> expfac </td><td style="text-align: left;"> strata-level expansion factor after nonsampled plots and 
conditions removed (AREA_USED/n.strata) </td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> EXPNS </td><td style="text-align: left;"> strata-level area expansions (expfac * strwt)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>unitcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one strata class
within an estimation unit, all strata classes with 2 or less plots are
combined. The current method for combining is to group the strata with less
than 2 plots with the strata class following in consecutive order (numeric
or alphabetical), restrained by estimation unit (if unitcombine=FALSE), and
continuing until the number of plots equals 10. If there are no strata
classes following in order, it is combined with the estimation unit previous
in order.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='modWFtree'>West-Fest module - Generate population data for WF module.</h2><span id='topic+modWFtree'></span>

<h3>Description</h3>

<p>Generates population data for generating 'Westfall' Ratio2Size estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modWFtree(
  WFpopdat,
  estvar,
  estvar.filter = NULL,
  estseed = "none",
  woodland = "Y",
  landarea = "FOREST",
  pcfilter = NULL,
  rowvar = NULL,
  colvar = NULL,
  sumunits = TRUE,
  returntitle = FALSE,
  savedata = FALSE,
  table_opts = NULL,
  title_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modWFtree_+3A_wfpopdat">WFpopdat</code></td>
<td>
<p>List. Population data objects returned from
FIESTA::modWFpop().</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_estvar">estvar</code></td>
<td>
<p>String. Name of the tree-level estimate variable (e.g.,
'VOLCFNET').</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_estvar.filter">estvar.filter</code></td>
<td>
<p>String. A tree-level filter for estvar. Must be R
syntax (e.g., 'STATUSCD == 1').</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_estseed">estseed</code></td>
<td>
<p>String. Use seedling data only or add to tree data. Seedling
estimates are only for counts (estvar='TPA_UNADJ')-('none', 'only', 'add').</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_woodland">woodland</code></td>
<td>
<p>String. If woodland = 'Y', include woodland tree species
where measured. If woodland = 'N', only include timber species. See 
FIESTA::ref_species$WOODLAND ='Y/N'. If woodland = 'only', only include
woodland species.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_landarea">landarea</code></td>
<td>
<p>String. The condition-level filter for defining land area
('ALL', 'FOREST', 'TIMBERLAND'). If landarea='FOREST', COND_STATUS_CD = 1;
if landarea='TIMBERLAND', SITECLCD in(1:6) &amp; RESERVCD = 0.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_pcfilter">pcfilter</code></td>
<td>
<p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_rowvar">rowvar</code></td>
<td>
<p>String. Optional. Name of domain variable to group estvar by
for rows in table output. Rowvar must be included in an input data frame
(i.e., plt, cond, tree). If no rowvar is included, an estimate is returned
for the total estimation unit. Include colvar for grouping by 2 variables.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_colvar">colvar</code></td>
<td>
<p>String. Optional. If rowvar != NULL, name of domain variable
to group estvar by for columns in table output. Colvar must be included in
an input data frame (i.e., plt, cond, tree).</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_sumunits">sumunits</code></td>
<td>
<p>Logical. If TRUE, estimation units are summed and returned
in one table.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_returntitle">returntitle</code></td>
<td>
<p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves table(s) to outfolder.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_table_opts">table_opts</code></td>
<td>
<p>List. See help(table_options()) for a list of
options.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_title_opts">title_opts</code></td>
<td>
<p>List. See help(title_options()) for a list of options.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="modWFtree_+3A_...">...</code></td>
<td>
<p>Parameters for modWFpop() if WFpopdat is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If variables are NULL, then it will prompt user to input variables.
</p>
<p>Necessary variables:<br /> </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Data</b> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> tree </td><td style="text-align: left;"> tuniqueid </td><td style="text-align: left;">
Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique identifier of each condition on plot, to link to
cond.  Set CONDID=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> TPA_UNADJ
</td><td style="text-align: left;"> Number of trees per acre each sample tree represents (ex. DESIGNCD=1:
TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for trees on
microplot).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> cond </td><td style="text-align: left;"> cuniqueid </td><td style="text-align: left;"> Unique identifier for each
plot, to link to pltassgn (ex. PLT_CN).</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDID </td><td style="text-align: left;"> Unique
identifier of each condition on plot.  Set CONDID=1, if only 1 condition per
plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ </td><td style="text-align: left;"> Unadjusted proportion of condition on
each plot.  Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
COND_STATUS_CD </td><td style="text-align: left;"> Status of each forested condition on plot (i.e.
accessible forest, nonforest, water, etc.)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> NF_COND_STATUS_CD
</td><td style="text-align: left;"> If ACI=TRUE. Status of each nonforest condition on plot (i.e.
accessible nonforest, nonsampled nonforest)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SITECLCD </td><td style="text-align: left;"> If
landarea=TIMBERLAND. Measure of site productivity.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> RESERVCD
</td><td style="text-align: left;"> If landarea=TIMBERLAND. Reserved status.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> SUBPROP_UNADJ
</td><td style="text-align: left;"> Unadjusted proportion of subplot conditions on each plot.  Set
SUBPROP_UNADJ=1, if only 1 condition per subplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
MICRPROP_UNADJ </td><td style="text-align: left;"> If microplot tree attributes. Unadjusted proportion of
microplot conditions on each plot. Set MICRPROP_UNADJ=1, if only 1 condition
per microplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> MACRPROP_UNADJ </td><td style="text-align: left;"> If macroplot tree
attributes. Unadjusted proportion of macroplot conditions on each plot. Set
MACRPROP_UNADJ=1, if only 1 condition per macroplot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pltassgn </td><td style="text-align: left;">
puniqueid </td><td style="text-align: left;"> Unique identifier for each plot, to link to cond (ex. CN).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> Identifies state each plot is located in.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
</td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Identifies inventory year of each plot.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_STATUS_CD </td><td style="text-align: left;"> Status of each plot (i.e. sampled, nonsampled).  If not
included, all plots are assumed as sampled.</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br />
</p>


<h3>Value</h3>

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.
</p>
<table>
<tr><td><code>est</code></td>
<td>
<p> Data frame. Tree estimates by rowvar, colvar (and estimation
unit). If sumunits=TRUE or one estimation unit and colvar=NULL, estimates
and percent sampling error are in one data frame. </p>
</td></tr> <tr><td><code>pse</code></td>
<td>
<p> Data frame.
Percent sampling errors (Confidence level 68
colvar (and estimation unit). Note: for 95
percent sampling error by 1.96. </p>
</td></tr> <tr><td><code>titlelst</code></td>
<td>
<p> List with 1 or 2 string
vectors. If returntitle=TRUE a list with table title(s). The list contains
one title if est and pse are in the same table and two titles if est and pse
are in separate tables. </p>
</td></tr> <tr><td><code>raw</code></td>
<td>
<p> List of data frames. If rawdata=TRUE,
a list including the processing data used for estimation including: number
of plots and conditions; stratification information; and 1 to 8 tables with
calculated values for table cells and totals (See processing data below). </p>
</td></tr>
</table>
<p>Raw data
</p>
<table>
<tr><td><code>plotsampcnt</code></td>
<td>
<p> Table. Number of plots by plot status (ex. sampled
forest on plot, sampled nonforest, nonsampled). </p>
</td></tr> <tr><td><code>condsampcnt</code></td>
<td>
<p> DF.
Number of conditions by condition status (forest land, nonforest land,
noncensus water, census water, nonsampled). </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> DF. Area by
estimation unit. </p>
</td></tr> <tr><td><code>expcondtab</code></td>
<td>
<p> DF. Condition-level area expansion
factors. </p>
</td></tr> <tr><td><code>tdomdat</code></td>
<td>
<p> DF. Final data table used for estimation. </p>
</td></tr>
<tr><td><code>stratdat</code></td>
<td>
<p> Data frame. Strata information by estimation unit. </p>
</td></tr>
</table>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> unitvar
</td><td style="text-align: left;"> estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strvar </td><td style="text-align: left;"> stratum value </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwtvar
</td><td style="text-align: left;"> number of pixels by strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> n.strata </td><td style="text-align: left;">
number of plots in strata (after totally nonsampled plots removed) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
n.total </td><td style="text-align: left;"> number of plots for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> strwt </td><td style="text-align: left;">
proportion of area (or plots) by strata and estimation unit (i.e., strata
weight) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_UNADJ_SUM </td><td style="text-align: left;"> summed condition proportion by
strata and estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CONDPROP_ADJFAC </td><td style="text-align: left;"> adjusted condition
proportion by strata after nonsampled plots removed </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<table>
<tr><td><code>processing data</code></td>
<td>
<p> Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), and if colvar is
not NULL, colvar totals, (unit.colvar); and a combination of rowvar and
colvar (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively). These tables do not included estimate proportions (nhat and
nhat.var).
</p>
<p>The data frames include the following information: </p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
<b>Variable</b> </td><td style="text-align: left;"> <b>Description</b></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat </td><td style="text-align: left;"> estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> nhat.var </td><td style="text-align: left;"> variance estimate of estimated
proportion of trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRPLT.gt0 </td><td style="text-align: left;"> Number of non-zero plots used
in estimates </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> ACRES </td><td style="text-align: left;"> total area for estimation unit </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est
</td><td style="text-align: left;"> estimated area of trees nhat*ACRES </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.var </td><td style="text-align: left;"> variance
estimate of estimated area of trees nhat.var*areavar^2 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.se </td><td style="text-align: left;">
standard error of estimated area of trees sqrt(est.var) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> est.cv </td><td style="text-align: left;">
coefficient of variation of estimated area of trees est.se/est </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> pse
</td><td style="text-align: left;"> percent sampling error of estimate est.cv*100 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI99left </td><td style="text-align: left;">
left tail of 99 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
CI99right </td><td style="text-align: left;"> right tail of 99 percent confidence interval for estimated
area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95left </td><td style="text-align: left;"> left tail of 95 percent confidence interval for
estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI95right </td><td style="text-align: left;"> right tail of 95 percent confidence
interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67left </td><td style="text-align: left;"> left tail of 67 percent
confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CI67right </td><td style="text-align: left;"> right tail of
67 percent confidence interval for estimated area </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
 </td></tr>
</table>
<p>Table(s) are also written to outfolder.
</p>


<h3>Note</h3>

<p>ADJUSTMENT FACTOR:<br /> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).
</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>PLOT SIZE</b> </td><td style="text-align: right;"> <b>TPA_UNADJ</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPLOT
</td><td style="text-align: right;"> 6.018046 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MICROPLOT </td><td style="text-align: right;"> 74.965282 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MACROPLOT </td><td style="text-align: right;">
0.999188 </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br /> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.
</p>
<p>sumunits:<br /> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.
</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.
</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.
</p>
<p>stratcombine:<br /> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.
</p>
<p>rowlut/collut:<br /> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.
</p>
<p>Include 2 columns in the table:<br /> 1-the merging variable with same name as
the variable in the input merge table;<br /> 2-the ordering or descriptive
variable.<br /> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.
</p>
<p>UNITS:<br /> The following variables are converted from pounds (from FIA
database) to short tons by multiplying the variable by 0.0005.  DRYBIO_AG,
DRYBIO_BG, DRYBIO_WDLD_SPP, DRYBIO_SAPLING, DRYBIO_STUMP, DRYBIO_TOP,
DRYBIO_BOLE, DRYBIOT, DRYBIOM, DRYBIOTB, JBIOTOT, CARBON_BG, CARBON_AG
</p>
<p>MORTALITY:<br /> For Interior-West FIA, mortality estimates are mainly based on
whether a tree has died within the last 5 years of when the plot was
measured. If a plot was remeasured, mortality includes trees that were alive
the previous visit but were dead in the next visit. If a tree was standing
the previous visit, but was not standing in the next visit, no diameter was
collected (DIA = NA) but the tree is defined as mortality.
</p>
<p>Common tree filters: <br />
</p>

<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>FILTER</b> </td><td style="text-align: right;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD
== 1" </td><td style="text-align: right;"> Live trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2" </td><td style="text-align: right;"> Dead trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
"TPAMORT_UNADJ &gt; 0" </td><td style="text-align: right;"> Mortality trees </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp; DIA &gt;=
5.0" </td><td style="text-align: right;"> Dead trees &gt;= 5.0 inches diameter </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> "STATUSCD == 2 &amp;
AGENTCD == 30" </td><td style="text-align: right;"> Dead trees from fire </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman
</p>


<h3>References</h3>

<p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.
</p>

<hr>
<h2 id='popFilters'>Population data filters.</h2><span id='topic+popFilters'></span>

<h3>Description</h3>

<p>Returns a list of user-supplied parameters and parameter values for population
data filters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>popFilters(
  evalid = NULL,
  states = NULL,
  evalCur = FALSE,
  evalEndyr = NULL,
  measCur = FALSE,
  measEndyr = NULL,
  invyrs = NULL,
  measyrs = NULL,
  intensity = NULL,
  ACI = FALSE,
  AOIonly = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="popFilters_+3A_evalid">evalid</code></td>
<td>
<p>Numeric. FIA Evaluation identifier for subsetting plots for
population.</p>
</td></tr>
<tr><td><code id="popFilters_+3A_states">states</code></td>
<td>
<p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p>
</td></tr>
<tr><td><code id="popFilters_+3A_evalcur">evalCur</code></td>
<td>
<p>Logical. If TRUE, the most current FIA Evaluation is extracted
for state(s).</p>
</td></tr>
<tr><td><code id="popFilters_+3A_evalendyr">evalEndyr</code></td>
<td>
<p>Number. The end year of the FIA Evaluation of interest.
Selects only sampled plots and conditions for the evaluation period. If
more than one state, create a named list object with evalEndyr labeled for
each state (e.g., list(Utah=2014, Colorado=2013).</p>
</td></tr>
<tr><td><code id="popFilters_+3A_meascur">measCur</code></td>
<td>
<p>Logical. If TRUE, the most current sampled plots available
for state(s).</p>
</td></tr>
<tr><td><code id="popFilters_+3A_measendyr">measEndyr</code></td>
<td>
<p>Number. The most current sampled plots measured before or
during end given..</p>
</td></tr>
<tr><td><code id="popFilters_+3A_invyrs">invyrs</code></td>
<td>
<p>Integer vector. Inventory year(s) (e.g., c(2000, 2001, 2002)).</p>
</td></tr>
<tr><td><code id="popFilters_+3A_measyrs">measyrs</code></td>
<td>
<p>Integer vector. Measurement year(s) (e.g., c(2000, 2001, 2002)).</p>
</td></tr>
<tr><td><code id="popFilters_+3A_intensity">intensity</code></td>
<td>
<p>Integer code. Code(s) indicating intensity to use for
population.</p>
</td></tr>
<tr><td><code id="popFilters_+3A_aci">ACI</code></td>
<td>
<p>Logical. If TRUE, including All Condition Inventory (ACI) plots.</p>
</td></tr>
<tr><td><code id="popFilters_+3A_aoionly">AOIonly</code></td>
<td>
<p>Logical. If TRUE, and there is an AOI (1/0) attribute in the
population data, only AOI=1 are used for estimation.</p>
</td></tr>
<tr><td><code id="popFilters_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, an empty list is returned.
</p>


<h3>Value</h3>

<p>A list of user-supplied parameters and parameter values for population
data filters.
</p>


<h3>Author(s)</h3>

<p>Grayson W. White
</p>


<h3>Examples</h3>

<pre><code class='language-R'>popFilters(ACI = TRUE)
</code></pre>

<hr>
<h2 id='popTableIDs'>List of population table unique IDs.</h2><span id='topic+popTableIDs'></span>

<h3>Description</h3>

<p>Returns a list of user-supplied parameters and parameter values for data 
table unique IDs to be supplied to *pop functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>popTableIDs(
  cond = "PLT_CN",
  plt = "CN",
  tree = "PLT_CN",
  seed = "PLT_CN",
  seedling = "PLT_CN",
  vsubpspp = "PLT_CN",
  p2veg_subplot_spp = "PLT_CN",
  vsubpstr = "PLT_CN",
  p2veg_subp_structure = "PLT_CN",
  invsubp = "PLT_CN",
  invasive_subplot_spp = "PLT_CN",
  subplot = "PLT_CN",
  subp_cond = "PLT_CN",
  dwm = "PLT_CN",
  cond_dwm_calc = "PLT_CN",
  sccm = "PLT_CN",
  subp_cond_chng_mtrx = "PLT_CN",
  grm = "PLT_CN",
  tree_grm_component = "PLT_CN",
  begin = "PLT_CN",
  tree_grm_begin = "PLT_CN",
  midpt = "PLT_CN",
  tree_grm_midpt = "PLT_CN",
  pltu = "PLT_CN",
  condu = "PLT_CN",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="popTableIDs_+3A_cond">cond</code></td>
<td>
<p>String. Unique identifier of plot in cond.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_plt">plt</code></td>
<td>
<p>String. Unique identifier of plot in plt.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_tree">tree</code></td>
<td>
<p>String. Unique identifier of plot in tree and seed.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_seed">seed</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_seedling">seedling</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_vsubpspp">vsubpspp</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_p2veg_subplot_spp">p2veg_subplot_spp</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_vsubpstr">vsubpstr</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_p2veg_subp_structure">p2veg_subp_structure</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_invsubp">invsubp</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_invasive_subplot_spp">invasive_subplot_spp</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_subplot">subplot</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_subp_cond">subp_cond</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_dwm">dwm</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_cond_dwm_calc">cond_dwm_calc</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_sccm">sccm</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_subp_cond_chng_mtrx">subp_cond_chng_mtrx</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_grm">grm</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_tree_grm_component">tree_grm_component</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_begin">begin</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_tree_grm_begin">tree_grm_begin</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_midpt">midpt</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_tree_grm_midpt">tree_grm_midpt</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_pltu">pltu</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_condu">condu</code></td>
<td>
<p>String.</p>
</td></tr>
<tr><td><code id="popTableIDs_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, an empty list is returned.
</p>


<h3>Value</h3>

<p>A list of user-supplied parameters and parameter values for strata.
</p>


<h3>Author(s)</h3>

<p>Grayson W. White
</p>


<h3>Examples</h3>

<pre><code class='language-R'>popTableIDs(cond = "my_unique_id", tree = "my_tree_id")
</code></pre>

<hr>
<h2 id='popTables'>List of population tables.</h2><span id='topic+popTables'></span>

<h3>Description</h3>

<p>Returns a list of user-supplied parameters and parameter values for data 
tables to be supplied to *pop functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>popTables(
  cond = "COND",
  plt = "PLOT",
  tree = "TREE",
  seed = "SEEDLING",
  seedling = "SEEDLING",
  vsubpspp = "P2VEG_SUBPLOT_SPP",
  p2veg_subplot_spp = "P2VEG_SUBPLOT_SPP",
  vsubpstr = "P2VEG_SUBP_STRUCTURE",
  p2veg_subp_structure = "P2VEG_SUBP_STRUCTURE",
  invsubp = "INVASIVE_SUBPLOT_SPP",
  invasive_subplot_spp = "INVASIVE_SUBPLOT_SPP",
  subplot = "SUBPLOT",
  subp_cond = "SUBP_COND",
  dwm = "COND_DWM_CALC",
  cond_dwm_calc = "COND_DWM_CALC",
  sccm = "SUBP_COND_CHNG_MTRX",
  subp_cond_chng_mtrx = "SUBP_COND_CHNG_MTRX",
  grm = "TREE_GRM_COMPONENT",
  tree_grm_component = "TREE_GRM_COMPONENT",
  begin = "TREE_GRM_BEGIN",
  tree_grm_begin = "TREE_GRM_BEGIN",
  midpt = "TREE_GRM_MIDPT",
  tree_grm_midpt = "TREE_GRM_MIDPT",
  pltu = "pltu",
  condu = "condu",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="popTables_+3A_cond">cond</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Condition-level data with one record for each condition, including or
excluding nonsampled conditions. Plot variables and strata/estimation unit
variable(s) may be included if plt and pltassgn=NULL. See details for
necessary variables to include.</p>
</td></tr>
<tr><td><code id="popTables_+3A_plt">plt</code></td>
<td>
<p>DF/DT, Optional. R object, sf R object, comma-delimited
file(*.csv), layer or spatial layer in dsn, or shapefile(*.shp).  Plot-level
data with one record for each plot, including or excluding nonsampled
conditions. If nonsampled plots are included, PLOT_STATUS_CD variable must
be in table or a filter defined in plt.nonsamp.filter.</p>
</td></tr>
<tr><td><code id="popTables_+3A_tree">tree</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level data with one record for each tree. Tree data are aggregated to
condition-level. See details for necessary variables to include.</p>
</td></tr>
<tr><td><code id="popTables_+3A_seed">seed</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Seedling data with one record for each seedling count.</p>
</td></tr>
<tr><td><code id="popTables_+3A_seedling">seedling</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Seedling data with one record for each seedling count.</p>
</td></tr>
<tr><td><code id="popTables_+3A_vsubpspp">vsubpspp</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in
dsn.  Vegetation species-level data with one record for each species
(P2VEG_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="popTables_+3A_p2veg_subplot_spp">p2veg_subplot_spp</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or 
layer in dsn. Vegetation species-level data with one record for each species
(P2VEG_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="popTables_+3A_vsubpstr">vsubpstr</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in
dsn. Vegetation species-structure data with one record for each species
(P2VEG_SUBP_STRUCTURE).</p>
</td></tr>
<tr><td><code id="popTables_+3A_p2veg_subp_structure">p2veg_subp_structure</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), 
or layer in dsn. Vegetation species-structure data with one record for each 
species (P2VEG_SUBP_STRUCTURE).</p>
</td></tr>
<tr><td><code id="popTables_+3A_invsubp">invsubp</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in
dsn. Invasive species data with one record for each species
(INVASIVE_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="popTables_+3A_invasive_subplot_spp">invasive_subplot_spp</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), 
or layer in dsn. Invasive species data with one record for each species
(INVASIVE_SUBPLOT_SPP).</p>
</td></tr>
<tr><td><code id="popTables_+3A_subplot">subplot</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in
dsn. Subplot-level data with one record for each species (SUBPLOT).</p>
</td></tr>
<tr><td><code id="popTables_+3A_subp_cond">subp_cond</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in
dsn. Subplot condition-level data with one record for each species
(SUBP_COND).</p>
</td></tr>
<tr><td><code id="popTables_+3A_dwm">dwm</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer 
in dsn. Calculated down woody material (COND_DWM_CALC).</p>
</td></tr>
<tr><td><code id="popTables_+3A_cond_dwm_calc">cond_dwm_calc</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer 
in dsn. Calculated down woody material (COND_DWM_CALC).</p>
</td></tr>
<tr><td><code id="popTables_+3A_sccm">sccm</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Subplot-level data (SUBP_COND_CHNG_MTRX).</p>
</td></tr>
<tr><td><code id="popTables_+3A_subp_cond_chng_mtrx">subp_cond_chng_mtrx</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), 
or layer in dsn. Subplot-level data (SUBP_COND_CHNG_MTRX).</p>
</td></tr>
<tr><td><code id="popTables_+3A_grm">grm</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level growth, removal, and mortality data (TREE_GRM_COMPONENT).</p>
</td></tr>
<tr><td><code id="popTables_+3A_tree_grm_component">tree_grm_component</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), 
or layer in dsn. Tree-level growth, removal, and mortality data (TREE_GRM_COMPONENT).</p>
</td></tr>
<tr><td><code id="popTables_+3A_begin">begin</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level growth, removal, and mortality data (TREE_GRM_BEGIN).</p>
</td></tr>
<tr><td><code id="popTables_+3A_tree_grm_begin">tree_grm_begin</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level growth, removal, and mortality data (TREE_GRM_BEGIN).</p>
</td></tr>
<tr><td><code id="popTables_+3A_midpt">midpt</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level growth, removal, and mortality data (TREE_GRM_MIDPT).</p>
</td></tr>
<tr><td><code id="popTables_+3A_tree_grm_midpt">tree_grm_midpt</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Tree-level growth, removal, and mortality data (TREE_GRM_MIDPT).</p>
</td></tr>
<tr><td><code id="popTables_+3A_pltu">pltu</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Plot data unioned with remeasured plot data.</p>
</td></tr>
<tr><td><code id="popTables_+3A_condu">condu</code></td>
<td>
<p>DF/DT, R object, comma-delimited file(*.csv), or layer in dsn.
Cond data unioned with remeasured cond data.</p>
</td></tr>
<tr><td><code id="popTables_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters, an empty list is returned.
</p>


<h3>Value</h3>

<p>A list of user-supplied parameters and parameter values for strata.
</p>


<h3>Author(s)</h3>

<p>Grayson W. White
</p>


<h3>Examples</h3>

<pre><code class='language-R'>popTables(cond = FIESTA::WYcond, seed = FIESTA::WYseed)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+savedata_options'></span><span id='topic+unit_options'></span><span id='topic+table_options'></span><span id='topic+title_options'></span><span id='topic+strata_options'></span><span id='topic+multest_options'></span><span id='topic+spMakeSpatial_options'></span><span id='topic+datExportData'></span><span id='topic+DBcreateSQLite'></span><span id='topic+DBtestPostgreSQL'></span><span id='topic+DBtestSQLite'></span><span id='topic+eval_options'></span><span id='topic+xy_options'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>FIESTAutils</dt><dd><p><code><a href="FIESTAutils.html#topic+datExportData">datExportData</a></code>, <code><a href="FIESTAutils.html#topic+internal_desc">DBcreateSQLite</a></code>, <code><a href="FIESTAutils.html#topic+DBtestPostgreSQL">DBtestPostgreSQL</a></code>, <code><a href="FIESTAutils.html#topic+DBtestSQLite">DBtestSQLite</a></code>, <code><a href="FIESTAutils.html#topic+eval_options">eval_options</a></code>, <code><a href="FIESTAutils.html#topic+multest_options">multest_options</a></code>, <code><a href="FIESTAutils.html#topic+savedata_options">savedata_options</a></code>, <code><a href="FIESTAutils.html#topic+spMakeSpatial_options">spMakeSpatial_options</a></code>, <code><a href="FIESTAutils.html#topic+strata_options">strata_options</a></code>, <code><a href="FIESTAutils.html#topic+table_options">table_options</a></code>, <code><a href="FIESTAutils.html#topic+title_options">title_options</a></code>, <code><a href="FIESTAutils.html#topic+unit_options">unit_options</a></code>, <code><a href="FIESTAutils.html#topic+xy_options">xy_options</a></code></p>
</dd>
</dl>

<hr>
<h2 id='ref_codes'>Reference tables - Code definitions.</h2><span id='topic+ref_codes'></span>

<h3>Description</h3>

<p>Reference tables - Code definitions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_codes
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 735 rows and 7 columns.
</p>


<h3>Source</h3>

<p>FIA look-up tables.
</p>


<h3>References</h3>

<p>O'Connell, B.M.; LaPoint, E.B.; Turner, J.A.; Ridley, T.; Boyer,
D.; Wilson, A.M.; Waddell, K.L.; Christensen, G.; Conkling, B.L. 2012. The
Forest Inventory and Analysis Database: Database Description and Users
Manual Version 5.1.2 for Phase 2. U.S. Department of Agriculture.
(http://fia.fs.fed.us/library/database-documentation/current/ver5-2012/FIADB_user
manual_5-1-2_p2_07_2012.pdf)
</p>

<hr>
<h2 id='ref_cond'>Reference table - Metadata for cond default variables output from
DBgetPlots()</h2><span id='topic+ref_cond'></span>

<h3>Description</h3>

<p>Reference table - Metadata for cond default variables output from
DBgetPlots()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_cond
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 97 rows and 3 columns.
</p>


<h3>Source</h3>

<p>FIA look-up table
</p>

<hr>
<h2 id='ref_conversion'>Reference table - for conversion factors.</h2><span id='topic+ref_conversion'></span>

<h3>Description</h3>

<p>Reference table - for conversion factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_conversion
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 7 rows and 6 columns.
</p>


<h3>Source</h3>

<p>Conversion table.
</p>

<hr>
<h2 id='ref_diacl2in'>Reference table - diameter 2-inch class codes (DIA).</h2><span id='topic+ref_diacl2in'></span>

<h3>Description</h3>

<p>Reference table - diameter 2-inch class codes (DIA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_diacl2in
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 40 rows and 3 columns.
</p>


<h3>Source</h3>

<p>Imported from comma-delimited file.
</p>


<h3>References</h3>

<p>O'Connell, B.M.; LaPoint, E.B.; Turner, J.A.; Ridley, T.; Boyer,
D.; Wilson, A.M.; Waddell, K.L.; Christensen, G.; Conkling, B.L. 2012. The
Forest Inventory and Analysis Database: Database Description and Users
Manual Version 5.1.2 for Phase 2. U.S. Department of Agriculture.
(http://fia.fs.fed.us/library/database-documentation/current/ver5-2012/FIADB_user
manual_5-1-2_p2_07_2012.pdf)
</p>

<hr>
<h2 id='ref_domain'>Reference table - for generating tables.</h2><span id='topic+ref_domain'></span>

<h3>Description</h3>

<p>Reference table - for generating tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_domain
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 32 rows and 3 columns.
</p>


<h3>Source</h3>

<p>FIA look-up table.
</p>

<hr>
<h2 id='ref_estvar'>Reference table - for generating estimates</h2><span id='topic+ref_estvar'></span>

<h3>Description</h3>

<p>Reference table - for generating estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_estvar
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 178 rows and 11 columns.
</p>

<hr>
<h2 id='ref_plt'>Reference table - Metadata for plt default variables output from
DBgetPlots()</h2><span id='topic+ref_plt'></span>

<h3>Description</h3>

<p>Reference table - Metadata for plt default variables output from
DBgetPlots()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_plt
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 59 rows and 3 columns.
</p>


<h3>Source</h3>

<p>FIA look-up table
</p>

<hr>
<h2 id='ref_popType'>Reference table - popType codes.</h2><span id='topic+ref_popType'></span>

<h3>Description</h3>

<p>Reference table - popType codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_popType
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 15 rows and 2 columns.
</p>


<h3>Source</h3>

<p>Comma-delimited file.
</p>

<hr>
<h2 id='ref_shp'>Reference table - Metadata for shp_* default variables output from
DBgetPlots()</h2><span id='topic+ref_shp'></span>

<h3>Description</h3>

<p>Reference table - Metadata for shp_* default variables output from
DBgetPlots()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_shp
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 63 rows and 4 columns.
</p>


<h3>Source</h3>

<p>FIA look-up table
</p>

<hr>
<h2 id='ref_species'>Reference table - Code definitions.</h2><span id='topic+ref_species'></span>

<h3>Description</h3>

<p>Reference table - Code definitions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_species
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 2677 rows and 20 columns.
</p>


<h3>Source</h3>

<p>Imported from comma-delimited file.
</p>

<hr>
<h2 id='ref_statecd'>Reference table - state codes (STATECD).</h2><span id='topic+ref_statecd'></span>

<h3>Description</h3>

<p>Reference table - state codes (STATECD).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_statecd
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 59 rows and 7 columns.
</p>


<h3>Source</h3>

<p>Imported from comma-delimited file.
</p>


<h3>References</h3>

<p>O'Connell, B.M.; LaPoint, E.B.; Turner, J.A.; Ridley, T.; Boyer,
D.; Wilson, A.M.; Waddell, K.L.; Christensen, G.; Conkling, B.L. 2012. The
Forest Inventory and Analysis Database: Database Description and Users
Manual Version 5.1.2 for Phase 2. U.S. Department of Agriculture.
(http://fia.fs.fed.us/library/database-documentation/current/ver5-2012/FIADB_user
manual_5-1-2_p2_07_2012.pdf)
</p>

<hr>
<h2 id='ref_titles'>Reference table - Variable titles.</h2><span id='topic+ref_titles'></span>

<h3>Description</h3>

<p>Reference table - Variable titles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_titles
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 69 rows and 2 columns.
</p>


<h3>Source</h3>

<p>Comma-delimited file.
</p>

<hr>
<h2 id='ref_tree'>Reference table - Metadata for tree default variables output from
DBgetPlots()</h2><span id='topic+ref_tree'></span>

<h3>Description</h3>

<p>Reference table - Metadata for tree default variables output from
DBgetPlots()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_tree
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 117 rows and 3 columns.
</p>


<h3>Source</h3>

<p>FIA look-up table
</p>

<hr>
<h2 id='ref_units'>Reference table - for variable units.</h2><span id='topic+ref_units'></span>

<h3>Description</h3>

<p>Reference table - for variable units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref_units
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 47 rows and 5 columns.
</p>


<h3>Source</h3>

<p>Units table.
</p>

<hr>
<h2 id='spClassifyRast'>Data - Reclass raster.</h2><span id='topic+spClassifyRast'></span>

<h3>Description</h3>

<p>Wrapper to reclass a raster using a vector of cut breaks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spClassifyRast(
  rastfn,
  cutbreaks,
  bnd = NULL,
  bnd_dsn = NULL,
  bnd.filter = NULL,
  buffdist = NULL,
  nodataclass = NULL,
  gethist = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spClassifyRast_+3A_rastfn">rastfn</code></td>
<td>
<p>String. Path name of raster to classify.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_cutbreaks">cutbreaks</code></td>
<td>
<p>Integer vector. Breaks to use for classifying (e.g.,
c(0,50,75) uses function in calc: 'ifelse (A &gt;= 0 &amp; A &lt; 50, 1, 
ifelse (A &gt;= 50 &amp; A &lt; 75, 2, ifelse (A &gt;= 75, 3, 255)))'</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_bnd">bnd</code></td>
<td>
<p>sf R object or String. Boundary to clip raster (optional).
Can be a spatial sf object, full pathname to a shapefile, or name of
a layer within a database.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_bnd_dsn">bnd_dsn</code></td>
<td>
<p>String. Name of data source name with bnd_layer, if in a
database.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_bnd.filter">bnd.filter</code></td>
<td>
<p>String. Optional filter of bnd_layer.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_buffdist">buffdist</code></td>
<td>
<p>Number. The distance to buffer the polygon before clipping
raster, in units of raster.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_nodataclass">nodataclass</code></td>
<td>
<p>Integer. Class number to assign NODATA values to.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_gethist">gethist</code></td>
<td>
<p>Logical. If TRUE, returns a histogram of pixel values by class.</p>
</td></tr>
<tr><td><code id="spClassifyRast_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>

<hr>
<h2 id='spClipPoint'>Spatial - Clip (intersect) point vector layer with polygon vector layer.</h2><span id='topic+spClipPoint'></span>

<h3>Description</h3>

<p>Wrapper for sf::st_intersection, to clip (intersect) point vector layer with
a polygon vector layer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spClipPoint(
  xyplt,
  xyplt_dsn = NULL,
  uniqueid = "PLT_CN",
  clippolyv,
  clippolyv_dsn = NULL,
  clippolyv.filter = NULL,
  buffdist = NULL,
  validate = FALSE,
  showext = FALSE,
  keepNA = FALSE,
  returnsp = TRUE,
  othertabnms = NULL,
  stopifnotin = TRUE,
  savedata = FALSE,
  exportsp = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spClipPoint_+3A_xyplt">xyplt</code></td>
<td>
<p>sf R object or String. Point data to clip. Can be a spatial
points object, full pathname to a shapefile, or name of a layer within a
database.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of layer to clip. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String.* Unique identifier of xyplt rows.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_clippolyv">clippolyv</code></td>
<td>
<p>sf R object or String. Name of clipping polygon spatial
polygon object, full path to shapefile, or name of a layer within a
database.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_clippolyv_dsn">clippolyv_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or
shapefile pathname) of clipping polygon. The dsn varies by driver. See gdal
OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_clippolyv.filter">clippolyv.filter</code></td>
<td>
<p>String. Filter to subset clippolyv spatial layer.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_buffdist">buffdist</code></td>
<td>
<p>Number. The distance to buffer the polygon before clipping.
Uses sf::st_buffer. The distance is based on units of polygon, st_crs(x)$units.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, keep NA values after data intersection.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_returnsp">returnsp</code></td>
<td>
<p>Logical. If TRUE, returns sf object of points. If FALSE,
returns data frame of points (i.e., drops sf geometry).</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_othertabnms">othertabnms</code></td>
<td>
<p>String vector. Name(s) of R objects, comma-delimited
files, or database layers to subset. Must include quotes (e.g.,
othertabnms=c(&quot;tree&quot;, &quot;cond&quot;)).</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_stopifnotin">stopifnotin</code></td>
<td>
<p>Logical. If TRUE, stops if boundaries do not overlap.  If
FALSE, returns NULL.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, save data to outfolder.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the clipped spatial point data are
exported.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spClipPoint_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options for saving data. If out_layer = NULL, default = 'pntclip'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sf::st_intersection function is used to clip points. <br />
</p>
<p>If the projection of clippolyv is not the same as the xyplt, the xyplt layer
layer will be reprojected to the same projection as the clippoly before
intersection.
</p>


<h3>Value</h3>

<p>A list of the following objects:
</p>
<table>
<tr><td><code>clip_xyplt</code></td>
<td>
<p> sf object. The input xyplt, clipped to polygon boundary
layer.  The projection will be same as clippolyv projection. </p>
</td></tr>
<tr><td><code>xy.uniqueid</code></td>
<td>
<p> String. Unique identifier of clip_xy. </p>
</td></tr>
<tr><td><code>clip_polyv</code></td>
<td>
<p> SpatialPolygonsDataFrame. The polygon boundary layer used
for clipping. </p>
</td></tr> <tr><td><code>clip_tabs</code></td>
<td>
<p> Data frame(s). Other tables in intabs
clipped to boundary. </p>
</td></tr>
</table>
<p>If exportsp=TRUE, the sf object will be written to out_dsn (See note).
</p>


<h3>Note</h3>

<p>On-the-fly projection conversion<br /> The spTransform (sf) method is
used for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>ESRI Shapefile Driver<br /> If exportsp=TRUE:<br /> The st_write (sf) function
is called. If out_fmt=&quot;shp&quot;, the ESRI Shapefile driver truncates variable
names to 10 characters or less. Variable names are changed before export
using an internal function (trunc10shp). If sf object has more than 1
record, it will be returned but not exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get point data from WYplt data in FIESTA
WYplt &lt;- FIESTA::WYplt

# Get polygon vector layer from FIESTA external data
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp",
                          package = "FIESTA")

# Extract points from polygon vector layer
xyext &lt;- spClipPoint(xyplt = WYplt,
                     clippolyv = WYbhdistfn,
                     clippolyv.filter = "DISTRICTNU == '03'",
                     uniqueid = "CN",
                     spMakeSpatial_opts = list(xvar = "LON_PUBLIC",
                                               yvar = "LAT_PUBLIC",
                                               xy.crs = 4269))
names(xyext)
xyplt &lt;- xyext$clip_xyplt
polyv &lt;- xyext$clip_polyv

# Plot extracted values of national forest district
plot(sf::st_geometry(polyv))
plot(sf::st_geometry(xyplt), add = TRUE)
</code></pre>

<hr>
<h2 id='spClipPoly'>Spatial - Clip (intersect) polygon vector layer with polygon vector layer.</h2><span id='topic+spClipPoly'></span>

<h3>Description</h3>

<p>Wrapper for sf::st_intersection, to clip (intersect) polygon vector layer
with another polygon vector layer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spClipPoly(
  polyv,
  polyv_dsn = NULL,
  clippolyv,
  clippolyv_dsn = NULL,
  clippolyv.filter = NULL,
  buffdist = NULL,
  validate = FALSE,
  showext = FALSE,
  areacalc = FALSE,
  areaunits = "ACRES",
  nolonglat = TRUE,
  exportsp = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spClipPoly_+3A_polyv">polyv</code></td>
<td>
<p>sf R object or String. Polygon data to clip. Can be a spatial
polygon object, full pathname to a shapefile, or name of a layer within a
database.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_polyv_dsn">polyv_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of layer to clip. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv is sf
object.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_clippolyv">clippolyv</code></td>
<td>
<p>SpatialPolygons class R object or String. Name of the
polygon spatial layer to use for clipping.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_clippolyv_dsn">clippolyv_dsn</code></td>
<td>
<p>String. Data source name (dsn; i.e., pathname or
database name) of clippolyv_layer. The dsn varies by driver. See gdal OGR
vector formats (https://www.gdal.org/ogr_formats.html). Optional if
clippolyv_layer is an R object.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_clippolyv.filter">clippolyv.filter</code></td>
<td>
<p>String. Filter to subset clippolyv spatial layer.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_buffdist">buffdist</code></td>
<td>
<p>Number. The distance to buffer the polygon before clipping.
Uses sf::st_buffer. The distance is based on units of polygon, st_crs(x)$units.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_areacalc">areacalc</code></td>
<td>
<p>Logical. If TRUE, calculate area of clipped polygons and
append to attribute table (See details).</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_areaunits">areaunits</code></td>
<td>
<p>String. If TRUE, calculate area of clipped polygons and
append to attribute table (&quot;ACRES&quot;, &quot;HECTARES&quot;, &quot;SQKM&quot;). If NULL, units of
polyv.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_nolonglat">nolonglat</code></td>
<td>
<p>Logical. If TRUE, and both layer's coordinate system is
long/lat, the layers are converted to a projected CRS before clipping.</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the spatial clipped object is exported to
outfolder (see spExportSpatial for details).</p>
</td></tr>
<tr><td><code id="spClipPoly_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options for saving data. If out_layer = NULL, default = 'polyclip'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sf::st_intersection function is used to clip polygons. <br />
</p>
<p>areacalc<br /> If areacalc = TRUE and the clipped spatial object is not in a
projected coordinate system (i.e., longlat), the object will be reprojected
to the Albers Equal Area projection before area is calculated.
</p>


<h3>Value</h3>

<p>sf object of clipped polygon. If polyv and clippolyv have different
projections, the projection of returned object will have the same projection
as polyv (See note about on-the-fly projection conversion).
</p>
<p>If exportsp=TRUE, the sf object will be written to outfolder (See note).
</p>


<h3>Note</h3>

<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>ESRI Shapefile Driver<br /> 
If exportsp=TRUE:<br /> 
The st_write (sf) function is called. If out_fmt=&quot;shp&quot;, the ESRI Shapefile 
driver truncates variable names to 10 characters or less. Variable names are 
changed before export using an internal function (trunc10shp). If sf object 
has more than 1 record, it will be returned but not exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Set up data from FIESTA
WYbhfn &lt;- system.file("extdata", "sp_data/WYbighorn_adminbnd.shp",
                                    package = "FIESTA"))

# Clip polygon with WY Bighorn object from FIESTA
WYbhco &lt;- spClipPoly(polyv = stunitco,
                     clippolyv = WYbhfn)     

## End(Not run)
</code></pre>

<hr>
<h2 id='spClipRast'>Spatial - Subsets a raster to a polygon extent or boundary.</h2><span id='topic+spClipRast'></span>

<h3>Description</h3>

<p>Subsets a raster to the extent or masked boundary of a spatial polygon
object or shapefile (*.shp), with option to write the new file to the
outfolder with specified format (fmt).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spClipRast(
  rast,
  rastfolder = NULL,
  clippolyv,
  clippolyv_dsn = NULL,
  clippolyv.filter = NULL,
  rast.crs = NULL,
  bands = NULL,
  NODATA = NULL,
  buffdist = NULL,
  validate = FALSE,
  maskByPolygons = TRUE,
  showext = FALSE,
  fmt = "GTiff",
  compress = FALSE,
  compressType = "DEFLATE",
  outfolder = NULL,
  outfn = "rastclip",
  outfn.pre = NULL,
  outfn.date = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spClipRast_+3A_rast">rast</code></td>
<td>
<p>String or Raster. Raster name, including extension. Option to
include full path.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_rastfolder">rastfolder</code></td>
<td>
<p>String. Name of the raster folder. Optional.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_clippolyv">clippolyv</code></td>
<td>
<p>SpatialPolygons class R object or String. Name of the
polygon spatial layer to use for clipping.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_clippolyv_dsn">clippolyv_dsn</code></td>
<td>
<p>String. The data source name (dsn; i.e., pathname or
database name) of clippolyv. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv_layer is
an R object.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_clippolyv.filter">clippolyv.filter</code></td>
<td>
<p>String. Filter to subset clippolyv spatial layer.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_rast.crs">rast.crs</code></td>
<td>
<p>EPSG code or PROJ.4 string. Defined coordinate reference
system if rast has no crs defined.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_bands">bands</code></td>
<td>
<p>Numeric vector. If rast is a multi-layer raster and only 1 or
some layers are desired, specify layer number(s) in a vector format. If
NULL, all layers are summed.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_nodata">NODATA</code></td>
<td>
<p>Number. The NODATA value for background values. If NODATA is
NULL, and a NODATA value is defined on the input raster, the default is the
defined NODATA value, else it is defined based on its datatype (see 
DEFAULT_NODATA for default data values).</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_buffdist">buffdist</code></td>
<td>
<p>Number. The distance to buffer the polygon before clipping
raster. Uses sf::st_buffer. The distance is based on units of the raster.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_maskbypolygons">maskByPolygons</code></td>
<td>
<p>Logical. If TRUE, rast is clipped to boundary of
polygon.  If FALSE, rast is clipped to extent of polygon.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_fmt">fmt</code></td>
<td>
<p>String. Format for exported raster. Default is format of unput
raster.  (&quot;raster&quot;, &quot;ascii&quot;, &quot;SAGA&quot;, &quot;IDRISI&quot;, &quot;CDF&quot;, &quot;GTiff&quot;, &quot;ENVI&quot;,
&quot;EHdr&quot;, &quot;HFA&quot;, &quot;VRT&quot;).  VRT is a virtual raster (See note below).</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_compress">compress</code></td>
<td>
<p>Logical. If TRUE, compress the final output.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_compresstype">compressType</code></td>
<td>
<p>String. An optional compression type ('LZW', &quot;DEFLATE',
&quot;PACKBITS'). Note: If format = 'HFA', a default compression type is used.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_outfolder">outfolder</code></td>
<td>
<p>String. The output folder.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_outfn">outfn</code></td>
<td>
<p>String. Name of output data file. If NULL, default is
'rastclip'.  If no extension, a default is provided to match output format.</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_outfn.pre">outfn.pre</code></td>
<td>
<p>String. Add a prefix to output name (e.g., &quot;01&quot;).</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_outfn.date">outfn.date</code></td>
<td>
<p>Logical. If TRUE, add date to end of outfile (e.g.,
outfn_'date'.csv).</p>
</td></tr>
<tr><td><code id="spClipRast_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, overwrite files in outfolder.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use spClipRast() to prompt for input.
</p>
<p>If the projection of polyv is different than the projection of rast, the
polyv SpatialPolygons object is converted to the projection of rast (See
note about on-the-fly projection conversion).
</p>


<h3>Value</h3>

<table>
<tr><td><code>value</code></td>
<td>
<p> Spatial S4 object. A clipped raster file. </p>
</td></tr>
</table>
<p>The clipped raster is written to outfolder with specified format or same
format as input raster.
</p>


<h3>Note</h3>

<p>On-the-fly projection conversion<br /> 
The spTransform (sf) method is
used for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>VRT format Virtual raster format is a pointer to a temporary file, commonly
used as an intermediate step between processes. The VRT format ignores
option to maskByPolygons.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get polygon vector layer from FIESTA external data
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp", 
                          package = "FIESTA")
WYbhdist &lt;- FIESTA::spImportSpatial(WYbhdistfn)
WYbhdist

# Get raster layers from FIESTA external data
demfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_dem_250m.img",
                     package = "FIESTA")

# Clip raster to district = '03'
dem03 &lt;- spClipRast(rast = demfn,
                    clippolyv = WYbhdistfn,
                    clippolyv.filter = "DISTRICTNU == '03'",
                    overwrite = TRUE,
                    outfolder = tempdir())
terra::plot(terra::rast(dem03))

# Clip raster to district = '06'
dem06 &lt;- spClipRast(rast = demfn,
                    clippolyv = WYbhdistfn,
                    clippolyv.filter = "DISTRICTNU == '06'",
                    overwrite = TRUE,
                    outfolder = tempdir())

# Plot extracted values of national forest district
terra::plot(terra::rast(dem06))

</code></pre>

<hr>
<h2 id='spExportSpatial'>Spatial - Exports an sf object.</h2><span id='topic+spExportSpatial'></span>

<h3>Description</h3>

<p>Exports an sf object to a specified output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spExportSpatial(sfobj, savedata_opts = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spExportSpatial_+3A_sfobj">sfobj</code></td>
<td>
<p>sf class R object. Spatial object to export.</p>
</td></tr>
<tr><td><code id="spExportSpatial_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options for saving data. If out_layer = NULL, default = 'datsp'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wrapper for sf::st_write function.
</p>


<h3>Value</h3>

<p>An sf spatial object is written to outfolder.
</p>


<h3>Note</h3>

<p>If out_fmt='shp':<br /> The ESRI shapefile driver truncates variable
names to 10 characters or less. Variable names are changed before export
using an internal function (trunc10shp). Name changes are output to the
outfolder, 'out_layer'_newnames.csv.
</p>
<p>If sf object has more than 1 record, it cannot be exported to a shapefile.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up data from FIESTA
WYbh &lt;- spImportSpatial(system.file("extdata",
                                    "sp_data/WYbighorn_adminbnd.shp",
                                    package = "FIESTA"))

# Export data with spExportSpatial
spExportSpatial(WYbh,
                savedata_opts = list(out_dsn = "WYbh.shp", 
                                     outfolder = tempdir(), 
                                     overwrite_dsn = TRUE))
</code></pre>

<hr>
<h2 id='spExtractPoly'>Spatial - Extracts point attribute values from SpatialPolygons layer(s).</h2><span id='topic+spExtractPoly'></span>

<h3>Description</h3>

<p>Extracts values from one or more polygon layers and appends to input
SpatialPoints layer or data frame. Points are reprojected on-the-fly to
projection of SpatialPolygons using PROJ.4 transformation parameters and
sf spTransform function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spExtractPoly(
  xyplt,
  xyplt_dsn = NULL,
  xy.uniqueid = "PLT_CN",
  polyvlst,
  polyv_dsn = NULL,
  polyvarlst = NULL,
  polyvarnmlst = NULL,
  keepNA = FALSE,
  showext = FALSE,
  savedata = FALSE,
  exportsp = FALSE,
  exportNA = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE,
  ncores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spExtractPoly_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame object or String. Name of layer with xy coordinates
and unique identifier. Can be layer with xy_dsn, full pathname, including
extension, or file name (with extension) in xy_dsn folder.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database where xyplt is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_xy.uniqueid">xy.uniqueid</code></td>
<td>
<p>String.* Unique identifier of xyplt rows.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_polyvlst">polyvlst</code></td>
<td>
<p>sf R object or String. Name(s) of polygon layers to extract
values. A spatial polygon object, full path to shapefile, or name of a layer
within a database.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_polyv_dsn">polyv_dsn</code></td>
<td>
<p>String. Data source name (dsn) where polyvlst layers are
found (e.g., *.sqlite, *.gdb, folder name). The dsn varies by driver.  See
gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_polyvarlst">polyvarlst</code></td>
<td>
<p>String vector or list. The name(s) of variable(s) to
extract from polygon(s). If extracting multiple variables from more than one
polygon, specify names in a list format, corresponding to polyvlst.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_polyvarnmlst">polyvarnmlst</code></td>
<td>
<p>String vector or list. Output name(s) of variable(s)
extracted from polygon(s). If extracting multiple variables from more than
one polygon, specify names in a list format, corresponding to polyvlst. The
number of names must match the number of variables in polyvarlst.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, keep NA values.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the input data with extracted values are
saved to outfolder.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the extracted point data are exported to
outfolder.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_exportna">exportNA</code></td>
<td>
<p>Logical. If TRUE, NULL values are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'polyext'.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
<tr><td><code id="spExtractPoly_+3A_ncores">ncores</code></td>
<td>
<p>Integer. Number of cores to use for extracting values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>
<p>keepnull<br /> If keepnull=FALSE, points are excluded when all extracted
variables from any one SpatialPolygons are NULL, returning the points that
fall within the ' intersecting polygons.
</p>


<h3>Value</h3>

<table>
<tr><td><code>pltdat</code></td>
<td>
<p> SpatialPointsDataFrame object or data frame. Input
point data with extracted raster values appended. For multi-part polygons,
more than 1 row per point may be output. </p>
</td></tr> <tr><td><code>var.name</code></td>
<td>
<p> String vector.
Variable names of extracted variables. </p>
</td></tr>
</table>
<p>If savedata=TRUE, outdat data frame is saved to outfolder (Default name:
datext_'date'.csv).  If exportsp=TRUE, the SpatialPointsDataFrame object is
exported to outfolder (Default name: datext_'date'.shp). Variable names are
truncated to 10 characters or less (See note below). Name changes are output
to 'outfn'_newnames_'data'.csv in outfolder.
</p>


<h3>Note</h3>

<p>If exportshp=TRUE:<br /> The st_write (sf) function is called. The ArcGIS
driver truncates variable names to 10 characters or less. Variable names are
changed before export using an internal function (trunc10shp). If Spatial
object has more than 1 record, it will be returned but not exported.
</p>
<p>The spTransform (sf) method is used for on-the-fly map projection
conversion and datum transformation using PROJ.4 arguments. Datum
transformation only occurs if the +datum tag is present in the both the from
and to PROJ.4 strings. The +towgs84 tag is used when no datum transformation
is needed. PROJ.4 transformations assume NAD83 and WGS84 are identical
unless other transformation parameters are specified.  Be aware, providing
inaccurate or incomplete CRS information may lead to erroneous data shifts
when reprojecting. See spTransform help documentation for more details.
</p>
<p>Any names in polygon layers that are the same as in xyplt are renamed to
name'_1'.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get point data from WYplt data in FIESTA
WYplt &lt;- FIESTA::WYplt

# Get polygon vector layer from FIESTA external data
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp",
                          package = "FIESTA")

# Extract points from polygon vector layer
xyext &lt;- spExtractPoly(xyplt = WYplt,
                       polyvlst = WYbhdistfn,
                       xy.uniqueid = "CN",
                       spMakeSpatial_opts = list(xvar = "LON_PUBLIC",
                                                 yvar = "LAT_PUBLIC",
                                                 xy.crs = 4269))
names(xyext)
xyext$outnames
spxyext &lt;- xyext$spxyext
head(spxyext)
NAlst &lt;- xyext$NAlst

# Plot extracted values of national forest district
plot(spxyext["DISTRICTNU"])
</code></pre>

<hr>
<h2 id='spExtractRast'>Spatial - Extracts point attribute values from raster layer(s).</h2><span id='topic+spExtractRast'></span>

<h3>Description</h3>

<p>Extracts values from one or more raster layers and appends to input
SpatialPoints layer or data frame. Points are reprojected on-the-fly to
projection of raster(s) using PROJ.4 transformation parameters and sf
spTransform function. Includes options to use bilinear interpolation or
summarize over a window of n pixels using a specified statistic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spExtractRast(
  xyplt,
  xyplt_dsn = NULL,
  xy.uniqueid = "PLT_CN",
  rastlst,
  rastfolder = NULL,
  rast.crs = NULL,
  bandlst = NULL,
  var.name = NULL,
  interpolate = FALSE,
  windowsize = 1,
  windowstat = NULL,
  rast.NODATA = NULL,
  keepNA = TRUE,
  ncores = 1,
  showext = FALSE,
  savedata = FALSE,
  exportsp = FALSE,
  exportNA = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spExtractRast_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame object or String. Name of layer with xy coordinates
and unique identifier. Can be layer with xy_dsn, full pathname, including
extension, or file name (with extension) in xy_dsn folder.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database where xyplt is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_xy.uniqueid">xy.uniqueid</code></td>
<td>
<p>String. Unique identifier of xyplt rows.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_rastlst">rastlst</code></td>
<td>
<p>String vector or list or strings and/or rasters. File name(s)
with extensions, or raster object(s). Note: raster objects must be written
to file.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_rastfolder">rastfolder</code></td>
<td>
<p>String. Name of the folder with raster layers. Optional.
Useful if all raster layers are in same folder.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_rast.crs">rast.crs</code></td>
<td>
<p>EPSG code or PROJ.4 String. Name of coordinate reference
system for rasters with no projection defined. If more than one raster has
no projection defined, the same crs will be used.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_bandlst">bandlst</code></td>
<td>
<p>Numeric named list. If rastfnlst includes a multi-layer
raster and only 1 or some layers are desired, specify layer numbers in a
named list format with names matching the base names in rastfnlst (e.g.,
list(rast1=5, rast3=1:3)). If NULL, all layers are extracted.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_var.name">var.name</code></td>
<td>
<p>String vector. Extracted variable name(s). If NULL, uses the
basename of raster layer, including band number for multi-band rasters.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_interpolate">interpolate</code></td>
<td>
<p>Logical vector. If TRUE, uses bilinear interpolation of
pixel values, weighted average of 4 nearest pixels (i.e., continuous data).</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_windowsize">windowsize</code></td>
<td>
<p>Number vector. The size of window for summarizing data.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_windowstat">windowstat</code></td>
<td>
<p>Character vector. If windowsize is greater than one, the
statistic to use for summarizing data (&quot;mean&quot;, &quot;min&quot;, &quot;max&quot;, &quot;median&quot;,
&quot;sum&quot;, &quot;range&quot;, &quot;var&quot;, &quot;sd&quot;, &quot;rsd&quot;, &quot;mode&quot;, &quot;value&quot;). If windowstat=&quot;value&quot;,
all pixel values are returned, otherwise 1 value per row in xyplt is
returned.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_rast.nodata">rast.NODATA</code></td>
<td>
<p>Numeric vector. NODATA value(s) of raster if not
predefined (See notes below). This value will be converted to NA and removed
if keepNA=FALSE.  If rastfnlst includes more than one raster, the
rast.NODATA value should coincide with number of rasters in rastfnlst. If
only one rast.NODATA, the same NODATA value is used for all rasters.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, keeps NA values after data extraction.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_ncores">ncores</code></td>
<td>
<p>Integer. Number of cores to use for extracting values.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the input data with extracted values are
saved to outfolder.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the extracted raster point data are
exported to outfolder.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_exportna">exportNA</code></td>
<td>
<p>Logical. If TRUE, NA values are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'rastext'.</p>
</td></tr>
<tr><td><code id="spExtractRast_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>


<h3>Value</h3>

<table>
<tr><td><code>sppltext</code></td>
<td>
<p> sf object or data frame. Input xyplt data with
extracted raster values appended. </p>
</td></tr> <tr><td><code>outnames</code></td>
<td>
<p> String vector. Raster
output names. </p>
</td></tr> <tr><td><code>rastfnlst</code></td>
<td>
<p> String vector. Raster pathnames. </p>
</td></tr>
<tr><td><code>inputdf</code></td>
<td>
<p> Data frame. Raster information input to zonal summaries. </p>
</td></tr>
<tr><td><code>NAlst</code></td>
<td>
<p> sf List. If NA values exist after data extraction, the spatial
NA points are returned. </p>
</td></tr>
</table>
<p>If savedata=TRUE, pltassgn and unitarea are saved to outfolder.<br /> If
exportsp=TRUE, the spatial sf points object is exported to outfolder.<br />.
If exportNA=TRUE and NA values exist after data extraction, the spatial NA
points are exported to outfolder.
</p>


<h3>Note</h3>

<p>rast.NODATA<br /> NODATA values are raster pixel values that have no data of
interest, including pixels within the extent of the layer, but outside the
area of interest. Sometimes these pixels have been defined previously. The
defined NODATA pixels are imported to R as NULL values. When not previously
defined, the pixels outside the area of interest will be the minimum or
maximum value depending on the data type (e.g., 16-bit signed: min=-32,768;
max=32,768) or byte size (1 byte: min=0; max=255).  These NODATA values will
be added to the zonal statistic calculations if not specified in
rast.NODATA.
</p>
<p>The spTransform (sf) method is used for on-the-fly map projection
conversion and datum transformation using PROJ.4 arguments. Datum
transformation only occurs if the +datum tag is present in the both the from
and to PROJ.4 strings. The +towgs84 tag is used when no datum transformation
is needed. PROJ.4 transformations assume NAD83 and WGS84 are identical
unless other transformation parameters are specified.  Be aware, providing
inaccurate or incomplete CRS information may lead to erroneous data shifts
when reprojecting. See spTransform help documentation for more details.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get point data from WYplt data in FIESTA
WYplt &lt;- FIESTA::WYplt

# Get raster layers from FIESTA external data
fornffn &lt;- system.file("extdata",
                       "sp_data/WYbighorn_forest_nonforest_250m.tif",
                       package = "FIESTA")
demfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_dem_250m.img",
                     package = "FIESTA")

# Extract points from raster
xyext &lt;- spExtractRast(xyplt = WYplt,
                       rastlst = c(fornffn, demfn),
                       var.name = c("fornf", "dem"),
                       xy.uniqueid = "CN",
                       spMakeSpatial_opts = list(xvar = "LON_PUBLIC",
                                                 yvar = "LAT_PUBLIC",
                                                 xy.crs = 4269))
names(xyext)
xyext$outnames
sppltext &lt;- xyext$sppltext
head(sppltext)
xyext$inputdf

# Plot extracted values of forest/nonforest
plot(sppltext["fornf"])

# Plot extracted values of dem (i.e., elevation)
plot(sppltext["dem"])
</code></pre>

<hr>
<h2 id='spGetAuxiliary'>Spatial wrapper - Extracts and compiles auxiliary data within a specified
boundary.</h2><span id='topic+spGetAuxiliary'></span>

<h3>Description</h3>

<p>Wrapper to extract and compile auxiliary data by domain unit (i.e, estimation
unit or small area domain). The following information is compiled:<br /> -
Attribute defining domain (i.e., estimation unit) from domain layer<br /> -
Area by domain (i.e., estimation unit)<br /> - Zonal statistics by domain
(i.e., estimation unit) - spZonalRast()<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetAuxiliary(
  xyplt = NULL,
  xyplt_dsn = NULL,
  uniqueid = "PLT_CN",
  unittype = "POLY",
  unit_layer = NULL,
  unit_dsn = NULL,
  unitvar = NULL,
  unitvar2 = NULL,
  rastlst.cont = NULL,
  rastlst.cont.name = NULL,
  rastlst.cont.stat = "mean",
  rastlst.cont.NODATA = NULL,
  rastlst.cat = NULL,
  rastlst.cat.name = NULL,
  rastlst.cat.NODATA = NULL,
  rastfolder = NULL,
  asptransform = FALSE,
  rast.asp = NULL,
  rast.lut = NULL,
  rastlut = NULL,
  extract = TRUE,
  areacalc = TRUE,
  areaunits = "ACRES",
  keepNA = TRUE,
  ncores = 1,
  NAto0 = TRUE,
  npixels = TRUE,
  addN = FALSE,
  showext = FALSE,
  returnxy = FALSE,
  savedata = FALSE,
  exportsp = FALSE,
  exportNA = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL,
  vars2keep = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetAuxiliary_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame object or String. Name of layer with xy coordinates
and unique identifier. Can be layer with xy_dsn, full pathname, including
extension, or file name (with extension) in xy_dsn folder.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database where xyplt is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String.* Unique identifier of xyplt records.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_unittype">unittype</code></td>
<td>
<p>String. Type of spatial layer unit_layer is (&quot;POLY&quot;,
&quot;RASTER&quot;).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_unit_layer">unit_layer</code></td>
<td>
<p>sf R object or String. Name of the domain spatial layer.
Can be a spatial polygon object, full pathname to a shapefile, name of a
polygon layer within a database, or a full pathname to raster file.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_unit_dsn">unit_dsn</code></td>
<td>
<p>String. The data source name (dsn; i.e., folder or database
name) of unit_layer. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of domain variable in domlayer. If NULL,
assuming one domain. An attribute names ONEUNIT is added to layer with
value=1.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_unitvar2">unitvar2</code></td>
<td>
<p>String. If unittype=&quot;POLY&quot;, name of attribute in unit_layer
defining a second, hierarchical larger, estimation unit (e.g., Statecd).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cont">rastlst.cont</code></td>
<td>
<p>String vector or list. A list of raster(s) with
continuous data values (e.g., DEM). The list may include file name of
raster(s) or raster objects that are not InMemory.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cont.name">rastlst.cont.name</code></td>
<td>
<p>String vector. Output names for continuous rasters.
Optional. If NULL, name of raster is used as default or name+'_'+layer
number for multi-band layers.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cont.stat">rastlst.cont.stat</code></td>
<td>
<p>String. Zonal statistic for continuous rasters.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cont.nodata">rastlst.cont.NODATA</code></td>
<td>
<p>Numeric vector. NODATA value for continuous
rasters (See notes). These values will be converted to NA and removed from
output if keepNA=FALSE. If 1 number, the same value will be used for all
categorical rasters. If more than 1 number, the number of values must be
equal to the number of rasters in rastlst.cont.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cat">rastlst.cat</code></td>
<td>
<p>String vector or list. A list of raster(s) with thematic
(i.e., categorical) data values. The list may include file name of raster(s)
or raster objects that are not InMemory.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cat.name">rastlst.cat.name</code></td>
<td>
<p>String vector. Output names for categorical rasters.
If NULL, name of raster is used as default or name+'_'+layer number for
multi-band layers.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlst.cat.nodata">rastlst.cat.NODATA</code></td>
<td>
<p>Numeric vector. NODATA value for categorical
rasters (See notes). These values will be converted to NA and removed from
output if keepNA=FALSE. If 1 number, the same value will be used for all
categorical rasters. If more than 1 number, the number of values must be
equal to the number of rasters in rastlst.cat.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastfolder">rastfolder</code></td>
<td>
<p>String. Name of the folder with raster layers. Optional.
Useful if all raster layers are in same folder.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_asptransform">asptransform</code></td>
<td>
<p>Logical. If TRUE, transforms aspect to Northness and
Eastness indices using sin and cosine functions.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rast.asp">rast.asp</code></td>
<td>
<p>String or raster object. The raster in rastlst.cont that is
the aspect raster (Note: aspect must have units in degrees).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rast.lut">rast.lut</code></td>
<td>
<p>String. A raster in rastlst.cat to group class values. Only
one raster is allowed.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_rastlut">rastlut</code></td>
<td>
<p>String or raster object. The raster look up table used for
collapsing rast.lut values.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_extract">extract</code></td>
<td>
<p>Logical. If TRUE, extracts values from rastlst.cont and 
rastlst.cat along with values from unit_layer. If FALSE, extracts only 
values from unit_layer.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_areacalc">areacalc</code></td>
<td>
<p>Logical. If TRUE, returns area by domvar.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_areaunits">areaunits</code></td>
<td>
<p>String. Output area units (&quot;ACRES&quot;, &quot;HECTARES&quot;,
&quot;SQMETERS&quot;).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, returns data frame of NA values.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_ncores">ncores</code></td>
<td>
<p>Integer. Number of cores to use for extracting values.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_nato0">NAto0</code></td>
<td>
<p>Logical. If TRUE, converts extracted NA values to 0.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_npixels">npixels</code></td>
<td>
<p>Logical. If TRUE, include number of pixels.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_addn">addN</code></td>
<td>
<p>Logical. If TRUE, adds N to unitzonal output with number of 
plots by unit.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_returnxy">returnxy</code></td>
<td>
<p>Logical. If TRUE, returns xy data as sf object (spxyplt).</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the input data with extracted values are
saved to outfolder.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If savedata=TRUE and returnxy=TRUE, If TRUE, the
extracted strata point data are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_exportna">exportNA</code></td>
<td>
<p>Logical. If TRUE, NA values are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_vars2keep">vars2keep</code></td>
<td>
<p>String vector. Attributes in SAdoms, other than domvar to
include in unitzonal output and extract to pltassgn points.</p>
</td></tr>
<tr><td><code id="spGetAuxiliary_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>
<p>If there is a raster and SpatialPolygon layer, and the projection of the
SpatialPolygons is different than the projection of the raster, the
SpatialPolygons object is reprojected to the projection of raster (See note
about on-the-fly projection conversion).
</p>


<h3>Value</h3>

<table>
<tr><td><code>pltassgn</code></td>
<td>
<p> sf object. xyplt data with extracted values from
rastlst*. </p>
</td></tr> <tr><td><code>unitzonal</code></td>
<td>
<p> Data frame. Number of pixels and zonal
statistics from continuous rasters or zonal proportions from categorical
raster for each domain (i.e., estimation unit). </p>
</td></tr> <tr><td><code>unitvar</code></td>
<td>
<p> Data
frame. Domain (i.e., estimation unit) name. </p>
</td></tr> <tr><td><code>inputdf</code></td>
<td>
<p> Data frame.
Raster information input to zonal summaries. </p>
</td></tr> <tr><td><code>prednames</code></td>
<td>
<p> String
vector. Name(s) of predictor variable(s). </p>
</td></tr> <tr><td><code>zonalnames</code></td>
<td>
<p> String
vector. Name(s) of zonal variable(s). </p>
</td></tr> <tr><td><code>predfac</code></td>
<td>
<p> String vector.
Name(s) of categorical (i.e. factor) variable(s). </p>
</td></tr> <tr><td><code>npixelvar</code></td>
<td>

<p>String. Name of variable describing number of pixels. </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>

<p>Data frame. Area by domain (i.e., estimation unit). </p>
</td></tr> <tr><td><code>areavar</code></td>
<td>

<p>String. Name of variable describing acres in domarea. </p>
</td></tr> <tr><td><code>pltassgnid</code></td>
<td>

<p>String. Unique identifier of plot. </p>
</td></tr> <tr><td><code>spxy</code></td>
<td>
<p> Simple feature. If
returnxy=TRUE, Spatial coordinates. </p>
</td></tr> <tr><td><code>xy.uniqueid</code></td>
<td>
<p> String. If
returnxy=TRUE, unique identifier of spxy. </p>
</td></tr>
</table>
<p>If savedata=TRUE, datstrat and unitarea are saved to outfolder.  If
exportsp=TRUE, the sf object is exported to outfolder.
</p>


<h3>Note</h3>

<p>rast.NODATA<br /> NODATA values are raster pixel values that have no data of
interest, including pixels within the extent of the layer, but outside the
area of interest. Sometimes these pixels have been defined previously. The
defined NODATA pixels are imported to R as NULL values. When not previously
defined, the pixels outside the area of interest will be the minimum or
maximum value depending on the data type (e.g., 16-bit signed: min=-32,768;
max=32,768) or byte size (1 byte: min=0; max=255).  These NODATA values will
be added to the zonal statistic calculations if not specified in
rast.NODATA.
</p>
<p>If exportsp=TRUE:<br /> If out_fmt=&quot;shp&quot;, the st_write (sf) function is
called. The ArcGIS driver truncates variable names to 10 characters or less.
Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get layers from FIESTA external data
## dem (continuous)
demfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_dem_250m.img",
                     package = "FIESTA")
  
## tnt (categorical)                      
tntfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_forest_nonforest_250m.tif",
                     package = "FIESTA")

## unit layer
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp", 
                          package = "FIESTA")
# Get Auxiliary data                            
spGetAuxiliary(xyplt = FIESTA::WYplt,
               uniqueid = "CN",
               unit_layer = WYbhdistfn,
               unitvar = "DISTRICTNA",
               rastlst.cont = demfn,
               rastlst.cat = tntfn,
               spMakeSpatial_opts = list(xvar = "LON_PUBLIC",
                                         yvar = "LAT_PUBLIC"))

</code></pre>

<hr>
<h2 id='spGetEstUnit'>Spatial wrapper - Extracts point attribute values and area from a simple
feature or raster estimation unit layer.</h2><span id='topic+spGetEstUnit'></span>

<h3>Description</h3>

<p>Wrapper to get point attribute values and area from a simple feature or
raster layer of estimation units and calculates area. Points are reprojected
on-the-fly to projection of unit_layer using PROJ.4 transformation parameters
and sf spTransform function.  - Point attribute extraction from
simple feature (spExtractPoly) or from raster (spExtractRast) - Calculate
area by estimation unit(s) (areacalc.poly/areacalc.pixel)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetEstUnit(
  xyplt,
  xyplt_dsn = NULL,
  uniqueid = "PLT_CN",
  unittype = "POLY",
  unit_layer,
  unit_dsn = NULL,
  unitvar = NULL,
  unit.filter = NULL,
  areavar = NULL,
  areaunits = "acres",
  keepNA = FALSE,
  returnxy = FALSE,
  showext = FALSE,
  savedata = FALSE,
  exportsp = FALSE,
  exportNA = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL,
  vars2keep = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetEstUnit_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame, sf object, full pathname to *.csv or *shp, or layer
name in a geodatabase. Includes XY coordinates and unique identifier.  If
non-spatial, include options in spMakeSpatial_opts parameter.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database where xyplt is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String.* Unique identifier of xyplt rows.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_unittype">unittype</code></td>
<td>
<p>String. Spatial layer type of unit_layer (&quot;POLY&quot;, &quot;RASTER&quot;).</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_unit_layer">unit_layer</code></td>
<td>
<p>String or sf object. The name of the estimation unit
layer. The layer name may be a full pathname to a file, the
basename to a file, a spatial layer name from a database, or a
SpatialPolygons object with a defined projection.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_unit_dsn">unit_dsn</code></td>
<td>
<p>String. The data source name (dsn; i.e., folder or database
name) of unit_layer. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_unitvar">unitvar</code></td>
<td>
<p>String. Name of estimation unit variable in unit_layer.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_unit.filter">unit.filter</code></td>
<td>
<p>String. Filter to subset unit_layer spatial layer.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable unit variable in unit_layer. If
NULL, calculates area by unitvar.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_areaunits">areaunits</code></td>
<td>
<p>String. Output area units (&quot;acres&quot;, &quot;hectares&quot;,
&quot;sqmeters&quot;).</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, returns data frame of NA values.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_returnxy">returnxy</code></td>
<td>
<p>Logical. If TRUE, returns xy data as sf object (spxyplt).</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the input data with extracted values are
saved to outfolder.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the extracted strata point data are
exported to outfolder.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_exportna">exportNA</code></td>
<td>
<p>Logical. If TRUE, NA values are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_vars2keep">vars2keep</code></td>
<td>
<p>String vector. Attributes in SAdoms, other than domvar to
include in dunitlut output and extract to pltassgn points.</p>
</td></tr>
<tr><td><code id="spGetEstUnit_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>
<p>If there is a raster and simple feature layer, and the projection of the
simple feature is different than the projection of the raster, the
simple feature object is transformed to the projection of raster (See note
about on-the-fly projection conversion).
</p>


<h3>Value</h3>

<table>
<tr><td><code>pltunit</code></td>
<td>
<p> Data frame. Input point data with extracted
estimation unit and strata values appended. </p>
</td></tr> <tr><td><code>sppltunit</code></td>
<td>

<p>SpatialPointsDataframe. Spatial point data with extracted estimation unit
values appended. </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> Data frame. Area by estimation unit. </p>
</td></tr>
<tr><td><code>unitvar</code></td>
<td>
<p> Data frame. Variable name for estimation unit in unitarea. </p>
</td></tr>
<tr><td><code>acrevar</code></td>
<td>
<p> Data frame. Variable name for area in unitarea. </p>
</td></tr>
<tr><td><code>pltassgnid</code></td>
<td>
<p> String. Unique identifier of plot. </p>
</td></tr>
</table>
<p>If savedata=TRUE, pltstrat and unitarea are saved to outfolder (Default
name: *_'date'.csv).  If exportshp=TRUE, the SpatialPointsDataFrame object
is exported to outfolder (Default name: datext_'date'.shp). Variable names
are truncated to 10 characters or less (See note below). Name changes are
output to 'outfn'_newnames_'data'.csv in outfolder.
</p>


<h3>Note</h3>

<p>If exportsp=TRUE:<br /> If out_fmt=&quot;shp&quot;, the st_write (sf) function is
called. The ArcGIS driver truncates variable names to 10 characters or less.
Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>unitarea<br /> Area by estimation unit is calculated and returned as object
named unitarea.  Area is based on the projection of unit_layer. If no
unit_layer input, than area is calculated from pixel counts.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Chris Toney
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up data from FIESTA
WYbhfn &lt;- system.file("extdata",
                      "sp_data/WYbighorn_adminbnd.shp",
                      package = "FIESTA")
                      
# Create a `SpatialPoints` object from `WYplt`
WYspplt &lt;- spMakeSpatialPoints(xyplt = WYplt, 
                               xy.uniqueid = "CN", 
                               xvar = "LON_PUBLIC", 
                               yvar = "LAT_PUBLIC", 
                               xy.crs = 4269)
                               
# Get estimation unit acres for Bighorn National Forest
spGetEstUnit(xyplt = WYplt, 
             uniqueid = "CN", 
             unit_layer = WYbhfn, 
             spMakeSpatial_opts = list(xvar = "LON_PUBLIC", 
                                       yvar = "LAT_PUBLIC", 
                                       xy.crs = 4269))
</code></pre>

<hr>
<h2 id='spGetPlots'>Spatial wrapper - Extracts plot data within a given boundary.</h2><span id='topic+spGetPlots'></span>

<h3>Description</h3>

<p>Wrapper to get FIA plots within the boundary population (area of interest) -
Intersect with state boundary - Get FIA plots for intersected states,
including tree, and spatial - Clip spatial coordinates and other tables to
boundary (spClipPoint)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetPlots(
  bnd = NULL,
  bnd_dsn = NULL,
  bnd.filter = NULL,
  states = NULL,
  RS = NULL,
  pltids = NULL,
  xy_datsource = NULL,
  xy_dsn = NULL,
  xy = "PLOT",
  xy_opts = xy_options(),
  datsource = NULL,
  data_dsn = NULL,
  dbTabs = dbTables(),
  eval = "FIA",
  eval_opts = NULL,
  puniqueid = "CN",
  invtype = "ANNUAL",
  intensity1 = FALSE,
  clipxy = TRUE,
  pjoinid = NULL,
  showsteps = FALSE,
  returnxy = TRUE,
  returndata = TRUE,
  savedata = FALSE,
  savexy = FALSE,
  savebnd = FALSE,
  exportsp = FALSE,
  savedata_opts = NULL,
  spXYdat = NULL,
  gui = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetPlots_+3A_bnd">bnd</code></td>
<td>
<p>sf R object, Area of Interest (AOI) boundary. Can be a spatial sf
object, full pathname to a shapefile, or name of a layer within a database.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_bnd_dsn">bnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., SQLite database or shapefile
pathname) of bnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if bnd is an R object.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_bnd.filter">bnd.filter</code></td>
<td>
<p>String. Filter to subset bnd spatial layer.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_states">states</code></td>
<td>
<p>String. The name of state(s) for tables (e.g., &quot;Vermont&quot;, &quot;Utah&quot;).</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_rs">RS</code></td>
<td>
<p>String. Name of FIA research station to restrict states to
('RMRS','SRS','NCRS','NERS','PNWRS'). If NULL, all research stations are
included.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_pltids">pltids</code></td>
<td>
<p>Data frame. Non-spatial plot identifiers within bnd).</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_xy_datsource">xy_datsource</code></td>
<td>
<p>String. Source of XY data (&quot;obj&quot;, &quot;csv&quot;, &quot;datamart&quot;,
&quot;sqlite&quot;).  If datsource=NULL, checks extension of xy_dsn or xy to identify
datsource.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_xy_dsn">xy_dsn</code></td>
<td>
<p>String. Data source name (dsn; i.e., pathname or database
name) of xy. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if bnd_layer is an R
object.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_xy">xy</code></td>
<td>
<p>sf R object or String. Table with xy coordinates. Can be a spatial
polygon object, data frame, full pathname to a shapefile, or name of a layer
within a database.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_xy_opts">xy_opts</code></td>
<td>
<p>List of xy data options to specify if xy is NOT NULL. 
See xy_options (e.g., xy_opts = list(xvar='LON', yvar='LAT').</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of FIA data (&quot;obj&quot;, &quot;csv&quot;, &quot;datamart&quot;,
&quot;sqlite&quot;).  If datsource=&quot;sqlite&quot;, specify database name in data_dsn and
layers in *_layer arguments.  If datsource=&quot;datamart&quot;, files are downloaded
and extracted from FIA DataMart
(http://apps.fs.usda.gov/fia/datamart/datamart.html). See details for more
information about plot coordinates.  If datsource=&quot;csv&quot;, specify *.csv file
names in *_layer arguments.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. Name of database where *_layers reside.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_dbtabs">dbTabs</code></td>
<td>
<p>List of database tables the user would like returned.
See help(dbTables) for a list of options.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_eval">eval</code></td>
<td>
<p>String. Type of evaluation time frame for data extraction 
('FIA', 'custom'). See eval_opts for more further options.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_eval_opts">eval_opts</code></td>
<td>
<p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_puniqueid">puniqueid</code></td>
<td>
<p>String. Name of unique identifier of plt.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_invtype">invtype</code></td>
<td>
<p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_intensity1">intensity1</code></td>
<td>
<p>Logical. If TRUE, includes only XY coordinates where 
INTENSITY = 1 (FIA base grid).</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_clipxy">clipxy</code></td>
<td>
<p>Logical. If TRUE, clips xy data to bnd.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Variable in plt to join to XY data. Not necessary to
be unique. If using most current XY coordinates, use identifier for a plot
(e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_showsteps">showsteps</code></td>
<td>
<p>Logical. If TRUE, display data in device window.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_returnxy">returnxy</code></td>
<td>
<p>Logical. If TRUE, save xy coordinates to outfolder.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_returndata">returndata</code></td>
<td>
<p>Logical. If TRUE, returns data objects.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_savexy">savexy</code></td>
<td>
<p>Logical. If TRUE, saves XY data to outfolder.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_savebnd">savebnd</code></td>
<td>
<p>Logical. If TRUE, and savedata=TRUE, saves bnd. If 
out_fmt='sqlite', saves to a SpatiaLite database.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, and savexy=TRUE, saves xy data as 
spatial data. If FALSE, saves xy data as table.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_spxydat">spXYdat</code></td>
<td>
<p>R list object. Output from spGetXY().</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, uses gui interface.</p>
</td></tr>
<tr><td><code id="spGetPlots_+3A_...">...</code></td>
<td>
<p>parameters passed to DBgetPlots().</p>
</td></tr>
</table>


<h3>Details</h3>

<p><b>datsource</b>
</p>
<p>Plots are extracted from 3 different data sources:<br /> 1) CSV - data have
previously been extracted from the FIA database and stored as CSV files.<br />
2) datamart - data are extracted from FIA's publically-available
datamart.<br /> 3) sqlite - data have previously been extracted from the FIA
database and stored within a SQLite database.<br />
</p>
<p><b>Selection parameters</b>
</p>
<p>FIA plots are selected based on the following parameters:<br /> </p>

<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> evalid - the FIA evaluation identifier</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalCur - the most
current FIA evaluation in database</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalEndyr - the FIA evaluation
ending in evalEndyr</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalType - the FIA evaluation type ('ALL',
'AREAVOL', 'GRM', 'P2VEG', 'DWM', 'INV', 'REGEN', 'CRWN')</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> measCur -
the most current measurement of each plot in database</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> measEndyr -
the most current measuremtn of each plot in database in or prior to
measEndyr</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Endyr.filter - a filter for bnd that specifies the
boundary where measEndyr should be applied</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Value</h3>

<table>
<tr><td><code>xypltx</code></td>
<td>
<p> sf object. Input xy data clipped to boundary. </p>
</td></tr>
<tr><td><code>bndx</code></td>
<td>
<p> sf object. Input bnd. </p>
</td></tr> <tr><td><code>tabs</code></td>
<td>
<p> list object. List of input
layers clipped to boundary (pltx,condx,etc.). </p>
</td></tr> <tr><td><code>xy.uniqueid</code></td>
<td>
<p> String.
Name of unique identifier of xy. </p>
</td></tr> <tr><td><code>puniqueid</code></td>
<td>
<p> String. Name of unique
identifier of plot in plt. </p>
</td></tr> <tr><td><code>pjoinid</code></td>
<td>
<p> String. Name of unique
identifier of plot in plt. </p>
</td></tr>
</table>
<p>If savedata=TRUE, outdat data frame is saved to outfolder.
</p>


<h3>Note</h3>

<p>If savebnd=TRUE:<br /> If out_fmt=c('csv','shp'), the st_write (sf) function
is called. The ArcGIS driver truncates variable names to 10 characters or
less. Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>If datsource=&quot;datmart&quot;, data are imported from FIA DataMart.  The plot
coordinates have been altered for privacy (See
https://www.fia.fs.fed.us/tools-data/spatial/Policy/index.php for details).
The zip files are extracted on-the-fly from the online website. Web server
connections will affect download speeds.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get polygon vector layer from FIESTA external data
WYbhfn &lt;- system.file("extdata",
                      "sp_data/WYbighorn_adminbnd.shp",
                      package = "FIESTA")

# Extract data from FIA datamart for measurement years 2013 thru 2015
dat &lt;- spGetPlots(bnd = WYbhfn,
                  datsource = "datamart",
                  eval = "custom",
                  eval_opts = list(measyrs = 2013:2015))
names(dat)
tabs &lt;- dat$tabs
names(tabs)
head(tabs$plt)

table(tabs$plt$MEASYEAR)

# Extract data from FIA datamart for most current evaluation
datCur &lt;- spGetPlots(bnd = WYbhfn,
                     datsource = "datamart",
                       eval = "FIA",
                     eval_opts = list(Cur = TRUE))
names(datCur)
tabsCur &lt;- datCur$tabs
names(tabsCur)
head(tabsCur$plt)

table(tabsCur$plt$MEASYEAR)

## End(Not run) 
</code></pre>

<hr>
<h2 id='spGetSAdoms'>Spatial wrapper - Generate a set of model domain units for Small Area Estimation
(SAE) strategies.</h2><span id='topic+spGetSAdoms'></span>

<h3>Description</h3>

<p>Spatial process to generate a set of model domains (i.e., helper polygons)
for Small Area Estimation (SAE) strategies. If helper_autoselect=TRUE, an
automated process is used to select helper polygons within a large area
overlapping the small area. The helper polygons are unioned with the small
area polygons, resulting in a set of model domains that can be used for SAE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetSAdoms(
  smallbnd,
  smallbnd_dsn = NULL,
  smallbnd.unique = NULL,
  smallbnd.domain = NULL,
  smallbnd.filter = NULL,
  smallbnd.stfilter = NULL,
  helperbnd = NULL,
  helperbnd_dsn = NULL,
  helperbnd.unique = NULL,
  helperbnd.filter = NULL,
  largebnd = NULL,
  largebnd_dsn = NULL,
  largebnd.unique = NULL,
  largebnd.filter = NULL,
  maxbnd = NULL,
  maxbnd_dsn = NULL,
  maxbnd.unique = NULL,
  maxbnd.filter = NULL,
  helper_autoselect = TRUE,
  nbrdom.min = NULL,
  maxbnd.threshold = 10,
  largebnd.threshold = 5,
  multiSAdoms = FALSE,
  bayes = FALSE,
  showsteps = TRUE,
  savedata = FALSE,
  savesteps = FALSE,
  saveobj = FALSE,
  objnm = "SAdomdat",
  maxbnd.addtext = TRUE,
  largebnd.addtext = FALSE,
  savedata_opts = NULL,
  addstate = FALSE,
  dissolve = FALSE,
  byeach = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetSAdoms_+3A_smallbnd">smallbnd</code></td>
<td>
<p>sf R object or String. Small area of interest boundary.  Can
be a spatial polygon object, full pathname to a shapefile, or name of a
layer within a database.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_smallbnd_dsn">smallbnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of smallbnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if smallbnd is an R
object.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_smallbnd.unique">smallbnd.unique</code></td>
<td>
<p>String. The attribute in smallbnd that defines unique
domain identifier in smallbnd that defines the unique small area(s). If
NULL, an attribute is appended to smallbnd attribute table and used as
smallbnd.unique, defining one polygon (SMALLAREA=&quot;SMALLAREA&quot;).</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_smallbnd.domain">smallbnd.domain</code></td>
<td>
<p>String. A different attribute to use as for grouped
modeling domains (optional). If NULL, smallbnd.domain=smallbnd.unique.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_smallbnd.filter">smallbnd.filter</code></td>
<td>
<p>String. A filter for smallbnd. Must be R syntax.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_smallbnd.stfilter">smallbnd.stfilter</code></td>
<td>
<p>String. A spatial filter for smallbnd to include
only smallbnd polygons that intersect (or overlap &gt;= 30
boundary. The filter is based on the stunitco internal R object, with
attributes: STATECD, STATENM, UNITCD, UNITNM, COUNTYCD, COUNTYNM. The filter
should include one of these attributes and must be R syntax.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_helperbnd">helperbnd</code></td>
<td>
<p>sf R object or String. Name of polygon spatial layer
delineating helper polygons for small area models. Can be a spatial polygon
object, full pathname to a shapefile, or name of a layer within a database.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_helperbnd_dsn">helperbnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or
shapefile pathname) of helperbnd. The dsn varies by driver. See gdal OGR
vector formats (https://www.gdal.org/ogr_formats.html). Optional if
helperbnd is an R object.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_helperbnd.unique">helperbnd.unique</code></td>
<td>
<p>String. The attribute in helper polygon layer that
defines unique helper polygons.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_helperbnd.filter">helperbnd.filter</code></td>
<td>
<p>String. A filter for helperbnd. Must be R syntax.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd">largebnd</code></td>
<td>
<p>sf R object or String. Name of large area polygon spatial
layer, defining the model data extent for building small are models.  Can be
a spatial polygon object, full pathname to a shapefile, or name of a layer
within a database.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd_dsn">largebnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of largebnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if largebnd is an R
object.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd.unique">largebnd.unique</code></td>
<td>
<p>String. The attribute in largebnd polygon layer that
defines unique large area polygon(s).</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd.filter">largebnd.filter</code></td>
<td>
<p>String. A filter for largebnd. Must be R syntax.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd">maxbnd</code></td>
<td>
<p>sf R object or String. Name of polygon spatial layer, defining
the maximum model data restraint for adding more helper polygons for
building small are models. Can be a spatial polygon object, full pathname to
a shapefile, or name of a layer within a database.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd_dsn">maxbnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of maxbnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if maxbnd is an R object.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd.unique">maxbnd.unique</code></td>
<td>
<p>String. The attribute in maxbnd polygon layer that
defines unique max restraint area(s).</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd.filter">maxbnd.filter</code></td>
<td>
<p>String. A filter for maxbnd. Must be R syntax.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_helper_autoselect">helper_autoselect</code></td>
<td>
<p>Logical. If TRUE, the helper boundaries are
automatically selected based on intersection with maxbnd and/or largebnd and
number of helperbnds defined by nbrdom.min.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_nbrdom.min">nbrdom.min</code></td>
<td>
<p>Integer. Set number for minimum domains for modeling. If
NULL, all domains within largebnd are selected.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd.threshold">maxbnd.threshold</code></td>
<td>
<p>Integer. Percent for including additional maxbnds
for selecting helperbnds. If multiSAdoms=FALSE, the maxbnd with greatest
percentage over the maxbnd.threshold is selected.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd.threshold">largebnd.threshold</code></td>
<td>
<p>Integer. Percent for including additional
largebnds for selecting helperbnds.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_multisadoms">multiSAdoms</code></td>
<td>
<p>Logical. If TRUE, and the percent intersect of smallbnd
with maxbnd is greater than maxbnd.threshold, more than 1 SAdoms will be
output in list.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_bayes">bayes</code></td>
<td>
<p>Logical. If TRUE, does not union smallbnd with largebnd.
If multiSAdoms = TRUE, returns intersecting maxbnd where larger than 
maxbnd threshold.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_showsteps">showsteps</code></td>
<td>
<p>Logical. If TRUE, intermediate steps of selection process
are displayed.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, save SAdoms spatial layer to outfolder.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_savesteps">savesteps</code></td>
<td>
<p>Logical. If TRUE, save steps spatial intermediate layers
and JPG images. All spatial layers are output as *.shp format in a separate
folder (SAdoms_steps).</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_saveobj">saveobj</code></td>
<td>
<p>Logical. If TRUE, save SAdomdat object to outfolder.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_objnm">objnm</code></td>
<td>
<p>String. Name of *.rds object.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_maxbnd.addtext">maxbnd.addtext</code></td>
<td>
<p>Logical. If TRUE, adds text to intermediate step plots
for maxbnd displays.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_largebnd.addtext">largebnd.addtext</code></td>
<td>
<p>Logical. If TRUE, adds text to intermediate step
plots for largebnd displays.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_addstate">addstate</code></td>
<td>
<p>Logical. If TRUE, appends state attribute to SAdoms.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_dissolve">dissolve</code></td>
<td>
<p>Logical. If TRUE, aggregates polygons to smallbnd.domain or
smallbnd.unique.</p>
</td></tr>
<tr><td><code id="spGetSAdoms_+3A_byeach">byeach</code></td>
<td>
<p>Logical. If TRUE, creates an SAdom for each smallbnd polygon.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><b>optional boundaries</b>
</p>
<p>The helperbnd, largebnd, and maxbnd are optional. If helperbnd=NULL, the
smallbnd polygons are used for model domain units. If largebnd=NULL, the
maxbnd is used to define the large area. If maxbnd=NULL, the largebnd is
used to restrain the model extent. If both, largebnd=NULL and maxbnd=NULL,
the extent of the smallbnd or helperbnd is used for defining and restraining
the model extent.
</p>
<p><b>nbrdom.min</b>
</p>
<p>The number of helper polygons selected are defined by nbrdom.min parameter.
If nbrdom.min=NULL, all helper polygons within the large area extent are
selected.
</p>
<p><b>multiSAdoms</b>
</p>
<p>Use multiSAdoms parameter when small area of interest has multiple polygon
features and the small area polygons overlap (within maxbnd.threshold) more
than one maxbnd polygon. If multiSAdoms=TRUE, more than one set of model
domain units are generated; one for each maxbnd where overlap is within
maxbnd.threshold. If multiSAdoms=FALSE, only one set of model domain units
are generated, using the maxbnd with the greatest overlap.
</p>
<p><b>AOI attribute</b>
</p>
<p>A variable named 'AOI' is appended to the SAdoms attribute table to
distinguish between the small area of interest polygons and the helper
domain units.
</p>


<h3>Value</h3>

<table>
<tr><td><code>SAdomslst</code></td>
<td>
<p> List object. Set(s) of model domain units. If
multiSAdoms=TRUE, the list may have more than one set of model domain units.
</p>
</td></tr> <tr><td><code>smallbndlst</code></td>
<td>
<p> List object. smallbnd(s). If multiSAdoms=TRUE, the
list may have more than one set of smallbnd. </p>
</td></tr>
</table>
<p>If exportsp=TRUE, the SAdoms spatial object(s) is exported to outfolder,
with format specified by out_fmt.
</p>


<h3>Note</h3>

<p>If exportsp=TRUE and out_fmt=&quot;shp&quot;:<br /> The st_write (sf) function is
called. The ArcGIS driver truncates variable names to 10 characters or less.
Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>The spTransform (sf) method is used for on-the-fly map projection
conversion and datum transformation using PROJ.4 arguments. Datum
transformation only occurs if the +datum tag is present in the both the from
and to PROJ.4 strings. The +towgs84 tag is used when no datum transformation
is needed. PROJ.4 transformations assume NAD83 and WGS84 are identical
unless other transformation parameters are specified.  Be aware, providing
inaccurate or incomplete CRS information may lead to erroneous data shifts
when reprojecting. See spTransform help documentation for more details.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>

<hr>
<h2 id='spGetStates'>Spatial wrapper - Extracts states that intersect a boundary.</h2><span id='topic+spGetStates'></span>

<h3>Description</h3>

<p>Wrapper to get state names that intersect a given boundary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetStates(
  bnd_layer,
  bnd_dsn = NULL,
  bnd.filter = NULL,
  stbnd.att = "COUNTYFIPS",
  RS = NULL,
  states = NULL,
  overlap = 1,
  clipbnd = FALSE,
  showsteps = FALSE,
  savebnd = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetStates_+3A_bnd_layer">bnd_layer</code></td>
<td>
<p>sf R object, Area of Interest (AOI) boundary. Can be a spatial 
sf object, full pathname to a shapefile, or name of a layer within a database.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_bnd_dsn">bnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., SQLite database or shapefile
pathname) of bnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_bnd.filter">bnd.filter</code></td>
<td>
<p>String. Filter to subset bnd spatial layer.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_stbnd.att">stbnd.att</code></td>
<td>
<p>String. Attribute in stunitco to output ('STATECD',
'STATENM', 'COUNTYFIPS').</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_rs">RS</code></td>
<td>
<p>String. Name of FIA research station to restrict states to
('RMRS','SRS','NCRS','NERS','PNWRS'). If NULL, all research stations are
included.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_states">states</code></td>
<td>
<p>String. States to subset boundary to.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_overlap">overlap</code></td>
<td>
<p>Number. Percent overlap to include.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_clipbnd">clipbnd</code></td>
<td>
<p>Logical. If TRUE, clips boundary to state/RS restrictions.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_showsteps">showsteps</code></td>
<td>
<p>Logical. If TRUE, display intersecting boundaries.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_savebnd">savebnd</code></td>
<td>
<p>Logical. If TRUE, save boundary to outfolder.</p>
</td></tr>
<tr><td><code id="spGetStates_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savebnd = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing states and state names that the boundary crosses,
and boundary and attribute information for the intersecting boundary.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get polygon vector layer from FIESTA external data
WYbhdistfn &lt;- system.file("extdata", 
                          "sp_data/WYbighorn_districtbnd.shp",
                          package = "FIESTA")

# Get intersecting statenames
spGetStates(WYbhdistfn)$statenames

# Get intersecting COUNTYFIP codes
spGetStates(WYbhdistfn,
            stbnd.att = "COUNTYFIPS")$states
</code></pre>

<hr>
<h2 id='spGetStrata'>Spatial wrapper - Extracts point attribute values and pixel counts for
strata and estimation unit spatial layers.</h2><span id='topic+spGetStrata'></span>

<h3>Description</h3>

<p>Wrapper to extract attribute and area from a polygon or raster estimation
unit layer and a polygon or raster layer with strata pixel categories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetStrata(
  xyplt,
  xyplt_dsn = NULL,
  unit_layer,
  unit_dsn = NULL,
  uniqueid = "PLT_CN",
  unitvar = NULL,
  unitvar2 = NULL,
  unit.filter = NULL,
  strattype = "RASTER",
  strat_layer = NULL,
  strat_dsn = NULL,
  strvar = NULL,
  strat_lut = NULL,
  areaunits = "acres",
  rast.NODATA = NULL,
  keepNA = FALSE,
  ncores = 1,
  showext = FALSE,
  returnxy = FALSE,
  savedata = FALSE,
  exportsp = FALSE,
  exportNA = FALSE,
  spMakeSpatial_opts = NULL,
  savedata_opts = NULL,
  vars2keep = NULL,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetStrata_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame, sf object, full pathname to *.csv or *shp, or layer
name in a geodatabase. Includes XY coordinates and unique identifier.  If
non-spatial, include options in spMakeSpatial_opts parameter.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database where xyplt is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_unit_layer">unit_layer</code></td>
<td>
<p>sf R object or String. Name of estimation unit spatial
layer. Can be a spatial polygon object, full pathname to a shapefile, name
of a polygon layer within a database, or a full pathname to raster file.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_unit_dsn">unit_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of unit_layer. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if unit_layer is
sf object.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_uniqueid">uniqueid</code></td>
<td>
<p>String.* Unique identifier of xyplt records.
Note: raster unit layers are converted to polygon.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_unitvar">unitvar</code></td>
<td>
<p>String. If unittype=&quot;POLY&quot;, name of attribute in unit_layer
defining estimation units. If NULL, the unit_layer represents one estimation
unit.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_unitvar2">unitvar2</code></td>
<td>
<p>String. If unittype=&quot;POLY&quot;, name of attribute in unit_layer
defining a second, hierarchical larger, estimation unit (e.g., Statecd).</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_unit.filter">unit.filter</code></td>
<td>
<p>String. Filter to subset unit_layer spatial layer.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_strattype">strattype</code></td>
<td>
<p>String. Spatial layer type of strat_layer (&quot;POLY&quot;,
&quot;RASTER&quot;).  Note: polygon strata layers are converted to raster.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_strat_layer">strat_layer</code></td>
<td>
<p>sf R object or full pathname of spatial stratification
layer.  Can be a spatial polygon object, full pathname to a shapefile, name
of a polygon layer within a database, or a full pathname to raster file.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_strat_dsn">strat_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of strat_layer. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if unit_layer is
sf object.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_strvar">strvar</code></td>
<td>
<p>String. If strattype=&quot;POLY&quot;, name of strata attribute in
strat_layer.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_strat_lut">strat_lut</code></td>
<td>
<p>Data frame. A look-up table of codes to aggregate. The
format of table includes 2 columns, one column same name as strvar.  If
strattype=&quot;RASTER&quot;, strvar=&quot;value&quot;.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_areaunits">areaunits</code></td>
<td>
<p>String. Output area units (&quot;acres&quot;, &quot;hectares&quot;,
&quot;sqmeters&quot;).</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_rast.nodata">rast.NODATA</code></td>
<td>
<p>Numeric. NODATA value if stratlayer is raster (See
notes). This values will be converted to NA and removed from output.  if
keepNA=TRUE, NA values will not be in included in stratalut but will remain
in pltassgn table.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_keepna">keepNA</code></td>
<td>
<p>Logical. If TRUE, returns data frame of NA values.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_ncores">ncores</code></td>
<td>
<p>Integer. Number of cores to use for extracting values.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_returnxy">returnxy</code></td>
<td>
<p>Logical. If TRUE, returns xy data as sf object (spxyplt).</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the input data with extracted values are
saved to outfolder.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If savedata=TRUE and returnxy=TRUE, If TRUE, the
extracted strata point data are exported to outfolder.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_exportna">exportNA</code></td>
<td>
<p>Logical. If TRUE and keepNA=TRUE, NA values are exported to
outfolder as a point shapefile.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_spmakespatial_opts">spMakeSpatial_opts</code></td>
<td>
<p>List. See help(spMakeSpatial_options()) for a list
of options. Use to convert X/Y values to simple feature (sf) coordinates.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_vars2keep">vars2keep</code></td>
<td>
<p>String vector. Attributes in SAdoms, other than domvar to
include in dunitlut output and extract to pltassgn points.</p>
</td></tr>
<tr><td><code id="spGetStrata_+3A_gui">gui</code></td>
<td>
<p>Logical. If gui, user is prompted for parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>
<p>If spatial layers have different projections, the polygon spatial layer is
transformed to the projection of raster (See note about on-the-fly
projection conversion). If both layers are long/lat coordinate system, they
are transformed to default coordinate system (Conus Albers, NAD83).
</p>


<h3>Value</h3>

<table>
<tr><td><code>pltassgn</code></td>
<td>
<p> Data frame. Input xyplt data with extracted
estimation unit and strata values appended. </p>
</td></tr> <tr><td><code>unitarea</code></td>
<td>
<p> Data frame.
Area by estimation unit. </p>
</td></tr> <tr><td><code>unitvar</code></td>
<td>
<p> Data frame. Variable name for
estimation unit in unitarea. </p>
</td></tr> <tr><td><code>acrevar</code></td>
<td>
<p> Data frame. Variable name for
area in unitarea. </p>
</td></tr> <tr><td><code>stratalut</code></td>
<td>
<p> Data frame. Strata proportions
(weights) by estimation unit and strata. </p>
</td></tr> <tr><td><code>strvar</code></td>
<td>
<p> Data frame.
Variable name for strata values in stratalut. </p>
</td></tr> <tr><td><code>NAlst</code></td>
<td>
<p> sf List. If
keepNA=TRUE, and NA values exist after data extraction, the spatial NA
points are returned. </p>
</td></tr> <tr><td><code>pltassgnid</code></td>
<td>
<p> String. Unique identifier of plot.
</p>
</td></tr> <tr><td><code>spxy</code></td>
<td>
<p> Simple feature. If returnxy=TRUE, Spatial coordinates. </p>
</td></tr>
<tr><td><code>xy.uniqueid</code></td>
<td>
<p> String. If returnxy=TRUE, unique identifier of spxy. </p>
</td></tr>
</table>
<p>If savedata=TRUE, pltassgn and unitarea are saved to outfolder.<br /> If
exportsp=TRUE, the spatial sf points object is exported to outfolder.<br />.
If exportNA=TRUE and NA values exist after data extraction, the spatial NA
points are exported to outfolder.
</p>


<h3>Note</h3>

<p>rast.NODATA<br /> NODATA values are raster pixel values that have no data of
interest, including pixels within the extent of the layer, but outside the
area of interest. Sometimes these pixels have been defined previously. The
defined NODATA pixels are imported to R as NULL values. When not previously
defined, the pixels outside the area of interest will be the minimum or
maximum value depending on the data type (e.g., 16-bit signed: min=-32,768;
max=32,768) or byte size (1 byte: min=0; max=255).  These NODATA values will
be added to the zonal statistic calculations if not specified in
rast.NODATA.
</p>
<p>If exportsp=TRUE:<br /> If out_fmt=&quot;shp&quot;, the st_write (sf) function is
called. The ArcGIS driver truncates variable names to 10 characters or less.
Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>unitarea<br /> Area by estimation unit is calculated and returned as object
named unitarea.  Area is based on the projection of unit_layer. If no
unit_layer input, than area is calculated from pixel counts.
</p>
<p>polygon to raster<br /> If strattype=&quot;POLY&quot;, a raster template is created based
on the masked extent of strat_layer, with strat_layer projected coordinate
system and 30 meter pixel size.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a `SpatialPoints` object from `WYplt`
WYspplt &lt;- spMakeSpatialPoints(xyplt = WYplt, 
                               xy.uniqueid = "CN", 
                               xvar = "LON_PUBLIC", 
                               yvar = "LAT_PUBLIC", 
                               xy.crs = 4269)
                               
# Set up stratification from object in `FIESTA`
fornffn &lt;- system.file("extdata",
                       "sp_data/WYbighorn_forest_nonforest_250m.tif",
                       package = "FIESTA")
                       
# Set up data from FIESTA
WYbhfn &lt;- system.file("extdata",
                      "sp_data/WYbighorn_adminbnd.shp",
                      package = "FIESTA")
                               
# Run `spGetStrata`
spGetStrata(WYspplt, 
            uniqueid = "CN", 
            unit_layer = WYbhfn, 
            strattype = "RASTER", 
            strat_layer = fornffn) 
</code></pre>

<hr>
<h2 id='spGetXY'>Spatial wrapper - Extracts XY coordinates within a given boundary.</h2><span id='topic+spGetXY'></span>

<h3>Description</h3>

<p>Wrapper to get FIA plots within the boundary population (area of interest) -
Intersect with state boundary - Get FIA plots for intersected states,
including tree, and spatial - Clip spatial coordinates and other tables to
boundary (spClipPoint)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spGetXY(
  bnd,
  bnd_dsn = NULL,
  bnd.filter = NULL,
  states = NULL,
  RS = NULL,
  xy_datsource,
  xy_dsn = NULL,
  xy = "PLOT",
  xy_opts = xy_options(),
  datsource = NULL,
  data_dsn = NULL,
  dbTabs = dbTables(),
  eval = "FIA",
  eval_opts = NULL,
  pjoinid = "CN",
  invtype = "ANNUAL",
  intensity1 = FALSE,
  pvars2keep = NULL,
  bndvars2keep = NULL,
  clipxy = TRUE,
  showsteps = FALSE,
  returnxy = TRUE,
  savedata = FALSE,
  exportsp = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spGetXY_+3A_bnd">bnd</code></td>
<td>
<p>sf R object, Area of Interest (AOI) boundary. Can be a spatial sf
object, full pathname to a shapefile, or name of a layer within a database.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_bnd_dsn">bnd_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., SQLite database or shapefile
pathname) of bnd. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if bnd is an R object.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_bnd.filter">bnd.filter</code></td>
<td>
<p>String. Filter to subset bnd spatial layer.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_states">states</code></td>
<td>
<p>String. The name of state(s) for tables (e.g., &quot;Vermont&quot;,
&quot;Utah&quot;).</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_rs">RS</code></td>
<td>
<p>String. Name of FIA research station to restrict states to
('RMRS','SRS','NCRS','NERS','PNWRS'). If NULL, all research stations are
included.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_xy_datsource">xy_datsource</code></td>
<td>
<p>Source of XY data ('datamart', 'sqlite', 'obj', 'csv').</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_xy_dsn">xy_dsn</code></td>
<td>
<p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.db) where XY data reside.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_xy">xy</code></td>
<td>
<p>sf R object or String. If xy_dsn = 'datamart', name of xy table 
in FIA DataMart. If xy_dsn = 'sqlite', name of xy layer in database. If 
datsource = 'csv', full pathname of xy CSV file(s). If datsource = 'obj', 
name of xy R object. If datsource = 'shp', full pathname of shapefile.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_xy_opts">xy_opts</code></td>
<td>
<p>List of xy data options for xy (e.g., xy_opts = list(xvar='LON', 
yvar='LAT'). See xy_options() for more options and defaults.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_datsource">datsource</code></td>
<td>
<p>String. Source of FIA data for defining FIA evaluations or 
appending variables ('datamart', 'sqlite', 'obj', 'csv'). If datsource = NULL, 
datsource = xy_datsource. If datsource = 'datamart', data are downloaded
extracted from FIA DataMart (http://apps.fs.usda.gov/fia/datamart/datamart.html). 
If datsource='sqlite', specify database name(s) in data_dsn and table name(s) 
in dbTabs() argument. If datsource = ('obj','csv'), specify *.csv file name in 
dbTabs argument.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_data_dsn">data_dsn</code></td>
<td>
<p>String. Name of database with plot_layer and/or ppsa_layer.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_dbtabs">dbTabs</code></td>
<td>
<p>String or R Object. If data_dsn = 'datamart', name of table(s) 
in FIA DataMart. If data_dsn = 'sqlite', name of layer(s) in database. If 
datsource = 'csv', name of CSV file(s). If datsource = 'obj', name of R object.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_eval">eval</code></td>
<td>
<p>String. Type of evaluation time frame for data extraction 
('FIA', 'custom'). See eval_opts for more further options.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_eval_opts">eval_opts</code></td>
<td>
<p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_pjoinid">pjoinid</code></td>
<td>
<p>String. Variable in plt to join to XY data. Not necessary to
be unique. If using most current XY coordinates, use identifier for a plot
(e.g., PLOT_ID).</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_invtype">invtype</code></td>
<td>
<p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_intensity1">intensity1</code></td>
<td>
<p>Logical. If TRUE, includes only XY coordinates where 
INTENSITY = 1 (FIA base grid).</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_pvars2keep">pvars2keep</code></td>
<td>
<p>String vector. One or more variables in plot table to 
append to output.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_bndvars2keep">bndvars2keep</code></td>
<td>
<p>String vector. One or more variables in bnd to 
append to output.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_clipxy">clipxy</code></td>
<td>
<p>Logical. If TRUE, clips xy data to bnd.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_showsteps">showsteps</code></td>
<td>
<p>Logical. If TRUE, display data in device window.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_returnxy">returnxy</code></td>
<td>
<p>Logical. If TRUE, returns XY coordinates.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, saves data to outfolder. Note:
includes XY data if returnxy = TRUE.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If savedata = TRUE and returnxy = TRUE, 
if TRUE, exports XY data as spatial data.</p>
</td></tr>
<tr><td><code id="spGetXY_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><b>datsource</b>
</p>
<p>Plots are extracted from 3 different data sources:<br /> 1) CSV - data have
previously been extracted from the FIA database and stored as CSV files.<br />
2) datamart - data are extracted from FIA's publically-available
datamart.<br /> 3) sqlite - data have previously been extracted from the FIA
database and stored within a SQLite database.<br />
</p>
<p><b>Selection parameters</b>
</p>
<p>FIA plots are selected based on the following parameters:<br /> </p>

<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> evalid - the FIA evaluation identifier</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalCur - the most
current FIA evaluation in database</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalEndyr - the FIA evaluation
ending in evalEndyr</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> evalType - the FIA evaluation type ('ALL',
'AREAVOL', 'GRM', 'P2VEG', 'DWM', 'INV', 'REGEN', 'CRWN')</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> measCur -
the most current measurement of each plot in database</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> measEndyr -
the most current measuremtn of each plot in database in or prior to
measEndyr</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Endyr.filter - a filter for bnd that specifies the
boundary where measEndyr should be applied</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Value</h3>

<table>
<tr><td><code>spxy</code></td>
<td>
<p> sf. If returnxy=TRUE, spatial xy point data. </p>
</td></tr>
<tr><td><code>pltids</code></td>
<td>
<p> data frame. A table of pltids that are within bnd. </p>
</td></tr>
<tr><td><code>spxy</code></td>
<td>
<p> sf data frame. If returnxy, a simple feature with pltids within bnd. </p>
</td></tr>
<tr><td><code>bndx</code></td>
<td>
<p> sf object. Input bnd. </p>
</td></tr> 
<tr><td><code>xy.uniqueid</code></td>
<td>
<p> String. Unique identifier of plots in xy. </p>
</td></tr> 
<tr><td><code>states</code></td>
<td>
<p> String. Vector of states that intersect bnd. </p>
</td></tr> 
<tr><td><code>countyfips</code></td>
<td>
<p> String. Vector of countyfips values that intersect bnd. </p>
</td></tr> 
<tr><td><code>stbnd.att</code></td>
<td>
<p> String. Name of state attribute used to select plots. </p>
</td></tr>
</table>
<p>If savedata=TRUE and returnxy=TRUE, the plt data frame, including XY 
coordinates is saved to outfolder (xyplt).<br /> 
If savedata=TRUE and returnxy=FALSE, the plt data frame, without XY 
coordinates is saved to outfolder (pltids).<br />
If savedata=TRUE and returnxy=TRUE and exportsp=TRUE, the spxy sf object is 
exported as shapefile to outfolder.<br />
</p>


<h3>Note</h3>

<p>If savebnd=TRUE:<br /> If out_fmt=c('csv','shp'), the st_write (sf) function
is called. The ArcGIS driver truncates variable names to 10 characters or
less. Variable names are changed before export using an internal function
(trunc10shp). If Spatial object has more than 1 record, it will be returned
but not exported.
</p>
<p>If datsource=&quot;datmart&quot;, (default), data are imported from FIA DataMart.  The
plot coordinates have been altered for privacy (See
https://www.fia.fs.fed.us/tools-data/spatial/Policy/index.php for details).
The zip files are extracted on-the-fly from the online website. Web server
connections will affect download speeds.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Set up data from FIESTA
WYbhfn &lt;- system.file("extdata",
                      "sp_data/WYbighorn_adminbnd.shp",
                      package = "FIESTA")
# Use spGetXY
WYbhxy &lt;- spGetXY(bnd = WYbhfn,
                  xy_datsource = "datamart",
                  eval = "custom",
                  eval_opts = list(Cur = TRUE),
                  returnxy = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='spImportSpatial'>Spatial - Imports a spatial vector layer to an S4 Spatial object.</h2><span id='topic+spImportSpatial'></span>

<h3>Description</h3>

<p>Imports a spatial vector layer to an S4 Spatial object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spImportSpatial(
  layer = NULL,
  dsn = NULL,
  sql = NULL,
  polyfix = FALSE,
  gui = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spImportSpatial_+3A_layer">layer</code></td>
<td>
<p>Data frame object or String. Name of spatial layer. Can be
layer with dsn, full pathname, including extension, or file name (with
extension) in xy_dsn folder.</p>
</td></tr>
<tr><td><code id="spImportSpatial_+3A_dsn">dsn</code></td>
<td>
<p>String. Name of database where layer is. The dsn varies by
driver. See gdal OGR vector formats (https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spImportSpatial_+3A_sql">sql</code></td>
<td>
<p>String. A sql syntax query to subset spatial layer.</p>
</td></tr>
<tr><td><code id="spImportSpatial_+3A_polyfix">polyfix</code></td>
<td>
<p>Logical. If polyfix=TRUE, uses buffer with 0 width to clean
up polygons.</p>
</td></tr>
<tr><td><code id="spImportSpatial_+3A_gui">gui</code></td>
<td>
<p>Logical. If TRUE, search for layer within dsn.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A spatial object
</p>


<h3>Note</h3>

<p>Wrapper for sf package... st_read function.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Import data from `FIESTA`, save as object in environment
WYbh &lt;- spImportSpatial(system.file("extdata",
                                    "sp_data/WYbighorn_adminbnd.shp",
                                    package = "FIESTA"))
</code></pre>

<hr>
<h2 id='spMakeSpatialPoints'>Spatial - Generates an S4 SpatialPoints object from X/Y coordinates.</h2><span id='topic+spMakeSpatialPoints'></span>

<h3>Description</h3>

<p>Generates an S4 SpatialPoints object with defined projection from a data
table or matrix including X and Y coordinates, with option to export as an
ArcGIS shapefile (*.shp).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spMakeSpatialPoints(
  xyplt,
  xyplt_dsn = NULL,
  xy.uniqueid = NULL,
  xvar = NULL,
  yvar = NULL,
  xy.crs = 4269,
  addxy = FALSE,
  exportsp = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spMakeSpatialPoints_+3A_xyplt">xyplt</code></td>
<td>
<p>Data frame object or String. Name of layer with xy coordinates
and unique identifier. Can be layer with xy_dsn, full pathname, including
extension, or file name (with extension) in xy_dsn folder.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_xyplt_dsn">xyplt_dsn</code></td>
<td>
<p>String. Name of database or folder were xyplt is. The dsn
varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_xy.uniqueid">xy.uniqueid</code></td>
<td>
<p>String. Unique identifier of xyplt rows.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_xvar">xvar</code></td>
<td>
<p>String. Name of variable in xyplt defining x coordinate.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_yvar">yvar</code></td>
<td>
<p>String. Name of variable in xyplt defining y coordinate.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_xy.crs">xy.crs</code></td>
<td>
<p>PROJ.4 String or CRS object or Integer EPSG code defining
Coordinate Reference System. (e.g., EPSG:4269-Geodetic coordinate system for
North America, NAD83).</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_addxy">addxy</code></td>
<td>
<p>Logical. If TRUE, adds x and y variables to spatial sf object.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, exports spatial object.</p>
</td></tr>
<tr><td><code id="spMakeSpatialPoints_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when exportsp = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>spplt</code></td>
<td>
<p> sf obect with spatial points and defined CRS. </p>
</td></tr>
</table>
<p>If exportsp = TRUE, the sf object is written to specified output.
</p>


<h3>Note</h3>

<p>If exportsp=TRUE and a shp output format is specified:<br /> The ESRI
shapefile driver truncates variable names to 10 characters or less.
Variable names are changed before export using an internal function
(trunc10shp). Name changes are output to the outfolder,
'outshpnm'_newnames.csv.  The returned Spatial object will have original
names, before truncating.
</p>
<p>If Spatial object has more than 1 record, it cannot be exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate an `sf` points object with `spMakeSpatialPoints` for Wyoming plot
# data, stored in `FIESTA`
spMakeSpatialPoints(xyplt = WYplt, 
                    xy.uniqueid = "CN", 
                    xvar = "LON_PUBLIC", 
                    yvar = "LAT_PUBLIC", 
                    xy.crs = 4269)
</code></pre>

<hr>
<h2 id='spPoly2Rast'>Spatial - Converts SpatialPolygons layer to raster.</h2><span id='topic+spPoly2Rast'></span>

<h3>Description</h3>

<p>Converts SpatialPolygons layer to raster.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spPoly2Rast(
  polyv,
  polyv_dsn = NULL,
  polyv.att,
  polyv.lut = NULL,
  rastfn.template = NULL,
  validate = FALSE,
  NODATA = NULL,
  outfolder = NULL,
  outfn = "polyrast",
  outext = "img",
  outfn.pre = NULL,
  outfn.date = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spPoly2Rast_+3A_polyv">polyv</code></td>
<td>
<p>sf R object or String. Polygon data to convert to raster.  Can
be a spatial polygon object, full pathname to a shapefile, or name of a
layer within a database.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_polyv_dsn">polyv_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of layer to convert. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv is sf
object.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_polyv.att">polyv.att</code></td>
<td>
<p>String. Name of attribute in polyv to rasterize.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_polyv.lut">polyv.lut</code></td>
<td>
<p>Data frame. Lookup table of codes, if polyv.att is
character or want to group codes. The lookup table must be data.frame  
including polyv.att and another column with classes.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_rastfn.template">rastfn.template</code></td>
<td>
<p>String. Full path name of raster to use as template
for new raster.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_nodata">NODATA</code></td>
<td>
<p>Number. The NODATA value for background values. If NODATA is
NULL, and a NODATA value is defined on the rastfn.template raster, the 
default is the defined NODATA value, else it is defined based on its datatype 
(see DEFAULT_NODATA for default data values).</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_outfolder">outfolder</code></td>
<td>
<p>String. If exportshp=TRUE, name of output folder. If NULL,
the working directory is used.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_outfn">outfn</code></td>
<td>
<p>String. Name of output raster. If NULL, default is 'polyrast'.</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_outext">outext</code></td>
<td>
<p>String. Name of raster extension (fmt).</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_outfn.pre">outfn.pre</code></td>
<td>
<p>String. Add a prefix to output name (e.g., &quot;01&quot;).</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_outfn.date">outfn.date</code></td>
<td>
<p>Logical. If TRUE, add date to end of outfile (e.g.,
outfn_'date'.csv).</p>
</td></tr>
<tr><td><code id="spPoly2Rast_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE and exportshp=TRUE, overwrite files in
outfolder.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing raster and raster information derived from the
original polygon.
</p>


<h3>Note</h3>

<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>If exportshp=TRUE:<br /> The st_write (sf) function is called. The ArcGIS
driver truncates variable names to 10 characters or less. Variable names are
changed before export using an internal function (trunc10shp). If Spatial
object has more than 1 record, it will be returned but not exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get polygon vector layer from FIESTA external data
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp", 
                          package = "FIESTA")

# Turn polygon into raster
# Note: raster values must be numeric, therefore names were changed to
# numeric codes based on lookup table produced from the following code.                      
new_rast &lt;- spPoly2Rast(polyv = WYbhdistfn,
                        polyv.att = "DISTRICTNA",
                        outfolder = tempdir())

</code></pre>

<hr>
<h2 id='spReprojectRaster'>Spatial - Reprojects an Esri shapefile (*shp) or S4 Spatial object.</h2><span id='topic+spReprojectRaster'></span>

<h3>Description</h3>

<p>Reprojects an Esri shapefile (*.shp) or S4 Spatial object to a new
geographic or projected coordinate system, with option to save new object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spReprojectRaster(
  rastfn,
  bands = NULL,
  crs = NULL,
  rast.ref = NULL,
  crs.new = NULL,
  res.new = NULL,
  bbox.new = NULL,
  dtype.new = NULL,
  NODATA.new = NULL,
  resamp.method = "near",
  crs.default = "EPSG:5070",
  compress = NULL,
  BigTIFF = FALSE,
  outfolder = NULL,
  outfn = NULL,
  outext = NULL,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spReprojectRaster_+3A_rastfn">rastfn</code></td>
<td>
<p>String or Raster. File name(s) with extensions, or raster
object(s).  Note: raster objects must be written to file.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_bands">bands</code></td>
<td>
<p>Numeric vector. If rast is a multi-layer raster and only 1 or
some layers are desired, specify layer number(s) in a vector format. If
NULL, all layers are projected.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_crs">crs</code></td>
<td>
<p>Coordinate Reference System (CRS). The CRS of rastfn if not
defined.  EPSG:code, PROJ.4 declaration, or .prj file containing WKT. For
example, PROJ.4: &quot;+proj=moll +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84
+datum=WGS84 +units=m +no_defs&quot;.  If NULL, and the CRS of rastfn is not
defined, uses crs.default.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_rast.ref">rast.ref</code></td>
<td>
<p>String or Raster. File name(s) with extensions, or raster
object to use as reference raster.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_crs.new">crs.new</code></td>
<td>
<p>Coordinate Reference System. New CRS for rastfn.  EPSG:code,
PROJ.4 declaration, or .prj file containing WKT. For example, PROJ.4:
&quot;+proj=moll +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m
+no_defs&quot;.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_res.new">res.new</code></td>
<td>
<p>Integer vector. One or two values defining new resolution of
raster (in target georeferenced units) (e.g., 30 or c(30,30)).</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_bbox.new">bbox.new</code></td>
<td>
<p>&lt;xmin ymin xmax ymax&gt; Georeferenced extent or bounding box
of new raster.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_dtype.new">dtype.new</code></td>
<td>
<p>String. Force a data type of new raster. If NULL, the data
type will be same as rastfn (e.g., Byte, Int16, UInt16).</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_nodata.new">NODATA.new</code></td>
<td>
<p>Integer. Set nodata values for new raster. New files will
be initialized to this value and if possible the nodata value will be
recorded in the output file. Use a value of &quot;None&quot; to ensure that nodata is
not defined. If NULL, NODATA and rastfn has a set NODATA value, this value
will be used for new raster.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_resamp.method">resamp.method</code></td>
<td>
<p>Method for resampling ('near', 'bilinear', 'cubic',
'cubicspline', 'landzos', 'average', 'mode', 'min', 'max', 'med', 'q1',
'q3').</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_crs.default">crs.default</code></td>
<td>
<p>Coordinate Reference System. A default CRS if
crs.new=NULL.  The default is: EPSG:5070, Conus Albers, PRJ4='+proj=aea
+lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96, +x_0=0 +y_0=0&quot;, &quot;+ellps=GRS80
+towgs84=0,0,0,-0,-0,-0,0 +units=m +no_defs'.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_compress">compress</code></td>
<td>
<p>String. An optional compression type ('LZW', &quot;DEFLATE',
&quot;PACKBITS').</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_bigtiff">BigTIFF</code></td>
<td>
<p>Logical. If TRUE, compress option for big files (&gt; 4GB).</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_outfolder">outfolder</code></td>
<td>
<p>String. If exportsp=TRUE, name of output folder. If NULL,
the working directory is used.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_outfn">outfn</code></td>
<td>
<p>String. Name of output raster. If NULL, default is 'polyrast'.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_outext">outext</code></td>
<td>
<p>String. Name of raster extension (fmt). If NULL, uses
extension from outfn or rastfn.</p>
</td></tr>
<tr><td><code id="spReprojectRaster_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, overwrites raster file.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>rastfn.new</code></td>
<td>
<p> String. Full path name to reprojected raster. </p>
</td></tr>
</table>


<h3>Note</h3>

<p>Coordinate Reference Systems (CRS)<br /> An ellipse is an estimated model
describing the basic shape of the Earth and is the basis for all coordinate
systems. There are many ellipsoids designed for local (e.g., NAD27) or
global (e.g., WGS84, GRS80) use. The datum defines the reference position of
the coordinate axes associated with a specific ellipsoid. Specifying the
datum also defines the ellipsoid, whereas specifying the ellipsoid does not
provide information of the datum.
</p>
<p>WGS84 vs NAD83 WGS84 and NAD83 datums are often used interchangeably, and
use very similar ellipsoids (WGS84 and GRS80, respectively), but have
different reference points. Slight tectonic shifts through time have caused
increased divergence between the two, with NAD83 datum intended to track
movements more consistently.
</p>
<p>Common Datums and associated spheroid (ellipsoid):<br /> NAD27 - North American
Datum of 1927 (Clarke 1866 spheroid)<br /> NAD83 - North American Datum of 1983
(GRS 1980 spheroid)<br /> WGS84 - World Geodetic System of 1984 (WGS 1984
spheroid)<br />
</p>
<p>From R, use projInfo for list of different projections and datums.<br /> &gt;
projInfo(type=&quot;proj&quot;)<br /> &gt; projInfo(type=&quot;datum&quot;)<br />
</p>
<p>Common EPSG Geodetic codes in U.S.<br /> EPSG:4326 - Longitude/Latitude (WGS84)
- Common for global displays (used by Google Earth)<br /> EPSG:4269 -
Longitude/Latitude (NAD83) - Common by U.S. Federal Agencies<br />
</p>
<p>The sf::st_transform (GDAL) method is used for map projection conversion and
datum transformation using PROJ.4 arguments. Datum transformation only
occurs if the +datum tag is present in the both the from and to PROJ.4
strings. The +towgs84 tag is used when no datum transformation is needed.
PROJ.4 transformations assume NAD83 and WGS84 are identical unless other
transformation parameters are specified. Be aware, providing inaccurate or
incomplete CRS information may lead to erroneous data shifts when
reprojecting. See spTransform help documentation for more details.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino, Chris Toney
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get raster layers from FIESTA external data
demfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_dem_250m.img",
                     package = "FIESTA")

# Check original projection
sf::st_crs(terra::rast(demfn))$proj4string

# Reproject raster
reprojected &lt;- spReprojectRaster(rastfn = demfn,
                                 crs.new = "EPSG:32613",
                                 outfolder = tempdir())
                                 
# Check new projection
sf::st_crs(terra::rast(demfn))$proj4string

</code></pre>

<hr>
<h2 id='spReprojectVector'>Spatial - Reprojects an sf spatial object.</h2><span id='topic+spReprojectVector'></span>

<h3>Description</h3>

<p>Reprojects an sf spatial object to a new coordinate reference system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spReprojectVector(
  layer,
  dsn = NULL,
  crs.new,
  exportsp = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spReprojectVector_+3A_layer">layer</code></td>
<td>
<p>sf class R object or String. The spatial layer must have a
defined projection (test using sf::st_crs(layer)).</p>
</td></tr>
<tr><td><code id="spReprojectVector_+3A_dsn">dsn</code></td>
<td>
<p>String. Data source name (dsn; i.e., folder or database name) of
splayer. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if layer is an R object.</p>
</td></tr>
<tr><td><code id="spReprojectVector_+3A_crs.new">crs.new</code></td>
<td>
<p>EPSG Integer or PROJ.4 String. New EPSG Geodetic Parameter
Dataset definition or gdal PROJ.4 string identifying the new coordinate
system (e.g., &quot;+proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
+towgs84=0,0,0&quot;).</p>
</td></tr>
<tr><td><code id="spReprojectVector_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the spatial reprojected object is exported
to outfolder (see spExportSpatial for details).</p>
</td></tr>
<tr><td><code id="spReprojectVector_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options for saving data. If out_layer = NULL, default = 'layerprj'.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>layerprj</code></td>
<td>
<p> sf object. Reprojected spatial layer. </p>
</td></tr>
</table>
<p>If exportsp = TRUE, a spatial layer is written to outfolder (See note).
</p>


<h3>Note</h3>

<p>Coordinate Reference Systems (CRS)<br /> An ellipse is an estimated model
describing the basic shape of the Earth and is the basis for all coordinate
systems. There are many ellipsoids designed for local (e.g., NAD27) or
global (e.g., WGS84, GRS80) use. The datum defines the reference position of
the coordinate axes associated with a specific ellipsoid. Specifying the
datum also defines the ellipsoid, whereas specifying the ellipsoid does not
provide information of the datum.
</p>
<p>WGS84 vs NAD83 WGS84 and NAD83 datums are often used interchangeably, and
use very similar ellipsoids (WGS84 and GRS80, respectively), but have
different reference points. Slight tectonic shifts through time have caused
increased divergence between the two, with NAD83 datum intended to track
movements more consistently.
</p>
<p>Common Datums and associated spheroid (ellipsoid):<br /> NAD27 - North American
Datum of 1927 (Clarke 1866 spheroid)<br /> NAD83 - North American Datum of 1983
(GRS 1980 spheroid)<br /> WGS84 - World Geodetic System of 1984 (WGS 1984
spheroid)<br />
</p>
<p>From R, use projInfo for list of different projections and datums.<br /> &gt;
projInfo(type=&quot;proj&quot;)<br /> &gt; projInfo(type=&quot;datum&quot;)<br />
</p>
<p>Common EPSG Geodetic codes in U.S.<br /> EPSG:4326 - Longitude/Latitude (WGS84)
- Common for global displays (used by Google Earth)<br /> EPSG:4269 -
Longitude/Latitude (NAD83) - Common by U.S. Federal Agencies<br />
</p>
<p>The sf::st_transform (GDAL) method is used for map projection conversion and
datum transformation using PROJ.4 arguments. Datum transformation only
occurs if the +datum tag is present in the both the from and to PROJ.4
strings. The +towgs84 tag is used when no datum transformation is needed.
PROJ.4 transformations assume NAD83 and WGS84 are identical unless other
transformation parameters are specified. Be aware, providing inaccurate or
incomplete CRS information may lead to erroneous data shifts when
reprojecting. See spTransform help documentation for more details.
</p>
<p>ESRI Shapefile Driver<br /> If exportsp=TRUE:<br /> The st_write (sf) function
is called. If out_fmt=&quot;shp&quot;, the ESRI Shapefile driver truncates variable
names to 10 characters or less. Variable names are changed before export
using an internal function (trunc10shp). If sf object has more than 1
record, it will be returned but not exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up `SpatialPoints` object
WYspplt &lt;- spMakeSpatialPoints(xyplt = WYplt, 
                               xy.uniqueid = "CN", 
                               xvar = "LON_PUBLIC", 
                               yvar = "LAT_PUBLIC", 
                               xy.crs = 4326)
# Check CRS
sf::st_crs(WYspplt)

# Set up projection
prj &lt;- "+proj=utm +zone=12 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"

# Use `spReprojectVector` to reproject the vector
WYspplt.utm12 &lt;- spReprojectVector(layer = WYspplt, 
                                   crs.new = prj)
# Check results
sf::st_crs(WYspplt.utm12)

</code></pre>

<hr>
<h2 id='spUnionPoly'>Spatial - Generate a unioned sf object with polygons and attributes from
two sf polygon objects.</h2><span id='topic+spUnionPoly'></span>

<h3>Description</h3>

<p>Generate a unioned sf object with polygons and attributes from two sf
polygon objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spUnionPoly(
  polyv1,
  polyv1_dsn = NULL,
  polyv2,
  polyv2_dsn = NULL,
  validate = FALSE,
  showext = FALSE,
  areacalc = FALSE,
  areavar = "ACRES_GIS",
  exportsp = FALSE,
  savedata_opts = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spUnionPoly_+3A_polyv1">polyv1</code></td>
<td>
<p>sf R object or String. Polygon data to union. Can be a spatial
polygon object, full pathname to a shapefile, or name of a layer within a
database.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_polyv1_dsn">polyv1_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of layer to union. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv1 is sf
object.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_polyv2">polyv2</code></td>
<td>
<p>sf R object or String. Polygon data to union. Can be a spatial
polygon object, full pathname to a shapefile, or name of a layer within a
database.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_polyv2_dsn">polyv2_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of layer to union. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv2 is sf
object.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_areacalc">areacalc</code></td>
<td>
<p>Logical. If TRUE, calculate area of unioned polygons and
append to attribute table (See details).</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_areavar">areavar</code></td>
<td>
<p>String. Name of area variable.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_exportsp">exportsp</code></td>
<td>
<p>Logical. If TRUE, the spatial unioned object is exported to
outfolder (see spExportSpatial for details).</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when export = TRUE. If out_layer = NULL,
default = 'polyunion'.</p>
</td></tr>
<tr><td><code id="spUnionPoly_+3A_...">...</code></td>
<td>
<p>For extendibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>*If variable = NULL, then it will prompt user for input.
</p>
<p>Uses raster function union to merge two polygons and crop, if clip=TRUE.
Generates a new ID for each polygon and appends attributes from both
polygons.
</p>
<p>areacalc<br /> If areacalc = TRUE and the unioned spatial object is not in a
projected coordinate system (i.e., longlat), the object will be reprojected
to the Albers Equal Area projection before area is calculated.
</p>


<h3>Value</h3>

<p>sf object of unioned polygon. If polyv1 and polyv2 have different
projections, the projection of returned object will have the same projection
as poly1 (See note about on-the-fly projection conversion).
</p>
<p>If exportsp=TRUE, the sf object will be written to outfolder (See note).
</p>


<h3>Note</h3>

<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>
<p>ESRI Shapefile Driver<br /> If exportsp=TRUE:<br /> The st_write (sf) function
is called. If out_fmt=&quot;shp&quot;, the ESRI Shapefile driver truncates variable
names to 10 characters or less. Variable names are changed before export
using an internal function (trunc10shp). If sf object has more than 1
record, it will be returned but not exported.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Set up data from `FIESTA` and `raster`
WYbhfn &lt;- system.file("extdata",
                      "sp_data/WYbighorn_adminbnd.shp",
                      package = "FIESTA")
WYbh &lt;- spImportSpatial(WYbhfn)

# Generate unioned `sf` object
polyUnion &lt;- spUnionPoly(polyv1 = stunitco[stunitco$STATENM == "Wyoming",], 
                         polyv2 = WYbh, 
                         areacalc = TRUE)
                         
# Plot the result
plot(sf::st_geometry(polyUnion))

## End(Not run)
</code></pre>

<hr>
<h2 id='spZonalRast'>Spatial - Extracts summary statistics by polygon (i.e., zone) for a raster.</h2><span id='topic+spZonalRast'></span>

<h3>Description</h3>

<p>Extracts summary statistics by polygon, or zone for a raster (single or
multi-band).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spZonalRast(
  polyv,
  polyv_dsn = NULL,
  polyv.att = NULL,
  rastfn,
  rastfolder = NULL,
  bands = NULL,
  zonalstat,
  pixelfun = NULL,
  validate = FALSE,
  outname = NULL,
  showext = FALSE,
  rastlut = NULL,
  rast.NODATA = NULL,
  savedata = FALSE,
  savedata_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spZonalRast_+3A_polyv">polyv</code></td>
<td>
<p>sf R object or String. Polygon data to identify zones. Can be a
spatial polygon object, full pathname to a shapefile, or name of a layer
within a database.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_polyv_dsn">polyv_dsn</code></td>
<td>
<p>String. Data source name (dsn; e.g., sqlite or shapefile
pathname) of zonal layer. The dsn varies by driver. See gdal OGR vector
formats (https://www.gdal.org/ogr_formats.html). Optional if polyv is sf
object.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_polyv.att">polyv.att</code></td>
<td>
<p>String. Name of attribute in polyv to identify zones for
summarizing raster statistics.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_rastfn">rastfn</code></td>
<td>
<p>String or Raster. File name with extension, or raster
object.  Note: raster objects must be written to file.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_rastfolder">rastfolder</code></td>
<td>
<p>String. Name of the folder with raster layers. Optional.
Useful if all raster layers are in same folder.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_bands">bands</code></td>
<td>
<p>Numeric vector. If rast is a multi-layer raster and only 1 or
some layers are desired, specify layer number(s) in a vector format. If
NULL, all layers are summed.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_zonalstat">zonalstat</code></td>
<td>
<p>String vector. Zonal statistic(s) to return for rasters
with continuous data (&quot;mean&quot;, &quot;sum&quot;, &quot;majority&quot;, &quot;minority&quot;, &quot;variety&quot;,
&quot;npixels&quot;) or rasters with discrete data (&quot;count&quot;, &quot;proportion&quot;).</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_pixelfun">pixelfun</code></td>
<td>
<p>Function. A function to apply to the individual pixel values
before calculating sum and mean. The function should accept a single numeric
argument (pixel value) and return a single numeric argument.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_validate">validate</code></td>
<td>
<p>Logical. If TRUE, validates polyv and clippolyv before 
clipping. Uses sf::st_make_valid with default parameters 
(geos_method='valid_structure', geos_keep_collapsed=FALSE).</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_outname">outname</code></td>
<td>
<p>String. Variable name for output. The output names will use
outname as a prefix to summary statistics (i.e., 'outname'.mean,
'outname'.sum).</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_showext">showext</code></td>
<td>
<p>Logical. If TRUE, layer extents are displayed in plot window.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_rastlut">rastlut</code></td>
<td>
<p>Data frame. A look up table to recode raster values. Must be
2 columns: Column 1 with raster values and column 2 with recode values.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_rast.nodata">rast.NODATA</code></td>
<td>
<p>Numeric. NODATA value (if not already defined) or other 
values to ignore. These values will be removed from output zonal table. 
NODATA values defined in raster are removed before zonal statistic 
calculations.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_savedata">savedata</code></td>
<td>
<p>Logical. If TRUE, the zonal data are saved to outfolder.</p>
</td></tr>
<tr><td><code id="spZonalRast_+3A_savedata_opts">savedata_opts</code></td>
<td>
<p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,
default = 'zonalext'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use spZonalRast() to prompt for input.
</p>
<p>If the projection of polyv is different than the projection of rast, the
polyv SpatialPolygons object is converted to the projection of rast (See
note about on-the-fly projection conversion).
</p>


<h3>Value</h3>

<table>
<tr><td><code>zonalext</code></td>
<td>
<p> Data frame. Zonal statistics by polygon attribute
(attribute). </p>
</td></tr> <tr><td><code>outname</code></td>
<td>
<p> String vector. Names of zonal statistic
variables generated in zonalext data frame. </p>
</td></tr> <tr><td><code>rasterfile</code></td>
<td>
<p> String
vector. Names of raster file(s) associated with zonal statistic. </p>
</td></tr>
</table>
<p>If savedata=TRUE, outdat data frame is saved to outfolder (Default name:
zonalext_'date'.csv).
</p>


<h3>Note</h3>

<p>rast.NODATA<br /> NODATA values are raster pixel values that have no data
of interest, including pixels within the extent of the layer, but outside
the area of interest. Sometimes these pixels have been defined previously.
The defined NODATA pixels are imported to R as NULL values. When not
previously defined, the pixels outside the area of interest will be the
minimum or maximum value depending on the data type (e.g., 16-bit signed:
min=-32,768; max=32,768) or byte size (1 byte: min=0; max=255).  These
NODATA values will be added to the zonal statistic calculations if not
specified in rast.NODATA.
</p>
<p>On-the-fly projection conversion<br /> The spTransform (sf) method is used
for on-the-fly map projection conversion and datum transformation using
PROJ.4 arguments. Datum transformation only occurs if the +datum tag is
present in the both the from and to PROJ.4 strings. The +towgs84 tag is used
when no datum transformation is needed. PROJ.4 transformations assume NAD83
and WGS84 are identical unless other transformation parameters are
specified.  Be aware, providing inaccurate or incomplete CRS information may
lead to erroneous data shifts when reprojecting. See spTransform help
documentation for more details.
</p>


<h3>Author(s)</h3>

<p>Tracey S. Frescino
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up data from `FIESTA`
WYbhdistfn &lt;- system.file("extdata",
                          "sp_data/WYbighorn_districtbnd.shp",
                          package = "FIESTA")
demfn &lt;- system.file("extdata",
                     "sp_data/WYbighorn_dem_250m.img",
                     package = "FIESTA")

# Import spatial data with `spImportSpatial`
WYbhdist &lt;- spImportSpatial(WYbhdistfn)

# Extract mean and sum in `WYbhdist`
spZonalRast(polyv = WYbhdist, 
            polyv.att = "DISTRICTNA", 
            rastfn = demfn, 
            zonalstat = c("mean", "sum")) 

</code></pre>

<hr>
<h2 id='stunitco'>SpatialPolygonsDataFrame with FIA state, unit, county codes and names</h2><span id='topic+stunitco'></span>

<h3>Description</h3>

<p>SpatialPolygonsDataFrame with FIA state, unit, county codes and names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stunitco
</code></pre>


<h3>Format</h3>

<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 3233 rows and 8 columns.
</p>


<h3>Source</h3>

<p>Downloaded from the United States Census Bureau on 2019 November 3,
format Esri Shapefile
(https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html)
Projection: Geographic (GCS_North_American_1983) EPSG: 4269
</p>

<hr>
<h2 id='WYcond'>FIA data. Condition-level data from FIA public database.</h2><span id='topic+WYcond'></span>

<h3>Description</h3>

<p>FIA condition-level data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 26 columns and 3224 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYp2veg_subp_structure'>FIA data. P2 vegetation structure data from FIA public database.</h2><span id='topic+WYp2veg_subp_structure'></span>

<h3>Description</h3>

<p>FIA subplot-level P2 vegetation structure data for the state of Wyoming,  
FIA Evaluation 561301, including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 6 columns and 96775 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYp2veg_subplot_spp'>FIA data. P2 vegetation species data from FIA public database.</h2><span id='topic+WYp2veg_subplot_spp'></span>

<h3>Description</h3>

<p>FIA subplot-level P2 vegetation species data for the state of Wyoming,  
FIA Evaluation 561301, including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 9 columns and 14616 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYplt'>FIA data. Plot-level data from FIA public database.</h2><span id='topic+WYplt'></span>

<h3>Description</h3>

<p>FIA plot-level data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A data frame with 20 columns and 3047 rows.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> <b>VARIABLE</b> </td><td style="text-align: left;"> <b>DESCRIPTION</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CN </td><td style="text-align: left;">
Unique FIADB identifier </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> PREV_PLT_CN </td><td style="text-align: left;"> Previous unique FIADB
identifier </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> INVYR </td><td style="text-align: left;"> Inventory year </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> STATECD </td><td style="text-align: left;"> State
code (FIPS) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CYCLE </td><td style="text-align: left;"> Inventory cycle number </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBCYCLE
</td><td style="text-align: left;"> Inventory subcycle number (Do not use subcycle 99 for estimation) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> UNITCD </td><td style="text-align: left;"> Survey unit code </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> COUNTYCD </td><td style="text-align: left;"> County code </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> PLOT </td><td style="text-align: left;"> Phase 2 plot number (Public) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> LON_PUBLIC </td><td style="text-align: left;">
Longitude - fuzzed/swapped (Decimal degrees; NAD83) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> LAT_PUBLIC </td><td style="text-align: left;">
Latitude - fuzzed/swapped (Decimal degrees; NAD83) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
PLOT_NONSAMPLE_REASN_CD </td><td style="text-align: left;"> Plot nonsampled reason </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SAMP_METHOD_CD
</td><td style="text-align: left;"> Sample method code </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBP_EXAMINE_CD </td><td style="text-align: left;"> Subplots examined code
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MANUAL </td><td style="text-align: left;"> Manual version number </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> INTENSITY </td><td style="text-align: left;"> Intensity
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MEASYEAR </td><td style="text-align: left;"> Measurement year </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MEASMON </td><td style="text-align: left;"> Measurement
month </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> MEASDAY </td><td style="text-align: left;"> Measurement day </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> REMPER </td><td style="text-align: left;">
Remeasurement period </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> DESIGNCD </td><td style="text-align: left;"> Plot design </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> P2PANEL
</td><td style="text-align: left;"> Phase 2 panel number </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> SUBPANEL </td><td style="text-align: left;"> Subpanel number </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
ELEV </td><td style="text-align: left;"> Elevation (ft) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> KINDCD </td><td style="text-align: left;"> Sample kind </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
MORT_TYP_CD </td><td style="text-align: left;"> Type of annual mortality volume (1:Current annual;
2:Periodic annual) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> GROW_TYP_CD </td><td style="text-align: left;"> Type of annual volume growth
(1:Current annual; 2:Periodic annual) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NF_PLOT_NONSAMPLE_REASN_CD
</td><td style="text-align: left;"> Nonforest sampling status </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> P2VEG_SAMPLING_STATUS_CD </td><td style="text-align: left;"> P2
vegetation sampling status </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> PLOT_STATUS_CD </td><td style="text-align: left;"> Plot sampling status
</td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NF_PLOT_STATUS_CD </td><td style="text-align: left;"> Nonforest plot sampling status </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
NBRCND </td><td style="text-align: left;"> DERIVED: Number of conditions for plot </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> NBRCNDFOR </td><td style="text-align: left;">
DERIVED: Number of different forest type conditions for plot </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;">
FORNONSAMP </td><td style="text-align: left;"> DERIVED: Plot status - sampled and nonsampled (Combination
of PLOT_NONSAMPLE_REASN_CD and PLOT_STATUS_CD) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> CCLIVEPLT </td><td style="text-align: left;">
DERIVED: Percent cover of live trees for plot (LIVE_CANOPY_CVR_PCT *
CONDPROP_UNADJ) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> UNIQUEID </td><td style="text-align: left;"> DERIVED: Unique identifier for plot
location ('Z'+STATECD(2)+UNITCD(2)+COUNTYCD(3)+PLOT(5)) </td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYpltassgn'>FIA data. Plot assignment data from FIA public database.</h2><span id='topic+WYpltassgn'></span>

<h3>Description</h3>

<p>FIA plot-level stratification assignments for the state of Wyoming, FIA 
Evaluation 561301, including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 24 columns and 3047 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYseed'>FIA data. Seedling data from FIA public database.</h2><span id='topic+WYseed'></span>

<h3>Description</h3>

<p>FIA seedling data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 10 columns and 1607 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYstratalut'>FIA data. Post-stratification data from FIA public database.</h2><span id='topic+WYstratalut'></span>

<h3>Description</h3>

<p>FIA stratification data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 7 columns and 35 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYsubp_cond'>FIA data. Subplot condition data from FIA public database.</h2><span id='topic+WYsubp_cond'></span>

<h3>Description</h3>

<p>FIA subplot condition-level data for the state of Wyoming, FIA Evaluation  
561301, including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 6 columns and 20641 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYsubplot'>FIA data. Subplot data from FIA public database.</h2><span id='topic+WYsubplot'></span>

<h3>Description</h3>

<p>FIA subplot-level data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 9 columns and 20596 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYtree'>FIA data. Tree-level data from FIA public database.</h2><span id='topic+WYtree'></span>

<h3>Description</h3>

<p>FIA tree-level data for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A dataframe with 19 columns and 18380 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYunitarea'>FIA data. Acres data from FIA public database.</h2><span id='topic+WYunitarea'></span>

<h3>Description</h3>

<p>FIA acres by estimation unit for the state of Wyoming, FIA Evaluation 561301, 
including inventory years 2011-2013.
</p>


<h3>Format</h3>

<p>A data table with 5 columns and 23 rows.
</p>


<h3>Source</h3>

<p>FIA national database (FIADB_1.7.0.00), downloaded September 18, 2016.
</p>


<h3>References</h3>

<p>Burrill, E.A.; Wilson, A.M.; Turner, J.A.; Pugh, S.A.; Menlove, J.; 
Christiansen, G.; B.L. Conkling, B.L.: David, W. 2018. The Forest Inventory and 
Analysis Database: Database description and user guide version 8.0 for Phase 2.
</p>

<hr>
<h2 id='WYunitzonal'>Zonal data. Zonal means for auxiliary data in counties in Wyoming.</h2><span id='topic+WYunitzonal'></span>

<h3>Description</h3>

<p>Zonal means and pixel counts for certain auxiliary data in counties in
Wyoming. Includes county code variable to distinguish counties, and state
code variable to distinguish states.
</p>


<h3>Format</h3>

<p>A dataframe with 9 columns and 23 rows.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
