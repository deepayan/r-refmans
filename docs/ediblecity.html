<!DOCTYPE html><html><head><title>Help for package ediblecity</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ediblecity}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#city_example'><p>City example</p></a></li>
<li><a href='#city_land_uses'><p>City Land Uses</p></a></li>
<li><a href='#edible_jobs'><p>The jobs created by urban agriculture in your city</p></a></li>
<li><a href='#edible_volunteers'><p>The number of volunteers involved in urban agriculture in your city</p></a></li>
<li><a href='#food_production'><p>The food produced by urban agriculture in your city</p></a></li>
<li><a href='#green_capita'><p>Urban green per capita</p></a></li>
<li><a href='#green_distance'><p>Distance to closest public green area</p></a></li>
<li><a href='#neighbourhoods_example'><p>Neighbourhoods of City Example</p></a></li>
<li><a href='#no2_seq'><p>Sequestration of nitrogen dioxide</p></a></li>
<li><a href='#runoff_prev'><p>Runoff prevention</p></a></li>
<li><a href='#set_scenario'><p>Set the scenario for your edible city</p></a></li>
<li><a href='#SVF'><p>Sky View Factor for City Example</p></a></li>
<li><a href='#UHI'><p>Heat island effect</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Modeling Urban Agriculture at City Scale</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>The purpose of this package is to estimate the potential of urban agriculture to contribute to addressing several urban challenges at the city-scale. Within this aim, we selected 8 indicators directly related to one or several urban challenges. Also, a function is provided to compute new scenarios of urban agriculture. Methods are described by Pueyo-Ros, Comas &amp; Corominas (2023) &lt;<a href="https://doi.org/10.12688%2Fopenreseurope.16054.1">doi:10.12688/openreseurope.16054.1</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>sf (&ge; 0.9), dplyr (&ge; 1.0.6), magrittr (&ge; 2.0.1), stars (&ge;
0.5), rlang (&ge; 1.0)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/icra/ediblecity">https://github.com/icra/ediblecity</a>,
<a href="https://icra.github.io/ediblecity/">https://icra.github.io/ediblecity/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/icra/ediblecity/issues">https://github.com/icra/ediblecity/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-15 16:01:32 UTC; Josep Pueyo-Ros</td>
</tr>
<tr>
<td>Author:</td>
<td>Josep Pueyo-Ros <a href="https://orcid.org/0000-0002-1236-5651"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  ICRA - Catalan Institute for Water Research [fnd] (Edicitnet, 776665)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Josep Pueyo-Ros &lt;josep.pueyo@udg.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-16 17:20:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='city_example'>City example</h2><span id='topic+city_example'></span>

<h3>Description</h3>

<p>It contains a urban model as an example to use the package.
It is specifically the urban model for Sant Narcís, a neighbourhood of Girona (Catalonia)
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>

<hr>
<h2 id='city_land_uses'>City Land Uses</h2><span id='topic+city_land_uses'></span>

<h3>Description</h3>

<p>It contains information about the functions belonging to green infrastructure and urban agriculture
in the city_example dataset. This information can be used as params in the indicators, in some cases these
are already the default values.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>

<hr>
<h2 id='edible_jobs'>The jobs created by urban agriculture in your city</h2><span id='topic+edible_jobs'></span>

<h3>Description</h3>

<p>This indicator estimates the number of full-time jobs created by commercial urban agriculture
initiatives in your city. It uses a range of jobs per square meter to create the median and the
confidence interval of the number of jobs by simulating a random uniform distribution of 1000 values
within the provided range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edible_jobs(
  x,
  jobs = c(0.000163, 0.022),
  edible = NULL,
  area_col = "edible_area",
  interval = 0.95,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edible_jobs_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of urban features.</p>
</td></tr>
<tr><td><code id="edible_jobs_+3A_jobs">jobs</code></td>
<td>
<p>A vector of length 2 with the range of jobs created by square meter of edible gardens.</p>
</td></tr>
<tr><td><code id="edible_jobs_+3A_edible">edible</code></td>
<td>
<p>The categories in 'land_uses' that represent commercial edible gardens. If NULL, the
land_uses from 'city_land_uses' dataset are used where jobs is TRUE.</p>
</td></tr>
<tr><td><code id="edible_jobs_+3A_area_col">area_col</code></td>
<td>
<p>The column to be used as the area of each feature. If NULL, the area is calculated with
sf::st_area()</p>
</td></tr>
<tr><td><code id="edible_jobs_+3A_interval">interval</code></td>
<td>
<p>A numeric value with the confidence interval returned by the function.</p>
</td></tr>
<tr><td><code id="edible_jobs_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, the indicators returns a vector (N=1000) with all simulated values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If verbose is FALSE, it returns a named vector with the median and the low and high confidence intervals.
Otherwise, it returns a vector of length 1000 with all simulated values.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># First, we set a scenario with commercial gardens that create jobs
scenario &lt;- set_scenario(city_example, pCommercial = 1, quiet = TRUE)
# Get the 95% confidence interval
edible_jobs(scenario, interval = 0.95)

# Get the raw values from the Monte Carlo simulation and adjust the number of jobs by square meter.
result &lt;- edible_jobs(scenario, jobs = c(0.02, 0.03), verbose = TRUE)
result[1:10]
</code></pre>

<hr>
<h2 id='edible_volunteers'>The number of volunteers involved in urban agriculture in your city</h2><span id='topic+edible_volunteers'></span>

<h3>Description</h3>

<p>This indicator estimates the number of volunteers potentially involved in community urban agriculture
initiatives in your city. It uses a range of volunteers per square meter to create the median and the
confidence interval of the number of volunteers by simulating a random uniform distribution of 1000 values
within the provided range. The default range came from required work hours in urban agriculture assessed
in scientific literature, assuming that a volunteers dedicates a 10
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edible_volunteers(
  x,
  volunteers = c(0.00163, 0.22),
  edible = NULL,
  area_col = "edible_area",
  interval = 0.95,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edible_volunteers_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of urban features.</p>
</td></tr>
<tr><td><code id="edible_volunteers_+3A_volunteers">volunteers</code></td>
<td>
<p>A vector of length 2 with the range of volunteers involved by square meter of edible gardens.</p>
</td></tr>
<tr><td><code id="edible_volunteers_+3A_edible">edible</code></td>
<td>
<p>The categories in 'land_uses' that represent community edible gardens. If NULL, land_uses
from 'city_land_uses' dataset area used where volunteers is TRUE.</p>
</td></tr>
<tr><td><code id="edible_volunteers_+3A_area_col">area_col</code></td>
<td>
<p>The column to be used as the area of each feature. If NULL, the area is calculated with
sf::st_area().</p>
</td></tr>
<tr><td><code id="edible_volunteers_+3A_interval">interval</code></td>
<td>
<p>A numeric value with the confidence interval returned by the function.</p>
</td></tr>
<tr><td><code id="edible_volunteers_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, the indicators returns a vector (N=1000) with all simulated values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If verbose is FALSE, it returns a named vector with the median and the low and high confidence intervals.
Otherwise, it returns a vector of length 1000 with all simulated values.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get the 95% confidence interval
edible_volunteers(city_example, interval = 0.95)

# Get the raw values from the Monte Carlo simulation
# and adjust the number of volunteers by squared meter.
result &lt;- edible_volunteers(city_example, volunteers = c(0.1, 0.2), verbose = TRUE)
result[1:10]
</code></pre>

<hr>
<h2 id='food_production'>The food produced by urban agriculture in your city</h2><span id='topic+food_production'></span>

<h3>Description</h3>

<p>This indicator estimates the food (in kg/year) produced by urban agriculture
initiatives in your city. It uses a range of production for each type of initiative to create the median and the
confidence interval of the number of jobs by simulating a random uniform distribution of 1000 values
within the provided range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>food_production(
  x,
  edible_df = NULL,
  area_col = "edible_area",
  interval = 0.95,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="food_production_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of
urban features.</p>
</td></tr>
<tr><td><code id="food_production_+3A_edible_df">edible_df</code></td>
<td>
<p>A dataframe of categories that are considered as urban agriculture with three columns:
</p>

<ol>
<li><p> 'land_uses': Column with the land_use to be considered in the calculations corresponding
to 'land_use' column in 'x'.
</p>
</li>
<li><p> 'food1': The low range of food production in each land_use (in kg/year/m2).
</p>
</li>
<li><p> 'food2': The high range of food production of each land_use (in kg/year/m2).
</p>
</li></ol>
</td></tr>
<tr><td><code id="food_production_+3A_area_col">area_col</code></td>
<td>
<p>The column to be used as the area of each feature. If NULL, the area is calculated with
sf::st_area()</p>
</td></tr>
<tr><td><code id="food_production_+3A_interval">interval</code></td>
<td>
<p>A numeric value with the confidence interval returned by the land_use.</p>
</td></tr>
<tr><td><code id="food_production_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, the indicators returns a vector (N=1000) with all simulated values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If verbose is FALSE, it returns a named vector with the median and the low and high confidence intervals
(in kg/year). Otherwise, it returns a vector of length 1000 with all simulated values (in kg/year)
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Estimate the food production within 95% confidence interval
food_production(city_example, interval = 0.95, verbose = FALSE)

# Get the raw values instead of the confidence interval
result &lt;- food_production(city_example, verbose = TRUE)
result[1:10]
</code></pre>

<hr>
<h2 id='green_capita'>Urban green per capita</h2><span id='topic+green_capita'></span>

<h3>Description</h3>

<p>This indicators calculates the amount of green per capita in the city. This may include private green
such as gardens and crops or exclude them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>green_capita(
  x,
  green_categories = NULL,
  inhabitants = NULL,
  neighbourhoods = NULL,
  inh_col = NULL,
  name_col = NULL,
  private = FALSE,
  verbose = FALSE,
  min_inh = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="green_capita_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of urban features.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_green_categories">green_categories</code></td>
<td>
<p>The categories that are considered as urban green. If NULL, categories of 'city_land_uses'
are considered.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_inhabitants">inhabitants</code></td>
<td>
<p>A value representing the inhabitants in the city.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_neighbourhoods">neighbourhoods</code></td>
<td>
<p>(optional) An 'sf' object with polygons representing the neighborhoods in the city.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_inh_col">inh_col</code></td>
<td>
<p>(optional) The col in 'x' or in 'neighborhoods' indicating the inhabitants in each neighborhood.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_name_col">name_col</code></td>
<td>
<p>(optional) The col in 'x' or in 'neighborhoods' indicating the name of each neighborhood</p>
</td></tr>
<tr><td><code id="green_capita_+3A_private">private</code></td>
<td>
<p>If FALSE (default), only public areas are considered in the indicator. If TRUE, elements in
'city_land_uses' where 'private' is TRUE are considered. Alternatively, a vector with land_uses to be
considered.#'</p>
</td></tr>
<tr><td><code id="green_capita_+3A_verbose">verbose</code></td>
<td>
<p>If FALSE (default), the indicator returns the proportion between the most and the least green neighbourhoods.
Otherwise, it will return a tibble with the green per capita in each neighborhood, provided that 'inh_col'
and 'name_col' are provided.</p>
</td></tr>
<tr><td><code id="green_capita_+3A_min_inh">min_inh</code></td>
<td>
<p>If neighbourhoods are used, those with less inhabitants than 'min-inh' will be discarded.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If 'inh_col' and 'name_col' are defined and  'neighbourhoods' is NULL, the function searches
the columns in 'x'. If 'neighbourhoods' is defined along with previous both, the columns are searched in
'neighbourhoods' and spatially joined with 'x'. In both cases, 'inhabitants' is ignored.
</p>


<h3>Value</h3>

<p>A numeric value expressing the square meters of green per capita. Or a numeric value expressing
the proportion between the greenest and the least green neighbourhood. Or a tibble with the green area,
inhabitants and green per capita in each neighbourhood.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate total green per capita in the city
green_capita(city_example, inhabitants = 6000)

# Calculate the differences between the greenest and the least green neighbourhoods
green_capita(city_example, neighbourhoods = neighbourhoods_example,
             inh_col = "inhabitants", name_col = "name")

# Get the green per capita in each neighbourhood
green_capita(city_example, neighbourhoods = neighbourhoods_example,
             inh_col = "inhabitants", name_col = "name", verbose = TRUE)

# Use a customized vector of land_uses to be considered private green
green_capita(city_example, inhabitants = 6000, private = c("Normal garden", "Commercial garden"))
</code></pre>

<hr>
<h2 id='green_distance'>Distance to closest public green area</h2><span id='topic+green_distance'></span>

<h3>Description</h3>

<p>This indicator calculates the distance from each residence to its closest public green area
larger than 'min_area'. It can return the summary of distances or the percentage of residence buildings further
than a defined distance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>green_distance(
  x,
  green_cat = NULL,
  min_area = 5000,
  residence_col = "land_use_verbose",
  residences = "Residence",
  percent_out = FALSE,
  max_dist = 300,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="green_distance_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of urban features.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_green_cat">green_cat</code></td>
<td>
<p>A vector with the categories in 'land_use' that must be considered in the calculations. If
NULL (default), the 'city_land_uses' dataset is used where 'public' is TRUE.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_min_area">min_area</code></td>
<td>
<p>A numerical value (in meters). smaller green areas are not considered in the calculations.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_residence_col">residence_col</code></td>
<td>
<p>The column 'x' where the residences are specified.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_residences">residences</code></td>
<td>
<p>A vector with the categories that represent residences.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_percent_out">percent_out</code></td>
<td>
<p>If TRUE, the function returns the percentage of residences further than 'max_dist'.
(default = FALSE)</p>
</td></tr>
<tr><td><code id="green_distance_+3A_max_dist">max_dist</code></td>
<td>
<p>A numeric value representing the maximum distance that a residence should be from a
public green area.</p>
</td></tr>
<tr><td><code id="green_distance_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE returns the vector of distances. Otherwise, it returns as specified in value section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If 'percent_out' is FALSE, it returns a summary of statistics for distance. Otherwise, it
returns a numeric value with the percentage of residences further than 'max_dist' from its closest
public green area.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate a summary of the distances to closest public green area larger than 0.5 ha.
green_distance(city_example, min_area = 5000)

# Get the distances from each residence to its closest public green area.
result &lt;- green_distance(city_example, min_area = 0, verbose = TRUE)
result[1:10]

# Get the percentage of residences further than 300 m. from a green area larger than 0.5 ha.
green_distance(city_example, percent_out = TRUE, max_dist = 300)
</code></pre>

<hr>
<h2 id='neighbourhoods_example'>Neighbourhoods of City Example</h2><span id='topic+neighbourhoods_example'></span>

<h3>Description</h3>

<p>It contains a GIS layer with the neighbourhoods of city_example and their population.
It is used to run 'green_capita' indicator.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>

<hr>
<h2 id='no2_seq'>Sequestration of nitrogen dioxide</h2><span id='topic+no2_seq'></span>

<h3>Description</h3>

<p>This indicator returns the amount of NO2 that is sequestered by urban green.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>no2_seq(x, green_df = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="no2_seq_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of
urban features.</p>
</td></tr>
<tr><td><code id="no2_seq_+3A_green_df">green_df</code></td>
<td>
<p>A dataframe of categories that are considered as urban green with four columns:
</p>

<ol>
<li><p> 'land_uses': Column with the function to be considered in the calculations corresponding
to 'land_use' column in 'x'.
</p>
</li>
<li><p> 'no2_seq1': The low range of NO2 sequestration of each function (in ug/s/m2).
</p>
</li>
<li><p> 'no2_seq2': The high range of NO2 sequestration of each function (in ug/s/m2).
</p>
</li>
<li><p> 'pGreen': The proportion of green surface in each function (0:1). This is overriden by 'edible_are' when
land_uses are community garden, commercial garden, rooftop garden and hydroponic rooftop.
</p>
</li></ol>

<p>If NULL, the 'city_land_uses' dataset is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value with the total NO2 sequestration in the city (in grams/second).
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get the total nitrogen dioxide sequestered by urban green
no2_seq(city_example)
</code></pre>

<hr>
<h2 id='runoff_prev'>Runoff prevention</h2><span id='topic+runoff_prev'></span>

<h3>Description</h3>

<p>The indicator calculates the runoff prevention considering a rain event, the infiltration
capacity and the rain harvesting and storage capacity.
government.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runoff_prev(
  x,
  runoff_df = NULL,
  rain = 85,
  floors_field = "floors",
  harvest_dist = 10,
  tank_size = c(0, 45)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runoff_prev_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories
of urban features.</p>
</td></tr>
<tr><td><code id="runoff_prev_+3A_runoff_df">runoff_df</code></td>
<td>
<p>A dataframe of categories that are considered impervious area with three columns.
</p>

<ol>
<li><p> 'land_uses' with the names of 'land_use' in 'x' to be considered as impervious.
</p>
</li>
<li><p> Curve numbers columns 'CN1' and 'CN2' the range of curve number of that function.
</p>
</li>
<li><p> 'water_storage', a boolean column indicating whether the land_uses is potentially harvesting
and storing rainwater using a tank.
</p>
</li></ol>

<p>If NULL, categories and values of 'city_land_uses' are considered.</p>
</td></tr>
<tr><td><code id="runoff_prev_+3A_rain">rain</code></td>
<td>
<p>The amount of 24h-rain to be simulated, default is 85 mm.</p>
</td></tr>
<tr><td><code id="runoff_prev_+3A_floors_field">floors_field</code></td>
<td>
<p>The column in 'x' containing the number of floors of each building. Zero is considered
unbuilt areas like gardens or streets. It is used to calculate rainwater harvesting area, since only
upper surface are considered. Missing values are considered as zero.</p>
</td></tr>
<tr><td><code id="runoff_prev_+3A_harvest_dist">harvest_dist</code></td>
<td>
<p>Maximum distance (in meters) of buildings where to harvest rainwater</p>
</td></tr>
<tr><td><code id="runoff_prev_+3A_tank_size">tank_size</code></td>
<td>
<p>A two-length vector with the range of tank size possibilities, proportional
to the surface of each element where the tank size is located (in l/m2).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a named vector with values of runoff in mm, total rainfall
and harvested rainwater in cubic meters.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get the total values of runoff, rainfall and rain harvested
runoff_prev(city_example)

# Adjust the parameters for rain, maximum distance to harvest rainwater and tank size
runoff_prev(city_example, rain = 160, harvest_dist = 5, tank_size = c(20,30))
</code></pre>

<hr>
<h2 id='set_scenario'>Set the scenario for your edible city</h2><span id='topic+set_scenario'></span>

<h3>Description</h3>

<p>You can adjust different parameters to define different city scenarios.
The object must contain a field 'land_use' which describes the function or type of each feature.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_scenario(
  x,
  pGardens = 1,
  pVacant = 1,
  pRooftop = 1,
  edible_area_garden = c(0.02, 0.3),
  edible_area_vacant = c(0.52, 0.75),
  edible_area_rooftop = c(0.6, 0.62),
  min_area_garden = 10,
  min_area_vacant = 100,
  min_area_rooftop = 100,
  private_gardens_from = "Normal garden",
  vacant_from = "Vacant",
  rooftop_from = "Rooftop",
  pCommercial = 0,
  area_field = "flat_area",
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_scenario_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' field with categories of urban features.</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_pgardens">pGardens</code></td>
<td>
<p>The proportion of private gardens (land_use == 'Gardens')
that will become edible gardens [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_pvacant">pVacant</code></td>
<td>
<p>The proportion of vacant plot (land_use == 'Vacant') with 'area &gt;= min_area_vacant'
that will become edible gardens [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_prooftop">pRooftop</code></td>
<td>
<p>The proportion of rooftops (land_use == 'Flat rooftop') with 'area &gt;= min_area_rooftop'
that will become edible rooftops [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_edible_area_garden">edible_area_garden</code></td>
<td>
<p>The proportion in a range of surface in a garden that is occupied by edible plants [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_edible_area_vacant">edible_area_vacant</code></td>
<td>
<p>The proportion in a range of surface in a vacant plot that is occupied by edible plants [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_edible_area_rooftop">edible_area_rooftop</code></td>
<td>
<p>The proportion in a range of surface in a rooftop that is occupied by edible plants [0-1].</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_min_area_garden">min_area_garden</code></td>
<td>
<p>The minimum area that a garden must have to become an edible garden.</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_min_area_vacant">min_area_vacant</code></td>
<td>
<p>The minimum area that a vacant must have to become an community or commercial garden.</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_min_area_rooftop">min_area_rooftop</code></td>
<td>
<p>The minimum area that a flat rooftop must have to become an edible rooftop.</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_private_gardens_from">private_gardens_from</code></td>
<td>
<p>The categories in 'land_uses' potentially converted to edible private gardens</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_vacant_from">vacant_from</code></td>
<td>
<p>The categories in 'land_uses' potentially converted to community or commercial gardens</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_rooftop_from">rooftop_from</code></td>
<td>
<p>The categories in 'land_uses' potentially converted to edible rooftop
(community raised beds or commercial hydroponic)</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_pcommercial">pCommercial</code></td>
<td>
<p>The proportion of plots and rooftop that will be commercial. The rest will be community gardens
In rooftops it is equivalent to raised beds and hydroponic system respectively.</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_area_field">area_field</code></td>
<td>
<p>The field to be used as the area of each feature. If NULL, the area is calculated with
sf::st_area()</p>
</td></tr>
<tr><td><code id="set_scenario_+3A_quiet">quiet</code></td>
<td>
<p>If 'TRUE', warnings about proportions not satisfied are not triggered.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When pGardens, pVacant or pRooftop is lower than 1, the gardens are selected randomly among
gardens with an area larger than 'min_area_*'.
However, when pCommercial &gt; 0, commercial gardens and hydroponic rooftops are
settled in the larger features, assuming that commercial initiatives have the power to acquire
the best spots.
</p>


<h3>Value</h3>

<p>An 'sf' object as 'x' with the respective proportion of gardens ('Edible private garden'),
vacant plots ('Community plot garden', 'Commercial plot garden') and rooftop gardens ('Community rooftop garden',
'Commercial hydroponic rooftop')
labeled as edible gardens.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set scenario with 50% of streets converted to community gardens
# randomly occupying between 40 and 60% of street's area.
scenario &lt;- set_scenario(city_example, pGardens = 0, pVacant = 0.5, pRooftop = 0,
                         edible_area_vacant = c(0.4, 0.6), vacant_from = "Streets")
table(scenario$land_use)

# Set scenario with 60% of rooftops converted to gardens, and 30% of those with commercial purpose.
scenario &lt;- set_scenario(city_example, pGardens = 0, pVacant = 0, pRooftop = 0.6, pCommercial = 0.3)
table(scenario$land_use)
</code></pre>

<hr>
<h2 id='SVF'>Sky View Factor for City Example</h2><span id='topic+SVF'></span>

<h3>Description</h3>

<p>It contains a raster representing the sky view factor for 'city_example',
calculated using SAGA algorithm on a digital surface model of 3x3 from a LIDAR dataset.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>

<hr>
<h2 id='UHI'>Heat island effect</h2><span id='topic+UHI'></span>

<h3>Description</h3>

<p>The indicator calculates the urban heat island (UHI) using the DPRA guidelines of the Dutch
government.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UHI(
  x,
  SVF,
  green_df = NULL,
  Qql = 6.11,
  Cair = 1007,
  Pair = 1.14,
  Tmax = 30.8,
  Tmin = 20,
  windspeed = 2.77,
  return_raster = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UHI_+3A_x">x</code></td>
<td>
<p>An 'sf' object with the urban model of your city and a 'land_use' column with categories of urban features.</p>
</td></tr>
<tr><td><code id="UHI_+3A_svf">SVF</code></td>
<td>
<p>A 'stars' object representing sky view factor. It can be computed, e.g. with SAGA's
Sky View Factor algorithm and then loaded with stars::read_stars().</p>
</td></tr>
<tr><td><code id="UHI_+3A_green_df">green_df</code></td>
<td>
<p>A dataframe of categories that are considered as urban green with two columns. 'land_uses'
with the names of 'land_use' in 'x' to be considered as green; a 'pGreen' column with the percentage of green
of that function. If NULL, categories and values of 'city_land_uses' dataset are considered.</p>
</td></tr>
<tr><td><code id="UHI_+3A_qql">Qql</code></td>
<td>
<p>A numerical value representing the average solar radiation in W/m2/hour.</p>
</td></tr>
<tr><td><code id="UHI_+3A_cair">Cair</code></td>
<td>
<p>A numerical value representing the air heat capacity in J.</p>
</td></tr>
<tr><td><code id="UHI_+3A_pair">Pair</code></td>
<td>
<p>A numerical value representing the air density in kg/m3.</p>
</td></tr>
<tr><td><code id="UHI_+3A_tmax">Tmax</code></td>
<td>
<p>Averaged maximum temperature in ºC.</p>
</td></tr>
<tr><td><code id="UHI_+3A_tmin">Tmin</code></td>
<td>
<p>Averaged minimum temperature in ºC.</p>
</td></tr>
<tr><td><code id="UHI_+3A_windspeed">windspeed</code></td>
<td>
<p>Averaged wind speed in m/s.</p>
</td></tr>
<tr><td><code id="UHI_+3A_return_raster">return_raster</code></td>
<td>
<p>If TRUE, the raster of UHI values is returned. Otherwise, a summary of raster values is returned.</p>
</td></tr>
<tr><td><code id="UHI_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, returns a vector with UHI value in each cell.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DEFAULT values are the values for 'city_example' dataset in August (averaged values from 2011-2020)
</p>


<h3>Value</h3>

<p>A 'stars' object with values of UHI. Or a numerical vector or summary statistic for UHI values.
See params for more information on how to select each one.
</p>


<h3>Author(s)</h3>

<p>Josep Pueyo-Ros
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get a summary of the UHI
UHI(city_example, SVF)

# Get a 'stars' object representing UHI
uhi &lt;- UHI(city_example, SVF, return_raster = TRUE)
plot(uhi)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
