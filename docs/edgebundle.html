<!DOCTYPE html><html lang="en"><head><title>Help for package edgebundle</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {edgebundle}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#edgebundle-package'><p>edgebundle: Algorithms for Bundling Edges in Networks and Visualizing Flow and Metro Maps</p></a></li>
<li><a href='#cali2010'><p>Migration from California in 2010</p></a></li>
<li><a href='#convert_edges'><p>Convert edges</p></a></li>
<li><a href='#edge_bundle_force'><p>force directed edge bundling</p></a></li>
<li><a href='#edge_bundle_hammer'><p>hammer edge bundling</p></a></li>
<li><a href='#edge_bundle_path'><p>Edge-Path Bundling</p></a></li>
<li><a href='#edge_bundle_stub'><p>stub edge bundling</p></a></li>
<li><a href='#install_bundle_py'><p>install python dependencies for hammer bundling</p></a></li>
<li><a href='#metro_berlin'><p>Subway network of Berlin</p></a></li>
<li><a href='#metro_multicriteria'><p>Metro Map Layout</p></a></li>
<li><a href='#tnss_dummies'><p>Sample points for triangulated networks</p></a></li>
<li><a href='#tnss_smooth'><p>Smooth a Steiner tree</p></a></li>
<li><a href='#tnss_tree'><p>Create Steiner tree from real and dummy points</p></a></li>
<li><a href='#us_flights'><p>Flights within the US</p></a></li>
<li><a href='#us_migration'><p>Migration within the US 2010-2019</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Algorithms for Bundling Edges in Networks and Visualizing Flow
and Metro Maps</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements several algorithms for bundling edges in networks and flow and metro map layouts. This includes force directed edge bundling &lt;<a href="https://doi.org/10.1111%2Fj.1467-8659.2009.01450.x">doi:10.1111/j.1467-8659.2009.01450.x</a>&gt;, a flow algorithm based on Steiner trees&lt;<a href="https://doi.org/10.1080%2F15230406.2018.1437359">doi:10.1080/15230406.2018.1437359</a>&gt; and a multicriteria optimization method for metro map layouts &lt;<a href="https://doi.org/10.1109%2FTVCG.2010.24">doi:10.1109/TVCG.2010.24</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/schochastics/edgebundle">https://github.com/schochastics/edgebundle</a>,
<a href="https://schochastics.github.io/edgebundle/">https://schochastics.github.io/edgebundle/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/schochastics/edgebundle/issues">https://github.com/schochastics/edgebundle/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.0.0), network, tidygraph</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, igraph, reticulate, interp</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-16 05:47:06 UTC; david</td>
</tr>
<tr>
<td>Author:</td>
<td>David Schoch <a href="https://orcid.org/0000-0003-2952-4812"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Schoch &lt;david@schochastics.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-16 06:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='edgebundle-package'>edgebundle: Algorithms for Bundling Edges in Networks and Visualizing Flow and Metro Maps</h2><span id='topic+edgebundle'></span><span id='topic+edgebundle-package'></span>

<h3>Description</h3>

<p>An R package that implements several edge bundling/flow and metro map algorithms.
It includes:
</p>

<ul>
<li><p> Force directed edge bundling <code>edge_bundle_force()</code>
</p>
</li>
<li><p> Stub bundling  <code>edge_bundle_stub()</code>
</p>
</li>
<li><p> Hammer bundling  <code>edge_bundle_hammer()</code>
</p>
</li>
<li><p> Edge-path bundling  <code>edge_bundle_path()</code>
</p>
</li>
<li><p> TNSS flow map <code style="white-space: pre;">&#8288;tnss_*()&#8288;</code>
</p>
</li>
<li><p> Multicriteria Metro map layout <code>metro_multicriteria()</code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: David Schoch <a href="mailto:david@schochastics.net">david@schochastics.net</a> (<a href="https://orcid.org/0000-0003-2952-4812">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/schochastics/edgebundle">https://github.com/schochastics/edgebundle</a>
</p>
</li>
<li> <p><a href="https://schochastics.github.io/edgebundle/">https://schochastics.github.io/edgebundle/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/schochastics/edgebundle/issues">https://github.com/schochastics/edgebundle/issues</a>
</p>
</li></ul>


<hr>
<h2 id='cali2010'>Migration from California in 2010</h2><span id='topic+cali2010'></span>

<h3>Description</h3>

<p>A dataset containing the number of people who migrated from California to other US states
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cali2010
</code></pre>


<h3>Format</h3>

<p>igraph object
</p>


<h3>Source</h3>

<p><a href="https://www.census.gov/data/tables/time-series/demo/geographic-mobility/state-to-state-migration.html">https://www.census.gov/data/tables/time-series/demo/geographic-mobility/state-to-state-migration.html</a>
</p>

<hr>
<h2 id='convert_edges'>Convert edges</h2><span id='topic+convert_edges'></span><span id='topic+convert_edges.default'></span><span id='topic+convert_edges.igraph'></span><span id='topic+convert_edges.network'></span><span id='topic+convert_edges.tbl_graph'></span>

<h3>Description</h3>

<p>converts edges of an igraph/network/tidygraph object into format useable for edge bundling
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_edges(object, coords)

## Default S3 method:
convert_edges(object, coords)

## S3 method for class 'igraph'
convert_edges(object, coords)

## S3 method for class 'network'
convert_edges(object, coords)

## S3 method for class 'tbl_graph'
convert_edges(object, coords)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_edges_+3A_object">object</code></td>
<td>
<p>graph object</p>
</td></tr>
<tr><td><code id="convert_edges_+3A_coords">coords</code></td>
<td>
<p>coordinates of vertices</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of edges with coordinates
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>

<hr>
<h2 id='edge_bundle_force'>force directed edge bundling</h2><span id='topic+edge_bundle_force'></span>

<h3>Description</h3>

<p>Implements the classic edge bundling by Holten.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edge_bundle_force(
  object,
  xy,
  K = 1,
  C = 6,
  P = 1,
  S = 0.04,
  P_rate = 2,
  I = 50,
  I_rate = 2/3,
  compatibility_threshold = 0.6,
  eps = 1e-08
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edge_bundle_force_+3A_object">object</code></td>
<td>
<p>a graph object (igraph/network/tbl_graph)</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_xy">xy</code></td>
<td>
<p>coordinates of vertices</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_k">K</code></td>
<td>
<p>spring constant</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_c">C</code></td>
<td>
<p>number of iteration cycles</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_p">P</code></td>
<td>
<p>number of initial edge divisions</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_s">S</code></td>
<td>
<p>initial step size</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_p_rate">P_rate</code></td>
<td>
<p>rate of edge divisions</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_i">I</code></td>
<td>
<p>number of initial iterations</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_i_rate">I_rate</code></td>
<td>
<p>rate of iteration decrease per cycle</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_compatibility_threshold">compatibility_threshold</code></td>
<td>
<p>threshold for when edges are considered compatible</p>
</td></tr>
<tr><td><code id="edge_bundle_force_+3A_eps">eps</code></td>
<td>
<p>accuracy</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a re-implementation of https://github.com/upphiminn/d3.ForceBundle. Force directed edge bundling is slow (O(E^2)).
</p>
<p>see <a href="https://github.com/schochastics/edgebundle">online</a> for plotting tips
</p>


<h3>Value</h3>

<p>data.frame containing the bundled edges
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Holten, Danny, and Jarke J. Van Wijk. &quot;Force-Directed Edge Bundling for Graph Visualization.&quot; Computer Graphics Forum (Blackwell Publishing Ltd) 28, no. 3 (2009): 983-990.
</p>


<h3>See Also</h3>

<p><a href="#topic+edge_bundle_hammer">edge_bundle_hammer</a>,<a href="#topic+edge_bundle_stub">edge_bundle_stub</a>,<a href="#topic+edge_bundle_path">edge_bundle_path</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(igraph)
g &lt;- graph_from_edgelist(
    matrix(c(
        1, 12, 2, 11, 3, 10,
        4, 9, 5, 8, 6, 7
    ), ncol = 2, byrow = TRUE), FALSE
)
xy &lt;- cbind(c(rep(0, 6), rep(1, 6)), c(1:6, 1:6))
edge_bundle_force(g, xy)
</code></pre>

<hr>
<h2 id='edge_bundle_hammer'>hammer edge bundling</h2><span id='topic+edge_bundle_hammer'></span>

<h3>Description</h3>

<p>Implements the hammer edge bundling by Ian Calvert.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edge_bundle_hammer(object, xy, bw = 0.05, decay = 0.7)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edge_bundle_hammer_+3A_object">object</code></td>
<td>
<p>a graph object (igraph/network/tbl_graph)</p>
</td></tr>
<tr><td><code id="edge_bundle_hammer_+3A_xy">xy</code></td>
<td>
<p>coordinates of vertices</p>
</td></tr>
<tr><td><code id="edge_bundle_hammer_+3A_bw">bw</code></td>
<td>
<p>bandwidth parameter</p>
</td></tr>
<tr><td><code id="edge_bundle_hammer_+3A_decay">decay</code></td>
<td>
<p>decay parameter</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function only wraps existing python code from the datashader library. Original code can be found at https://gitlab.com/ianjcalvert/edgehammer.
Datashader is a huge library with a lot of dependencies, so think twice if you want to install it just for edge bundling.
Check https://datashader.org/user_guide/Networks.html for help concerning parameters bw and decay.
To install all dependencies, use <a href="#topic+install_bundle_py">install_bundle_py</a>.
</p>
<p>see <a href="https://github.com/schochastics/edgebundle">online</a> for plotting tips
</p>


<h3>Value</h3>

<p>data.frame containing the bundled edges
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>See Also</h3>

<p><a href="#topic+edge_bundle_force">edge_bundle_force</a>,<a href="#topic+edge_bundle_stub">edge_bundle_stub</a>, <a href="#topic+edge_bundle_path">edge_bundle_path</a>
</p>

<hr>
<h2 id='edge_bundle_path'>Edge-Path Bundling</h2><span id='topic+edge_bundle_path'></span>

<h3>Description</h3>

<p>Implements edge-path bundling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edge_bundle_path(g, xy, max_distortion = 2, weight_fac = 2, segments = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edge_bundle_path_+3A_g">g</code></td>
<td>
<p>an igraph object</p>
</td></tr>
<tr><td><code id="edge_bundle_path_+3A_xy">xy</code></td>
<td>
<p>coordinates of vertices</p>
</td></tr>
<tr><td><code id="edge_bundle_path_+3A_max_distortion">max_distortion</code></td>
<td>
<p>maximum distortion</p>
</td></tr>
<tr><td><code id="edge_bundle_path_+3A_weight_fac">weight_fac</code></td>
<td>
<p>edge weight factor</p>
</td></tr>
<tr><td><code id="edge_bundle_path_+3A_segments">segments</code></td>
<td>
<p>number of subdivisions of edges</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a re-implementation of https://github.com/mwallinger-tu/edge-path-bundling
</p>
<p>see <a href="https://github.com/schochastics/edgebundle">online</a> for plotting tips
</p>


<h3>Value</h3>

<p>data.frame containing the bundled edges
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Wallinger, M., Archambault, D., Auber, D., Nollenburg, M., &amp; Peltonen, J. (2021). Edge-Path Bundling: A Less Ambiguous Edge Bundling Approach. IEEE Transactions on Visualization and Computer Graphics.
</p>


<h3>See Also</h3>

<p><a href="#topic+edge_bundle_hammer">edge_bundle_hammer</a>,<a href="#topic+edge_bundle_stub">edge_bundle_stub</a>,<a href="#topic+edge_bundle_force">edge_bundle_force</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(igraph)
g &lt;- graph_from_edgelist(matrix(c(
    1, 2, 1, 6,
    1, 4, 2, 3, 3, 4, 4, 5, 5, 6
), ncol = 2, byrow = TRUE), FALSE)
xy &lt;- cbind(c(0, 10, 25, 40, 50, 50), c(0, 15, 25, 15, 0, -10))
edge_bundle_path(g, xy)
</code></pre>

<hr>
<h2 id='edge_bundle_stub'>stub edge bundling</h2><span id='topic+edge_bundle_stub'></span>

<h3>Description</h3>

<p>Implements the stub edge bundling by Nocaj and Brandes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edge_bundle_stub(
  object,
  xy,
  alpha = 11,
  beta = 75,
  gamma = 40,
  t = 0.5,
  tshift = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edge_bundle_stub_+3A_object">object</code></td>
<td>
<p>a graph object (igraph/tbl_graph). Does not support network objects</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_xy">xy</code></td>
<td>
<p>coordinates of vertices</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_alpha">alpha</code></td>
<td>
<p>maximal angle (in degree) between consecutive edges in a bundle</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_beta">beta</code></td>
<td>
<p>angle (in degree) at which to connect two stubs</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_gamma">gamma</code></td>
<td>
<p>maximal overall angle (in degree) of an edge bundle</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_t">t</code></td>
<td>
<p>numeric between 0 and 1. control point location</p>
</td></tr>
<tr><td><code id="edge_bundle_stub_+3A_tshift">tshift</code></td>
<td>
<p>numeric between 0 and 1. The closer to one, the longer the bigger bundle</p>
</td></tr>
</table>


<h3>Details</h3>

<p>see <a href="https://github.com/schochastics/edgebundle">online</a> for plotting tips
</p>


<h3>Value</h3>

<p>data.frame containing the bundled edges
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Nocaj, Arlind, and Ulrik Brandes. &quot;Stub bundling and confluent spirals for geographic networks.&quot; International Symposium on Graph Drawing. Springer, Cham, 2013.
</p>


<h3>See Also</h3>

<p><a href="#topic+edge_bundle_hammer">edge_bundle_hammer</a>,<a href="#topic+edge_bundle_force">edge_bundle_force</a>, <a href="#topic+edge_bundle_path">edge_bundle_path</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(igraph)
g &lt;- graph.star(10, "undirected")

xy &lt;- matrix(c(
    0, 0,
    cos(90 * pi / 180), sin(90 * pi / 180),
    cos(80 * pi / 180), sin(80 * pi / 180),
    cos(70 * pi / 180), sin(70 * pi / 180),
    cos(330 * pi / 180), sin(330 * pi / 180),
    cos(320 * pi / 180), sin(320 * pi / 180),
    cos(310 * pi / 180), sin(310 * pi / 180),
    cos(210 * pi / 180), sin(210 * pi / 180),
    cos(200 * pi / 180), sin(200 * pi / 180),
    cos(190 * pi / 180), sin(190 * pi / 180)
), ncol = 2, byrow = TRUE)

edge_bundle_stub(g, xy)
# use ggforce::geom_bezier for plotting
</code></pre>

<hr>
<h2 id='install_bundle_py'>install python dependencies for hammer bundling</h2><span id='topic+install_bundle_py'></span>

<h3>Description</h3>

<p>install datashader and scikit-image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_bundle_py(method = "auto", conda = "auto")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_bundle_py_+3A_method">method</code></td>
<td>
<p>Installation method (by default, &quot;auto&quot; automatically finds a
method that will work in the local environment, but note that the
&quot;virtualenv&quot; method is not available on Windows)</p>
</td></tr>
<tr><td><code id="install_bundle_py_+3A_conda">conda</code></td>
<td>
<p>Path to conda executable (or &quot;auto&quot; to find conda using the PATH
and other conventional install locations)</p>
</td></tr>
</table>

<hr>
<h2 id='metro_berlin'>Subway network of Berlin</h2><span id='topic+metro_berlin'></span>

<h3>Description</h3>

<p>A dataset containing the subway network of Berlin
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_berlin
</code></pre>


<h3>Format</h3>

<p>igraph object
</p>


<h3>References</h3>

<p>Kujala, Rainer, et al. &quot;A collection of public transport network data sets for 25 cities.&quot; Scientific data 5 (2018): 180089.
</p>

<hr>
<h2 id='metro_multicriteria'>Metro Map Layout</h2><span id='topic+metro_multicriteria'></span>

<h3>Description</h3>

<p>Metro map layout based on multicriteria optimization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_multicriteria(object, xy, l = 2, gr = 0.0025, w = rep(1, 5), bsize = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="metro_multicriteria_+3A_object">object</code></td>
<td>
<p>original graph</p>
</td></tr>
<tr><td><code id="metro_multicriteria_+3A_xy">xy</code></td>
<td>
<p>initial layout of the original graph</p>
</td></tr>
<tr><td><code id="metro_multicriteria_+3A_l">l</code></td>
<td>
<p>desired multiple of grid point spacing. (l*gr determines desired edge length)</p>
</td></tr>
<tr><td><code id="metro_multicriteria_+3A_gr">gr</code></td>
<td>
<p>grid spacing. (l*gr determines desired edge length)</p>
</td></tr>
<tr><td><code id="metro_multicriteria_+3A_w">w</code></td>
<td>
<p>weight vector for criteria (see details)</p>
</td></tr>
<tr><td><code id="metro_multicriteria_+3A_bsize">bsize</code></td>
<td>
<p>number of grid points a station can move away rom its original position</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function optimizes the following five criteria using a hill climbing algorithm:
</p>

<ul>
<li> <p><em>Angular Resolution Criterion</em>: The angles of incident edges at each station should be maximized, because if there is only a small angle between any two adjacent edges, then it can become difficult to distinguish between them
</p>
</li>
<li> <p><em>Edge Length Criterion</em>: The edge lengths across the whole map should be approximately equal to ensure regular spacing between stations. It is based on the preferred multiple, l, of the grid spacing, g. The purpose of the criterion is to penalize edges that are longer than or shorter than lg.
</p>
</li>
<li> <p><em>Balanced Edge Length Criterion</em>: The length of edges incident to a particular station should be similar
</p>
</li>
<li> <p><em>Line Straightness Criterion</em>: (not yet implemented) Edges that form part of a line should, where possible, be co-linear either side of each station that the line passes through
</p>
</li>
<li> <p><em>Octiinearity Criterion</em>: Each edge should be drawn horizontally, vertically, or diagonally at 45 degree, so we penalize edges that are not at a desired angle
see <a href="https://github.com/schochastics/edgebundle">online</a> for more plotting tips
</p>
</li></ul>



<h3>Value</h3>

<p>new coordinates for stations
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Stott, Jonathan, et al. &quot;Automatic metro map layout using multicriteria optimization.&quot; IEEE Transactions on Visualization and Computer Graphics 17.1 (2010): 101-114.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the algorithm has problems with parallel edges
library(igraph)
g &lt;- simplify(metro_berlin)
xy &lt;- cbind(V(g)$lon, V(g)$lat) * 100

# the algorithm is not very stable. try playing with the parameters
xy_new &lt;- metro_multicriteria(g, xy, l = 2, gr = 0.5, w = c(100, 100, 1, 1, 100), bsize = 35)
</code></pre>

<hr>
<h2 id='tnss_dummies'>Sample points for triangulated networks</h2><span id='topic+tnss_dummies'></span>

<h3>Description</h3>

<p>uses various sampling strategies to create dummy nodes for the <a href="#topic+tnss_tree">tnss_tree</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tnss_dummies(
  xy,
  root,
  circ = TRUE,
  line = TRUE,
  diag = TRUE,
  grid = FALSE,
  rand = FALSE,
  ncirc = 9,
  rcirc = 2,
  nline = 10,
  ndiag = 50,
  ngrid = 50,
  nrand = 50
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tnss_dummies_+3A_xy">xy</code></td>
<td>
<p>coordinates of &quot;real&quot; nodes</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_root">root</code></td>
<td>
<p>root node id</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_circ">circ</code></td>
<td>
<p>logical. create circular dummy nodes around leafs.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_line">line</code></td>
<td>
<p>logical. create dummy nodes on a straight line between root and leafs.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_diag">diag</code></td>
<td>
<p>logical. create dummy nodes diagonally through space.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_grid">grid</code></td>
<td>
<p>logical. create dummy nodes on a grid.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_rand">rand</code></td>
<td>
<p>logical. create random dummy nodes.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_ncirc">ncirc</code></td>
<td>
<p>numeric. number of circular dummy nodes per leaf.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_rcirc">rcirc</code></td>
<td>
<p>numeric. radius of circles around leaf nodes.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_nline">nline</code></td>
<td>
<p>numeric. number of straight line nodes per leaf.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_ndiag">ndiag</code></td>
<td>
<p>numeric. number of dummy nodes on diagonals.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_ngrid">ngrid</code></td>
<td>
<p>numeric. number of dummy nodes per dim on grid.</p>
</td></tr>
<tr><td><code id="tnss_dummies_+3A_nrand">nrand</code></td>
<td>
<p>numeric. number of random nodes to create.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>coordinates of dummy nodes
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>Examples</h3>

<pre><code class='language-R'># dummy nodes for tree rooted in California
xy &lt;- cbind(state.center$x, state.center$y)
xy_dummy &lt;- tnss_dummies(xy, 4)
</code></pre>

<hr>
<h2 id='tnss_smooth'>Smooth a Steiner tree</h2><span id='topic+tnss_smooth'></span>

<h3>Description</h3>

<p>Converts the Steiner tree to smooth paths
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tnss_smooth(g, bw = 3, n = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tnss_smooth_+3A_g">g</code></td>
<td>
<p>Steiner tree computed with <a href="#topic+tnss_tree">tnss_tree</a></p>
</td></tr>
<tr><td><code id="tnss_smooth_+3A_bw">bw</code></td>
<td>
<p>bandwidth of Gaussian Kernel</p>
</td></tr>
<tr><td><code id="tnss_smooth_+3A_n">n</code></td>
<td>
<p>number of extra nodes to include per edge</p>
</td></tr>
</table>


<h3>Details</h3>

<p>see see <a href="https://github.com/schochastics/edgebundle">online</a> for tips on plotting the result
</p>


<h3>Value</h3>

<p>data.frame containing the smoothed paths
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xy &lt;- cbind(state.center$x, state.center$y)[!state.name %in% c("Alaska", "Hawaii"), ]
xy_dummy &lt;- tnss_dummies(xy, root = 4)
gtree &lt;- tnss_tree(cali2010, xy, xy_dummy, root = 4, gamma = 0.9)
tree_smooth &lt;- tnss_smooth(gtree, bw = 10, n = 10)
</code></pre>

<hr>
<h2 id='tnss_tree'>Create Steiner tree from real and dummy points</h2><span id='topic+tnss_tree'></span>

<h3>Description</h3>

<p>creates an approximated Steiner tree for a flow map visualization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tnss_tree(
  g,
  xy,
  xydummy,
  root,
  gamma = 0.9,
  epsilon = 0.3,
  elen = Inf,
  order = "random"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tnss_tree_+3A_g">g</code></td>
<td>
<p>original flow network (must be a one-to-many flow network, i.e star graph). Must have a weight attribute indicating the flow</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_xy">xy</code></td>
<td>
<p>coordinates of &quot;real&quot; nodes</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_xydummy">xydummy</code></td>
<td>
<p>coordinates of &quot;dummy&quot; nodes</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_root">root</code></td>
<td>
<p>root node id of the flow</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_gamma">gamma</code></td>
<td>
<p>edge length decay parameter</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_epsilon">epsilon</code></td>
<td>
<p>percentage of points keept on a line after straightening with Visvalingam Algorithm</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_elen">elen</code></td>
<td>
<p>maximal length of edges in triangulation</p>
</td></tr>
<tr><td><code id="tnss_tree_+3A_order">order</code></td>
<td>
<p>in which order shortest paths are calculated (&quot;random&quot;,&quot;weight&quot;,&quot;near&quot;,&quot;far&quot;)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use <a href="#topic+tnss_smooth">tnss_smooth</a> to smooth the edges of the tree
</p>


<h3>Value</h3>

<p>approximated Steiner tree from dummy and real nodes as igraph object
</p>


<h3>Author(s)</h3>

<p>David Schoch
</p>


<h3>References</h3>

<p>Sun, Shipeng. &quot;An automated spatial flow layout algorithm using triangulation, approximate Steiner tree, and path smoothing.&quot; AutoCarto, 2016.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xy &lt;- cbind(state.center$x, state.center$y)[!state.name %in% c("Alaska", "Hawaii"), ]
xy_dummy &lt;- tnss_dummies(xy, root = 4)
gtree &lt;- tnss_tree(cali2010, xy, xy_dummy, root = 4, gamma = 0.9)
</code></pre>

<hr>
<h2 id='us_flights'>Flights within the US</h2><span id='topic+us_flights'></span>

<h3>Description</h3>

<p>A dataset containing flights between US airports as igraph object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>us_flights
</code></pre>


<h3>Format</h3>

<p>igraph object
</p>


<h3>Source</h3>

<p><a href="https://gist.githubusercontent.com/mbostock/7608400/raw">https://gist.githubusercontent.com/mbostock/7608400/raw</a>
</p>

<hr>
<h2 id='us_migration'>Migration within the US 2010-2019</h2><span id='topic+us_migration'></span>

<h3>Description</h3>

<p>A dataset containing the number of people migrating between US states from 2010-2019
</p>


<h3>Usage</h3>

<pre><code class='language-R'>us_migration
</code></pre>


<h3>Format</h3>

<p>data.frame
</p>


<h3>Source</h3>

<p><a href="https://www.census.gov/data/tables/time-series/demo/geographic-mobility/state-to-state-migration.html">https://www.census.gov/data/tables/time-series/demo/geographic-mobility/state-to-state-migration.html</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
