<!DOCTYPE html><html><head><title>Help for package conformalInference.fd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {conformalInference.fd}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bike_log'><p>Log of all bike rentals in Milan in 2016 form January to March.</p></a></li>
<li><a href='#bike_regressors'><p>Regressors to model the log of all bike rentals in Milan in 2016.</p></a></li>
<li><a href='#computing_s_regression'><p>COMPUTING THE MODULATION FUNCTION S</p></a></li>
<li><a href='#concurrent'><p>Concurrent Model for Functional Regression</p></a></li>
<li><a href='#conformal.fun.jackplus'><p>Functional Jackknife + Prediction Regions</p></a></li>
<li><a href='#conformal.fun.msplit'><p>Functional Multi Split Conformal Prediction Regions</p></a></li>
<li><a href='#conformal.fun.split'><p>Functional Split Conformal Prediction Intervals</p></a></li>
<li><a href='#conformalInference.fd-package'><p>Tools for Conformal Inference for Regression in Multivariate</p>
Functional Setting</a></li>
<li><a href='#mean_lists'><p>Mean of Functional Data</p></a></li>
<li><a href='#plot_fun'><p>Plot Functional Split Conformal Confidence Bands</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools for Conformal Inference for Regression in Multivariate
Functional Setting</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>It computes full conformal, split conformal and multi split
    conformal prediction regions when the response has functional nature.
    Moreover, the package also contain a plot function to visualize the
    output of the split conformal.
    To guarantee consistency, the package structure mimics the univariate 
    'conformalInference' package of professor Ryan Tibshirani.
    The main references for the code are: 
    Diquigiovanni, Fontana, and Vantini (2021) &lt;<a href="https://arxiv.org/abs/2102.06746">arXiv:2102.06746</a>&gt;, 
    Diquigiovanni, Fontana, and Vantini (2021) &lt;<a href="https://arxiv.org/abs/2106.01792">arXiv:2106.01792</a>&gt;,
    Solari, and Djordjilovic (2021) &lt;<a href="https://arxiv.org/abs/2103.00627">arXiv:2103.00627</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ryantibs/conformal">https://github.com/ryantibs/conformal</a> ,
<a href="https://github.com/paolo-vergo/conformalInference.fd">https://github.com/paolo-vergo/conformalInference.fd</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>fda (&ge; 5.5.1), future (&ge; 1.23.0), future.apply (&ge; 1.8.1),
ggplot2 (&ge; 3.3.5), stats, utils, methods, ggnewscale, ggpubr,
scales,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>roahd, pbapply</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-23 10:43:06 UTC; paolo</td>
</tr>
<tr>
<td>Author:</td>
<td>Jacopo Diquigiovanni [aut, ths],
  Matteo Fontana [aut, ths],
  Aldo Solari [aut, ths],
  Simone Vantini [aut, ths],
  Paolo Vergottini [aut, cre],
  Ryan Tibshirani [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paolo Vergottini &lt;paolo.vergottini@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-23 11:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bike_log'>Log of all bike rentals in Milan in 2016 form January to March.</h2><span id='topic+bike_log'></span>

<h3>Description</h3>

<p>A dataset containing the log of all the bike trips in Milan (using the BikeMi
service), in the period from 25th of January to the 6th of March from Duomo to Duomo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bike_log
</code></pre>


<h3>Format</h3>

<p>A list of 41 observed days, each containing a list of 2 components:
one which indicates the number of bike trips starting from Duomo at hour t and
the other about the number of trips ending in Duomo at time t. Therefore each
component is made up by 90 time steps, ranging from 7.00 A.M. to 1.00 A.M.
Therefore each
component is made up by 90 time steps, ranging from 7.00 A.M. to 1.00 A.M.
</p>

<dl>
<dt>start</dt><dd><p>number of departing trips from Duomo</p>
</dd>
<dt>end</dt><dd><p>number of ending trips in Duomo</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.mate.polimi.it/biblioteca/add/qmox/19-2019.pdf">https://www.mate.polimi.it/biblioteca/add/qmox/19-2019.pdf</a>
</p>

<hr>
<h2 id='bike_regressors'>Regressors to model the log of all bike rentals in Milan in 2016.</h2><span id='topic+bike_regressors'></span>

<h3>Description</h3>

<p>A dataset containing temperature and humidity data to model the bike flows from
Milano's Duomo district to itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bike_regressors
</code></pre>


<h3>Format</h3>

<p>A list of 41 observed days, each containing a list of 4 components:
a flag indicating whether the day is part of the weekend or not, the amount of
rain at a given time t of the day (in mm), the difference between the mean temperature
in the last few days and the actual temperature at time t and an interaction
term between weekend and rain.
</p>

<dl>
<dt>weekend</dt><dd><p>flag for weekend</p>
</dd>
<dt>rain</dt><dd><p>amount of rain (in mm)</p>
</dd>
<dt>dtemp</dt><dd><p>different in temperature w.r.t. the last days</p>
</dd>
<dt>weekend_rain</dt><dd><p>interaction term among rain and weekend</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.mate.polimi.it/biblioteca/add/qmox/19-2019.pdf">https://www.mate.polimi.it/biblioteca/add/qmox/19-2019.pdf</a>
</p>

<hr>
<h2 id='computing_s_regression'>COMPUTING THE MODULATION FUNCTION S</h2><span id='topic+computing_s_regression'></span>

<h3>Description</h3>

<p>It computes modulation functions which allows local scaling of the prediction bands
.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computing_s_regression(vec_residual, type, alpha, tau, grid_size)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computing_s_regression_+3A_vec_residual">vec_residual</code></td>
<td>
<p>A vector of the residuals obtained via functional modeling.</p>
</td></tr>
<tr><td><code id="computing_s_regression_+3A_type">type</code></td>
<td>
<p>A string indicating the type of modulation function chosen.
The alternatives are &quot;identity&quot;,&quot;st-dev&quot;,&quot;alpha-max&quot;.</p>
</td></tr>
<tr><td><code id="computing_s_regression_+3A_alpha">alpha</code></td>
<td>
<p>The value of the confidence interval.</p>
</td></tr>
<tr><td><code id="computing_s_regression_+3A_tau">tau</code></td>
<td>
<p>A number between 0 and 1 used for the randomized version of the
algorithm.</p>
</td></tr>
<tr><td><code id="computing_s_regression_+3A_grid_size">grid_size</code></td>
<td>
<p>A vector containing the number of grid points in each dimension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>More details can be found in the help of <code><a href="#topic+conformal.fun.split">conformal.fun.split</a></code> function.
</p>


<h3>Value</h3>

<p>It returns a the values of a modulation function in each dimension of the
response.
</p>

<hr>
<h2 id='concurrent'>Concurrent Model for Functional Regression</h2><span id='topic+concurrent'></span>

<h3>Description</h3>

<p>It is a concurrent model, which may be fed to <code><a href="#topic+conformal.fun.split">conformal.fun.split</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>concurrent()
</code></pre>


<h3>Details</h3>

<p>For more details about the structure of the inputs go to split.R
</p>


<h3>Value</h3>

<p>A training and a prediction function.
</p>

<hr>
<h2 id='conformal.fun.jackplus'>Functional Jackknife + Prediction Regions</h2><span id='topic+conformal.fun.jackplus'></span>

<h3>Description</h3>

<p>Compute prediction regions using functional Jackknife + inference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conformal.fun.jackplus(x, t_x, y, t_y, x0, train.fun, predict.fun, alpha = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conformal.fun.jackplus_+3A_x">x</code></td>
<td>
<p>The input variable, a list of n elements. Each element is composed by a list
of p vectors(with variable length, since the evaluation grid may change).
If x is NULL, the function will sample it from a gaussian.</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_t_x">t_x</code></td>
<td>
<p>The grid points for the evaluation of function x. It is a list of vectors.
If the x data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_y">y</code></td>
<td>
<p>The response variable. It is either, as with x, a list of list of
vectors or an fda object (of type fd, fData, mfData).</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_t_y">t_y</code></td>
<td>
<p>The grid points for the evaluation of function y_val. It is a list of vectors.
If the y_val data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_x0">x0</code></td>
<td>
<p>The new points to evaluate, a list of n0 elements. Each element is composed
by a list of p vectors(with variable length).</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_train.fun">train.fun</code></td>
<td>
<p>A function to perform model training, i.e., to produce an
estimator of E(Y|X), the conditional expectation of the response variable
Y given features X. Its input arguments should be x: list of features,
and y: list of responses.</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_predict.fun">predict.fun</code></td>
<td>
<p>A function to perform prediction for the (mean of the)
responses at new feature values. Its input arguments should be out: output
produced by train.fun, and newx: feature values at which we want to make
predictions.</p>
</td></tr>
<tr><td><code id="conformal.fun.jackplus_+3A_alpha">alpha</code></td>
<td>
<p>Miscoverage level for the prediction intervals, i.e., intervals
with coverage 1-alpha are formed. Default for alpha is 0.1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The work is an extension of the univariate approach to jackknife +
inference to a multivariate functional context, exploiting the concept of
depth measures.
</p>
<p>This function is based on the package future.apply to
perform parallelisation. If this package is not installed, then the function
will abort.
</p>


<h3>Value</h3>

<p>A list containing lo, up, tn. lo and up are lists of length n0,
containing lists of length p, with vectors of lower and upper bounds.
tn is the list of the grid evaluations.#'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(roahd)

N = 3
P= 3
grid = seq( 0, 1, length.out = P )
C = exp_cov_function( grid, alpha = 0.3, beta = 0.4 )
values = generate_gauss_fdata( N,
                                      centerline = sin( 2 * pi * grid ),
                                      Cov = C )
fD = fData( grid, values )
x0=list(as.list(grid))
fun=mean_lists()
x0=list(as.list(grid))
fun=mean_lists()
true.jack = conformal.fun.jackplus (x=NULL,t_x=NULL, y=fD,t_y=NULL,
                                    x0=list(x0[[1]]), fun$train.fun,
                                    fun$predict.fun,alpha=0.1)

</code></pre>

<hr>
<h2 id='conformal.fun.msplit'>Functional Multi Split Conformal Prediction Regions</h2><span id='topic+conformal.fun.msplit'></span>

<h3>Description</h3>

<p>Compute prediction regions using functional multi split conformal inference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conformal.fun.msplit(
  x,
  t_x,
  y,
  t_y,
  x0,
  train.fun,
  predict.fun,
  alpha = 0.1,
  split = NULL,
  seed = FALSE,
  randomized = FALSE,
  seed.rand = FALSE,
  verbose = FALSE,
  rho = NULL,
  s.type = "alpha-max",
  B = 50,
  lambda = 0,
  tau = 0.08
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conformal.fun.msplit_+3A_x">x</code></td>
<td>
<p>The input variable, a list of n elements. Each element is composed by a list
of p vectors(with variable length, since the evaluation grid may change).
If x is NULL, the function will sample it from a gaussian.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_t_x">t_x</code></td>
<td>
<p>The grid points for the evaluation of function x. It is a list of vectors.
If the x data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_y">y</code></td>
<td>
<p>The response variable. It is either, as with x, a list of list of
vectors or an fda object (of type fd, fData, mfData).</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_t_y">t_y</code></td>
<td>
<p>The grid points for the evaluation of function y_val. It is a list of vectors.
If the y_val data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_x0">x0</code></td>
<td>
<p>The new points to evaluate, a list of n0 elements. Each element is composed
by a list of p vectors(with variable length).</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_train.fun">train.fun</code></td>
<td>
<p>A function to perform model training, i.e., to produce an
estimator of E(Y|X), the conditional expectation of the response variable
Y given features X. Its input arguments should be x: list of features,
and y: list of responses.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_predict.fun">predict.fun</code></td>
<td>
<p>A function to perform prediction for the (mean of the)
responses at new feature values. Its input arguments should be out: output
produced by train.fun, and newx: feature values at which we want to make
predictions.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_alpha">alpha</code></td>
<td>
<p>Miscoverage level for the prediction intervals, i.e., intervals
with coverage 1-alpha are formed. Default for alpha is 0.1.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_split">split</code></td>
<td>
<p>Indices that define the data-split to be used (i.e., the indices
define the first half of the data-split, on which the model is trained).
Default is NULL, in which case the split is chosen randomly.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_seed">seed</code></td>
<td>
<p>Integer to be passed to set.seed before defining the random
data-split to be used. Default is FALSE, which effectively sets no seed.
If both split and seed are passed, the former takes priority and the latter
is ignored.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_randomized">randomized</code></td>
<td>
<p>Should the randomized approach be used? Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_seed.rand">seed.rand</code></td>
<td>
<p>The seed for the randomized version of the conformal.split.fun.
Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_verbose">verbose</code></td>
<td>
<p>Should intermediate progress be printed out? Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_rho">rho</code></td>
<td>
<p>Vector containing the split proportion between
training and calibration set.
It has B components. Default is 0.5.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_s.type">s.type</code></td>
<td>
<p>The type of modulation function.
Currently we have 3 options: &quot;identity&quot;,&quot;st-dev&quot;,&quot;alpha-max&quot;.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_b">B</code></td>
<td>
<p>Number of repetitions. Default is 100.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_lambda">lambda</code></td>
<td>
<p>Smoothing parameter. Default is 0.</p>
</td></tr>
<tr><td><code id="conformal.fun.msplit_+3A_tau">tau</code></td>
<td>
<p>It is a smoothing parameter:
tau=1-1/B  Bonferroni intersection method
tau=0 unadjusted intersection
Default is 0.05, a value selected through sensitivity analysis .</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The work is an extension of the univariate approach to Multi Split
conformal inference to a multivariate functional context, exploiting the concept of
depth measures.
</p>
<p>This function is based on the package future.apply to
perform parallelisation. If this package is not installed, then the function
will abort.
</p>


<h3>Value</h3>

<p>A list containing lo, up, tn. lo and up are lists of length n0,
containing lists of length p, with vectors of lower and upper bounds.
tn is the list of the grid evaluations.
</p>


<h3>References</h3>

<p>&quot;Multi Split Conformal Prediction&quot; by Solari, Djordjilovic (2021) is
the baseline for the univariate case.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(roahd)

N = 10
P= 5
grid = seq( 0, 1, length.out = P )
C = exp_cov_function( grid, alpha = 0.3, beta = 0.4 )
values = generate_gauss_fdata( N,
                                      centerline = sin( 2 * pi * grid ),
                                      Cov = C )
fD = fData( grid, values )
x0=list(as.list(grid))
fun=mean_lists()
rrr&lt;-conformal.fun.msplit(x=NULL,t_x=NULL, y=fD,t_y=NULL, x0=list(x0[[1]]),
                          fun$train.fun, fun$predict.fun,alpha=0.2,
                          split=NULL, seed=FALSE, randomized=FALSE,seed.rand=FALSE,
                          verbose=FALSE, rho=NULL,B=2,lambda=0)


</code></pre>

<hr>
<h2 id='conformal.fun.split'>Functional Split Conformal Prediction Intervals</h2><span id='topic+conformal.fun.split'></span>

<h3>Description</h3>

<p>Compute prediction intervals using split conformal inference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conformal.fun.split(
  x,
  t_x,
  y,
  t_y,
  x0,
  train.fun,
  predict.fun,
  alpha = 0.1,
  split = NULL,
  seed = FALSE,
  randomized = FALSE,
  seed.rand = FALSE,
  verbose = FALSE,
  rho = 0.5,
  s.type = "st-dev"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conformal.fun.split_+3A_x">x</code></td>
<td>
<p>The input variable, a list of n elements. Each element is composed by a list
of p vectors(with variable length, since the evaluation grid may change).
If x is NULL, the function will sample it from a gaussian.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_t_x">t_x</code></td>
<td>
<p>The grid points for the evaluation of function x. It is a list of vectors.
If the x data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_y">y</code></td>
<td>
<p>The response variable. It is either, as with x, a list of list of
vectors or an fda object (of type fd, fData, mfData).</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_t_y">t_y</code></td>
<td>
<p>The grid points for the evaluation of function y_val. It is a list of vectors.
If the y_val data type is &quot;fData&quot; or &quot;mfData&quot; is must be NULL.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_x0">x0</code></td>
<td>
<p>The new points to evaluate, a list of n0 elements. Each element is composed
by a list of p vectors(with variable length).</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_train.fun">train.fun</code></td>
<td>
<p>A function to perform model training, i.e., to produce an
estimator of E(Y|X), the conditional expectation of the response variable
Y given features X. Its input arguments should be x: list of features,
and y: list of responses.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_predict.fun">predict.fun</code></td>
<td>
<p>A function to perform prediction for the (mean of the)
responses at new feature values. Its input arguments should be out: output
produced by train.fun, and newx: feature values at which we want to make
predictions.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_alpha">alpha</code></td>
<td>
<p>Miscoverage level for the prediction intervals, i.e., intervals
with coverage 1-alpha are formed. Default for alpha is 0.1.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_split">split</code></td>
<td>
<p>Indices that define the data-split to be used (i.e., the indices
define the first half of the data-split, on which the model is trained).
Default is NULL, in which case the split is chosen randomly.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_seed">seed</code></td>
<td>
<p>Integer to be passed to set.seed before defining the random
data-split to be used. Default is FALSE, which effectively sets no seed.
If both split and seed are passed, the former takes priority and the latter
is ignored.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_randomized">randomized</code></td>
<td>
<p>Should the randomized approach be used? Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_seed.rand">seed.rand</code></td>
<td>
<p>The seed for the randomized version.Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_verbose">verbose</code></td>
<td>
<p>Should intermediate progress be printed out? Default is FALSE.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_rho">rho</code></td>
<td>
<p>Split proportion between training and calibration set.
Default is 0.5.</p>
</td></tr>
<tr><td><code id="conformal.fun.split_+3A_s.type">s.type</code></td>
<td>
<p>The type of modulation function.
Currently we have 3 options: &quot;identity&quot;,&quot;st-dev&quot;,&quot;alpha-max&quot;. Default is &quot;std-dev&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following components: t,pred,average_width,lo, up.
t is a list of vectors,
pred has the same interval structure of y_val, but the outside list is of length n0,
lo and up are lists of length n0 of lists of length
p, each containing a vector of lower and upper bounds respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>###  mfData #

library(roahd)

N = 10
P= 5
grid = seq( 0, 1, length.out = P )
C = exp_cov_function( grid, alpha = 0.3, beta = 0.4 )
Data_1 = generate_gauss_fdata( N, centerline = sin( 2 * pi * grid ), Cov = C )
Data_2 = generate_gauss_fdata( N, centerline = log(1+ 2 * pi * grid ), Cov = C )
mfD=mfData( grid, list( Data_1, Data_2 ) )
x0=list(as.list(grid))
fun=mean_lists()
final.mfData = conformal.fun.split(NULL,NULL, mfD,NULL, x0, fun$train.fun, fun$predict.fun,
                             alpha=0.2,
                             split=NULL, seed=FALSE, randomized=FALSE,seed.rand=FALSE,
                             verbose=TRUE, rho=0.5,s.type="identity")




</code></pre>

<hr>
<h2 id='conformalInference.fd-package'>Tools for Conformal Inference for Regression in Multivariate
Functional Setting</h2><span id='topic+conformalInference.fd'></span><span id='topic+conformalInference.fd-package'></span>

<h3>Description</h3>

<p>It computes split conformal and multi split
conformal prediction regions when the response has functional nature.
Moreover, the package also contain a plot function to visualize the
output of the split conformal.
</p>


<h3>Details</h3>

<p>Conformal inference is a framework for converting any pre-chosen
estimator of
the regression function into prediction regions with finite-sample
validity, under essentially no assumptions on the data-generating process
(aside from the the assumption of i.i.d. observations). The main functions
in this package for computing such prediction regions are
<code><a href="#topic+conformal.fun.split">conformal.fun.split</a></code> , i.e. a single split, and
<code><a href="#topic+conformal.fun.msplit">conformal.fun.msplit</a></code> , i.e. joining B splits.
To guarantee consistency, the package structure mimics the univariate
'conformalInference' package of professor Ryan Tibshirani.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Paolo Vergottini <a href="mailto:paolo.vergottini@gmail.com">paolo.vergottini@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Jacopo Diquigiovanni [thesis advisor]
</p>
</li>
<li><p> Matteo Fontana <a href="mailto:matteo.fontana@ec.europa.eu">matteo.fontana@ec.europa.eu</a> [thesis advisor]
</p>
</li>
<li><p> Aldo Solari [thesis advisor]
</p>
</li>
<li><p> Simone Vantini [thesis advisor]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Ryan Tibshirani [contributor]
</p>
</li></ul>



<h3>References</h3>


<ul>
<li><p>&quot;Conformal Prediction Bands
for Multivariate Functional Data&quot; by Diquigiovanni, Fontana, and Vantini (2021)
&lt;arXiv:2106.01792&gt;
</p>
</li>
<li><p>&quot;The Importance of Being a Band: Finite-Sample Exact Distribution-Free
Prediction Sets for Functional Data&quot; by Diquigiovanni, Fontana, and Vantini (2021) &lt;arXiv:2102.06746&gt;
</p>
</li>
<li><p>&quot;Multi Split Conformal Prediction&quot; by Solari, and Djordjilovic (2021) &lt;arXiv:2103.00627&gt;
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ryantibs/conformal">https://github.com/ryantibs/conformal</a>
</p>
</li>
<li> <p><a href="https://github.com/paolo-vergo/conformalInference.fd">https://github.com/paolo-vergo/conformalInference.fd</a>
</p>
</li></ul>


<hr>
<h2 id='mean_lists'>Mean of Functional Data</h2><span id='topic+mean_lists'></span>

<h3>Description</h3>

<p>This model, which averages functional data, is a fed to a Functional Conformal Prediction
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_lists()
</code></pre>


<h3>Details</h3>

<p>For more details about the structure of the inputs go to the help of
<code><a href="#topic+conformal.fun.split">conformal.fun.split</a></code>
</p>


<h3>Value</h3>

<p>It outputs a training function and a prediction function.
</p>

<hr>
<h2 id='plot_fun'>Plot Functional Split Conformal Confidence Bands</h2><span id='topic+plot_fun'></span>

<h3>Description</h3>

<p>The function plots the confidence bands provided by the <code><a href="#topic+conformal.fun.split">conformal.fun.split</a></code> #'function, <code><a href="#topic+conformal.fun.msplit">conformal.fun.msplit</a></code> and <code><a href="#topic+conformal.fun.jackplus">conformal.fun.jackplus</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_fun(
  out,
  y0 = NULL,
  ylab = NULL,
  titles = NULL,
  date = NULL,
  ylim = NULL,
  fillc = "red"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_fun_+3A_out">out</code></td>
<td>
<p>The output of the split/msplit/jackknife+ function.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_y0">y0</code></td>
<td>
<p>The true values at x0.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_ylab">ylab</code></td>
<td>
<p>The label for the y-axes.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_titles">titles</code></td>
<td>
<p>The title for the plot.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_date">date</code></td>
<td>
<p>A vector of dates.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_ylim">ylim</code></td>
<td>
<p>A vector containing the extremes for the y-axes.</p>
</td></tr>
<tr><td><code id="plot_fun_+3A_fillc">fillc</code></td>
<td>
<p>A string of color.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It exploits the package <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>,
<code><a href="ggpubr.html#topic+ggarrange">ggarrange</a></code> and <code><a href="ggpubr.html#topic+annotate_figure">annotate_figure</a></code>.
to better visualize the results. It outputs n0=length(x0) plots.
</p>
<p>It plots, for each value in x0, the predicted functional
value and bands in all the
dimensions of the multivariate functional response.
</p>


<h3>Value</h3>

<p>None
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
