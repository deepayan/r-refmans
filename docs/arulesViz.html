<!DOCTYPE html><html lang="en"><head><title>Help for package arulesViz</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {arulesViz}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#arulesViz-package'><p>arulesViz: Visualizing Association Rules and Frequent Itemsets</p></a></li>
<li><a href='#associations2igraph'><p>Convert rules or itemsets into a graph</p></a></li>
<li><a href='#inspectDT'><p>Inspect Associations Interactively Using datatable</p></a></li>
<li><a href='#plot_arulesViz'><p>Visualize Association Rules and Itemsets</p></a></li>
<li><a href='#ruleExplorer'><p>Explore Association Rules Interactively</p></a></li>
<li><a href='#rules2groupedMatrix'><p>Convert association rules into a matrix</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.5.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-04-25</td>
</tr>
<tr>
<td>Title:</td>
<td>Visualizing Association Rules and Frequent Itemsets</td>
</tr>
<tr>
<td>Depends:</td>
<td>arules (&ge; 1.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, methods, utils, grDevices, stats, seriation, grid,
vcd, igraph, scatterplot3d, ggplot2, ggraph, tibble, tidyr,
dplyr, DT, plotly, visNetwork</td>
</tr>
<tr>
<td>Suggests:</td>
<td>datasets, graph, Rgraphviz, tidygraph, shiny, shinythemes,
htmlwidgets, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Description:</td>
<td>Extends package 'arules' with various visualization techniques for association rules and itemsets. The package also includes several interactive visualizations for rule exploration. Michael Hahsler (2017) &lt;<a href="https://doi.org/10.32614%2FRJ-2017-047">doi:10.32614/RJ-2017-047</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mhahsler/arulesViz">https://github.com/mhahsler/arulesViz</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mhahsler/arulesViz/issues">https://github.com/mhahsler/arulesViz/issues</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>(C) 2021 Michael Hahsler</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-25 19:14:54 UTC; hahsler</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Hahsler <a href="https://orcid.org/0000-0003-2716-1405"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Giallanza Tyler [ctb],
  Sudheer Chelluboina [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Hahsler &lt;mhahsler@lyle.smu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-26 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='arulesViz-package'>arulesViz: Visualizing Association Rules and Frequent Itemsets</h2><span id='topic+arulesViz'></span><span id='topic+arulesViz-package'></span>

<h3>Description</h3>

<p>Extends package 'arules' with various visualization techniques for association rules and itemsets. The package also includes several interactive visualizations for rule exploration. Michael Hahsler (2017) <a href="https://doi.org/10.32614/RJ-2017-047">doi:10.32614/RJ-2017-047</a>.
</p>


<h3>Main Functions</h3>


<ul>
<li> <p><code><a href="#topic+plot">plot()</a></code> plot association rules.
</p>
</li>
<li> <p><code><a href="#topic+inspectDT">inspectDT()</a></code> for interactive rule tables.
</p>
</li>
<li> <p><code><a href="#topic+ruleExplorer">ruleExplorer()</a></code> for interactive rule inspection with tables and graphs.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Michael Hahsler <a href="mailto:mhahsler@lyle.smu.edu">mhahsler@lyle.smu.edu</a> (<a href="https://orcid.org/0000-0003-2716-1405">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Giallanza Tyler [contributor]
</p>
</li>
<li><p> Sudheer Chelluboina [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/mhahsler/arulesViz">https://github.com/mhahsler/arulesViz</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/mhahsler/arulesViz/issues">https://github.com/mhahsler/arulesViz/issues</a>
</p>
</li></ul>


<hr>
<h2 id='associations2igraph'>Convert rules or itemsets into a graph</h2><span id='topic+associations2igraph'></span><span id='topic+saveAsGraph'></span><span id='topic+graph'></span><span id='topic+igraph'></span><span id='topic+tidygraph'></span>

<h3>Description</h3>

<p>Function to convert associations (rules, itemsets) into a igraph object and
saves the graph in different formats (e.g., GraphML, dimacs, dot).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>associations2igraph(x, associationsAsNodes = TRUE)

saveAsGraph(x, file, format = "graphml", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="associations2igraph_+3A_x">x</code></td>
<td>
<p>an object of class &quot;rules&quot; or &quot;itemsets&quot;.</p>
</td></tr>
<tr><td><code id="associations2igraph_+3A_associationsasnodes">associationsAsNodes</code></td>
<td>
<p>should associations be translated into nodes or
represented by edges?</p>
</td></tr>
<tr><td><code id="associations2igraph_+3A_file">file</code></td>
<td>
<p>file name.</p>
</td></tr>
<tr><td><code id="associations2igraph_+3A_format">format</code></td>
<td>
<p>file format (e.g., &quot;edgelist&quot;, &quot;graphml&quot;, &quot;dimacs&quot;, &quot;gml&quot;,
&quot;dot&quot;). See <code><a href="igraph.html#topic+write_graph">igraph::write_graph()</a></code>.</p>
</td></tr>
<tr><td><code id="associations2igraph_+3A_...">...</code></td>
<td>
<p>further arguments are passed on to <code>associations2igraph()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Associations are represented as nodes: All items in the associations are
connected to the association node. For itemsets, the wdges are undirected,
for rules, the edges are directed towards the rhs
</p>
<p>When associations are represented as edges: For rules, each item in the LHS
is connected with a directed edge to the item in the RHS. For itemsets,
undirected edges for each pair of item in the itemset are created.
</p>


<h3>Value</h3>

<p><code>associations2igraph</code> returns an igraph object.
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("Groceries")
rules &lt;- apriori(Groceries, parameter = list(support = 0.01, confidence = 0.5))

# convert rules into a graph with rules as nodes
library("igraph")
g &lt;- associations2igraph(rules)
g

plot(g)

# convert the graph into a tidygraph
library("tidygraph")
as_tbl_graph(g)

# convert the generating itemsets of the rules into a graph with itemsets as edges
itemsets &lt;- generatingItemsets(rules)
itemsets
g &lt;- associations2igraph(itemsets, associationsAsNodes = FALSE)
g

plot(g, layout = layout_in_circle)

# save rules as a graph so they can be visualized using external tools
saveAsGraph(rules, "rules.graphml")

## clean up
unlink("rules.graphml")

</code></pre>

<hr>
<h2 id='inspectDT'>Inspect Associations Interactively Using datatable</h2><span id='topic+inspectDT'></span><span id='topic+inspect'></span><span id='topic+datatable'></span><span id='topic+inspectDT.default'></span><span id='topic+inspectDT.rules'></span><span id='topic+inspectDT.itemsets'></span><span id='topic+inspectDT.data.frame'></span>

<h3>Description</h3>

<p>Uses <span class="pkg">datatable</span> to create a HTML table widget using the DataTables
library. Rules can be interactively filtered and sorted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspectDT(x, ...)

## Default S3 method:
inspectDT(x, ...)

## S3 method for class 'rules'
inspectDT(x, precision = 3, ...)

## S3 method for class 'itemsets'
inspectDT(x, precision = 3, ...)

## S3 method for class 'data.frame'
inspectDT(x, precision = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inspectDT_+3A_x">x</code></td>
<td>
<p>an object of class &quot;rules&quot; or &quot;itemsets&quot;.</p>
</td></tr>
<tr><td><code id="inspectDT_+3A_...">...</code></td>
<td>
<p>additional arguments are passed on to <code><a href="DT.html#topic+datatable">DT::datatable()</a></code>.</p>
</td></tr>
<tr><td><code id="inspectDT_+3A_precision">precision</code></td>
<td>
<p>controls the precision used to print the quality measures (defaults to 2).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A datatable htmlwidget.
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>References</h3>

<p>Hahsler M (2017). arulesViz: Interactive Visualization of
Association Rules with R. <em>R Journal,</em> 9(2):163-175. ISSN 2073-4859.
<a href="https://doi.org/10.32614/RJ-2017-047">doi:10.32614/RJ-2017-047</a>.
</p>


<h3>See Also</h3>

<p><code><a href="DT.html#topic+datatable">DT::datatable()</a></code> in <span class="pkg">DT</span>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(Groceries)
rules &lt;- apriori(Groceries, parameter = list(support = 0.005, confidence = 0.5))
rules

inspectDT(rules)

# for more control on the data table, you can used DATAFRAME() to convert the rules.
rules_df &lt;- DATAFRAME(rules, setStart = "", setEnd = "", itemSep = " + ")
rules_df$count &lt;- NULL
head(rules_df)
inspectDT(rules_df)

# Save HTML widget as web page
p &lt;- inspectDT(rules)
htmlwidgets::saveWidget(p, "arules.html", selfcontained = FALSE)
# Note: self-contained seems to make the browser slow.

# inspect the widget
browseURL("arules.html")

# clean up
unlink(c("arules.html", "arules_files"), recursive = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_arulesViz'>Visualize Association Rules and Itemsets</h2><span id='topic+plot_arulesViz'></span><span id='topic+plot.rules'></span><span id='topic+plot'></span><span id='topic+plot.itemsets'></span><span id='topic+plot.grouped_matrix'></span><span id='topic+plotly'></span><span id='topic+guide_edge_colourbar'></span>

<h3>Description</h3>

<p>Methods (S3) to visualize association rules and itemsets. Implemented are
several popular visualization methods including scatter plots with shading
(two-key plots), graph based visualizations, doubledecker plots, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rules'
plot(
  x,
  method = NULL,
  measure = "support",
  shading = "lift",
  limit = NULL,
  interactive = NULL,
  engine = "default",
  data = NULL,
  control = NULL,
  ...
)

## S3 method for class 'itemsets'
plot(
  x,
  method = NULL,
  measure = "support",
  shading = NULL,
  limit = NULL,
  interactive = NULL,
  engine = "default",
  data = NULL,
  control = NULL,
  ...
)

## S3 method for class 'grouped_matrix'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_arulesViz_+3A_x">x</code></td>
<td>
<p>an object of class &quot;rules&quot; or &quot;itemsets&quot;.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_method">method</code></td>
<td>
<p>a string indicating the visualization method. Methods for
rules include &quot;scatterplot&quot;, &quot;two-key plot&quot;, &quot;matrix&quot;, &quot;grouped matrix&quot;,
&quot;graph&quot;, &quot;paracoord&quot;, etc.  Specify &quot;help&quot; to get a complete list of
available methods. Note that some methods may only be available for rules or
itemsets.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_measure">measure</code></td>
<td>
<p>measure(s) of interestingness (e.g., &quot;support&quot;, &quot;confidence&quot;,
&quot;lift&quot;, &quot;order&quot;) used in the visualization. Some visualization methods need
one measure, others take a vector with two measures (e.g., scatterplot). In
some plots (e.g., graphs) <code>NA</code> can be used to suppress using a measure.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_shading">shading</code></td>
<td>
<p>measure of interestingness used for the color of the
points/arrows/nodes (e.g., &quot;support&quot;, &quot;confidence&quot;, &quot;lift&quot;). The default is
&quot;lift&quot;.  <code>NULL</code> can be often used to suppress shading.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_limit">limit</code></td>
<td>
<p>A limit on the number of associations displayed. The top limit
associations according to the measure specified in shading are chosen.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_interactive">interactive</code></td>
<td>
<p>deprecated. See parameter <code>engine</code> below.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_engine">engine</code></td>
<td>
<p>a string indicating the plotting engine used to render the
plot.  The &quot;default&quot; engine uses (mostly) <span class="pkg">ggplot2</span>.  Other engines
include &quot;base&quot; (base R plots), &quot;grid&quot;, &quot;interactive&quot;, &quot;plotly&quot;,
&quot;visnetwork&quot;, &quot;igraph&quot;, &quot;graphviz&quot;, and &quot;htmlwidget&quot; (which can be embedded
in RMarkdown).  Note that not all engines are available for all methods.
Specify &quot;help&quot; to get a complete list of available engines for the selected
visualization method.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_data">data</code></td>
<td>
<p>the dataset (class &quot;transactions&quot;) used to generate the
rules/itemsets. Only &quot;mosaic&quot; and &quot;doubledecker&quot; require the original data.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_control">control</code></td>
<td>
<p>a list of control parameters for the plot. The available
control parameters depend on the used visualization method and engine.
Specify &quot;help&quot; to get a complete list of available control parameters and
their default values.</p>
</td></tr>
<tr><td><code id="plot_arulesViz_+3A_...">...</code></td>
<td>
<p>Further arguments are added for convenience to the
<code>control</code> list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many plots can use different rendering engines including static standard
plots (using base plots, <span class="pkg">ggplot2</span>, <span class="pkg">grid</span>), standard plots with
interactive manipulation and interactive HTML widget-based visualizations.
</p>
<p>Most visualization techniques are described by Bruzzese and Davino (2008),
however, we added more color shading, reordering and interactive features
(see Hahsler, 2017). Many visualization methods take extra parameters as the
<code>control</code> parameter list. Although, we have tried to keep control
parameters consistent, the available control parameters vary from
visualization method to visualization method. You can specift <code>"help"</code>
for <code>method</code>, <code>engine</code>, or <code>control</code> to get a list of
available settings.
</p>
<p>Note on HTML widgets: HTML widgets tend to get very slow or unresponsive for
too many rules. To prevent this situation, the control parameter <code>max</code>
sets a limit, and the user is warned if the limit is reached.
</p>
<p>The following visualization method are available:
</p>

<dl>
<dt>&quot;scatterplot&quot;, &quot;two-key plot&quot;</dt><dd><p> This visualization method
draws a two dimensional scatterplot with different measures of
interestingness (parameter &quot;measure&quot;) on the axes and a third measure
(parameter &quot;shading&quot;) is represented by the color of the points.  There is a
special value for shading called &quot;order&quot; which produces a two-key plot where
the color of the points represents the length (order) of the rule. </p>
</dd>
<dt>&quot;matrix&quot;</dt><dd><p> Arranges the association rules as a matrix with the
itemsets in the antecedents on one axis and the itemsets in the consequents
on the other.  The measure of interestingness (first element of
<code>measure</code>) is either visualized by a color (darker means a higher value
for the measure) or as the height of a bar (engine &quot;3d&quot;).  The control
parameter <code>reorder</code> takes the values <code>"none"</code>, <code>"measure"</code>,
<code>"support/confidence"</code>, or <code>"similarity"</code> and can be used to
reorder LHS and RHS of the rules differntly. The default reordering average
measure (typically lift) pushing the rules with the highest lift value to
the top-left corner of the plot.  </p>
</dd>
<dt>&quot;grouped matrix&quot;</dt><dd><p> Grouped matrix-based visualization (Hahsler and
Karpienko, 2016; Hahsler 2016).  Antecedents (columns) in the matrix are
grouped using clustering. Groups are represented by the most interesting
item (highest ratio of support in the group to support in all rules) in the
group. Balloons in the matrix are used to represent with what consequent the
antecedents are connected.
</p>
<p>Interactive manipulations (zooming into groups and identifying rules) are
available.
</p>
<p>The list of control parameters for this method includes:
</p>

<dl>
<dt>&quot;main&quot;</dt><dd><p>plot title</p>
</dd>
<dt>&quot;k&quot;</dt><dd><p>number of antecedent groups (default:
20)</p>
</dd>
<dt>&quot;rhs_max&quot;</dt><dd><p>maximal number of RHSs to show. The rest are
suppressed. (default: 10)</p>
</dd>
<dt>&quot;lhs_items&quot;</dt><dd><p>number of LHS items shown
(default: 2)</p>
</dd>
<dt>&quot;aggr.fun&quot;</dt><dd><p>aggregation function can be any function
computing a scalar from a vector (e.g., min, mean (default), median, sum,
max). It is also used to reorder the balloons in the plot.</p>
</dd>
<dt>&quot;col&quot;</dt><dd><p>color palette (default is 100 heat colors.)</p>
</dd> </dl>
 </dd>
<dt>&quot;graph&quot;</dt><dd><p> Represents the rules (or itemsets) as a graph with items as
labeled vertices, and rules (or itemsets) represented as vertices connected
to items using arrows. For rules, the LHS items are connected with arrows
pointing to the vertex representing the rule and the RHS has an arrow
pointing to the item. </p>
</dd>
<dt>&quot;doubledecker&quot;, &quot;mosaic&quot;</dt><dd><p> Represents a single rule as a doubledecker
or mosaic plot. Parameter <code>data</code> has to be specified to compute the
needed contingency table. No interactive version is available. </p>
</dd>
<dt>&quot;paracoord&quot;</dt><dd><p> Represents the rules (or itemsets) as a parallel
coordinate plot. Currently there is no interactive version available. </p>
</dd>
</dl>



<h3>Value</h3>

<p>Several interactive plots return a set of selected rules/itemsets.
Other plots might return other data structures. For example, graph-based
plots return the graph (invisibly). Engine &quot;htmlwidget&quot; always returns an
object of class htmlwidget.
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler and Sudheer Chelluboina. Some visualizations are
based on the implementation by Martin Vodenicharov.
</p>


<h3>References</h3>

<p>Hahsler M (2017). arulesViz: Interactive Visualization of
Association Rules with R. <em>R Journal,</em> 9(2):163-175. ISSN 2073-4859.
<a href="https://doi.org/10.32614/RJ-2017-047">doi:10.32614/RJ-2017-047</a>
</p>
<p>Bruzzese, D. and Davino, C. (2008), Visual Mining of Association Rules, in
Visual Data Mining: Theory, Techniques and Tools for Visual Analytics,
Springer-Verlag, pp. 103-122.
<a href="https://doi.org/10.1007/978-3-540-71080-6">doi:10.1007/978-3-540-71080-6</a>
</p>
<p>Hahsler, M. and Karpienko, R. (2016), Visualizing Association Rules in
Hierarchical Groups. <em>Journal of Business Economics,</em> 87(3):17-335.
<a href="https://doi.org/10.1007/s11573-016-0822-8">doi:10.1007/s11573-016-0822-8</a>
</p>
<p>Hahsler, M. (2016), Grouping association rules using lift. In C. Iyigun, R.
Moghaddess, and A. Oztekin, editors, 11th INFORMS Workshop on Data Mining
and Decision Analytics (DM-DA 2016).
</p>


<h3>See Also</h3>

<p><code><a href="scatterplot3d.html#topic+scatterplot3d">scatterplot3d::scatterplot3d()</a></code>,
<code><a href="igraph.html#topic+plot.igraph">igraph::plot.igraph()</a></code> and <code><a href="igraph.html#topic+tkplot">igraph::tkplot()</a></code>,
<code><a href="seriation.html#topic+seriate">seriation::seriate()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Note: To speed example execution, not all examples are not run when using example("plot").
# Use example("plot") to run all examples.

data(Groceries)
rules &lt;- apriori(Groceries, parameter = list(support = 0.001, confidence = 0.8))
rules

## Getting help
# There are many method, plotting engines and all of them have different control parameters. Use
# "help" to get help. List available methods for the object rules:
plot(rules, method = "help")

# List the available engines for method "scatterplot"
plot(rules, method = "scatterplot", engine = "help")

## Not run: 
# List control parameters for scatterplot with engine "ggplot2"
plot(rules, method = "scatterplot", engine = "ggplot2", control = "help")

## End(Not run)


## Scatter plot
#  Display a scatter plot using two quality measures
plot(rules)

# Scatter plot with custom measures and limiting the plot to the 100 with the
# largest value for for the shading measure.
plot(rules, measure = c("support", "lift"), shading = "confidence", limit = 100)

## Not run: 
# Custom color scale, labels, theme and no title (ggplot2)
library(ggplot2)
plot(rules, engine = "ggplot2", main = NULL, limit = 100) +
  scale_color_gradient2(
    low = "red", mid = "gray90", high = "blue",
    midpoint = 1, limits = c(0, 12)
  ) +
  labs(x = "Supp.", y = "Conf.", color = "Lift") +
  theme_classic()

# Interactive scatter plot using the grid engine (selected rules are returned)
if (interactive()) {
  sel &lt;- plot(rules, engine = "interactive")

  # Create a html widget for interactive visualization (uses plotly)
  plot(rules, engine = "htmlwidget")
}

## End(Not run)

# Two-key plot (a scatter plot with shading = "order")
plot(rules, method = "two-key plot", limit = 100)


## Matrix shading
#  Display rules as a matrix with RHS itemsets as rows and LHS itemsets as columns

# works better with small sets of rules
subrules &lt;- subset(rules, lift &gt; 5)
subrules

# 2D matrix with shading (ggplot2). The LHS and RHS are reordered so
# that rules with similar lift are displayed close to each other.
plot(subrules, method = "matrix")

## Not run: 
# Interactive matrix plot
# * Engine interactive: identify rules by clicking on them (click outside to end)
# * Engine htmlwidget: hoover over rules to identify
if (interactive()) {
  plot(subrules, method = "matrix", engine = "interactive")
  plot(subrules, method = "matrix", engine = "htmlwidget")
}

## End(Not run)


## Grouped matrix plot
# Default engine is ggplot2
plot(rules, method = "grouped matrix", k = 5)

## Not run: 
# Create a htmlwidget
plot(rules, method = "grouped matrix", engine = "htmlwidget")

# Interactive grouped matrix plot
if (interactive()) {
  sel &lt;- plot(rules, method = "grouped matrix", engine = "interactive")
}

## End(Not run)

## Graph representation
# Default engine is ggplot2 with ggraph. Associations are represented as nodes.
# We limit the number of rules to the 10 with the larges
# lift (measure used for shading)
plot(subrules, method = "graph", limit = 10)

## Not run: 
# Circular layout (see? ggraph for the meaning of the arguments)
plot(subrules, method = "graph", layout = "linear", circular = TRUE, limit = 10)

# Use igraph layouts (algorithm is passes on as ... to ggraph)
plot(subrules,
  method = "graph", layout = "igraph",
  ggraphdots = list(algorithm = "graphopt", spring.const = 1, mass = 10), limit = 10
)

# Specify edge and node representation
library(ggplot2)
plot(subrules,
  method = "graph",
  control = list(
    edges = ggraph::geom_edge_link(
      end_cap = ggraph::circle(4, "mm"),
      start_cap = ggraph::circle(4, "mm"),
      color = "black",
      arrow = arrow(length = unit(2, "mm"), angle = 20, type = "closed"),
      alpha = .2
    ),
    nodes = ggraph::geom_node_point(aes(size = support, color = lift)),
    nodetext = ggraph::geom_node_label(aes(label = label), alpha = .8, repel = TRUE)
  ),
  limit = 10
) +
  scale_color_gradient(low = "yellow", high = "red") +
  scale_size(range = c(2, 10))

# ggplot also can represent associations as edges. Here a rules is represented as a set of
# arrows going from the LHS items to the RHS item.
plot(subrules, method = "graph", asEdges = TRUE, limit = 10)
plot(subrules, method = "graph", asEdges = TRUE, circular = FALSE, limit = 10)

## End(Not run)

# Engine igraph
plot(subrules, method = "graph", engine = "igraph", limit = 10)
plot(subrules,
  method = "graph", engine = "igraph",
  nodeCol = grey.colors(10), edgeCol = grey(.7), alpha = 1,
  limit = 10
)

# Use plot_options to alter any aspect of the graph
# (see: https://igraph.org/r/doc/plot.common.html)
plot(subrules,
  method = "graph", engine = "igraph",
  plot_options = list(
    edge.lty = 2,
    vertex.label.cex = .6,
    margin = c(.1, .1, .1, .1),
    asp = .5
  ),
  limit = 10
)

# igraph layout generators can be used (see ? igraph::layout_)
plot(subrules, method = "graph", engine = "igraph", layout = igraph::in_circle(), limit = 10)

## Not run: 
# Graph rendering using engine graphviz
plot(subrules, method = "graph", engine = "graphviz", limit = 10)

if (interactive()) {
  # Default interactive plot (using igraph's tkplot)
  plot(subrules, method = "graph", engine = "interactive", limit = 10)

  # Interactive graph as a html widget (using igraph layout)
  plot(subrules, method = "graph", engine = "htmlwidget", limit = 10)
  plot(subrules,
    method = "graph", engine = "htmlwidget",
    igraphLayout = "layout_in_circle", limit = 10
  )
}

## End(Not run)

## Parallel coordinates plot
plot(subrules, method = "paracoord", limit = 10)


## Doubledecker and mosaic plot
# Uses functions in package vcd
# Notes: doubledecker and mosaic plots only visualize a single rule
# and the transaction set is needed.
oneRule &lt;- sample(rules, 1)
inspect(oneRule)
plot(oneRule, method = "doubledecker", data = Groceries)


## Visualizing itemsets
data(Groceries)
itemsets &lt;- eclat(Groceries, parameter = list(support = 0.02, minlen = 2))

# default is a scatter plot with ggplot2
plot(itemsets)

plot(itemsets, method = "graph", limit = 10)

## Not run: 
plot(itemsets, method = "graph", asEdges = TRUE, limit = 10)
plot(itemsets, method = "graph", asEdges = TRUE, circular = FALSE, limit = 10) +
  theme(plot.margin = margin(10, 10, 30, 20, "mm"))

## End(Not run)

plot(itemsets, method = "paracoord", alpha = .5, limit = 10)

# Add more quality measures to use for the scatter plot
quality(itemsets) &lt;- interestMeasure(itemsets, transactions = Groceries)
head(quality(itemsets))
plot(itemsets, measure = c("support", "allConfidence"), shading = "lift")

## Not run: 
# Save HTML widget as web page
p &lt;- plot(rules, engine = "html")
htmlwidgets::saveWidget(p, "arules.html", selfcontained = FALSE)
# Note: self-contained seems to make the browser slow.

# inspect the widget
browseURL("arules.html")

# clean up
unlink(c("arules.html", "arules_files"), recursive = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='ruleExplorer'>Explore Association Rules Interactively</h2><span id='topic+ruleExplorer'></span><span id='topic+explore'></span>

<h3>Description</h3>

<p>Explore association rules using interactive manipulations and visualization
using <span class="pkg">shiny</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ruleExplorer(x, sidebarWidth = 2, graphHeight = "600px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ruleExplorer_+3A_x">x</code></td>
<td>
<p>a set of rules, a transactions object or a data.frame.</p>
</td></tr>
<tr><td><code id="ruleExplorer_+3A_sidebarwidth">sidebarWidth</code></td>
<td>
<p>width of the sidebar as a number between 0 (= 0% of the
display width) and 12 (= 100% of the display width).</p>
</td></tr>
<tr><td><code id="ruleExplorer_+3A_graphheight">graphHeight</code></td>
<td>
<p>height of the plots in pixels. Increase if you have a
larger/higher resolution display.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a shiny app.
</p>


<h3>Author(s)</h3>

<p>Tyler Giallanza and Michael Hahsler.  Adapted from functions
originally created by Andrew Brooks. See
<a href="https://github.com/brooksandrew/Rsenal">Rsenal</a> for the original code.
</p>


<h3>References</h3>

<p>Hahsler M (2017). arulesViz: Interactive Visualization of
Association Rules with R. <em>R Journal,</em> 9(2):163-175. ISSN 2073-4859.
<a href="https://doi.org/10.32614/RJ-2017-047">doi:10.32614/RJ-2017-047</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot">plot()</a></code> with <code>engine = "html"</code>,
<code><a href="#topic+inspectDT">inspectDT()</a></code>, <code><a href="arules.html#topic+apriori">arules::apriori()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(Groceries)

# explore pre-mined rules
rules &lt;- apriori(Groceries,
  parameter = list(support = 0.001, confidence = 0.8)
)
rules

ruleExplorer(rules)

# mine and explore rules on the fly
data(iris)
ruleExplorer(iris)

## End(Not run)
</code></pre>

<hr>
<h2 id='rules2groupedMatrix'>Convert association rules into a matrix</h2><span id='topic+rules2groupedMatrix'></span><span id='topic+rules2matrix'></span>

<h3>Description</h3>

<p>Converts a set of association rules into a matrix with unique LHS itemsets
as columns and unique RHS itemsets as rows. The matrix cells contain a
quality measure. The LHS itemsets can be grouped.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rules2groupedMatrix(
  rules,
  measure = "lift",
  measure2 = "support",
  k = 10,
  aggr.fun = mean,
  lhs_label_items = 2
)

rules2matrix(rules, measure = "support", reorder = "measure", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rules2groupedMatrix_+3A_rules">rules</code></td>
<td>
<p>a rules object.</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_measure">measure</code></td>
<td>
<p>quality measure put in the matrix</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_measure2">measure2</code></td>
<td>
<p>second quality measure (organized in the same way as
measure).</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_k">k</code></td>
<td>
<p>number of LHS itemset groups.</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_aggr.fun">aggr.fun</code></td>
<td>
<p>function to aggregate the quality measure for groups.</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_lhs_label_items">lhs_label_items</code></td>
<td>
<p>number of top items used to name LHS itemset groups
(columns).</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_reorder">reorder</code></td>
<td>
<p>reorder rows and columns? Possible methods are: &quot;none&quot;,
&quot;measure&quot; (default), &quot;support/confidence&quot;, &quot;similarity&quot;.</p>
</td></tr>
<tr><td><code id="rules2groupedMatrix_+3A_...">...</code></td>
<td>
<p>passed on to <code><a href="arules.html#topic+DATAFRAME">arules::DATAFRAME()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>rules2matrix</code> returns a matrix with quality values.
</p>
<p><code>rules2groupedMatrix</code> returns a list with elements
</p>
<table role = "presentation">
<tr><td><code>m</code></td>
<td>
<p> the
grouped matrix for measure. </p>
</td></tr>
<tr><td><code>m2</code></td>
<td>
<p> the grouped matrix for measure2. </p>
</td></tr>
<tr><td><code>clustering_rules</code></td>
<td>
<p> vector with group assignment for each rule. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>References</h3>

<p>Michael Hahsler and Radoslaw Karpienko. Visualizing association
rules in hierarchical groups. Journal of Business Economics, 87(3):317&ndash;335,
May 2016. <a href="https://doi.org/10.1007/s11573-016-0822-8">doi:10.1007/s11573-016-0822-8</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot">plot()</a></code> for rules using <code>method = 'matrix'</code> and
<code>method = 'grouped matrix'</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Groceries)
rules &lt;- apriori(Groceries, parameter = list(support = 0.001, confidence = 0.8))
rules

## Matrix
m &lt;- rules2matrix(rules[1:10], measure = "lift")
m
plot(rules[1:10], method = "matrix")

## Grouped matrix
# create a matrix with LHSs grouped in k = 10 groups
gm &lt;- rules2groupedMatrix(rules, k = 10)
gm$m

# number of rules per group
table(gm$clustering_rules)

# get rules for group 1
inspect(rules[gm$clustering_rules == 1])

# create the corresponding grouped matrix plot by passing the grouped matrix as the groups parameter
plot(rules, method = "grouped matrix", groups = gm)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
