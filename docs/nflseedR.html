<!DOCTYPE html><html><head><title>Help for package nflseedR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nflseedR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#compute_conference_seeds'><p>Compute NFL Playoff Seedings using Game Results and Divisional Rankings</p></a></li>
<li><a href='#compute_division_ranks'><p>Compute NFL Division Rankings using Game Results</p></a></li>
<li><a href='#compute_draft_order'><p>Compute NFL Draft Order using Game Results and Divisional Rankings</p></a></li>
<li><a href='#divisions'><p>NFL team names and the conferences and divisions they belong to</p></a></li>
<li><a href='#fmt_pct_special'><p>Format Numerical Values to Special Percentage Strings</p></a></li>
<li><a href='#load_schedules'><p>Load Lee Sharpe's Games File</p></a></li>
<li><a href='#nflseedR-package'><p>nflseedR: Functions to Efficiently Simulate and Evaluate NFL Seasons</p></a></li>
<li><a href='#simulate_nfl'><p>Simulate an NFL Season</p></a></li>
<li><a href='#summary.nflseedR_simulation'><p>Compute Pretty Simulations Summary Table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Functions to Efficiently Simulate and Evaluate NFL Seasons</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions to simulate National Football League
    seasons including the sophisticated tie-breaking procedures.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://nflseedr.com">https://nflseedr.com</a>, <a href="https://github.com/nflverse/nflseedR">https://github.com/nflverse/nflseedR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/nflverse/nflseedR/issues">https://github.com/nflverse/nflseedR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, data.table, dplyr, furrr, future, gsubfn, magrittr,
nflreadr (&ge; 1.1.3), progressr, purrr, rlang, tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>gt, knitr, rmarkdown, scales, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-02 12:43:27 UTC; S.Carl</td>
</tr>
<tr>
<td>Author:</td>
<td>Lee Sharpe [aut, cph],
  Sebastian Carl [cre, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Carl &lt;mrcaseb@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-05 21:50:31 UTC</td>
</tr>
</table>
<hr>
<h2 id='compute_conference_seeds'>Compute NFL Playoff Seedings using Game Results and Divisional Rankings</h2><span id='topic+compute_conference_seeds'></span>

<h3>Description</h3>

<p>Compute NFL Playoff Seedings using Game Results and Divisional Rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_conference_seeds(
  teams,
  h2h = NULL,
  tiebreaker_depth = 3,
  .debug = FALSE,
  playoff_seeds = 7
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_conference_seeds_+3A_teams">teams</code></td>
<td>
<p>The division standings data frame as computed by
<code><a href="#topic+compute_division_ranks">compute_division_ranks</a></code></p>
</td></tr>
<tr><td><code id="compute_conference_seeds_+3A_h2h">h2h</code></td>
<td>
<p>A data frame that is used for head-to-head tiebreakers across the
tie-breaking functions. It is computed by the function
<code><a href="#topic+compute_division_ranks">compute_division_ranks</a></code>.</p>
</td></tr>
<tr><td><code id="compute_conference_seeds_+3A_tiebreaker_depth">tiebreaker_depth</code></td>
<td>
<p>A single value equal to 1, 2, or 3. The default is 3. The
value controls the depth of tiebreakers that shall be applied. The deepest
currently implemented tiebreaker is strength of schedule. The following
values are valid:
</p>

<dl>
<dt>tiebreaker_depth = 1</dt><dd><p>Break all ties with a coinflip. Fastest variant.</p>
</dd>
<dt>tiebreaker_depth = 2</dt><dd><p>Apply head-to-head and division win percentage tiebreakers. Random if still tied.</p>
</dd>
<dt>tiebreaker_depth = 3</dt><dd><p>Apply all tiebreakers through strength of schedule. Random if still tied.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_conference_seeds_+3A_.debug">.debug</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Controls whether additional
messages are printed to the console showing what the tie-breaking algorithms
are currently performing.</p>
</td></tr>
<tr><td><code id="compute_conference_seeds_+3A_playoff_seeds">playoff_seeds</code></td>
<td>
<p>Number of playoff teams per conference (increased
in 2020 from 6 to 7).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of division standings including playoff seeds and the
week in which the season ended for the respective team (<code>exit</code>).
</p>
<p>A list of two data frames:
</p>

<dl>
<dt>standings</dt><dd><p>Division standings including playoff seeds.</p>
</dd>
<dt>h2h</dt><dd><p>A data frame that is used for head-to-head tiebreakers across the
tie-breaking functions.</p>
</dd>
</dl>



<h3>See Also</h3>

<p>The examples <a href="https://nflseedr.com/articles/articles/nflseedR.html">on the package website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Change some options for better output
old &lt;- options(list(digits = 3, tibble.print_min = 64))
library(dplyr, warn.conflicts = FALSE)

try({#to avoid CRAN test problems
nflseedR::load_sharpe_games() %&gt;%
  dplyr::filter(season %in% 2019:2020) %&gt;%
  dplyr::select(sim = season, game_type, week, away_team, home_team, result) %&gt;%
  nflseedR::compute_division_ranks() %&gt;%
  nflseedR::compute_conference_seeds(h2h = .$h2h) %&gt;%
  purrr::pluck("standings")
})

# Restore old options
options(old)

</code></pre>

<hr>
<h2 id='compute_division_ranks'>Compute NFL Division Rankings using Game Results</h2><span id='topic+compute_division_ranks'></span>

<h3>Description</h3>

<p>Compute NFL Division Rankings using Game Results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_division_ranks(
  games,
  teams = NULL,
  tiebreaker_depth = 3,
  .debug = FALSE,
  h2h = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_division_ranks_+3A_games">games</code></td>
<td>
<p>A data frame containing real or simulated game scores. The
following variables are required:
</p>

<dl>
<dt>sim</dt><dd><p>A simulation ID. Normally 1 - n simulated seasons.</p>
</dd>
<dt>game_type</dt><dd><p>One of 'REG', 'WC', 'DIV', 'CON', 'SB' indicating if a game was a regular season game or one of the playoff rounds.</p>
</dd>
<dt>week</dt><dd><p>The week of the corresponding NFL season.</p>
</dd>
<dt>away_team</dt><dd><p>Team abbreviation of the away team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>home_team</dt><dd><p>Team abbreviation of the home team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>result</dt><dd><p>Equals home score - away score.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_division_ranks_+3A_teams">teams</code></td>
<td>
<p>This parameter is optional. If it is <code>NULL</code> the function
will compute it internally, otherwise it has to be a data frame of all teams
contained in the <code>games</code> data frame repeated for each simulation ID
(<code>sim</code>). The following variables are required:
</p>

<dl>
<dt>sim</dt><dd><p>A simulation ID. Normally 1 - n simulated seasons.</p>
</dd>
<dt>team</dt><dd><p>Team abbreviation of the team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>conf</dt><dd><p>Conference abbreviation of the team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>division</dt><dd><p>Division of the team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid division names).</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_division_ranks_+3A_tiebreaker_depth">tiebreaker_depth</code></td>
<td>
<p>A single value equal to 1, 2, or 3. The default is 3. The
value controls the depth of tiebreakers that shall be applied. The deepest
currently implemented tiebreaker is strength of schedule. The following
values are valid:
</p>

<dl>
<dt>tiebreaker_depth = 1</dt><dd><p>Break all ties with a coinflip. Fastest variant.</p>
</dd>
<dt>tiebreaker_depth = 2</dt><dd><p>Apply head-to-head and division win percentage tiebreakers. Random if still tied.</p>
</dd>
<dt>tiebreaker_depth = 3</dt><dd><p>Apply all tiebreakers through strength of schedule. Random if still tied.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_division_ranks_+3A_.debug">.debug</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Controls whether additional
messages are printed to the console showing what the tie-breaking algorithms
are currently performing.</p>
</td></tr>
<tr><td><code id="compute_division_ranks_+3A_h2h">h2h</code></td>
<td>
<p>A data frame that is used for head-to-head tiebreakers across the
tie-breaking functions. It is computed by the function
<code><a href="#topic+compute_division_ranks">compute_division_ranks</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of two data frames:
</p>

<dl>
<dt>standings</dt><dd><p>Division standings.</p>
</dd>
<dt>h2h</dt><dd><p>A data frame that is used for head-to-head tiebreakers across the
tie-breaking functions.</p>
</dd>
</dl>



<h3>See Also</h3>

<p>The examples <a href="https://nflseedr.com/articles/articles/nflseedR.html">on the package website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Change some options for better output
old &lt;- options(list(digits = 3, tibble.print_min = 64))
library(dplyr, warn.conflicts = FALSE)

try({#to avoid CRAN test problems
nflseedR::load_sharpe_games() %&gt;%
  dplyr::filter(season %in% 2019:2020) %&gt;%
  dplyr::select(sim = season, game_type, week, away_team, home_team, result) %&gt;%
  nflseedR::compute_division_ranks() %&gt;%
  purrr::pluck("standings")
})

# Restore old options
options(old)

</code></pre>

<hr>
<h2 id='compute_draft_order'>Compute NFL Draft Order using Game Results and Divisional Rankings</h2><span id='topic+compute_draft_order'></span>

<h3>Description</h3>

<p>Compute NFL Draft Order using Game Results and Divisional Rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_draft_order(
  teams,
  games,
  h2h = NULL,
  tiebreaker_depth = 3,
  .debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_draft_order_+3A_teams">teams</code></td>
<td>
<p>The division standings data frame including playoff seeds as
computed by <code><a href="#topic+compute_conference_seeds">compute_conference_seeds</a></code></p>
</td></tr>
<tr><td><code id="compute_draft_order_+3A_games">games</code></td>
<td>
<p>A data frame containing real or simulated game scores. The
following variables are required:
</p>

<dl>
<dt>sim</dt><dd><p>A simulation ID. Normally 1 - n simulated seasons.</p>
</dd>
<dt>game_type</dt><dd><p>One of 'REG', 'WC', 'DIV', 'CON', 'SB' indicating if a game was a regular season game or one of the playoff rounds.</p>
</dd>
<dt>week</dt><dd><p>The week of the corresponding NFL season.</p>
</dd>
<dt>away_team</dt><dd><p>Team abbreviation of the away team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>home_team</dt><dd><p>Team abbreviation of the home team (please see
<code><a href="#topic+divisions">divisions</a></code> for valid team abbreviations).</p>
</dd>
<dt>result</dt><dd><p>Equals home score - away score.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_draft_order_+3A_h2h">h2h</code></td>
<td>
<p>A data frame that is used for head-to-head tiebreakers across the
tie-breaking functions. It is computed by the function
<code><a href="#topic+compute_division_ranks">compute_division_ranks</a></code>.</p>
</td></tr>
<tr><td><code id="compute_draft_order_+3A_tiebreaker_depth">tiebreaker_depth</code></td>
<td>
<p>A single value equal to 1, 2, or 3. The default is 3. The
value controls the depth of tiebreakers that shall be applied. The deepest
currently implemented tiebreaker is strength of schedule. The following
values are valid:
</p>

<dl>
<dt>tiebreaker_depth = 1</dt><dd><p>Break all ties with a coinflip. Fastest variant.</p>
</dd>
<dt>tiebreaker_depth = 2</dt><dd><p>Apply head-to-head and division win percentage tiebreakers. Random if still tied.</p>
</dd>
<dt>tiebreaker_depth = 3</dt><dd><p>Apply all tiebreakers through strength of schedule. Random if still tied.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="compute_draft_order_+3A_.debug">.debug</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Controls whether additional
messages are printed to the console showing what the tie-breaking algorithms
are currently performing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of standings including the final draft pick number and
the variable <code>exit</code> which indicates the week number of the teams final
game (Super Bowl Winner is one week higher).
</p>


<h3>See Also</h3>

<p>The examples <a href="https://nflseedr.com/articles/articles/nflseedR.html">on the package website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Change some options for better output
old &lt;- options(list(digits = 3, tibble.print_min = 64))
library(dplyr, warn.conflicts = FALSE)

try({#to avoid CRAN test problems
games &lt;-
  nflseedR::load_sharpe_games() %&gt;%
  dplyr::filter(season %in% 2018:2019) %&gt;%
  dplyr::select(sim = season, game_type, week, away_team, home_team, result)

games %&gt;%
  nflseedR::compute_division_ranks() %&gt;%
  nflseedR::compute_conference_seeds(h2h = .$h2h, playoff_seeds = 6) %&gt;%
  nflseedR::compute_draft_order(games = games, h2h = .$h2h)
})

# Restore old options
options(old)

</code></pre>

<hr>
<h2 id='divisions'>NFL team names and the conferences and divisions they belong to</h2><span id='topic+divisions'></span>

<h3>Description</h3>

<p>NFL team names and the conferences and divisions they belong to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>divisions
</code></pre>


<h3>Format</h3>

<p>A data frame with 36 rows and 4 variables containing NFL team level
information, including franchises in multiple cities:
</p>

<dl>
<dt>team</dt><dd><p>Team abbreviation</p>
</dd>
<dt>conf</dt><dd><p>Conference abbreviation</p>
</dd>
<dt>division</dt><dd><p>Division name</p>
</dd>
<dt>sdiv</dt><dd><p>Division abbreviation</p>
</dd>
</dl>

<p>This data frame is created using the <code>teams_colors_logos</code> data frame of the
<code>nflfastR</code> package. Please see <code>data-raw/divisions.R</code> for the code to create
this data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
divisions

</code></pre>

<hr>
<h2 id='fmt_pct_special'>Format Numerical Values to Special Percentage Strings</h2><span id='topic+fmt_pct_special'></span>

<h3>Description</h3>

<p>This function formats numeric vectors with values between 0 and
1 into percentage strings with special specifications. Those specifications
are:
</p>

<ul>
<li><p> 0 and 1 are converted to &quot;0%&quot; and &quot;100%&quot; respectively (takes machine
precision into account)
</p>
</li>
<li><p> all other values &lt; 0.01 are converted to &quot;&lt;1%&quot;
</p>
</li>
<li><p> all other values between 0.01 and 0.995 are rounded to percentages without
decimals
</p>
</li>
<li><p> values between 0.995 and 0.999 are rounded to percentages with 1 decimal
</p>
</li>
<li><p> values between 0.999 and 1 are converted to &quot;&gt;99.9%&quot; unless closer to 1
than machine precision.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>fmt_pct_special(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fmt_pct_special_+3A_x">x</code></td>
<td>
<p>A vector of numerical values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(0, 0.004, 0.009, 0.011, 0.9, 0.98, 0.994,
       .995, .9989, .999, .9991, .99999999)
fmt &lt;- fmt_pct_special(x)
data.frame(x = x, fmt = fmt)
</code></pre>

<hr>
<h2 id='load_schedules'>Load Lee Sharpe's Games File</h2><span id='topic+load_schedules'></span><span id='topic+load_sharpe_games'></span>

<h3>Description</h3>

<p>Lee Sharpe maintains an important data set that contains
broadly used information on games in the National Football League. This
function is a convenient helper to download the file into memory without
having to remember the correct url.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_schedules(...)

load_sharpe_games(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_schedules_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules</a></code>
</p>

<dl>
<dt><code>seasons</code></dt><dd><p>a numeric vector of seasons to return, default <code>TRUE</code> returns all available data.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the following variables for all NFL games
since 1999:
</p>

<dl>
<dt>game_id</dt><dd><p>The ID of the game as assigned by the nflverse. Note that this value matches the <code>game_id</code> field in nflfastR if you wish to join the data.</p>
</dd>
<dt>season</dt><dd><p>The year of the NFL season. This represents the whole season, so regular season games that happen in January as well as playoff games will occur in the year after this number.</p>
</dd>
<dt>game_type</dt><dd><p>What type of game? One of the following values:
</p>

<ul>
<li><p><code>REG</code>: a regular season game
</p>
</li>
<li><p><code>WC</code>: a wildcard playoff game
</p>
</li>
<li><p><code>DIV</code>: a divisional round playoff game
</p>
</li>
<li><p><code>CON</code>: a conference championship
</p>
</li>
<li><p><code>SB</code>: a Super Bowl
</p>
</li></ul>

</dd>
<dt>week</dt><dd><p>The week of the NFL season the game occurs in. Please note that the <code>game_type</code> will differ for weeks &gt;= 18 because of the season expansion in 2021. Please use <code>game_type</code> to filter for regular season or postseason.</p>
</dd>
<dt>gameday</dt><dd><p>The date on which the game occurred.</p>
</dd>
<dt>weekday</dt><dd><p>The day of the week on which the game occurred.</p>
</dd>
<dt>gametime</dt><dd><p>The kickoff time of the game. This is represented in 24-hour time and the Eastern time zone, regardless of what time zone the game was being played in.</p>
</dd>
<dt>away_team</dt><dd><p>The away team.</p>
</dd>
<dt>away_score</dt><dd><p>The number of points the away team scored. Is <code>NA</code> for games which haven't yet been played.</p>
</dd>
<dt>home_team</dt><dd><p>The home team. Note that this contains the designated home team for games which no team is playing at home such as Super Bowls or NFL International games.</p>
</dd>
<dt>home_score</dt><dd><p>The number of points the home team scored. Is <code>NA</code> for games which haven't yet been played.</p>
</dd>
<dt>location</dt><dd><p>Either <code>Home</code> if the home team is playing in their home stadium, or <code>Neutral</code> if the game is being played at a neutral location. This still shows as <code>Home</code> for games between the Giants and Jets even though they share the same home stadium.</p>
</dd>
<dt>result</dt><dd><p>Equals <code>home_score - away_score</code>. The number of points the home team scored minus the number of points the away team scored. Is <code>NA</code> for games which haven't yet been played. Convenient for evaluating against the spread bets.</p>
</dd>
<dt>total</dt><dd><p>The sum of each team's score in the game. Equals <code>home_score + away_score</code>. Is <code>NA</code> for games which haven't yet been played. Convenient for evaluating over/under total bets.</p>
</dd>
<dt>overtime</dt><dd><p>Whether the game went into overtime (= 1) or not (= 0).</p>
</dd>
<dt>old_game_id</dt><dd><p>The id of the game issued by the NFL Game Statistics &amp; Information System.</p>
</dd>
<dt>away_rest</dt><dd><p>The number of days since that away team's previous game (7 is used for the team's first game of the season).</p>
</dd>
<dt>home_rest</dt><dd><p>The number of days since that home team's previous game (7 is used for the team's first game of the season).</p>
</dd>
<dt>away_moneyline</dt><dd><p>Odd of the away_team winning the game.</p>
</dd>
<dt>home_moneyline</dt><dd><p>Odd of the home_team winning the game.</p>
</dd>
<dt>spread_line</dt><dd><p>The spread line for the game. A positive number means the home team was favored by that many points, a negative number means the away team was favored by that many points. This lines up with the <code>result</code> column.</p>
</dd>
<dt>away_spread_odds</dt><dd><p>Odd of the away_team covering the <code>spread_line</code>.</p>
</dd>
<dt>home_spread_odds</dt><dd><p>Odd of the home_team covering the <code>spread_line</code>.</p>
</dd>
<dt>total_line</dt><dd><p>The total line for the game.</p>
</dd>
<dt>under_odds</dt><dd><p>Odd of the <code>total</code> being under the <code>total_line</code>.</p>
</dd>
<dt>over_odds</dt><dd><p>Odd of the <code>total</code> being over the <code>total_line</code>.</p>
</dd>
<dt>div_game</dt><dd><p>Whether the game was a divisional game (= 1) or not (= 0).</p>
</dd>
<dt>roof</dt><dd><p>What was the status of the stadium's roof? Will be one of the following values:
</p>

<ul>
<li><p><code>closed</code>: Stadium has a retractable roof which was closed
</p>
</li>
<li><p><code>dome</code>: An indoor stadium
</p>
</li>
<li><p><code>open</code>: Stadium has a retractable roof which was open
</p>
</li>
<li><p><code>outdoors</code>: An outdoor stadium
</p>
</li></ul>

</dd>
<dt>surface</dt><dd><p>What type of ground the game was played on.</p>
</dd>
<dt>temp</dt><dd><p>The temperature at the stadium (for <code>roof</code> types <code>outdoors</code> and <code>open</code> only).</p>
</dd>
<dt>wind</dt><dd><p>The speed of the wind in miles/hour (for <code>roof</code> types <code>outdoors</code> and <code>open</code> only).</p>
</dd>
<dt>away_qb_id</dt><dd><p>GSIS ID of the &quot;starting quarterback&quot; of the away team identified as the first
quarterback (per roster data) listed as <code>passer</code> (in <code>nflfastR</code> play by play data)
in 2+ plays that game. In the final regular season game it is the QB with the
most plays as the <code>passer</code>.</p>
</dd>
<dt>home_qb_id</dt><dd><p>GSIS ID of the &quot;starting quarterback&quot; of the home team identified as the first
quarterback (per roster data) listed as <code>passer</code> (in <code>nflfastR</code> play by play data)
in 2+ plays that game. In the final regular season game it is the QB with the
most plays as the <code>passer</code>.</p>
</dd>
<dt>away_qb_name</dt><dd><p>Full name of the &quot;starting quarterback&quot; of the away team identified as the first
quarterback (per roster data) listed as <code>passer</code> (in <code>nflfastR</code> play by play data)
in 2+ plays that game. In the final regular season game it is the QB with the
most plays as the <code>passer</code>.</p>
</dd>
<dt>home_qb_name</dt><dd><p>Full name of the &quot;starting quarterback&quot; of the home team identified as the first
quarterback (per roster data) listed as <code>passer</code> (in <code>nflfastR</code> play by play data)
in 2+ plays that game. In the final regular season game it is the QB with the
most plays as the <code>passer</code>.</p>
</dd>
<dt>away_coach</dt><dd><p>Name of the head coach of the away team.</p>
</dd>
<dt>home_coach</dt><dd><p>Name of the head coach of the home team.</p>
</dd>
<dt>referee</dt><dd><p>Name of the game's referee (head official).</p>
</dd>
<dt>stadium_id</dt><dd><p><a href="https://www.pro-football-reference.com/">Pro Football Reference</a> ID of the stadium.</p>
</dd>
<dt>stadium</dt><dd><p>Name of the stadium.</p>
</dd>
</dl>



<h3>See Also</h3>

<p>The internally called function <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({#to avoid CRAN test problems
games &lt;- load_sharpe_games()
dplyr::glimpse(games)
})


</code></pre>

<hr>
<h2 id='nflseedR-package'>nflseedR: Functions to Efficiently Simulate and Evaluate NFL Seasons</h2><span id='topic+nflseedR'></span><span id='topic+nflseedR-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A set of functions to simulate National Football League seasons including the sophisticated tie-breaking procedures.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Sebastian Carl <a href="mailto:mrcaseb@gmail.com">mrcaseb@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Lee Sharpe [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://nflseedr.com">https://nflseedr.com</a>
</p>
</li>
<li> <p><a href="https://github.com/nflverse/nflseedR">https://github.com/nflverse/nflseedR</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/nflverse/nflseedR/issues">https://github.com/nflverse/nflseedR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='simulate_nfl'>Simulate an NFL Season</h2><span id='topic+simulate_nfl'></span>

<h3>Description</h3>

<p>This function simulates a given NFL season multiple times using custom functions
to estimate and simulate game results and computes the outcome of the given
season including playoffs and draft order.
It is possible to run the function in parallel processes by calling the
appropriate <a href="future.html#topic+plan">plan</a>.
Progress updates can be activated by calling <a href="progressr.html#topic+handlers">handlers</a>
before the start of the simulations.
Please see the below given section &quot;Details&quot; for further information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_nfl(
  nfl_season = NULL,
  process_games = NULL,
  ...,
  playoff_seeds = ifelse(nfl_season &gt;= 2020, 7, 6),
  if_ended_today = FALSE,
  fresh_season = FALSE,
  fresh_playoffs = FALSE,
  tiebreaker_depth = 3,
  test_week = NULL,
  simulations = 1000,
  sims_per_round = max(ceiling(simulations/future::availableCores() * 2), 100),
  .debug = FALSE,
  print_summary = FALSE,
  sim_include = c("DRAFT", "REG", "POST")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_nfl_+3A_nfl_season">nfl_season</code></td>
<td>
<p>Season to simulate</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_process_games">process_games</code></td>
<td>
<p>A function to estimate and simulate the results of games. Uses team,
schedule, and week number as arguments.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_...">...</code></td>
<td>
<p>Additional parameters passed on to the function <code>process_games</code>.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_playoff_seeds">playoff_seeds</code></td>
<td>
<p>Number of playoff teams per conference (increased
in 2020 from 6 to 7).</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_if_ended_today">if_ended_today</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. If TRUE, ignore remaining regular
season games and cut to playoffs based on current regular season data.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_fresh_season">fresh_season</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Whether to blank out all game results
and simulate the the season from scratch (TRUE) or take game results so far as a given
and only simulate the rest (FALSE).</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_fresh_playoffs">fresh_playoffs</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Whether to blank out all playoff
game results and simulate the postseason from scratch (TRUE) or take game results so far
as a given and only simulate the rest (FALSE).</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_tiebreaker_depth">tiebreaker_depth</code></td>
<td>
<p>A single value equal to 1, 2, or 3. The default is 3. The
value controls the depth of tiebreakers that shall be applied. The deepest
currently implemented tiebreaker is strength of schedule. The following
values are valid:
</p>

<dl>
<dt>tiebreaker_depth = 1</dt><dd><p>Break all ties with a coinflip. Fastest variant.</p>
</dd>
<dt>tiebreaker_depth = 2</dt><dd><p>Apply head-to-head and division win percentage tiebreakers. Random if still tied.</p>
</dd>
<dt>tiebreaker_depth = 3</dt><dd><p>Apply all tiebreakers through strength of schedule. Random if still tied.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_test_week">test_week</code></td>
<td>
<p>Aborts after the simulator reaches this week and returns the results
from your process games call.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_simulations">simulations</code></td>
<td>
<p>Equals the number of times the given NFL season shall be simulated</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_sims_per_round">sims_per_round</code></td>
<td>
<p>The number of <code>simulations</code> can be split into
multiple rounds and be processed parallel. This parameter controls the number
of simulations per round. The default value determines the number of
locally available cores and calculates the number of simulations per round
to be equal to half of the available cores (various benchmarks showed this
results in optimal performance).</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_.debug">.debug</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>. Controls whether additional
messages are printed to the console showing what the tie-breaking algorithms
are currently performing.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_print_summary">print_summary</code></td>
<td>
<p>If <code>TRUE</code>, prints the summary statistics to the console.</p>
</td></tr>
<tr><td><code id="simulate_nfl_+3A_sim_include">sim_include</code></td>
<td>
<p>One of <code>"REG"</code>, <code>"POST"</code>, <code>"DRAFT"</code> (the default).
Simulation will behave as follows:
</p>

<dl>
<dt>REG</dt><dd><p>Simulate the regular season and compute standings, division ranks, and playoff seeds</p>
</dd>
<dt>POST</dt><dd><p>Do REG + simulate the postseason</p>
</dd>
<dt>DRAFT</dt><dd><p>Do POST + compute draft order</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>



<h4>More Speed Using Parallel Processing</h4>

<p>We recommend choosing a default parallel processing method and saving it
as an environment variable in the R user profile to make sure all futures
will be resolved with the chosen method by default.
This can be done by following the below given steps.
</p>
<p>First, run the following line and the user profile should be opened automatically.
If you haven't saved any environment variables yet, this will be an empty file.
</p>
<div class="sourceCode"><pre>usethis::edit_r_environ()
</pre></div>
<p>In the opened file add the next line, then save the file and restart your R session.
Please note that this example sets &quot;multisession&quot; as default. For most users
this should be the appropriate plan but please make sure it truly is.
</p>
<div class="sourceCode"><pre>R_FUTURE_PLAN="multisession"
</pre></div>
<p>After the session is freshly restarted please check if the above method worked
by running the next line. If the output is <code>FALSE</code> you successfully set up a
default non-sequential <code><a href="future.html#topic+plan">future::plan()</a></code>. If the output is <code>TRUE</code> all functions
will behave like they were called with <code><a href="purrr.html#topic+map">purrr::map()</a></code> and NOT in multisession.
</p>
<div class="sourceCode"><pre>inherits(future::plan(), "sequential")
</pre></div>
<p>For more information on possible plans please see
<a href="https://github.com/HenrikBengtsson/future/blob/develop/README.md">the future package Readme</a>.
</p>



<h4>Get Progress Updates while Functions are Running</h4>

<p>Most nflfastR functions are able to show progress updates
using <code><a href="progressr.html#topic+progressor">progressr::progressor()</a></code> if they are turned on before the function is
called. There are at least two basic ways to do this by either activating
progress updates globally (for the current session) with
</p>
<div class="sourceCode"><pre>progressr::handlers(global = TRUE)
</pre></div>
<p>or by piping the function call into <code><a href="progressr.html#topic+with_progress">progressr::with_progress()</a></code>:
</p>
<div class="sourceCode"><pre>simulate_nfl(2020, fresh_season = TRUE) %&gt;%
  progressr::with_progress()
</pre></div>
<p>For more information how to work with progress handlers please see <a href="progressr.html#topic+progressr">progressr::progressr</a>.
</p>



<h3>Value</h3>

<p>An <code>nflseedR_simulation</code> object containing a list of 6 data frames
data frames with the results of all simulated games,
the final standings in each simulated season (incl. playoffs and draft order),
summary statistics across all simulated seasons, and the simulation parameters. For a full list,
please see <a href="https://nflseedr.com/articles/articles/nflsim.html#simulation-output">the package website</a>.
</p>


<h3>See Also</h3>

<p>The examples <a href="https://nflseedr.com/articles/articles/nflsim.html">on the package website</a>
</p>
<p>The method <code><a href="#topic+summary.nflseedR_simulation">summary.nflseedR_simulation()</a></code> that creates a pretty html summary table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(nflseedR)

# Activate progress updates
# progressr::handlers(global = TRUE)

# Parallel processing can be activated via the following line
# future::plan("multisession")

try({#to avoid CRAN test problems
# Simulate the season 4 times in 2 rounds
sim &lt;- nflseedR::simulate_nfl(
  nfl_season = 2020,
  fresh_season = TRUE,
  simulations = 4,
  sims_per_round = 2
)

# Overview output
dplyr::glimpse(sim)
})

</code></pre>

<hr>
<h2 id='summary.nflseedR_simulation'>Compute Pretty Simulations Summary Table</h2><span id='topic+summary.nflseedR_simulation'></span>

<h3>Description</h3>

<p>Uses the R package gt to create a pretty html table of the
nflseedR simulation summary data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nflseedR_simulation'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.nflseedR_simulation_+3A_object">object</code></td>
<td>
<p>an object for which a summary is desired.</p>
</td></tr>
<tr><td><code id="summary.nflseedR_simulation_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to the methods (currently not used).</p>
</td></tr>
</table>


<h3>Output of below example</h3>

<p><img src="../help/figures/summary_tbl.png" width=75% alt="summary_tbl.png" />
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(nflseedR)
# set seed for recreation,
# internal parallelization requires a L'Ecuyer-CMRG random number generator
set.seed(19980310, kind = "L'Ecuyer-CMRG")

# Simulate the season 20 times in 1 round
sim &lt;- nflseedR::simulate_nfl(
  nfl_season = 2021,
  fresh_season = TRUE,
  simulations = 20
)

# Create Summary Tables
tbl &lt;- summary(sim)

# The output of tbl is given in the above image.

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
