<!DOCTYPE html><html lang="en"><head><title>Help for package iBST</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {iBST}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#iBST-package'>
<p>improper Bagging Subsample Survival Tree</p></a></li>
<li><a href='#Bagg_pred_Surv'>
<p>Bagging survival tree prediction</p></a></li>
<li><a href='#Bagg_Surv'>
<p>Bagging improper survival trees</p></a></li>
<li><a href='#burn'>
<p>burn dataset</p></a></li>
<li><a href='#improper_tree'>
<p>imprper survival tree</p></a></li>
<li><a href='#permute_select_surv'>
<p>permutation variable selection</p></a></li>
<li><a href='#PseudoR2.Cure'>
<p>Pseudo R2 criterion</p></a></li>
<li><a href='#rcpp_hello_world'>
<p>Simple function using Rcpp</p></a></li>
<li><a href='#tree2indicators'>
<p>From a tree to indicators (or dummy variables)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Improper Bagging Survival Tree</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-01-12</td>
</tr>
<tr>
<td>Author:</td>
<td>Cyprien Mbogning and Philippe Broet</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cyprien Mbogning &lt;cyprien.mbogning@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Fit a full or subsampling bagging survival tree on a mixture of population (susceptible and nonsusceptible)
             using either a pseudo R2 criterion or an adjusted Logrank criterion. The predictor is 
             evaluated using the Out Of Bag Integrated Brier Score (IBS) and several scores of importance
             are computed for variable selection. The thresholds values for variable selection are 
             computed using a nonparametric permutation test. 
             See 'Cyprien Mbogning' and 'Philippe Broet' (2016)&lt;<a href="https://doi.org/10.1186%2Fs12859-016-1090-x">doi:10.1186/s12859-016-1090-x</a>&gt; for 
             an overview about the methods implemented in this package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>survival , rpart , parallel</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.8)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-12 14:54:03 UTC; cypry</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-12 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='iBST-package'>
improper Bagging Subsample Survival Tree
</h2><span id='topic+iBST-package'></span><span id='topic+iBST'></span>

<h3>Description</h3>

<p>Fit a bagging survival tree on a mixture of population (susceptible and                         nonsusceptible)using either a pseudo R2 criterion or an adjusted Logrank criterion.              The predictor is evaluated using the Out Of Bag Integrated Brier Score (IBS) and                several scores of importanceare computed for variable selection. The thresholds                 values for variable selection are computed using a nonparametric permutation test.
See Cyprien Mbogning and Philippe Broet (2016)&lt;doi:10.1186/s12859-016-1090-x&gt; for               an overview about the methods implemented in this package.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> iBST</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.2</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-01-12</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL(&gt;=2.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>
<p>Maintainer: Cyprien Mbogning &lt;cyprien.mbogning@gmail.com&gt;
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>
<p>Duhaze Julianne et al. (2020). A Machine Learning Approach for High-Dimensional Time-to-Event Prediction With Application to Immunogenicity of Biotherapies in the ABIRISK Cohort. Frontiers in Immunology, 11.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code> <code><a href="#topic+Bagg_pred_Surv">Bagg_pred_Surv</a></code> <code><a href="#topic+improper_tree">improper_tree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data(burn)
 myarg = list(cp = 0, maxcompete = 0, maxsurrogate = 0, maxdepth = 2)
 Y.names = c("T3" ,"D3")
 P.names = 'Z2'
 T.names = c("Z1", paste("Z", 3:11, sep = ''))
 mybag = 40
 feat_samp = length(T.names)
 set.seed(5000)
 
 ## fit an improper survival tree
 burn.tree &lt;- suppressWarnings(improper_tree(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "R2", 
    args.rpart = myarg))
    
 plot(burn.tree)
 text(burn.tree, cex = .7, xpd = TRUE)
 
 ## fit an improper Bagging survival tree with the adjusted Logrank criterion
 burn.BagEssai0 &lt;- suppressWarnings(Bagg_Surv(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "LR", 
    args.rpart = myarg, 
    args.parallel = list(numWorkers = 1), 
    Bag = mybag, feat = feat_samp))
 
 ## fit an improper Bagging survival tree with the pseudo R2 criterion
 burn.BagEssai1 &lt;- suppressWarnings(Bagg_Surv(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "R2", 
    args.rpart = myarg, 
    args.parallel = list(numWorkers = 1), 
    Bag = mybag, feat = feat_samp))

 ## Plot the variable importance scores
 par(mfrow=c(1,3))
barplot(burn.BagEssai1$IIS, 
   main = 'IIS', 
   horiz = TRUE, 
   las = 1,
   cex.names = .8, 
   col = 'lightblue')
   
barplot(burn.BagEssai1$DIIS, 
   main = 'DIIS', 
   horiz = TRUE, 
   las = 1,
   cex.names = .8, 
   col = 'grey') 
   
barplot(burn.BagEssai1$DEPTH, 
   main = 'MinDepth', 
   horiz = TRUE, 
   las = 1,
   cex.names = .8, 
   col = 'purple')


 ## evaluation of the Bagging predictors 
pred0 &lt;- suppressWarnings(Bagg_pred_Surv(burn, 
   Y.names, 
   P.names, 
   burn.BagEssai0, 
   args.parallel = list(numWorkers = 1), 
   OOB = TRUE)) 
 
 
 pred1 &lt;- suppressWarnings(Bagg_pred_Surv(burn, 
   Y.names, 
   P.names, 
   burn.BagEssai1, 
   args.parallel = list(numWorkers = 1), 
   OOB = TRUE)) 
 
## End(Not run)
</code></pre>

<hr>
<h2 id='Bagg_pred_Surv'>
Bagging survival tree prediction 
</h2><span id='topic+Bagg_pred_Surv'></span>

<h3>Description</h3>

<p>Use the Bagging improper survival tree to predict on new features and to evaluate the predictor using 
Out Of Bag Integrated Brier Scores with either the Nelson Aalen estimator or the Breslow estimator. A permutation importance score is also computed using OOB observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Bagg_pred_Surv(xdata, Y.names, P.names, resBag, args.parallel = list(numWorkers = 1), 
               new_data = data.frame(), OOB = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Bagg_pred_Surv_+3A_xdata">xdata</code></td>
<td>

<p>The learning data frame
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_y.names">Y.names</code></td>
<td>

<p>A vector of the names of the two variables of interest (the time-to-event is follow by the event indicator)
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_p.names">P.names</code></td>
<td>

<p>The names of independant variables acting on the non-susceptible population (the plateau)
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_resbag">resBag</code></td>
<td>

<p>The result of the <code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code> function
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_args.parallel">args.parallel</code></td>
<td>

<p>a list  containing the number of parallel computing arguments: The number of workers, the type of parallelization to achieve, ...  see <code><a href="parallel.html#topic+mclapply">mclapply</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_new_data">new_data</code></td>
<td>

<p>An optional data frame to validate the bagging procedure (the test dataset)
</p>
</td></tr>
<tr><td><code id="Bagg_pred_Surv_+3A_oob">OOB</code></td>
<td>

<p>A value of <code>TRUE</code> or <code>FALSE</code> with <code>TRUE</code> indicating  the computation of the  OOB error using the Integrated Brier Score and also the computation of the permutation importance score. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>PREDNA</code></td>
<td>
<p>A matrix with Nelson Aalen predictions on all individuals of the learning sample </p>
</td></tr>
<tr><td><code>PREDBRE</code></td>
<td>
<p>A matrix with Breslow predictions on all individuals of the learning sample</p>
</td></tr>
<tr><td><code>tabhazNAa</code></td>
<td>
<p>A list of matrix with Nelson Aalen  prediction of each tree of the bagging sequence with the leaf node prediction in each column</p>
</td></tr>
<tr><td><code>tabhazBRe</code></td>
<td>
<p>A list of matrix with Breslow  prediction of each tree of the bagging sequence with the leaf node prediction in each column</p>
</td></tr>
<tr><td><code>OOB</code></td>
<td>
<p>A value of <code>NULL</code> if <code>OOB</code> is <code>FALSE</code>. A list of twelve elements otherwise:
<code>IBSKM</code>: The Kaplan-Meier estimation of the Integrated Brier Score; <code>IBSNAOOB</code>: The OOB error using the Nelson-Aalen estimator; <code>IBSBREOOB</code>: The OOB error using the Breslow estimator; <code>vimpoobpbpna</code>: The permutation variable importance using the Nelson-Aalen estimator; <code>vimpoobpbpbre</code>: The permutation variable importance using the Breslow estimator; <code>oobibspbpna</code>: The mean OOB error predictor by predictor using the Nelson-Aalen estimator; <code>oobibspbpbre</code>: The mean OOB error predictor by predictor using the Breslow estimator;  <code>SURVNAOOB</code>: A matrix with the predicted OOB survival using the Nelson-Aalen estimator; <code>SURVBREOOB</code>: A matrix with the predicted OOB survival using the Breslow estimator; <code>BSTKM</code>: The vector of Brier scores using the KM estimator; <code>BSTNAOOB</code>: The vector of Brier scores using the NA estimator; <code>BSTBREOOB</code>: The vector of Brier scores using the BRE estimator.
</p>
</td></tr>
<tr><td><code>Timediff</code></td>
<td>
<p>The execution time of the prediction  procedure</p>
</td></tr>
<tr><td><code>TEST</code></td>
<td>
<p>A value of <code>NULL</code> if <code>new_data</code> is not available. A list of seven elements otherwise: <code>IBSNAKMnew</code>: The IBS using the NA estimator on the new dataset; <code>IBSBRKMnew</code>: The IBS using the BRE estimator on the new dataset; <code>IBSKMnew</code>: The IBS using the KM estimator on the new dataset; <code>SURVNAnew</code>: A matrix of predicted survival on the new dataset using the NA estimator;
<code>SURVBREnew</code>: A matrix of predicted survival on the new dataset using the BRE estimator; <code>SURV_NAnew</code>: a vector of survival prediction on the testing dataset using the NA estimator; <code>SURV_BREnew</code>: a vector of survival prediction on the testing dataset using the BRE estimator.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>
<p>Duhaze Julianne et al. (2020). A Machine Learning Approach for High-Dimensional Time-to-Event Prediction With Application to Immunogenicity of Biotherapies in the ABIRISK Cohort. Frontiers in Immunology, (11).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data(burn)
 myarg = list(cp = 0, maxcompete = 0, maxsurrogate = 0, maxdepth = 2)
 Y.names = c("T3" ,"D3")
 P.names = 'Z2'
 T.names = c("Z1", paste("Z", 3:11, sep = ''))
 mybag = 40
 feat_samp = length(T.names)
 set.seed(5000)
 
 burn.BagEssai0 &lt;- suppressWarnings(Bagg_Surv(burn, 
        Y.names, 
        P.names, 
        T.names, 
        method = "LR", 
        args.rpart = myarg, 
        args.parallel = list(numWorkers = 1), 
        Bag = mybag, feat = feat_samp))
 
 burn.BagEssai1 &lt;- suppressWarnings(Bagg_Surv(burn, 
        Y.names, 
        P.names, 
        T.names, 
        method = "R2", 
        args.rpart = myarg, 
        args.parallel = list(numWorkers = 1), 
        Bag = mybag, feat = feat_samp))

pred0 &lt;- Bagg_pred_Surv(burn, 
    Y.names, 
    P.names, 
    burn.BagEssai0, 
    args.parallel = list(numWorkers = 1), 
    OOB = TRUE) 
 
 
 pred1 &lt;- Bagg_pred_Surv(burn, 
    Y.names, 
    P.names, 
    burn.BagEssai1, 
    args.parallel = list(numWorkers = 1), 
    OOB = TRUE) 
 
## End(Not run)
</code></pre>

<hr>
<h2 id='Bagg_Surv'>
Bagging improper survival trees
</h2><span id='topic+Bagg_Surv'></span>

<h3>Description</h3>

<p>Bagging sunbsampling procedure to aggregate several improper trees using either the pseudo-R2 procedure or the adjusted Logrank procedure. Several scores for variables importance are computed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Bagg_Surv(xdata, 
     Y.names, 
     P.names, 
     T.names, 
     method = "R2", 
     args.rpart, 
     args.parallel = list(numWorkers = 1), 
     Bag = 100, feat = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Bagg_Surv_+3A_xdata">xdata</code></td>
<td>

<p>The learning data frame
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_y.names">Y.names</code></td>
<td>

<p>A vector of the names of the two variables of interest (the time-to-event is follow by the event indicator)
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_p.names">P.names</code></td>
<td>

<p>The names of independant variables acting on the non-susceptible population (the plateau)
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_t.names">T.names</code></td>
<td>

<p>The names of independant variables acting on the survival of the susceptible population
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_method">method</code></td>
<td>

<p>The choosen method (either <code>"LR"</code> for the Logrank or <code>"R2"</code> for the proposed pseudo-R2 criterion)
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_args.rpart">args.rpart</code></td>
<td>

<p>The improper survival tree parameters: a list of options that control details of the rpart algorithm.
<code>minbucket</code>: the minimum number of observations in any terminal &lt;leaf&gt; node; <code>cp</code>: 
complexity parameter (Any split that does not decrease the overall lack of fit by a factor of
cp is not attempted); <code>maxdepth</code>:  the maximum depth of any node of the final tree, with
the root node counted as depth 0. ...
See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> for further details 
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_args.parallel">args.parallel</code></td>
<td>

<p>a list  containing the number of parallel computing arguments: The number of workers, the type of parallelization to achieve, ...  see <code><a href="parallel.html#topic+mclapply">mclapply</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_bag">Bag</code></td>
<td>

<p>The number of Bagging samples to consider 
</p>
</td></tr>
<tr><td><code id="Bagg_Surv_+3A_feat">feat</code></td>
<td>

<p>The size of features subsample. A full baging when feat is the total number of features. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the Bagging procedure, it is mendatory to set <code>maxcompete = 0</code> and <code>maxsurrogate = 0</code> within the <code>args.rpart</code> arguments. This will ensured the correct calculation of the  importance of variables and also a better computation time.
</p>


<h3>Value</h3>

<p>A list of ten elements
</p>
<table role = "presentation">
<tr><td><code>MaxTreeList</code></td>
<td>
<p>The list of improper survival trees computed during the bagging procedure</p>
</td></tr>
<tr><td><code>IIS</code></td>
<td>
<p>The Index Importance Score </p>
</td></tr>
<tr><td><code>DIIS</code></td>
<td>
<p>The Depth Index Importance Score </p>
</td></tr>
<tr><td><code>DEPTH</code></td>
<td>
<p>The minimum depth importance Score </p>
</td></tr>
<tr><td><code>IND_OOB</code></td>
<td>
<p>A list of length <code>Bag</code> containing the Out Of Bag (OOB) individuals for improper
survival tree model </p>
</td></tr>
<tr><td><code>IIND_SAMP</code></td>
<td>
<p>The final list of length <code>Bag</code> of sample individuals used for each improper survival tree</p>
</td></tr>
<tr><td><code>IIND_SAMP</code></td>
<td>
<p>The initial list  of sample individuals used for each improper survival tree at teh beginning</p>
</td></tr>
<tr><td><code>Bag</code></td>
<td>
<p>The number of bagging samples retained at the end of the procedure after removing the trees without leaves</p>
</td></tr>
<tr><td><code>indrpart</code></td>
<td>
<p>a vector of <code>TRUE</code> or <code>FALSE</code> with the value FALSE when the corresponding tree is removed from the final bagged predictor</p>
</td></tr>
<tr><td><code>Timediff</code></td>
<td>
<p>The ellapsed time of the Bagging procedure</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This version of the code allows for the moment only one variable to have an impact on the cured population.The next version will allow more than one variable.
</p>


<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>
<p>Duhaze Julianne et al. (2020). A Machine Learning Approach for High-Dimensional Time-to-Event Prediction With Application to Immunogenicity of Biotherapies in the ABIRISK Cohort. Frontiers in Immunology, 11.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_pred_Surv">Bagg_pred_Surv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data(burn)
 myarg = list(cp = 0, maxcompete = 0, maxsurrogate = 0, maxdepth = 2)
 Y.names = c("T3" ,"D3")
 P.names = 'Z2'
 T.names = c("Z1", paste("Z", 3:11, sep = ''))
 mybag = 40
 feat_samp = length(T.names)
 set.seed(5000)
 
 burn.BagEssai0 &lt;- suppressWarnings(Bagg_Surv(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "LR", 
    args.rpart = myarg, 
    args.parallel = list(numWorkers = 1), 
    Bag = mybag, feat = feat_samp))
 
 burn.BagEssai1 &lt;- suppressWarnings(Bagg_Surv(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "R2", 
    args.rpart = myarg, 
    args.parallel = list(numWorkers = 1), 
    Bag = mybag, feat = feat_samp))


## End(Not run)
</code></pre>

<hr>
<h2 id='burn'>
burn dataset
</h2><span id='topic+burn'></span>

<h3>Description</h3>

<p>The burn data frame has 154 rows and 17 columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(burn)</code></pre>


<h3>Format</h3>

<p>A data frame with 154 observations on the following 17 variables.
</p>

<dl>
<dt><code>Obs</code></dt><dd><p>Observation number</p>
</dd>
<dt><code>Z1</code></dt><dd><p>Treatment: 0-routine bathing 1-Body cleansing</p>
</dd>
<dt><code>Z2</code></dt><dd><p>Gender (0=male 1=female)</p>
</dd>
<dt><code>Z3</code></dt><dd><p>Race: 0=nonwhite 1=white</p>
</dd>
<dt><code>Z4</code></dt><dd><p>Percentage of total surface area burned</p>
</dd>
<dt><code>Z5</code></dt><dd><p>Burn site indicator: head 1=yes, 0=no</p>
</dd>
<dt><code>Z6</code></dt><dd><p>Burn site indicator: buttock 1=yes, 0=no</p>
</dd>
<dt><code>Z7</code></dt><dd><p>Burn site indicator: trunk 1=yes, 0=no</p>
</dd>
<dt><code>Z8</code></dt><dd><p>Burn site indicator: upper leg 1=yes, 0=no</p>
</dd>
<dt><code>Z9</code></dt><dd><p>Burn site indicator: lower leg 1=yes, 0=no</p>
</dd>
<dt><code>Z10</code></dt><dd><p>Burn site indicator: respiratory tract 1=yes, 0=no</p>
</dd>
<dt><code>Z11</code></dt><dd><p>Type of burn: 1=chemical, 2=scald, 3=electric, 4=flame</p>
</dd>
<dt><code>T1</code></dt><dd><p>Time to excision or on study time</p>
</dd>
<dt><code>D1</code></dt><dd><p>Excision indicator: 1=yes 0=no</p>
</dd>
<dt><code>T2</code></dt><dd><p>Time to prophylactic antibiotic treatment or on study time</p>
</dd>
<dt><code>D2</code></dt><dd><p>Prophylactic antibiotic treatment: 1=yes 0=no</p>
</dd>
<dt><code>T3</code></dt><dd><p>Time to straphylocous aureaus infection or on study time</p>
</dd>
<dt><code>D3</code></dt><dd><p>Straphylocous aureaus infection: 1=yes 0=no</p>
</dd>     
</dl>



<h3>Source</h3>

<p>Klein and Moeschberger (1997) Survival Analysis Techniques for Censored and truncated data, <code>Springer</code>. 
</p>
<p>Ichida et al. <code>Stat. Med.</code> 12 (1993): 301-310.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(burn)
## maybe str(burn) ;
</code></pre>

<hr>
<h2 id='improper_tree'>
imprper survival tree
</h2><span id='topic+improper_tree'></span>

<h3>Description</h3>

<p>Fit an improper survival tree for the mixed population (susceptible and nonsusceptible) using either the 
proposed pseudo R2 criterion or an adjusted Logrank criterion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>improper_tree(xdata, 
     Y.names, 
     P.names, 
     T.names, 
     method = "R2", 
     args.rpart)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="improper_tree_+3A_xdata">xdata</code></td>
<td>

<p>The learning data frame
</p>
</td></tr>
<tr><td><code id="improper_tree_+3A_y.names">Y.names</code></td>
<td>

<p>A vector of the names of the two variables of interest (the time-to-event is follow by the event indicator)
</p>
</td></tr>
<tr><td><code id="improper_tree_+3A_p.names">P.names</code></td>
<td>

<p>The names of independant variables acting on the non-susceptible population (the plateau)
</p>
</td></tr>
<tr><td><code id="improper_tree_+3A_t.names">T.names</code></td>
<td>

<p>The names of independant variables acting on the survival of the susceptible population
</p>
</td></tr>
<tr><td><code id="improper_tree_+3A_method">method</code></td>
<td>

<p>The choosen method (either <code>"LR"</code> for the Logrank or <code>"R2"</code> for the proposed pseudo-R2 criterion)
</p>
</td></tr>
<tr><td><code id="improper_tree_+3A_args.rpart">args.rpart</code></td>
<td>

<p>The improper survival tree parameters: a list of options that control details of the rpart algorithm.
<code>minbucket</code>: the minimum number of observations in any terminal &lt;leaf&gt; node; <code>cp</code>: 
complexity parameter (Any split that does not decrease the overall lack of fit by a factor of
cp is not attempted); <code>maxdepth</code>:  the maximum depth of any node of the final tree, with
the root node counted as depth 0. ...
See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> for further details 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unprunned improper survival tree
</p>


<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code> <code><a href="#topic+Bagg_pred_Surv">Bagg_pred_Surv</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data(burn)
 myarg = list(cp = 0, maxcompete = 0, maxsurrogate = 0, maxdepth = 3)
 Y.names = c("T3" ,"D3")
 P.names = 'Z2'
 T.names = c("Z1", paste("Z", 3:11, sep = ''))
 burn.tree &lt;- suppressWarnings(improper_tree(burn, 
    Y.names, 
    P.names, 
    T.names, 
    method = "R2", 
    args.rpart = myarg))
    
 plot(burn.tree)
 text(burn.tree, cex = .7, xpd = TRUE)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='permute_select_surv'>
permutation variable selection
</h2><span id='topic+permute_select_surv'></span>

<h3>Description</h3>

<p>Variable selection using the permutation test on several scores of importance: <code>IIS</code>, <code>DIIS</code> and <code>DEPTH</code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>permute_select_surv(xdata, 
    Y.names, 
    P.names, 
    T.names, 
    importance = "IIS", 
    method = "R2",
    Bag, 
    args.rpart, 
    args.parallel = list(numWorkers = 1), 
    nperm = 50)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="permute_select_surv_+3A_xdata">xdata</code></td>
<td>

<p>The learning data frame
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_y.names">Y.names</code></td>
<td>

<p>A vector of the names of the two variables of interest (the time-to-event is follow by the event indicator)
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_p.names">P.names</code></td>
<td>

<p>The names of independant variables acting on the non-susceptible population (the plateau)
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_t.names">T.names</code></td>
<td>

<p>The names of independant variables acting on the survival of the susceptible population
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_importance">importance</code></td>
<td>

<p>The importance score to consider: either <code>IIS</code>, <code>DIIS</code> or <code>DEPTH</code>
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_method">method</code></td>
<td>

<p>The splitting method: either <code>"R2"</code> for the proposed pseudo-R2 criterion or <code>"LR"</code> for the adjusted Logrank criterion
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_bag">Bag</code></td>
<td>

<p>The number of Bagging samples to consider
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_args.rpart">args.rpart</code></td>
<td>

<p>The improper survival tree parameters: a list of options that control details of the rpart algorithm.
<code>minbucket</code>: the minimum number of observations in any terminal &lt;leaf&gt; node; <code>cp</code>: 
complexity parameter (Any split that does not decrease the overall lack of fit by a factor of
cp is not attempted); <code>maxdepth</code>:  the maximum depth of any node of the final tree, with
the root node counted as depth 0. ...
See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> for further details 
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_args.parallel">args.parallel</code></td>
<td>

<p>a list  containing the number of parallel computing arguments: The number of workers, the type of parallelization to achieve, ...  see <code><a href="parallel.html#topic+mclapply">mclapply</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="permute_select_surv_+3A_nperm">nperm</code></td>
<td>

<p>The number of permutation samples to consider for the permutation test
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Testing weither the importance score is null or not.
</p>


<h3>Value</h3>

<p>A list of five elements:
</p>
<table role = "presentation">
<tr><td><code>pvalperm1</code></td>
<td>
<p>The permutation test P-values ranking in decreasing order</p>
</td></tr>
<tr><td><code>pvalperm2</code></td>
<td>
<p>The permutation test P-values ranking in decreasing order considering an approximate gaussian distribution under the null hypothesis</p>
</td></tr>
<tr><td><code>pvalKS</code></td>
<td>
<p>The Kolmogorov-Smirnov P-values of the comparisons between the observed importance under the null hypothesis and a theoretical gaussian distribution</p>
</td></tr>
<tr><td><code>IMPH1</code></td>
<td>
<p>The observed importance score </p>
</td></tr>
<tr><td><code>PERMH0</code></td>
<td>
<p> A matrix with the importance scores for each permutation sample in each column</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code> <code><a href="#topic+Bagg_pred_Surv">Bagg_pred_Surv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 myarg = list(cp = 0, maxcompete = 0, maxsurrogate = 0, maxdepth = 2)
 Y.names = c("T3" ,"D3")
 P.names = 'Z2'
 T.names = c("Z1", paste("Z", 3:11, sep = ''))
 mybag = 40
 set.seed(5000)
 
 data(burn)
 resperm0 &lt;- suppressWarnings(permute_select_surv(xdata = burn, 
       Y.names, 
       P.names, 
       T.names, 
       method = "LR", 
       Bag = mybag, 
       args.rpart = myarg, 
       args.parallel = list(numWorkers = 1), 
       nperm = 150))
 
## End(Not run)
</code></pre>

<hr>
<h2 id='PseudoR2.Cure'>
Pseudo R2 criterion
</h2><span id='topic+PseudoR2.Cure'></span>

<h3>Description</h3>

<p>Pseudo R2 criterion for a mixture of population (susceptible and nonsusceptible populations)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PseudoR2.Cure(ygene, ydelai, yetat, strate, ordered = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PseudoR2.Cure_+3A_ygene">ygene</code></td>
<td>

<p>The main variable of interest
</p>
</td></tr>
<tr><td><code id="PseudoR2.Cure_+3A_ydelai">ydelai</code></td>
<td>

<p>The right censored delay until the event
</p>
</td></tr>
<tr><td><code id="PseudoR2.Cure_+3A_yetat">yetat</code></td>
<td>

<p>The censoring indicator
</p>
</td></tr>
<tr><td><code id="PseudoR2.Cure_+3A_strate">strate</code></td>
<td>

<p>The varaiables acting on the nonsusceptible or cured population 
</p>
</td></tr>
<tr><td><code id="PseudoR2.Cure_+3A_ordered">ordered</code></td>
<td>

<p>A value of <code>TRUE</code> or <code>FALSE</code> indicating weither or not the times to event are ordered
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A pseudo R2 value lying between 0 and 1.
</p>


<h3>Author(s)</h3>

<p>Cyprien Mbogning and Philippe Broet
</p>


<h3>References</h3>

<p>Mbogning, C. and Broet, P. (2016). Bagging survival tree procedure for
variable selection and prediction in the presence of nonsusceptible patients.
BMC bioinformatics, 17(1), 1.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bagg_Surv">Bagg_Surv</a></code> <code><a href="#topic+Bagg_pred_Surv">Bagg_pred_Surv</a></code> <code><a href="#topic+improper_tree">improper_tree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(burn)
PseudoR2.Cure(ygene = burn$Z3, 
   ydelai = burn$T3, 
   yetat = burn$D3, 
   strate = burn$Z2)
   
PseudoR2.Cure(ygene = burn$Z2, 
   ydelai = burn$T3, 
   yetat = burn$D3, 
   strate = burn$Z2)
</code></pre>

<hr>
<h2 id='rcpp_hello_world'>
Simple function using Rcpp
</h2><span id='topic+rcpp_hello_world'></span>

<h3>Description</h3>

<p>Simple function using Rcpp
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcpp_hello_world()	
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rcpp_hello_world()

## End(Not run)
</code></pre>

<hr>
<h2 id='tree2indicators'>
From a tree to indicators (or dummy variables)
</h2><span id='topic+tree2indicators'></span>

<h3>Description</h3>

<p>Coerces a given tree structure inheriting from rpart to binary covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tree2indicators(fit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tree2indicators_+3A_fit">fit</code></td>
<td>

<p>a tree structure inheriting to the rpart method
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of indicators defining the leaf nodes of the fitted tree from left to right
</p>


<h3>Author(s)</h3>

<p>Cyprien Mbogning
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
tree2indicators(fit)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
