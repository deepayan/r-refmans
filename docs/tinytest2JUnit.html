<!DOCTYPE html><html><head><title>Help for package tinytest2JUnit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tinytest2JUnit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#constructTestcaseTag'><p>Construct JUnit <code style="white-space: pre;">&#8288;&lt;/testcase&gt;&#8288;</code> tag</p></a></li>
<li><a href='#constructTestsuitesTag'><p>Construct the JUnit <code style="white-space: pre;">&#8288;&lt;/testsuites&gt;&#8288;</code> tag</p></a></li>
<li><a href='#constructTestsuiteTag'><p>Construct JUnit <code style="white-space: pre;">&#8288;&lt;/testsuite&gt;&#8288;</code> tag</p></a></li>
<li><a href='#escapeXmlText'><p>Escape xml text</p></a></li>
<li><a href='#format.XMLtag'><p>Format method for XMLtag class</p></a></li>
<li><a href='#print.XMLtag'><p>Print method for XMLtag class.</p></a></li>
<li><a href='#tag'><p>XML tag</p></a></li>
<li><a href='#writeJUnit'><p>Write the results of a <code>tinytests</code>-object into JUnit xml report.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Convert 'tinytest' Output to JUnit XML</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anne-Katrin Hess &lt;anne-katrin.hess@openanalytics.eu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Unit testing is a solid component of automated CI/CD pipelines. 'tinytest' - a light-weight,
	zero-dependency  alternative to 'testthat' was developed. To be able to integrate 'tinytests' results into common CI/CD
	systems the 'tinytests'-object needs to be converted to JUnit XML format. 'tinytest2JUnit' enables this conversion
	while keeping the zero-dependency nature.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/openanalytics/tinytest2JUnit">https://github.com/openanalytics/tinytest2JUnit</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/openanalytics/tinytest2JUnit/issues">https://github.com/openanalytics/tinytest2JUnit/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>Open Analytics NV, 2023</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-11 12:46:26 UTC; root</td>
</tr>
<tr>
<td>Author:</td>
<td>Anne-Katrin Hess [aut, cre],
  Lennart Tuijnder [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-12 07:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='constructTestcaseTag'>Construct JUnit <code style="white-space: pre;">&#8288;&lt;/testcase&gt;&#8288;</code> tag</h2><span id='topic+constructTestcaseTag'></span>

<h3>Description</h3>

<p>Construct JUnit <code style="white-space: pre;">&#8288;&lt;/testcase&gt;&#8288;</code> tag based on a single <code>tinytest</code> result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructTestcaseTag(tinytest)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="constructTestcaseTag_+3A_tinytest">tinytest</code></td>
<td>
<p>a <code>tinytest</code>-object representing an individual test case.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>XMLtag</code>: with tag-name = <code>tinytest</code> and contains the test result per test.
</p>

<hr>
<h2 id='constructTestsuitesTag'>Construct the JUnit <code style="white-space: pre;">&#8288;&lt;/testsuites&gt;&#8288;</code> tag</h2><span id='topic+constructTestsuitesTag'></span>

<h3>Description</h3>

<p>Convert the <code>tinytests</code>-object containing test across possibly multiple files into a JUnit
<code style="white-space: pre;">&#8288;&lt;/testsuites&gt;&#8288;</code> tag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructTestsuitesTag(testResults)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="constructTestsuitesTag_+3A_testresults">testResults</code></td>
<td>
<p><code>tinytests</code>-object to convert into a JUnit XML object.
Usually the result of calling <code><a href="tinytest.html#topic+test_package">tinytest::test_package()</a></code> or <code><a href="tinytest.html#topic+run_test_dir">tinytest::run_test_dir()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference for JUnit XML format: https://llg.cubic.org/docs/junit/
</p>


<h3>Value</h3>

<p><code>XMLtag</code>: with tag-name = <code style="white-space: pre;">&#8288;&lt;/testsuites&gt;&#8288;</code>. This is the root of the JUnit XML document.
</p>

<hr>
<h2 id='constructTestsuiteTag'>Construct JUnit <code style="white-space: pre;">&#8288;&lt;/testsuite&gt;&#8288;</code> tag</h2><span id='topic+constructTestsuiteTag'></span>

<h3>Description</h3>

<p>Construct the <code style="white-space: pre;">&#8288;&lt;/testsuite&gt;&#8288;</code> tag of a <code>tinytest</code>, given all the <code>tinytest</code> results from a single test file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructTestsuiteTag(testResultsSingleFile)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="constructTestsuiteTag_+3A_testresultssinglefile">testResultsSingleFile</code></td>
<td>
<p><code>tinytesta</code>-object with all test results of a specified test file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>XMLtag</code>: with tag-name = <code style="white-space: pre;">&#8288;&lt;/testsuite&gt;&#8288;</code> that contains all the test results per test file.
</p>

<hr>
<h2 id='escapeXmlText'>Escape xml text</h2><span id='topic+escapeXmlText'></span>

<h3>Description</h3>

<p>Escape the characters '&lt;' and <code>&amp;</code> in a character vector meant to be xml-text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>escapeXmlText(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="escapeXmlText_+3A_x">x</code></td>
<td>
<p>a <code>character</code> vector meant to be xml-text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same <code>character</code> vector x but xml text escaped.
</p>

<hr>
<h2 id='format.XMLtag'>Format method for XMLtag class</h2><span id='topic+format.XMLtag'></span>

<h3>Description</h3>

<p>Format S3 method for the <code>XMLtag</code>-class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'XMLtag'
format(x, level = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.XMLtag_+3A_x">x</code></td>
<td>
<p>an <code>XMLtag</code>-object</p>
</td></tr>
<tr><td><code id="format.XMLtag_+3A_level">level</code></td>
<td>
<p>print depth level. For each level 2 spaces are added to the left. The content of a
tag is automatically indented with 1 level.</p>
</td></tr>
<tr><td><code id="format.XMLtag_+3A_...">...</code></td>
<td>
<p>to ignore</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character(1)</code> vector of the formatted XML tag.
</p>

<hr>
<h2 id='print.XMLtag'>Print method for XMLtag class.</h2><span id='topic+print.XMLtag'></span>

<h3>Description</h3>

<p>Print method for XMLtag class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'XMLtag'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.XMLtag_+3A_x">x</code></td>
<td>
<p>a <code>XMLtag</code>-object</p>
</td></tr>
<tr><td><code id="print.XMLtag_+3A_...">...</code></td>
<td>
<p>to be ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>invisibly</code> the string that was printed to stdout.
</p>

<hr>
<h2 id='tag'>XML tag</h2><span id='topic+tag'></span>

<h3>Description</h3>

<p>Create a list object that roughly mimics the behaviour of a simplistic XML tag element.
Supported are XML tag-name, tag-attributes and tag-content.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag(name, attributes = list(), content = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_+3A_name">name</code></td>
<td>
<p><code>character(1)</code> specifying the name of the tag.</p>
</td></tr>
<tr><td><code id="tag_+3A_attributes">attributes</code></td>
<td>
<p><code>named-list</code> being the XML attributes.
Names = attribute names, Values = attribute value.</p>
</td></tr>
<tr><td><code id="tag_+3A_content">content</code></td>
<td>
<p><code>unnamed-list</code> being the content XML-tag. Each element is placed
next to each other in the tag.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>XMLtag</code>-object.
</p>

<hr>
<h2 id='writeJUnit'>Write the results of a <code>tinytests</code>-object into JUnit xml report.</h2><span id='topic+writeJUnit'></span>

<h3>Description</h3>

<p>Write the <code>tinytests</code>-object to a JUnit XML reporting file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeJUnit(tinytests, file, overwrite = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeJUnit_+3A_tinytests">tinytests</code></td>
<td>
<p><code>tinytests</code>-object to convert to JUnit xml.</p>
</td></tr>
<tr><td><code id="writeJUnit_+3A_file">file</code></td>
<td>
<p><code>character(1)</code>: Full file path to the .xml file to write the JUnit xml to.
Example: &quot;/home/user/documents/results.xml&quot;.</p>
</td></tr>
<tr><td><code id="writeJUnit_+3A_overwrite">overwrite</code></td>
<td>
<p><code>logical(1)</code>: should the file be overwritten if it already exist?
By default TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>invisible: TRUE</code>.
</p>


<h3>Side-effects</h3>

<p>Side effects are registered as a tests in the JUnit output and have been given a status
&quot;SIDE-EFFECT&quot;. The call and diff is also returned in the standard-output of the testcase tag.
</p>
<p>They are however not considered as failures and would thus not stop a pipeline.
</p>


<h3>Errors</h3>

<p>In case of overwrite = FALSE and the file already exists an error is thrown.
</p>


<h3>See Also</h3>

<p>The JUnit XML report format:  <a href="https://llg.cubic.org/docs/junit/">https://llg.cubic.org/docs/junit/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Run tests with `tinytest`
dirWithTests &lt;- system.file("example_tests/multiple_files",package = "tinytest2JUnit")
testresults &lt;- tinytest::run_test_dir(dirWithTests, verbose = FALSE)
# temporary output file to save JUnit XML to
tmpFile &lt;- tempfile(fileext = ".xml")
writeJUnit(tinytests = testresults, file = tmpFile)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
