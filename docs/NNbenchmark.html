<!DOCTYPE html><html><head><title>Help for package NNbenchmark</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NNbenchmark}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#NNbenchmark-package'><p>Package NNbenchmark</p></a></li>
<li><a href='#add2csv'><p>Create or Append a data.frame to a csv File</p></a></li>
<li><a href='#bWoodN1'><p>Dataset bWoodN1</p></a></li>
<li><a href='#cc'><p>Concatenates List and Vectors into a List</p></a></li>
<li><a href='#clearNN'><p>Detach the Loaded Packages and the ZZ object</p></a></li>
<li><a href='#createTimer'><p>Create a timer object. Get the data frame of a timer object</p></a></li>
<li><a href='#funRMSE'><p>Calculate the RMSE, MSE, MAE, and WAE Rounded to 4 digits</p></a></li>
<li><a href='#ht'><p>Concatenates head() and tail() in vector, list, matrix, data.frame, array</p></a></li>
<li><a href='#mDette'><p>Dataset mDette</p></a></li>
<li><a href='#mFriedman'><p>Dataset mFriedman</p></a></li>
<li><a href='#mIshigami'><p>Dataset mIshigami</p></a></li>
<li><a href='#mRef153'><p>Dataset mRef153</p></a></li>
<li><a href='#NNbigdatasets'><p>Big Datasets in One list (2020)</p></a></li>
<li><a href='#NNdatasets'><p>All Datasets in One List</p></a></li>
<li><a href='#NNdataSummary'><p>A Summary (in data.frame format) of NNdatasets</p></a></li>
<li><a href='#NNsummary'><p>Summarize Calculations of RMSE, MSE, MAE, and WAE</p></a></li>
<li><a href='#NNtrainPredict'><p>Generic Functions for Training and Predicting</p></a></li>
<li><a href='#plotNN'><p>Create a Plot, Add Lines or Points Depending The Context</p></a></li>
<li><a href='#prepareZZ'><p>Prepare a Dataset For All Possible Formats</p></a></li>
<li><a href='#timeR'><p>A R6 Class to represent a timer.</p></a></li>
<li><a href='#timestart'><p>Collect the difftime between two events</p></a></li>
<li><a href='#uDmod1'><p>Dataset uDmod1</p></a></li>
<li><a href='#uDmod2'><p>Dataset uDmod2</p></a></li>
<li><a href='#uDreyfus1'><p>Dataset uDreyfus1</p></a></li>
<li><a href='#uDreyfus2'><p>Dataset uDreyfus2</p></a></li>
<li><a href='#uGauss1'><p>Dataset uGauss1</p></a></li>
<li><a href='#uGauss2'><p>Dataset uGauss2</p></a></li>
<li><a href='#uGauss3'><p>Dataset uGauss3</p></a></li>
<li><a href='#uNeuroOne'><p>Dataset uNeuroOne</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Datasets and Functions to Benchmark Neural Network Packages</td>
</tr>
<tr>
<td>Description:</td>
<td>Datasets and functions to benchmark (convergence, speed, ease of use) R packages dedicated to regression with neural networks (no classification in this version). The templates for the tested packages are available in the R, R Markdown and HTML formats at <a href="https://github.com/pkR-pkR/NNbenchmarkTemplates">https://github.com/pkR-pkR/NNbenchmarkTemplates</a> and <a href="https://theairbend3r.github.io/NNbenchmarkWeb/index.html">https://theairbend3r.github.io/NNbenchmarkWeb/index.html</a>. The submitted article to the R-Journal can be read at <a href="https://www.inmodelia.com/gsoc2020.html">https://www.inmodelia.com/gsoc2020.html</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, pkgload</td>
</tr>
<tr>
<td>Suggests:</td>
<td>brnn, validann</td>
</tr>
<tr>
<td>Version:</td>
<td>3.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Patrice Kiener <a href="https://orcid.org/0000-0002-0505-9920"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Christophe Dutang <a href="https://orcid.org/0000-0001-6732-1501"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Salsabila Mahdi <a href="https://orcid.org/0000-0002-2559-4154"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Akshaj Verma <a href="https://orcid.org/0000-0002-3936-0033"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Yifu Yan [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Patrice Kiener &lt;rpackages@inmodelia.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pkR-pkR/NNbenchmark">https://github.com/pkR-pkR/NNbenchmark</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-05 15:43:18 UTC; Patrice</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-05 16:30:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='NNbenchmark-package'>Package NNbenchmark</h2><span id='topic+NNbenchmark-package'></span><span id='topic+NNbenchmark'></span>

<h3>Description</h3>

<p>Datasets and functions to benchmark (convergence, speed, ease of use) R packages 
dedicated to regression with neural networks (no classification in this version).
The templates for the tested packages are available at 
&lt;https://github.com/pkR-pkR/NNbenchmarkTemplates&gt; and 
&lt;https://theairbend3r.github.io/NNbenchmarkWeb/index.html&gt;. The submitted article 
to the R-Journal can be read at &lt;https://www.inmodelia.com/gsoc2020.html&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- grep("^[m,u]", ls("package:NNbenchmark"), value = TRUE); ds
t(sapply(ds, function(x) dim(get(x)))) 
NNdataSummary(NNdatasets)
plot(uGauss2)
pairs(mIshigami)
ht(NNdatasets, n = 2, l = 6)
</code></pre>

<hr>
<h2 id='add2csv'>Create or Append a data.frame to a csv File</h2><span id='topic+add2csv'></span>

<h3>Description</h3>

<p>Create or append a data.frame to a csv file. Column names are added at creation and 
ignored at the append steps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add2csv(x, file = "results.csv", dir = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add2csv_+3A_x">x</code></td>
<td>
<p>a data.frame or a matrix.</p>
</td></tr>
<tr><td><code id="add2csv_+3A_file">file</code></td>
<td>
<p>character. The filename.</p>
</td></tr>
<tr><td><code id="add2csv_+3A_dir">dir</code></td>
<td>
<p>character. The directory in which the file is written. 
Default value <code>"."</code> is the current directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing in the console. A csv file on the disk.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>results_csv &lt;- tempfile("results", fileext = ".csv")
x &lt;- data.frame(a = 1:3, b = 4:6) 
add2csv(x, file = results_csv) 
add2csv(x*10, file = results_csv) 
add2csv(x*100, file = results_csv) 
read.csv(file = results_csv) 

</code></pre>

<hr>
<h2 id='bWoodN1'>Dataset bWoodN1</h2><span id='topic+bWoodN1'></span>

<h3>Description</h3>

<p>A multivariate dataset (x1, x2, x3, x4, x5, x6, y) of class data.frame and dim 20000 
x 7 to be fitted by a neural network with 5 hidden neurons (41 parameters).
</p>


<h3>References</h3>

<p>Inspired by page 29 of Wood, S. N. (2011). Fast stable restricted maximum 
likelihood and marginal likelihood estimation of semiparametric generalized linear 
models. Journal of the Royal Statistical Society: Series B (Statistical Methodology), 
73(1), 3-36. 
<a href="https://people.bath.ac.uk/man54/SAMBa/ITTs/ITT2/EDF/REMLWood2009.pdf">https://people.bath.ac.uk/man54/SAMBa/ITTs/ITT2/EDF/REMLWood2009.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(bWoodN1)
</code></pre>

<hr>
<h2 id='cc'>Concatenates List and Vectors into a List</h2><span id='topic+cc'></span>

<h3>Description</h3>

<p>An intermediate function between <code>c()</code> and <code>list()</code>. 
Combine all terms in one single list. The result can be used by <code>do.call()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cc(char, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cc_+3A_char">char</code></td>
<td>
<p>a vector of named objects, except a list.</p>
</td></tr>
<tr><td><code id="cc_+3A_...">...</code></td>
<td>
<p>basic R objects: character, vectors, list, data.frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the objects concatenated.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lst &lt;- list(yaxt = "s", side = 2, col = 1:3) ; lst
dfr &lt;- data.frame(x = 5:9, y = 10:14) ; dfr

## With c(), the list is returned at its given position
c(lst, at = 7, labels = c("0", "0.5", "1"), dfr = dfr)
c(at = 7, labels = c("0", "0.5", "1"), lst, dfr = dfr)

## With cc(), the unnamed list is always returned in first position
cc(lst, at = 7, labels = c("0", "0.5", "1"), dfr = dfr)
cc(at = 7, dfr = dfr, labels = c("0", "0.5", "1"), lst)

## Some similarities and differences between c() and cc()
c( 1:5, y = 2:6, col = 2, lwd = 2)
cc(1:5, y = 2:6, col = 2, lwd = 2)

c( x = 1:5, y = 2:6, col = 2, lwd = 2)
cc(x = 1:5, y = 2:6, col = 2, lwd = 2)

## Regular function and do.call()
plot(x = 1:5, y = 2:6, col = 2, lwd = 2)
do.call( plot , cc(x = 1:5, y = 2:6, col = 3, lwd = 3, cex = 3))
do.call("plot", cc(x = 1:5, y = 2:6, col = 4, lwd = 4, cex = 4))

</code></pre>

<hr>
<h2 id='clearNN'>Detach the Loaded Packages and the ZZ object</h2><span id='topic+clearNN'></span><span id='topic+detachNN'></span>

<h3>Description</h3>

<p><code>clearNN</code> detachs <code>ZZ</code> and the packages loaded for the evaluation. 
</p>
<p><code>detachNN</code> detachs <code>ZZ</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearNN(donotremove, donotdetach = NULL)

detachNN()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearNN_+3A_donotremove">donotremove</code></td>
<td>
<p>a vector of characters representing objects in <code>ls()</code>.</p>
</td></tr>
<tr><td><code id="clearNN_+3A_donotdetach">donotdetach</code></td>
<td>
<p>a vector of packages and environments that are not detached.
<code>donotdetach = NULL</code> protects the packages and environments 
<code>".GlobalEnv"</code>, <code>"package:kableExtra"</code>, 
<code>"package:dplyr"</code>, <code>"package:stringr"</code>, 
<code>"package:NNbenchmark"</code>, <code>"package:rmarkdown"</code>, 
<code>"package:knitr"</code>, <code>"package:captioner"</code>,
<code>"package:pkgload"</code>, <code>"package:R6"</code>, 
<code>"tools:rstudio"</code>, 
<code>"package:RWsearch"</code>, <code>"package:pacman"</code>, 
<code>"package:stats"</code>, <code>"package:graphics"</code>, 
<code>"package:grDevices"</code>, <code>"package:utils"</code>, 
<code>"package:datasets"</code>, <code>"package:methods"</code>, 
<code>"Autoloads"</code>, <code>"package:base"</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='createTimer'>Create a timer object. Get the data frame of a timer object</h2><span id='topic+createTimer'></span><span id='topic+getTimer'></span>

<h3>Description</h3>

<p>This is a modified version of the <code>timeR</code> package for an internal use. 
Full credit is to Yifu Yan, the author of the <code>timeR</code> package.
</p>
<p><code>createTimer</code> creates a timer object.
</p>
<p><code>getTimer</code> returns a data frame with all records saved by the timer 
object. Columns in the data.frame are: event, start, end, duration, RMSE, 
MAE, stars, params, comment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createTimer(verbose = TRUE)

getTimer(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createTimer_+3A_verbose">verbose</code></td>
<td>
<p>A parameter to control whether to print messages while using
methods. Default to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="createTimer_+3A_object">object</code></td>
<td>
<p>The name for timer object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) object of R6 class for <code>createTimer</code>. A data.frame for 
<code>getTimer</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create a timer object. Record events. Get all records.
timeTT &lt;- createTimer(FALSE) # print is disabled
timeTT &lt;- createTimer()      # print is enabled
timeTT$start("event1")
Sys.sleep(1)
timeTT$stop("event1", RMSE = 1, MAE = 1.3, stars = "*", 
            params = "maxiter=100, lr=0.01", comment = "OK for 1",  
            printmsg = TRUE)
timeTT$start("event2")
Sys.sleep(2)
timeTT$stop("event2", RMSE = 2, MAE = 2.6, stars = "**",  
            params = "maxiter=1000, lr=0.001", comment = "OK for 2",  
            printmsg = FALSE)
getTimer(timeTT)

</code></pre>

<hr>
<h2 id='funRMSE'>Calculate the RMSE, MSE, MAE, and WAE Rounded to 4 digits</h2><span id='topic+funRMSE'></span><span id='topic+funMSE'></span><span id='topic+funMAE'></span><span id='topic+funWAE'></span>

<h3>Description</h3>

<p>Calculate the Root Mean Squared Error (RMSE), the Mean Squared Error (MSE), 
the Mean Absoluter Error (MAE), and the Worst Absolute Error (WAE). The
result is rounded to 4 digits by default. Apply <code>na.rm = TRUE</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>funRMSE(y_pred, y0, dgts = 4)

funMSE(y_pred, y0, dgts = 4)

funMAE(y_pred, y0, dgts = 4)

funWAE(y_pred, y0, dgts = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funRMSE_+3A_y_pred">y_pred</code></td>
<td>
<p>numeric vector of the predicted values</p>
</td></tr>
<tr><td><code id="funRMSE_+3A_y0">y0</code></td>
<td>
<p>numeric vector of the observed values</p>
</td></tr>
<tr><td><code id="funRMSE_+3A_dgts">dgts</code></td>
<td>
<p>integer value for how many digits to round to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value, either the RMSE, MSE, MAE, or WAE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y0 &lt;- 1:19
y_pred &lt;- y0 + rnorm(length(y0), sd = 0.3)
funRMSE(y_pred, y0)
funMSE( y_pred, y0)
funMAE( y_pred, y0)
funWAE( y_pred, y0)

</code></pre>

<hr>
<h2 id='ht'>Concatenates head() and tail() in vector, list, matrix, data.frame, array</h2><span id='topic+ht'></span><span id='topic+ht9'></span>

<h3>Description</h3>

<p>Concatenates <code>head(n)</code> and <code>tail(n)</code> rows and subset with m columns. 
Works also with array, list and matrix in data.frame. 
Keeps the data.table format (and add a timezone by default). 
See the matsindf package for matrix(ces) in tibble.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ht(x, n = 3, m = 4, p = 2, l = 2, names = TRUE, LTT = c("x", "L",
  "N", "M", "P", "Q", "R", "S", "T"))

ht9(x, n = 3, m = 9999, p = 2, l = 2, names = TRUE, LTT = c("x",
  "L", "N", "M", "P", "Q", "R", "S", "T"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ht_+3A_x">x</code></td>
<td>
<p>vector, matrix, data.frame, array or list.</p>
</td></tr>
<tr><td><code id="ht_+3A_n">n</code></td>
<td>
<p>integer. Cut in the first dimension.</p>
</td></tr>
<tr><td><code id="ht_+3A_m">m</code></td>
<td>
<p>integer. Cut in the second dimension.</p>
</td></tr>
<tr><td><code id="ht_+3A_p">p</code></td>
<td>
<p>integer. Cut in the third and the next dimensions.</p>
</td></tr>
<tr><td><code id="ht_+3A_l">l</code></td>
<td>
<p>integer. Cut for a list and for data.frame with matrix inside.</p>
</td></tr>
<tr><td><code id="ht_+3A_names">names</code></td>
<td>
<p>logical. Provide names and numbers for undefined dimnames.</p>
</td></tr>
<tr><td><code id="ht_+3A_ltt">LTT</code></td>
<td>
<p>character. The letter used in each dimension (vector, list, array).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the same class than x but much shorter.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
### Vector, data.frame, array
ht(1:100, names = FALSE)
ht(1:100, LTT = "z")

ht9(mtcars); dim(mtcars)

arr4 &lt;- array(1:1680, c(8,7,6,5))
ht(arr4, n=1, p=1, names = FALSE)
ht(arr4, n=1, p=1, names = TRUE, LTT = c("x","L","X","Y","Z","T"))

### List of matrices
lstmat &lt;- rep(list(matrix(1:100, 10)), 8)
for (i in seq_along(lstmat)) lstmat[[i]] &lt;- lstmat[[i]] *i
lstmat
ht(lstmat, n = 2, m = 2, l = 2, names = FALSE)
ht(lstmat, n = 2, m = 3, l = 1, names = TRUE)
ht(lstmat, n = 2, m = 3, l = 1, LTT = c("x","L","X","Y","Z"))

### Data.frame with matrices inside.
### See For instance data("gasoline", package = "pls")

## Colnames on matrix B but not on matrix C. Protected data.frame.
B &lt;- matrix(101:160, 10); colnames(B) &lt;- paste0(1:6, "b"); B
C &lt;- matrix(101:160, 10); C
dfrmat &lt;- data.frame(A = 1:10, B = I(B), C = I(C), D = 11:20); dfrmat
colnames(dfrmat)

## Matrix columns are controlled by m.
## Unnamed C matrix columns have old values but new names. Be aware!
ht(dfrmat, n = 2, m = 1, l = 2, names = FALSE) # Original C.6 is now C.2
ht(dfrmat, n = 2, m = 1, l = 2, names = TRUE)  # Names keep original ranks

## Data.frame columns are controlled by l.
ht(dfrmat, n = 3, m = 2, l = 1, names = TRUE)

</code></pre>

<hr>
<h2 id='mDette'>Dataset mDette</h2><span id='topic+mDette'></span>

<h3>Description</h3>

<p>A multivariate dataset (x1, x2, x3, y) of class matrix and dim 500 x 4 to be 
fitted by a neural network with 5 hidden neurons (26 parameters).
</p>


<h3>References</h3>

<p>Dette, H., &amp; Pepelyshev, A. (2010). Generalized Latin hypercube design for computer 
experiments. Technometrics, 52(4). 
</p>
<p>See also <a href="https://www.sfu.ca/~ssurjano/detpep10curv.html">https://www.sfu.ca/~ssurjano/detpep10curv.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(mDette)
pairs(mDette)
</code></pre>

<hr>
<h2 id='mFriedman'>Dataset mFriedman</h2><span id='topic+mFriedman'></span>

<h3>Description</h3>

<p>A multivariate dataset (x1, x2, x3, x4, x5, y) of class matrix and dim 500 x 6 to be  
fitted by a neural network with 5 hidden neurons (36 parameters).
</p>


<h3>References</h3>

<p>Friedman, J. H., Grosse, E., &amp; Stuetzle, W. (1983). Multidimensional additive spline 
approximation. SIAM Journal on Scientific and Statistical Computing, 4(2), 291-301. 
</p>
<p>See also <a href="https://www.sfu.ca/~ssurjano/fried.html">https://www.sfu.ca/~ssurjano/fried.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(mFriedman)
pairs(mFriedman)
</code></pre>

<hr>
<h2 id='mIshigami'>Dataset mIshigami</h2><span id='topic+mIshigami'></span>

<h3>Description</h3>

<p>A multivariate dataset (x1, x2, x3, y) of class matrix and dim 500 x 4 to be fitted 
by a neural network with 10 hidden neurons (51 parameters).
</p>


<h3>References</h3>

<p>Ishigami, T., &amp; Homma, T. (1990, December). An importance quantification technique in 
uncertainty analysis for computer models. In Uncertainty Modeling and Analysis, 1990. 
Proceedings., First International Symposium on (pp. 398-403). IEEE. 
</p>
<p>See also <a href="https://www.sfu.ca/~ssurjano/ishigami.html">https://www.sfu.ca/~ssurjano/ishigami.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(mIshigami)
pairs(mIshigami)
</code></pre>

<hr>
<h2 id='mRef153'>Dataset mRef153</h2><span id='topic+mRef153'></span>

<h3>Description</h3>

<p>A multivariate dataset (x1, x2, x3, x4, x5, y) of class matrix and dim 153 x 6 to be 
fitted by a neural network with 3 hidden neurons (22 parameters).
This dataset was used to teach neural networks at ESPCI from 2003 to 2013 and is 
available in the software Neuro One.
</p>


<h3>References</h3>

<p>Neuro One <a href="https://www.inmodelia.com/software.html">https://www.inmodelia.com/software.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(mRef153)
pairs(mRef153)
</code></pre>

<hr>
<h2 id='NNbigdatasets'>Big Datasets in One list (2020)</h2><span id='topic+NNbigdatasets'></span>

<h3>Description</h3>

<p><code>NNbigdatasets</code> is a list with the big datasets presented in this package and the 
recommended number of hidden neurons for each neural network model. 
</p>

<ul>
<li><p>bWoodN1:    5 neurons.
</p>
</li></ul>

<p>Each item of the list is itself a list with 5 components:
</p>

<ul>
<li><p>ds: character. The name of the dataset.
</p>
</li>
<li><p>neur: integer. The recommanded number of hidden neurons in the NN model and in 
<code>fmlaNN</code>.
</p>
</li>
<li><p>nparNN: integer. The number of parameters in <code>fmlaNN</code>.
</p>
</li>
<li><p>fmlaNN: the formula of the corresponding neural network, with tanh() as the
activation function in the hidden layer.
</p>
</li>
<li><p>Z: matrix or data.frame. The dataset itself.
</p>
</li></ul>

<p>Using <code>attach()</code> and <code>detach()</code> gives a direct access to these items.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(NNbigdatasets)

NNdataSummary(NNbigdatasets)

</code></pre>

<hr>
<h2 id='NNdatasets'>All Datasets in One List</h2><span id='topic+NNdatasets'></span>

<h3>Description</h3>

<p><code>NNdatasets</code> is a list with the 12 datasets presented in this package and the 
recommended number of hidden neurons for each neural network model. 
</p>

<ul>
<li><p>mDette:    5 neurons.
</p>
</li>
<li><p>mFriedman: 5 neurons.
</p>
</li>
<li><p>mIshigami: 10 neurons.
</p>
</li>
<li><p>mRef153:   3 neurons.
</p>
</li>
<li><p>uDmod1:    6 neurons.
</p>
</li>
<li><p>uDmod2:    5 neurons.
</p>
</li>
<li><p>uDreyfus1: 3 neurons.
</p>
</li>
<li><p>uDreyfus2: 3 neurons.
</p>
</li>
<li><p>uGauss1:   5 neurons.
</p>
</li>
<li><p>uGauss2:   4 neurons.
</p>
</li>
<li><p>uGauss3:   4 neurons.
</p>
</li>
<li><p>uNeuroOne: 2 neurons.
</p>
</li></ul>

<p>Each item of the list is itself a list with 5 components:
</p>

<ul>
<li><p>ds: character. The name of the dataset.
</p>
</li>
<li><p>neur: integer. The recommanded number of hidden neurons in the NN model and in 
<code>fmlaNN</code>.
</p>
</li>
<li><p>nparNN: integer. The number of parameters in <code>fmlaNN</code>.
</p>
</li>
<li><p>fmlaNN: the formula of the corresponding neural network, with tanh() as the
activation function in the hidden layer.
</p>
</li>
<li><p>Z: matrix or data.frame. The dataset itself.
</p>
</li></ul>

<p>Using <code>attach()</code> and <code>detach()</code> gives a direct access to these items.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(NNdatasets, n = 2, l = 6)

NNdataSummary(NNdatasets)

</code></pre>

<hr>
<h2 id='NNdataSummary'>A Summary (in data.frame format) of NNdatasets</h2><span id='topic+NNdataSummary'></span>

<h3>Description</h3>

<p><code>NNdataSummary</code> summarizes the information of the 12 datasets
listed in <code>NNdatasets</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNdataSummary(NNdatasets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NNdataSummary_+3A_nndatasets">NNdatasets</code></td>
<td>
<p>the NNdatasets list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with 12 rows and 5 columns: (dataset) name, n_rows, n_inputs, 
n_neurons, n_parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>NNdataSummary(NNdatasets)

</code></pre>

<hr>
<h2 id='NNsummary'>Summarize Calculations of RMSE, MSE, MAE, and WAE</h2><span id='topic+NNsummary'></span>

<h3>Description</h3>

<p>Summarize measures of fit and time for a single training. Measures of fit 
include the Root Mean Squared Error (RMSE), the Mean Squared Error (MSE), 
the Mean Absolute Error (MAE), and the Worst Absolute Error (WAE) rounded
by default to 4 digits and set to <code>na.rm = TRUE</code>. See more at <code><a href="#topic+funRMSE">funRMSE</a></code>. 
The summary can also include the results of time from <code><a href="#topic+getTimer">getTimer</a></code> in
NNbenchmark or the result of <code><a href="#topic+timediff">timediff</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNsummary(y_pred, y0, time, dgts = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NNsummary_+3A_y_pred">y_pred</code></td>
<td>
<p>numeric vector of the predicted values</p>
</td></tr>
<tr><td><code id="NNsummary_+3A_y0">y0</code></td>
<td>
<p>numeric vector of the observed values</p>
</td></tr>
<tr><td><code id="NNsummary_+3A_time">time</code></td>
<td>
<p>numeric value of time</p>
</td></tr>
<tr><td><code id="NNsummary_+3A_dgts">dgts</code></td>
<td>
<p>integer value for how many digits to round to, see <code><a href="base.html#topic+round">round</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of RMSE, MSE, MAE, WAE, and time values for a single iteration.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## With 2019 legacy code, no longer usable with 2020 trainPredict
old &lt;- options("digits.secs" = 4)
timeTT &lt;- createTimer()

timeTT$start("event")
y0 &lt;- 1:19
y_pred &lt;- y0 + rnorm(length(y0), sd = 0.3)
timeTT$stop("event") 

time &lt;- getTimer(timeTT)

NNsummary(y_pred, y0, time[,4], 4)

## With 2020 code
timestart()
y0 &lt;- 1:19
y_pred &lt;- y0 + rnorm(length(y0), sd = 0.3)
time &lt;- timediff()

NNsummary(y_pred, y0, time, 4)

options(old)      
  
</code></pre>

<hr>
<h2 id='NNtrainPredict'>Generic Functions for Training and Predicting</h2><span id='topic+NNtrainPredict'></span><span id='topic+trainPredict_1mth1data'></span><span id='topic+trainPredict_1data'></span><span id='topic+trainPredict_1pkg'></span>

<h3>Description</h3>

<p>An implementation with <code><a href="base.html#topic+do.call">do.call</a></code> so that any neural network function that fits 
the format can be tested. 
</p>
<p>In <code>trainPredict_1mth1data</code>, a neural network is trained on one dataset
and then used for predictions, with several functionalities. Then, the performance 
of the neural network is summarized.
</p>
<p><code>trainPredict_1data</code> serves as a wrapper function for <code>trainPredict_1mth1data</code> 
for multiple methods.
</p>
<p><code>trainPredict_1pkg</code> serves as a wrapper function for <code>trainPredict_1mth1data</code> 
for multiple datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trainPredict_1mth1data(dset, method, trainFUN, hyperparamFUN, predictFUN,
  summaryFUN, prepareZZ.arg = list(), nrep = 5, doplot = FALSE,
  plot.arg = list(col1 = 1:nrep, lwd1 = 1, col2 = 4, lwd2 = 3), pkgname,
  pkgfun, csvfile = FALSE, rdafile = FALSE, odir = ".", echo = FALSE,
  echoreport = FALSE, appendcsv = TRUE, ...)

trainPredict_1data(dset, methodlist, trainFUN, hyperparamFUN, predictFUN,
  summaryFUN, closeFUN, startNN = NA, prepareZZ.arg = list(), nrep = 5,
  doplot = FALSE, plot.arg = list(), pkgname = "pkg", pkgfun = "train",
  csvfile = FALSE, rdafile = FALSE, odir = ".", echo = FALSE, ...)

trainPredict_1pkg(dsetnum, pkgname = "pkg", pkgfun = "train", methodvect,
  prepareZZ.arg = list(), summaryFUN, nrep = 5, doplot = FALSE,
  plot.arg = list(), csvfile = FALSE, rdafile = FALSE, odir = ".",
  echo = FALSE, appendcsv = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NNtrainPredict_+3A_dset">dset</code></td>
<td>
<p>a number or string indicating which dataset to use, see <code><a href="#topic+NNdataSummary">NNdataSummary</a></code></p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_method">method</code></td>
<td>
<p>a method for a particular function</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_trainfun">trainFUN</code></td>
<td>
<p>the training function used</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_hyperparamfun">hyperparamFUN</code></td>
<td>
<p>the function resulting in parameters needed for training</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_predictfun">predictFUN</code></td>
<td>
<p>the prediction function used</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_summaryfun">summaryFUN</code></td>
<td>
<p>measure performance by observed and predicted y values, <code><a href="#topic+NNsummary">NNsummary</a></code> is ready to use</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_preparezz.arg">prepareZZ.arg</code></td>
<td>
<p>list of arguments for <code><a href="#topic+prepareZZ">prepareZZ</a></code></p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_nrep">nrep</code></td>
<td>
<p>a number for how many times a neural network should be trained with a package/function</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_doplot">doplot</code></td>
<td>
<p>logical value, TRUE executes plots and FALSE does not</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_plot.arg">plot.arg</code></td>
<td>
<p>list of arguments for plots</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_pkgname">pkgname</code></td>
<td>
<p>package name</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_pkgfun">pkgfun</code></td>
<td>
<p>name of the package function to train neural network</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_csvfile">csvfile</code></td>
<td>
<p>logical value, adds summary to csv files per dataset if TRUE</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_rdafile">rdafile</code></td>
<td>
<p>logical value, outputs rdafile of predictions and summary if TRUE</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_odir">odir</code></td>
<td>
<p>output directory</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_echo">echo</code></td>
<td>
<p>logical value, separates training between packages with some text and enables echoreport if TRUE</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_echoreport">echoreport</code></td>
<td>
<p>logical value, detailed reports are printed (such as model summaries and str(data)) if TRUE, will not work if echo is FALSE</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_appendcsv">appendcsv</code></td>
<td>
<p>logical value, if <code>TRUE</code>, the csv output is appended to the csv file.</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_methodlist">methodlist</code></td>
<td>
<p>list of methods per package/function</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_closefun">closeFUN</code></td>
<td>
<p>a function to detach packages or other necessary environment clearing</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_startnn">startNN</code></td>
<td>
<p>a function to start needed outside libraries, for example, h2o</p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_dsetnum">dsetnum</code></td>
<td>
<p>a vector of numbers indicating which dataset to use in <code><a href="#topic+NNdataSummary">NNdataSummary</a></code></p>
</td></tr>
<tr><td><code id="NNtrainPredict_+3A_methodvect">methodvect</code></td>
<td>
<p>vector of methods per package/function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array with values as in NNsummary including each repetition, with options for plots and output files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>nrep &lt;- 2       
odir &lt;- tempdir()

### Package with one method/optimization algorithm
library("brnn")
brnn.method &lt;- "gaussNewton"
hyperParams.brnn &lt;- function(optim_method, ...) {
  return(list(iter = 200))
  }
brnn.prepareZZ &lt;- list(xdmv = "m", ydmv = "v", zdm = "d", scale = TRUE)

NNtrain.brnn   &lt;- function(x, y, dataxy, formula, neur, optim_method, hyperParams,...) {
  hyper_params &lt;- do.call(hyperParams.brnn, list(brnn.method))
  iter  &lt;- hyper_params$iter
  
  NNreg &lt;- brnn::brnn(x, y, neur, normalize = FALSE, epochs = iter, verbose = FALSE)
  return(NNreg)
  }
NNpredict.brnn &lt;- function(object, x, ...) { predict(object, x) }
NNclose.brnn &lt;- function(){
  if("package:brnn" %in% search())
    detach("package:brnn", unload=TRUE)
  }


res &lt;- trainPredict_1pkg(1:2, pkgname = "brnn", pkgfun = "brnn", brnn.method,
                         prepareZZ.arg = brnn.prepareZZ, nrep = nrep, doplot = TRUE,
                         csvfile = FALSE, rdafile = FALSE, odir = odir, echo = FALSE)
                         
### Package with more than one method/optimization algorithm
library(validann)
validann.method &lt;- c("Nelder-Mead", "BFGS", "CG", "L-BFGS-B", "SANN")
hyperParams.validann &lt;- function(optim_method, ...) {
  if(optim_method == "Nelder-Mead")  { maxiter &lt;- 10000 } 
  if(optim_method == "BFGS")         { maxiter &lt;- 200   }
  if(optim_method == "CG")           { maxiter &lt;- 1000  }
  if(optim_method == "L-BFGS-B")     { maxiter &lt;- 200   }
  if(optim_method == "SANN")         { maxiter &lt;- 1000  }
  return(list(iter = maxiter, method = optim_method, params))
  }
validann.prepareZZ &lt;- list(xdmv = "m", ydmv = "m", zdm = "d", scale = TRUE)

NNtrain.validann &lt;- function(x, y, dataxy, formula, neur, optim_method, hyperParams, ...) {
  hyper_params &lt;- do.call(hyperParams, list(optim_method, ...))
  iter &lt;- hyper_params$iter
  method &lt;- hyper_params$method
  
  NNreg &lt;- validann::ann(x, y, size = neur, method = method, maxit = iter)
  return (NNreg)
  }
NNpredict.validann &lt;- function(object, x, ...) { predict(object, x) }
NNclose.validann &lt;- function() {
  if("package:validann" %in% search())
  detach("package:validann", unload=TRUE)
  }

res &lt;- trainPredict_1pkg(1:2, pkgname = "validann", pkgfun = "ann", validann.method,
                         repareZZ.arg = validann.prepareZZ, nrep = nrep, doplot = FALSE,
                         csvfile = TRUE, rdafile = TRUE, odir = odir, echo = FALSE)
                        

</code></pre>

<hr>
<h2 id='plotNN'>Create a Plot, Add Lines or Points Depending The Context</h2><span id='topic+plotNN'></span><span id='topic+lipoNN'></span>

<h3>Description</h3>

<p><code>plotNN</code> uses the parameter <code>uni</code> to launch the <code>plot()</code> function either 
for a univariate dataset (x, y_pred) or for a multivariate dataset (y, y_pred).
</p>
<p><code>lipoNN</code> uses the parameter <code>uni</code> to launch either <code>lines()</code> for an
univariate dataset or <code>points()</code> for a multivariate dataset.
</p>
<p>See the examples in <code><a href="#topic+prepareZZ">prepareZZ</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotNN(xory, y0, uni, TF = TRUE, ...)

lipoNN(xory, y_pred, uni, TF = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotNN_+3A_xory">xory</code></td>
<td>
<p>vector of numeric. The original x values for an univariate dataset 
or the original y values for a multivariate dataset.</p>
</td></tr>
<tr><td><code id="plotNN_+3A_y0">y0</code></td>
<td>
<p>vector of numeric. The original y values.</p>
</td></tr>
<tr><td><code id="plotNN_+3A_uni">uni</code></td>
<td>
<p>logicial. TRUE for an univariate dataset. FALSE for a multivariate dataset.
<code>...</code> fails or if you call the function from another function.</p>
</td></tr>
<tr><td><code id="plotNN_+3A_tf">TF</code></td>
<td>
<p>logical. TRUE executes the instruction. FALSE ignores the instruction.
Equivalent to <code>if (TRUE/FALSE) plot()</code>.</p>
</td></tr>
<tr><td><code id="plotNN_+3A_...">...</code></td>
<td>
<p>parameters passed to <code>plot()</code>, <code>lines()</code> or <code>points()</code>.</p>
</td></tr>
<tr><td><code id="plotNN_+3A_y_pred">y_pred</code></td>
<td>
<p>vector of numeric. The values returned by the <code>predict()</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL in the console. An initial plot or some added lines/points.
</p>

<hr>
<h2 id='prepareZZ'>Prepare a Dataset For All Possible Formats</h2><span id='topic+prepareZZ'></span>

<h3>Description</h3>

<p>This function modifies a dataset to the format required by a training function: 
data.frame, matrix or vector (numeric), pre-normalization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepareZZ(Z, xdmv = "m", ydmv = "v", zdm = "d", scale = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepareZZ_+3A_z">Z</code></td>
<td>
<p>a matrix or a data.frame representing a dataset.</p>
</td></tr>
<tr><td><code id="prepareZZ_+3A_xdmv">xdmv</code></td>
<td>
<p>character, either &quot;d&quot;, &quot;m&quot; or &quot;v&quot;. The prefered output format for x: 
data.frame, matrix, vector (numeric).</p>
</td></tr>
<tr><td><code id="prepareZZ_+3A_ydmv">ydmv</code></td>
<td>
<p>character, either &quot;d&quot;, &quot;m&quot; or &quot;v&quot;. The prefered output format for y: 
data.frame, matrix, vector (numeric).</p>
</td></tr>
<tr><td><code id="prepareZZ_+3A_zdm">zdm</code></td>
<td>
<p>character, either &quot;d&quot; or &quot;m&quot;. The prefered output format for Zxy: 
data.frame or matrix.</p>
</td></tr>
<tr><td><code id="prepareZZ_+3A_scale">scale</code></td>
<td>
<p>logical. Scale x, y and Zxy with their respective means and standard
deviations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The output is a list, usually named <code>ZZ</code>, with the following items:
</p>

<ul>
<li><p>Zxy: the original or scaled Z in the desired format (data.frame, matrix).
</p>
</li>
<li><p>x: the original or scaled x in the desired format (data.frame, matrix, vector).
</p>
</li>
<li><p>y: the original or scaled y in the desired format (data.frame, matrix, vector).
</p>
</li>
<li><p>xory: the original x or y (as vector).
</p>
</li>
<li><p>y0: the original y (as vector).
</p>
</li>
<li><p>xm0: the mean(s) of the original x.
</p>
</li>
<li><p>ym0: the mean of the original y.
</p>
</li>
<li><p>xsd0: the standard deviation(s) of the original x.
</p>
</li>
<li><p>ysd0: the standard deviation of the original y.
</p>
</li>
<li><p>uni: the univariate (TRUE) or multivariate (FALSE) status of x (Z).
</p>
</li>
<li><p>fmla: the formula <code>y ~ x</code> or <code>y ~ x1 + x2 + .. + xn</code> where n is the 
number of inputs variables.
</p>
</li></ul>

<p>The use of <code>attach()</code> and <code>detach()</code> gives direct access to the modified 
values of ZZ. See the examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("brnn")
library("validann")

maxit &lt;- 200  # increase this number to get more accurate results with validann:ann
TF    &lt;- TRUE # display the plots

### UNIVARIATE DATASET
Z     &lt;- uGauss2
neur  &lt;- 4

## brnn
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = FALSE) ; ht(ZZ) 
attach(ZZ)
y_pred &lt;- ym0 + ysd0*predict(brnn(x, y, neur))
plotNN(xory, y0, uni, TF)
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 2)
ym0 ; ysd0
detach(ZZ) ; rm(y_pred)


## validann
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = TRUE) ; ht(ZZ)
attach(ZZ)
y_pred &lt;- ym0 + ysd0*predict(validann::ann(x, y, neur, maxit = maxit))
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 3)
ym0 ; ysd0
detach(ZZ) ; rm(y_pred)


### UNIVARIATE DATASET + LOOP
nruns  &lt;- 10

## brnn
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = FALSE) ; ht(ZZ) 
attach(ZZ)
Zreg &lt;- list() ; Zreg
for (i in 1:nruns) Zreg[[i]] &lt;- brnn::brnn(x, y, neur) 
m      &lt;- matrix(sapply(Zreg, function(x) x$Ed) , ncol=1) ; m
best   &lt;- which(min(m) == m)[1] ; best
y_pred &lt;- ym0 + ysd0*predict(Zreg[[best]])
plotNN(xory, y0, uni, TF)
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 2)
detach(ZZ) ; rm(y_pred)

## validann
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = TRUE) ; ht(ZZ)
attach(ZZ)
Zreg &lt;- list()
for (i in 1:nruns) Zreg[[i]] &lt;- validann::ann(x, y, size = neur, maxit = maxit) 
m      &lt;- matrix(sapply(Zreg, function(x) x$value), ncol=1) ; m
best   &lt;- which(min(m) == m)[1] ; best
y_pred &lt;- ym0 + ysd0*predict(Zreg[[best]])
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 4)
detach(ZZ) ; rm(y_pred)


### MULTIVARIATE DATASET
Z    &lt;- mDette
neur &lt;- 5

## brnn
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = FALSE) ; ht(ZZ)
attach(ZZ)
y_pred &lt;- ym0 + ysd0*predict(brnn::brnn(x, y, neur))
plotNN(xory, y0, uni, TF)
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 2)
ym0 ; ysd0
detach(ZZ) ; rm(y_pred)

## validann
ZZ &lt;- prepareZZ(Z, xdmv = "m", ydmv= "v", scale = TRUE) ; ht(ZZ)
attach(ZZ)
y_pred &lt;- ym0 + ysd0*predict(validann::ann(x, y, neur, maxit = maxit))
lipoNN(xory, y_pred, uni, TF, lwd = 4, col = 3)
ym0 ; ysd0
detach(ZZ) ; rm(y_pred)


### INSIDE A FUNCTION
plotds &lt;- function(Z, xdmv = "m", ydmv = "v", scale = FALSE, neurons = 3, col = 2) {
    ZZ &lt;- prepareZZ(Z, xdmv = xdmv, ydmv= ydmv, scale = scale) 
    attach(ZZ) ; on.exit(detach(ZZ))
    y_pred &lt;- ym0 + ysd0*predict(brnn::brnn(x, y, neurons))
    plotNN(xory, y0, uni, TF)
    lipoNN(xory, y_pred, uni, TF, lwd = 4, col = col)
    print(ht(x))
    print(ht(y))
}
plotds(uNeuroOne, scale = FALSE, neurons = 2, col = 2)
plotds(uNeuroOne, scale = TRUE,  neurons = 3, col = 3)

plotds(mFriedman, scale = TRUE,  neurons = 5, col = 4)



</code></pre>

<hr>
<h2 id='timeR'>A R6 Class to represent a timer.</h2><span id='topic+timeR'></span>

<h3>Description</h3>

<p>timer is a R6 Class that represent a timer. This is a modified version of the 
<code>timeR</code> package for an internal use. Full credit is to Yifu Yan, the author 
of the <code>timeR</code> package.
</p>


<h3>Value</h3>

<p><code>getTimer</code> returns a data frame with all records saved by the timer 
object. Columns in the data.frame are: event, start, end, duration, RMSE, 
MAE, stars, params, comment.
</p>


<h3>Public Methods</h3>


<dl>
<dt><code>initialize(time,event,verbose,eventTable)</code>
</dt><dd><p>Initialize a timer object. You can also use <code>createTimer()</code>
function to initialize a timer object.</p>
</dd>
<dt><code>start(eventName)</code>
</dt><dd><p>Start timing for a event, <code>eventName</code> should be a string</p>
</dd>
<dt><code>stop(eventName)</code>
</dt><dd><p>Stop timing for a event.</p>
</dd>
<dt><code>getTimer()</code>
</dt><dd><p>Get/Print a data.frame with all records.</p>
</dd>
<dt><code>removeEvent(eventName)</code>
</dt><dd><p>Remove an given row in the eventTable.</p>
</dd>
<dt><code>toggleVerbose()</code>
</dt><dd><p>Toggle between <code>TRUE</code> and <code>FALSE</code> for <code>verbose</code></p>
</dd>
<dt><code>getStartTime()</code>
</dt><dd><p>Get start time for a selected event.</p>
</dd>
<dt><code>getStopTime()</code>
</dt><dd><p>Get stop time for a selected event.</p>
</dd>
<dt><code>getDuration()</code>
</dt><dd><p>Get duration for a selected event.</p>
</dd>
<dt><code>getRMSE()</code>
</dt><dd><p>Get the RMSE for a selected event.</p>
</dd>
<dt><code>getMAE()</code>
</dt><dd><p>Get the MAE for a selected event.</p>
</dd>
<dt><code>getStars()</code>
</dt><dd><p>Get stars for a selected event.</p>
</dd>
<dt><code>getParams()</code>
</dt><dd><p>Get params for a selected event.</p>
</dd>
<dt><code>getComment()</code>
</dt><dd><p>Get comment for a selected event.</p>
</dd>
<dt><code>getEventf()</code>
</dt><dd><p>Get entire row for a selected event.</p>
</dd>
<dt><code>print()</code>
</dt><dd><p>Custom print method for timer class. However, you don't need to use this
function to generate custom printing.
Custom printing is triggered by default.</p>
</dd>
</dl>



<h3>Private Methods</h3>


<dl>
<dt><code>slprint(msg, flag = self$verbose)</code>
</dt><dd><p>A function that controls whether to print extra message.</p>
</dd>
</dl>



<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>time</code></dt><dd><p>A POSIXct/POSIXlt value of your latest timing.</p>
</dd>
<dt><code>event</code></dt><dd><p>A string of your latest timing.</p>
</dd>
<dt><code>eventTable</code></dt><dd><p>A data frame that stores all timings.</p>
</dd>
<dt><code>verbose</code></dt><dd><p>A printing setting that controls whether to print messages.</p>
</dd>
</dl>

</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>time</code></dt><dd><p>A POSIXct/POSIXlt value of your latest timing.</p>
</dd>
<dt><code>event</code></dt><dd><p>A string of your latest timing.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>timeR$new()</code></a>
</p>
</li>
<li> <p><a href="#method-start"><code>timeR$start()</code></a>
</p>
</li>
<li> <p><a href="#method-stop"><code>timeR$stop()</code></a>
</p>
</li>
<li> <p><a href="#method-getTimer"><code>timeR$getTimer()</code></a>
</p>
</li>
<li> <p><a href="#method-removeEvent"><code>timeR$removeEvent()</code></a>
</p>
</li>
<li> <p><a href="#method-toggleVerbose"><code>timeR$toggleVerbose()</code></a>
</p>
</li>
<li> <p><a href="#method-getStartTime"><code>timeR$getStartTime()</code></a>
</p>
</li>
<li> <p><a href="#method-getStopTime"><code>timeR$getStopTime()</code></a>
</p>
</li>
<li> <p><a href="#method-getDuration"><code>timeR$getDuration()</code></a>
</p>
</li>
<li> <p><a href="#method-getRMSE"><code>timeR$getRMSE()</code></a>
</p>
</li>
<li> <p><a href="#method-getMAE"><code>timeR$getMAE()</code></a>
</p>
</li>
<li> <p><a href="#method-getStars"><code>timeR$getStars()</code></a>
</p>
</li>
<li> <p><a href="#method-getParams"><code>timeR$getParams()</code></a>
</p>
</li>
<li> <p><a href="#method-getComment"><code>timeR$getComment()</code></a>
</p>
</li>
<li> <p><a href="#method-getEvent"><code>timeR$getEvent()</code></a>
</p>
</li>
<li> <p><a href="#method-print"><code>timeR$print()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>timeR$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$new(verbose = TRUE)</pre></div>


<hr>
<a id="method-start"></a>



<h4>Method <code>start()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$start(eventName)</pre></div>


<hr>
<a id="method-stop"></a>



<h4>Method <code>stop()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$stop(eventName, RMSE = NA_real_, MAE = NA_real_,
  stars = NA_character_, params = NA_character_, comment = NA_character_,
  printmsg = TRUE)</pre></div>


<hr>
<a id="method-getTimer"></a>



<h4>Method <code>getTimer()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getTimer(...)</pre></div>


<hr>
<a id="method-removeEvent"></a>



<h4>Method <code>removeEvent()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$removeEvent(eventName)</pre></div>


<hr>
<a id="method-toggleVerbose"></a>



<h4>Method <code>toggleVerbose()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$toggleVerbose(...)</pre></div>


<hr>
<a id="method-getStartTime"></a>



<h4>Method <code>getStartTime()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getStartTime(eventName)</pre></div>


<hr>
<a id="method-getStopTime"></a>



<h4>Method <code>getStopTime()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getStopTime(eventName)</pre></div>


<hr>
<a id="method-getDuration"></a>



<h4>Method <code>getDuration()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getDuration(eventName)</pre></div>


<hr>
<a id="method-getRMSE"></a>



<h4>Method <code>getRMSE()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getRMSE(eventName)</pre></div>


<hr>
<a id="method-getMAE"></a>



<h4>Method <code>getMAE()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getMAE(eventName)</pre></div>


<hr>
<a id="method-getStars"></a>



<h4>Method <code>getStars()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getStars(eventName)</pre></div>


<hr>
<a id="method-getParams"></a>



<h4>Method <code>getParams()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getParams(eventName)</pre></div>


<hr>
<a id="method-getComment"></a>



<h4>Method <code>getComment()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getComment(eventName)</pre></div>


<hr>
<a id="method-getEvent"></a>



<h4>Method <code>getEvent()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$getEvent(eventName)</pre></div>


<hr>
<a id="method-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>timeR$print(...)</pre></div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>timeR$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>timer &lt;- createTimer()
timer$start("event1")
## put some codes in between, for instance
Sys.sleep(1)
timer$stop("event1", RMSE = 1, MAE = 1.3, stars = "*", 
           params = "maxiter=100, lr=0.01", comment = "OK for 1",  
           printmsg = TRUE)

timer$start("event2")
## put some codes in between, for instance
Sys.sleep(2)
timer$stop("event2", RMSE = 2, MAE = 2.6, stars = "**",  
           params = "maxiter=1000, lr=0.001", comment = "OK for 2",  
           printmsg = FALSE)

table1 &lt;- getTimer(timer)
timer$toggleVerbose() # set verbose to FALSE as default is TRUE
table1 # print all records in a data frame

## get attributes for selected events
timer$getStartTime("event1")
timer$getStopTime("event1")
timer$getDuration("event1")
timer$getComment("event1")
timer$getEvent("event1")

</code></pre>

<hr>
<h2 id='timestart'>Collect the difftime between two events</h2><span id='topic+timestart'></span><span id='topic+timediff'></span>

<h3>Description</h3>

<p><code>timestart</code> starts the timer and saved the value in an object named 
<code>time0</code> stored in <code>.GlobalEnv</code>.
</p>
<p><code>timediff</code> stops the timer, remove the <code>time0</code> objet from <code>.GlobalEnv</code>
and prints the duration in seconds between the two events.
</p>
<p><code>timestart</code> and <code>timediff</code> are fully independant from  the R6 class
<code>timeR</code> and the objects <code>createTimer</code> or <code>getTimer</code>. They use
<code><a href="base.html#topic+proc.time">proc.time</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timestart()

timediff()
</code></pre>


<h3>Value</h3>

<p>A single numeric value that represents a duration in seconds.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timestart()
Sys.sleep(2)
timediff()

</code></pre>

<hr>
<h2 id='uDmod1'>Dataset uDmod1</h2><span id='topic+uDmod1'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 51 x 2 to be fitted by a 
neural network with 6 hidden neurons (19 parameters).
The parameters are highly correlated and singular Jacobian matrices often appear. 
A difficult dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uDmod1)
plot(uDmod1)
</code></pre>

<hr>
<h2 id='uDmod2'>Dataset uDmod2</h2><span id='topic+uDmod2'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 51 x 2 to be fitted by a 
neural network with 5 hidden neurons (16 parameters).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uDmod2)
plot(uDmod2)
</code></pre>

<hr>
<h2 id='uDreyfus1'>Dataset uDreyfus1</h2><span id='topic+uDreyfus1'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 51 x 2 to be fitted by a 
neural network with 3 hidden neurons (10 parameters).
This dataset was used to teach neural networks at ESPCI from 1991 to 2013. It usually
appeared in the very first slides. 
This is a combination of 3 pure tanh() functions without noise. The Jacobian matrix 
is singular at the target parameter values and many algorithms could fail.
</p>


<h3>References</h3>

<p>Dreyfus, G., ESPCI <a href="https://www.neurones.espci.fr">https://www.neurones.espci.fr</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uDreyfus1)
plot(uDreyfus1)
</code></pre>

<hr>
<h2 id='uDreyfus2'>Dataset uDreyfus2</h2><span id='topic+uDreyfus2'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 51 x 2 to be fitted by a 
neural network with 3 hidden neurons (10 parameters).
This dataset was used to teach neural networks at ESPCI from 1991 to 2013. It usually
appeared in the very first slides. 
This is a combination of 3 pure tanh() functions with a small noise. Due to the noise, 
the Jacobian matrix is not singular at the target parameter values. All algorithms 
should find the target parameter values.
</p>


<h3>References</h3>

<p>Dreyfus, G., ESPCI <a href="https://www.neurones.espci.fr">https://www.neurones.espci.fr</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uDreyfus2)
plot(uDreyfus2)
</code></pre>

<hr>
<h2 id='uGauss1'>Dataset uGauss1</h2><span id='topic+uGauss1'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 250 x 2 to be fitted by a 
neural network with 5 hidden neurons (16 parameters).
</p>


<h3>References</h3>

<p>Rust, B., NIST (1996) <a href="https://www.inmodelia.com/gsoc2020-redirection.html">https://www.inmodelia.com/gsoc2020-redirection.html</a>
with redirection to the (slow) NIST page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uGauss1)
plot(uGauss1)
</code></pre>

<hr>
<h2 id='uGauss2'>Dataset uGauss2</h2><span id='topic+uGauss2'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 250 x 2 to be fitted by a 
neural network with 4 hidden neurons (13 parameters).
</p>


<h3>References</h3>

<p>Rust, B., NIST (1996) <a href="https://www.inmodelia.com/gsoc2020-redirection.html">https://www.inmodelia.com/gsoc2020-redirection.html</a>
with redirection to the (slow) NIST page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uGauss2)
plot(uGauss2)
</code></pre>

<hr>
<h2 id='uGauss3'>Dataset uGauss3</h2><span id='topic+uGauss3'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 250 x 2 to be fitted by a 
neural network with 4 hidden neurons (13 parameters).
</p>


<h3>References</h3>

<p>Rust, B., NIST (1996) <a href="https://www.inmodelia.com/gsoc2020-redirection.html">https://www.inmodelia.com/gsoc2020-redirection.html</a>
with redirection to the (slow) NIST page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uGauss3)
plot(uGauss3)
</code></pre>

<hr>
<h2 id='uNeuroOne'>Dataset uNeuroOne</h2><span id='topic+uNeuroOne'></span>

<h3>Description</h3>

<p>An univariate dataset (x, y) of class data.frame and dim 51 x 2 to be fitted by a 
neural network with 2 hidden neurons (7 parameters).
This dataset was used to teach neural networks at ESPCI from 1991 to 2013 and is 
available in the software Neuro One.
</p>


<h3>References</h3>

<p>Dreyfus, G., ESPCI <a href="https://www.neurones.espci.fr">https://www.neurones.espci.fr</a>
</p>
<p>Neuro One <a href="https://www.inmodelia.com/software.html">https://www.inmodelia.com/software.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ht(uNeuroOne)
plot(uNeuroOne)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
