<!DOCTYPE html><html lang="en"><head><title>Help for package sfislands</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sfislands}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#st_augment'><p>Augment dataframe with predictions of model</p></a></li>
<li><a href='#st_bridges'><p>Create first-order queen contiguity neighbourhood structure with additional connections when islands are present, ensuring that there are no unconnected units</p></a></li>
<li><a href='#st_check_islands'><p>Examine contiguity actions which have been performed on islands by 'st_bridges()'</p></a></li>
<li><a href='#st_force_cut_nb'><p>Remove contiguity between pairs of areas</p></a></li>
<li><a href='#st_force_join_nb'><p>Enforce contiguity between pairs of areas</p></a></li>
<li><a href='#st_manual_cut_nb'><p>Manual remove contiguity between two areas</p></a></li>
<li><a href='#st_manual_join_nb'><p>Manually enforce contiguity between two areas</p></a></li>
<li><a href='#st_quickmap_nb'><p>Visualise a neighbourhood structure on a map</p></a></li>
<li><a href='#st_quickmap_preds'><p>Visualise the predictions generated by the 'st_augment()' function</p></a></li>
<li><a href='#uk_election'><p>UK election data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Streamlines the Process of Fitting Areal Spatial Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kevin Horan &lt;kevin.horan.2021@mumail.ie&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Helpers for addressing the issue of disconnected spatial units. 
    It allows for convenient adding and removal of neighbourhood connectivity between areal units prior to modelling, with the visual aid of maps.
    Post-modelling, it reduces the human workload for extracting, tidying and mapping predictions from areal models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, methods, purrr, sf, spdep, stats, stringr,
tidyr, broom.mixed, lifecycle</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mgcv, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/horankev/sfislands">https://github.com/horankev/sfislands</a>,
<a href="https://horankev.github.io/sfislands/">https://horankev.github.io/sfislands/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/horankev/sfislands/issues">https://github.com/horankev/sfislands/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>rmarkdown</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-02 16:43:04 UTC; kevinhoran</td>
</tr>
<tr>
<td>Author:</td>
<td>Kevin Horan <a href="https://orcid.org/0009-0003-9378-0084"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph],
  Katarina Domijan <a href="https://orcid.org/0000-0002-4268-2236"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ths],
  Chris Brunsdon <a href="https://orcid.org/0000-0003-4254-1780"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ths]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-03 09:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='st_augment'>Augment dataframe with predictions of model</h2><span id='topic+st_augment'></span>

<h3>Description</h3>

<p>Augment dataframe with predictions of model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_augment(model, df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_augment_+3A_model">model</code></td>
<td>
<p>an 'mgcv', 'lme4' or 'nlme' model.</p>
</td></tr>
<tr><td><code id="st_augment_+3A_df">df</code></td>
<td>
<p>an 'sf' data frame to be augmented with model predictions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An augmented 'sf' data frame with extra columns showing estimates of random effects from model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prepdata &lt;- st_bridges(uk_election,"constituency_name")
mgcv::gam(health_not_good ~
  s(constituency_name, bs='mrf', xt=list(nb=prepdata$nb), k=100),
  data=prepdata, method="REML") |&gt;
st_augment(uk_election)
</code></pre>

<hr>
<h2 id='st_bridges'>Create first-order queen contiguity neighbourhood structure with additional connections when islands are present, ensuring that there are no unconnected units</h2><span id='topic+st_bridges'></span>

<h3>Description</h3>

<p>Create first-order queen contiguity neighbourhood structure with additional connections when islands are present, ensuring that there are no unconnected units
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_bridges(
  df,
  row_identifier,
  remove_islands = FALSE,
  link_islands_k = 1,
  nb_structure = "list",
  add_to_dataframe = TRUE,
  threshold = 1.001,
  geom_col_name = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_bridges_+3A_df">df</code></td>
<td>
<p>an 'sf' or 'sfc' object.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_row_identifier">row_identifier</code></td>
<td>
<p>name of a column from 'df' containing names (or unique identifiers) for each row.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_remove_islands">remove_islands</code></td>
<td>
<p>default 'FALSE'. Whether or not to omit islands from contiguity construction.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_link_islands_k">link_islands_k</code></td>
<td>
<p>an integer, k. The number of nearest units to which each island should be connected.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_nb_structure">nb_structure</code></td>
<td>
<p>default '&quot;list&quot;'. Can also be '&quot;matrix&quot;'. The format in which to return the named contiguity structure.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_add_to_dataframe">add_to_dataframe</code></td>
<td>
<p>default 'TRUE'. Whether or not to augment existing df with contiguity output as '&quot;nb&quot;' column. 'FALSE' returns only the contiguity structure.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_threshold">threshold</code></td>
<td>
<p>default 1.001. factor by which to change the size of buffer automatically generated around islands to account for imprecisions which may arise from sf::st_buffer() functionality. This can be increased if connections to islands are not occurring as expected.</p>
</td></tr>
<tr><td><code id="st_bridges_+3A_geom_col_name">geom_col_name</code></td>
<td>
<p>name of a column from 'df' containing names (or unique identifiers) for each row. This argument is now deprecated and the new &quot;row_identifier&quot; argument replaces it with the same functionality.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a named neighbourhood list or matrix, or an 'sf' dataframe with list or matrix included as '&quot;nb&quot;' column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>st_bridges(uk_election,"constituency_name")
</code></pre>

<hr>
<h2 id='st_check_islands'>Examine contiguity actions which have been performed on islands by 'st_bridges()'</h2><span id='topic+st_check_islands'></span>

<h3>Description</h3>

<p>Examine contiguity actions which have been performed on islands by 'st_bridges()'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_check_islands(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_check_islands_+3A_data">data</code></td>
<td>
<p>an 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;' such as the output of 'st_bridges()'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe reporting non-contiguous connections made by 'st_bridges()'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>st_bridges(uk_election,"constituency_name") |&gt;
st_check_islands()
</code></pre>

<hr>
<h2 id='st_force_cut_nb'>Remove contiguity between pairs of areas</h2><span id='topic+st_force_cut_nb'></span>

<h3>Description</h3>

<p>Remove contiguity between pairs of areas
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_force_cut_nb(nb, x = NULL, y = NULL, xy_df = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_force_cut_nb_+3A_nb">nb</code></td>
<td>
<p>a neighbourhood '&quot;list&quot;' or '&quot;matrix&quot;', or an 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.</p>
</td></tr>
<tr><td><code id="st_force_cut_nb_+3A_x">x</code></td>
<td>
<p>name or number of first area (optional if 'xy_df' is provided).</p>
</td></tr>
<tr><td><code id="st_force_cut_nb_+3A_y">y</code></td>
<td>
<p>name or number of second area (optional if 'xy_df' is provided).</p>
</td></tr>
<tr><td><code id="st_force_cut_nb_+3A_xy_df">xy_df</code></td>
<td>
<p>(optional) a dataframe with two columns: 'x' and 'y', containing the names or numbers of areas to cut.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An amended neighbourhood '&quot;list&quot;', '&quot;matrix&quot;', or 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># For individual x and y
st_bridges(uk_election,"constituency_name") |&gt;
st_force_cut_nb(x = "Llanelli", y = "Swansea West")

# For multiple x and y pairs
st_bridges(uk_election,"constituency_name") |&gt;
st_force_cut_nb(xy_df = data.frame(
x = c("Llanelli", "Swansea West"),
y = c("Bridgend", "Vale Of Glamorgan")))
</code></pre>

<hr>
<h2 id='st_force_join_nb'>Enforce contiguity between pairs of areas</h2><span id='topic+st_force_join_nb'></span>

<h3>Description</h3>

<p>Enforce contiguity between pairs of areas
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_force_join_nb(nb, x = NULL, y = NULL, xy_df = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_force_join_nb_+3A_nb">nb</code></td>
<td>
<p>a neighbourhood '&quot;list&quot;' or '&quot;matrix&quot;', or an 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.</p>
</td></tr>
<tr><td><code id="st_force_join_nb_+3A_x">x</code></td>
<td>
<p>name or number of first area (optional if 'xy_df' is provided).</p>
</td></tr>
<tr><td><code id="st_force_join_nb_+3A_y">y</code></td>
<td>
<p>name or number of second area (optional if 'xy_df' is provided).</p>
</td></tr>
<tr><td><code id="st_force_join_nb_+3A_xy_df">xy_df</code></td>
<td>
<p>(optional) a dataframe with two columns: 'x' and 'y', containing the names or numbers of areas to join.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An amended neighbourhood '&quot;list&quot;', '&quot;matrix&quot;', or 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># For individual x and y
st_bridges(uk_election,"constituency_name") |&gt;
st_force_join_nb(x = "Gower", y = "Bridgend")

# For multiple x and y pairse") |&gt;
st_bridges(uk_election,"constituency_name") |&gt;
st_force_join_nb(xy_df = data.frame(
x = c("Gower", "Llanelli"),
y = c("Bridgend", "Vale Of Glamorgan")))
</code></pre>

<hr>
<h2 id='st_manual_cut_nb'>Manual remove contiguity between two areas</h2><span id='topic+st_manual_cut_nb'></span>

<h3>Description</h3>

<p>Manual remove contiguity between two areas
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_manual_cut_nb(nb, x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_manual_cut_nb_+3A_nb">nb</code></td>
<td>
<p>a neighbourhood '&quot;list&quot;' or '&quot;matrix&quot;', or an 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.</p>
</td></tr>
<tr><td><code id="st_manual_cut_nb_+3A_x">x</code></td>
<td>
<p>name or number of first area.</p>
</td></tr>
<tr><td><code id="st_manual_cut_nb_+3A_y">y</code></td>
<td>
<p>name or number of second area.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An amended neighbourhood '&quot;list&quot;', '&quot;matrix&quot;', or 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>st_bridges(uk_election,"constituency_name") |&gt;
st_manual_cut_nb("Ynys Mon","Arfon") |&gt;
st_manual_cut_nb(292,378)
</code></pre>

<hr>
<h2 id='st_manual_join_nb'>Manually enforce contiguity between two areas</h2><span id='topic+st_manual_join_nb'></span>

<h3>Description</h3>

<p>Manually enforce contiguity between two areas
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_manual_join_nb(nb, x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_manual_join_nb_+3A_nb">nb</code></td>
<td>
<p>a neighbourhood '&quot;list&quot;' or '&quot;matrix&quot;', or an 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.</p>
</td></tr>
<tr><td><code id="st_manual_join_nb_+3A_x">x</code></td>
<td>
<p>name or number of first area.</p>
</td></tr>
<tr><td><code id="st_manual_join_nb_+3A_y">y</code></td>
<td>
<p>name or number of second area.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An amended neighbourhood '&quot;list&quot;', '&quot;matrix&quot;', or 'sf' dataframe with a neighbourhood column called '&quot;nb&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>st_bridges(uk_election,"constituency_name") |&gt;
st_manual_join_nb("Gower","St Ives")
</code></pre>

<hr>
<h2 id='st_quickmap_nb'>Visualise a neighbourhood structure on a map</h2><span id='topic+st_quickmap_nb'></span>

<h3>Description</h3>

<p>Visualise a neighbourhood structure on a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_quickmap_nb(
  nbsf,
  linkcol = "dodgerblue",
  bordercol = "gray7",
  pointcol = "darkred",
  fillcol = "gray95",
  linksize = 0.2,
  bordersize = 0.1,
  pointsize = 0.8,
  title = NULL,
  subtitle = NULL,
  nodes = "point",
  numericsize = 5,
  numericcol = "black",
  concavehull = FALSE,
  hullratio = 0.8,
  hullcol = "darkgreen",
  hullsize = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_quickmap_nb_+3A_nbsf">nbsf</code></td>
<td>
<p>an 'sf' dataframe with a neighbourhood column called &quot;nb&quot;, such as the output of 'st_bridges()'</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_linkcol">linkcol</code></td>
<td>
<p>colour of lines connecting neighbours.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_bordercol">bordercol</code></td>
<td>
<p>colour of boundary lines between areas.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_pointcol">pointcol</code></td>
<td>
<p>colour of centroid points if nodes are '&quot;point&quot;'.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_fillcol">fillcol</code></td>
<td>
<p>fill of areas.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_linksize">linksize</code></td>
<td>
<p>linewidth of lines connecting neighbours.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_bordersize">bordersize</code></td>
<td>
<p>linewidth of borders between areas.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_pointsize">pointsize</code></td>
<td>
<p>size of centroid points if nodes are '&quot;point&quot;'.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_title">title</code></td>
<td>
<p>plot title.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_subtitle">subtitle</code></td>
<td>
<p>plot subtitle.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_nodes">nodes</code></td>
<td>
<p>default '&quot;point&quot;'. Can also be '&quot;numeric&quot;'.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_numericsize">numericsize</code></td>
<td>
<p>font size if nodes are '&quot;numeric&quot;'.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_numericcol">numericcol</code></td>
<td>
<p>font colour if nodes are '&quot;numeric&quot;'.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_concavehull">concavehull</code></td>
<td>
<p>default 'FALSE'. Whether or not to show concave hulls.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_hullratio">hullratio</code></td>
<td>
<p>value between 0 and 1. 1 returns the convex hulls, 0 maximally concave hulls.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_hullcol">hullcol</code></td>
<td>
<p>colour of concave hull lines.</p>
</td></tr>
<tr><td><code id="st_quickmap_nb_+3A_hullsize">hullsize</code></td>
<td>
<p>line width of concave hull lines.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'ggplot' showing areas and neighbourhood structure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>st_bridges(uk_election,"constituency_name") |&gt;
st_quickmap_nb()
</code></pre>

<hr>
<h2 id='st_quickmap_preds'>Visualise the predictions generated by the 'st_augment()' function</h2><span id='topic+st_quickmap_preds'></span>

<h3>Description</h3>

<p>Visualise the predictions generated by the 'st_augment()' function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_quickmap_preds(
  output,
  scale_low = "firebrick4",
  scale_mid = "white",
  scale_high = "darkblue",
  scale_midpoint = 0,
  borderwidth = 0.05,
  bordercol = "black",
  legendlimits = "individual",
  titlesize = 12,
  subtitlesize = 10,
  framefill = "white",
  frameline = "black",
  framesize = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_quickmap_preds_+3A_output">output</code></td>
<td>
<p>an augmented 'sf' dataframe produced by 'st_augment()'.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_scale_low">scale_low</code></td>
<td>
<p>fill of lowest extreme of scale.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_scale_mid">scale_mid</code></td>
<td>
<p>fill of midpoint of scale.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_scale_high">scale_high</code></td>
<td>
<p>fill of highest extreme of scale.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_scale_midpoint">scale_midpoint</code></td>
<td>
<p>value of midpoint of scale.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_borderwidth">borderwidth</code></td>
<td>
<p>linewidth of borders between units.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_bordercol">bordercol</code></td>
<td>
<p>colour of borders between units.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_legendlimits">legendlimits</code></td>
<td>
<p>default '&quot;individual&quot;'. legend of each plot scaled within its own limits. '&quot;minmax&quot;' means all plot have common legend limits according to the global min-max.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_titlesize">titlesize</code></td>
<td>
<p>font size for title.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_subtitlesize">subtitlesize</code></td>
<td>
<p>font size for subtitle.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_framefill">framefill</code></td>
<td>
<p>colour for background fill.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_frameline">frameline</code></td>
<td>
<p>colour for frame.</p>
</td></tr>
<tr><td><code id="st_quickmap_preds_+3A_framesize">framesize</code></td>
<td>
<p>line width of frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ggplots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prepdata &lt;- st_bridges(uk_election,"constituency_name")
mgcv::gam(health_not_good ~
  s(constituency_name, bs='mrf', xt=list(nb=prepdata$nb), k=100), data=prepdata, method="REML") |&gt;
st_augment(uk_election) |&gt;
st_quickmap_preds()
</code></pre>

<hr>
<h2 id='uk_election'>UK election data</h2><span id='topic+uk_election'></span>

<h3>Description</h3>

<p>Swing and socio-economic data for England, Scotland &amp; Wales
Census and voting data sourced from parlitools R package
Spatial data sourced from UK government geoportal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uk_election
</code></pre>


<h3>Format</h3>

<p>## 'uk_election'
An sf and data.frame object with 632 rows and 9 columns
</p>

<dl>
<dt>degree_educated</dt><dd><p>Percentage of constituency population with level 4 qualifications or higher, scaled to mean 0 and standard deviation 1</p>
</dd>
<dt>health_not_good</dt><dd><p>Percentage of constituency of population reporting health to be fair, bad, or very bad, scaled to mean 0 and standard deviation 1</p>
</dd>
<dt>white</dt><dd><p>Percentage of constituency of population of exclusively white ethnicity, scaled to mean 0 and standard deviation 1</p>
</dd>
<dt>con_swing</dt><dd><p>Butler swing to the Conservative Party from the Labour Party from election 2019 to election 2019</p>
</dd>
<dt>population</dt><dd><p>Constituency population</p>
</dd>
<dt>region</dt><dd><p>Regions</p>
</dd>
<dt>county</dt><dd><p>Counties</p>
</dd>
<dt>constituency_name</dt><dd><p>Westminster parliamentary constituencies, as of 2019</p>
</dd>
<dt>geometry</dt><dd><p>sfc polygons column</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p>&lt;https://geoportal.statistics.gov.uk/datasets/ons::wpc-dec-2019-ultra-generalised-clipped-boundaries-uk&gt;, &lt;https://docs.evanodell.com/parlitools/&gt;
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
