<!DOCTYPE html><html><head><title>Help for package neonOS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {neonOS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#brd_countdata'><p>Count data table from Breeding landbird point counts (DP1.10003.001)</p></a></li>
<li><a href='#brd_perpoint'><p>Per-point data table from Breeding landbird point counts (DP1.10003.001)</p></a></li>
<li><a href='#cfc_lignin_test_dups'><p>Lignin data table from Plant foliar traits (DP1.10026.001)</p></a></li>
<li><a href='#cfc_lignin_variables'><p>Variables file, subset to lignin table, from Plant foliar traits (DP1.10026.001)</p></a></li>
<li><a href='#getAPI'><p>Get the data from API</p></a></li>
<li><a href='#getSampleTree'><p>Find all relatives (parents, children, and outward) of a given sample.</p></a></li>
<li><a href='#getTaxonList'><p>Get NEON taxon table</p></a></li>
<li><a href='#idSampleParents'><p>Reformat sample data to indicate the parents of a focal sample.</p></a></li>
<li><a href='#joinTableNEON'><p>Join two data tables from NEON Observational System</p></a></li>
<li><a href='#removeDups'><p>Remove duplicates from a data table based on a provided primary key; flag duplicates that can't be removed.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Basic Data Wrangling for NEON Observational Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-09-21</td>
</tr>
<tr>
<td>Description:</td>
<td>NEON observational data are provided via the NEON Data Portal <a href="https://www.neonscience.org">https://www.neonscience.org</a> 
  and NEON API, and can be downloaded and reformatted by the 'neonUtilities' package. NEON observational data 
  (human-observed measurements, and analyses derived from human-collected samples, such as tree diameters and 
  algal chemistry) are published in a format consisting of one or more tabular data files. This package provides 
  tools for performing common operations on NEON observational data, including checking for duplicates and 
  joining tables.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, data.table, httr, curl, jsonlite</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, neonUtilities</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/NEONScience/NEON-OS-data-processing">https://github.com/NEONScience/NEON-OS-data-processing</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/NEONScience/NEON-OS-data-processing/issues">https://github.com/NEONScience/NEON-OS-data-processing/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-27 23:18:01 UTC; clunch</td>
</tr>
<tr>
<td>Author:</td>
<td>Claire Lunch <a href="https://orcid.org/0000-0001-8753-6593"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, ctb],
  Eric Sokol <a href="https://orcid.org/0000-0001-5923-0917"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ctb],
  Natalie Robinson <a href="https://orcid.org/0000-0002-1144-418X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ctb],
  NEON (National Ecological Observatory Network) [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Claire Lunch &lt;clunch@battelleecology.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-29 08:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='brd_countdata'>Count data table from Breeding landbird point counts (DP1.10003.001)</h2><span id='topic+brd_countdata'></span>

<h3>Description</h3>

<p>An example set of NEON observational data. Contains the individual bird observations from Niwot Ridge (NIWO) in 2019, as published in RELEASE-2021.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brd_countdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 472 rows and 26 columns
</p>

<dl>
<dt>uid</dt><dd><p>Unique ID within NEON database; an identifier for the record</p>
</dd>
<dt>namedLocation</dt><dd><p>Name of the measurement location in the NEON database</p>
</dd>
<dt>domainID</dt><dd><p>Unique identifier of the NEON domain</p>
</dd>
<dt>siteID</dt><dd><p>NEON site code</p>
</dd>
<dt>plotID</dt><dd><p>Plot identifier (NEON site code_XXX)</p>
</dd>
<dt>plotType</dt><dd><p>NEON plot type in which sampling occurred: tower, distributed or gradient</p>
</dd>
<dt>pointID</dt><dd><p>Identifier for a point location</p>
</dd>
<dt>startDate</dt><dd><p>The start date-time or interval during which an event occurred</p>
</dd>
<dt>eventID</dt><dd><p>An identifier for the set of information associated with the event, which includes information about the place and time of the event</p>
</dd>
<dt>pointCountMinute</dt><dd><p>The minute of sampling within the point count period</p>
</dd>
<dt>targetTaxaPresent</dt><dd><p>Indicator of whether the sample contained individuals of the target taxa</p>
</dd>
<dt>taxonID</dt><dd><p>Species code, based on one or more sources</p>
</dd>
<dt>scientificName</dt><dd><p>Scientific name, associated with the taxonID. This is the name of the lowest level taxonomic rank that can be determined</p>
</dd>
<dt>taxonRank</dt><dd><p>The lowest level taxonomic rank that can be determined for the individual or specimen</p>
</dd>
<dt>vernacularName</dt><dd><p>A common or vernacular name</p>
</dd>
<dt>family</dt><dd><p>The scientific name of the family in which the taxon is classified</p>
</dd>
<dt>nativeStatusCode</dt><dd><p>The process by which the taxon became established in the location</p>
</dd>
<dt>observerDistance</dt><dd><p>Radial distance between the observer and the individual(s) being observed</p>
</dd>
<dt>detectionMethod</dt><dd><p>How the individual(s) was (were) first detected by the observer</p>
</dd>
<dt>visualConfirmation</dt><dd><p>Whether the individual(s) was (were) seen after the initial detection</p>
</dd>
<dt>sexOrAge</dt><dd><p>Sex of individual if detectable, age of individual if individual can not be sexed</p>
</dd>
<dt>clusterSize</dt><dd><p>Number of individuals in a cluster (a group of individuals of the same species)</p>
</dd>
<dt>clusterCode</dt><dd><p>Alphabetic code (A-Z) linked to clusters (groups of individuals of the same species) spanning multiple records</p>
</dd>
<dt>identifiedBy</dt><dd><p>An identifier for the technician who identified the specimen</p>
</dd>
<dt>publicationDate</dt><dd><p>Date of data publication on the NEON data portal</p>
</dd>
<dt>release</dt><dd><p>Identifier for data release</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://data.neonscience.org/api/v0/products/DP1.10003.001">https://data.neonscience.org/api/v0/products/DP1.10003.001</a>
</p>

<hr>
<h2 id='brd_perpoint'>Per-point data table from Breeding landbird point counts (DP1.10003.001)</h2><span id='topic+brd_perpoint'></span>

<h3>Description</h3>

<p>An example set of NEON observational data. Contains the point metadata associated with bird observations from Niwot Ridge (NIWO) in 2019, as published in RELEASE-2021.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brd_perpoint
</code></pre>


<h3>Format</h3>

<p>A data frame with 54 rows and 31 columns
</p>

<dl>
<dt>uid</dt><dd><p>Unique ID within NEON database; an identifier for the record</p>
</dd>
<dt>namedLocation</dt><dd><p>Name of the measurement location in the NEON database</p>
</dd>
<dt>domainID</dt><dd><p>Unique identifier of the NEON domain</p>
</dd>
<dt>siteID</dt><dd><p>NEON site code</p>
</dd>
<dt>plotID</dt><dd><p>Plot identifier (NEON site code_XXX)</p>
</dd>
<dt>plotType</dt><dd><p>NEON plot type in which sampling occurred: tower, distributed or gradient</p>
</dd>
<dt>pointID</dt><dd><p>Identifier for a point location</p>
</dd>
<dt>nlcdClass</dt><dd><p>National Land Cover Database Vegetation Type Name</p>
</dd>
<dt>decimalLatitude</dt><dd><p>The geographic latitude (in decimal degrees, WGS84) of the geographic center of the reference area</p>
</dd>
<dt>decimalLongitude</dt><dd><p>The geographic longitude (in decimal degrees, WGS84) of the geographic center of the reference area</p>
</dd>
<dt>geodeticDatum</dt><dd><p>Model used to measure horizontal position on the earth</p>
</dd>
<dt>coordinateUncertainty</dt><dd><p>The horizontal distance (in meters) from the given decimalLatitude and decimalLongitude describing the smallest circle containing the whole of the Location. Zero is not a valid value for this term</p>
</dd>
<dt>elevation</dt><dd><p>Elevation (in meters) above sea level</p>
</dd>
<dt>elevationUncertainty</dt><dd><p>Uncertainty in elevation values (in meters)</p>
</dd>
<dt>startDate</dt><dd><p>The start date-time or interval during which an event occurred</p>
</dd>
<dt>samplingImpracticalRemarks</dt><dd><p>Technician notes; free text comments accompanying the sampling impractical record</p>
</dd>
<dt>samplingImpractical</dt><dd><p>Samples and/or measurements were not collected due to the indicated circumstance</p>
</dd>
<dt>eventID</dt><dd><p>An identifier for the set of information associated with the event, which includes information about the place and time of the event</p>
</dd>
<dt>startCloudCoverPercentage</dt><dd><p>Observer estimate of percent cloud cover at start of sampling</p>
</dd>
<dt>endCloudCoverPercentage</dt><dd><p>Observer estimate of percent cloud cover at end of sampling</p>
</dd>
<dt>startRH</dt><dd><p>Relative humidity as measured by handheld weather meter at the start of sampling</p>
</dd>
<dt>endRH</dt><dd><p>Relative humidity as measured by handheld weather meter at the end of sampling</p>
</dd>
<dt>observedHabitat</dt><dd><p>Observer assessment of dominant habitat at the sampling point at sampling time</p>
</dd>
<dt>observedAirTemp</dt><dd><p>The air temperature measured with a handheld weather meter</p>
</dd>
<dt>kmPerHourObservedWindSpeed</dt><dd><p>The average wind speed measured with a handheld weather meter, in kilometers per hour</p>
</dd>
<dt>laboratoryName</dt><dd><p>Name of the laboratory or facility that is processing the sample</p>
</dd>
<dt>samplingProtocolVersion</dt><dd><p>The NEON document number and version where detailed information regarding the sampling method used is available; format NEON.DOC.######vX</p>
</dd>
<dt>remarks</dt><dd><p>Technician notes; free text comments accompanying the record</p>
</dd>
<dt>measuredBy</dt><dd><p>An identifier for the technician who measured or collected the data</p>
</dd>
<dt>publicationDate</dt><dd><p>Date of data publication on the NEON data portal</p>
</dd>
<dt>release</dt><dd><p>Identifier for data release</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://data.neonscience.org/api/v0/products/DP1.10003.001">https://data.neonscience.org/api/v0/products/DP1.10003.001</a>
</p>

<hr>
<h2 id='cfc_lignin_test_dups'>Lignin data table from Plant foliar traits (DP1.10026.001)</h2><span id='topic+cfc_lignin_test_dups'></span>

<h3>Description</h3>

<p>An example set of NEON observational data, containing duplicate records. NOT APPROPRIATE FOR ANALYTICAL USE. Contains foliar lignin data from Moab and Toolik in 2017, with artificial duplicates introduced to demonstrate the removeDups() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfc_lignin_test_dups
</code></pre>


<h3>Format</h3>

<p>A data frame with 26 rows and 25 columns
</p>

<p>The variable names, descriptions, and units can be found in the cfc_lignin_variables table

</p>


<h3>Source</h3>

<p><a href="https://data.neonscience.org/api/v0/products/DP1.10026.001">https://data.neonscience.org/api/v0/products/DP1.10026.001</a>
</p>

<hr>
<h2 id='cfc_lignin_variables'>Variables file, subset to lignin table, from Plant foliar traits (DP1.10026.001)</h2><span id='topic+cfc_lignin_variables'></span>

<h3>Description</h3>

<p>The foliar lignin table's variables file from NEON observational data. Example to illustrate use of removeDups().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfc_lignin_variables
</code></pre>


<h3>Format</h3>

<p>A data frame with 26 rows and 8 columns
</p>

<dl>
<dt>table</dt><dd><p>The table name of the NEON data table</p>
</dd>
<dt>fieldName</dt><dd><p>Field name within the table; corresponds to column names in cfc_lignin_test_dups</p>
</dd>
<dt>description</dt><dd><p>Description for each field name</p>
</dd>
<dt>dataType</dt><dd><p>Type of data for each field name</p>
</dd>
<dt>units</dt><dd><p>Units for each field name</p>
</dd>
<dt>downloadPkg</dt><dd><p>Is the field published in the basic or expanded data package?</p>
</dd>
<dt>pubFormat</dt><dd><p>Publication formatting, e.g. date format or rounding</p>
</dd>
<dt>primaryKey</dt><dd><p>Fields indicated by Y, when combined, should identify a unique record. Used by removeDups() to identify duplicate records.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://data.neonscience.org/api/v0/products/DP1.10026.001">https://data.neonscience.org/api/v0/products/DP1.10026.001</a>
</p>

<hr>
<h2 id='getAPI'>Get the data from API</h2><span id='topic+getAPI'></span>

<h3>Description</h3>

<p>Accesses the API with options to use the user-specific API token generated within neon.datascience user accounts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAPI(apiURL, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getAPI_+3A_apiurl">apiURL</code></td>
<td>
<p>The API endpoint URL</p>
</td></tr>
<tr><td><code id="getAPI_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getSampleTree'>Find all relatives (parents, children, and outward) of a given sample.</h2><span id='topic+getSampleTree'></span>

<h3>Description</h3>

<p>Find all samples in the sample tree of a given sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSampleTree(
  sampleNode,
  idType = "tag",
  sampleClass = NA_character_,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSampleTree_+3A_samplenode">sampleNode</code></td>
<td>
<p>A NEON sample identifier. [character]</p>
</td></tr>
<tr><td><code id="getSampleTree_+3A_idtype">idType</code></td>
<td>
<p>Is sampleNode a tag, barcode, or guid? Defaults to tag. [character]</p>
</td></tr>
<tr><td><code id="getSampleTree_+3A_sampleclass">sampleClass</code></td>
<td>
<p>The NEON sampleClass of sampleNode. Required if sampleNode is a tag and there are multiple valid classes. [character]</p>
</td></tr>
<tr><td><code id="getSampleTree_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional. [character]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Related NEON samples can be connected to each other in a parent-child hierarchy. Parents can have one or many children, and children can have one or many parents. Sample hierarchies can be simple or complex - for example, particulate mass samples (dust filters) have no parents or children, whereas water chemistry samples can be subsampled for dissolved gas, isotope, and microbial measurements. This function finds all ancestors and descendants of the focal sample (the sampleNode), and all of their relatives, and so on recursively, to provide the entire hierarchy. See documentation for each data product for more specific information.
</p>


<h3>Value</h3>

<p>A table of sample identifiers, their classes, and their parent samples.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Find related samples for a soil nitrogen transformation sample
## Not run: 
soil_samp &lt;- getSampleTree(sampleNode="B00000123538", idType="barcode")

## End(Not run)
</code></pre>

<hr>
<h2 id='getTaxonList'>Get NEON taxon table</h2><span id='topic+getTaxonList'></span>

<h3>Description</h3>

<p>This is a function to retrieve a taxon table from the NEON data portal for a given taxon type and provide it in a tractable format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTaxonList(
  taxonType = NA,
  recordReturnLimit = NA,
  stream = "true",
  verbose = "false",
  token = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTaxonList_+3A_taxontype">taxonType</code></td>
<td>
<p>The taxonTypeCode to access. Must be one of ALGAE, BEETLE, BIRD, FISH, HERPETOLOGY, MACROINVERTEBRATE, MOSQUITO, MOSQUITO_PATHOGENS, SMALL_MAMMAL, PLANT, TICK [character]</p>
</td></tr>
<tr><td><code id="getTaxonList_+3A_recordreturnlimit">recordReturnLimit</code></td>
<td>
<p>The number of items to limit the result set to. If NA (the default), will return either the first 100 records, or all records in the table, depending on the value of &lsquo;stream'. Use 'stream=&rsquo;true'' to get all records. [integer]</p>
</td></tr>
<tr><td><code id="getTaxonList_+3A_stream">stream</code></td>
<td>
<p>True or false, obtain the results as a stream. Utilize for large requests. Note this is lowercase true and false as character strings, not logical. [character]</p>
</td></tr>
<tr><td><code id="getTaxonList_+3A_verbose">verbose</code></td>
<td>
<p>True or false, include all possible taxonomic parameters. Defaults to false, only essential parameters. Note this is lowercase true and false as character strings, not logical. [character]</p>
</td></tr>
<tr><td><code id="getTaxonList_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience.org user account) [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with selected NEON taxonomic data
</p>


<h3>Author(s)</h3>

<p>Eric R. Sokol <a href="mailto:esokol@battelleecology.org">esokol@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># taxonTypeCode must be one of	
# ALGAE, BEETLE, BIRD, FISH,	
# HERPETOLOGY, MACROINVERTEBRATE, 
# MOSQUITO, MOSQUITO_PATHOGENS,	
# SMALL_MAMMAL, PLANT, TICK	
#################################	
# get the first 4 fish taxa	
taxa_table &lt;- getTaxonList('FISH', recordReturnLimit = 4)

</code></pre>

<hr>
<h2 id='idSampleParents'>Reformat sample data to indicate the parents of a focal sample.</h2><span id='topic+idSampleParents'></span>

<h3>Description</h3>

<p>Reformat table of sample identifiers to include parent sample identifiers. Used in getSampleTree().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idSampleParents(sampleUuid, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="idSampleParents_+3A_sampleuuid">sampleUuid</code></td>
<td>
<p>A NEON sample UUID. [character]</p>
</td></tr>
<tr><td><code id="idSampleParents_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional. [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of sample identifiers, their classes, and their parent samples.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='joinTableNEON'>Join two data tables from NEON Observational System</h2><span id='topic+joinTableNEON'></span>

<h3>Description</h3>

<p>NEON observational data are published in multiple tables, usually corresponding to activities performed in different times or places. This function uses the fields identified in NEON Quick Start Guides to join tables containing related data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>joinTableNEON(
  table1,
  table2,
  name1 = NA_character_,
  name2 = NA_character_,
  location.fields = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="joinTableNEON_+3A_table1">table1</code></td>
<td>
<p>A data frame containing data from a NEON observational data table [data frame]</p>
</td></tr>
<tr><td><code id="joinTableNEON_+3A_table2">table2</code></td>
<td>
<p>A second data frame containing data from a NEON observational data table [data frame]</p>
</td></tr>
<tr><td><code id="joinTableNEON_+3A_name1">name1</code></td>
<td>
<p>The name of the first table. Defaults to the object name of table1. [character]</p>
</td></tr>
<tr><td><code id="joinTableNEON_+3A_name2">name2</code></td>
<td>
<p>The name of the second table. Defaults to the object name of table2. [character]</p>
</td></tr>
<tr><td><code id="joinTableNEON_+3A_location.fields">location.fields</code></td>
<td>
<p>Should standard location fields be included in the list of linking variables, to avoid duplicating those fields? For most data products, these fields are redundant, but there are a few exceptions. This parameter defaults to NA, in which case the Quick Start Guide is consulted. If QSG indicates location fields shouldn't be included, value is updated to FALSE, otherwise to TRUE. Enter TRUE or FALSE to override QSG defaults. [logical]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The &quot;Table joining&quot; section of NEON Quick Start Guides (QSGs) provides the field names of the linking variables between related NEON data tables. This function uses the QSG information to join tables. All tables are joined using a full join. If you need to remove duplicates as well as joining, run removeDups() before running joinTableNEON(). Tables that don't appear together in QSG instructions can't be joined here. Some tables may not be straightforwardly joinable, such as tables of analytical standards run as unknowns. Theoretically, these data could be joined to analytical results by a combination of laboratory and date, but in general, a table join is not the best way to analyze this type of data. If a pair of tables is omitted from QSG instructions that you expected to find, contact NEON.
</p>


<h3>Value</h3>

<p>A single data frame created by joining table1 and table2 on the fields identified in the quick start guide.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Join metadata from the point level to individual observations, for NEON bird data
all_bird &lt;- joinTableNEON(table1=brd_perpoint, table2=brd_countdata)
</code></pre>

<hr>
<h2 id='removeDups'>Remove duplicates from a data table based on a provided primary key; flag duplicates that can't be removed.</h2><span id='topic+removeDups'></span>

<h3>Description</h3>

<p>NEON observational data may contain duplicates; this function removes exact duplicates, attempts to resolve non-exact duplicates, and flags duplicates that can't be resolved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeDups(data, variables, table = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeDups_+3A_data">data</code></td>
<td>
<p>A data frame containing data from a NEON observational data table [data frame]</p>
</td></tr>
<tr><td><code id="removeDups_+3A_variables">variables</code></td>
<td>
<p>The NEON variables file containing metadata about the data table in question [data frame]</p>
</td></tr>
<tr><td><code id="removeDups_+3A_table">table</code></td>
<td>
<p>The name of the table. Must match one of the table names in 'variables' [character]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Duplicates are identified based on exact matches in the values of the primary key. For records with identical keys, these steps are followed, in order: (1) If records are identical except for NA or empty string values, the non-empty values are kept. (2) If records are identical except for uid, remarks, and/or personnel (xxxxBy) fields, unique values are concatenated within each field, and the merged version is kept. (3) For records that are identical following steps 1 and 2, one record is kept and flagged with duplicateRecordQF=1. (4) Records that can't be resolved by steps 1-3 are flagged with duplicateRecordQF=2. Note that in a set of three or more duplicates, some records may be resolveable and some may not; if two or more records are left after steps 1-3, all remaining records are flagged with duplicateRecordQF=2.
</p>


<h3>Value</h3>

<p>A modified data frame with resolveable duplicates removed and a flag field added and populated.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Resolve and flag duplicates in a test dataset of foliar lignin
lig_dup &lt;- removeDups(data=cfc_lignin_test_dups, 
                      variables=cfc_lignin_variables,
                      table="cfc_lignin")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
