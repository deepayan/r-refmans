<!DOCTYPE html><html lang="en"><head><title>Help for package image.LineSegmentDetector</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {image.LineSegmentDetector}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#image.LineSegmentDetector-package'><p>The image.LineSegmentDetector (LSD) package detects line segments in images</p></a></li>
<li><a href='#image_line_segment_detector'><p>Line Segments Detection (LSD) in an image</p></a></li>
<li><a href='#plot.lsd'><p>Plot the detected lines from the image_line_segment_detector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Detect Line Segments in Images</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the Line Segment Detector on digital images described in the paper: "LSD: A Fast Line Segment Detector with a False Detection Control" by Rafael Grompone von Gioi et al (2012). 
    The algorithm is explained at &lt;<a href="https://doi.org/10.5201%2Fipol.2012.gjmr-lsd">doi:10.5201/ipol.2012.gjmr-lsd</a>&gt;.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Wijffels &lt;jwijffels@bnosac.be&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bnosac/image">https://github.com/bnosac/image</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.8), sp</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>pixmap, magick</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-07-20 15:42:54 UTC; Jan</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Wijffels [aut, cre, cph] (R wrapper),
  BNOSAC [cph] (R wrapper),
  Rafael Grompone von Gioi [ctb, cph] (src/lsd)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-07-27 12:30:13 UTC</td>
</tr>
</table>
<hr>
<h2 id='image.LineSegmentDetector-package'>The image.LineSegmentDetector (LSD) package detects line segments in images</h2><span id='topic+image.LineSegmentDetector-package'></span>

<h3>Description</h3>

<p>LSD is a linear-time Line Segment Detector giving subpixel accurate results.
It is designed to work on any digital image without parameter tuning.
It controls its own number of false detections: On average, one false alarm is allowed per image.
The method is based on Burns, Hanson, and Riseman's method, and uses an a-contrario validation approach according
to Desolneux, Moisan, and Morel's theory.
</p>


<h3>References</h3>

<p>LSD: A Fast Line Segment Detector with a False Detection Control&quot;
by Rafael Grompone von Gioi, Jeremie Jakubowicz, Jean-Michel Morel, and Gregory Randall, IEEE Transactions on Pattern Analysis and
Machine Intelligence, vol. 32, no. 4, pp. 722-732, April, 2010. <a href="https://doi.org/10.5201/ipol.2012.gjmr-lsd">https://doi.org/10.5201/ipol.2012.gjmr-lsd</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+image_line_segment_detector">image_line_segment_detector</a>
</p>

<hr>
<h2 id='image_line_segment_detector'>Line Segments Detection (LSD) in an image</h2><span id='topic+image_line_segment_detector'></span>

<h3>Description</h3>

<p>LSD is a linear-time Line Segment Detector giving subpixel accurate results.
It is designed to work on any digital image without parameter tuning.
It controls its own number of false detections (NFA): On average, one false alarm is allowed per image.
The method is based on Burns, Hanson, and Riseman's method, and uses an a-contrario validation approach according
to Desolneux, Moisan, and Morel's theory.
</p>
<p>In general, no changes are needed on the arguments. The default arguments provide very good line detections for any
digital image without changing the parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_line_segment_detector(
  x,
  scale = 0.8,
  sigma_scale = 0.6,
  quant = 2,
  ang_th = 22.5,
  log_eps = 0,
  density_th = 0.7,
  n_bins = 1024,
  union = FALSE,
  union_min_length = 5,
  union_max_distance = 5,
  union_ang_th = 7,
  union_use_NFA = FALSE,
  union_log_eps = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="image_line_segment_detector_+3A_x">x</code></td>
<td>
<p>a matrix of image pixel values in the 0-255 range.</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_scale">scale</code></td>
<td>
<p>Positive numeric value. When different from 1.0, LSD will scale the input image by 'scale' factor by Gaussian filtering,
before detecting line segments. Example: if scale=0.8, the input image will be subsampled
to 80 percent of its size, before the line segment detector is applied. Suggested value: 0.8</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_sigma_scale">sigma_scale</code></td>
<td>
<p>Positive numeric value. When scale != 1.0, the sigma of the Gaussian filter is:
sigma = sigma_scale / scale,   if scale &lt;  1.0 and
sigma = sigma_scale,           if scale &gt;= 1.0. Suggested value: 0.6</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_quant">quant</code></td>
<td>
<p>Positive numeric value. Bound to the quantization error on the gradient norm.
Example: if gray levels are quantized to integer steps,
the gradient (computed by finite differences) error due to quantization will be bounded by 2.0, as the
worst case is when the error are 1 and -1, that gives an error of 2.0. Suggested value: 2.0</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_ang_th">ang_th</code></td>
<td>
<p>Positive numeric value in 0-180 range. Gradient angle tolerance in the region growing algorithm, in degrees. Suggested value: 22.5</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_log_eps">log_eps</code></td>
<td>
<p>Detection threshold, accept if -log10(NFA) &gt; log_eps. The larger the value, the more strict the detector is,
and will result in less detections. (Note that the 'minus sign' makes that this behavior is opposite to the one of NFA.).
Suggested value: 0.0.</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_density_th">density_th</code></td>
<td>
<p>Positive numeric value in 0-1 range. Minimal proportion of 'supporting' points in a rectangle. Suggested value: 0.7.</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_n_bins">n_bins</code></td>
<td>
<p>Positive integer value. Number of bins used in the pseudo-ordering of gradient modulus. Suggested value: 1024</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union">union</code></td>
<td>
<p>Logical indicating if you need to post procces image by union close segments. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union_min_length">union_min_length</code></td>
<td>
<p>Numeric value with minimum length of segment to union</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union_max_distance">union_max_distance</code></td>
<td>
<p>Numeric value with maximum distance between two line which we would union</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union_ang_th">union_ang_th</code></td>
<td>
<p>Numeric value with angle threshold in order to union</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union_use_nfa">union_use_NFA</code></td>
<td>
<p>Logical indicating to use NFA to union</p>
</td></tr>
<tr><td><code id="image_line_segment_detector_+3A_union_log_eps">union_log_eps</code></td>
<td>
<p>Detection threshold to union</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class lsd which is a list with the following elements
</p>

<ul>
<li><p>n: The number of found line segments
</p>
</li>
<li><p>lines: A matrix with detected line segments with columns x1, y1, x2, y2, width, p, -log_nfa&quot;.
Each row corresponds to a line where a line segment is given by the coordinates (x1, y1) to (x2, y2).
Column width indicates the width of the line, p is the angle precision in (0, 1) given
by angle_tolerance/180 degree, and NFA stands for the Number of False Alarms.
The value -log10(NFA) is equivalent but more intuitive than NFA (Number of False Alarms):
-1 corresponds to 10 mean false alarms, 0 corresponds to 1 mean false alarm,
1 corresponds to 0.1 mean false alarms, 2 corresponds to 0.01 mean false alarms
</p>
</li>
<li><p>pixels: A matrix where each element correponds to a pixel where each pixel
indicates the line segment to which it belongs. Unused pixels have the value '0',
while the used ones have the number of the line segment, numbered 1,2,3,...,
in the same order as in the lines matrix
</p>
</li></ul>



<h3>References</h3>

<p>LSD: A Fast Line Segment Detector with a False Detection Control&quot;
by Rafael Grompone von Gioi, Jeremie Jakubowicz, Jean-Michel Morel, and Gregory Randall, IEEE Transactions on Pattern Analysis and
Machine Intelligence, vol. 32, no. 4, pp. 722-732, April, 2010. <a href="https://doi.org/10.5201/ipol.2012.gjmr-lsd">https://doi.org/10.5201/ipol.2012.gjmr-lsd</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pixmap)
imagelocation &lt;- system.file("extdata", "chairs.pgm", package="image.LineSegmentDetector")
image &lt;- read.pnm(file = imagelocation, cellres = 1)
x &lt;- image@grey * 255

linesegments &lt;- image_line_segment_detector(x)
linesegments
plot(image)
plot(linesegments, add = TRUE, col = "red")


imagelocation &lt;- system.file("extdata", "le-piree.pgm", package="image.LineSegmentDetector")
image &lt;- read.pnm(file = imagelocation, cellres = 1)
linesegments &lt;- image_line_segment_detector(image@grey * 255)
plot(image)
plot(linesegments)


##
## image_line_segment_detector expects a matrix as input
##  if you have a jpg/png/... convert it to pgm first or take the r/g/b channel
library(magick)
x   &lt;- image_read(system.file("extdata", "atomium.jpg", package="image.LineSegmentDetector"))
mat &lt;- image_data(x, channels = "gray")
mat &lt;- as.integer(mat, transpose = TRUE)
mat &lt;- drop(mat)
linesegments &lt;- image_line_segment_detector(mat)
plot(linesegments, lwd = 2)
</code></pre>

<hr>
<h2 id='plot.lsd'>Plot the detected lines from the image_line_segment_detector</h2><span id='topic+plot.lsd'></span>

<h3>Description</h3>

<p>Plot the detected lines from the image_line_segment_detector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'lsd'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.lsd_+3A_x">x</code></td>
<td>
<p>an object of class lsd as returned by <code><a href="#topic+image_line_segment_detector">image_line_segment_detector</a></code></p>
</td></tr>
<tr><td><code id="plot.lsd_+3A_...">...</code></td>
<td>
<p>further arguments passed on to plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly a SpatialLines object with the lines
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pixmap)
imagelocation &lt;- system.file("extdata", "le-piree.pgm", package="image.LineSegmentDetector")
image &lt;- read.pnm(file = imagelocation, cellres = 1)
linesegments &lt;- image_line_segment_detector(image@grey * 255)
plot(image)
plot(linesegments, add = TRUE, col = "red")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
