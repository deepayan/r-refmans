<!DOCTYPE html><html lang="en"><head><title>Help for package pestr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pestr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_eppo_token'><p>EPPO Data Services token variable</p></a></li>
<li><a href='#create_eppo_token'><p>EPPO Data Services token variable</p></a></li>
<li><a href='#eppo_database'><p>EPPO Data Services Database connection tools</p></a></li>
<li><a href='#eppo_names_tables'><p>EPPO Data Services SQLite Database search tools</p></a></li>
<li><a href='#eppo_table_full'><p>EPPO Data Services information table</p></a></li>
<li><a href='#eppo_tabletools'><p>EPPO table manipulation tools</p></a></li>
<li><a href='#pestr'><p>pestr: A package for retrieving data from</p>
EPPO Data Services <a href="https://data.eppo.int/">https://data.eppo.int/</a></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Interface to Download Data on Pests and Hosts from 'EPPO'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Set of tools to automatize extraction of data on pests from 'EPPO
    Data Services' and 'EPPO Global Database' and to put them into tables with
    human readable format. Those function use 'EPPO database API', thus you 
    first need to register on <a href="https://data.eppo.int">https://data.eppo.int</a> (free of charge).
    Additional helpers allow to download, check and connect to
    'SQLite EPPO database'.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, DBI, dplyr (&ge; 1.0.0), httr, jsonlite, magrittr, readr,
rlang, RSQLite, tidyr (&ge; 1.0.0), utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, mockr, rmarkdown, roxygen2, testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mczyzj/pestr">https://github.com/mczyzj/pestr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mczyzj/pestr/issues">https://github.com/mczyzj/pestr/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-16 11:40:02 UTC; michal</td>
</tr>
<tr>
<td>Author:</td>
<td>Michal Jan Czyz <a href="https://orcid.org/0000-0001-7156-4530"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michal Jan Czyz &lt;m.czyz.j@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-20 11:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_eppo_token'>EPPO Data Services token variable</h2><span id='topic+check_eppo_token'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a>
<p><code>check_eppo_token</code> should be used after <code>create_eppo_token</code>
to check if the token is correctly recognized by EPPO Data Services API.
As a reference it uses link to <em>Xylella fastidiosa</em> hosts database -
<strong>XYLEFA</strong> eppocode.
If token is recognized there will be no message. In other cases function will
show following messages: No internet connection or Forbidden (HTTP 403).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_eppo_token(token)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_eppo_token_+3A_token">token</code></td>
<td>
<p>object of class pestr_token.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Silent NULL when there is no error, otherwise message.
</p>


<h3>See Also</h3>

<p>To obtain your free EPPO token please register
to <strong>EPPO Data Services</strong> <a href="https://data.eppo.int/">https://data.eppo.int/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
eppo_token &lt;- create_eppo_token("abcdef123456")
check_eppo_token(eppo_token)

## End(Not run)
</code></pre>

<hr>
<h2 id='create_eppo_token'>EPPO Data Services token variable</h2><span id='topic+create_eppo_token'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a>
<p><code>create_eppo_token</code> makes token thats should be saved in a variable and
used argument for <code><a href="#topic+eppo_tabletools_hosts">eppo_tabletools_hosts</a></code>,
<code><a href="#topic+eppo_tabletools_pests">eppo_tabletools_pests</a></code>, <code><a href="#topic+eppo_tabletools_cat">eppo_tabletools_cat</a></code> and
<code><a href="#topic+eppo_tabletools_taxo">eppo_tabletools_taxo</a></code> functions. It contains token of class
string, that is needed to communicate with EPPO Data Services API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_eppo_token(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_eppo_token_+3A_x">x</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Token to access EPPO Data Services API in format recognized by
<code>eppo_tabletools_*</code> functions.
</p>


<h3>See Also</h3>

<p>To obtain your free EPPO token please register
<a href="https://data.eppo.int/">https://data.eppo.int/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  create_eppo_token("12345678abcdef")

## End(Not run)
</code></pre>

<hr>
<h2 id='eppo_database'>EPPO Data Services Database connection tools</h2><span id='topic+eppo_database'></span><span id='topic+eppo_database_check'></span><span id='topic+eppo_database_download'></span><span id='topic+eppo_database_connect'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#stable'><img src='figures/lifecycle-stable.svg' alt='Stable lifecycle'></a>
<p><code>eppo_database_check</code> checks if there is a file <em>eppocodes.sqlite</em>
and informs user if it is outdated and should be downloaded.
<code>eppo_database_download</code> downloads database in <em>SQLite</em> format directly.
The downloaded file is <em>zip</em> archive. On Linux this database will be
extracted automatically. On Windows user will need to extract the file
manually.
<code>eppo_database_connect</code> allows user to connect to SQLite database
downloaded from EPPO Data Services.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eppo_database_check(filepath = getwd(), filename = "eppocodes.sqlite")

eppo_database_download(filepath = getwd())

eppo_database_connect(filepath = getwd(), filename = "eppocodes.sqlite")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eppo_database_+3A_filepath">filepath</code></td>
<td>
<p>A string with path where eppocodes.sqlite file is stored. By
default it points to working directory.</p>
</td></tr>
<tr><td><code id="eppo_database_+3A_filename">filename</code></td>
<td>
<p>A string with name of the file. By default it takes name
eppocodes.sqlite.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Checks if database file exist in directory, if it is outdated, and
establishes SQLite database connection
</p>


<h3>Manual download</h3>

<p>If you will, you can download database directly from
<strong>EPPO Data Services</strong> <a href="https://data.eppo.int">https://data.eppo.int</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#to check if the db file exist in the directory (default working directory)

eppo_database_check(filepath = getwd())

#to download EPPO SQLite database into directory (default working directory).
#If you are Windows user, after download finishes you will need to unzip file
#manualy.

eppo_database_download(filepath = getwd())

#prior to use functions that check pest names in SQLite database,
#you need to set up connection to SQLite database. Doing so is
#straightforward with function below (once per sesion):

eppo_connection &lt;- eppo_database_connect(filepath = getwd(),
                                         filename = "eppocodes.sqlite")

## End(Not run)
</code></pre>

<hr>
<h2 id='eppo_names_tables'>EPPO Data Services SQLite Database search tools</h2><span id='topic+eppo_names_tables'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a>
<p><code>eppo_names_table</code> checks if string (names or parts of the names)
provided by user match any name in the EPPO database. If strings match any
name in database, data frame with all names matching codeid, as well as
preferred (binary), language and EPPOcode is returned.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eppo_names_tables_+3A_names_vector">names_vector</code></td>
<td>
<p>A vector with organism or viruses names
(or part of the names) to be checked for existence in EPPO SQLite Database.</p>
</td></tr>
<tr><td><code id="eppo_names_tables_+3A_sqlconnection">sqlConnection</code></td>
<td>
<p>connection to SQLite EPPO Database. By default NULL;
function will automatically connect to database with default credentials.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Check if provided names are present in EPPO SQLite Database. Creates
list which contains: data frame with matching names in database and their
codeids, character vector of names from <code>names_vector</code> which do not
match any entry in database, data frame with preferred names and their
codeids, and data frame containing all names matching codeids of preferred
names. Last data frame contains also column with preferred (binary),
codelang (two letter character with language code), and EPPOcode.
</p>


<h3>Using with other functions</h3>

<p>Output of the function might be passed to functions:
</p>

<ul>
<li> <p><code>eppo_tabletools_names</code>
</p>
</li>
<li> <p><code>eppo_tabletools_cat</code>
</p>
</li>
<li> <p><code>eppo_tabletools_hosts</code>
</p>
</li>
<li> <p><code>eppo_tabletools_distribution</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  ##This code needs SQLite dabatase in working directory
  test_names &lt;- c("Xylella", "dog", "leafhopper")
  test_names_table &lt;- eppo_names_table(test_names)

## End(Not run)
</code></pre>

<hr>
<h2 id='eppo_table_full'>EPPO Data Services information table</h2><span id='topic+eppo_table_full'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a>
<p><code>eppo_table_full</code> creates table in human friendly format with data on
pest preferred name, synonyms and common names, hosts, categorization,
taxonomy and its distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eppo_table_full(names_vector, sqlConnection, token)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eppo_table_full_+3A_names_vector">names_vector</code></td>
<td>
<p>A vector with organism names (or part of the names) to be
checked for existence in EPPO SQLite Database.</p>
</td></tr>
<tr><td><code id="eppo_table_full_+3A_sqlconnection">sqlConnection</code></td>
<td>
<p>connection to SQLite EPPO Database. By default NULL;
function will automatically connect to database with default credentials.</p>
</td></tr>
<tr><td><code id="eppo_table_full_+3A_token">token</code></td>
<td>
<p>An object containing EPPO API token created via
<a href="#topic+create_eppo_token">create_eppo_token</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Wraps results of function from <code>eppo_tabletools</code>, namely:
<a href="#topic+eppo_tabletools_names">eppo_tabletools_names</a>, <a href="#topic+eppo_tabletools_hosts">eppo_tabletools_hosts</a>,
<a href="#topic+eppo_tabletools_cat">eppo_tabletools_cat</a>, <a href="#topic+eppo_tabletools_taxo">eppo_tabletools_taxo</a>, and
<a href="#topic+eppo_tabletools_distri">eppo_tabletools_distri</a> into one compact, human readable table.
</p>

<hr>
<h2 id='eppo_tabletools'>EPPO table manipulation tools</h2><span id='topic+eppo_tabletools'></span><span id='topic+eppo_tabletools_names'></span><span id='topic+eppo_tabletools_hosts'></span><span id='topic+eppo_tabletools_cat'></span><span id='topic+eppo_tabletools_taxo'></span><span id='topic+eppo_tabletools_distri'></span><span id='topic+eppo_tabletools_pests'></span>

<h3>Description</h3>

<a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a>
<p><code>eppo_tabletools_names</code> creates tables with names &ndash; preferred, common
and synonyms &ndash; of pests. It is particularly useful for creating whole table
with <a href="#topic+eppo_table_full">eppo_table_full</a>, otherwise it might be more informative to use
<a href="#topic+eppo_names_tables">eppo_names_tables</a> which provides additional information for your
query.
<code>eppo_tabletools_hosts</code> creates tables with hosts of pests.
<code>eppo_tabletools_cat</code> creates tables with categorization of pests.
<code>eppo_tabletools_taxo</code> creates tables with taxonomy of pests/hosts.
<code>eppo_tabletools_distri</code> creates tables with distribution of pests.
<code>eppo_tabletools_pests</code> creates table with pests of host.
All functions return both long table and compact, human friendly table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eppo_tabletools_names(names_tables)

eppo_tabletools_hosts(
  names_tables = NULL,
  token,
  raw_eppocodes = NULL,
  use_raw_codes = FALSE
)

eppo_tabletools_cat(
  names_tables = NULL,
  token,
  raw_eppocodes = NULL,
  use_raw_codes = FALSE
)

eppo_tabletools_taxo(
  names_tables = NULL,
  token,
  raw_eppocodes = NULL,
  use_raw_codes = FALSE
)

eppo_tabletools_distri(
  names_tables = NULL,
  raw_eppocodes = NULL,
  use_raw_codes = FALSE
)

eppo_tabletools_pests(
  names_tables = NULL,
  token,
  raw_eppocodes = NULL,
  use_raw_codes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eppo_tabletools_+3A_names_tables">names_tables</code></td>
<td>
<p>A list of tables created via <code><a href="#topic+eppo_names_tables">eppo_names_tables()</a></code>.</p>
</td></tr>
<tr><td><code id="eppo_tabletools_+3A_token">token</code></td>
<td>
<p>An object containing EPPO API token created via
<code><a href="#topic+create_eppo_token">create_eppo_token()</a></code>.</p>
</td></tr>
<tr><td><code id="eppo_tabletools_+3A_raw_eppocodes">raw_eppocodes</code></td>
<td>
<p>A character vector of eppocodes. Use with caution,
and ONLY when sure that provided eppocodes are correct.</p>
</td></tr>
<tr><td><code id="eppo_tabletools_+3A_use_raw_codes">use_raw_codes</code></td>
<td>
<p>logical. Default FALSE. Set TRUE if you want to provide
eppocodes directly.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing two data frames. First is in a long format, and each
row contains synonyms and names in other languages in respect to preferred
names. The second data frame contains coerced synonyms and other names to
single cell for each preferred name.
</p>


<h3>See Also</h3>

<p><em>EPPO Data services</em> <a href="https://data.eppo.int/">https://data.eppo.int/</a> and
<em>EPPO Global Database</em> <a href="https://gd.eppo.int/">https://gd.eppo.int/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 ## the code below requires SQLite DB in the working directory
 ## which can be downloaded with eppo_database_download function
 test_names &lt;- eppo_names_tables(c("Xylella", "Poacea"))
 # get data on naming
 eppo_tabletools_names(test_names)

 ## below functions connect to EPPO Global Database or EPPO Global Services
 ## they need connection to internet.

 # get data on distribution
 eppo_tabletools_distri(test_names)
 # you can also get data using eppocodes directly
 eppo_tabletools_distri(raw_eppocodes = c("XYLEFA", "1GRAF"),
                        use_raw_codes = TRUE)

 ## below functions, beside internet connection require also valid token that
 ## can be obtained after free of charge registration at EPPO Data Services

 # first create token variable:
 create_eppo_token("paste_your_token_here")

 # then use result of eppo_names_tables or raw eppocodes to query REST API
 # get data on hosts
 eppo_tabletools_hosts(test_names, eppo_token)
 eppo_tabletools_hosts(token = eppo_token,
                       raw_eppocodes = c("XYLEFA", "1GRAF"),
                       use_raw_codes = TRUE)

 # get data on categorization
 eppo_tabletools_cat(test_names, eppo_token)
 eppo_tabletools_cat(token = eppo_token,
                       raw_eppocodes = c("XYLEFA", "1GRAF"),
                       use_raw_codes = TRUE)

 # get data on taxonomy
 eppo_tabletools_taxo(test_names, eppo_token)
 eppo_tabletools_taxo(token = eppo_token,
                       raw_eppocodes = c("XYLEFA", "1GRAF"),
                       use_raw_codes = TRUE)

 # get data on pests
 eppo_tabletools_pests(test_names, eppo_token)
 eppo_tabletools_pests(token = eppo_token,
                       raw_eppocodes = c("XYLEFA", "1GRAF"),
                       use_raw_codes = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='pestr'>pestr: A package for retrieving data from
EPPO Data Services <a href="https://data.eppo.int/">https://data.eppo.int/</a></h2><span id='topic+pestr'></span>

<h3>Description</h3>

<p>The pestr package provides function for downloading SQLite EPPO database,
searching for pest names in SQLite database, and retrieving all necessary
data from EPPO Data Services API for selected pest names.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
