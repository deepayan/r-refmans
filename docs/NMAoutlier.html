<!DOCTYPE html><html lang="en"><head><title>Help for package NMAoutlier</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NMAoutlier}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#NMAoutlier-package'><p>NMAoutlier: Brief overview of measures and methodologies for</p>
detection of outlying and influential studies in network
meta-analysis.</a></li>
<li><a href='#fwdplot'><p>Forward plot(s) to monitor selected statistic(s)/method(s)</p></a></li>
<li><a href='#fwdplotest'><p>Forward plots of summary treatment estimates</p></a></li>
<li><a href='#Gupta2013'><p>Network meta-analysis comparing interventions for actinic keratosis</p></a></li>
<li><a href='#InitialSubset'><p>InitialSubset</p></a></li>
<li><a href='#measplot'><p>Plot(s) to monitor selected outlier and influential measure(s).</p></a></li>
<li><a href='#mult'><p>mult</p></a></li>
<li><a href='#Multi'><p>Residuals and log-likelihood contributions in multi-arm trials</p></a></li>
<li><a href='#netmet'><p>Network meta-analysis for a set of studies</p></a></li>
<li><a href='#nma'><p>Network meta-analysis for the whole dataset.</p></a></li>
<li><a href='#NMAoutlier'><p>Forward Search algorithm in network meta-analysis</p></a></li>
<li><a href='#NMAoutlier.measures'><p>Outlier and influential detection measures in network meta-analysis.</p></a></li>
<li><a href='#plotesthelper'><p>Helper function to create the plots of summary estimates and their intervals for FS algorithm.</p></a></li>
<li><a href='#plothelper'><p>Helper function to create the plots for FS algorithm.</p></a></li>
<li><a href='#Qnetplot'><p>Q-Q plot for network meta-analysis (Q-Q netplot).</p></a></li>
<li><a href='#res_multi'><p>Statistical measure in multi-arm studies</p></a></li>
<li><a href='#Schoenberg2013'><p>Network meta-analysis comparing the effects after Laparoscopic Heller myotomy.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Detecting Outliers in Network Meta-Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-01-21</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>netmeta (&ge; 0.9-7), meta (&ge; 8.0-1), stats (&ge; 3.4.3),
parallel (&ge; 3.4.1), MASS (&ge; 7.3-47), reshape2 (&ge; 1.4.3),
ggplot2 (&ge; 3.0.0), gridExtra (&ge; 2.3)</td>
</tr>
<tr>
<td>Author:</td>
<td>Maria Petropoulou <a href="https://orcid.org/0000-0002-7147-3644"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Guido Schwarzer <a href="https://orcid.org/0000-0001-6214-9087"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Agapios Panos [aut],
  Dimitris Mavridis <a href="https://orcid.org/0000-0003-1041-4592"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/petropouloumaria/NMAoutlier">https://github.com/petropouloumaria/NMAoutlier</a></td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions providing several outlier (i.e., studies with extreme findings) and influential detection measures and methodologies in network meta-analysis :
               - simple outlier and influential detection measures
               - outlier and influential detection measures by considering study deletion (shift the mean)
               - plots for outlier and influential detection measures
	       - Q-Q plot for network meta-analysis
               - Forward Search algorithm in network meta-analysis. 
               - forward plots to monitor statistics in each step of the forward search algorithm
               - forward plots for summary estimates and their confidence intervals in each step of forward search algorithm.   </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-10 11:05:59 UTC; petropou_admin</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-10 12:50:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='NMAoutlier-package'>NMAoutlier: Brief overview of measures and methodologies for
detection of outlying and influential studies in network
meta-analysis.</h2><span id='topic+NMAoutlier-package'></span>

<h3>Description</h3>

<p>R package <b>NMAoutlier</b> provides methods and tools to detect
outlier and influential studies in network meta-analysis.
</p>


<h3>Details</h3>

<p>R package <b>NMAoutlier</b> is a tool to detect outliers (studies
with extreme results) and influential studies in network
meta-analysis (Petropoulou, 2020). The package can calculate:
simple outlier and influential measures; outlier and influential
measures considered study deletion (shift the mean); the outlier
detection methodology with Forward Search (FS) algorithm
(Petropoulou et al., 2021). All proposed outlier and influential
detection methods were fitted the frequentist NMA model by graph
theory introduced by Rücker (2012) and implemented inR package
<b>netmeta</b>.
</p>
<p>The <b>NMAoutlier</b> package implements the following methods
described in Petropoulou (2020).
</p>

<ul>
<li> <p><b>Simple outlier and influential detection measures</b>
(function <code><a href="#topic+NMAoutlier.measures">NMAoutlier.measures</a></code>):
</p>

<ol>
<li><p> raw residuals,
</p>
</li>
<li><p> standardized residuals,
</p>
</li>
<li><p> studentized residuals,
</p>
</li>
<li><p> Mahalanobis distance,
</p>
</li>
<li><p> leverage;
</p>
</li></ol>

</li>
<li> <p><b>Outlier and influential detection measures considered
study deletion (shift the mean)</b> (function
<code><a href="#topic+NMAoutlier.measures">NMAoutlier.measures</a></code>):
</p>

<ol>
<li><p> raw deleted residuals,
</p>
</li>
<li><p> standardized deleted residuals,
</p>
</li>
<li><p> studentized deleted residuals,
</p>
</li>
<li><p> Cook's distance,
</p>
</li>
<li><p> COVRATIO,
</p>
</li>
<li><p> weight leave one out,
</p>
</li>
<li><p> leverage leave one out,
</p>
</li>
<li><p> heterogeneity leave one out,
</p>
</li>
<li><p> R heterogeneity,
</p>
</li>
<li><p> R Qtotal,
</p>
</li>
<li><p> R Qheterogeneity,
</p>
</li>
<li><p> R Qinconsistency,
</p>
</li>
<li><p> DFBETAS;
</p>
</li></ol>

</li>
<li><p> Plots of the several outlier and influential detection
(simple and deletion) measures (function
(<code><a href="#topic+measplot">measplot</a></code>));
</p>
</li>
<li><p> Q-Q plot for network meta-analysis (function
<code><a href="#topic+Qnetplot">Qnetplot</a></code>);
</p>
</li>
<li> <p><b>Forward Search algorithm in network meta-analysis</b>
(function (<code><a href="#topic+NMAoutlier">NMAoutlier</a></code>)) based on Petropoulou et
al. (2021);
</p>
</li>
<li><p> forward plots (<code><a href="#topic+fwdplot">fwdplot</a></code>) with monitoring
statistics in each step of the FS algorithm:
</p>

<ol>
<li><p> P-scores (Rücker &amp; Schwarzer, 2015),
</p>
</li>
<li><p> z-values for difference of direct and indirect evidence
with back-calculation method (König et al., 2013; Dias et al.,
2010),
</p>
</li>
<li><p> standardized residuals,
</p>
</li>
<li><p> heterogeneity variance estimator,
</p>
</li>
<li><p> Cook's distance,
</p>
</li>
<li><p> ratio of variances,
</p>
</li>
<li><p> Q statistics (Krahn et al., 2013);
</p>
</li></ol>

</li>
<li><p> forward plots (<code><a href="#topic+fwdplotest">fwdplotest</a></code>) for summary
treatment estimates in each iteration of the FS algorithm
(Petropoulou et al., 2021).
</p>
</li></ul>

<p>Type <code>help(package = "NMAoutlier")</code> for a listing of R functions
available in <b>NMAoutlier</b>.
</p>
<p>Type <code>citation("NMAoutlier")</code> on how to cite <b>NMAoutlier</b>
in publications.
</p>
<p>To report problems and bugs, please send an email to Dr. Maria
Petropoulou <a href="mailto:maria.petropoulou@uniklinik-freiburg.de">maria.petropoulou@uniklinik-freiburg.de</a>.
</p>
<p>The development version of <b>NMAoutlier</b> is available on GitHub
<a href="https://github.com/petropouloumaria/NMAoutlier">https://github.com/petropouloumaria/NMAoutlier</a>.
</p>


<h3>Author(s)</h3>

<p>Petropoulou Maria <a href="mailto:maria.petropoulou@uniklinik-freiburg.de">maria.petropoulou@uniklinik-freiburg.de</a>.
</p>


<h3>References</h3>

<p>Dias S, Welton NJ, Caldwell DM, Ades AE (2010):
Checking consistency in mixed treatment comparison meta-analysis.
<em>Statistics in Medicine</em>,
<b>29</b>, 932&ndash;44
</p>
<p>König J, Krahn U, Binder H (2013):
Visualizing the flow of evidence in network meta-analysis and
characterizing mixed treatment comparisons.
<em>Statistics in Medicine</em>,
<b>32</b>, 5414&ndash;29
</p>
<p>Krahn U, Binder H, König J (2013):
A graphical tool for locating inconsistency in network meta-analyses.
<em>BMC Medical Research Methodology</em>,
<b>13</b>, 35
</p>
<p>Petropoulou M (2020):
Exploring methodological challenges in network meta-analysis models
and developing methodology for outlier detection.
<em>PhD dissertation</em>
</p>
<p>Petropoulou M, Salanti G, Rücker G, Schwarzer G, Moustaki I,
Mavridis D (2021):
A forward search algorithm for detecting extreme study effects in
network meta-analysis.
<em>Statistics in Medicine</em>
</p>
<p>Rücker G (2012):
Network meta-analysis, electrical networks and graph theory.
<em>Research Synthesis Methods</em>,
<b>3</b>, 312&ndash;24
</p>
<p>Rücker G, Schwarzer G (2015):
Ranking treatments in frequentist network meta-analysis works
without resampling methods.
<em>BMC Medical Research Methodology</em>,
<b>15</b>, 58
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/petropouloumaria/NMAoutlier">https://github.com/petropouloumaria/NMAoutlier</a>
</p>
</li></ul>


<hr>
<h2 id='fwdplot'>Forward plot(s) to monitor selected statistic(s)/method(s)</h2><span id='topic+fwdplot'></span>

<h3>Description</h3>

<p>This function generates forward plot(s) to monitor selected
statistic(s) and/or method(s). The function creates a plot of the
selected monitoring measure throughout the iterations of the Forward Search
algorithm. Candidate statistics to be monitored can be: P-score;
z-values by back-calculation method to derive indirect estimates
from direct pairwise comparisons and network estimates;
standardized residuals; heterogeneity variance estimator; Cook's
distance; ratio of variances; Q statistics (Overall heterogeneity /
inconsistency Q statistic (<code>Q</code>), overall heterogeneity Q
statistic (<code>Q</code>), between-designs Q statistic (<code>Q</code>), based
on a random effects design-by-treatment interaction model).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fwdplot(x, stat, select.st = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fwdplot_+3A_x">x</code></td>
<td>
<p>an object of class NMAoutlier (mandatory).</p>
</td></tr>
<tr><td><code id="fwdplot_+3A_stat">stat</code></td>
<td>
<p>statistical measure to be monitored in forward plot(s)
(mandatory), available choices are: &quot;pscore&quot;, &quot;nsplit&quot;, &quot;estand&quot;,
&quot;heterog&quot;, &quot;cook&quot;, &quot;ratio&quot;, or &quot;Q&quot; (can be abbreviated).</p>
</td></tr>
<tr><td><code id="fwdplot_+3A_select.st">select.st</code></td>
<td>
<p>selected statistic (pscore/nsplit/estand) for
selected treatment(s)/comparison(s)/study</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of statistical measures for each iteration of search.
Vertical axis provides the FS iterations. Horizontal axis
provides the values of the monitoring statistical measure.
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("netmeta")
data(smokingcessation)
smokingcessation$id &lt;- 1:nrow(smokingcessation)

study912 &lt;- subset(smokingcessation, id %in% 9:12)
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = study912, sm = "OR")

# Forward search algorithm
#
FSresult &lt;- NMAoutlier(p1, P = 1, small.values = "bad", n_cores = 2)

# forward plot for Cook's distance
fwdplot(FSresult, "cook")

data(smokingcessation)

# Transform data from arm-based to contrast-based format
# Use 'sm' argument for odds ratios.
# Use function pairwise from netmeta package

p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = smokingcessation, sm = "OR")

# Forward Search algorithm
FSresult &lt;- NMAoutlier(p1, small.values = "bad")
FSresult

# forward plot for Cook's distance
fwdplot(FSresult, "cook")

# forward plot for ratio of variances
fwdplot(FSresult, "ratio")

# forward plot for heterogeneity estimator
fwdplot(FSresult, "heterog")

# forward plot for Q statistics
fwdplot(FSresult, "Q")

# forward plot for P-scores
fwdplot(FSresult, "pscore")

# forward plot monitoring P-scores for treatment A
fwdplot(FSresult,"pscore", "A")

# forward plot for z-values of disagreement of direct and indirect evidence
fwdplot(FSresult, "nsplit")

# forward plot for z-values of disagreement of direct and indirect evidence
# monitoring treatment comparison A versus B
fwdplot(FSresult, "nsplit", "A:B")

# forward plot for standardized residual for study 4
fwdplot(FSresult, "estand", 4)

## End(Not run)

</code></pre>

<hr>
<h2 id='fwdplotest'>Forward plots of summary treatment estimates</h2><span id='topic+fwdplotest'></span>

<h3>Description</h3>

<p>Forward plots of summary treatment estimates with their 95 percent
confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fwdplotest(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fwdplotest_+3A_x">x</code></td>
<td>
<p>object of class NMAoutlier (mandatory).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of summary treatment estimates and their confidence intervals
for each FS iteration. Vertical axis provides the FS
iterations. Horizontal axis provides summary treatment estimates.
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("netmeta")
data(smokingcessation)
smokingcessation$id &lt;- 1:nrow(smokingcessation)

study912 &lt;- subset(smokingcessation, id %in% 9:12)
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = study912, sm = "OR")

# Forward search algorithm
#
FSresult &lt;- NMAoutlier(p1, P = 1, small.values = "bad", n_cores = 2)

# Forward plot for summary treatment estimates and their confidence
# intervals
#
fwdplotest(FSresult)

data(smokingcessation)

# Transform data from arm-based format to contrast-based format
# We use 'sm' argument for odds ratios.
# We use function pairwise from netmeta package
#
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = smokingcessation, sm = "OR")

# forward search algorithm
FSresult &lt;- NMAoutlier(p1, small.values = "bad")

# Forward plot for summary treatment estimates
# and their confidence intervals
fwdplotest(FSresult)

## End(Not run)

</code></pre>

<hr>
<h2 id='Gupta2013'>Network meta-analysis comparing interventions for actinic keratosis</h2><span id='topic+Gupta2013'></span>

<h3>Description</h3>

<p>Network meta-analysis dataset for comparing interventions for actinic keratosis.
</p>


<h3>Format</h3>

<p>A data frame in contrast format with the following columns:
</p>

<table>
<tr>
 <td style="text-align: right;">
<b><em>logOR</em></b></td><td style="text-align: left;"> log odds ratio </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>selogOR</em></b></td><td style="text-align: left;"> standard error of log odds ratio </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>id</em></b></td><td style="text-align: left;"> study ID </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>t1</em></b></td><td style="text-align: left;"> first treatment </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>t2</em></b></td><td style="text-align: left;"> second treatment
</td>
</tr>

</table>



<h3>Details</h3>

<p>The dataset compares the relative effects of nine interventions:
</p>

<ul>
<li><p> placebo / vehicle (including placebo-PDT) (treatment 1),
</p>
</li>
<li><p> diclofenac 3 percent in 2.5 percent hyaluronic acid (DCF/HA)
(treatment 2),
</p>
</li>
<li><p> 5-fluorouracil (5-FU) 0.5 percent (treatment 3),
</p>
</li>
<li><p> imiquimod (IMI) 5 percent (treatment 4),
</p>
</li>
<li><p> methyl aminolaevulinate (MAL)-PDT (treatment 5),
</p>
</li>
<li><p> 5-aminolaevulinic acid (ALA)-photodynamic therapy (PDT)
(treatment 6),
</p>
</li>
<li><p> 5-fluorouracil (5-FU) 5.0 percent (treatment 7),
</p>
</li>
<li><p> cryotherapy (treatment 8),
</p>
</li>
<li><p> ingenol mebutate (IMB) 0.015-0.05 percent (treatment 9).
</p>
</li></ul>

<p>The outcome is the number of individuals with participant complete
clearance or equivalent efficacy. These data are in contrast
format with effect size the odds ratio (OR).
The arm-level data were used in Gupta and Paquet (2013).
</p>


<h3>Source</h3>

<p>Gupta AK, Paquet M (2013):
Network meta-analysis of the outcome participant complete
clearance in nonimmunosuppressed participants of eight
interventions for actinic keratosis: a follow-up on a Cochrane
review.
<em>British Journal of Dermatology</em>,
<b>169</b>, 250&ndash;9
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Gupta2013)
# Conduct forward search algorithm for the network of actinic keratosis
#
FSresult &lt;- NMAoutlier(logOR, selogOR, t1, t2, id, data = Gupta2013, n_cores = 2)

# Plovide the forward plot for z-values from difference of direct and
# indirect evidence
#
fwdplot(FSresult, "nsplit")

# Provide forward plot for Q statistic
#
fwdplot(FSresult, "Q")

</code></pre>

<hr>
<h2 id='InitialSubset'>InitialSubset</h2><span id='topic+InitialSubset'></span>

<h3>Description</h3>

<p>Choose an initial clean (i.e. likely outlier-free) subset of
studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>InitialSubset(
  TE,
  seTE,
  treat1,
  treat2,
  studlab,
  crit1,
  studies,
  P,
  reference,
  t1.label,
  t2.label,
  n_cores,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="InitialSubset_+3A_te">TE</code></td>
<td>
<p>Estimate of treatment effect, i.e. difference between
first and second treatment (e.g. log odds ratio, mean difference,
or log hazard ratio).</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_sete">seTE</code></td>
<td>
<p>Standard error of treatment estimate.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_treat1">treat1</code></td>
<td>
<p>Label/Number for first treatment.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_treat2">treat2</code></td>
<td>
<p>Label/Number for second treatment.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are
included).</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_crit1">crit1</code></td>
<td>
<p>A character string indicating the criterion to be used
for selecting the initial subset, this criterion could be the
minimum of median absolute residuals (&quot;R&quot;) or the maximum of
median absolute likelihood contributions (&quot;L&quot;). Default value is
&quot;R&quot;.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_studies">studies</code></td>
<td>
<p>An optional vector specifying a subset of studies to
be used.  The default value is the number of studies.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_p">P</code></td>
<td>
<p>An optional vector specifying the number of samples for
the choice of the initial subset.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_reference">reference</code></td>
<td>
<p>Reference treatment group.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_t1.label">t1.label</code></td>
<td>
<p>numbers to treatment 1 IDs.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_t2.label">t2.label</code></td>
<td>
<p>numbers to treatment 2 IDs.</p>
</td></tr>
<tr><td><code id="InitialSubset_+3A_n_cores">n_cores</code></td>
<td>
<p>the number of cores that the process is running
using the parallel.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An initial clean subset of studies.
</p>

<hr>
<h2 id='measplot'>Plot(s) to monitor selected outlier and influential measure(s).</h2><span id='topic+measplot'></span>

<h3>Description</h3>

<p>This function generates plot(s) of the selected outlier detection
measure(s) for each study included in the network. Candidate
statistics to be monitored are: Standardized residual; Studentized
residual; Mahalanobis distance and leverage.
</p>
<p>The function also generates plot(s) of the selected outlier
detection measure(s) considering a deletion of each study included
in the network (Shift the mean measures).  Candidate statistics to
be monitored are: Standardized deleted residual; Studentized
deleted residual; Cook distance between the treatment estimates for
study j and treatment estimates when study j is removed; Ratio of
determinants of variance-covariance matrix of treatment estimates
for study j to treatment estimates when study j is removed; weight
leave one out;leverage leave one out; heterogeneity estimator leave
one out; R statistic for heterogeneity; R statistic for Q
(<code>Qtotal</code>), R statistic for heterogeneity Q (<code>Qhet</code>), R
statistic for Qinconsistency (<code>Qinc</code>), DFbetas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>measplot(object, stat, measure = "simple")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="measplot_+3A_object">object</code></td>
<td>
<p>an object of class NMAoutlier.measures (mandatory).</p>
</td></tr>
<tr><td><code id="measplot_+3A_stat">stat</code></td>
<td>
<p>selected statistical outlier and influential detection
measure (mandatory), For simply outlier and influential measures
available choices are: (&quot;estand&quot;/ &quot;estud&quot;/ &quot;mah&quot;/ &quot;leverage&quot;).
For outlier and influential deletion measures available choices
are: (&quot;estand.deleted&quot;, &quot;estud.deleted&quot;, &quot;leverage.leaveoneout&quot;,
&quot;weight.leaveoneout&quot;, &quot;heterog.leaveoneout&quot;, &quot;covratio&quot;, &quot;cook&quot;,
&quot;rheterogeneity&quot;, &quot;restimates&quot;, &quot;rqhet&quot;, &quot;rqinc&quot;, &quot;rqtotal&quot;,
&quot;dfbetas&quot;)</p>
</td></tr>
<tr><td><code id="measplot_+3A_measure">measure</code></td>
<td>
<p>Outlier and influential detection measures. Simple
measures (default: &quot;simple&quot;) and measures considered study
deletion (measure = &quot;deletion&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of outlier and influential (simple or/and deletion) detection
measures for each study included in the network.  Vertical axis
provides each study included in the network (or the study deleted
for outlier deletion measures). Horizontal axis provides a
monitoring outlier and influential detection measure.
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("netmeta")
data(smokingcessation)
smokingcessation$id &lt;- 1:nrow(smokingcessation)

study912 &lt;- subset(smokingcessation, id %in% 9:12)
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = study912, sm = "OR")

# Outlier and influential detection measures for each study in the
# network
measures &lt;- NMAoutlier.measures(p1)

# plot of standardized residuals for each study
measplot(measures, "estand")

# plot of Mahalanobis distance values for each study
measplot(measures, "mah")

# plot of leverage values for each study
measplot(measures, "leverage")

## Not run: 
# Outlier detection measures considered deletion each time of an
# included study
deletion &lt;- NMAoutlier.measures(p1, measure = "deletion")

# plot for R statistic for heterogeneity estimator
measplot(deletion, "rheterogeneity", measure = "deletion")

# plot for R statistic for Qinconsistency
measplot(deletion, "rqinc", measure = "deletion")

# plot of COVRATIO values when considering deletion for each study
measplot(deletion, "covratio", measure = "deletion")

## End(Not run)

</code></pre>

<hr>
<h2 id='mult'>mult</h2><span id='topic+mult'></span>

<h3>Description</h3>

<p>Computes the arithmetic mean of standardized residuals in case of multi-arm trials.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mult(studlab, ind.bs, standres, model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mult_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are included).</p>
</td></tr>
<tr><td><code id="mult_+3A_ind.bs">ind.bs</code></td>
<td>
<p>indices of basic set.</p>
</td></tr>
<tr><td><code id="mult_+3A_standres">standres</code></td>
<td>
<p>standardized residuals of each pairwise comparison.</p>
</td></tr>
<tr><td><code id="mult_+3A_model">model</code></td>
<td>
<p>model assigned from netmeta</p>
</td></tr>
</table>


<h3>Value</h3>

<p>standardized residuals and arithmetic mean of standardized residuals in case of multi-arm trials.
</p>

<hr>
<h2 id='Multi'>Residuals and log-likelihood contributions in multi-arm trials</h2><span id='topic+Multi'></span>

<h3>Description</h3>

<p>Computes the arithmetic mean of standardized and log-likelihood contributions in the case of multi-arm trials.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Multi(st.lab, ei, wr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Multi_+3A_st.lab">st.lab</code></td>
<td>
<p>studylab of set of studies</p>
</td></tr>
<tr><td><code id="Multi_+3A_ei">ei</code></td>
<td>
<p>standardized residuals for each comparison from a set of studies</p>
</td></tr>
<tr><td><code id="Multi_+3A_wr">wr</code></td>
<td>
<p>weigths of random effects model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the arithmetic mean of standardized and log-likelihood contributions.
</p>

<hr>
<h2 id='netmet'>Network meta-analysis for a set of studies</h2><span id='topic+netmet'></span>

<h3>Description</h3>

<p>Conduct network meta-analysis (Rücker model) for a set of studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>netmet(
  TE,
  seTE,
  treat1,
  treat2,
  studlab,
  ind.bs,
  reference,
  small.values,
  names.treat,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="netmet_+3A_te">TE</code></td>
<td>
<p>Estimate of treatment effect, i.e. difference between
first and second treatment (e.g. log odds ratio, mean difference,
or log hazard ratio).</p>
</td></tr>
<tr><td><code id="netmet_+3A_sete">seTE</code></td>
<td>
<p>Standard error of treatment estimate.</p>
</td></tr>
<tr><td><code id="netmet_+3A_treat1">treat1</code></td>
<td>
<p>Label/Number for first treatment.</p>
</td></tr>
<tr><td><code id="netmet_+3A_treat2">treat2</code></td>
<td>
<p>Label/Number for second treatment.</p>
</td></tr>
<tr><td><code id="netmet_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are
included).</p>
</td></tr>
<tr><td><code id="netmet_+3A_ind.bs">ind.bs</code></td>
<td>
<p>indices of studies in basic set</p>
</td></tr>
<tr><td><code id="netmet_+3A_reference">reference</code></td>
<td>
<p>Reference treatment group</p>
</td></tr>
<tr><td><code id="netmet_+3A_small.values">small.values</code></td>
<td>
<p>small.values for P-score. A character string
indicating if small values are considered bad (&quot;bad&quot;) or good
(&quot;good&quot;).</p>
</td></tr>
<tr><td><code id="netmet_+3A_names.treat">names.treat</code></td>
<td>
<p>names of treatments</p>
</td></tr>
<tr><td><code id="netmet_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to
<code><a href="netmeta.html#topic+netmeta">netmeta</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>results and statistics from network meta-analysis.
</p>

<hr>
<h2 id='nma'>Network meta-analysis for the whole dataset.</h2><span id='topic+nma'></span>

<h3>Description</h3>

<p>Conduct network meta-analysis (Rücker model) for the whole dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nma(TE, seTE, treat1, treat2, studlab, reference, names.treat, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nma_+3A_te">TE</code></td>
<td>
<p>Estimate of treatment effect, i.e. difference between
first and second treatment (e.g. log odds ratio, mean difference,
or log hazard ratio).</p>
</td></tr>
<tr><td><code id="nma_+3A_sete">seTE</code></td>
<td>
<p>Standard error of treatment estimate.</p>
</td></tr>
<tr><td><code id="nma_+3A_treat1">treat1</code></td>
<td>
<p>Label/Number for first treatment.</p>
</td></tr>
<tr><td><code id="nma_+3A_treat2">treat2</code></td>
<td>
<p>Label/Number for second treatment.</p>
</td></tr>
<tr><td><code id="nma_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are
included).</p>
</td></tr>
<tr><td><code id="nma_+3A_reference">reference</code></td>
<td>
<p>Reference treatment group</p>
</td></tr>
<tr><td><code id="nma_+3A_names.treat">names.treat</code></td>
<td>
<p>names of treatments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Within-study standard error, design matrix, summary estimate,
heterogeneity from network meta-analysis.
</p>

<hr>
<h2 id='NMAoutlier'>Forward Search algorithm in network meta-analysis</h2><span id='topic+NMAoutlier'></span>

<h3>Description</h3>

<p>This function employs the Forward Search algorithm to detect
outliers and influential studies fitted in network meta-analysis
model from graph-theory.  This is an outlying diagnostic tool to
detect outliers and studies that are potential sources for
heterogeneity and inconsistency in network meta-analysis.
</p>
<p>Monitoring measures during the search are:
</p>

<ul>
<li><p> outlier detection measures (standardized residuals, Cook's
distance, ratio of variance);
</p>
</li>
<li><p> ranking measures (P-scores);
</p>
</li>
<li><p> heterogeneity and inconsistency measures (Q statistics for
overall heterogeneity / inconsistency, inconsistency by
design-by-treatment interaction model, z-values for comparison
between direct and indirect evidence by back-calculation method).
</p>
</li></ul>

<p>A description of the outlier detection methodology can be found in
Petropoulou et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NMAoutlier(
  TE,
  seTE,
  treat1,
  treat2,
  studlab,
  data = NULL,
  crit1 = "R",
  crit2 = "R",
  studies = NULL,
  P = 100,
  sm,
  Isub = NULL,
  reference = "",
  small.values = "good",
  n_cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NMAoutlier_+3A_te">TE</code></td>
<td>
<p>Estimate of treatment effect, i.e. difference between
first and second treatment (e.g. log odds ratio, mean difference,
or log hazard ratio). This can also be a pairwise object
(i.e. the result of pairwise function of netmeta package).  In
this case, the pairwise object should include the following: TE,
seTE, treat1, treat2, studlab</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_sete">seTE</code></td>
<td>
<p>Standard error of treatment estimate.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_treat1">treat1</code></td>
<td>
<p>Label/Number for first treatment.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_treat2">treat2</code></td>
<td>
<p>Label/Number for second treatment.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are
included).</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_data">data</code></td>
<td>
<p>A data frame containing the study information.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_crit1">crit1</code></td>
<td>
<p>A character string indicating the criterion to be used
for selecting the initial subset, this criterion may be the
minimum of median absolute residuals (&quot;R&quot;) or the maximum of
median absolute likelihood contributions (&quot;L&quot;). Default value is
&quot;R&quot;.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_crit2">crit2</code></td>
<td>
<p>A character string indicating the criterion to be used
for selecting the study entered from non-basic set to basic set,
this criterion may be the minimum of absolute residuals (&quot;R&quot;) or
the maximum of absolute likelihood contributions (&quot;L&quot;). Default
value is &quot;R&quot;.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_studies">studies</code></td>
<td>
<p>An optional vector specifying the number of the
initial subset of studies. The default value is the maximum of
the number of treatments and the 20 percent of the total number
of studies.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_p">P</code></td>
<td>
<p>An optional vector specifying the number of candidate
sample of studies (with length equal to <code>studies</code>) for the
choice of the initial subset. Default value is 100.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_sm">sm</code></td>
<td>
<p>A character string indicating underlying summary measure,
e.g., <code>"RD"</code>, <code>"RR"</code>, <code>"OR"</code>, <code>"ASD"</code>,
<code>"HR"</code>, <code>"MD"</code>, <code>"SMD"</code>, or <code>"ROM"</code>.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_isub">Isub</code></td>
<td>
<p>A vector for the studies to be included in the initial
subset (default: NULL, the initial subset not specified by the
user).</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_reference">reference</code></td>
<td>
<p>Reference treatment group.</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_small.values">small.values</code></td>
<td>
<p>A character string indicating if small values
are considered beneficial (option:&quot;good&quot;) or harmfull
(option:&quot;bad&quot;) on outcome.  This is requirement for p-scores
computation. The default value is considered benefial outcome
(&quot;good&quot;).</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_n_cores">n_cores</code></td>
<td>
<p>The number of cores that the process is running
using the parallel (default: NULL, the process is running using
all the available cores)</p>
</td></tr>
<tr><td><code id="NMAoutlier_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to
<code><a href="netmeta.html#topic+netmeta">netmeta</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FS algorithm for network meta-analysis model from graph theory is
described in Petropoulou et al. (2021).
</p>
<p>Let <em>n</em> be the number of treatments and let <em>m</em> be the
number of pairwise treatment comparisons.  If there are only
two-arm studies, <em>m</em> is equal to the number of studies. Let TE
and seTE be the vectors of observed effects and their standard
errors.  Comparisons belonging to multi-arm studies are identified
by identical study labels (argument <code>studlab</code>).
</p>
<p>The FS algorithm is an outlier diagnostic iterative procedure. FS
algorithm apart from three steps. It starts with a subset of
studies and it gradually adds studies until all studies entered.
After the search, statistical measures are monitored for sharp
changes.
</p>
<p>In more detail, the FS algorithm starts with an initial subset of
the dataset with size <em>l</em>. Let (argument <code>P</code>)
(eg. <em>P</em> = 100) a large number of candidate subset of studies
with size <em>l</em>. The candidate subset that optimize the
criterion (argument <code>crit1</code>) is taken as the initial subset
(considered ideally to be outlying-free).  Criterion (<code>crit1</code>)
to be used for selecting the initial subset, can be the minimum of
median absolute residuals <code>"R"</code> or the maximum of median
absolute likelihood contributions <code>"L"</code>. It is conventionally
refer this subset as basic set, whereas the remaining studies
constitute the non-basic set.
</p>
<p>The FS algorithm gradually adds studies from the non-basic to the
basic subset based on how close the former studies are to the
hypothesized model fit in the basic set.  A study from non-basic
set entered into the basic set if optimize the criterion (argument
<code>crit2</code>).  Criterion (<code>crit2</code>) for selecting the study
from non-basic to basic set may be the minimum of median absolute
residuals <code>"R"</code> or the maximum of median absolute likelihood
contributions <code>"L"</code>.  The algorithm order the studies
according to their closeness to the basic set by adding the study
that optimize the criterion from non-basic set to basic set.
</p>
<p>The process is repeated until all studies are entered into the
basic set.  The number of iterations of algorithm <em>index</em> is
equal to the total number of studies minus the number of studies
entered into the initial subset. Through the FS procedure,
parameter estimates (summary estmates, heterogeneity estimator) and
other statistics of interest (outlying measures, heterogeneity and
inconsistency measures, ranking measures) are monitored. In each
iteration, network meta-analysis model from graph theory (Rücker,
2012) is fitted (<code>netmeta</code> function) with R package
<b>netmeta</b>.
</p>
<p>Monitoring statistical measures for each FS iteration can be:
</p>
<p><b>Outlying detection measures:</b>
Standardized residuals (arithmetic mean in case of multi-arm
studies); Cook's statistic; Ratio of determinants of
variance-covariance matrix
</p>
<p><b>Ranking measures:</b>
P-scores for ranking of treatments (Rücker G &amp; Schwarzer G, 2015)
for each basic set with implementation of (<code>netrank</code> function)
from R package <b>netmeta</b>.
</p>
<p><b>Heterogeneity and inconsistency measures:</b>
Overall heterogeneity / inconsistency Q statistic (<code>Q</code>) This
is the design-based decomposition of Cochran Q as provided by Krahn
et al. (2013); Overall heterogeneity Q statistic (<code>Q</code>);
Between-designs Q statistic (<code>Q</code>), based on a random effects
model with square-root of between-study variance estimated embedded
in a full design-by-treatment interaction model.  Implementation
with (<code>decomp.design</code> function) from R package <b>netmeta</b>;
Z-values (Dias et al., 2010; König et al., 2013) for comparison
between direct and indirect evidence in
each iteration of forward search algorithm.  By monitoring
difference of direct and indirect evidence, potential sources of
consistency can be detected with the implementation of
(<code>netsplit</code> function) from R package <b>netmeta</b> for each
iteration of the search.
</p>


<h3>Value</h3>

<p>An object of class <code>NMAoutlier</code>; a list containing the
following components:
</p>
<table role = "presentation">
<tr><td><code>dat</code></td>
<td>
<p>Matrix containing the data <code>"TE"</code>, <code>"seTE"</code>, <code>"studlab"</code>, <code>"treat1"</code>, <code>"treat2"</code> as defined above.</p>
</td></tr>
<tr><td><code>length.initial</code></td>
<td>
<p>The number of studies that constitute the initial (outlying-clean) subset of studies.</p>
</td></tr>
<tr><td><code>index</code></td>
<td>
<p>The number of iterations of forward search algorithm.</p>
</td></tr>
<tr><td><code>basic</code></td>
<td>
<p>Studies entered into the basic set in each iteration of the search.
At the first iteration, basic set constitute the studies that are included in the basic-initial subset.
The number of studies in the first iteration is equal to length.initial.</p>
</td></tr>
<tr><td><code>taub</code></td>
<td>
<p>Heterogeneity estimator variance for basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>Qb</code></td>
<td>
<p>Overall heterogeneity - inconsistency Q statistic (<code>Q</code>) for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>Qhb</code></td>
<td>
<p>Overall heterogeneity Q statistic (<code>Q</code>) for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>Qib</code></td>
<td>
<p>Overall inconsistency Q statistic (<code>Q</code>) from design-by-treatment interaction model for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>estb</code></td>
<td>
<p>Summary estimates for each treatment for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>lb</code></td>
<td>
<p>Lower 95% confidence interval of summary estimates for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>ub</code></td>
<td>
<p>Upper 95% confidence interval of summary estimates for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>Ratio</code></td>
<td>
<p>Ratio of determinants (<code>COVRATIOj</code>) of variance-covariance matrix of treatment estimates at iteration j to that iteration at (j-1).</p>
</td></tr>
<tr><td><code>cook_d</code></td>
<td>
<p>Cook's statistic (<code>Cj</code>) at iteration j of forward search algorithm.</p>
</td></tr>
<tr><td><code>p.score</code></td>
<td>
<p>P-score for ranking each treatment for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>dif</code></td>
<td>
<p>Z-values for comparison between direct and indirect evidence for each iteration of forward search algorithm.
Based on back-calculation method to derive indirect estimates from direct pairwise comparisons and network estimates.</p>
</td></tr>
<tr><td><code>estand</code></td>
<td>
<p>Standardized residuals for each study for the basic set in each iteration of forward search algorithm.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>Function call</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>References</h3>

<p>Dias S, Welton NJ, Caldwell DM, Ades AE (2010):
Checking consistency in mixed treatment comparison meta-analysis.
<em>Statistics in Medicine</em>,
<b>29</b>, 932&ndash;44
</p>
<p>König J, Krahn U, Binder H (2013):
Visualizing the flow of evidence in network meta-analysis and
characterizing mixed treatment comparisons.
<em>Statistics in Medicine</em>,
<b>32</b>, 5414&ndash;29
</p>
<p>Krahn U, Binder H, König J (2013):
A graphical tool for locating inconsistency in network meta-analyses.
<em>BMC Medical Research Methodology</em>,
<b>13</b>, 35
</p>
<p>Petropoulou M, Salanti G, Rücker G, Schwarzer G, Moustaki I,
Mavridis D (2021):
A forward search algorithm for detecting extreme study effects in
network meta-analysis.
<em>Statistics in Medicine</em>
</p>
<p>Rücker G (2012):
Network meta-analysis, electrical networks and graph theory.
<em>Research Synthesis Methods</em>,
<b>3</b>, 312&ndash;24
</p>
<p>Rücker G, Schwarzer G (2015):
Ranking treatments in frequentist network meta-analysis works
without resampling methods.
<em>BMC Medical Research Methodology</em>,
<b>15</b>, 58
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("netmeta")
data(smokingcessation)
smokingcessation$id &lt;- 1:nrow(smokingcessation)

study912 &lt;- subset(smokingcessation, id %in% 9:12)
p1 &lt;- pairwise(list(treat1, treat2, treat3),
                        list(event1, event2, event3),
                        list(n1, n2, n3),
                        data = study912,
                        sm = "OR")

# Forward search algorithm
#
FSresult &lt;- NMAoutlier(p1, P = 1, small.values = "bad", n_cores = 2)
FSresult

data(smokingcessation)

# Transform data from arm-based to contrast-based format
# We use 'sm' argument for odds ratios.
# We use function pairwise from netmeta package
#
p1 &lt;- pairwise(list(treat1, treat2, treat3),
                        list(event1, event2, event3),
                        list(n1, n2, n3),
                        data = smokingcessation,
                        sm = "OR")

# Forward search algorithm
#
FSresult1 &lt;- NMAoutlier(p1, small.values = "bad")

# Basic set for each iteration of forward search algorithm
#
FSresult1$basic

# Forward search algorithm using the criteria (crit1, crit2)
# with the maximum of absolute likelihood contributions ("L")
#
FSresult2 &lt;- NMAoutlier(p1, crit1 = "L", crit2 = "L",
                        small.values = "bad")
FSresult2

## End(Not run)

</code></pre>

<hr>
<h2 id='NMAoutlier.measures'>Outlier and influential detection measures in network meta-analysis.</h2><span id='topic+NMAoutlier.measures'></span>

<h3>Description</h3>

<p>This function calculates several (simple or/and deletion) measures
for detection of outliers and influential studies in network
meta-analysis.
</p>
<p>Outlier and influential detection measures are: </p>
 <ul>
<li>
<p>Simple outlier and influential measures for each study (Raw
residuals, Standardized residuals, Studentized residuals,
Mahalanobis distance, leverage).  </p>
</li>
<li><p> Outlier and influential
deletion measures for each study (Shift the mean) (Raw deleted
residuals, Standardized deleted residuals, Studentized deleted
residuals, Cook distance between the treatment estimates for study
j and treatment estimates when study j is removed; Ratio of
determinants of variance-covariance matrix of treatment estimates
for study j to treatment estimates when study j is removed; weight
leave one out;leverage leave one out; heterogeneity estimator leave
one out; R statistic for heterogeneity; R statistic for Q
(<code>Qtotal</code>), R statistic for heterogeneity Q (<code>Qhet</code>), R
statistic for Qinconsistency (<code>Qinc</code>), DFbetas.)  </p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>NMAoutlier.measures(
  TE,
  seTE,
  treat1,
  treat2,
  studlab,
  data = NULL,
  sm,
  reference = "",
  measure = "simple",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NMAoutlier.measures_+3A_te">TE</code></td>
<td>
<p>Estimate of treatment effect, i.e. difference between
first and second treatment (e.g. log odds ratio, mean difference,
or log hazard ratio).</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_sete">seTE</code></td>
<td>
<p>Standard error of treatment estimate.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_treat1">treat1</code></td>
<td>
<p>Label/Number for first treatment.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_treat2">treat2</code></td>
<td>
<p>Label/Number for second treatment.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_studlab">studlab</code></td>
<td>
<p>Study labels (important when multi arm studies are
included).</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_data">data</code></td>
<td>
<p>A data frame containing the study information.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_sm">sm</code></td>
<td>
<p>A character string indicating underlying summary measure,
e.g., <code>"RD"</code>, <code>"RR"</code>, <code>"OR"</code>, <code>"ASD"</code>,
<code>"HR"</code>, <code>"MD"</code>, <code>"SMD"</code>, or <code>"ROM"</code>.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_reference">reference</code></td>
<td>
<p>Reference treatment group.</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_measure">measure</code></td>
<td>
<p>Outlier and influential detection measures, simple
measures (default: &quot;simple&quot;) or outlier and influential detection
measures considered study deletion (measure = &quot;deletion&quot;).</p>
</td></tr>
<tr><td><code id="NMAoutlier.measures_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to
<code><a href="netmeta.html#topic+netmeta">netmeta</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Outlier and influential detection measures (simple or deletion) for network meta-analysis.
Network meta-analysis from graph-theory [Rücker, 2012] is fitted
with (<code>netmeta</code> function) of R package <b>netmeta</b> [Rücker et al., 2015].
</p>
<p>A description of the outlier and influential detection measures in the context of network meta-analysis
can be found in Petropoulou (2020).
</p>
<p>Let <em>n</em> be the number of treatments in a network and let
<em>m</em> be the number of pairwise treatment comparisons.  If there
are only two-arm studies, <em>m</em> is the number of studies. Let
<code>TE</code> and <code>seTE</code> be the vectors of observed effects and their standard
errors. Comparisons belonging to multi-arm studies are identified
by identical study labels (argument <code>studlab</code>).
</p>
<p>This function calculates outlier and influential detection measures for each study.
Simple outlier and influential measures (<code>measure</code> = &quot;simple&quot;) are:
Raw residuals, Standardized residuals, Studentized residuals, Mahalanobis distance
and leverage for each study.
For deletion outlier and influential measures (<code>measure</code> = &quot;deletion&quot;):
Standardized deleted residual; Studentized deleted residual; Cook distance between the treatment estimates for study j
and treatment estimates when study j is removed;
Ratio of determinants of variance-covariance matrix of treatment estimates for study j to treatment estimates when study j is removed;
Weight leave one out;leverage leave one out; heterogeneity estimator leave one out;
R statistic for heterogeneity;  R statistis for estimates; R statistic for Q (<code>Qtotal</code>),  R statistic for  heterogeneity Q
(<code>Qhet</code>), R statistic for Qinconsistency (<code>Qinc</code>), DFbetas.
</p>


<h3>Value</h3>

<p>An object of class <code>NMAoutlier.measures</code>;
with a list containing the following components when choosing simple measures:
</p>
<table role = "presentation">
<tr><td><code>dat</code></td>
<td>
<p>Matrix containing the data <code>"TE"</code>, <code>"seTE"</code>, <code>"studlab"</code>, <code>"treat1"</code>, <code>"treat2"</code> as defined above.</p>
</td></tr>
<tr><td><code>eraw</code></td>
<td>
<p>Raw residual for each study included in the network.</p>
</td></tr>
<tr><td><code>estand</code></td>
<td>
<p>Standardized residual for each study included in the network.</p>
</td></tr>
<tr><td><code>estud</code></td>
<td>
<p>Studentized residual for each study included in the network.</p>
</td></tr>
<tr><td><code>Mah</code></td>
<td>
<p>Mahalanobis distance for each pairwise comparison.</p>
</td></tr>
<tr><td><code>Mah.distance</code></td>
<td>
<p>Mahalanobis distance for each study included in the network.</p>
</td></tr>
<tr><td><code>leverage</code></td>
<td>
<p>Leverage for each study included in the network.</p>
</td></tr>
<tr><td><code>measure</code></td>
<td>
<p>type of measure used.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>Function call</p>
</td></tr>
</table>
<p>a list containing the following components,when choosing deletion measures:
</p>
<table role = "presentation">
<tr><td><code>dat</code></td>
<td>
<p>Matrix containing the data <code>"TE"</code>, <code>"seTE"</code>, <code>"studlab"</code>, <code>"treat1"</code>, <code>"treat2"</code> as defined above.</p>
</td></tr>
<tr><td><code>eraw.deleted</code></td>
<td>
<p>Raw deleted residual for each study included in the network.</p>
</td></tr>
<tr><td><code>estand.deleted</code></td>
<td>
<p>Standardized deleted residual for each study included in the network.</p>
</td></tr>
<tr><td><code>estud.deleted</code></td>
<td>
<p>Studentized deleted residual for each study included in the network.</p>
</td></tr>
<tr><td><code>Cooks.distance</code></td>
<td>
<p>Cook distance between the treatment estimates for study j and treatment estimates when study j is removed</p>
</td></tr>
<tr><td><code>Covratio</code></td>
<td>
<p>Ratio of determinants of variance-covariance matrix of treatment estimates for study j to treatment estimates when study j is removed.</p>
</td></tr>
<tr><td><code>w.leaveoneout</code></td>
<td>
<p>Weight leave one out.</p>
</td></tr>
<tr><td><code>H.leaveoneout</code></td>
<td>
<p>Leverage leave one out.</p>
</td></tr>
<tr><td><code>heterog.leaveoneout</code></td>
<td>
<p>Heterogeneity estimator leave one out.</p>
</td></tr>
<tr><td><code>Rheterogeneity</code></td>
<td>
<p>R statistic for heterogeneity.</p>
</td></tr>
<tr><td><code>Restimates</code></td>
<td>
<p>R statistis for estimates.</p>
</td></tr>
<tr><td><code>RQtotal</code></td>
<td>
<p>R statistic for Q (<code>Qtotal</code>).</p>
</td></tr>
<tr><td><code>RQhet</code></td>
<td>
<p>R statistic for  heterogeneity Q (<code>Qhet</code>).</p>
</td></tr>
<tr><td><code>RQinc</code></td>
<td>
<p>R statistic for Qinconsistency (<code>Qinc</code>).</p>
</td></tr>
<tr><td><code>DFbetas</code></td>
<td>
<p>DFbetas.</p>
</td></tr>
<tr><td><code>measure</code></td>
<td>
<p>type of measure used.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>Function call</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>References</h3>

<p>Rücker G (2012):
Network meta-analysis, electrical networks and graph theory.
<em>Research Synthesis Methods</em>,
<b>3</b>, 312&ndash;24
</p>
<p>Rücker G, Schwarzer G (2015):
Ranking treatments in frequentist network meta-analysis works
without resampling methods.
<em>BMC Medical Research Methodology</em>,
<b>15</b>, 58
</p>
<p>Petropoulou M (2020):
Exploring methodological challenges in network meta-analysis models and
developing methodology for outlier detection.
<em>PhD dissertation</em>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("netmeta")
data(smokingcessation)
smokingcessation$id &lt;- 1:nrow(smokingcessation)

study912 &lt;- subset(smokingcessation, id %in% 9:12)
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = study912, sm = "OR")

# Outlier and influential detection measures for studies 9, 10, 11, 12
meas &lt;- NMAoutlier.measures(p1)

# Standardized residual for each study included in the network
meas$estand

## Not run: 
# Outlier and influential deletion measures for studies 9, 10, 11, 12.
delete &lt;- NMAoutlier.measures(p1, measure = "deletion")

# Standardized deleted residual for studies 9, 10, 11, 12.
delete$estand.deleted

data(smokingcessation)

# Transform data from arm-based to contrast-based format
# We use 'sm' argument for odds ratios.
# We use function pairwise from netmeta package
#
p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = smokingcessation, sm = "OR")

# Outlier and influential detection measures for each study in the network
meas &lt;- NMAoutlier.measures(p1, measure = "simple")

# Mahalanobis distance for each study included in the network
meas$Mah

## End(Not run)

</code></pre>

<hr>
<h2 id='plotesthelper'>Helper function to create the plots of summary estimates and their intervals for FS algorithm.</h2><span id='topic+plotesthelper'></span>

<h3>Description</h3>

<p>Helper function to create the plots of summary estimates and their intervals for FS algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotesthelper(x, lower, upper, estimate, xdata, xtitle)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotesthelper_+3A_x">x</code></td>
<td>
<p>object of class NMAoutlier(mandatory).</p>
</td></tr>
<tr><td><code id="plotesthelper_+3A_lower">lower</code></td>
<td>
<p>lower bundary of confidence interval of summary estimate.</p>
</td></tr>
<tr><td><code id="plotesthelper_+3A_upper">upper</code></td>
<td>
<p>upper bundary of confidence interval of summary estimate.</p>
</td></tr>
<tr><td><code id="plotesthelper_+3A_estimate">estimate</code></td>
<td>
<p>summary estimate.</p>
</td></tr>
<tr><td><code id="plotesthelper_+3A_xdata">xdata</code></td>
<td>
<p>data.</p>
</td></tr>
<tr><td><code id="plotesthelper_+3A_xtitle">xtitle</code></td>
<td>
<p>title for plots in x-axis.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of summary estimate and its confidence interval for each treatment for FS and algorithm.
Vertical axis provides the iterations of FS algorithm.
Horizontal axis provides a summary estimate of a treatment.
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>

<hr>
<h2 id='plothelper'>Helper function to create the plots for FS algorithm.</h2><span id='topic+plothelper'></span>

<h3>Description</h3>

<p>Helper function to create the plots for FS algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plothelper(x, stat, select.st)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plothelper_+3A_x">x</code></td>
<td>
<p>object of class NMAoutlier (mandatory).</p>
</td></tr>
<tr><td><code id="plothelper_+3A_stat">stat</code></td>
<td>
<p>The monitored statistic to generate the plot.</p>
</td></tr>
<tr><td><code id="plothelper_+3A_select.st">select.st</code></td>
<td>
<p>selected statistic (pscore/nsplit/estand) for
selected treatment(s)/comparison(s)/study</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of several monitoring measures for FS algorithm.
Vertical axis provides the iterations of FS algorithm.
Horizontal axis provides a monitoring statistical measure in the methodology.
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>

<hr>
<h2 id='Qnetplot'>Q-Q plot for network meta-analysis (Q-Q netplot).</h2><span id='topic+Qnetplot'></span>

<h3>Description</h3>

<p>This function generates the Q-Q plot for network meta-analyisis model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Qnetplot(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Qnetplot_+3A_data">data</code></td>
<td>
<p>object of class NMAoutlier.measures (mandatory).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot of Q-squared Mahalanobis distance for each study included in the network meta-analysis.
Vertical axis provides the Q-squared Mahalanobis distance for each i study included in the network meta-analysis.
Horizontal axis provides Q estimated quantiles (theoretical quantiles from the normal distribution).
A reference line is fitted from the cartesian points of the two measures.
The Q-Q plot can visualize studies that are away from the reference line (potiential outliers).
</p>
<p>Q-Q plot for network meta-analysis has been introduced by Petropoulou (2020).
</p>


<h3>Author(s)</h3>

<p>Maria Petropoulou &lt;maria.petropoulou@uniklinik-freiburg.de&gt;
</p>


<h3>References</h3>

<p>Petropoulou M (2020):
Exploring methodological challenges in network meta-analysis models and
developing methodology for outlier detection.
<em>PhD dissertation</em>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("netmeta")
data(smokingcessation)

p1 &lt;- pairwise(list(treat1, treat2, treat3),
  list(event1, event2, event3), list(n1, n2, n3),
  data = smokingcessation, sm = "OR")

# Outlier and influential detection measures
measures &lt;- NMAoutlier.measures(p1)

# Mahalanobis distance values for each study in the network
measures$Mah

# Q-Q netplot for the network of smoking cessation dataset
Qnetplot(measures)

</code></pre>

<hr>
<h2 id='res_multi'>Statistical measure in multi-arm studies</h2><span id='topic+res_multi'></span>

<h3>Description</h3>

<p>Computes the arithmetic mean of a statistical measure for the pairwise comparisons to study level data
(this can be done in the case of multi-arm trials).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>res_multi(st.lab, ei)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="res_multi_+3A_st.lab">st.lab</code></td>
<td>
<p>studylab of set of studies.</p>
</td></tr>
<tr><td><code id="res_multi_+3A_ei">ei</code></td>
<td>
<p>statistical measure for each pairwise comparison of studies.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the arithmetic mean of statistical measure.
</p>

<hr>
<h2 id='Schoenberg2013'>Network meta-analysis comparing the effects after Laparoscopic Heller myotomy.</h2><span id='topic+Schoenberg2013'></span>

<h3>Description</h3>

<p>Network meta-analysis dataset comparing the effects after Laparoscopic Heller myotomy.
</p>


<h3>Format</h3>

<p>A data frame in contrast format with the following columns:
</p>

<table>
<tr>
 <td style="text-align: right;">
<b><em>logOR</em></b></td><td style="text-align: left;"> log odds ratio </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>selogOR</em></b></td><td style="text-align: left;"> standard error of log odds ratio </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>id</em></b></td><td style="text-align: left;"> study ID </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>t1</em></b></td><td style="text-align: left;"> first treatment </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>t2</em></b></td><td style="text-align: left;"> second treatment
</td>
</tr>

</table>



<h3>Details</h3>

<p>The dataset compares the effects after Laparoscopic Heller
myotomy. The outcome is the number of individuals with successful
rates at 12 months. These data are in contrast format with effect
size odds ratio (OR) and its standard error. Arm-level data can be
found in Schoenberg et al. (2013).
</p>


<h3>Source</h3>

<p>Schoenberg MB, Marx S, Kersten JF, Rösch T, Belle S, Kähler G,
Vassiliou MC, Lüth S, von Renteln D (2013):
Laparoscopic Heller myotomy versus endoscopic balloon dilatation
for the treatment of achalasia: a network meta-analysis.
<em>Annals of Surgery</em>,
<b>258</b>, 943&ndash;52
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Schoenberg2013)
# Conduct forward search algorithm for the network of Laparoscopic
# Heller myotomy
#
FSresult &lt;- NMAoutlier(logOR, selogOR, t1, t2, id, data = Schoenberg2013, n_cores = 2)

# Draw forward plot for z-values from difference of direct and
# indirect evidence
#
fwdplot(FSresult, "nsplit")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
