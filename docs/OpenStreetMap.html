<!DOCTYPE html><html><head><title>Help for package OpenStreetMap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OpenStreetMap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#autoplot'><p>Create a complete ggplot appropriate to a particular data type</p>
Rexported from ggplot2. 'autoplot()' uses ggplot2 to draw a particular plot for an object of a
particular class in a single command. This defines the S3 generic that
other classes and packages can extend.</a></li>
<li><a href='#autoplot.OpenStreetMap'><p>Plot an open street map using ggplot2</p></a></li>
<li><a href='#autoplot.osmtile'><p>Plots an open street map tile using ggplot2</p></a></li>
<li><a href='#getMapInfo'><p>Returns a table with relevant source and attribution info for each map type</p></a></li>
<li><a href='#LA_places'><p>Places of interest in Los Angeles</p></a></li>
<li><a href='#launchMapHelper'><p>Launches a Java helper GUI.</p></a></li>
<li><a href='#longlat'><p>Latitude Longitude projection</p></a></li>
<li><a href='#openmap'><p>Get a map based on lat long coordinates</p></a></li>
<li><a href='#openproj'><p>Projects the open street map to an alternate coordinate system</p></a></li>
<li><a href='#osm'><p>Open street map (and google) mercator projection</p></a></li>
<li><a href='#osmtile'><p>Get an open street map tile.</p></a></li>
<li><a href='#plot.OpenStreetMap'><p>Plot an OpenStreetMap object.</p></a></li>
<li><a href='#plot.osmtile'><p>Add tile to plot</p></a></li>
<li><a href='#print.OpenStreetMap'><p>Print map</p></a></li>
<li><a href='#projectMercator'><p>Maps long lat values to the open street map mercator projection</p></a></li>
<li><a href='#raster,OpenStreetMap-method'><p>Create a RasterLayer from an OpenStreetMap</p></a></li>
<li><a href='#raster,osmtile-method'><p>Create a RasterLayer from a tile</p></a></li>
<li><a href='#states'><p>The United States</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Maintainer:</td>
<td>Ian Fellows &lt;ian@fellstat.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | file LICENCE</td>
</tr>
<tr>
<td>Title:</td>
<td>Access to Open Street Map Raster Images</td>
</tr>
<tr>
<td>Author:</td>
<td>Ian Fellows, using the JMapViewer library by Jan Peter Stotz</td>
</tr>
<tr>
<td>Description:</td>
<td>Accesses high resolution raster maps using the OpenStreetMap
    protocol. Dozens of road, satellite, and topographic map servers are directly
    supported, including Apple, Mapnik, Bing, and stamen. Additionally raster maps
    may be constructed using custom tile servers.  Maps can be
    plotted using either base graphics, or ggplot2. This package is not affiliated
    with the OpenStreetMap.org mapping project.</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Java (&gt;= 1.8), JRI</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ifellows/ROSM">https://github.com/ifellows/ROSM</a> <a href="https://www.fellstat.com">https://www.fellstat.com</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>methods, R (&ge; 4.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, ggplot2 (&ge; 0.9.0), rJava, raster, sp</td>
</tr>
<tr>
<td>Collate:</td>
<td>'OpenStreetMap-package.R' 'osm.R' 'autoplot.R' 'zzz.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-12 03:54:42 UTC; ianfellows</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-12 11:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='autoplot'>Create a complete ggplot appropriate to a particular data type
Rexported from ggplot2. 'autoplot()' uses ggplot2 to draw a particular plot for an object of a
particular class in a single command. This defines the S3 generic that
other classes and packages can extend.</h2><span id='topic+autoplot'></span>

<h3>Description</h3>

<p>Create a complete ggplot appropriate to a particular data type
Rexported from ggplot2. 'autoplot()' uses ggplot2 to draw a particular plot for an object of a
particular class in a single command. This defines the S3 generic that
other classes and packages can extend.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot_+3A_object">object</code></td>
<td>
<p>An object (for example an OpenStreetMap object)</p>
</td></tr>
<tr><td><code id="autoplot_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>See Also</h3>

<p>[autoplot.OpenStreetMap()]
</p>

<hr>
<h2 id='autoplot.OpenStreetMap'>Plot an open street map using ggplot2</h2><span id='topic+autoplot.OpenStreetMap'></span>

<h3>Description</h3>

<p>Plot an open street map using ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'OpenStreetMap'
autoplot(object, expand = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.OpenStreetMap_+3A_object">object</code></td>
<td>
<p>an OpenStreetMap object</p>
</td></tr>
<tr><td><code id="autoplot.OpenStreetMap_+3A_expand">expand</code></td>
<td>
<p>if true the plotting bounds are expanded to the bounding box</p>
</td></tr>
<tr><td><code id="autoplot.OpenStreetMap_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(maps)
require(ggplot2)

mp &lt;- openmap(c(53.38332836757155,-130.517578125),
		c(15.792253570362446,-67.939453125),4)
mp_bing &lt;- openmap(c(53.38332836757155,-130.517578125),
		c(15.792253570362446,-67.939453125),4,'bing')
states_map &lt;- map_data("state")
states_map_merc &lt;- as.data.frame(
		projectMercator(states_map$lat,states_map$long))
states_map_merc$region &lt;- states_map$region
states_map_merc$group &lt;- states_map$group
crimes &lt;- data.frame(state = tolower(rownames(USArrests)), USArrests)

p &lt;- autoplot(mp,expand=FALSE) + geom_polygon(aes(x=x,y=y,group=group),
		data=states_map_merc,fill="black",colour="black",alpha=.1) + theme_bw()
print(p)
p &lt;- autoplot(mp_bing) + geom_map(aes(x=-10000000,y=4000000,map_id=state,fill=Murder),
		data=crimes,map=states_map_merc)
print(p)

## End(Not run)
</code></pre>

<hr>
<h2 id='autoplot.osmtile'>Plots an open street map tile using ggplot2</h2><span id='topic+autoplot.osmtile'></span>

<h3>Description</h3>

<p>Plots an open street map tile using ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'osmtile'
autoplot(object, plot = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.osmtile_+3A_object">object</code></td>
<td>
<p>an osmtile</p>
</td></tr>
<tr><td><code id="autoplot.osmtile_+3A_plot">plot</code></td>
<td>
<p>if false only the annotation_raster is returned</p>
</td></tr>
<tr><td><code id="autoplot.osmtile_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>

<hr>
<h2 id='getMapInfo'>Returns a table with relevant source and attribution info for each map type</h2><span id='topic+getMapInfo'></span>

<h3>Description</h3>

<p>Returns a table with relevant source and attribution info for each map type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMapInfo()
</code></pre>

<hr>
<h2 id='LA_places'>Places of interest in Los Angeles</h2><span id='topic+LA_places'></span>

<h3>Description</h3>

<p>Places of interest in Los Angeles
</p>

<hr>
<h2 id='launchMapHelper'>Launches a Java helper GUI.</h2><span id='topic+launchMapHelper'></span>

<h3>Description</h3>

<p>Launches a Java helper GUI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>launchMapHelper()
</code></pre>


<h3>Details</h3>

<p>note for Mac OS X users:
On the mac this can only be run from a java console such as JGR.
</p>

<hr>
<h2 id='longlat'>Latitude Longitude projection</h2><span id='topic+longlat'></span>

<h3>Description</h3>

<p>Latitude Longitude projection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>longlat()
</code></pre>

<hr>
<h2 id='openmap'>Get a map based on lat long coordinates</h2><span id='topic+openmap'></span>

<h3>Description</h3>

<p>Get a map based on lat long coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openmap(
  upperLeft,
  lowerRight,
  zoom = NULL,
  type = c("osm", "bing", "osm-german", "esri", "esri-topo", "esri-physical",
    "esri-shaded", "esri-imagery", "esri-terrain", "esri-natgeo", "nps", "apple-iphoto",
    "osm-public-transport"),
  minNumTiles = 9L,
  mergeTiles = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openmap_+3A_upperleft">upperLeft</code></td>
<td>
<p>the upper left lat and long</p>
</td></tr>
<tr><td><code id="openmap_+3A_lowerright">lowerRight</code></td>
<td>
<p>the lower right lat and long</p>
</td></tr>
<tr><td><code id="openmap_+3A_zoom">zoom</code></td>
<td>
<p>the zoom level. If null, it is determined automatically</p>
</td></tr>
<tr><td><code id="openmap_+3A_type">type</code></td>
<td>
<p>the tile server from which to get the map, or the url pattern.</p>
</td></tr>
<tr><td><code id="openmap_+3A_minnumtiles">minNumTiles</code></td>
<td>
<p>If zoom is null, zoom will be chosen such that
the number of map tiles is greater than or equal
to this number.</p>
</td></tr>
<tr><td><code id="openmap_+3A_mergetiles">mergeTiles</code></td>
<td>
<p>should map tiles be merged into one tile</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Type may be the url of a custom tile server (http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification).
should include {z}, {y}, and {x} specifying where the zoom, xtile and ytile location should be substituted. e.g.
</p>
<p>http://api.someplace.com/.../{z}/{x}/{y}.png
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#show some of the maps available
nm &lt;- c("osm","bing","osm-german","esri","esri-topo","esri-physical","esri-shaded",
  "esri-imagery","esri-terrain","esri-natgeo","nps","apple-iphoto")
par(mfrow=c(3,4), mar=c(0,0,0,0))
#Korea
for(i in 1:length(nm)){
	map &lt;- openmap(c(43.46886761482925,119.94873046875),
			c(33.22949814144951,133.9892578125),
		minNumTiles=3,type=nm[i])
plot(map)
}
# Some maps from custom urls (use your own API key)
apiKey &lt;- paste0("?access_token=",
 "pk.eyJ1IjoidGhlZmVsbCIsImEiOiJjaXN1anNwODEwMWlrMnRvZHBhamRrZjlqIn0.Gf8qLSpZ6yo5yfQhEutFfQ")
baseUrl &lt;- "https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}"
map &lt;- openmap(c(43.46886761482925,119.94873046875),
	c(33.22949814144951,133.9892578125),
		minNumTiles=4,
		type=paste0(baseUrl,apiKey))
plot(map)

baseUrl &lt;- "https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/256/{z}/{x}/{y}"
map &lt;- openmap(c(43.46886761482925,119.94873046875),
	c(33.22949814144951,133.9892578125),
		minNumTiles=4,
		type=paste0(baseUrl,apiKey))
plot(map)


#plot Korea with ggplot2.
library(ggplot2)
map &lt;- openmap(c(43.46886761482925,119.94873046875),
	c(33.22949814144951,133.9892578125),
	minNumTiles=4)
autoplot(map)


## End(Not run)
</code></pre>

<hr>
<h2 id='openproj'>Projects the open street map to an alternate coordinate system</h2><span id='topic+openproj'></span>

<h3>Description</h3>

<p>Projects the open street map to an alternate coordinate system
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openproj(x, projection = "+proj=longlat", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openproj_+3A_x">x</code></td>
<td>
<p>an OpenStreetMap object</p>
</td></tr>
<tr><td><code id="openproj_+3A_projection">projection</code></td>
<td>
<p>a proj4 character string or CRS object</p>
</td></tr>
<tr><td><code id="openproj_+3A_...">...</code></td>
<td>
<p>additional parameters for projectRaster</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(maps)

#plot bing map in native mercator coords
map &lt;- openmap(c(70,-179),
	c(-70,179),zoom=1,type='bing')
plot(map)

#using longlat projection lets us combine with the maps library
map_longlat &lt;- openproj(map)
plot(map_longlat)
map("world",col="red",add=TRUE)

#robinson projection. good for whole globe viewing.
map_robinson &lt;- openproj(map_longlat, projection=
"+proj=robin +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs")
plot(map_robinson)

#national parks service images
upperMap &lt;- openmap(c(70,-179),
	c(10,50),zoom=2,type='nps')
#Lambert Conic Conformal
map_llc &lt;- openproj(upperMap, projection=
"+proj=lcc +lat_1=33 +lat_2=45 +lat_0=39 +lon_0=-96")
plot(map_llc,removeMargin=TRUE)
#add choropleth
library(sp)
data(states)
st_llc &lt;- spTransform(states,CRS("+proj=lcc +lat_1=33 +lat_2=45 +lat_0=39 +lon_0=-96"))
plot(st_llc,add=T,col=heat.colors(48,.4)[slot(st_llc,"data")[["ORDER_ADM"]]])


## End(Not run)
</code></pre>

<hr>
<h2 id='osm'>Open street map (and google) mercator projection</h2><span id='topic+osm'></span>

<h3>Description</h3>

<p>Open street map (and google) mercator projection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm()
</code></pre>

<hr>
<h2 id='osmtile'>Get an open street map tile.</h2><span id='topic+osmtile'></span>

<h3>Description</h3>

<p>Get an open street map tile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osmtile(x, y, zoom, type = "osm")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osmtile_+3A_x">x</code></td>
<td>
<p>location in osm native coordinates</p>
</td></tr>
<tr><td><code id="osmtile_+3A_y">y</code></td>
<td>
<p>location in osm native coordinates</p>
</td></tr>
<tr><td><code id="osmtile_+3A_zoom">zoom</code></td>
<td>
<p>zoom level</p>
</td></tr>
<tr><td><code id="osmtile_+3A_type">type</code></td>
<td>
<p>the map type (see getMapInfo)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tile
</p>

<hr>
<h2 id='plot.OpenStreetMap'>Plot an OpenStreetMap object.</h2><span id='topic+plot.OpenStreetMap'></span>

<h3>Description</h3>

<p>Plot an OpenStreetMap object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'OpenStreetMap'
plot(x, y = NULL, add = FALSE, removeMargin = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.OpenStreetMap_+3A_x">x</code></td>
<td>
<p>the OpenStreetMap</p>
</td></tr>
<tr><td><code id="plot.OpenStreetMap_+3A_y">y</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="plot.OpenStreetMap_+3A_add">add</code></td>
<td>
<p>add to current plot</p>
</td></tr>
<tr><td><code id="plot.OpenStreetMap_+3A_removemargin">removeMargin</code></td>
<td>
<p>remove margins from plotting device</p>
</td></tr>
<tr><td><code id="plot.OpenStreetMap_+3A_...">...</code></td>
<td>
<p>additional parameters to be passed to plot</p>
</td></tr>
</table>

<hr>
<h2 id='plot.osmtile'>Add tile to plot</h2><span id='topic+plot.osmtile'></span>

<h3>Description</h3>

<p>Add tile to plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'osmtile'
plot(x, y = NULL, add = TRUE, raster = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.osmtile_+3A_x">x</code></td>
<td>
<p>the tile</p>
</td></tr>
<tr><td><code id="plot.osmtile_+3A_y">y</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="plot.osmtile_+3A_add">add</code></td>
<td>
<p>add to current plot (if raster, then image is always added)</p>
</td></tr>
<tr><td><code id="plot.osmtile_+3A_raster">raster</code></td>
<td>
<p>use raster image</p>
</td></tr>
<tr><td><code id="plot.osmtile_+3A_...">...</code></td>
<td>
<p>additional parameters to image or rasterImage</p>
</td></tr>
</table>

<hr>
<h2 id='print.OpenStreetMap'>Print map</h2><span id='topic+print.OpenStreetMap'></span>

<h3>Description</h3>

<p>Print map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'OpenStreetMap'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.OpenStreetMap_+3A_x">x</code></td>
<td>
<p>the OpenStreetMap</p>
</td></tr>
<tr><td><code id="print.OpenStreetMap_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>

<hr>
<h2 id='projectMercator'>Maps long lat values to the open street map mercator projection</h2><span id='topic+projectMercator'></span>

<h3>Description</h3>

<p>Maps long lat values to the open street map mercator projection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>projectMercator(lat, long, drop = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="projectMercator_+3A_lat">lat</code></td>
<td>
<p>a vector of latitudes</p>
</td></tr>
<tr><td><code id="projectMercator_+3A_long">long</code></td>
<td>
<p>a vector of longitudes</p>
</td></tr>
<tr><td><code id="projectMercator_+3A_drop">drop</code></td>
<td>
<p>drop to lowest dimension</p>
</td></tr>
</table>

<hr>
<h2 id='raster+2COpenStreetMap-method'>Create a RasterLayer from an OpenStreetMap</h2><span id='topic+raster+2COpenStreetMap-method'></span>

<h3>Description</h3>

<p>Create a RasterLayer from an OpenStreetMap
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'OpenStreetMap'
raster(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster+2B2COpenStreetMap-method_+3A_x">x</code></td>
<td>
<p>an OpenStreetMap</p>
</td></tr>
<tr><td><code id="raster+2B2COpenStreetMap-method_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(raster)
longBeachHarbor &lt;- openmap(c(33.760525217369974,-118.22052955627441),
		c(33.73290566922855,-118.17521095275879),14,'bing')
ras &lt;- raster(longBeachHarbor)
plotRGB(ras)

## End(Not run)
</code></pre>

<hr>
<h2 id='raster+2Cosmtile-method'>Create a RasterLayer from a tile</h2><span id='topic+raster+2Cosmtile-method'></span>

<h3>Description</h3>

<p>Create a RasterLayer from a tile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'osmtile'
raster(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster+2B2Cosmtile-method_+3A_x">x</code></td>
<td>
<p>an osmtile</p>
</td></tr>
<tr><td><code id="raster+2B2Cosmtile-method_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>

<hr>
<h2 id='states'>The United States</h2><span id='topic+states'></span>

<h3>Description</h3>

<p>The United States
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
