<!DOCTYPE html><html lang="en"><head><title>Help for package antaresViz</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {antaresViz}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addShadows'><p>Add a shadow to map layers</p></a></li>
<li><a href='#exchangesStack'><p>Plot the exchanges of an area</p></a></li>
<li><a href='#limitSizeGraph'><p>Use to change limit size of graph (in Mb)</p></a></li>
<li><a href='#mapLayout'><p>Place areas of a study on a map</p></a></li>
<li><a href='#modRpart'><p>Make rpart from antares data</p></a></li>
<li><a href='#modXY'><p>Make X-Y bockey plot, interactive version</p></a></li>
<li><a href='#placeGeoPoints-shiny'><p>Shiny bindings for placeGeoPoints</p></a></li>
<li><a href='#plot.mapLayout'><p>Plot method for map layout</p></a></li>
<li><a href='#plotMap'><p>Display results of a simulation on a map</p></a></li>
<li><a href='#plotMapLayout'><p>Visualize mapLayout output.</p></a></li>
<li><a href='#plotMapOptions'><p>Graphical options for plotMap</p></a></li>
<li><a href='#plotThermalGroupCapacities'><p>Plot for Thermal Group Capacities</p></a></li>
<li><a href='#plotXY'><p>Plot density between X et Y with ggplot2 and plotly</p></a></li>
<li><a href='#prodStackAliases'><p>Visualize the production stack of an area</p></a></li>
<li><a href='#prodStackExchangesLegend'><p>Plot an interactive legend for time series plots</p></a></li>
<li><a href='#runAppAntaresViz'><p>Run app antaresViz</p></a></li>
<li><a href='#savePlotAsPng'><p>Save interactive plot as a png image</p></a></li>
<li><a href='#setInteractivity'><p>Get and set interactivity mode</p></a></li>
<li><a href='#stackMap'><p>plot stack and map</p></a></li>
<li><a href='#tsPlot'><p>plot time series contained in an antaresData object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Antares Visualizations</td>
</tr>
<tr>
<td>Version:</td>
<td>0.18.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Visualize results generated by Antares, a powerful open source software
    developed by RTE to simulate and study electric power systems
    (more information about 'Antares' here: <a href="https://github.com/AntaresSimulatorTeam/Antares_Simulator">https://github.com/AntaresSimulatorTeam/Antares_Simulator</a>).
    This package provides functions that create interactive charts to help
    'Antares' users visually explore the results of their simulations.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rte-antares-rpackage/antaresViz">https://github.com/rte-antares-rpackage/antaresViz</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rte-antares-rpackage/antaresViz/issues">https://github.com/rte-antares-rpackage/antaresViz/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>antaresRead (&ge; 2.2.9), antaresProcessing (&ge; 0.13.0), spMaps
(&ge; 0.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dygraphs (&ge; 1.1.1.6), shiny (&ge; 0.13.0), plotly (&ge; 4.5.6),
htmltools, htmlwidgets (&ge; 0.7.0), manipulateWidget (&ge;
0.10.0), leaflet (&ge; 1.1.0), sp (&ge; 2.0-0), sf, webshot,
data.table, methods, lubridate, geojsonio, graphics, stats,
leaflet.minicharts (&ge; 0.5.3), assertthat, rAmCharts, utils,
lifecycle</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, ggplot2, knitr, visNetwork, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-29 14:01:10 UTC; berthetcle</td>
</tr>
<tr>
<td>Author:</td>
<td>Tatiana Vargas [aut, cre],
  Jalal-Edine Zawam [ctb],
  Francois Guillem [ctb],
  Benoit Thieurmel [ctb],
  Titouan Robert [ctb],
  Paul Plessiez [ctb],
  Baptiste Seguinot [ctb],
  RTE [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tatiana Vargas &lt;tatiana.vargas@rte-france.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-02 10:00:19 UTC</td>
</tr>
</table>
<hr>
<h2 id='addShadows'>Add a shadow to map layers</h2><span id='topic+addShadows'></span>

<h3>Description</h3>

<p>This function adds a shadow to every svg element added to a leaflet map. It
can greatly improve the lisibility of the map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addShadows(map)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addShadows_+3A_map">map</code></td>
<td>
<p>A leaflet map object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(leaflet)
require(leaflet.minicharts)

leaflet() %&gt;%
  addTiles() %&gt;% 
  addFlows(0, 0, 1, 0, col= gray(0.9)) %&gt;%
  addCircleMarkers(c(0, 1), c(0, 0), color = "white", fillOpacity = 1, stroke = FALSE) %&gt;%
  addShadows()

</code></pre>

<hr>
<h2 id='exchangesStack'>Plot the exchanges of an area</h2><span id='topic+exchangesStack'></span><span id='topic+exchangesStackAliases'></span><span id='topic+setExchangesStackAlias'></span>

<h3>Description</h3>

<p>This function draws a stack representing the evolution of the exchanges of
an area with its neighbours. Positive values denotes exports and negative
values imports.
User can either plot all flows from/to an area using the <code>default</code> stack or use a custom one.
User can see available stacks with <code>exchangesStackAliases</code> and create new ones
with <code>setExchangesStackAlias</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exchangesStack(
  x,
  stack = "default",
  area = NULL,
  mcYear = "average",
  dateRange = NULL,
  colors = NULL,
  yMin = NULL,
  yMax = NULL,
  customTicks = NULL,
  main = NULL,
  ylab = NULL,
  unit = c("MWh", "GWh", "TWh"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  legend = TRUE,
  legendId = sample(1e+09, 1),
  groupId = legendId,
  updateLegendOnMouseOver = TRUE,
  legendItemsPerRow = 5,
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  stepPlot = FALSE,
  drawPoints = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  refStudy = NULL,
  ...
)

exchangesStackAliases()

setExchangesStackAlias(
  name,
  variables,
  colors,
  lines = NULL,
  lineColors = NULL,
  lineWidth = 3,
  description = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="exchangesStack_+3A_x">x</code></td>
<td>
<p>Object of class <code>antaresData</code> created with function
[antaresRead::readAntares]. It is required to contain link data.
If it also contains area data with column 'ROW BAL.', then exchanges with
the rest of the world are also displayed on the chart.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_stack">stack</code></td>
<td>
<p>Name of the stack to use. If <code>default</code>, all flows available will be plotted. One can visualize available stacks with 
<code>exchangesStackAliases</code></p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_area">area</code></td>
<td>
<p>Name of a single area. The flows from/to this area will be drawn by the
function.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_mcyear">mcYear</code></td>
<td>
<p>If <code>x</code>, contains multiple Monte-Carlo scenarios, this parameter 
determine which scenario is displayed. Must be an integer representing the
index of the scenario or the word &quot;average&quot;. In this case data are 
averaged.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_daterange">dateRange</code></td>
<td>
<p>A vector of two dates. Only data points between these two dates are 
displayed. If NULL, then all data is displayed.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_colors">colors</code></td>
<td>
<p>Vector of colors with same length as parameter <code>variables</code>. If 
<code>variables</code> is an alias, then this argument should be <code>NULL</code> in 
order to use default colors.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_ymin">yMin</code></td>
<td>
<p><code>numeric</code>, the minimum value to be displayed on all y Axis. If <code>NULL</code>, the min value is automatically set</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_ymax">yMax</code></td>
<td>
<p><code>numeric</code>, the maximum value to be displayed on all y Axis. If <code>NULL</code>, the max value is automatically set</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_customticks">customTicks</code></td>
<td>
<p><code>numeric</code> vector of the custom ticks values to be displayed on the y Axis. If <code>NULL</code>, the ticks are automatically generated</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_main">main</code></td>
<td>
<p>Title of the graph.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_ylab">ylab</code></td>
<td>
<p>Title of the Y-axis.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_unit">unit</code></td>
<td>
<p>Unit used in the graph. Possible values are &quot;MWh&quot;, &quot;GWh&quot; or &quot;TWh&quot;.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_compare">compare</code></td>
<td>
<p>An optional character vector containing names of parameters. When it is set,
two charts are outputed with their own input controls. Alternatively, it can
be a named list with names corresponding to parameter names and values being
list with the initial values of the given parameter for each chart. See details
if you are drawing a map.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_compareopts">compareOpts</code></td>
<td>
<p>List of options that indicates the number of charts to create and their 
position. Check out the documentation of 
[manipulateWidget::compareOptions] to see available options.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_interactive">interactive</code></td>
<td>
<p>LogicalValue. If <code>TRUE</code>, then a shiny gadget is launched that lets
the user interactively choose the areas or districts to display.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_legend">legend</code></td>
<td>
<p>Logical value indicating if a legend should be drawn. This argument is 
usefull when one wants to create a shared legend with
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_legendid">legendId</code></td>
<td>
<p>Id of the legend linked to the graph. This argument is 
usefull when one wants to create a shared legend with 
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_groupid">groupId</code></td>
<td>
<p>Parameter that can be used to synchronize the horizontal 
zoom of multiple charts. All charts that need to be synchronized must
have the same group.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_updatelegendonmouseover">updateLegendOnMouseOver</code></td>
<td>
<p><code>LogicalValue</code>. If <code>TRUE</code> the legend will be updated when the mouse is over a stack. If <code>FALSE</code> the legend will be updated on a click</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_legenditemsperrow">legendItemsPerRow</code></td>
<td>
<p>Number of elements to put in each row of the legend.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_width">width</code></td>
<td>
<p>Width of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_height">height</code></td>
<td>
<p>Height of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_xycompare">xyCompare</code></td>
<td>
<p>Use when you compare studies, can be &quot;union&quot; or &quot;intersect&quot;. If union, all
of mcYears in one of studies will be selectable. If intersect, only mcYears in all
studies will be selectable.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_h5requestfiltering">h5requestFiltering</code></td>
<td>
<p>Contains arguments used by default for h5 request,
typically h5requestFiltering = list(links = getLinks(areas = myArea), mcYears = myMcYear)</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_stepplot">stepPlot</code></td>
<td>
<p><code>boolean</code>, step style for curves.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_drawpoints">drawPoints</code></td>
<td>
<p><code>boolean</code>, add points on graph</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_timesteph5">timeSteph5</code></td>
<td>
<p><code>character</code> timeStep to read in h5 file. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_mcyearh5">mcYearh5</code></td>
<td>
<p><code>numeric</code> mcYear to read for h5. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_tablesh5">tablesh5</code></td>
<td>
<p><code>character</code> tables for h5 (&quot;areas&quot; &quot;links&quot;, &quot;clusters&quot; or &quot;disticts&quot;). Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_language">language</code></td>
<td>
<p><code>character</code> language use for label. Defaut to 'en'. Can be 'fr'.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_hidden">hidden</code></td>
<td>
<p><code>logical</code> Names of input to hide. Defaut to NULL</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_refstudy">refStudy</code></td>
<td>
<p>An object of class <code>antaresData</code> created with function 
[antaresRead::readAntares()] containing data for areas and or
districts. Can also contains an opts who refer to a h5 file.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_...">...</code></td>
<td>
<p>Other arguments for [manipulateWidget::manipulateWidget]</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_name">name</code></td>
<td>
<p>name of the stack to create or update</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_variables">variables</code></td>
<td>
<p>A named list of expressions created with [base::alist]. The
name of each element is the name of the variable to draw in the stacked
graph. The element itself is an expression explaining how to compute the
variable (see examples).</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_lines">lines</code></td>
<td>
<p>A named list of expressions created with [base::alist]
indicating how to compute the curves to display on top of the stacked graph.
It should be <code>NULL</code> if there is no curve to trace or if parameter
<code>variables</code> is an alias.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_linecolors">lineColors</code></td>
<td>
<p>Vector of colors with same length as parameter <code>lines</code>. This argument
should be <code>NULL</code> if there is no curve to trace or if parameter
<code>variables</code> is an alias.</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_linewidth">lineWidth</code></td>
<td>
<p>Optionnal. Defaut to 3. Vector of width with same length as parameter <code>lines</code> (or only one value).</p>
</td></tr>
<tr><td><code id="exchangesStack_+3A_description">description</code></td>
<td>
<p>Description of the stack. It is displayed by function 
<code>exchangesStackAliases</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Compare argument can take following values :
</p>

<ul>
<li><p> &quot;mcYear&quot;
</p>
</li>
<li><p> &quot;main&quot;
</p>
</li>
<li><p> &quot;unit&quot;
</p>
</li>
<li><p> &quot;area&quot;
</p>
</li>
<li><p> &quot;legend&quot;
</p>
</li>
<li><p> &quot;stepPlot&quot;
</p>
</li>
<li><p> &quot;drawPoints&quot;
</p>
</li></ul>



<h3>Value</h3>

<p>A htmlwidget of class <code>dygraph</code>. It can be modified with functions from
package <code>dygraphs</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(antaresRead)
# with study test for example (study is in package antaresRead)
sourcedir &lt;- system.file("testdata", package = "antaresRead")

# untar study in temp dir
path_latest &lt;- file.path(tempdir(), "latest")
untar(file.path(sourcedir, "antares-test-study.tar.gz"), exdir = path_latest)

study_path &lt;- file.path(path_latest, "test_case")

# set path to your Antares simulation
opts &lt;- setSimulationPath(study_path)

if(interactive()){
  mydata &lt;- readAntares(links = "all", timeStep = "daily")
  exchangesStack(mydata)
  
  # Also display exchanges with the rest of the world
  mydata &lt;- readAntares(areas = "all", links = "all", timeStep = "daily")
  exchangesStack(mydata)
  
  # Use compare :
  exchangesStack(mydata, compare = "mcYear")
  exchangesStack(mydata, compare = "area")
  exchangesStack(mydata, compare = "unit")
  exchangesStack(mydata, compare = "legend")
  # Compare studies with refStudy argument
  exchangesStack(x = myData1, refStudy = myData2)
  exchangesStack(x = myData1, refStudy = myData2, interactive = FALSE)
  exchangesStack(x = list(myData2, myData3, myData4), refStudy = myData1)
  exchangesStack(x = list(myData2, myData3, myData4), refStudy = myData1, interactive = FALSE)
  
  
  # Compare 2 studies
  exchangesStack(x = list(opts, opts))
  
  # Compare 2 studies with argument refStudy
  exchangesStack(x = opts, refStudy = opts)
}


</code></pre>

<hr>
<h2 id='limitSizeGraph'>Use to change limit size of graph (in Mb)</h2><span id='topic+limitSizeGraph'></span>

<h3>Description</h3>

<p>Use to change limit size of graph (in Mb)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>limitSizeGraph(size)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="limitSizeGraph_+3A_size">size</code></td>
<td>
<p><code>numeric</code> widget size autorized in modules (default 200)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
limitSizeGraph(500)

## End(Not run)

</code></pre>

<hr>
<h2 id='mapLayout'>Place areas of a study on a map</h2><span id='topic+mapLayout'></span>

<h3>Description</h3>

<p>This function launches an interactive application that let the user place 
areas of a study on a map. the GPS coordinates of the areas are then returned
and can be used in functions. This function should be used only once per 
study. The result should then be saved in an external file and be reused.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapLayout(
  layout,
  what = c("areas", "districts"),
  map = getSpMaps(),
  map_builder = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapLayout_+3A_layout">layout</code></td>
<td>
<p>object returned by function [antaresRead::readLayout()]</p>
</td></tr>
<tr><td><code id="mapLayout_+3A_what">what</code></td>
<td>
<p>Either &quot;areas&quot; or &quot;districts&quot;. Indicates what type of object to place
on the map.</p>
</td></tr>
<tr><td><code id="mapLayout_+3A_map">map</code></td>
<td>
<p>An optional [sp::SpatialPolygons()] or 
[sp::SpatialPolygonsDataFrame()] object. See [spMaps::getSpMaps()]</p>
</td></tr>
<tr><td><code id="mapLayout_+3A_map_builder">map_builder</code></td>
<td>
<p><code>logical</code> Add inputs for build custom map ? Defaut to TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With <code>map_builder</code> option, you can build a quiet custom map using <code>spMaps</code> package. 
This package help you to build [sp::SpatialPolygons()] on Europe. 
Moreover, you can use two options in the module : 
</p>

<ul>
<li> <p>&quot;Merge countries&quot; : Some countries like UK or Belgium are firstly rendered in multiple and diffrent area. 
You can so choose to finally use this countries as one single area on the map
</p>
</li>
<li> <p>&quot;Merge states&quot; : If you need states details but not having one area per state, the map will be incomplete 
for some countries, plotting only states with area. So you can choose to aggregate the states of the countries.
This is done using a nearest states algorithm. The result is available only after layout validation.
</p>
</li></ul>



<h3>Value</h3>

<p>An object of class <code>mapLayout</code>.
</p>


<h3>See Also</h3>

<p>[plotMapLayout()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Read the coordinates of the areas in the Antares interface, then convert it
# in a map layout.
layout &lt;- readLayout()
ml &lt;- mapLayout(layout)

# visualize mapLayout
plotMapLayout(ml)

# Save the result for future use
save(ml, file = "ml.rda")


## End(Not run)

</code></pre>

<hr>
<h2 id='modRpart'>Make rpart from antares data</h2><span id='topic+modRpart'></span>

<h3>Description</h3>

<p>Make rpart from antares data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modRpart(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modRpart_+3A_data">data</code></td>
<td>
<p>an antaresData after use of [antaresProcessing::mergeAllAntaresData]</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
setSimulationPath("Mystud", 1)
mydata &lt;- readAntares(areas = "all", select = "OIL")
mydata &lt;- mergeAllAntaresData(mydata)
modRpart(mydata)

## End(Not run)

</code></pre>

<hr>
<h2 id='modXY'>Make X-Y bockey plot, interactive version</h2><span id='topic+modXY'></span>

<h3>Description</h3>

<p>Make X-Y bockey plot, interactive version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modXY(x, xyCompare = c("union", "intersect"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modXY_+3A_x">x</code></td>
<td>
<p>optsH5 or list of optsH5</p>
</td></tr>
<tr><td><code id="modXY_+3A_xycompare">xyCompare</code></td>
<td>
<p>Use when you compare studies, can be &quot;union&quot; or &quot;intersect&quot;. If union, all
of mcYears in one of studies will be selectable. If intersect, only mcYears in all
studies will be selectable.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
opts &lt;- setSimulationPath("h5File")
modXY(opts)
modXY(list(opts, opts))


## End(Not run)

</code></pre>

<hr>
<h2 id='placeGeoPoints-shiny'>Shiny bindings for placeGeoPoints</h2><span id='topic+placeGeoPoints-shiny'></span><span id='topic+leafletDragPointsOutput'></span><span id='topic+renderLeafletDragPoints'></span>

<h3>Description</h3>

<p>Output and render functions for using placeGeoPoints within Shiny
applications and interactive Rmd documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leafletDragPointsOutput(outputId, width = "100%", height = "400px")

renderLeafletDragPoints(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="placeGeoPoints-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="placeGeoPoints-shiny_+3A_width">width</code>, <code id="placeGeoPoints-shiny_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like <code>'100%'</code>,
<code>'400px'</code>, <code>'auto'</code>) or a number, which will be coerced to a
string and have <code>'px'</code> appended.</p>
</td></tr>
<tr><td><code id="placeGeoPoints-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a placeGeoPoints</p>
</td></tr>
<tr><td><code id="placeGeoPoints-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="placeGeoPoints-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>

<hr>
<h2 id='plot.mapLayout'>Plot method for map layout</h2><span id='topic+plot.mapLayout'></span>

<h3>Description</h3>

<p>This method can be used to visualize the network of an antares study.
It generates an interactive map with a visual representaiton of a
map layout created with function [mapLayout()].
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mapLayout'
plot(
  x,
  colAreas = x$coords$color,
  dataAreas = 1,
  opacityArea = 1,
  areaMaxSize = 30,
  areaMaxHeight = 50,
  areaChartType = c("auto", "bar", "pie", "polar-area", "polar-radius"),
  labelArea = NULL,
  labelMinSize = 8,
  labelMaxSize = 8,
  colLinks = "#CCCCCC",
  sizeLinks = 3,
  opacityLinks = 1,
  dirLinks = 0,
  links = TRUE,
  areas = TRUE,
  tilesURL = defaultTilesURL(),
  preprocess = function(map) {
     map
 },
  width = NULL,
  height = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.mapLayout_+3A_x">x</code></td>
<td>
<p>Object created with function [mapLayout()]</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_colareas">colAreas</code></td>
<td>
<p>Vector of colors for areas. By default, the colors used in the Antares
software are used.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_dataareas">dataAreas</code></td>
<td>
<p>A numeric vector or a numeric matrix that is passed to function
<code>link[addMinicharts]</code>. A single vector will produce circles with
different radius. A matrix will produce bar charts or pie charts or 
polar charts, depending on the value of <code>areaChartType</code></p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_opacityarea">opacityArea</code></td>
<td>
<p>Opacity of areas. It has to be a numeric vector with values
between 0 and 1.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_areamaxsize">areaMaxSize</code></td>
<td>
<p>Maximal width in pixels of the symbols that represent 
areas on the map.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_areamaxheight">areaMaxHeight</code></td>
<td>
<p>Maximal height of bars. Used only if a barchart representation is used.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_areacharttype">areaChartType</code></td>
<td>
<p>Type of chart to use to represent areas.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_labelarea">labelArea</code></td>
<td>
<p>Character vector containing labels to display inside areas.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_labelminsize">labelMinSize</code></td>
<td>
<p>minimal height of labels.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_labelmaxsize">labelMaxSize</code></td>
<td>
<p>maximal height of labels.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_collinks">colLinks</code></td>
<td>
<p>Vector of colors for links.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_sizelinks">sizeLinks</code></td>
<td>
<p>Line width of the links, in pixels.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_opacitylinks">opacityLinks</code></td>
<td>
<p>Opacity of the links. It has to be a numeric vector with values
between 0 and 1.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_dirlinks">dirLinks</code></td>
<td>
<p>Single value or vector indicating the direction of the link. Possible values
are 0, -1 and 1. If it equals 0, then links are repsented by a simple line. 
If it is equal to 1 or -1 it is represented by a line with an arrow pointing
respectively the destination and the origin of the link.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_links">links</code></td>
<td>
<p>Should links be drawn on the map ?</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_areas">areas</code></td>
<td>
<p>Should areas be drawn on the map ?</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_tilesurl">tilesURL</code></td>
<td>
<p>URL template used to get map tiles. The followign site 
provides some URLs;
<a href="https://leaflet-extras.github.io/leaflet-providers/preview/">https://leaflet-extras.github.io/leaflet-providers/preview/</a></p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_preprocess">preprocess</code></td>
<td>
<p>A function that takes as argument a map and that returns a
modified version of this map. This parameter can be used to add extra
information on a map.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_width">width</code></td>
<td>
<p>Width of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_height">height</code></td>
<td>
<p>Height of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="plot.mapLayout_+3A_...">...</code></td>
<td>
<p>Currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function generates an <code>htmlwidget</code> of class <code>leaflet</code>. It can
be stored in a variable and modified with package 
[leaflet::leaflet()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Read the coordinates of the areas in the Antares interface, then convert it
# in a map layout.
layout &lt;- readLayout()
ml &lt;- mapLayout(layout)

# Save the result for future use
save(ml, file = "ml.rda")

# Plot the network on an interactive map
plot(ml)

# change style
plot(ml, colAreas = gray(0.5), colLinks = "orange")

# Use polar area charts to represent multiple values for each area.
nareas &lt;- nrow(ml$coords)
fakeData &lt;- matrix(runif(nareas * 3), ncol = 3)
plot(ml, sizeAreas = fakeData)

# Store the result in a variable to change it with functions from leaflet 
# package
library(leaflet)

center &lt;- c(mean(ml$coords$x), mean(ml$coords$y))

p &lt;- plot(ml)
p %&gt;% 
  addCircleMarker(center[1], center[2], color = "red", 
                  popup = "I'm the center !")

## End(Not run)

</code></pre>

<hr>
<h2 id='plotMap'>Display results of a simulation on a map</h2><span id='topic+plotMap'></span>

<h3>Description</h3>

<p>This function generates an interactive map that let the user visually explore
the results of an Antares simulation. By default the function starts a Shiny 
gadget that let the user which variables to represent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMap(
  x,
  refStudy = NULL,
  mapLayout,
  colAreaVar = "none",
  sizeAreaVars = c(),
  areaChartType = c("bar", "pie", "polar-area", "polar-radius"),
  uniqueScale = FALSE,
  showLabels = FALSE,
  popupAreaVars = c(),
  labelAreaVar = "none",
  colLinkVar = "none",
  sizeLinkVar = "none",
  popupLinkVars = c(),
  closePopupOnClick = TRUE,
  type = c("detail", "avg"),
  timeId = NULL,
  mcYear = "average",
  main = "",
  typeSizeAreaVars = FALSE,
  aliasSizeAreaVars = c(),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  options = plotMapOptions(),
  width = NULL,
  height = NULL,
  dateRange = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  sizeMiniPlot = FALSE,
  language = "en",
  hidden = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotMap_+3A_x">x</code></td>
<td>
<p>Object of class <code>antaresDataList</code> created with 
[antaresRead::readAntares()] and containing areas and links data.
It can be a list of <code>antaresData</code> objects. 
In this case, one chart is created for each object.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_refstudy">refStudy</code></td>
<td>
<p>An object of class <code>antaresData</code> created with function 
[antaresRead::readAntares()] containing data for areas and or
districts. Can also contains an opts who refer to a h5 file.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_maplayout">mapLayout</code></td>
<td>
<p>Object created with function [antaresViz::mapLayout()]</p>
</td></tr>
<tr><td><code id="plotMap_+3A_colareavar">colAreaVar</code></td>
<td>
<p>Name of a variable present in <code>x$areas</code>. The values of this variable
are represented by the color of the areas on the map. If <code>"none"</code>, then
the default color is used for all areas.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_sizeareavars">sizeAreaVars</code></td>
<td>
<p>Vector of variables present in <code>x$areas</code> to associate with the size of 
areas on the map. If this parameter has length equal to 0, all areas have the
same size. If it has length equal to one, then the radius of the areas change
depending on the values of the variable choosen. If it has length greater than
1 then areas are represented by a polar area chart where the size of each section
depends on the values of each variable.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_areacharttype">areaChartType</code></td>
<td>
<p>If parameter <code>sizeAreaVars</code> contains multiple variables, this parameter
determines the type of representation. Possible values are <code>"bar"</code> for
bar charts, <code>"pie"</code> for pie charts, <code>"polar-area"</code> and 
<code>"polar-radius"</code> for polar area charts where the values are represented
respectively by the area or the radius of the slices.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_uniquescale">uniqueScale</code></td>
<td>
<p>If the map contains polar or bar charts, should the different variables 
represented use the same scale or should each variable have its own scale ?
This parameter should be TRUE only if the variables have the same unit and 
are comparable : for instance production variables.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_showlabels">showLabels</code></td>
<td>
<p>Used only when <code>sizeAreaVars</code> contains multiple variables. If it is 
<code>TRUE</code>, then values of each variable are displayed.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_popupareavars">popupAreaVars</code></td>
<td>
<p>Vector of variables to display when user clicks on an area.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_labelareavar">labelAreaVar</code></td>
<td>
<p>Variable to display inside the areas. This parameter is used only if 
parameter <code>sizeAreaVars</code> contains zero or one variable.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_collinkvar">colLinkVar</code></td>
<td>
<p>Name of a variable present in <code>x$links</code>. The values of this variable
are represented by the color of the links on the map. If <code>"none"</code>, then
the default color is used for all links</p>
</td></tr>
<tr><td><code id="plotMap_+3A_sizelinkvar">sizeLinkVar</code></td>
<td>
<p>Name of a variable present in <code>x$links</code>. Its values are represented by
the line width of the links on the map.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_popuplinkvars">popupLinkVars</code></td>
<td>
<p>Vector of variables to display when user clicks on a link</p>
</td></tr>
<tr><td><code id="plotMap_+3A_closepopuponclick">closePopupOnClick</code></td>
<td>
<p><code>LogicalValue</code>, if <code>TRUE</code> the popups will automatically be closed with each click. If <code>FALSE</code>, the popups will stay open.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_type">type</code></td>
<td>
<p>If <code>type="avg"</code>, the data is averaged by area/and or link and
represented on the map. If it is equal to <code>"detail"</code>, only one time
step at a time. In interactive mode, an input control permits to choose the
time step shown.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_timeid">timeId</code></td>
<td>
<p>time id present in the data.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_mcyear">mcYear</code></td>
<td>
<p>If <code>x</code>, contains multiple Monte-Carlo scenarios, this parameter 
determine which scenario is displayed. Must be an integer representing the
index of the scenario or the word &quot;average&quot;. In this case data are 
averaged.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_main">main</code></td>
<td>
<p>Title of the map.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_typesizeareavars">typeSizeAreaVars</code></td>
<td>
<p><code>logical</code>. Select <code>sizeAreaVars</code> using alias ? Default to <code>FALSE</code></p>
</td></tr>
<tr><td><code id="plotMap_+3A_aliassizeareavars">aliasSizeAreaVars</code></td>
<td>
<p>If <code>typeSizeAreaVars</code> is set to TRUE, name of alias. You can find the list 
of alias with the function [antaresRead::showAliases()]</p>
</td></tr>
<tr><td><code id="plotMap_+3A_compare">compare</code></td>
<td>
<p>An optional character vector containing names of parameters. When it is set,
two charts are outputed with their own input controls. Alternatively, it can
be a named list with names corresponding to parameter names and values being
list with the initial values of the given parameter for each chart. See details
if you are drawing a map.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_compareopts">compareOpts</code></td>
<td>
<p>List of options that indicates the number of charts to create and their 
position. Check out the documentation of 
[manipulateWidget::compareOptions] to see available options.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_interactive">interactive</code></td>
<td>
<p>LogicalValue. If <code>TRUE</code>, then a shiny gadget is launched that lets
the user interactively choose the areas or districts to display.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_options">options</code></td>
<td>
<p>List of parameters that override some default visual settings. See the
help of [antaresViz::plotMapOptions()].</p>
</td></tr>
<tr><td><code id="plotMap_+3A_width">width</code></td>
<td>
<p>Width of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_height">height</code></td>
<td>
<p>Height of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_daterange">dateRange</code></td>
<td>
<p>A vector of two dates. Only data points between these two dates are 
displayed. If NULL, then all data is displayed.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_xycompare">xyCompare</code></td>
<td>
<p>Use when you compare studies, can be &quot;union&quot; or &quot;intersect&quot;. If union, all
of mcYears in one of studies will be selectable. If intersect, only mcYears in all
studies will be selectable.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_h5requestfiltering">h5requestFiltering</code></td>
<td>
<p>Contains arguments used by default for h5 request,
typically h5requestFiltering = list(mcYears = 3)</p>
</td></tr>
<tr><td><code id="plotMap_+3A_timesteph5">timeSteph5</code></td>
<td>
<p><code>character</code> timeStep to read in h5 file. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_mcyearh5">mcYearh5</code></td>
<td>
<p><code>numeric</code> mcYear to read for h5. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_tablesh5">tablesh5</code></td>
<td>
<p><code>character</code> tables for h5 (&quot;areas&quot; &quot;links&quot;, &quot;clusters&quot; or &quot;disticts&quot;). Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_sizeminiplot">sizeMiniPlot</code></td>
<td>
<p><code>boolean</code> variable size for miniplot</p>
</td></tr>
<tr><td><code id="plotMap_+3A_language">language</code></td>
<td>
<p><code>character</code> language use for label. Defaut to 'en'. Can be 'fr'.</p>
</td></tr>
<tr><td><code id="plotMap_+3A_hidden">hidden</code></td>
<td>
<p><code>logical</code> Names of input to hide. Defaut to NULL</p>
</td></tr>
<tr><td><code id="plotMap_+3A_...">...</code></td>
<td>
<p>Other arguments for [manipulateWidget::manipulateWidget]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>compare argument can take following values :
</p>

<ul>
<li><p> &quot;mcYear&quot;
</p>
</li>
<li><p> &quot;type&quot;
</p>
</li>
<li><p> &quot;colAreaVar&quot;
</p>
</li>
<li><p> &quot;sizeAreaVars&quot;
</p>
</li>
<li><p> &quot;areaChartType&quot;
</p>
</li>
<li><p> &quot;showLabels&quot;
</p>
</li>
<li><p> &quot;popupAreaVars&quot;
</p>
</li>
<li><p> &quot;labelAreaVar&quot;
</p>
</li>
<li><p> &quot;colLinkVar&quot;
</p>
</li>
<li><p> &quot;sizeLinkVar&quot;
</p>
</li>
<li><p> &quot;popupLinkVars&quot;
</p>
</li>
<li><p> &quot;typeSizeAreaVars&quot;
</p>
</li>
<li><p> &quot;aliasSizeAreaVars&quot;
</p>
</li></ul>



<h3>Value</h3>

<p>An htmlwidget of class &quot;leaflet&quot;. It can be modified with package 
<code>leaflet</code>. By default the function starts a shiny gadget that lets the
user play with most of the parameters of the function. The function returns
a leaflet map when the user clicks on the button <code>"OK"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mydata &lt;- readAntares(areas = "all", links = "all", timeStep = "daily",
                      select = "nostat")

# Place areas on a map. Ths has to be done once for a given study. Then the
# object returned by "mapLayout" may be saved and reloaded with
# functions save and load

layout &lt;- readLayout()
ml &lt;- mapLayout(layout = layout)
save("ml", file = "ml.rda")

plotMap(x = mydata, mapLayout = ml)

# Specify the variables to use to control the color or size of elements.
plotMap(mydata, mapLayout =  ml, 
        sizeAreaVars = c("WIND", "SOLAR", "H. ROR"),
        sizeLinkVar = "FLOW LIN.")

# Change default graphical properties
plotMap(x = mydata, mapLayout = ml, options = list(colArea="red", colLink = "orange"))
plotMap(x = list(mydata, mydata), mapLayout =  ml)

# Use custom alias
setAlias("custom_alias", "short description", c("OIL", "GAS", "COAL")) 
plotMap(x = mydata, mapLayout = ml, typeSizeAreaVars = TRUE, 
    aliasSizeAreaVars = "custom_alias")
    
plotMap(x = mydata, mapLayout = ml, interactive = FALSE, 
    language = "fr", aliasSizeAreaVars = "Renouvelable", typeSizeAreaVars = TRUE)

# Use h5 for dynamic request / exploration in a study
# Set path of simulaiton
setSimulationPath(path = path1)

# Convert your study in h5 format
writeAntaresH5(path = myNewPath)

# Redefine sim path with h5 file
opts &lt;- setSimulationPath(path = myNewPath)
plotMap(x = opts, mapLayout = ml)

# Compare elements in a single study
plotMap(x = opts, mapLayout = ml,  .compare = "mcYear")

# Compare 2 studies
plotMap(x = list(opts, opts2), mapLayout = ml)

# Compare 2 studies with argument refStudies 
plotMap(x = opts, refStudy = opts2, mapLayout = ml)
plotMap(x = opts, refStudy = opts2, mapLayout = ml, interactive = FALSE, mcYearh5 = 2) 
plotMap(x = opts, refStudy = opts2, mapLayout = ml, h5requestFiltering = 
list(mcYears = myMcYear))

## End(Not run)

</code></pre>

<hr>
<h2 id='plotMapLayout'>Visualize mapLayout output.</h2><span id='topic+plotMapLayout'></span>

<h3>Description</h3>

<p>Visualize mapLayout output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMapLayout(mapLayout)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotMapLayout_+3A_maplayout">mapLayout</code></td>
<td>
<p>object returned by function [mapLayout()]</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>[mapLayout()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Read the coordinates of the areas in the Antares interface, then convert it
# in a map layout.
layout &lt;- readLayout()
ml &lt;- mapLayout(layout)

# visualize mapLayout
plotMapLayout(ml)


## End(Not run)

</code></pre>

<hr>
<h2 id='plotMapOptions'>Graphical options for plotMap</h2><span id='topic+plotMapOptions'></span><span id='topic+defaultTilesURL'></span><span id='topic+colorScaleOptions'></span>

<h3>Description</h3>

<p>These functions get and set options that control some graphical aspects 
of maps created with [plotMap()].
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMapOptions(
  areaDefaultCol = "#DDDDE5",
  areaDefaultSize = 30,
  areaMaxSize = 50,
  areaMaxHeight = 50,
  areaChartColors = NULL,
  areaColorScaleOpts = colorScaleOptions(),
  labelMinSize = 8,
  labelMaxSize = 24,
  linkDefaultCol = "#BEBECE",
  linkDefaultSize = 3,
  linkMaxSize = 15,
  linkColorScaleOpts = colorScaleOptions(),
  legend = c("choose", "visible", "hidden"),
  tilesURL = defaultTilesURL(),
  preprocess = function(map) {
     map
 }
)

defaultTilesURL()

colorScaleOptions(
  breaks = 5,
  domain = NULL,
  negCol = "#FF0000",
  zeroCol = "#FAFAFA",
  posCol = "#0000FF",
  naCol = "#EEEEEE",
  zeroTol = NULL,
  colors = NULL,
  levels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotMapOptions_+3A_areadefaultcol">areaDefaultCol</code></td>
<td>
<p>default color of areas.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_areadefaultsize">areaDefaultSize</code></td>
<td>
<p>default size of areas.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_areamaxsize">areaMaxSize</code></td>
<td>
<p>maximal size of an area when it represents the value of some variable.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_areamaxheight">areaMaxHeight</code></td>
<td>
<p>Maximal height of bars. Used only if a barchart representation is used.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_areachartcolors">areaChartColors</code></td>
<td>
<p>Vector of colors to use in polar area charts and bar charts</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_areacolorscaleopts">areaColorScaleOpts</code></td>
<td>
<p>List of options used to construct a continuous color scale. This list should
be generated with function <code>colorScaleOptions</code>.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_labelminsize">labelMinSize</code></td>
<td>
<p>minimal height of labels.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_labelmaxsize">labelMaxSize</code></td>
<td>
<p>maximal height of labels.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_linkdefaultcol">linkDefaultCol</code></td>
<td>
<p>Default color of links.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_linkdefaultsize">linkDefaultSize</code></td>
<td>
<p>Default line width of links.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_linkmaxsize">linkMaxSize</code></td>
<td>
<p>Maximal line width of a link when it represents the value of some variable.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_linkcolorscaleopts">linkColorScaleOpts</code></td>
<td>
<p>List of options used to construct a continuous color scale. This list should
be generated with function <code>colorScaleOptions</code>.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_legend">legend</code></td>
<td>
<p>Should the legend be displayed or not ? Default is to mask the legend but
add a button to display it. Other values are &quot;visible&quot; to make the legend
always visible and &quot;hidden&quot; to mask it.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_tilesurl">tilesURL</code></td>
<td>
<p>URL template used to get map tiles. The followign site 
provides some URLs;
<a href="https://leaflet-extras.github.io/leaflet-providers/preview/">https://leaflet-extras.github.io/leaflet-providers/preview/</a></p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_preprocess">preprocess</code></td>
<td>
<p>A function that takes as argument a map and that returns a
modified version of this map. This parameter can be used to add extra
information on a map.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_breaks">breaks</code></td>
<td>
<p>Either a single number indicating the approximate number of colors to use, or
a vector of values at which values to change color. 
In the first case, the function tries to cut the data nicely, so the real 
number of colors used may vary.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_domain">domain</code></td>
<td>
<p>Range of the data, ie. the range of possible values. If <code>NULL</code>, the
the range of the data is used</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_negcol">negCol</code></td>
<td>
<p>color of the extreme negative value.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_zerocol">zeroCol</code></td>
<td>
<p>color of the 0 value.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_poscol">posCol</code></td>
<td>
<p>Color of the extreme positive value.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_nacol">naCol</code></td>
<td>
<p>Color for missing values</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_zerotol">zeroTol</code></td>
<td>
<p>All values in the interval <code>\[-zeroTol, +zeroTol\]</code> are mapped to the
<code>zeroCol</code> color. If <code>NULL</code>, the function tries to pick a nice
value that is approximately equal to 1% of the maximal value.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_colors">colors</code></td>
<td>
<p>Vector of colors. If it is set and if user manually sets break points, then
these colors are used instead of the colors defined by parameters negCol,
zeroCol and posCol.</p>
</td></tr>
<tr><td><code id="plotMapOptions_+3A_levels">levels</code></td>
<td>
<p>Vector of the distinct values a variable can take. Only used when the 
variable to represent is a categorical variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the values of the different graphical parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Example : Change color for area variables 

library(antaresViz)

studyPath &lt;- "path/to/study"
setSimulationPath(path = studyPath, simulation = -1)
myData&lt;-readAntares(areas = "all", links = "all")

ml&lt;-readRDS(file = "path/to/mapLayout.rds")

myOption&lt;-plotMapOptions(areaChartColors = c("yellow", "violetred"))

plotMap(myData, 
        ml, 
        sizeAreaVars = c("SOLAR", "WIND"), 
        type="avg", 
        interactive = FALSE, 
       options = myOption
)

# for pie chart 
plotMap(myData, 
        ml, 
        sizeAreaVars = c("SOLAR", "WIND"), 
        type="avg", 
        interactive = FALSE, 
        options = myOption,
        areaChartType = "pie",
        sizeMiniPlot = TRUE
)

# Example : Change color for link and area variables 
myOption &lt;- plotMapOptions(areaChartColors = c("yellow", "violetred"), linkDefaultCol = "green")
plotMap(myData, 
        ml, 
        type="avg", 
        sizeAreaVars = c("SOLAR", "WIND"), 
        interactive = FALSE, 
        options = myOption
)

# Change default area color 
myOption &lt;- plotMapOptions(areaDefaultCol = "green")
plotMap(myData, 
        ml, 
        interactive = FALSE, 
        options = myOption
)

# Change the scale 
plotMap(myData, 
        ml, 
        colAreaVar = "MRG. PRICE",
        options = plotMapOptions(
          areaColorScaleOpts = colorScaleOptions(
            breaks = c(-1000, 100, 200, 20000),
            colors = c("green", "orange", "red")
          )
        ),
        interactive = FALSE
)

## End(Not run)

</code></pre>

<hr>
<h2 id='plotThermalGroupCapacities'>Plot for Thermal Group Capacities</h2><span id='topic+plotThermalGroupCapacities'></span>

<h3>Description</h3>

<p>Plot for Thermal Group Capacities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotThermalGroupCapacities(
  data,
  area = "all",
  main = "Thermal group capacities"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotThermalGroupCapacities_+3A_data">data</code></td>
<td>
<p>data.table of Thermal Group capacities</p>
</td></tr>
<tr><td><code id="plotThermalGroupCapacities_+3A_area">area</code></td>
<td>
<p>areas to select, default all</p>
</td></tr>
<tr><td><code id="plotThermalGroupCapacities_+3A_main">main</code></td>
<td>
<p>title</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
opts &lt;- setSimulationPath(getwd())
plotThermalGroupCapacities( thermalGroupCapacities(opts))

## End(Not run)

</code></pre>

<hr>
<h2 id='plotXY'>Plot density between X et Y with ggplot2 and plotly</h2><span id='topic+plotXY'></span>

<h3>Description</h3>

<p>Plot density between X et Y with ggplot2 and plotly
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotXY(
  data,
  x,
  y,
  precision = 30,
  sizeOnCount = FALSE,
  outLine = TRUE,
  transform = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotXY_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> can be antaresData object</p>
</td></tr>
<tr><td><code id="plotXY_+3A_x">x</code></td>
<td>
<p><code>character</code>, x variable</p>
</td></tr>
<tr><td><code id="plotXY_+3A_y">y</code></td>
<td>
<p><code>character</code>, y variable</p>
</td></tr>
<tr><td><code id="plotXY_+3A_precision">precision</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="plotXY_+3A_sizeoncount">sizeOnCount</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="plotXY_+3A_outline">outLine</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="plotXY_+3A_transform">transform</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

setSimulationPath("myStudy")
myData &lt;- readAntares()

plotXY(myData, "NODU", "LOAD", precision = 50,
         sizeOnCount = FALSE)
         
myData &lt;- readAntares(areas = "all", links = "all")    
myData &lt;- mergeAllAntaresData(myData)  
plotXY(myData, "OP. COST_max_b", "OP. COST_max_c", precision = 50,
         sizeOnCount = FALSE)
         
         

## End(Not run)
   
</code></pre>

<hr>
<h2 id='prodStackAliases'>Visualize the production stack of an area</h2><span id='topic+prodStackAliases'></span><span id='topic+setProdStackAlias'></span><span id='topic+prodStack'></span>

<h3>Description</h3>

<p><code>prodStack</code> draws the production stack for a set of areas or districts.
User can see available stacks with <code>prodStackAliases</code> and create new ones
with <code>setProdStackAlias</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prodStackAliases()

setProdStackAlias(
  name,
  variables,
  colors,
  lines = NULL,
  lineColors = NULL,
  lineWidth = 3,
  description = NULL
)

prodStack(
  x,
  stack = "eco2mix",
  areas = NULL,
  mcYear = "average",
  dateRange = NULL,
  yMin = NULL,
  yMax = NULL,
  customTicks = NULL,
  main = .getLabelLanguage("Production stack", language),
  unit = c("MWh", "GWh", "TWh"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  legend = TRUE,
  legendId = sample(1e+09, 1),
  groupId = legendId,
  updateLegendOnMouseOver = TRUE,
  legendItemsPerRow = 5,
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  stepPlot = FALSE,
  drawPoints = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  refStudy = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prodStackAliases_+3A_name">name</code></td>
<td>
<p>name of the stack to create or update</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_variables">variables</code></td>
<td>
<p>A named list of expressions created with [base::alist]. The
name of each element is the name of the variable to draw in the stacked
graph. The element itself is an expression explaining how to compute the
variable (see examples).</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_colors">colors</code></td>
<td>
<p>Vector of colors with same length as parameter <code>variables</code>. If 
<code>variables</code> is an alias, then this argument should be <code>NULL</code> in 
order to use default colors.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_lines">lines</code></td>
<td>
<p>A named list of expressions created with [base::alist]
indicating how to compute the curves to display on top of the stacked graph.
It should be <code>NULL</code> if there is no curve to trace or if parameter
<code>variables</code> is an alias.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_linecolors">lineColors</code></td>
<td>
<p>Vector of colors with same length as parameter <code>lines</code>. This argument
should be <code>NULL</code> if there is no curve to trace or if parameter
<code>variables</code> is an alias.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_linewidth">lineWidth</code></td>
<td>
<p>Optionnal. Defaut to 3. Vector of width with same length as parameter <code>lines</code> (or only one value).</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_description">description</code></td>
<td>
<p>Description of the stack. It is displayed by function 
<code>prodStackAliases</code>.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_x">x</code></td>
<td>
<p>An object of class <code>antaresData</code> created with function 
[antaresRead::readAntares()] containing data for areas and or
districts. it can be a list of <code>antaresData</code> objects. 
In this case, one chart is created for each object. 
Can also contains opts who refer to a h5 file or list of opts.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_stack">stack</code></td>
<td>
<p>Name of the stack to use. One can visualize available stacks with 
<code>prodStackAliases</code></p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_areas">areas</code></td>
<td>
<p>Vector of area or district names. The data of these areas or districts is
aggregated by the function to construct the production stack.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_mcyear">mcYear</code></td>
<td>
<p>If <code>x</code>, contains multiple Monte-Carlo scenarios, this parameter 
determine which scenario is displayed. Must be an integer representing the
index of the scenario or the word &quot;average&quot;. In this case data are 
averaged.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_daterange">dateRange</code></td>
<td>
<p>A vector of two dates. Only data points between these two dates are 
displayed. If NULL, then all data is displayed.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_ymin">yMin</code></td>
<td>
<p><code>numeric</code>, the minimum value to be displayed on all y Axis. If <code>NULL</code>, the min value is automatically set</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_ymax">yMax</code></td>
<td>
<p><code>numeric</code>, the maximum value to be displayed on all y Axis. If <code>NULL</code>, the max value is automatically set</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_customticks">customTicks</code></td>
<td>
<p><code>numeric</code> vector of the custom ticks values to be displayed on the y Axis. If <code>NULL</code>, the ticks are automatically generated</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_main">main</code></td>
<td>
<p>Title of the graph.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_unit">unit</code></td>
<td>
<p>Unit used in the graph. Possible values are &quot;MWh&quot;, &quot;GWh&quot; or &quot;TWh&quot;.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_compare">compare</code></td>
<td>
<p>An optional character vector containing names of parameters. When it is set,
two charts are outputed with their own input controls. Alternatively, it can
be a named list with names corresponding to parameter names and values being
list with the initial values of the given parameter for each chart. See details
if you are drawing a map.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_compareopts">compareOpts</code></td>
<td>
<p>List of options that indicates the number of charts to create and their 
position. Check out the documentation of 
[manipulateWidget::compareOptions] to see available options.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_interactive">interactive</code></td>
<td>
<p>LogicalValue. If <code>TRUE</code>, then a shiny gadget is launched that lets
the user interactively choose the areas or districts to display.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_legend">legend</code></td>
<td>
<p>Logical value indicating if a legend should be drawn. This argument is 
usefull when one wants to create a shared legend with
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_legendid">legendId</code></td>
<td>
<p>Id of the legend linked to the graph. This argument is 
usefull when one wants to create a shared legend with 
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_groupid">groupId</code></td>
<td>
<p>Parameter that can be used to synchronize the horizontal 
zoom of multiple charts. All charts that need to be synchronized must
have the same group.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_updatelegendonmouseover">updateLegendOnMouseOver</code></td>
<td>
<p><code>LogicalValue</code>. If <code>TRUE</code> the legend will be updated when the mouse is over a stack. If <code>FALSE</code> the legend will be updated on a click</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_legenditemsperrow">legendItemsPerRow</code></td>
<td>
<p>Number of elements to put in each row of the legend.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_width">width</code></td>
<td>
<p>Width of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_height">height</code></td>
<td>
<p>Height of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_xycompare">xyCompare</code></td>
<td>
<p>Use when you compare studies, can be &quot;union&quot; or &quot;intersect&quot;. If union, all
of mcYears in one of studies will be selectable. If intersect, only mcYears in all
studies will be selectable.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_h5requestfiltering">h5requestFiltering</code></td>
<td>
<p>Contains arguments used by default for h5 request,
typically h5requestFiltering = list(areas = &quot;a&quot;, mcYears = 2)</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_stepplot">stepPlot</code></td>
<td>
<p><code>boolean</code>, step style for curves.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_drawpoints">drawPoints</code></td>
<td>
<p><code>boolean</code>, add points on graph</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_timesteph5">timeSteph5</code></td>
<td>
<p><code>character</code> timeStep to read in h5 file. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_mcyearh5">mcYearh5</code></td>
<td>
<p><code>numeric</code> mcYear to read for h5. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_tablesh5">tablesh5</code></td>
<td>
<p><code>character</code> tables for h5 (&quot;areas&quot; &quot;links&quot;, &quot;clusters&quot; or &quot;disticts&quot;). Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_language">language</code></td>
<td>
<p><code>character</code> language use for label. Defaut to 'en'. Can be 'fr'.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_hidden">hidden</code></td>
<td>
<p><code>logical</code> Names of input to hide. Defaut to NULL</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_refstudy">refStudy</code></td>
<td>
<p>An object of class <code>antaresData</code> created with function 
[antaresRead::readAntares()] containing data for areas and or
districts. Can also contains an opts who refer to a h5 file.</p>
</td></tr>
<tr><td><code id="prodStackAliases_+3A_...">...</code></td>
<td>
<p>Other arguments for [manipulateWidget::manipulateWidget]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>compare argument can take following values :
</p>

<ul>
<li><p> &quot;mcYear&quot;
</p>
</li>
<li><p> &quot;main&quot;
</p>
</li>
<li><p> &quot;unit&quot;
</p>
</li>
<li><p> &quot;areas&quot;
</p>
</li>
<li><p> &quot;legend&quot;
</p>
</li>
<li><p> &quot;stack&quot;
</p>
</li>
<li><p> &quot;stepPlot&quot;
</p>
</li>
<li><p> &quot;drawPoints&quot;
</p>
</li></ul>



<h3>Value</h3>

<p><code>prodStack</code> returns an interactive html graphic. If argument
<code>interactive</code> is <code>TRUE</code>, then a shiny gadget is started and the
function returns an interactive html graphic when the user clicks on button
&quot;Done&quot;.
</p>
<p><code>prodStackAliases</code> displays the list of available aliases.
</p>
<p><code>setProdStackAlias</code> creates or updates a stack alias.
</p>


<h3>See Also</h3>

<p>[prodStackLegend()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mydata &lt;- readAntares(areas = "all", timeStep = "daily")

# Start a shiny gadget that permits to choose areas to display.
prodStack(x = mydata, unit = "GWh")

# Use in a non-interactive way
prodStack(x = mydata, unit = "GWh", areas = "fr", interactive = FALSE)

# Define a custom stack
setProdStackAlias(
  name = "Wind and solar",
  variables = alist(wind = WIND, solar = SOLAR),
  colors = c("green", "orange")
)

prodStack(x = mydata, unit = "GWh", stack = "Wind and solar")
                
# In a custom stack it is possible to use computed values
setProdStackAlias(
  name = "Renewable",
  variables = alist(
    renewable = WIND + SOLAR + `H. ROR` + `H. STOR` + `MISC. NDG`, 
    thermal = NUCLEAR + LIGNITE + COAL + GAS + OIL + `MIX. FUEL` + `MISC. DTG`
  ),
  colors = c("green", gray(0.3)),
  lines = alist(goalRenewable = LOAD * 0.23),
  lineColors = "#42EB09"
)

prodStack(x = mydata, unit = "GWh", stack = "renewable")

# Use compare
prodStack(x = mydata, compare = "areas")
prodStack(x = mydata, unit = "GWh", compare = "mcYear")
prodStack(x = mydata, unit = "GWh", compare = "main")
prodStack(x = mydata, unit = "GWh", compare = "unit")
prodStack(x = mydata, unit = "GWh", compare = "areas")
prodStack(x = mydata, unit = "GWh", compare = "legend")
prodStack(x = mydata, unit = "GWh", compare = "stack")
prodStack(x = mydata, unit = "GWh", compare = c("mcYear", "areas"))


# Compare studies
prodStack(list(mydata, mydata))
# Compare studies with refStudy argument 
prodStack(x = myData1, refStudy = myData2)
prodStack(x = myData1, refStudy = myData2, interactive = FALSE)
prodStack(x = list(myData2, myData3, myData4), refStudy = myData1)
prodStack(x = list(myData2, myData3, myData4), refStudy = myData1, interactive = FALSE)


# Use h5 opts
# Set path of simulaiton
setSimulationPath(path = path1)

# Convert your study in h5 format
writeAntaresH5(path = mynewpath)

# Redefine sim path with h5 file
opts &lt;- setSimulationPath(path = mynewpath)
prodStack(x = opts)

# Compare elements in a single study
prodStack(x = opts, .compare = "mcYear")

# Compare 2 studies
prodStack(x = list(opts, opts2))

# Compare 2 studies with argument refStudies 
prodStack(x = opts, refStudy = opts2)
prodStack(x = opts, refStudy = opts2, interactive = FALSE, mcYearh5 = 2, areas = myArea) 
prodStack(x = opts, refStudy = opts2, h5requestFiltering = list(areas = myArea, 
mcYears = 2))

               

## End(Not run)

</code></pre>

<hr>
<h2 id='prodStackExchangesLegend'>Plot an interactive legend for time series plots</h2><span id='topic+prodStackExchangesLegend'></span><span id='topic+prodStackLegend'></span><span id='topic+tsLegend'></span>

<h3>Description</h3>

<p>These functions create a nice looking legend that displays values when the user
hovers a time series produced with plot this package. By 
default, the different functions already output a legend. This function
is mostly useful to share a unique legend between two or more time series plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prodStackExchangesLegend(
  stack = "default",
  legendItemsPerRow = 5,
  legendId = "",
  language = "en"
)

prodStackLegend(
  stack = "eco2mix",
  legendItemsPerRow = 5,
  legendId = "",
  language = "en"
)

tsLegend(labels, colors, types = "line", legendItemsPerRow = 5, legendId = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prodStackExchangesLegend_+3A_stack">stack</code></td>
<td>
<p>Name of the stack to use. One can visualize available stacks with 
<code>prodStackAliases</code></p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_legenditemsperrow">legendItemsPerRow</code></td>
<td>
<p>Number of elements to put in each row of the legend.</p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_legendid">legendId</code></td>
<td>
<p>Id of the legend linked to the graph. This argument is 
usefull when one wants to create a shared legend with 
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_language">language</code></td>
<td>
<p><code>character</code> language use for label. Defaut to 'en'. Can be 'fr'.</p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_labels">labels</code></td>
<td>
<p>vector containing the names of the times series</p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_colors">colors</code></td>
<td>
<p>vector of colors. It must have the same length as parameter
<code>labels</code>.</p>
</td></tr>
<tr><td><code id="prodStackExchangesLegend_+3A_types">types</code></td>
<td>
<p>&quot;line&quot; or &quot;area&quot; or a vector with same length as <code>labels</code>
containing these two values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Thes functions can be used to create a legend shared by multiple plots 
in a Shiny application or an interactive document created with Rmarkdown.
For instance, let assume one wants to display four productions stacks in a 2x2
layout and have a unique legend below them in a Rmarkdown document. To do so,
one can use the following chunck code:
</p>
<pre>
```{R, echo = FALSE}
library(manipulateWidget)

combineWidgets(
  prodStack(mydata, areas = "fr", 
            main = "Production stack in France", unit = "GWh", 
            legend = FALSE, legendId = 1, height = "100%", width = "100%"),
  prodStack(mydata, areas = "de", 
            main = "Production stack in Germany", unit = "GWh", 
            legend = FALSE, legendId = 1, height = "100%", width = "100%"),
  prodStack(mydata, areas = "es", 
            main = "Production stack in Spain", unit = "GWh", 
            legend = FALSE, legendId = 1, height = "100%", width = "100%"),
  prodStack(mydata, areas = "be", 
            main = "Production stack in Belgium", unit = "GWh", 
            legend = FALSE, legendId = 1, height = "100%", width = "100%"),
  footer = prodStackLegend(legendId = 1)
)
```
</pre>

<hr>
<h2 id='runAppAntaresViz'>Run app antaresViz</h2><span id='topic+runAppAntaresViz'></span>

<h3>Description</h3>

<p><code>runAppAntaresViz</code> run antaresViz App.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runAppAntaresViz()
</code></pre>


<h3>Value</h3>

<p>an App Shiny.
</p>

<hr>
<h2 id='savePlotAsPng'>Save interactive plot as a png image</h2><span id='topic+savePlotAsPng'></span>

<h3>Description</h3>

<p>This function saves an interactive plot generated with one of the functions of
this package as a png image. The result can then be included in documents or
presentations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>savePlotAsPng(plot, file = "Rplot.png", width = 600, height = 480, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="savePlotAsPng_+3A_plot">plot</code></td>
<td>
<p>A plot generated with one of the functions of this package.</p>
</td></tr>
<tr><td><code id="savePlotAsPng_+3A_file">file</code></td>
<td>
<p>The name of the output file</p>
</td></tr>
<tr><td><code id="savePlotAsPng_+3A_width">width</code></td>
<td>
<p>Width of the output file</p>
</td></tr>
<tr><td><code id="savePlotAsPng_+3A_height">height</code></td>
<td>
<p>height of the output file</p>
</td></tr>
<tr><td><code id="savePlotAsPng_+3A_...">...</code></td>
<td>
<p>Other parameters passed to function [webshot::webshot]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function only creates the required file. Nothing is returned
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  mydata &lt;- readAntares()
  myplot &lt;- plot(mydata, variable = "MRG. PRICE", type = "density")
  savePlotAsPng(myplot, file = "myplot.png")

## End(Not run)

</code></pre>

<hr>
<h2 id='setInteractivity'>Get and set interactivity mode</h2><span id='topic+setInteractivity'></span><span id='topic+getInteractivity'></span>

<h3>Description</h3>

<p><code>setInteractivity</code> globally sets the interactivity mode of plot 
functions. This is useful to avoid repeating <code>interactive = FALSE</code> or
<code>interactive = TRUE</code> in each function. <code>getInteractivity</code> gets the
interactivity mode.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setInteractivity(interactive = "auto")

getInteractivity()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setInteractivity_+3A_interactive">interactive</code></td>
<td>
<p>Should plot functions generate a UI that lets users to 
interactively modify input data and graphical parameters of a chart? It should
be TRUE or FALSE. The default behavior is to set it to TRUE if the R session
is interactive and to FALSE otherwise (for instance in Rmarkdown document).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>getInteractivity</code> returns a boolean indicating the interactivity mode of
plot functions. <code>setInteractivity</code> is only used for its side effects.
</p>

<hr>
<h2 id='stackMap'>plot stack and map</h2><span id='topic+stackMap'></span>

<h3>Description</h3>

<p>plot stack and map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackMap(x, mapLayout)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stackMap_+3A_x">x</code></td>
<td>
<p><code>antaresDataList</code> antaresDataList contian areas ans links.</p>
</td></tr>
<tr><td><code id="stackMap_+3A_maplayout">mapLayout</code></td>
<td>
<p>Object created with function [mapLayout()]</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mydata &lt;- readAntares(areas = "all", links = "all")

layout &lt;- readLayout()
ml &lt;- mapLayout(layout = layout)

stackMap(x = mydata, mapLayout = ml)

## End(Not run)

</code></pre>

<hr>
<h2 id='tsPlot'>plot time series contained in an antaresData object</h2><span id='topic+tsPlot'></span><span id='topic+plot.antaresData'></span><span id='topic+plot.simOptions'></span><span id='topic+plot.list'></span>

<h3>Description</h3>

<p>This function generates an interactive plot of an antares time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsPlot(
  x,
  refStudy = NULL,
  table = NULL,
  variable = NULL,
  elements = NULL,
  variable2Axe = NULL,
  mcYear = "average",
  type = c("ts", "barplot", "monotone", "density", "cdf", "heatmap"),
  dateRange = NULL,
  typeConfInt = FALSE,
  confInt = 0,
  minValue = NULL,
  maxValue = NULL,
  aggregate = c("none", "mean", "sum", "mean by variable", "sum by variable"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  colors = NULL,
  main = NULL,
  ylab = NULL,
  legend = TRUE,
  legendItemsPerRow = 5,
  colorScaleOpts = colorScaleOptions(20),
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  highlight = FALSE,
  stepPlot = FALSE,
  drawPoints = FALSE,
  secondAxis = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  ...
)

## S3 method for class 'antaresData'
plot(
  x,
  refStudy = NULL,
  table = NULL,
  variable = NULL,
  elements = NULL,
  variable2Axe = NULL,
  mcYear = "average",
  type = c("ts", "barplot", "monotone", "density", "cdf", "heatmap"),
  dateRange = NULL,
  typeConfInt = FALSE,
  confInt = 0,
  minValue = NULL,
  maxValue = NULL,
  aggregate = c("none", "mean", "sum", "mean by variable", "sum by variable"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  colors = NULL,
  main = NULL,
  ylab = NULL,
  legend = TRUE,
  legendItemsPerRow = 5,
  colorScaleOpts = colorScaleOptions(20),
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  highlight = FALSE,
  stepPlot = FALSE,
  drawPoints = FALSE,
  secondAxis = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  ...
)

## S3 method for class 'simOptions'
plot(
  x,
  refStudy = NULL,
  table = NULL,
  variable = NULL,
  elements = NULL,
  variable2Axe = NULL,
  mcYear = "average",
  type = c("ts", "barplot", "monotone", "density", "cdf", "heatmap"),
  dateRange = NULL,
  typeConfInt = FALSE,
  confInt = 0,
  minValue = NULL,
  maxValue = NULL,
  aggregate = c("none", "mean", "sum", "mean by variable", "sum by variable"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  colors = NULL,
  main = NULL,
  ylab = NULL,
  legend = TRUE,
  legendItemsPerRow = 5,
  colorScaleOpts = colorScaleOptions(20),
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  highlight = FALSE,
  stepPlot = FALSE,
  drawPoints = FALSE,
  secondAxis = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  ...
)

## S3 method for class 'list'
plot(
  x,
  refStudy = NULL,
  table = NULL,
  variable = NULL,
  elements = NULL,
  variable2Axe = NULL,
  mcYear = "average",
  type = c("ts", "barplot", "monotone", "density", "cdf", "heatmap"),
  dateRange = NULL,
  typeConfInt = FALSE,
  confInt = 0,
  minValue = NULL,
  maxValue = NULL,
  aggregate = c("none", "mean", "sum", "mean by variable", "sum by variable"),
  compare = NULL,
  compareOpts = list(),
  interactive = getInteractivity(),
  colors = NULL,
  main = NULL,
  ylab = NULL,
  legend = TRUE,
  legendItemsPerRow = 5,
  colorScaleOpts = colorScaleOptions(20),
  width = NULL,
  height = NULL,
  xyCompare = c("union", "intersect"),
  h5requestFiltering = deprecated(),
  highlight = FALSE,
  stepPlot = FALSE,
  drawPoints = FALSE,
  secondAxis = FALSE,
  timeSteph5 = deprecated(),
  mcYearh5 = deprecated(),
  tablesh5 = deprecated(),
  language = "en",
  hidden = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tsPlot_+3A_x">x</code></td>
<td>
<p>Object of class <code>antaresData</code>. Alternatively, it can be a list of 
<code>antaresData</code> objects. In this case, one chart is created for each
object. Can also be opts object from h5 file or list of opts object from h5 file.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_refstudy">refStudy</code></td>
<td>
<p>An object of class <code>antaresData</code> created with function 
[antaresRead::readAntares()] containing data for areas and or
districts. Can also contains an opts who refer to a h5 file.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_table">table</code></td>
<td>
<p>Name of the table to display when <code>x</code> is an <code>antaresDataList</code>
object.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_variable">variable</code></td>
<td>
<p>Name of the variable to plot. If this argument is missing, then the 
function starts a shiny gadget that let the user choose the variable to
represent. When the user clicks on the &quot;Done&quot; button&quot;, the graphic is
returned by the function.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_elements">elements</code></td>
<td>
<p>Vector of &quot;element&quot; names indicating for which elements of 'x' should the
variable be plotted. For instance if the input data contains areas, then
this parameter should be a vector of area names. If data contains clusters
data, this parameter has to be the concatenation of the area name and the
cluster name, separated by <code>" &gt; "</code>. This is to prevent confusion 
when two clusters from different areas have the same name.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_variable2axe">variable2Axe</code></td>
<td>
<p><code>character</code>, variables on second axis.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_mcyear">mcYear</code></td>
<td>
<p>If <code>x</code>, contains multiple Monte-Carlo scenarios, this parameter 
determine which scenario is displayed. Must be an integer representing the
index of the scenario or the word &quot;average&quot;. In this case data are 
averaged.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_type">type</code></td>
<td>
<p>Type of plot to draw. &quot;ts&quot; creates a time series plot, &quot;barplot&quot; creates
a barplot with one bar per element representing the average value of the
variable for this element. &quot;monotone&quot; draws the monotone curve of the 
variable for each element.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_daterange">dateRange</code></td>
<td>
<p>A vector of two dates. Only data points between these two dates are 
displayed. If NULL, then all data is displayed.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_typeconfint">typeConfInt</code></td>
<td>
<p><code>logical</code>. If multiple Monte Carlo scenarios are present in 
the input data, see all curves (FALSE, Default), or mean and confidence interval (TRUE)</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_confint">confInt</code></td>
<td>
<p>Number between 0 and 1 indicating the size of the confidence interval to 
display. If it equals to 0, then confidence interval is not computed nor
displayed. Used only when multiple Monte Carlo scenarios are present in 
the input data.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_minvalue">minValue</code></td>
<td>
<p>Only used if parameter <code>type</code> is &quot;density&quot; or &quot;cdf&quot;. If this parameter
is set, all values that are less than <code>minValue</code> are removed from the 
graphic. This is useful to deal with variables containing a few extreme
values (generally cost and price variables). If <code>minValue</code> is unset,
all values are displayed.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_maxvalue">maxValue</code></td>
<td>
<p>Only used if parameter <code>type</code> is &quot;density&quot; or &quot;cdf&quot;. If this parameter 
is set, all values not in [-minValue, maxValue] are removed from the graphic.
This is useful to deal with variables containing a few extreme values
(generally cost and price variables). If <code>maxValue</code> is 0 or unset, all
values are displayed.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_aggregate">aggregate</code></td>
<td>
<p>When multiple elements are selected, should the data be aggregated. If
&quot;none&quot;, each element is represented separetly. If &quot;mean&quot; values are
averaged and if &quot;sum&quot; they are added. You can also compute mean and sum by variable.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_compare">compare</code></td>
<td>
<p>An optional character vector containing names of parameters. When it is set,
two charts are outputed with their own input controls. Alternatively, it can
be a named list with names corresponding to parameter names and values being
list with the initial values of the given parameter for each chart. See details
if you are drawing a map.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_compareopts">compareOpts</code></td>
<td>
<p>List of options that indicates the number of charts to create and their 
position. Check out the documentation of 
[manipulateWidget::compareOptions] to see available options.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_interactive">interactive</code></td>
<td>
<p>LogicalValue. If <code>TRUE</code>, then a shiny gadget is launched that lets
the user interactively choose the areas or districts to display.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_colors">colors</code></td>
<td>
<p>Vector of colors</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_main">main</code></td>
<td>
<p>Title of the graph.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_ylab">ylab</code></td>
<td>
<p>Label of the Y axis.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_legend">legend</code></td>
<td>
<p>Logical value indicating if a legend should be drawn. This argument is 
usefull when one wants to create a shared legend with
[prodStackLegend()]</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_legenditemsperrow">legendItemsPerRow</code></td>
<td>
<p>Number of elements to put in each row of the legend.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_colorscaleopts">colorScaleOpts</code></td>
<td>
<p>A list of parameters that control the creation of color scales. It is used
only for heatmaps. See [colorScaleOptions()] for available
parameters.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_width">width</code></td>
<td>
<p>Width of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_height">height</code></td>
<td>
<p>Height of the graph expressed in pixels or in percentage of 
the parent element. For instance &quot;500px&quot; and &quot;100%&quot; are valid values.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_xycompare">xyCompare</code></td>
<td>
<p>Use when you compare studies, can be &quot;union&quot; or &quot;intersect&quot;. If union, all
of mcYears in one of studies will be selectable. If intersect, only mcYears in all
studies will be selectable.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_h5requestfiltering">h5requestFiltering</code></td>
<td>
<p>Contains arguments used by default for h5 request,
typically h5requestFiltering = list(mcYears = 2)</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_highlight">highlight</code></td>
<td>
<p>highlight curve when mouse over</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_stepplot">stepPlot</code></td>
<td>
<p><code>boolean</code>, step style for curves.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_drawpoints">drawPoints</code></td>
<td>
<p><code>boolean</code>, add points on graph</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_secondaxis">secondAxis</code></td>
<td>
<p>add second axis to graph</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_timesteph5">timeSteph5</code></td>
<td>
<p><code>character</code> timeStep to read in h5 file. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_mcyearh5">mcYearh5</code></td>
<td>
<p><code>numeric</code> mcYear to read for h5. Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_tablesh5">tablesh5</code></td>
<td>
<p><code>character</code> tables for h5 (&quot;areas&quot; &quot;links&quot;, &quot;clusters&quot; or &quot;disticts&quot;). Only for Non interactive mode.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_language">language</code></td>
<td>
<p><code>character</code> language use for label. Defaut to 'en'. Can be 'fr'.</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_hidden">hidden</code></td>
<td>
<p><code>logical</code> Names of input to hide. Defaut to NULL</p>
</td></tr>
<tr><td><code id="tsPlot_+3A_...">...</code></td>
<td>
<p>Other arguments for [manipulateWidget::manipulateWidget]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the input data contains several Monte-Carlo scenarios, the function will
display the evolution of the average value. Moreover it will represent a
95
</p>
<p>If the input data has a annual time step, the function creates a barplot
instead of a line chart.
</p>
<p>compare argument can take following values :
</p>

<ul>
<li><p> &quot;mcYear&quot;
</p>
</li>
<li><p> &quot;main&quot;
</p>
</li>
<li><p> &quot;variable&quot;
</p>
</li>
<li><p> &quot;type&quot;
</p>
</li>
<li><p> &quot;typeConfInt&quot;
</p>
</li>
<li><p> &quot;confInt&quot;
</p>
</li>
<li><p> &quot;elements&quot;
</p>
</li>
<li><p> &quot;aggregate&quot;
</p>
</li>
<li><p> &quot;legend&quot;
</p>
</li>
<li><p> &quot;highlight&quot;
</p>
</li>
<li><p> &quot;stepPlot&quot;
</p>
</li>
<li><p> &quot;drawPoints&quot;
</p>
</li>
<li><p> &quot;secondAxis&quot;
</p>
</li></ul>



<h3>Value</h3>

<p>The function returns an object of class &quot;htmlwidget&quot;. It is generated by
package <code>highcharter</code> if time step is annual or by <code>dygraphs</code> for 
any other time step.It can be directly displayed in the viewer or be stored
in a variable for later use.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mydata &lt;- readAntares(areas = "all", timeStep = "hourly")
plot(x = mydata)

# Plot only a few areas
plot(x = mydata[area %in% c("area1", "area2", "area3")])

# If data contains detailed results, then the function adds a confidence
# interval
dataDetailed &lt;- readAntares(areas = "all", timeStep = "hourly", mcYears = 1:2)
plot(x = dataDetailed)

# If the time step is annual, the function creates a barplot instead of a
# linechart
dataAnnual &lt;- readAntares(areas = "all", timeStep = "annual")
plot(x = dataAnnual)

# Compare two simulaitons
# Compare the results of two simulations
setSimulationPath(path1)
mydata1 &lt;- readAntares(areas = "all", timeStep = "daily")
setSimulationPath(path2)
mydata2 &lt;- readAntares(areas = "all", timeStep = "daily")

plot(x = list(mydata1, mydata2))

# When you compare studies, you have 2 ways to defind inputs, union or intersect.
# for example, if you chose union and you have mcYears 1 and 2 in the first study
# and mcYears 2 and 3 in the second, mcYear input will be worth c(1, 2, 3)
# In same initial condition (study 1 -&gt; 1,2 ans study 2 -&gt; 2, 3) if you choose intersect,
# mcYear input will be wort 2.
# You must specify union or intersect with xyCompare argument (default union).
plot(x = list(mydata1[area %in% c("a", "b")],
 mydata1[area %in% c("b", "c")]), xyCompare = "union")
plot(x = list(mydata1[area %in% c("a", "b")],
 mydata1[area %in% c("b", "c")]), xyCompare = "intersect")

# Compare data in a single simulation
# Compare two periods for the same simulation
plot(x = mydata1, compare = "dateRange")

# Compare two Monte-Carlo scenarios
detailedData &lt;- readAntares(areas = "all", mcYears = "all")
plot(x = detailedData, .compare = "mcYear")

# Use h5 for dynamic request / exploration in a study
# Set path of simulaiton
setSimulationPath(path = path1)

# Convert your study in h5 format
writeAntaresH5(path = mynewpath)

# Redefine sim path with h5 file
opts &lt;- setSimulationPath(path = mynewpath)
plot(x = opts)

# Compare elements in a single study
plot(x = opts, .compare = "mcYear")
# Compare 2 studies
plot(x = list(opts, opts2))

# Compare 2 studies with argument refStudy 
plot(x = opts, refStudy = opts2)
plot(x = opts, refStudy = opts2, type = "ts", interactive = FALSE, mcYearh5 = 2)
plot(x = opts, refStudy = opts2, type = "ts", 
    dateRange = DR, 
    h5requestFiltering = list(mcYears = mcYears = mcYearToTest))



## End(Not run)




</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
