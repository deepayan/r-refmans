<!DOCTYPE html><html lang="en"><head><title>Help for package telraamStats</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {telraamStats}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_options_graph'><p>Check if options are available in the options list, replace by a default otherwise.</p></a></li>
<li><a href='#convert_string_to_list'><p>Convert a character string into a numeric vector</p></a></li>
<li><a href='#create_config'><p>Create config file if needed.</p></a></li>
<li><a href='#enrich_dates'><p>Enrich traffic data with date informations.</p></a></li>
<li><a href='#enrich_name'><p>Enrich traffic data with segment name</p></a></li>
<li><a href='#enrich_special_days'><p>Enrich traffic data with french vacation and public holidays</p></a></li>
<li><a href='#enrich_traffic'><p>Enrich traffic data with date features, names and uptime filters.</p></a></li>
<li><a href='#enrich_uptime'><p>Enrich traffic data with uptime quality indication</p></a></li>
<li><a href='#filter_agg'><p>Filter by selected criteria and aggregating traffics.</p></a></li>
<li><a href='#get_api_state'><p>Check API state</p></a></li>
<li><a href='#get_config_path'><p>Get the path of configuration file.</p></a></li>
<li><a href='#get_custom_palette'><p>Colors palettes for each option (mode, direction, segment_name, weekday, hour)</p></a></li>
<li><a href='#get_graph_subtitles'><p>Create subtitles for graphics.</p></a></li>
<li><a href='#get_segment_name'><p>Get the name of a segment giving its id</p></a></li>
<li><a href='#get_segments'><p>Get Telraam segments into a named vector</p></a></li>
<li><a href='#get_telraam_token'><p>Get the current authentication token for the 'Telraam' API</p></a></li>
<li><a href='#gg_availability'><p>Availability and quality of sensors during a period through a heatmap.</p></a></li>
<li><a href='#gg_car_speed_histogram'><p>Histogram of car speed over a period, for a segment or a subset of segment.</p></a></li>
<li><a href='#gg_car_speed_v85'><p>Average of v85 car speed per hour over a period, for a segment or a subset of segment.</p></a></li>
<li><a href='#gg_traffic_avg'><p>Average of traffic during a week.</p></a></li>
<li><a href='#gg_traffic_evolution'><p>Evolution of traffic and smoothed traffic.</p></a></li>
<li><a href='#import_sensor'><p>Imports data associated with a list of sensors</p></a></li>
<li><a href='#is_vacation'><p>Indicates if a date is in vacation period and if true, which vacation.</p></a></li>
<li><a href='#melt_direction_mode'><p>Melt dataframe to obtain one row per hour/segment/transportation mode/direction</p>
This format makes graphs with ggplot and filtering easier.</a></li>
<li><a href='#preprocess_car_speed'><p>Preprocessing mandatory for car speed graphs functions</p></a></li>
<li><a href='#retrieve_sensor'><p>Retrieves data associated with a sensor from the Telraam API</p></a></li>
<li><a href='#seq_by_3_month'><p>Generate sequence of intervals with three-month periods</p></a></li>
<li><a href='#set_global_vars'><p>Function to set up the global variables for public holidays and vacations, with the default</p>
being the french dates from a governmental API.</a></li>
<li><a href='#set_telraam_token'><p>Saves an authentication token for the 'Telraam' API.</p></a></li>
<li><a href='#traffic'><p>Traffic data of Telraam sensors in Châteaubourg (FR)</p></a></li>
<li><a href='#write_update_data'><p>Write or update the sensor data in the data folder</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Retrieval and Visualization of Mobility Data from 'Telraam'
Sensors</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Streamline the processing of 'Telraam' data, sourced from open data
    mobility sensors. These tools range from data retrieval (without the need for
    API knowledge) to data visualization, including data preprocessing.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/KetsiaGuichard/telraamStats/issues/">https://github.com/KetsiaGuichard/telraamStats/issues/</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>config, dplyr, ggplot2, httr, jsonlite, lubridate, paletteer,
purrr, reshape2, rlang, scales, tidyr, yaml</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://annuaire.agistaterre.org/telraamStats/">https://annuaire.agistaterre.org/telraamStats/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-27 09:39:12 UTC; ketsia</td>
</tr>
<tr>
<td>Author:</td>
<td>Lilou Augeray [aut],
  Ulysse Caromel [aut],
  Ketsia Guichard <a href="https://orcid.org/0009-0002-2280-7465"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Pascal Irz <a href="https://orcid.org/0000-0002-2066-8935"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Mijin Park [aut],
  Tanguy Richard [aut],
  Agis-ta-terre [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ketsia Guichard &lt;ketsia.guichard@univ-rennes.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-27 17:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_options_graph'>Check if options are available in the options list, replace by a default otherwise.</h2><span id='topic+check_options_graph'></span>

<h3>Description</h3>

<p>Check if options are available in the options list, replace by a default otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_options_graph(options_selected, options_available, default)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_options_graph_+3A_options_selected">options_selected</code></td>
<td>
<p>List of characters. Selected options.</p>
</td></tr>
<tr><td><code id="check_options_graph_+3A_options_available">options_available</code></td>
<td>
<p>List of characters. Valid options.</p>
</td></tr>
<tr><td><code id="check_options_graph_+3A_default">default</code></td>
<td>
<p>List of characters. Default options.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Options consistent with the possibilities
</p>


<h3>Examples</h3>

<pre><code class='language-R'>check_options_graph(c('car','pedestrian'),
  c('car','pedestrian','bike','heavy'),c('car','heavy'))
check_options_graph(c('coucou','salut'),
  c('car','pedestrian','bike','heavy'),c('car','heavy'))
check_options_graph(NULL,
  c('car','pedestrian','bike','heavy'),c('car','heavy'))

</code></pre>

<hr>
<h2 id='convert_string_to_list'>Convert a character string into a numeric vector</h2><span id='topic+convert_string_to_list'></span>

<h3>Description</h3>

<p>Convert a character string into a numeric vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_string_to_list(vector)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_string_to_list_+3A_vector">vector</code></td>
<td>
<p>Something in the shape &quot;10,20,30&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector. Something in the shape c(10,20,30)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>convert_string_to_list("10,20,30")

</code></pre>

<hr>
<h2 id='create_config'>Create config file if needed.</h2><span id='topic+create_config'></span>

<h3>Description</h3>

<p>If you want to specify the IDs of your own sensors,
this function create a local configuration template file
in the <code style="white-space: pre;">&#8288;\inst&#8288;</code> directory, to edit with specific information.
By default, the function doesn't create the file in the project directory
but in a temp directory. If you want to have a permanent configuration,
please use .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_config(
  segments = list(`segment-01` = "9000000000", `segment-02` = "9000000000"),
  create_directory = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_config_+3A_segments">segments</code></td>
<td>
<p>Named List of segments (&quot;name1&quot; = &quot;9000000000&quot;, ...). Default to the example version.</p>
</td></tr>
<tr><td><code id="create_config_+3A_create_directory">create_directory</code></td>
<td>
<p>Boolean: Does the file need to be created in the project directory? Default to FALSE.</p>
</td></tr>
<tr><td><code id="create_config_+3A_overwrite">overwrite</code></td>
<td>
<p>Boolean: if the file exist, should it be overwriten? Default to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you use the temporary options, please fill directly the name and number
of your sensors in the &quot;segments&quot; argument.
</p>


<h3>Value</h3>

<p>Boolean: TRUE if the file is created, FALSE overwise (config already exists for example).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>create_config(create_directory=FALSE)
list_of_segments = list("Burel"= "9000002156", "Vitre" = "9000001844")
create_config(segments = list_of_segments,
  create_directory = FALSE,
  overwrite = TRUE) # the file already exists
</code></pre>

<hr>
<h2 id='enrich_dates'>Enrich traffic data with date informations.</h2><span id='topic+enrich_dates'></span>

<h3>Description</h3>

<p>Enrich traffic data with date informations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enrich_dates(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="enrich_dates_+3A_data">data</code></td>
<td>
<p>Data frame containing a <code>date</code> character column containing date + hour + timezone.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same dataframe with 3 additionnal columns : day, weekday and hour.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame('date' = c("2022-02-18 08:00:00 CET","2022-02-18 09:00:00 CET"),
  stringsAsFactors = FALSE)
enrich_dates(df)

</code></pre>

<hr>
<h2 id='enrich_name'>Enrich traffic data with segment name</h2><span id='topic+enrich_name'></span>

<h3>Description</h3>

<p><code>segment_fullname</code> is also added : it's the combination of segment's id and name.
<code>segment_id</code> should be in the configuration file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enrich_name(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="enrich_name_+3A_data">data</code></td>
<td>
<p>Data frame containing a <code>segment_id</code> column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same dataframe with two additionnal columns : <code>segment_name</code> and <code>segment_fullname</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame('segment_id' = c(9000002156, 9000001906))
enrich_name(df)

</code></pre>

<hr>
<h2 id='enrich_special_days'>Enrich traffic data with french vacation and public holidays</h2><span id='topic+enrich_special_days'></span>

<h3>Description</h3>

<p>Enrich traffic data with french vacation and public holidays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enrich_special_days(data, vacations = NULL, public_holidays = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="enrich_special_days_+3A_data">data</code></td>
<td>
<p>Data frame containing a <code>day</code> and a <code>date</code>(day + hour + timezone) column</p>
</td></tr>
<tr><td><code id="enrich_special_days_+3A_vacations">vacations</code></td>
<td>
<p>Data frame containing the vacation dates</p>
</td></tr>
<tr><td><code id="enrich_special_days_+3A_public_holidays">public_holidays</code></td>
<td>
<p>Data frame containing the public holidays dates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same dataframe with two additionnal columns :
</p>

<ul>
<li><p> holiday, boolean: TRUE if the day corresponds to public holiday, FALSE otherwise
</p>
</li>
<li><p> vacation, indicating the french vacation, &quot;No vacation&quot; otherwise.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame('day' = as.Date(c("2022-02-18","2022-01-01")),
  'date' = c('2022-02-18 12:00:00 CET','2022-01-01 12:00:00 CET'))
enrich_special_days(df)

</code></pre>

<hr>
<h2 id='enrich_traffic'>Enrich traffic data with date features, names and uptime filters.</h2><span id='topic+enrich_traffic'></span>

<h3>Description</h3>

<p>This function add day, weekday, hour, segment_name and full_name and uptime quality boolean.
This function is already used by the data retrievement process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enrich_traffic(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="enrich_traffic_+3A_data">data</code></td>
<td>
<p>Raw data frame from the Telraam API, imported through the package.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same dataframe with additionnal informations : day, hour, weekday, holiday, vacation, segment_name, uptime_quality
</p>


<h3>Examples</h3>

<pre><code class='language-R'>enriched_traffic &lt;- enrich_traffic(traffic[0:10,])
setdiff(colnames(enriched_traffic[0:10,]), colnames(traffic[0:10,]))

</code></pre>

<hr>
<h2 id='enrich_uptime'>Enrich traffic data with uptime quality indication</h2><span id='topic+enrich_uptime'></span>

<h3>Description</h3>

<p>If the uptime is lower than 0.5, <code>uptime_quality</code> will be FALSE, else TRUE
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enrich_uptime(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="enrich_uptime_+3A_data">data</code></td>
<td>
<p>Data frame containing an <code>uptime</code> column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same dataframe with an additionnal column indicating
if the uptime is greater (TRUE) or lower (FALSE) than 0.5.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame('uptime' = c(0.05, 0.95))
enrich_uptime(df)

</code></pre>

<hr>
<h2 id='filter_agg'>Filter by selected criteria and aggregating traffics.</h2><span id='topic+filter_agg'></span>

<h3>Description</h3>

<p>Not all criteria need to be filled in. Unfilled criteria are set by default so that no filtering is performed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_agg(
  data,
  date_range = NULL,
  segments = NULL,
  direction = NULL,
  modes = NULL,
  weekdays = NULL,
  hours = NULL,
  uptime_quality = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_agg_+3A_data">data</code></td>
<td>
<p>Traffic Data Frame</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_date_range">date_range</code></td>
<td>
<p>Date vector, c(&quot;aaaa-mm-jj&quot;,&quot;aaaa-mm-jj&quot;)</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_segments">segments</code></td>
<td>
<p>Vector of character. Ids of desired segments.</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_direction">direction</code></td>
<td>
<p>Vector of character. Direction of the street (lft, right, both).</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_modes">modes</code></td>
<td>
<p>Vector of character. Type(s) of mobility: c(&quot;car&quot;,&quot;heavy&quot;,&quot;pedestrian&quot;,&quot;bike&quot;)</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_weekdays">weekdays</code></td>
<td>
<p>Vector of character. Weekday(s) choosen.</p>
</td></tr>
<tr><td><code id="filter_agg_+3A_hours">hours</code></td>
<td>
<p>Integer vector. Hours choosen, default to the all day.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the filtered data, molten by mode and direction, with new columns :
</p>

<ul>
<li> <p><code>mode</code>, the mode, one row per different transportation mode + date/hour + direction
</p>
</li>
<li> <p><code>direction</code>, the direction, one row per different transportation mode + date/hour + direction
</p>
</li>
<li> <p><code>traffic_sum</code>, the traffic for this mode/direction on this specific date/hour
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>date_range = as.Date(c('2022-01-01','2022-01-08'))
filter_agg(traffic,
  date_range = date_range,
  segments = 'RteVitre-06',
  direction = 'lft',
  modes = 'pedestrian',
  weekdays = 'saturday',
  hours = 12:14,
  uptime_quality = TRUE
  )
</code></pre>

<hr>
<h2 id='get_api_state'>Check API state</h2><span id='topic+get_api_state'></span>

<h3>Description</h3>

<p>Return the state of the 'Telraam' API. Determine if updates can be made.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_api_state(key = get_telraam_token())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_api_state_+3A_key">key</code></td>
<td>
<p>the API key (set by the set_telraam_token function - default -, or directly filled).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean: TRUE if the API responds well, FALSE otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_token &lt;- 'ThisIsNotAValidToken'
get_api_state(my_token)
</code></pre>

<hr>
<h2 id='get_config_path'>Get the path of configuration file.</h2><span id='topic+get_config_path'></span>

<h3>Description</h3>

<p>The configuration file could be in the <code>inst</code> directory, or in a temporary
directory, according to the <code>create_directory</code> option of the <code>create_config()</code>
function. If the configuration file doesn't exist, this function create a file
in a temporary directory and send a message to the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_config_path()
</code></pre>


<h3>Value</h3>

<p>Character: path of the configuration file, needed for a lot of functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>create_config(create_directory=FALSE)
get_config_path()
</code></pre>

<hr>
<h2 id='get_custom_palette'>Colors palettes for each option (mode, direction, segment_name, weekday, hour)</h2><span id='topic+get_custom_palette'></span>

<h3>Description</h3>

<p>Colors palettes for each option (mode, direction, segment_name, weekday, hour)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_custom_palette(segments)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_custom_palette_+3A_segments">segments</code></td>
<td>
<p>Character vectors. Segments name of the dataframe.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of color palettes (named vector) for each option (mode, direction, segment_name, weekday, hour)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>segments &lt;- c('Route1', 'Route2')
get_custom_palette(segments)

</code></pre>

<hr>
<h2 id='get_graph_subtitles'>Create subtitles for graphics.</h2><span id='topic+get_graph_subtitles'></span>

<h3>Description</h3>

<p>Create subtitles for graphics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_graph_subtitles(
  segments = NULL,
  modes = NULL,
  directions = NULL,
  weekdays = NULL,
  hours = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_graph_subtitles_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment to text, no precision if NULL (default).</p>
</td></tr>
<tr><td><code id="get_graph_subtitles_+3A_modes">modes</code></td>
<td>
<p>Character vector. Different modes of transportation selected (heavy, car, bike, pedestrian). Default: NULL</p>
</td></tr>
<tr><td><code id="get_graph_subtitles_+3A_directions">directions</code></td>
<td>
<p>Character vector. Directions of the traffic (lft, rgt, both) choosen. Default to NULL.</p>
</td></tr>
<tr><td><code id="get_graph_subtitles_+3A_weekdays">weekdays</code></td>
<td>
<p>Character vector. Weekdays choosen. Default to NULL.</p>
</td></tr>
<tr><td><code id="get_graph_subtitles_+3A_hours">hours</code></td>
<td>
<p>Numeric vector. Hours choosen. Default to NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character, with a description of all parameters filled, usable as subtitle for graphs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_graph_subtitles(segments = c("Route1"),
  mode = "car", direction = "lft", weekdays = "monday", hours = 12:14)

</code></pre>

<hr>
<h2 id='get_segment_name'>Get the name of a segment giving its id</h2><span id='topic+get_segment_name'></span>

<h3>Description</h3>

<p>Get the name of a segment giving its id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_segment_name(segment_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_segment_name_+3A_segment_id">segment_id</code></td>
<td>
<p>ID of segment, should be present in inst/config.yml</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Name of the segment, as specified in the configuration file, NULL otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  #run if you want to create a inst/ directory containing config file
  create_config()
  get_segment_name(9000000000)
  
## End(Not run)
</code></pre>

<hr>
<h2 id='get_segments'>Get Telraam segments into a named vector</h2><span id='topic+get_segments'></span>

<h3>Description</h3>

<p>Get Telraam segments info in yml file and transform them into a named vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_segments()
</code></pre>


<h3>Value</h3>

<p>Named vector with names and segment IDs, NULL if there is no configuration file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>create_config(create_directory = FALSE)
get_segments()
</code></pre>

<hr>
<h2 id='get_telraam_token'>Get the current authentication token for the 'Telraam' API</h2><span id='topic+get_telraam_token'></span>

<h3>Description</h3>

<p>Get the current authentication token for the 'Telraam' API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_telraam_token()
</code></pre>


<h3>Value</h3>

<p>Token currently used, set by <code>set_telraam_token()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_token &lt;- "MyTelraamToken"
set_telraam_token(my_token)
get_telraam_token()

</code></pre>

<hr>
<h2 id='gg_availability'>Availability and quality of sensors during a period through a heatmap.</h2><span id='topic+gg_availability'></span>

<h3>Description</h3>

<p>Higher is the uptime average, higher is the quality of data.
A null uptime means that the sensor wasn't available during this period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_availability(enriched_data, date_range = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gg_availability_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="gg_availability_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. Example: c('2021-01-01','2022-01-01'). Full period if NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Graph showing availability and quality of sensors over the selected date range.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> gg_availability(traffic)
</code></pre>

<hr>
<h2 id='gg_car_speed_histogram'>Histogram of car speed over a period, for a segment or a subset of segment.</h2><span id='topic+gg_car_speed_histogram'></span>

<h3>Description</h3>

<p>Histogram of car speed over a period, for a segment or a subset of segment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_car_speed_histogram(
  enriched_data,
  date_range = NULL,
  segments = NULL,
  weekday = NULL,
  hours = NULL,
  aggregated_by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gg_car_speed_histogram_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="gg_car_speed_histogram_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. Example: c('2021-01-01','2022-01-01'). Full period if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_car_speed_histogram_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment, all if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_car_speed_histogram_+3A_weekday">weekday</code></td>
<td>
<p>Character vector. Weekday choosen. Default to the all week.</p>
</td></tr>
<tr><td><code id="gg_car_speed_histogram_+3A_hours">hours</code></td>
<td>
<p>Integer vector. Hours choosen, default to the all day.</p>
</td></tr>
<tr><td><code id="gg_car_speed_histogram_+3A_aggregated_by">aggregated_by</code></td>
<td>
<p>Character. Enables comparison with other segments or weekdays. Options are : 'segment_name', 'weekday', NULL (no comparison, default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Graph showing histogram of car speed over a period.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
subset_traffic &lt;- traffic %&gt;% filter(day &lt; '2022-02-01', hour &gt; 9)
gg_car_speed_histogram(subset_traffic)
gg_car_speed_histogram(subset_traffic,
  aggregated_by = 'segment_name')
gg_car_speed_histogram(subset_traffic,
  weekday = c('monday','sunday'),
  segments = 'RteVitre-06',
  hours = 17:20,
  aggregated_by = "weekday")
</code></pre>

<hr>
<h2 id='gg_car_speed_v85'>Average of v85 car speed per hour over a period, for a segment or a subset of segment.</h2><span id='topic+gg_car_speed_v85'></span>

<h3>Description</h3>

<p>v85 is the estimated car speed limit in km/h that 85% of all cars respect.
15% of drivers drive faster than this v85 indicator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_car_speed_v85(
  enriched_data,
  date_range = NULL,
  segments = NULL,
  weekday = NULL,
  hours = NULL,
  aggregated_by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gg_car_speed_v85_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="gg_car_speed_v85_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. Example: c('2021-01-01','2022-01-01'). Full period if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_car_speed_v85_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment, all if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_car_speed_v85_+3A_weekday">weekday</code></td>
<td>
<p>Character vector. Weekday choosen. Default to the all week.</p>
</td></tr>
<tr><td><code id="gg_car_speed_v85_+3A_hours">hours</code></td>
<td>
<p>Integer vector. Hours choosen, default to the all day.</p>
</td></tr>
<tr><td><code id="gg_car_speed_v85_+3A_aggregated_by">aggregated_by</code></td>
<td>
<p>Character. Enables comparison with other segments or weekdays. Options are : 'segment_name', 'weekday', NULL (no comparison, default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Graph showing the average of v85 speed per hour.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
subset_traffic &lt;- traffic %&gt;% filter(day &lt; '2022-02-01', hour &gt; 9)
gg_car_speed_histogram(subset_traffic[0:100,])
gg_car_speed_histogram(subset_traffic, aggregated_by = 'segment_name')
gg_car_speed_histogram(subset_traffic,
  weekday = c('monday','sunday'),
  segments = 'RteVitre-06',
  hours = 17:20,
  aggregated_by = "weekday")
</code></pre>

<hr>
<h2 id='gg_traffic_avg'>Average of traffic during a week.</h2><span id='topic+gg_traffic_avg'></span>

<h3>Description</h3>

<p>A short description...
Average of traffic during a week, over a period for a segment or a subset of segment,
for a transportation mode or more, for a direction or both.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_traffic_avg(
  enriched_data,
  date_range = NULL,
  segments = NULL,
  modes = c("heavy", "car"),
  direction = "both",
  weekday = NULL,
  aggregated_by = "weekday"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gg_traffic_avg_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. example: c('2021-01-01','2022-01-01'). Full period if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment, all if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_modes">modes</code></td>
<td>
<p>Character vector. Different modes of transportation aggregated (heavy, car, bike, pedestrian) . Default: heavy &amp; car</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_direction">direction</code></td>
<td>
<p>Character. Direction of the traffic (lft, rgt, both). Default to both.</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_weekday">weekday</code></td>
<td>
<p>Character vector. Weekday choosen. Default to the all week.</p>
</td></tr>
<tr><td><code id="gg_traffic_avg_+3A_aggregated_by">aggregated_by</code></td>
<td>
<p>Character. Options are: 'segment_name', 'weekday', 'direction', 'mode'. Default: 'weekday'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Graph showing weekly average evolution of traffic (for specified parameters) during the specified period.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gg_traffic_avg(traffic)
gg_traffic_avg(traffic,
  date_range = c('2022-07-01','2022-09-01'),
  segment = 'RteVitre-06',
  mode = 'car',
  direction = 'rgt',
  weekday = c('monday','friday')
  )
</code></pre>

<hr>
<h2 id='gg_traffic_evolution'>Evolution of traffic and smoothed traffic.</h2><span id='topic+gg_traffic_evolution'></span>

<h3>Description</h3>

<p>Evolution of traffic (global, per mode ou per direction), smoothed traffic
during a period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_traffic_evolution(
  enriched_data,
  date_range = NULL,
  segments = NULL,
  modes = c("heavy", "car"),
  direction = "both",
  smoothed = TRUE,
  agg_day = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gg_traffic_evolution_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. Example: c('2021-01-01','2022-01-01'). Full period if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment by its name, all if NULL (default).</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_modes">modes</code></td>
<td>
<p>Character vector. Different modes of transportation aggregated (heavy, car, bike, pedestrian) . Default: heavy &amp; car</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_direction">direction</code></td>
<td>
<p>Character. Direction of the traffic (lft, rgt, both). Default to both.</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_smoothed">smoothed</code></td>
<td>
<p>Boolean. Should the smoothed traffic be plotted ? Default: True</p>
</td></tr>
<tr><td><code id="gg_traffic_evolution_+3A_agg_day">agg_day</code></td>
<td>
<p>Boolean. Should the data be aggregated per day ? Default : True</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Graph showing the evolution of traffic (for specified parameters) during the specified period.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gg_traffic_evolution(traffic)
gg_traffic_evolution(traffic,
  date_range = c('2022-01-01','2022-03-01'),
  segment = 'RteVitre-06',
  mode = c('car','pedestrian'),
  direction = 'lft',
  smoothed = FALSE,
  agg_day = FALSE)
</code></pre>

<hr>
<h2 id='import_sensor'>Imports data associated with a list of sensors</h2><span id='topic+import_sensor'></span>

<h3>Description</h3>

<p>Imports data associated with a given list of sensor names from .RData files contained in a data directory.
The main purpose of this function is to load the data saved with write update data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_sensor(list_sensor)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import_sensor_+3A_list_sensor">list_sensor</code></td>
<td>
<p>A character vector specifying the names of sensors to import data for.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe containing the imported data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # This example requires a valid API key
period &lt;- as.Date(c('2022-01-01', '2022-12-31'))
write_update_data('RteVitre-06', period[1], period[2])
write_update_data('ParisArcEnCiel-05', period[1], period[2])
import_sensor(c('RteVitre-06', 'ParisArcEnCiel-05'))

## End(Not run)
</code></pre>

<hr>
<h2 id='is_vacation'>Indicates if a date is in vacation period and if true, which vacation.</h2><span id='topic+is_vacation'></span>

<h3>Description</h3>

<p>If the date is not in a vacation period, &quot;No vacation&quot; is returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_vacation(date, vacation)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_vacation_+3A_date">date</code></td>
<td>
<p>Date (character format)</p>
</td></tr>
<tr><td><code id="is_vacation_+3A_vacation">vacation</code></td>
<td>
<p>Dataframe of vacations, same format as set_globals_vars output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vacation description if the day is between two dates, &quot;No vacation&quot; otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vacation &lt;- data.frame('description' = c('Vacances de Noël'),
  start_date = as.POSIXct('2021-12-17 23:00:00'),
  end_date = as.POSIXct('2022-01-02 23:00:00'))
is_vacation(as.Date('2022-01-01'), vacation)
</code></pre>

<hr>
<h2 id='melt_direction_mode'>Melt dataframe to obtain one row per hour/segment/transportation mode/direction
This format makes graphs with ggplot and filtering easier.</h2><span id='topic+melt_direction_mode'></span>

<h3>Description</h3>

<p>Melt dataframe to obtain one row per hour/segment/transportation mode/direction
This format makes graphs with ggplot and filtering easier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>melt_direction_mode(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="melt_direction_mode_+3A_data">data</code></td>
<td>
<p>Traffic Data Frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>DataFrame with one row per hour/segment/transportation mode/direction
</p>


<h3>Examples</h3>

<pre><code class='language-R'>melt_direction_mode(traffic[0:2,])
</code></pre>

<hr>
<h2 id='preprocess_car_speed'>Preprocessing mandatory for car speed graphs functions</h2><span id='topic+preprocess_car_speed'></span>

<h3>Description</h3>

<p>Preprocessing mandatory for car speed graphs functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preprocess_car_speed(
  enriched_data,
  aggregated_by,
  date_range,
  segments,
  weekday,
  hours
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="preprocess_car_speed_+3A_enriched_data">enriched_data</code></td>
<td>
<p>enriched data.frame containing all the data for all your sensors</p>
</td></tr>
<tr><td><code id="preprocess_car_speed_+3A_aggregated_by">aggregated_by</code></td>
<td>
<p>Character. Enables comparison with other segments or weekdays. Options are : 'segment_name', 'weekday'.</p>
</td></tr>
<tr><td><code id="preprocess_car_speed_+3A_date_range">date_range</code></td>
<td>
<p>Date vector. Example: c('2021-01-01','2022-01-01').</p>
</td></tr>
<tr><td><code id="preprocess_car_speed_+3A_segments">segments</code></td>
<td>
<p>Character vector. Selected road segment.</p>
</td></tr>
<tr><td><code id="preprocess_car_speed_+3A_weekday">weekday</code></td>
<td>
<p>Character vector. Weekday choosen.</p>
</td></tr>
<tr><td><code id="preprocess_car_speed_+3A_hours">hours</code></td>
<td>
<p>Integer vector. Hours choosen.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of parameters and data preprocessed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>preprocess_car_speed(traffic,
  date_range = c('2022-01-01','2022-03-01'),
  segments = 'RteVitre-06',
  weekday = c('monday','sunday'),
  hours = 17:20,
  aggregated_by = "weekday")

</code></pre>

<hr>
<h2 id='retrieve_sensor'>Retrieves data associated with a sensor from the Telraam API</h2><span id='topic+retrieve_sensor'></span>

<h3>Description</h3>

<p>Retrieves data associated with a sensor from the Telraam API.
The data is retrieved for a specified time period between <code>start_date</code> and <code>end_date</code> (inclusive).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrieve_sensor(segment_name, start_date, end_date, key = get_telraam_token())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="retrieve_sensor_+3A_segment_name">segment_name</code></td>
<td>
<p>Character. Name of the segment, as specified in config.</p>
</td></tr>
<tr><td><code id="retrieve_sensor_+3A_start_date">start_date</code></td>
<td>
<p>Date. Start date &quot;aaaa-mm-jj&quot;, must be of the date type.</p>
</td></tr>
<tr><td><code id="retrieve_sensor_+3A_end_date">end_date</code></td>
<td>
<p>Date. End date &quot;aaaa-mm-jj&quot;, must be of the date type.</p>
</td></tr>
<tr><td><code id="retrieve_sensor_+3A_key">key</code></td>
<td>
<p>the API key (set by the <code>set_telraam_token()</code> function)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe from Telraam API, enriched with <code>enrich_traffic()</code> function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # This function requires a valid API key
period &lt;- as.Date(c('2022-01-01', '2022-12-31'))
retrieve_sensor('RteVitre-06', period[1], period[2])

## End(Not run)

</code></pre>

<hr>
<h2 id='seq_by_3_month'>Generate sequence of intervals with three-month periods</h2><span id='topic+seq_by_3_month'></span>

<h3>Description</h3>

<p>This function is used internally in the <code>retrieve_sensor</code> function to generate a sequence of intervals with three-month periods. It takes a start date (<code>start_date</code>) and an end date (<code>end_date</code>), and returns a data frame with two columns representing the start and end dates of each interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seq_by_3_month(start_date, end_date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq_by_3_month_+3A_start_date">start_date</code></td>
<td>
<p>Date. Start date in &quot;yyyy-mm-dd&quot; format.</p>
</td></tr>
<tr><td><code id="seq_by_3_month_+3A_end_date">end_date</code></td>
<td>
<p>Date. End date in &quot;yyyy-mm-dd&quot; format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with a <code>start</code> and an <code>end</code> columns, each row represents 3 months period.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>seq_by_3_month(as.Date('2023-11-01'),as.Date('2024-11-01'))

</code></pre>

<hr>
<h2 id='set_global_vars'>Function to set up the global variables for public holidays and vacations, with the default
being the french dates from a governmental API.</h2><span id='topic+set_global_vars'></span>

<h3>Description</h3>

<p>Function to set up the global variables for public holidays and vacations, with the default
being the french dates from a governmental API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_global_vars(vacations = NULL, public_holidays = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_global_vars_+3A_vacations">vacations</code></td>
<td>
<p>data frame containing the vacation dates</p>
</td></tr>
<tr><td><code id="set_global_vars_+3A_public_holidays">public_holidays</code></td>
<td>
<p>data frame containing the public holidays dates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Don't return anything, set up the global variables for public holidays and vacations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pkg.globals &lt;- new.env(parent = emptyenv())
set_global_vars()
print(pkg.globals$vacations)
</code></pre>

<hr>
<h2 id='set_telraam_token'>Saves an authentication token for the 'Telraam' API.</h2><span id='topic+set_telraam_token'></span>

<h3>Description</h3>

<p>If you want to get this token after this instruction, please use <code>get_telraam_token()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_telraam_token(token)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_telraam_token_+3A_token">token</code></td>
<td>
<p>a <code>string</code> with the token</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean: TRUE if the token is correctly set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_token &lt;- "MyTelraamToken"
set_telraam_token(my_token)
get_telraam_token()

</code></pre>

<hr>
<h2 id='traffic'>Traffic data of Telraam sensors in Châteaubourg (FR)</h2><span id='topic+traffic'></span>

<h3>Description</h3>

<p>Telraam sensors continously monitor a street form a citizen window.
They count heavy vehicules, cars, twok-wheelers and pedestrians, every hour.
Châteaubourg is one of the city in France with the highest density of sensors
This dataframe is a subset of sensors data in Châteaubourg for 2022.
Additional properties are not present natively in the Telraam API but are added by the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>traffic
</code></pre>


<h3>Format</h3>



<h4><code>traffic</code></h4>

<p>A data frame with 16,729 rows and 22 columns:
</p>

<dl>
<dt>instance_id</dt><dd><p>Sensor number. Equals -1 if the API request was made for a road segment and not for a camera.</p>
</dd>
<dt>segment_id</dt><dd><p>Road segment Telraam ID. Equals -1 if the API request was made for a camera and not for a road segment.</p>
</dd>
<dt>segment_name</dt><dd><p>Additional property - Segment name specified in configuration file.</p>
</dd>
<dt>segment_fullname</dt><dd><p>Additional property - Concatenation of the segment_id and the segment name specified in configuration.</p>
</dd>
<dt>date</dt><dd><p>date and UTC time of the reporting interval (beginning of the interval).</p>
</dd>
<dt>day</dt><dd><p>Additional property - Day of the reporting interval.</p>
</dd>
<dt>hour</dt><dd><p>Additional property - Hour of the reporting interval.</p>
</dd>
<dt>weekday</dt><dd><p>Additional property - Weekday of the reporting interval.</p>
</dd>
<dt>holiday</dt><dd><p>Additional property - boolean, indicates whether this entry is during a French public holiday.</p>
</dd>
<dt>vacation</dt><dd><p>Indicates whether this entry is during a French vacation period, and if true, the vacation period name.</p>
</dd>
<dt>interval</dt><dd><p>can be &quot;hourly&quot; or &quot;daily&quot; for hourly or daily aggregate data.</p>
</dd>
<dt>uptime</dt><dd><p>between 0 and 1, represents the portion of the reporting interval that was actively spent counting the traffic</p>
</dd>
<dt>uptime_quality</dt><dd><p>Additional property - boolean, indicates whether this entry has an uptime greather or equal than 0.</p>
</dd>
<dt>heavy, heavy_lft, heavy_rgt</dt><dd><p>number of heavy vehicles, total and in both directions.</p>
</dd>
<dt>car, car_lft, car_rgt</dt><dd><p>number of cars, total and in both directions.</p>
</dd>
<dt>bike, bike_lft, bike_rgt</dt><dd><p>number of two-wheelers, total and in both directions.</p>
</dd>
<dt>pedestrian, pedestrian_lft, pedestrian_rgt</dt><dd><p>number of pedestrians, total and in both directions.</p>
</dd>
<dt>direction</dt><dd><p>1, internal consistency value for Telraam.</p>
</dd>
<dt>car_speed_hist_0to70plus, car_speed_hist_0to120plus</dt><dd><p>the estimated car speed distribution in 10 km/h bins from 0 to 70+ km/h or 120+ km/h (in percentage of the total 100%).</p>
</dd>
<dt>timezone</dt><dd><p>name of the Time zone where the segment can be found.</p>
</dd>
<dt>v85</dt><dd><p>estimated car speed limit in km/h that 85% of all cars respect</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://telraam-api.net/">https://telraam-api.net/</a>
</p>

<hr>
<h2 id='write_update_data'>Write or update the sensor data in the data folder</h2><span id='topic+write_update_data'></span>

<h3>Description</h3>

<p>Writes or updates the sensor data in the data folder.
It retrieves the data for the specified sensor between <code>start_date</code>
and <code>end_date</code> (inclusive) using the <code>retrieve_sensor</code> function,
and then converts certain columns to character strings before writing the data
to a RData file in the <code>data</code> folder (if <code>create_directory = TRUE</code>),
to a temporary folder otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_update_data(segment_name, start_date, end_date, create_directory = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_update_data_+3A_segment_name">segment_name</code></td>
<td>
<p>Character. Name of the segment, as specified in config.</p>
</td></tr>
<tr><td><code id="write_update_data_+3A_start_date">start_date</code></td>
<td>
<p>Date. Start date &quot;aaaa-mm-jj&quot;</p>
</td></tr>
<tr><td><code id="write_update_data_+3A_end_date">end_date</code></td>
<td>
<p>Date. End date &quot;aaaa-mm-jj&quot;</p>
</td></tr>
<tr><td><code id="write_update_data_+3A_create_directory">create_directory</code></td>
<td>
<p>Boolean: Does the file need to be created in the project directory? Default to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean: TRUE if the data is well saved/written, FALSE otherwise (no data for example)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # This function requires a valid API key
period &lt;- as.Date(c('2022-01-01', '2022-12-31'))
write_update_data('RteVitre-06', period[1], period[2])

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
