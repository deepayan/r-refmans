<!DOCTYPE html><html><head><title>Help for package crosswalkr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {crosswalkr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#crosswalkr'><p>crosswalkr: Rename and Encode Data Frames Using External Crosswalk Files</p></a></li>
<li><a href='#encodefrom'><p>Encode data frame column using external crosswalk file.</p></a></li>
<li><a href='#renamefrom'><p>Rename data frame columns using external crosswalk file.</p></a></li>
<li><a href='#stcrosswalk'><p>State crosswalk data set.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Rename and Encode Data Frames Using External Crosswalk Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.6</td>
</tr>
<tr>
<td>Description:</td>
<td>A pair of functions for renaming and encoding data frames
	     using external crosswalk files. It is especially useful when
	     constructing master data sets from multiple smaller data
	     sets that do not name or encode variables consistently
	     across files. Based on similar commands in 'Stata'.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/btskinner/crosswalkr">https://github.com/btskinner/crosswalkr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/btskinner/crosswalkr/issues">https://github.com/btskinner/crosswalkr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>haven, labelled, methods, readr, readxl, tibble</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, dplyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-12-30 16:58:00 UTC; b.skinner</td>
</tr>
<tr>
<td>Author:</td>
<td>Benjamin Skinner <a href="https://orcid.org/0000-0002-0337-7415"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Benjamin Skinner &lt;btskinner@coe.ufl.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-01-08 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='crosswalkr'>crosswalkr: Rename and Encode Data Frames Using External Crosswalk Files</h2><span id='topic+crosswalkr'></span>

<h3>Description</h3>

<p>A pair of functions for renaming and encoding data frames using
external crosswalk files. Especially useful when constructing
master data sets from multiple smaller data sets that do not name
or encode variables consistently across files. Based on
-renamefrom- and -encodefrom- Stata commands.
</p>

<hr>
<h2 id='encodefrom'>Encode data frame column using external crosswalk file.</h2><span id='topic+encodefrom'></span><span id='topic+encodefrom_'></span>

<h3>Description</h3>

<p>Encode data frame column using external crosswalk file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encodefrom(
  .data,
  var,
  cw_file,
  raw,
  clean,
  label,
  delimiter = NULL,
  sheet = NULL,
  case_ignore = TRUE,
  ignore_tibble = FALSE
)

encodefrom_(
  .data,
  var,
  cw_file,
  raw,
  clean,
  label,
  delimiter = NULL,
  sheet = NULL,
  case_ignore = TRUE,
  ignore_tibble = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encodefrom_+3A_.data">.data</code></td>
<td>
<p>Data frame or tbl_df</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_var">var</code></td>
<td>
<p>Column name of vector to be encoded</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_cw_file">cw_file</code></td>
<td>
<p>Either data frame object or string with path to
external crosswalk file, including path, which has columns
representing <code>raw</code> (current) vector values, <code>clean</code>
(new) vector values, and <code>label</code>s for values. Values in
<code>raw</code> and <code>clean</code> columns must be unique (1:1 match)
or an error will be thrown. Acceptable file types include:
delimited (.csv, .tsv, or other), R (.rda, .rdata, .rds), or
Stata (.dta).</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_raw">raw</code></td>
<td>
<p>Name of column in <code>cw_file</code> that contains values in
current vector.</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_clean">clean</code></td>
<td>
<p>Name of column in <code>cw_file</code> that contains new
values for vector.</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_label">label</code></td>
<td>
<p>Name of column in <code>cw_file</code> with labels for new
values.</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_delimiter">delimiter</code></td>
<td>
<p>String delimiter used to parse
<code>cw_file</code>. Only necessary if using a delimited file that
isn't a comma-separated or tab-separated file (guessed by
function based on file ending).</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_sheet">sheet</code></td>
<td>
<p>Specify sheet if <code>cw_file</code> is an Excel file and
required sheet isn't the first one.</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_case_ignore">case_ignore</code></td>
<td>
<p>Ignore case when matching current (<code>raw</code>)
vector name with new (<code>clean</code>) column name.</p>
</td></tr>
<tr><td><code id="encodefrom_+3A_ignore_tibble">ignore_tibble</code></td>
<td>
<p>Ignore <code>.data</code> status as tbl_df and
return vector as a factor rather than labelled vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector that is either a factor or labelled, depending on
data input and options
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>encodefrom_</code>: Standard evaluation version of
<code><a href="#topic+encodefrom">encodefrom</a></code> (<code>var</code>, <code>raw</code>, <code>clean</code>,
and <code>label</code> must be strings when using this version)
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(state = c('Kentucky','Tennessee','Virginia'),
                 stfips = c(21,47,51),
                 cenregnm = c('South','South','South'))

df_tbl &lt;- tibble::as_tibble(df)

cw &lt;- get(data(stcrosswalk))

df$state2 &lt;- encodefrom(df, state, cw, stname, stfips, stabbr)
df_tbl$state2 &lt;- encodefrom(df_tbl, state, cw, stname, stfips, stabbr)
df_tbl$state3 &lt;- encodefrom(df_tbl, state, cw, stname, stfips, stabbr,
                            ignore_tibble = TRUE)

haven::as_factor(df_tbl)
haven::zap_labels(df_tbl)
</code></pre>

<hr>
<h2 id='renamefrom'>Rename data frame columns using external crosswalk file.</h2><span id='topic+renamefrom'></span><span id='topic+renamefrom_'></span>

<h3>Description</h3>

<p>Rename data frame columns using external crosswalk file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renamefrom(
  .data,
  cw_file,
  raw,
  clean,
  label = NULL,
  delimiter = NULL,
  sheet = NULL,
  drop_extra = TRUE,
  case_ignore = TRUE,
  keep_label = FALSE,
  name_label = FALSE
)

renamefrom_(
  .data,
  cw_file,
  raw,
  clean,
  label = NULL,
  delimiter = NULL,
  sheet = NULL,
  drop_extra = TRUE,
  case_ignore = TRUE,
  keep_label = FALSE,
  name_label = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="renamefrom_+3A_.data">.data</code></td>
<td>
<p>Data frame or tbl_df</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_cw_file">cw_file</code></td>
<td>
<p>Either data frame object or string with path to
external crosswalk file, which has columns representing
<code>raw</code> (current) column names, <code>clean</code> (new) column
names, and labels (optional). Values in <code>raw</code> and
<code>clean</code> columns must be unique (1:1 match) or an error
will be thrown. Acceptable file types include: delimited (.csv,
.tsv, or other), R (.rda, .rdata, .rds), or Stata (.dta).</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_raw">raw</code></td>
<td>
<p>Name of column in <code>cw_file</code> that contains column
names of current data frame.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_clean">clean</code></td>
<td>
<p>Name of column in <code>cw_file</code> that contains new
column names.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_label">label</code></td>
<td>
<p>Name of column in <code>cw_file</code> with labels for
columns.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_delimiter">delimiter</code></td>
<td>
<p>String delimiter used to parse
<code>cw_file</code>. Only necessary if using a delimited file that
isn't a comma-separated or tab-separated file (guessed by
function based on file ending).</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_sheet">sheet</code></td>
<td>
<p>Specify sheet if <code>cw_file</code> is an Excel file and
required sheet isn't the first one.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_drop_extra">drop_extra</code></td>
<td>
<p>Drop extra columns in current data frame if they
are not matched in <code>cw_file</code>.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_case_ignore">case_ignore</code></td>
<td>
<p>Ignore case when matching current (<code>raw</code>)
column names with new (<code>clean</code>) column names.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_keep_label">keep_label</code></td>
<td>
<p>Keep current label, if any, on data frame columns
that aren't matched in <code>cw_file</code>. Default <code>FALSE</code>
means that unmatched columns have any existing labels set to
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="renamefrom_+3A_name_label">name_label</code></td>
<td>
<p>Use old (<code>raw</code>) column name as new
(<code>clean</code>) column name label. Cannot be used if
<code>label</code> option is set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame or tbl_df with new column names and labels.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>renamefrom_</code>: Standard evaluation version of
<code><a href="#topic+renamefrom">renamefrom</a></code> (<code>raw</code>, <code>clean</code>, and
<code>label</code> must be strings when using this version)
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(state = c('Kentucky','Tennessee','Virginia'),
                 fips = c(21,47,51),
                 region = c('South','South','South'))

cw &lt;- data.frame(old_name = c('state','fips'),
                 new_name = c('stname','stfips'),
                 label = c('Full state name', 'FIPS code'))

df1 &lt;- renamefrom(df, cw, old_name, new_name, label)
df2 &lt;- renamefrom(df, cw, old_name, new_name, name_label = TRUE)
df3 &lt;- renamefrom(df, cw, old_name, new_name, drop_extra = FALSE)

</code></pre>

<hr>
<h2 id='stcrosswalk'>State crosswalk data set.</h2><span id='topic+stcrosswalk'></span>

<h3>Description</h3>

<p>An example state crosswalk. Includes information for all states
plus the District of Columbia.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stcrosswalk
</code></pre>


<h3>Format</h3>

<p>A data frame with 51 rows and 7 variables:
</p>

<dl>
<dt>stfips</dt><dd><p>Two-digit state FIPS codes</p>
</dd>
<dt>stabbr</dt><dd><p>Two-letter state abbreviation</p>
</dd>
<dt>stname</dt><dd><p>Full state name</p>
</dd>
<dt>cenreg</dt><dd><p>Census region number</p>
</dd>
<dt>cenregnm</dt><dd><p>Census region name</p>
</dd>
<dt>cendiv</dt><dd><p>Census division number</p>
</dd>
<dt>cendivnm</dt><dd><p>Census division name</p>
</dd>
</dl>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
