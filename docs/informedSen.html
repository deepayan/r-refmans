<!DOCTYPE html><html lang="en"><head><title>Help for package informedSen</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {informedSen}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#informedSen-package'>
<p>Sensitivity Analysis Informed by a Test for Bias</p></a></li>
<li><a href='#HDL'>
<p>Light Daily Alcohol and HDL Cholesterol Levels</p></a></li>
<li><a href='#informedsen'>
<p>Sensitivity Analysis Informed by a Test for Unmeasured Bias</p></a></li>
<li><a href='#senmscores'>
<p>Computes M-scores for M-tests.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sensitivity Analysis Informed by a Test for Bias</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.7</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul R Rosenbaum</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul R Rosenbaum &lt;rosenbaum@wharton.upenn.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>After testing for biased treatment assignment in an observational study using an unaffected outcome, the sensitivity analysis is constrained to be compatible with that test.  The package uses the optimization software gurobi obtainable from <a href="https://www.gurobi.com/">https://www.gurobi.com/</a>, together with its associated R package, also called gurobi; see: <a href="https://www.gurobi.com/documentation/7.0/refman/installing_the_r_package.html">https://www.gurobi.com/documentation/7.0/refman/installing_the_r_package.html</a>.  The method is a substantial computational and practical enhancement of a concept introduced in Rosenbaum (1992) Detecting bias with confidence in observational studies Biometrika, 79(2), 367-374  &lt;<a href="https://doi.org/10.1093%2Fbiomet%2F79.2.367">doi:10.1093/biomet/79.2.367</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>sensitivitymult, stats</td>
</tr>
<tr>
<td>Enhances:</td>
<td>gurobi</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-08-02 20:56:29 UTC; rosenbap</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-08-04 09:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='informedSen-package'>
Sensitivity Analysis Informed by a Test for Bias
</h2><span id='topic+informedSen-package'></span><span id='topic+informedSen'></span>

<h3>Description</h3>

<p>After testing for biased treatment assignment in an observational study using an unaffected outcome, the sensitivity analysis is constrained to be compatible with that test.  The package uses the optimization software gurobi obtainable from &lt;https://www.gurobi.com/&gt;, together with its associated R package, also called gurobi; see: &lt;https://www.gurobi.com/documentation/7.0/refman/installing_the_r_package.html&gt;.  The method is a substantial computational and practical enhancement of a concept introduced in Rosenbaum (1992) Detecting bias with confidence in observational studies Biometrika, 79(2), 367-374  &lt;doi:10.1093/biomet/79.2.367&gt;.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> informedSen</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Sensitivity Analysis Informed by a Test for Bias</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0.7</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Paul R Rosenbaum</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Paul R Rosenbaum &lt;rosenbaum@wharton.upenn.edu&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> After testing for biased treatment assignment in an observational study using an unaffected outcome, the sensitivity analysis is constrained to be compatible with that test.  The package uses the optimization software gurobi obtainable from &lt;https://www.gurobi.com/&gt;, together with its associated R package, also called gurobi; see: &lt;https://www.gurobi.com/documentation/7.0/refman/installing_the_r_package.html&gt;.  The method is a substantial computational and practical enhancement of a concept introduced in Rosenbaum (1992) Detecting bias with confidence in observational studies Biometrika, 79(2), 367-374  &lt;doi:10.1093/biomet/79.2.367&gt;.</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
 <td style="text-align: left;">
Encoding: </td><td style="text-align: left;"> UTF-8</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyData: </td><td style="text-align: left;"> true</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> sensitivitymult, stats</td>
</tr>
<tr>
 <td style="text-align: left;">
Enhances: </td><td style="text-align: left;"> gurobi</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 3.5.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
HDL                     Light Daily Alcohol and HDL Cholesterol Levels
informedSen-package     Sensitivity Analysis Informed by a Test for
                        Bias
informedsen             Sensitivity Analysis Informed by a Test for
                        Unmeasured Bias
senmscores              Computes M-scores for M-tests.
</pre>
<p>The package performs a sensitivity analysis within a confidence set provided by a test for unmeasured bias.  The method is a substantial computational and practical enhancement of a concept introduced in Rosenbaum (1992) Detecting bias with confidence in observational studies. Biometrika, 79(2), 367-374.  &lt;doi:10.1093/biomet/79.2.367&gt;  The main function in the package is informedsen.  The package uses the optimization software gurobi obtainable from &lt;https://www.gurobi.com/&gt;, together with its associated R package, also called gurobi; see: &lt;https://www.gurobi.com/documentation/7.0/refman/installing_the_r_package.html&gt;.  See the example in informedsen for discussion about obtaining gurobi and its associated local R-package.
</p>


<h3>Author(s)</h3>

<p>Paul R Rosenbaum
</p>
<p>Maintainer: Paul R Rosenbaum &lt;rosenbaum@wharton.upenn.edu&gt;
</p>


<h3>References</h3>

<p>Rosenbaum, P. R. (1984). From association to causation in observational studies: The role of tests of strongly ignorable treatment assignment. Journal of the American Statistical Association 79, 41-48.
&lt;doi:10.1080/01621459.1984.10477060&gt;
</p>
<p>Rosenbaum, P. R. (1989a). On permutation tests for hidden biases in observational studies. The Annals of Statistics 17, 643-653.
&lt;doi:10.1214/aos/1176347131&gt;
</p>
<p>Rosenbaum, P. R. (1989b). The role of known effects in observational studies. Biometrics 45, 557-569. &lt;doi:10.2307/2531497&gt;
</p>
<p>Rosenbaum, P. R. (1992). Detecting bias with confidence in observational studies. Biometrika, 79(2), 367-374. &lt;doi:10.1093/biomet/79.2.367&gt;
</p>
<p>Rosenbaum, P. R. (2007) Sensitivity analysis for m-estimates, tests and confidence intervals in matched observational studies. Biometrics, 2007, 63, 456-464. &lt;doi:10.1111/j.1541-0420.2006.00717.x&gt;
</p>
<p>Rosenbaum, P. R. (2021). Sensitivity analyses informed by tests for bias in observational studies.  Manuscript.  This manuscript describes and illustrates the new computational tools that make feasible the method in Rosenbaum (1992).  The example in the package is the example in this manuscript.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To run these examples, you MUST have gurobi installed.
# The makers of gurobi provide free access to academics.
# Additionally, you must install the local R package gurobi
# that is provided by installing gurobi.
# The examples are from Rosenbaum (2021)
data(HDL)
shdl&lt;-senmscores(HDL$hdl,HDL$z,HDL$mset)
smmerc&lt;-senmscores(HDL$mmercury,HDL$z,HDL$mset)
sc&lt;-cbind(shdl,smmerc)
informedsen(3.5, sc, HDL$z, HDL$mset, alpha = 0.05)
informedsen(3.4, sc, HDL$z, HDL$mset, alpha = c(0.04,0.01))

## End(Not run)
</code></pre>

<hr>
<h2 id='HDL'>
Light Daily Alcohol and HDL Cholesterol Levels
</h2><span id='topic+HDL'></span>

<h3>Description</h3>

<p>An observational study of light daily alcohol consumption (1-3 drinks per day) versus little or no alcohol, and its possible effects on HDL cholesterol levels.  The level of methylmercury is viewed as an unaffected outcome and used to test for biased treatment assignment.  Data is from NHANES 2013/2014 and 2015/2016.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("HDL")</code></pre>


<h3>Format</h3>

<p>A data frame with 800 observations on the following 9 variables.
</p>

<dl>
<dt><code>SEQN</code></dt><dd><p>NHANES sequence number</p>
</dd>
<dt><code>nh</code></dt><dd><p>Either 1314 for NHANES 2013/2014 or 1516 for NHANES 2015/2016</p>
</dd>
<dt><code>z</code></dt><dd><p>Treatment indicator, z=1 for light daily alcohol or z=0 for little or no alcohol.</p>
</dd>
<dt><code>mset</code></dt><dd><p>Matched set indicator, 1 to 200, for 200 matched sets, each containing one treated and three controls.</p>
</dd>
<dt><code>age</code></dt><dd><p>Age in years.  Used in matching.</p>
</dd>
<dt><code>female</code></dt><dd><p>1 for female, 0 for male.  Used in matching.</p>
</dd>
<dt><code>education</code></dt><dd><p>NHANES 1-5 education scale.  1 is &lt;9th grade, 3 is high school, 5 is at least a BA degree.</p>
</dd>
<dt><code>hdl</code></dt><dd><p>HDL cholesterol level</p>
</dd>
<dt><code>mmercury</code></dt><dd><p>Methylmercury level</p>
</dd>
</dl>



<h3>Source</h3>

<p>US National Health and Nutrition Examination Survey.  Publicly available on-line.
</p>


<h3>References</h3>

<p>LoConte, N. K., Brewster, A. M., Kaur, J. S., Merrill, J. K., and Alberg, A. J. (2018). Alcohol and cancer: a statement of the American Society of Clinical Oncology. Journal of Clinical Oncology 36, 83-93.
</p>
<p>Rosenbaum, P. R. (2021). Sensitivity analyses informed by tests for bias in observational studies.  Manuscript.  See its data appendix.
</p>
<p>Suh, I., Shaten, B. J., Cutler, J. A., and Kuller, L. H. (1992). Alcohol use and mortality from coronary heart disease: the role of high-density lipoprotein cholesterol. Annals of Internal Medicine 116, 881-887.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(HDL)
boxplot(HDL$age~HDL$z) # ages are similar
boxplot(HDL$hdl~HDL$z) # hdl is higher
boxplot(HDL$mmercury~HDL$z,log="y") # methylmercury is higher
</code></pre>

<hr>
<h2 id='informedsen'>
Sensitivity Analysis Informed by a Test for Unmeasured Bias
</h2><span id='topic+informedsen'></span>

<h3>Description</h3>

<p> The function does a a sensitivity analysis for one outcome informed or constrained by the results of a test for unmeasured bias based on another outcome known to be unaffected by the treatment. The package uses gurobi to solve a quadratically constrained quadratic program.  To use the package, the gurobi solver must be installed.  See the discussion about installing gurobi in the example below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>informedsen(gamma, sc, z, mset, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="informedsen_+3A_gamma">gamma</code></td>
<td>

<p>The sensitivity parameter.  A number greater than or equal to 1.
</p>
</td></tr>
<tr><td><code id="informedsen_+3A_sc">sc</code></td>
<td>

<p>A matrix with N rows and at least two columns.  The first column is the primary outcome, typically after scoring using senmscores.  The remaining columns are unaffected outcomes used to test for bias, typically after scoring using senmscores.
</p>
</td></tr>
<tr><td><code id="informedsen_+3A_z">z</code></td>
<td>

<p>A vector of length N whose N coordinates are 1 for treated, 0 for control.
</p>
</td></tr>
<tr><td><code id="informedsen_+3A_mset">mset</code></td>
<td>

<p>A vector of length N indicating the matched set.  Each matched set contains one treated individual and the same fixed number of controls.
</p>
</td></tr>
<tr><td><code id="informedsen_+3A_alpha">alpha</code></td>
<td>

<p>A vector with length equal to the number of columns of sc.  The jth coordinate of alpha is the level of the test applied to the jth column of sc.  If alpha is a scalar, it is repeated for every column of sc.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>result</code></td>
<td>
<p>Text indicating whether or not the test for bias rejects all biases of magnitude Gamma or less.  If yes, then the conclusion is that you must increase Gamma to continue.  If no, then the test on the promary outcome is conducted inside the confidence set defined by a test for bias. The text begins after gurobi prints its standard output for the underlying optimization problem.</p>
</td></tr>
<tr><td><code>optimization.problem</code></td>
<td>
<p>Reiterates the result above, where the word yes means the optimization problem is infeasible, and the word no means it is feasible.  See the conclusion for a scientific interpretation of this aspect of the output.</p>
</td></tr>
<tr><td><code>conclusion</code></td>
<td>
<p>Text indicating the result of the test for effect on the primary outcome.</p>
</td></tr>
<tr><td><code>deviates</code></td>
<td>
<p>A vector of standardized deviates that might be compared with the standard Normal distribution.  There is one deviate for each column of sc.  If sc has column names, then the column names label the
deviates.  The deviates are computed at the treatment assignment probabilities, theta, that solve the constrained optimization problem.</p>
</td></tr>
<tr><td><code>alphas</code></td>
<td>
<p>A vector of two-sided levels used for the deviates, together with their total.  The total is relevant if the Bonferroni inequality is used to ensure joint level of all the tests.  The absolute deviates might be compared with qnorm(1-alphas/2) for a two-sided test.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>When gurobi is called, it produces extensive output.  The output for informedsen appears at the end, after gurobi has produced its output.  Most users will wish to skip to the end, for the output from informedsen, returning to the gurobi output only if needed.
</p>
<p>informedsen checks that your input has the required form, and it will stop if there is a problem with your input.  For instance, informedsen will stop if you supply a value of gamma that is less than one.
</p>


<h3>Author(s)</h3>

<p>Paul R. Rosenbaum
</p>


<h3>References</h3>

<p>Berger, R. L. and Boos, D. D. (1994). P-values maximized over a confidence set for the nuisance parameter. Journal of the American Statistical Association, 89, 1012-1016. &lt;doi:10.1080/01621459.1994.10476836&gt;
</p>
<p>Rosenbaum, P. R. (1984). From association to causation in observational studies: The role of tests of strongly ignorable treatment assignment. Journal of the American Statistical Association 79, 41-48.
&lt;doi:10.1080/01621459.1984.10477060&gt;
</p>
<p>Rosenbaum, P. R. (1989a). On permutation tests for hidden biases in observational studies. The Annals of Statistics 17, 643-653.
&lt;doi:10.1214/aos/1176347131&gt;
</p>
<p>Rosenbaum, P. R. (1989b). The role of known effects in observational studies. Biometrics 45, 557-569. &lt;doi:10.2307/2531497&gt;
</p>
<p>Rosenbaum, P. R. (1992). Detecting bias with confidence in observational studies. Biometrika, 79(2), 367-374. &lt;doi:10.1093/biomet/79.2.367&gt;
</p>
<p>Rosenbaum, P. R. (2007) Sensitivity analysis for m-estimates, tests and confidence intervals in matched observational studies. Biometrics, 2007, 63, 456-464. &lt;doi:10.1111/j.1541-0420.2006.00717.x&gt;
</p>
<p>Rosenbaum, P. R. (2021). Sensitivity analyses informed by tests for bias in observational studies.  Manuscript.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To run these examples, you MUST have gurobi installed.
# gurobi is available for free to academic faculty
# Search for the gurobi web page, and click the menu for Academia
# Search for "gurobi and R" to find gurobi's local R package
#  connecting gurobi and R.  You must install both gurobi
#  and its local R package to run informedsen.
#
# The examples are from Rosenbaum (2021)
#
# gurobi generates output before the output from informedsen
#  appears.  In a first use, you might skip to the output
#  from informedsen, which begins with text labeled result.
#
data(HDL)
shdl&lt;-senmscores(HDL$hdl,HDL$z,HDL$mset)
smmerc&lt;-senmscores(HDL$mmercury,HDL$z,HDL$mset)
sc&lt;-cbind(shdl,smmerc)

# A test within the confidence set
informedsen(3.5, sc, HDL$z, HDL$mset, alpha = 0.05)

# A test within the confidence set using
# the method of Berger and Boos (1994)
informedsen(3.4, sc, HDL$z, HDL$mset, alpha = c(0.04,0.01))

# An example in which the confidence set is empty
informedsen(1.25, sc, HDL$z, HDL$mset, alpha = .05)

## End(Not run)
</code></pre>

<hr>
<h2 id='senmscores'>
Computes M-scores for M-tests.
</h2><span id='topic+senmscores'></span>

<h3>Description</h3>

<p>Computes M-scores for an M-test with one outcome in 1-to-k matched sets, for fixed k&gt;=1.  For the one-sample problem or matched pairs, Maritz (1979) proposed robust tests and confidence intervals based on Huber's (1981) M-estimates.  These tests are extended to matching with several controls in Rosenbaum (2007).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>senmscores(y, z, mset, inner = 0, trim = 3, lambda = 1/2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="senmscores_+3A_y">y</code></td>
<td>

<p>A vector of length N for one outcome.
</p>
</td></tr>
<tr><td><code id="senmscores_+3A_z">z</code></td>
<td>

<p>A vector whose N coordinates are 1 for treated, 0 for control.
</p>
</td></tr>
<tr><td><code id="senmscores_+3A_mset">mset</code></td>
<td>

<p>A vector of length N giving the matched set.
</p>
</td></tr>
<tr><td><code id="senmscores_+3A_inner">inner</code></td>
<td>

<p>See trim.
</p>
</td></tr>
<tr><td><code id="senmscores_+3A_trim">trim</code></td>
<td>

<p>The two values, inner and trim, define the M-statistic's psi-function. The psi-function is an odd function, psi(y) = -psi(-y), so it suffices to define it for nonnegative y.  For nonnegative y, psi(y) equals 0 for y between 0 and inner, rises linearly from 0 to 1 for y between inner and trim, and equals 1 for y greater than trim.  There are two requirements: inner must be nonnegative, and trim must be larger than inner.
</p>
</td></tr>
<tr><td><code id="senmscores_+3A_lambda">lambda</code></td>
<td>

<p>A number strictly between 0 and 1.  The M-scores are psi(y/s) where s is the lambda quantile of the within-set absolute pair differences.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The choice of psi-function to increase insensitivity to unmeasured bias is discussed in Rosenbaum (2013), where the parameter inner is proposed.
</p>


<h3>Value</h3>

<p>A vector of length N containing the M-scores.
</p>


<h3>Note</h3>

<p>The function is essentially a wrapper for the mscoresv function in the sensitivitymult package.  It is easier to use senmscores when using the informedSen package.
</p>


<h3>Author(s)</h3>

<p>Paul R. Rosenbaum
</p>


<h3>References</h3>

<p>Huber, P. (1981). Robust Statistics.  NY: Wiley.
</p>
<p>Maritz, J. S. (1979). A note on exact robust condence intervals for location. Biometrika 66, 163-170.
</p>
<p>Rosenbaum, P. R. (2007) Sensitivity analysis for m-estimates, tests and confidence intervals in matched observational studies. Biometrics, 2007, 63, 456-464. &lt;doi:10.1111/j.1541-0420.2006.00717.x&gt;
</p>
<p>Rosenbaum, P. R. (2013). Impact of multiple matched controls on design sensitivity in observational studies. Biometrics 69 118-127. (Introduces inner trimming.) &lt;doi:10.1111/j.1541-0420.2012.01821.x&gt;
</p>
<p>Rosenbaum, P. R. (2015). Two R packages for sensitivity analysis in observational studies. Observational Studies, v. 1. (Free on-line.)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(HDL)
shdl&lt;-senmscores(HDL$hdl,HDL$z,HDL$mset)
plot(HDL$hdl,shdl)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
