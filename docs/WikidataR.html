<!DOCTYPE html><html lang="en"><head><title>Help for package WikidataR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {WikidataR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#WikidataR'><p>API client library for Wikidata</p></a></li>
<li><a href='#as_pid'><p>Convert an input to a property PID</p></a></li>
<li><a href='#as_qid'><p>Convert an input to a item QID</p></a></li>
<li><a href='#as_quot'><p>Add quotations marks</p></a></li>
<li><a href='#as_sid'><p>Convert an input to a source property SID</p></a></li>
<li><a href='#check_input'><p>Generic input checker</p></a></li>
<li><a href='#createrows'><p>&quot;CREATE&quot; rows</p></a></li>
<li><a href='#createrows.tidy'><p>&quot;CREATE&quot; rows from tidy format</p></a></li>
<li><a href='#disambiguate_QIDs'><p>Disambiguate QIDs</p></a></li>
<li><a href='#extract_claims'><p>Extract Claims from Returned Item Data</p></a></li>
<li><a href='#extract_para'><p>Extract a paragraph of text</p></a></li>
<li><a href='#filter_qids'><p>Filter QIDs</p></a></li>
<li><a href='#find_item'><p>Search for Wikidata items or properties that match a search term</p></a></li>
<li><a href='#get_example'><p>Get an example SPARQL query from Wikidata</p></a></li>
<li><a href='#get_geo_box'><p>Get geographic entities based on a bounding box</p></a></li>
<li><a href='#get_geo_entity'><p>Retrieve geographic information from Wikidata</p></a></li>
<li><a href='#get_item'><p>Retrieve specific Wikidata items or properties</p></a></li>
<li><a href='#get_names_from_properties'><p>Get names of properties</p></a></li>
<li><a href='#get_random_item'><p>Retrieve randomly-selected Wikidata items or properties</p></a></li>
<li><a href='#identifier_from_identifier'><p>identifier from identifier</p></a></li>
<li><a href='#initials'><p>Format short form person names</p></a></li>
<li><a href='#list_properties'><p>List properties of a Wikidata item</p></a></li>
<li><a href='#print.find_item'><p>Print method for find_item</p></a></li>
<li><a href='#print.find_property'><p>Print method for find_property</p></a></li>
<li><a href='#print.wikidata'><p>Print method for Wikidata objects</p></a></li>
<li><a href='#qid_from_DOI'><p>QID from DOI</p></a></li>
<li><a href='#qid_from_identifier'><p>QID from identifier</p></a></li>
<li><a href='#qid_from_name'><p>QID from label name</p></a></li>
<li><a href='#qid_from_ORCID'><p>QID from ORCID</p></a></li>
<li><a href='#query_wikidata'><p>Send one or more SPARQL queries to WDQS</p></a></li>
<li><a href='#searcher'><p>Convert an input to a item QID</p></a></li>
<li><a href='#sparql_query'><p>Download full Wikidata items matching a sparql query</p></a></li>
<li><a href='#unspecial'><p>Remove special characters</p></a></li>
<li><a href='#url_to_id'><p>Extract an identifier from a wikidata URL</p></a></li>
<li><a href='#wd_query'><p>Download a Wikidata item</p></a></li>
<li><a href='#wd_rand_query'><p>Download random Wikidata items</p></a></li>
<li><a href='#WD.globalvar'><p>Global variables for Wikidata properties</p></a></li>
<li><a href='#write_wikidata'><p>Write statements to Wikidata</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read-Write API Client Library for Wikidata</td>
</tr>
<tr>
<td>Version:</td>
<td>2.3.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-11-16</td>
</tr>
<tr>
<td>Description:</td>
<td>Read from, interogate, and write to Wikidata <a href="https://www.wikidata.org">https://www.wikidata.org</a> -
    the multilingual, interdisciplinary, semantic knowledgebase. Includes functions to:
    read from wikidata (single items, properties, or properties); query wikidata (retrieving
    all items that match a set of criterial via Wikidata SPARQL query service); write to
    Wikidata (adding new items or statements via QuickStatements); and handle and manipulate
    Wikidata objects (as lists and tibbles). Uses the Wikidata and Quickstatements APIs. </td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/TS404/WikidataR/issues">https://github.com/TS404/WikidataR/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/TS404/WikidataR">https://github.com/TS404/WikidataR</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, jsonlite, WikipediR, WikidataQueryServiceR, tibble,
dplyr, stringr, Hmisc, progress, pbapply, stats, readr, crayon,
utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>markdown, testthat, tidyverse, knitr, pageviews</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-16 11:48:41 UTC; thoma</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Shafee <a href="https://orcid.org/0000-0002-2298-7593"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Os Keyes <a href="https://orcid.org/0000-0001-5196-609X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Serena Signorelli [aut],
  Alex Lum <a href="https://orcid.org/0000-0002-9295-9053"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Christian Graul [ctb],
  Mikhail Popov <a href="https://orcid.org/0000-0003-0145-8948"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Shafee &lt;T.Shafee@latrobe.edu.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-16 13:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='WikidataR'>API client library for Wikidata</h2><span id='topic+WikidataR'></span><span id='topic+WikidataR-package'></span>

<h3>Description</h3>

<p>This package serves as an API client for reading and writing
to and from <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a>, (including 
via the <a href="https://quickstatements.toolforge.org/">QuickStatements</a> format),
as well as for reading from <a href="https://www.wikipedia.org">Wikipedia</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_random">get_random</a></code> for selecting a random item or property,
<code><a href="#topic+get_item">get_item</a></code> for a /specific/ item or property, or <code><a href="#topic+find_item">find_item</a></code>
for using search functionality to pull out item or property IDs where the descriptions
or aliases match a particular search term.
</p>

<hr>
<h2 id='as_pid'>Convert an input to a property PID</h2><span id='topic+as_pid'></span>

<h3>Description</h3>

<p>Convert an input string to the most likely property PID
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_pid(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_pid_+3A_x">x</code></td>
<td>
<p>a vector, data frame, or tibble of strings representaing wikidata properties</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if the inputted string is a valid PID, return the string.
If the inputted string matches a property label, return its PID.
If the inputted string matches multiple labels of multiple properties, return the PID of the first hit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># if input string is a valid PID
as_pid("P50")
# if input string matches multiple item labels
as_pid("author")
# if input string matches a single unique label
as_pid("Scopus author ID")
</code></pre>

<hr>
<h2 id='as_qid'>Convert an input to a item QID</h2><span id='topic+as_qid'></span>

<h3>Description</h3>

<p>Convert an input string to the most likely item QID
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_qid(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_qid_+3A_x">x</code></td>
<td>
<p>a vector, data frame, or tibble of strings representaing wikidata items</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if the inputted string is a valid QID, return the string.
If the inputted string matches an item label, return its QID.
If the inputted string matches multiple labels of multiple items, return the QID of the first hit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># if input string is a valid QID
as_qid("Q42")
# if input string matches multiple item labels
as_qid("Douglas Adams")
# if input string matches a single unique label
as_qid("Douglas Adams and the question of arterial blood pressure in mammals")
</code></pre>

<hr>
<h2 id='as_quot'>Add quotations marks</h2><span id='topic+as_quot'></span>

<h3>Description</h3>

<p>Add escaped quotation marks around strings that need them ready for submision to an API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_quot(x, format = "tibble")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_quot_+3A_x">x</code></td>
<td>
<p>a vector, data frame, or tibble of strings</p>
</td></tr>
<tr><td><code id="as_quot_+3A_format">format</code></td>
<td>
<p>either &quot;tibble&quot; / &quot;csv&quot; to use plain quotation marks (default), or &quot;api&quot; / &quot;website&quot; to use '%22'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble of items inside of escaped quotation marks
unless they are already in escaped quotation marks, is a QID, (in which chase it is returned unchanged)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_quot("text")
</code></pre>

<hr>
<h2 id='as_sid'>Convert an input to a source property SID</h2><span id='topic+as_sid'></span>

<h3>Description</h3>

<p>Convert an input string to the most likely source SID (equivalent to PID)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_sid(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_sid_+3A_x">x</code></td>
<td>
<p>a vector, data frame, or tibble of strings representaing wikidata source properties</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if the inputted string is a valid SID, return the string.
If the inputted string matches a property label, return its SID
If the inputted string matches multiple labels of multiple properties, return the SID of the first hit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># if input string is a valid SID
as_pid("S854")
# if input string matches multiple item labels
as_pid("URL")
# if input string matches a single unique label
as_pid("Reference URL")
</code></pre>

<hr>
<h2 id='check_input'>Generic input checker</h2><span id='topic+check_input'></span>

<h3>Description</h3>

<p>Utility function to handle namespaces. Used by <code>get_item</code> and <code>get_property</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_input(input, substitution)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_input_+3A_input">input</code></td>
<td>
<p>string to check</p>
</td></tr>
<tr><td><code id="check_input_+3A_substitution">substitution</code></td>
<td>
<p>string for what's been looked for</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolian indicating whether the checked string contains a match for the substitution string
</p>

<hr>
<h2 id='createrows'>&quot;CREATE&quot; rows</h2><span id='topic+createrows'></span>

<h3>Description</h3>

<p>Add in empty lines for QuickStatements CREATE rows that mint new QIDs.
This is a slightly messy quirk of the QuickStatements format that mints new QIDs via a line
containing only &quot;CREATE&quot;, so this function is a way to approximate that bevaviour in a tibble
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createrows(items, vector)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createrows_+3A_items">items</code></td>
<td>
<p>a vector, data frame or tibble of items (which may or may not contain the keyword &quot;CREATE&quot;)</p>
</td></tr>
<tr><td><code id="createrows_+3A_vector">vector</code></td>
<td>
<p>a vector of properties or values which may be expanded based on the items vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if the vector is NULL, return NULL. Otherwise, if the &quot;CREATE&quot; keyword appears in the
items vector, insert blank strings at those positions in the vector.
</p>

<hr>
<h2 id='createrows.tidy'>&quot;CREATE&quot; rows from tidy format</h2><span id='topic+createrows.tidy'></span>

<h3>Description</h3>

<p>Add in QuickStatements CREATE rows that mint new QIDs from tidy input data.
New items are created by any item starting that starts with the text &quot;CREATE&quot; followed
by any unique ID.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createrows.tidy(QS.tib)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createrows.tidy_+3A_qs.tib">QS.tib</code></td>
<td>
<p>a tibble of items, values and properties (optionally qualifiers and sources).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble, with items that start with &quot;CREATE&quot; followed by any unique text causing the
addition of a &quot;Create&quot; line above, being replaced with &quot;LAST&quot; in the Quickstatemnts format
to create new QIDs.
</p>

<hr>
<h2 id='disambiguate_QIDs'>Disambiguate QIDs</h2><span id='topic+disambiguate_QIDs'></span>

<h3>Description</h3>

<p>Interactive function that presents alternative possible QID matches for a list of text
strings and provides options for choosing between alternatives, rejecting all presented alternatives,
or creating new items. Useful in cases where a list of text strings may have either missing wikidata items
or multiple alternative potential matches that need to be manually disambuguated. Can also used on
lists of lists (see examples). For long lists of items, the process can be stopped partway through and
the returned vector will indicate where the process was stopped.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>disambiguate_QIDs(
  list,
  variablename = "variables",
  variableinfo = NULL,
  filter_property = NULL,
  filter_variable = NULL,
  filter_firsthit = FALSE,
  limit = 10
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="disambiguate_QIDs_+3A_list">list</code></td>
<td>
<p>a list or vector of text strings to find potential QID matches to.
Can also be a list of lists (see examples)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_variablename">variablename</code></td>
<td>
<p>type of items in the list that are being disambiguated (used in messages)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_variableinfo">variableinfo</code></td>
<td>
<p>additional information about items that are being disambiguated (used in messages)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_filter_property">filter_property</code></td>
<td>
<p>property to filter on (e.g. &quot;P31&quot; to filter on &quot;instance of&quot;)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_filter_variable">filter_variable</code></td>
<td>
<p>values of that property to use to filter out (e.g. &quot;Q571&quot; to filter out books)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_filter_firsthit">filter_firsthit</code></td>
<td>
<p>apply filter to the first match presented or only if alternatives requested?
(default = FALSE, note: true is slower if filter not needed on most matches)</p>
</td></tr>
<tr><td><code id="disambiguate_QIDs_+3A_limit">limit</code></td>
<td>
<p>number of alternative possible wikidata items to present if multiple potential matches</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of:
</p>

<dl>
<dt>QID</dt><dd><p>Selected QID (for when an appropriate Wikidata match exists)</p>
</dd>
<dt>CREATE</dt><dd><p>Mark that a new Wikidata item should be created (for when no appropriate Wikidata match yet exists)</p>
</dd>
<dt>NA</dt><dd><p>Mark that no Wikidata item is needed</p>
</dd>
<dt>STOP</dt><dd><p>Mark that the process was halted at this point (so that output can be used as input to the function later)</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#Disambiguating possible QID matches for these music genres
#Results should be:
# "Q22731" as the first match
# "Q147538" as the first match
# "Q3947" as the second alternative match
disambiguate_QIDs(list=c("Rock","Pop","House"),
                 variablename="music genre")

#Disambiguating possible QID matches for these three words, but not the music genres
#This will take longer as the filtering step is slower
#Results should be:
# "Q22731" (the material) as the first match
# "Q147538" (the soft drink) as the second alternative match
# "Q3947" (the building) as the first match
disambiguate_QIDs(list=c("Rock","Pop","House"),
                 filter_property="instance of",
                 filter_variable="music genre",
                 filter_firsthit=TRUE,
                 variablename="concept, not the music genre")

#Disambiguating possible QID matches for the multiple expertise of
#these three people as list of lists
disambiguate_QIDs(list=list(alice=list("physics","chemistry","maths"),
                           barry=list("history"),
                           clair=list("law","genetics","ethics")),
                 variablename="expertise")

## End(Not run)
</code></pre>

<hr>
<h2 id='extract_claims'>Extract Claims from Returned Item Data</h2><span id='topic+extract_claims'></span>

<h3>Description</h3>

<p>extract claim information from data returned using
<code><a href="#topic+get_item">get_item</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_claims(items, claims)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_claims_+3A_items">items</code></td>
<td>
<p>a list of one or more Wikidata items returned with
<code><a href="#topic+get_item">get_item</a></code>.</p>
</td></tr>
<tr><td><code id="extract_claims_+3A_claims">claims</code></td>
<td>
<p>a vector of claims (in the form &quot;P321&quot;, &quot;P12&quot;) to look for
and extract.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing one sub-list for each entry in <code>items</code>,
and (below that) the found data for each claim. In the event a claim
cannot be found for an item, an <code>NA</code> will be returned
instead.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get item data
adams_data &lt;- get_item("42")
# Get claim data
claims &lt;- extract_claims(adams_data, "P31")
</code></pre>

<hr>
<h2 id='extract_para'>Extract a paragraph of text</h2><span id='topic+extract_para'></span>

<h3>Description</h3>

<p>Return the nth paragraph of a section of text
Useful for extracting information from wikipedia or other wikimarkup text
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_para(text, para = 1, templ = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_para_+3A_text">text</code></td>
<td>
<p>the input text as a string</p>
</td></tr>
<tr><td><code id="extract_para_+3A_para">para</code></td>
<td>
<p>number indicating which paragraph(s) to return (default=1)</p>
</td></tr>
<tr><td><code id="extract_para_+3A_templ">templ</code></td>
<td>
<p>an optional string specifying a mediawikitemplate within
which to restrict the search restrict search</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the nth paragraph of the input text.
</p>

<hr>
<h2 id='filter_qids'>Filter QIDs</h2><span id='topic+filter_qids'></span>

<h3>Description</h3>

<p>For a QID or vector of QIDs, remove ones that match a particular statement
(e.g. remove all that are instances of academic publications or books).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_qids(
  ids,
  property = "P31",
  filter = c("Q737498", "Q5633421", "Q7725634", "Q13442814", "Q18918145"),
  message = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_qids_+3A_ids">ids</code></td>
<td>
<p>QIDs to check</p>
</td></tr>
<tr><td><code id="filter_qids_+3A_property">property</code></td>
<td>
<p>property to check (default = P31 to filter on &quot;instance of&quot;)</p>
</td></tr>
<tr><td><code id="filter_qids_+3A_filter">filter</code></td>
<td>
<p>values of that property to use to filter out
(default = Q737498, Q5633421, Q7725634, Q13442814, and Q18918145 to remove academic
publications or books)</p>
</td></tr>
<tr><td><code id="filter_qids_+3A_message">message</code></td>
<td>
<p>message to return (useful for disambiguate_QIDs function)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of QIDs that do not match the property filter
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Filter three items called "Earth Science" to show only those that aren't
# books, journals or journal articles
filter_qids(ids = c("Q96695546","Q8008","Q58966429"),
            property = "P31",
            filter = c("Q737498","Q5633421","Q7725634","Q13442814","Q18918145"))

## End(Not run)
</code></pre>

<hr>
<h2 id='find_item'>Search for Wikidata items or properties that match a search term</h2><span id='topic+find_item'></span><span id='topic+find_property'></span>

<h3>Description</h3>

<p><code>find_item</code> and <code>find_property</code> allow you to retrieve a set
of Wikidata items or properties where the aliase or descriptions match a particular
search term.  As with other <code>WikidataR</code> code, custom print methods are available;
use <code><a href="utils.html#topic+str">str</a></code> to manipulate and see the underlying structure of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_item(search_term, language = "en", limit = 10, ...)

find_property(search_term, language = "en", limit = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_item_+3A_search_term">search_term</code></td>
<td>
<p>a term to search for.</p>
</td></tr>
<tr><td><code id="find_item_+3A_language">language</code></td>
<td>
<p>the language to return the labels and descriptions in; this should
consist of an ISO language code. Set to &quot;en&quot; by default.</p>
</td></tr>
<tr><td><code id="find_item_+3A_limit">limit</code></td>
<td>
<p>the number of results to return; set to 10 by default.</p>
</td></tr>
<tr><td><code id="find_item_+3A_...">...</code></td>
<td>
<p>further arguments to pass to httr's GET.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_random">get_random</a></code> for selecting a random item or property,
or <code><a href="#topic+get_item">get_item</a></code> for selecting a specific item or property.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Check for entries relating to Douglas Adams in some way
adams_items &lt;- find_item("Douglas Adams")

#Check for properties involving the peerage
peerage_props &lt;- find_property("peerage")

</code></pre>

<hr>
<h2 id='get_example'>Get an example SPARQL query from Wikidata</h2><span id='topic+get_example'></span>

<h3>Description</h3>

<p>Gets the specified example(s) from
[SPARQL query service examples page](https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples)
using [Wikidata's MediaWiki API](https://www.wikidata.org/w/api.php).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_example(example_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_example_+3A_example_name">example_name</code></td>
<td>
<p>the names of the examples as they appear on
[this page](https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you are planning on extracting multiple examples, please provide
all the names as a single vector for efficiency.
</p>


<h3>Value</h3>

<p>The SPARQL query as a character vector.
</p>


<h3>See Also</h3>

<p>[query_wikidata]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sparql_query &lt;- extract_example(c("Cats", "Horses"))
query_wikidata(sparql_query)
# returns a named list with two data frames
# one called "Cats" and one called "Horses"
sparql_query &lt;- extract_example("Largest cities with female mayor")
cat(sparql_query)
query_wikidata(sparql_query)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_geo_box'>Get geographic entities based on a bounding box</h2><span id='topic+get_geo_box'></span>

<h3>Description</h3>

<p><code>get_geo_box</code> retrieves all geographic entities in
Wikidata that fall between a bounding box between two existing items
with geographic attributes (usually cities).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geo_box(
  first_city_code,
  first_corner,
  second_city_code,
  second_corner,
  language = "en",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_geo_box_+3A_first_city_code">first_city_code</code></td>
<td>
<p>a Wikidata item, or series of items, to use for
one corner of the bounding box.</p>
</td></tr>
<tr><td><code id="get_geo_box_+3A_first_corner">first_corner</code></td>
<td>
<p>the direction of <code>first_city_code</code> relative
to <code>city</code> (eg &quot;NorthWest&quot;, &quot;SouthEast&quot;).</p>
</td></tr>
<tr><td><code id="get_geo_box_+3A_second_city_code">second_city_code</code></td>
<td>
<p>a Wikidata item, or series of items, to use for
one corner of the bounding box.</p>
</td></tr>
<tr><td><code id="get_geo_box_+3A_second_corner">second_corner</code></td>
<td>
<p>the direction of <code>second_city_code</code> relative
to <code>city</code> (eg &quot;NorthWest&quot;, &quot;SouthEast&quot;).</p>
</td></tr>
<tr><td><code id="get_geo_box_+3A_language">language</code></td>
<td>
<p>the two-letter language code to use for the name
of the item. &quot;en&quot; by default.</p>
</td></tr>
<tr><td><code id="get_geo_box_+3A_...">...</code></td>
<td>
<p>further arguments to pass to httr's GET.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of 5 columns:
</p>

<ul>
<li><p>item the Wikidata identifier of each object associated with
<code>entity</code>.
</p>
</li>
<li><p>name the name of the item, if available, in the requested language. If it
is not available, <code>NA</code> will be returned instead.
</p>
</li>
<li><p>latitude the latitude of <code>item</code>
</p>
</li>
<li><p>longitude the longitude of <code>item</code>
</p>
</li>
<li><p>entity the entity the item is associated with (necessary for multi-entity
queries).
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+get_geo_entity">get_geo_entity</a></code> for using an unrestricted search or simple radius,
rather than a bounding box.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simple bounding box
bruges_box &lt;- get_geo_box("Q12988", "NorthEast", "Q184287", "SouthWest")

# Custom language
bruges_box_fr &lt;- get_geo_box("Q12988", "NorthEast", "Q184287", "SouthWest",
                                        language = "fr")

</code></pre>

<hr>
<h2 id='get_geo_entity'>Retrieve geographic information from Wikidata</h2><span id='topic+get_geo_entity'></span>

<h3>Description</h3>

<p><code>get_geo_entity</code> retrieves the item ID, latitude
and longitude of any object with geographic data associated with <em>another</em>
object with geographic data (example: all the locations around/near/associated with
a city).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geo_entity(entity, language = "en", radius = NULL, limit = 100, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_geo_entity_+3A_entity">entity</code></td>
<td>
<p>a Wikidata item (<code>Q...</code>) or series of items, to check
for associated geo-tagged items.</p>
</td></tr>
<tr><td><code id="get_geo_entity_+3A_language">language</code></td>
<td>
<p>the two-letter language code to use for the name
of the item. &quot;en&quot; by default, because we're imperialist
anglocentric westerners.</p>
</td></tr>
<tr><td><code id="get_geo_entity_+3A_radius">radius</code></td>
<td>
<p>optionally, a radius (in kilometers) around <code>entity</code>
to restrict the search to.</p>
</td></tr>
<tr><td><code id="get_geo_entity_+3A_limit">limit</code></td>
<td>
<p>the maximum number of results to return.</p>
</td></tr>
<tr><td><code id="get_geo_entity_+3A_...">...</code></td>
<td>
<p>further arguments to pass to httr's GET.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of 5 columns:
</p>

<ul>
<li><p>item the Wikidata identifier of each object associated with
<code>entity</code>.
</p>
</li>
<li><p>name the name of the item, if available, in the requested language. If it
is not available, <code>NA</code> will be returned instead.
</p>
</li>
<li><p>latitude the latitude of <code>item</code>
</p>
</li>
<li><p>longitude the longitude of <code>item</code>
</p>
</li>
<li><p>entity the entity the item is associated with (necessary for multi-entity
queries).
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+get_geo_box">get_geo_box</a></code> for using a bounding box
rather than an unrestricted search or simple radius.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># All entities
sf_locations &lt;- get_geo_entity("Q62")

# Entities with French, rather than English, names
sf_locations &lt;- get_geo_entity("Q62", language = "fr")

# Entities within 1km
sf_close_locations &lt;- get_geo_entity("Q62", radius = 1)

# Multiple entities
multi_entity &lt;- get_geo_entity(entity = c("Q62", "Q64"))

</code></pre>

<hr>
<h2 id='get_item'>Retrieve specific Wikidata items or properties</h2><span id='topic+get_item'></span><span id='topic+get_property'></span>

<h3>Description</h3>

<p><code>get_item</code> and <code>get_property</code> allow you to retrieve the data associated
with individual Wikidata items and properties, respectively. As with
other <code>WikidataR</code> code, custom print methods are available; use <code><a href="utils.html#topic+str">str</a></code>
to manipulate and see the underlying structure of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_item(id, ...)

get_property(id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_item_+3A_id">id</code></td>
<td>
<p>the ID number(s) of the item or property you're looking for. This can be in
various formats; either a numeric value (&quot;200&quot;), the full name (&quot;Q200&quot;) or
even with an included namespace (&quot;Property:P10&quot;) - the function will format
it appropriately. This function is vectorised and will happily accept
multiple IDs.</p>
</td></tr>
<tr><td><code id="get_item_+3A_...">...</code></td>
<td>
<p>further arguments to pass to httr's GET.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_random">get_random</a></code> for selecting a random item or property,
or <code><a href="#topic+find_item">find_item</a></code> for using search functionality to pull out
item or property IDs where the descriptions or aliases match a particular
search term.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Retrieve a specific item
adams_metadata &lt;- get_item("42")

#Retrieve a specific property
object_is_child &lt;- get_property("P40")

</code></pre>

<hr>
<h2 id='get_names_from_properties'>Get names of properties</h2><span id='topic+get_names_from_properties'></span>

<h3>Description</h3>

<p>For a claim or set of claims, return the names of the properties
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_names_from_properties(properties)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_names_from_properties_+3A_properties">properties</code></td>
<td>
<p>a claims list from <code>extract_claims</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble of labels for each property for a set of claims
</p>

<hr>
<h2 id='get_random_item'>Retrieve randomly-selected Wikidata items or properties</h2><span id='topic+get_random_item'></span><span id='topic+get_random'></span><span id='topic+get_random_property'></span>

<h3>Description</h3>

<p><code>get_random_item</code> and <code>get_random_property</code> allow you to retrieve the data
associated with randomly-selected Wikidata items and properties, respectively. As with
other <code>WikidataR</code> code, custom print methods are available; use <code><a href="utils.html#topic+str">str</a></code>
to manipulate and see the underlying structure of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_random_item(limit = 1, ...)

get_random_property(limit = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_random_item_+3A_limit">limit</code></td>
<td>
<p>how many random items to return. 1 by default, but can be higher.</p>
</td></tr>
<tr><td><code id="get_random_item_+3A_...">...</code></td>
<td>
<p>arguments to pass to httr's GET.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_item">get_item</a></code> for selecting a specific item or property,
or <code><a href="#topic+find_item">find_item</a></code> for using search functionality to pull out
item or property IDs where the descriptions or aliases match a particular
search term.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#Random item
random_item &lt;- get_random_item()

#Random property
random_property &lt;- get_random_property()

## End(Not run)
</code></pre>

<hr>
<h2 id='identifier_from_identifier'>identifier from identifier</h2><span id='topic+identifier_from_identifier'></span>

<h3>Description</h3>

<p>convert unique identifiers to other unique identifiers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>identifier_from_identifier(
  property = "ORCID iD",
  return = "IMDb ID",
  value = "0000-0002-7865-7235"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="identifier_from_identifier_+3A_property">property</code></td>
<td>
<p>the identifier property to search (for caveats, see <code>as_pid</code>)</p>
</td></tr>
<tr><td><code id="identifier_from_identifier_+3A_return">return</code></td>
<td>
<p>the identifier property to convert to</p>
</td></tr>
<tr><td><code id="identifier_from_identifier_+3A_value">value</code></td>
<td>
<p>the identifier value to match</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of identifiers corresponding to identifiers submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>identifier_from_identifier('ORCID iD','IMDb ID',c('0000-0002-7865-7235','0000-0003-1079-5604'))
</code></pre>

<hr>
<h2 id='initials'>Format short form person names</h2><span id='topic+initials'></span>

<h3>Description</h3>

<p>Converting names into first initial and surname, or just initials
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initials(x, format = "FLast")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initials_+3A_x">x</code></td>
<td>
<p>a vector of people's names as strings</p>
</td></tr>
<tr><td><code id="initials_+3A_format">format</code></td>
<td>
<p>a vector of strings of either &quot;FLast&quot; or &quot;FL&quot; to indicate the output format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the inputted name strings with first names shortened based on the
selected format.
</p>

<hr>
<h2 id='list_properties'>List properties of a Wikidata item</h2><span id='topic+list_properties'></span>

<h3>Description</h3>

<p>for a downloaded wikidata item, list the properties of all statements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_properties(item, names = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_properties_+3A_item">item</code></td>
<td>
<p>a list of one or more Wikidata items returned with
<code><a href="#topic+get_item">get_item</a></code>.</p>
</td></tr>
<tr><td><code id="list_properties_+3A_names">names</code></td>
<td>
<p>a boolian for whether to return property names, or just P numbers
and extract.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing one sub-list for each entry in <code>items</code>,
and (below that) the found data for each claim. In the event a claim
cannot be found for an item, an <code>NA</code> will be returned
instead.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get item data
adams_data &lt;- get_item("42")
# Get claim data
claims &lt;- extract_claims(adams_data, "P31")
</code></pre>

<hr>
<h2 id='print.find_item'>Print method for find_item</h2><span id='topic+print.find_item'></span>

<h3>Description</h3>

<p>print found items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'find_item'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.find_item_+3A_x">x</code></td>
<td>
<p>find_item object with search results</p>
</td></tr>
<tr><td><code id="print.find_item_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.find_property'>Print method for find_property</h2><span id='topic+print.find_property'></span>

<h3>Description</h3>

<p>print found properties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'find_property'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.find_property_+3A_x">x</code></td>
<td>
<p>find_property object with search results</p>
</td></tr>
<tr><td><code id="print.find_property_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.wikidata'>Print method for Wikidata objects</h2><span id='topic+print.wikidata'></span>

<h3>Description</h3>

<p>print found objects generally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'wikidata'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.wikidata_+3A_x">x</code></td>
<td>
<p>wikidata object from get_item, get_random_item, get_property or get_random_property</p>
</td></tr>
<tr><td><code id="print.wikidata_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>get_item, get_random_item, get_property or get_random_property
</p>

<hr>
<h2 id='qid_from_DOI'>QID from DOI</h2><span id='topic+qid_from_DOI'></span>

<h3>Description</h3>

<p>simple converter from DOIs to QIDs (for items in wikidata)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qid_from_DOI(DOI = "10.15347/WJM/2019.001")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qid_from_DOI_+3A_doi">DOI</code></td>
<td>
<p>digital object identifiers submitted as strings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of QIDs corresponding to DOIs submitted
</p>

<hr>
<h2 id='qid_from_identifier'>QID from identifier</h2><span id='topic+qid_from_identifier'></span>

<h3>Description</h3>

<p>convert unique identifiers to QIDs (for items in wikidata).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qid_from_identifier(
  property = "DOI",
  value = c("10.15347/WJM/2019.001", "10.15347/WJM/2020.002")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qid_from_identifier_+3A_property">property</code></td>
<td>
<p>the identifier property to search (for caveats, see <code>as_pid</code>)</p>
</td></tr>
<tr><td><code id="qid_from_identifier_+3A_value">value</code></td>
<td>
<p>the identifier value to match</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of QIDs corresponding to identifiers submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>qid_from_identifier('ISBN-13','978-0-262-53817-6')
</code></pre>

<hr>
<h2 id='qid_from_name'>QID from label name</h2><span id='topic+qid_from_name'></span>

<h3>Description</h3>

<p>simple converter from label names to QIDs (for items in wikidata).
Essentially a simplification of <code>find_item</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qid_from_name(name = "Thomas Shafee", limit = 100, format = "vector")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qid_from_name_+3A_name">name</code></td>
<td>
<p>name labels submitted as strings</p>
</td></tr>
<tr><td><code id="qid_from_name_+3A_limit">limit</code></td>
<td>
<p>if multiple QIDs match each submitted name, how many to return</p>
</td></tr>
<tr><td><code id="qid_from_name_+3A_format">format</code></td>
<td>
<p>output format ('vector' to return a simple vector, or 'list' to return a nested list)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of QIDs corresponding to names submitted. Note: some names may return multiple QIDs.
</p>

<hr>
<h2 id='qid_from_ORCID'>QID from ORCID</h2><span id='topic+qid_from_ORCID'></span>

<h3>Description</h3>

<p>simple converter from ORCIDs to QIDs (for items in wikidata)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qid_from_ORCID(ORCID = "0000-0002-2298-7593")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qid_from_ORCID_+3A_orcid">ORCID</code></td>
<td>
<p>digital object identifiers submitted as strings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of QIDs corresponding to ORCIDs submitted
</p>

<hr>
<h2 id='query_wikidata'>Send one or more SPARQL queries to WDQS</h2><span id='topic+query_wikidata'></span>

<h3>Description</h3>

<p>Makes a POST request to Wikidata Query Service SPARQL endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_wikidata(sparql_query, format = "tibble", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_wikidata_+3A_sparql_query">sparql_query</code></td>
<td>
<p>SPARQL query (can be a vector of queries)</p>
</td></tr>
<tr><td><code id="query_wikidata_+3A_format">format</code></td>
<td>
<p>'tibble' (default) returns a pure character data frame,
'simple' returns a pure character vector, while
'smart' fetches JSON-formatted data and returns a tibble with datetime
columns converted to 'POSIXct'</p>
</td></tr>
<tr><td><code id="query_wikidata_+3A_...">...</code></td>
<td>
<p>Additional parameters to supply to [httr::POST]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'tibble' or 'vector'. Note: QID values will be returned as QIDs, rather than URLs.
</p>


<h3>Query limits</h3>

<p>There is a hard query deadline configured which is set to 60 seconds. There
are also following limits:
- One client (user agent + IP) is allowed 60 seconds of processing time each
60 seconds
- One client is allowed 30 error queries per minute
See [query limits section](https://www.mediawiki.org/wiki/Wikidata_Query_Service/User_Manual#Query_limits)
in the WDQS user manual for more information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># R's versions and release dates:
sparql_query &lt;- 'SELECT DISTINCT
  ?softwareVersion ?publicationDate
  WHERE {
    BIND(wd:Q206904 AS ?R)
    ?R p:P348 [
      ps:P348 ?softwareVersion;
      pq:P577 ?publicationDate
    ] .
}'
query_wikidata(sparql_query)

## Not run: 
# "smart" format converts all datetime columns to POSIXct
query_wikidata(sparql_query, format = "smart")

## End(Not run)
</code></pre>

<hr>
<h2 id='searcher'>Convert an input to a item QID</h2><span id='topic+searcher'></span>

<h3>Description</h3>

<p>Convert an input string to the most likely item QID
</p>


<h3>Usage</h3>

<pre><code class='language-R'>searcher(search_term, language, limit, type, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="searcher_+3A_search_term">search_term</code></td>
<td>
<p>a term to search for.</p>
</td></tr>
<tr><td><code id="searcher_+3A_language">language</code></td>
<td>
<p>the language to return the labels and descriptions in; this should
consist of an ISO language code. Set to &quot;en&quot; by default.</p>
</td></tr>
<tr><td><code id="searcher_+3A_limit">limit</code></td>
<td>
<p>the number of results to return; set to 10 by default.</p>
</td></tr>
<tr><td><code id="searcher_+3A_type">type</code></td>
<td>
<p>type of wikidata object to return (default = &quot;item&quot;)</p>
</td></tr>
<tr><td><code id="searcher_+3A_...">...</code></td>
<td>
<p>Additional parameters to supply to [httr::POST]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the inputted string matches an item label, return its QID.
If the inputted string matches multiple labels of multiple items, return the QID of the first hit.
If the inputted string is already a QID, return the string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># if input string is a valid QID
as_qid("Q42")
# if input string matches multiple item labels
as_qid("Douglas Adams")
# if input string matches a single unique label
as_qid("Douglas Adams and the question of arterial blood pressure in mammals")
</code></pre>

<hr>
<h2 id='sparql_query'>Download full Wikidata items matching a sparql query</h2><span id='topic+sparql_query'></span>

<h3>Description</h3>

<p>Utility wrapper for wikidata spargle endpoint to download items.
Used by <code>get_geo_entity</code> and <code>get_geo_box</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sparql_query(query, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sparql_query_+3A_query">query</code></td>
<td>
<p>the sparql query as a string</p>
</td></tr>
<tr><td><code id="sparql_query_+3A_...">...</code></td>
<td>
<p>Additional parameters to supply to [httr::POST]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a download of the full wikidata objects formatted as a nested json list
</p>

<hr>
<h2 id='unspecial'>Remove special characters</h2><span id='topic+unspecial'></span>

<h3>Description</h3>

<p>Special characters can otherwise mess up wikidata read-writes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unspecial(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unspecial_+3A_x">x</code></td>
<td>
<p>a vector of strings to check for special characters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the inputted strings with special characters replaced with
closest match plan characters.
</p>

<hr>
<h2 id='url_to_id'>Extract an identifier from a wikidata URL</h2><span id='topic+url_to_id'></span>

<h3>Description</h3>

<p>Convert a URL ending in an identifier (returned by SPARQL queries) to just
the plain identifier (QID or PID).
</p>
<p>Convert a URL ending in an identifier (returned by SPARQL queries)
to just the plan identifier (QID or PID).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>url_to_id(x)

url_to_id(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="url_to_id_+3A_x">x</code></td>
<td>
<p>a vector of strings representing wikidata URLs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if the URL ends in a QID or PID, return that PID or QID, else return the original string
</p>
<p>QID or PID
</p>


<h3>Examples</h3>

<pre><code class='language-R'>url_to_id("http://www.wikidata.org/entity/42")
url_to_id("http://www.wikidata.org/Q42")
</code></pre>

<hr>
<h2 id='wd_query'>Download a Wikidata item</h2><span id='topic+wd_query'></span>

<h3>Description</h3>

<p>Utility wrapper for wikidata API to download item.
Used by <code>get_item</code> and <code>get_property</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wd_query(title, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wd_query_+3A_title">title</code></td>
<td>
<p>the wikidata item or property as a string</p>
</td></tr>
<tr><td><code id="wd_query_+3A_...">...</code></td>
<td>
<p>Additional parameters to supply to [httr::POST]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a download of the full wikidata object (item or property) formatted as a nested json list
</p>

<hr>
<h2 id='wd_rand_query'>Download random Wikidata items</h2><span id='topic+wd_rand_query'></span>

<h3>Description</h3>

<p>Utility wrapper for wikidata API to download random items. Used by <code>random_item</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wd_rand_query(ns, limit, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wd_rand_query_+3A_ns">ns</code></td>
<td>
<p>string indicating namespace, most commonly &quot;Main&quot; for QID items, &quot;Property&quot; for PID properties</p>
</td></tr>
<tr><td><code id="wd_rand_query_+3A_limit">limit</code></td>
<td>
<p>how many random objesct to return</p>
</td></tr>
<tr><td><code id="wd_rand_query_+3A_...">...</code></td>
<td>
<p>Additional parameters to supply to [httr::POST]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a download of the full wikidata objects (items or properties) formatted as nested json lists
</p>

<hr>
<h2 id='WD.globalvar'>Global variables for Wikidata properties</h2><span id='topic+WD.globalvar'></span>

<h3>Description</h3>

<p>A dataset of Wikidata global variables.
</p>


<h3>Format</h3>

<p>A list of tibbles documenting key property constraints from wikidata  
</p>

<dl>
<dt>SID.valid</dt><dd><p>valid reference source properties</p>
</dd>
<dt>PID.datatype</dt><dd><p>required data type for each property</p>
</dd>
<dt>PID.constraint</dt><dd><p>expected regex match for each property</p>
</dd>
<dt>lang.abbrev</dt><dd><p>language abbreviations</p>
</dd>
<dt>lang.abbrev.wiki</dt><dd><p>language abbreviations for current wikis</p>
</dd>
<dt>abbrev.wiki</dt><dd><p>Wikimedia abbreviations for current wikis</p>
</dd>
</dl>
<p>...

</p>

<hr>
<h2 id='write_wikidata'>Write statements to Wikidata</h2><span id='topic+write_wikidata'></span>

<h3>Description</h3>

<p>Upload data to wikidata, including creating items,
adding statements to existing items (via the quickstatements format and API).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_wikidata(
  items,
  properties = NULL,
  values = NULL,
  qual.properties = NULL,
  qual.values = NULL,
  src.properties = NULL,
  src.values = NULL,
  remove = FALSE,
  format = "tibble",
  api.username = NULL,
  api.token = NULL,
  api.format = "v1",
  api.batchname = NULL,
  api.submit = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_wikidata_+3A_items">items</code></td>
<td>
<p>a vector of strings indicating the items to which to add statements (as QIDs or labels).
Note: if labels are provided, and multiple items match, the first matching item will be used
(see <code>as_qid</code> function), so use with caution.
New QIDs can be created by using the &quot;CREATE_xyz&quot;, where &quot;_xyz&quot; is any unique string.
Using the same id will add additional statemnts to those new items</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_properties">properties</code></td>
<td>
<p>a vector of strings indicating the properties to add as statements (as PIDs or labels).
Note: if labels are provided, and multiple items match, the first matching item will be used
(see <code>as_pid</code> function), so use with caution.
Four special properties can also be used: labels, aliases, descriptions and sitelinks.
See [this link](https://www.wikidata.org/wiki/Help:QuickStatements#Adding_labels,_aliases,_descriptions_and_sitelinks) for the syntax.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_values">values</code></td>
<td>
<p>a vector of strings indicating the values to add as statements (as QIDs or strings).
Note: if strings are provided, they will be treated as plain text.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_qual.properties">qual.properties</code></td>
<td>
<p>a vector, data frame, or tibble of strings indicating the properties to add as qualifiers to statements (as PIDs or labels).
Note: if labels are provided, and multiple items match, the first matching item will be used
(see <code>as_pid</code> function), so use with caution.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_qual.values">qual.values</code></td>
<td>
<p>a vector, data frame, or tibble of strings indicating the values to add as statements (as QIDs or strings).
Note: if strings are provided, they will be treated as plain text.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_src.properties">src.properties</code></td>
<td>
<p>a vector, data frame, or tibble of strings indicating the properties to add as reference sources to statements (as SIDs or labels).
Note: if labels are provided, and multiple items match, the first matching item will be used
(see <code>as_sid</code> function), so use with caution.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_src.values">src.values</code></td>
<td>
<p>a vector, data frame, or tibble of strings indicating the values to add reference sources to statements (as QIDs or strings).
Note: if strings are provided, they will be treated as plain text.</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_remove">remove</code></td>
<td>
<p>a vector of boolians for each statemnt indicating whether it should
be removed from the item rather than added (default = FALSE)</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_format">format</code></td>
<td>
<p>output format as a string. Options include:
</p>

<dl>
<dt>tibble</dt><dd><p>easiest format to further manuipulation in R</p>
</dd>
<dt>csv</dt><dd><p>can be copy-pasted to [the QuickStatements website](https://quickstatements.toolforge.org/) (or manipulated in a spreadsheet programs)</p>
</dd>
<dt>api</dt><dd><p>a url that can be copy-pasted into a web browser, or automatically submitted (see <code>api.submit</code> parameter)</p>
</dd>
<dt>website</dt><dd><p>open a [QuickStatements](https://quickstatements.toolforge.org/) web browser window summarising the edits to be made to Wikidata)</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="write_wikidata_+3A_api.username">api.username</code></td>
<td>
<p>a string indicating your wikimedia username</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_api.token">api.token</code></td>
<td>
<p>a string indicating your api token (the unique identifier that you can find listed at [your user page](https://quickstatements.toolforge.org/#/user))</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_api.format">api.format</code></td>
<td>
<p>a string indicateing which version of the quickstatement format used to submit the api (default = &quot;v1&quot;)</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_api.batchname">api.batchname</code></td>
<td>
<p>a string create a named batch (listed at [your batch history page](https://quickstatements.toolforge.org/#/batches)) and tag in the edit summaries</p>
</td></tr>
<tr><td><code id="write_wikidata_+3A_api.submit">api.submit</code></td>
<td>
<p>boolian indicating whether to submit instruction directly to wikidata (else returns the URL that can be copy-pasted into a web browser)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data formatted to upload to wikidata (via quickstatemsnts),
optionally also directly uploded to wikidata (see <code>format</code> parameter).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Add a statement to the "Wikidata sandbox" item (Q4115189)
# to say that it is an "instance of" (P31) of Q1 (the universe).
# The instruction will submit directly to wikidata via the API
# (if you include your wikimedia username and token)

write_wikidata(items        = "Wikidata Sandbox",
               properties   = "instance of",
               values       = "Q1",
               format       = "api",
               api.username = "myusername", 
               api.token    = , #REDACTED#
               )
#note: 

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
