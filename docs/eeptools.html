<!DOCTYPE html><html><head><title>Help for package eeptools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {eeptools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#age_calc'><p>Function to calculate age from date of birth.</p></a></li>
<li><a href='#autoplot.lm'><p>A function to replicate the basic plot function for linear models in ggplot2</p></a></li>
<li><a href='#cleanTex'><p>Remove Unwanted LaTeX files after building document</p></a></li>
<li><a href='#crosstabplot'><p>Draw a visual crosstab (mosaic plot) with shading for correlations</p>
and labels in each cell.</a></li>
<li><a href='#crosstabs'><p>Build a list of crosstabulations from a dataset</p></a></li>
<li><a href='#cutoff'><p>A function to calculate thresholds of cumulative sums in a vector.</p></a></li>
<li><a href='#decomma'><p>Remove commas from numeric fields and return them as numerics</p></a></li>
<li><a href='#defac'><p>Convert a factor to a character string safely</p></a></li>
<li><a href='#eeptools'><p>Evaluation of educational policy tools</p></a></li>
<li><a href='#gelmansim'><p>Generate prediction intervals for model functions</p></a></li>
<li><a href='#isid'><p>A function to check if a set of variables form a unique ID in a dataframe.</p></a></li>
<li><a href='#lag_data'><p>Create a lag</p></a></li>
<li><a href='#leading_zero'><p>Function to add leading zeroes to maintain fixed width.</p></a></li>
<li><a href='#makenum'><p>a function to convert numeric factors into numeric class objects</p></a></li>
<li><a href='#max_mis'><p>A function to safely take the maximum of a vector that could include only NAs.</p></a></li>
<li><a href='#midsch'><p>A dataframe of aggregate test scores for schools in a Midwest state.</p></a></li>
<li><a href='#moves_calc'><p>Function to calculate the number of times a student has changed schools.</p></a></li>
<li><a href='#nth_max'><p>Find the nth maximum value</p></a></li>
<li><a href='#profpoly'><p>Creates a proficiency polygon in ggplot2 for showing assessment categories</p></a></li>
<li><a href='#profpoly.data'><p>Creates a data frame suitable for building custom polygon layers in ggplot2 objects</p></a></li>
<li><a href='#remove_char'><p>A function to replace an arbitrary character like a &quot;*&quot; in redacted data with an NA in R</p></a></li>
<li><a href='#retained_calc'><p>Function to calculate whether a student has repeated a grade.</p></a></li>
<li><a href='#statamode'><p>A function to mimic the mode function in Stata.</p></a></li>
<li><a href='#stuatt'><p>Student Attributes from the Strategic Data Project Toolkit</p></a></li>
<li><a href='#stulevel'><p>A synthetic data set of K-12 student attributes.</p></a></li>
<li><a href='#theme_dpi'><p>a deprecated ggplot2 theme developed for PDF and PNG for use at the</p>
Wisconsin Department of Public Instruction</a></li>
<li><a href='#theme_dpi_map'><p>a deprecated ggplot2 theme developed for PDF or SVG maps</p></a></li>
<li><a href='#theme_dpi_map2'><p>an alternate deprecated ggplot2 theme developed for PDF or SVG maps</p></a></li>
<li><a href='#theme_dpi_mapPNG'><p>an deprecated ggplot2 theme developed for PNG or JPG maps</p></a></li>
<li><a href='#thresh'><p>A function to return the maximum percentage of the cumulative sum represented</p>
by a subset of the vector</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Convenience Functions for Education Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.5</td>
</tr>
<tr>
<td>Description:</td>
<td>Collection of convenience functions to make working with
    administrative records easier and more consistent. Includes functions to
    clean strings, and identify cut points. Also includes three example data 
    sets of administrative education records for learning how to process records 
    with errors.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.3), ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>arm, data.table, vcd</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, stringr, knitr, rmarkdown, MASS</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jknowles/eeptools">https://github.com/jknowles/eeptools</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jknowles/eeptools/issues">https://github.com/jknowles/eeptools/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-31 23:46:12 UTC; Jared</td>
</tr>
<tr>
<td>Author:</td>
<td>Jason P. Becker [ctb],
  Jared E. Knowles [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jared E. Knowles &lt;jared@civilytics.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-01 09:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='age_calc'>Function to calculate age from date of birth.</h2><span id='topic+age_calc'></span>

<h3>Description</h3>

<p>his function calculates age in days, months, or years from a 
date of birth to another arbitrary date. This returns a numeric vector in 
the specified units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>age_calc(dob, enddate = Sys.Date(), units = "months", precise = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="age_calc_+3A_dob">dob</code></td>
<td>
<p>a vector of class <code>Date</code> representing the date of birth/start date</p>
</td></tr>
<tr><td><code id="age_calc_+3A_enddate">enddate</code></td>
<td>
<p>a vector of class Date representing the when the observation's 
age is of interest, defaults to current date.</p>
</td></tr>
<tr><td><code id="age_calc_+3A_units">units</code></td>
<td>
<p>character, which units of age should be calculated? allowed values are 
days, months, and years</p>
</td></tr>
<tr><td><code id="age_calc_+3A_precise">precise</code></td>
<td>
<p>logical indicating whether or not to calculate with leap year 
and leap second precision</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of ages the same length as the dob vector
</p>


<h3>Author(s)</h3>

<p>Jason P. Becker
</p>


<h3>Source</h3>

<p>This function was developed in part from this response on the R-Help mailing list.
</p>


<h3>See Also</h3>

<p>See also <code><a href="base.html#topic+difftime">difftime</a></code> which this function uses and mimics 
some functionality but at higher unit levels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- as.Date(seq(as.POSIXct('1987-05-29 018:07:00'), len=26, by="21 day"))
b &lt;- as.Date(seq(as.POSIXct('2002-05-29 018:07:00'), len=26, by="21 day"))

age &lt;- age_calc(a, units='years')
age
age &lt;- age_calc(a, units='months')
age
age &lt;- age_calc(a, as.Date('2005-09-01'))
age
</code></pre>

<hr>
<h2 id='autoplot.lm'>A function to replicate the basic plot function for linear models in ggplot2</h2><span id='topic+autoplot.lm'></span>

<h3>Description</h3>

<p>This uses ggplot2 to replicate the plot functionality for lm 
in ggplot2 and allow themes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'lm'
autoplot(object, which = c(1:6), mfrow = c(3, 2), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.lm_+3A_object">object</code></td>
<td>
<p>a linear model object from <code><a href="stats.html#topic+lm">lm</a></code></p>
</td></tr>
<tr><td><code id="autoplot.lm_+3A_which">which</code></td>
<td>
<p>which of the tests do we want to display output from</p>
</td></tr>
<tr><td><code id="autoplot.lm_+3A_mfrow">mfrow</code></td>
<td>
<p>Describes the layout of the resulting function in the plot frames</p>
</td></tr>
<tr><td><code id="autoplot.lm_+3A_...">...</code></td>
<td>
<p>additional parameters to pass through</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object that mimics the functionality of a plot of linear model.
</p>


<h3>References</h3>

<p>Modified from: https://librestats.com/2012/06/11/autoplot-graphical-methods-with-ggplot2/
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+plot.lm">plot.lm</a></code> which this function mimics
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Univariate
a &lt;- runif(1000)
b &lt;- 7 * a + rnorm(1)
mymod &lt;- lm(b~a)
autoplot(mymod)
# Multivariate
data(mpg)
mymod &lt;- lm(cty~displ + cyl + drv, data=mpg)
autoplot(mymod)

</code></pre>

<hr>
<h2 id='cleanTex'>Remove Unwanted LaTeX files after building document</h2><span id='topic+cleanTex'></span>

<h3>Description</h3>

<p>Convenience function for cleaning up your directory after running pdflatex
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanTex(fn, keepPDF = TRUE, keepRnw = TRUE, keepRproj = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleanTex_+3A_fn">fn</code></td>
<td>
<p>a filename for your .Rnw file</p>
</td></tr>
<tr><td><code id="cleanTex_+3A_keeppdf">keepPDF</code></td>
<td>
<p>Logical. Should function save PDF files with filename <code>fn</code>. 
Default is TRUE.</p>
</td></tr>
<tr><td><code id="cleanTex_+3A_keeprnw">keepRnw</code></td>
<td>
<p>Logical. Should function save Rnw files with filename <code>fn</code>. 
Default is TRUE.</p>
</td></tr>
<tr><td><code id="cleanTex_+3A_keeprproj">keepRproj</code></td>
<td>
<p>Logical. Should function save .Rproj files with filename <code>fn</code>. 
Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. All files except the .tex, .pdf and .Rnw are removed from your directory.
</p>

<hr>
<h2 id='crosstabplot'>Draw a visual crosstab (mosaic plot) with shading for correlations 
and labels in each cell.</h2><span id='topic+crosstabplot'></span>

<h3>Description</h3>

<p>Improves labeling of mosaic plots over <code>mosaic</code> from the vcd package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstabplot(
  data,
  rowvar,
  colvar,
  varnames,
  title = NULL,
  subtitle = NULL,
  label = FALSE,
  shade = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosstabplot_+3A_data">data</code></td>
<td>
<p>a data object, matrix or dataframe, that contains the categorical 
variables to compose the crosstab</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_rowvar">rowvar</code></td>
<td>
<p>a character value for the column in data that will be displayed on the rows
of the crosstab</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_colvar">colvar</code></td>
<td>
<p>a character value for the column in data that will be displayed in columns of the 
crosstab</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_varnames">varnames</code></td>
<td>
<p>a character vector of length two with the labels for rowvar and colvar
respectively</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_title">title</code></td>
<td>
<p>a character vector of length one that contains the main title for the plot</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_subtitle">subtitle</code></td>
<td>
<p>a character vector of length one that contains the subtitle displayed 
beneath the plot</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_label">label</code></td>
<td>
<p>logical, if TRUE cells will be labeled, else they will not</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_shade">shade</code></td>
<td>
<p>logical, if TRUE cells will be shaded with Pearson residuals</p>
</td></tr>
<tr><td><code id="crosstabplot_+3A_...">...</code></td>
<td>
<p>additional arguments to <code><a href="#topic+crosstabs">crosstabs</a></code> e.g. digits</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mosaic plot
</p>


<h3>See Also</h3>

<p><code><a href="vcd.html#topic+mosaic">mosaic</a></code> which this function wraps
<code><a href="#topic+crosstabs">crosstabs</a></code> which does the data manipulation for the crosstab
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(cbind(x=seq(1,3,by=1), y=sample(LETTERS[6:8],60,replace=TRUE)),
fac=sample(LETTERS[1:4], 60, replace=TRUE))
varnames&lt;-c('Quality','Grade')
myCT &lt;- crosstabs(df, rowvar = "x",colvar = "fac", varnames = varnames, digits =2)
crosstabplot(df, rowvar = "x",colvar = "fac", varnames = varnames, 
title = 'My Plot', subtitle = 'Foo', label = FALSE, shade = TRUE, digits = 3)
</code></pre>

<hr>
<h2 id='crosstabs'>Build a list of crosstabulations from a dataset</h2><span id='topic+crosstabs'></span>

<h3>Description</h3>

<p>Build a list of crosstabulations from a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstabs(data, rowvar, colvar, varnames, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosstabs_+3A_data">data</code></td>
<td>
<p>a data object, matrix or dataframe, that contains the categorical 
variables to compose the crosstab</p>
</td></tr>
<tr><td><code id="crosstabs_+3A_rowvar">rowvar</code></td>
<td>
<p>a character value for the column in data that will be displayed on the rows
of the crosstab</p>
</td></tr>
<tr><td><code id="crosstabs_+3A_colvar">colvar</code></td>
<td>
<p>a character value for the column in data that will be displayed in columns of the 
crosstab</p>
</td></tr>
<tr><td><code id="crosstabs_+3A_varnames">varnames</code></td>
<td>
<p>a character vector of length two with the labels for rowvar and colvar
respectively</p>
</td></tr>
<tr><td><code id="crosstabs_+3A_digits">digits</code></td>
<td>
<p>an integer for how much to round the proportion calculations by, 
default is 2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with crosstab calculations
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df&lt;-data.frame(cbind(x=seq(1,3,by=1), y=sample(LETTERS[6:8],60,replace=TRUE)),
fac=sample(LETTERS[1:4], 60, replace=TRUE))
varnames&lt;-c('Quality','Grade')
myCT &lt;- crosstabs(df, rowvar = "x",colvar = "fac", varnames = varnames, digits =2)
</code></pre>

<hr>
<h2 id='cutoff'>A function to calculate thresholds of cumulative sums in a vector.</h2><span id='topic+cutoff'></span>

<h3>Description</h3>

<p>This function tells us how far we have to
go before reaching a cutoff in a variable
by sorting the vector, then finding how far 
to go. Note that the cutoff is expressed in 
percentage terms (fixed cumulative sum)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cutoff(x, cutoff, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cutoff_+3A_x">x</code></td>
<td>
<p>a numeric vector, missing values are allowed</p>
</td></tr>
<tr><td><code id="cutoff_+3A_cutoff">cutoff</code></td>
<td>
<p>a user defined numeric value to stop the cutoff specified as 
a proportion 0 to 1</p>
</td></tr>
<tr><td><code id="cutoff_+3A_na.rm">na.rm</code></td>
<td>
<p>logical, should missing values be excluded?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates the distance through a numeric vector before a certain 
proportion of the sum is reached by sorting the vector and calculating the 
cumulative proportion of each element
</p>


<h3>Value</h3>

<p>An integer for the minimum number of elements necessary to reach cutoff
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'># for vector
a &lt;- rnorm(100, mean=6, sd=1)
cutoff(a, .7) #return minimum number of elements to account 70 percent of total

</code></pre>

<hr>
<h2 id='decomma'>Remove commas from numeric fields and return them as numerics</h2><span id='topic+decomma'></span>

<h3>Description</h3>

<p>A shortcut function to strip commas out of numeric fields imported
from other software and convert them into numeric vectors that can be operated 
on. This assumes decimal point as opposed to decimal comma notation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decomma(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decomma_+3A_x">x</code></td>
<td>
<p>a character vector containing numbers with commas that should 
be coerced into being numeric.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function assumes decimal point notation for numbers. For more 
information, see <a href="https://en.wikipedia.org/wiki/Decimal_mark#Countries_using_Arabic_numerals_with_decimal_point">https://en.wikipedia.org/wiki/Decimal_mark#Countries_using_Arabic_numerals_with_decimal_point</a>.
</p>


<h3>Value</h3>

<p>A numeric
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>input &lt;- c("10,243", "11,212", "7,011", "5443", "500")
output &lt;- decomma(input)
is.numeric(output)

</code></pre>

<hr>
<h2 id='defac'>Convert a factor to a character string safely</h2><span id='topic+defac'></span>

<h3>Description</h3>

<p>This is a shortcut function to convert a factor to a character 
variable without having to type as.character()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defac(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defac_+3A_x">x</code></td>
<td>
<p>a factor to be turned into a character</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+factor">factor</a></code>, <code><a href="base.html#topic+levels">levels</a></code> to understand the R 
implementation of factors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- as.factor(LETTERS)
summary(a)
b &lt;- defac(a)
class(b)

</code></pre>

<hr>
<h2 id='eeptools'>Evaluation of educational policy tools</h2><span id='topic+eeptools'></span>

<h3>Description</h3>

<p>Make common tasks for educational evaluation easier to do!
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> eeptools</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.2.0 </td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2018-06-01</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-3 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>his package has a number of useful shortcuts for common tasks. It includes 
some themes for ggplot2 plots, processing arbitrary text files of data, 
calculating student characteristics, and finding thresholds within vectors. 
Future development work will include methods for tuning and evaluating early 
warning system models.
</p>


<h3>Note</h3>

<p>This package is still in beta and function names may change in the next release.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gender&lt;-c("M","M","M","F","F","F")
statamode(gender)
statamode(gender[1:5])

missing_data&lt;-c(NA,NA,NA)
max_mis(missing_data)

makenum(gender)
gender &lt;- factor(gender)
defac(gender)
</code></pre>

<hr>
<h2 id='gelmansim'>Generate prediction intervals for model functions</h2><span id='topic+gelmansim'></span>

<h3>Description</h3>

<p>Generate prediction intervals from R models following Gelman and Hill
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gelmansim(mod, newdata, n.sims, na.omit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gelmansim_+3A_mod">mod</code></td>
<td>
<p>Name of a model object such as <code><a href="stats.html#topic+lm">lm</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>, or <code>merMod</code></p>
</td></tr>
<tr><td><code id="gelmansim_+3A_newdata">newdata</code></td>
<td>
<p>Sets of new data to generate predictions for</p>
</td></tr>
<tr><td><code id="gelmansim_+3A_n.sims">n.sims</code></td>
<td>
<p>Number of simulations per case</p>
</td></tr>
<tr><td><code id="gelmansim_+3A_na.omit">na.omit</code></td>
<td>
<p>Logical indicating whether to remove NAs from <code>newdata</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently gelmansim does not work for <code><a href="stats.html#topic+lm">lm</a></code> objects because of the way <code><a href="arm.html#topic+sim">sim</a></code> in the 
<code>arm</code> package handles variable names for these objects. It is recommended users use <code><a href="stats.html#topic+glm">glm</a></code> in these cases.
</p>


<h3>Value</h3>

<p>A dataframe with newdata and prediction intervals
</p>


<h3>References</h3>

<p>Modified from Gelman and Hill 2006. Data Analysis Using Regression and Multilevel/Hierarchical Models. Cambridge University Press.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> #Examples of "sim" 
set.seed (1)
J &lt;- 15
n &lt;- J*(J+1)/2
group &lt;- rep (1:J, 1:J)
mu.a &lt;- 5
sigma.a &lt;- 2
a &lt;- rnorm (J, mu.a, sigma.a)
b &lt;- -3
x &lt;- rnorm (n, 2, 1)
sigma.y &lt;- 6
y &lt;- rnorm (n, a[group] + b*x, sigma.y)
u &lt;- runif (J, 0, 3)
y123.dat &lt;- cbind (y, x, group)
# Linear regression 
x1 &lt;- y123.dat[,2]
y1 &lt;- y123.dat[,1]
M1 &lt;- glm (y1 ~ x1)

cases &lt;- data.frame(x1 = seq(-2, 2, by=0.1))
sim.results &lt;- gelmansim(M1, newdata=cases, n.sims=200, na.omit=TRUE)
## Not run: 

dat &lt;- as.data.frame(y123.dat)
M2 &lt;- glm (y1 ~ x1 + group, data=dat)

cases &lt;- expand.grid(x1 = seq(-2, 2, by=0.1), 
                     group=seq(1, 14, by=2))

sim.results &lt;- gelmansim(M2, newdata=cases, n.sims=200, na.omit=TRUE)
 

## End(Not run)
</code></pre>

<hr>
<h2 id='isid'>A function to check if a set of variables form a unique ID in a dataframe.</h2><span id='topic+isid'></span>

<h3>Description</h3>

<p>When passed a set of variable names and a dataframe, this function 
returns a check TRUE/FALSE whether or not the variables together uniquely 
identify a row in the dataframe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isid(data, vars, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isid_+3A_data">data</code></td>
<td>
<p>A dataframe.</p>
</td></tr>
<tr><td><code id="isid_+3A_vars">vars</code></td>
<td>
<p>A character vector specifying the column names in the dataframe 
to check as unique.</p>
</td></tr>
<tr><td><code id="isid_+3A_verbose">verbose</code></td>
<td>
<p>A logical, default FALSE. If TRUE, isid will tell you how many 
rows you need and how many your variables uniquely identify</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE. TRUE indicates the variables uniquely identify the rows. 
FALSE indicates they do not.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stuatt)
isid(stuatt, vars = c("sid"))
isid(stuatt, vars = c("sid", "school_year"))
isid(stuatt, vars = c("sid", "school_year"), verbose = TRUE)

</code></pre>

<hr>
<h2 id='lag_data'>Create a lag</h2><span id='topic+lag_data'></span>

<h3>Description</h3>

<p>Lag variables by an arbitrary number of periods even if the data is grouped
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lag_data(df, group, time, periods, values)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lag_data_+3A_df">df</code></td>
<td>
<p>A dataframe with groups, time periods, and a variable to be lagged</p>
</td></tr>
<tr><td><code id="lag_data_+3A_group">group</code></td>
<td>
<p>The grouping factor in the dataframe</p>
</td></tr>
<tr><td><code id="lag_data_+3A_time">time</code></td>
<td>
<p>The variable representing time periods</p>
</td></tr>
<tr><td><code id="lag_data_+3A_periods">periods</code></td>
<td>
<p>A scalar for the number of periods to be lagged in the data. Can 
be negative to indicate leading variable.</p>
</td></tr>
<tr><td><code id="lag_data_+3A_values">values</code></td>
<td>
<p>The names of the variables to be lagged</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with a newly created variable lagged
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
test_data &lt;- expand.grid(id = sample(letters, 10), 
                        time = 1:10)
test_data$value1 &lt;- rnorm(100)
test_data$value2 &lt;- runif(100)
test_data$value3 &lt;- rpois(100, 4)
group &lt;- "id"
time &lt;- "time"
values &lt;- c("value1", "value2")
vars &lt;- c(group, time, values)
periods &lt;- 2
newdat &lt;- lag_data(test_data, group="id", time="time", 
                 values=c("value1", "value2"), periods=3)
</code></pre>

<hr>
<h2 id='leading_zero'>Function to add leading zeroes to maintain fixed width.</h2><span id='topic+leading_zero'></span>

<h3>Description</h3>

<p>This function ensures that fixed width data is the right 
length by padding zeroes to the front of values. This is a common problem 
with fixed width data after importing into R as non-character type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leading_zero(x, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="leading_zero_+3A_x">x</code></td>
<td>
<p>a vector of numeric data that should be fixed width but is 
missing leading zeroes.</p>
</td></tr>
<tr><td><code id="leading_zero_+3A_digits">digits</code></td>
<td>
<p>an integer representing the desired width of <code>x</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>If x contains negative values then the width specified by digits 
will include one space taken up for the negative sign. The function does not 
trim values that are longer than digits, so the vector produced will not 
have a uniform width if <code>nchar(x) &gt; d</code>
</p>


<h3>Value</h3>

<p>A character vector of length <code>digits</code>
</p>


<h3>Author(s)</h3>

<p>Jason P. Becker
</p>
<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- seq(1,10)
a &lt;- leading_zero(a, digits = 3)
a
</code></pre>

<hr>
<h2 id='makenum'>a function to convert numeric factors into numeric class objects</h2><span id='topic+makenum'></span>

<h3>Description</h3>

<p>This function allows you to convert directly from a numeric 
factor to the numeric class in R and strip away the underlying level index 
of a factor. This makes it safer to convert from factors to numeric characters 
directly without accidentally misassigning numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makenum(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makenum_+3A_x">x</code></td>
<td>
<p>a factor with numeric levels</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function should only be used on factors where all levels are 
valid numbers that can be coerced into a numeric class.
</p>


<h3>Value</h3>

<p>A numeric
</p>


<h3>Note</h3>

<p>This will force all levels to be converted to characters and then to 
numeric objects. Leading zeroes will be stripped off and commas will 
cause errors.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+character">character</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- ordered(c(1, 3, '09', 7, 5))
b &lt;- makenum(a)
class(b)
b
a

</code></pre>

<hr>
<h2 id='max_mis'>A function to safely take the maximum of a vector that could include only NAs.</h2><span id='topic+max_mis'></span>

<h3>Description</h3>

<p>When computing the maximum on arbitrary subsets of data, some 
of which may only have missing values, it may be necessary to take the maximum 
of a vector of NAs. This replaces the behavior that returns Inf or-Inf and 
replaces it with simply returning an NA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>max_mis(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="max_mis_+3A_x">x</code></td>
<td>
<p>A vector of data that a maximum can be taken of.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function only returns valid results for vectors with a mix of 
NA and numeric values.
</p>


<h3>Value</h3>

<p>A vector with the maximum value or with an NA of the proper type
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>See Also</h3>

<p>See also <code><a href="base.html#topic+max">max</a></code> which this function wraps.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>max(c(7,NA,3,2,0),na.rm=TRUE)
max_mis(c(7,NA,3,2,0))
max(c(NA,NA,NA,NA),na.rm=TRUE)
max_mis(c(NA,NA,NA,NA))

</code></pre>

<hr>
<h2 id='midsch'>A dataframe of aggregate test scores for schools in a Midwest state.</h2><span id='topic+midsch'></span>

<h3>Description</h3>

<p>This data comes from publicly available aggregated test scores 
of a large midwestern state. Each row represents scores for school A in grade X 
and then scores in school A and grade X+1. Additionally, some regression 
diagnostics and results from a predictive model of test scores in grade 
X+1 are included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>midsch
</code></pre>


<h3>Format</h3>

<p>A data frame with 19985 observations on the following 16 variables.
</p>

<dl>
<dt><code>district_id</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>school_id</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>subject</code></dt><dd><p>a factor with levels <code>math</code> <code>read</code> representing the subject of the test scores in the row</p>
</dd>
<dt><code>grade</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>n1</code></dt><dd><p>a numeric vector for the count of students in the school and grade in t</p>
</dd>
<dt><code>ss1</code></dt><dd><p>a numeric vector for the scale score in t</p>
</dd>
<dt><code>n2</code></dt><dd><p>a numeric vector for the count of students in the school and grade in t+1</p>
</dd>
<dt><code>ss2</code></dt><dd><p>a numeric vector for the mean scale score in t+1</p>
</dd>
<dt><code>predicted</code></dt><dd><p>a numeric vector of the predicted ss2 for this observation</p>
</dd>
<dt><code>residuals</code></dt><dd><p>a numeric vector of residuals from the predicted ss2</p>
</dd>
<dt><code>resid_z</code></dt><dd><p>a numeric vector of standardized residuals</p>
</dd>
<dt><code>resid_t</code></dt><dd><p>a numeric vector of studentized residuals</p>
</dd>
<dt><code>cooks</code></dt><dd><p>a numeric vector of cooks D for the residuals</p>
</dd>
<dt><code>test_year</code></dt><dd><p>a numeric vector representing the year the test was taken</p>
</dd>
<dt><code>tprob</code></dt><dd><p>a numeric vector representing the probability of a residual appearing</p>
</dd>
<dt><code>flagged_t95</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>

<p>These data were fit with a statistical model by a large newspaper to 
investigate unusual gains in test scores. Fifty separate models were fit 
representing all unique combinations of grade,year, and subject
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(midsch)
head(midsch)
</code></pre>

<hr>
<h2 id='moves_calc'>Function to calculate the number of times a student has changed schools.</h2><span id='topic+moves_calc'></span>

<h3>Description</h3>

<p>This function calculates the number of times a student has changed 
schools, including accounting for gaps in enrollment data. It returns a 
<code><a href="data.table.html#topic+data.table">data.table</a></code> with the student ID and the number of student moves.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moves_calc(
  df,
  enrollby,
  exitby,
  gap = 14,
  sid = "sid",
  schid = "schid",
  enroll_date = "enroll_date",
  exit_date = "exit_date"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moves_calc_+3A_df">df</code></td>
<td>
<p>a data.frame containing minimally a student identifier, school identifier, enrollment date, and exit date.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_enrollby">enrollby</code></td>
<td>
<p>a date that determines the earliest a student can enroll for 
the first time without being credited with having moved at least once.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_exitby">exitby</code></td>
<td>
<p>a date that determines the latest a student can exit for the final 
time without being credited with having moved at least once.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_gap">gap</code></td>
<td>
<p>a number, of days,  that represents the largest gap between an exit date 
and the next enrollment date that can occur without indicating the student 
moved to a third school not contained within the data set. The default value is 
<code>14</code>.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_sid">sid</code></td>
<td>
<p>a character that indicates the name of the student id attribute 
in <code>df</code>. The default value is <code>sid</code>.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_schid">schid</code></td>
<td>
<p>a character that indicates the name of the school id attribute 
in <code>df</code>. The default value is <code>schid</code>.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_enroll_date">enroll_date</code></td>
<td>
<p>a character that indicates the name of the enrollment date 
attribute in <code>df</code>. The default value is <code>enroll_date</code>.</p>
</td></tr>
<tr><td><code id="moves_calc_+3A_exit_date">exit_date</code></td>
<td>
<p>a character that indicates the name of the student id 
attribute in <code>df</code>. The default value is <code>exit_date</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>enrollby</code> and <code>exitby</code> are specified automatically if not 
defined. They are assigned to the default dates of -09-15 and -06-01 of the min 
and max year respectively.
</p>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason P. Becker
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
df &lt;- data.frame(sid = c(rep(1,3), rep(2,4), 3, rep(4,2)), 
                 schid = c(1, 2, 2, 2, 3, 1, 1, 1, 3, 1),
                 enroll_date = as.Date(c('2004-08-26',
                                         '2004-10-01',
                                         '2005-05-01',
                                         '2004-09-01',
                                         '2004-11-03',
                                         '2005-01-11',
                                         '2005-04-02',
                                         '2004-09-26',
                                         '2004-09-01',
                                         '2005-02-02'), 
                                       format='%Y-%m-%d'),
                 exit_date = as.Date(c('2004-08-26',
                                       '2005-04-10',
                                       '2005-06-15',
                                       '2004-11-02',
                                       '2005-01-10',
                                       '2005-03-01',
                                       '2005-06-15',
                                       '2005-05-30',
                                       NA,
                                       '2005-06-15'), 
                                     format='%Y-%m-%d'))
moves &lt;- moves_calc(df)
moves
moves &lt;- moves_calc(df, enrollby='2004-10-15', gap=22)
moves
moves &lt;- moves_calc(df, enrollby='2004-10-15', exitby='2005-05-29')
moves

## End(Not run)

</code></pre>

<hr>
<h2 id='nth_max'>Find the nth maximum value</h2><span id='topic+nth_max'></span>

<h3>Description</h3>

<p>Find the nth maximum value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nth_max(x, n = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nth_max_+3A_x">x</code></td>
<td>
<p>a vector of numeric values</p>
</td></tr>
<tr><td><code id="nth_max_+3A_n">n</code></td>
<td>
<p>which max to return</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the value of the nth most maximum value in a vector
</p>


<h3>Note</h3>

<p>If <code>n</code> is smaller/larger than <code>0</code>/<code>length(unique(x))</code>
the error &lsquo;index outside bounds&rsquo; is thrown.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1:20, 20:1)
nth_max(x, n = 1) #20
nth_max(x, n = 2) #19
</code></pre>

<hr>
<h2 id='profpoly'>Creates a proficiency polygon in ggplot2 for showing assessment categories</h2><span id='topic+profpoly'></span>

<h3>Description</h3>

<p>Creates a proficiency polygon in ggplot2 for showing assessment categories
</p>


<h3>Usage</h3>

<pre><code class='language-R'>profpoly(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="profpoly_+3A_data">data</code></td>
<td>
<p>a data.frame produced by <code><a href="#topic+profpoly.data">profpoly.data</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot2 object that can be printed or saved
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_polygon">geom_polygon</a></code> which this function wraps
</p>


<h3>Examples</h3>

<pre><code class='language-R'>grades&lt;-c(3,4,5,6,7,8)
g &lt;- length(grades)
LOSS &lt;- rep(200, g)
HOSS &lt;- rep(650, g)
basic &lt;- c(320,350,370,390,420,440)
minimal &lt;- basic-30
prof &lt;- c(380,410,430,450,480,500)
adv &lt;- c(480,510,530,550,580,600)
z &lt;- profpoly.data(grades, LOSS, minimal, basic, proficient = prof, 
                  advanced = adv, HOSS)
profpoly(z)
</code></pre>

<hr>
<h2 id='profpoly.data'>Creates a data frame suitable for building custom polygon layers in ggplot2 objects</h2><span id='topic+profpoly.data'></span>

<h3>Description</h3>

<p>Creates a data frame suitable for building custom polygon layers in ggplot2 objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>profpoly.data(grades, LOSS, minimal, basic, proficient, advanced, HOSS)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="profpoly.data_+3A_grades">grades</code></td>
<td>
<p>a vector of tested grades in sequential order</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_loss">LOSS</code></td>
<td>
<p>is a vector of the lowest obtainable scale score on 
an assessment by grade</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_minimal">minimal</code></td>
<td>
<p>is a vector of the floor of the minimal assessment category by grade</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_basic">basic</code></td>
<td>
<p>is a vector of the floor of the basic assessment category by grade</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_proficient">proficient</code></td>
<td>
<p>is a vector of the floor of the proficient assessment category by grade</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_advanced">advanced</code></td>
<td>
<p>is a vector of the floor of the advanced assessment category by grade</p>
</td></tr>
<tr><td><code id="profpoly.data_+3A_hoss">HOSS</code></td>
<td>
<p>is a vector of the highest obtainable scale score by grade</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe for adding a polygon to layers in other ggplot2 plots
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_polygon">geom_polygon</a></code> which this function assists
</p>


<h3>Examples</h3>

<pre><code class='language-R'>grades&lt;-c(3,4,5,6,7,8)
g&lt;-length(grades)
LOSS&lt;-rep(200,6)
HOSS&lt;-rep(650,6)
basic&lt;-c(320,350,370,390,420,440)
minimal&lt;-basic-30
prof&lt;-c(380,410,430,450,480,500)
adv&lt;-c(480,510,530,550,580,600)

z&lt;-profpoly.data(grades,LOSS,minimal,basic,
               proficient = prof,advanced = adv, HOSS)
z
</code></pre>

<hr>
<h2 id='remove_char'>A function to replace an arbitrary character like a &quot;*&quot; in redacted data with an NA in R</h2><span id='topic+remove_char'></span>

<h3>Description</h3>

<p>Redacted education data files often have a &quot;*&quot; character. 
When importing into R this is a problem, which this function solves in a simple 
step by replacing &quot;*&quot; with NA, and then converting the vector to numeric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_char(x, char)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_char_+3A_x">x</code></td>
<td>
<p>a vector of data that should be numeric but contains characters 
indicating redaction forcing R to read it as character</p>
</td></tr>
<tr><td><code id="remove_char_+3A_char">char</code></td>
<td>
<p>the character string that should be removed from the vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of the same length as the input vector that is numeric 
with NAs in place of the character.
</p>


<h3>Note</h3>

<p>Future versions could be modified to accommodate other indicators of 
redacted data.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- c(1, 5, 3, 6, "*", 2, 5, "*", "*")
b &lt;- remove_char(a, "*")
as.numeric(b)
</code></pre>

<hr>
<h2 id='retained_calc'>Function to calculate whether a student has repeated a grade.</h2><span id='topic+retained_calc'></span>

<h3>Description</h3>

<p>This function calculates whether or not a student has repeated 
a grade. It returns a <code><a href="base.html#topic+data.frame">data.frame</a></code> with the student ID and a 
character vector with <code>Y</code> representing they repeated the grade and 
<code>N</code> that they had not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retained_calc(df, sid = "sid", grade = "grade", grade_val = 9)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retained_calc_+3A_df">df</code></td>
<td>
<p>a data.frame containing minimally a student identifier and their 
grade.</p>
</td></tr>
<tr><td><code id="retained_calc_+3A_sid">sid</code></td>
<td>
<p>a character that indicates the name of the student id attribute in 
<code>df</code>. The default value is <code>sid</code>.</p>
</td></tr>
<tr><td><code id="retained_calc_+3A_grade">grade</code></td>
<td>
<p>a character that indicates the name of the student grade attribute in 
<code>df</code>. The default value is <code>grade</code>.</p>
</td></tr>
<tr><td><code id="retained_calc_+3A_grade_val">grade_val</code></td>
<td>
<p>a numeric vector that contains the value of the grade that is 
being checked for retention. The default value is <code>9</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason P. Becker
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame(sid = c(101, 101, 102, 103, 103, 103, 104),
               grade = c(9, 10, 9, 9, 9, 10, 10))
retained_calc(x)
</code></pre>

<hr>
<h2 id='statamode'>A function to mimic the mode function in Stata.</h2><span id='topic+statamode'></span>

<h3>Description</h3>

<p>This function mimics the functionality of the mode function in 
Stata. It does this by calculating the modal category of a vector and 
replacing tied categories with a &quot;.&quot;to represent a single mode does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statamode(x, method = c("last", "stata", "sample"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statamode_+3A_x">x</code></td>
<td>
<p>a vector, missing values are allowed</p>
</td></tr>
<tr><td><code id="statamode_+3A_method">method</code></td>
<td>
<p>a character vector of length 1 specifying the way to break ties 
in cases where more than one mode exists; either &quot;stata&quot;, &quot;sample&quot;, or &quot;last&quot;. 
&quot;stata&quot; provides a &quot;.&quot; if more than one mode exists. &quot;sample&quot; randomly samples 
from among the tied values for a single mode. &quot;last&quot; takes the final modal 
category appearing in the data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Specifying method=&quot;stata&quot; will result in ties for the mode being 
replaced with a &quot;.&quot; character. Specifying &quot;sample&quot; will result in the function 
randomly sampling among the tied values and picking a single value. Finally, 
specifying &quot;last&quot; will result in the function picking the value that appears 
last in the original x vector. The default behavior is stata.
</p>


<h3>Value</h3>

<p>The modal value of a vector if a unique mode exists, else output 
determined by method
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+table">table</a></code> which this function uses
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- c(month.name, month.name)
statamode(a, method="stata") # returns "." to show no unique mode; useful for ddply
statamode(a ,method="sample") # randomly pick one
a &lt;- c(LETTERS, "A" , "A")
statamode(a)
</code></pre>

<hr>
<h2 id='stuatt'>Student Attributes from the Strategic Data Project Toolkit</h2><span id='topic+stuatt'></span>

<h3>Description</h3>

<p>A synthetic dataset of student attributes from the Strategic Data 
Project which includes records with errors to practice data cleaning and 
implementing business rules for consistency in data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stuatt
</code></pre>


<h3>Format</h3>

<p>A data frame with 87534 observations on the following 9 variables.
</p>

<dl>
<dt><code>sid</code></dt><dd><p>a numeric vector of the unique student ID</p>
</dd>
<dt><code>school_year</code></dt><dd><p>a numeric vector of the school year</p>
</dd>
<dt><code>male</code></dt><dd><p>a numeric vector indicating 1 = male</p>
</dd>
<dt><code>race_ethnicity</code></dt><dd><p>a factor with levels <code>A</code> <code>B</code> <code>H</code> <code>M/O</code> <code>W</code></p>
</dd>
<dt><code>birth_date</code></dt><dd><p>a numeric vector of the student birthdate</p>
</dd>
<dt><code>first_9th_school_year_reported</code></dt><dd><p>a numeric vector of the first year a student is reported in 9th grade</p>
</dd>
<dt><code>hs_diploma</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>hs_diploma_type</code></dt><dd><p>a factor with levels  <code>Alternative Diploma</code> <code>College Prep Diploma</code> <code>Standard Diploma</code></p>
</dd>
<dt><code>hs_diploma_date</code></dt><dd><p>a factor with levels  <code>12/2/2008</code> <code>12/21/2008</code> <code>4/14/2008</code> <code>4/18/2008</code> ...</p>
</dd>
</dl>



<h3>Details</h3>

<p>This is the non-clean version of the data to allow for implementing 
business rules to clean data.
</p>


<h3>Source</h3>

<p>Available from the Strategic Data Project online at 
<a href="https://sdp.cepr.harvard.edu/toolkit-effective-data-use">https://sdp.cepr.harvard.edu/toolkit-effective-data-use</a>
</p>


<h3>References</h3>

<p>Visit the Strategic Data Project online at:  <a href="https://sdp.cepr.harvard.edu/">https://sdp.cepr.harvard.edu/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stuatt)
head(stuatt)
</code></pre>

<hr>
<h2 id='stulevel'>A synthetic data set of K-12 student attributes.</h2><span id='topic+stulevel'></span>

<h3>Description</h3>

<p>A small dataset of synthetic data on K-12 students with 2700 
observations. 1200 individual students are represented, nested within 
4 districts and 2 schools.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stulevel
</code></pre>


<h3>Format</h3>

<p>A data frame with 2700 observations on the following 32 variables.
</p>

<dl>
<dt><code>X</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>school</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>stuid</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>grade</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>schid</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>dist</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>white</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>black</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>hisp</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>indian</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>asian</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>econ</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>female</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ell</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>disab</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sch_fay</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>dist_fay</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>luck</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ability</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>measerr</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>teachq</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>year</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>attday</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>schoolscore</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>district</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>schoolhigh</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>schoolavg</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>schoollow</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>readSS</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>mathSS</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>proflvl</code></dt><dd><p>a factor with levels <code>advanced</code> <code>basic</code> <code>below basic</code> <code>proficient</code></p>
</dd>
<dt><code>race</code></dt><dd><p>a factor with levels <code>A</code> <code>B</code> <code>H</code> <code>I</code> <code>W</code></p>
</dd>
</dl>



<h3>Details</h3>

<p>This data is synthetically generated to reflect student test scores 
and demographic attributes.
</p>


<h3>Source</h3>

<p>The script to generate this synthetic dataset can be found and modified 
at <a href="https://github.com/jknowles/r_tutorial_ed">https://github.com/jknowles/r_tutorial_ed</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stulevel)
head(stulevel)
</code></pre>

<hr>
<h2 id='theme_dpi'>a deprecated ggplot2 theme developed for PDF and PNG for use at the 
Wisconsin Department of Public Instruction</h2><span id='topic+theme_dpi'></span>

<h3>Description</h3>

<p>This is a custom ggplot2 theme developed for the Wisconsin 
Department of Public Instruction. This function is now deprecated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_dpi(base_size = 16, base_family = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_dpi_+3A_base_size">base_size</code></td>
<td>
<p>numeric, specify the font size as a numeric value, default is 16</p>
</td></tr>
<tr><td><code id="theme_dpi_+3A_base_family">base_family</code></td>
<td>
<p>character, specify the font family, this value is optional</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All values are optional
</p>


<h3>Value</h3>

<p>A theme object which is a list of attributes applied to a ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Source</h3>

<p>For more information see https://github.com/hadley/ggplot2/wiki/Themes
</p>


<h3>See Also</h3>

<p>his uses <code><a href="grid.html#topic+unit">unit</a></code> from the grid package extensively. 
See also <code><a href="ggplot2.html#topic+theme_bw">theme_bw</a></code> from the ggplot2 package.
</p>

<hr>
<h2 id='theme_dpi_map'>a deprecated ggplot2 theme developed for PDF or SVG maps</h2><span id='topic+theme_dpi_map'></span>

<h3>Description</h3>

<p>This is a deprecated ggplot2 theme developed for the Wisconsin 
Department of Public Instruction for making PDF maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_dpi_map(base_size = 14, base_family = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_dpi_map_+3A_base_size">base_size</code></td>
<td>
<p>numeric, specify the font size, default is 14</p>
</td></tr>
<tr><td><code id="theme_dpi_map_+3A_base_family">base_family</code></td>
<td>
<p>character, specify the font family, this value is optional</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All values are optional
</p>


<h3>Value</h3>

<p>A theme object which is a list of attributes applied to a ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Source</h3>

<p>For more information see https://github.com/hadley/ggplot2/wiki/Themes
</p>


<h3>See Also</h3>

<p>his uses <code><a href="grid.html#topic+unit">unit</a></code> from the grid package extensively. 
See also <code><a href="ggplot2.html#topic+theme_bw">theme_bw</a></code> from the ggplot2 package.
</p>

<hr>
<h2 id='theme_dpi_map2'>an alternate deprecated ggplot2 theme developed for PDF or SVG maps</h2><span id='topic+theme_dpi_map2'></span>

<h3>Description</h3>

<p>This is a deprecated ggplot2 theme developed for the Wisconsin 
Department of Public Instruction for making PDF maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_dpi_map2(base_size = 14, base_family = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_dpi_map2_+3A_base_size">base_size</code></td>
<td>
<p>numeric, specify the font size, default is 14</p>
</td></tr>
<tr><td><code id="theme_dpi_map2_+3A_base_family">base_family</code></td>
<td>
<p>character, specify the font family, this value is optional</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All values are optional
</p>


<h3>Value</h3>

<p>A theme object which is a list of attributes applied to a ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Source</h3>

<p>For more information see https://github.com/hadley/ggplot2/wiki/Themes
</p>


<h3>See Also</h3>

<p>his uses <code><a href="grid.html#topic+unit">unit</a></code> from the grid package extensively. 
See also <code><a href="ggplot2.html#topic+theme_bw">theme_bw</a></code> from the ggplot2 package.
</p>

<hr>
<h2 id='theme_dpi_mapPNG'>an deprecated ggplot2 theme developed for PNG or JPG maps</h2><span id='topic+theme_dpi_mapPNG'></span>

<h3>Description</h3>

<p>This is a deprecated ggplot2 theme developed for the Wisconsin 
Department of Public Instruction for making PNG or JPG maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_dpi_mapPNG(base_size = 18, base_family = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_dpi_mapPNG_+3A_base_size">base_size</code></td>
<td>
<p>numeric, specify the font size, default is 18</p>
</td></tr>
<tr><td><code id="theme_dpi_mapPNG_+3A_base_family">base_family</code></td>
<td>
<p>character, specify the font family, this value is optional</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All values are optional
</p>


<h3>Value</h3>

<p>A theme object which is a list of attributes applied to a ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>Source</h3>

<p>For more information see https://github.com/hadley/ggplot2/wiki/Themes
</p>


<h3>See Also</h3>

<p>his uses <code><a href="grid.html#topic+unit">unit</a></code> from the grid package extensively. 
See also <code><a href="ggplot2.html#topic+theme_bw">theme_bw</a></code> from the ggplot2 package.
</p>

<hr>
<h2 id='thresh'>A function to return the maximum percentage of the cumulative sum represented 
by a subset of the vector</h2><span id='topic+thresh'></span>

<h3>Description</h3>

<p>Returns the proportion of the cumulative sum represented by the 
number of elements in the vector a user specifies. This allows the user to 
identify the maximum proportion of the total that only X number of elements 
may represent in the vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>thresh(x, cutoff, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="thresh_+3A_x">x</code></td>
<td>
<p>a numeric vector, missing values are allowed</p>
</td></tr>
<tr><td><code id="thresh_+3A_cutoff">cutoff</code></td>
<td>
<p>numeric, the number of elements to look at</p>
</td></tr>
<tr><td><code id="thresh_+3A_na.rm">na.rm</code></td>
<td>
<p>logical, should missing values be excluded?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates the proportion of a numeric vector reached after sorting 
the vector in ascending order and stopping at the specified count
</p>


<h3>Value</h3>

<p>A numeric proportion
</p>


<h3>Author(s)</h3>

<p>Jared E. Knowles
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cutoff">cutoff</a></code> which this function is related to
</p>


<h3>Examples</h3>

<pre><code class='language-R'># for vector
a &lt;- rnorm(100, mean=6, sd=1)
thresh(a, 8) #return minimum number of elements to account 70 percent of total
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
