<!DOCTYPE html><html lang="en"><head><title>Help for package rFUSION</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rFUSION}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ASCII2DTM'><p>ASCII2DTM</p></a></li>
<li><a href='#DTM2ENVI'><p>DTM2ENVI</p></a></li>
<li><a href='#DTM2TIF'><p>DTM2TIF</p></a></li>
<li><a href='#DTM2XYZ'><p>DTM2XYZ</p></a></li>
<li><a href='#DTMDescribe'><p>DTMDescribe</p></a></li>
<li><a href='#DTMHeader'><p>DTMHeader</p></a></li>
<li><a href='#filterData'><p>filterData</p></a></li>
<li><a href='#XYZ2DTM'><p>XYZ2DTM</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Interface to FUSION</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Set of functions that enable you to use the FUSION commands (Program available in: <a href="http://forsys.sefs.uw.edu/fusion/fusionlatest.html">http://forsys.sefs.uw.edu/fusion/fusionlatest.html</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, sjmisc</td>
</tr>
<tr>
<td>OS_type:</td>
<td>windows</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-03-04 10:31:50 UTC; Alba Garcia</td>
</tr>
<tr>
<td>Author:</td>
<td>Alba García Cimarras
    <a href="https://orcid.org/0000-0001-5273-9112"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alba García Cimarras &lt;alba.gcimarras@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-03-17 12:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='ASCII2DTM'>ASCII2DTM</h2><span id='topic+ASCII2DTM'></span>

<h3>Description</h3>

<p>ASCII2DTM converts raster data stored in ESRI ASCII raster format into a PLANS format data file. Data in the input ASCII raster file can represent a surface or raster data. ASCII2DTM converts areas containing NODATA values into areas with negative elevation values in the output data file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ASCII2DTM(
  fusion.path = "C:/FUSION/",
  surfacefile,
  xyunits,
  zunits,
  coordsys,
  zone,
  horizdatum,
  vertdatum,
  Gridfile,
  switches = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ASCII2DTM_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_surfacefile">surfacefile</code></td>
<td>
<p>Character. Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_xyunits">xyunits</code></td>
<td>
<p>Character. Units for LIDAR data XY:
</p>

<ul>
<li><p> M - for meters.
</p>
</li>
<li><p> F - for feet.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_zunits">zunits</code></td>
<td>
<p>Character. Units for LIDAR data elevations:
</p>

<ul>
<li><p> M - for meters.
</p>
</li>
<li><p> F - for feet.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_coordsys">coordsys</code></td>
<td>
<p>Numeric. Coordinate system for the canopy model:
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for UTM.
</p>
</li>
<li><p> 2 - for state plane.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_zone">zone</code></td>
<td>
<p>Numeric. Coordinate system zone for the canopy model (0 for unknown).</p>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_horizdatum">horizdatum</code></td>
<td>
<p>Numeric. Horizontal datum for the canopy model.
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for NAD27.
</p>
</li>
<li><p> 2 -for NAD83.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_vertdatum">vertdatum</code></td>
<td>
<p>Numeric. LIDAR data file name or template or name of a text file containing a list of file names (list file must have .txt extension).
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for NGVD29.
</p>
</li>
<li><p> 2 - for NAVD88.
</p>
</li>
<li><p> 3 - for GRS80.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_gridfile">Gridfile</code></td>
<td>
<p>Character. Name of the ESRI ASCII raster file containing surface data.</p>
</td></tr>
<tr><td><code id="ASCII2DTM_+3A_switches">switches</code></td>
<td>
<p>Character. NULL as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /multiplier:# - Multiply all data values in the input surface by the constant.
</p>
</li>
<li><p> /offset:# - Add the constant to all data values in the input surface. The constant can be negative.
</p>
</li>
<li><p> /nan - Create FUSION index files for the output file.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>ASCII2DTM recognizes both the (xllcorner, yllcorner) and (xllcenter, yllcenter) methods for specifying the location of the raster data. The PLANS DTM format used in FUSION
always assumes that the data point (grid point) in the lower left corner is the model origin and adjusts the location of the raster data accordingly. <br />
ASCII2DTM examines the ASCII raster file to determine whether the elevation values are integers or floating point numbers. It creates the PLANS DTM file using either integer or 4-byte floating point values for the elevations. <br />
ASCII2DTM always assumes that the data stored in ASCII raster format is interpreted as a raster. That is, the value is representative of the entire grid cell. For data that represent a surface where the values are actually elevations at specific points, the origin of the DTM file is set to the center of the lower left cell in the grid. <br />
If you receive surface data in ESRI’s GRID format it is possible to use GDAL (http://www.gdal.org/) to convert the GRID data into ASCII raster format. Refer to Appendix D: Building multi-processor workflows using AreaProcessor for more details.<br />
If you are using DTM2ASCII to convert data from the PLANS DTM format into ASCII raster format, you should always use the /raster switch in DTM2ASCII to ensure that you can convert the data back to the PLANS DTM format using ASCII2DTM.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>surfacefile&lt;-'Z:/dtmfile.dtm'
Gridfile&lt;- 'Z:/gridfile.asc'
ASCII2DTM(surfacefile = surfacefile,xyunits = 'M',zunits = 'M',
          coordsys = 1,zone = 0, horizdatum = 0, vertdatum = 0,
                    Gridfile = Gridfile, switches = NULL)
</code></pre>

<hr>
<h2 id='DTM2ENVI'>DTM2ENVI</h2><span id='topic+DTM2ENVI'></span>

<h3>Description</h3>

<p>DTM2ENVI converts data stored in the PLANS DTM format into ENVI standard format raster files. Such files can be imported into GIS software such as ENVI and ArcInfo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DTM2ENVI(fusion.path = "C:/FUSION/", inputfile, outputfile, switches = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTM2ENVI_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="DTM2ENVI_+3A_inputfile">inputfile</code></td>
<td>
<p>is a character.Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
<tr><td><code id="DTM2ENVI_+3A_outputfile">outputfile</code></td>
<td>
<p>Character. Name for the converted file. If outputfile is omitted, the output file name will be constructed from the inputfile name and the extension .xyz.
If the /csv switch is used, the extension will be .csv.</p>
</td></tr>
<tr><td><code id="DTM2ENVI_+3A_switches">switches</code></td>
<td>
<p>False as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /south - Specifies that data are located in the southern hemisphere.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>The ENVI data file is created using the same numeric format as the PLANS DTM file. All PLANS DTM data types are supported. Geo-referencing information is included in the ENVI header file using the “map info” tag.
Areas in the DTM grid that have no data will be “marked” with a value of -9999.0 in the ENVI format file and the appropriate value will be included in the “data ignore value” tag in the ENVI header file.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputfile&lt;-'Z:/dtmfile.dtm'
outputfile&lt;- 'Z:/outputfile.xyz'
DTM2ENVI(inputfile = inputfile,outputfile = outputfile, switches = NULL)
</code></pre>

<hr>
<h2 id='DTM2TIF'>DTM2TIF</h2><span id='topic+DTM2TIF'></span>

<h3>Description</h3>

<p>DTM2TIF converts data stored in the PLANS DTM format into a TIFF image and creates a world file that provides coordinate system reference data for the image. Such images can be imported into GIS software or used in other analysis processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DTM2TIF(fusion.path = "C:/FUSION/", inputfile, outputfile, switches = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTM2TIF_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="DTM2TIF_+3A_inputfile">inputfile</code></td>
<td>
<p>is a character.Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
<tr><td><code id="DTM2TIF_+3A_outputfile">outputfile</code></td>
<td>
<p>Character. Name for the converted file. If outputfile is omitted, the output file name will be constructed from the inputfile name and the extension .xyz.
If the /csv switch is used, the extension will be .csv.</p>
</td></tr>
<tr><td><code id="DTM2TIF_+3A_switches">switches</code></td>
<td>
<p>False as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /mask - Produces a mask image showing the areas in the DTM with valid data values. In the mask image, a value of 0 indicates a cell with invalid data (NODATA value) and a value of 255 indicates a cell with a valid data value.
</p>
</li>
<li><p> /csv - Output XYZ points in comma separated value format (CSV). If /csv is used with no outputfile, an extension of .csv will be used to form the output file name.
</p>
</li>
<li><p> /noheader - Do not include the column headings in CSV output files. Ignored if /csv is not used
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>DTM2TIF creates grayscale TIFF images that represent the data stored in a PLANS format DTM file. The range of values in the DTM file is scaled to correspond to gray values ranging from 1 to 255 in the TIFF image.
The gray level value of 0 is reserved to indicate NODATA areas in the DTM file (values less than 0.0).
DTM2TIF creates a world file to provide coordinates system information for the TIFF image. The world file is named using the same file name as the TIFF image but with the extension .tfw.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputfile&lt;-'Z:/dtmfile.dtm'
outputfile&lt;- 'Z:/outputfile.xyz'
DTM2TIF(inputfile = inputfile,outputfile = outputfile, switches = NULL)
</code></pre>

<hr>
<h2 id='DTM2XYZ'>DTM2XYZ</h2><span id='topic+DTM2XYZ'></span>

<h3>Description</h3>

<p>DTM2XYZ converts data stored in the PLANS DTM format into ASCII text files containing XYZ points.
Such files can be imported into GIS software as point data with the elevation as an attribute or used in other analysis processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DTM2XYZ(fusion.path = "C:/FUSION/", inputfile, outputfile, switches = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTM2XYZ_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="DTM2XYZ_+3A_inputfile">inputfile</code></td>
<td>
<p>is a character.Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
<tr><td><code id="DTM2XYZ_+3A_outputfile">outputfile</code></td>
<td>
<p>Character. Name for the converted file. If outputfile is omitted, the output file name will be constructed from the inputfile name and the extension .xyz.
If the /csv switch is used, the extension will be .csv.</p>
</td></tr>
<tr><td><code id="DTM2XYZ_+3A_switches">switches</code></td>
<td>
<p>False as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /void - Output points from DTM with NODATA value (default is to omit). NODATA value is -9999.0 for the elevation
</p>
</li>
<li><p> /csv - Output XYZ points in comma separated value format (CSV). If /csv is used with no outputfile, an extension of .csv will be used to form the output file name.
</p>
</li>
<li><p> /noheader - Do not include the column headings in CSV output files. Ignored if /csv is not used
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>The XYZ point file consists of one record for each grid point. Each record contains the X, Y, and elevation for the DTM grid point. If creating an ASCII text file, the values are separated by spaces and if creating a CSV format file, by commas.
For CSV files, the first line contains column labels unless the /noheader switch is specified.
If four or more of the directional searches find a valid elevation, the hole is filled using the average of all the values.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputfile&lt;-'Z:/dtmfile.dtm'
outputfile&lt;- 'Z:/outputfile.xyz'
DTM2XYZ(inputfile = inputfile,outputfile = outputfile, switches = NULL)
</code></pre>

<hr>
<h2 id='DTMDescribe'>DTMDescribe</h2><span id='topic+DTMDescribe'></span>

<h3>Description</h3>

<p>DTMDescribe reads header information for PLANS format DTM files and outputs the information to an ASCII text file compatible with most spreadsheet and database programs. DTMDescribe can provide information for a single file or multiple files.
Such files can be imported into GIS software as point data with the elevation as an attribute or used in other analysis processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DTMDescribe(fusion.path = "C:/FUSION/", inputfile, outputfile, switches = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTMDescribe_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="DTMDescribe_+3A_inputfile">inputfile</code></td>
<td>
<p>is a character.DTM file name, DTM file template, or name of a text file containing a list of file names (must have .txt extension).</p>
</td></tr>
<tr><td><code id="DTMDescribe_+3A_outputfile">outputfile</code></td>
<td>
<p>Character. Name for the output ASCII CSV file. If no extension is provided, an extension (.csv) will be added.</p>
</td></tr>
<tr><td><code id="DTMDescribe_+3A_switches">switches</code></td>
<td>
<p>False as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /stats - Compute descriptive statistics for the data values in the DTM.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>DTMDescribe produced output files in comma separated value (CSV) format and includes column labels in the first line of the file. The following header information from the DTM file is included in the CSV file:
File name
Descriptive name
Origin (X, Y)
Upper right (X, Y)
Number of columns
Number of rows
Column spacing
Row spacing
Minimum data value
Maximum data value
Horizontal units
Vertical units
Variable type
Coordinate system
Coordinate zone
Horizontal datum
Vertical datum
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputfile&lt;-'Z:/dtmfile.dtm'
outputfile&lt;- 'Z:/outputfile.xyz'
DTMDescribe(inputfile = inputfile,outputfile = outputfile, switches = NULL)
</code></pre>

<hr>
<h2 id='DTMHeader'>DTMHeader</h2><span id='topic+DTMHeader'></span>

<h3>Description</h3>

<p>DTMHeader is an interactive program. It is described in the Command Line Utility section because it provides a means to examine and modify PLANS DTM file header information. DTMHeader allows you to easily view and change the header information for a PLANS DTM file. To make it most convenient, associate the .dtm extension with DTMHeader so you can simply double-click a .dtm file to view the header. The values in the header that can be modified are:
Planimetric units,
Elevation units,
Descriptive name,
Coordinate system and zone,
Horizontal datum,
Vertical datum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DTMHeader(fusion.path = "C:/FUSION/", filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTMHeader_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="DTMHeader_+3A_filename">filename</code></td>
<td>
<p>is a character.Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The ENVI data file is created using the same numeric format as the PLANS DTM file. All PLANS DTM data types are supported. Geo-referencing information is included in the ENVI header file using the “map info” tag.
Areas in the DTM grid that have no data will be “marked” with a value of -9999.0 in the ENVI format file and the appropriate value will be included in the “data ignore value” tag in the ENVI header file.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filename&lt;-'Z:/filename.dtm'
DTMHeader(filename = filename)
</code></pre>

<hr>
<h2 id='filterData'>filterData</h2><span id='topic+filterData'></span>

<h3>Description</h3>

<p>FilterData applies various filters to return data files to produce new return data files with only the returns that meet the filter requirements.
The most common application for FilterType is to remove “outliers” from return data files. Other filter options overlay the return data with a user-specified
grid and produce output return files that contain only the returns with the minimum or maximum elevation for each grid cell.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filterData(
  fusion.path = "C:/FUSION/",
  FilterType,
  FilterParms,
  WindowSize,
  OutputFile,
  DataFile,
  switches = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filterData_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. The directory where FUSION is installed. By defult: C:/FUSION/</p>
</td></tr>
<tr><td><code id="filterData_+3A_filtertype">FilterType</code></td>
<td>
<p>Character. Filtering algorithm used to remove returns from the DataFile(s).  <br />
The following options (by name) are supported:
</p>

<ul>
<li><p> outlier - removes returns above or below the mean elevation plus or minus FilterParms * standard deviation of the elevations
</p>
</li>
<li><p> outlier2 - More robust outlier removal (experimental)
</p>
</li>
<li><p> minimum - removes all returns except the return with the minimum elevation
</p>
</li>
<li><p> maximum - removes all returns except the return with the maximum elevation
</p>
</li></ul>
</td></tr>
<tr><td><code id="filterData_+3A_filterparms">FilterParms</code></td>
<td>
<p>Numeric. Parameters specific to the filtering method.
For outlier this is the multiplier applied to the standard deviation. For minimum and maximum,
FilterParms is ignored (but a value must be included on the command line...use 0)</p>
</td></tr>
<tr><td><code id="filterData_+3A_windowsize">WindowSize</code></td>
<td>
<p>Numeric. Size of the window used to compute the standard deviation of elevations or the minimum/maximum return</p>
</td></tr>
<tr><td><code id="filterData_+3A_outputfile">OutputFile</code></td>
<td>
<p>Character. Name of the output file. If any part of the name includes spaces, include the entire name in double quotation marks.
Must have the extension.</p>
</td></tr>
<tr><td><code id="filterData_+3A_datafile">DataFile</code></td>
<td>
<p>Character. LIDAR data file name or template or name of a text file containing a list of file names (list file must have .txt extension).</p>
</td></tr>
<tr><td><code id="filterData_+3A_switches">switches</code></td>
<td>
<p>Character. Default is NULL. To insert a switch, each switch must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value depending on see switch.
</p>

<ul>
<li><p> /lda - Write output files using FUSION's LDA format when using LAS input files. The default behavior after FUSION version 3.00 is to write data in LAS format when the input data are in LAS format. When using input data in a format other than LAS, sample files are written in LDA format.
</p>
</li>
<li><p> /layers - Output intermediate raster data layers.
</p>
</li>
<li><p> /index - Create FUSION index files for the output file.
</p>
</li>
<li><p> /invert - Inverts the elevations for points so the logic will work for points below ground. Use with outlier2.
</p>
</li>
<li><p> /minsd:# - Minimum standard deviation for points within a comparison window for filtering to take place. Default is 1.0 (same units as
elevation data). This switch is only useful when using the outlier filter.
</p>
</li>
<li><p> /minpts:# - Minimum number of points in the comparison window for filtering to take place. This option can be used with all filters but must specify at least 3 points when used with the outlier filter.
</p>
</li>
<li><p> /minrange:# - Minimum range in elevations within a window for outlier filtering to take place. Default is 150.0 elevation units Used only with the outlier2 filter.
</p>
</li>
<li><p> /mingap:# - Minimum vertical distance that define a gap. Used to isolate points above the majority of points in the filter window. Used only with the outlier2 filter
</p>
</li>
<li><p> /gapratio:# - Proportion of points in window that can be above a vertical gap. Ranges from 0.0 to 1.0 Used only with the outlier2 filter.
</p>
</li>
<li><p> /class:string - Used with LAS format files only. Specifies that only points with classification values listed are to be included in the subsample. Classification values should be separated by a comma e.g. (2,3,4,5) and can range from 0 to 31. If the first character of string is “~”, all classes except those listed will be used.
</p>
</li>
<li><p> /ignoreoverlap - Ignore points with the overlap flag set (LAX V1.4+ format).
</p>
</li>
<li><p> /precision:scaleX,scaleY,scaleZ - Control the scale factor used for X, Y, and Z values in output LAS files. These values will override the values in the source LAS files. There is rarely any need for the scale parameters to be smaller than 0.001.
</p>
</li>
<li><p> /reclass:# - Change the classification code for points identified as outliers and write them to the output file. The optional value is the classification code assigned to the points. Only valid when used with the outlier and outlier2 filters. The code must be between brackets.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>FilterData was developed to help LIDAR data users eliminate outliers from files delivered by vendors. In general, vendors identify outliers (returns above expected elevations for vegetation and structures or returns below the ground surface)
and either use the LAS classification field to label the return as an outlier or delete them from the files delivered to their client.
However, sometimes not all outliers are removed. The presence of unlabeled outliers can cause problems for bare-earth filtering algorithms and vegetation analysis as well as other analyses. FilterData offers a way for the data user to produce “clean” data files for use in subsequent analyses.
<br /> FilterData provides an outlier filter that identifies and removes returns based on the range of observed elevation values in the comparison window. In operation, the outlier filter works by computing the mean elevation and standard deviation of elevations for each cell in the comparison grid.
Then, individual return elevations are compared to range defined as follows:<br />
</p>
<p style="text-align: center;"><code class="reqn">mean elevation ± (FilterParms * ElevationStandardDeviation)</code>
</p>

<p><br /> Only returns with elevations within the range are written to the output file. Generally, using a range of ± 5.0 * Standard deviation and a large window size (100 m) eliminates most outliers. In areas if steep terrain with returns from birds, a range of ± 3 * Standard deviation may produce better results.
The outlier filter can also be used on return files produced using the maximum filter to eliminate high returns from small objects such as transmission towers and lines. Flat areas with no above-ground features can result in a very low standard deviation of the return elevations.
For data files containing such areas, it may be necessary to use the /minsd:# switch to control filtering in cells with small standard deviations. The default is to use a minimum threshold standard deviation of 1.0 (same units as the return elevations). For most areas, this will be sufficient. If you specify a smaller threshold, you may find that all returns within the comparison window are removed.
<br /> FilterData also provides a minimum and maximum classification feature that produces output files that contain only the return with the minimum or maximum elevations for each cell in the comparison grid.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filterData(FilterType = 'outlier2',FilterParms = 3,WindowSize =  5,
OutputFile = 'Z:/filterdata.las',DataFile = 'Z:/datafile.las', switches = '/invert /layers')
</code></pre>

<hr>
<h2 id='XYZ2DTM'>XYZ2DTM</h2><span id='topic+XYZ2DTM'></span>

<h3>Description</h3>

<p>XYZ2DTM converts surface models stored as ACSII XYZ point files into the PLANS DTM format. Input point files include one record for each grid point with the X, Y, and elevation values separated by commas, spaces, or tabs.
In general, this utility is only used when surface models are delivered in this format. FUSION provides the ability to export a PLANS DTM model in XYZ point format but this format is not the most efficient in terms of storage space.
In addition, most GIS packages cannot directly convert this format into a surface model.
They often use the XYZ points as if they were random XYZ data and interpolate a new grid using the point data. XYZ2DTM offers an optional switch to fill void areas by interpolating from surrounding grid elevations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>XYZ2DTM(
  fusion.path = "C:/FUSION/",
  surfacefile,
  xyunits,
  zunits,
  coordsys,
  zone,
  horizdatum,
  vertdatum,
  datafile1,
  datafile2 = NULL,
  switches = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="XYZ2DTM_+3A_fusion.path">fusion.path</code></td>
<td>
<p>Character. By default: C:/FUSION/. Path where the program FUSION is installed.</p>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_surfacefile">surfacefile</code></td>
<td>
<p>is a character.Name for output canopy surface file (stored in PLANS DTM format with .dtm extension).</p>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_xyunits">xyunits</code></td>
<td>
<p>Character. Units for LIDAR data XY:
</p>

<ul>
<li><p> M - for meters.
</p>
</li>
<li><p> F - for feet.
</p>
</li></ul>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_zunits">zunits</code></td>
<td>
<p>Character. Units for LIDAR data elevations:
</p>

<ul>
<li><p> M - for meters.
</p>
</li>
<li><p> F - for feet.
</p>
</li></ul>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_coordsys">coordsys</code></td>
<td>
<p>Numeric. Coordinate system for the canopy model:
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for UTM.
</p>
</li>
<li><p> 2 - for state plane.
</p>
</li></ul>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_zone">zone</code></td>
<td>
<p>Numeric.. Coordinate system zone for the canopy model (0 for unknown).</p>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_horizdatum">horizdatum</code></td>
<td>
<p>is a numeric. Horizontal datum for the canopy model.
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for NAD27.
</p>
</li>
<li><p> 2 -for NAD83.
</p>
</li></ul>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_vertdatum">vertdatum</code></td>
<td>
<p>Character..Vertical datum for the surface
</p>

<ul>
<li><p> 0 - for unknown.
</p>
</li>
<li><p> 1 - for NGVD29.
</p>
</li>
<li><p> 2 -for NAVD88.
</p>
</li>
<li><p> 3 -for GRS80.
</p>
</li></ul>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_datafile1">datafile1</code></td>
<td>
<p>Character. First XYZ point file...may be wildcard or text list file (extension .txt only)...omit other datafile# parameters.
Second XYZ point file.</p>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_datafile2">datafile2</code></td>
<td>
<p>Character.NULL by default. Second XYZ point file.
Several point files can be specified. The limit depends on the length of each file name. When using multiple data files, it is best to use a wildcard for datafile1 or create a text file containing a list of the data files and specifying the list file as datafile1.</p>
</td></tr>
<tr><td><code id="XYZ2DTM_+3A_switches">switches</code></td>
<td>
<p>False as default. To insert a switch, it must have a '/' before of the names. If you want to insert two or more switches, they must be separated by an empty space. When a # is displayed, should be replaced by the desired value (numeric).
</p>

<ul>
<li><p> /csv - Input files are in CSV format, skip first line when reading.
</p>
</li>
<li><p> /fillholes:# - Fill holes (NODATA areas) in the final surface model that are up to # by # cells. Larger holes will not be filled
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>XYZ2DTM scans all data files to determine the extent of the final surface model and the grid cell size. XYZ data files should be ordered in either rows or columns for the cell size detection logic to work correctly.
XYZ2DTM will not work with random XYZ point data. Prior to populating the surface with grid elevations, all grid points are initialized to indicate NODATA (value of -1.0). As XYZ point files are read and processed, grid cell elevations are inserted into the appropriate row/column location. After all XYZ point files have been processed, the model is written using the PLANS DTM file format with floating point elevation values.<br />
When the /fillholes:# switch is specified. Void areas in the final surface are filled by interpolating values from adjacent grid cells. The parameter, #, specifies the largest distance that will be searched for valid point elevations. In operation, the void filling logic searches in eight directions to find valid grid point elevations to use in the interpolation.
If four or more of the directional searches find a valid elevation, the hole is filled using the average of all the values.
</p>


<h3>Value</h3>

<p>No return value. This function return the command prompt running the FUSION command
</p>


<h3>References</h3>

<p>McGaughey, R.J. FUSION/LDV: Software for LIDAR Data Analysis and Visualization. 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>surfacefile&lt;-'Z:/dtmfile.dtm'
datafile1&lt;- 'Z:/datafile1.xyz'
XYZ2DTM(surfacefile = surfacefile,xyunits = 'M',zunits = 'M',
          coordsys = 1,zone = 0, horizdatum = 0, vertdatum = 0,
                    datafile1=datafile1, switches = FALSE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
