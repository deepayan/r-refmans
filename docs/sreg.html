<!DOCTYPE html><html><head><title>Help for package sreg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sreg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AEJapp'>
<p>Replication data for: Iron Deficiency and Schooling Attainment in Peru (Chong et al, 2016)</p></a></li>
<li><a href='#print.sreg'><p>Print <code>sreg</code> Objects</p></a></li>
<li><a href='#sreg'><p>Estimate Average Treatment Effects (ATEs) and Corresponding Standard Errors</p></a></li>
<li><a href='#sreg.rgen'><p>Generate a Pseudo-Random Sample under the Stratified Block Randomization Design</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Stratified Randomized Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimate average treatment effects (ATEs) in stratified randomized experiments. 'sreg' is designed to accommodate scenarios with multiple treatments and cluster-level treatment assignments, and accommodates optimal linear covariate adjustment based on baseline observable characteristics. 'sreg' computes estimators and standard errors based on Bugni, Canay, Shaikh (2018) &lt;<a href="https://doi.org/10.1080%2F01621459.2017.1375934">doi:10.1080/01621459.2017.1375934</a>&gt;; Bugni, Canay, Shaikh, Tabord-Meehan (2024+) &lt;<a href="https://doi.org/10.48550%2FarXiv.2204.08356">doi:10.48550/arXiv.2204.08356</a>&gt;; and Jiang, Linton, Tang, Zhang (2023+) &lt;<a href="https://doi.org/10.48550%2FarXiv.2201.13004">doi:10.48550/arXiv.2201.13004</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, extraDistr, rlang, tidyr, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>haven, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jutrifonov/sreg">https://github.com/jutrifonov/sreg</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jutrifonov/sreg/issues">https://github.com/jutrifonov/sreg/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-24 18:46:10 UTC; trifonovjuri</td>
</tr>
<tr>
<td>Author:</td>
<td>Juri Trifonov [aut, cre, cph],
  Yuehao Bai [aut],
  Azeem Shaikh [aut],
  Max Tabord-Meehan [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Juri Trifonov &lt;jutrifonov@uchicago.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-25 14:30:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='AEJapp'>
Replication data for: Iron Deficiency and Schooling Attainment in Peru (Chong et al, 2016)
</h2><span id='topic+AEJapp'></span>

<h3>Description</h3>

<p>The data is taken from Chong et al. (2016), who study the effect of iron deficiency anemia
(i.e., anemia caused by a lack of iron) on school-age children’s educational attainment and cognitive ability in Peru.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("AEJapp")</code></pre>


<h3>Format</h3>

<p>A data frame with 215 observations on the 62 variables.
</p>


<h3>Source</h3>

<p>Chong, A., Cohen, I., Field, E., Nakasone, E., and Torero, M. (2016). Replication data for: Iron Deficiency and Schooling Attainment in Peru. Nashville, TN: American Economic Association [publisher], 2016. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2019-10-12. <a href="https://doi.org/10.3886/E113624V1">doi:10.3886/E113624V1</a>.
</p>


<h3>References</h3>

<p>Chong, A., Cohen, I., Field, E., Nakasone, E., and Torero, M. (2016). Iron Deficiency and Schooling Attainment in Peru. <em>American Economic Journal: Applied Economics</em>, 8(4), 222–255. <a href="https://doi.org/10.1257/app.20140494">doi:10.1257/app.20140494</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AEJapp)
</code></pre>

<hr>
<h2 id='print.sreg'>Print <code>sreg</code> Objects</h2><span id='topic+print.sreg'></span>

<h3>Description</h3>

<p>Print the summary table of estimation results for <code>sreg</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sreg'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.sreg_+3A_x">x</code></td>
<td>
<p>An object of class <code>sreg</code>.</p>
</td></tr>
<tr><td><code id="print.sreg_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- sreg.rgen(n = 200, tau.vec = c(0.1), n.strata = 4, cluster = TRUE)
Y &lt;- data$Y
S &lt;- data$S
D &lt;- data$D
X &lt;- data.frame("x_1" = data$x_1, "x_2" = data$x_2)
result &lt;- sreg(Y, S, D, G.id = NULL, Ng = NULL, X)
print(result)
</code></pre>

<hr>
<h2 id='sreg'>Estimate Average Treatment Effects (ATEs) and Corresponding Standard Errors</h2><span id='topic+sreg'></span>

<h3>Description</h3>

<p>Estimate the ATE(s) and the corresponding standard error(s) for a (collection of) treatment(s) relative to a control.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sreg(Y, S = NULL, D, G.id = NULL, Ng = NULL, X = NULL, HC1 = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sreg_+3A_y">Y</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of the observed outcomes</p>
</td></tr>
<tr><td><code id="sreg_+3A_s">S</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of strata indicators indexed by <code class="reqn">\{1, 2, 3, \ldots\}</code>;  if <code>NULL</code> then the estimation is performed assuming no stratification</p>
</td></tr>
<tr><td><code id="sreg_+3A_d">D</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of treatments indexed by <code class="reqn">\{0, 1, 2, \ldots\}</code>, where <code class="reqn">\code{D} = 0</code> denotes the control</p>
</td></tr>
<tr><td><code id="sreg_+3A_g.id">G.id</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of cluster indicators; if <code>NULL</code> then estimation is performed assuming treatment is assigned at the individual level</p>
</td></tr>
<tr><td><code id="sreg_+3A_ng">Ng</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of cluster sizes; if <code>NULL</code> then <code>Ng</code> is assumed to be equal to the number of available observations in every cluster</p>
</td></tr>
<tr><td><code id="sreg_+3A_x">X</code></td>
<td>
<p>a <code>matrix/data.frame/tibble</code> with columns representing the covariate values for every observation; if <code>NULL</code> then the estimator without linear adjustments is applied. (Note: <code>sreg</code> cannot use individual-level covariates for covariate adjustment in cluster-randomized experiments. Any individual-level covariates will be aggregated to their cluster-level averages)</p>
</td></tr>
<tr><td><code id="sreg_+3A_hc1">HC1</code></td>
<td>
<p>a <code>TRUE/FALSE</code> logical argument indicating whether the small sample correction should be applied to the variance estimator</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sreg</code> that is a list containing the following elements:
</p>

<ul>
<li> <p><code>tau.hat</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of ATE estimates, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>se.rob</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of standard errors estimates, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>t.stat</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of <code class="reqn">t</code>-statistics, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>p.value</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of corresponding <code class="reqn">p</code>-values, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>CI.left</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of the left bounds of the 95% as. confidence interval
</p>
</li>
<li> <p><code>CI.right</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of the right bounds of the 95% as. confidence interval
</p>
</li>
<li> <p><code>data</code>: an original data of the form <code>data.frame(Y, S, D, G.id, Ng, X)</code>
</p>
</li>
<li> <p><code>lin.adj</code>: a <code>data.frame</code> representing the covariates that were used in implementing linear adjustments
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Authors</strong>:
</p>
<p>Juri Trifonov <a href="mailto:jutrifonov@uchicago.edu">jutrifonov@uchicago.edu</a>
</p>
<p>Yuehao Bai <a href="mailto:yuehao.bai@usc.edu">yuehao.bai@usc.edu</a>
</p>
<p>Azeem Shaikh <a href="mailto:amshaikh@uchicago.edu">amshaikh@uchicago.edu</a>
</p>
<p>Max Tabord-Meehan <a href="mailto:maxtm@uchicago.edu">maxtm@uchicago.edu</a>
</p>
<p><strong>Maintainer</strong>:
</p>
<p>Juri Trifonov <a href="mailto:jutrifonov@uchicago.edu">jutrifonov@uchicago.edu</a>
</p>


<h3>References</h3>

<p>Bugni, F. A., Canay, I. A., and Shaikh, A. M. (2018). Inference Under Covariate-Adaptive Randomization. <em>Journal of the American Statistical Association</em>, 113(524), 1784–1796, <a href="https://doi.org/10.1080/01621459.2017.1375934">doi:10.1080/01621459.2017.1375934</a>.
</p>
<p>Bugni, F., Canay, I., Shaikh, A., and Tabord-Meehan, M. (2024+). Inference for Cluster Randomized Experiments with Non-ignorable Cluster Sizes. <em>Forthcoming in the Journal of Political Economy: Microeconomics</em>, <a href="https://doi.org/10.48550/arXiv.2204.08356">doi:10.48550/arXiv.2204.08356</a>.
</p>
<p>Jiang, L., Linton, O. B., Tang, H., and Zhang, Y. (2023+). Improving Estimation Efficiency via Regression-Adjustment in Covariate-Adaptive Randomizations with Imperfect Compliance. <em>Forthcoming in Review of Economics and Statistics</em>, <a href="https://doi.org/10.48550/arXiv.2204.08356">doi:10.48550/arXiv.2204.08356</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("sreg")
library("dplyr")
library("haven")
### Example 1. Simulated Data.
data &lt;- sreg.rgen(n = 1000, tau.vec = c(0), n.strata = 4, cluster = FALSE)
Y &lt;- data$Y
S &lt;- data$S
D &lt;- data$D
X &lt;- data.frame("x_1" = data$x_1, "x_2" = data$x_2)
result &lt;- sreg(Y, S, D, G.id = NULL, Ng = NULL, X)
print(result)
### Example 2. Empirical Data.
?AEJapp
data("AEJapp")
data &lt;- AEJapp
head(data)
Y &lt;- data$gradesq34
D &lt;- data$treatment
S &lt;- data$class_level
data.clean &lt;- data.frame(Y, D, S)
data.clean &lt;- data.clean %&gt;%
  mutate(D = ifelse(D == 3, 0, D))
Y &lt;- data.clean$Y
D &lt;- data.clean$D
S &lt;- data.clean$S
table(D = data.clean$D, S = data.clean$S)
result &lt;- sreg(Y, S, D)
print(result)
pills &lt;- data$pills_taken
age &lt;- data$age_months
data.clean &lt;- data.frame(Y, D, S, pills, age)
data.clean &lt;- data.clean %&gt;%
  mutate(D = ifelse(D == 3, 0, D))
Y &lt;- data.clean$Y
D &lt;- data.clean$D
S &lt;- data.clean$S
X &lt;- data.frame("pills" = data.clean$pills, "age" = data.clean$age)
result &lt;- sreg(Y, S, D, G.id = NULL, X = X)
print(result)
</code></pre>

<hr>
<h2 id='sreg.rgen'>Generate a Pseudo-Random Sample under the Stratified Block Randomization Design</h2><span id='topic+sreg.rgen'></span>

<h3>Description</h3>

<p>The function generates the observed outcomes, treatment assignments, strata indicators, cluster indicators, cluster sizes, and covariates for estimating the treatment effect within the context of a stratified block randomization design under the covariate-adaptive randomization (CAR).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sreg.rgen(
  n,
  Nmax = 50,
  n.strata,
  tau.vec = c(0),
  gamma.vec = c(0.4, 0.2, 1),
  cluster = TRUE,
  is.cov = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sreg.rgen_+3A_n">n</code></td>
<td>
<p>a total number of observations in a sample</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_nmax">Nmax</code></td>
<td>
<p>a maximum size of generated clusters (maximum number of observations in a cluster)</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_n.strata">n.strata</code></td>
<td>
<p>an integer specifying the number of strata</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_tau.vec">tau.vec</code></td>
<td>
<p>a numeric <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of treatment effects, where <code class="reqn">|\mathcal A|</code> represents the number of treatments</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_gamma.vec">gamma.vec</code></td>
<td>
<p>a numeric <code class="reqn">1 \times 3</code> <code>vector</code> of parameters corresponding to covariates</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_cluster">cluster</code></td>
<td>
<p>a <code>TRUE/FALSE</code> argument indicating whether the dgp should use a cluster-level treatment assignment or individual-level</p>
</td></tr>
<tr><td><code id="sreg.rgen_+3A_is.cov">is.cov</code></td>
<td>
<p>a <code>TRUE/FALSE</code> argument indicating whether the dgp should include covariates or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object that is a 'data.frame' with <code class="reqn">n</code> observations containing the generated values of the following variables:
</p>

<ul>
<li> <p><code>Y</code>: a numeric <code class="reqn">n \times 1</code> <code>vector</code> of observed outcomes
</p>
</li>
<li> <p><code>S</code>: a numeric <code class="reqn">n \times 1</code> <code>vector</code> of strata indicators
</p>
</li>
<li> <p><code>D</code>: a numeric <code class="reqn">n \times 1</code> <code>vector</code> of treatments indexed by <code class="reqn">\{0, 1, 2, \ldots\}</code>, where <code class="reqn">\code{D} = 0</code> denotes the control
</p>
</li>
<li> <p><code>G.id</code>: a numeric <code class="reqn">n \times 1</code> <code>vector</code> of cluster indicators
</p>
</li>
<li> <p><code>X</code>: a <code>data.frame</code> with columns representing the covariate values for every observation
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- sreg.rgen(n = 1000, tau.vec = c(0), n.strata = 4, cluster = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
