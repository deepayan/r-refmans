<!DOCTYPE html><html><head><title>Help for package suggests</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {suggests}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#find_deps'><p>List places where dependencies are used</p></a></li>
<li><a href='#is_installed'><p>Check whether packages are installed</p></a></li>
<li><a href='#need'><p>Declare that packages are needed</p></a></li>
<li><a href='#suggests'><p>suggests: Declare when Suggested Packages are Needed</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Declare when Suggested Packages are Needed</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-07-14</td>
</tr>
<tr>
<td>Description:</td>
<td>By adding dependencies to the "Suggests" field of a package's
    DESCRIPTION file, and then declaring that they are needed within any
    dependent functionality, it is often possible to significantly reduce the
    number of "hard" dependencies required by a package. This package provides
    a minimal way to declare when a suggested package is needed.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/owenjonesuob/suggests">https://github.com/owenjonesuob/suggests</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/owenjonesuob/suggests/issues">https://github.com/owenjonesuob/suggests/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-07 17:07:51 UTC; Owen</td>
</tr>
<tr>
<td>Author:</td>
<td>Owen Jones <a href="https://orcid.org/0000-0002-8410-9585"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Owen Jones &lt;owenjonesuob@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-08 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='find_deps'>List places where dependencies are used</h2><span id='topic+find_deps'></span>

<h3>Description</h3>

<p>A quick-and-dirty diagnostic tool to find dependency usage within top-level
expressions (e.g. declared functions) in R scripts within a development
package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_deps(path = ".", threshold = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_deps_+3A_path">path</code></td>
<td>
<p>Path to the base directory of a package.</p>
</td></tr>
<tr><td><code id="find_deps_+3A_threshold">threshold</code></td>
<td>
<p>Only report on dependencies used in fewer than this many
top-level expressions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This might be useful for package developers hoping to use <code><a href="#topic+need">need()</a></code>
in their package, and looking for good candidates for dependencies which
could be moved from <code>Imports</code> to <code>Suggests</code> in the <code>DESCRIPTION</code> file.
</p>
<p>Dependencies are searched for in two ways:
</p>

<ul>
<li> <p><code>import()</code> and <code>importFrom()</code> statements in the package's <code>NAMESPACE</code>
file, such as those created by <code style="white-space: pre;">&#8288;@import&#8288;</code> and <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> tags if
creating package documentation with roxygen2
</p>
</li>
<li><p> Functions called by using <code>::</code> or <code>:::</code> to access a dependency's namespace
directly
</p>
</li></ul>

<p>This approach isn't perfect, but it should capture most dependency uses.
</p>


<h3>Value</h3>

<p>A data frame, with one row per distinct top-level expression where a
package is used. Packages used in the fewest places are listed first.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  find_deps(system.file("demopkg", package = "suggests"))

</code></pre>

<hr>
<h2 id='is_installed'>Check whether packages are installed</h2><span id='topic+is_installed'></span>

<h3>Description</h3>

<p>Initially, <code><a href="utils.html#topic+packageDescription">utils::packageVersion()</a></code> is used to try to retrieve a version
from a package's <code>DESCRIPTION</code> file. This is a fast method, but doesn't
categorically guarantee that the package is actually available to use.
</p>
<p>If <code>load = TRUE</code>, then <code><a href="base.html#topic+ns-load">base::requireNamespace()</a></code> is used to try to load the
namespace of each package in turn. This is much slower, but is the closest we
can get to ensuring that the package is genuinely usable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_installed(pkgs, load = FALSE, lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_installed_+3A_pkgs">pkgs</code></td>
<td>
<p>A character vector of package names. You can check for a minimum
version by appending <code style="white-space: pre;">&#8288;&gt;=[version]&#8288;</code> to a package name - see Examples.</p>
</td></tr>
<tr><td><code id="is_installed_+3A_load">load</code></td>
<td>
<p>Whether to make sure packages can be loaded - significantly
slower, but gives an extra level of certainty.</p>
</td></tr>
<tr><td><code id="is_installed_+3A_lib.loc">lib.loc</code></td>
<td>
<p>Passed to <code><a href="utils.html#topic+packageDescription">utils::packageVersion()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector of the same length as <code>pkgs</code>, where each element is
<code>TRUE</code> if the package is installed, and <code>FALSE</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  is_installed("base")
  is_installed(c("base", "utils"))

  is_installed("base&gt;=3.0.0")
  is_installed(c(
    "base&gt;=3.0.0",
    "utils"
  ))

</code></pre>

<hr>
<h2 id='need'>Declare that packages are needed</h2><span id='topic+need'></span>

<h3>Description</h3>

<p>Declare that one or more packages are required by subsequent functionality;
and if they're missing, either prompt the user to install them, or exit with
an informative error message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>need(
  ...,
  msg = NULL,
  install_cmd = NULL,
  ask = interactive(),
  load = FALSE,
  lib.loc = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="need_+3A_...">...</code></td>
<td>
<p>Names of required packages, as character strings. You can require
a minimum version by appending <code style="white-space: pre;">&#8288;&gt;=[version]&#8288;</code> to a package name - see
Examples.</p>
</td></tr>
<tr><td><code id="need_+3A_msg">msg</code></td>
<td>
<p>Custom message to display; if <code>NULL</code>, an informative one will be
constructed.</p>
</td></tr>
<tr><td><code id="need_+3A_install_cmd">install_cmd</code></td>
<td>
<p>Installation command to run, as a call (i.e. probably
wrapped with <code><a href="base.html#topic+quote">quote()</a></code> or <code><a href="base.html#topic+substitute">substitute()</a></code>). If <code>NULL</code>, <code><a href="utils.html#topic+install.packages">install.packages()</a></code>
will be used for package installation.</p>
</td></tr>
<tr><td><code id="need_+3A_ask">ask</code></td>
<td>
<p>Whether to give the user the option of installing the required
packages immediately.</p>
</td></tr>
<tr><td><code id="need_+3A_load">load</code></td>
<td>
<p>Whether to make sure packages can be loaded - significantly
slower, but gives an extra level of certainty.</p>
</td></tr>
<tr><td><code id="need_+3A_lib.loc">lib.loc</code></td>
<td>
<p>Passed to <code><a href="utils.html#topic+packageDescription">utils::packageVersion()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, any package names from <code>...</code> which were installed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  need("dplyr")
  need("dplyr", "tidyr")

  # All unnamed arguments will be combined into one list of package names
  shared_deps &lt;- c("dplyr", "tidyr")
  need(shared_deps, "stringr") # same as need("dplyr", "tidyr", "stringr")

  # You can require a minimum version for some or all packages
  need("dplyr&gt;=1.0.0", "tidyr")


  # Typically you'll want to use need() within a function
  read_data &lt;- function(path, clean_names = FALSE) {

    # Call need() as early as possible, to avoid wasted work
    if (isTRUE(clean_names))
      suggests::need("janitor")

    output &lt;- utils::read.csv(path)

    if (isTRUE(clean_names))
      output &lt;- janitor::clean_names(output)

    output
  }


  # You can provide a custom message and/or installation command if needed
  need(
    "dplyr",
    msg = "We need the development version of dplyr, for now!",
    install_cmd = quote(remotes::install_github("tidyverse/dplyr"))
  )


## End(Not run)

</code></pre>

<hr>
<h2 id='suggests'>suggests: Declare when Suggested Packages are Needed</h2><span id='topic+suggests'></span><span id='topic+suggests-package'></span>

<h3>Description</h3>

<p>By adding dependencies to the &quot;Suggests&quot; field of a package's
DESCRIPTION file, and then declaring that they are needed within any
dependent functionality, you can often significantly reduce the number of
&quot;hard&quot; dependencies (i.e. Depends/Imports) required by your package.
</p>
<p>suggests aims to make that workflow as minimal and painless as possible,
primarily via the <code>need()</code> function, which provides a lightweight, simple,
speedy way to prompt your users to install missing suggested packages.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Owen Jones <a href="mailto:owenjonesuob@gmail.com">owenjonesuob@gmail.com</a> (<a href="https://orcid.org/0000-0002-8410-9585">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/owenjonesuob/suggests">https://github.com/owenjonesuob/suggests</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/owenjonesuob/suggests/issues">https://github.com/owenjonesuob/suggests/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
