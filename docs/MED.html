<!DOCTYPE html><html lang="en"><head><title>Help for package MED</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MED}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MED-package'>
<p>Nonparametric estimation of natural mediation effects by tilted balancing.</p></a></li>
<li><a href='#MED'>
<p>Estimate the Natural Indirect and Direct Effects</p></a></li>
<li><a href='#summary.MED'>
<p>Summarizing output of study.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Mediation by Tilted Balancing</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Gary Chan &lt;kcgchan@u.washington.edu&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gary Chan &lt;kcgchan@u.washington.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Nonparametric estimation and inference for natural direct and indirect effects by Chan, Imai, Yam and Zhang (2016) &lt;<a href="https://doi.org/10.48550/arXiv.1601.03501">doi:10.48550/arXiv.1601.03501</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-03-22 05:21:45 UTC; garychan</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-03-22 11:50:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='MED-package'>
Nonparametric estimation of natural mediation effects by tilted balancing.
</h2><span id='topic+MED-package'></span>

<h3>Description</h3>

<p>This package provides a user-friendly interface for nonparametric efficient inference of natural mediation effects effects for observational data. The package provides point estimates for average treatment effects, natural direct effects and natural indirect effects.  The package also allows inference by consistent variance estimators.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> MED</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2015-02-09</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The package includes the following functions:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+MED">MED</a></code>: </td><td style="text-align: left;"> Estimate the Natural Indirect and Direct Effects </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+summary.MED">summary.MED</a></code>: </td><td style="text-align: left;"> <code>summary</code> method for class <code>"MED"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Gary Chan, based on the ATE package developed together with Asad Haris.
</p>
<p>Maintainer: Gary Chan &lt;kcgchan@uw.edu&gt;
</p>


<h3>References</h3>

<p>Chan, K. C. G., Imai, K, Yam, S. C. P. and Zhang, Z. (2016). &quot;Efficient Nonpmarametric Estimation of Causal Mediation Effects.&quot;, under review.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MED">MED</a></code>
</p>

<hr>
<h2 id='MED'>
Estimate the Natural Indirect and Direct Effects
</h2><span id='topic+MED'></span>

<h3>Description</h3>

<p>The main function for estimating the natural direct and indirect effects. This function creates an <code>MED</code> object which can be used as inputs for generic S3 <code>summary</code> function. This function uses a covariate balancing method which creates weights for each subject, without a need to specify a propensity score, mediator regression or outcome regression models. The main function depends on a Newton-Raphson algorithm with backtracking. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MED (Y, Ti, M, X, theta = 0, verbose = FALSE,
    PIE = FALSE, max.iter = 100, tol = 1e-10, 
    backtrack = TRUE, backtrack.alpha = 0.3,
    backtrack.beta = 0.5, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MED_+3A_y">Y</code></td>
<td>

<p>The response vector of length <code class="reqn">n</code>. This has to be a numeric vector.
</p>
</td></tr>
<tr><td><code id="MED_+3A_ti">Ti</code></td>
<td>

<p>The vector of treatment assignments of length <code class="reqn">n</code>. Must be coded as <code class="reqn">\{0,1</code> 0,1.
</p>
</td></tr>
<tr><td><code id="MED_+3A_m">M</code></td>
<td>

<p>A <code class="reqn">n\times q</code>-matrix of mediators <code>M</code>.  It can be a vector (a single mediator).	
</p>
</td></tr>
<tr><td><code id="MED_+3A_x">X</code></td>
<td>

<p>A <code class="reqn">n\times p</code>-matrix of covariates <code>X</code> to be matched. This matrix does not need to include an intercept.
</p>
</td></tr>
<tr><td><code id="MED_+3A_theta">theta</code></td>
<td>

<p>A real scalar parameter for the Cressie-Read family of objective functions.  The default is <code class="reqn">\theta=0</code> (exponential tilting).  Other popular examples are <code class="reqn">\theta=-1</code> (empirical likelihood) and <code class="reqn">\theta=1</code> (quadratic loss).
</p>
</td></tr>
<tr><td><code id="MED_+3A_verbose">verbose</code></td>
<td>

<p>A logical value indicating whether to print the progress of the function. <code>FALSE</code> by default.
</p>
</td></tr>
<tr><td><code id="MED_+3A_pie">PIE</code></td>
<td>

<p>A logical value indicating whether to estimate the pure indirect effect.
</p>
</td></tr>
<tr><td><code id="MED_+3A_max.iter">max.iter</code></td>
<td>

<p>The maximum number of iterations for the Newton-Raphson methods. For most problems (e.g. with well-behaved functions <code class="reqn">\rho</code> and <code class="reqn">u</code>) convergence of Newton-Raphson should be fairly quick.
</p>
</td></tr>
<tr><td><code id="MED_+3A_tol">tol</code></td>
<td>

<p>The absolute tolerance used to determine a stopping criteria for the Newton-Raphson algorithm.
</p>
</td></tr>
<tr><td><code id="MED_+3A_backtrack">backtrack</code></td>
<td>

<p>A logical value indicating whether to use backtracking in the Newton-Raphson algorithm.  
</p>
</td></tr>
<tr><td><code id="MED_+3A_backtrack.alpha">backtrack.alpha</code></td>
<td>

<p>A scalar parameter for backtracking with <code class="reqn">\alpha \in (0,0.5)</code>.
</p>
</td></tr>
<tr><td><code id="MED_+3A_backtrack.beta">backtrack.beta</code></td>
<td>

<p>A scalar parameter for backtracking with <code class="reqn">\beta \in (0,1)</code>.
</p>
</td></tr>
<tr><td><code id="MED_+3A_...">...</code></td>
<td>

<p>Additional arguments.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function reruns an object of type &quot;MED&quot;, a list with the following elements
</p>
<table role = "presentation">
<tr><td><code>est</code></td>
<td>

<p>The vector of point estimates for the average treatment effect. For a binary treatment it also contains the average difference of treatment effects. 
</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>

<p>The estimated variance covariance matrix for the estimates of the treatment effects for each treatment group.
</p>
</td></tr>
<tr><td><code>lam</code></td>
<td>

<p>The resulting solution of the main optimization problems, <code class="reqn">\hat{\lambda}</code>, as described in Chan et al.(2015). In the case of a simple, binary treatment study, the object has <code>lam.p</code> and <code>lam.q</code> and when <code>ATT = TRUE</code>, we only have <code>lam.q</code>. For a multiple treatment study design we have <code>lam.mat</code>, a matrix with each <code class="reqn">\hat{\lambda}</code> corresponding to each treatment arm.
</p>
</td></tr>
<tr><td><code>weights</code></td>
<td>

<p>The weights obtained by the balancing covariate method for each treatment group. In the case of <code>ATT = TRUE</code>, we only have weights for the untreated. For binary treatment the list would contain either <code>weights.q</code> or <code>weights.p</code> or both. For multiple treatment effect the list contains a <code class="reqn">J\times n</code> matrix <code>weights.mat</code>.
</p>
</td></tr>
<tr><td><code>gp</code></td>
<td>

<p>A string specifying the type of study design. For binary treatment effect with <code>ATT = FALSE</code> is denoted by group &quot;simple&quot;. With <code>ATT = TRUE</code> we have &quot;ATT&quot; and finally &quot;MT&quot; is for multiple treatment arms.
</p>
</td></tr>
<tr><td><code>conv</code></td>
<td>

<p>A logical value indicating convergence of Newton-Raphson algorithm.
</p>
</td></tr>
<tr><td><code>X</code>, <code>Y</code>, <code>Ti</code></td>
<td>

<p>The data which was used for estimation.
</p>
</td></tr>
<tr><td><code>rho</code>, <code>rho1</code>, <code>rho2</code></td>
<td>

<p>The Cressie-Read functions <code class="reqn">\rho</code> used for estimation along with the first and second derivatives. 
</p>
</td></tr>
<tr><td><code>FUNu</code></td>
<td>

<p>A function that append a vector of constants to the covariates.  Required to make sure that the weights sum to 1 in each group.
</p>
</td></tr>
<tr><td><code>J</code></td>
<td>

<p>A scalar indicating the number of treatment arms.
</p>
</td></tr>
<tr><td><code>K</code></td>
<td>

<p>A scalar indicating the one plus the dimension of the range space of X.
</p>
</td></tr>
<tr><td><code>call</code></td>
<td>

<p>The matched call.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gary Chan, based on package ATE developed with Asad Haris.
</p>


<h3>References</h3>

<p>Chan, K. C. G., Imai, K, Yam, S. C. P. and Zhang, Z. (2016). &quot;Efficient Nonpmarametric Estimation of Causal Mediation Effects.&quot;, under review.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.MED">summary.MED</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(MED)
#binary treatment and binary mediator

set.seed(25)
n &lt;- 200
Z &lt;- matrix(rnorm(4*n),ncol=4,nrow=n)
prop.e &lt;- 1 / (1 + exp(Z[,1] - 0.5 * Z[,2] + 0.25*Z[,3] + 0.1 * Z[,4]))
treat &lt;- rbinom(n, 1, prop.e)
prop.m &lt;- 1 / (1 + exp(-(0.5 - Z[,1] + 0.5 * Z[,2] - 0.9 *Z [,3] + Z[,4] - 1.5 * treat)))
M &lt;- rbinom(n, 1, prop.m)
Y &lt;- 200 + treat + M + 27.4*Z[,1] + 13.7*Z[,2] +
          13.7*Z[,3] + 13.7*Z[,4] + rnorm(n)
X &lt;- cbind(exp(Z[,1])/2,Z[,2]/(1+exp(Z[,1])),
          (Z[,1]*Z[,3]/25+0.6)^3,(Z[,2]+Z[,4]+20)^2)

#estimation of natural mediation effecs
fit1&lt;-MED(Y,treat,M,X)
summary(fit1)
</code></pre>

<hr>
<h2 id='summary.MED'>
Summarizing output of study.
</h2><span id='topic+summary.MED'></span><span id='topic+print.summary.MED'></span>

<h3>Description</h3>

<p><code>summary</code> method for class <code>"MED"</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MED'
summary(object, ...)

## S3 method for class 'summary.MED'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.MED_+3A_object">object</code></td>
<td>

<p>An object of class <code>"MED"</code>, usually a result of a call 
to <code><a href="#topic+MED">MED</a></code>.
</p>
</td></tr>
<tr><td><code id="summary.MED_+3A_x">x</code></td>
<td>

<p>An object of class <code>"summary.MED"</code>, usually a result of 
a call to <code><a href="#topic+summary.MED">summary.MED</a></code>.
</p>
</td></tr>
<tr><td><code id="summary.MED_+3A_...">...</code></td>
<td>

<p>Further arguments passed to or from methods.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>print.summary.MED</code> prints a simplified output similar to <code><a href="stats.html#topic+print.summary.lm">print.summary.lm</a></code>. The resulting table provides the point estimates, estimated standard errors, 95% Wald confidence intervals, the Z-statistic and the P-values for a Z-test.
</p>


<h3>Value</h3>

<p>The function <code>summary.MED</code> returns a list with the following components
</p>
<table role = "presentation">
<tr><td><code>Estimate</code></td>
<td>

<p>A matrix with point estimates along with standard errors, confidence intervals etc. This is the matrix users see with the <code>print.summary.RIPW</code> function.
</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>

<p>The variance-covariance matrix of the point estimates.
</p>
</td></tr>
<tr><td><code>Conv</code></td>
<td>

<p>The convergence result of the <code>object</code>.
</p>
</td></tr>
<tr><td><code>weights</code></td>
<td>

<p>The weights for each subject in each treatment arm. These are same as the <code>weight</code> component of the <code>"RIPW" object</code>.
</p>
</td></tr>
<tr><td><code>call</code></td>
<td>

<p>The <code>call</code> passed on as an argument of the function which is equivalent to <code>object$call</code>.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gary Chan
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MED">MED</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(MED)
#binary treatment and binary mediator

set.seed(25)
n &lt;- 200
Z &lt;- matrix(rnorm(4*n),ncol=4,nrow=n)
prop.e &lt;- 1 / (1 + exp(Z[,1] - 0.5 * Z[,2] + 0.25*Z[,3] + 0.1 * Z[,4]))
treat &lt;- rbinom(n, 1, prop.e)
prop.m &lt;- 1 / (1 + exp(-(0.5 - Z[,1] + 0.5 * Z[,2] - 0.9 *Z [,3] + Z[,4] - 1.5 * treat)))
M &lt;- rbinom(n, 1, prop.m)
Y &lt;- 200 + treat + M + 27.4*Z[,1] + 13.7*Z[,2] +
          13.7*Z[,3] + 13.7*Z[,4] + rnorm(n)
X &lt;- cbind(exp(Z[,1])/2,Z[,2]/(1+exp(Z[,1])),
          (Z[,1]*Z[,3]/25+0.6)^3,(Z[,2]+Z[,4]+20)^2)

#estimation of natural mediation effecs
fit1&lt;-MED(Y,treat,M,X)
summary(fit1)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
