<!DOCTYPE html><html lang="en"><head><title>Help for package FAOSTAT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {FAOSTAT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#FAOSTAT-package'><p>A complementary package to the FAOSTAT database and the</p>
Statistical Yearbook of the Food and Agricultural Organization of
the United Nations.</a></li>
<li><a href='#Aggregation'><p>Compute Aggregates</p></a></li>
<li><a href='#cache_data'><p>Cache files read in by the API</p></a></li>
<li><a href='#change_case'><p>Change case of column names</p></a></li>
<li><a href='#chConstruct'><p>Construct year to year change</p></a></li>
<li><a href='#check_country_overlap'><p>This function perform some check on the data</p></a></li>
<li><a href='#chgr'><p>Absolute change between the year</p></a></li>
<li><a href='#CHMT'><p>This function avoids double counting of China.</p></a></li>
<li><a href='#constructSYB'><p>Construct/Creat new variable.</p></a></li>
<li><a href='#download_faostat_bulk'><p>Download bulk data from the faostat website</p>
https://www.fao.org/faostat/en/#data</a></li>
<li><a href='#ebind'><p>A function to bind the different entity level.</p></a></li>
<li><a href='#FAOcountryProfile'><p>Country profile</p></a></li>
<li><a href='#FAOmetaTable'><p>The search tree for FAOSTAT3</p></a></li>
<li><a href='#FAOregionProfile'><p>Regional profile</p></a></li>
<li><a href='#fillCountryCode'><p>A function to get country code when not available in data.</p></a></li>
<li><a href='#geogr'><p>Geometric growth rate</p></a></li>
<li><a href='#get_fao'><p>REST functions to connect to FAO</p></a></li>
<li><a href='#getWDI'><p>Access to World Bank WDI API</p></a></li>
<li><a href='#getWDImetaData'><p>World Bank Indicator Metadata</p></a></li>
<li><a href='#getWDItoSYB'><p>Access to World Bank WDI API</p></a></li>
<li><a href='#grConstruct'><p>Construct Growth rate</p></a></li>
<li><a href='#indConstruct'><p>Construct indices</p></a></li>
<li><a href='#lsgr'><p>Least squares growth rate</p></a></li>
<li><a href='#mergeSYB'><p>Function for merging data from different source.</p></a></li>
<li><a href='#overlap'><p>This function checks whether there are overlapping between the</p>
transitional countries.</a></li>
<li><a href='#printLab'><p>Print labels</p></a></li>
<li><a href='#read_dataset_dimension'><p>Examine dimensions of a dataset</p></a></li>
<li><a href='#read_fao'><p>Access FAOSTAT API</p></a></li>
<li><a href='#scaleUnit'><p>A function to standardize the unit</p></a></li>
<li><a href='#search_dataset'><p>Search FAOSTAT dataset_codes, datasets, elements, indicators, and items</p></a></li>
<li><a href='#shConstruct'><p>Construct share variable</p></a></li>
<li><a href='#translate_countrycodes'><p>A function to translate between different country coding systems</p></a></li>
<li><a href='#translateUnit'><p>Function to translate multipliers</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download Data from the FAOSTAT Database</td>
</tr>
<tr>
<td>Version:</td>
<td>2.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-05-20</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael C. J., Markus Gesmann, Filippo Gheri, Paul Rougieux &lt;paul.rougieux@gmail.com&gt;, Sebastian Campbell</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul Rougieux &lt;paul.rougieux@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Download Data from the FAOSTAT Database of the Food and Agricultural Organization (FAO) of the United Nations.
    A list of functions to download statistics from FAOSTAT (database of the FAO <a href="https://www.fao.org/faostat/">https://www.fao.org/faostat/</a>) 
    and WDI (database of the World Bank <a href="https://data.worldbank.org/">https://data.worldbank.org/</a>), and to perform some harmonization operations.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gitlab.com/paulrougieux/faostatpackage">https://gitlab.com/paulrougieux/faostatpackage</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.com/paulrougieux/faostatpackage/-/issues">https://gitlab.com/paulrougieux/faostatpackage/-/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>RJSONIO (&ge; 0.96-0), plyr (&ge; 1.7.1), data.table (&ge; 1.8.2),
MASS (&ge; 7.3-22), classInt (&ge; 0.1-19), labeling (&ge; 0.1), httr
(&ge; 1.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>ZipData:</td>
<td>no</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-22 12:12:36 UTC; paul</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-22 12:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='FAOSTAT-package'>A complementary package to the FAOSTAT database and the
Statistical Yearbook of the Food and Agricultural Organization of
the United Nations.</h2><span id='topic+FAOSTAT'></span><span id='topic+FAOSTAT-package'></span>

<h3>Description</h3>

<p>Download Data from the FAOSTAT Database of the Food and Agricultural Organization (FAO) of the United Nations. A list of functions to download statistics from FAOSTAT (database of the FAO <a href="https://www.fao.org/faostat/">https://www.fao.org/faostat/</a>) and WDI (database of the World Bank <a href="https://data.worldbank.org/">https://data.worldbank.org/</a>), and to perform some harmonization operations.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://gitlab.com/paulrougieux/faostatpackage">https://gitlab.com/paulrougieux/faostatpackage</a>
</p>
</li>
<li><p> Report bugs at <a href="https://gitlab.com/paulrougieux/faostatpackage/-/issues">https://gitlab.com/paulrougieux/faostatpackage/-/issues</a>
</p>
</li></ul>


<hr>
<h2 id='Aggregation'>Compute Aggregates</h2><span id='topic+Aggregation'></span>

<h3>Description</h3>

<p>The function takes a relational data frame and computes the aggregation
based on the relation specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Aggregation(
  data,
  aggVar,
  weightVar = rep(NA, length(aggVar)),
  year = "Year",
  relationDF = FAOcountryProfile[, c("FAOST_CODE", "M49_FAOST_CODE")],
  aggMethod = rep("sum", length(aggVar)),
  applyRules = TRUE,
  keepUnspecified = TRUE,
  unspecifiedCode = 0,
  thresholdProp = rep(0.65, length(aggVar))
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Aggregation_+3A_data">data</code></td>
<td>
<p>The data frame containing the country level data.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_aggvar">aggVar</code></td>
<td>
<p>The vector of names of the variables to be
aggregated.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_weightvar">weightVar</code></td>
<td>
<p>The vector of names of the variables to be used
as weighting when the aggregation method is weighted.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_year">year</code></td>
<td>
<p>The column containing the time information.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_relationdf">relationDF</code></td>
<td>
<p>A relational data frame which specifies the
territory and the mother country. At least one column must have 
a corrispondent variable name in the dataset.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_aggmethod">aggMethod</code></td>
<td>
<p>Can be a single method for all data or a vector
specifying different method for each variable. The method can be 
&quot;sum&quot;, &quot;mean&quot;, &quot;weighted.mean&quot;.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_applyrules">applyRules</code></td>
<td>
<p>Logical, specifies whether the 
<code>thresholdProp</code> rule must be applied or not.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_keepunspecified">keepUnspecified</code></td>
<td>
<p>Whether countries with unspecified region
should be aggregated into an &quot;Unspecified&quot; group or simply
drop. Default to create the new group.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_unspecifiedcode">unspecifiedCode</code></td>
<td>
<p>The output code of the unspecified group.</p>
</td></tr>
<tr><td><code id="Aggregation_+3A_thresholdprop">thresholdProp</code></td>
<td>
<p>The vector of the missing threshold for the 
aggregation rule to be applied. The default is set to only compute 
aggregation if there are more than 65 percent of data available (0.65).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The length of <code>aggVar</code>, <code>aggMethod</code>, <code>weightVar</code>,
<code>thresholdProp</code> must be the same.
</p>
<p>Aggregation should not be computed if insufficient
countries have reported data. This corresponds to the argument
<code>thresholdProp</code> which specifies the percentage which of
country must report data (both for the variable to be aggregated and
the weighting variable).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## example.df = data.frame(FAOST_CODE = rep(c(1, 2, 3), 2),
##                        Year = rep(c(2010, 2011), c(3, 3)),
##                        value = rep(c(1, 2, 3), 2),
##                        weight = rep(c(0.3, 0.7, 1), 2))

## Lets aggregate country 1 and 2 into one country and keep country
## 3 seperate.
## relation.df = data.frame(FAOST_CODE = 1:3, NEW_CODE = c(1, 1, 2))

</code></pre>

<hr>
<h2 id='cache_data'>Cache files read in by the API</h2><span id='topic+cache_data'></span>

<h3>Description</h3>

<p>Cache files read in by the API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cache_data(name, data, reset = FALSE, environment = .FAOSTATenv)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cache_data_+3A_name">name</code></td>
<td>
<p>character. Key to which data is bound</p>
</td></tr>
<tr><td><code id="cache_data_+3A_data">data</code></td>
<td>
<p>object. Data to be cached</p>
</td></tr>
<tr><td><code id="cache_data_+3A_reset">reset</code></td>
<td>
<p>logical. Should the cache be replaced with new data?</p>
</td></tr>
<tr><td><code id="cache_data_+3A_environment">environment</code></td>
<td>
<p>environment. .FAOSTATenv by default</p>
</td></tr>
</table>

<hr>
<h2 id='change_case'>Change case of column names</h2><span id='topic+change_case'></span>

<h3>Description</h3>

<p>Columns from FAOSTAT frequently have parentheses and other non-alphanumeric
characters. This suite of functions seeks to give control over these names
for easier data analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change_case(
  old_names,
  new_case = c("make.names", "unsanitised", "unsanitized", "snake_case"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="change_case_+3A_old_names">old_names</code></td>
<td>
<p>character. Vector of the names to be changed</p>
</td></tr>
<tr><td><code id="change_case_+3A_new_case">new_case</code></td>
<td>
<p>character. Choice of new names:
</p>

<ul>
<li><p> make_names - (default) use the <a href="base.html#topic+make.names">make.names</a> function in R to sanitise names
</p>
</li>
<li><p> unsanitised/unsanitized - Return names as they are
</p>
</li>
<li><p> snake_case - Names are converted to lowercase and separators are replaced with underscores
</p>
</li></ul>
</td></tr>
<tr><td><code id="change_case_+3A_...">...</code></td>
<td>
<p>extra arguments to pass to sanitisation function (only works for <a href="base.html#topic+make.names">make.names</a>)</p>
</td></tr>
</table>

<hr>
<h2 id='chConstruct'>Construct year to year change</h2><span id='topic+chConstruct'></span>

<h3>Description</h3>

<p>A function for constructing year to year change
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chConstruct(
  data,
  origVar,
  country = "FAOST_CODE",
  year = "Year",
  newVarName = NA,
  n = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chConstruct_+3A_data">data</code></td>
<td>
<p>The data frame containing the data</p>
</td></tr>
<tr><td><code id="chConstruct_+3A_origvar">origVar</code></td>
<td>
<p>The variable in which the year to year change is to
be calculated</p>
</td></tr>
<tr><td><code id="chConstruct_+3A_country">country</code></td>
<td>
<p>The column representing the index of country.</p>
</td></tr>
<tr><td><code id="chConstruct_+3A_year">year</code></td>
<td>
<p>The column represing the index of year.</p>
</td></tr>
<tr><td><code id="chConstruct_+3A_newvarname">newVarName</code></td>
<td>
<p>The name assigned to the new variable, if
missing then .CH will be appended.</p>
</td></tr>
<tr><td><code id="chConstruct_+3A_n">n</code></td>
<td>
<p>The period for the change rate to be calculated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the computed year to year change
rate.
</p>

<hr>
<h2 id='check_country_overlap'>This function perform some check on the data</h2><span id='topic+check_country_overlap'></span>

<h3>Description</h3>

<p>The function only works for FAOST_CODE. If the country coding
system is not in FAOST_CODE then use the translateCountryCode
function to translate it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_country_overlap(
  var,
  year = "Year",
  data,
  type = c("overlap", "multiChina"),
  take = c("simpleCheck", "takeNew", "takeOld", "complete")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_country_overlap_+3A_var">var</code></td>
<td>
<p>The variable to be checked.</p>
</td></tr>
<tr><td><code id="check_country_overlap_+3A_year">year</code></td>
<td>
<p>The column which index the time.</p>
</td></tr>
<tr><td><code id="check_country_overlap_+3A_data">data</code></td>
<td>
<p>The data frame.</p>
</td></tr>
<tr><td><code id="check_country_overlap_+3A_type">type</code></td>
<td>
<p>The type of check.</p>
</td></tr>
<tr><td><code id="check_country_overlap_+3A_take">take</code></td>
<td>
<p>The type of check/replacement to be done in case of
type equals to overlap.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>test.df = 
   data.frame(FAOST_CODE = rep(c(51,167,199), each = 3), 
  Year = rep(c(1990:1992), 3),
  Value = c(c(3,4,4), c(2,2,2), c(1,2,NA)))
check_country_overlap(var = "Value", data = test.df, type = "overlap", take = "simpleCheck")
check_country_overlap(var = "Value", data = test.df, type = "overlap", take = "takeNew")
check_country_overlap(var = "Value", data = test.df, type = "overlap", take = "takeOld")
check_country_overlap(var = "Value", data = test.df, type = "overlap", take = "complete")
</code></pre>

<hr>
<h2 id='chgr'>Absolute change between the year</h2><span id='topic+chgr'></span>

<h3>Description</h3>

<p>Function for generating the n-period absolute change
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chgr(x, n = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chgr_+3A_x">x</code></td>
<td>
<p>The time series for the change to be calculated.</p>
</td></tr>
<tr><td><code id="chgr_+3A_n">n</code></td>
<td>
<p>The period for the growth to be calculated over.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to ensure the change calculated is reliable, the
following rule are applied.
</p>

<ol>
<li><p> 50% of the data must be present.
</p>
</li>
<li><p> The length of the time series must be greater than n
</p>
</li></ol>

<p>Otherwise the growth will not be computed.
</p>


<h3>Value</h3>

<p>The n-period change of the time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test.ts = abs(rnorm(100))
chgr(test.ts, 1)
chgr(test.ts, 3)
chgr(test.ts, 10)
</code></pre>

<hr>
<h2 id='CHMT'>This function avoids double counting of China.</h2><span id='topic+CHMT'></span>

<h3>Description</h3>

<p>This function should only be used when performing aggregations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CHMT(var, data, year = "Year")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CHMT_+3A_var">var</code></td>
<td>
<p>The variables that require to be sanitized.</p>
</td></tr>
<tr><td><code id="CHMT_+3A_data">data</code></td>
<td>
<p>The data frame which contains the data</p>
</td></tr>
<tr><td><code id="CHMT_+3A_year">year</code></td>
<td>
<p>The column which correspond to the year.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We decide to use the smaller subsets in the regional level because
weighting variable may not exist for other variables for the
larger subsets.
</p>
<p>The function only work for FAOST_CODE, if the country coding
system is not in FAOST_CODE then use the translateCountryCode
function to translate it.
</p>

<hr>
<h2 id='constructSYB'>Construct/Creat new variable.</h2><span id='topic+constructSYB'></span>

<h3>Description</h3>

<p>A function used to construct new variables from existing variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructSYB(
  data,
  origVar1,
  origVar2,
  newVarName = NA,
  constructType = c("share", "growth", "change", "index"),
  grFreq = 1,
  grType = c("ls", "geo"),
  baseYear = 2000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="constructSYB_+3A_data">data</code></td>
<td>
<p>The data frame containing the raw variable</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_origvar1">origVar1</code></td>
<td>
<p>The variable name to be used in construction, refer
to Details for more information and useage.</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_origvar2">origVar2</code></td>
<td>
<p>The variable name to be used in construction, refer
to Details for more information and useage.</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_newvarname">newVarName</code></td>
<td>
<p>The name assigned to the new variable, if missing
then .SC/.SH/.GR/.CH will be appended depending on the type of
construction</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_constructtype">constructType</code></td>
<td>
<p>The type of construction, refer to Details
for more information.</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_grfreq">grFreq</code></td>
<td>
<p>The frequency for the growth rate to be computed.</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_grtype">grType</code></td>
<td>
<p>The method for the growth to be calculated, currently
supports least squares and geometric.</p>
</td></tr>
<tr><td><code id="constructSYB_+3A_baseyear">baseYear</code></td>
<td>
<p>The base year to be used for constructing index.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently two types of construction are supported, either share or
growth rate computation.
</p>
<p>Share can be a share of total or share of another variable depending
on whether an additional variable is supplied or not.
</p>


<h3>Value</h3>

<p>A data frame containing both the original data frame and the
processed data and also a list indicating whether the construction
passed or failed.
</p>

<hr>
<h2 id='download_faostat_bulk'>Download bulk data from the faostat website
https://www.fao.org/faostat/en/#data</h2><span id='topic+download_faostat_bulk'></span><span id='topic+read_faostat_bulk'></span><span id='topic+get_faostat_bulk'></span><span id='topic+read_bulk_metadata'></span>

<h3>Description</h3>


<ul>
<li> <p><code>get_faostat_bulk()</code> loads the given data set code and returns a data frame.
</p>
</li>
<li> <p><code>download_faostat_bulk()</code> loads data from the given url and saves it to a compressed zip file.
</p>
</li>
<li> <p><code>read_faostat_bulk()</code> Reads the compressed .csv .zip file into a data frame.
More precisely it unzips the archive. 
Reads the main csv file within the archive.
The main file has the same name as the name of the archive. 
Note: the zip archive might also contain metadata files about Flags and Symbols.
</p>
</li></ul>

<p>In general you should load the data with the function <code>get_faostat_bulk()</code> and a dataset code.
The other functions are lower level functions that you can use as an alternative. 
You can also explore the datasets and find their download URLs
on the FAOSTAT website. Explore the website to find out the data you are interested in
<a href="https://www.fao.org/faostat/en/#data">https://www.fao.org/faostat/en/#data</a>
Copy a &quot;bulk download&quot; url, 
for example they are located in the right menu on the &quot;crops&quot; page
<a href="https://www.fao.org/faostat/en/#data/QC">https://www.fao.org/faostat/en/#data/QC</a>
Note that faostat bulk files with names ending with &quot;normalized&quot; are in long format 
with a year column instead of one column for each year.
The long format is preferable for data analysis and this is the format 
returned by the  <code>get_faostat_bulk()</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_faostat_bulk(url_bulk, data_folder = ".")

read_faostat_bulk(zip_file_name, encoding = "latin1", rename_element = TRUE)

get_faostat_bulk(code, data_folder = tempdir(), subset = "All Data Normalized")

read_bulk_metadata(dataset_code)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_faostat_bulk_+3A_url_bulk">url_bulk</code></td>
<td>
<p>character url of the faostat bulk zip file to download</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_data_folder">data_folder</code></td>
<td>
<p>character path of the local folder where to download the data</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_zip_file_name">zip_file_name</code></td>
<td>
<p>character name of the zip file to read</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_encoding">encoding</code></td>
<td>
<p>parameter passed to 'read.csv'.</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_rename_element">rename_element</code></td>
<td>
<p>boolean Rename the element column to snake case. To
facilitate the use of elements as column names later when the data frame
gets reshaped to a wider format. Replace non alphanumeric characters by
underscores.</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_code">code</code></td>
<td>
<p>character. Dataset code</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_subset">subset</code></td>
<td>
<p>character. Use <code>read_bulk_metadata</code>. Request all data,
normalised data or region</p>
</td></tr>
<tr><td><code id="download_faostat_bulk_+3A_dataset_code">dataset_code</code></td>
<td>
<p>character. Dataset code</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of FAOSTAT data
</p>
<p>data frame of FAOSTAT data
</p>
<p>data frame of FAOSTAT data
</p>


<h3>Author(s)</h3>

<p>Paul Rougieux
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Create a folder to store the data
data_folder &lt;- "data_raw"
dir.create(data_folder)

# Load crop production data
crop_production &lt;- get_faostat_bulk(code = "QCL", data_folder = data_folder)

# Cache the file i.e. save the data frame in the serialized RDS format for faster load time later.
saveRDS(crop_production, "data_raw/crop_production_e_all_data.rds")
# Now you can load your local version of the data from the RDS file
crop_production &lt;- readRDS("data_raw/crop_production_e_all_data.rds")


# Use the lower level functions to download zip files, 
# then read the zip files in separate function calls.
# In this example, to avoid a warning about "examples lines wider than 100 characters"
# the url is split in two parts: a common part 'url_bulk_site' and a .zip file name part.
# In practice you can enter the full url directly as the `url_bulk`  argument.
# Notice also that I have choosen to load global data in long format (normalized).
url_bulk_site &lt;- "https://fenixservices.fao.org/faostat/static/bulkdownloads"
url_crops &lt;- file.path(url_bulk_site, "crop_production_E_All_Data_(Normalized).zip")
url_forestry &lt;- file.path(url_bulk_site, "Forestry_E_All_Data_(Normalized).zip")
# Download the files
download_faostat_bulk(url_bulk = url_forestry, data_folder = data_folder)
download_faostat_bulk(url_bulk = url_crops, data_folder = data_folder)

# Read the files and assign them to data frames 
crop_production &lt;- read_faostat_bulk("data_raw/crop_production_E_All_Data_(Normalized).zip")
forestry &lt;- read_faostat_bulk("data_raw/Forestry_E_All_Data_(Normalized).zip")
 
# Save the data frame in the serialized RDS format for fast reuse later.
saveRDS(crop_production, "data_raw/crop_production_e_all_data.rds")
saveRDS(forestry,"data_raw/forestry_e_all_data.rds")

## End(Not run)
</code></pre>

<hr>
<h2 id='ebind'>A function to bind the different entity level.</h2><span id='topic+ebind'></span>

<h3>Description</h3>

<p>A data frame is chosen over the list is solely for the purpose of
transition to ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebind(territory = NULL, subregion = NULL, region = NULL, world = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebind_+3A_territory">territory</code></td>
<td>
<p>The data frame which contains the
territory/country level data</p>
</td></tr>
<tr><td><code id="ebind_+3A_subregion">subregion</code></td>
<td>
<p>The sub aggregated region aggregate</p>
</td></tr>
<tr><td><code id="ebind_+3A_region">region</code></td>
<td>
<p>The macro region aggregate</p>
</td></tr>
<tr><td><code id="ebind_+3A_world">world</code></td>
<td>
<p>The world aggregate</p>
</td></tr>
</table>

<hr>
<h2 id='FAOcountryProfile'>Country profile</h2><span id='topic+FAOcountryProfile'></span>

<h3>Description</h3>

<p>The country profile containing the codes and names of countries.
</p>

<hr>
<h2 id='FAOmetaTable'>The search tree for FAOSTAT3</h2><span id='topic+FAOmetaTable'></span>

<h3>Description</h3>

<p>A table containing the relationship between the domain, element,
item codes for downloading data from the FAOSTAT API.
</p>

<hr>
<h2 id='FAOregionProfile'>Regional profile</h2><span id='topic+FAOregionProfile'></span>

<h3>Description</h3>

<p>Region profile containing the codes, names and regional
classifications of countries.
</p>

<hr>
<h2 id='fillCountryCode'>A function to get country code when not available in data.</h2><span id='topic+fillCountryCode'></span>

<h3>Description</h3>

<p>This function can be useful when a dataset provided does not have
a country code available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fillCountryCode(country, data, outCode = "FAOST_CODE")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fillCountryCode_+3A_country">country</code></td>
<td>
<p>The column name of the data which contains
the country name</p>
</td></tr>
<tr><td><code id="fillCountryCode_+3A_data">data</code></td>
<td>
<p>The data frame to be matched</p>
</td></tr>
<tr><td><code id="fillCountryCode_+3A_outcode">outCode</code></td>
<td>
<p>The output country code system, defaulted to FAO standard.</p>
</td></tr>
</table>

<hr>
<h2 id='geogr'>Geometric growth rate</h2><span id='topic+geogr'></span>

<h3>Description</h3>

<p>Function for generating the n-period rolling geometric growth rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geogr(x, n = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geogr_+3A_x">x</code></td>
<td>
<p>The time series for the growth rate to be calculated.</p>
</td></tr>
<tr><td><code id="geogr_+3A_n">n</code></td>
<td>
<p>The period for the growth to be calculated over.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to ensure the growth rate calculated is reliable, the
following rule are applied.
</p>

<ol>
<li><p> 50% of the data must be present.
</p>
</li>
<li><p> The length of the time series must be greater than n
</p>
</li></ol>

<p>Otherwise the growth will not be computed.
</p>


<h3>Value</h3>

<p>The n-period geometric growth rate of the time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test.ts = abs(rnorm(100))
geogr(test.ts, 1)
geogr(test.ts, 3)
geogr(test.ts, 10)
</code></pre>

<hr>
<h2 id='get_fao'>REST functions to connect to FAO</h2><span id='topic+get_fao'></span>

<h3>Description</h3>

<p>REST functions to connect to FAO
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_fao(
  endpoint,
  params = list(),
  language = c("en", "fr", "es", "NA"),
  base_url = "https://faostatservices.fao.org/api/v1"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_fao_+3A_endpoint">endpoint</code></td>
<td>
<p>character. Endpoint for FAO API</p>
</td></tr>
<tr><td><code id="get_fao_+3A_params">params</code></td>
<td>
<p>list of query parameters</p>
</td></tr>
<tr><td><code id="get_fao_+3A_language">language</code></td>
<td>
<p>character. One of the UN languages supported by FAOSTAT</p>
</td></tr>
<tr><td><code id="get_fao_+3A_base_url">base_url</code></td>
<td>
<p>character. Base URL for FAOSTAT API</p>
</td></tr>
</table>

<hr>
<h2 id='getWDI'>Access to World Bank WDI API</h2><span id='topic+getWDI'></span>

<h3>Description</h3>

<p>A function to extract data from the World Bank API
</p>
<p>Please refer to <a href="https://data.worldbank.org/">https://data.worldbank.org/</a> for any
difference between the country code system. Further details on World
Bank classification and methodology are available on that website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWDI(
  indicator = "SP.POP.TOTL",
  name = NULL,
  startDate = 1960,
  endDate = format(Sys.Date(), "%Y"),
  printURL = FALSE,
  outputFormat = "wide"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWDI_+3A_indicator">indicator</code></td>
<td>
<p>The World Bank official indicator name.</p>
</td></tr>
<tr><td><code id="getWDI_+3A_name">name</code></td>
<td>
<p>The new name to be used in the column.</p>
</td></tr>
<tr><td><code id="getWDI_+3A_startdate">startDate</code></td>
<td>
<p>The start date for the data to begin</p>
</td></tr>
<tr><td><code id="getWDI_+3A_enddate">endDate</code></td>
<td>
<p>The end date.</p>
</td></tr>
<tr><td><code id="getWDI_+3A_printurl">printURL</code></td>
<td>
<p>Whether the url link for the data should be printed</p>
</td></tr>
<tr><td><code id="getWDI_+3A_outputformat">outputFormat</code></td>
<td>
<p>The format of the data, can be 'long' or 'wide'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sometime after 2016, there was a change in the api according to 
<a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation">https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation</a>
&quot;Version 2 (V2) of the Indicators API has been released and replaces V1 of the API. 
V1 API calls will no longer be supported. To use the V2 API, you must place v2 in the call. 
</p>
<p>Original (2011) source by Markus Gesmann:
<a href="https://lamages.blogspot.it/2011/09/setting-initial-view-of-motion-chart-in.html">https://lamages.blogspot.it/2011/09/setting-initial-view-of-motion-chart-in.html</a>
Also available at 
<a href="https://www.magesblog.com/post/2011-09-25-accessing-and-plotting-world-bank-data/">https://www.magesblog.com/post/2011-09-25-accessing-and-plotting-world-bank-data/</a>
</p>


<h3>Value</h3>

<p>A data frame containing the desired World Bank Indicator
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getFAO">getFAO</a></code>, <code><a href="#topic+getWDItoSYB">getWDItoSYB</a></code>
</p>
<p>and the WBI package <a href="https://cran.r-project.org/package=WDI">https://cran.r-project.org/package=WDI</a> for an implementation with many more features.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## pop.df = getWDI()
</code></pre>

<hr>
<h2 id='getWDImetaData'>World Bank Indicator Metadata</h2><span id='topic+getWDImetaData'></span>

<h3>Description</h3>

<p>A function to extract the definition and the meta data from the
World Bank API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWDImetaData(
  indicator,
  printMetaData = FALSE,
  saveMetaData = FALSE,
  saveName = "worldBankMetaData"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWDImetaData_+3A_indicator">indicator</code></td>
<td>
<p>The World Bank official indicator name.</p>
</td></tr>
<tr><td><code id="getWDImetaData_+3A_printmetadata">printMetaData</code></td>
<td>
<p>logical, print out the meta data information</p>
</td></tr>
<tr><td><code id="getWDImetaData_+3A_savemetadata">saveMetaData</code></td>
<td>
<p>logical, whether meta data should be saved as a
local csv file.</p>
</td></tr>
<tr><td><code id="getWDImetaData_+3A_savename">saveName</code></td>
<td>
<p>The name of the file for the meta data to save to.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## pop.df = getWDImetaData("SP.POP.TOTL",
##                         printMetaData = TRUE, saveMetaData = TRUE)

</code></pre>

<hr>
<h2 id='getWDItoSYB'>Access to World Bank WDI API</h2><span id='topic+getWDItoSYB'></span>

<h3>Description</h3>

<p>The function downloads data from the World Bank API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWDItoSYB(
  indicator = "SP.POP.0014.TO.ZS",
  name = NULL,
  startDate = 1960,
  endDate = format(Sys.Date(), "%Y"),
  printURL = FALSE,
  getMetaData = TRUE,
  printMetaData = FALSE,
  saveMetaData = FALSE,
  outputFormat = c("wide", "long")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWDItoSYB_+3A_indicator">indicator</code></td>
<td>
<p>The World Bank official indicator name.</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_name">name</code></td>
<td>
<p>The new name to be used in the column.</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_startdate">startDate</code></td>
<td>
<p>The start date for the data to begin</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_enddate">endDate</code></td>
<td>
<p>The end date.</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_printurl">printURL</code></td>
<td>
<p>Whether the url link for the data should be printed</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_getmetadata">getMetaData</code></td>
<td>
<p>Whether the data definition and the meta data
should be downloaded as well.</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_printmetadata">printMetaData</code></td>
<td>
<p>logical, print out the meta data information</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_savemetadata">saveMetaData</code></td>
<td>
<p>logical, whether meta data should be saved as a
local csv file</p>
</td></tr>
<tr><td><code id="getWDItoSYB_+3A_outputformat">outputFormat</code></td>
<td>
<p>The format of the data, can be 'long' or 'wide'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the following elements
</p>

<dl>
<dt>data</dt><dd><p>The country level data</p>
</dd>
<dt>aggregates</dt><dd><p>The aggregates provided by the World Bank</p>
</dd>
<dt>metaData</dt><dd><p>The metaData associated with the data</p>
</dd>
<dt>results</dt><dd><p>The status of the download, whether success/failed</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+getWDI">getWDI</a></code>, <code><a href="#topic+getFAO">getFAO</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## pop.df = getWDItoSYB(name = "total_population",
##                      indicator = "SP.POP.TOTL")


</code></pre>

<hr>
<h2 id='grConstruct'>Construct Growth rate</h2><span id='topic+grConstruct'></span>

<h3>Description</h3>

<p>A function for constructing growth rate variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grConstruct(data, origVar, newVarName = NA, type = c("geo", "ls", "ch"), n = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grConstruct_+3A_data">data</code></td>
<td>
<p>The data frame containing the data</p>
</td></tr>
<tr><td><code id="grConstruct_+3A_origvar">origVar</code></td>
<td>
<p>The variable in which the growth is to be calculated</p>
</td></tr>
<tr><td><code id="grConstruct_+3A_newvarname">newVarName</code></td>
<td>
<p>The name assigned to the new variable, if missing
then .SC/.SH/.GR will be appended depending on the type of
construction.</p>
</td></tr>
<tr><td><code id="grConstruct_+3A_type">type</code></td>
<td>
<p>The type of growth rate, can be least squares or
geometric</p>
</td></tr>
<tr><td><code id="grConstruct_+3A_n">n</code></td>
<td>
<p>The period for the growth rate to be calculated (Refer to
the lsgr or the geogr functions.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the computed growth rate.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test.df2 = data.frame(FAOST_CODE = rep(c(1, 5000), each = 5),
                       Year = rep(1990:1994, 2),
                       a = rep(1:5, 2), b = rep(1:5, 2))
grConstruct(test.df2, origVar = "a", type = "geo", n = 1)
grConstruct(test.df2, origVar = "a", type = "geo", n = 3)
grConstruct(test.df2, origVar = "a", type = "geo", n = 5)
</code></pre>

<hr>
<h2 id='indConstruct'>Construct indices</h2><span id='topic+indConstruct'></span>

<h3>Description</h3>

<p>A function for constructing indices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>indConstruct(data, origVar, newVarName = NA, baseYear = 2000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="indConstruct_+3A_data">data</code></td>
<td>
<p>The data frame containing the data</p>
</td></tr>
<tr><td><code id="indConstruct_+3A_origvar">origVar</code></td>
<td>
<p>The variable in which the indices is to be computed</p>
</td></tr>
<tr><td><code id="indConstruct_+3A_newvarname">newVarName</code></td>
<td>
<p>The name assigned to the new variable, if missing
then .SC/.SH/.GR/.CH/.IND will be appended depending on the type of
construction.</p>
</td></tr>
<tr><td><code id="indConstruct_+3A_baseyear">baseYear</code></td>
<td>
<p>The year which will serve as the base</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The indice
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test.df = data.frame(FAOST_CODE = rep(1, 100), Year = 1901:2000,
                      test = 1:100)
indConstruct(test.df, origVar = "test", baseYear = 1950)

</code></pre>

<hr>
<h2 id='lsgr'>Least squares growth rate</h2><span id='topic+lsgr'></span>

<h3>Description</h3>

<p>Function for generating the n-period rolling least squares growth
rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lsgr(x, n = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lsgr_+3A_x">x</code></td>
<td>
<p>The time series for the growth rate to be calculated</p>
</td></tr>
<tr><td><code id="lsgr_+3A_n">n</code></td>
<td>
<p>The period for the growth to be calculated over.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing values are ommited in the regression. (Will need to check
this.)
</p>
<p>WONTFIX (Michael): There is still some error associated with this
function, will need to investigate further. Will need a rule for
this, when the fluctuation is large and data are sufficient then
take the lsgr, otherwise the geogr.
</p>
<p>In order to ensure the growth rate calculated is reliable, the
following rule are applied.
</p>

<ol>
<li><p> 50% of the data must be present.
</p>
</li>
<li><p> The length of the time series must be greater than n.
</p>
</li></ol>

<p>Otherwise the growth will not be computed.
</p>


<h3>Value</h3>

<p>The n-period least squares growth rate of the time series
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test.ts = abs(rnorm(100))
lsgr(test.ts, 1)
lsgr(test.ts, 3)
lsgr(test.ts, 10)

</code></pre>

<hr>
<h2 id='mergeSYB'>Function for merging data from different source.</h2><span id='topic+mergeSYB'></span>

<h3>Description</h3>

<p>This function searches for supported country system and translate
the data to allow for join.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mergeSYB(x, y, outCode = "FAOST_CODE", all = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mergeSYB_+3A_x">x</code></td>
<td>
<p>data frames, or objects to be coerced to one.</p>
</td></tr>
<tr><td><code id="mergeSYB_+3A_y">y</code></td>
<td>
<p>data frames, or objects to be coerced to one.</p>
</td></tr>
<tr><td><code id="mergeSYB_+3A_outcode">outCode</code></td>
<td>
<p>The country code system to be used to join the
different sources.</p>
</td></tr>
<tr><td><code id="mergeSYB_+3A_all">all</code></td>
<td>
<p>Same as the merge function, defaulted to an outer join.</p>
</td></tr>
<tr><td><code id="mergeSYB_+3A_...">...</code></td>
<td>
<p>Arguments to be passed on to the merge function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The names of the data to be merged has to be the same as the
FAOcountryProfile code name.
</p>

<hr>
<h2 id='overlap'>This function checks whether there are overlapping between the
transitional countries.</h2><span id='topic+overlap'></span>

<h3>Description</h3>

<p>This function checks whether there are overlapping between the
transitional countries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overlap(old, new, var, year = "Year", data, take)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="overlap_+3A_old">old</code></td>
<td>
<p>The FAOST_CODE of the old countries</p>
</td></tr>
<tr><td><code id="overlap_+3A_new">new</code></td>
<td>
<p>The FAOST_CODE of the new countries</p>
</td></tr>
<tr><td><code id="overlap_+3A_var">var</code></td>
<td>
<p>The variable to be checked</p>
</td></tr>
<tr><td><code id="overlap_+3A_year">year</code></td>
<td>
<p>The column which index the time.</p>
</td></tr>
<tr><td><code id="overlap_+3A_data">data</code></td>
<td>
<p>The data frame</p>
</td></tr>
<tr><td><code id="overlap_+3A_take">take</code></td>
<td>
<p>The type of check/replacement to be done.</p>
</td></tr>
</table>

<hr>
<h2 id='printLab'>Print labels</h2><span id='topic+printLab'></span>

<h3>Description</h3>

<p>A function to print standardised formatted labels without having
messy codes in the functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printLab(label, span = FALSE, width = getOption("width"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="printLab_+3A_label">label</code></td>
<td>
<p>The label to be printed</p>
</td></tr>
<tr><td><code id="printLab_+3A_span">span</code></td>
<td>
<p>Whether the dash should span the whole width of the
screen(80 characters)</p>
</td></tr>
<tr><td><code id="printLab_+3A_width">width</code></td>
<td>
<p>The width of the screen.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The formatted print
</p>

<hr>
<h2 id='read_dataset_dimension'>Examine dimensions of a dataset</h2><span id='topic+read_dataset_dimension'></span><span id='topic+read_dimension_metadata'></span>

<h3>Description</h3>

<p>Lists the dimensions of a dataset including ids and labels. These can be used
to query dataset dimension names and the codes therein. They can also be used
to access groups, flags, units and the glossary
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dataset_dimension(dataset_code)

read_dimension_metadata(dataset_code, dimension_code)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_dataset_dimension_+3A_dataset_code">dataset_code</code></td>
<td>
<p>character. Dataset as obtained from the code column of
<a href="#topic+search_dataset">search_dataset</a></p>
</td></tr>
<tr><td><code id="read_dataset_dimension_+3A_dimension_code">dimension_code</code></td>
<td>
<p>character. Dimensions as obtained from <code>read_dataset_dimensions</code></p>
</td></tr>
</table>

<hr>
<h2 id='read_fao'>Access FAOSTAT API</h2><span id='topic+read_fao'></span><span id='topic+getFAO'></span>

<h3>Description</h3>

<p>Uses the same functionality as the web interface to pull data from the
FAOSTAT API. Contains most of its parameters. Currently only works for
datasets that have area, item, element and year. Values for Chinese countries
are not yet deduplicated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_fao(
  area_codes,
  element_codes,
  item_codes,
  year_codes,
  area_format = c("M49", "FAO", "ISO2", "ISO3"),
  item_format = c("CPC", "FAO"),
  dataset = "RL",
  metadata_cols = c("codes", "units", "flags", "notes"),
  clean_format = c("make.names", "unsanitised", "unsanitized", "snake_case"),
  include_na = FALSE,
  language = c("en", "fr", "es")
)

getFAO(
  area_codes,
  element_codes,
  item_codes,
  year_codes,
  area_format = c("M49", "FAO", "ISO2", "ISO3"),
  item_format = c("CPC", "FAO"),
  dataset = "RL",
  metadata_cols = c("codes", "units", "flags", "notes"),
  clean_format = c("make.names", "unsanitised", "unsanitized", "snake_case"),
  include_na = FALSE,
  language = c("en", "fr", "es")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_fao_+3A_area_codes">area_codes</code></td>
<td>
<p>character. FAOSTAT area codes</p>
</td></tr>
<tr><td><code id="read_fao_+3A_element_codes">element_codes</code></td>
<td>
<p>character. FAOSTAT element codes</p>
</td></tr>
<tr><td><code id="read_fao_+3A_item_codes">item_codes</code></td>
<td>
<p>character. FAOSTAT item codes</p>
</td></tr>
<tr><td><code id="read_fao_+3A_year_codes">year_codes</code></td>
<td>
<p>character. Vector of desired years</p>
</td></tr>
<tr><td><code id="read_fao_+3A_area_format">area_format</code></td>
<td>
<p>character. Desired area code type in output (input still
needs to use FAOSTAT codes)</p>
</td></tr>
<tr><td><code id="read_fao_+3A_item_format">item_format</code></td>
<td>
<p>character. Item code</p>
</td></tr>
<tr><td><code id="read_fao_+3A_dataset">dataset</code></td>
<td>
<p>character. FAO dataset desired, e.g. RL, FBS</p>
</td></tr>
<tr><td><code id="read_fao_+3A_metadata_cols">metadata_cols</code></td>
<td>
<p>character. Metadata columns to include in output</p>
</td></tr>
<tr><td><code id="read_fao_+3A_clean_format">clean_format</code></td>
<td>
<p>character/function. Whether to clean columns. Either one
of the formats described in [change_case] or a formatting function</p>
</td></tr>
<tr><td><code id="read_fao_+3A_include_na">include_na</code></td>
<td>
<p>logical. Whether to include NAs for combinations of
dimensions with no data</p>
</td></tr>
<tr><td><code id="read_fao_+3A_language">language</code></td>
<td>
<p>character. 2 letter language code for output labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame in long format (wide not yet supported). Contains
attributes for the URL and parameters used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# Get data for Cropland (6620) Area (5110) in Antigua and Barbuda (8) in 2017
df = read_fao(area_codes = "8", element_codes = "5110", item_codes = "6620", 
year_codes = "2017")
# Load cropland area for a range of year
df = read_fao(area_codes = "106", element_codes = "5110", item_codes = "6620", 
year_codes = 2010:2020)

# Find which country codes are available
metadata_area &lt;- read_dimension_metadata("RL", "area")
# Find which items are available
metadata_item &lt;- read_dimension_metadata("RL", "item")
# Find which elements are available
metadata_element &lt;- read_dimension_metadata("RL", "element")


## End(Not run)

</code></pre>

<hr>
<h2 id='scaleUnit'>A function to standardize the unit</h2><span id='topic+scaleUnit'></span>

<h3>Description</h3>

<p>The function standardize the data to the desirable unit when the
multiplier vector is supplied. For example per 1000 people is
scaled to per person by supplying a multiplier of 1000.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scaleUnit(df, multiplier)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scaleUnit_+3A_df">df</code></td>
<td>
<p>The data frame containing the data to be scale</p>
</td></tr>
<tr><td><code id="scaleUnit_+3A_multiplier">multiplier</code></td>
<td>
<p>The named vector with the multiplier to be
scaled. The name is mandatory in order for the function to identify
the variable in the data frame. A data.frame can also be supplied
with the first column being the name and the second being the
numeric multiplier.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Create the data frame
test.df = data.frame(FAOST_CODE = 1:5, Year = 1995:1999,
  var1 = 1:5, var2 = 5:1)

## Create the named vector for scaling
multiplier = c(1, 10)
names(multiplier) = c("var1", "var2")

## Scale the data
scaleUnit(test.df, multiplier = multiplier)
</code></pre>

<hr>
<h2 id='search_dataset'>Search FAOSTAT dataset_codes, datasets, elements, indicators, and items</h2><span id='topic+search_dataset'></span><span id='topic+FAOsearch'></span>

<h3>Description</h3>

<p>Get full list of datasets from the FAOSTAT database with the Code, dataset
name and updates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_dataset(dataset_code, dataset_label, latest = TRUE, reset_cache = FALSE)

FAOsearch(dataset_code, dataset_label, latest = TRUE, reset_cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="search_dataset_+3A_dataset_code">dataset_code</code></td>
<td>
<p>character. Code of desired datasets, listed as 'code' in
output.</p>
</td></tr>
<tr><td><code id="search_dataset_+3A_dataset_label">dataset_label</code></td>
<td>
<p>character. Name of the datasets, listed as 'label' in the output
data frame. Can take regular expressions.</p>
</td></tr>
<tr><td><code id="search_dataset_+3A_latest">latest</code></td>
<td>
<p>logical. Sort list by latest updates</p>
</td></tr>
<tr><td><code id="search_dataset_+3A_reset_cache">reset_cache</code></td>
<td>
<p>logical. By default, data is saved after a first run and
reused. Setting this to true causes the function to pull data from FAO
again</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the columns: code, label, date_update, note_update,
release_current, state_current, year_current, release_next, state_next,
year_next
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Find information about all datasets
fao_metadata &lt;- search_dataset()
# Find information about forestry datasets
search_dataset(dataset_code="FO")
# Find information about datasets whose titles contain the word "Flows"
search_dataset(dataset_label="Flows")

## End(Not run)

</code></pre>

<hr>
<h2 id='shConstruct'>Construct share variable</h2><span id='topic+shConstruct'></span>

<h3>Description</h3>

<p>A function for constructing the share of a variable of an aggregated
variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shConstruct(data, totVar, shareVar, newVarName = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shConstruct_+3A_data">data</code></td>
<td>
<p>The data frame containing both the share variable and
the aggregated variable</p>
</td></tr>
<tr><td><code id="shConstruct_+3A_totvar">totVar</code></td>
<td>
<p>The aggregated variable.</p>
</td></tr>
<tr><td><code id="shConstruct_+3A_sharevar">shareVar</code></td>
<td>
<p>The subset of the aggregated variable which to be
divided by.</p>
</td></tr>
<tr><td><code id="shConstruct_+3A_newvarname">newVarName</code></td>
<td>
<p>The name assigned to the new variable, if missing
then .SC/.SH/.GR will be appended depending on the type of
construction</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The share of a variable can be share of the World (if additional
variable were not supplied) or share of another variable (per Capita
if population was supplied).
</p>


<h3>Value</h3>

<p>A data frame with the new constructed variable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Total variables provided, scale by totVar
test.df = data.frame(FAOST_CODE = 1, Year = 1990:1994, a = 1:5, b = 1:5)
shConstruct(data = test.df, totVar = "a", shareVar = "b")

## Total variables not provided, scale by world aggregate.
test.df2 = data.frame(FAOST_CODE = rep(c(1, 5000), each = 5),
                       Year = rep(1990:1994, 2),
                       a = rep(1:5, 2), b = rep(1:5, 2))
shConstruct(data = test.df2, totVar = NA, shareVar = "b")
</code></pre>

<hr>
<h2 id='translate_countrycodes'>A function to translate between different country coding systems</h2><span id='topic+translate_countrycodes'></span><span id='topic+translateCountryCode'></span>

<h3>Description</h3>

<p>The function translate any country code scheme to another if both are in the
are among the types present in the FAO API. If you require other codes or
conversion of country names to codes, consider the <code>countrycodes</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translate_countrycodes(
  data,
  from = c("FAO", "M49", "ISO2", "ISO3"),
  to = c("M49", "FAO", "ISO2", "ISO3", "name"),
  oldCode,
  reset_cache = FALSE
)

translateCountryCode(
  data,
  from = c("FAO", "M49", "ISO2", "ISO3"),
  to = c("M49", "FAO", "ISO2", "ISO3", "name"),
  oldCode,
  reset_cache = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="translate_countrycodes_+3A_data">data</code></td>
<td>
<p>The data frame</p>
</td></tr>
<tr><td><code id="translate_countrycodes_+3A_from">from</code></td>
<td>
<p>The name of the old coding system</p>
</td></tr>
<tr><td><code id="translate_countrycodes_+3A_to">to</code></td>
<td>
<p>The name of the new coding system</p>
</td></tr>
<tr><td><code id="translate_countrycodes_+3A_oldcode">oldCode</code></td>
<td>
<p>The column name of the old country coding scheme</p>
</td></tr>
<tr><td><code id="translate_countrycodes_+3A_reset_cache">reset_cache</code></td>
<td>
<p>logical. Whether to pull data from FAOSTAT directly
instead of caching</p>
</td></tr>
</table>

<hr>
<h2 id='translateUnit'>Function to translate multipliers</h2><span id='topic+translateUnit'></span>

<h3>Description</h3>

<p>This function translates number to character name or vice versa
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translateUnit(vec)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="translateUnit_+3A_vec">vec</code></td>
<td>
<p>The vector containing name or number to be translated</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Create numeric vector
myUnit = c(1000, 1e6, 1000, 1e9, 1e9, 1e12)

## Translate numeric to character
myUnit2 = translateUnit(myUnit)
myUnit2

## Now translate back
translateUnit(myUnit2)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
