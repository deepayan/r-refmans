<!DOCTYPE html><html><head><title>Help for package CodelistGenerator</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CodelistGenerator}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CodelistGenerator-package'><p>CodelistGenerator: Identify Relevant Clinical Codes and Evaluate Their Use</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#achillesCodeUse'><p>Summarise code use from achilles counts</p></a></li>
<li><a href='#codesFromCohort'><p>Get concept ids from a provided path to cohort json files</p></a></li>
<li><a href='#codesFromConceptSet'><p>Get concept ids from a provided path to json files</p></a></li>
<li><a href='#codesInUse'><p>Get codes used in the database</p></a></li>
<li><a href='#compareCodelists'><p>Compare two codelists</p></a></li>
<li><a href='#findOrphanCodes'><p>Find orphan codes related to a codelist</p></a></li>
<li><a href='#getATCCodes'><p>Get descendant codes for ATC levels</p></a></li>
<li><a href='#getCandidateCodes'><p>Generate candidate codelist for the OMOP CDM</p></a></li>
<li><a href='#getConceptClassId'><p>getConceptClassId</p></a></li>
<li><a href='#getDescendants'><p>getDescendants</p></a></li>
<li><a href='#getDomains'><p>getDomains</p></a></li>
<li><a href='#getDoseForm'><p>getDoseForm</p></a></li>
<li><a href='#getDrugIngredientCodes'><p>Get descendant codes for drug ingredients</p></a></li>
<li><a href='#getICD10StandardCodes'><p>Get corresponding standard codes for ICD-10 chapters and sub-chapters</p></a></li>
<li><a href='#getMappings'><p>Show mappings from non-standard vocabularies to standard</p></a></li>
<li><a href='#getVocabularies'><p>getVocabularies</p></a></li>
<li><a href='#getVocabVersion'><p>getVocabVersion</p></a></li>
<li><a href='#mockVocabRef'><p>Generate example vocabulary database</p></a></li>
<li><a href='#restrictToCodesInUse'><p>Filter a codelist to keep only the codes used in the database</p></a></li>
<li><a href='#sourceCodesInUse'><p>Get source codes used in the database</p></a></li>
<li><a href='#summariseCodeUse'><p>Summarise code use in patient-level data</p></a></li>
<li><a href='#summariseCohortCodeUse'><p>Summarise code use among a cohort in the cdm reference</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Identify Relevant Clinical Codes and Evaluate Their Use</td>
</tr>
<tr>
<td>Version:</td>
<td>2.2.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Generate a candidate code list for the Observational Medical Outcomes Partnership (OMOP) common data model based on string matching. For a given search strategy, a candidate code list will be returned.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>CDMConnector (&ge; 1.3.0), checkmate (&ge; 2.0.0), DBI (&ge; 1.1.0),
duckdb, dplyr (&ge; 1.1.0), magrittr (&ge; 2.0.0), omopgenerics (&ge;
0.0.2), rlang (&ge; 1.0.0), glue (&ge; 1.5.0), stringr (&ge; 1.4.0),
tidyselect (&ge; 1.2.0), tidyr (&ge; 1.2.0), cli (&ge; 3.1.0), purrr,
lubridate, PatientProfiles (&ge; 0.3.0), RJSONIO, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, rmarkdown, testthat (&ge; 3.0.0), RPostgres, odbc,
spelling, tibble</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://darwin-eu.github.io/CodelistGenerator/">https://darwin-eu.github.io/CodelistGenerator/</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-08 22:02:24 UTC; eburn</td>
</tr>
<tr>
<td>Author:</td>
<td>Edward Burn <a href="https://orcid.org/0000-0002-9286-1128"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Marti Catala <a href="https://orcid.org/0000-0003-3308-9905"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Edward Burn &lt;edward.burn@ndorms.ox.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-08 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='CodelistGenerator-package'>CodelistGenerator: Identify Relevant Clinical Codes and Evaluate Their Use</h2><span id='topic+CodelistGenerator'></span><span id='topic+CodelistGenerator-package'></span>

<h3>Description</h3>

<p>Generate a candidate code list for the Observational Medical Outcomes Partnership (OMOP) common data model based on string matching. For a given search strategy, a candidate code list will be returned.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Edward Burn <a href="mailto:edward.burn@ndorms.ox.ac.uk">edward.burn@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0002-9286-1128">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Marti Catala <a href="mailto:marti.catalasabate@ndorms.ox.ac.uk">marti.catalasabate@ndorms.ox.ac.uk</a> (<a href="https://orcid.org/0000-0003-3308-9905">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://darwin-eu.github.io/CodelistGenerator/">https://darwin-eu.github.io/CodelistGenerator/</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='achillesCodeUse'>Summarise code use from achilles counts</h2><span id='topic+achillesCodeUse'></span>

<h3>Description</h3>

<p>Summarise code use from achilles counts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>achillesCodeUse(x, cdm, countBy = c("record", "person"), minCellCount = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="achillesCodeUse_+3A_x">x</code></td>
<td>
<p>Codelist</p>
</td></tr>
<tr><td><code id="achillesCodeUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector::cdm_from_con()</p>
</td></tr>
<tr><td><code id="achillesCodeUse_+3A_countby">countBy</code></td>
<td>
<p>Either &quot;record&quot; for record-level counts or &quot;person&quot; for
person-level counts</p>
</td></tr>
<tr><td><code id="achillesCodeUse_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum number of counts to reported, below which
results will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
oa &lt;- getCandidateCodes(cdm = cdm, keywords = "osteoarthritis")
result_achilles &lt;- achillesCodeUse(list(oa = oa$concept_id), cdm = cdm)
result_achilles
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='codesFromCohort'>Get concept ids from a provided path to cohort json files</h2><span id='topic+codesFromCohort'></span>

<h3>Description</h3>

<p>Get concept ids from a provided path to cohort json files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codesFromCohort(path, cdm, withConceptDetails = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="codesFromCohort_+3A_path">path</code></td>
<td>
<p>Path to a file or folder containing JSONs of cohort definitions</p>
</td></tr>
<tr><td><code id="codesFromCohort_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created with CDMConnector</p>
</td></tr>
<tr><td><code id="codesFromCohort_+3A_withconceptdetails">withConceptDetails</code></td>
<td>
<p>If FALSE a vector of concept IDs will be returned
for each concept set. If TRUE a tibble will be returned with additional
information on the identified concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named list with concept_ids for each concept set
</p>

<hr>
<h2 id='codesFromConceptSet'>Get concept ids from a provided path to json files</h2><span id='topic+codesFromConceptSet'></span>

<h3>Description</h3>

<p>Get concept ids from a provided path to json files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codesFromConceptSet(path, cdm, withConceptDetails = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="codesFromConceptSet_+3A_path">path</code></td>
<td>
<p>Path to a file or folder containing JSONs of concept sets</p>
</td></tr>
<tr><td><code id="codesFromConceptSet_+3A_cdm">cdm</code></td>
<td>
<p>A cdm reference created with CDMConnector</p>
</td></tr>
<tr><td><code id="codesFromConceptSet_+3A_withconceptdetails">withConceptDetails</code></td>
<td>
<p>If FALSE a vector of concept IDs will be returned
for each concept set. If TRUE a tibble will be returned with additional
information on the identified concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named list with concept_ids for each concept set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
x &lt;- codesFromConceptSet(cdm = cdm,
                         path =  system.file(package = "CodelistGenerator",
                         "concepts_for_mock"))
x
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='codesInUse'>Get codes used in the database</h2><span id='topic+codesInUse'></span>

<h3>Description</h3>

<p>Get codes used in the database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codesInUse(
  cdm,
  table = c("condition_occurrence", "device_exposure", "drug_exposure", "measurement",
    "observation", "procedure_occurrence", "visit_occurrence")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="codesInUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="codesInUse_+3A_table">table</code></td>
<td>
<p>cdm table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of integers indicating codes being used in the database.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
x &lt;- codesInUse(cdm = cdm)
x
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='compareCodelists'>Compare two codelists</h2><span id='topic+compareCodelists'></span>

<h3>Description</h3>

<p>Compare two codelists
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compareCodelists(codelist1, codelist2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compareCodelists_+3A_codelist1">codelist1</code></td>
<td>
<p>Output of getCandidateCodes</p>
</td></tr>
<tr><td><code id="compareCodelists_+3A_codelist2">codelist2</code></td>
<td>
<p>Output of getCandidateCodes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
codes1 &lt;- getCandidateCodes(
 cdm = cdm,
 keywords = "Arthritis",
 domains = "Condition",
 includeDescendants = TRUE
)
codes2 &lt;- getCandidateCodes(
 cdm = cdm,
 keywords = c("knee osteoarthritis", "arthrosis"),
 domains = "Condition",
 includeDescendants = TRUE
)
compareCodelists(
 codelist1 = codes1,
 codelist2 = codes2
)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='findOrphanCodes'>Find orphan codes related to a codelist</h2><span id='topic+findOrphanCodes'></span>

<h3>Description</h3>

<p>Find orphan codes related to a codelist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findOrphanCodes(
  x,
  cdm,
  domains = "Condition",
  standardConcept = "Standard",
  searchInSynonyms = TRUE,
  searchNonStandard = TRUE,
  includeDescendants = TRUE,
  includeAncestor = TRUE,
  minCellCount = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findOrphanCodes_+3A_x">x</code></td>
<td>
<p>Codes for which to find codes related but not included (orphan
codes)</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_domains">domains</code></td>
<td>
<p>Character vector with one or more of the OMOP CDM domain.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_standardconcept">standardConcept</code></td>
<td>
<p>Character vector with one or more of &quot;Standard&quot;,
&quot;Classification&quot;, and &quot;Non-standard&quot;. These correspond to the flags used
for the standard_concept field in the concept table of the cdm.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_searchinsynonyms">searchInSynonyms</code></td>
<td>
<p>Either TRUE or FALSE. If TRUE the code will also
search using both the primary name in the concept table and synonyms from
the concept synonym table.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_searchnonstandard">searchNonStandard</code></td>
<td>
<p>Either TRUE or FALSE. If TRUE the code will also
search via non-standard concepts.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_includedescendants">includeDescendants</code></td>
<td>
<p>Either TRUE or FALSE.
If TRUE descendant concepts of identified concepts
will be included in the candidate codelist.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_includeancestor">includeAncestor</code></td>
<td>
<p>Either TRUE or FALSE.
If TRUE the direct ancestor concepts of identified concepts
will be included in the candidate codelist.</p>
</td></tr>
<tr><td><code id="findOrphanCodes_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum number of counts to reported, below which
results will be suppressed. If 0, all results will be reported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A codelist containing code related to (but not in) the target
codelist that are present used in the cdm
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
codes &lt;- getCandidateCodes(cdm = cdm,
keywords = "Musculoskeletal disorder",
domains = "Condition",
includeDescendants = FALSE)

orphan_codes &lt;- findOrphanCodes(x = list("msk" = codes$concept_id),
cdm = cdm,
domains = "Condition",
standardConcept = "Standard",
searchInSynonyms = FALSE,
searchNonStandard = FALSE,
includeDescendants = TRUE,
includeAncestor = FALSE)

orphan_codes
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getATCCodes'>Get descendant codes for ATC levels</h2><span id='topic+getATCCodes'></span>

<h3>Description</h3>

<p>Get descendant codes for ATC levels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getATCCodes(
  cdm,
  level = c("ATC 1st"),
  name = NULL,
  doseForm = NULL,
  withConceptDetails = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getATCCodes_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getATCCodes_+3A_level">level</code></td>
<td>
<p>ATC level. Can be one or more of &quot;ATC 1st&quot;, &quot;ATC 2nd&quot;,
&quot;ATC 3rd&quot;, &quot;ATC 4th&quot;, and &quot;ATC 5th&quot;</p>
</td></tr>
<tr><td><code id="getATCCodes_+3A_name">name</code></td>
<td>
<p>ATC name of interest. For example, c(&quot;Dermatologicals&quot;,
&quot;Nervous System&quot;), would result in a list of length two with the descendant
concepts for these two particular ATC groups.</p>
</td></tr>
<tr><td><code id="getATCCodes_+3A_doseform">doseForm</code></td>
<td>
<p>Only descendants codes with the specified dose form
will be returned. If NULL, descendant codes will be returned regardless
of dose form.</p>
</td></tr>
<tr><td><code id="getATCCodes_+3A_withconceptdetails">withConceptDetails</code></td>
<td>
<p>If FALSE, each item in the list of results (one per
ATC group) will contain a vector of concept IDs for each ingredient. If
TRUE each item in the list of results will contain a tibble with additional
information on the identified concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list, with each item containing a vector of descendant
concepts of an ATC group (if withConceptDetails was set as FALSE) or a
tibble with the descendant concepts along with additional details about them
(if withConceptDetails was set as TRUE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getATCCodes(cdm = cdm, level = "ATC 1st")
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getCandidateCodes'>Generate candidate codelist for the OMOP CDM</h2><span id='topic+getCandidateCodes'></span>

<h3>Description</h3>

<p>This function generates a set of codes that
can be considered for creating a phenotype
using the OMOP CDM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCandidateCodes(
  cdm,
  keywords,
  exclude = NULL,
  domains = "Condition",
  standardConcept = "Standard",
  searchInSynonyms = FALSE,
  searchNonStandard = FALSE,
  includeDescendants = TRUE,
  includeAncestor = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getCandidateCodes_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_keywords">keywords</code></td>
<td>
<p>Character vector of words to search for.
Where more than one word is given (e.g. &quot;knee osteoarthritis&quot;),
all combinations of those words should be identified
positions (e.g. &quot;osteoarthritis of knee&quot;) should be identified.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_exclude">exclude</code></td>
<td>
<p>Character vector of words
to identify concepts to exclude.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_domains">domains</code></td>
<td>
<p>Character vector with one or more of the OMOP CDM domain.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_standardconcept">standardConcept</code></td>
<td>
<p>Character vector with one or more of &quot;Standard&quot;,
&quot;Classification&quot;, and &quot;Non-standard&quot;. These correspond to the flags used
for the standard_concept field in the concept table of the cdm.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_searchinsynonyms">searchInSynonyms</code></td>
<td>
<p>Either TRUE or FALSE. If TRUE the code will also
search using both the primary name in the concept table and synonyms from
the concept synonym table.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_searchnonstandard">searchNonStandard</code></td>
<td>
<p>Either TRUE or FALSE. If TRUE the code will also
search via non-standard concepts.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_includedescendants">includeDescendants</code></td>
<td>
<p>Either TRUE or FALSE.
If TRUE descendant concepts of identified concepts
will be included in the candidate codelist.</p>
</td></tr>
<tr><td><code id="getCandidateCodes_+3A_includeancestor">includeAncestor</code></td>
<td>
<p>Either TRUE or FALSE.
If TRUE the direct ancestor concepts of identified concepts
will be included in the candidate codelist.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- CodelistGenerator::mockVocabRef()
CodelistGenerator::getCandidateCodes(
  cdm = cdm,
  keywords = "osteoarthritis"
 )
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getConceptClassId'>getConceptClassId</h2><span id='topic+getConceptClassId'></span>

<h3>Description</h3>

<p>getConceptClassId
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getConceptClassId(cdm, standardConcept = "Standard", domain = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getConceptClassId_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getConceptClassId_+3A_standardconcept">standardConcept</code></td>
<td>
<p>Character vector with one or more of &quot;Standard&quot;,
&quot;Classification&quot;, and &quot;Non-standard&quot;. These correspond to the flags used
for the standard_concept field in the concept table of the cdm.</p>
</td></tr>
<tr><td><code id="getConceptClassId_+3A_domain">domain</code></td>
<td>
<p>Vocabulary domain</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The concept class used for a given set of domains
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getConceptClassId(cdm = cdm, domain = "drug")
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getDescendants'>getDescendants</h2><span id='topic+getDescendants'></span>

<h3>Description</h3>

<p>getDescendants
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDescendants(
  cdm,
  conceptId,
  withAncestor = FALSE,
  ingredientRange = c(0, Inf),
  doseForm = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDescendants_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getDescendants_+3A_conceptid">conceptId</code></td>
<td>
<p>concpet_id to search</p>
</td></tr>
<tr><td><code id="getDescendants_+3A_withancestor">withAncestor</code></td>
<td>
<p>If TRUE, return column with ancestor. In case of multiple
ancestors, concepts will be separated by &quot;;&quot;</p>
</td></tr>
<tr><td><code id="getDescendants_+3A_ingredientrange">ingredientRange</code></td>
<td>
<p>Used to restrict descendant codes to those
associated with a specific number of drug ingredients. Must be a vector of
length two with the first element the minimum number of ingredients allowed
and the second the maximum. A value of c(2, 2) would restrict to only
concepts associated with two ingredients.</p>
</td></tr>
<tr><td><code id="getDescendants_+3A_doseform">doseForm</code></td>
<td>
<p>Only descendants codes with the specified drug dose form
will be returned. If NULL, descendant codes will be returned regardless
of dose form.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The descendants of a given concept id
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getDescendants(cdm = cdm, conceptId = 1)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getDomains'>getDomains</h2><span id='topic+getDomains'></span>

<h3>Description</h3>

<p>getDomains
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDomains(cdm, standardConcept = "Standard")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDomains_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getDomains_+3A_standardconcept">standardConcept</code></td>
<td>
<p>Character vector with one or more of &quot;Standard&quot;,
&quot;Classification&quot;, and &quot;Non-standard&quot;. These correspond to the flags used
for the standard_concept field in the concept table of the cdm.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The domains of the cdm
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getDomains(cdm = cdm)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getDoseForm'>getDoseForm</h2><span id='topic+getDoseForm'></span>

<h3>Description</h3>

<p>getDoseForm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDoseForm(cdm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDoseForm_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The dose forms available for drug concepts
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getDoseForm(cdm = cdm)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getDrugIngredientCodes'>Get descendant codes for drug ingredients</h2><span id='topic+getDrugIngredientCodes'></span>

<h3>Description</h3>

<p>Get descendant codes for drug ingredients
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDrugIngredientCodes(
  cdm,
  name = NULL,
  doseForm = NULL,
  ingredientRange = c(1, Inf),
  withConceptDetails = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDrugIngredientCodes_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getDrugIngredientCodes_+3A_name">name</code></td>
<td>
<p>Names of ingredients of interest. For example, c(&quot;acetaminophen&quot;,
&quot;codeine&quot;), would result in a list of length two with the descendant
concepts for these two particular drug ingredients.</p>
</td></tr>
<tr><td><code id="getDrugIngredientCodes_+3A_doseform">doseForm</code></td>
<td>
<p>Only descendants codes with the specified dose form
will be returned. If NULL, descendant codes will be returned regardless
of dose form.</p>
</td></tr>
<tr><td><code id="getDrugIngredientCodes_+3A_ingredientrange">ingredientRange</code></td>
<td>
<p>Used to restrict descendant codes to those
associated with a specific number of ingredients. Must be a vector of length
two with the first element the minimum number of ingredients allowed and
the second the maximum. A value of c(2, 2) would restrict to only concepts
associated with two ingredients.</p>
</td></tr>
<tr><td><code id="getDrugIngredientCodes_+3A_withconceptdetails">withConceptDetails</code></td>
<td>
<p>If FALSE, each item in the list of results (one per
ingredient) will contain a vector of concept IDs for each ingredient. If
TRUE each item in the list of results will contain a tibble with additional
information on the identified concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list, with each item containing a vector of descendant
concepts of an ingredient (if withConceptDetails was set as FALSE) or a
tibble with the descendant concepts along with additional details about them
(if withConceptDetails was set as TRUE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getDrugIngredientCodes(cdm = cdm, name = "Adalimumab")
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getICD10StandardCodes'>Get corresponding standard codes for ICD-10 chapters and sub-chapters</h2><span id='topic+getICD10StandardCodes'></span>

<h3>Description</h3>

<p>Get corresponding standard codes for ICD-10 chapters and sub-chapters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getICD10StandardCodes(
  cdm,
  level = c("ICD10 Chapter", "ICD10 SubChapter"),
  name = NULL,
  includeDescendants = TRUE,
  withConceptDetails = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getICD10StandardCodes_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="getICD10StandardCodes_+3A_level">level</code></td>
<td>
<p>Can be either &quot;ICD10 Chapter&quot; or &quot;ICD10 SubChapter&quot;</p>
</td></tr>
<tr><td><code id="getICD10StandardCodes_+3A_name">name</code></td>
<td>
<p>Name of chapter or sub-chapter of interest. If NULL, all
will be considered.</p>
</td></tr>
<tr><td><code id="getICD10StandardCodes_+3A_includedescendants">includeDescendants</code></td>
<td>
<p>If FALSE only direct mappings from ICD-10 codes
to standard codes will be returned. If TRUE descendants of standard concepts
will also be included.</p>
</td></tr>
<tr><td><code id="getICD10StandardCodes_+3A_withconceptdetails">withConceptDetails</code></td>
<td>
<p>If FALSE a vector of concept IDs will be returned
for each ICD group If TRUE a tibble will be returned with additional
information on the identified concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list, with each element containing the corresponding
standard codes (and descendants) of ICD chapters and sub-chapters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getICD10StandardCodes(cdm = cdm, level = c(
  "ICD10 Chapter",
  "ICD10 SubChapter"
))
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getMappings'>Show mappings from non-standard vocabularies to standard</h2><span id='topic+getMappings'></span>

<h3>Description</h3>

<p>Show mappings from non-standard vocabularies to standard
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMappings(
  candidateCodelist,
  cdm = NULL,
  nonStandardVocabularies = c("ATC", "ICD10CM", "ICD10PCS", "ICD9CM", "ICD9Proc",
    "LOINC", "OPCS4", "Read", "RxNorm", "RxNorm Extension", "SNOMED")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMappings_+3A_candidatecodelist">candidateCodelist</code></td>
<td>
<p>Dataframe</p>
</td></tr>
<tr><td><code id="getMappings_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector::cdm_from_con()</p>
</td></tr>
<tr><td><code id="getMappings_+3A_nonstandardvocabularies">nonStandardVocabularies</code></td>
<td>
<p>Character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- CodelistGenerator::mockVocabRef()
codes &lt;- CodelistGenerator::getCandidateCodes(
  cdm = cdm,
  keywords = "osteoarthritis"
)
CodelistGenerator::getMappings(
  cdm = cdm,
  candidateCodelist = codes,
  nonStandardVocabularies = "READ"
)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getVocabularies'>getVocabularies</h2><span id='topic+getVocabularies'></span>

<h3>Description</h3>

<p>getVocabularies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVocabularies(cdm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getVocabularies_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Names of available vocabularies
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getVocabularies(cdm = cdm)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='getVocabVersion'>getVocabVersion</h2><span id='topic+getVocabVersion'></span>

<h3>Description</h3>

<p>getVocabVersion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVocabVersion(cdm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getVocabVersion_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the vocabulary version being used
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
getVocabVersion(cdm = cdm)
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='mockVocabRef'>Generate example vocabulary database</h2><span id='topic+mockVocabRef'></span>

<h3>Description</h3>

<p>Generate example vocabulary database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mockVocabRef(backend = "database")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mockVocabRef_+3A_backend">backend</code></td>
<td>
<p>'database' (duckdb) or 'data_frame'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>cdm reference with mock vocabulary
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef()
cdm
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='restrictToCodesInUse'>Filter a codelist to keep only the codes used in the database</h2><span id='topic+restrictToCodesInUse'></span>

<h3>Description</h3>

<p>Filter a codelist to keep only the codes used in the database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restrictToCodesInUse(
  x,
  cdm,
  table = c("condition_occurrence", "device_exposure", "drug_exposure", "measurement",
    "observation", "procedure_occurrence", "visit_occurrence")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restrictToCodesInUse_+3A_x">x</code></td>
<td>
<p>A codelist</p>
</td></tr>
<tr><td><code id="restrictToCodesInUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="restrictToCodesInUse_+3A_table">table</code></td>
<td>
<p>cdm table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of integers indicating the codes used in the database
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
codes &lt;- getCandidateCodes(cdm = cdm,
                           keywords = "arthritis",
                           domains = "Condition",
                           includeDescendants = FALSE)
x &lt;- restrictToCodesInUse(list("cs1" = codes$concept_id,
                               "cs2" = 999),
                                cdm = cdm)

x
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='sourceCodesInUse'>Get source codes used in the database</h2><span id='topic+sourceCodesInUse'></span>

<h3>Description</h3>

<p>Get source codes used in the database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sourceCodesInUse(
  cdm,
  table = c("condition_occurrence", "device_exposure", "drug_exposure", "measurement",
    "observation", "procedure_occurrence", "visit_occurrence")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sourceCodesInUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector</p>
</td></tr>
<tr><td><code id="sourceCodesInUse_+3A_table">table</code></td>
<td>
<p>cdm table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of source codes used in the database.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdm &lt;- mockVocabRef("database")
x &lt;- sourceCodesInUse(cdm = cdm)
x
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

<hr>
<h2 id='summariseCodeUse'>Summarise code use in patient-level data</h2><span id='topic+summariseCodeUse'></span>

<h3>Description</h3>

<p>Summarise code use in patient-level data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseCodeUse(
  x,
  cdm,
  countBy = c("record", "person"),
  byConcept = TRUE,
  byYear = FALSE,
  bySex = FALSE,
  ageGroup = NULL,
  minCellCount = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseCodeUse_+3A_x">x</code></td>
<td>
<p>List of concept IDs</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector::cdm_from_con()</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_countby">countBy</code></td>
<td>
<p>Either &quot;record&quot; for record-level counts or &quot;person&quot; for
person-level counts</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_byconcept">byConcept</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_byyear">byYear</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by year.</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_bysex">bySex</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by sex.</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_agegroup">ageGroup</code></td>
<td>
<p>If not NULL, a list of ageGroup vectors of length two.</p>
</td></tr>
<tr><td><code id="summariseCodeUse_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum number of counts to reported, below which
results will be suppressed. If 0, all results will be reported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with results overall and, if specified, by strata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
con &lt;- DBI::dbConnect(duckdb::duckdb(),
                      dbdir = CDMConnector::eunomia_dir())
cdm &lt;- CDMConnector::cdm_from_con(con,
                                  cdm_schem = "main",
                                  write_schema = "main")
acetiminophen &lt;- c(1125315,  1127433, 40229134,
40231925, 40162522, 19133768,  1127078)
poliovirus_vaccine &lt;- c(40213160)
cs &lt;- list(acetiminophen = acetiminophen,
          poliovirus_vaccine = poliovirus_vaccine)
results &lt;- summariseCodeUse(cs,cdm = cdm)
results
CDMConnector::cdmDisconnect(cdm)

## End(Not run)

</code></pre>

<hr>
<h2 id='summariseCohortCodeUse'>Summarise code use among a cohort in the cdm reference</h2><span id='topic+summariseCohortCodeUse'></span>

<h3>Description</h3>

<p>Summarise code use among a cohort in the cdm reference
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseCohortCodeUse(
  x,
  cdm,
  cohortTable,
  cohortId = NULL,
  timing = "any",
  countBy = c("record", "person"),
  byConcept = TRUE,
  byYear = FALSE,
  bySex = FALSE,
  ageGroup = NULL,
  minCellCount = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseCohortCodeUse_+3A_x">x</code></td>
<td>
<p>Vector of concept IDs</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_cdm">cdm</code></td>
<td>
<p>cdm_reference via CDMConnector::cdm_from_con()</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_cohorttable">cohortTable</code></td>
<td>
<p>A cohort table from the cdm reference.</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_cohortid">cohortId</code></td>
<td>
<p>A vector of cohort IDs to include</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_timing">timing</code></td>
<td>
<p>When to assess the code use relative cohort dates. This can
be &quot;any&quot;(code use any time by individuals in the cohort) or  &quot;entry&quot; (code
use on individuals' cohort start date).</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_countby">countBy</code></td>
<td>
<p>Either &quot;record&quot; for record-level counts or &quot;person&quot; for
person-level counts</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_byconcept">byConcept</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_byyear">byYear</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by year.</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_bysex">bySex</code></td>
<td>
<p>TRUE or FALSE. If TRUE code use will be summarised by sex.</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_agegroup">ageGroup</code></td>
<td>
<p>If not NULL, a list of ageGroup vectors of length two.</p>
</td></tr>
<tr><td><code id="summariseCohortCodeUse_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum number of counts to reported, below which
results will be suppressed. If 0, all results will be reported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with results overall and, if specified, by strata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
con &lt;- DBI::dbConnect(duckdb::duckdb(),
                      dbdir = CDMConnector::eunomia_dir())
cdm &lt;- CDMConnector::cdm_from_con(con,
                                  cdm_schem = "main",
                                  write_schema = "main")
cdm &lt;- CDMConnector::generateConceptCohortSet(cdm = cdm,
conceptSet = list(a = 260139,
                  b = 1127433),
                  name = "cohorts",
                  end = "observation_period_end_date",
                  overwrite = TRUE)

results_cohort_mult &lt;-
summariseCohortCodeUse(list(cs = c(260139,19133873)),
                      cdm = cdm,
                      cohortTable = "cohorts",
                      timing = "entry",
                      minCellCount = 0)

results_cohort_mult
CDMConnector::cdmDisconnect(cdm)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
