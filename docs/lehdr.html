<!DOCTYPE html><html lang="en"><head><title>Help for package lehdr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {lehdr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggregate_lodes_df'><p>Aggregate data to a certain level dictated by inputs. Internal function.</p></a></li>
<li><a href='#grab_crosswalk'><p>Download and load LODES geographic crosswalk into a data frame (tibble)</p></a></li>
<li><a href='#grab_lodes'><p>Download and load LODES data into a data frame (tibble)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Grab Longitudinal Employer-Household Dynamics (LEHD) Flat Files</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.4</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jamaal Green &lt;jamaal.green@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Designed to query Longitudinal Employer-Household Dynamics (LEHD) 
    workplace/residential association and origin-destination flat files and 
    optionally aggregate Census block-level data to block group, tract, county, 
    or state. Data comes from the LODES FTP server <a href="https://lehd.ces.census.gov/data/lodes/LODES8/">https://lehd.ces.census.gov/data/lodes/LODES8/</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>readr, rlang, stringr, glue, httr2, dplyr, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, rmarkdown, devtools, pacman</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jamgreen/lehdr/">https://github.com/jamgreen/lehdr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jamgreen/lehdr/issues/">https://github.com/jamgreen/lehdr/issues/</a></td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-21 14:09:32 UTC; jamaalgreen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jamaal Green [cre, aut],
  Liming Wang [aut],
  Dillon Mahmoudi [aut],
  Matthew Rogers [ctb],
  Kyle Walker [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-21 14:30:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggregate_lodes_df'>Aggregate data to a certain level dictated by inputs. Internal function.</h2><span id='topic+aggregate_lodes_df'></span>

<h3>Description</h3>

<p>Helper function for lehdr which aggregates block geographies based on the block id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggregate_lodes_df(lehdr_df, geoid_to, aggname)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aggregate_lodes_df_+3A_lehdr_df">lehdr_df</code></td>
<td>
<p>Data frame (tibble) to be aggregated</p>
</td></tr>
<tr><td><code id="aggregate_lodes_df_+3A_geoid_to">geoid_to</code></td>
<td>
<p>The number of characters to do the aggregation on from the geoid</p>
</td></tr>
<tr><td><code id="aggregate_lodes_df_+3A_aggname">aggname</code></td>
<td>
<p>What the level is called, like &quot;tract&quot; etc</p>
</td></tr>
</table>

<hr>
<h2 id='grab_crosswalk'>Download and load LODES geographic crosswalk into a data frame (tibble)</h2><span id='topic+grab_crosswalk'></span>

<h3>Description</h3>

<p>Download LODES geographic crosswalk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grab_crosswalk(
  state,
  download_dir = normalizePath(file.path(tools::R_user_dir("lehdr", which = "cache")),
    mustWork = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grab_crosswalk_+3A_state">state</code></td>
<td>
<p>US state abbreviation in lower case, can be a vector of states.</p>
</td></tr>
<tr><td><code id="grab_crosswalk_+3A_download_dir">download_dir</code></td>
<td>
<p>Directory where lodes table will be downloaded.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe (tibble) geographic crosswalk at the block level
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download and load current geographic crosswalk for Alaska
alaska_xwalk &lt;- grab_crosswalk("VT")

# Download and load current geographic crosswalk for small states
small_states_xwalk &lt;- grab_crosswalk(c("wy", 'ND', 'SD'))


</code></pre>

<hr>
<h2 id='grab_lodes'>Download and load LODES data into a data frame (tibble)</h2><span id='topic+grab_lodes'></span>

<h3>Description</h3>

<p>Download LODES OD, RAC, and WAC tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grab_lodes(
  state,
  year,
  version = c("LODES8", "LODES7", "LODES5"),
  lodes_type = c("od", "rac", "wac"),
  job_type = c("JT00", "JT01", "JT02", "JT03", "JT04", "JT05"),
  segment = c("S000", "SA01", "SA02", "SA03", "SE01", "SE02", "SE03", "SI01", "SI02",
    "SI03"),
  agg_geo = c("block", "bg", "tract", "county", "state"),
  state_part = c("", "main", "aux"),
  download_dir = normalizePath(file.path(tools::R_user_dir("lehdr", which = "cache")),
    mustWork = FALSE),
  use_cache = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grab_lodes_+3A_state">state</code></td>
<td>
<p>US state abbreviation in lower case, as character. 
Can be a vector of states, like c(&quot;or&quot;,&quot;md&quot;,&quot;tx&quot;) for Oregon, Maryland, 
and Texas.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_year">year</code></td>
<td>
<p>Year of the lodes data, as numerical.
Can be a vector of years, like c(2014, 2020) for 2014 and 2020.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_version">version</code></td>
<td>
<p>The LODES version to use.
Version 8 (the default, use &quot;LODES8&quot;) is enumerated at 2020 Census blocks. 
&quot;LODES7&quot; is enumerated at 2010 Census blocks, but ends in 2019; 
LODES5&quot; is enumerated at 2000 Census blocks, but ends in 2009.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_lodes_type">lodes_type</code></td>
<td>
<p>The LODES table type.
Values can be the default origin-destination (&quot;od&quot;),residential association
(&quot;rac&quot;), or workplace association (&quot;wac&quot;). 
od files give a home and destination census block for workers. Residential 
files give job totals of worker home census blocks and workplace files 
give job totals of worker job census blocks</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_job_type">job_type</code></td>
<td>
<p>Jobtype: &quot;JT00&quot; for all jobs, &quot;JT01&quot; for Primary Jobs, 
&quot;JT02&quot; for All Private Jobs, &quot;JT03&quot; for Private Primary jobs, &quot;JT04&quot; for
All Federal jobs, &quot;JT05&quot; for Federal Primary jobs</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_segment">segment</code></td>
<td>
<p>Segment of the workforce.
&quot;S000&quot; total number of jobs for workers, &quot;SA01&quot; number of jobs for workers 
aged 29 or younger, &quot;SA02&quot; number of jobs for workers aged 30-54,&quot;SA03&quot; 
number of jobs for workers 55 and older, &quot;SE01&quot; number of jobs with 
earnings $1,250/month or less, &quot;SE02&quot; number of jobs with earnings $1,251 
to $3,333/month, &quot;SE03&quot; number of jobs with earnings greater than 
$3,333/month, &quot;SI01&quot; number of jobs in Goods Producing industry sectors, 
&quot;SI02&quot; number of jobs in Trade, Transportation, &amp; Utilities industry 
sectors, &quot;SI03&quot; number of jobs in All Other Services industry sectors.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_agg_geo">agg_geo</code></td>
<td>
<p>Aggregate to a geography other than Census Block (default). 
Values can be &quot;bg&quot; for block group, &quot;tract&quot;, &quot;county&quot;, or &quot;state&quot;.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_state_part">state_part</code></td>
<td>
<p>Part of the state file, required for &quot;od&quot; lodes_type.
Can have values of &quot;main&quot; or &quot;aux&quot; in OD files. Using &quot;main&quot; includes 
workers with their workplace and residence in the state. Using &quot;aux&quot; 
includes workers with residences out of state and workplace in the state 
of interest</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_download_dir">download_dir</code></td>
<td>
<p>Directory where lodes table will be downloaded.</p>
</td></tr>
<tr><td><code id="grab_lodes_+3A_use_cache">use_cache</code></td>
<td>
<p>Boolean indicating whether or not to check whether or not
the file had already been downloaded. Defaults to FALSE. Setting to TRUE
will allow lehdr to reuse existing files that were already downloaded.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe (tibble) of block or tract level LODES files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 # download and load 2014 block level O-D data for Vermont
 blk_df_or_od &lt;- grab_lodes(state = 'vt', year = 2014, lodes_type = "od", job_type = "JT01", 
                         segment = "SA01", state_part = "main")
                         
 # download and load 2014 O-D data for Vermont and aggregate 
 # to the tract level                     
 trt_df_or_od &lt;- grab_lodes(state = 'vt', year = 2014, lodes_type = "od", job_type = "JT01", 
                         segment = "SA01", state_part = "main", agg_geo = "tract")
                         
 # download and load 2020 RAC data for Vermont and aggregate 
 # to the tract level                                              
 trt_df_or_rac &lt;- grab_lodes(state = 'vt', year = 2014, lodes_type = "rac", job_type = "JT01", 
                          segment = "SA01", agg_geo = "tract")
                          
 # download and load 2020 WAC data for Vermont and aggregate 
 # to the tract level                        
 trt_df_or_wac &lt;- grab_lodes(state = 'vt', year = 2014, lodes_type = "wac", job_type = "JT01", 
                          segment = "SA01", agg_geo = "tract")
                         
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
