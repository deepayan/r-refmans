<!DOCTYPE html><html lang="en"><head><title>Help for package readstata13</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {readstata13}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.caldays'><p>Convert Stata business calendar dates in readable dates.</p></a></li>
<li><a href='#get.label'><p>Get Stata Label Table for a Label Set</p></a></li>
<li><a href='#get.label.name'><p>Get Names of Stata Label Set</p></a></li>
<li><a href='#get.label.tables'><p>Get all Stata Label Sets for a Data.frame</p></a></li>
<li><a href='#get.lang'><p>Show Default Label Language</p></a></li>
<li><a href='#get.origin.codes'><p>Get Origin Code Numbers for Factors</p></a></li>
<li><a href='#maxchar'><p>Check max char length of data.frame vectors</p></a></li>
<li><a href='#read.dta13'><p>Read Stata Binary Files</p></a></li>
<li><a href='#readstata13'><p>Import Stata Data Files</p></a></li>
<li><a href='#save.dta13'><p>Write Stata Binary Files</p></a></li>
<li><a href='#saveToExport'><p>Check if numeric vector can be expressed as integer vector</p></a></li>
<li><a href='#set.label'><p>Assign Stata Labels to a Variable</p></a></li>
<li><a href='#set.lang'><p>Assign Stata Language Labels</p></a></li>
<li><a href='#stbcal'><p>Parse Stata business calendar files</p></a></li>
<li><a href='#varlabel'><p>Get and assign Stata Variable Labels</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Import 'Stata' Data Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.10.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Function to read and write the 'Stata' file format.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/sjewo/readstata13">https://github.com/sjewo/readstata13</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sjewo/readstata13/issues">https://github.com/sjewo/readstata13/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.11.5)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-21 14:05:39 UTC; sj</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Marvin Garbuszus [aut],
  Sebastian Jeworutzki
    <a href="https://orcid.org/0000-0002-2671-5253"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  R Core Team [cph],
  Magnus Thor Torfason [ctb],
  Luke M. Olson [ctb],
  Giovanni Righi [ctb],
  Kevin Jin [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Jeworutzki &lt;Sebastian.Jeworutzki@ruhr-uni-bochum.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-21 16:00:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.caldays'>Convert Stata business calendar dates in readable dates.</h2><span id='topic+as.caldays'></span>

<h3>Description</h3>

<p>Convert Stata business calendar dates in readable dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.caldays(buisdays, cal, format = "%Y-%m-%d")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.caldays_+3A_buisdays">buisdays</code></td>
<td>
<p>numeric Vector of business dates</p>
</td></tr>
<tr><td><code id="as.caldays_+3A_cal">cal</code></td>
<td>
<p>data.frame Conversion table for business calendar dates</p>
</td></tr>
<tr><td><code id="as.caldays_+3A_format">format</code></td>
<td>
<p>character String with date format as in <code><a href="base.html#topic+as.Date">as.Date</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of readable dates.
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># read business calendar and data
sp500 &lt;- stbcal(system.file("extdata/sp500.stbcal", package="readstata13"))
dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"))

# convert dates and check
dat$ldatescal2 &lt;- as.caldays(dat$ldate, sp500)
all(dat$ldatescal2==dat$ldatescal)
</code></pre>

<hr>
<h2 id='get.label'>Get Stata Label Table for a Label Set</h2><span id='topic+get.label'></span>

<h3>Description</h3>

<p>Retrieve the value labels for a specific Stata label set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.label(dat, label.name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.label_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="get.label_+3A_label.name">label.name</code></td>
<td>
<p><em>character.</em> Name of the Stata label set</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the table of factor levels which represent
a Stata label set. The name of a label set for a variable can be obtained
by <code><a href="#topic+get.label.name">get.label.name</a></code>.
</p>


<h3>Value</h3>

<p>Returns a named vector of code numbers
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"))
labname &lt;- get.label.name(dat,"type")
get.label(dat, labname)
</code></pre>

<hr>
<h2 id='get.label.name'>Get Names of Stata Label Set</h2><span id='topic+get.label.name'></span>

<h3>Description</h3>

<p>Retrieves the Stata label set in the dataset for all or an vector of variable
names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.label.name(dat, var.name = NULL, lang = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.label.name_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="get.label.name_+3A_var.name">var.name</code></td>
<td>
<p><em>character vector.</em> Variable names. If <code>NULL</code>, get
names of all label sets.</p>
</td></tr>
<tr><td><code id="get.label.name_+3A_lang">lang</code></td>
<td>
<p><em>character.</em> Label language. Default language defined by
<code><a href="#topic+get.lang">get.lang</a></code> is used if NA</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Stata stores factor labels in variable independent labels sets. This
function retrieves the name of the label set for a variable.
</p>


<h3>Value</h3>

<p>Returns an named vector of variable labels
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>

<hr>
<h2 id='get.label.tables'>Get all Stata Label Sets for a Data.frame</h2><span id='topic+get.label.tables'></span>

<h3>Description</h3>

<p>Retrieve the value labels for all variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.label.tables(dat)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.label.tables_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the factor levels which represent
a Stata label set for all variables.
</p>


<h3>Value</h3>

<p>Returns a named list of label tables
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"))
get.label.tables(dat)
</code></pre>

<hr>
<h2 id='get.lang'>Show Default Label Language</h2><span id='topic+get.lang'></span>

<h3>Description</h3>

<p>Displays informations about the defined label languages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.lang(dat, print = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.lang_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="get.lang_+3A_print">print</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, print available languages and
default language.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Stata allows to define multiple label sets in different languages.
This functions reports the available languages and the selected default
language.
</p>


<h3>Value</h3>

<p>Returns a list with two components:
</p>

<dl>
<dt>languages:</dt><dd><p>Vector of label languages used in the dataset</p>
</dd>
<dt>default:</dt><dd><p>Name of the actual default label language, otherwise NA</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>

<hr>
<h2 id='get.origin.codes'>Get Origin Code Numbers for Factors</h2><span id='topic+get.origin.codes'></span>

<h3>Description</h3>

<p>Recreates the code numbers of a factor as stored in the Stata dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.origin.codes(x, label.table)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.origin.codes_+3A_x">x</code></td>
<td>
<p><em>factor.</em> Factor to obtain code for</p>
</td></tr>
<tr><td><code id="get.origin.codes_+3A_label.table">label.table</code></td>
<td>
<p><em>table.</em> Table with factor levels obtained by
<code><a href="#topic+get.label">get.label</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>While converting numeric variables into factors, the original code
numbers are lost. This function reconstructs the codes from the attribute
<code>label.table</code>.
</p>


<h3>Value</h3>

<p>Returns an integer with original codes
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"))
labname &lt;- get.label.name(dat,"type")
labtab &lt;- get.label(dat, labname)

# comparsion
get.origin.codes(dat$type, labtab)
as.integer(dat$type)
</code></pre>

<hr>
<h2 id='maxchar'>Check max char length of data.frame vectors</h2><span id='topic+maxchar'></span>

<h3>Description</h3>

<p>Stata requires us to provide the maximum size of a charactervector as every
row is stored in a bit region of this size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maxchar(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maxchar_+3A_x">x</code></td>
<td>
<p>vector of data frame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ex: If the max chars size is four, _ is no character in this vector:
1. row: four
3. row: one_
4. row: ____
</p>
<p>If a character vector contains only missings or is empty, we will assign it a
value of one, since Stata otherwise cannot handle what we write.
</p>

<hr>
<h2 id='read.dta13'>Read Stata Binary Files</h2><span id='topic+read.dta13'></span>

<h3>Description</h3>

<p><code>read.dta13</code> reads a Stata dta-file and imports the data into a
data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.dta13(
  file,
  convert.factors = TRUE,
  generate.factors = FALSE,
  encoding = "UTF-8",
  fromEncoding = NULL,
  convert.underscore = FALSE,
  missing.type = FALSE,
  convert.dates = TRUE,
  replace.strl = TRUE,
  add.rownames = FALSE,
  nonint.factors = FALSE,
  select.rows = NULL,
  select.cols = NULL,
  strlexport = FALSE,
  strlpath = ".",
  tz = "GMT"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.dta13_+3A_file">file</code></td>
<td>
<p><em>character.</em> Path to the dta file you want to import.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_convert.factors">convert.factors</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, factors from Stata
value labels are created.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_generate.factors">generate.factors</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code> and convert.factors is
TRUE, missing factor labels are created from integers. If duplicated labels
are found, unique labels will be generated according the following scheme:
&quot;label_(integer code)&quot;.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_encoding">encoding</code></td>
<td>
<p><em>character.</em> Strings can be converted from Windows-1252
or UTF-8 to system encoding. Options are &quot;latin1&quot; or &quot;UTF-8&quot; to specify
target encoding explicitly. Stata 14, 15 and 16 files are UTF-8 encoded and
may contain strings which can't be displayed in the current locale.
Set encoding=NULL to stop reencoding.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_fromencoding">fromEncoding</code></td>
<td>
<p><em>character.</em> We expect strings to be encoded as
&quot;CP1252&quot; for Stata Versions 13 and older. For dta files saved with Stata 14
or newer &quot;UTF-8&quot; is used. In some situation the used encoding can differ for
Stata 14 files and must be manually set.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_convert.underscore">convert.underscore</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, &quot;_&quot; in variable
names will be changed to &quot;.&quot;</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_missing.type">missing.type</code></td>
<td>
<p><em>logical.</em> Stata knows 27 different missing types:
., .a, .b, ..., .z. If <code>TRUE</code>, attribute <code>missing</code> will be
created.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_convert.dates">convert.dates</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, Stata dates are
converted.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_replace.strl">replace.strl</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, replace the reference to
a strL string in the data.frame with the actual value. The strl attribute
will be removed from the data.frame (see details).</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_add.rownames">add.rownames</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, the first column will be
used as rownames. Variable will be dropped afterwards.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_nonint.factors">nonint.factors</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, factors labels
will be assigned to variables of type float and double.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_select.rows">select.rows</code></td>
<td>
<p><em>integer.</em> Vector of one or two numbers. If single
value rows from 1:val are selected. If two values of a range are selected
the rows in range will be selected.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_select.cols">select.cols</code></td>
<td>
<p><em>character.</em> Vector of variables to select.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_strlexport">strlexport</code></td>
<td>
<p><em>logical.</em> Should strl content be exported as binary
files?</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_strlpath">strlpath</code></td>
<td>
<p><em>character.</em> Path for strl export.</p>
</td></tr>
<tr><td><code id="read.dta13_+3A_tz">tz</code></td>
<td>
<p><em>character.</em> time zone specification to be used for 
POSIXct values. ‘&quot;&quot;’ is the current time zone, and ‘&quot;GMT&quot;’ is UTC 
(Universal Time, Coordinated).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the filename is a url, the file will be downloaded as a temporary
file and read afterwards.
</p>
<p>Stata files are encoded in ansinew. Depending on your system's default
encoding certain characters may appear wrong. Using a correct encoding may
fix these.
</p>
<p>Variable names stored in the dta-file will be used in the resulting
data.frame. Stata types char, byte, and int will become integer; float and
double will become numerics. R only knows a single missing type, while Stata
knows 27, so all Stata missings will become NA in R.  If you need to keep
track of Statas original missing types, you may use
<code>missing.type=TRUE</code>.
</p>
<p>Stata dates are converted to R's Date class the same way foreign handles
dates.
</p>
<p>Stata 13 introduced a new character type called strL. strLs are able to store
strings up to 2 billion characters.  While R is able to store
strings of this size in a character vector, the printed representation of
such vectors looks rather cluttered, so it's possible to save only a
reference in the data.frame with option <code>replace.strl=FALSE</code>.
</p>
<p>In R, you may use rownames to store characters (see for instance
<code>data(swiss)</code>). In Stata, this is not possible and rownames have to be
stored as a variable. If you want to use rownames, set add.rownames to TRUE.
Then the first variable of the dta-file will hold the rownames of the
resulting data.frame.
</p>
<p>Reading dta-files of older and newer versions than 13 was introduced
with version 0.8.
</p>


<h3>Value</h3>

<p>The function returns a data.frame with attributes. The attributes
include
</p>

<dl>
<dt>datalabel:</dt><dd><p>Dataset label</p>
</dd>
<dt>time.stamp:</dt><dd><p>Timestamp of file creation</p>
</dd>
<dt>formats:</dt><dd><p>Stata display formats. May be used with
<code><a href="base.html#topic+sprintf">sprintf</a></code></p>
</dd>
<dt>types:</dt><dd><p>Stata data type (see Stata Corp 2014)</p>
</dd>
<dt>val.labels:</dt><dd><p>For each variable the name of the associated value
labels in &quot;label&quot;</p>
</dd>
<dt>var.labels:</dt><dd><p>Variable labels</p>
</dd>
<dt>version:</dt><dd><p>dta file format version</p>
</dd>
<dt>label.table:</dt><dd><p>List of value labels.</p>
</dd>
<dt>strl:</dt><dd><p>Character vector with long strings for the new strl string
variable type. The name of every element is the identifier.</p>
</dd>
<dt>expansion.fields:</dt><dd><p>list providing variable name, characteristic name
and the contents of Stata characteristic field.</p>
</dd>
<dt>missing:</dt><dd><p>List of numeric vectors with Stata missing type for each
variable.</p>
</dd>
<dt>byteorder:</dt><dd><p>Byteorder of the dta-file. LSF or MSF.</p>
</dd>
<dt>orig.dim:</dt><dd><p>Dimension recorded inside the dta-file.</p>
</dd>
</dl>



<h3>Note</h3>

<p>read.dta13 uses GPL 2 licensed code by Thomas Lumley and R-core members
from foreign::read.dta().
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>References</h3>

<p>Stata Corp (2014): Description of .dta file format
<a href="https://www.stata.com/help.cgi?dta">https://www.stata.com/help.cgi?dta</a>
</p>


<h3>See Also</h3>

<p><code><a href="foreign.html#topic+read.dta">read.dta</a></code> in package <code>foreign</code> and
<code>memisc</code> for dta files from Stata
versions &lt; 13 and <code>read_dta</code> in package <code>haven</code> for Stata version
&gt;= 13.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  library(readstata13)
  r13 &lt;- read.dta13("https://www.stata-press.com/data/r13/auto.dta")

## End(Not run) 
</code></pre>

<hr>
<h2 id='readstata13'>Import Stata Data Files</h2><span id='topic+readstata13'></span>

<h3>Description</h3>

<p>Function to read the Stata file format into a data.frame.
</p>


<h3>Note</h3>

<p>If you catch a bug, please do not sue us, we do not have any money.
</p>


<h3>Author(s)</h3>

<p>Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="foreign.html#topic+read.dta">read.dta</a></code> and <code>memisc</code> for dta files from
Stata Versions &lt; 13
</p>

<hr>
<h2 id='save.dta13'>Write Stata Binary Files</h2><span id='topic+save.dta13'></span>

<h3>Description</h3>

<p><code>save.dta13</code> writes a Stata dta-file bytewise and saves the data
into a dta-file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save.dta13(
  data,
  file,
  data.label = NULL,
  time.stamp = TRUE,
  convert.factors = TRUE,
  convert.dates = TRUE,
  tz = "GMT",
  add.rownames = FALSE,
  compress = FALSE,
  version = 117,
  convert.underscore = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="save.dta13_+3A_data">data</code></td>
<td>
<p><em>data.frame.</em> A data.frame Object.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_file">file</code></td>
<td>
<p><em>character.</em> Path to the dta file you want to export.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_data.label">data.label</code></td>
<td>
<p><em>character.</em> Name of the dta-file.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_time.stamp">time.stamp</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, add a time.stamp to the
dta-file.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_convert.factors">convert.factors</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, factors will be
converted to Stata variables with labels.
Stata expects strings to be encoded as Windows-1252, so all levels will be
recoded.  Character which can not be mapped in Windows-1252 will be saved as
hexcode.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_convert.dates">convert.dates</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, dates will be converted
to Stata date time format. Code from <code>foreign::write.dta</code></p>
</td></tr>
<tr><td><code id="save.dta13_+3A_tz">tz</code></td>
<td>
<p><em>character.</em> time zone specification to be used for 
POSIXct values and dates (if convert.dates is TRUE). ‘&quot;&quot;’ is the current 
time zone, and ‘&quot;GMT&quot;’ is UTC  (Universal Time, Coordinated).</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_add.rownames">add.rownames</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, a new variable rownames
will be added to the dta-file.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_compress">compress</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, the resulting dta-file will
use all of Statas numeric-vartypes.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_version">version</code></td>
<td>
<p><em>numeric.</em> Stata format for the resulting dta-file either
Stata version number (6 - 16) or the internal Stata dta-format (e.g. 117 for
Stata 13). Experimental support for large datasets: Use version=&quot;15mp&quot; to 
save the dataset in the new Stata 15/16 MP file format. This feature is not
thoroughly tested yet.</p>
</td></tr>
<tr><td><code id="save.dta13_+3A_convert.underscore">convert.underscore</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, all non numerics or
non alphabet characters will be converted to underscores.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function writes a dta-file to disk. The following features of the
dta file format are supported:
</p>

<dl>
<dt>datalabel:</dt><dd><p>Dataset label</p>
</dd>
<dt>time.stamp:</dt><dd><p>Timestamp of file creation</p>
</dd>
<dt>formats:</dt><dd><p>Stata display formats. May be used with
<code><a href="base.html#topic+sprintf">sprintf</a></code></p>
</dd>
<dt>type:</dt><dd><p>Stata data type (see Stata Corp 2014)</p>
</dd>
<dt>var.labels:</dt><dd><p>Variable labels</p>
</dd>
<dt>version:</dt><dd><p>dta file format version</p>
</dd>
<dt>strl:</dt><dd><p>List of character vectors for the new strL string variable
type. The first element is the identifier and the second element the
string.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>References</h3>

<p>Stata Corp (2014): Description of .dta file format
<a href="https://www.stata.com/help.cgi?dta">https://www.stata.com/help.cgi?dta</a>
</p>


<h3>See Also</h3>

<p><code><a href="foreign.html#topic+read.dta">read.dta</a></code> in package <code>foreign</code> and
<code>memisc</code> for dta files from Stata versions &lt; 13 and <code>read_dta</code> in
package <code>haven</code> for Stata version &gt;= 13.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  library(readstata13)
  save.dta13(cars, file="cars.dta")

## End(Not run) 
</code></pre>

<hr>
<h2 id='saveToExport'>Check if numeric vector can be expressed as integer vector</h2><span id='topic+saveToExport'></span>

<h3>Description</h3>

<p>Compression can reduce numeric vectors as integers if the vector does only
contain integer type data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveToExport(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saveToExport_+3A_x">x</code></td>
<td>
<p>vector of data frame</p>
</td></tr>
</table>

<hr>
<h2 id='set.label'>Assign Stata Labels to a Variable</h2><span id='topic+set.label'></span>

<h3>Description</h3>

<p>Assign value labels from a Stata label set to a variable. If duplicated
labels are found, unique labels will be generated according the following
scheme: &quot;label_(integer code)&quot;. Levels without labels will become &lt;NA&gt;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set.label(dat, var.name, lang = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set.label_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="set.label_+3A_var.name">var.name</code></td>
<td>
<p><em>character.</em> Name of the variable in the data.frame</p>
</td></tr>
<tr><td><code id="set.label_+3A_lang">lang</code></td>
<td>
<p><em>character.</em> Label language. Default language defined by
<code><a href="#topic+get.lang">get.lang</a></code> is used if NA</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a labeled factor
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"),
                  convert.factors=FALSE)

# compare vectors
set.label(dat, "type")
dat$type

# German label
set.label(dat, "type", "de")
</code></pre>

<hr>
<h2 id='set.lang'>Assign Stata Language Labels</h2><span id='topic+set.lang'></span>

<h3>Description</h3>

<p>Changes default label language for a dataset. 
Variables with generated labels (option generate.labels=TRUE) are kept unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set.lang(dat, lang = NA, generate.factors = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set.lang_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="set.lang_+3A_lang">lang</code></td>
<td>
<p><em>character.</em> Label language. Default language defined by
<code><a href="#topic+get.lang">get.lang</a></code> is used if NA</p>
</td></tr>
<tr><td><code id="set.lang_+3A_generate.factors">generate.factors</code></td>
<td>
<p><em>logical.</em> If <code>TRUE</code>, missing factor levels
are generated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data.frame with value labels in language &quot;lang&quot;.
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"))
get.lang(dat)
varlabel(dat)

# set German label
datDE &lt;- set.lang(dat, "de")
get.lang(datDE)
varlabel(datDE)
</code></pre>

<hr>
<h2 id='stbcal'>Parse Stata business calendar files</h2><span id='topic+stbcal'></span>

<h3>Description</h3>

<p>Create conversion table for business calendar dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stbcal(stbcalfile)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stbcal_+3A_stbcalfile">stbcalfile</code></td>
<td>
<p><em>stbcal-file</em> Stata business calendar file created by
Stata.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Stata 12 introduced business calendar format. Business dates are
integer numbers in a certain range of days, weeks, months or years. In this
range some days are omitted (e.g. weekends or holidays). If a business
calendar was created, a stbcal file matching this calendar was created. This
file is required to read the business calendar. This parser reads the stbcal-
file and returns a data.frame with dates matching business calendar dates.
</p>
<p>A dta-file containing Stata business dates imported with read.stata13() shows
in formats which stdcal file is required (e.g. &quot;
sp500.stbcal).
</p>
<p>Stata allows adding a short description called purpose. This is added as an
attribute of the resulting data.frame.
</p>


<h3>Value</h3>

<p>Returns a data.frame with two cols:
</p>

<dl>
<dt>range:</dt><dd><p>The date matching the businessdate. Date format.</p>
</dd>
<dt>buisdays:</dt><dd><p>The Stata business calendar day. Integer format.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sp500 &lt;- stbcal(system.file("extdata/sp500.stbcal", package="readstata13"))
</code></pre>

<hr>
<h2 id='varlabel'>Get and assign Stata Variable Labels</h2><span id='topic+varlabel'></span><span id='topic++27varlabel+3C-+27'></span><span id='topic+varlabel+3C-'></span>

<h3>Description</h3>

<p>Retrieve or set variable labels for a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varlabel(dat, var.name = NULL, lang = NA)

varlabel(dat) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varlabel_+3A_dat">dat</code></td>
<td>
<p><em>data.frame.</em> Data.frame created by <code>read.dta13</code>.</p>
</td></tr>
<tr><td><code id="varlabel_+3A_var.name">var.name</code></td>
<td>
<p><em>character vector.</em> Variable names. If NULL, get label
for all variables.</p>
</td></tr>
<tr><td><code id="varlabel_+3A_lang">lang</code></td>
<td>
<p><em>character.</em> Label language. Default language defined by
<code><a href="#topic+get.lang">get.lang</a></code> is used if NA</p>
</td></tr>
<tr><td><code id="varlabel_+3A_value">value</code></td>
<td>
<p><em>character vector.</em> Character vector of size ncol(data) with variable names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an named vector of variable labels
</p>


<h3>Author(s)</h3>

<p>Jan Marvin Garbuszus <a href="mailto:jan.garbuszus@ruhr-uni-bochum.de">jan.garbuszus@ruhr-uni-bochum.de</a>
</p>
<p>Sebastian Jeworutzki <a href="mailto:sebastian.jeworutzki@ruhr-uni-bochum.de">sebastian.jeworutzki@ruhr-uni-bochum.de</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- read.dta13(system.file("extdata/statacar.dta", package="readstata13"),
                  convert.factors=FALSE)

# display variable labels 
varlabel(dat)

# display german variable labels
varlabel(dat, lang="de")

# display german variable label for brand
varlabel(dat, var.name = "brand", lang="de")

# define new variable labels
varlabel(dat) &lt;- letters[1:ncol(dat)]

# display new variable labels
varlabel(dat)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
