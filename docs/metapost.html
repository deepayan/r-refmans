<!DOCTYPE html><html><head><title>Help for package metapost</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {metapost}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#metapost-package'>
<p>R Interface to MetaPost</p></a></li>
<li><a href='#grid.metapost'>
<p>Draw a MetaPost curve.</p></a></li>
<li><a href='#knot'>
<p>Create a MetaPost Path</p></a></li>
<li><a href='#metapost'>
<p>Generate a MetaPost File</p></a></li>
<li><a href='#mpost'>
<p>Run <code>mpost</code> on a MetaPost File</p></a></li>
<li><a href='#mptrace'>
<p>Parse <code>mpost</code> Log Files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface to 'MetaPost'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0-6</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul Murrell</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul Murrell &lt;paul@stat.auckland.ac.nz&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides an interface to 'MetaPost' (Hobby, 1998) 
    <a href="http://www.tug.org/docs/metapost/mpman.pdf">http://www.tug.org/docs/metapost/mpman.pdf</a>.
    There are functions to generate an R description of a 'MetaPost'
    curve, functions to generate 'MetaPost' code from an R description,
    functions to process 'MetaPost' code, and functions to read
    solved 'MetaPost' paths back into R.</td>
</tr>
<tr>
<td>Imports:</td>
<td>grid, gridBezier</td>
</tr>
<tr>
<td>Suggests:</td>
<td>grImport</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>mpost</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pmur002/metapost">https://github.com/pmur002/metapost</a>,
<a href="https://stattech.wordpress.fos.auckland.ac.nz/2018/12/03/2018-12-metapost-three-ways/">https://stattech.wordpress.fos.auckland.ac.nz/2018/12/03/2018-12-metapost-three-ways/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-06-24 20:52:29 UTC; pmur002</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-06-24 22:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='metapost-package'>
R Interface to MetaPost
</h2><span id='topic+metapost-package'></span>

<h3>Description</h3>

<p>Provides an R interface to METAPOST.
There are functions to generate an R description of a MetaPost
curve, functions to generate MetaPost code from an R description,
functions to process MetaPost code, and functions to read
solved MetaPost paths back into R.
</p>


<h3>Details</h3>

<p>Generate a MetaPost path with functions like <code><a href="#topic+knot">knot</a></code>.
</p>
<p>Write the MetaPost path to a file with <code><a href="#topic+metapost">metapost</a></code>.
</p>
<p>Run <code>mpost</code> on the file with <code><a href="#topic+mpost">mpost</a></code>.
</p>
<p>Read the solved path (Bezier control points) into R 
with <code><a href="#topic+mptrace">mptrace</a></code>.
</p>
<p>Draw a solved path with <code><a href="#topic+grid.metapost">grid.metapost</a></code>.
</p>
<p>It is also possible to pass <code><a href="#topic+grid.metapost">grid.metapost</a></code> the original
path (and it will perform the write/solve/read steps itself).
</p>


<h3>Author(s)</h3>

<p>Paul Murrell &lt;paul@stat.auckland.ac.nz&gt;
</p>


<h3>References</h3>

<p>Hobby, J. D. and the MetaPost development team (2018). METAPOST a
user's manual. <a href="https://www.tug.org/docs/metapost/mpman.pdf">https://www.tug.org/docs/metapost/mpman.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+knot">knot</a></code>
<code><a href="#topic+metapost">metapost</a></code>
<code><a href="#topic+mpost">mpost</a></code>
<code><a href="#topic+mptrace">mptrace</a></code>
<code><a href="#topic+grid.metapost">grid.metapost</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
oldunits &lt;- options(metapost.units="in")
p &lt;- knot(0, 0) + dir(0) + dir(0) + knot(1, 1)
grid.metapost(p)
options(oldunits)

</code></pre>

<hr>
<h2 id='grid.metapost'>
Draw a MetaPost curve.
</h2><span id='topic+grid.metapost'></span><span id='topic+metapostGrob'></span><span id='topic+metapostGrob.mppath'></span><span id='topic+metapostGrob.mpcontrols'></span><span id='topic+metapostGrob.mpcontrolList'></span>

<h3>Description</h3>

<p>Draw a MetaPost curve in <span class="pkg">grid</span> graphics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mppath'
metapostGrob(x, gp = gpar(), name = NULL, digits=2, ...)
## S3 method for class 'mpcontrols'
metapostGrob(x, gp = gpar(), name = NULL, ...)
## S3 method for class 'mpcontrolList'
metapostGrob(x, gp = gpar(), name = NULL, ...)
grid.metapost(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grid.metapost_+3A_x">x</code></td>
<td>

<p>A MetaPost path, either unsolved (a description generated using
<code><a href="#topic+knot">knot</a></code> etc), or solved (as produced by
<code><a href="#topic+mptrace">mptrace</a></code>).
</p>
</td></tr>
<tr><td><code id="grid.metapost_+3A_gp">gp</code></td>
<td>

<p>Graphical parameters (from a call to <code>gpar</code>).
</p>
</td></tr>
<tr><td><code id="grid.metapost_+3A_name">name</code></td>
<td>

<p>A name for the grob that is created.
</p>
</td></tr>
<tr><td><code id="grid.metapost_+3A_digits">digits</code></td>
<td>

<p>The number of decimal places to use when writing floating
point values in MetaPost code.
</p>
</td></tr>
<tr><td><code id="grid.metapost_+3A_...">...</code></td>
<td>

<p>Arguments passed to <code>metapostGrob</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>metapostGrob</code> creates a <code>"metapostgrob"</code> object.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>See Also</h3>

<p><code><a href="#topic+knot">knot</a></code>,
<code><a href="#topic+mptrace">mptrace</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
oldunits &lt;- options(metapost.units="in")
p &lt;- knot(0, 0) + dir(0) + dir(0) + knot(1, 1) 
grid.metapost(p)
options(oldunits)

</code></pre>

<hr>
<h2 id='knot'>
Create a MetaPost Path
</h2><span id='topic+knot'></span><span id='topic+cp'></span><span id='topic+curl'></span><span id='topic+cycle'></span><span id='topic+dir'></span><span id='topic+tension'></span><span id='topic++25+2B+25'></span><span id='topic++25-+25'></span><span id='topic++22paths+22'></span>

<h3>Description</h3>

<p>These functions can be used to describe a MetaPost path,
consisting of two or more knots, with various constraints
on how the path behaves between the knots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knot(x, y, units = getOption("metapost.units"),
     dir = NA, dir.left = dir, dir.right = dir,
     cp.left.x = NA, cp.right.x = NA, cp.left.y = NA, cp.right.y = NA,
     curl.left = NA, curl.right = NA,
     tension.left = NA, tension.right = NA)
cp(x, y, units = getOption("metapost.units"))
curl(x)
cycle()
dir(x, y = NULL)
tension(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knot_+3A_x">x</code></td>
<td>

<p>Numeric value:  a location (for <code>knot</code> and <code>cp</code>), or
an angle (for <code>dir</code>, if <code>y</code> is <code>NULL</code>), or a
vector component (for <code>dir</code>), or
a curl or tension value.
Or a <span class="pkg">grid</span> unit (for <code>knot</code> and <code>cp</code>).
</p>
</td></tr>
<tr><td><code id="knot_+3A_y">y</code></td>
<td>

<p>Numeric value:  a location (for <code>knot</code> and <code>cp</code>), or a
vector component (for <code>dir</code>).
Or a <span class="pkg">grid</span> unit (for <code>knot</code> and <code>cp</code>).
</p>
</td></tr>
<tr><td><code id="knot_+3A_units">units</code></td>
<td>

<p>The <span class="pkg">grid</span> coordinate system to use for locations
(if locations are only given as numeric values).
</p>
</td></tr>
<tr><td><code id="knot_+3A_dir">dir</code>, <code id="knot_+3A_dir.left">dir.left</code>, <code id="knot_+3A_dir.right">dir.right</code></td>
<td>

<p>A numeric angle. 
</p>
</td></tr>
<tr><td><code id="knot_+3A_cp.left.x">cp.left.x</code>, <code id="knot_+3A_cp.right.x">cp.right.x</code>, <code id="knot_+3A_cp.left.y">cp.left.y</code>, <code id="knot_+3A_cp.right.y">cp.right.y</code></td>
<td>

<p>A numeric location.
</p>
</td></tr>
<tr><td><code id="knot_+3A_curl.left">curl.left</code>, <code id="knot_+3A_curl.right">curl.right</code></td>
<td>

<p>A numeric curl value (must be at least 0).
</p>
</td></tr>
<tr><td><code id="knot_+3A_tension.left">tension.left</code>, <code id="knot_+3A_tension.right">tension.right</code></td>
<td>

<p>A numeric tension value (must be at least 3/4).
A negative values indicates a lower bound.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A MetaPost path is constructed using calls to <code>knot</code> and
combining the results using the <code>+</code> operator (see the examples
below).
</p>
<p>Constraints for a knot can be specified within the call to <code>knot</code>
or by combining connectors (<code>cp</code>, <code>dir</code>, etc)
with a knot using <code>+</code>.
</p>
<p>Knots can also be combined using <code>-</code> (a straight line rather than
a curve), <code>%+%</code> (no inflection), and <code>%-%</code> (straight
line with smooth connection) operators.
</p>


<h3>Value</h3>

<p>The individual functions generate knots and connectors, but when
combined together, they produce a MetaPost path (<code>"mppath"</code>) object.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>References</h3>

<p>Hobby, J. D. and the MetaPost development team (2018). METAPOST a
user's manual. <a href="https://www.tug.org/docs/metapost/mpman.pdf">https://www.tug.org/docs/metapost/mpman.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+metapost">metapost</a></code>, 
<code><a href="#topic+mpost">mpost</a></code>, 
<code><a href="#topic+mptrace">mptrace</a></code>, 
<code><a href="#topic+grid.metapost">grid.metapost</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>knot(0, 0, dir.right=0)
knot(0, 0, dir.right=0) + knot(1, 1)
knot(0, 0) + dir(0) + knot(1, 1)
</code></pre>

<hr>
<h2 id='metapost'>
Generate a MetaPost File
</h2><span id='topic+metapost'></span>

<h3>Description</h3>

<p>Generate a MetaPost file from a MetaPost path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metapost(x, file = "fig.mp", digits=2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metapost_+3A_x">x</code></td>
<td>

<p>A MetaPost path, as produced from <code><a href="#topic+knot">knot</a></code> etc.
</p>
</td></tr>
<tr><td><code id="metapost_+3A_file">file</code></td>
<td>

<p>The name of the file to produce.  If <code>NULL</code>, no file
is created.
</p>
</td></tr>
<tr><td><code id="metapost_+3A_digits">digits</code></td>
<td>

<p>The number of decimal places to use when writing floating
point values in MetaPost code.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The MetaPost code is returned invisibly.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>See Also</h3>

<p><code><a href="#topic+knot">knot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- knot(0, 0) + dir(0) + dir(0) + knot(1, 1)
mpcode &lt;- metapost(p, NULL)
mpcode
</code></pre>

<hr>
<h2 id='mpost'>
Run <code>mpost</code> on a MetaPost File
</h2><span id='topic+mpost'></span>

<h3>Description</h3>

<p>Run <code>mpost</code> on a MetaPost file, possibly with additional options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mpost(file = "fig.mp",
      cmd = NULL, template = NULL, format = NULL, tracing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mpost_+3A_file">file</code></td>
<td>

<p>The name of a file containing MetaPost code.
</p>
</td></tr>
<tr><td><code id="mpost_+3A_cmd">cmd</code></td>
<td>

<p>The command to use to run <code>mpost</code>.  By default
<code>Sys.which</code> is used to find a sensible value.
</p>
</td></tr>
<tr><td><code id="mpost_+3A_template">template</code></td>
<td>

<p>The naming template for the output files that are produced
(see <code>mpost</code>'s <code>outputtemplate</code> option).
</p>
</td></tr>
<tr><td><code id="mpost_+3A_format">format</code></td>
<td>

<p>The output format
(see <code>mpost</code>'s <code>outputformat</code> option).
</p>
</td></tr>
<tr><td><code id="mpost_+3A_tracing">tracing</code></td>
<td>

<p>A logical value indicating whether to generate a log
file containing solved paths
(see <code>mpost</code>'s <code>tracingchoices</code> option).    
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, <code>tracing</code> is <code>TRUE</code>, which produces a log
file that can be read into <span class="rlang"><b>R</b></span> using <code><a href="#topic+mptrace">mptrace</a></code>.
</p>
<p>Both output and log files will be produced in the same directory
as the <code>file</code>.
</p>


<h3>Value</h3>

<p>Used for its side effect of producing output files and log files.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>See Also</h3>

<p><code><a href="#topic+metapost">metapost</a></code>,
<code><a href="#topic+mptrace">mptrace</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
oldunits &lt;- options(metapost.units="in")
p &lt;- knot(0, 0) + dir(0) + dir(0) + knot(1, 1)
mpfile &lt;- file.path(tempdir(), "fig.mp")
metapost(p, mpfile)
mpost(mpfile)
options(oldunits)

</code></pre>

<hr>
<h2 id='mptrace'>
Parse <code>mpost</code> Log Files
</h2><span id='topic+mptrace'></span><span id='topic+mpbbox'></span><span id='topic+mpvp'></span>

<h3>Description</h3>

<p>Read a log file generated by <code>mpost</code> (possibly
via <code><a href="#topic+mpost">mpost</a></code>) to obtain solved MetaPost path information
(which can then be drawn by <code><a href="#topic+grid.metapost">grid.metapost</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mptrace(logfile = "fig.log")
mpbbox(psfile)
mpvp(psfile, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mptrace_+3A_logfile">logfile</code></td>
<td>

<p>The name of a log file generated by <code>mpost</code>.
</p>
</td></tr>
<tr><td><code id="mptrace_+3A_psfile">psfile</code></td>
<td>

<p>The name of a PostScript files generated by <code>mpost</code>.
</p>
</td></tr>
<tr><td><code id="mptrace_+3A_...">...</code></td>
<td>
<p>Arguments passed on to <code>viewport</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The log file must have been generated by <code>mpost</code> with
<code>tracingchoices=1</code>
(possibly using <code>mpost(..., tracing=TRUE)</code>).
</p>
<p>The functions <code>mpbbox</code> and <code>mpvp</code> parse a PostScript
file that was generated by <code>mpost</code>, returning the
bounding box of the output and a viewport based on that bounding
box respectively.
</p>


<h3>Value</h3>

<p>A list of Bezier control points (<code>mpcontrols</code> objects).
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mpost">mpost</a></code>,
<code><a href="#topic+grid.metapost">grid.metapost</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
oldunits &lt;- options(metapost.units="in")
oldwd &lt;- setwd(tempdir())
p &lt;- knot(0, 0) + dir(0) + dir(0) + knot(1, 1)
metapost(p, "fig.mp")
mpost("fig.mp")
paths &lt;- mptrace("fig.log")
grid.metapost(paths)
setwd(oldwd)
options(oldunits)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
