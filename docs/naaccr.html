<!DOCTYPE html><html><head><title>Help for package naaccr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {naaccr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.naaccr_record'><p>Coerce to a naaccr_record dataset</p>
Convert objects into <code>naaccr_record</code> objects, if a method exists.</a></li>
<li><a href='#clean_address_city'><p>Clean city names</p></a></li>
<li><a href='#clean_address_number_and_street'><p>Clean house number and street values</p></a></li>
<li><a href='#clean_age'><p>Clean patient ages</p></a></li>
<li><a href='#clean_census_block'><p>Clean Census block group codes</p></a></li>
<li><a href='#clean_census_tract'><p>Clean Census tract group codes</p></a></li>
<li><a href='#clean_count'><p>Clean counts</p></a></li>
<li><a href='#clean_county_fips'><p>Clean county FIPS codes</p></a></li>
<li><a href='#clean_facility_id'><p>Clean facility identification numbers</p></a></li>
<li><a href='#clean_icd_9_cm'><p>Clean ICD-9-CM codes</p></a></li>
<li><a href='#clean_icd_code'><p>Clean cause of death codes</p></a></li>
<li><a href='#clean_physician_id'><p>Clean physician identification numbers</p></a></li>
<li><a href='#clean_postal'><p>Clean postal codes</p></a></li>
<li><a href='#clean_ssn'><p>Clean Social Security ID numbers</p></a></li>
<li><a href='#clean_telephone'><p>Clean telephone numbers</p></a></li>
<li><a href='#clean_text'><p>Clean free-form text</p></a></li>
<li><a href='#field_levels'><p>List of possible values for a field</p></a></li>
<li><a href='#naaccr_boolean'><p>Interpret NAACCR-style booleans</p></a></li>
<li><a href='#naaccr_date'><p>Parse NAACCR-formatted dates</p></a></li>
<li><a href='#naaccr_datetime'><p>Parse NAACCR-formatted datetimes</p></a></li>
<li><a href='#naaccr_encode'><p>Format a value as a string according to the NAACCR format</p></a></li>
<li><a href='#naaccr_factor'><p>Replace NAACCR codes with understandable factors</p></a></li>
<li><a href='#naaccr_formats'><p>Field definitions from all NAACCR format versions</p></a></li>
<li><a href='#naaccr_override'><p>Interpret basic over-ride flags</p></a></li>
<li><a href='#naaccr_record'><p>Analysis-ready NAACCR records</p></a></li>
<li><a href='#read_naaccr_plain'><p>Read NAACCR records from a file</p></a></li>
<li><a href='#record_format'><p>Define custom fields for NAACCR records</p></a></li>
<li><a href='#split_sentineled'><p>Separate a field's continuous and sentinel values</p></a></li>
<li><a href='#split_sequence_number'><p>Unpack tumor sequence number data</p></a></li>
<li><a href='#unknown_to_na'><p>Replace labels for unknown with NA</p></a></li>
<li><a href='#write_naaccr'><p>Write records in NAACCR format</p></a></li>
<li><a href='#write_naaccr_xml'><p>Write records to a NAACCR-formatted XML file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read Cancer Records in the NAACCR Format</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.2</td>
</tr>
<tr>
<td>Author:</td>
<td>Nathan Werth [aut, cre],
    Pennsylvania Department of Health [cph],
    North American Association of Cancer Registries [cph],
    World Health Organization [cph],
    United States Centers for Disease Control and Prevention [ctb],
    United States Bureau of the Census [ctb],
    United States National Program of Cancer Registries [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nathan Werth &lt;nwerth@pa.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for reading cancer record files which follow a format
    defined by the North American Association of Central Cancer Registries
    (NAACCR).</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/WerthPADOH/naaccr">https://github.com/WerthPADOH/naaccr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/WerthPADOH/naaccr/issues">https://github.com/WerthPADOH/naaccr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, stringi, utils, XML</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, httr, jsonlite, magrittr, testthat, ISOcodes, xml2,
rmarkdown, roxygen2, rvest</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Copyright:</td>
<td>file COPYRIGHTS</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-23 15:45:24 UTC; nwerth</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-23 16:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.naaccr_record'>Coerce to a naaccr_record dataset
Convert objects into <code>naaccr_record</code> objects, if a method exists.</h2><span id='topic+as.naaccr_record'></span><span id='topic+as.naaccr_record.list'></span><span id='topic+as.naaccr_record.data.frame'></span>

<h3>Description</h3>

<p>Coerce to a naaccr_record dataset
Convert objects into <code>naaccr_record</code> objects, if a method exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.naaccr_record(x, keep_unknown = FALSE, version = NULL, format = NULL, ...)

## S3 method for class 'list'
as.naaccr_record(x, keep_unknown = FALSE, version = NULL, format = NULL, ...)

## S3 method for class 'data.frame'
as.naaccr_record(x, keep_unknown = FALSE, version = NULL, format = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.naaccr_record_+3A_x">x</code></td>
<td>
<p>An R object.</p>
</td></tr>
<tr><td><code id="as.naaccr_record_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Logical indicating whether values of &quot;unknown&quot; should be
a level in the factor or <code>NA</code>.</p>
</td></tr>
<tr><td><code id="as.naaccr_record_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (default), the most recent NAACCR format
will be used.</p>
</td></tr>
<tr><td><code id="as.naaccr_record_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for parsing the records.</p>
</td></tr>
<tr><td><code id="as.naaccr_record_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+naaccr_record">naaccr_record</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+naaccr_record">naaccr_record</a></code>
</p>

<hr>
<h2 id='clean_address_city'>Clean city names</h2><span id='topic+clean_address_city'></span>

<h3>Description</h3>

<p>Clean city names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_address_city(city, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_address_city_+3A_city">city</code></td>
<td>
<p>A character vector of city names.</p>
</td></tr>
<tr><td><code id="clean_address_city_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and &quot;UNKNOWN&quot; are replaced
with <code>NA</code>.
</p>

<hr>
<h2 id='clean_address_number_and_street'>Clean house number and street values</h2><span id='topic+clean_address_number_and_street'></span>

<h3>Description</h3>

<p>Clean house number and street values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_address_number_and_street(location, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_address_number_and_street_+3A_location">location</code></td>
<td>
<p>A character vector of house numbers and street names.</p>
</td></tr>
<tr><td><code id="clean_address_number_and_street_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and &quot;UNKNOWN&quot; are replaced
with <code>NA</code>.
</p>

<hr>
<h2 id='clean_age'>Clean patient ages</h2><span id='topic+clean_age'></span>

<h3>Description</h3>

<p>Clean patient ages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_age(age, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_age_+3A_age">age</code></td>
<td>
<p><code>Age_at_Diagnosis</code> values.</p>
</td></tr>
<tr><td><code id="clean_age_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector of ages.
If <code>keep_unknown</code> is <code>FALSE</code>, values representing unknown ages
are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_census_block'>Clean Census block group codes</h2><span id='topic+clean_census_block'></span>

<h3>Description</h3>

<p>Clean Census block group codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_census_block(block, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_census_block_+3A_block">block</code></td>
<td>
<p>A character vector of Census block group codes.</p>
</td></tr>
<tr><td><code id="clean_census_block_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown block groups are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_census_tract'>Clean Census tract group codes</h2><span id='topic+clean_census_tract'></span>

<h3>Description</h3>

<p>Clean Census tract group codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_census_tract(tract, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_census_tract_+3A_tract">tract</code></td>
<td>
<p>A character vector of Census tract group codes.</p>
</td></tr>
<tr><td><code id="clean_census_tract_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown Census Tracts are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_count'>Clean counts</h2><span id='topic+clean_count'></span>

<h3>Description</h3>

<p>Replaces any values of all 9's with <code>NA</code>
(if <code>keep_unknown</code> is <code>TRUE</code>) and converts the rest to integers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_count(count, width, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_count_+3A_count">count</code></td>
<td>
<p>A character vector of counts (integer characters only).</p>
</td></tr>
<tr><td><code id="clean_count_+3A_width">width</code></td>
<td>
<p>Integer giving the character width of the field.</p>
</td></tr>
<tr><td><code id="clean_count_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Integer vector of <code>count</code>.
If <code>keep_unknown</code> is <code>FALSE</code>, values representing unknown counts
are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_county_fips'>Clean county FIPS codes</h2><span id='topic+clean_county_fips'></span>

<h3>Description</h3>

<p>Clean county FIPS codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_county_fips(county, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_county_fips_+3A_county">county</code></td>
<td>
<p>A character vector of county FIPS codes.</p>
</td></tr>
<tr><td><code id="clean_county_fips_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown counties are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_facility_id'>Clean facility identification numbers</h2><span id='topic+clean_facility_id'></span>

<h3>Description</h3>

<p>Clean facility identification numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_facility_id(fin, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_facility_id_+3A_fin">fin</code></td>
<td>
<p>A character vector of facility identification numbers (FIN).</p>
</td></tr>
<tr><td><code id="clean_facility_id_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown facilities are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_icd_9_cm'>Clean ICD-9-CM codes</h2><span id='topic+clean_icd_9_cm'></span>

<h3>Description</h3>

<p>Clean ICD-9-CM codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_icd_9_cm(code, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_icd_9_cm_+3A_code">code</code></td>
<td>
<p>A character vector of ICD-9-CM codes.</p>
</td></tr>
<tr><td><code id="clean_icd_9_cm_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and the ICD-9-CM code for
&quot;unknown&quot; (<code>"00000"</code>) are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_icd_code'>Clean cause of death codes</h2><span id='topic+clean_icd_code'></span>

<h3>Description</h3>

<p>Clean cause of death codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_icd_code(code, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_icd_code_+3A_code">code</code></td>
<td>
<p>A character vector of ICD-7, ICD-8, ICD-9, and/or ICD-10 codes.</p>
</td></tr>
<tr><td><code id="clean_icd_code_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and the ICD codes for
&quot;unknown&quot; (<code>"0000"</code>, <code>"7777"</code> and <code>"7797"</code>) are replaced
with <code>NA</code>.
</p>

<hr>
<h2 id='clean_physician_id'>Clean physician identification numbers</h2><span id='topic+clean_physician_id'></span>

<h3>Description</h3>

<p>Clean physician identification numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_physician_id(physician, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_physician_id_+3A_physician">physician</code></td>
<td>
<p>A character vector of medical license number or
facility-generated codes.</p>
</td></tr>
<tr><td><code id="clean_physician_id_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown physicians or non-applicable are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_postal'>Clean postal codes</h2><span id='topic+clean_postal'></span>

<h3>Description</h3>

<p>Clean postal codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_postal(postal, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_postal_+3A_postal">postal</code></td>
<td>
<p>A character vector of postal codes.</p>
</td></tr>
<tr><td><code id="clean_postal_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
uncertain postal codes are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_ssn'>Clean Social Security ID numbers</h2><span id='topic+clean_ssn'></span>

<h3>Description</h3>

<p>Clean Social Security ID numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_ssn(number, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_ssn_+3A_number">number</code></td>
<td>
<p>A character vector of Social Security identification numbers.
No spaces or punctuation, only numbers.</p>
</td></tr>
<tr><td><code id="clean_ssn_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown Social Security ID numbers are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_telephone'>Clean telephone numbers</h2><span id='topic+clean_telephone'></span>

<h3>Description</h3>

<p>Clean telephone numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_telephone(number, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_telephone_+3A_number">number</code></td>
<td>
<p>A character vector of telephone numbers. No spaces or
punctuation, only numbers.</p>
</td></tr>
<tr><td><code id="clean_telephone_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blanks and values representing
unknown numbers or patients without a number are replaced with <code>NA</code>.
</p>

<hr>
<h2 id='clean_text'>Clean free-form text</h2><span id='topic+clean_text'></span>

<h3>Description</h3>

<p>Clean free-form text
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_text(text, keep_unknown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_text_+3A_text">text</code></td>
<td>
<p>A character vector of free text values.</p>
</td></tr>
<tr><td><code id="clean_text_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Replace values for &quot;unknown&quot; with <code>NA</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An character vector with leading and trailing whitespace removed.
If <code>keep_unknown</code> is <code>FALSE</code>, blank values are replaced with
<code>NA</code>.
</p>

<hr>
<h2 id='field_levels'>List of possible values for a field</h2><span id='topic+field_levels'></span><span id='topic+field_levels_all'></span>

<h3>Description</h3>

<p>These lists gives the levels for each categorical or flag field from the
NAACCR formats. It is intended to help researchers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>field_levels

field_levels_all
</code></pre>


<h3>Format</h3>

<p>A named <code>list</code>, where the names are for categorical fields or
sentinel flags, and the values are the possible levels for each field.
</p>
<p>An object of class <code>list</code> of length 322.
</p>


<h3>Details</h3>

<p><code>field_levels</code> does not include levels representing &quot;unknown.&quot;
<code>field_levels_all</code> does include the &quot;unknown&quot; levels.
</p>

<hr>
<h2 id='naaccr_boolean'>Interpret NAACCR-style booleans</h2><span id='topic+naaccr_boolean'></span>

<h3>Description</h3>

<p>Interpret NAACCR-style booleans
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_boolean(flag, false_value = c("0", "1"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_boolean_+3A_flag">flag</code></td>
<td>
<p>Character vector of flags.</p>
</td></tr>
<tr><td><code id="naaccr_boolean_+3A_false_value">false_value</code></td>
<td>
<p>The flag value to interpret as <code>FALSE</code>. If <code>"0"</code>
(default), then <code>"1"</code> is interpreted as <code>TRUE</code>. If <code>"1"</code>,
then <code>"2"</code> is interpreted as <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>logical</code> vector with the interpreted values of <code>flag</code>.
Any original values not seen as <code>TRUE</code> or <code>FALSE</code> are converted
to <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  x &lt;- c("0", "1", "2", "9", NA)
  naaccr_boolean(x)
  naaccr_boolean(x, false_value = "1")
</code></pre>

<hr>
<h2 id='naaccr_date'>Parse NAACCR-formatted dates</h2><span id='topic+naaccr_date'></span>

<h3>Description</h3>

<p>Parse NAACCR-formatted dates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_date(date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_date_+3A_date">date</code></td>
<td>
<p>Character vector of dates in NAACCR format (<code>"YYYYMMDD"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Date</code> vector. Any incomplete or invalid dates are converted
to <code>NA</code>. The original strings can be retrieved with the
<code><a href="#topic+naaccr_encode">naaccr_encode</a></code> function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  input &lt;- c("20151031", "201408  ", "99999999")
  d &lt;- naaccr_date(input)
  d
  naaccr_encode(d, "dateOfDiagnosis")
</code></pre>

<hr>
<h2 id='naaccr_datetime'>Parse NAACCR-formatted datetimes</h2><span id='topic+naaccr_datetime'></span>

<h3>Description</h3>

<p>Parse NAACCR-formatted datetimes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_datetime(datetime)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_datetime_+3A_datetime">datetime</code></td>
<td>
<p>Character vector of datetimes in NAACCR format
(<code>"YYYYMMDDHHMMSS"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>POSIXct</code> vector. Any incomplete or invalid datetimes are
converted to <code>NA</code>. The original strings can be retrieved with the
<code><a href="#topic+naaccr_encode">naaccr_encode</a></code> function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  input &lt;- c("20151031100856", "20140822    ", "99999999")
  d &lt;- naaccr_datetime(input)
  d
  naaccr_encode(d, "pathDateSpecCollect1")
</code></pre>

<hr>
<h2 id='naaccr_encode'>Format a value as a string according to the NAACCR format</h2><span id='topic+naaccr_encode'></span>

<h3>Description</h3>

<p>Format a value as a string according to the NAACCR format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_encode(x, field, flag = NULL, version = NULL, format = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_encode_+3A_x">x</code></td>
<td>
<p>Vector of values.</p>
</td></tr>
<tr><td><code id="naaccr_encode_+3A_field">field</code></td>
<td>
<p>Character string naming the field.</p>
</td></tr>
<tr><td><code id="naaccr_encode_+3A_flag">flag</code></td>
<td>
<p>Character vector of flags for the field. Only needed if the
field contains sentinel values.</p>
</td></tr>
<tr><td><code id="naaccr_encode_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (the default), the most recent version is
used.</p>
</td></tr>
<tr><td><code id="naaccr_encode_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for writing the records.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of the values as they would be encoded in a
NAACCR-formatted text file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+split_sentineled">split_sentineled</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  r &lt;- naaccr_record(
    ageAtDiagnosis = c("089", "000", "200"),
    dateOfDiagnosis = c("20070402", "201709  ", "        ")
  )
  r
  mapply(FUN = naaccr_encode, x = r, field = names(r))
</code></pre>

<hr>
<h2 id='naaccr_factor'>Replace NAACCR codes with understandable factors</h2><span id='topic+naaccr_factor'></span>

<h3>Description</h3>

<p>Replace NAACCR codes with understandable factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_factor(x, field, keep_unknown = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_factor_+3A_x">x</code></td>
<td>
<p>Vector (usually character) of codes.</p>
</td></tr>
<tr><td><code id="naaccr_factor_+3A_field">field</code></td>
<td>
<p>String giving the XML name of the NAACCR field to code.</p>
</td></tr>
<tr><td><code id="naaccr_factor_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Logical indicating whether values of &quot;unknown&quot; should be
a level in the factor or <code>NA</code>.</p>
</td></tr>
<tr><td><code id="naaccr_factor_+3A_...">...</code></td>
<td>
<p>Additional arguments passed onto <code><a href="base.html#topic+factor">factor</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>factor</code> vector version of <code>x</code>. The levels are short
descriptions instead of the basic NAACCR codes. Codes which stood for
&quot;unknown&quot; with no further information are replaced with <code>NA</code>.
</p>
<p>If <code>field</code> names a text or site-specific field, <code>x</code> will be
returned unchanged with a warning.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  naaccr_factor(c("20", "43", "99"), "radRegionalRxModality")
  naaccr_factor(c("USA", "GER", "XEN"), "addrAtDxCountry")
  # Default: NA for unknowns,
  naaccr_factor(c("1", "8", "9"), "tumorGrowthPattern")
  naaccr_factor(c("1", "8", "9"), "tumorGrowthPattern", keep_unknown = TRUE)
</code></pre>

<hr>
<h2 id='naaccr_formats'>Field definitions from all NAACCR format versions</h2><span id='topic+naaccr_formats'></span><span id='topic+naaccr_format_12'></span><span id='topic+naaccr_format_13'></span><span id='topic+naaccr_format_14'></span><span id='topic+naaccr_format_15'></span><span id='topic+naaccr_format_16'></span><span id='topic+naaccr_format_18'></span><span id='topic+naaccr_format_21'></span><span id='topic+naaccr_format_22'></span><span id='topic+naaccr_format_23'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+record_format">record_format</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_formats

naaccr_format_12

naaccr_format_13

naaccr_format_14

naaccr_format_15

naaccr_format_16

naaccr_format_18

naaccr_format_21

naaccr_format_22

naaccr_format_23
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 18.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 509 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 529 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 548 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 555 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 587 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 791 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 800 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 810 rows and 12 columns.
</p>
<p>An object of class <code>record_format</code> (inherits from <code>data.table</code>, <code>data.frame</code>) with 782 rows and 12 columns.
</p>


<h3>Details</h3>

<p>Each <code>naaccr_format_XX</code> object is a <code>data.table</code> defining the
fields for each version of NAACCR's record file format.
<code>naaccr_formats</code> is a list of these record formats, with each name
being the two- or three-digit code for the format.
</p>

<hr>
<h2 id='naaccr_override'>Interpret basic over-ride flags</h2><span id='topic+naaccr_override'></span>

<h3>Description</h3>

<p>Interpret basic over-ride flags
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_override(flag)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_override_+3A_flag">flag</code></td>
<td>
<p>Character vector of over-ride flags. Its values should only
include <code>""</code> (blank), <code>"1"</code>, and possibly <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>logical</code> vector with the interpreted values of <code>flag</code>.
The interpretation follows these rules: <code>"1"</code> goes to <code>TRUE</code>
(reviewed and confirmed as reported), <code>""</code> (blank) goes to
<code>FALSE</code> (not reviewed or reviewed and corrected), and all other values
go to <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  naaccr_override(c("", "1", NA, "9"))
</code></pre>

<hr>
<h2 id='naaccr_record'>Analysis-ready NAACCR records</h2><span id='topic+naaccr_record'></span>

<h3>Description</h3>

<p>Subclass of <code>data.frame</code> for doing analysis with NAACCR records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naaccr_record(..., keep_unknown = FALSE, version = NULL, format = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naaccr_record_+3A_...">...</code></td>
<td>
<p>Arguments of the form <code>tag = value</code>, where <code>tag</code> is a
valid NAACCR data item name and <code>value</code> is the vector of the item's
values from the NAACCR format.</p>
</td></tr>
<tr><td><code id="naaccr_record_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Logical indicating whether values of &quot;unknown&quot; should be
a level in the factor or <code>NA</code>.</p>
</td></tr>
<tr><td><code id="naaccr_record_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (default), the most recent NAACCR format
will be used.</p>
</td></tr>
<tr><td><code id="naaccr_record_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for parsing the records.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>naaccr_record</code> creates a <code>data.frame</code> of cancer incidence records
ready for analysis:
columns are of appropriate classes, coded values are replaced with factors,
and unknowns are replaced with <code>NA</code>.
</p>


<h3>Value</h3>

<p>A <code>naaccr_record</code> with columns named using the NAACCR XML scheme.
It inherits from <code>data.frame</code>.
</p>

<hr>
<h2 id='read_naaccr_plain'>Read NAACCR records from a file</h2><span id='topic+read_naaccr_plain'></span><span id='topic+read_naaccr'></span><span id='topic+read_naaccr_xml_plain'></span><span id='topic+read_naaccr_xml'></span>

<h3>Description</h3>

<p>Read and parse cancer incidence records according to a NAACCR format from
either fixed-width files (<code>read_naaccr</code> and <code>read_naaccr_plain</code>)
or XML documents (<code>read_naaccr_xml</code> and <code>read_naaccr_xml_plain</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_naaccr_plain(
  input,
  version = NULL,
  format = NULL,
  keep_fields = NULL,
  skip = 0,
  nrows = Inf,
  buffersize = 10000,
  encoding = getOption("encoding")
)

read_naaccr(
  input,
  version = NULL,
  format = NULL,
  keep_fields = NULL,
  keep_unknown = FALSE,
  skip = 0,
  nrows = Inf,
  buffersize = 10000,
  encoding = getOption("encoding"),
  ...
)

read_naaccr_xml_plain(
  input,
  version = NULL,
  format = NULL,
  keep_fields = NULL,
  as_text = FALSE,
  encoding = getOption("encoding")
)

read_naaccr_xml(
  input,
  version = NULL,
  format = NULL,
  keep_fields = NULL,
  keep_unknown = FALSE,
  as_text = FALSE,
  encoding = getOption("encoding"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_naaccr_plain_+3A_input">input</code></td>
<td>
<p>Either a string with a file name (containing no <code>\n</code>
character), a <code><a href="base.html#topic+connections">connection</a></code> object, or the text records
themselves as a character vector.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (default), the most recent NAACCR format
will be used.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for parsing the records.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_keep_fields">keep_fields</code></td>
<td>
<p>Character vector of XML field names to keep in the
dataset. If <code>NULL</code> (default), all columns are kept.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_skip">skip</code></td>
<td>
<p>An integer specifying the number of lines of the data file to
skip before beginning to read data.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_nrows">nrows</code></td>
<td>
<p>A number specifying the maximum number of records to read.
<code>Inf</code> (the default) means &quot;all records.&quot;</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_buffersize">buffersize</code></td>
<td>
<p>Maximum number of lines to read at one time.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_encoding">encoding</code></td>
<td>
<p>String giving the input's encoding. See the 'Encoding'
section of <code><a href="base.html#topic+connections">file</a></code> in the <span class="pkg">base</span> package.
For <code>read_naaccr_xml</code> and <code>read_naaccr_xml_plain</code>, this is a
<em>backup</em> encoding. If the XML document includes an encoding
specification, that will be used. Otherwise, <code>encoding</code> will be used.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_keep_unknown">keep_unknown</code></td>
<td>
<p>Logical indicating whether values of &quot;unknown&quot; should be
a level in the factor or <code>NA</code>.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_...">...</code></td>
<td>
<p>Additional arguments passed onto <code><a href="#topic+as.naaccr_record">as.naaccr_record</a></code>.</p>
</td></tr>
<tr><td><code id="read_naaccr_plain_+3A_as_text">as_text</code></td>
<td>
<p>Logical indicating (if <code>TRUE</code>) that <code>input</code> is a
character string containing XML or (if <code>FALSE</code>) it is the path to a
file with XML content.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>read_naaccr</code> and <code>read_naaccr_xml</code> return data sets suited for
analysis in R.
<code>read_naaccr_plain</code> and <code>read_naaccr_xml_plain</code> return data sets
with the unchanged record values.
</p>
<p>Anyone who wants to analyze the records in R should use <code>read_naaccr</code>
or <code>read_naaccr_xml</code>.
In the returned <code><a href="#topic+naaccr_record">naaccr_record</a></code>, columns are of appropriate
classes, coded values are replaced with factors, and unknowns are replaced
with <code>NA</code>.
</p>
<p><code>read_naaccr_plain</code> and <code>read_naaccr_xml_plain</code> is a &quot;format strict&quot;
way to read incidence records.
All values returned are the literal character values from the records.
The only processing done is that leading and trailing whitespace is trimmed.
This is useful if the values will be passed to other software that expects
the plain NAACCR values.
</p>
<p>For <code>read_naaccr_plain</code> and <code>read_naaccr</code>, if the <code>version</code>
and <code>format</code> arguments are left <code>NULL</code>, the default format is
version 18. This was the last format to be used for fixed-width files.
</p>


<h3>Value</h3>

<p>For <code>read_naaccr</code>, a <code>data.frame</code> of the records.
The columns included depend on the NAACCR <code><a href="#topic+record_format">record_format</a></code> version.
Columns are atomic vectors; there are too many to describe them all.
</p>
<p>For <code>read_naaccr_plain</code>, a <code>data.frame</code> based on the
<code>record_format</code> specified by either the <code>version</code> or
<code>format</code> argument.
The names of the columns will be those in the format's <code>name</code> column.
All columns are character vectors.
</p>


<h3>Note</h3>

<p>Some of the parameter text was shamelessly copied from the
<code><a href="utils.html#topic+read.table">read.table</a></code> and <code><a href="utils.html#topic+read.fwf">read.fwf</a></code> help
pages.
</p>


<h3>References</h3>

<p>North American Association of Central Cancer Registries (October 2018).
Standards for Cancer Registries Volume II: Data Standards and Data Dictionary.
Twenty first edition.
<a href="http://datadictionary.naaccr.org/">http://datadictionary.naaccr.org/</a>.
</p>
<p>North American Association of Central Cancer Registries (April 2019).
NAACCR XML Data Exchange Standard. Version 1.4.
<a href="https://www.naaccr.org/xml-data-exchange-standard/">https://www.naaccr.org/xml-data-exchange-standard/</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+naaccr_record">naaccr_record</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # This file has synthetic abstract records
  incfile &lt;- system.file(
    "extdata", "synthetic-naaccr-18-abstract.txt",
    package = "naaccr"
  )
  fields &lt;- c("ageAtDiagnosis", "sex", "sequenceNumberCentral")
  read_naaccr(incfile, version = 18, keep_fields = fields)
  recs &lt;- read_naaccr_plain(incfile, version = 18, keep_fields = fields)
  recs
  # Note sequenceNumberCentral has been split in two: a number and a flag
  summary(recs[["sequenceNumberCentral"]])
  summary(recs[["sequenceNumberCentralFlag"]])
</code></pre>

<hr>
<h2 id='record_format'>Define custom fields for NAACCR records</h2><span id='topic+record_format'></span><span id='topic+as.record_format'></span>

<h3>Description</h3>

<p>Create a <code>record_format</code> object, which is used to read NAACCR records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>record_format(
  name,
  item,
  start_col = NA_integer_,
  end_col = NA_integer_,
  type = "character",
  alignment = "left",
  padding = " ",
  parent = "Tumor",
  cleaner = list(NULL),
  unknown_finder = list(NULL),
  name_literal = NA_character_,
  width = NA_integer_
)

as.record_format(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="record_format_+3A_name">name</code></td>
<td>
<p>Item name appropriate for a <code>data.frame</code> column name.</p>
</td></tr>
<tr><td><code id="record_format_+3A_item">item</code></td>
<td>
<p>NAACCR item number.</p>
</td></tr>
<tr><td><code id="record_format_+3A_start_col">start_col</code></td>
<td>
<p>First column of the field in a fixed-width record.</p>
</td></tr>
<tr><td><code id="record_format_+3A_end_col">end_col</code></td>
<td>
<p>*Deprecated: Use the <code>width</code> parameter instead.*
Last column of the field in a fixed-width record.</p>
</td></tr>
<tr><td><code id="record_format_+3A_type">type</code></td>
<td>
<p>Name of the column class.</p>
</td></tr>
<tr><td><code id="record_format_+3A_alignment">alignment</code></td>
<td>
<p>Alignment of the field in fixed-width files. Either
<code>"left"</code> (default) or <code>"right"</code>.</p>
</td></tr>
<tr><td><code id="record_format_+3A_padding">padding</code></td>
<td>
<p>Single-character strings to use for padding in fixed-width
files.</p>
</td></tr>
<tr><td><code id="record_format_+3A_parent">parent</code></td>
<td>
<p>Name of the parent node to include this field under when
writing to an XML file.
Values can be <code>"NaaccrData"</code>, <code>"Patient"</code>, <code>"Tumor"</code>, or
<code>NA</code> (default).
Fields with <code>NA</code> for parent won't be included in an XML file.</p>
</td></tr>
<tr><td><code id="record_format_+3A_cleaner">cleaner</code></td>
<td>
<p>(Optional) List of functions to handle special cases of
cleaning field data (e.g., convert all values to uppercase).
Values of <code>NULL</code> (the default) mean the default cleaning function for
the <code>type</code> is used.
The value can also be the name of a function to retrieve with
<code><a href="methods.html#topic+methodUtilities">getFunction</a></code>.
See Details.</p>
</td></tr>
<tr><td><code id="record_format_+3A_unknown_finder">unknown_finder</code></td>
<td>
<p>(Optional) List of functions to detect when codes mean
the actual values are unknown or not applicable.
Values of <code>NULL</code> (the default) mean the default unknown finding
function for the <code>type</code> is used.
The value can also be the name of a function to retrieve with
<code><a href="methods.html#topic+methodUtilities">getFunction</a></code>.
See Details.</p>
</td></tr>
<tr><td><code id="record_format_+3A_name_literal">name_literal</code></td>
<td>
<p>(Optional) Item name in plain language.</p>
</td></tr>
<tr><td><code id="record_format_+3A_width">width</code></td>
<td>
<p>(Optional) Item width in characters.</p>
</td></tr>
<tr><td><code id="record_format_+3A_x">x</code></td>
<td>
<p>Object to be coerced to a <code>record_format</code>, usually a
<code>data.frame</code> or <code>list</code>.</p>
</td></tr>
<tr><td><code id="record_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code>record_format</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To define registry-specific fields in addition to the standard fields, create
a <code>record_format</code> object for the registry-specific fields and combine it
with one of the formats provided with the package using <code>rbind</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"record_format"</code> which has the following
columns:
</p>

<dl>
<dt><code>name</code></dt><dd>
<p>(<code>character</code>) XML field name.
</p>
</dd>
<dt><code>item</code></dt><dd>
<p>(<code>integer</code>) Field item number.
</p>
</dd>
<dt><code>start_col</code></dt><dd>
<p>(<code>integer</code>) First column of the field in a fixed-width text file.
If <code>NA</code>, the field will not be read from or written to fixed-width
files. They will included in XML files.
</p>
</dd>
<dt><code>end_col</code></dt><dd>
<p>(<code>integer</code>) (*Deprecated: Use <code>width</code> instead.*)
Last column of the field in a fixed-width text file.
If <code>NA</code>, the field will not be read from or written to fixed-width
files. This is the norm for fields only found in XML formats.
</p>
</dd>
<dt><code>type</code></dt><dd>
<p>(<code>factor</code>) R class for the column vector.
</p>
</dd>
<dt><code>alignment</code></dt><dd>
<p>(<code>factor</code>) Alignment of the field's values in a fixed-width
text file.
</p>
</dd>
<dt><code>padding</code></dt><dd>
<p>(<code>character</code>) String used for padding field values in a
fixed-width text file.
</p>
</dd>
<dt><code>parent</code></dt><dd>
<p>(<code>factor</code>) Parent XML node for the field. One of
<code>"NaaccrData"</code>, <code>"Patient"</code>, or <code>"Tumor"</code>.
</p>
</dd>
<dt><code>cleaner</code></dt><dd>
<p>(<code>list</code> of <code>function</code> objects) Function to prepare the
field's values for analysis.
Values of <code>NULL</code> will use the standard cleaner functions for the
<code>type</code> (see below).
</p>
</dd>
<dt><code>unknown_finder</code></dt><dd>
<p>(<code>list</code> of <code>function</code> objects) Function to detect codes
meaning the actual values are missing or unknown for the field.
</p>
</dd>
<dt><code>name_literal</code></dt><dd>
<p>(<code>character</code>) Field name in plain language.
</p>
</dd>
<dt><code>width</code></dt><dd>
<p>(<code>integer</code>) Character width of the field values.
Mostly meant for reading and writing flat files.
</p>
</dd>
</dl>



<h3>Format Types</h3>

<p>The levels <code>type</code> can take, along with the functions used to process
them when reading a file:
</p>

<dl>
<dt><code>address</code></dt><dd>
<p>(<code><a href="#topic+clean_address_number_and_street">clean_address_number_and_street</a></code>)
Street number and street name parts of an address.
</p>
</dd>
<dt><code>age</code></dt><dd>
<p>(<code><a href="#topic+clean_age">clean_age</a></code>)
Age in years.
</p>
</dd>
<dt><code>boolean01</code></dt><dd>
<p>(<code><a href="#topic+naaccr_boolean">naaccr_boolean</a></code>, with <code>false_value = "0"</code>)
True/false, where <code>"0"</code> means false and <code>"1"</code> means true.
</p>
</dd>
<dt><code>boolean12</code></dt><dd>
<p>(<code><a href="#topic+naaccr_boolean">naaccr_boolean</a></code>, with <code>false_value = "1"</code>)
True/false, where <code>"1"</code> means false and <code>"2"</code> means true.
</p>
</dd>
<dt><code>census_block</code></dt><dd>
<p>(<code><a href="#topic+clean_census_block">clean_census_block</a></code>)
Census Block ID number.
</p>
</dd>
<dt><code>census_tract</code></dt><dd>
<p>(<code><a href="#topic+clean_census_tract">clean_census_tract</a></code>)
Census Tract ID number.
</p>
</dd>
<dt><code>character</code></dt><dd>
<p>(<code><a href="#topic+clean_text">clean_text</a></code>)
Miscellaneous text.
</p>
</dd>
<dt><code>city</code></dt><dd>
<p>(<code><a href="#topic+clean_address_city">clean_address_city</a></code>)
City name.
</p>
</dd>
<dt><code>count</code></dt><dd>
<p>(<code><a href="#topic+clean_count">clean_count</a></code>)
Integer count.
</p>
</dd>
<dt><code>county</code></dt><dd>
<p>(<code><a href="#topic+clean_county_fips">clean_county_fips</a></code>)
County FIPS code.
</p>
</dd>
<dt><code>Date</code></dt><dd>
<p>(<code><a href="base.html#topic+as.Date">as.Date</a></code>, with <code>format = "%Y%m%d"</code>)
NAACCR-formatted date (YYYYMMDD).
</p>
</dd>
<dt><code>datetime</code></dt><dd>
<p>(<code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>, with <code>format = "%Y%m%d%H%M%S"</code>)
NAACCR-formatted datetime (YYYYMMDDHHMMSS)
</p>
</dd>
<dt><code>facility</code></dt><dd>
<p>(<code><a href="#topic+clean_facility_id">clean_facility_id</a></code>)
Facility ID number.
</p>
</dd>
<dt><code>icd_9</code></dt><dd>
<p>(<code><a href="#topic+clean_icd_9_cm">clean_icd_9_cm</a></code>)
ICD-9-CM code.
</p>
</dd>
<dt><code>icd_code</code></dt><dd>
<p>(<code><a href="#topic+clean_icd_code">clean_icd_code</a></code>)
ICD-9 or ICD-10 code.
</p>
</dd>
<dt><code>integer</code></dt><dd>
<p>(<code><a href="base.html#topic+as.integer">as.integer</a></code>)
Miscellaneous whole number.
</p>
</dd>
<dt><code>numeric</code></dt><dd>
<p>(<code><a href="base.html#topic+as.numeric">as.numeric</a></code>)
Miscellaneous decimal number.
</p>
</dd>
<dt><code>override</code></dt><dd>
<p>(<code><a href="#topic+naaccr_override">naaccr_override</a></code>)
Field describing why another field's value was over-ridden.
</p>
</dd>
<dt><code>physician</code></dt><dd>
<p>(<code><a href="#topic+clean_physician_id">clean_physician_id</a></code>)
Physician ID number.
</p>
</dd>
<dt><code>postal</code></dt><dd>
<p>(<code><a href="#topic+clean_postal">clean_postal</a></code>)
Postal code for an address (a.k.a. ZIP code in the United States).
</p>
</dd>
<dt><code>ssn</code></dt><dd>
<p>(<code><a href="#topic+clean_ssn">clean_ssn</a></code>)
Social Security Number.
</p>
</dd>
<dt><code>telephone</code></dt><dd>
<p>(<code><a href="#topic+clean_telephone">clean_telephone</a></code>)
10-digit telephone number.
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>  my_fields &lt;- record_format(
    name      = c("foo", "bar", "baz"),
    item      = c(2163, 1180, 1181),
    start_col = c(975, 1381, NA),
    width     = c(1, 55, 4),
    type      = c("numeric", "facility", "character"),
    parent    = c("Patient", "Tumor", "Tumor"),
    cleaner   = list(NULL, NULL, trimws)
  )
  my_format &lt;- rbind(naaccr_format_16, my_fields)
</code></pre>

<hr>
<h2 id='split_sentineled'>Separate a field's continuous and sentinel values</h2><span id='topic+split_sentineled'></span>

<h3>Description</h3>

<p>Separate a sentineled field's values into two vectors: one with the
continuous data and one with the sentinel values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_sentineled(x, field)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_sentineled_+3A_x">x</code></td>
<td>
<p>Vector (usually character) of codes.</p>
</td></tr>
<tr><td><code id="split_sentineled_+3A_field">field</code></td>
<td>
<p>String giving the XML name of the NAACCR field to code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>field</code> is a sentineled field, a <code>data.frame</code> with two
columns. The first is a <code>numeric</code> version of the continuous values
from <code>x</code>. Its name is the value of <code>field</code>. The second is a
<code>factor</code> with levels representing the sentinel values. For all
non-missing values in the numeric vector, the respective value in the
factor is <code>NA</code>. If a value of <code>x</code> was not valid, the respective
row will be <code>NA</code> for the continuous and flag values.
</p>
<p>If <code>field</code> is not a sentineled field, a data.frame with just <code>x</code>
is returned with a warning.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  node_codes &lt;- c("10", "20", "90", "95", "99", NA)
  s &lt;- split_sentineled(node_codes, "regionalNodesPositive")
  print(s)
  s[is.na(s[["regionalNodesPositive"]]), "regionalNodesPositiveFlag"]
</code></pre>

<hr>
<h2 id='split_sequence_number'>Unpack tumor sequence number data</h2><span id='topic+split_sequence_number'></span>

<h3>Description</h3>

<p>Separate the multiple types of information in <code>sequenceNumberCentral</code>
and <code>sequenceNumberHospital</code> into multiple columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_sequence_number(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_sequence_number_+3A_x">x</code></td>
<td>
<p>Vector (usually character) of sequence number codes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with three columns:
</p>

<dl>
<dt>sequenceNumber</dt><dd>
<p>(<code>integer</code>) The number of the tumor in chronological sequence for
the patient.
</p>
</dd>
<dt>reportable</dt><dd>
<p>(<code>logical</code>) If <code>TRUE</code>, then the tumor is required to be
reported by SEER/NPCR standards. If <code>FALSE</code>, it is either
non-malignant or defined as reportable by the registry.
</p>
</dd>
<dt>onlyTumor</dt><dd>
<p>(<code>logical</code>) If <code>TRUE</code>, this is the only known
SEER/NPCR-reportable or the only known non-SEER/NPCR-reportable tumor
for the patient.
</p>
</dd>
<dt>sequenceFlag</dt><dd>
<p>(<code>factor</code>) Special flags, such as unknowns or changes in reporting
requirements. Created using <code><a href="#topic+split_sentineled">split_sentineled</a></code>.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+split_sentineled">split_sentineled</a></code>
</p>

<hr>
<h2 id='unknown_to_na'>Replace labels for unknown with NA</h2><span id='topic+unknown_to_na'></span><span id='topic+unknown_to_na.naaccr_record'></span><span id='topic+unknown_to_na.factor'></span>

<h3>Description</h3>

<p>Replace labels for unknown with NA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unknown_to_na(x, ...)

## S3 method for class 'naaccr_record'
unknown_to_na(x, ...)

## S3 method for class 'factor'
unknown_to_na(x, field, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unknown_to_na_+3A_x">x</code></td>
<td>
<p>Either a factor created with <code><a href="#topic+naaccr_factor">naaccr_factor</a></code>, or a
<code><a href="#topic+naaccr_record">naaccr_record</a></code> object.</p>
</td></tr>
<tr><td><code id="unknown_to_na_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="unknown_to_na_+3A_field">field</code></td>
<td>
<p>String giving the XML name of the NAACCR field to code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>x</code> was a <code>factor</code>, then the result is a vector with the
values of <code>x</code>, except all levels which effectively mean &quot;unknown&quot; are
replaced with <code>NA</code>.
The returned factor won't have those in its levels, either.
</p>
<p>If <code>x</code> is a <code>naaccr_record</code> object, then the result is the
<code>naaccr_record</code> created by applying this function to all columns of
<code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  r &lt;- naaccr_record(
    sex = c("1", "2", "9"),
    kras = c("8", "9", "3"),
    keep_unknown = TRUE
  )
  r
  unknown_to_na(r[["sex"]], field = "sex")
  unknown_to_na(r)
</code></pre>

<hr>
<h2 id='write_naaccr'>Write records in NAACCR format</h2><span id='topic+write_naaccr'></span>

<h3>Description</h3>

<p>Write records from a <code><a href="#topic+naaccr_record">naaccr_record</a></code> object to a connection in
fixed-width format, according to a specific version of the NAACCR format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_naaccr(records, con, version = NULL, format = NULL, encoding = "UTF-8")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_naaccr_+3A_records">records</code></td>
<td>
<p>A <code>naaccr_record</code> object.</p>
</td></tr>
<tr><td><code id="write_naaccr_+3A_con">con</code></td>
<td>
<p>Either a character string naming a file or a
<code><a href="base.html#topic+connections">connection</a></code> open for writing.</p>
</td></tr>
<tr><td><code id="write_naaccr_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (the default), the most recent version is
used.</p>
</td></tr>
<tr><td><code id="write_naaccr_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for writing the records.</p>
</td></tr>
<tr><td><code id="write_naaccr_+3A_encoding">encoding</code></td>
<td>
<p>String specifying the character encoding for the output file.</p>
</td></tr>
</table>

<hr>
<h2 id='write_naaccr_xml'>Write records to a NAACCR-formatted XML file</h2><span id='topic+write_naaccr_xml'></span>

<h3>Description</h3>

<p>Write records to a NAACCR-formatted XML file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_naaccr_xml(
  records,
  con,
  version = NULL,
  format = NULL,
  base_dictionary = NULL,
  user_dictionary = NULL,
  encoding = "UTF-8"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_naaccr_xml_+3A_records">records</code></td>
<td>
<p>A <code>naaccr_record</code> object.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_con">con</code></td>
<td>
<p>Either a character string naming a file or a
<code><a href="base.html#topic+connections">connection</a></code> open for writing.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_version">version</code></td>
<td>
<p>An integer specifying the NAACCR format version for parsing
the records. Use this or <code>format</code>, not both. If both <code>version</code>
and <code>format</code> are <code>NULL</code> (the default), the most recent version is
used.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_format">format</code></td>
<td>
<p>A <code><a href="#topic+record_format">record_format</a></code> object for writing the records.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_base_dictionary">base_dictionary</code></td>
<td>
<p>URI for the dictionary defining the NAACCR data items.
If this is <code>NULL</code> and either <code>version</code> is not <code>NULL</code> or
<code>format</code> is one of the standard NAACCR formats, then the URI from
NAACCR's website for that version's dictionary will be used.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_user_dictionary">user_dictionary</code></td>
<td>
<p>URI for the dictionary defining the user-specified
data items.  If <code>NULL</code> (default), it won't be included in the XML.</p>
</td></tr>
<tr><td><code id="write_naaccr_xml_+3A_encoding">encoding</code></td>
<td>
<p>String specifying the character encoding for the output file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the
<code><a href="XML.html#topic+XMLInternalDocument-class">XMLInternalDocument</a></code> object which
was written to <code>con</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
