<!DOCTYPE html><html lang="en"><head><title>Help for package OOBCurve</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OOBCurve}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#OOBCurve'><p>Out of Bag Learning curve</p></a></li>
<li><a href='#OOBCurvePars'><p>OOBCurvePars</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Out of Bag Learning Curve</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions to calculate the out-of-bag learning curve for random forests for any measure that is available in the 'mlr' package. Supported random forest packages are 'randomForest' and 'ranger' and trained models of these packages with the train function of 'mlr'. The main function is OOBCurve() that calculates the out-of-bag curve depending on the number of trees. With the OOBCurvePars() function out-of-bag curves can also be calculated for 'mtry', 'sample.fraction' and 'min.node.size' for the 'ranger' package.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/PhilippPro/OOBCurve">https://github.com/PhilippPro/OOBCurve</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/PhilippPro/OOBCurve/issues">https://github.com/PhilippPro/OOBCurve/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.3), mlr (&ge; 2.11)</td>
</tr>
<tr>
<td>Imports:</td>
<td>randomForest, ranger</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-08-30</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-08-30 14:43:46 UTC; probst</td>
</tr>
<tr>
<td>Author:</td>
<td>Philipp Probst [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Philipp Probst &lt;philipp_probst@gmx.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-08-30 15:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='OOBCurve'>Out of Bag Learning curve</h2><span id='topic+OOBCurve'></span>

<h3>Description</h3>

<p>With the help of this function the out of bag learning curve for random forests 
can be created for any measure that is available in the mlr package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OOBCurve(mod, measures = list(auc), task, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="OOBCurve_+3A_mod">mod</code></td>
<td>
<p>An object of class <code>randomForest</code> or <code>ranger</code>, as that created by the 
function <code><a href="randomForest.html#topic+randomForest">randomForest</a></code>/<code><a href="ranger.html#topic+ranger">ranger</a></code> with option <code>keep.inbag = TRUE</code>.
Alternatively you can also use a randomForest or ranger model trained with <code><a href="mlr.html#topic+train">train</a></code> of <a href="https://github.com/mlr-org/mlr">mlr</a>.</p>
</td></tr>
<tr><td><code id="OOBCurve_+3A_measures">measures</code></td>
<td>
<p>List of performance measure(s) of mlr to evaluate. Default is auc only.
See the <a href="https://mlr-org.github.io/mlr/articles/measures.html">mlr tutorial</a> for a list of available measures 
for the corresponding task.</p>
</td></tr>
<tr><td><code id="OOBCurve_+3A_task">task</code></td>
<td>
<p>Learning task created by the function <code><a href="mlr.html#topic+makeClassifTask">makeClassifTask</a></code> or <code><a href="mlr.html#topic+makeRegrTask">makeRegrTask</a></code> of <a href="https://github.com/mlr-org/mlr">mlr</a>.</p>
</td></tr>
<tr><td><code id="OOBCurve_+3A_data">data</code></td>
<td>
<p>Original data that was used for training the random forest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with a column for each desired measure.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+OOBCurvePars">OOBCurvePars</a></code> for out-of-bag curves of other parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlr)
library(ranger)

# Classification
data = getTaskData(sonar.task)
sonar.task = makeClassifTask(data = data, target = "Class")
lrn = makeLearner("classif.ranger", keep.inbag = TRUE, par.vals = list(num.trees = 100))
mod = train(lrn, sonar.task)

# Alternatively use ranger directly
# mod = ranger(Class ~., data = data, num.trees = 100, keep.inbag = TRUE)
# Alternatively use randomForest
# mod = randomForest(Class ~., data = data, ntree = 100, keep.inbag = TRUE)

# Application of the main function
results = OOBCurve(mod, measures = list(mmce, auc, brier), task = sonar.task, data = data)
# Plot the generated results
plot(results$mmce, type = "l", ylab = "oob-mmce", xlab = "ntrees")
plot(results$auc, type = "l", ylab = "oob-auc", xlab = "ntrees")
plot(results$brier, type = "l", ylab = "oob-brier-score", xlab = "ntrees")

# Regression
data = getTaskData(bh.task)
bh.task = makeRegrTask(data = data, target = "medv")
lrn = makeLearner("regr.ranger", keep.inbag = TRUE, par.vals = list(num.trees = 100))
mod = train(lrn, bh.task)

# Application of the main function
results = OOBCurve(mod, measures = list(mse, mae, rsq), task = bh.task, data = data)
# Plot the generated results
plot(results$mse, type = "l", ylab = "oob-mse", xlab = "ntrees")
plot(results$mae, type = "l", ylab = "oob-mae", xlab = "ntrees")
plot(results$rsq, type = "l", ylab = "oob-mae", xlab = "ntrees")

</code></pre>

<hr>
<h2 id='OOBCurvePars'>OOBCurvePars</h2><span id='topic+OOBCurvePars'></span>

<h3>Description</h3>

<p>With the help of this function the out of bag curves for parameters like mtry, sample.fraction and 
min.node.size of random forests can be created for any measure that is available in the mlr package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OOBCurvePars(lrn, task, pars = c("mtry"), nr.grid = 10, par.vals = NULL,
  measures = list(auc))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="OOBCurvePars_+3A_lrn">lrn</code></td>
<td>
<p>The learner created with <code><a href="mlr.html#topic+makeLearner">makeLearner</a></code>. Currently only <code><a href="ranger.html#topic+ranger">ranger</a></code> is supported. 
num.trees has to be set sufficiently high to produce smooth curves.</p>
</td></tr>
<tr><td><code id="OOBCurvePars_+3A_task">task</code></td>
<td>
<p>Learning task created by the function <code><a href="mlr.html#topic+makeClassifTask">makeClassifTask</a></code> or <code><a href="mlr.html#topic+makeRegrTask">makeRegrTask</a></code> of <a href="https://github.com/mlr-org/mlr">mlr</a>.</p>
</td></tr>
<tr><td><code id="OOBCurvePars_+3A_pars">pars</code></td>
<td>
<p>One of the hyperparameter &quot;mtry&quot;, &quot;sample.fraction&quot; or &quot;min.node.size&quot;.</p>
</td></tr>
<tr><td><code id="OOBCurvePars_+3A_nr.grid">nr.grid</code></td>
<td>
<p>Number of points on hyperparameter space that should be evaluated (distributed equally)</p>
</td></tr>
<tr><td><code id="OOBCurvePars_+3A_par.vals">par.vals</code></td>
<td>
<p>Optional vector of hyperparameter points that should be evaluated. If set, nr.grid is not used anymore. Default is NULL.</p>
</td></tr>
<tr><td><code id="OOBCurvePars_+3A_measures">measures</code></td>
<td>
<p>List of performance measure(s) of mlr to evaluate. Default is mmce for classification and mse for regression.
See the <a href="https://mlr-org.github.io/mlr/articles/measures.html">mlr tutorial</a> for a list of available measures 
for the corresponding task.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with parameter values and a list of performances.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+OOBCurve">OOBCurve</a></code> for out-of-bag curves dependent on the number of trees.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mlr)
task = sonar.task

lrn = makeLearner("classif.ranger", predict.type = "prob", num.trees = 1000)
results = OOBCurvePars(lrn, task, measures = list(auc))
plot(results$par.vals, results$performances$auc, type = "l", xlab = "mtry", ylab = "auc")

lrn = makeLearner("classif.ranger", predict.type = "prob", num.trees = 1000, replace = FALSE)
results = OOBCurvePars(lrn, task, pars = "sample.fraction", measures = list(mmce))
plot(results$par.vals, results$performances$mmce, type = "l", xlab = "sample.fract.", ylab = "mmce")

results = OOBCurvePars(lrn, task, pars = "min.node.size", measures = list(mmce))
plot(results$par.vals, results$performances$mmce, type = "l", xlab = "min.node.size", ylab = "mmce")
## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
