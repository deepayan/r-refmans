<!DOCTYPE html><html><head><title>Help for package neatRanges</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {neatRanges}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#collapse_ranges'><p>Collapses the consecutive date or timestamp ranges into one record.</p></a></li>
<li><a href='#combine_ranges'><p>Combines ranges from different tables into a single table.</p></a></li>
<li><a href='#expand_dates'><p>Expand date ranges.</p></a></li>
<li><a href='#expand_times'><p>Expand timestamp ranges.</p></a></li>
<li><a href='#fill_ranges'><p>Fill the gaps between ranges.</p></a></li>
<li><a href='#partition_ranges'><p>Split ranges into multiple records</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Up Date/Time Ranges</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/arg0naut91/neatRanges/issues">https://github.com/arg0naut91/neatRanges/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Collapse, partition, combine, fill gaps in and expand date/time ranges.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/arg0naut91/neatRanges">https://github.com/arg0naut91/neatRanges</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, Rcpp (&ge; 1.0.8.3)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-17 11:59:22 UTC; Aljaz</td>
</tr>
<tr>
<td>Author:</td>
<td>Aljaz Jelenko [aut, cre],
  Patrik Punco [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aljaz Jelenko &lt;aljaz.jelenko@amis.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-18 07:40:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='collapse_ranges'>Collapses the consecutive date or timestamp ranges into one record.</h2><span id='topic+collapse_ranges'></span>

<h3>Description</h3>

<p>The date/time ranges where the gap between two records is equal to or less than max_gap parameter are collapsed into one record.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapse_ranges(
  df,
  groups = NULL,
  start_var = NULL,
  end_var = NULL,
  startAttr = NULL,
  endAttr = NULL,
  dimension = c("date", "timestamp"),
  max_gap = 0L,
  fmt = "%Y-%m-%d",
  tz = "UTC",
  origin = "1970-01-01"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="collapse_ranges_+3A_df">df</code></td>
<td>
<p>Your data frame (object of class 'data.frame' or 'data.table')</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_groups">groups</code></td>
<td>
<p>Grouping variables, character strings</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_start_var">start_var</code></td>
<td>
<p>Start of the range, character of length 1L</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_end_var">end_var</code></td>
<td>
<p>End of the range,  character of length 1L</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_startattr">startAttr</code></td>
<td>
<p>Attributes linked to start of the range which should be kept (converted to character type by default)</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_endattr">endAttr</code></td>
<td>
<p>Attributes linked to end of the range which should be kept (converted to character type by default)</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_dimension">dimension</code></td>
<td>
<p>Indicate whether your range includes only dates ('date') or also timestamp ('timestamp'). Defaults to 'date'</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_max_gap">max_gap</code></td>
<td>
<p>Gap between date or timestamp ranges, e.g. for 0, default, it will put together all records where there is no gap in-between</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_fmt">fmt</code></td>
<td>
<p>The format of your date or timestamp field, defaults to YMD</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_tz">tz</code></td>
<td>
<p>Time zone, defaults to UTC</p>
</td></tr>
<tr><td><code id="collapse_ranges_+3A_origin">origin</code></td>
<td>
<p>Origin for timestamp conversion, defaults to '1970-01-01'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'data.frame' if initial input is a 'data.frame', 'data.table' if original object is a 'data.table' with collapsed records.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df_collapse &lt;- data.frame(
  id = c(rep("1111", 3), rep("2222", 3)),
  rating = c("A+", "AA", "AA", rep("B-", 3)),
  start_date = c(
    "2014-01-01", "2015-01-01", "2016-01-01",
    "2017-01-01", "2018-01-01", "2019-01-01"
  ),
  end_date = c(
    "2014-12-31", "2015-12-31", "2016-03-01",
    "2017-01-31", "2018-12-31", "2020-02-01"
  )
)

collapse_ranges(df_collapse, c("id", "rating"), "start_date", "end_date")
</code></pre>

<hr>
<h2 id='combine_ranges'>Combines ranges from different tables into a single table.</h2><span id='topic+combine_ranges'></span>

<h3>Description</h3>

<p>Combines ranges from different tables into a single table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine_ranges(
  dfs,
  groups = NULL,
  start_var = NULL,
  end_var = NULL,
  startAttr = NULL,
  endAttr = NULL,
  dimension = "date",
  max_gap = 0L,
  fmt = "%Y-%m-%d",
  tz = "UTC",
  origin = "1970-01-01"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combine_ranges_+3A_dfs">dfs</code></td>
<td>
<p>A list of your data frames, e.g. list(df1, df2)</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_groups">groups</code></td>
<td>
<p>Grouping variables</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_start_var">start_var</code></td>
<td>
<p>Start of the range</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_end_var">end_var</code></td>
<td>
<p>End of the range</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_startattr">startAttr</code></td>
<td>
<p>Attributes linked to start of the range which should be kept (converted to character type by default)</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_endattr">endAttr</code></td>
<td>
<p>Attributes linked to end of the range which should be kept (converted to character type by default)</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_dimension">dimension</code></td>
<td>
<p>Indicate whether your range includes only dates ('date') or also timestamp ('timestamp'). Defaults to 'date'</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_max_gap">max_gap</code></td>
<td>
<p>Gap between date or timestamp ranges, e.g. for 0, default, it will put together all records where there is no gap in-between</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_fmt">fmt</code></td>
<td>
<p>The format of your date or timestamp field, defaults to YMD</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_tz">tz</code></td>
<td>
<p>Time zone, defaults to UTC</p>
</td></tr>
<tr><td><code id="combine_ranges_+3A_origin">origin</code></td>
<td>
<p>Origin for timestamp conversion, defaults to 1970-01-01</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame (if first table passed is data.table, then data.table) with combined ranges.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df1 &lt;- data.frame(
  start = c("2010-01-01", "2012-06-01", "2014-10-15"),
  end = c("2010-08-05", "2013-03-03", "2015-01-01"),
  group = c("a", "a", "b"),
  infoScores = c(0, 3, 2)
)

df2 &lt;- data.frame(
  end = c("2012-04-05", "2014-06-09", "2009-02-01"),
  group = c("b", "a", "b"),
  start = c("2009-01-15", "2012-07-08", "2008-01-01"),
  score = c(8, 2, 3)
)

combine_ranges(dfs = list(df1, df2), groups = "group",
start_var = "start", end_var = "end")
</code></pre>

<hr>
<h2 id='expand_dates'>Expand date ranges.</h2><span id='topic+expand_dates'></span>

<h3>Description</h3>

<p>Expand date ranges.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_dates(
  df,
  start_var,
  end_var,
  name = "Expanded",
  fmt = "%Y-%m-%d",
  vars_to_keep = NULL,
  unit = "day"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_dates_+3A_df">df</code></td>
<td>
<p>Data frame (can also be a data.table or a tibble)</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_start_var">start_var</code></td>
<td>
<p>Start Date column</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_end_var">end_var</code></td>
<td>
<p>End Date column</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_name">name</code></td>
<td>
<p>The name of newly created column. Defaults to 'Expanded'</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_fmt">fmt</code></td>
<td>
<p>The format of date columns, defaults to Y-M-D</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_vars_to_keep">vars_to_keep</code></td>
<td>
<p>Which columns you would like to keep</p>
</td></tr>
<tr><td><code id="expand_dates_+3A_unit">unit</code></td>
<td>
<p>By which unit of time you want to expand; the default is day</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a full data frame with expanded sequences in a column, e.g. by day or month.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(
id = c("1111", "2222", "3333"),
gender = c("M", "F", "F"),
start = c("2018-01-01", "2019-01-01", "2020-01-01"),
end = c("2018-01-05", "2019-01-07", "2020-01-08")
)

expand_dates(df, start_var = "start", end_var = "end",
vars_to_keep = c("id", "gender"), unit = "day")

</code></pre>

<hr>
<h2 id='expand_times'>Expand timestamp ranges.</h2><span id='topic+expand_times'></span>

<h3>Description</h3>

<p>Expand timestamp ranges.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_times(
  df,
  start_var,
  end_var,
  name = "Expanded",
  fmt = "%Y-%m-%d %H:%M:%OS",
  vars_to_keep = NULL,
  unit = "hour",
  tz = "UTC"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_times_+3A_df">df</code></td>
<td>
<p>Data frame (can also be a data.table or a tibble)</p>
</td></tr>
<tr><td><code id="expand_times_+3A_start_var">start_var</code></td>
<td>
<p>Start time column</p>
</td></tr>
<tr><td><code id="expand_times_+3A_end_var">end_var</code></td>
<td>
<p>End time column</p>
</td></tr>
<tr><td><code id="expand_times_+3A_name">name</code></td>
<td>
<p>The name of newly created column. Defaults to 'Expanded'</p>
</td></tr>
<tr><td><code id="expand_times_+3A_fmt">fmt</code></td>
<td>
<p>The format of date columns, defaults to Y-M-D H:M:OS</p>
</td></tr>
<tr><td><code id="expand_times_+3A_vars_to_keep">vars_to_keep</code></td>
<td>
<p>Which columns you would like to keep</p>
</td></tr>
<tr><td><code id="expand_times_+3A_unit">unit</code></td>
<td>
<p>By which unit of time you want to expand; the default is day</p>
</td></tr>
<tr><td><code id="expand_times_+3A_tz">tz</code></td>
<td>
<p>Desired time zone - defaults to UTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a full data frame with expanded sequences in a column, e.g. by day or month.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(
id = c("1111", "2222", "3333"),
gender = c("M", "F", "F"),
start = c("2018-01-01 15:00:00", "2019-01-01 14:00:00", "2020-01-01 19:00:00"),
end = c("2018-01-01 18:30:00", "2019-01-01 17:30:00", "2020-01-02 02:00:00")
)

expand_times(df, start_var = "start", end_var = "end",
vars_to_keep = c("id", "gender"), unit = "hour")

</code></pre>

<hr>
<h2 id='fill_ranges'>Fill the gaps between ranges.</h2><span id='topic+fill_ranges'></span>

<h3>Description</h3>

<p>Fill the gaps between ranges.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_ranges(
  df,
  groups = NULL,
  start_var = NULL,
  end_var = NULL,
  fill = NULL,
  dimension = "date",
  fmt = "%Y-%m-%d",
  tz = "UTC",
  origin = "1970-01-01"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fill_ranges_+3A_df">df</code></td>
<td>
<p>Your data frame</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_groups">groups</code></td>
<td>
<p>Grouping variables</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_start_var">start_var</code></td>
<td>
<p>Start of the range</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_end_var">end_var</code></td>
<td>
<p>End of the range</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_fill">fill</code></td>
<td>
<p>Fill the missing values for values coresponding to missing ranges, e.g. 'colname1 = 0, colname2 = Missing'</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_dimension">dimension</code></td>
<td>
<p>Indicate whether your range includes only dates ('date') or also timestamp ('timestamp'). Defaults to 'date'</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_fmt">fmt</code></td>
<td>
<p>The format of your date or timestamp field, defaults to YMD</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_tz">tz</code></td>
<td>
<p>Time zone, defaults to UTC</p>
</td></tr>
<tr><td><code id="fill_ranges_+3A_origin">origin</code></td>
<td>
<p>Origin for timestamp conversion, defaults to 1970-01-01</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ordered data frame (if initial input data.table, then data.table) with added missing ranges.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(
group = c("a", "a", "b", "b", "b"),
start = c("2007-01-01", "2010-06-02", "2009-04-05", "2012-08-01", "2019-03-19"),
end = c("2008-02-05", "2013-04-05", "2009-06-03", "2013-02-17", "2021-04-21"),
cost = c(143, 144, 105, 153, 124)
)

fill_ranges(df, start_var = "start", end_var = "end", groups = "group")
</code></pre>

<hr>
<h2 id='partition_ranges'>Split ranges into multiple records</h2><span id='topic+partition_ranges'></span>

<h3>Description</h3>

<p>Split ranges into multiple records
</p>


<h3>Usage</h3>

<pre><code class='language-R'>partition_ranges(
  df,
  start_var,
  end_var,
  fmt = "%Y-%m-%d",
  vars_to_keep = NULL,
  partition_by = "year"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="partition_ranges_+3A_df">df</code></td>
<td>
<p>Your data frame (can also be a data.table or a tibble)</p>
</td></tr>
<tr><td><code id="partition_ranges_+3A_start_var">start_var</code></td>
<td>
<p>Start variable</p>
</td></tr>
<tr><td><code id="partition_ranges_+3A_end_var">end_var</code></td>
<td>
<p>End variable</p>
</td></tr>
<tr><td><code id="partition_ranges_+3A_fmt">fmt</code></td>
<td>
<p>Format of the date; defaults to Y-m-d</p>
</td></tr>
<tr><td><code id="partition_ranges_+3A_vars_to_keep">vars_to_keep</code></td>
<td>
<p>Any column you'd like to retain (optional)</p>
</td></tr>
<tr><td><code id="partition_ranges_+3A_partition_by">partition_by</code></td>
<td>
<p>How should the range be partitioned ('year' or 'month'); defaults to 'year'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with start, end and optional grouping columns
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(group = c("a", "a", "b", "b", "c"),
start = c("2017-05-01", "2019-04-03", "2011-03-03", "2014-05-07", "2017-02-01"),
end = c("2018-09-01", "2020-04-03", "2012-05-03", "2016-04-02", "2017-04-05")
)

partition_ranges(df, "start", "end", partition_by = "month")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
