<!DOCTYPE html><html lang="en"><head><title>Help for package survivalAnalysis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survivalAnalysis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#analyse_multivariate'><p>Multivariate analysis (Cox Regression)</p></a></li>
<li><a href='#analyse_survival'><p>Univariate survival analysis</p></a></li>
<li><a href='#cox_as_data_frame'><p>Turns a coxph result to a data frame</p></a></li>
<li><a href='#forest_plot'><p>Forest plots for survival analysis.</p></a></li>
<li><a href='#forest_plot_grid'><p>Create a grid of forest plots</p></a></li>
<li><a href='#format.SurvivalAnalysisMultivariateResult'><p>Formats a SurvivalAnalysisMultivariateResult for printing</p></a></li>
<li><a href='#format.SurvivalAnalysisUnivariateResult'><p>Formats a SurvivalAnalysisUnivariateResult for printing</p></a></li>
<li><a href='#ggsurvplot_to_gtable'><p>Build a gtable representation from a ggsurvplot object</p></a></li>
<li><a href='#grid_layout'><p>Grid layouting</p></a></li>
<li><a href='#identity_order'><p>Ordering function: identity order</p></a></li>
<li><a href='#kaplan_meier_grid'><p>A grid of kaplan meier plots</p></a></li>
<li><a href='#kaplan_meier_plot'><p>Kaplan Meier plots from survival results.</p></a></li>
<li><a href='#multivariate_as_data_frame'><p>Turns a multivariate analysis result to a data frame</p></a></li>
<li><a href='#pluck_multivariate_analysis'><p>Access individual components of multivariate survival analysis</p></a></li>
<li><a href='#pluck_survival_analysis'><p>Access individual components of univariate survival analysis</p></a></li>
<li><a href='#print.SurvivalAnalysisMultivariateResult'><p>Print the essentials of a SurvivalAnalySurvivalAnalysisMultivariateResult</p></a></li>
<li><a href='#print.SurvivalAnalysisUnivariateResult'><p>Print the essentials of a SurvivalAnalysisUnivariateResult</p></a></li>
<li><a href='#survival_data_frames'><p>Extract results from univariate survival analysis structured as data frames</p></a></li>
<li><a href='#survival_essentials'><p>Convenience formatting and printing of result</p></a></li>
<li><a href='#write_survival'><p>Print the essentials of a SurvivalAnalysisUnivariateResult.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>High-Level Interface for Survival Analysis and Associated Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcel Wiesweg [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcel Wiesweg &lt;marcel.wiesweg@uk-essen.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A high-level interface to perform survival analysis, 
    including Kaplan-Meier analysis and log-rank tests and Cox regression.
    Aims at providing a clear and elegant syntax, support for use in a pipeline, structured output and plotting.
    Builds upon the 'survminer' package for Kaplan-Meier plots and provides
    a customizable implementation for forest plots.
    Kaplan &amp; Meier (1958) &lt;<a href="https://doi.org/10.1080%2F01621459.1958.10501452">doi:10.1080/01621459.1958.10501452</a>&gt;
    Cox (1972) &lt;JSTOR:2985181&gt;
    Peto &amp; Peto (1972) &lt;JSTOR:2344317&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, graphics, stats, utils, survival, rlang (&ge; 0.2.0),
dplyr (&ge; 0.8.0), forcats, magrittr, purrr, stringr, tibble,
tidyr, gridExtra, ggplot2 (&ge; 2.2.1), scales, survminer (&gt;
0.4.0), cowplot, tidytidbits</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, tidyverse</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-11 13:52:19 UTC; marcel</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-11 14:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='analyse_multivariate'>Multivariate analysis (Cox Regression)</h2><span id='topic+analyse_multivariate'></span><span id='topic+analyze_multivariate'></span>

<h3>Description</h3>

<p>Performs Cox regression on right-censored data using a multiple covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyse_multivariate(
  data,
  time_status,
  covariates,
  strata = NULL,
  covariate_name_dict = NULL,
  covariate_label_dict = NULL,
  reference_level_dict = NULL,
  sort_frame_by = vars(HR)
)

analyze_multivariate(
  data,
  time_status,
  covariates,
  strata = NULL,
  covariate_name_dict = NULL,
  covariate_label_dict = NULL,
  reference_level_dict = NULL,
  sort_frame_by = vars(HR)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analyse_multivariate_+3A_data">data</code></td>
<td>
<p>A data frame containing the time/status information and, if used, the covariate.</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_time_status">time_status</code></td>
<td>
<p>A vector of length 2 giving the time and status fields.
It is recommended to use vars() and symbolic column names or code that is tidily-evaluated on <code>data</code>.
You can also pass a character vector with the column names or a numeric vector with column indices.</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_covariates">covariates</code></td>
<td>
<p>The covariates.
Pass symbolic columns names or code that is tidily-evaluated on <code>data</code>.
Column names or column indices are also possible.
In any case, factors with appropriate labels will be generated which in all printouts.
You can use <code>covariate_name_dict</code> and <code>covariate_label_dict</code> to rename these factors and their levels.</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_strata">strata</code></td>
<td>
<p>Strata (optional). Same format as covariates.
For each strata level (if multiple fields, unique combinations of levels) a separate baseline hazard is fit.</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_covariate_name_dict">covariate_name_dict</code></td>
<td>
<p>A dictionary (named list or vector) of old-&gt;new covariate names</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_covariate_label_dict">covariate_label_dict</code></td>
<td>
<p>A dictionary (named list or vector) of old-&gt;new covariate value level labels</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_reference_level_dict">reference_level_dict</code></td>
<td>
<p>For categorical variables, the Cox regression uses pseudo variables for each level
relative to a reference category, resulting in n-1 variables for n levels of a categorical covariate.
Hazard ratios will be relative to the reference level, which is defined as having hazard ratio 1.0.
Per default, the reference level is the first factor level.
You can specify a different level by passing a named vector: factor name -&gt; value of reference level.
Note that this is independent of covariate_label_dict, i.e. specify the factor level as it is in <code>data</code>#'</p>
</td></tr>
<tr><td><code id="analyse_multivariate_+3A_sort_frame_by">sort_frame_by</code></td>
<td>
<p>A vars() list of one or more symbolic column names.
The result contains a data frame of the cox regression results (<code><a href="#topic+cox_as_data_frame">cox_as_data_frame</a></code>).
This frame contains the variables &quot;Lower_CI&quot;, &quot;HR&quot;, &quot;Upper_CI&quot;, &quot;Inv_Lower_CI&quot;, &quot;Inv_HR&quot;, &quot;Inv_Upper_CI&quot;, &quot;p&quot;.
You can specify by which variables the frame should be sorted. Default: Hazard Ratio.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method builds upon the <code>survival</code> package and returns a comprehensive result object
for survival analysis containing the coxph results.
A <code>format</code>/<code>print</code> method is provided that prints the essential statistics.
</p>


<h3>Value</h3>

<p>An object of class &quot;SurvivalAnalysisResult&quot; and &quot;SurvivalAnalysisMultivariateResult&quot;.
You can use this result as a black box for further functions in this package,
<code><a href="#topic+format.SurvivalAnalysisMultivariateResult">format</a></code> or
<code><a href="#topic+print.SurvivalAnalysisMultivariateResult">print</a></code> it,
retrieve information as a data frame via <code><a href="#topic+multivariate_as_data_frame">multivariate_as_data_frame</a></code> or
access individual pieces via <code><a href="#topic+pluck_multivariate_analysis">pluck_multivariate_analysis</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+forest_plot">forest_plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::colon %&gt;%
   analyse_multivariate(vars(time, status),
                        vars(rx, sex, age, obstruct, perfor, nodes, differ, extent)) %&gt;%
   print()
</code></pre>

<hr>
<h2 id='analyse_survival'>Univariate survival analysis</h2><span id='topic+analyse_survival'></span><span id='topic+analyze_survival'></span>

<h3>Description</h3>

<p>Performs survival analysis on right-censored data using a single covariate, or no covariate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyse_survival(
  data,
  time_status,
  by,
  by_label_map = NULL,
  by_order_vector = NULL,
  cox_reference_level = NULL,
  p_adjust_method = "none",
  plot_args = list()
)

analyze_survival(
  data,
  time_status,
  by,
  by_label_map = NULL,
  by_order_vector = NULL,
  cox_reference_level = NULL,
  p_adjust_method = "none",
  plot_args = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analyse_survival_+3A_data">data</code></td>
<td>
<p>A data frame containing the time/status information and, if used, the covariate.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_time_status">time_status</code></td>
<td>
<p>A vector of length 2 giving the time and status fields.
It is recommended to use vars() and symbolic column names or code that is tidily-evaluated on <code>data</code>.
You can also pass a character vector with the column names or a numeric vector with column indices.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_by">by</code></td>
<td>
<p>The term by which survival curves will be separated.
Pass <code>NULL</code> or omit to generate a single curve and only descriptive statistics.
Pass symbolic columns names or code that is tidily-evaluated on <code>data</code> to generate more than one curve,
and the appropriate statistics to compare the curves. A column name or column index is also possible.
In any case, the parameter will be used to create a factor with appropriate labels.
This factor will appear in all printouts and plots.
You can use <code>by_label_map</code> and <code>by_order_vector</code> to rename and reorder this factor.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_by_label_map">by_label_map</code></td>
<td>
<p>A dictionary (named list or vector) of old-&gt;new labels of the factor created using <code>by</code>.
The factor will be renamed accordingly, and also reordered by the order of the vector.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_by_order_vector">by_order_vector</code></td>
<td>
<p>A vector of the labels of the factor created using <code>by</code>,
after renaming them based on <code>by_label_map</code> (so specify the &quot;new&quot; level).
The factor will be ordered according to the order of this vector.
It need not contain all elements, only those found will be reorder at the top.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_cox_reference_level">cox_reference_level</code></td>
<td>
<p>The result will include a univariate Cox regression. Use this parameter to specify
the level of the factor generated using <code>by</code> that you want to use a the reference level
(Hazard ratios will be relative to the reference level, which is defined as having hazard ratio 1.0)
Note that the given string applies after all renaming has been done, so specify the &quot;new&quot; level.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_p_adjust_method">p_adjust_method</code></td>
<td>
<p>If there are more than two levels in the <code>by</code> factor,
the result will include the return value of pairwise_survdiff, which performs p adjustment.
You can specify the desired method here.
Note that other p values are not corrected, this is beyond the scope of this method.</p>
</td></tr>
<tr><td><code id="analyse_survival_+3A_plot_args">plot_args</code></td>
<td>
<p>Named list of arguments that will be stored for later use in plotting methods,
such as kaplan_meier_plot. There they will take precedence over arguments given to that method.
This is useful when plotting multiple results with a set of default arguments, of which some
such as title or axis scale differ per-plot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method builds upon the <code>survival</code> package and returns a comprehensive result object
for survival analysis containing the survfit, survdiff and coxph results.
A <code>format</code>/<code>print</code> method is provided that prints the essential statistics.
Kaplan-Meier plots are readily generated using the <code><a href="#topic+kaplan_meier_plot">kaplan_meier_plot</a></code> or
<code><a href="#topic+kaplan_meier_grid">kaplan_meier_grid</a></code> functions.
</p>


<h3>Value</h3>

<p>An object of class &quot;SurvivalAnalysisResult&quot; and &quot;SurvivalAnalysisUnivariateResult&quot;.
You can use this result as a black box for further functions in this package,
<code><a href="#topic+format.SurvivalAnalysisUnivariateResult">format</a></code> or
<code><a href="#topic+print.SurvivalAnalysisUnivariateResult">print</a></code> it,
retrieve information as a data frame via <code><a href="#topic+survival_data_frames">survival_data_frames</a></code> or
access individual pieces via <code><a href="#topic+pluck_survival_analysis">pluck_survival_analysis</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::aml %&gt;%
  analyse_survival(vars(time, status), x) %&gt;%
  print
</code></pre>

<hr>
<h2 id='cox_as_data_frame'>Turns a coxph result to a data frame</h2><span id='topic+cox_as_data_frame'></span>

<h3>Description</h3>

<p>Extracts useful information from a coxph/summary.coxph into a data frame which is ready
for printing or further analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cox_as_data_frame(
  coxphsummary,
  unmangle_dict = NULL,
  factor_id_sep = ":",
  sort_by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cox_as_data_frame_+3A_coxphsummary">coxphsummary</code></td>
<td>
<p>The summary.coxph or coxph result object</p>
</td></tr>
<tr><td><code id="cox_as_data_frame_+3A_unmangle_dict">unmangle_dict</code></td>
<td>
<p>An unmangle dict of mangled column name -&gt; readable column name (as created by analyse_multivariate)</p>
</td></tr>
<tr><td><code id="cox_as_data_frame_+3A_factor_id_sep">factor_id_sep</code></td>
<td>
<p>The frame contains one column &quot;factor.id&quot; which is a composite of covariate name and,
if categorical, the factor level (one line for each factor level except for the reference level)</p>
</td></tr>
<tr><td><code id="cox_as_data_frame_+3A_sort_by">sort_by</code></td>
<td>
<p>A vars() list of one or more symbolic column names.
This frame contains the variables &quot;Lower_CI&quot;, &quot;HR&quot;, &quot;Upper_CI&quot;, &quot;Inv_Lower_CI&quot;, &quot;Inv_HR&quot;, &quot;Inv_Upper_CI&quot;, &quot;p&quot;.
You can choose to sort by any combination. Use desc() to sort a variable in descending order.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>

<hr>
<h2 id='forest_plot'>Forest plots for survival analysis.</h2><span id='topic+forest_plot'></span><span id='topic+forest_plot.df'></span>

<h3>Description</h3>

<p>Creates a forest plot from SurvivalAnalysisResult objects.
Both univariate (<code><a href="#topic+analyse_survival">analyse_survival</a></code>) results, typically with use_one_hot=TRUE,
and multivariate (<code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code>) results are acceptable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forest_plot(
  ...,
  use_one_hot = FALSE,
  factor_labeller = identity,
  endpoint_labeller = identity,
  orderer = identity_order,
  categorizer = NULL,
  relative_widths = c(1, 1, 1),
  ggtheme = theme_bw(),
  labels_displayed = c("endpoint", "factor"),
  label_headers = c(endpoint = "Endpoint", factor = "Subgroup", n = "n"),
  values_displayed = c("HR", "CI", "p"),
  value_headers = c(HR = "HR", CI = "CI", p = "p", n = "n", subgroup_n = "n"),
  HRsprintfFormat = "%.2f",
  psprintfFormat = "%.3f",
  p_lessthan_cutoff = 0.001,
  log_scale = TRUE,
  HR_x_breaks = seq(0, 10),
  HR_x_limits = NULL,
  factor_id_sep = ":",
  na_rm = TRUE,
  title = NULL,
  title_relative_height = 0.1,
  title_label_args = list(),
  base_papersize = dinA(4)
)

forest_plot.df(
  .df,
  factor_labeller = identity,
  endpoint_labeller = identity,
  orderer = identity_order,
  categorizer = NULL,
  relative_widths = c(1, 1, 1),
  ggtheme = theme_bw(),
  labels_displayed = c("endpoint", "factor"),
  label_headers = c(endpoint = "Endpoint", factor = "Subgroup", n = "n"),
  values_displayed = c("HR", "CI", "p"),
  value_headers = c(HR = "HR", CI = "CI", p = "p", n = "n", subgroup_n = "n"),
  HRsprintfFormat = "%.2f",
  psprintfFormat = "%.3f",
  p_lessthan_cutoff = 0.001,
  log_scale = TRUE,
  HR_x_breaks = seq(0, 10),
  HR_x_limits = NULL,
  factor_id_sep = ":",
  na_rm = TRUE,
  title = NULL,
  title_relative_height = 0.1,
  title_label_args = list(),
  base_papersize = dinA(4)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forest_plot_+3A_...">...</code></td>
<td>
<p>The SurvivalAnalysisResult objects.
You can also pass one list of such objects, or use explicit splicing (!!! operator).
If not <code>use_one_hot</code>, also a list of coxph objects, or a mix is acceptable.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_use_one_hot">use_one_hot</code></td>
<td>
<p>If not use_one_hot (default), will take univariate or multivariate results and plot hazard ratios
against the reference level (as provided to the <code><a href="#topic+analyse_survival">analyse_survival</a></code> or <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code>
function, or, per default, the first factor level), resulting in k-1 values for k levels.
If use_one_hot == TRUE, will only accept univariate results from <code><a href="#topic+analyse_survival">analyse_survival</a></code> and plot HRs of one factor
level vs. remaining cohort, resulting in k values for k levels.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_factor_labeller">factor_labeller</code>, <code id="forest_plot_+3A_endpoint_labeller">endpoint_labeller</code></td>
<td>
<p>Either</p>

<ul>
<li><p> A function which returns labels for the input:
First argument, a vector of either (factor.ids) or (endpoints), resp.
If the function takes ... or two arguments, as second argument a data frame with (at least)
the columns survivalResult, endpoint, factor.id, factor.name, factor.value, HR, Lower_CI, Upper_CI, p, n,
where survivalResult is the corresponding result object passed to forest_plot;
Note the function must be vectorized, if you have a non-vectorized function taking single arguments,
you may want to have a look at purrr::map_chr or purrr::pmap_chr.
</p>
</li>
<li><p> a dictionaryish list, looks up by (endpoints) or (factor.ids).
The factor.id value: For continous factors, the factor name (column name in data frame);
For categorical factors, factor name, factor_id_sep, and the factor level value.
(note: If use_one_hot = FALSE, the HR is factor level value vs. cox reference given to survival_analysis;
if use_one_hot = TRUE, the HR is the factor level value vs. remaining population)
</p>
</li></ul>
</td></tr>
<tr><td><code id="forest_plot_+3A_orderer">orderer</code></td>
<td>
<p>A function which returns an integer ordering vector for the input:
</p>

<ul>
<li><p> if the supplied function takes exactly one argument, a data frame with (at least)
the columns survivalResult, endpoint, factor.id, factor.name, factor.value, HR, Lower_CI, Upper_CI, p, n, subgroup_n
where survivalResult is the corresponding result object passed to forest_plot;
</p>
</li>
<li><p> or, if the function takes more than one argument, or its arguments include ..., the nine vectors
(endpoint, factor.name, factor.value, HR, Lower_CI, Upper_CI, p, n, subgroup_n):
a vector of endpoints (as given to Surv(endpoint, ...) in coxph),
a vector of factors (as given to the right hand side of the coxph formula), and
numeric vectors of the HR, lower CI, upper CI, p-value
</p>
</li>
<li><p> You can create a function from ordered vectors via orderer_function_from_sorted_vectors,
or call order() with one or more of these vectors.
</p>
</li>
<li><p> Alternatively, you can provide a quosure of code, or a right-hand side formula;
it will be executed such that the above nine vectors are available as symbols.
</p>
</li></ul>

<p>Example:
</p>

<ul>
<li> <p><code>orderer = quo(order(endpoint, HR))</code>
</p>
</li>
<li><p>   equivalent to <code>orderer = ~order(endpoint, HR)</code>
</p>
</li>
<li><p>   equivalent to <code>orderer = function(df) df %$% order(endpoint, HR)</code>
</p>
</li>
<li><p>   equivalent to <code>orderer = function(df) { order(df$endpoint, df$HR) }</code>
</p>
</li>
<li><p>   equivalent to <code>orderer = function(endpoint, factor.name, factor.value, HR, ...) order(endpoint, HR)</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="forest_plot_+3A_categorizer">categorizer</code></td>
<td>
<p>A function which returns one logical value if a breaking line should be
inserted _above_ the input: Same semantics as for orderer.
!Please note!: The order of the data is not yet ordered as per your orderer!
If you do calculations depending on order, first order with your own orderer function.
A proper implementation is easy using <code><a href="tidytidbits.html#topic+sequential_duplicates">sequential_duplicates</a></code>,
for example <code>categorizer=~!sequential_duplicates(endpoint, ordering = order(endpoint, HR))</code></p>
</td></tr>
<tr><td><code id="forest_plot_+3A_relative_widths">relative_widths</code></td>
<td>
<p>relation of the width of the plots, labels, plot, values. Default is 1:1:1.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_ggtheme">ggtheme</code></td>
<td>
<p>ggplot2 theme to use</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_labels_displayed">labels_displayed</code></td>
<td>
<p>Combination of &quot;endpoint&quot;, &quot;factor&quot;, &quot;n&quot;, determining what is shown on the left-hand table
and in which order.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_label_headers">label_headers</code></td>
<td>
<p>Named vector with name=&lt;allowed values of labels_displayed&gt;, value=&lt;your heading&gt;.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_values_displayed">values_displayed</code></td>
<td>
<p>Combination of &quot;HR&quot;, &quot;CI&quot;, &quot;p&quot;, &quot;subgroup_n&quot;, determining what is shown on the right-hand table
and in which order. Note: subgroup_n is only applicable if oneHot=TRUE.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_value_headers">value_headers</code></td>
<td>
<p>Named vector with name=&lt;allowed values of values_displayed&gt;, value=&lt;your heading&gt;.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_hrsprintfformat">HRsprintfFormat</code>, <code id="forest_plot_+3A_psprintfformat">psprintfFormat</code></td>
<td>
<p>sprintf() format strings for hazard ratio and p value</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_p_lessthan_cutoff">p_lessthan_cutoff</code></td>
<td>
<p>The lower limit below which p value will be displayed as &quot;less than&quot;.
If p_lessthan_cutoff == 0.001, the a p value of 0.002 will be displayed as is, while 0.0005 will become &quot;p &lt; 0.001&quot;.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_log_scale">log_scale</code></td>
<td>
<p>Plot on log scale, which is quite common and gives symmetric length for the CI bars.
Note that HRs of 0 (did not converge) will not be plotted in this case.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_hr_x_breaks">HR_x_breaks</code></td>
<td>
<p>Breaks of the x scale for plotting HR and CI</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_hr_x_limits">HR_x_limits</code></td>
<td>
<p>Limits of the x scale for plotting HR and CI.
Default (HR_x_lim = NULL) depends on log_scale and existing limits.
Pass NA to use the existing minimum and maximum values without interference.
Pass a vector of size 2 to specify (min, max) manually</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_factor_id_sep">factor_id_sep</code></td>
<td>
<p>Allows you to customize the separator of the factor id, the documentation of factor_labeller.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_na_rm">na_rm</code></td>
<td>
<p>Only used in the multivariate case (use_one_hot = FALSE). Should null coefficients (NA/0/Inf) be removed?</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_title">title</code>, <code id="forest_plot_+3A_title_relative_height">title_relative_height</code>, <code id="forest_plot_+3A_title_label_args">title_label_args</code></td>
<td>
<p>A title on top of the plot, taking a fraction of title_relative_height of the returned plot.
The title is drawn using <code><a href="cowplot.html#topic+draw_label">draw_label</a></code>; you can specify any arguments to this function by giving title_label_args
Per default, font attributes are taken from the &quot;title&quot; entry from the given ggtheme, and the label
is drawn centered as per <code><a href="cowplot.html#topic+draw_label">draw_label</a></code> defaults.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_base_papersize">base_papersize</code></td>
<td>
<p>numeric vector of length 2, c(width, height), unit inches.
forest_plot will store a suggested &quot;papersize&quot; attribute in the return value, computed from
base_papersize and the number of entries in the plot (in particular, the height will be adjusted)
The attribute is read by save_pdf.
It will also store a &quot;forestplot_entries&quot; attribute which you can use for your own calculations.</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_.df">.df</code></td>
<td>
<p>Data frame containing the columns
<code>survivalResult, endpoint, factor.id, factor.name, factor.value, HR, Lower_CI, Upper_CI, p, n, subgroup_n</code>
giving the information that is to be presented in the forest plot</p>
</td></tr>
<tr><td><code id="forest_plot_+3A_df">df</code></td>
<td>
<p>For the variant taking a data frame: A data frame which must contain (at least) the columns:
endpoint, factor.id, factor.name, factor.value, HR, Lower_CI, Upper_CI, p, n, subgroup_n</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plot has a left column containing the labels (covariate name, levels for categorical variables, optionally subgroup size),
the actual line plot in the middle column, and a right column to display the hazard ratios and their confidence intervals.
A rich set of parameters allows full customizability to create publication-ready plots.
</p>


<h3>Value</h3>

<p>A ggplot2 plot object
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>forest_plot.df</code>: Creates a forest plot from the given data frame
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+forest_plot_grid">forest_plot_grid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::colon %&gt;%
   analyse_multivariate(vars(time, status),
                        vars(rx, sex, age, obstruct, perfor, nodes, differ, extent)) %&gt;%
   forest_plot()
</code></pre>

<hr>
<h2 id='forest_plot_grid'>Create a grid of forest plots</h2><span id='topic+forest_plot_grid'></span>

<h3>Description</h3>

<p>Makes use of the stored layout information in a <code><a href="#topic+forest_plot">forest_plot</a></code> plot to
create grids of plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forest_plot_grid(
  ...,
  nrow = NULL,
  ncol = NULL,
  byrow = TRUE,
  plot_grid_args = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forest_plot_grid_+3A_...">...</code></td>
<td>
<p>Pass individual plots returned by forest_plot, or lists of such plots (bare lists will be spliced).</p>
</td></tr>
<tr><td><code id="forest_plot_grid_+3A_nrow">nrow</code>, <code id="forest_plot_grid_+3A_ncol">ncol</code></td>
<td>
<p>Specify the grid (one is sufficient, uses auto layout if both are null)</p>
</td></tr>
<tr><td><code id="forest_plot_grid_+3A_byrow">byrow</code></td>
<td>
<p>If the plots are given in by-row, or by-column (byrow=FALSE) order</p>
</td></tr>
<tr><td><code id="forest_plot_grid_+3A_plot_grid_args">plot_grid_args</code></td>
<td>
<p>Additional arguments to the <code><a href="cowplot.html#topic+plot_grid">plot_grid</a></code> function which is used to create the grid.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return value of <code><a href="cowplot.html#topic+plot_grid">plot_grid</a></code>
</p>

<hr>
<h2 id='format.SurvivalAnalysisMultivariateResult'>Formats a SurvivalAnalysisMultivariateResult for printing</h2><span id='topic+format.SurvivalAnalysisMultivariateResult'></span>

<h3>Description</h3>

<p>Formats a SurvivalAnalysisMultivariateResult for printing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SurvivalAnalysisMultivariateResult'
format(x, ..., p_precision = 3, hr_precision = 2, p_less_than_cutoff = 0.001)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.SurvivalAnalysisMultivariateResult_+3A_x">x</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code></p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisMultivariateResult_+3A_...">...</code></td>
<td>
<p>Further arguments passed from other methods.</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisMultivariateResult_+3A_p_precision">p_precision</code>, <code id="format.SurvivalAnalysisMultivariateResult_+3A_hr_precision">hr_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisMultivariateResult_+3A_p_less_than_cutoff">p_less_than_cutoff</code></td>
<td>
<p>Cut-off for small p values. Values smaller than this will be displayed like &quot;&lt;...&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted string, ready for output with cat()
</p>

<hr>
<h2 id='format.SurvivalAnalysisUnivariateResult'>Formats a SurvivalAnalysisUnivariateResult for printing</h2><span id='topic+format.SurvivalAnalysisUnivariateResult'></span>

<h3>Description</h3>

<p>Formats a SurvivalAnalysisUnivariateResult for printing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SurvivalAnalysisUnivariateResult'
format(
  x,
  ...,
  label = NULL,
  p_precision = 3,
  hr_precision = 2,
  p_less_than_cutoff = 0.001,
  time_precision = 1,
  include_end_separator = FALSE,
  timespan_unit = c("days", "months", "years")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_x">x</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_survival">analyse_survival</a></code></p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_...">...</code></td>
<td>
<p>Further arguments passed from other methods.</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_label">label</code></td>
<td>
<p>A label describing the result</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_p_precision">p_precision</code>, <code id="format.SurvivalAnalysisUnivariateResult_+3A_hr_precision">hr_precision</code>, <code id="format.SurvivalAnalysisUnivariateResult_+3A_time_precision">time_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_p_less_than_cutoff">p_less_than_cutoff</code></td>
<td>
<p>Cut-off for small p values. Values smaller than this will be displayed like &quot;&lt;...&quot;</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_include_end_separator">include_end_separator</code></td>
<td>
<p>Append &quot;\n&mdash;\n&quot;? Comes handy if printing multiple results following each other</p>
</td></tr>
<tr><td><code id="format.SurvivalAnalysisUnivariateResult_+3A_timespan_unit">timespan_unit</code></td>
<td>
<p>Unit for time spans: &quot;days&quot;, &quot;months&quot; or &quot;years&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted string, ready for output with cat()
</p>

<hr>
<h2 id='ggsurvplot_to_gtable'>Build a gtable representation from a ggsurvplot object</h2><span id='topic+ggsurvplot_to_gtable'></span>

<h3>Description</h3>

<p>Build a gtable representation from a ggsurvplot object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggsurvplot_to_gtable(
  ggsurv_obj,
  surv.plot.height = NULL,
  risk.table.height = NULL,
  ncensor.plot.height = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggsurvplot_to_gtable_+3A_ggsurv_obj">ggsurv_obj</code></td>
<td>
<p>The ggsurvplot object</p>
</td></tr>
<tr><td><code id="ggsurvplot_to_gtable_+3A_surv.plot.height">surv.plot.height</code>, <code id="ggsurvplot_to_gtable_+3A_risk.table.height">risk.table.height</code>, <code id="ggsurvplot_to_gtable_+3A_ncensor.plot.height">ncensor.plot.height</code></td>
<td>
<p>Layout parameters, see <code><a href="survminer.html#topic+arrange_ggsurvplots">arrange_ggsurvplots</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A gtable object
</p>

<hr>
<h2 id='grid_layout'>Grid layouting</h2><span id='topic+grid_layout'></span>

<h3>Description</h3>

<p>Creates a grid layout nrow x ncol
for n items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grid_layout(n, rows = NULL, cols = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grid_layout_+3A_n">n</code></td>
<td>
<p>Number of items in grid</p>
</td></tr>
<tr><td><code id="grid_layout_+3A_rows">rows</code>, <code id="grid_layout_+3A_cols">cols</code></td>
<td>
<p>Pass one of rows or cols, or none, in which case auto layout is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of length 2: rows, cols
</p>


<h3>Examples</h3>

<pre><code class='language-R'>grid_layout(24, cols=4)
grid_layout(24)
grid_layout(24, rows=2)
</code></pre>

<hr>
<h2 id='identity_order'>Ordering function: identity order</h2><span id='topic+identity_order'></span>

<h3>Description</h3>

<p>This can be used in a place where a function with a signature like <code><a href="base.html#topic+order">order</a></code> is required.
It simply retains the original order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>identity_order(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="identity_order_+3A_x">x</code></td>
<td>
<p>a vector</p>
</td></tr>
<tr><td><code id="identity_order_+3A_...">...</code></td>
<td>
<p>Effectively ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector
</p>

<hr>
<h2 id='kaplan_meier_grid'>A grid of kaplan meier plots</h2><span id='topic+kaplan_meier_grid'></span>

<h3>Description</h3>

<p>A grid of kaplan meier plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kaplan_meier_grid(
  ...,
  nrow = NULL,
  ncol = NULL,
  layout_matrix = NULL,
  byrow = TRUE,
  mapped_plot_args = list(),
  paperwidth = NULL,
  paperheight = NULL,
  size_per_plot = dinAWidth(5),
  title = NA,
  surv.plot.height = NULL,
  risk.table.height = NULL,
  ncensor.plot.height = NULL,
  p_lessthan_cutoff = 0.001
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="kaplan_meier_grid_+3A_...">...</code></td>
<td>
<p>One or many SurvivalAnalysisResult objects as returned by <code><a href="#topic+analyse_survival">analyse_survival</a></code> and
arguments that will be passed to ggsurvplot.
Bare lists will be spliced.
If using lists, the same argument may be contained in multiple lists;
in this case, the last occurrence is used, i.e. you can first pass a list
with default arguments, and then override some of them.
In addition to all arguments supported by <code><a href="survminer.html#topic+ggsurvplot">ggsurvplot</a></code>, these arguments and shortcuts can be used additionally:
</p>

<ul>
<li><p> break.time.by: breakByYear, breakByHalfYear, breakByQuarterYear, breakByMonth (numeric value only in ggsurvplot)
</p>
</li>
<li><p> xscale: scaleByYear, scaleByMonth (numeric value only in ggsurvplot)
</p>
</li>
<li><p> hazard.ratio (logical): display hazard ratios in addition to p value, complementing pval=T
</p>
</li>
<li><p> xlab: {.OS,.PFS,.TTF,.DFS}.{years,months,days}
</p>
</li>
<li><p> table.layout: clean, displays risk table only with color code and number, no grid, axes or labels.
(do not forget risk.table=TRUE to see something)
</p>
</li>
<li><p> papersize: numeric vector of length 2, c(width, height), unit inches. kaplan_meier_plot
will store a &quot;papersize&quot; attribute with this value which is read by <code><a href="tidytidbits.html#topic+save_pdf">save_pdf</a></code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_nrow">nrow</code>, <code id="kaplan_meier_grid_+3A_ncol">ncol</code></td>
<td>
<p>Determines the layout by giving nrow and/or ncol, if missing, uses an auto layout.</p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_layout_matrix">layout_matrix</code></td>
<td>
<p>Optionally specify a layout matrix, which is passed to <code>gridExtra::<a href="gridExtra.html#topic+marrangeGrob">marrangeGrob</a></code></p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_byrow">byrow</code></td>
<td>
<p>If no layout_matrix is specified and there are multiple rows: How should the plots by layout?
The order of the plots can be by-row (default) or by-col (set byrow=FALSE).</p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_mapped_plot_args">mapped_plot_args</code></td>
<td>
<p>Optionally, if given n objects to plot, a named list of vectors of size n.
The name is an argument names passed to ggsurvplot. The elements of the vector will be mapped 1:1 to each object.
This allows to perform batch plotting where only few arguments differ (e.g. titles A, B, C...) between the plots.
Please note that only object that need plotting (survival_analysis results) are considered, not those that
are already plotted (kaplan_meier_plot results)</p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_paperwidth">paperwidth</code>, <code id="kaplan_meier_grid_+3A_paperheight">paperheight</code>, <code id="kaplan_meier_grid_+3A_size_per_plot">size_per_plot</code></td>
<td>
<p>You can specify the size per plot, or the full paper width and height.
size_per_plot may be a number (width == height) or two-dimensional, width and height.
The resulting paper size will be stored as a papersize attribute that is e.g.
read by <code>tidytidbits::<a href="tidytidbits.html#topic+save_pdf">save_pdf</a></code></p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_title">title</code>, <code id="kaplan_meier_grid_+3A_surv.plot.height">surv.plot.height</code>, <code id="kaplan_meier_grid_+3A_risk.table.height">risk.table.height</code>, <code id="kaplan_meier_grid_+3A_ncensor.plot.height">ncensor.plot.height</code></td>
<td>
<p>Passed to <code><a href="survminer.html#topic+arrange_ggsurvplots">arrange_ggsurvplots</a></code></p>
</td></tr>
<tr><td><code id="kaplan_meier_grid_+3A_p_lessthan_cutoff">p_lessthan_cutoff</code></td>
<td>
<p>The lower limit below which p value will be displayed as &quot;less than&quot;.
If p_lessthan_cutoff == 0.001, the a p value of 0.002 will be displayed as is, while 0.0005 will become &quot;p &lt; 0.001&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class arrangelist, which can be printed or saved to pdf with ggsave().
</p>

<hr>
<h2 id='kaplan_meier_plot'>Kaplan Meier plots from survival results.</h2><span id='topic+kaplan_meier_plot'></span>

<h3>Description</h3>

<p>Uses <code><a href="survminer.html#topic+ggsurvplot">ggsurvplot</a></code> from the survminer package to create publication-ready plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kaplan_meier_plot(..., mapped_plot_args = list(), p_lessthan_cutoff = 0.001)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="kaplan_meier_plot_+3A_...">...</code></td>
<td>
<p>One or many SurvivalAnalysisResult objects as returned by <code><a href="#topic+analyse_survival">analyse_survival</a></code> and
arguments that will be passed to ggsurvplot.
Bare lists will be spliced.
If using lists, the same argument may be contained in multiple lists;
in this case, the last occurrence is used, i.e. you can first pass a list
with default arguments, and then override some of them.
In addition to all arguments supported by <code><a href="survminer.html#topic+ggsurvplot">ggsurvplot</a></code>, these arguments and shortcuts can be used additionally:
</p>

<ul>
<li><p> break.time.by: breakByYear, breakByHalfYear, breakByQuarterYear, breakByMonth (numeric value only in ggsurvplot)
</p>
</li>
<li><p> xscale: scaleByYear, scaleByMonth (numeric value only in ggsurvplot)
</p>
</li>
<li><p> hazard.ratio (logical): display hazard ratios in addition to p value, complementing pval=T
</p>
</li>
<li><p> xlab: {.OS,.PFS,.TTF,.DFS}.{years,months,days}
</p>
</li>
<li><p> table.layout: clean, displays risk table only with color code and number, no grid, axes or labels.
(do not forget risk.table=TRUE to see something)
</p>
</li>
<li><p> papersize: numeric vector of length 2, c(width, height), unit inches. kaplan_meier_plot
will store a &quot;papersize&quot; attribute with this value which is read by <code><a href="tidytidbits.html#topic+save_pdf">save_pdf</a></code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="kaplan_meier_plot_+3A_mapped_plot_args">mapped_plot_args</code></td>
<td>
<p>Optionally, if given n objects to plot, a named list of vectors of size n.
The name is an argument names passed to ggsurvplot. The elements of the vector will be mapped 1:1 to each object.
This allows to perform batch plotting where only few arguments differ (e.g. titles A, B, C...) between the plots.</p>
</td></tr>
<tr><td><code id="kaplan_meier_plot_+3A_p_lessthan_cutoff">p_lessthan_cutoff</code></td>
<td>
<p>The lower limit below which p value will be displayed as &quot;less than&quot;.
If p_lessthan_cutoff == 0.001, the a p value of 0.002 will be displayed as is, while 0.0005 will become &quot;p &lt; 0.001&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If given one result to plot, one ggsurvplot object; if given more than one result, a list of ggsurvplot objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::aml %&gt;%
  analyse_survival(vars(time, status), x) %&gt;%
  kaplan_meier_plot(break.time.by="breakByMonth",
                    xlab=".OS.months",
                    risk.table=TRUE,
                    ggtheme=ggplot2::theme_bw(10))
</code></pre>

<hr>
<h2 id='multivariate_as_data_frame'>Turns a multivariate analysis result to a data frame</h2><span id='topic+multivariate_as_data_frame'></span>

<h3>Description</h3>

<p>Extracts useful information into a data frame which is ready
for printing or further analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multivariate_as_data_frame(result, factor_id_sep = ":", sort_by = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multivariate_as_data_frame_+3A_result">result</code></td>
<td>
<p>An object of class &quot;SurvivalAnalysisMultivariateResult&quot;
as returned by <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code></p>
</td></tr>
<tr><td><code id="multivariate_as_data_frame_+3A_factor_id_sep">factor_id_sep</code></td>
<td>
<p>The frame contains one column &quot;factor.id&quot; which is a composite of covariate name and,
if categorical, the factor level (one line for each factor level except for the reference level)</p>
</td></tr>
<tr><td><code id="multivariate_as_data_frame_+3A_sort_by">sort_by</code></td>
<td>
<p>A vars() list of one or more symbolic column names.
This frame contains the variables &quot;Lower_CI&quot;, &quot;HR&quot;, &quot;Upper_CI&quot;, &quot;Inv_Lower_CI&quot;, &quot;Inv_HR&quot;, &quot;Inv_Upper_CI&quot;, &quot;p&quot;.
You can choose to sort by any combination. Use desc() to sort a variable in descending order.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>

<hr>
<h2 id='pluck_multivariate_analysis'>Access individual components of multivariate survival analysis</h2><span id='topic+pluck_multivariate_analysis'></span>

<h3>Description</h3>

<p>Allows access to the <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code> result object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pluck_multivariate_analysis(result, term)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pluck_multivariate_analysis_+3A_result">result</code></td>
<td>
<p>An object of class SurvivalAnalysisMultivariateResult
as returned by <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code></p>
</td></tr>
<tr><td><code id="pluck_multivariate_analysis_+3A_term">term</code></td>
<td>
<p>The item to be retrieved:
</p>

<ul>
<li> <p><code>"coxph"</code> containing the result of the <code><a href="survival.html#topic+coxph">coxph</a></code> function
</p>
</li>
<li> <p><code>"summary"</code> containing the result of the <code><a href="base.html#topic+summary">summary</a></code> of the &quot;coxph&quot; result
</p>
</li>
<li> <p><code>"summary_data_frame"</code> containing summary as a data frame (see <code><a href="#topic+multivariate_as_data_frame">multivariate_as_data_frame</a></code>)
</p>
</li>
<li> <p><code>"p"</code> A vector of p values for the covariates, equivalent to the &quot;p&quot; column of &quot;summary_data_frame&quot;
</p>
</li>
<li> <p><code>"overall"</code> A named list with human-readable labels giving information about the overall fit,
including the three flavors of p values contained in &quot;summary&quot;
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>object as specified by <code>term</code>, or NULL if not contained in <code>result</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::colon %&gt;%
   analyse_multivariate(vars(time, status),
                        vars(rx, sex, age, obstruct, perfor, nodes, differ, extent)) %&gt;%
   pluck_multivariate_analysis("p")
   print
</code></pre>

<hr>
<h2 id='pluck_survival_analysis'>Access individual components of univariate survival analysis</h2><span id='topic+pluck_survival_analysis'></span>

<h3>Description</h3>

<p>Allows access to the <code><a href="#topic+analyse_survival">analyse_survival</a></code> result object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pluck_survival_analysis(result, term)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pluck_survival_analysis_+3A_result">result</code></td>
<td>
<p>An object of class SurvivalAnalysisUnivariateResult
as returned by <code><a href="#topic+analyse_survival">analyse_survival</a></code></p>
</td></tr>
<tr><td><code id="pluck_survival_analysis_+3A_term">term</code></td>
<td>
<p>The item to be retrieved:
</p>

<ul>
<li> <p><code>"survfit"</code> containing the result of the <code><a href="survival.html#topic+survfit">survfit</a></code> function
</p>
</li>
<li> <p><code>"survdiff"</code> containing the result of the <code><a href="survival.html#topic+survdiff">survdiff</a></code> function
</p>
</li>
<li> <p><code>"survfit_overall"</code> containing the result of the <code><a href="survival.html#topic+survfit">survfit</a></code>
function without terms, i.e. the full group not comparing subgroups
</p>
</li>
<li> <p><code>"coxph"</code> containing the result of the <code><a href="survival.html#topic+coxph">coxph</a></code> function
</p>
</li>
<li> <p><code>"p"</code> The log-rank p value (if <code>by</code> provided at least two strata)
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>object as specified by <code>term</code>, or NULL if not contained in <code>result</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)
library(dplyr)
survival::aml %&gt;%
  analyse_survival(vars(time, status), x) %&gt;%
  pluck_survival_analysis("p") %&gt;%
  print
</code></pre>

<hr>
<h2 id='print.SurvivalAnalysisMultivariateResult'>Print the essentials of a SurvivalAnalySurvivalAnalysisMultivariateResult</h2><span id='topic+print.SurvivalAnalysisMultivariateResult'></span>

<h3>Description</h3>

<p>Print the essentials of a SurvivalAnalySurvivalAnalysisMultivariateResult
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SurvivalAnalysisMultivariateResult'
print(x, ..., p_precision = 3, hr_precision = 2, p_less_than_cutoff = 0.001)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.SurvivalAnalysisMultivariateResult_+3A_x">x</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code></p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisMultivariateResult_+3A_...">...</code></td>
<td>
<p>Further arguments passed from other methods.</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisMultivariateResult_+3A_p_precision">p_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisMultivariateResult_+3A_hr_precision">hr_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisMultivariateResult_+3A_p_less_than_cutoff">p_less_than_cutoff</code></td>
<td>
<p>Cut-off for small p values. Values smaller than this will be displayed like &quot;&lt;...&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The formatted string, invisibly.
#' @export
</p>

<hr>
<h2 id='print.SurvivalAnalysisUnivariateResult'>Print the essentials of a SurvivalAnalysisUnivariateResult</h2><span id='topic+print.SurvivalAnalysisUnivariateResult'></span>

<h3>Description</h3>

<p>Print the essentials of a SurvivalAnalysisUnivariateResult
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SurvivalAnalysisUnivariateResult'
print(
  x,
  ...,
  label = NULL,
  p_precision = 3,
  hr_precision = 2,
  time_precision = 1,
  include_end_separator = FALSE,
  timespan_unit = c("days", "months", "years")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_x">x</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_survival">analyse_survival</a></code></p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_...">...</code></td>
<td>
<p>Further arguments passed from other methods.</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_label">label</code></td>
<td>
<p>A label describing the result</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_p_precision">p_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_hr_precision">hr_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_time_precision">time_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_include_end_separator">include_end_separator</code></td>
<td>
<p>Append &quot;\n&mdash;\n&quot;? Comes handy if printing multiple results following each other</p>
</td></tr>
<tr><td><code id="print.SurvivalAnalysisUnivariateResult_+3A_timespan_unit">timespan_unit</code></td>
<td>
<p>Unit for time spans: &quot;days&quot;, &quot;months&quot; or &quot;years&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The formatted string, invisibly.
</p>

<hr>
<h2 id='survival_data_frames'>Extract results from univariate survival analysis structured as data frames</h2><span id='topic+survival_data_frames'></span>

<h3>Description</h3>

<p>Extract results from univariate survival analysis structured as data frames
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survival_data_frames(
  result,
  format_numbers = TRUE,
  p_precision = 3,
  hr_precision = 2,
  p_less_than_cutoff = 0.001,
  time_precision = 1,
  timespan_unit = c("days", "months", "years")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survival_data_frames_+3A_result">result</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_survival">analyse_survival</a></code></p>
</td></tr>
<tr><td><code id="survival_data_frames_+3A_format_numbers">format_numbers</code></td>
<td>
<p>If true, all numbers will be formatted for printing according to the following options
and will be returned as strings</p>
</td></tr>
<tr><td><code id="survival_data_frames_+3A_p_precision">p_precision</code>, <code id="survival_data_frames_+3A_hr_precision">hr_precision</code>, <code id="survival_data_frames_+3A_time_precision">time_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="survival_data_frames_+3A_p_less_than_cutoff">p_less_than_cutoff</code></td>
<td>
<p>Cut-off for small p values. Values smaller than this will be displayed like &quot;&lt;...&quot;</p>
</td></tr>
<tr><td><code id="survival_data_frames_+3A_timespan_unit">timespan_unit</code></td>
<td>
<p>Unit for time spans: &quot;days&quot;, &quot;months&quot; or &quot;years&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list list of data frame objects:</p>

<ul>
<li><p> cohortMetadata: information about the full cohort
</p>
</li>
<li><p> if there are strata (analysis performed &quot;by&quot; a covariate): </p>

<ul>
<li><p> strataMetadata: information about each stratum
</p>
</li>
<li><p> hazardRatios: hazard ratios for combinations of strata
</p>
</li>
<li><p> only if there are more than two strata: </p>

<ul>
<li><p> pairwisePValues: Matrix of pairwise (uncorrected) p values
</p>
</li></ul>

</li></ul>

</li></ul>


<hr>
<h2 id='survival_essentials'>Convenience formatting and printing of result</h2><span id='topic+survival_essentials'></span>

<h3>Description</h3>

<p>Takes the given result, formats and prints it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survival_essentials(
  result,
  label = NULL,
  p_precision = 3,
  hr_precision = 2,
  time_precision = 1,
  include_end_separator = TRUE,
  timespan_unit = "days",
  print = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survival_essentials_+3A_result">result</code></td>
<td>
<p>The result generated by <code><a href="#topic+analyse_survival">analyse_survival</a></code></p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_label">label</code></td>
<td>
<p>Optional label to include</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_p_precision">p_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_hr_precision">hr_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_time_precision">time_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_include_end_separator">include_end_separator</code></td>
<td>
<p>Append &quot;\n&mdash;\n&quot;? Comes handy if printing multiple results following each other</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_timespan_unit">timespan_unit</code></td>
<td>
<p>Unit for time spans: &quot;days&quot;, &quot;months&quot; or &quot;years&quot;.</p>
</td></tr>
<tr><td><code id="survival_essentials_+3A_print">print</code></td>
<td>
<p>Print string to console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The formatted string, invisibly. Ready for output with cat or saving to a file.
</p>

<hr>
<h2 id='write_survival'>Print the essentials of a SurvivalAnalysisUnivariateResult.</h2><span id='topic+write_survival'></span>

<h3>Description</h3>

<p>Write complete textual information for one or multiple survival
analysis results in a text file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_survival(
  ...,
  file,
  label = NULL,
  p_precision = 3,
  hr_precision = 2,
  time_precision = 1,
  include_end_separator = FALSE,
  timespan_unit = c("days", "months", "years")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_survival_+3A_...">...</code></td>
<td>
<p>Results generated by <code><a href="#topic+analyse_survival">analyse_survival</a></code>,
or <code><a href="#topic+analyse_multivariate">analyse_multivariate</a></code>, or lists of such objects</p>
</td></tr>
<tr><td><code id="write_survival_+3A_file">file</code></td>
<td>
<p>A connection, or a character string naming the file to print to.
(see <code><a href="base.html#topic+cat">cat</a></code>)</p>
</td></tr>
<tr><td><code id="write_survival_+3A_label">label</code></td>
<td>
<p>A label describing the result,
or a vector of the same size as results in ... (will then be mapped 1:1)</p>
</td></tr>
<tr><td><code id="write_survival_+3A_p_precision">p_precision</code>, <code id="write_survival_+3A_hr_precision">hr_precision</code>, <code id="write_survival_+3A_time_precision">time_precision</code></td>
<td>
<p>Precision with which to print floating point values</p>
</td></tr>
<tr><td><code id="write_survival_+3A_include_end_separator">include_end_separator</code></td>
<td>
<p>Boolean:
Append &quot;\n&mdash;\n&quot; as separator?
Comes handy if printing multiple results following each other</p>
</td></tr>
<tr><td><code id="write_survival_+3A_timespan_unit">timespan_unit</code></td>
<td>
<p>Unit for time spans: &quot;days&quot;, &quot;months&quot; or &quot;years&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As write_survival takes potentially multiple objects, it cannot
return its input in a cleanly defined way.
You can still elegantly combine <code>write_survival</code> in a pipe followed by
<code><a href="#topic+kaplan_meier_plot">kaplan_meier_plot</a></code> or <code><a href="#topic+kaplan_meier_grid">kaplan_meier_grid</a></code>
for a single input object if you apply the
tee pipe operator <code>%T&gt;%</code> in front of <code>write_survival</code>.
</p>


<h3>Value</h3>

<p>None (invisible NULL).
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
