<!DOCTYPE html><html lang="en"><head><title>Help for package psHarmonize</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {psHarmonize}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#code_modify_func'><p>Code modify function. To be called by the harmonization function.</p></a></li>
<li><a href='#code_modify_func_multi'><p>Code modify function (multiple variables). To be called by the harmonization function.</p></a></li>
<li><a href='#code_modify_recode'><p>Code modify recode. To be called by harmonization function.</p></a></li>
<li><a href='#cohort_a'><p>Cohort A</p></a></li>
<li><a href='#cohort_b'><p>Cohort B</p></a></li>
<li><a href='#cohort_c'><p>Cohort C</p></a></li>
<li><a href='#cohort_shell_func'><p>Cohort sheet create. To be called by harmonization function.</p></a></li>
<li><a href='#cont_or_cat'><p>Continuous or categorical</p></a></li>
<li><a href='#create_error_log_report'><p>Error log report creation</p></a></li>
<li><a href='#create_long_dataset'><p>Create long dataset.</p></a></li>
<li><a href='#create_summary_report'><p>Summary report creation</p></a></li>
<li><a href='#error_harmonization_sheet_example'><p>Error harmonization sheet example</p></a></li>
<li><a href='#harmonization'><p>Harmonization Function</p></a></li>
<li><a href='#harmonization_sheet_example'><p>Harmonization sheet example</p></a></li>
<li><a href='#range_function'><p>Range function. To be called by harmonization function.</p></a></li>
<li><a href='#range_function_cat'><p>Possible values for categorical variables. To be called by harmonization function.</p></a></li>
<li><a href='#reorder_factors'><p>Reorder factors</p></a></li>
<li><a href='#reorder_factors_df'><p>Reorder factors data.frame</p></a></li>
<li><a href='#summary.psHarmonize'><p>psHarmonize summary method</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Creates a Harmonized Dataset Based on a Set of Instructions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.5</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions which facilitate harmonization of data from multiple
    different datasets. Data harmonization involves taking data sources with
    differing values, creating coding instructions to create a harmonized
    set of values, then making those data modifications. 'psHarmonize' will
    assist with data modification once the harmonization instructions are
    written. Coding instructions are written by the user to create a
    "harmonization sheet". This sheet catalogs variable names, domains
    (e.g. clinical, behavioral, outcomes), provides R code instructions for
    mapping or conversion of data, specifies the variable name in the
    harmonized data set, and tracks notes. The package will then harmonize
    the source datasets according to the harmonization sheet to create a
    harmonized dataset. Once harmonization is finished, the package also has
    functions that will create descriptive statistics using 'RMarkdown'. Data
    Harmonization guidelines have been described by Fortier I, Raina P,
    Van den Heuvel ER, et al. (2017) &lt;<a href="https://doi.org/10.1093%2Fije%2Fdyw075">doi:10.1093/ije/dyw075</a>&gt;. Additional
    details of our R package have been described by Stephen JJ, Carolan P,
    Krefman AE, et al. (2024) &lt;<a href="https://doi.org/10.1016%2Fj.patter.2024.101003">doi:10.1016/j.patter.2024.101003</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, glue, magrittr, purrr, RColorBrewer, rlang, rmarkdown,
stringr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/NUDACC/psHarmonize">https://github.com/NUDACC/psHarmonize</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/NUDACC/psHarmonize/issues">https://github.com/NUDACC/psHarmonize/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-13 22:15:29 UTC; jjs7028</td>
</tr>
<tr>
<td>Author:</td>
<td>John Stephen <a href="https://orcid.org/0000-0001-7309-9193"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Stephen &lt;John.Stephen@northwestern.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-15 10:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='code_modify_func'>Code modify function. To be called by the harmonization function.</h2><span id='topic+code_modify_func'></span>

<h3>Description</h3>

<p>Code modify function. To be called by the harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_modify_func(
  data = temp_dataset,
  instruction = code_instruct,
  old_var = source_item_long
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_modify_func_+3A_data">data</code></td>
<td>
<p>Dataframe to be modified</p>
</td></tr>
<tr><td><code id="code_modify_func_+3A_instruction">instruction</code></td>
<td>
<p>Coding instruction from harmonization sheet</p>
</td></tr>
<tr><td><code id="code_modify_func_+3A_old_var">old_var</code></td>
<td>
<p>Name of original variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of length equal to <code>old_var</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Allows the user to define a function with `instruction`
# The `old_var` in `data` will be used in place of `x` in `instruction`.

code_modify_func(data = cohort_a, instruction = 'x + 5', old_var = 'age')

</code></pre>

<hr>
<h2 id='code_modify_func_multi'>Code modify function (multiple variables). To be called by the harmonization function.</h2><span id='topic+code_modify_func_multi'></span>

<h3>Description</h3>

<p>Code modify function (multiple variables). To be called by the harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_modify_func_multi(
  data = temp_dataset,
  instruction = code_instruct,
  old_var = source_item_long,
  user_args = source_item,
  sourcedataset = source_dataset,
  subdomain = subdomain,
  visit = visit,
  cohort = cohort
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_modify_func_multi_+3A_data">data</code></td>
<td>
<p>Dataframe to be modified</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_instruction">instruction</code></td>
<td>
<p>Coding instruction from harmonization sheet</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_old_var">old_var</code></td>
<td>
<p>Name of original variable</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_user_args">user_args</code></td>
<td>
<p>Character vector of input variables</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_sourcedataset">sourcedataset</code></td>
<td>
<p>Dataframe created so far</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_subdomain">subdomain</code></td>
<td>
<p>Category of variable</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_visit">visit</code></td>
<td>
<p>Visit number</p>
</td></tr>
<tr><td><code id="code_modify_func_multi_+3A_cohort">cohort</code></td>
<td>
<p>Cohort name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of length equal to <code>old_var</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example calculating BMI in cohort a for visit 1

code_modify_func_multi(data = cohort_a,
                     instruction = '(x1 / 2.205)/((x2 / 39.37)**2)',
                     old_var = 'weight_1; height_1',
                     user_args = c('weight_1','height_1'),
                     sourcedataset = 'cohort_a',
                     subdomain = 'clinical',
                     visit = 1,
                     cohort = 'cohort_a')

</code></pre>

<hr>
<h2 id='code_modify_recode'>Code modify recode. To be called by harmonization function.</h2><span id='topic+code_modify_recode'></span>

<h3>Description</h3>

<p>Code modify recode. To be called by harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_modify_recode(
  data = temp_dataset,
  instruction = code_instruct,
  old_var = source_item_long,
  new_var = item,
  na_string = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_modify_recode_+3A_data">data</code></td>
<td>
<p>Dataframe to be modified</p>
</td></tr>
<tr><td><code id="code_modify_recode_+3A_instruction">instruction</code></td>
<td>
<p>Coding instruction from harmonization sheet</p>
</td></tr>
<tr><td><code id="code_modify_recode_+3A_old_var">old_var</code></td>
<td>
<p>Name of original variable</p>
</td></tr>
<tr><td><code id="code_modify_recode_+3A_new_var">new_var</code></td>
<td>
<p>Name of new variable</p>
</td></tr>
<tr><td><code id="code_modify_recode_+3A_na_string">na_string</code></td>
<td>
<p>Character string of final recode value to be set to NA.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns vector of new variable after recoding as needed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
test_data &lt;- data.frame(val = c('a','b','c','d'))

code_modify_recode(data = test_data,
  instruction = 'a = apple; c = carrot', old_var = 'val', new_var = 'new')

</code></pre>

<hr>
<h2 id='cohort_a'>Cohort A</h2><span id='topic+cohort_a'></span>

<h3>Description</h3>

<p>Example dataset of cohort data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_a
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 9 columns
</p>


<h3>Source</h3>

<p>Simulated data
</p>

<hr>
<h2 id='cohort_b'>Cohort B</h2><span id='topic+cohort_b'></span>

<h3>Description</h3>

<p>Example dataset of cohort data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_b
</code></pre>


<h3>Format</h3>

<p>A data frame with 5,000 rows and 5 columns
</p>


<h3>Source</h3>

<p>Simulated data
</p>

<hr>
<h2 id='cohort_c'>Cohort C</h2><span id='topic+cohort_c'></span>

<h3>Description</h3>

<p>Example dataset of cohort data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_c
</code></pre>


<h3>Format</h3>

<p>A data frame with 7,000 rows and 5 columns
</p>


<h3>Source</h3>

<p>Simulated data
</p>

<hr>
<h2 id='cohort_shell_func'>Cohort sheet create. To be called by harmonization function.</h2><span id='topic+cohort_shell_func'></span>

<h3>Description</h3>

<p>Created dataframe &quot;shell&quot; of IDs, study/cohort name, and visit. Harmonized
variables will be joined onto this dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_shell_func(sheet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohort_shell_func_+3A_sheet">sheet</code></td>
<td>
<p>Harmonization sheet</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data.frame with IDs, study/cohort name, and visit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using example harmonization sheet
cohort_shell_func(harmonization_sheet_example)

</code></pre>

<hr>
<h2 id='cont_or_cat'>Continuous or categorical</h2><span id='topic+cont_or_cat'></span>

<h3>Description</h3>

<p>Continuous or categorical
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cont_or_cat(data, var)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cont_or_cat_+3A_data">data</code></td>
<td>
<p>Data frame</p>
</td></tr>
<tr><td><code id="cont_or_cat_+3A_var">var</code></td>
<td>
<p>Variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns &quot;continuous&quot; or &quot;categorical&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Function can help determine which kind of output is
# most appropriate

cont_or_cat(data = cohort_a, var = 'height_1')

cont_or_cat(data = cohort_a, var = 'education')

</code></pre>

<hr>
<h2 id='create_error_log_report'>Error log report creation</h2><span id='topic+create_error_log_report'></span>

<h3>Description</h3>

<p>This function will create an RMarkdown error log. It takes the harmonization
object as the input, and will knit an RMarkdown html file to the path
specified.
</p>
<p><strong>Note:</strong> The error log will only be able to detect &quot;processing&quot; errors, and
not &quot;content&quot; errors. For example, if the user enters coding instructions
that are nonsensical or incorrect, but are still able to be executed, this
function will not be able to detect it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_error_log_report(
  harmonization_object,
  path = "./",
  file = "error_log_report.html"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_error_log_report_+3A_harmonization_object">harmonization_object</code></td>
<td>
<p>Harmonization object</p>
</td></tr>
<tr><td><code id="create_error_log_report_+3A_path">path</code></td>
<td>
<p>Path of output R Markdown report</p>
</td></tr>
<tr><td><code id="create_error_log_report_+3A_file">file</code></td>
<td>
<p>Filename of output R Markdown report</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return an object, but instead knits html RMarkdown report to specified path and file name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Examples not run

# Creating harmonized object using harmonization sheet with errors.
# harmonized_obj &lt;- harmonization(harmonization_sheet = error_harmonization_sheet_example)

# Knitting error log report
# create_error_log_report(harmonization_object = harmonized_obj,
#   path = './',
#   file = 'example_output.html)

</code></pre>

<hr>
<h2 id='create_long_dataset'>Create long dataset.</h2><span id='topic+create_long_dataset'></span>

<h3>Description</h3>

<p>This function is usually not called by the user. Instead it is usually
called by <code><a href="#topic+harmonization">harmonization()</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_long_dataset(
  vars_interest,
  subdomain,
  previous_dataset,
  error_log,
  na_string,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_long_dataset_+3A_vars_interest">vars_interest</code></td>
<td>
<p>Variable currently being harmonized</p>
</td></tr>
<tr><td><code id="create_long_dataset_+3A_subdomain">subdomain</code></td>
<td>
<p>Category of variable</p>
</td></tr>
<tr><td><code id="create_long_dataset_+3A_previous_dataset">previous_dataset</code></td>
<td>
<p>Dataframe created so far</p>
</td></tr>
<tr><td><code id="create_long_dataset_+3A_error_log">error_log</code></td>
<td>
<p>Error log</p>
</td></tr>
<tr><td><code id="create_long_dataset_+3A_na_string">na_string</code></td>
<td>
<p>Character string of final recode value to be set to NA.</p>
</td></tr>
<tr><td><code id="create_long_dataset_+3A_verbose">verbose</code></td>
<td>
<p>(TRUE/FALSE) Should the function print the current progress
to the console?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function takes the harmonization sheet, and input dataframe, and creates
a dataframe with the harmonized variable.
</p>


<h3>Value</h3>

<p>Returns a list with the harmonized long dataset, and error log.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example sheet
test_sheet &lt;- harmonization_sheet_example[harmonization_sheet_example$study == 'Cohort A',]

# Example dataset
test_data &lt;- cohort_a

# create error log
test_error_log &lt;- test_sheet[,c('item','study','visit','possible_range')]

test_error_log$completed_status &lt;- NA_character_
test_error_log$completed_reason &lt;- NA_character_
test_error_log$range_set_to_na &lt;- NA_integer_
test_error_log$range_out_of_range_warning &lt;- NA

long_dataset &lt;- create_long_dataset(vars_interest = test_sheet,
                                    subdomain = 'age',
                                    previous_dataset = test_data,
                                    error_log = test_error_log,
                                    na_string = 'NA',
                                    verbose = TRUE)

</code></pre>

<hr>
<h2 id='create_summary_report'>Summary report creation</h2><span id='topic+create_summary_report'></span>

<h3>Description</h3>

<p>Summary report creation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_summary_report(
  harmonization_object,
  path = "./",
  file = "summary_report.html",
  compare = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_summary_report_+3A_harmonization_object">harmonization_object</code></td>
<td>
<p>Harmonization object</p>
</td></tr>
<tr><td><code id="create_summary_report_+3A_path">path</code></td>
<td>
<p>Path of output R Markdown report</p>
</td></tr>
<tr><td><code id="create_summary_report_+3A_file">file</code></td>
<td>
<p>Filename of output R Markdown report</p>
</td></tr>
<tr><td><code id="create_summary_report_+3A_compare">compare</code></td>
<td>
<p>Creates summary report with comparison of raw values with modified values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return an object, but instead knits html RMarkdown report to specified path and file name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Examples not run

# Creating harmonized object
# harmonized_obj &lt;- harmonization(harmonization_sheet = harmonization_sheet_example)

# Knitting summary report
# create_summary_report(harmonization_object = harmonized_obj,
#   path = './',
#   file = 'example_output.html)

# Use `compare` option to create comparison summary report.
# create_summary_report(harmonization_object = harmonized_obj,
#   path = './',
#   file = 'example_output.html,
#   compare = TRUE)


</code></pre>

<hr>
<h2 id='error_harmonization_sheet_example'>Error harmonization sheet example</h2><span id='topic+error_harmonization_sheet_example'></span>

<h3>Description</h3>

<p>Example of harmonization sheet. This harmonization sheet has a few typos
present (incorrect name of variable and/or dataset). This can be used to
demonstrate how errors are presented in the error log and/or the summary
method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>error_harmonization_sheet_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 16 rows and 12 columns
</p>


<h3>Source</h3>

<p>Created data
</p>

<hr>
<h2 id='harmonization'>Harmonization Function</h2><span id='topic+harmonization'></span>

<h3>Description</h3>

<p>This is the main function in the psHarmonize package. Takes a harmonization
sheet as input, and returns a harmonization object (list with S3 class of
'psHarmonize'). Requires source data.frames to be in the global environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>harmonization(
  harmonization_sheet,
  long_dataset = TRUE,
  wide_dataset = TRUE,
  error_log = TRUE,
  source_variables = TRUE,
  na_string = "NA",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="harmonization_+3A_harmonization_sheet">harmonization_sheet</code></td>
<td>
<p>Harmonization sheet input. Set of coding
instructions</p>
</td></tr>
<tr><td><code id="harmonization_+3A_long_dataset">long_dataset</code></td>
<td>
<p>(TRUE/FALSE) Should the function return a long dataset?</p>
</td></tr>
<tr><td><code id="harmonization_+3A_wide_dataset">wide_dataset</code></td>
<td>
<p>(TRUE/FALSE) Should the function return a wide dataset?</p>
</td></tr>
<tr><td><code id="harmonization_+3A_error_log">error_log</code></td>
<td>
<p>(TRUE/FALSE) Should the function return an error log?</p>
</td></tr>
<tr><td><code id="harmonization_+3A_source_variables">source_variables</code></td>
<td>
<p>(TRUE/FALSE) Should the output datasets contain the original non
modified values?</p>
</td></tr>
<tr><td><code id="harmonization_+3A_na_string">na_string</code></td>
<td>
<p>Character string of final recode value to be set to missing.
Default is 'NA'. For example, if you use <code>code_type</code> of 'recode', and some of
your final values are 'NA', they will be set to missing.</p>
</td></tr>
<tr><td><code id="harmonization_+3A_verbose">verbose</code></td>
<td>
<p>(TRUE/FALSE) Should the <code>harmonization()</code> function print
the current progress to the console?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Note:</strong> psHarmonize evaluates and runs code entered in the harmonization sheet.
Make sure to only use harmonization sheets from authors you trust.
</p>


<h3>Value</h3>

<p>List of return objects with S3 class of 'psHarmonize'. Can be used
as input for report function <code><a href="#topic+create_summary_report">create_summary_report()</a></code> and
<code><a href="#topic+create_error_log_report">create_error_log_report()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Running harmonization function with example harmonization sheet
harmonization_obj &lt;- harmonization(harmonization_sheet = harmonization_sheet_example)

# Extracting harmonized long dataset (each row is a visit)
long_dataset &lt;- harmonization_obj$long_dataset

# Extracting harmonized wide dataset (each row is a person)
# Visits are expressed in multiple columns
wide_dataset &lt;- harmonization_obj$wide_dataset


</code></pre>

<hr>
<h2 id='harmonization_sheet_example'>Harmonization sheet example</h2><span id='topic+harmonization_sheet_example'></span>

<h3>Description</h3>

<p>Example of a harmonization sheet. This serves as the input file for the harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>harmonization_sheet_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 16 rows and 12 columns
</p>


<h3>Source</h3>

<p>Created data
</p>

<hr>
<h2 id='range_function'>Range function. To be called by harmonization function.</h2><span id='topic+range_function'></span>

<h3>Description</h3>

<p>Range function. To be called by harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>range_function(
  data = temp_dataset,
  min_max_range = possible_range,
  new_var = item
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="range_function_+3A_data">data</code></td>
<td>
<p>Data to be modified</p>
</td></tr>
<tr><td><code id="range_function_+3A_min_max_range">min_max_range</code></td>
<td>
<p>Range of allowed values</p>
</td></tr>
<tr><td><code id="range_function_+3A_new_var">new_var</code></td>
<td>
<p>New variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the new vector (values outside of range set to NA), and the number of values set to NA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
test_data &lt;- data.frame(val = 1:10)

range_function(data = test_data, min_max_range = '[2,8]', new_var = 'val')

</code></pre>

<hr>
<h2 id='range_function_cat'>Possible values for categorical variables. To be called by harmonization function.</h2><span id='topic+range_function_cat'></span>

<h3>Description</h3>

<p>Possible values for categorical variables. To be called by harmonization function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>range_function_cat(
  data = temp_dataset,
  possible_vals_cat = possible_vals,
  new_var = item
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="range_function_cat_+3A_data">data</code></td>
<td>
<p>data to be modified</p>
</td></tr>
<tr><td><code id="range_function_cat_+3A_possible_vals_cat">possible_vals_cat</code></td>
<td>
<p>vector of possible values</p>
</td></tr>
<tr><td><code id="range_function_cat_+3A_new_var">new_var</code></td>
<td>
<p>new variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the new vector (values outside of set to NA), and the number of values set to NA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
test_data &lt;- data.frame(val = c('a','b','j','k','c','d'))

range_function_cat(data = test_data, possible_vals_cat = c('a','b','c','d'), new_var = 'val')

</code></pre>

<hr>
<h2 id='reorder_factors'>Reorder factors</h2><span id='topic+reorder_factors'></span>

<h3>Description</h3>

<p>Reorder factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reorder_factors(data, sheet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reorder_factors_+3A_data">data</code></td>
<td>
<p>Harmonization object, or harmonized data.frame.</p>
</td></tr>
<tr><td><code id="reorder_factors_+3A_sheet">sheet</code></td>
<td>
<p>Factor reorder sheet.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns harmonization object, or harmonized data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Running harmonization function with example harmonization sheet
harmonization_obj &lt;- harmonization(harmonization_sheet = harmonization_sheet_example)

long_dataset &lt;- harmonization_obj$long_dataset

table(long_dataset$education)

# College
# 5643
#
# Graduate/Professional
# 1287
#
# High school
# 7562
#
# No education/grade school
# 7508

# Creating factor reorder sheet
edu_order &lt;- data.frame(
 variable = 'education',
 values = c('No education/grade school', 'High school', 'College', 'Graduate/Professional'),
 order = 1:4
)

# Reorder factors
harmonization_obj &lt;- reorder_factors(data = harmonization_obj, sheet = edu_order)

long_dataset &lt;- harmonization_obj$long_dataset

table(long_dataset$education)

# No education/grade school
# 7508
#
# High school
# 7562
#
# College
# 5643
#
# Graduate/Professional
# 1287


</code></pre>

<hr>
<h2 id='reorder_factors_df'>Reorder factors data.frame</h2><span id='topic+reorder_factors_df'></span>

<h3>Description</h3>

<p>Reorder factors data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reorder_factors_df(data, sheet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reorder_factors_df_+3A_data">data</code></td>
<td>
<p>Harmonized data.frame</p>
</td></tr>
<tr><td><code id="reorder_factors_df_+3A_sheet">sheet</code></td>
<td>
<p>Factor reorder sheet</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns harmonized data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Creating example dataframe of variables, the order, and the values
# The function will reorder the factor using these values in the order
# provided.

# This would typically be created in an excel or CSV file outside of R,
# and then imported into R.
test_sheet &lt;- data.frame(
  variable = c(rep('Education',4),rep('Class',3)),
  order = c(1,2,3,4,1,2,3),
  values = c('None','Grade','HS','College','A','B','C')
)

# I'm creating some test data to demonstrate
set.seed(1234)
test_data &lt;- data.frame(
  ID = 1:20,
  Education = sample(c('None','Grade','HS','College'), size = 20, replace = TRUE),
  Class = sample(c('A','B','C'), size = 20, replace = TRUE)
)

# Creating factors in the test data
test_data$Education &lt;- factor(test_data$Education)
test_data$Class &lt;- factor(test_data$Class)

table(test_data$Education, useNA = 'ifany')
table(test_data$Class, useNA = 'ifany')


# Now reordering factors based on the sheet
test_data_mod &lt;- reorder_factors_df(data = test_data, sheet = test_sheet)

table(test_data_mod$Education, useNA = 'ifany')
table(test_data_mod$Class, useNA = 'ifany')

</code></pre>

<hr>
<h2 id='summary.psHarmonize'>psHarmonize summary method</h2><span id='topic+summary.psHarmonize'></span>

<h3>Description</h3>

<p>psHarmonize summary method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psHarmonize'
summary(object, ..., verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.psHarmonize_+3A_object">object</code></td>
<td>
<p>psHarmonize object</p>
</td></tr>
<tr><td><code id="summary.psHarmonize_+3A_...">...</code></td>
<td>
<p>Can provide additional arguments</p>
</td></tr>
<tr><td><code id="summary.psHarmonize_+3A_verbose">verbose</code></td>
<td>
<p>T/F. When TRUE, will list variables for each section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Doesn't return object. Prints status of harmonization (# of harmonizated variables, etc.)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
harmonization_obj &lt;- harmonization(harmonization_sheet_example)

summary(harmonization_obj)

# Use verbose option to see more details
summary(harmonization_obj, verbose = TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
