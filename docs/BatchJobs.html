<!DOCTYPE html><html><head><title>Help for package BatchJobs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BatchJobs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addRegistryPackages'><p>Add packages to registry.</p></a></li>
<li><a href='#addRegistrySourceDirs'><p>Add source dirs to registry.</p></a></li>
<li><a href='#addRegistrySourceFiles'><p>Add source files to registry.</p></a></li>
<li><a href='#applyJobFunction'><p>applyJobFunction</p>
ONLY FOR INTERNAL USAGE.</a></li>
<li><a href='#batchExpandGrid'><p>Map function over all combinations.</p></a></li>
<li><a href='#batchExport'><p>Export R object to be available on the slaves.</p></a></li>
<li><a href='#BatchJobs'><p>The BatchJobs package</p></a></li>
<li><a href='#batchMap'><p>Maps a function over lists or vectors, adding jobs to a registry.</p></a></li>
<li><a href='#batchMapQuick'><p>Combination of makeRegistry, batchMap and submitJobs.</p></a></li>
<li><a href='#batchMapResults'><p>Maps a function over the results of a registry by using batchMap.</p></a></li>
<li><a href='#batchQuery'><p>Manually query the BatchJobs database</p></a></li>
<li><a href='#batchReduce'><p>Reduces via a binary function over a list adding jobs to a registry.</p></a></li>
<li><a href='#batchReduceResults'><p>Reduces results via a binary function and adds jobs for this to a registry.</p></a></li>
<li><a href='#batchUnexport'><p>Unload exported R objects.</p></a></li>
<li><a href='#callFunctionOnSSHWorkers'><p>Call an arbitrary function on specified SSH workers.</p></a></li>
<li><a href='#cfBrewTemplate'><p>Cluster functions helper: Brew your template into a job description file.</p></a></li>
<li><a href='#cfHandleUnknownSubmitError'><p>Cluster functions helper: Handle an unknown error during job submission.</p></a></li>
<li><a href='#cfKillBatchJob'><p>Cluster functions helper: Kill a batch job via OS command</p></a></li>
<li><a href='#cfReadBrewTemplate'><p>Cluster functions helper: Read in your brew template file.</p></a></li>
<li><a href='#checkIds'><p>Check job ids.</p></a></li>
<li><a href='#configuration'><p>BatchJobs configuration.</p></a></li>
<li><a href='#copyRequiredJobFiles'><p>ONLY FOR INTERNAL USAGE.</p></a></li>
<li><a href='#dbCreateJobDefTable'><p>ONLY FOR INTERNAL USAGE.</p></a></li>
<li><a href='#dbGetJobs'><p>ONLY FOR INTERNAL USAGE.</p></a></li>
<li><a href='#debugMulticore'><p>Helper function to debug multicore mode.</p></a></li>
<li><a href='#debugSSH'><p>Helper function to debug SSH mode.</p></a></li>
<li><a href='#filterResults'><p>Find all results where a specific condition is true.</p></a></li>
<li><a href='#findDone'><p>Find jobs depending on computional state.</p></a></li>
<li><a href='#findJobs'><p>Finds ids of jobs that match a query.</p></a></li>
<li><a href='#getConfig'><p>Returns a list of BatchJobs configuration settings</p></a></li>
<li><a href='#getErrorMessages'><p>Get error messages of jobs.</p></a></li>
<li><a href='#getJob'><p>Get job from registry by id.</p></a></li>
<li><a href='#getJobIds'><p>Get ids of jobs in registry.</p></a></li>
<li><a href='#getJobInfo'><p>Get computational information of jobs.</p></a></li>
<li><a href='#getJobLocation'><p>Get the physical location of job files on the hard disk.</p></a></li>
<li><a href='#getJobNr'><p>Get number of jobs in registry.</p></a></li>
<li><a href='#getJobParamDf'><p>Retrieve Job Parameters.</p></a></li>
<li><a href='#getJobResources'><p>Function to get the resources that were submitted for some jobs.</p></a></li>
<li><a href='#getJobs'><p>Get jobs from registry by id.</p></a></li>
<li><a href='#getLogFiles'><p>Get log file paths for jobs.</p></a></li>
<li><a href='#getResources'><p>Function to get job resources in job function.</p></a></li>
<li><a href='#getSSHWorkersInfo'><p>Print and return R installation and other information for SSH workers.</p></a></li>
<li><a href='#grepLogs'><p>Grep log files for a pattern.</p></a></li>
<li><a href='#installPackagesOnSSHWorkers'><p>Install packages on SSH workers.</p></a></li>
<li><a href='#killJobs'><p>Kill some jobs on the batch system.</p></a></li>
<li><a href='#loadConfig'><p>Load a specific configuration file.</p></a></li>
<li><a href='#loadExports'><p>Load exported R data objects.</p></a></li>
<li><a href='#loadRegistry'><p>Load a previously saved registry.</p></a></li>
<li><a href='#loadResult'><p>Loads a specific result file.</p></a></li>
<li><a href='#loadResults'><p>Loads result files for id vector.</p></a></li>
<li><a href='#makeClusterFunctions'><p>Create a ClusterFuntions object.</p></a></li>
<li><a href='#makeClusterFunctionsInteractive'><p>Create cluster functions for sequential execution in same session.</p></a></li>
<li><a href='#makeClusterFunctionsLocal'><p>Create cluster functions for sequential execution on local host.</p></a></li>
<li><a href='#makeClusterFunctionsLSF'><p>Create cluster functions for LSF systems.</p></a></li>
<li><a href='#makeClusterFunctionsMulticore'><p>Use multiple cores on local Linux machine to spawn parallel jobs.</p></a></li>
<li><a href='#makeClusterFunctionsOpenLava'><p>Create cluster functions for OpenLava systems.</p></a></li>
<li><a href='#makeClusterFunctionsSGE'><p>Create cluster functions for Sun Grid Engine systems.</p></a></li>
<li><a href='#makeClusterFunctionsSLURM'><p>Create cluster functions for SLURM-based systems.</p></a></li>
<li><a href='#makeClusterFunctionsSSH'><p>Create an SSH cluster to execute jobs.</p></a></li>
<li><a href='#makeClusterFunctionsTorque'><p>Create cluster functions for torque-based systems.</p></a></li>
<li><a href='#makeJob'><p>Creates a job description.</p></a></li>
<li><a href='#makeRegistry'><p>Construct a registry object.</p></a></li>
<li><a href='#makeSSHWorker'><p>Create SSH worker for SSH cluster functions.</p></a></li>
<li><a href='#makeSubmitJobResult'><p>Create a SubmitJobResult object.</p></a></li>
<li><a href='#reduceResults'><p>Reduce results from result directory.</p></a></li>
<li><a href='#removeRegistry'><p>Remove a registry object.</p></a></li>
<li><a href='#removeRegistryPackages'><p>Remove packages from registry.</p></a></li>
<li><a href='#removeRegistrySourceDirs'><p>Remove packages from registry.</p></a></li>
<li><a href='#removeRegistrySourceFiles'><p>Remove source files from registry.</p></a></li>
<li><a href='#resetJobs'><p>Reset computational state of jobs.</p></a></li>
<li><a href='#sanitizePath'><p>Sanitize a path</p></a></li>
<li><a href='#setConfig'><p>Set and overwrite configuration settings</p></a></li>
<li><a href='#setJobFunction'><p>Sets the job function for already existing jobs.</p></a></li>
<li><a href='#setJobNames'><p>Set job names.</p></a></li>
<li><a href='#setRegistryPackages'><p>Set packages for a registry.</p></a></li>
<li><a href='#showClusterStatus'><p>Show information about available computational resources on cluster.</p></a></li>
<li><a href='#showLog'><p>Display the contents of a log file.</p></a></li>
<li><a href='#showStatus'><p>Retrieve or show status information about jobs.</p></a></li>
<li><a href='#sourceRegistryFiles'><p>Source registry files</p></a></li>
<li><a href='#submitJobs'><p>Submit jobs or chunks of jobs to batch system via cluster function.</p></a></li>
<li><a href='#sweepRegistry'><p>Sweep obsolete files from the file system.</p></a></li>
<li><a href='#syncRegistry'><p>Syncronize staged queries into the registry.</p></a></li>
<li><a href='#testJob'><p>Tests a job by running it with Rscript in a new process.</p></a></li>
<li><a href='#updateRegistry'><p>ONLY FOR INTERNAL USAGE.</p></a></li>
<li><a href='#waitForJobs'><p>Wait for termination of jobs on the batch system.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Batch Computing with R</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides Map, Reduce and Filter variants to generate jobs on batch
    computing systems like PBS/Torque, LSF, SLURM and Sun Grid Engine.
    Multicore and SSH systems are also supported. For further details see the
    project web page.</td>
</tr>
<tr>
<td>Author:</td>
<td>Bernd Bischl &lt;bernd_bischl@gmx.net&gt;,
    Michel Lang &lt;michellang@gmail.com&gt;,
    Henrik Bengtsson &lt;henrikb@braju.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bernd Bischl &lt;bernd_bischl@gmx.net&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tudo-r/BatchJobs">https://github.com/tudo-r/BatchJobs</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tudo-r/BatchJobs/issues">https://github.com/tudo-r/BatchJobs/issues</a></td>
</tr>
<tr>
<td>MailingList:</td>
<td>batchjobs@googlegroups.com</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0), BBmisc (&ge; 1.9), methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>backports (&ge; 1.1.1), brew, checkmate (&ge; 1.8.0), data.table
(&ge; 1.9.6), DBI, digest, parallel, RSQLite (&ge; 1.0.9011),
sendmailR, stats, stringi (&ge; 0.4-1), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, testthat</td>
</tr>
<tr>
<td>Version:</td>
<td>1.9</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-21 10:39:57 UTC; michel</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-21 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addRegistryPackages'>Add packages to registry.</h2><span id='topic+addRegistryPackages'></span>

<h3>Description</h3>

<p>Mutator function for <code>packages</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRegistryPackages(reg, packages)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRegistryPackages_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="addRegistryPackages_+3A_packages">packages</code></td>
<td>
<p>[<code>character</code>]<br />
Packages to add to registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='addRegistrySourceDirs'>Add source dirs to registry.</h2><span id='topic+addRegistrySourceDirs'></span>

<h3>Description</h3>

<p>Mutator function for <code>src.dirs</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRegistrySourceDirs(reg, src.dirs, src.now = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRegistrySourceDirs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="addRegistrySourceDirs_+3A_src.dirs">src.dirs</code></td>
<td>
<p>[<code>character</code>]<br />
Paths to add to registry.
See <code><a href="#topic+makeRegistry">makeRegistry</a></code>.</p>
</td></tr>
<tr><td><code id="addRegistrySourceDirs_+3A_src.now">src.now</code></td>
<td>
<p>[<code>logical(1)</code>]
Source files now on master?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='addRegistrySourceFiles'>Add source files to registry.</h2><span id='topic+addRegistrySourceFiles'></span>

<h3>Description</h3>

<p>Mutator function for <code>src.files</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRegistrySourceFiles(reg, src.files, src.now = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRegistrySourceFiles_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="addRegistrySourceFiles_+3A_src.files">src.files</code></td>
<td>
<p>[<code>character</code>]<br />
Paths to add to registry.
See <code><a href="#topic+makeRegistry">makeRegistry</a></code>.</p>
</td></tr>
<tr><td><code id="addRegistrySourceFiles_+3A_src.now">src.now</code></td>
<td>
<p>[<code>logical(1)</code>]
Source files now on master?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='applyJobFunction'>applyJobFunction
ONLY FOR INTERNAL USAGE.</h2><span id='topic+applyJobFunction'></span>

<h3>Description</h3>

<p>applyJobFunction
ONLY FOR INTERNAL USAGE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>applyJobFunction(reg, job, cache)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="applyJobFunction_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="applyJobFunction_+3A_job">job</code></td>
<td>
<p>[<code><a href="#topic+Job">Job</a></code>]<br />
Job.</p>
</td></tr>
<tr><td><code id="applyJobFunction_+3A_cache">cache</code></td>
<td>
<p>[<code>FileCache</code>]<br />
Instance of <code><a href="BBmisc.html#topic+makeFileCache">makeFileCache</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[any]. Result of job.
</p>

<hr>
<h2 id='batchExpandGrid'>Map function over all combinations.</h2><span id='topic+batchExpandGrid'></span>

<h3>Description</h3>

<p>Maps an n-ary-function over a list of all combinations which are given by some vectors.
Internally <code><a href="base.html#topic+expand.grid">expand.grid</a></code> is used to compute the combinations, then
<code><a href="#topic+batchMap">batchMap</a></code> is called.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchExpandGrid(reg, fun, ..., more.args = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchExpandGrid_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Empty Registry that will store jobs for the mapping.</p>
</td></tr>
<tr><td><code id="batchExpandGrid_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Function to map over the combinations.</p>
</td></tr>
<tr><td><code id="batchExpandGrid_+3A_...">...</code></td>
<td>
<p>[any]<br />
Vectors that are used to compute all combinations.
If the arguments are named, these names are used to bind to arguments of <code>fun</code>.</p>
</td></tr>
<tr><td><code id="batchExpandGrid_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>data.frame</code>]. Expanded grid of combinations produced by <code><a href="base.html#topic+expand.grid">expand.grid</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x, y, z) x * y  + z
# lets store the param grid
grid = batchExpandGrid(reg, f, x = 1:2, y = 1:3, more.args = list(z = 10))
submitJobs(reg)
waitForJobs(reg)
y = reduceResultsVector(reg)
# later, we can always access the param grid like this
grid = getJobParamDf(reg)
cbind(grid, y = y)
</code></pre>

<hr>
<h2 id='batchExport'>Export R object to be available on the slaves.</h2><span id='topic+batchExport'></span>

<h3>Description</h3>

<p>Saves objects as <code>RData</code> files in the &ldquo;exports&rdquo; subdirectory of your <code>file.dir</code>
to be later loaded on the slaves.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchExport(reg, ..., li = list(), overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchExport_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="batchExport_+3A_...">...</code></td>
<td>
<p>[any]<br />
Objects to export. You must provide a valid name.</p>
</td></tr>
<tr><td><code id="batchExport_+3A_li">li</code></td>
<td>
<p>[<code>list</code>]<br />
More objects to export provided as a named list.</p>
</td></tr>
<tr><td><code id="batchExport_+3A_overwrite">overwrite</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
If set to <code>FALSE</code> (default), exported objects are protected from being overwritten
by multiple calls of this function. Setting this to <code>TRUE</code> disables this check.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>]. Invisibly returns a character vector of exported objects.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='BatchJobs'>The BatchJobs package</h2><span id='topic+BatchJobs'></span>

<h3>Description</h3>

<p>Provides Map, Reduce and Filter variants to generate jobs on batch
computing systems like PBS/Torque, LSF, SLURM and Sun Grid Engine.
Multicore and SSH systems are also supported. For further details see the
project web page.
</p>


<h3>Additional information</h3>


<dl>
<dt>Homepage:</dt><dd><p><a href="https://github.com/tudo-r/BatchJobs">https://github.com/tudo-r/BatchJobs</a></p>
</dd>
<dt>Wiki:</dt><dd><p><a href="https://github.com/tudo-r/BatchJobs/wiki">https://github.com/tudo-r/BatchJobs/wiki</a></p>
</dd>
<dt>FAQ:</dt><dd><p><a href="https://github.com/tudo-r/BatchJobs/wiki/FAQ">https://github.com/tudo-r/BatchJobs/wiki/FAQ</a></p>
</dd>
<dt>Configuration:</dt><dd><p><a href="https://github.com/tudo-r/BatchJobs/wiki/Configuration">https://github.com/tudo-r/BatchJobs/wiki/Configuration</a></p>
</dd>
</dl>

<p>The package currently support the following further R options, which you can set
either in your R profile file or a script via <code><a href="base.html#topic+options">options</a></code>:
</p>

<dl>
<dt>BatchJobs.verbose</dt><dd><p>This boolean flag can be set to <code>FALSE</code> to reduce the
console output of the package operations. Usually you want to see this output in interactive
work, but when you  use the package in e.g. knitr documents,
it clutters the resulting document too much.</p>
</dd>
<dt>BatchJobs.check.posix</dt><dd><p>If this boolean flag is enabled, the package checks your
registry file dir (and related user-defined directories) quite strictly to be POSIX compliant.
Usually this is a good idea, you do not want to have strange chars in your file paths,
as this might results in problems  when these paths get passed to the scheduler or other
command-line tools that the package interoperates with.
But on some OS this check might be too strict and cause problems.
Setting the flag to <code>FALSE</code> allows to disable the check entirely.
The default is <code>FALSE</code> on Windows systems and <code>TRUE</code> else.</p>
</dd>
</dl>


<hr>
<h2 id='batchMap'>Maps a function over lists or vectors, adding jobs to a registry.</h2><span id='topic+batchMap'></span>

<h3>Description</h3>

<p>You can then submit these jobs to the batch system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchMap(reg, fun, ..., more.args = list(), use.names = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchMap_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Empty Registry that will store jobs for the mapping.</p>
</td></tr>
<tr><td><code id="batchMap_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Function to map over <code>...</code>.</p>
</td></tr>
<tr><td><code id="batchMap_+3A_...">...</code></td>
<td>
<p>[any]<br />
Arguments to vectorize over (list or vector).</p>
</td></tr>
<tr><td><code id="batchMap_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
<tr><td><code id="batchMap_+3A_use.names">use.names</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Store parameter names to enable named results in <code><a href="#topic+loadResults">loadResults</a></code> and some other functions.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of type <code>integer</code> with job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg, f, 1:10)
print(reg)
</code></pre>

<hr>
<h2 id='batchMapQuick'>Combination of makeRegistry, batchMap and submitJobs.</h2><span id='topic+batchMapQuick'></span>

<h3>Description</h3>

<p>Combination of <code><a href="#topic+makeRegistry">makeRegistry</a></code>, <code><a href="#topic+batchMap">batchMap</a></code>
and <code><a href="#topic+submitJobs">submitJobs</a></code>
for quick computations on the cluster.
Should only be used by skilled users who know what they are doing.
Creates the file.dir, maps function, potentially chunks jobs and submits them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchMapQuick(
  fun,
  ...,
  more.args = list(),
  file.dir = NULL,
  packages = character(0L),
  chunk.size,
  n.chunks,
  chunks.as.arrayjobs = FALSE,
  inds,
  resources = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchMapQuick_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Function to map over <code>...</code>.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_...">...</code></td>
<td>
<p>[any]<br />
Arguments to vectorize over (list or vector).</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_file.dir">file.dir</code></td>
<td>
<p>[<code>character</code>]<br />
See <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
Default is <code>NULL</code>, which means that it is created in the current directory under the name
&ldquo;bmq_[random alphanumerics]&rdquo;.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_packages">packages</code></td>
<td>
<p>[<code>character</code>]<br />
See <code><a href="#topic+makeRegistry">makeRegistry</a></code>.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_chunk.size">chunk.size</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Preferred number of jobs in each chunk.
Can not be used in combination with <code>n.chunks</code>.
Note that the ids will get shuffled to balance out possible run time differences.
Default is not to use chunking.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_n.chunks">n.chunks</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Preferred number chunks.
Can not be used in combination with <code>chunk.size</code>.
Note that the ids will get shuffled to balance out possible run time differences.
Default is not to use chunking.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_chunks.as.arrayjobs">chunks.as.arrayjobs</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Submit chunks as array jobs?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_inds">inds</code></td>
<td>
<p>[<code>integer</code>]<br />
Indices of ids / chunks to submit.
Default is all. If ids get chunked, this subsets the list of shuffled ids.</p>
</td></tr>
<tr><td><code id="batchMapQuick_+3A_resources">resources</code></td>
<td>
<p>[<code>list</code>]<br />
Required resources for all batch jobs.
Default is empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]
</p>

<hr>
<h2 id='batchMapResults'>Maps a function over the results of a registry by using batchMap.</h2><span id='topic+batchMapResults'></span>

<h3>Description</h3>

<p>Maps a function over the results of a registry by using batchMap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchMapResults(
  reg,
  reg2,
  fun,
  ...,
  ids,
  part = NA_character_,
  more.args = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchMapResults_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry whose results should be mapped by <code>fun</code>.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_reg2">reg2</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Empty registry that should store the job for the mapping.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_fun">fun</code></td>
<td>
<p>[<code>function(job, res, ...)</code>]<br />
Function to map over results of <code>reg</code>.
Further arguments come from ... of <code>batchMapResults</code> and <code>more.args</code>.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_...">...</code></td>
<td>
<p>[any]<br />
Furher arguments to vectorize over (list or vector).
Must all be the same length as number of results in <code>reg</code>.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs whose results should be mapped with <code>fun</code>.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_part">part</code></td>
<td>
<p>[<code>character</code>]
Only useful for multiple result files, then defines which result file part(s) should be loaded.
<code>NA</code> means all parts are loaded, which is the default.</p>
</td></tr>
<tr><td><code id="batchMapResults_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of type <code>integer</code> with job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg1 = makeRegistry(id = "BatchJobsExample1", file.dir = tempfile(), seed = 123)
# square some numbers
f = function(x) x^2
batchMap(reg1, f, 1:10)

# submit jobs and wait for the jobs to finish
submitJobs(reg1)
waitForJobs(reg1)

# look at results
reduceResults(reg1, fun = function(aggr,job,res) c(aggr, res))

reg2 = makeRegistry(id = "BatchJobsExample2", file.dir = tempfile(), seed = 123)

# define function to tranform results, we simply do the inverse of the squaring
g = function(job, res) sqrt(res)
batchMapResults(reg1, reg2, fun = g)

# submit jobs and wait for the jobs to finish
submitJobs(reg2)
waitForJobs(reg2)

# check results
reduceResults(reg2, fun = function(aggr,job,res) c(aggr, res))
</code></pre>

<hr>
<h2 id='batchQuery'>Manually query the BatchJobs database</h2><span id='topic+batchQuery'></span>

<h3>Description</h3>

<p>Manually query the BatchJobs database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchQuery(reg, query, flags = "ro")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchQuery_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="batchQuery_+3A_query">query</code></td>
<td>
<p>[<code>character(1)</code>]<br />
SQL query to send to the database.</p>
</td></tr>
<tr><td><code id="batchQuery_+3A_flags">flags</code></td>
<td>
<p>[<code>character(1)</code>]<br />
One of &ldquo;ro&rdquo;, &ldquo;rw&rdquo; or &ldquo;rwc&rdquo; which is translated
to <code>SQLITE_RO</code>, <code>SQLITE_RW</code> or <code>SQLITE_RWC</code>, respectively.
See <a href="RSQLite.html#topic+SQLITE_RO">SQLITE_RO</a> for more info.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>data.frame</code>] Result of the query.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry("test", file.dir = tempfile())
batchMap(reg, identity, i = 1:10)
batchQuery(reg, "SELECT * FROM test_job_status")
</code></pre>

<hr>
<h2 id='batchReduce'>Reduces via a binary function over a list adding jobs to a registry.</h2><span id='topic+batchReduce'></span>

<h3>Description</h3>

<p>Each jobs reduces a certain number of elements on one slave.
You can then submit these jobs to the batch system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchReduce(reg, fun, xs, init, block.size, more.args = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchReduce_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Empty Registry.</p>
</td></tr>
<tr><td><code id="batchReduce_+3A_fun">fun</code></td>
<td>
<p>[<code>function(aggr, x, ...)</code>]<br />
Function to reduce <code>xs</code> with.</p>
</td></tr>
<tr><td><code id="batchReduce_+3A_xs">xs</code></td>
<td>
<p>[<code>vector</code>]<br />
Vector to reduce.</p>
</td></tr>
<tr><td><code id="batchReduce_+3A_init">init</code></td>
<td>
<p>[any]<br />
Initial object for reducing.</p>
</td></tr>
<tr><td><code id="batchReduce_+3A_block.size">block.size</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Number of elements of <code>xs</code> reduced in one job.</p>
</td></tr>
<tr><td><code id="batchReduce_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of type <code>integer</code> with job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># define function to reduce on slave, we want to sum a vector
f = function(aggr, x) aggr + x
reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)

# sum 20 numbers on each slave process, i.e. 5 jobs
batchReduce(reg, fun = f, 1:100, init = 0, block.size = 5)
submitJobs(reg)
waitForJobs(reg)

# now reduce one final time on master
reduceResults(reg, fun = function(aggr,job,res) f(aggr, res))
</code></pre>

<hr>
<h2 id='batchReduceResults'>Reduces results via a binary function and adds jobs for this to a registry.</h2><span id='topic+batchReduceResults'></span>

<h3>Description</h3>

<p>Each jobs reduces a certain number of results on one slave.
You can then submit these jobs to the batch system.
Later, you can do a final reduction with <code><a href="#topic+reduceResults">reduceResults</a></code> on the master.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchReduceResults(
  reg,
  reg2,
  fun,
  ids,
  part = NA_character_,
  init,
  block.size,
  more.args = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchReduceResults_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry whose results should be reduced by <code>fun</code>.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_reg2">reg2</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Empty registry that should store the job for the mapping.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_fun">fun</code></td>
<td>
<p>[<code>function(aggr, job, res, ...)</code>]<br />
Function to reduce results with.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs whose results should be reduced with <code>fun</code>.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_part">part</code></td>
<td>
<p>[<code>character</code>]
Only useful for multiple result files, then defines which result file part(s) should be loaded.
<code>NA</code> means all parts are loaded, which is the default.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_init">init</code></td>
<td>
<p>[any]<br />
Initial object for reducing.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_block.size">block.size</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Number of results reduced in one job.</p>
</td></tr>
<tr><td><code id="batchReduceResults_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of type <code>integer</code> with job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># generating example results:
reg1 = makeRegistry(id = "BatchJobsExample1", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg1, f, 1:20)
submitJobs(reg1)
waitForJobs(reg1)

# define function to reduce on slave, we want to sum the squares
myreduce = function(aggr, job, res) aggr + res

# sum 5 results on each slave process, i.e. 4 jobs
reg2 = makeRegistry(id = "BatchJobsExample2", file.dir = tempfile(), seed = 123)
batchReduceResults(reg1, reg2, fun = myreduce, init = 0, block.size = 5)
submitJobs(reg2)
waitForJobs(reg2)

# now reduce one final time on master
reduceResults(reg2, fun = myreduce)
</code></pre>

<hr>
<h2 id='batchUnexport'>Unload exported R objects.</h2><span id='topic+batchUnexport'></span>

<h3>Description</h3>

<p>Removes <code>RData</code> files from the &ldquo;exports&rdquo; subdirectory of your <code>file.dir</code>
and thereby prevents loading on the slave.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchUnexport(reg, what)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchUnexport_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="batchUnexport_+3A_what">what</code></td>
<td>
<p>[<code>character</code>]<br />
Names of objects to remove.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>]. Invisibly returns a character vector of unexported objects.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='callFunctionOnSSHWorkers'>Call an arbitrary function on specified SSH workers.</h2><span id='topic+callFunctionOnSSHWorkers'></span>

<h3>Description</h3>

<p>Calls can be made in parallel or consecutively,
the function waits until all calls have finished and
returns call results.
In consecutive mode the output on the workers can also be shown on the master
during computation.
</p>
<p>Please read and understand the comments for argument <code>dir</code>.
</p>
<p>Note that this function should only be used for short administrative
tasks or information gathering on the workers, the true work horse for
real computation is <code><a href="#topic+submitJobs">submitJobs</a></code>.
</p>
<p>In <code><a href="#topic+makeSSHWorker">makeSSHWorker</a></code> various options for load
management are possible. Note that these will be
ignored for the current call to execute it immediatly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>callFunctionOnSSHWorkers(
  nodenames,
  fun,
  ...,
  consecutive = FALSE,
  show.output = consecutive,
  simplify = TRUE,
  use.names = TRUE,
  dir = getwd()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_nodenames">nodenames</code></td>
<td>
<p>[<code>character</code>]<br />
Nodenames of workers to call function on.
Only workers which were specified in your
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a></code> configuration can be used.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Function to call on workers.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_...">...</code></td>
<td>
<p>[any]<br />
Arguments for <code>fun</code>.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_consecutive">consecutive</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Do calls consecutively and always wait until each worker is done.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_show.output">show.output</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Show output of workers on master during call.
Can be useful to see what is happening.
Can only be used in consecutive mode.
Default is <code>consecutive</code>.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_simplify">simplify</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should the result be simplified? See <code><a href="base.html#topic+sapply">sapply</a></code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_use.names">use.names</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Name results by <code>nodenames</code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="callFunctionOnSSHWorkers_+3A_dir">dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Directory under which a temporary registry will be
created in a subdirectory for communication.
This has to be somewhere on the shared
filesystem. The created subdirectory will be cleaned up on exit.
Default is current working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Results of function calls, either a list or simplified.
</p>

<hr>
<h2 id='cfBrewTemplate'>Cluster functions helper: Brew your template into a job description file.</h2><span id='topic+cfBrewTemplate'></span>

<h3>Description</h3>

<p>This function is only intended for use in your own cluster functions implementation.
</p>
<p>Calls brew silently on your template, any error will lead to an exception.
If debug mode is turned on in the configuration, the file is stored at the same place as the
corresponding R script in the &ldquo;jobs&rdquo;-subdir of your files directory,
otherwise in the temp dir via <code><a href="base.html#topic+tempfile">tempfile</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfBrewTemplate(conf, template, rscript, extension)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfBrewTemplate_+3A_conf">conf</code></td>
<td>
<p>[<code>environment</code>]<br />
BatchJobs configuration.</p>
</td></tr>
<tr><td><code id="cfBrewTemplate_+3A_template">template</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Job desfription template as a char vecrtor,
possibly read in via <code><a href="#topic+cfReadBrewTemplate">cfReadBrewTemplate</a></code>.</p>
</td></tr>
<tr><td><code id="cfBrewTemplate_+3A_rscript">rscript</code></td>
<td>
<p>[<code>character(1)</code>]<br />
File path to you your corresponding R script for the job.</p>
</td></tr>
<tr><td><code id="cfBrewTemplate_+3A_extension">extension</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Extension for the job description file, e.g. &ldquo;pbs&rdquo;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character(1)</code>]. File path of result.
</p>

<hr>
<h2 id='cfHandleUnknownSubmitError'>Cluster functions helper: Handle an unknown error during job submission.</h2><span id='topic+cfHandleUnknownSubmitError'></span>

<h3>Description</h3>

<p>This function is only intended for use in your own cluster functions implementation.
</p>
<p>Simply constructs a <code><a href="#topic+SubmitJobResult">SubmitJobResult</a></code> object with status code 101,
NA as batch job id and an informative error message containing the output of the OS command in <code>output</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfHandleUnknownSubmitError(cmd, exit.code, output)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfHandleUnknownSubmitError_+3A_cmd">cmd</code></td>
<td>
<p>[<code>character(1)</code>]<br />
OS command used to submit the job, e.g. qsub.</p>
</td></tr>
<tr><td><code id="cfHandleUnknownSubmitError_+3A_exit.code">exit.code</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Exit code of the OS command, should not be 0.</p>
</td></tr>
<tr><td><code id="cfHandleUnknownSubmitError_+3A_output">output</code></td>
<td>
<p>[<code>character</code>]<br />
Output of the OS command, hopefully an informative error message.
If these are mutiple lines in a vector, they are automatically pasted together.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+SubmitJobResult">SubmitJobResult</a></code>].
</p>

<hr>
<h2 id='cfKillBatchJob'>Cluster functions helper: Kill a batch job via OS command</h2><span id='topic+cfKillBatchJob'></span>

<h3>Description</h3>

<p>This function is only intended for use in your own cluster functions implementation.
</p>
<p>Calls the OS command to kill a job via <code>system</code> like this: &ldquo;cmd batch.job.id&rdquo;.
If the command returns an exit code &gt; 0, the command is repeated
after a 1 second sleep <code>max.tries-1</code> times.
If the command failed in all tries, an exception is generated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfKillBatchJob(cmd, batch.job.id, max.tries = 3L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfKillBatchJob_+3A_cmd">cmd</code></td>
<td>
<p>[<code>character(1)</code>]<br />
OS command, e.g. &ldquo;qdel&rdquo;.</p>
</td></tr>
<tr><td><code id="cfKillBatchJob_+3A_batch.job.id">batch.job.id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Id of the batch job on the batch system.</p>
</td></tr>
<tr><td><code id="cfKillBatchJob_+3A_max.tries">max.tries</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Number of total times to try execute the OS command in cases of failures.
Default is <code>3</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='cfReadBrewTemplate'>Cluster functions helper: Read in your brew template file.</h2><span id='topic+cfReadBrewTemplate'></span>

<h3>Description</h3>

<p>This function is only intended for use in your own cluster functions implementation.
</p>
<p>Simply reads your template and returns it as a character vector.
If you do this in the constructor of your cluster functions once, you can avoid this
repeated file access later on.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cfReadBrewTemplate(template.file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfReadBrewTemplate_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
File path.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>].
</p>

<hr>
<h2 id='checkIds'>Check job ids.</h2><span id='topic+checkIds'></span>

<h3>Description</h3>

<p>Simply checks if probided vector of job ids is valid and
throws an error if something is odd.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkIds(reg, ids, check.present = TRUE, len = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkIds_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="checkIds_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Vector of job ids.</p>
</td></tr>
<tr><td><code id="checkIds_+3A_check.present">check.present</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Check if the ids are present in the database? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="checkIds_+3A_len">len</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Expected length of id vector. Passed to <code><a href="checkmate.html#topic+asInteger">asInteger</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the vector of ids, converted to integer.
</p>

<hr>
<h2 id='configuration'>BatchJobs configuration.</h2><span id='topic+configuration'></span><span id='topic+.BatchJobs.R'></span>

<h3>Description</h3>

<p>In order to understand how the package should be configured
please read
<a href="https://github.com/tudo-r/BatchJobs/wiki/Configuration">https://github.com/tudo-r/BatchJobs/wiki/Configuration</a>.
</p>


<h3>See Also</h3>

<p>Other conf: 
<code><a href="#topic+getConfig">getConfig</a>()</code>,
<code><a href="#topic+loadConfig">loadConfig</a>()</code>,
<code><a href="#topic+setConfig">setConfig</a>()</code>
</p>

<hr>
<h2 id='copyRequiredJobFiles'>ONLY FOR INTERNAL USAGE.</h2><span id='topic+copyRequiredJobFiles'></span>

<h3>Description</h3>

<p>ONLY FOR INTERNAL USAGE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyRequiredJobFiles(reg1, reg2, id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyRequiredJobFiles_+3A_reg1">reg1</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Source registry.</p>
</td></tr>
<tr><td><code id="copyRequiredJobFiles_+3A_reg2">reg2</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Detination registry.</p>
</td></tr>
<tr><td><code id="copyRequiredJobFiles_+3A_id">id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Job id.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='dbCreateJobDefTable'>ONLY FOR INTERNAL USAGE.</h2><span id='topic+dbCreateJobDefTable'></span>

<h3>Description</h3>

<p>ONLY FOR INTERNAL USAGE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbCreateJobDefTable(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dbCreateJobDefTable_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='dbGetJobs'>ONLY FOR INTERNAL USAGE.</h2><span id='topic+dbGetJobs'></span>

<h3>Description</h3>

<p>ONLY FOR INTERNAL USAGE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbGetJobs(reg, ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dbGetJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="dbGetJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of selected jobs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[list of <code><a href="#topic+Job">Job</a></code>]. Retrieved jobs from DB.
</p>

<hr>
<h2 id='debugMulticore'>Helper function to debug multicore mode.</h2><span id='topic+debugMulticore'></span>

<h3>Description</h3>

<p>Useful in case of severe errors.
Tries different operations of increasing difficulty
and provides debug output on the console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>debugMulticore(r.options)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="debugMulticore_+3A_r.options">r.options</code></td>
<td>
<p>[<code>list</code>]
Options for R and Rscript, one option per element of the vector,
a la &ldquo;&ndash;vanilla&rdquo;.
Default is <code>c("--no-save", "--no-restore", "--no-init-file", "--no-site-file")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='debugSSH'>Helper function to debug SSH mode.</h2><span id='topic+debugSSH'></span>

<h3>Description</h3>

<p>Useful in case of configuration problems.
Tries different operations of increasing difficulty
and provides debug output on the console.
</p>
<p>Note that this function does not access nor use information specified for
your cluster functions in your configuration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>debugSSH(
  nodename,
  ssh.cmd = "ssh",
  ssh.args = character(0L),
  rhome = "",
  r.options = c("--no-save", "--no-restore", "--no-init-file", "--no-site-file"),
  dir = getwd()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="debugSSH_+3A_nodename">nodename</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Node on which worker should be constructed for the test.</p>
</td></tr>
<tr><td><code id="debugSSH_+3A_ssh.cmd">ssh.cmd</code></td>
<td>
<p>[<code>character(1)</code>)]<br />
CLI command to ssh into remote node.
Default is &ldquo;ssh&rdquo;.</p>
</td></tr>
<tr><td><code id="debugSSH_+3A_ssh.args">ssh.args</code></td>
<td>
<p>[<code>character</code>]<br />
CLI args for <code>ssh.cmd</code>.
Default is none.</p>
</td></tr>
<tr><td><code id="debugSSH_+3A_rhome">rhome</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to R installation on the worker.
&ldquo;&rdquo; means R installation on the PATH is used,
of course this implies that it must be on the PATH
(also for non-interactive shells)!
Default is &ldquo;&rdquo;.</p>
</td></tr>
<tr><td><code id="debugSSH_+3A_r.options">r.options</code></td>
<td>
<p>[<code>list</code>]
Options for R and Rscript, one option per element of the vector,
a la &ldquo;&ndash;vanilla&rdquo;.
Default is <code>c("--no-save", "--no-restore", "--no-init-file", "--no-site-file")</code>.</p>
</td></tr>
<tr><td><code id="debugSSH_+3A_dir">dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path where internally used test registries can be created.
Note that this must be shared for the worker.
Default is current working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='filterResults'>Find all results where a specific condition is true.</h2><span id='topic+filterResults'></span>

<h3>Description</h3>

<p>Find all results where a specific condition is true.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filterResults(reg, ids, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filterResults_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="filterResults_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs whose results you want to test for the condition.
Default is all jobs for which results are available.</p>
</td></tr>
<tr><td><code id="filterResults_+3A_fun">fun</code></td>
<td>
<p>[<code>fun(job, res)</code>]<br />
Predicate function that returns <code>TRUE</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="filterResults_+3A_...">...</code></td>
<td>
<p>[any]<br />
Additional arguments to <code>fun</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Ids of jobs where <code>fun(job, result)</code> returns <code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg, f, 1:10)
submitJobs(reg)
waitForJobs(reg)

# which square numbers are even:
filterResults(reg, fun = function(job, res) res %% 2 == 0)
</code></pre>

<hr>
<h2 id='findDone'>Find jobs depending on computional state.</h2><span id='topic+findDone'></span><span id='topic+findNotDone'></span><span id='topic+findMissingResults'></span><span id='topic+findErrors'></span><span id='topic+findNotErrors'></span><span id='topic+findTerminated'></span><span id='topic+findNotTerminated'></span><span id='topic+findSubmitted'></span><span id='topic+findNotSubmitted'></span><span id='topic+findOnSystem'></span><span id='topic+findNotOnSystem'></span><span id='topic+findRunning'></span><span id='topic+findNotRunning'></span><span id='topic+findStarted'></span><span id='topic+findNotStarted'></span><span id='topic+findExpired'></span><span id='topic+findDisappeared'></span>

<h3>Description</h3>

<p><code>findDone</code>: Find jobs which succesfully terminated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findDone(reg, ids, limit = NULL)

findNotDone(reg, ids, limit = NULL)

findMissingResults(reg, ids, limit = NULL)

findErrors(reg, ids, limit = NULL)

findNotErrors(reg, ids, limit = NULL)

findTerminated(reg, ids, limit = NULL)

findNotTerminated(reg, ids, limit = NULL)

findSubmitted(reg, ids, limit = NULL)

findNotSubmitted(reg, ids, limit = NULL)

findOnSystem(reg, ids, limit = NULL)

findNotOnSystem(reg, ids, limit = NULL)

findRunning(reg, ids, limit = NULL)

findNotRunning(reg, ids, limit = NULL)

findStarted(reg, ids, limit = NULL)

findNotStarted(reg, ids, limit = NULL)

findExpired(reg, ids, limit = NULL)

findDisappeared(reg, ids, limit = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findDone_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="findDone_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Subset of job ids to restrict the result to.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="findDone_+3A_limit">limit</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Limit the number of returned ids.
Default is all ids.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Ids of jobs.
</p>

<hr>
<h2 id='findJobs'>Finds ids of jobs that match a query.</h2><span id='topic+findJobs'></span>

<h3>Description</h3>

<p>Finds ids of jobs that match a query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findJobs(reg, ids, pars, jobnames)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="findJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Subset of job ids to restrict the result to.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="findJobs_+3A_pars">pars</code></td>
<td>
<p>[R expression]<br />
All jobs whose parameters match the given expression are selected.
This implies that you have named the parameters when you passed the vectors.
If you forgot to do this you can use <code>.arg1</code>, <code>.arg2</code>, etc., to refer to the
the unnamed ones.</p>
</td></tr>
<tr><td><code id="findJobs_+3A_jobnames">jobnames</code></td>
<td>
<p>[<code>character</code>]<br />
Restrict to jobs with stored names. Exact matching is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Ids for jobs which match the query.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x, y) x * y
batchExpandGrid(reg, f, x = 1:2, y = 1:3)
findJobs(reg, pars = (y &gt; 2))
</code></pre>

<hr>
<h2 id='getConfig'>Returns a list of BatchJobs configuration settings</h2><span id='topic+getConfig'></span>

<h3>Description</h3>

<p>Returns a list of BatchJobs configuration settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getConfig()
</code></pre>


<h3>Value</h3>

<p><code>list</code> of current configuration variables with classs &ldquo;Config&rdquo;.
</p>


<h3>See Also</h3>

<p>Other conf: 
<code><a href="#topic+configuration">configuration</a></code>,
<code><a href="#topic+loadConfig">loadConfig</a>()</code>,
<code><a href="#topic+setConfig">setConfig</a>()</code>
</p>

<hr>
<h2 id='getErrorMessages'>Get error messages of jobs.</h2><span id='topic+getErrorMessages'></span>

<h3>Description</h3>

<p>Get error messages of jobs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getErrorMessages(reg, ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getErrorMessages_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getErrorMessages_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs with errors.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>]. Error messages for jobs as character vector<br />
<code>NA</code> if job has terminated successfully.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='getJob'>Get job from registry by id.</h2><span id='topic+getJob'></span>

<h3>Description</h3>

<p>Get job from registry by id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJob(reg, id, check.id = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJob_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJob_+3A_id">id</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Id of job.</p>
</td></tr>
<tr><td><code id="getJob_+3A_check.id">check.id</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Check the job id?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Job">Job</a></code>].
</p>

<hr>
<h2 id='getJobIds'>Get ids of jobs in registry.</h2><span id='topic+getJobIds'></span>

<h3>Description</h3>

<p>Get ids of jobs in registry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobIds(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobIds_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>].
</p>

<hr>
<h2 id='getJobInfo'>Get computational information of jobs.</h2><span id='topic+getJobInfo'></span>

<h3>Description</h3>

<p>Returns time stamps (submitted, started, done, error),
time running, approximate memory usage (in Mb),
error messages (shortened, see <code><a href="#topic+showLog">showLog</a></code> for detailed error messages),
time in queue, hostname of the host the job was executed,
assigned batch ID, the R PID and the seed of the job.
</p>
<p>To estimate memory usage the sum of the last column of <code><a href="base.html#topic+gc">gc</a></code> is used.
</p>
<p>Column &ldquo;time.running&rdquo; displays the time until either the job was done, or an error occured;
it will by <code>NA</code> in case of time outs or hard R crashes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobInfo(
  reg,
  ids,
  pars = FALSE,
  prefix.pars = FALSE,
  select,
  unit = "seconds"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobInfo_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJobInfo_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="getJobInfo_+3A_pars">pars</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Include job parameters in the output?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="getJobInfo_+3A_prefix.pars">prefix.pars</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should a prefix be added to job parameter names (column names) to avoid name clashes?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="getJobInfo_+3A_select">select</code></td>
<td>
<p>[<code>character</code>]<br />
Select only a subset of columns.
Usually this is not required and you can subset yourself,
but in some rare cases it may be advantageous to not query all information.
Note that the column &ldquo;id&rdquo; (job id) is always selected.
If not provided, all columns are queried and returned.</p>
</td></tr>
<tr><td><code id="getJobInfo_+3A_unit">unit</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Unit to convert execution and queing times to.
Possible values: &ldquo;seconds&rdquo;, &ldquo;minutes&rdquo;, &ldquo;hours&rdquo;,
&ldquo;days&rdquo; and &ldquo;weeks&rdquo;.
Default is &ldquo;seconds&rdquo;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>data.frame</code>].
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='getJobLocation'>Get the physical location of job files on the hard disk.</h2><span id='topic+getJobLocation'></span>

<h3>Description</h3>

<p>Get the physical location of job files on the hard disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobLocation(reg, ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobLocation_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJobLocation_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>] Vector of directories.
</p>

<hr>
<h2 id='getJobNr'>Get number of jobs in registry.</h2><span id='topic+getJobNr'></span>

<h3>Description</h3>

<p>Get number of jobs in registry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobNr(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobNr_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer(1)</code>].
</p>

<hr>
<h2 id='getJobParamDf'>Retrieve Job Parameters.</h2><span id='topic+getJobParamDf'></span>

<h3>Description</h3>

<p>Returns parameters for all jobs as the rows of a data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobParamDf(reg, ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobParamDf_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJobParamDf_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>data.frame</code>]. Rows are named with job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see batchExpandGrid
</code></pre>

<hr>
<h2 id='getJobResources'>Function to get the resources that were submitted for some jobs.</h2><span id='topic+getJobResources'></span>

<h3>Description</h3>

<p>Throws an error if call it for unsubmitted jobs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobResources(reg, ids, as.list = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobResources_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJobResources_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all submitted jobs.</p>
</td></tr>
<tr><td><code id="getJobResources_+3A_as.list">as.list</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
If <code>FALSE</code> a data.frame will be returned.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>list</code> | <code>data.frame</code>]. List (or data.frame) of resource lists as passed to <code><a href="#topic+submitJobs">submitJobs</a></code>.
</p>

<hr>
<h2 id='getJobs'>Get jobs from registry by id.</h2><span id='topic+getJobs'></span>

<h3>Description</h3>

<p>Get jobs from registry by id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getJobs(reg, ids, check.ids = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="getJobs_+3A_check.ids">check.ids</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Check the job ids?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[list of <code><a href="#topic+Job">Job</a></code>].
</p>

<hr>
<h2 id='getLogFiles'>Get log file paths for jobs.</h2><span id='topic+getLogFiles'></span>

<h3>Description</h3>

<p>Get log file paths for jobs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLogFiles(reg, ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getLogFiles_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="getLogFiles_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>]. Vector of file paths to log files.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='getResources'>Function to get job resources in job function.</h2><span id='topic+getResources'></span>

<h3>Description</h3>

<p>Return the list passed to <code><a href="#topic+submitJobs">submitJobs</a></code>, e.g.
nodes, walltime, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getResources()
</code></pre>


<h3>Details</h3>

<p>Can only be called in job function during job execution on slave.
</p>


<h3>Value</h3>

<p>[<code>list</code>].
</p>

<hr>
<h2 id='getSSHWorkersInfo'>Print and return R installation and other information for SSH workers.</h2><span id='topic+getSSHWorkersInfo'></span>

<h3>Description</h3>

<p>Workers are queried in parallel via <code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>.
</p>
<p>The function will display a warning if the first lib path on the worker
is not writable as this indicates potential problems in the configuration
and <code><a href="#topic+installPackagesOnSSHWorkers">installPackagesOnSSHWorkers</a></code> will not work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSSHWorkersInfo(nodenames)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSSHWorkersInfo_+3A_nodenames">nodenames</code></td>
<td>
<p>[<code>character</code>]<br />
Nodenames of workers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>list</code>]. Displayed information as a list named by nodenames.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>
</p>

<hr>
<h2 id='grepLogs'>Grep log files for a pattern.</h2><span id='topic+grepLogs'></span>

<h3>Description</h3>

<p>Searches for occurence of <code>pattern</code> in log files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grepLogs(
  reg,
  ids,
  pattern = "warn",
  ignore.case = TRUE,
  verbose = FALSE,
  range = 2L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grepLogs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="grepLogs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs to grep.
Default is all terminated jobs (done + errors).</p>
</td></tr>
<tr><td><code id="grepLogs_+3A_pattern">pattern</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Pattern to search for. See <code><a href="base.html#topic+grep">grep</a></code>.
Default is <code>"warn"</code>.</p>
</td></tr>
<tr><td><code id="grepLogs_+3A_ignore.case">ignore.case</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Ignore case. See <code><a href="base.html#topic+grep">grep</a></code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="grepLogs_+3A_verbose">verbose</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Print matches.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="grepLogs_+3A_range">range</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
If <code>verbose</code> is set to <code>TRUE</code>, print <code>range</code>
leading and trailing lines for contextual information about the warning.
Default is <code>2</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Ids of jobs where pattern was found in the log file.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='installPackagesOnSSHWorkers'>Install packages on SSH workers.</h2><span id='topic+installPackagesOnSSHWorkers'></span>

<h3>Description</h3>

<p>Installation is done via <code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>
and <code><a href="utils.html#topic+install.packages">install.packages</a></code>.
</p>
<p>Note that as usual the function tries to install
the packages into the first path of <code>.libPaths()</code>
of each each worker.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>installPackagesOnSSHWorkers(
  nodenames,
  pkgs,
  repos = getOption("repos"),
  consecutive = TRUE,
  show.output = consecutive,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_nodenames">nodenames</code></td>
<td>
<p>[<code>character</code>]<br />
Nodenames of workers.</p>
</td></tr>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_pkgs">pkgs</code></td>
<td>
<p>[<code>character</code>]<br />
See <code><a href="utils.html#topic+install.packages">install.packages</a></code>.</p>
</td></tr>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_repos">repos</code></td>
<td>
<p>[<code>character</code>]<br />
See <code><a href="utils.html#topic+install.packages">install.packages</a></code>.
If the user must be queried this is of course done on the master.</p>
</td></tr>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_consecutive">consecutive</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
See <code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_show.output">show.output</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
See <code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>.
Default is <code>consecutive</code>.</p>
</td></tr>
<tr><td><code id="installPackagesOnSSHWorkers_+3A_...">...</code></td>
<td>
<p>[any]<br />
Passed to <code><a href="utils.html#topic+install.packages">install.packages</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+callFunctionOnSSHWorkers">callFunctionOnSSHWorkers</a></code>
</p>

<hr>
<h2 id='killJobs'>Kill some jobs on the batch system.</h2><span id='topic+killJobs'></span>

<h3>Description</h3>

<p>Kill jobs which have already been submitted to the batch system.
If a job is killed its internal state is reset as if it had not been submitted at all.
</p>
<p>The function informs if
(a) the job you want to kill has not been submitted,
(b) the job has already terminated,
(c) for some reason no batch job id is available.
In all 3 cases above, nothing is changed for the state of this job and no call
to the internal kill cluster function is generated.
</p>
<p>In case of an error when killing, the function tries - after a short sleep - to kill the remaining
batch jobs again. If this fails again for some jobs, the function gives up. Only jobs that could be
killed are reset in the DB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>killJobs(reg, ids, progressbar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="killJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="killJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs to kill.
Default is none.</p>
</td></tr>
<tr><td><code id="killJobs_+3A_progressbar">progressbar</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Set to <code>FALSE</code> to disable the progress bar.
To disable all progress bars, see <code><a href="BBmisc.html#topic+makeProgressBar">makeProgressBar</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Ids of killed jobs.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) Sys.sleep(x)
batchMap(reg, f, 1:10 + 5)
submitJobs(reg)
waitForJobs(reg)

# kill all jobs currently _running_
killJobs(reg, findRunning(reg))
# kill all jobs queued or running
killJobs(reg, findNotTerminated(reg))

## End(Not run)
</code></pre>

<hr>
<h2 id='loadConfig'>Load a specific configuration file.</h2><span id='topic+loadConfig'></span>

<h3>Description</h3>

<p>Load a specific configuration file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadConfig(conffile = ".BatchJobs.R")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadConfig_+3A_conffile">conffile</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Location of the configuration file to load.
Default is &ldquo;.BatchJobs.conf&rdquo; in the current working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns a list of configuration settings.
</p>


<h3>See Also</h3>

<p>Other conf: 
<code><a href="#topic+configuration">configuration</a></code>,
<code><a href="#topic+getConfig">getConfig</a>()</code>,
<code><a href="#topic+setConfig">setConfig</a>()</code>
</p>

<hr>
<h2 id='loadExports'>Load exported R data objects.</h2><span id='topic+loadExports'></span>

<h3>Description</h3>

<p>Loads exported <code>RData</code> object files in the &ldquo;exports&rdquo; subdirectory of your <code>file.dir</code>
and assigns the objects to the global environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadExports(reg, what = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadExports_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="loadExports_+3A_what">what</code></td>
<td>
<p>[<code>character</code>]<br />
Names of objects to load. Defaults to all objects exported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character</code>]. Invisibly returns a character vector of loaded objects.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='loadRegistry'>Load a previously saved registry.</h2><span id='topic+loadRegistry'></span>

<h3>Description</h3>

<p>Loads a previously created registry from the file system.
The <code>file.dir</code> is automatically updated upon load if <code>adjust.paths</code> is set to
<code>TRUE</code>, so be careful if you use the registry on multiple machines simultaneously,
e.g. via sshfs or a samba share.
</p>
<p>There is a heuristic included which tries to detect if the location of the registry
has changed and returns a read-only registry if necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadRegistry(file.dir, work.dir, adjust.paths = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadRegistry_+3A_file.dir">file.dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Location of the file.dir to load the registry from.</p>
</td></tr>
<tr><td><code id="loadRegistry_+3A_work.dir">work.dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Location of the work. Unchanged if missing.</p>
</td></tr>
<tr><td><code id="loadRegistry_+3A_adjust.paths">adjust.paths</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
If set to <code>FALSE</code> (default), the paths for the <code>file.dir</code> and <code>work.dir</code>
will not be updated. Set to  <code>TRUE</code> if you moved the directoy to another system
<em>after</em> all computations finished.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>].
</p>

<hr>
<h2 id='loadResult'>Loads a specific result file.</h2><span id='topic+loadResult'></span>

<h3>Description</h3>

<p>Loads a specific result file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadResult(
  reg,
  id,
  part = NA_character_,
  missing.ok = FALSE,
  impute.val = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadResult_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="loadResult_+3A_id">id</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Id of job.</p>
</td></tr>
<tr><td><code id="loadResult_+3A_part">part</code></td>
<td>
<p>[<code>character</code>]
Only useful for multiple result files, then defines which result file part(s) should be loaded.
<code>NA</code> means all parts are loaded, which is the default.</p>
</td></tr>
<tr><td><code id="loadResult_+3A_missing.ok">missing.ok</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
If <code>FALSE</code> an error is thrown if no result file is found.
Otherwise <code>NULL</code> is returned.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="loadResult_+3A_impute.val">impute.val</code></td>
<td>
<p>[any]<br />
The value to return when no result is available.
Defaults to <code>NULL</code> (the previous behavior)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[any]. Result of job.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+reduceResults">reduceResults</a></code>
</p>

<hr>
<h2 id='loadResults'>Loads result files for id vector.</h2><span id='topic+loadResults'></span>

<h3>Description</h3>

<p>Loads result files for id vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadResults(
  reg,
  ids,
  part = NA_character_,
  simplify = FALSE,
  use.names = "ids",
  missing.ok = FALSE,
  impute.val = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadResults_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all done jobs.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_part">part</code></td>
<td>
<p>[<code>character</code>]
Only useful for multiple result files, then defines which result file part(s) should be loaded.
<code>NA</code> means all parts are loaded, which is the default.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_simplify">simplify</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should the result be simplified to a vector, matrix or higher dimensional array if possible?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_use.names">use.names</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Name the results with job ids (&ldquo;ids&rdquo;), stored job names (&ldquo;names&rdquo;)
or return a unnamed result (&ldquo;none&rdquo;).
Default is <code>ids</code>.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_missing.ok">missing.ok</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
If <code>FALSE</code> an error is thrown if the results are not found.
Otherwise missing results are imputed to <code>NULL</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="loadResults_+3A_impute.val">impute.val</code></td>
<td>
<p>[any]<br />
The value to return when no result is available.
Defaults to <code>NULL</code> (the previous behavior)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>list</code>]. Results of jobs as list, possibly named by ids.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+reduceResults">reduceResults</a></code>
</p>

<hr>
<h2 id='makeClusterFunctions'>Create a ClusterFuntions object.</h2><span id='topic+makeClusterFunctions'></span><span id='topic+ClusterFunctions'></span>

<h3>Description</h3>

<p>Use this funtion when you implement a backend for a batch system.
You must define the functions specified in the arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctions(
  name,
  submitJob,
  killJob,
  listJobs,
  getArrayEnvirName,
  class = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctions_+3A_name">name</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Name of cluster functions.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_submitjob">submitJob</code></td>
<td>
<p>[<code>function(conf, reg, job.name, rscript, log.file, job.dir, resources, ...)</code>]<br />
Function to submit a new job.
Must return a <code><a href="#topic+SubmitJobResult">SubmitJobResult</a></code> object.<br />
The arguments are:<br />
conf [<code>environment</code>]: The user configuration.<br />
reg [<code><a href="#topic+Registry">Registry</a></code>]: The registry.<br />
job.name [<code>character(1)</code>]: Name of job, used if the job is displayed on the batch system. This is just for display and not an id!<br />
rscript [<code>character(1)</code>]: File path to R script that is used to execute the job.<br />
log.file [<code>character(1)</code>]: File path where log file (.Rout) has to be placed.<br />
job.dir [<code>character(1)</code>]: Directory where all files relating to this job are placed.<br />
resources [<code>list</code>]: Freely definable list of required resources for this job, e.g. walltime or memory.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_killjob">killJob</code></td>
<td>
<p>[<code>function(conf, reg, batch.job.id)</code>]<br />
Function to kill a job on the batch system.
Make sure that you definately kill the job!
Return value is currently ignored.<br />
The arguments are:<br />
conf [<code>environment</code>]: The user configuration.<br />
reg [<code><a href="#topic+Registry">Registry</a></code>]: The registry.<br />
batch.job.id [<code>character(1)</code>]: Batch job id, as produced by <code>submitJob</code>.<br />
Set <code>killJob</code> to <code>NULL</code> if killing jobs cannot be supported.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_listjobs">listJobs</code></td>
<td>
<p>[<code>function(conf, reg)</code>]<br />
List all jobs on the batch system for the current user / registry.
This includes queued, running, held, idle, etc. jobs.
Must return an integer vector of batch job ids, same format as they are produced by <code>submitJob</code>.
It does not matter if you return a few job ids too many (e.g. all for the current user instead
of all for the current registry), but you have to include all relevant ones.
The arguments are:<br />
conf [<code>environment</code>]: The user configuration.<br />
reg [<code><a href="#topic+Registry">Registry</a></code>]: The registry.<br />
Set <code>listJobs</code> to <code>NULL</code> if listing jobs cannot be supported.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_getarrayenvirname">getArrayEnvirName</code></td>
<td>
<p>[<code>function()</code>]<br />
Returns the name of the environment variable specifying the array ID.
Should return <code>NA</code> if not supported.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_class">class</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Optional class name for cluster functions object.
Useful to provide a nice print method
which might show additional information about the workers.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctions_+3A_...">...</code></td>
<td>
<p>[<code>any</code>]<br />
Currently ignored.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsInteractive'>Create cluster functions for sequential execution in same session.</h2><span id='topic+makeClusterFunctionsInteractive'></span>

<h3>Description</h3>

<p>All jobs executed under these cluster functions are executed
sequentially, in the same interactive R process that you currently are.
That is, <code>submitJob</code> does not return until the
job has finished. The main use of this <code>ClusterFunctions</code>
implementation is to test and debug programs on a local computer.
</p>
<p>Listing jobs returns an empty vector (as no jobs can be running when you call this)
and <code>killJob</code> returns at once (for the same reason).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsInteractive(write.logs = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsInteractive_+3A_write.logs">write.logs</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Sink the output to log files. Turning logging off can increase the speed of
calculations but makes it next to impossible to debug.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsLocal'>Create cluster functions for sequential execution on local host.</h2><span id='topic+makeClusterFunctionsLocal'></span>

<h3>Description</h3>

<p>All jobs executed under these cluster functions are executed
sequentially, but in an independent, new R session.
That is, <code>submitJob</code> does not return until the
job has finished. The main use of this <code>ClusterFunctions</code>
implementation is to test and debug programs on a local computer.
</p>
<p>Listing jobs returns an empty vector (as no jobs can be running when you call this)
and <code>killJob</code> returns at once (for the same reason).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsLocal()
</code></pre>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsLSF'>Create cluster functions for LSF systems.</h2><span id='topic+makeClusterFunctionsLSF'></span>

<h3>Description</h3>

<p>Job files are created based on the brew template
<code>template.file</code>. This file is processed with brew and then
submitted to the queue using the <code>bsub</code> command. Jobs are
killed using the <code>bkill</code> command and the list of running jobs
is retrieved using <code>bjobs -u $USER -w</code>. The user must have the
appropriate privileges to submit, delete and list jobs on the
cluster (this is usually the case).
</p>
<p>The template file can access all arguments passed to the
<code>submitJob</code> function, see here <code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>.
It is the template file's job to choose a queue for the job
and handle the desired resource allocations.
Examples can be found on
<a href="https://github.com/tudo-r/BatchJobs/tree/master/examples/cfLSF">https://github.com/tudo-r/BatchJobs/tree/master/examples/cfLSF</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsLSF(
  template.file,
  list.jobs.cmd = c("bjobs", "-u $USER", "-w")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsLSF_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to a brew template file that is used for the PBS job file.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsLSF_+3A_list.jobs.cmd">list.jobs.cmd</code></td>
<td>
<p>[<code>character</code>]<br />
Change default system command / options to list jobs.
The first entry is the command, the following the options.
See <code><a href="BBmisc.html#topic+system3">system3</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsMulticore'>Use multiple cores on local Linux machine to spawn parallel jobs.</h2><span id='topic+makeClusterFunctionsMulticore'></span>

<h3>Description</h3>

<p>Jobs are spawned by starting multiple R sessions on the commandline
(similar like on true batch systems).
Packages <code>parallel</code> or <code>multicore</code> are not used in any way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsMulticore(
  ncpus = max(getOption("mc.cores", parallel::detectCores()) - 1L, 1L),
  max.jobs,
  max.load,
  nice,
  r.options = c("--no-save", "--no-restore", "--no-init-file", "--no-site-file"),
  script
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_ncpus">ncpus</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Number of VPUs of worker.
Default is to use all cores but one, where total number of cores
&quot;available&quot; is given by option <code><a href="base.html#topic+options">mc.cores</a></code>
and if that is not set it is inferred by
<code><a href="parallel.html#topic+detectCores">detectCores</a></code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_max.jobs">max.jobs</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Maximal number of jobs that can run concurrently for the current registry.
Default is <code>ncpus</code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_max.load">max.load</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Load average (of the last 5 min) at which the worker is considered occupied,
so that no job can be submitted.
Default is inferred by <code><a href="parallel.html#topic+detectCores">detectCores</a></code>, cf. argument <code>ncpus</code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_nice">nice</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Process priority to run R with set via nice. Integers between -20 and 19 are allowed.
If missing, processes are not nice'd and the system default applies (usually 0).</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_r.options">r.options</code></td>
<td>
<p>[<code>character</code>]
Options for R and Rscript, one option per element of the vector,
a la &ldquo;&ndash;vanilla&rdquo;.
Default is <code>c("--no-save", "--no-restore", "--no-init-file", "--no-site-file")</code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsMulticore_+3A_script">script</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to helper bash script which interacts with the worker.
You really should not have to touch this, as this would imply that we have screwed up and
published an incompatible version for your system.
This option is only provided as a last resort for very experienced hackers.
Note that the path has to be absolute.
This is what is done in the package:
<a href="https://github.com/tudo-r/BatchJobs/blob/master/inst/bin/linux-helper">https://github.com/tudo-r/BatchJobs/blob/master/inst/bin/linux-helper</a>
Default means to take it from package directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsOpenLava'>Create cluster functions for OpenLava systems.</h2><span id='topic+makeClusterFunctionsOpenLava'></span>

<h3>Description</h3>

<p>Job files are created based on the brew template
<code>template.file</code>. This file is processed with brew and then
submitted to the queue using the <code>bsub</code> command. Jobs are
killed using the <code>bkill</code> command and the list of running jobs
is retrieved using <code>bjobs -u $USER -w</code>. The user must have the
appropriate privileges to submit, delete and list jobs on the
cluster (this is usually the case).
</p>
<p>The template file can access all arguments passed to the
<code>submitJob</code> function, see here <code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>.
It is the template file's job to choose a queue for the job
and handle the desired resource allocations.
Examples can be found on
<a href="https://github.com/tudo-r/BatchJobs/tree/master/examples/cfOpenLava">https://github.com/tudo-r/BatchJobs/tree/master/examples/cfOpenLava</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsOpenLava(
  template.file,
  list.jobs.cmd = c("bjobs", "-u $USER", "-w")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsOpenLava_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to a brew template file that is used for the PBS job file.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsOpenLava_+3A_list.jobs.cmd">list.jobs.cmd</code></td>
<td>
<p>[<code>character</code>]<br />
Change default system command / options to list jobs.
The first entry is the command, the following the options.
See <code><a href="BBmisc.html#topic+system3">system3</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsSGE'>Create cluster functions for Sun Grid Engine systems.</h2><span id='topic+makeClusterFunctionsSGE'></span>

<h3>Description</h3>

<p>Job files are created based on the brew template
<code>template.file</code>. This file is processed with brew and then
submitted to the queue using the <code>qsub</code> command. Jobs are
killed using the <code>qdel</code> command and the list of running jobs
is retrieved using <code>qselect</code>. The user must have the
appropriate privileges to submit, delete and list jobs on the
cluster (this is usually the case).
</p>
<p>The template file can access all arguments passed to the
<code>submitJob</code> function, see here <code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>.
It is the template file's job to choose a queue for the job
and handle the desired resource allocations.
Examples can be found on
<a href="https://github.com/tudo-r/BatchJobs/tree/master/examples/cfSGE">https://github.com/tudo-r/BatchJobs/tree/master/examples/cfSGE</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsSGE(template.file, list.jobs.cmd = c("qstat", "-u $USER"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsSGE_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to a brew template file that is used for the PBS job file.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsSGE_+3A_list.jobs.cmd">list.jobs.cmd</code></td>
<td>
<p>[<code>character</code>]<br />
Change default system command / options to list jobs.
The first entry is the command, the following the options.
See <code><a href="BBmisc.html#topic+system3">system3</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsSLURM'>Create cluster functions for SLURM-based systems.</h2><span id='topic+makeClusterFunctionsSLURM'></span>

<h3>Description</h3>

<p>Job files are created based on the brew template
<code>template.file</code>. This file is processed with brew and then
submitted to the queue using the <code>sbatch</code> command. Jobs are
killed using the <code>scancel</code> command and the list of running jobs
is retrieved using <code>squeue</code>. The user must have the
appropriate privileges to submit, delete and list jobs on the
cluster (this is usually the case).
</p>
<p>The template file can access all arguments passed to the
<code>submitJob</code> function, see here <code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>.
It is the template file's job to choose a queue for the job
and handle the desired resource allocations.
Examples can be found on
<a href="https://github.com/tudo-r/BatchJobs/tree/master/examples/cfSLURM">https://github.com/tudo-r/BatchJobs/tree/master/examples/cfSLURM</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsSLURM(
  template.file,
  list.jobs.cmd = c("squeue", "-h", "-o %i", "-u $USER")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsSLURM_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to a brew template file that is used for the PBS job file.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsSLURM_+3A_list.jobs.cmd">list.jobs.cmd</code></td>
<td>
<p>[<code>character</code>]<br />
Change default system command / options to list jobs.
The first entry is the command, the following the options.
See <code><a href="BBmisc.html#topic+system3">system3</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeClusterFunctionsSSH'>Create an SSH cluster to execute jobs.</h2><span id='topic+makeClusterFunctionsSSH'></span>

<h3>Description</h3>

<p>Worker nodes must share the same file system and be accessible by ssh
without manually entering passwords (e.g. by ssh-agent or passwordless pubkey).
Note that you can also use this function to parallelize on multiple cores on your local machine.
But you still have to run an ssh server and provide passwordless access to
localhost.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsSSH(..., workers)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsSSH_+3A_...">...</code></td>
<td>
<p>[<code><a href="#topic+SSHWorker">SSHWorker</a></code>]<br />
Worker objects, all created with <code><a href="#topic+makeSSHWorker">makeSSHWorker</a></code>.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsSSH_+3A_workers">workers</code></td>
<td>
<p>[list of <code><a href="#topic+SSHWorker">SSHWorker</a></code>]<br />
Alternative way to pass workers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>ClusterFunctions</code>].
</p>


<h3>See Also</h3>

<p><code><a href="#topic+makeSSHWorker">makeSSHWorker</a></code>
</p>
<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsTorque">makeClusterFunctionsTorque</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Assume you have three nodes larry, curley and moe. All have 6
# cpu cores. On curley and moe R is installed under
# "/opt/R/R-current" and on larry R is installed under
# "/usr/local/R/". larry should not be used extensively because
# somebody else wants to compute there as well.
# Then a call to 'makeClusterFunctionsSSH'
# might look like this:

cluster.functions = makeClusterFunctionsSSH(
  makeSSHWorker(nodename = "larry", rhome = "/usr/local/R", max.jobs = 2),
  makeSSHWorker(nodename = "curley", rhome = "/opt/R/R-current"),
  makeSSHWorker(nodename = "moe", rhome = "/opt/R/R-current"))

## End(Not run)
</code></pre>

<hr>
<h2 id='makeClusterFunctionsTorque'>Create cluster functions for torque-based systems.</h2><span id='topic+makeClusterFunctionsTorque'></span>

<h3>Description</h3>

<p>Job files are created based on the brew template
<code>template.file</code>. This file is processed with brew and then
submitted to the queue using the <code>qsub</code> command. Jobs are
killed using the <code>qdel</code> command and the list of running jobs
is retrieved using <code>qselect</code>. The user must have the
appropriate privileges to submit, delete and list jobs on the
cluster (this is usually the case).
</p>
<p>The template file can access all arguments passed to the
<code>submitJob</code> function, see here <code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>.
It is the template file's job to choose a queue for the job
and handle the desired resource allocations.
Examples can be found on
<a href="https://github.com/tudo-r/BatchJobs/tree/master/examples/cfTorque">https://github.com/tudo-r/BatchJobs/tree/master/examples/cfTorque</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeClusterFunctionsTorque(
  template.file,
  list.jobs.cmd = c("qselect", "-u $USER", "-s EHQRTW")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeClusterFunctionsTorque_+3A_template.file">template.file</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to a brew template file that is used for the PBS job file.</p>
</td></tr>
<tr><td><code id="makeClusterFunctionsTorque_+3A_list.jobs.cmd">list.jobs.cmd</code></td>
<td>
<p>[<code>character</code>]<br />
Change default system command / options to list jobs.
The first entry is the command, the following the options.
See <code><a href="BBmisc.html#topic+system3">system3</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+ClusterFunctions">ClusterFunctions</a></code>].
</p>


<h3>See Also</h3>

<p>Other clusterFunctions: 
<code><a href="#topic+makeClusterFunctionsInteractive">makeClusterFunctionsInteractive</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLSF">makeClusterFunctionsLSF</a>()</code>,
<code><a href="#topic+makeClusterFunctionsLocal">makeClusterFunctionsLocal</a>()</code>,
<code><a href="#topic+makeClusterFunctionsMulticore">makeClusterFunctionsMulticore</a>()</code>,
<code><a href="#topic+makeClusterFunctionsOpenLava">makeClusterFunctionsOpenLava</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSGE">makeClusterFunctionsSGE</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSLURM">makeClusterFunctionsSLURM</a>()</code>,
<code><a href="#topic+makeClusterFunctionsSSH">makeClusterFunctionsSSH</a>()</code>,
<code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a>()</code>
</p>

<hr>
<h2 id='makeJob'>Creates a job description.</h2><span id='topic+makeJob'></span><span id='topic+Job'></span>

<h3>Description</h3>

<p>Usually you will not do this manually.
Every object is a list that contains the passed arguments of the constructor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeJob(id = NA_integer_, fun, fun.id = digest(fun), pars, name, seed)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeJob_+3A_id">id</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Job id, determined by DB autoincrement.
Default is <code>NA</code>.</p>
</td></tr>
<tr><td><code id="makeJob_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Job function to apply on parameters.</p>
</td></tr>
<tr><td><code id="makeJob_+3A_fun.id">fun.id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Id used to store function on disk.
Default is <code>digest(fun)</code>.</p>
</td></tr>
<tr><td><code id="makeJob_+3A_pars">pars</code></td>
<td>
<p>[<code>list</code>]<br />
Parameter list for job function.</p>
</td></tr>
<tr><td><code id="makeJob_+3A_name">name</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Alias name for this job.</p>
</td></tr>
<tr><td><code id="makeJob_+3A_seed">seed</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Random seed for job.</p>
</td></tr>
</table>

<hr>
<h2 id='makeRegistry'>Construct a registry object.</h2><span id='topic+makeRegistry'></span><span id='topic+Registry'></span>

<h3>Description</h3>

<p>Note that if you don't want links in your paths (<code>file.dir</code>, <code>work.dir</code>) to get resolved and have
complete control over the way the path is used internally, pass an absolute path which begins with &ldquo;/&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeRegistry(
  id,
  file.dir,
  sharding = TRUE,
  work.dir,
  multiple.result.files = FALSE,
  seed,
  packages = character(0L),
  src.dirs = character(0L),
  src.files = character(0L),
  skip = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeRegistry_+3A_id">id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Name of registry. Displayed e.g. in mails or in cluster queue.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_file.dir">file.dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path where files regarding the registry / jobs should be saved.
Default is &ldquo;&lt;id&gt;-files&rdquo; in current working directory if <code>id</code> is set.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_sharding">sharding</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Enable sharding to distribute result files into different subdirectories?
Important if you have many experiments.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_work.dir">work.dir</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Working directory for R process when experiment is executed.
Default is the current working directory when registry is created.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_multiple.result.files">multiple.result.files</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should a result file be generated for every list element of the
returned list of the job function?
Note that the function provided to <code><a href="#topic+batchMap">batchMap</a></code> or
<code><a href="#topic+batchReduce">batchReduce</a></code> must return a named list if this is set to <code>TRUE</code>.
The result file will be named &ldquo;&lt;id&gt;-result-&lt;element name&gt;.RData&rdquo;
instead of &ldquo;&lt;id&gt;-result.RData&rdquo;.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_seed">seed</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Start seed for experiments. The first experiment in the registry will use this
seed, for the subsequent ones the seed is incremented by 1.
Default is a random number from 1 to <code>.Machine$integer.max/2</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_packages">packages</code></td>
<td>
<p>[<code>character</code>]<br />
Packages that will always be loaded on each node.
Default is <code>character(0)</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_src.dirs">src.dirs</code></td>
<td>
<p>[<code>character</code>]<br />
Directories containing R scripts
to be sourced on registry load (both on slave and master).
Files not matching the pattern &ldquo;\.[Rr]$&rdquo; are ignored.
Useful if you have many helper functions that are needed during the execution of your jobs.
These files should only contain function definitions and no executable code.
Default is <code>character(0)</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_src.files">src.files</code></td>
<td>
<p>[<code>character</code>]<br />
R scripts files
to be sourced on registry load (both on slave and master).
Useful if you have many helper functions that are needed during the execution of your jobs.
These files should only contain function and constant definitions and no long running, executable code.
These paths are considered to be relative to your <code>work.dir</code>.
As a last remedy in problematic cases you can use absolute paths, by passing paths that
start with &ldquo;/&rdquo;, see the comment about <code>file.dir</code> and <code>work.dir</code> above,
where we allow the same thing.
Note that this is a less portable approach and therefore usually a less good idea.
Default is <code>character(0)</code>.</p>
</td></tr>
<tr><td><code id="makeRegistry_+3A_skip">skip</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Skip creation of a new registry if a registry is found in <code>file.dir</code>.
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Every object is a list that contains the passed arguments of the constructor.
</p>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
print(reg)
</code></pre>

<hr>
<h2 id='makeSSHWorker'>Create SSH worker for SSH cluster functions.</h2><span id='topic+makeSSHWorker'></span><span id='topic+SSHWorker'></span>

<h3>Description</h3>

<p>Create SSH worker for SSH cluster functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeSSHWorker(
  nodename,
  ssh.cmd = "ssh",
  ssh.args = character(0L),
  rhome = "",
  ncpus,
  max.jobs,
  max.load,
  nice,
  r.options = c("--no-save", "--no-restore", "--no-init-file", "--no-site-file"),
  script
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeSSHWorker_+3A_nodename">nodename</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Host name of node.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_ssh.cmd">ssh.cmd</code></td>
<td>
<p>[<code>character(1)</code>)]<br />
CLI command to ssh into remote node.
Default is &ldquo;ssh&rdquo;.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_ssh.args">ssh.args</code></td>
<td>
<p>[<code>character</code>]<br />
CLI args for <code>ssh.cmd</code>.
Default is none.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_rhome">rhome</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to R installation on worker.
&ldquo;&rdquo; means R installation on the PATH is used,
of course this implies that it must be on the PATH
(also for non-interactive shells)!
Default is &ldquo;&rdquo;.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_ncpus">ncpus</code></td>
<td>
<p>[<code>integers(1)</code>]<br />
Number of VPUs of worker.
Default means to query the worker via &ldquo;/proc/cpuinfo&rdquo;.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_max.jobs">max.jobs</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Maximal number of jobs that can run concurrently for the current registry.
Default is <code>ncpus</code>.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_max.load">max.load</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Load average (of the last 5 min) at which the worker is considered occupied,
so that no job can be submitted.
Default is <code>ncpus-1</code>.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_nice">nice</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Process priority to run R with set via nice. Integers between -20 and 19 are allowed.
If missing, processes are not nice'd and the system default applies (usually 0).
Default is no niceing.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_r.options">r.options</code></td>
<td>
<p>[<code>character</code>]<br />
Options for R and Rscript, one option per element of the vector,
a la &ldquo;&ndash;vanilla&rdquo;.
Default is <code>c("--no-save", "--no-restore", "--no-init-file", "--no-site-file")</code>.</p>
</td></tr>
<tr><td><code id="makeSSHWorker_+3A_script">script</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Path to helper bash script which interacts with the worker.
You really should not have to touch this, as this would imply that we have screwed up and
published an incompatible version for your system.
This option is only provided as a last resort for very experienced hackers.
Note that the path has to be absolute.
This is what is done in the package:
<a href="https://github.com/tudo-r/BatchJobs/blob/master/inst/bin/linux-helper">https://github.com/tudo-r/BatchJobs/blob/master/inst/bin/linux-helper</a>
Default means to take it from package directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+SSHWorker">SSHWorker</a></code>].
</p>

<hr>
<h2 id='makeSubmitJobResult'>Create a SubmitJobResult object.</h2><span id='topic+makeSubmitJobResult'></span><span id='topic+SubmitJobResult'></span>

<h3>Description</h3>

<p>Use this function in your implementation of <code><a href="#topic+makeClusterFunctions">makeClusterFunctions</a></code>
to create a return value for the <code>submitJob</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeSubmitJobResult(status, batch.job.id, msg, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeSubmitJobResult_+3A_status">status</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Launch status of job.
0 means success, codes bewteen 1 and 100 are temporary
errors and any error greater than 100 is a permanent failure.</p>
</td></tr>
<tr><td><code id="makeSubmitJobResult_+3A_batch.job.id">batch.job.id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Unique id of this job on batch system. Note that this is not the usual job id used in BatchJobs!
Must be globally unique so that the job can be terminated
using just this information.</p>
</td></tr>
<tr><td><code id="makeSubmitJobResult_+3A_msg">msg</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Optional error message in case <code>status</code> is not equal to 0.
Default is &ldquo;OK&rdquo;, &ldquo;TEMPERR&rdquo;, &ldquo;ERROR&rdquo;, depending on <code>status</code>.</p>
</td></tr>
<tr><td><code id="makeSubmitJobResult_+3A_...">...</code></td>
<td>
<p>[<code>any</code>]<br />
Currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+SubmitJobResult">SubmitJobResult</a></code>]. A list, containing
<code>status</code>, <code>batch.job.id</code> and <code>msg</code>.
</p>

<hr>
<h2 id='reduceResults'>Reduce results from result directory.</h2><span id='topic+reduceResults'></span><span id='topic+reduceResultsList'></span><span id='topic+reduceResultsVector'></span><span id='topic+reduceResultsMatrix'></span><span id='topic+reduceResultsDataFrame'></span><span id='topic+reduceResultsDataTable'></span>

<h3>Description</h3>

<p>The following functions provide ways to reduce result files into either specific R objects (like
vectors, lists, matrices or data.frames) or to arbitrarily aggregate them, which is a more general
operation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduceResults(
  reg,
  ids,
  part = NA_character_,
  fun,
  init,
  impute.val,
  progressbar = TRUE,
  ...
)

reduceResultsList(
  reg,
  ids,
  part = NA_character_,
  fun,
  ...,
  use.names = "ids",
  impute.val,
  progressbar = TRUE
)

reduceResultsVector(
  reg,
  ids,
  part = NA_character_,
  fun,
  ...,
  use.names = "ids",
  impute.val
)

reduceResultsMatrix(
  reg,
  ids,
  part = NA_character_,
  fun,
  ...,
  rows = TRUE,
  use.names = "ids",
  impute.val
)

reduceResultsDataFrame(
  reg,
  ids,
  part = NA_character_,
  fun,
  ...,
  use.names = "ids",
  impute.val,
  strings.as.factors = FALSE
)

reduceResultsDataTable(
  reg,
  ids,
  part = NA_character_,
  fun,
  ...,
  use.names = "ids",
  impute.val
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduceResults_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of selected jobs.
Default is all jobs for which results are available.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_part">part</code></td>
<td>
<p>[<code>character</code>]
Only useful for multiple result files, then defines which result file part(s) should be loaded.
<code>NA</code> means all parts are loaded, which is the default.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
For <code>reduceResults</code>, a function <code>function(aggr, job, res, ...)</code> to reduce things,
for all others, a function <code>function(job, res, ...)</code> to select stuff.
Here, <code>job</code> is the current job descriptor (see <code><a href="#topic+Job">Job</a></code>), <code>result</code> is the current result object and
<code>aggr</code> are the so far aggregated results. When using <code>reduceResults</code>,
your function should add the stuff you want to have from <code>job</code> and
<code>result</code> to <code>aggr</code> and return that.
When using the other reductions, you should select the stuff you want to have from <code>job</code> and
<code>result</code> and return something that can be coerced to an element of the selected return data structure
(reasonable conversion is tried internally).
Default behavior for this argument is to return <code>res</code>, except for <code>reduceResults</code> where no
default is available.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_init">init</code></td>
<td>
<p>[<code>ANY</code>]<br />
Initial element, as used in <code><a href="base.html#topic+Reduce">Reduce</a></code>.
Default is first result.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_impute.val">impute.val</code></td>
<td>
<p>[any]<br />
For <code>reduceResults</code>: If not missing, the value of <code>impute.val</code> is passed to function <code>fun</code>
as argument <code>res</code> for jobs with missing results.<br />
For the specialized reduction functions <code>reduceResults[Type]</code>: If not missing, <code>impute.val</code> is
used as a replacement for the return value of <code>fun</code> on missing results.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_progressbar">progressbar</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Set to <code>FALSE</code> to disable the progress bar.
To disable all progress bars, see <code><a href="BBmisc.html#topic+makeProgressBar">makeProgressBar</a></code>.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_...">...</code></td>
<td>
<p>[any]<br />
Additional arguments to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_use.names">use.names</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Name the results with job ids (&ldquo;ids&rdquo;), stored job names (&ldquo;names&rdquo;)
or return a unnamed result (&ldquo;none&rdquo;).
Default is <code>ids</code>.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_rows">rows</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should the selected vectors be used as rows (or columns) in the result matrix?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="reduceResults_+3A_strings.as.factors">strings.as.factors</code></td>
<td>
<p>[<code>logical(1)</code>]
Should all character columns in result be converted to factors?
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Aggregated results, return type depends on function. If <code>ids</code> is empty: <code>reduceResults</code>
returns <code>init</code> (if available) or <code>NULL</code>, <code>reduceResultsVector</code> returns <code>c()</code>,
<code>reduceResultsList</code> returns <code>list()</code>, <code>reduceResultsMatrix</code> returns <code>matrix(0,0,0)</code>,
<code>reduceResultsDataFrame</code> returns <code>data.frame()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># generate results:
reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg, f, 1:5)
submitJobs(reg)
waitForJobs(reg)

# reduce results to a vector
reduceResultsVector(reg)
# reduce results to sum
reduceResults(reg, fun = function(aggr, job, res) aggr+res)

reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) list(a = x, b = as.character(2*x), c = x^2)
batchMap(reg, f, 1:5)
submitJobs(reg)
waitForJobs(reg)

# reduce results to a vector
reduceResultsVector(reg, fun = function(job, res) res$a)
reduceResultsVector(reg, fun = function(job, res) res$b)
# reduce results to a list
reduceResultsList(reg)
# reduce results to a matrix
reduceResultsMatrix(reg, fun = function(job, res) res[c(1,3)])
reduceResultsMatrix(reg, fun = function(job, res) c(foo = res$a, bar = res$c), rows = TRUE)
reduceResultsMatrix(reg, fun = function(job, res) c(foo = res$a, bar = res$c), rows = FALSE)
# reduce results to a data.frame
print(str(reduceResultsDataFrame(reg)))
# reduce results to a sum
reduceResults(reg, fun = function(aggr, job, res) aggr+res$a, init = 0)
</code></pre>

<hr>
<h2 id='removeRegistry'>Remove a registry object.</h2><span id='topic+removeRegistry'></span>

<h3>Description</h3>

<p>If there are no live/running jobs, the registry will be closed
and all of its files will be removed from the file system.
If there are live/running jobs, an informative error is generated.
The default is to prompt the user for confirmation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRegistry(reg, ask = c("yes", "no"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRegistry_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="removeRegistry_+3A_ask">ask</code></td>
<td>
<p>[<code>character(1)</code>]<br />
If <code>"yes"</code> the user is prompted to confirm the action.
If trying to prompt the user this way in a non-interactive
session, then an informative error is generated.
If <code>"no"</code>, the registry will be removed without
further confirmation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>logical[1]</code>]
</p>

<hr>
<h2 id='removeRegistryPackages'>Remove packages from registry.</h2><span id='topic+removeRegistryPackages'></span>

<h3>Description</h3>

<p>Mutator function for <code>packages</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRegistryPackages(reg, packages)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRegistryPackages_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="removeRegistryPackages_+3A_packages">packages</code></td>
<td>
<p>[<code>character</code>]<br />
Packages to remove from registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='removeRegistrySourceDirs'>Remove packages from registry.</h2><span id='topic+removeRegistrySourceDirs'></span>

<h3>Description</h3>

<p>Mutator function for <code>src.dirs</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRegistrySourceDirs(reg, src.dirs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRegistrySourceDirs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="removeRegistrySourceDirs_+3A_src.dirs">src.dirs</code></td>
<td>
<p>[<code>character</code>]<br />
Paths to remove from registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='removeRegistrySourceFiles'>Remove source files from registry.</h2><span id='topic+removeRegistrySourceFiles'></span>

<h3>Description</h3>

<p>Mutator function for <code>src.files</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRegistrySourceFiles(reg, src.files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRegistrySourceFiles_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="removeRegistrySourceFiles_+3A_src.files">src.files</code></td>
<td>
<p>[<code>character</code>]<br />
Paths to remove from registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+setRegistryPackages">setRegistryPackages</a>()</code>
</p>

<hr>
<h2 id='resetJobs'>Reset computational state of jobs.</h2><span id='topic+resetJobs'></span>

<h3>Description</h3>

<p>Reset state of jobs in the database. Useful under two circumstances:
Either to re-submit them because of changes in e.g. external
data or to resolve rare issues when jobs are killed in an unfortunate state
and therefore blocking your registry.
</p>
<p>The function internally lists all jobs on the batch system and
if those include some of the jobs you want to reset, it informs you to kill them first by raising
an exception.
If you really know what you are doing, you may set <code>force</code> to <code>TRUE</code> to omit this sanity check.
Note that this is a dangerous operation to perform which may harm
the database integrity. In this case you HAVE to make externally sure that none of the jobs
you want to reset are still running.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resetJobs(reg, ids, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resetJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="resetJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs to kill.
Default is none.</p>
</td></tr>
<tr><td><code id="resetJobs_+3A_force">force</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Reset jobs without checking whether they are currently running.
READ THE DETAILS SECTION!
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of reseted job ids.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='sanitizePath'>Sanitize a path</h2><span id='topic+sanitizePath'></span>

<h3>Description</h3>

<p>Replaces backward slashes with forward slashes and optionally
normalizes the path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sanitizePath(path, make.absolute = TRUE, normalize.absolute = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sanitizePath_+3A_path">path</code></td>
<td>
<p>[<code>character</code>]<br />
Vector of paths to sanitize.</p>
</td></tr>
<tr><td><code id="sanitizePath_+3A_make.absolute">make.absolute</code></td>
<td>
<p>[<code>logical</code>]<br />
If <code>TRUE</code> convert to an absolute path.</p>
</td></tr>
<tr><td><code id="sanitizePath_+3A_normalize.absolute">normalize.absolute</code></td>
<td>
<p>[<code>logical</code>]<br />
Also call <code><a href="base.html#topic+normalizePath">normalizePath</a></code> on absolute paths?
This will immediately resolve symlinks.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> with sanitized paths.
</p>

<hr>
<h2 id='setConfig'>Set and overwrite configuration settings</h2><span id='topic+setConfig'></span>

<h3>Description</h3>

<p>Set and overwrite configuration settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setConfig(conf = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setConfig_+3A_conf">conf</code></td>
<td>
<p>[<code>Config</code> or <code>list</code>]<br />
List of configuration parameters as returned by <code><a href="#topic+loadConfig">loadConfig</a></code> or <code><a href="#topic+getConfig">getConfig</a></code>.</p>
</td></tr>
<tr><td><code id="setConfig_+3A_...">...</code></td>
<td>
<p>[<code>ANY</code>]<br />
Named configuration parameters. Overwrites parameters in <code>conf</code>, if provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns a list of configuration settings.
</p>


<h3>See Also</h3>

<p>Other conf: 
<code><a href="#topic+configuration">configuration</a></code>,
<code><a href="#topic+getConfig">getConfig</a>()</code>,
<code><a href="#topic+loadConfig">loadConfig</a>()</code>
</p>

<hr>
<h2 id='setJobFunction'>Sets the job function for already existing jobs.</h2><span id='topic+setJobFunction'></span>

<h3>Description</h3>

<p>Use this function only as last measure when there is a bug
in a part of your job function and you have already computed a large number
of (unaffected) results. This function allows you to fix the error and to
associate the jobs with the corrected function.
</p>
<p>Note that by default the computational state of the affected jobs is also reset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setJobFunction(reg, ids, fun, more.args = list(), reset = TRUE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setJobFunction_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="setJobFunction_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="setJobFunction_+3A_fun">fun</code></td>
<td>
<p>[<code>function</code>]<br />
Replacement function.</p>
</td></tr>
<tr><td><code id="setJobFunction_+3A_more.args">more.args</code></td>
<td>
<p>[<code>list</code>]<br />
A list of other arguments passed to <code>fun</code>.
Default is empty list.</p>
</td></tr>
<tr><td><code id="setJobFunction_+3A_reset">reset</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Reset job status via <code><a href="#topic+resetJobs">resetJobs</a></code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="setJobFunction_+3A_force">force</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
See <code><a href="#topic+resetJobs">resetJobs</a></code>.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='setJobNames'>Set job names.</h2><span id='topic+setJobNames'></span>

<h3>Description</h3>

<p>Set job names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setJobNames(reg, ids, jobnames)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setJobNames_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="setJobNames_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of jobs.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="setJobNames_+3A_jobnames">jobnames</code></td>
<td>
<p>[<code>character</code>]<br />
Character vector with length equal to <code>length(ids)</code>.
<code>NA</code> removes the names stored in the registry.
A single <code>NA</code> is replicated to match the length of ids provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named vector of job ids.
</p>

<hr>
<h2 id='setRegistryPackages'>Set packages for a registry.</h2><span id='topic+setRegistryPackages'></span>

<h3>Description</h3>

<p>Mutator function for <code>packages</code> in <code><a href="#topic+makeRegistry">makeRegistry</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setRegistryPackages(reg, packages)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setRegistryPackages_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="setRegistryPackages_+3A_packages">packages</code></td>
<td>
<p>[<code>character</code>]<br />
Character vector of package names to load.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code><a href="#topic+Registry">Registry</a></code>]. Changed registry.
</p>


<h3>See Also</h3>

<p>Other exports: 
<code><a href="#topic+addRegistryPackages">addRegistryPackages</a>()</code>,
<code><a href="#topic+addRegistrySourceDirs">addRegistrySourceDirs</a>()</code>,
<code><a href="#topic+addRegistrySourceFiles">addRegistrySourceFiles</a>()</code>,
<code><a href="#topic+batchExport">batchExport</a>()</code>,
<code><a href="#topic+batchUnexport">batchUnexport</a>()</code>,
<code><a href="#topic+loadExports">loadExports</a>()</code>,
<code><a href="#topic+removeRegistryPackages">removeRegistryPackages</a>()</code>,
<code><a href="#topic+removeRegistrySourceDirs">removeRegistrySourceDirs</a>()</code>,
<code><a href="#topic+removeRegistrySourceFiles">removeRegistrySourceFiles</a>()</code>
</p>

<hr>
<h2 id='showClusterStatus'>Show information about available computational resources on cluster.</h2><span id='topic+showClusterStatus'></span>

<h3>Description</h3>

<p>Currently only supported for multicore and SSH mode.
Displays: Name of node, current load, number of running R processes, number of R processes
with more than 50
The latter counts either jobs belonging to <code>reg</code> or all BatchJobs jobs if reg was not passed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showClusterStatus(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showClusterStatus_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.
Must not be passed and this is the default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>data.frame</code>].
</p>

<hr>
<h2 id='showLog'>Display the contents of a log file.</h2><span id='topic+showLog'></span>

<h3>Description</h3>

<p>Display the contents of a log file, useful in case of errors.
</p>
<p>Note this rare special case: When you use chunking, submit some jobs, some jobs fail,
then you resubmit these jobs again in different chunks, the log files will contain the log
of the old, failed job as well. <code>showLog</code> tries to jump to the correct part
of the new log file with a supported pager.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showLog(reg, id, pager = getOption("pager"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showLog_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="showLog_+3A_id">id</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Id of selected job.
Default is first id in registry.</p>
</td></tr>
<tr><td><code id="showLog_+3A_pager">pager</code></td>
<td>
<p>[<code>any</code>]<br />
Pager to use to display the log. Defaults to <code>getOption("pager")</code>.
This option is passed to <code>file.show</code> and is highly OS dependant and GUI dependant.
If either R's pager or the environment variable &ldquo;PAGER&rdquo; is set to &ldquo;less&rdquo;
or &ldquo;vim&rdquo;, the correct part of the log file will be shown.
Otherwise you find information about the correct part in the beginning of the displayed file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>character(1)</code>]. Invisibly returns path to log file.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+testJob">testJob</a>()</code>
</p>

<hr>
<h2 id='showStatus'>Retrieve or show status information about jobs.</h2><span id='topic+showStatus'></span><span id='topic+getStatus'></span>

<h3>Description</h3>

<p>E.g.: How many there are, how many are done, any errors, etc.
<code>showStatus</code> displays on the console, <code>getStatus</code> returns an informative result
without console output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showStatus(reg, ids, run.and.exp = TRUE, errors = 10L)

getStatus(reg, ids, run.and.exp = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showStatus_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="showStatus_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Ids of selected jobs.
Default is all jobs.</p>
</td></tr>
<tr><td><code id="showStatus_+3A_run.and.exp">run.and.exp</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Show running and expired jobs?
Requires to list the job on the batch system. If not possible, because
that cluster function is not avilable, this option is ignored anyway.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="showStatus_+3A_errors">errors</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
How many of the error messages should be displayed if any errors occured in the jobs?
Default is 10.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>list</code>]. List of absolute job numbers. <code>showStatus</code> returns them
invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg, f, 1:10)
submitJobs(reg)
waitForJobs(reg)

# should show 10 submitted jobs, which are all done.
showStatus(reg)
</code></pre>

<hr>
<h2 id='sourceRegistryFiles'>Source registry files</h2><span id='topic+sourceRegistryFiles'></span>

<h3>Description</h3>

<p>Sources all files found in <code>src.dirs</code> and specified via <code>src.files</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sourceRegistryFiles(reg, envir = .GlobalEnv)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sourceRegistryFiles_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="sourceRegistryFiles_+3A_envir">envir</code></td>
<td>
<p>[<code>environment</code>]<br />
Environment to source the files into. Default is the global environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='submitJobs'>Submit jobs or chunks of jobs to batch system via cluster function.</h2><span id='topic+submitJobs'></span>

<h3>Description</h3>

<p>If the internal submit cluster function completes successfully, the <code>retries</code>
counter is set back to 0 and the next job or chunk is submitted.
If the internal submit cluster function returns a fatal error, the submit process
is completely stopped and an exception is thrown.
If the internal submit cluster function returns a temporary error, the submit process
waits for a certain time, which is determined by calling the user-defined
<code>wait</code>-function with the current <code>retries</code> counter, the counter is
increased by 1 and the same job is submitted again. If <code>max.retries</code> is
reached the function simply terminates.
</p>
<p>Potential temporary submit warnings and errors are logged inside your file
directory in the file &ldquo;submit.log&rdquo;.
To keep track you can use <code>tail -f [file.dir]/submit.log</code> in another
terminal.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>submitJobs(
  reg,
  ids,
  resources = list(),
  wait,
  max.retries = 10L,
  chunks.as.arrayjobs = FALSE,
  job.delay = FALSE,
  progressbar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="submitJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Vector for job id or list of vectors of chunked job ids.
Only corresponding jobs are submitted. Chunked jobs will get executed
sequentially as a single job for the scheduler.
Default is all jobs which were not yet submitted to the batch system.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_resources">resources</code></td>
<td>
<p>[<code>list</code>]<br />
Required resources for all batch jobs. The elements of this list
(e.g. something like &ldquo;walltime&rdquo; or &ldquo;nodes&rdquo; are defined by your template job file.
Defaults can be specified in your config file.
Default is empty list.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_wait">wait</code></td>
<td>
<p>[<code>function(retries)</code>]<br />
Function that defines how many seconds should be waited in case of a temporary error.
Default is exponential back-off with <code>10*2^retries</code>.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_max.retries">max.retries</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Number of times to submit one job again in case of a temporary error
(like filled queues). Each time <code>wait</code> is called to wait a certain
number of seconds.
Default is 10 times.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_chunks.as.arrayjobs">chunks.as.arrayjobs</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
If ids are passed as a list of chunked job ids, execute jobs in a chunk
as array jobs. Note that your scheduler and your template must be adjusted to
use this option. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_job.delay">job.delay</code></td>
<td>
<p>[<code>function(n, i)</code> or <code>logical(1)</code>]<br />
Function that defines how many seconds a job should be delayed before it starts.
This is an expert option and only necessary to change when you want submit
extremely many jobs. We then delay the jobs a bit to write the submit messages as
early as possible to avoid writer starvation.
<code>n</code> is the number of jobs and <code>i</code> the number of the ith job.
The default function used with <code>job.delay</code> set to <code>TRUE</code> is no delay for
100 jobs or less and otherwise <code>runif(1, 0.1*n, 0.2*n)</code>.
If set to <code>FALSE</code> (the default) delaying jobs is disabled.</p>
</td></tr>
<tr><td><code id="submitJobs_+3A_progressbar">progressbar</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Set to <code>FALSE</code> to disable the progress bar.
To disable all progress bars, see <code><a href="BBmisc.html#topic+makeProgressBar">makeProgressBar</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>integer</code>]. Vector of submitted job ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) x^2
batchMap(reg, f, 1:10)
submitJobs(reg)
waitForJobs(reg)

# Submit the 10 jobs again, now randomized into 2 chunks:
chunked = chunk(getJobIds(reg), n.chunks = 2, shuffle = TRUE)
submitJobs(reg, chunked)
</code></pre>

<hr>
<h2 id='sweepRegistry'>Sweep obsolete files from the file system.</h2><span id='topic+sweepRegistry'></span>

<h3>Description</h3>

<p>Removes R scripts, log files, resource informations and temporarily stored configuration files
from the registry's file directory. Assuming all your jobs completed successfully, none of these are needed
for further work. This operation potentially releases quite a lot of disk space, depending on the number of your jobs.
BUT A HUGE WORD OF WARNING:
IF you later notice something strange and need to determine the reason for it, you are at a huge disadvantage.
Only do this at your own risk and when you are sure that you have successfully completed a project and only
want to archive your produced experiments and results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sweepRegistry(reg, sweep = c("scripts", "conf"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sweepRegistry_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="sweepRegistry_+3A_sweep">sweep</code></td>
<td>
<p>[<code>character</code>]<br />
Possible choices:
Temporary R scripts of jobs,
really not needed for anything else then execution (&ldquo;scripts&rdquo;),
log file of jobs,
think about whether you later want to inspect them (&ldquo;logs&rdquo;),
BatchJobs configuration files which are temporarily stored on submit,
really not needed for anything else then execution (&ldquo;conf&rdquo;),
resource lists of <code><a href="#topic+submitJobs">submitJobs</a></code> which are temporarily stored on submit,
think about whether you later want to inspect them (&ldquo;resources&rdquo;),
Default is <code>c("scripts", "conf")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>logical</code>]. Invisibly returns <code>TRUE</code> on success and <code>FALSE</code>
if some files could not be removed.
</p>

<hr>
<h2 id='syncRegistry'>Syncronize staged queries into the registry.</h2><span id='topic+syncRegistry'></span>

<h3>Description</h3>

<p>If the option &ldquo;staged.queries&rdquo; is enabled, all communication from the nodes
to the master is done via files in the subdirectory &ldquo;pending&rdquo; of the <code>file.dir</code>.
This function checks for such files and merges the information into the database.
Usually you do not have to call this function yourself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>syncRegistry(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="syncRegistry_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns <code>TRUE</code> on success.
</p>

<hr>
<h2 id='testJob'>Tests a job by running it with Rscript in a new process.</h2><span id='topic+testJob'></span>

<h3>Description</h3>

<p>Useful for debugging.
Note that neither the registry, database or file directory are changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testJob(reg, id, resources = list(), external = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testJob_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="testJob_+3A_id">id</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Id of job to test.
Default is first job id of registry.</p>
</td></tr>
<tr><td><code id="testJob_+3A_resources">resources</code></td>
<td>
<p>[<code>list</code>]<br />
Usually not needed, unless you call the function <code><a href="#topic+getResources">getResources</a></code> in your job.
See  <code><a href="#topic+submitJobs">submitJobs</a></code>.
Default is empty list.</p>
</td></tr>
<tr><td><code id="testJob_+3A_external">external</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Run test in an independent external R session instead of current.
The former allows to uncover missing variable definitions (which may
accidentially be defined in the current global environment) and the latter
is useful to get traceable execeptions.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[any]. Result of job. If the job did not complete because of an error, NULL is returned.
</p>


<h3>See Also</h3>

<p>Other debug: 
<code><a href="#topic+debugMulticore">debugMulticore</a>()</code>,
<code><a href="#topic+debugSSH">debugSSH</a>()</code>,
<code><a href="#topic+getErrorMessages">getErrorMessages</a>()</code>,
<code><a href="#topic+getJobInfo">getJobInfo</a>()</code>,
<code><a href="#topic+getLogFiles">getLogFiles</a>()</code>,
<code><a href="#topic+grepLogs">grepLogs</a>()</code>,
<code><a href="#topic+killJobs">killJobs</a>()</code>,
<code><a href="#topic+resetJobs">resetJobs</a>()</code>,
<code><a href="#topic+setJobFunction">setJobFunction</a>()</code>,
<code><a href="#topic+showLog">showLog</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reg = makeRegistry(id = "BatchJobsExample", file.dir = tempfile(), seed = 123)
f = function(x) if (x==1) stop("oops") else x
batchMap(reg, f, 1:2)
testJob(reg, 2)
</code></pre>

<hr>
<h2 id='updateRegistry'>ONLY FOR INTERNAL USAGE.</h2><span id='topic+updateRegistry'></span>

<h3>Description</h3>

<p>ONLY FOR INTERNAL USAGE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateRegistry(reg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateRegistry_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[any]. Updated <code><a href="#topic+Registry">Registry</a></code> or <code>FALSE</code> if no updates were performed.
</p>

<hr>
<h2 id='waitForJobs'>Wait for termination of jobs on the batch system.</h2><span id='topic+waitForJobs'></span>

<h3>Description</h3>

<p>Waits for termination of jobs while displaying a progress bar
containing summarizing informations of the jobs.
The following abbreviations are used in the progress bar:
&ldquo;S&rdquo; for number of jobs on system, &ldquo;D&rdquo; for number of
jobs successfully terminated, &ldquo;E&rdquo; for number ofjobs terminated
with an R exception and &ldquo;R&rdquo; for number of jobs currently running
on the system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waitForJobs(
  reg,
  ids,
  sleep = 10,
  timeout = 604800,
  stop.on.error = FALSE,
  progressbar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waitForJobs_+3A_reg">reg</code></td>
<td>
<p>[<code><a href="#topic+Registry">Registry</a></code>]<br />
Registry.</p>
</td></tr>
<tr><td><code id="waitForJobs_+3A_ids">ids</code></td>
<td>
<p>[<code>integer</code>]<br />
Vector of job ids.
Default is all submitted jobs not yet terminated.</p>
</td></tr>
<tr><td><code id="waitForJobs_+3A_sleep">sleep</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Seconds to sleep between status updates. Default is <code>10</code>.</p>
</td></tr>
<tr><td><code id="waitForJobs_+3A_timeout">timeout</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
After waiting <code>timeout</code> seconds, show a message and return <code>FALSE</code>.
This argument may be required on some systems where, e.g., expired jobs or jobs on hold
are problematic to detect. If you don't want a timeout, set this to <code>Inf</code>.
Default is <code>604800</code> (one week).</p>
</td></tr>
<tr><td><code id="waitForJobs_+3A_stop.on.error">stop.on.error</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Immediately return if a job terminates with an error? Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="waitForJobs_+3A_progressbar">progressbar</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Set to <code>FALSE</code> to disable the progress bar.
To disable all progress bars, see <code><a href="BBmisc.html#topic+makeProgressBar">makeProgressBar</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>logical(1)</code>]. Returns <code>TRUE</code> if all jobs terminated successfully
and <code>FALSE</code> if either an error occurred or the timeout is reached.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
