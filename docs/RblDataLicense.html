<!DOCTYPE html><html><head><title>Help for package RblDataLicense</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RblDataLicense}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RblConnect'><p>Create an SFTP connection to Bloomberg Data License</p></a></li>
<li><a href='#RblDownload'><p>Download a file from Bloomberg</p></a></li>
<li><a href='#RblFiles'><p>List files available at Bloomberg</p></a></li>
<li><a href='#RblParse'><p>Parse Bloomberg response file and import data</p></a></li>
<li><a href='#RblQuery'><p>Query Bloomberg and Fetch Data</p></a></li>
<li><a href='#RblRequestBuilder'><p>Build a request file to query Bloomberg</p></a></li>
<li><a href='#RblUpload'><p>Upload a request file to Bloomberg</p></a></li>
<li><a href='#RblUrl'><p>Get Bloomberg connection Url</p></a></li>
<li><a href='#RblUser'><p>Get Bloomberg User</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Interface to 'Bloomberg Data License'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.5</td>
</tr>
<tr>
<td>Description:</td>
<td>R interface to access prices and market data with the 
    'Bloomberg Data License' service from 
    <a href="https://www.bloomberg.com/professional/product/data-license/">https://www.bloomberg.com/professional/product/data-license/</a>. 
    As a prerequisite, a valid Data License from 'Bloomberg' is needed 
    together with the corresponding SFTP credentials and whitelisting 
    of the IP from which accessing the service. 
    This software and its author are in no way affiliated, 
    endorsed, or approved by 'Bloomberg' or any of its affiliates.
    'Bloomberg' is a registered trademark.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rbldatalicense.eguidotti.com">https://rbldatalicense.eguidotti.com</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eguidotti/RblDataLicense/issues">https://github.com/eguidotti/RblDataLicense/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>RCurl, xts, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-09 23:08:27 UTC; eguidotti</td>
</tr>
<tr>
<td>Author:</td>
<td>Emanuele Guidotti <a href="https://orcid.org/0000-0002-8961-6623"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emanuele Guidotti &lt;emanuele.guidotti@unine.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-09 23:20:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='RblConnect'>Create an SFTP connection to Bloomberg Data License</h2><span id='topic+RblConnect'></span>

<h3>Description</h3>

<p>An sftp connection to Bloomberg Datalicense is established. On some Linux systems, this may
not work out of the box, as libcurl does not natively support sftp. In that case, you need to 
compile curl with SFTP support. 
See here for details: http://askubuntu.com/questions/195545/how-to-enable-sftp-support-in-curl
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblConnect(
  user,
  pw,
  host = "sftp.bloomberg.com",
  port = "22",
  protocol = "sftp",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblConnect_+3A_user">user</code></td>
<td>
<p>The account number assigned by Bloomberg</p>
</td></tr>
<tr><td><code id="RblConnect_+3A_pw">pw</code></td>
<td>
<p>The password assigned by Bloomberg</p>
</td></tr>
<tr><td><code id="RblConnect_+3A_host">host</code></td>
<td>
<p>The connection host</p>
</td></tr>
<tr><td><code id="RblConnect_+3A_port">port</code></td>
<td>
<p>The connection port</p>
</td></tr>
<tr><td><code id="RblConnect_+3A_protocol">protocol</code></td>
<td>
<p>The connection protocol</p>
</td></tr>
<tr><td><code id="RblConnect_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should R report extra information on progress?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical. Is the connection succesful?
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# These are dummy credentials. Replace with the credentials received from Bloomberg 
RblConnect(user = 'dl000000', pw = '0000000000000000') 

## End(Not run)

</code></pre>

<hr>
<h2 id='RblDownload'>Download a file from Bloomberg</h2><span id='topic+RblDownload'></span>

<h3>Description</h3>

<p>Download a generic file from Bloomberg. 
Use <code><a href="#topic+RblFiles">RblFiles</a></code> to list the files available at Bloomberg.
If the file is not available yet (i.e. a request file has just been uploaded), the function waits until the response file is there or the timeout is reached
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblDownload(file, frequency = 60, timeout = 3600, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblDownload_+3A_file">file</code></td>
<td>
<p>character string representing the file to download</p>
</td></tr>
<tr><td><code id="RblDownload_+3A_frequency">frequency</code></td>
<td>
<p>the polling frequency to check if file is available at Bloomberg</p>
</td></tr>
<tr><td><code id="RblDownload_+3A_timeout">timeout</code></td>
<td>
<p>the timeout in seconds</p>
</td></tr>
<tr><td><code id="RblDownload_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should R report extra information on progress?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string. Path to the downloaded file. NULL on failure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first

# Build a request file to download the daily closing prices of 
#  EURO STOXX Index from 2005-01-01 to 2015-12-31.
RblRequest &lt;- 
     RblRequestBuilder(
          header = c(FIRMNAME = RblUser(), 
                     PROGRAMNAME = 'gethistory', 
                     DATERANGE = '20050101|20151231'),
          fields = c('PX_LAST'), 
          identifiers = c('SXXE Index')
     )
                                
# Upload the request file
req &lt;- RblUpload(RblRequest)

# Download the response file
out &lt;- RblDownload(req$out)
out

## End(Not run)

</code></pre>

<hr>
<h2 id='RblFiles'>List files available at Bloomberg</h2><span id='topic+RblFiles'></span>

<h3>Description</h3>

<p>Retrieve files available at Bloomberg.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblFiles()
</code></pre>


<h3>Value</h3>

<p>Vector of character strings representing the filenames available at Bloomberg
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first
RblFiles()

## End(Not run)

</code></pre>

<hr>
<h2 id='RblParse'>Parse Bloomberg response file and import data</h2><span id='topic+RblParse'></span>

<h3>Description</h3>

<p>Parse Bloomberg local response files and import the data in R. The PROGRAMNAME in use is auto detected: 'getdata' and 'gethistory' are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblParse(file, auto.assign = FALSE, env = parent.frame(), verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblParse_+3A_file">file</code></td>
<td>
<p>character string representing the local file to parse (see <code><a href="#topic+RblDownload">RblDownload</a></code>)</p>
</td></tr>
<tr><td><code id="RblParse_+3A_auto.assign">auto.assign</code></td>
<td>
<p>logical. Should results be loaded to env when using PROGRAMNAME=gethistory?</p>
</td></tr>
<tr><td><code id="RblParse_+3A_env">env</code></td>
<td>
<p>where to create objects if auto.assign = TRUE</p>
</td></tr>
<tr><td><code id="RblParse_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should R report extra information on progress?</p>
</td></tr>
</table>


<h3>Value</h3>


<dl>
<dt>PROGRAMNAME=getdata</dt><dd><p>data.frame containig identifiers (rows) and fields (columns). NULL on failure.</p>
</dd>
<dt>PROGRAMNAME=gethistory</dt><dd><p>list of xts objects. If <em>auto.assign</em>=TRUE the xts objects are loaded in <em>env</em> and the object names are returned. NULL on failure.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first

# Build a request file to download the daily closing prices of 
#  EURO STOXX Index from 2005-01-01 to 2015-12-31.
RblRequest &lt;- 
     RblRequestBuilder(
          header = c(FIRMNAME = RblUser(), 
                     PROGRAMNAME = 'gethistory', 
                     DATERANGE = '20050101|20151231'),
          fields = c('PX_LAST'), 
          identifiers = c('SXXE Index')
     )
                                
# Upload the request file
req &lt;- RblUpload(RblRequest)

# Download the response file
out &lt;- RblDownload(req$out)

# Import the data
data &lt;- RblParse(out)
str(data)

## End(Not run)

</code></pre>

<hr>
<h2 id='RblQuery'>Query Bloomberg and Fetch Data</h2><span id='topic+RblQuery'></span>

<h3>Description</h3>

<p>The function provides a high level interface to Bloomberg Datalicense 'getdata' and 'gethistory' programs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblQuery(
  identifiers,
  fields,
  from = NULL,
  to = Sys.Date(),
  auto.assign = FALSE,
  env = parent.frame(),
  category = c(),
  add_headers = c(),
  overrides = c(),
  limit = 5,
  split = 100,
  frequency = 60,
  timeout = 3600,
  filename = format(Sys.time(), "%m%d%H%M%S"),
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblQuery_+3A_identifiers">identifiers</code></td>
<td>
<p>vector of Bloomberg identifiers. E.g. c('SXXE Index', 'SX5E Index')</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_fields">fields</code></td>
<td>
<p>vector of Bloomberg fields. E.g. c('PX_LAST', 'PX_CLOSE', 'PX_OPEN', 'PX_HIGH', 'PX_LOW')</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_from">from</code></td>
<td>
<p>date or string (format YYYY-MM-DD). Start time for the 'gethistory' request. If not provided, a 'getdata' request will be made</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_to">to</code></td>
<td>
<p>date or string (format YYYY-MM-DD). End time for the 'gethistory' request. Ignored if <em>from</em> is not provided</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_auto.assign">auto.assign</code></td>
<td>
<p>logical. Should results be loaded to env? Ignored if <em>from</em> is not provided</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_env">env</code></td>
<td>
<p>where to create objects if auto.assign = TRUE</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_category">category</code></td>
<td>
<p>vector of Data License categories to enable. E.g. c('SECMASTER', 'PRICING', 'FUNDAMENTALS'). WARNING! Each DL category is billed separately, so check your DL license carefully!</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_add_headers">add_headers</code></td>
<td>
<p>named vector of additional headers. E.g. c(PROGRAMFLAG = 'oneshot')</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_overrides">overrides</code></td>
<td>
<p>named vector of Bloomberg overrides. E.g. c('END_DT' = '20100101')</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_limit">limit</code></td>
<td>
<p>prevent requesting data for more than this amout of identifiers. This is done to help you keeping your budget under control. Data License is billing based on the amout of instruments you request, so check your DL license carefully before increasing this limit.</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_split">split</code></td>
<td>
<p>maximum number of identifiers to process at once. Requests are split to avoid memory leaks.</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_frequency">frequency</code></td>
<td>
<p>the polling frequency to check if the response file is available at Bloomberg</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_timeout">timeout</code></td>
<td>
<p>the timeout in seconds</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_filename">filename</code></td>
<td>
<p>name assigned to the remote file. Only alphanumeric characters are allowed. Invalid characters are removed.</p>
</td></tr>
<tr><td><code id="RblQuery_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should R report extra information on progress?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following routine to query Bloomberg is implemented:
</p>

<dl>
<dt>Build the request file</dt><dd><p>see <code><a href="#topic+RblRequestBuilder">RblRequestBuilder</a></code></p>
</dd>
<dt>Upload the request file</dt><dd><p>see <code><a href="#topic+RblUpload">RblUpload</a></code></p>
</dd>
<dt>Download the response file</dt><dd><p>see <code><a href="#topic+RblDownload">RblDownload</a></code></p>
</dd>
<dt>Parse the response file</dt><dd><p>see <code><a href="#topic+RblParse">RblParse</a></code></p>
</dd>
</dl>



<h3>Value</h3>

<p>A list with components
</p>

<dl>
<dt>req</dt><dd>
<p>List of characters representing each of the request files uploaded to Bloomberg
</p>
</dd>
<dt>out</dt><dd>
<p>List of characters representing each of the response file downloaded from Bloomberg
</p>
</dd>
<dt>data</dt><dd>
<p>Return of <code><a href="#topic+RblParse">RblParse</a></code>
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first
data &lt;- RblQuery(fields = c('PX_LAST', 'PX_OPEN', 'PX_HIGH', 'PX_LOW'), 
                 identifiers = c('SXXE Index', "SX5E Index"), 
                 from = '2005-01-01')
str(data)

## End(Not run)

</code></pre>

<hr>
<h2 id='RblRequestBuilder'>Build a request file to query Bloomberg</h2><span id='topic+RblRequestBuilder'></span>

<h3>Description</h3>

<p>The request file is generated according to Bloomberg Data License Documentation.
Refer to the Documentation to build the request.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblRequestBuilder(header, fields, identifiers, overrides = c())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblRequestBuilder_+3A_header">header</code></td>
<td>
<p>named vector of headers. E.g. c(FIRMNAME = RblUser(), PROGRAMNAME = 'getdata')</p>
</td></tr>
<tr><td><code id="RblRequestBuilder_+3A_fields">fields</code></td>
<td>
<p>vector of Bloomberg fields. E.g. c('PX_LAST', 'PX_OPEN', 'PX_HIGH', 'PX_LOW')</p>
</td></tr>
<tr><td><code id="RblRequestBuilder_+3A_identifiers">identifiers</code></td>
<td>
<p>vector of Bloomberg identifiers. E.g. c('SXXE Index', 'SX5E Index')</p>
</td></tr>
<tr><td><code id="RblRequestBuilder_+3A_overrides">overrides</code></td>
<td>
<p>named vector of Bloomberg overrides. E.g. c('END_DT' = '20100101')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string representing the request file. Upload it to query Bloomberg (see <code><a href="#topic+RblUpload">RblUpload</a></code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first

# Build a request file to download the daily closing prices of 
#  EURO STOXX Index from 2005-01-01 to 2015-12-31.
RblRequest &lt;- 
     RblRequestBuilder(
          header = c(FIRMNAME = RblUser(), 
                     PROGRAMNAME = 'gethistory', 
                     DATERANGE = '20050101|20151231'),
          fields = c('PX_LAST'), 
          identifiers = c('SXXE Index')
     )
RblRequest

## End(Not run)

</code></pre>

<hr>
<h2 id='RblUpload'>Upload a request file to Bloomberg</h2><span id='topic+RblUpload'></span>

<h3>Description</h3>

<p>Upload a request file to query Bloomberg. A response file will be generated by Bloomberg. 
The request file can be user-defined following the Bloomberg Data License documentation or generated with the <code><a href="#topic+RblRequestBuilder">RblRequestBuilder</a></code> function.
The response file needs to be downloaded (see <code><a href="#topic+RblDownload">RblDownload</a></code>) and parsed (see <code><a href="#topic+RblParse">RblParse</a></code>) to import the data in R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblUpload(
  RblRequest,
  filename = format(Sys.time(), "%m%d%H%M%S"),
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RblUpload_+3A_rblrequest">RblRequest</code></td>
<td>
<p>character string representing the request file according to Bloomberg Datalicense documentation. Can be generated with the <code><a href="#topic+RblRequestBuilder">RblRequestBuilder</a></code> function</p>
</td></tr>
<tr><td><code id="RblUpload_+3A_filename">filename</code></td>
<td>
<p>name assigned to the remote file. Only alphanumeric characters and underscores are allowed. Invalid characters are removed.</p>
</td></tr>
<tr><td><code id="RblUpload_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should R report extra information on progress?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with components
</p>

<dl>
<dt>req</dt><dd><p>the request filename</p>
</dd>
<dt>out</dt><dd><p>the response filename</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first

# Build a request file to download the daily closing prices of 
#  EURO STOXX Index from 2005-01-01 to 2015-12-31.
RblRequest &lt;- 
     RblRequestBuilder(
          header = c(FIRMNAME = RblUser(), 
                     PROGRAMNAME = 'gethistory', 
                     DATERANGE = '20050101|20151231'),
          fields = c('PX_LAST'), 
          identifiers = c('SXXE Index')
     )
                                
# Upload the request file
req &lt;- RblUpload(RblRequest)
req

## End(Not run)

</code></pre>

<hr>
<h2 id='RblUrl'>Get Bloomberg connection Url</h2><span id='topic+RblUrl'></span>

<h3>Description</h3>

<p>Retrieve the Bloomberg connection Url.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblUrl()
</code></pre>


<h3>Value</h3>

<p>Url string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first
RblUrl()

## End(Not run)

</code></pre>

<hr>
<h2 id='RblUser'>Get Bloomberg User</h2><span id='topic+RblUser'></span>

<h3>Description</h3>

<p>Retrieve the Bloomberg User.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RblUser()
</code></pre>


<h3>Value</h3>

<p>User string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run RblConnect first
RblUser()

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
