<!DOCTYPE html><html><head><title>Help for package ssimparser</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ssimparser}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#get_airport_icao'><p>get_airport_icao</p></a></li>
<li><a href='#get_day_of_week'><p>get_day_of_week</p></a></li>
<li><a href='#get_ssim_collist'><p>get_ssim_collist</p></a></li>
<li><a href='#get_ssim_sample'><p>get_ssim_sample</p></a></li>
<li><a href='#get_utc_time'><p>get_utc_time</p></a></li>
<li><a href='#load_ssim'><p>load_ssim</p></a></li>
<li><a href='#load_ssim_flights'><p>load_ssim_flights</p></a></li>
<li><a href='#ssimparser'><p>ssimparser: A Tool for Parsing Standard Schedules Information (Chapter 7).</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Standard Schedules Information Parser</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastien Thonnard</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastien Thonnard &lt;sebastien.thonnard@icloud.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Parse Standard Schedules Information file (types 2 and 3) into a Data Frame.
    Can also expand schedules into flights.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>tidyr, dplyr, stringr, airportr, magrittr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-11 18:02:38 UTC; sebastienthonnard</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-11 18:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Value</h3>

<p>For numeric arguments, a numeric vector. For factors, an unordered factor. See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>

<hr>
<h2 id='get_airport_icao'>get_airport_icao</h2><span id='topic+get_airport_icao'></span>

<h3>Description</h3>

<p>Get airport ICAO with package airportr.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_airport_icao(iata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_airport_icao_+3A_iata">iata</code></td>
<td>
<p>Airport IATA code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the airport ICAO or '-' when <code><a href="airportr.html#topic+airport_detail">airportr::airport_detail</a></code> returned an error.
</p>

<hr>
<h2 id='get_day_of_week'>get_day_of_week</h2><span id='topic+get_day_of_week'></span>

<h3>Description</h3>

<p>Get day of week (1 = Monday).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_day_of_week(pdate = Sys.Date())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_day_of_week_+3A_pdate">pdate</code></td>
<td>
<p>An object of class &quot;POSIXct&quot; from which day of week will be extracted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A double representing the day of week.
</p>

<hr>
<h2 id='get_ssim_collist'>get_ssim_collist</h2><span id='topic+get_ssim_collist'></span>

<h3>Description</h3>

<p>Get the list of columns that can be parsed from SSIM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ssim_collist(getall = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ssim_collist_+3A_getall">getall</code></td>
<td>
<p>Get all columns (TRUE/FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector containing the SSIM columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get all columns
get_ssim_collist()
# Get some of the most 'useful' columns
get_ssim_collist(FALSE)
</code></pre>

<hr>
<h2 id='get_ssim_sample'>get_ssim_sample</h2><span id='topic+get_ssim_sample'></span>

<h3>Description</h3>

<p>Get a test SSIM file for validation and testing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ssim_sample(
  datefrom = as.Date("2020-11-01"),
  dateto = as.Date("2020-12-01"),
  season = "W20",
  creadate = Sys.Date()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ssim_sample_+3A_datefrom">datefrom</code></td>
<td>
<p>First date of the sample.</p>
</td></tr>
<tr><td><code id="get_ssim_sample_+3A_dateto">dateto</code></td>
<td>
<p>Last date of the sample.</p>
</td></tr>
<tr><td><code id="get_ssim_sample_+3A_season">season</code></td>
<td>
<p>IATA season (W20 = Winter 2020).</p>
</td></tr>
<tr><td><code id="get_ssim_sample_+3A_creadate">creadate</code></td>
<td>
<p>Creation date. Default today.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the SSIM sample.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get sample
sample_ssim_str &lt;- ssimparser::get_ssim_sample(datefrom = as.Date("2020-11-01"),
dateto = as.Date("2020-12-01"),
season="W20")

# Parse the sample into a data frame
ssim_sample_df &lt;- ssimparser::load_ssim(ssim_file = sample_ssim_str)
head(ssim_sample_df, 10)
</code></pre>

<hr>
<h2 id='get_utc_time'>get_utc_time</h2><span id='topic+get_utc_time'></span>

<h3>Description</h3>

<p>Get UTC date and time from SSIM local date time and offset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_utc_time(pdate = "27NOV20", ptime = "0000", poffset = "+0000")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_utc_time_+3A_pdate">pdate</code></td>
<td>
<p>Local date formatted as %d%b%y&quot; (eg 27NOV20).</p>
</td></tr>
<tr><td><code id="get_utc_time_+3A_ptime">ptime</code></td>
<td>
<p>Local time formatted %H%M (eg 1345 for 13:45).</p>
</td></tr>
<tr><td><code id="get_utc_time_+3A_poffset">poffset</code></td>
<td>
<p>UTC offset (+0130 for +01:30).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;POSIXct&quot; or the description of a conversion problem as a character vector.
</p>

<hr>
<h2 id='load_ssim'>load_ssim</h2><span id='topic+load_ssim'></span>

<h3>Description</h3>

<p>Load SSIM file into a Data Frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_ssim(
  ssim_file = get_ssim_sample(),
  nested_df = FALSE,
  collist = get_ssim_collist(getall = FALSE),
  clean_col_names = TRUE,
  unpivot_days_of_op = FALSE,
  expand_sched = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_ssim_+3A_ssim_file">ssim_file</code></td>
<td>
<p>Path to the SSIM file or character vector containing the content to load.</p>
</td></tr>
<tr><td><code id="load_ssim_+3A_nested_df">nested_df</code></td>
<td>
<p>Nest SSIM type 3 into type 2 (TRUE/FALSE). Default to FALSE.</p>
</td></tr>
<tr><td><code id="load_ssim_+3A_collist">collist</code></td>
<td>
<p>List of columns that need to be present in the final Data Frame. get_ssim_collist() to get the full list.</p>
</td></tr>
<tr><td><code id="load_ssim_+3A_clean_col_names">clean_col_names</code></td>
<td>
<p>Clean column names in the final Data Frame by removing type2/type3 prefixes (TRUE/FALSE). Default TRUE.</p>
</td></tr>
<tr><td><code id="load_ssim_+3A_unpivot_days_of_op">unpivot_days_of_op</code></td>
<td>
<p>Unpivot the schedules by creating a schedule by day of operation (TRUE/FALSE). Default FALSE.</p>
</td></tr>
<tr><td><code id="load_ssim_+3A_expand_sched">expand_sched</code></td>
<td>
<p>Expand schedules into flights.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data Frame (nested or not) containing the schedules (or flights when schedules were expanded).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get a sample as a character vector
sample_ssim_string &lt;- ssimparser::get_ssim_sample(datefrom = as.Date("2020-11-01"),
dateto = as.Date("2020-12-01"),
season = "W20",
creadate = as.Date("2020-12-02"))

# Write sample to temp dir
sample_ssim_file &lt;- tempfile()
write(sample_ssim_string, sample_ssim_file, append = FALSE)

# Load sample, expand schedules to flights and display the traffic
# by month and departure airport ICAO
ssimparser::load_ssim(ssim_file = sample_ssim_file,
expand_sched = TRUE) %&gt;%
dplyr::group_by(format(flight.flight_date,"%Y-%m"), adep_icao) %&gt;%
dplyr::summarise(n=dplyr::n())

# Get the unique list of airports ICAO
ssimparser::load_ssim(ssim_file = sample_ssim_file, expand_sched = TRUE,
collist = c("type3.adep_icao", "type3.ades_icao")) %&gt;% unique()

# Nest the type 3 into type 2
ssim_nested &lt;- ssimparser::load_ssim(ssim_file = sample_ssim_file,
expand_sched = FALSE, nested = TRUE)
head(ssim_nested)

# Remove the sample SSIM file
unlink(sample_ssim_file)
</code></pre>

<hr>
<h2 id='load_ssim_flights'>load_ssim_flights</h2><span id='topic+load_ssim_flights'></span>

<h3>Description</h3>

<p>Load multiple SSIM file, expand to flights, and return the result as a Data Frame. <br />
In case of period overlap for a specific flight date, information from the latest file will be used, <br />
so beware of the file order in
parameter ssim_files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_ssim_flights(
  ssim_files = c("AFR_20201115.txt", "AFR_20201116.txt"),
  collist = get_ssim_collist(getall = FALSE),
  clean_col_names = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_ssim_flights_+3A_ssim_files">ssim_files</code></td>
<td>
<p>List of SSIM files to load, in the correct order (from the first to load to the last file to load).</p>
</td></tr>
<tr><td><code id="load_ssim_flights_+3A_collist">collist</code></td>
<td>
<p>List of columns that need to be present in the final Data Frame. get_ssim_collist() to get the full list.</p>
</td></tr>
<tr><td><code id="load_ssim_flights_+3A_clean_col_names">clean_col_names</code></td>
<td>
<p>Clean column names in the final Data Frame by removing type2/type3 prefixes (TRUE/FALSE). Default TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data Frame containing the flights.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get 3 samples as a character vector
samples &lt;- data.frame(sampleid = c(1:3)) %&gt;%
 dplyr::rowwise() %&gt;%
 dplyr::mutate(
 filename = tempfile(),
 samplestring = ssimparser::get_ssim_sample(datefrom = as.Date("2020-11-01") + (sampleid * 3),
 dateto = as.Date("2020-12-01") + (sampleid * 3),
 season = "W20",
 creadate = as.Date("2020-11-01") + sampleid)
 )
# Write the samples to tempdir
for (i in 1:3)
{
 write(samples[i,]$samplestring, samples[i,]$filename, append = FALSE)
}

# Load the 3 samples and display the total traffic per day
ssimparser::load_ssim_flights(ssim_files = samples$filename) %&gt;%
dplyr::group_by(flight_date = as.Date(flight.flight_date)) %&gt;%
dplyr::summarise(total_flights = dplyr::n()) %&gt;%
dplyr::arrange(desc(flight_date))

# Unlink temp files
for (i in 1:3)
{
  unlink(samples[i,]$filename)
}
</code></pre>

<hr>
<h2 id='ssimparser'>ssimparser: A Tool for Parsing Standard Schedules Information (Chapter 7).</h2><span id='topic+ssimparser'></span>

<h3>Description</h3>

<p>Parse SSIM file (types 2 and 3) into a Data Frame.<br /><br />
Bugs report:<br />
<a href="https://github.com/sthonnard/ssimparser">https://github.com/sthonnard/ssimparser</a>
</p>


<h3>ssimparser functions</h3>

<p><strong>get_ssim_collist()</strong><br />
Get the list of columns that can be parsed from SSIM.<br />
</p>
<p><strong>load_ssim(ssim_file)</strong><br />
Parse SSIM file into a Data Frame.<br />
</p>
<p><strong>load_ssim_flights(ssim_files)</strong><br />
Parse multiple SSIM files, expand to flights, and return the result into a Data Frame.<br />
</p>
<p><strong>get_ssim_sample()</strong><br />
Get a sample SSIM file as a character vector.<br />
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
