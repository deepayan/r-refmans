<!DOCTYPE html><html lang="en"><head><title>Help for package schwabr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {schwabr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#schwabr-package'><p>schwabr: A Package for Using the Schwab Trade API</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#schwab_accountData'><p>Get account balances, positions, and account numbers returned as a list</p></a></li>
<li><a href='#schwab_act_hash'><p>Get account hashed value</p></a></li>
<li><a href='#schwab_auth1_loginURL'><p>Auth Step 1: Generate LogIn URL</p></a></li>
<li><a href='#schwab_auth2_refreshToken'><p>Auth Step 2: Obtain Refresh Token</p></a></li>
<li><a href='#schwab_auth3_accessToken'><p>Auth Step 3: Get Access Token</p></a></li>
<li><a href='#schwab_cancelOrder'><p>Cancel an Open Order</p></a></li>
<li><a href='#schwab_marketHours'><p>Get Market Hours</p></a></li>
<li><a href='#schwab_optionChain'><p>Get Options Chain</p></a></li>
<li><a href='#schwab_optionExpiration'><p>Get Options Expiration Chain</p></a></li>
<li><a href='#schwab_orderDetail'><p>Get Details for a Single Order</p></a></li>
<li><a href='#schwab_orderSearch'><p>Search for orders by date</p></a></li>
<li><a href='#schwab_placeOrder'><p>Place Order for a specific account</p></a></li>
<li><a href='#schwab_priceHistory'><p>Get price history for a multiple securities</p></a></li>
<li><a href='#schwab_priceQuote'><p>Get Quotes for specified tickers in List form</p></a></li>
<li><a href='#schwab_symbolDetail'><p>Get ticker details</p></a></li>
<li><a href='#schwab_transactSearch'><p>Search for all Transaction types</p></a></li>
<li><a href='#schwab_userPreferences'><p>Get User Preferences</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'Schwab API' Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Author:</td>
<td>Anthony Trevisan [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anthony Trevisan &lt;anthonytrevisan@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://altanalytics.github.io/schwabr/">https://altanalytics.github.io/schwabr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/altanalytics/schwabr/issues">https://github.com/altanalytics/schwabr/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Use R to interface with the 'Charles Schwab Trade API' <a href="https://developer.schwab.com/">https://developer.schwab.com/</a>.
    Functions include authentication, trading, price requests, account information, and option 
    chains. A user will need a Schwab brokerage account and Schwab Individual Developer app. See README 
    for authentication process and examples.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, urltools (&ge; 1.7.3), base64enc, lubridate, dplyr,
jsonlite, magrittr, methods</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-24 00:22:41 UTC; ubuntu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-24 08:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='schwabr-package'>schwabr: A Package for Using the Schwab Trade API</h2><span id='topic+schwabr'></span><span id='topic+schwabr-package'></span>

<h3>Description</h3>

<p>The schwabr package provides four categories of important functions:
</p>

<ol>
<li><p> Authenticating into a TD Brokerage account
</p>
</li>
<li><p> Working with orders
</p>
</li>
<li><p> Getting account information
</p>
</li>
<li><p> Pulling pricing/market data
</p>
</li></ol>



<h3>Details</h3>

<p>Details for the functions can be found within the function help pages.
Detailed examples are also available in the README.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Anthony Trevisan <a href="mailto:anthonytrevisan@gmail.com">anthonytrevisan@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://altanalytics.github.io/schwabr/">https://altanalytics.github.io/schwabr/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/altanalytics/schwabr/issues">https://github.com/altanalytics/schwabr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Value</h3>

<p>The result of evaluating the left-hand side expression.
</p>

<hr>
<h2 id='schwab_accountData'>Get account balances, positions, and account numbers returned as a list</h2><span id='topic+schwab_accountData'></span>

<h3>Description</h3>

<p>Retrieves account data for all accounts linked to the Access Token or a specific account
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_accountData(
  output = "df",
  account_number = "",
  value_pull = c("all", "bal", "pos", "acts"),
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_accountData_+3A_output">output</code></td>
<td>
<p>Use 'df' for a list of 3 data frames containing balances,
positions, and orders. Otherwise the data will be returned as a list of
lists</p>
</td></tr>
<tr><td><code id="schwab_accountData_+3A_account_number">account_number</code></td>
<td>
<p>The account number as shown on the Schwab website</p>
</td></tr>
<tr><td><code id="schwab_accountData_+3A_value_pull">value_pull</code></td>
<td>
<p>Can be one of 'all','bal','pos','acts' depending on what you
want to pull back</p>
</td></tr>
<tr><td><code id="schwab_accountData_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output will be either a list of three data frames or a list of three
lists that contain balances, positions, and account numbers for Schwab accounts
linked to the access token or specified. For historical orders, see
<code><a href="#topic+schwab_orderSearch">schwab_orderSearch</a></code>. The default is for a data frame output which is
much cleaner.
</p>


<h3>Value</h3>

<p>a list of requested account details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# Generate a new access token
accessTokenList = schwab_auth3_accessToken(appKey, appSecret, refreshToken)

# Passing the accessTokenList is optional. The default will return balances
asDF = schwab_accountData()
asList = schwab_accountData('list',account_number = '', accessTokenList)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_act_hash'>Get account hashed value</h2><span id='topic+schwab_act_hash'></span>

<h3>Description</h3>

<p>Retrieves the Hashed account value for a specific account
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_act_hash(account_number = "", accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_act_hash_+3A_account_number">account_number</code></td>
<td>
<p>A Standard Schwab Account number</p>
</td></tr>
<tr><td><code id="schwab_act_hash_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A hashed account number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# Generate a new access token
accessTokenList = schwab_auth3_accessToken(appKey, appSecret, refreshToken)

# Passing the accessTokenList is optional. The default will return balances
act_hash = schwab_act_hash(account_number = '123456789')



## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_auth1_loginURL'>Auth Step 1: Generate LogIn URL</h2><span id='topic+schwab_auth1_loginURL'></span>

<h3>Description</h3>

<p>Create URL to grant App access to Charles Schwab accounts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_auth1_loginURL(appKey, callbackURL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_auth1_loginURL_+3A_appkey">appKey</code></td>
<td>
<p>'Schwab API' generated App Key for the registered app.</p>
</td></tr>
<tr><td><code id="schwab_auth1_loginURL_+3A_callbackurl">callbackURL</code></td>
<td>
<p>Users Callback URL for the registered app</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To use the 'Schwab API', both an account and a registered
developer app are required. The developer app functions as a middle layer
between the brokerage account and the API. A developer app should be
registered on the <a href="https://developer.schwab.com">Schwab
Developer</a> site. Once logged in to the developer site, use My Apps to
register an application. An App will have a key and secret provided.
The Key/Secret is auto generated and can be found under
Dashboard &gt; View Details at the bottom. The user must also create a Callback URL.
The Callback URL must be a valid URL. The example below assumes the Callback
URL is https://127.0.0.1. The Application should be in a &quot;Ready to Use&quot;
state before attempting to login.
</p>
<p>This function will use these inputs to generate a URL where the user can
log in to their standard Charles Schwab Access Page and grant the
application access to the specific accounts, enabling the API. The URL
Authorization Code generated at the end of the log in process will feed into
<code><a href="#topic+schwab_auth2_refreshToken">schwab_auth2_refreshToken</a></code>. For questions, please reference the
<a href="https://developer.schwab.com/products/trader-api--individual/details/documentation/">Schwab
Docs</a> or see the examples in the 'schwabr' readme.
</p>


<h3>Value</h3>

<p>login url to grant app permission to Schwab accounts
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Visit the URL generated from the function below to log in accept terms and
# select the accounts you want to have API permissions.

# This assumes you set the callback to 'https://127.0.0.1'
appKey = 'ALPHANUM1234KEY'
loginURL = schwab_auth1_loginURL(appKey, 'https://127.0.0.1')

</code></pre>

<hr>
<h2 id='schwab_auth2_refreshToken'>Auth Step 2: Obtain Refresh Token</h2><span id='topic+schwab_auth2_refreshToken'></span>

<h3>Description</h3>

<p>Get a Refresh Token using the Authorization Code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_auth2_refreshToken(appKey, appSecret, callbackURL, codeToken)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_auth2_refreshToken_+3A_appkey">appKey</code></td>
<td>
<p>'Schwab API' generated App Key for the registered app.</p>
</td></tr>
<tr><td><code id="schwab_auth2_refreshToken_+3A_appsecret">appSecret</code></td>
<td>
<p>'Schwab API' generated Secret for the registered app.</p>
</td></tr>
<tr><td><code id="schwab_auth2_refreshToken_+3A_callbackurl">callbackURL</code></td>
<td>
<p>Users Callback URL for the registered app</p>
</td></tr>
<tr><td><code id="schwab_auth2_refreshToken_+3A_codetoken">codeToken</code></td>
<td>
<p>Will be the URL at the end of Auth Step 1. Somewhere in the
URL you should see code=CO.xxx. Paste the entire URL into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Once a URL has been generated using <code><a href="#topic+schwab_auth1_loginURL">schwab_auth1_loginURL</a></code>, a user
can visit that URL to grant access to Schwab accounts. Once the button &quot;Done&quot;
at the end of the process is pressed, the user will be
redirected, potentially to &quot;This site can't be reached&quot;. This indicates a
successful log in. The URL of this page contains the Authorization Code.
Paste the entire URL, not just the Authorization Code, into
schwab_auth2_refreshToken. The authorization code will be a long alpha
numeric string starting with 'https' and having 'code=' embedded.
</p>
<p>The output of schwab_auth2_refreshToken will be a Refresh Token which will be used
to gain access to the Schwab account(s) going forward. The Refresh
Token will be valid for 7 days. Be sure to save the Refresh Token to a safe
location.
</p>
<p>The Refresh Token is needed to generate an Access Token using
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>, which is used for general account access.
The Access Token expires after 30 minutes but the Refresh Token remains
active for 7 days. You want to store your refresh token somewhere safe
so that you can reference it later to regenerate an authorization token. After 7
days you have to manually log in again. The 'Schwab API' team indicated this might
change in the future, but no set timeline.
</p>


<h3>Value</h3>

<p>Refresh Token that is valid for 7 days
</p>


<h3>See Also</h3>

<p><code><a href="#topic+schwab_auth1_loginURL">schwab_auth1_loginURL</a></code> to generate a login url which leads
to an authorization code, and more importantly generated a Refresh Token, you can feed
the refresh token into <code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>
to generate a new Access Token
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Initial access will require manually logging in to the URL from schwab_auth1_loginURL
# After a successful log in, the URL authorization code can be fed with a callbackURL
tok = schwab_auth2_refreshToken(appKey = 'schwab_APP_KEY',
                               appSecret = 'schwab_SECRET',
                               callbackURL = 'https://127.0.0.1',
                               codeToken = 'https://127.0.0.1?code=Auhtorizationcode')


# Save the Refresh Token somewhere safe where it can be retrieved
saveRDS(tok$refresh_token,'/secure/location/')


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_auth3_accessToken'>Auth Step 3: Get Access Token</h2><span id='topic+schwab_auth3_accessToken'></span>

<h3>Description</h3>

<p>Get a new Access Token using a valid Refresh Token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_auth3_accessToken(appKey, appSecret, refreshToken)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_auth3_accessToken_+3A_appkey">appKey</code></td>
<td>
<p>'Schwab API' generated App Key for the registered app.</p>
</td></tr>
<tr><td><code id="schwab_auth3_accessToken_+3A_appsecret">appSecret</code></td>
<td>
<p>'Schwab API' generated Secret for the registered app.</p>
</td></tr>
<tr><td><code id="schwab_auth3_accessToken_+3A_refreshtoken">refreshToken</code></td>
<td>
<p>An existing Refresh Token generated using
<code><a href="#topic+schwab_auth2_refreshToken">schwab_auth2_refreshToken</a></code>. Only pass the refresh_token, not the entire list</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An Access Token is required for the functions within 'schwabr' It serves
as a user login to your accounts. The token is valid for 30 minutes
and allows the user to place trades, get account information, get order
history, pull historical stock prices, etc. A Refresh Token is required to
generate an Access Token. <code><a href="#topic+schwab_auth2_refreshToken">schwab_auth2_refreshToken</a></code>  can be used to
generate a Refresh Token which stays valid for 7 days. The appKey is
generated automatically when an App is registered on the
<a href="https://developer.schwab.com">Schwab Developer</a> site. By default,
the Access Token is stored into options and will automatically be
passed to downstream functions. However, the user can also submit an Access
Token manually if multiple tokens are in use (for example: when managing more
than one log in.)
</p>
<p>DISCLOSURE: This software is in no way affiliated, endorsed, or approved by
Charles Schwab or any of its affiliates. It comes with absolutely no warranty
and should not be used in actual trading unless the user can read and
understand the source code. The functions within this package have been
tested under basic scenarios. There may be bugs or issues that could prevent
a user from executing trades or canceling trades. It is also possible trades
could be submitted in error. The user will use this package at their own
risk.
</p>


<h3>Value</h3>

<p>Access Token that is valid for 30 minutes. By default it is stored in
options.This is a list of objects that also shows when the access token expires
</p>


<h3>See Also</h3>

<p><code><a href="#topic+schwab_auth1_loginURL">schwab_auth1_loginURL</a></code> to generate a login url which leads
to an authorization code, then use  <code><a href="#topic+schwab_auth2_refreshToken">schwab_auth2_refreshToken</a></code> to
generate Refresh Token with the authorization code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# A valid Refresh Token can be fed into the function below for a new Access Token
refreshToken = readRDS('/secure/location/')
accessTokenList = schwab_auth3_refreshToken('schwab_APPKey', 'schwab_AppSecret', refreshToken)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_cancelOrder'>Cancel an Open Order</h2><span id='topic+schwab_cancelOrder'></span>

<h3>Description</h3>

<p>Pass an Order ID and Account number to cancel an existing open order
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_cancelOrder(orderId, account_number, accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_cancelOrder_+3A_orderid">orderId</code></td>
<td>
<p>A valid Schwab Order ID</p>
</td></tr>
<tr><td><code id="schwab_cancelOrder_+3A_account_number">account_number</code></td>
<td>
<p>A Schwab account number associated with the Access Token</p>
</td></tr>
<tr><td><code id="schwab_cancelOrder_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>order API URL. Message confirming cancellation
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 

schwab_cancelOrder(orderId = 123456789, account_number = 987654321)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_marketHours'>Get Market Hours</h2><span id='topic+schwab_marketHours'></span>

<h3>Description</h3>

<p>Returns a list output for current day and specified market that details the
trading window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_marketHours(
  marketType = c("EQUITY", "OPTION", "BOND", "FUTURE", "FOREX"),
  date = Sys.Date(),
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_marketHours_+3A_markettype">marketType</code></td>
<td>
<p>The asset class to pull:
'EQUITY','OPTION','BOND','FUTURE','FOREX'. Default is EQUITY</p>
</td></tr>
<tr><td><code id="schwab_marketHours_+3A_date">date</code></td>
<td>
<p>Current or future date to check hours</p>
</td></tr>
<tr><td><code id="schwab_marketHours_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List output of times and if the current date is a trading day
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Access Token must be set using schwab_auth3_accessToken
# Market hours for the current date
schwab_marketHours()
schwab_marketHours('2020-06-24', 'OPTION')


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_optionChain'>Get Options Chain</h2><span id='topic+schwab_optionChain'></span>

<h3>Description</h3>

<p>Search an Option Chain for a specific ticker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_optionChain(
  ticker,
  strikes = 10,
  inclQuote = TRUE,
  startDate = Sys.Date() + 1,
  endDate = Sys.Date() + 360,
  contractType = c("ALL", "CALL", "PUT"),
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_optionChain_+3A_ticker">ticker</code></td>
<td>
<p>underlying ticker for the options chain</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_strikes">strikes</code></td>
<td>
<p>the number of strikes above and below the current strike</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_inclquote">inclQuote</code></td>
<td>
<p>set TRUE to include pricing details (will be delayed if
account is set for delayed quotes)</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_startdate">startDate</code></td>
<td>
<p>the start date for expiration (should be greater than or
equal to today). Format: yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_enddate">endDate</code></td>
<td>
<p>the end date for expiration (should be greater than or equal
to today). Format: yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_contracttype">contractType</code></td>
<td>
<p>can be 'ALL', 'CALL', or 'PUT'</p>
</td></tr>
<tr><td><code id="schwab_optionChain_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Return a list containing two data frames. The first is the underlying data
for the symbol. The second item in the list is a data frame that contains the
options chain for the specified ticker.
</p>


<h3>Value</h3>

<p>a list of 2 data frames - underlying and options chain
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Pull all option contracts expiring over the next 6 months
# with 5 strikes above and below the at-the-money price
schwab_optionChain(ticker = 'SPY',
             strikes = 5,
             endDate = Sys.Date() + 180)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_optionExpiration'>Get Options Expiration Chain</h2><span id='topic+schwab_optionExpiration'></span>

<h3>Description</h3>

<p>Search an Option Chain for a specific ticker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_optionExpiration(ticker, accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_optionExpiration_+3A_ticker">ticker</code></td>
<td>
<p>underlying ticker for the options chain</p>
</td></tr>
<tr><td><code id="schwab_optionExpiration_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Return a list containing two data frames. The first is the underlying data
for the symbol. The second item in the list is a data frame that contains the
options chain for the specified ticker.
</p>


<h3>Value</h3>

<p>a list of 2 data frames - underlying and options chain
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Pull all option contracts expiring over the next 6 months
# with 5 strikes above and below the at-the-money price
schwab_optionChain(ticker = 'SPY',
             strikes = 5,
             endDate = Sys.Date() + 180)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_orderDetail'>Get Details for a Single Order</h2><span id='topic+schwab_orderDetail'></span>

<h3>Description</h3>

<p>Pass an order ID and Account number to get details such as status, quantity,
ticker, executions (if applicable), account, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_orderDetail(orderId, account_number, accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_orderDetail_+3A_orderid">orderId</code></td>
<td>
<p>A valid Schwab Order ID</p>
</td></tr>
<tr><td><code id="schwab_orderDetail_+3A_account_number">account_number</code></td>
<td>
<p>A Schwab account number associated with the Access Token</p>
</td></tr>
<tr><td><code id="schwab_orderDetail_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of order details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessTokenList = schwab_auth3_accessToken('AppKey', 'AppSecret', refreshToken)

# Get order details for a single order
# Passing Access Token is optional once it's been set
schwab_orderDetail(orderId = 123456789, account_number = 987654321)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_orderSearch'>Search for orders by date</h2><span id='topic+schwab_orderSearch'></span>

<h3>Description</h3>

<p>Search for orders associated with a Schwab account over the previous 60 days. The
result is a list of three objects:
</p>

<ol>
<li><p> jsonlite formatted extract of all orders
</p>
</li>
<li><p> all entered orders with details
</p>
</li>
<li><p> a data frame of all executed orders with the executions </p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>schwab_orderSearch(
  account_number,
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  maxResults = 50,
  orderStatus = "",
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_orderSearch_+3A_account_number">account_number</code></td>
<td>
<p>A Schwab account number associated with the Access Token</p>
</td></tr>
<tr><td><code id="schwab_orderSearch_+3A_startdate">startDate</code></td>
<td>
<p>Orders from a certain date with. Format yyyy-mm-dd.</p>
</td></tr>
<tr><td><code id="schwab_orderSearch_+3A_enddate">endDate</code></td>
<td>
<p>Filter orders that occurred before a certain date. Format
yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="schwab_orderSearch_+3A_maxresults">maxResults</code></td>
<td>
<p>the max results to return in the query</p>
</td></tr>
<tr><td><code id="schwab_orderSearch_+3A_orderstatus">orderStatus</code></td>
<td>
<p>search by order status (ACCEPTED, FILLED, EXPIRED,
CANCELED, REJECTED, etc). This can be left blank for all orders. See
documentation for full list</p>
</td></tr>
<tr><td><code id="schwab_orderSearch_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of three objects: a jsonlite formatted extract of all orders,
all entered orders with details, a data frame of all executed orders with
the executions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get all orders run over the last 50 days (up to 500)
schwab_orderSearch(account_number = account_number,
            startDate = Sys.Date()-50,
            maxResults = 500, orderStatus = '')


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_placeOrder'>Place Order for a specific account</h2><span id='topic+schwab_placeOrder'></span>

<h3>Description</h3>

<p>Place trades through the SchwabAPI using a range of parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_placeOrder(
  account_number,
  ticker,
  quantity,
  instruction,
  orderType = "MARKET",
  limitPrice = NULL,
  stopPrice = NULL,
  assetType = c("EQUITY", "OPTION"),
  session = "NORMAL",
  duration = "DAY",
  stopPriceBasis = NULL,
  stopPriceType = NULL,
  stopPriceOffset = NULL,
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_placeOrder_+3A_account_number">account_number</code></td>
<td>
<p>A Schwab account number associated with the Access Token</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_ticker">ticker</code></td>
<td>
<p>a valid Equity/ETF or option. If needed, use schwab_symbolDetail to
confirm. This should be a ticker/symbol, not a CUSIP</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_quantity">quantity</code></td>
<td>
<p>the number of shares to be bought or sold. Must be an
integer.</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_instruction">instruction</code></td>
<td>
<p>Equity instructions include 'BUY', 'SELL', 'BUY_TO_COVER',
or 'SELL_SHORT'. Options instructions include 'BUY_TO_OPEN',
'BUY_TO_CLOSE', 'SELL_TO_OPEN', or 'SELL_TO_CLOSE'</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_ordertype">orderType</code></td>
<td>
<p>MARKET, LIMIT (requiring limitPrice), STOP (requiring
stopPrice), STOP_LIMIT, TRAILING_STOP (requiring stopPriceBasis,
stopPriceType, stopPriceOffset)</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_limitprice">limitPrice</code></td>
<td>
<p>the limit price for a LIMIT or STOP_LIMIT order</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_stopprice">stopPrice</code></td>
<td>
<p>the stop price for a STOP or STOP_LIMIT order</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_assettype">assetType</code></td>
<td>
<p>EQUITY or OPTION. No other asset types are available at this
time. EQUITY is the default.</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_session">session</code></td>
<td>
<p>NORMAL for normal market hours, AM or PM for extended market
hours</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_duration">duration</code></td>
<td>
<p>how long will the trade stay open without a fill: DAY,
GOOD_TILL_CANCEL, FILL_OR_KILL</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_stoppricebasis">stopPriceBasis</code></td>
<td>
<p>LAST, BID, or ASK which is the basis for a STOP,
STOP_LIMIT, or TRAILING_STOP</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_stoppricetype">stopPriceType</code></td>
<td>
<p>the link to the stopPriceBasis. VALUE for dollar
difference or PERCENT for a percentage offset from the price basis</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_stoppriceoffset">stopPriceOffset</code></td>
<td>
<p>an integer that indicates the offset used for the
stopPriceType, 10 and PERCENT is a 10 percent offset from the current price
basis. 5 and VALUE is a 5 dollar offset from the current price basis</p>
</td></tr>
<tr><td><code id="schwab_placeOrder_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A valid account and access token must be passed. An access token will be
passed by default when <code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code> is executed
successfully and the token has not expired, which occurs after 30 minutes.
Only simple orders using  equities and options can be traded at
through this function at this time. This function is built
to allow a single trade submission. More complex trades can be executed
through the API, but a custom function or submission will need to be
constructed. To build more custom trading strategies, reference the
'Schwab API' examples. A full list of the input parameters and details can be
found in the documentation. TEST ALL ORDERS FIRST WITH SMALL DOLLAR AMOUNTS!!!
</p>
<p>A minimum of four parameters are required for submission: ticker, instruction,
quantity, and account number associated with the Access Token. The following
parameters default: session - NORMAL, duration - DAY, asset type - EQUITY,
and order type - MARKET
</p>


<h3>Value</h3>

<p>the trade id, account id, and other order details
</p>


<h3>Warning</h3>

<p>TRADES THAT ARE SUCCESSFULLY ENTERED WILL BE SUBMITTED
IMMEDIATELY THERE IS NO REVIEW PROCESS. THIS FUNCTION HAS HUNDREDS OF
POTENTIAL COMBINATIONS AND ONLY A HANDFUL HAVE BEEN TESTED. IT IS STRONGLY
RECOMMENDED TO TEST THE DESIRED ORDER ON A VERY SMALL QUANTITY WITH LITTLE
MONEY AT STAKE. ANOTHER OPTION IS TO USE LIMIT ORDERS FAR FROM THE CURRENT
PRICE. TD AMERITRADE HAS THEIR OWN ERROR HANDLING BUT IF A SUCCESSFUL
COMBINATION IS ENTERED IT COULD BE EXECUTED IMMEDIATELY. DOUBLE CHECK ALL
ENTRIES BEFORE SUBMITTING.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessTokenList = schwab_auth3_accessToken('AppKey', 'AppSecret', refreshToken)

# Set Account Number
account_number = 1234567890

# Standard market buy order
# Every order must have at least these 4 paramters
schwab_placeOrder(account_number = account_number,
                  ticker = 'AAPL',
                  quantity = 1,
                  instruction = 'buy')

# Stop limit order - good until canceled
schwab_placeOrder(account_number = account_number,
            ticker = 'AAPL',
            quantity = 1,
            instruction = 'sell',
            duration = 'good_till_cancel',
            orderType = 'stop_limit',
            limitPrice = 98,
            stopPrice = 100)

# Trailing Stop Order
schwab_placeOrder(account_number = account_number,
            ticker='AAPL',
            quantity = 1,
            instruction='sell',
            orderType = 'trailing_stop',
            stopPriceBasis = 'BID',
            stopPriceType = 'percent',
            stopPriceOffset = 10)

# Option Order with a limit price


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_priceHistory'>Get price history for a multiple securities</h2><span id='topic+schwab_priceHistory'></span>

<h3>Description</h3>

<p>Open, Close, High, Low, and Volume for one or more securities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_priceHistory(
  tickers = c("AAPL", "MSFT"),
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  freq = c("daily", "1min", "5min", "10min", "15min", "30min"),
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_priceHistory_+3A_tickers">tickers</code></td>
<td>
<p>a vector of tickers - no more than 15 will be pulled. for
bigger requests, split up the request or use the 'Tiingo API', 'FMP Cloud API',
or other free data providers</p>
</td></tr>
<tr><td><code id="schwab_priceHistory_+3A_startdate">startDate</code></td>
<td>
<p>the Starting point of the data</p>
</td></tr>
<tr><td><code id="schwab_priceHistory_+3A_enddate">endDate</code></td>
<td>
<p>the Ending point of the data</p>
</td></tr>
<tr><td><code id="schwab_priceHistory_+3A_freq">freq</code></td>
<td>
<p>the frequency of the interval. Can be daily, 1min, 5min, 10min,
15min, or 30min</p>
</td></tr>
<tr><td><code id="schwab_priceHistory_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pulls price history for a list of security based on the parameters that
include a date range and frequency of the interval. Depending on the
frequency interval, data can only be pulled back to a certain date. For
example, at a one minute interval, data can only be pulled for 30-35 days.
Prices are adjusted for splits but not dividends.
</p>
<p>PLEASE NOTE: Large data requests will take time to pull back because of the
looping nature. The 'Schwab API' does not allow bulk ticker request, so this
is simply running each ticker individually. For faster and better historical
data pulls, try the 'Tiingo API' or 'FMP Cloud API'
</p>


<h3>Value</h3>

<p>a tibble of historical price data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Set the access token and a provide a vector of one or more tickers
refreshToken = readRDS('/secure/location/')
accessToken = schwab_auth_accessToken(refreshToken, 'consumerKey')
tickHist5min = schwab_priceHistory(c('TSLA','AAPL'), freq='5min')

# The default is daily. Access token is optional once it's been set
tickHistDay = schwab_priceHistory(c('SPY','IWM'), startDate = '1990-01-01')


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_priceQuote'>Get Quotes for specified tickers in List form</h2><span id='topic+schwab_priceQuote'></span>

<h3>Description</h3>

<p>Enter tickers for real time or delayed quotes returned as a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_priceQuote(
  tickers = c("AAPL", "MSFT"),
  output = "df",
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_priceQuote_+3A_tickers">tickers</code></td>
<td>
<p>One or more tickers</p>
</td></tr>
<tr><td><code id="schwab_priceQuote_+3A_output">output</code></td>
<td>
<p>indication on whether the data should be returned as a list or
df. The default is 'df' for data frame, anything else would be a list.</p>
</td></tr>
<tr><td><code id="schwab_priceQuote_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Quotes may be delayed depending on agreement with Schwab. If the
account is set up for real-time quotes then this will return real-time.
Otherwise the quotes will be delayed.
</p>


<h3>Value</h3>

<p>a list or data frame with quote details for each valid ticker
submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessToken = schwab_auth_accessToken('consumerKey', refreshToken)

# Pass one or more tickers as a vector
# accessToken is optional once it is set
quoteSPY = schwab_priceQuote('SPY')
quoteList = schwab_priceQuote(c('GOOG','TSLA'), output = 'list', accessToken)


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_symbolDetail'>Get ticker details</h2><span id='topic+schwab_symbolDetail'></span>

<h3>Description</h3>

<p>Get identifiers and fundamental data for a specific ticker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_symbolDetail(tickers = c("AAPL", "SPY"), accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_symbolDetail_+3A_tickers">tickers</code></td>
<td>
<p>valid ticker(s) or symbol(s)</p>
</td></tr>
<tr><td><code id="schwab_symbolDetail_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of ticker details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Details for Apple
schwab_symbolDetail('AAPL')


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_transactSearch'>Search for all Transaction types</h2><span id='topic+schwab_transactSearch'></span>

<h3>Description</h3>

<p>Can pull trades as well as transfers, dividend reinvestment, interest, etc.
Any activity associated with the account.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_transactSearch(
  account_number,
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  transType = "TRADE",
  accessTokenList = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_transactSearch_+3A_account_number">account_number</code></td>
<td>
<p>A Schwab account number associated with the Access Token</p>
</td></tr>
<tr><td><code id="schwab_transactSearch_+3A_startdate">startDate</code></td>
<td>
<p>Transactions after a certain date. Will not pull back
transactions older than 1 year. format yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="schwab_transactSearch_+3A_enddate">endDate</code></td>
<td>
<p>Filter transactions that occurred before a certain date.
format yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="schwab_transactSearch_+3A_transtype">transType</code></td>
<td>
<p>Filter for a specific Transaction type. No entry will return
all types. For example: TRADE, CASH_IN_OR_CASH_OUT, CHECKING, DIVIDEND,
INTEREST, OTHER</p>
</td></tr>
<tr><td><code id="schwab_transactSearch_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a jsonlite data frame of transactions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Access Token must be set using schwab_auth3_accessToken
# Transactions for the last 5 days
schwab_transactSearch(account_number = 987654321,
                startDate = Sys.Date()-days(5))


## End(Not run)
</code></pre>

<hr>
<h2 id='schwab_userPreferences'>Get User Preferences</h2><span id='topic+schwab_userPreferences'></span>

<h3>Description</h3>

<p>Returns a dataframe output for account preferences associated with user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schwab_userPreferences(accessTokenList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="schwab_userPreferences_+3A_accesstokenlist">accessTokenList</code></td>
<td>
<p>A valid Access Token must be set using the output from
<code><a href="#topic+schwab_auth3_accessToken">schwab_auth3_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe output of account details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Access Token must be set using schwab_auth3_accessToken
# Market hours for the current date
schwab_userPreferences()


## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
