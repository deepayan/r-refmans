<!DOCTYPE html><html lang="en"><head><title>Help for package ggh4x</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggh4x}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ggh4x-package'><p>ggh4x: Hacks for 'ggplot2'</p></a></li>
<li><a href='#at_panel'><p>Constrain layer to panels</p></a></li>
<li><a href='#center_limits'><p>Center limits</p></a></li>
<li><a href='#coord_axes_inside'><p>Cartesian coordinates with interior axes</p></a></li>
<li><a href='#distribute_args'><p>Element list constructors</p></a></li>
<li><a href='#element_part_rect'><p>Partial rectangle theme element</p></a></li>
<li><a href='#facet_grid2'><p>Extended grid facets</p></a></li>
<li><a href='#facet_manual'><p>Manual layout for panels</p></a></li>
<li><a href='#facet_nested'><p>Layout panels in a grid with nested strips</p></a></li>
<li><a href='#facet_nested_wrap'><p>Ribbon of panels with nested strips.</p></a></li>
<li><a href='#facet_wrap2'><p>Extended wrapped facets</p></a></li>
<li><a href='#facetted_pos_scales'><p>Set individual scales in facets</p></a></li>
<li><a href='#force_panelsizes'><p>Force a facetted plot to have specified panel sizes</p></a></li>
<li><a href='#geom_box'><p>Flexible rectangles</p></a></li>
<li><a href='#geom_outline_point'><p>Points with outline</p></a></li>
<li><a href='#geom_pointpath'><p>Point Paths</p></a></li>
<li><a href='#geom_polygonraster'><p>Polygon parameterisation for rasters</p></a></li>
<li><a href='#geom_rectmargin'><p>Rectangular rugs in the margins</p></a></li>
<li><a href='#geom_text_aimed'><p>Aimed text</p></a></li>
<li><a href='#ggh4x_extensions'><p>ggh4x extensions to ggplot2</p></a></li>
<li><a href='#ggsubset'><p>Passing a subset of data to ggplot2 layers.</p></a></li>
<li><a href='#guide_axis_logticks'><p>Axis guide with ticks for logarithmic breaks</p></a></li>
<li><a href='#guide_axis_manual'><p>Manual axis</p></a></li>
<li><a href='#guide_axis_minor'><p>Axis guide with ticks for minor breaks</p></a></li>
<li><a href='#guide_axis_nested'><p>Nested axis guide</p></a></li>
<li><a href='#guide_axis_scalebar'><p>Scale bar axis guide</p></a></li>
<li><a href='#guide_axis_truncated'><p>Axis guide with truncated line</p></a></li>
<li><a href='#guide_dendro'><p>Dendrogram guide</p></a></li>
<li><a href='#guide_stringlegend'><p>String legend</p></a></li>
<li><a href='#help_secondary'><p>Secondary axis helper</p></a></li>
<li><a href='#position_disjoint_ranges'><p>Segregating overlapping ranges</p></a></li>
<li><a href='#position_lineartrans'><p>Linearly transform coordinates</p></a></li>
<li><a href='#scale_dendrogram'><p>Dendrogram position scales</p></a></li>
<li><a href='#scale_facet'><p>Position scales for individual panels in facets</p></a></li>
<li><a href='#scale_fill_multi'><p>Multiple gradient colour scales</p></a></li>
<li><a href='#scale_listed'><p>Add a list of scales for non-standard aesthetics</p></a></li>
<li><a href='#scale_x_manual'><p>Manual position scales</p></a></li>
<li><a href='#sep_discrete'><p>Separator for discrete grouped labels</p></a></li>
<li><a href='#stat_difference'><p>Difference ribbon</p></a></li>
<li><a href='#stat_funxy'><p>Apply function to position coordinates</p></a></li>
<li><a href='#stat_rle'><p>Run length encoding</p></a></li>
<li><a href='#stat_rollingkernel'><p>Rolling Kernel</p></a></li>
<li><a href='#stat_theodensity'><p>Fitted theoretical density</p></a></li>
<li><a href='#strip_nested'><p>Nested strips</p></a></li>
<li><a href='#strip_split'><p>Split strips</p></a></li>
<li><a href='#strip_tag'><p>Strips as tags</p></a></li>
<li><a href='#strip_themed'><p>Strip with themed boxes and texts</p></a></li>
<li><a href='#strip_vanilla'><p>Default strips</p></a></li>
<li><a href='#theme_extensions'><p>Theme extensions</p></a></li>
<li><a href='#weave_factors'><p>Bind together factors</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Hacks for 'ggplot2'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A 'ggplot2' extension that does a variety of little
    helpful things.  The package extends 'ggplot2' facets through
    customisation, by setting individual scales per panel, resizing panels
    and providing nested facets.  Also allows multiple colour and fill
    scales per plot. Also hosts a smaller collection of stats, geoms and axis 
    guides.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/teunbrand/ggh4x">https://github.com/teunbrand/ggh4x</a>,
<a href="https://teunbrand.github.io/ggh4x/">https://teunbrand.github.io/ggh4x/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/teunbrand/ggh4x/issues">https://github.com/teunbrand/ggh4x/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>ggplot2 (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grid, gtable, scales, vctrs (&ge; 0.5.0), rlang (&ge; 1.1.0),
lifecycle, stats, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, fitdistrplus, ggdendro, vdiffr, knitr, MASS, rmarkdown,
testthat (&ge; 3.0.0), utils</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Collate:</td>
<td>'at_panel.R' 'borrowed_ggplot2.R' 'conveniences.R'
'ggh4x_extensions.R' 'coord_axes_inside.R'
'element_part_rect.R' 'facet_grid2.R' 'facet_wrap2.R'
'facet_manual.R' 'facet_nested.R' 'facet_nested_wrap.R'
'facetted_pos_scales.R' 'force_panelsize.R' 'geom_box.R'
'geom_outline_point.R' 'geom_pointpath.R'
'geom_polygonraster.R' 'geom_rectrug.R' 'geom_text_aimed.R'
'ggh4x-package.R' 'guide_axis_logticks.R' 'guide_axis_manual.R'
'guide_axis_minor.R' 'guide_axis_nested.R'
'guide_axis_scalebar.R' 'guide_axis_truncated.R'
'guide_axis_utils.R' 'guide_dendrogram.R'
'guide_stringlegend.R' 'help_secondary.R'
'position_disjoint_ranges.R' 'position_lineartrans.R'
'scale_dendrogram.R' 'scale_facet.R' 'scale_listed.R'
'scale_manual.R' 'scale_multi.R' 'stat_difference.R'
'stat_funxy.R' 'stat_rle.R' 'stat_roll.R' 'stat_theodensity.R'
'strip_vanilla.R' 'strip_themed.R' 'strip_nested.R'
'strip_split.R' 'strip_tag.R' 'themes.R' 'utils.R'
'utils_grid.R' 'utils_gtable.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-15 16:16:54 UTC; Teun</td>
</tr>
<tr>
<td>Author:</td>
<td>Teun van den Brand
    <a href="https://orcid.org/0000-0002-9335-7468"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Teun van den Brand &lt;tahvdbrand@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-15 17:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ggh4x-package'>ggh4x: Hacks for 'ggplot2'</h2><span id='topic+ggh4x'></span><span id='topic+ggh4x-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A 'ggplot2' extension that does a variety of little helpful things. The package extends 'ggplot2' facets through customisation, by setting individual scales per panel, resizing panels and providing nested facets. Also allows multiple colour and fill scales per plot. Also hosts a smaller collection of stats, geoms and axis guides.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Teun van den Brand <a href="mailto:tahvdbrand@gmail.com">tahvdbrand@gmail.com</a> (<a href="https://orcid.org/0000-0002-9335-7468">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/teunbrand/ggh4x">https://github.com/teunbrand/ggh4x</a>
</p>
</li>
<li> <p><a href="https://teunbrand.github.io/ggh4x/">https://teunbrand.github.io/ggh4x/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/teunbrand/ggh4x/issues">https://github.com/teunbrand/ggh4x/issues</a>
</p>
</li></ul>


<hr>
<h2 id='at_panel'>Constrain layer to panels</h2><span id='topic+at_panel'></span>

<h3>Description</h3>

<p>This function limits the panels in which a layer is displayed. It can be
used to make panel-specific annotations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>at_panel(layer, expr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="at_panel_+3A_layer">layer</code></td>
<td>
<p>A <code>layer</code> as returned by <code><a href="ggplot2.html#topic+layer">layer()</a></code>.</p>
</td></tr>
<tr><td><code id="at_panel_+3A_expr">expr</code></td>
<td>
<p>An <code>expression</code> that, when evaluated in the facet's layout
data.frame, yields a <code>logical</code> vector parallel to the rows.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>expr</code> argument's expression will be evaluated in the context of the
plot's layout. This is an internal <code>data.frame</code> structure that isn't
ordinarily exposed to users, so it will require some extra knowledge. For
most facets, the layout describes the panels with one panel per row. It
typically has <code>COL</code>, <code>ROW</code> and <code>PANEL</code> columns that keep track of where a
panel goes in a grid-layout of cells. In addition, the layout contains the
facetting variables provided to the <code>facets</code> or <code>rows</code> and <code>cols</code> arguments
of the facets. For example, if we have a plot facetted on the <code>var</code> variable
with the levels <code>A</code>, <code>B</code> and <code>C</code>, as 1 row and 3 columns, we might target
the second <code>B</code> panel iwth any of these expressions: <code>var == "B"</code>,
<code>PANEL == 2</code> or <code>COL == 2</code>. We can inspect the layout structure by using
<code>ggplot_build(p)$layout$layout</code>, wherein <code>p</code> is a plot.
</p>


<h3>Value</h3>

<p>A modified <code>layer</code> which will only show in some panels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  facet_grid(year ~ drv)

anno &lt;- annotate("text", x = 3, y = 40, label = "My text")

# Target specific panels
p + at_panel(anno, PANEL %in% c(2, 4))

# Target a variable
p + at_panel(anno, drv == "f")

# Or combine variable with position
p + at_panel(anno, drv == "f" &amp; ROW == 2)
</code></pre>

<hr>
<h2 id='center_limits'>Center limits</h2><span id='topic+center_limits'></span>

<h3>Description</h3>

<p>This a function factory that allows the centering of scales around a certain
value while still including all values. Convenient for centering log2 fold
change limits around zero.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>center_limits(around = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="center_limits_+3A_around">around</code></td>
<td>
<p>A <code>numeric</code> of length 1 indicating around which value to
center the limits.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>function</code> that takes limits and returns expanded limits
centered at the <code>around</code> argument.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>center_limits(5)(c(3,8))

g &lt;- ggplot(iris,
            aes(Sepal.Width, Sepal.Length,
                colour = log2(Petal.Width / Petal.Length))) +
  geom_point() +
  scale_colour_gradient2(limits = center_limits())
</code></pre>

<hr>
<h2 id='coord_axes_inside'>Cartesian coordinates with interior axes</h2><span id='topic+coord_axes_inside'></span>

<h3>Description</h3>

<p>This coordinate system places the plot axes at interior positions. Other
than this, it behaves like <code><a href="ggplot2.html#topic+coord_cartesian">coord_cartesian()</a></code> or
<code><a href="ggplot2.html#topic+coord_fixed">coord_fixed()</a></code> (the latter if the <code>ratio</code> argument
is set).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coord_axes_inside(
  xlim = NULL,
  ylim = NULL,
  xintercept = 0,
  yintercept = 0,
  labels_inside = FALSE,
  ratio = NULL,
  expand = TRUE,
  default = FALSE,
  clip = "on"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coord_axes_inside_+3A_xlim">xlim</code>, <code id="coord_axes_inside_+3A_ylim">ylim</code></td>
<td>
<p>Limits for the x and y axes.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_xintercept">xintercept</code>, <code id="coord_axes_inside_+3A_yintercept">yintercept</code></td>
<td>
<p>A <code>numeric(1)</code> for the positions where the
orthogonal axes should be placed. If these are outside the bounds of the
limits, the axes are placed to the nearest extreme.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_labels_inside">labels_inside</code></td>
<td>
<p>One of <code>"x"</code>, <code>"y"</code>, <code>"both"</code> or <code>"none"</code> specifying
the axes where labels should be placed inside the panel along the axes.
<code>TRUE</code> is translated as <code>"both"</code> and <code>FALSE</code> (default) is translated as
<code>"none"</code>.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_ratio">ratio</code></td>
<td>
<p>Either <code>NULL</code>, or a <code>numeric(1)</code> for a fixed aspect ratio,
expressed as <code>y / x</code>.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_expand">expand</code></td>
<td>
<p>If <code>TRUE</code>, the default, adds a small expansion factor to
the limits to ensure that data and axes don't overlap. If <code>FALSE</code>,
limits are taken exactly from the data or <code>xlim</code>/<code>ylim</code>.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_default">default</code></td>
<td>
<p>Is this the default coordinate system? If <code>FALSE</code> (the default),
then replacing this coordinate system with another one creates a message alerting
the user that the coordinate system is being replaced. If <code>TRUE</code>, that warning
is suppressed.</p>
</td></tr>
<tr><td><code id="coord_axes_inside_+3A_clip">clip</code></td>
<td>
<p>Should drawing be clipped to the extent of the plot panel? A
setting of <code>"on"</code> (the default) means yes, and a setting of <code>"off"</code>
means no. In most cases, the default of <code>"on"</code> should not be changed,
as setting <code>clip = "off"</code> can cause unexpected results. It allows
drawing of data points anywhere on the plot, including in the plot margins. If
limits are set via <code>xlim</code> and <code>ylim</code> and some data points fall outside those
limits, then those data points may show up in places such as the axes, the
legend, the plot title, or the plot margins.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>CoordAxesInside</code> object, which can be added to a plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(scale(displ), scale(hwy))) +
  geom_point() +
  theme(axis.line = element_line())

# By default, axis text is still placed outside the panel
p + coord_axes_inside()

# However, this can simply be changed
p + coord_axes_inside(labels_inside = TRUE)

# The place where the axes meet can be changed
p + coord_axes_inside(xintercept = 1, yintercept = -1)

# Axes snap to the nearest limit when out-of-bounds
p + coord_axes_inside(xintercept = -5, yintercept = Inf, clip = "off")

# Can be combined with other non-default axes
p + guides(x = guide_axis(minor.ticks = TRUE)) +
  coord_axes_inside()
</code></pre>

<hr>
<h2 id='distribute_args'>Element list constructors</h2><span id='topic+distribute_args'></span><span id='topic+elem_list_text'></span><span id='topic+elem_list_rect'></span>

<h3>Description</h3>

<p>These functions take a vector of arguments and pass on the
i<sup>th</sup> item of the vector to an
i<sup>th</sup> call of a function. The
<code>elem_list_text</code> and <code>elem_list_rect</code> are convenience functions for
constructing lists of <code><a href="ggplot2.html#topic+element">element_text()</a></code> and
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> theme elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distribute_args(..., .fun = element_text, .cull = TRUE)

elem_list_text(...)

elem_list_rect(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="distribute_args_+3A_...">...</code></td>
<td>
<p>Vectorised arguments to pass on to functions.</p>
</td></tr>
<tr><td><code id="distribute_args_+3A_.fun">.fun</code></td>
<td>
<p>A function to distribute arguments to.</p>
</td></tr>
<tr><td><code id="distribute_args_+3A_.cull">.cull</code></td>
<td>
<p>A <code>logical(1)</code> determining if unknown arguments are being
culled.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>NA</code>s and <code>NULL</code>s will be silently dropped. If you want to pass on a
transparent <code>fill</code> or <code>colour</code> argument, you should use the more verbose
character <code>"transparent"</code> instead. However, you <em>can</em> use a <code>NA</code> to
indicate that it's argument should not be passed to a function in that
position.
</p>


<h3>Value</h3>

<p>A <code>list</code> of outputs from <code>fun</code>.
</p>


<h3>Note</h3>

<p>Whereas the <code>distribute_args</code> function might seem amenable for
off-label uses elsewhere (besides constructing lists of theme elements), it
is not intended as such. For example, because valid arguments will be
deduced from the formals of a function, using certain functions can be
troublesome. For example, the <code>distribute_args</code> function does not properly
recognise the utility of a <code>...</code> argument in a function that it is supposed
to distribute arguments to. This can be a problem for object-oriented
functions: if the methods contain more arguments than the generic itself,
these extra arguments will be silently dropped.
</p>


<h3>See Also</h3>

<p>The <code><a href="ggplot2.html#topic+element">element_text()</a></code> and
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> theme elements for a
description of their arguments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Providing arguments for `element_rect()`
elem_list_rect(
  # The first element_rect will have linetype 1, the second gets 3
  linetype = c(1, 3),
  # If an argument doesn't exist, it will be silently dropped
  nonsense_argument = c("I", "will", "be", "filtered", "out")
)

# Providing arguments for `element_text()`
elem_list_text(
  # `NA`s will be skipped
  family = c("mono", NA, "sans"),
  # Providing a list of more complex arguments. `NULL` will be skipped too.
  margin = list(NULL, margin(t = 5))
)

# Providing arguments to other functions
distribute_args(
  lineend = c("round", "butt", "square"),
  # If you want to pass a vector instead of a scalar, you can use a list
  colour = list(c("blue", "red"), "green"),
  .fun = element_line
)
</code></pre>

<hr>
<h2 id='element_part_rect'>Partial rectangle theme element</h2><span id='topic+element_part_rect'></span>

<h3>Description</h3>

<p>The <code>element_part_rect()</code> function draws sides of a rectangle as theme
elements. It can substitute <code>element_rect()</code> theme elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>element_part_rect(
  side = "tlbr",
  fill = NULL,
  colour = NULL,
  linewidth = NULL,
  linetype = NULL,
  color = NULL,
  inherit.blank = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="element_part_rect_+3A_side">side</code></td>
<td>
<p>A <code>character</code> of length one containing any of <code>"t"</code>,
<code>"l"</code>, <code>"b"</code>, <code>"r"</code>. If these letters are present it will
draw an edge at the top (t), left (l), bottom (b) or right (r)
respectively. Including all or none of these letters will default to normal
<code>element_rect()</code>.</p>
</td></tr>
<tr><td><code id="element_part_rect_+3A_fill">fill</code></td>
<td>
<p>Fill colour.</p>
</td></tr>
<tr><td><code id="element_part_rect_+3A_colour">colour</code>, <code id="element_part_rect_+3A_color">color</code></td>
<td>
<p>Line/border colour. Color is an alias for colour.</p>
</td></tr>
<tr><td><code id="element_part_rect_+3A_linewidth">linewidth</code></td>
<td>
<p>Line/border size in mm.</p>
</td></tr>
<tr><td><code id="element_part_rect_+3A_linetype">linetype</code></td>
<td>
<p>Line type. An integer (0:8), a name (blank, solid,
dashed, dotted, dotdash, longdash, twodash), or a string with
an even number (up to eight) of hexadecimal digits which give the
lengths in consecutive positions in the string.</p>
</td></tr>
<tr><td><code id="element_part_rect_+3A_inherit.blank">inherit.blank</code></td>
<td>
<p>Should this element inherit the existence of an
<code>element_blank</code> among its parents? If <code>TRUE</code> the existence of
a blank element among its parents will cause this element to be blank as
well. If <code>FALSE</code> any blank parent element will be ignored when
calculating final element state.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of class <code>element_part_rect</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot(iris, aes(Sepal.Width, Sepal.Length)) +
  geom_point() +
  facet_grid(Species ~.) +
  theme(
    strip.background = element_part_rect(side = "tb", colour = "black"),
    panel.background = element_part_rect(side = "l", colour = "black")
  )
</code></pre>

<hr>
<h2 id='facet_grid2'>Extended grid facets</h2><span id='topic+facet_grid2'></span>

<h3>Description</h3>

<p>This function behaves like <a href="ggplot2.html#topic+facet_grid">ggplot2::facet_grid</a> with default arguments, but
has a few extra options. It can draw partial or full axis guides at inner
panels, and position scales can be independent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_grid2(
  rows = NULL,
  cols = NULL,
  scales = "fixed",
  space = "fixed",
  axes = "margins",
  remove_labels = "none",
  independent = "none",
  shrink = TRUE,
  labeller = "label_value",
  as.table = TRUE,
  switch = NULL,
  drop = TRUE,
  margins = FALSE,
  render_empty = TRUE,
  strip = "vanilla"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facet_grid2_+3A_rows">rows</code>, <code id="facet_grid2_+3A_cols">cols</code></td>
<td>
<p>A set of variables or expressions quoted by
<code><a href="ggplot2.html#topic+vars">vars()</a></code> and defining faceting groups on the rows or columns
dimension. The variables can be named (the names are passed to
<code>labeller</code>).
</p>
<p>For compatibility with the classic interface, <code>rows</code> can also be
a formula with the rows (of the tabular display) on the LHS and
the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this
dimension (either row or column).</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_scales">scales</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. Interacts with the <code>independent</code>
argument. One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>Scales are shared across all facets
(default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>x-scales are allowed to vary across rows.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>y-scales are allowed to vary across columns.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Scales can vary across rows and columns.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_grid2_+3A_space">space</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether the size of
panels are proportional to the length of the scales. When the <code>independent</code>
argument allows for free scales in a dimension, the panel sizes cannot be
proportional. Note that the <code>scales</code> argument must be free in the same
dimension as the <code>space</code> argument to have an effect.One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>All panels have the same size (default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>Panel widths are proportional to the x-scales.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>Panel heights are proportional to the y-scales.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Both the widths and heights vary according to
scales.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_grid2_+3A_axes">axes</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:
</p>

<dl>
<dt><code>"margins"</code> or <code>FALSE</code></dt><dd><p>Only draw axes at the outer margins
(default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Draw axes at the outer margins and all inner x-axes too.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Draw axes at the outer margins and all inner y-axes too.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Draw the axes for every panel.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_grid2_+3A_remove_labels">remove_labels</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>Display axis text at all axes (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Display axis text at outer margins and all inner y-axes.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Display axis text at outer margins and all inner x-axes.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Only display axis text at the outer margins.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_grid2_+3A_independent">independent</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
scales can vary within a row or column of panels, like they can be in
<a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap</a>. The <code>scales</code> argument must be free for the same
dimension before they can be set to independent. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>All y-scales should be fixed in a row and all
x-scales are fixed in a column (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>x-scales are allowed to vary within a column.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>y-scales are allowed to vary within a row.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Both x- and y-scales are allowed to vary within
a column or row respectively.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_grid2_+3A_shrink">shrink</code></td>
<td>
<p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_labeller">labeller</code></td>
<td>
<p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &quot;labeller&quot; S3 class
for compatibility with <code><a href="ggplot2.html#topic+labeller">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="ggplot2.html#topic+label_parsed">label_parsed()</a></code> for
formatting facet labels. <code><a href="ggplot2.html#topic+label_value">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_as.table">as.table</code></td>
<td>
<p>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_switch">switch</code></td>
<td>
<p>By default, the labels are displayed on the top and
right of the plot. If <code>"x"</code>, the top labels will be
displayed to the bottom. If <code>"y"</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>"both"</code>.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_drop">drop</code></td>
<td>
<p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_margins">margins</code></td>
<td>
<p>Either a logical value or a character
vector. Margins are additional facets which contain all the data
for each of the possible values of the faceting variables. If
<code>FALSE</code>, no additional facets are included (the
default). If <code>TRUE</code>, margins are included for all faceting
variables. If specified as a character vector, it is the names of
variables for which margins are to be created.</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_render_empty">render_empty</code></td>
<td>
<p>A <code>logical(1)</code>: whether to draw panels without any data
(<code>TRUE</code>, default) or display these as blanks (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="facet_grid2_+3A_strip">strip</code></td>
<td>
<p>A strip specification as one of the following:
</p>

<ul>
<li><p> An object inheriting from <code style="white-space: pre;">&#8288;&lt;Strip&gt;&#8288;</code>, such as an object created with
<code>strip_vanilla()</code>.
</p>
</li>
<li><p> A strip function, i.e. <code>strip_vanilla</code>.
</p>
</li>
<li><p> A string giving such function without the <code>strip_</code>-prefix,
i.e. <code>"vanilla"</code>.
</p>
</li></ul>

<p>An object created by a call to a strip function, such as
<code><a href="#topic+strip_vanilla">strip_vanilla</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Both the <code>independent</code> and <code>space</code> arguments only have an effect
when the <code>scales</code> argument in a dimension is free. However, the
<code>independent</code> and <code>space</code> arguments can <em>not</em> be used to simultaneously set
an independent scale and have the panel size be proportional to that scale.
</p>


<h3>Value</h3>

<p>A <code>Facet</code> ggproto object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>Other facetting functions: 
<code><a href="#topic+facet_manual">facet_manual</a>()</code>,
<code><a href="#topic+facet_nested">facet_nested</a>()</code>,
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap</a>()</code>,
<code><a href="#topic+facet_wrap2">facet_wrap2</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mpg, aes(displ, hwy)) + geom_point()

# Repeat all axes for every facet
p + facet_grid2(cyl ~ drv, axes = "all")

# Repeat only y-axes
p + facet_grid2(cyl ~  drv, axes = "y")

# Repeat axes without x-labels
p + facet_grid2(cyl ~ drv, axes = "all", remove_labels = "x")

# Grid facets with independent axes for every panel
p + facet_grid2(cyl ~ drv, scales = "free", independent = "all")
</code></pre>

<hr>
<h2 id='facet_manual'>Manual layout for panels</h2><span id='topic+facet_manual'></span>

<h3>Description</h3>

<p>In <code>facet_manual()</code> the layout for panels is determined by a custom design.
Inspired by base-R graphics <code><a href="graphics.html#topic+layout">layout()</a></code> function, this
variant of facets offers more freedom in how panels are displayed, but
comes with less guarantees that it looks right.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_manual(
  facets,
  design = NULL,
  widths = NULL,
  heights = NULL,
  respect = FALSE,
  drop = TRUE,
  strip.position = "top",
  scales = "fixed",
  axes = "margins",
  remove_labels = "none",
  labeller = "label_value",
  trim_blank = TRUE,
  strip = "vanilla"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facet_manual_+3A_facets">facets</code></td>
<td>
<p>A set of variables or expressions quoted by <code><a href="ggplot2.html#topic+vars">vars()</a></code>
and defining faceting groups on the rows or columns dimension.
The variables can be named (the names are passed to <code>labeller</code>).
</p>
<p>For compatibility with the classic interface, can also be a
formula or character vector. Use either a one sided formula, <code>~a + b</code>,
or a character vector, <code>c("a", "b")</code>.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_design">design</code></td>
<td>
<p>Specification of panel areas in the layout. Can either be
specified as a <code>character(1)</code> string or as a <code>matrix</code>. See examples.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_widths">widths</code>, <code id="facet_manual_+3A_heights">heights</code></td>
<td>
<p>A <code>numeric</code> or <code>unit</code> vector setting the sizes of
panels. A <code>numeric</code> vector is converted to relative <code>"null"</code> units.
Alternatively, when <code>NULL</code> (default), the sizes are set per instructions of
coord or theme aspect ratio. Note that these widths and heights apply to
the cells where panels can be drawn. In between such cells, room will be
made to fit plot decoration such as paddings, axes and strips.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_respect">respect</code></td>
<td>
<p>A <code>logical(1)</code>. If <code>TRUE</code>, widths and heights specified in
<code>"null"</code> units are proportional. If <code>FALSE</code>, <code>"null"</code> units in the x- and
y-directions can vary independently. Alternatively, when <code>NULL</code>, the
<code>respect</code> parameter takes instructions from the coord or theme.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_drop">drop</code></td>
<td>
<p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_strip.position">strip.position</code></td>
<td>
<p>By default, the labels are displayed on the top of
the plot. Using <code>strip.position</code> it is possible to place the labels on
either of the four sides by setting <code>strip.position = c("top",
  "bottom", "left", "right")</code></p>
</td></tr>
<tr><td><code id="facet_manual_+3A_scales">scales</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>Scales are shared across all facets
(default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>x-scales are allowed to vary.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>y-scales are allowed to vary.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Both scales can vary</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_manual_+3A_axes">axes</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:
</p>

<dl>
<dt><code>"margins"</code> or <code>FALSE</code></dt><dd><p>Only draw axes at the outer margins
(default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Draw axes at the outer margins and all inner x-axes too.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Draw axes at the outer margins and all inner y-axes too.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Draw the axes for every panel.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_manual_+3A_remove_labels">remove_labels</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>Display axis text at all axes (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Display axis text at outer margins and all inner y-axes.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Display axis text at outer margins and all inner x-axes.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Only display axis text at the outer margins.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_manual_+3A_labeller">labeller</code></td>
<td>
<p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &quot;labeller&quot; S3 class
for compatibility with <code><a href="ggplot2.html#topic+labeller">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="ggplot2.html#topic+label_parsed">label_parsed()</a></code> for
formatting facet labels. <code><a href="ggplot2.html#topic+label_value">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_trim_blank">trim_blank</code></td>
<td>
<p>A <code>logical(1)</code>. When <code>TRUE</code> (default), the design will
be trimmed to remove empty rows and columns.</p>
</td></tr>
<tr><td><code id="facet_manual_+3A_strip">strip</code></td>
<td>
<p>A strip specification as one of the following:
</p>

<ul>
<li><p> An object inheriting from <code style="white-space: pre;">&#8288;&lt;Strip&gt;&#8288;</code>, such as an object created with
<code>strip_vanilla()</code>.
</p>
</li>
<li><p> A strip function, i.e. <code>strip_vanilla</code>.
</p>
</li>
<li><p> A string giving such function without the <code>strip_</code>-prefix,
i.e. <code>"vanilla"</code>.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Facet</code> ggproto object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>Other facetting functions: 
<code><a href="#topic+facet_grid2">facet_grid2</a>()</code>,
<code><a href="#topic+facet_nested">facet_nested</a>()</code>,
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap</a>()</code>,
<code><a href="#topic+facet_wrap2">facet_wrap2</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point()

# The `design` argument can be a character string.
# New rows are indicated by newline symbol (`\n`), which are added
# automatically for multi-line strings.
# The `#`-symbol indicates empty cells.
design &lt;- "
 A##
 AB#
 #BC
 ##C
"
p + facet_manual(~ cyl, design)

# Alternatively, the `design` argument can be a matrix.
# Using `NA`s will leave the cell empty.
design &lt;- matrix(c(1,2,3,3), 2, 2, byrow = TRUE)
p + facet_manual(~ cyl, design)

# The sizes of columns and rows can be adjusted with the `widths` and
# `heights`parameters respectively.
p + facet_manual(
  ~ cyl, t(design),
  widths = c(2, 1), heights = c(2, 1), respect = TRUE
)
</code></pre>

<hr>
<h2 id='facet_nested'>Layout panels in a grid with nested strips</h2><span id='topic+facet_nested'></span>

<h3>Description</h3>

<p><code>facet_nested()</code> forms a matrix of panels defined by row
and column faceting variables and nests grouped facets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_nested(
  rows = NULL,
  cols = NULL,
  scales = "fixed",
  space = "fixed",
  axes = "margins",
  remove_labels = "none",
  independent = "none",
  shrink = TRUE,
  labeller = "label_value",
  as.table = TRUE,
  switch = NULL,
  drop = TRUE,
  margins = FALSE,
  nest_line = element_line(inherit.blank = TRUE),
  solo_line = FALSE,
  resect = unit(0, "mm"),
  render_empty = TRUE,
  strip = "nested",
  bleed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facet_nested_+3A_rows">rows</code>, <code id="facet_nested_+3A_cols">cols</code></td>
<td>
<p>A set of variables or expressions quoted by
<code><a href="ggplot2.html#topic+vars">vars()</a></code> and defining faceting groups on the rows or columns
dimension. The variables can be named (the names are passed to
<code>labeller</code>).
</p>
<p>For compatibility with the classic interface, <code>rows</code> can also be
a formula with the rows (of the tabular display) on the LHS and
the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this
dimension (either row or column).</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_scales">scales</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. Interacts with the <code>independent</code>
argument. One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>Scales are shared across all facets
(default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>x-scales are allowed to vary across rows.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>y-scales are allowed to vary across columns.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Scales can vary across rows and columns.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_+3A_space">space</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether the size of
panels are proportional to the length of the scales. When the <code>independent</code>
argument allows for free scales in a dimension, the panel sizes cannot be
proportional. Note that the <code>scales</code> argument must be free in the same
dimension as the <code>space</code> argument to have an effect.One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>All panels have the same size (default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>Panel widths are proportional to the x-scales.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>Panel heights are proportional to the y-scales.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Both the widths and heights vary according to
scales.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_+3A_axes">axes</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:
</p>

<dl>
<dt><code>"margins"</code> or <code>FALSE</code></dt><dd><p>Only draw axes at the outer margins
(default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Draw axes at the outer margins and all inner x-axes too.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Draw axes at the outer margins and all inner y-axes too.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Draw the axes for every panel.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_+3A_remove_labels">remove_labels</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>Display axis text at all axes (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Display axis text at outer margins and all inner y-axes.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Display axis text at outer margins and all inner x-axes.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Only display axis text at the outer margins.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_+3A_independent">independent</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
scales can vary within a row or column of panels, like they can be in
<a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap</a>. The <code>scales</code> argument must be free for the same
dimension before they can be set to independent. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>All y-scales should be fixed in a row and all
x-scales are fixed in a column (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>x-scales are allowed to vary within a column.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>y-scales are allowed to vary within a row.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Both x- and y-scales are allowed to vary within
a column or row respectively.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_+3A_shrink">shrink</code></td>
<td>
<p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_labeller">labeller</code></td>
<td>
<p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &quot;labeller&quot; S3 class
for compatibility with <code><a href="ggplot2.html#topic+labeller">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="ggplot2.html#topic+label_parsed">label_parsed()</a></code> for
formatting facet labels. <code><a href="ggplot2.html#topic+label_value">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_as.table">as.table</code></td>
<td>
<p>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_switch">switch</code></td>
<td>
<p>By default, the labels are displayed on the top and
right of the plot. If <code>"x"</code>, the top labels will be
displayed to the bottom. If <code>"y"</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>"both"</code>.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_drop">drop</code></td>
<td>
<p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_margins">margins</code></td>
<td>
<p>Either a logical value or a character
vector. Margins are additional facets which contain all the data
for each of the possible values of the faceting variables. If
<code>FALSE</code>, no additional facets are included (the
default). If <code>TRUE</code>, margins are included for all faceting
variables. If specified as a character vector, it is the names of
variables for which margins are to be created.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_nest_line">nest_line</code></td>
<td>
<p>a theme element, either <code>element_blank()</code> or inheriting
from <code><a href="ggplot2.html#topic+element">ggplot2::element_line()</a></code>. Lines are drawn between layers of strips
indicating hierarchy. The element inherits from the
<code><a href="#topic+theme_extensions">ggh4x.facet.nestline</a></code> element in the theme.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_solo_line">solo_line</code></td>
<td>
<p>A <code>logical(1)</code> indicating whether parent strips with a
single child should be drawn with a <code>nest_line</code> (<code>TRUE</code>) or the line only
applies to parents with multiple children (<code>FALSE</code>, default). Only relevant
when <code>nest_line</code> is drawn.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_resect">resect</code></td>
<td>
<p>a <code>unit</code> vector of length 1, indicating how much the
nesting line should be shortened.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_render_empty">render_empty</code></td>
<td>
<p>A <code>logical(1)</code>: whether to draw panels without any data
(<code>TRUE</code>, default) or display these as blanks (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_strip">strip</code></td>
<td>
<p>An object created by a call to a strip function, such as
<code><a href="#topic+strip_nested">strip_nested()</a></code>.</p>
</td></tr>
<tr><td><code id="facet_nested_+3A_bleed">bleed</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> the <code>bleed</code> argument has
moved to the <code>strip_nested()</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function inherits the capabilities of
<code><a href="#topic+facet_grid2">facet_grid2()</a></code>.
</p>
<p>Unlike <code>facet_grid()</code>, this function only automatically expands
missing variables when they have no variables in that direction, to allow
for unnested variables. It still requires at least one layer to have all
faceting variables.
</p>
<p>Hierarchies are inferred from the order of variables supplied to
<code>rows</code> or <code>cols</code>. The first variable is interpreted to be the
outermost variable, while the last variable is interpreted to be the
innermost variable. They display order is always such that the outermost
variable is placed the furthest away from the panels. For more information
about the nesting of strips, please visit the documentation of
<code><a href="#topic+strip_nested">strip_nested()</a></code>.
</p>


<h3>Value</h3>

<p>A <em>FacetNested</em> ggproto object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+strip_nested">strip_nested()</a></code> for nested strips. See
<code><a href="ggplot2.html#topic+facet_grid">ggplot2::facet_grid()</a></code> for descriptions of the original
arguments. See <code><a href="grid.html#topic+unit">grid::unit()</a></code> for the construction of a
<code>unit</code> vector.
</p>
<p>Other facetting functions: 
<code><a href="#topic+facet_grid2">facet_grid2</a>()</code>,
<code><a href="#topic+facet_manual">facet_manual</a>()</code>,
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap</a>()</code>,
<code><a href="#topic+facet_wrap2">facet_wrap2</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point()

# Similar to `facet_grid2(..., strip = strip_nested())`
p + facet_nested(~ vs + cyl)

# The nest line inherits from the global theme
p + facet_nested(~ cyl + vs, nest_line = element_line(colour = "red")) +
  theme(ggh4x.facet.nestline = element_line(linetype = 3))
</code></pre>

<hr>
<h2 id='facet_nested_wrap'>Ribbon of panels with nested strips.</h2><span id='topic+facet_nested_wrap'></span>

<h3>Description</h3>

<p><code>facet_nested_wrap()</code> wraps a sequence of panels onto a two-dimensional
layout, and nests grouped facets where possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_nested_wrap(
  facets,
  nrow = NULL,
  ncol = NULL,
  scales = "fixed",
  axes = "margins",
  remove_labels = "none",
  shrink = TRUE,
  labeller = "label_value",
  as.table = TRUE,
  drop = TRUE,
  dir = "h",
  strip.position = "top",
  nest_line = element_line(inherit.blank = TRUE),
  solo_line = FALSE,
  resect = unit(0, "mm"),
  trim_blank = TRUE,
  strip = "nested",
  bleed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facet_nested_wrap_+3A_facets">facets</code></td>
<td>
<p>A set of variables or expressions quoted by <code><a href="ggplot2.html#topic+vars">vars()</a></code>
and defining faceting groups on the rows or columns dimension.
The variables can be named (the names are passed to <code>labeller</code>).
</p>
<p>For compatibility with the classic interface, can also be a
formula or character vector. Use either a one sided formula, <code>~a + b</code>,
or a character vector, <code>c("a", "b")</code>.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_nrow">nrow</code>, <code id="facet_nested_wrap_+3A_ncol">ncol</code></td>
<td>
<p>Number of rows and columns.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_scales">scales</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>Scales are shared across all facets
(default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>x-scales are allowed to vary.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>y-scales are allowed to vary.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Both scales can vary</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_axes">axes</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:
</p>

<dl>
<dt><code>"margins"</code> or <code>FALSE</code></dt><dd><p>Only draw axes at the outer margins
(default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Draw axes at the outer margins and all inner x-axes too.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Draw axes at the outer margins and all inner y-axes too.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Draw the axes for every panel.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_remove_labels">remove_labels</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>Display axis text at all axes (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Display axis text at outer margins and all inner y-axes.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Display axis text at outer margins and all inner x-axes.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Only display axis text at the outer margins.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_shrink">shrink</code></td>
<td>
<p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_labeller">labeller</code></td>
<td>
<p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &quot;labeller&quot; S3 class
for compatibility with <code><a href="ggplot2.html#topic+labeller">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="ggplot2.html#topic+label_parsed">label_parsed()</a></code> for
formatting facet labels. <code><a href="ggplot2.html#topic+label_value">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_as.table">as.table</code></td>
<td>
<p>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_drop">drop</code></td>
<td>
<p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_dir">dir</code></td>
<td>
<p>Direction: either <code>"h"</code> for horizontal, the default, or <code>"v"</code>,
for vertical.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_strip.position">strip.position</code></td>
<td>
<p>By default, the labels are displayed on the top of
the plot. Using <code>strip.position</code> it is possible to place the labels on
either of the four sides by setting <code>strip.position = c("top",
  "bottom", "left", "right")</code></p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_nest_line">nest_line</code></td>
<td>
<p>a theme element, either <code>element_blank()</code> or inheriting
from <code><a href="ggplot2.html#topic+element">ggplot2::element_line()</a></code>. Lines are drawn between layers of strips
indicating hierarchy. The element inherits from the
<code><a href="#topic+theme_extensions">ggh4x.facet.nestline</a></code> element in the theme.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_solo_line">solo_line</code></td>
<td>
<p>A <code>logical(1)</code> indicating whether parent strips with a
single child should be drawn with a <code>nest_line</code> (<code>TRUE</code>) or the line only
applies to parents with multiple children (<code>FALSE</code>, default). Only relevant
when <code>nest_line</code> is drawn.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_resect">resect</code></td>
<td>
<p>a <code>unit</code> vector of length 1, indicating how much the
nesting line should be shortened.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_trim_blank">trim_blank</code></td>
<td>
<p>A <code>logical(1)</code>. When <code>TRUE</code> (default), does not draw rows
and columns containing no panels. When <code>FALSE</code>, the <code>nrow</code> and <code>ncol</code>
arguments are taken literally, even when there are more than needed to
fit all panels.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_strip">strip</code></td>
<td>
<p>An object created by a call to a strip function, such as
<code><a href="#topic+strip_nested">strip_nested()</a></code>.</p>
</td></tr>
<tr><td><code id="facet_nested_wrap_+3A_bleed">bleed</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> the <code>bleed</code> argument has
moved to the <code>strip_nested()</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function inherits the capabilities of
<code><a href="#topic+facet_wrap2">facet_wrap2()</a></code>.
</p>
<p>This function only merges strips in the same row or column as they appear
through regular <code>facet_wrap()</code> layout behaviour.
</p>
<p>Hierarchies are inferred from the order of variables supplied to
<code>facets</code>. The first variable is interpreted to be the outermost
variable, while the last variable is interpreted to be the innermost
variable. They display order is always such that the outermost
variable is placed the furthest away from the panels. For more information
about the nesting of strips, please visit the documentation of
<code><a href="#topic+strip_nested">strip_nested()</a></code>.
</p>


<h3>Value</h3>

<p>A <code>FacetNestedWrap</code> ggproto object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+strip_nested">strip_nested()</a></code> for nested strips. See
<code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a></code> for descriptions of the original
arguments. See <code><a href="grid.html#topic+unit">grid::unit()</a></code> for the construction of a
<code>unit</code> vector.
</p>
<p>Other facetting functions: 
<code><a href="#topic+facet_grid2">facet_grid2</a>()</code>,
<code><a href="#topic+facet_manual">facet_manual</a>()</code>,
<code><a href="#topic+facet_nested">facet_nested</a>()</code>,
<code><a href="#topic+facet_wrap2">facet_wrap2</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# Similar to `facet_wrap2(..., strip = strip_nested())`.
p + facet_nested_wrap(vars(cyl, drv))

# A nest line inherits from the global theme
p + facet_nested_wrap(vars(cyl, drv),
                      nest_line = element_line(colour = "red")) +
  theme(ggh4x.facet.nestline = element_line(linetype = 3))
</code></pre>

<hr>
<h2 id='facet_wrap2'>Extended wrapped facets</h2><span id='topic+facet_wrap2'></span>

<h3>Description</h3>

<p>This function behaves like <code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a></code>, but has a few
extra options on axis drawing when scales are fixed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_wrap2(
  facets,
  nrow = NULL,
  ncol = NULL,
  scales = "fixed",
  axes = "margins",
  remove_labels = "none",
  shrink = TRUE,
  labeller = "label_value",
  as.table = TRUE,
  drop = TRUE,
  dir = "h",
  strip.position = "top",
  trim_blank = TRUE,
  strip = "vanilla"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facet_wrap2_+3A_facets">facets</code></td>
<td>
<p>A set of variables or expressions quoted by <code><a href="ggplot2.html#topic+vars">vars()</a></code>
and defining faceting groups on the rows or columns dimension.
The variables can be named (the names are passed to <code>labeller</code>).
</p>
<p>For compatibility with the classic interface, can also be a
formula or character vector. Use either a one sided formula, <code>~a + b</code>,
or a character vector, <code>c("a", "b")</code>.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_nrow">nrow</code>, <code id="facet_wrap2_+3A_ncol">ncol</code></td>
<td>
<p>Number of rows and columns.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_scales">scales</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. One of the following:
</p>

<dl>
<dt><code>"fixed"</code> or <code>FALSE</code></dt><dd><p>Scales are shared across all facets
(default).</p>
</dd>
<dt><code>"free_x"</code></dt><dd><p>x-scales are allowed to vary.</p>
</dd>
<dt><code>"free_y"</code></dt><dd><p>y-scales are allowed to vary.</p>
</dd>
<dt><code>"free"</code> or <code>TRUE</code></dt><dd><p>Both scales can vary</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_axes">axes</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:
</p>

<dl>
<dt><code>"margins"</code> or <code>FALSE</code></dt><dd><p>Only draw axes at the outer margins
(default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Draw axes at the outer margins and all inner x-axes too.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Draw axes at the outer margins and all inner y-axes too.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Draw the axes for every panel.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_remove_labels">remove_labels</code></td>
<td>
<p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:
</p>

<dl>
<dt><code>"none"</code> or <code>FALSE</code></dt><dd><p>Display axis text at all axes (default).</p>
</dd>
<dt><code>"x"</code></dt><dd><p>Display axis text at outer margins and all inner y-axes.</p>
</dd>
<dt><code>"y"</code></dt><dd><p>Display axis text at outer margins and all inner x-axes.</p>
</dd>
<dt><code>"all"</code> or <code>TRUE</code></dt><dd><p>Only display axis text at the outer margins.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_shrink">shrink</code></td>
<td>
<p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_labeller">labeller</code></td>
<td>
<p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &quot;labeller&quot; S3 class
for compatibility with <code><a href="ggplot2.html#topic+labeller">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="ggplot2.html#topic+label_parsed">label_parsed()</a></code> for
formatting facet labels. <code><a href="ggplot2.html#topic+label_value">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_as.table">as.table</code></td>
<td>
<p>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_drop">drop</code></td>
<td>
<p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_dir">dir</code></td>
<td>
<p>Direction: either <code>"h"</code> for horizontal, the default, or <code>"v"</code>,
for vertical.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_strip.position">strip.position</code></td>
<td>
<p>By default, the labels are displayed on the top of
the plot. Using <code>strip.position</code> it is possible to place the labels on
either of the four sides by setting <code>strip.position = c("top",
  "bottom", "left", "right")</code></p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_trim_blank">trim_blank</code></td>
<td>
<p>A <code>logical(1)</code>. When <code>TRUE</code> (default), does not draw rows
and columns containing no panels. When <code>FALSE</code>, the <code>nrow</code> and <code>ncol</code>
arguments are taken literally, even when there are more than needed to
fit all panels.</p>
</td></tr>
<tr><td><code id="facet_wrap2_+3A_strip">strip</code></td>
<td>
<p>A strip specification as one of the following:
</p>

<ul>
<li><p> An object inheriting from <code style="white-space: pre;">&#8288;&lt;Strip&gt;&#8288;</code>, such as an object created with
<code>strip_vanilla()</code>.
</p>
</li>
<li><p> A strip function, i.e. <code>strip_vanilla</code>.
</p>
</li>
<li><p> A string giving such function without the <code>strip_</code>-prefix,
i.e. <code>"vanilla"</code>.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Facet</code> ggproto object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>Other facetting functions: 
<code><a href="#topic+facet_grid2">facet_grid2</a>()</code>,
<code><a href="#topic+facet_manual">facet_manual</a>()</code>,
<code><a href="#topic+facet_nested">facet_nested</a>()</code>,
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mpg, aes(displ, hwy)) + geom_point()

# Repeat all axes for every facet
p + facet_wrap2(vars(class), axes = "all")

# Repeat only y-axes
p + facet_wrap2(vars(class), axes = "y")

# Repeat axes without labels
p + facet_wrap2(vars(class), axes = "all", remove_labels = "all")

# Repeat axes without x-axis labels
p + facet_wrap2(vars(class), axes = "all", remove_labels = "x")
</code></pre>

<hr>
<h2 id='facetted_pos_scales'>Set individual scales in facets</h2><span id='topic+facetted_pos_scales'></span>

<h3>Description</h3>

<p>This function allows the tweaking of the position scales (x and y) of
individual facets. You can use it to fine-tune limits, breaks and other scale
parameters for individual facets, provided the facet allows free scales.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facetted_pos_scales(x = NULL, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="facetted_pos_scales_+3A_x">x</code>, <code id="facetted_pos_scales_+3A_y">y</code></td>
<td>
<p>A <code>list</code> wherein elements are either x/y position scales or
<code>NULL</code>s. Alternatively, a list of formulae (see details).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is intended that this function works with both
<code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a></code> and <code><a href="ggplot2.html#topic+facet_grid">ggplot2::facet_grid()</a></code>.
For <code>facet_wrap</code>, the scales are used for each individual panel. For
<code>facet_grid</code>, the scales are used for the rows and columns. Note that
these facets must be used with <code>scales = "free"</code> or <code>"free_x"</code> or
<code>"free_y"</code>, depending on what scales are added.
</p>
<p>Axis titles are derived from the first scale in the list (or the default
position scale when the first list element is <code>NULL</code>).
</p>


<h4>Scale transformations</h4>

<p>It is allowed to use individual scale
transformations for facets, but this functionality comes with the trade-off
that the out of bounds (<code>oob</code>) argument for individual scales is
ignored. Values that are out of bounds will be clipped. Whereas the
<code>stat</code> part of a ggplot layer is typically calculated after scale
transformations, the calculation of the <code>stat</code> happens before scale
transformation with this function, which can lead to some awkward results.
The suggested workaround is to pre-transform the data for layers with
non-identity <code>stat</code> parts.</p>



<h4>Scale list input</h4>

<p><code>NULL</code>s are valid list elements and
signal that the default position scale should be used at the position in
the list where the <code>NULL</code> occurs. Since transformations are applied
before facet scales are initiated, it is not recommended to use a default
position (either the first in the list, or defined outside
<code>facetted_pos_scales()</code>) scale with a transformation other than
<code>trans = "identity"</code> (the default).</p>



<h4>Formula list input</h4>

<p>The <code>x</code> and <code>y</code> arguments also
accept a list of two-sided formulas. The left hand side of a formula should
evaluate to a <code>logical</code> vector. The right hand side of the formula
should evaluate to a position scale, wherein the <code>x</code> argument accepts
x-position scales and the <code>y</code> argument accepts y-position scales.
Notably, the left hand side of the formula is evaluated using the tidy
evaluation framework, whereby the <code>data.frame</code> with the plot's layout
is given priority over the environment in which the formula was created. As
a consequence, variables (columns) that define faceting groups can be
references directly.</p>



<h3>Value</h3>

<p>A <em>facetted_pos_scales</em> object, instructing a ggplot how to
adjust the scales per facet.
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+scale_continuous">ggplot2::scale_x_continuous()</a></code> and <code>scale_x_discrete</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot &lt;- ggplot(iris, aes(Sepal.Width, Sepal.Length)) +
  geom_point(aes(colour = Species)) +
  facet_wrap(Species ~ ., scales = "free_y")

# Reversing the y-axis in the second panel. When providing a list of scales,
# NULL indicates to use the default, global scale
plot +
  facetted_pos_scales(
    y = list(NULL, scale_y_continuous(trans = "reverse"))
  )

# Alternative for specifying scales with formula lists. The LHS can access
# columns in the plot's layout.
plot +
  facetted_pos_scales(
    y = list(
      Species == "virginica" ~ scale_y_continuous(breaks = c(6, 7)),
      Species == "versicolor" ~ scale_y_reverse()
    )
  )
</code></pre>

<hr>
<h2 id='force_panelsizes'>Force a facetted plot to have specified panel sizes</h2><span id='topic+force_panelsizes'></span>

<h3>Description</h3>

<p>Takes a ggplot and modifies its facet drawing behaviour such that the widths
and heights of panels are set by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>force_panelsizes(
  rows = NULL,
  cols = NULL,
  respect = NULL,
  total_width = NULL,
  total_height = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="force_panelsizes_+3A_rows">rows</code>, <code id="force_panelsizes_+3A_cols">cols</code></td>
<td>
<p>a <code>numeric</code> or <code>unit</code> vector for setting panel heights
(rows) or panel widths (cols).</p>
</td></tr>
<tr><td><code id="force_panelsizes_+3A_respect">respect</code></td>
<td>
<p>a <code>logical</code> value. If <code>TRUE</code>, widths and heights
specified in <code style="white-space: pre;">&#8288;"null" unit&#8288;</code>s are proportional. If <code>FALSE</code>,
<code style="white-space: pre;">&#8288;"null" unit&#8288;</code>s in x- and y-direction vary independently.</p>
</td></tr>
<tr><td><code id="force_panelsizes_+3A_total_width">total_width</code>, <code id="force_panelsizes_+3A_total_height">total_height</code></td>
<td>
<p>an absolute <code>unit</code> of length 1 setting the
total width or height of all panels and the decoration between panels.
If not <code>NULL</code>, <code>rows</code> and <code>cols</code> should be <code>numeric</code> and not <code>unit</code>s.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Forcing the panel sizes should in theory work regardless of what
facetting choice was made, as long as this function is called after the
facet specification. Even when no facets are specified, ggplot2 defaults to
the <code><a href="ggplot2.html#topic+facet_null">ggplot2::facet_null()</a></code> specification; a single panel.
<code>force_panelsizes</code> works by wrapping the original panel drawing
function inside a function that modifies the widths and heights of panel
grobs in the original function's output gtable.
</p>
<p>When <code>rows</code> or <code>cols</code> are <code>numeric</code> vectors, panel sizes are
defined as ratios i.e. relative <code style="white-space: pre;">&#8288;"null" unit&#8288;</code>s. <code>rows</code> and
<code>cols</code> vectors are repeated or shortened to fit the number of panels
in their direction. When <code>rows</code> or <code>cols</code> are <code>NULL</code>, no
changes are made in that direction.
</p>
<p>When <code>respect = NULL</code>, default behaviour specified elsewhere is
inherited.
</p>
<p>No attempt is made to guarantee that the plot fits the output device. The
<code>space</code> argument in <code><a href="ggplot2.html#topic+facet_grid">ggplot2::facet_grid()</a></code> will be
overruled. When individual panels span multiple rows or columns, this
function may not work as intended.
</p>


<h3>Value</h3>

<p>A <code>forcedsize</code> S3 object that can be added to a plot.
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+facet_grid">ggplot2::facet_grid()</a></code> <code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a></code>
<code><a href="ggplot2.html#topic+facet_null">ggplot2::facet_null()</a></code> <code><a href="grid.html#topic+unit">grid::unit()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot(mtcars, aes(disp, mpg)) +
  geom_point() +
  facet_grid(vs ~ am) +
  force_panelsizes(rows = c(2, 1),
                   cols = c(2, 1))
</code></pre>

<hr>
<h2 id='geom_box'>Flexible rectangles</h2><span id='topic+geom_box'></span>

<h3>Description</h3>

<p>The <code>geom_box()</code> function offers a more flexible variant of <code>geom_rect()</code> and
<code>geom_tile()</code>. Instead of exclusively working with the <code style="white-space: pre;">&#8288;(x/y)min&#8288;</code>/<code style="white-space: pre;">&#8288;(x/y)max&#8288;</code>
<em>or</em> <code>(x/y)</code>/<code>(width/height)</code> aesthetics, any two out of these four
aesthetics suffice to define a rectangle.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_box(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  linejoin = "mitre",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE,
  radius = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_box_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_box_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_box_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_box_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_box_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_box_+3A_linejoin">linejoin</code></td>
<td>
<p>Line join style (round, mitre, bevel).</p>
</td></tr>
<tr><td><code id="geom_box_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_box_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_box_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
<tr><td><code id="geom_box_+3A_radius">radius</code></td>
<td>
<p>A <code><a href="grid.html#topic+unit">grid::unit</a></code> object of length 1 or <code>numeric(1)</code> to set
rounded corners. If <code>NULL</code> (default), no rounded corners are applied. If
<code>numeric(1)</code>, it is interpreted as millimetres. Does not work under
non-linear coordinates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 <code>Layer</code> object that can be added to a plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Combine any two position aesthetics
df &lt;- data.frame(
  x = c(1.5, 3.5), xmin = c(1, 2),
  y = c(1.5, 2.5), ymin = c(1, 2)
)
ggplot(df) +
  geom_box(aes(x = x, xmin = xmin, y = y, ymin = ymin))

# Works with partial information for position, as long as two aesthetics
# are complete for any observation.
df &lt;- data.frame(
  x = c(1.5, NA, 4),   xmin = c(1, 2, NA), width = c(NA, 3, 2),
  y = c(1.5, 2.5, NA), ymin = c(NA, 2, 3), height = c(1, NA, 3)
)
ggplot(df) +
  geom_box(aes(x = x, xmin = xmin, y = y, ymin = ymin,
               width = width, height = height))

# Set radius for rounded corners
ggplot() +
  geom_box(
    aes(x = 1:3, width = rep(1, 3),
        y = 1:3, height = 3:1),
    radius = 5
  )
</code></pre>

<hr>
<h2 id='geom_outline_point'>Points with outline</h2><span id='topic+geom_outline_point'></span>

<h3>Description</h3>

<p>This is a variant of the point geom, wherein overlapping points are given
a shared outline. It works by drawing an additional layer of points below a
regular layer of points with a thicker stroke.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_outline_point(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_outline_point_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_outline_point_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Due to the way this geom is implemented, it handles the <code>alpha</code>
aesthetic pretty ungracefully.
</p>


<h3>Value</h3>

<p>A ggplot <code>Layer</code>
</p>


<h3>Aesthetics</h3>

<p><code>geom_outline_point()</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">x</a></code></strong>
</p>
</li>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">y</a></code></strong>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">alpha</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">colour</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">fill</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_group_order">group</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_linetype_size_shape">shape</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_linetype_size_shape">size</a></code>
</p>
</li>
<li> <p><code>stroke</code>
</p>
</li>
<li> <p><code>stroke_colour</code>
</p>
</li></ul>

<p>Learn more about setting these aesthetics in <code>vignette("ggplot2-specs")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, cty, colour = factor(cyl))) +
  geom_outline_point(size = 10, stroke = 3)
p

# The colour of the stroke can be mapped to a scale by setting the
# aesthetics to `"stroke_colour"`.
p +
  aes(stroke_colour = factor(cyl)) +
  scale_colour_hue(
    aesthetics = "stroke_colour",
    l = 50
  )
</code></pre>

<hr>
<h2 id='geom_pointpath'>Point Paths</h2><span id='topic+geom_pointpath'></span>

<h3>Description</h3>

<p>The point path geom is used to make a scatterplot wherein the points are
connected with lines in some order. This geom intends to mimic the
<code>type = 'b'</code> style of base R line plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_pointpath(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  na.rm = FALSE,
  show.legend = NA,
  arrow = NULL,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_pointpath_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_arrow">arrow</code></td>
<td>
<p>Arrow specification as created by
<code><a href="grid.html#topic+arrow">grid::arrow()</a></code>.</p>
</td></tr>
<tr><td><code id="geom_pointpath_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>mult</code> is a numeric value to
scale the proportion of gaps in the line around points.
</p>
<p>While the need for this geom is not very apparent, since it can be
approximated in a variety of ways, the trick up its sleeve is that it
dynamically adapts the inter-point segments so these  don't deform under
different aspect ratios or device sizes.
</p>


<h3>Value</h3>

<p>A <em>Layer</em> ggproto object.
</p>


<h3>Aesthetics</h3>

<p><code>geom_pointpath()</code> understands the following
aesthetics (required aesthetics are in bold):
</p>
<ul>
<li><p><strong><code>x</code></strong> </p>
</li>
<li><p><strong><code>y</code></strong>
</p>
</li>
<li><p><code>alpha</code> </p>
</li>
<li><p><code>colour</code> </p>
</li>
<li><p><code>group</code>
</p>
</li>
<li><p><code>shape</code> </p>
</li>
<li><p><code>size</code> </p>
</li>
<li><p><code>stroke</code>
</p>
</li>
<li><p><code>linewidth</code> </p>
</li>
<li><p><code>linetype</code> </p>
</li>
<li><p><code>mult</code></p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>ggplot(pressure, aes(temperature, pressure)) +
  geom_pointpath()

# Using geom_pointpath as annotation
ggplot() +
  annotate(
    "pointpath",
    x = c(1, 0.32, 0.31, -0.12, -0.81, -0.4, -0.81, -0.12, 0.31, 0.32, 1),
    y = c(0, 0.24, 0.95, 0.38, 0.59, 0, -0.59, -0.38, -0.95, -0.24, 0)
  )
</code></pre>

<hr>
<h2 id='geom_polygonraster'>Polygon parameterisation for rasters</h2><span id='topic+geom_polygonraster'></span>

<h3>Description</h3>

<p><code>geom_polygonraster</code> takes data that describes a raster with pixels of
the same size and reparametrises the data as a polygon. This allows for more
flexible transformations of the data, but comes at an efficiency cost.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_polygonraster(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = position_lineartrans(),
  ...,
  hjust = 0.5,
  vjust = 0.5,
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_polygonraster_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_hjust">hjust</code>, <code id="geom_polygonraster_+3A_vjust">vjust</code></td>
<td>
<p>horizontal and vertical justification of the grob.  Each
justification value should be a number between 0 and 1.  Defaults to 0.5
for both, centering each pixel over its data location.</p>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_polygonraster_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each pixel in a raster, makes a vertex for each of the four
corner points. These coordinates can then by transformed by
<code>coord</code>-functions such as <code><a href="ggplot2.html#topic+coord_polar">ggplot2::coord_polar()</a></code> or
<code>position</code>-functions such as
<code><a href="#topic+position_lineartrans">position_lineartrans()</a></code>. Currently substitutes group
aesthetics right before drawing in favour of pixel identifiers.
</p>


<h3>Value</h3>

<p>A <em>Layer</em> ggproto object.
</p>


<h3>Aesthetics</h3>

<p><code>geom_raster()</code> understands the following aesthetics (required
aesthetics are in bold):
</p>

<ul>
<li> <p><strong>x</strong>
</p>
</li>
<li> <p><strong>y</strong>
</p>
</li>
<li><p> fill
</p>
</li>
<li><p> alpha
</p>
</li>
<li><p> group
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_tile">geom_raster()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Combining with coord_polar()
ggplot(faithfuld, aes(waiting, eruptions)) +
  geom_polygonraster(aes(fill = density)) +
  coord_polar()

# Combining with linear transformations
df &lt;- data.frame(x = row(volcano)[TRUE],
                 y = col(volcano)[TRUE],
                 z = volcano[TRUE])

ggplot(df, aes(x, y, fill = z)) +
  geom_polygonraster(position = position_lineartrans(angle = 30,
                                                     shear = c(1, 0)))
</code></pre>

<hr>
<h2 id='geom_rectmargin'>Rectangular rugs in the margins</h2><span id='topic+geom_rectmargin'></span><span id='topic+geom_tilemargin'></span>

<h3>Description</h3>

<p>Like rug plots display data points of a 2D plot as lines in the
margins, this function plots rectangles in the margins. Rectangular rugs
are convenient for displaying one-dimensional, ranged annotations for
two-dimensional plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_rectmargin(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  outside = FALSE,
  sides = "bl",
  length = unit(0.03, "npc"),
  linejoin = "mitre",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)

geom_tilemargin(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  outside = FALSE,
  sides = "bl",
  length = unit(0.03, "npc"),
  linejoin = "mitre",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_rectmargin_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_outside">outside</code></td>
<td>
<p><code>logical</code> of length 1 that controls whether to move the
rectangles outside of the plot area. For the best results, it is probably
best to set <code>coord_cartesian(clip = "off")</code> and avoid overlap with the
default axes by changing the sides argument to <code>"tr"</code>.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_sides">sides</code></td>
<td>
<p>A <code>string</code> of length 1 that controls which sides of the
plot the rug-rectangles appear on. A string containing any letters in
<code>"trbl"</code> will set it to top, right, bottom and left respectively.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_length">length</code></td>
<td>
<p>A <code><a href="grid.html#topic+unit">grid::unit()</a></code> object that sets the width and
height of the rectangles in the x- and y-directions respectively. Note that
scale expansion can affect the look of this.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_linejoin">linejoin</code></td>
<td>
<p>Line join style (round, mitre, bevel).</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_rectmargin_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, scales are expanded 5\
whereas the rug rectangles will occupy 3\
default. The <code>geom_rectmargin()</code> and <code>geom_tilemargin()</code> versions do the
same thing, but are parametrised differently; see
<code><a href="ggplot2.html#topic+geom_tile">geom_rect()</a></code>.
</p>
<p>These functions do not have hard-coded required aesthetics, since the x and
y directions can be omitted by not choosing a side in the corresponding
direction, i.e. y-direction variables are omitted when plotting the rug only
on the top and/or bottom. This can result in errors when the aesthetics are
not specified appropriately, so some caution is advised.
</p>


<h3>Value</h3>

<p>A <em>Layer</em> ggproto object.
</p>


<h3>Aesthetics</h3>

<p><code>geom_rectmargin()</code> requires either one of the following
sets of aesthetics, but also can use both:
</p>

<ul>
<li> <p><strong>xmin</strong>
</p>
</li>
<li> <p><strong>xmax</strong>
</p>
</li></ul>

<p>and/or:
</p>

<ul>
<li> <p><strong>ymin</strong>
</p>
</li>
<li> <p><strong>ymax</strong>
</p>
</li></ul>

<p><code>geom_tilemargin()</code> requires either one of the following
sets of aesthetics, but can also use both:
</p>

<ul>
<li> <p><strong>x</strong>
</p>
</li>
<li> <p><strong>width</strong>
</p>
</li></ul>

<p>and/or:
</p>

<ul>
<li> <p><strong>y</strong>
</p>
</li>
<li> <p><strong>height</strong>
</p>
</li></ul>

<p>Furthermore, <code>geom_rectmargin()</code> and <code>geom_tilemargin()</code> also
understand these shared aesthetics:
</p>

<ul>
<li><p> alpha
</p>
</li>
<li><p> colour
</p>
</li>
<li><p> fill
</p>
</li>
<li><p> group
</p>
</li>
<li><p> linetype
</p>
</li>
<li><p> size
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_rug">ggplot2::geom_rug()</a></code>, <code><a href="ggplot2.html#topic+geom_tile">geom_rect()</a></code>,
<code><a href="ggplot2.html#topic+geom_tile">ggplot2::geom_tile()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># geom_rectmargin() is parameterised by the four corners
df &lt;- data.frame(
  xmin = c(1, 5),
  xmax = c(2, 7),
  ymin = c(1, 2),
  ymax = c(2, 4),
  fill = c("A", "B")
)


ggplot(df, aes(xmin = xmin, xmax = xmax,
               ymin = ymin, ymax = ymax,
               fill = fill)) +
  geom_rect() +
  geom_rectmargin()

# geom_tilemargin() is parameterised by center and size
df &lt;- data.frame(
  x = c(1, 4),
  y = c(1, 2),
  width = c(2, 1),
  height = c(1, 2),
  fill = c("A", "B")
)

ggplot(df, aes(x, y,
               width = width, height = height,
               fill = fill)) +
  geom_tile() +
  geom_tilemargin()
</code></pre>

<hr>
<h2 id='geom_text_aimed'>Aimed text</h2><span id='topic+geom_text_aimed'></span>

<h3>Description</h3>

<p>Similar to <code>geom_text()</code>, this geom also generates text but places the
text at an angle so that the text seems aimed towards a point defined by
<code style="white-space: pre;">&#8288;[xend, yend]&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_text_aimed(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  parse = FALSE,
  nudge_x = 0,
  nudge_y = 0,
  flip_upsidedown = TRUE,
  check_overlap = FALSE,
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_text_aimed_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer.
When using a <code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.
</p>
</li>
<li><p> A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code>stat_count()</code>,
give the stat as <code>"count"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the stat, see the
<a href="ggplot2.html#topic+layer_stats">layer stat</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer.
Cannot be jointy specified with <code>nudge_x</code> or <code>nudge_y</code>. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
</p>
</li>
<li><p> A string nameing the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_parse">parse</code></td>
<td>
<p>If <code>TRUE</code>, the labels will be parsed into expressions and
displayed as described in <code>?plotmath</code>.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_nudge_x">nudge_x</code>, <code id="geom_text_aimed_+3A_nudge_y">nudge_y</code></td>
<td>
<p>Horizontal and vertical adjustment to nudge labels by.
Useful for offsetting text from points, particularly on discrete scales.
Cannot be jointly specified with <code>position</code>.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_flip_upsidedown">flip_upsidedown</code></td>
<td>
<p>A <code>logical(1)</code>. If <code>TRUE</code> (default), the
angle of text placed at angles between 90 and 270 degrees is flipped so
that it is more comfortable to read. If <code>FALSE</code>, will take calculated
angles literally.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_check_overlap">check_overlap</code></td>
<td>
<p>If <code>TRUE</code>, text that overlaps previous text in the
same layer will not be plotted. <code>check_overlap</code> happens at draw time and in
the order of the data. Therefore data should be arranged by the label
column before calling <code>geom_text()</code>. Note that this argument is not
supported by <code>geom_label()</code>.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_text_aimed_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculated angle is such that the text will be parallel to a
line passing through the coordinates <code style="white-space: pre;">&#8288;[x, y]&#8288;</code> and <code style="white-space: pre;">&#8288;[xend, yend]&#8288;</code>.
The calculated angle is added to the <code>angle</code> angle aesthetic, so that
you can set text perpendicular to that line by setting <code>angle = 90</code>.
These angles are calculated in absolute coordinates, meaning that resizing
the plot will retain the same appearance.
</p>


<h3>Value</h3>

<p>A ggplot2 <code>Layer</code> that can be added to a plot.
</p>


<h3>Aesthetics</h3>

<p><code>geom_text_aimed()</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">x</a></code></strong>
</p>
</li>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">y</a></code></strong>
</p>
</li>
<li> <p><strong><code>label</code></strong>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">alpha</a></code>
</p>
</li>
<li> <p><code>angle</code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">colour</a></code>
</p>
</li>
<li> <p><code>family</code>
</p>
</li>
<li> <p><code>fontface</code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_group_order">group</a></code>
</p>
</li>
<li> <p><code>hjust</code>
</p>
</li>
<li> <p><code>lineheight</code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_linetype_size_shape">size</a></code>
</p>
</li>
<li> <p><code>vjust</code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_position">xend</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_position">yend</a></code>
</p>
</li></ul>

<p>Learn more about setting these aesthetics in <code>vignette("ggplot2-specs")</code>.
</p>


<h3>Note</h3>

<p>When using this geom to aim text at the centre of a polar plot, make
sure the radius range does not have close to zero width.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Point all labels to upper right corner
ggplot(mtcars, aes(mpg, wt)) +
  geom_text_aimed(aes(label = rownames(mtcars)),
                  xend = Inf, yend = Inf)

# Point all labels to center of polar plot
ggplot(mpg, aes(manufacturer)) +
  geom_bar(width = 1, aes(fill = manufacturer), show.legend = FALSE) +
  geom_text_aimed(aes(label = manufacturer), hjust = 0,
                  stat = "count", nudge_y = 2) +
  scale_x_discrete(labels = NULL) +
  coord_polar()
</code></pre>

<hr>
<h2 id='ggh4x_extensions'>ggh4x extensions to ggplot2</h2><span id='topic+ggh4x_extensions'></span><span id='topic+CoordAxesInside'></span><span id='topic+FacetGrid2'></span><span id='topic+FacetWrap2'></span><span id='topic+FacetManual'></span><span id='topic+FacetNested'></span><span id='topic+FacetNestedWrap'></span><span id='topic+GeomBox'></span><span id='topic+GeomPointPath'></span><span id='topic+GeomPointpath'></span><span id='topic+GeomPolygonRaster'></span><span id='topic+GeomRectMargin'></span><span id='topic+GeomTileMargin'></span><span id='topic+GeomTextAimed'></span><span id='topic+GuideStringlegend'></span><span id='topic+PositionDisjointRanges'></span><span id='topic+PositionLinearTrans'></span><span id='topic+ScaleDendrogram'></span><span id='topic+StatDifference'></span><span id='topic+StatFunxy'></span><span id='topic+StatRle'></span><span id='topic+StatRollingkernel'></span><span id='topic+StatTheoDensity'></span><span id='topic+Strip'></span><span id='topic+StripThemed'></span><span id='topic+StripNested'></span><span id='topic+StripSplit'></span>

<h3>Description</h3>

<p>ggh4x relies on the extension mechanism of ggplot2 through
ggproto class objects, which allows cross-package inheritance of objects
such as geoms, stats, facets, scales and coordinate systems. These objects
can be ignored by users for the purpose of making plots, since interacting
with these objects is preferred through various geom_, stat_, facet_,
coord_ and scale_ functions.
</p>


<h3>See Also</h3>

<p><a href="ggplot2.html#topic+ggproto">ggproto</a>
</p>

<hr>
<h2 id='ggsubset'>Passing a subset of data to ggplot2 layers.</h2><span id='topic+ggsubset'></span>

<h3>Description</h3>

<p>This is a convenience function to allow layer objects, such as geoms, to take
a subset of the data in the main <code>ggplot()</code> call, without storing a
duplicate of the subset in the ggplot object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggsubset(rowtest = NULL, omit = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggsubset_+3A_rowtest">rowtest</code></td>
<td>
<p>logical <code>expression</code> indicating which rows to keep.</p>
</td></tr>
<tr><td><code id="ggsubset_+3A_omit">omit</code></td>
<td>
<p>a <code>character</code> column name to exclude.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ggsubset</code> is a wrapper around <code>subset.data.frame</code> where
the <code>subset</code> argument is set to <code>rowtest</code> and the <code>select</code>
argument to <code>-omit</code>. Since the <code>data</code> argument in the
<code>layer()</code> function can take a function with one argument, we can pass
the function returned from <code>ggsubset</code> as that argument to subset the
data by rows.
</p>


<h3>Value</h3>

<p>A function that takes a <code>data.frame</code> as argument and returns a
subset of that <code>data.frame</code> according to <code>rowtest</code>
</p>


<h3>See Also</h3>

<p>See <code><a href="ggplot2.html#topic+layer">ggplot2::layer()</a></code>, specifically the <code>data</code>
argument. See <code><a href="base.html#topic+subset">subset.data.frame()</a></code> for the internal
function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot(iris, aes(Sepal.Width, Sepal.Length)) +
  geom_point(data = ggsubset(Species == "setosa"))
</code></pre>

<hr>
<h2 id='guide_axis_logticks'>Axis guide with ticks for logarithmic breaks</h2><span id='topic+guide_axis_logticks'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
This axis guide is probably best described as
<code><a href="ggplot2.html#topic+annotation_logticks">ggplot2::annotation_logticks()</a></code> but implemented as a guide instead
of a geom. The tick marks probably best suit log10 transformations.
The function is deprecated because ggplot2 implemented a better log tick
axis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_logticks(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  position = waiver(),
  prescaled = FALSE,
  trunc_lower = NULL,
  trunc_upper = NULL,
  colour = NULL,
  color = NULL,
  base = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_logticks_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_angle">angle</code></td>
<td>
<p>Compared to setting the angle in <code><a href="ggplot2.html#topic+theme">theme()</a></code> / <code><a href="ggplot2.html#topic+element_text">element_text()</a></code>,
this also uses some heuristics to automatically pick the <code>hjust</code> and <code>vjust</code> that
you probably want. Can be one of the following:
</p>

<ul>
<li> <p><code>NULL</code> to take the angles and <code>hjust</code>/<code>vjust</code> directly from the theme.
</p>
</li>
<li> <p><code>waiver()</code> to allow reasonable defaults in special cases.
</p>
</li>
<li><p> A number representing the text angle in degrees.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_prescaled">prescaled</code></td>
<td>
<p>A <code>logical</code> of length one, indicating whether the data
has been manually rescaled (<code>TRUE</code>) or the scale takes care of the
transformation (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_trunc_lower">trunc_lower</code>, <code id="guide_axis_logticks_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_colour">colour</code>, <code id="guide_axis_logticks_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_logticks_+3A_base">base</code></td>
<td>
<p>When this is provided, the guide takes this as the base for the
log transformation instead of trying to guess the base. It is recommended
to use this argument if the base is not <code>10</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <em>axis_logticks</em> guide class object.
</p>


<h3>Theme elements</h3>

<p>This axis guide uses the following the theme elements:
</p>

<dl>
<dt><code><a href="#topic+theme_extensions">ggh4x.axis.ticks.length.minor</a></code></dt><dd>
<p>An <code><a href="ggplot2.html#topic+element">rel()</a></code> object to set the size of minor ticks
relative to the length of major ticks (<code>axis.ticks.length</code>).
Defaults to <code>rel(2/3)</code>.
</p>
</dd>
<dt><code><a href="#topic+theme_extensions">ggh4x.axis.ticks.length.mini</a></code></dt><dd>
<p>An <code><a href="ggplot2.html#topic+element">rel()</a></code> object to set the size of smallest ticks,
also relative to the length of major ticks (<code>axis.ticks.length</code>).
Defaults to <code>rel(1/3)</code>.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other axis-guides: 
<code><a href="#topic+guide_axis_manual">guide_axis_manual</a>()</code>,
<code><a href="#topic+guide_axis_minor">guide_axis_minor</a>()</code>,
<code><a href="#topic+guide_axis_nested">guide_axis_nested</a>()</code>,
<code><a href="#topic+guide_axis_scalebar">guide_axis_scalebar</a>()</code>,
<code><a href="#topic+guide_axis_truncated">guide_axis_truncated</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The guide works well out of the box with log10 scales
p &lt;- ggplot(pressure, aes(temperature, pressure)) +
  geom_line()
p + scale_y_log10(guide = "axis_logticks")

# If the data is already transformed, you can set 'prescaled' to TRUE
ggplot(pressure, aes(temperature, log10(pressure))) +
  geom_line() +
  guides(y = guide_axis_logticks(prescaled = TRUE))

# The lenghts of the log-ticks are controlled by the theme relative to the
# major ticks.
p + scale_y_log10(guide = "axis_logticks") +
  theme(
    axis.ticks.length.y = unit(1, "cm"),
    ggh4x.axis.ticks.length.minor = rel(0.55),
    ggh4x.axis.ticks.length.mini = rel(0.1)
  )
</code></pre>

<hr>
<h2 id='guide_axis_manual'>Manual axis</h2><span id='topic+guide_axis_manual'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
This axis allows a greater degree of control than the default axes guides. In
particular, this axis allows setting break positions and labels independently
from the scale and is not bound by the same constraints as secondary axes.
Additionally, label attributes may be set in parallel to the labels
themselves, circumventing the unsupported vectorised input to
<code>element_text()</code>.
The function is deprecated due to superior alternatives such as
<code>legendry::guide_axis_base()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_manual(
  title = waiver(),
  breaks = waiver(),
  labels = waiver(),
  label_family = NULL,
  label_face = NULL,
  label_colour = NULL,
  label_size = NULL,
  label_hjust = NULL,
  label_vjust = NULL,
  label_lineheight = NULL,
  label_color = NULL,
  label_margin = NULL,
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  colour = NULL,
  color = NULL,
  trunc_lower = NULL,
  trunc_upper = NULL,
  position = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_manual_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_breaks">breaks</code></td>
<td>
<p>One of the following ways to parametrise the tick and label
positions:
</p>

<ul>
<li> <p><code>NULL</code> to draw no ticks and labels.
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks computed by the scale (default).
</p>
</li>
<li><p> A <code>numeric</code> vector for continuous or discrete scales, or a <code>character</code>
vector for discrete scales.
</p>
</li>
<li><p> A <code>function</code> that takes the limits as input and returns breaks as output.
Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> notation.
</p>
</li>
<li><p> A <code><a href="grid.html#topic+unit">unit</a></code> vector for setting data-independent
breaks.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_labels">labels</code></td>
<td>
<p>One of the following ways to dictate the labels:
</p>

<ul>
<li> <p><code>NULL</code> to draw no labels.
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the scale on the breaks
(default). Note that a scale with non-identity transformation is unlikely
to graciously handle breaks defined in grid-units.
</p>
</li>
<li><p> A <code>character</code> vector giving
</p>
</li>
<li><p> A <code>function</code> that takes the breaks as input and returns labels as output.
Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> notation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_label_family">label_family</code>, <code id="guide_axis_manual_+3A_label_face">label_face</code>, <code id="guide_axis_manual_+3A_label_colour">label_colour</code>, <code id="guide_axis_manual_+3A_label_size">label_size</code>, <code id="guide_axis_manual_+3A_label_hjust">label_hjust</code>, <code id="guide_axis_manual_+3A_label_vjust">label_vjust</code>, <code id="guide_axis_manual_+3A_label_lineheight">label_lineheight</code>, <code id="guide_axis_manual_+3A_label_color">label_color</code>, <code id="guide_axis_manual_+3A_label_margin">label_margin</code></td>
<td>
<p>Arguments passed down to the label constructor. See
<code><a href="ggplot2.html#topic+element">element_text()</a></code> arguments, which these
arguments mirror with the <code>label_</code>-prefix. With the exception of
<code>label_margin</code>, the other <code style="white-space: pre;">&#8288;label_*&#8288;</code> arguments are assumed be parallel to
(the result of) the <code>labels</code> argument and will be recycled with
<code><a href="base.html#topic+rep">rep_len()</a></code> as necessary. By default, these parameters
are taken from the theme.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_angle">angle</code></td>
<td>
<p>Compared to setting the angle in <code><a href="ggplot2.html#topic+theme">theme()</a></code> / <code><a href="ggplot2.html#topic+element_text">element_text()</a></code>,
this also uses some heuristics to automatically pick the <code>hjust</code> and <code>vjust</code> that
you probably want. Can be one of the following:
</p>

<ul>
<li> <p><code>NULL</code> to take the angles and <code>hjust</code>/<code>vjust</code> directly from the theme.
</p>
</li>
<li> <p><code>waiver()</code> to allow reasonable defaults in special cases.
</p>
</li>
<li><p> A number representing the text angle in degrees.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_colour">colour</code>, <code id="guide_axis_manual_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_trunc_lower">trunc_lower</code>, <code id="guide_axis_manual_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_manual_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <em>axis_manual</em> guide class object.
</p>


<h3>See Also</h3>

<p>Other axis-guides: 
<code><a href="#topic+guide_axis_logticks">guide_axis_logticks</a>()</code>,
<code><a href="#topic+guide_axis_minor">guide_axis_minor</a>()</code>,
<code><a href="#topic+guide_axis_nested">guide_axis_nested</a>()</code>,
<code><a href="#topic+guide_axis_scalebar">guide_axis_scalebar</a>()</code>,
<code><a href="#topic+guide_axis_truncated">guide_axis_truncated</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot(iris, aes(Species, Sepal.Width)) +
  geom_boxplot(aes(fill = Species)) +
  guides(x = guide_axis_manual(
    label_colour = scales::hue_pal()(3),
    label_face = c("bold", "italic", "plain"),
    labels = toupper
  ))

# Using the manual axis to annotate some specific point
ggplot(pressure, aes(temperature, pressure)) +
  geom_point() +
  geom_hline(yintercept = 300, linetype = 2, colour = "blue") +
  guides(y.sec = guide_axis_manual(breaks = 300, labels = "some\nthreshold",
                                   label_colour = "blue"))
</code></pre>

<hr>
<h2 id='guide_axis_minor'>Axis guide with ticks for minor breaks</h2><span id='topic+guide_axis_minor'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
These are similar the the normal axis guides for position scales, but also
place tickmarks at minor break positions.
The function is deprecated because it can be replaced with
<code>ggplot2::guide_axis(minor.ticks = TRUE)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_minor(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  colour = NULL,
  color = NULL,
  trunc_lower = NULL,
  trunc_upper = NULL,
  position = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_minor_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_angle">angle</code></td>
<td>
<p>Compared to setting the angle in <code><a href="ggplot2.html#topic+theme">theme()</a></code> / <code><a href="ggplot2.html#topic+element_text">element_text()</a></code>,
this also uses some heuristics to automatically pick the <code>hjust</code> and <code>vjust</code> that
you probably want. Can be one of the following:
</p>

<ul>
<li> <p><code>NULL</code> to take the angles and <code>hjust</code>/<code>vjust</code> directly from the theme.
</p>
</li>
<li> <p><code>waiver()</code> to allow reasonable defaults in special cases.
</p>
</li>
<li><p> A number representing the text angle in degrees.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_colour">colour</code>, <code id="guide_axis_minor_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_trunc_lower">trunc_lower</code>, <code id="guide_axis_minor_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_minor_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <em>axis_minor</em> guide class object.
</p>


<h3>Theme elements</h3>

<p>This axis guide uses the following the theme elements:
</p>

<dl>
<dt><code><a href="#topic+theme_extensions">ggh4x.axis.ticks.length.minor</a></code></dt><dd>
<p>An <code><a href="ggplot2.html#topic+element">rel()</a></code> object to set the size of minor ticks
relative to the length of major ticks (<code>axis.ticks.length</code>).
Defaults to <code>rel(2/3)</code>.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other axis-guides: 
<code><a href="#topic+guide_axis_logticks">guide_axis_logticks</a>()</code>,
<code><a href="#topic+guide_axis_manual">guide_axis_manual</a>()</code>,
<code><a href="#topic+guide_axis_nested">guide_axis_nested</a>()</code>,
<code><a href="#topic+guide_axis_scalebar">guide_axis_scalebar</a>()</code>,
<code><a href="#topic+guide_axis_truncated">guide_axis_truncated</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Using the minor breaks axis
p &lt;- ggplot(iris, aes(Sepal.Width, Sepal.Length)) +
  geom_point()
p + scale_y_continuous(guide = "axis_minor")

# Minor break positions are still controlled by the scale
p + scale_y_continuous(guide = "axis_minor",
                       minor_breaks = seq(4, 8, by = 0.2))

# Minor tick length is controlled relative to major ticks
p + scale_y_continuous(guide = "axis_minor") +
  theme(ggh4x.axis.ticks.length.minor = rel(0.1))
</code></pre>

<hr>
<h2 id='guide_axis_nested'>Nested axis guide</h2><span id='topic+guide_axis_nested'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
Discrete position scales containing interacting factors can be visualised
more clearly with a nested axis guide. Nested axis guides separate labels
based on a delimiter and groups identical later labels, indicating the
grouping with a line spanning the earlier labels.
The function is deprecated due to superior alternatives such as
<code>legendry::guide_axis_nested()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_nested(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  position = waiver(),
  delim = waiver(),
  inv = FALSE,
  trunc_lower = NULL,
  trunc_upper = NULL,
  colour = NULL,
  color = NULL,
  extend = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_nested_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_angle">angle</code></td>
<td>
<p>Compared to setting the angle in <code><a href="ggplot2.html#topic+theme">theme()</a></code> / <code><a href="ggplot2.html#topic+element_text">element_text()</a></code>,
this also uses some heuristics to automatically pick the <code>hjust</code> and <code>vjust</code> that
you probably want. Can be one of the following:
</p>

<ul>
<li> <p><code>NULL</code> to take the angles and <code>hjust</code>/<code>vjust</code> directly from the theme.
</p>
</li>
<li> <p><code>waiver()</code> to allow reasonable defaults in special cases.
</p>
</li>
<li><p> A number representing the text angle in degrees.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_delim">delim</code></td>
<td>
<p>A <code>character</code> of length 1 to tell <code>strsplit</code> how
hierarchies should be broken up. Internally defaults to <code>"."</code> to match
<code>interaction</code>'s default delimiter.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_inv">inv</code></td>
<td>
<p>A <code>logical(1)</code> which if <code>TRUE</code>, flips the grouping order. If
<code>FALSE</code> (default), the grouping order is as-is.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_trunc_lower">trunc_lower</code>, <code id="guide_axis_nested_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_colour">colour</code>, <code id="guide_axis_nested_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_nested_+3A_extend">extend</code></td>
<td>
<p>A <code>numeric</code> of length 1 indicating how much to extend
nesting lines relative to the smallest difference in break positions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The guide itself makes no effort to group and order labels. To get
nice groupings, consider re-ordering the levels of factor variables, or try
setting the 'breaks' argument of a scale appropriately.
</p>


<h3>Value</h3>

<p>A <em>axis_nested</em> guide class object.
</p>


<h3>Theme elements</h3>

<p>This axis guide uses the following the theme elements:
</p>

<dl>
<dt><code><a href="#topic+theme_extensions">ggh4x.axis.nestline.x/y</a></code></dt><dd>
<p>An <code><a href="ggplot2.html#topic+element">element_line()</a></code> object to alter the
display of the line separating different layers of labels.
</p>
</dd>
<dt><code><a href="#topic+theme_extensions">ggh4x.axis.nesttext.x/y</a></code></dt><dd>
<p>An <code><a href="ggplot2.html#topic+element">element_text()</a></code> object to differentiate
text higher up in the hierarchy, from the text closest to the axis line.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+guide_axis">ggplot2::guide_axis()</a></code> for the classic axis
documentation. <br /> <code><a href="#topic+weave_factors">weave_factors()</a></code> for an alternative to
<code>interaction()</code>.
</p>
<p>Other axis-guides: 
<code><a href="#topic+guide_axis_logticks">guide_axis_logticks</a>()</code>,
<code><a href="#topic+guide_axis_manual">guide_axis_manual</a>()</code>,
<code><a href="#topic+guide_axis_minor">guide_axis_minor</a>()</code>,
<code><a href="#topic+guide_axis_scalebar">guide_axis_scalebar</a>()</code>,
<code><a href="#topic+guide_axis_truncated">guide_axis_truncated</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The defaults are suited for interaction variables
ggplot(mpg, aes(interaction(cyl, class), hwy)) +
  geom_boxplot() +
  scale_x_discrete(guide = "axis_nested")

# Control where labels are cut with the delim argument
ggplot(mpg, aes(interaction(cyl, class, sep = "~!~"), hwy)) +
  geom_boxplot() +
  scale_x_discrete(guide = guide_axis_nested(delim = "!"))

# The nesting lines inherit looks from axis ticks
ggplot(mpg, aes(interaction(cyl, class), hwy)) +
  geom_boxplot() +
  scale_x_discrete(guide = "axis_nested") +
  theme(axis.ticks = element_line(colour = "red"))

# The looks can be controlled independently by setting `ggh4x.axis.nestline`
ggplot(mpg, aes(interaction(cyl, class), hwy)) +
  geom_boxplot() +
  scale_x_discrete(guide = "axis_nested") +
  theme(ggh4x.axis.nestline = element_line(linetype = 2))
</code></pre>

<hr>
<h2 id='guide_axis_scalebar'>Scale bar axis guide</h2><span id='topic+guide_axis_scalebar'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
This axis guides draws a scale bar to indicate a distance rather than
mark absolute values.
The function is deprecated due to superior alternatives such as
<code>legendry::primitive_bracket()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_scalebar(
  title = waiver(),
  size = NULL,
  label = NULL,
  colour = NULL,
  color = NULL,
  just = 1,
  position = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_scalebar_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_scalebar_+3A_size">size</code></td>
<td>
<p>A <code>numeric(1)</code> for a distance to indicate, in data units. If
<code>NULL</code> (default), the median distance between breaks is taken.</p>
</td></tr>
<tr><td><code id="guide_axis_scalebar_+3A_label">label</code></td>
<td>
<p>A <code>character(1)</code> to use as scale bar label. If <code>NULL</code> (default),
the <code>size</code> distance is fed to the scale's labeller.</p>
</td></tr>
<tr><td><code id="guide_axis_scalebar_+3A_colour">colour</code>, <code id="guide_axis_scalebar_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_scalebar_+3A_just">just</code></td>
<td>
<p>A <code>numeric(1)</code> between 0 and 1 to indicate where the scalebar
should be drawn relative to the plot panel. The default (1), places is
at the right or at the top.</p>
</td></tr>
<tr><td><code id="guide_axis_scalebar_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is discouraged to use this guide in combination with a scale
transformation.
</p>


<h3>Value</h3>

<p>A <code>axis_scalebar</code> guide class object.
</p>


<h3>Theme elements</h3>

<p>This axis guide has an alternative understanding of the following theme
elements:
</p>

<dl>
<dt><code style="white-space: pre;">&#8288;axis.ticks.*&#8288;</code></dt><dd>
<p>An <code>element_line()</code> to draw the scale bar itself.
</p>
</dd>
<dt><code style="white-space: pre;">&#8288;axis.ticks.length.*&#8288;</code></dt><dd>
<p>A <code>unit()</code> indicating how far the scale bar should be placed from the
plot panel. Can be a negative unit to place the scale bar inside the
plot panel.
</p>
</dd>
<dt><code style="white-space: pre;">&#8288;axis.text.*&#8288;</code></dt><dd>
<p>The <code>hjust</code> and <code>vjust</code> parameters are used to justify the text along
the scale bar, instead of along itself, in the <code>x</code> and <code>y</code> directions
respectively.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other axis-guides: 
<code><a href="#topic+guide_axis_logticks">guide_axis_logticks</a>()</code>,
<code><a href="#topic+guide_axis_manual">guide_axis_manual</a>()</code>,
<code><a href="#topic+guide_axis_minor">guide_axis_minor</a>()</code>,
<code><a href="#topic+guide_axis_nested">guide_axis_nested</a>()</code>,
<code><a href="#topic+guide_axis_truncated">guide_axis_truncated</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# Guide as secondary axis
p + guides(x.sec = "axis_scalebar")

# Customising size and label
p + guides(x.sec = guide_axis_scalebar(size = 0.5, label = "0.5 litre"))

# Placing the scale bar on top of the plotting panel
p + guides(x.sec = guide_axis_scalebar(just = 0.95)) +
  theme(axis.ticks.length.x.top = unit(-2, "lines"))

# Adding arrows through the axis.ticks theme element
p + guides(y.sec = guide_axis_scalebar(size = 10, label = "10\nmpg")) +
  theme(axis.ticks.y.right = element_line(arrow = arrow(ends = "both")))
</code></pre>

<hr>
<h2 id='guide_axis_truncated'>Axis guide with truncated line</h2><span id='topic+guide_axis_truncated'></span><span id='topic+guide_axis_colour'></span><span id='topic+guide_axis_color'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
This axis guide is similar to the normal axis guides for position scales, but
can shorten the axis line that is being drawn. The <code>guide_axis_colour()</code>
function is the same but with different defaults for the truncation that do
not truncate the axis. Axis truncation and recolouring is supported
throughout axes in ggh4x.
The function is deprecated as <code>ggplot2::guide_axis(cap = TRUE)</code> has this
functionality now.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_axis_truncated(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  colour = NULL,
  color = NULL,
  trunc_lower = min,
  trunc_upper = max,
  position = waiver()
)

guide_axis_colour(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  colour = NULL,
  color = NULL,
  trunc_lower = NULL,
  trunc_upper = NULL,
  position = waiver()
)

guide_axis_color(
  title = waiver(),
  check.overlap = FALSE,
  angle = NULL,
  n.dodge = 1,
  order = 0,
  colour = NULL,
  color = NULL,
  trunc_lower = NULL,
  trunc_upper = NULL,
  position = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_axis_truncated_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_angle">angle</code></td>
<td>
<p>Compared to setting the angle in <code><a href="ggplot2.html#topic+theme">theme()</a></code> / <code><a href="ggplot2.html#topic+element_text">element_text()</a></code>,
this also uses some heuristics to automatically pick the <code>hjust</code> and <code>vjust</code> that
you probably want. Can be one of the following:
</p>

<ul>
<li> <p><code>NULL</code> to take the angles and <code>hjust</code>/<code>vjust</code> directly from the theme.
</p>
</li>
<li> <p><code>waiver()</code> to allow reasonable defaults in special cases.
</p>
</li>
<li><p> A number representing the text angle in degrees.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_colour">colour</code>, <code id="guide_axis_truncated_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_trunc_lower">trunc_lower</code>, <code id="guide_axis_truncated_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_axis_truncated_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <em>axis_ggh4x</em> guide class object.
</p>


<h3>See Also</h3>

<p>Other axis-guides: 
<code><a href="#topic+guide_axis_logticks">guide_axis_logticks</a>()</code>,
<code><a href="#topic+guide_axis_manual">guide_axis_manual</a>()</code>,
<code><a href="#topic+guide_axis_minor">guide_axis_minor</a>()</code>,
<code><a href="#topic+guide_axis_nested">guide_axis_nested</a>()</code>,
<code><a href="#topic+guide_axis_scalebar">guide_axis_scalebar</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Make a plot
p &lt;- ggplot(mtcars, aes(wt, mpg)) +
  geom_point() +
  theme(axis.line = element_line(colour = "black"))

# Setting the default truncated axis
p + guides(x = "axis_truncated")

# Truncating in data units
p + guides(x = guide_axis_truncated(
  trunc_lower = 2.5, trunc_upper = 4.5
))

# Truncate by setting units
p + guides(x = guide_axis_truncated(
  trunc_lower = unit(0.1, "npc"),
  trunc_upper = unit(0.9, "npc")
))

# Truncating with functions
p + guides(x = guide_axis_truncated(
  trunc_lower = function(x) {x - 0.2},
  trunc_upper = function(x) {x + 0.2}
))

# Recolouring the axes outside the theme
p + guides(x = guide_axis_colour(colour = "red"),
           y = guide_axis_colour(colour = "blue"))
</code></pre>

<hr>
<h2 id='guide_dendro'>Dendrogram guide</h2><span id='topic+guide_dendro'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
Visual representation of a discrete variable with hierarchical relationships
between members, like those detailed in
<code><a href="#topic+scale_x_dendrogram">scale_(x|y)_dendrogram)()</a></code>. This function is
deprecated in favour of <code>legendry::guide_axis_dendro()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_dendro(
  title = waiver(),
  check.overlap = FALSE,
  n.dodge = 1,
  order = 0,
  position = waiver(),
  label = TRUE,
  trunc_lower = NULL,
  trunc_upper = NULL,
  colour = NULL,
  color = NULL,
  dendro = waiver()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_dendro_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_check.overlap">check.overlap</code></td>
<td>
<p>silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_n.dodge">n.dodge</code></td>
<td>
<p>The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_order">order</code></td>
<td>
<p>A positive <code>integer</code> of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_position">position</code></td>
<td>
<p>Where this guide should be drawn: one of top, bottom,
left, or right.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_label">label</code></td>
<td>
<p>A <code>logical(1)</code>. If <code>TRUE</code>, labels are drawn at the
dendrogram leaves. If <code>FALSE</code>, labels are not drawn.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_trunc_lower">trunc_lower</code>, <code id="guide_dendro_+3A_trunc_upper">trunc_upper</code></td>
<td>
<p>The lower and upper range of the truncated
axis:
</p>

<ul>
<li> <p><code>NULL</code> to not perform any truncation.
</p>
</li>
<li><p> A <code>function</code> that takes the break positions as input and returns the lower
or upper boundary. Note that also for discrete scales, positions are the
mapped positions as <code>numeric</code>.
</p>
</li>
<li><p> A <code>numeric</code> value in data units for the lower and upper boundaries.
</p>
</li>
<li><p> A <code>unit</code> object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="guide_dendro_+3A_colour">colour</code>, <code id="guide_dendro_+3A_color">color</code></td>
<td>
<p>A <code>character(1)</code> with a valid colour for colouring the
axis text, axis ticks and axis line. Overrules the colour assigned by the
theme.</p>
</td></tr>
<tr><td><code id="guide_dendro_+3A_dendro">dendro</code></td>
<td>
<p>Relevant plotting data for a dendrogram such as those returned
by <code><a href="ggdendro.html#topic+dendro_data">ggdendro::dendro_data()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dendrogram guide inherits graphical elements from the
<code>axis.ticks</code> theme element. However, the size of the dendrogram is set
to 10 times the <code>axis.ticks.length</code> theme element.
</p>


<h3>Value</h3>

<p>A <em>dendroguide</em> class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clust &lt;- hclust(dist(USArrests), "ave")

# Melting USArrests
df &lt;- data.frame(
  State = rownames(USArrests)[row(USArrests)],
  variable = colnames(USArrests)[col(USArrests)],
  value = unname(do.call(c, USArrests))
)

# The guide function can be used to customise the axis
g &lt;- ggplot(df, aes(variable, State, fill = value)) +
  geom_raster() +
  scale_y_dendrogram(hclust = clust,
                     guide = guide_dendro(n.dodge = 2))

# The looks of the dendrogram are controlled through ticks
g + theme(axis.ticks = element_line(colour = "red"))

# The size of the dendrogram is controlled through tick size * 10
g + theme(axis.ticks.length = unit(5, "pt"))
</code></pre>

<hr>
<h2 id='guide_stringlegend'>String legend</h2><span id='topic+guide_stringlegend'></span>

<h3>Description</h3>

<p>This type of legend shows colour and fill mappings as coloured text. It does
not draw keys as <code>guide_legend()</code> does.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guide_stringlegend(
  title = waiver(),
  theme = NULL,
  position = NULL,
  direction = NULL,
  nrow = NULL,
  ncol = NULL,
  reverse = FALSE,
  order = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="guide_stringlegend_+3A_title">title</code></td>
<td>
<p>A character string or expression indicating a title of guide.
If <code>NULL</code>, the title is not shown. By default
(<code><a href="ggplot2.html#topic+waiver">waiver()</a></code>), the name of the scale object or the name
specified in <code><a href="ggplot2.html#topic+labs">labs()</a></code> is used for the title.</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_theme">theme</code></td>
<td>
<p>A <code><a href="ggplot2.html#topic+theme">theme</a></code> object to style the guide individually or
differently from the plot's theme settings. The <code>theme</code> argument in the
guide overrides, and is combined with, the plot's theme.</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_position">position</code></td>
<td>
<p>A character string indicating where the legend should be
placed relative to the plot panels.</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_direction">direction</code></td>
<td>
<p>A character string indicating the direction of the guide.
One of &quot;horizontal&quot; or &quot;vertical.&quot;</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_nrow">nrow</code>, <code id="guide_stringlegend_+3A_ncol">ncol</code></td>
<td>
<p>The desired number of rows and column of legends
respectively.</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_reverse">reverse</code></td>
<td>
<p>logical. If <code>TRUE</code> the order of legends is reversed.</p>
</td></tr>
<tr><td><code id="guide_stringlegend_+3A_order">order</code></td>
<td>
<p>positive integer less than 99 that specifies the order of
this guide among multiple guides. This controls the order in which
multiple guides are displayed, not the contents of the guide itself.
If 0 (default), the order is determined by a secret algorithm.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>GuideStringlegend</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = manufacturer))

# String legend can be set in the `guides()` function
p + guides(colour = guide_stringlegend(ncol = 2))

# The string legend can also be set as argument to the scale
p + scale_colour_viridis_d(guide = "stringlegend")
</code></pre>

<hr>
<h2 id='help_secondary'>Secondary axis helper</h2><span id='topic+help_secondary'></span>

<h3>Description</h3>

<p>The purpose of this function is to construct a secondary axis with a
projection function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>help_secondary(
  data = NULL,
  primary = c(0, 1),
  secondary = c(0, 1),
  method = c("range", "max", "fit", "ccf", "sortfit"),
  na.rm = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="help_secondary_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> object.</p>
</td></tr>
<tr><td><code id="help_secondary_+3A_primary">primary</code>, <code id="help_secondary_+3A_secondary">secondary</code></td>
<td>
<p>An expression that is evaluated in the context of
the <code>data</code> argument. These can be symbols for column names or plain
expressions.</p>
</td></tr>
<tr><td><code id="help_secondary_+3A_method">method</code></td>
<td>
<p>One of the following: </p>

<dl>
<dt><code>"range"</code></dt><dd><p>Causes the ranges of <code>primary</code> and <code>secondary</code> data to
overlap completely.</p>
</dd>
<dt><code>"max"</code></dt><dd><p>Causes the maxima of <code>primary</code> and <code>secondary</code> data to
coincide.</p>
</dd>
<dt><code>"fit"</code></dt><dd><p>Uses the coefficients of <code>lm(primary ~ secondary)</code> to make
the axes fit.</p>
</dd>
<dt><code>"ccf"</code></dt><dd><p>Uses the lag at which maximum cross-correlation occurs to
then align the data by truncation. The aligned data is then passed to the
<code>"fit"</code> method.</p>
</dd>
<dt><code>"sortfit"</code></dt><dd><p>Sorts the both <code>primary</code> and <code>secondary</code> independently
before passing these on to the <code>"fit"</code> method.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="help_secondary_+3A_na.rm">na.rm</code></td>
<td>
<p>A <code>logical(1)</code>: whether to remove missing values (<code>TRUE</code>) or
propagate missing values (<code>FALSE</code>). Applies to the <code>method = "range"</code> and
<code>method = "max"</code> methods.</p>
</td></tr>
<tr><td><code id="help_secondary_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="ggplot2.html#topic+sec_axis">ggplot2::sec_axis</a></code>
</p>

<dl>
<dt><code>transform</code></dt><dd><p>A formula or function of a strictly monotonic transformation</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of the secondary axis</p>
</dd>
<dt><code>breaks</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks computed by the transformation object
</p>
</li>
<li><p> A numeric vector of positions
</p>
</li>
<li><p> A function that takes the limits as input and returns breaks as output
</p>
</li></ul>
</dd>
<dt><code>labels</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels as output
</p>
</li></ul>
</dd>
<dt><code>guide</code></dt><dd><p>A position guide that will be used to render
the axis on the plot. Usually this is <code><a href="ggplot2.html#topic+guide_axis">guide_axis()</a></code>.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>The intent is to run this function before starting a plot. The
output of the function is a secondary axis wherein the <code>trans</code> argument of
<code>sec_axis()</code> is populated by an appropriate transformation. In addition,
the output also contains a <code>output$proj()</code> function that helps transform the
secondary data.
</p>


<h3>Value</h3>

<p>An <code>AxisSecondary</code> ggproto object with a <code>proj</code> method for projecting
secondary data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Run the secondary axis helper
sec &lt;- help_secondary(economics, primary = unemploy, secondary = psavert)

# Making primary plot
p &lt;- ggplot(economics, aes(date)) +
  geom_line(aes(y = unemploy), colour = "blue")

# For the secondary data, later we use the `proj` function from the helper
p &lt;- p + geom_line(aes(y = sec$proj(psavert)), colour = "red")

# We feed the scale the secondary axis
p + scale_y_continuous(sec.axis = sec)

# Setup cross-correlated data
set.seed(42)
n &lt;- 100
lag &lt;- 20
dat &lt;- cumsum(rnorm(n + lag))
df &lt;- data.frame(
  x = seq_len(n),
  y1 = head(dat, n),
  y2 = 10 + tail(dat, n) * 5 # offset and scale y2
)
# Choosing the cross-correlation function method.
sec &lt;- help_secondary(df, y1, y2, method = "ccf")

ggplot(df, aes(x)) +
  geom_line(aes(y = y1), colour = "blue") +
  geom_line(aes(y = sec$proj(y2)), colour = "red") +
  scale_y_continuous(sec.axis = sec)
</code></pre>

<hr>
<h2 id='position_disjoint_ranges'>Segregating overlapping ranges</h2><span id='topic+position_disjoint_ranges'></span>

<h3>Description</h3>

<p>One-dimensional ranged data in the x-direction is segregated in
the y-direction such that no overlap in two-dimensional space occurs. This
positioning works best when no relevant information is plotted in the
y-direction.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>position_disjoint_ranges(extend = 1, stepsize = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="position_disjoint_ranges_+3A_extend">extend</code></td>
<td>
<p>a <code>numeric</code> of length 1 indicating how far a range should
be extended in total for calculating overlaps. Setting this argument to a
positive number leaves some space between ranges in the same bin.</p>
</td></tr>
<tr><td><code id="position_disjoint_ranges_+3A_stepsize">stepsize</code></td>
<td>
<p>a <code>numeric</code> of length 1 that determines how much space
is added between bins in the y-direction. A positive value grows the bins
from bottom to top, while a negative value grows the bins from top to
bottom.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object is considered disjoint from a second object when the range
between their <code>xmin</code> and <code>xmax</code> coordinates don't overlap.
Objects that overlap are assigned to different bins in the y-direction,
whereby lower bins are filled first. This way, information in the
x-direction is preserved and different objects can be discerned.
</p>
<p>Note that this positioning is only particularly useful when y-coordinates
do not encode relevant information. Geoms that pair well with this
positioning are <code><a href="ggplot2.html#topic+geom_tile">geom_rect()</a></code> and
<code><a href="ggplot2.html#topic+geom_tile">ggplot2::geom_tile()</a></code>.
</p>
<p>This positioning function was inspired by the <code>disjointBins()</code>
function in the <code>IRanges</code> package, but has been written such that it
accepts any numeric input next to solely integer input.
</p>


<h3>Value</h3>

<p>A <em>PositionDisjointRanges</em> object.
</p>


<h3>See Also</h3>

<p>The <code>disjointBins</code> function the Bioconductor IRanges package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Even though geom_tile() is parametrised by middle-x values, it is
# internally converted to xmin, xmax, ymin, ymax parametrisation so the
# positioning still works.

ggplot() +
  geom_tile(aes(x = rnorm(200), y = 0),
            width = 0.2, height = 0.9,
            position = position_disjoint_ranges(extend = 0.1))
</code></pre>

<hr>
<h2 id='position_lineartrans'>Linearly transform coordinates</h2><span id='topic+position_lineartrans'></span>

<h3>Description</h3>

<p>Transforms coordinates in two dimensions in a linear manner for layers that
have an <code>x</code> and <code>y</code> parametrisation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>position_lineartrans(scale = c(1, 1), shear = c(0, 0), angle = 0, M = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="position_lineartrans_+3A_scale">scale</code></td>
<td>
<p>A <code>numeric</code> of length two describing relative units with
which to multiply the <code>x</code> and <code>y</code> coordinates respectively.</p>
</td></tr>
<tr><td><code id="position_lineartrans_+3A_shear">shear</code></td>
<td>
<p>A <code>numeric</code> of length two giving relative units by which to
shear the output. The first number is for vertical shearing whereas the
second is for horizontal shearing.</p>
</td></tr>
<tr><td><code id="position_lineartrans_+3A_angle">angle</code></td>
<td>
<p>A <code>numeric</code> noting an angle in degrees by which to rotate
the input clockwise.</p>
</td></tr>
<tr><td><code id="position_lineartrans_+3A_m">M</code></td>
<td>
<p>A <code>2</code> x <code>2</code> real <code>matrix</code>: the transformation matrix
for linear mapping. Overrides other arguments if provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Linear transformation matrices are <code>2</code> x <code>2</code> real
matrices. The '<code>scale</code>', '<code>shear</code>' and '<code>rotation</code>'
arguments are convenience arguments to construct a transformation matrix.
These operations occur in the order: scaling - shearing - rotating. To
apply the transformations in another order, build a custom '<code>M</code>'
argument.
</p>
<p>For some common transformations, you can find appropriate matrices for the
'<code>M</code>' argument below.
</p>


<h3>Value</h3>

<p>A <em>PositionLinearTrans</em> ggproto object.
</p>


<h3>Common transformations</h3>



<h4>Identity transformations</h4>

<p>An
identity transformation, or returning the original coordinates, can be
performed by using the following transformation matrix: <br /><br /><code style="white-space: pre;">&#8288;| 1 0 |&#8288;</code><br /><code style="white-space: pre;">&#8288;| 0 1 |&#8288;</code><br /><br /> or <br /><br /><code>M &lt;- matrix(c(1, 0, 0, 1), 2)</code></p>



<h4>Scaling</h4>

<p>A scaling transformation multiplies the dimension of
an object by some amount. An example transformation matrix for scaling
everything by a factor 2: <br /><br /><code style="white-space: pre;">&#8288;| 2 0 |&#8288;</code><br /><code style="white-space: pre;">&#8288;| 0 2 |&#8288;</code><br /><br /> or
<br /><br /><code>M &lt;- matrix(c(2, 0, 0, 2), 2)</code></p>
 

<h4>Squeezing</h4>

<p>Similar
to scaling, squeezing multiplies the dimensions by some amount that is
unequal for the <code>x</code> and <code>y</code> coordinates. For example, squeezing
<code>y</code> by half and expanding <code>x</code> by two: </p>

<table>
<tr>
 <td style="text-align: center;"> |
</td><td style="text-align: center;"></td><td style="text-align: left;"> <code>2</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code>
</td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0.5</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(2, 0, 0, 0.5), 2)</code></p>
 

<h4>Reflection</h4>

<p>Mirroring the coordinates around one of
the axes. Reflecting around the x-axis: </p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;">
<code>1</code> </td><td style="text-align: center;"></td><td style="text-align: right;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: right;">
<code>-1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(1, 0, 0, -1), 2)</code>
<br /><br /> Reflecting around the y-axis: </p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: right;">
<code>-1</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: right;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: left;">
<code>1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(-1, 0, 0, 1), 2)</code> </p>



<h4>Projection</h4>

<p>For projecting the coordinates on one of the axes,
while collapsing everything from the other axis. Projecting onto the
<code>y</code>-axis: </p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code>
</td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or
<br /><br /> <code>M &lt;- matrix(c(0, 0, 0, 1), 2)</code> <br /><br /> Projecting onto the
<code>x</code>-axis: </p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code>
</td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or
<br /><br /> <code>M &lt;- matrix(c(1, 0, 0, 0), 2)</code> </p>
 

<h4>Shearing</h4>

<p>Tilting
the coordinates horizontally or vertically. Shearing vertically by 10\
</p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> |
</td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0.1</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(1, 0.1, 0, 1), 2)</code> <br /><br /> Shearing horizontally by 200\
</p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>2</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> |
</td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(1, 0, 2, 1), 2)</code> </p>
 

<h4>Rotation</h4>

<p>A rotation performs a
motion around a fixed point, typically the origin the coordinate system. To
rotate the coordinates by 90 degrees counter-clockwise: </p>

<table>
<tr>
 <td style="text-align: center;"> |
</td><td style="text-align: center;"></td><td style="text-align: left;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: right;"> <code>-1</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code>1</code>
</td><td style="text-align: center;"></td><td style="text-align: right;"> <code>0</code> </td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(0, 1, -1, 0), 2)</code> <br /><br /> For a rotation around any angle <code class="reqn">\theta</code> :
</p>

<table>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code class="reqn">cos\theta</code> </td><td style="text-align: center;"></td><td style="text-align: right;"> <code class="reqn">-sin\theta</code>
</td><td style="text-align: center;"></td><td style="text-align: center;"> | </td>
</tr>
<tr>
 <td style="text-align: center;"> | </td><td style="text-align: center;"></td><td style="text-align: left;"> <code class="reqn">sin\theta</code> </td><td style="text-align: center;"></td><td style="text-align: right;"> <code class="reqn">cos\theta</code> </td><td style="text-align: center;"></td><td style="text-align: center;">
| </td>
</tr>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>
<p> or <br /><br /> <code>M &lt;- matrix(c(cos(theta), sin(theta), -sin(theta), cos(theta)), 2)</code> <br /> with '<code>theta</code>' defined in radians. </p>



<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(x = c(0, 1, 1, 0),
                 y = c(0, 0, 1, 1))
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(angle = 30))

# Custom transformation matrices
# Rotation
theta &lt;- -30 * pi / 180
rot &lt;- matrix(c(cos(theta), sin(theta), -sin(theta), cos(theta)), 2)
# Shear
shear &lt;- matrix(c(1, 0, 1, 1), 2)

# Shear and then rotate
M &lt;- rot %*% shear
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(M = M))
# Alternative shear and then rotate
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(shear = c(0, 1), angle = 30))

# Rotate and then shear
M &lt;- shear %*% rot
ggplot(df, aes(x, y)) +
  geom_polygon(position = position_lineartrans(M = M))
</code></pre>

<hr>
<h2 id='scale_dendrogram'>Dendrogram position scales</h2><span id='topic+scale_dendrogram'></span><span id='topic+scale_x_dendrogram'></span><span id='topic+scale_y_dendrogram'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
When discrete data has some inherent hierarchy to the relationship between
discrete categories, you can display a dendrogram instead of a tick axis.
These functions have been deprecated in favour of
<code style="white-space: pre;">&#8288;legendry::scale_{x/y}_dendro()&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_dendrogram(
  ...,
  hclust = waiver(),
  expand = waiver(),
  guide = waiver(),
  position = "bottom"
)

scale_y_dendrogram(
  ...,
  hclust = waiver(),
  expand = waiver(),
  guide = waiver(),
  position = "left"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_dendrogram_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="ggplot2.html#topic+discrete_scale">ggplot2::discrete_scale</a></code>
</p>

<dl>
<dt><code>aesthetics</code></dt><dd><p>The names of the aesthetics that this scale works with.</p>
</dd>
<dt><code>scale_name</code></dt><dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> The name of the scale
that should be used for error messages associated with this scale.</p>
</dd>
<dt><code>palette</code></dt><dd><p>A palette function that when called with a single integer
argument (the number of levels in the scale) returns the values that
they should take (e.g., <code><a href="scales.html#topic+pal_hue">scales::pal_hue()</a></code>).</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of the scale. Used as the axis or legend title. If
<code>waiver()</code>, the default, the name of the scale is taken from the first
mapping used for that aesthetic. If <code>NULL</code>, the legend title will be
omitted.</p>
</dd>
<dt><code>labels</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> An expression vector (must be the same length as breaks). See ?plotmath for details.
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels
as output. Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> function
notation.
</p>
</li></ul>
</dd>
<dt><code>limits</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> to use the default scale values
</p>
</li>
<li><p> A character vector that defines possible values of the scale and their
order
</p>
</li>
<li><p> A function that accepts the existing (automatic) values and returns
new ones. Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> function
notation.
</p>
</li></ul>
</dd>
<dt><code>na.translate</code></dt><dd><p>Unlike continuous scales, discrete scales can easily show
missing values, and do so by default. If you want to remove missing values
from a discrete scale, specify <code>na.translate = FALSE</code>.</p>
</dd>
<dt><code>na.value</code></dt><dd><p>If <code>na.translate = TRUE</code>, what aesthetic value should the
missing values be displayed as? Does not apply to position scales
where <code>NA</code> is always placed at the far right.</p>
</dd>
<dt><code>drop</code></dt><dd><p>Should unused factor levels be omitted from the scale?
The default, <code>TRUE</code>, uses the levels that appear in the data;
<code>FALSE</code> includes the levels in the factor. Please note that to display
every level in a legend, the layer should use <code>show.legend = TRUE</code>.</p>
</dd>
<dt><code>call</code></dt><dd><p>The <code>call</code> used to construct the scale for reporting messages.</p>
</dd>
<dt><code>super</code></dt><dd><p>The super class to use for the constructed scale</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="scale_dendrogram_+3A_hclust">hclust</code></td>
<td>
<p>An object of the type produced by the
<code><a href="stats.html#topic+hclust">stats::hclust()</a></code> function.</p>
</td></tr>
<tr><td><code id="scale_dendrogram_+3A_expand">expand</code></td>
<td>
<p>For position scales, a vector of range expansion constants used to add some
padding around the data to ensure that they are placed some distance
away from the axes. Use the convenience function <code><a href="ggplot2.html#topic+expansion">expansion()</a></code>
to generate the values for the <code>expand</code> argument. The defaults are to
expand the scale by 5% on each side for continuous variables, and by
0.6 units on each side for discrete variables.</p>
</td></tr>
<tr><td><code id="scale_dendrogram_+3A_guide">guide</code></td>
<td>
<p>A function used to create a guide or its name. See
<code><a href="ggplot2.html#topic+guides">guides()</a></code> for more information.</p>
</td></tr>
<tr><td><code id="scale_dendrogram_+3A_position">position</code></td>
<td>
<p>For position scales, The position of the axis.
<code>left</code> or <code>right</code> for y axes, <code>top</code> or <code>bottom</code> for x axes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dendrogram type of scale does two things, first it reorders the
values along the relevant direction such that they follow the order
captured in the <code>hclust</code> argument. Secondly, it draws the dendrogram
at the axis. The dendrogram visuals inherit from the ticks theme elements,
so defining a linetype for the tick marks sets the linetype for the
dendrogram.
</p>


<h3>Value</h3>

<p>A <em>ScaleDendrogram</em> ggproto object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hierarchically cluster USArrests
yclus &lt;- hclust(dist(USArrests), "ave")
xclus &lt;- hclust(dist(t(USArrests)), "ave")

# Melting USArrests
df &lt;- data.frame(
  State = rownames(USArrests)[row(USArrests)],
  variable = colnames(USArrests)[col(USArrests)],
  value = unname(do.call(c, USArrests))
)

# Supply the clustering to the scales
ggplot(df, aes(variable, State, fill = value)) +
  geom_raster() +
  scale_y_dendrogram(hclust = yclus) +
  scale_x_dendrogram(hclust = xclus)
</code></pre>

<hr>
<h2 id='scale_facet'>Position scales for individual panels in facets</h2><span id='topic+scale_facet'></span><span id='topic+scale_x_facet'></span><span id='topic+scale_y_facet'></span>

<h3>Description</h3>

<p>This function adds position scales (x and y) of individual panels. These
can be used to fine-tune limits, breaks and other scale parameters for
individual panels, provided the facet allows free scales.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_facet(expr, ..., type = "continuous")

scale_y_facet(expr, ..., type = "continuous")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_facet_+3A_expr">expr</code></td>
<td>
<p>An <code>expression</code> that, when evaluated in the facet's layout
data.frame, yields a <code>logical</code> vector. See details.</p>
</td></tr>
<tr><td><code id="scale_facet_+3A_...">...</code></td>
<td>
<p>Other arguments passed to the scale.</p>
</td></tr>
<tr><td><code id="scale_facet_+3A_type">type</code></td>
<td>
<p>A <code>character(1)</code> indicating the type of scale, such that
<code style="white-space: pre;">&#8288;scale_(x/y)_{type}&#8288;</code> spells a scale function. Defaults to <code>"continuous"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These scale functions work through the mechanism of the
<code><a href="#topic+facetted_pos_scales">facetted_pos_scales()</a></code> function, and the same limitations apply: scale
transformations are applied after <code>stat</code> transformations, and the <code>oob</code>
argument of scales is ignored.
</p>
<p>For the <code>expr</code> argument, the expression will be evaluated in the context
of the plot's layout. This is an internal <code>data.frame</code> structure that
isn't normally exposed, so it requires some extra knowledge. For most
facets, the layout describes the panels, with one panel per row. It
typically has <code>COL</code>, <code>ROW</code> and <code>PANEL</code> columns that keep track of what
panel goes where in a grid of cells. In addition, it contains the
facetting variables provided to the <code>facets</code> or <code>rows</code> and <code>cols</code> arguments
of the facets. For example, if we have a plot facetted on the <code>var</code>
variable with the levels <code>A</code>, <code>B</code> and <code>C</code>, as 1 row and 3 columns, we might
target the second <code>B</code> panel with any of these expressions: <code>var == "B"</code>,
<code>PANEL == 2</code> or <code>COL == 2</code>. We can inspect the layout structure by using
<code>ggplot_build(p)$layout$layout</code>, wherein <code>p</code> is a plot.
</p>
<p>When using multiple <code style="white-space: pre;">&#8288;scale_(x/y)_facet()&#8288;</code>, the <code>expr</code> argument can target
the same panels. In such case, the scales added to the plot first overrule
the scales that were added later.
</p>


<h3>Value</h3>

<p>A <code>scale_facet</code> object that can be added to a plot.
</p>


<h3>See Also</h3>

<p>The <code><a href="#topic+facetted_pos_scales">facetted_pos_scales()</a></code> function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot with continuous scales
p &lt;- ggplot(mtcars, aes(disp, mpg)) +
  geom_point() +
  facet_wrap(~ cyl, scales = "free")

# Adding a scale for a value for a facetting variable
p + scale_x_facet(cyl == 8, limits = c(200, 600))

# Adding a scale by position in the layout
p + scale_x_facet(COL == 3, limits = c(200, 600))

# Setting the default scale and making an exception for one panel
p + scale_y_continuous(limits = c(0, 40)) +
  scale_y_facet(PANEL == 1, limits = c(10, 50))

# Using multiple panel-specific scales
p + scale_y_facet(PANEL == 1, limits = c(10, 50)) +
  scale_y_facet(cyl == 6, breaks = scales::breaks_width(0.5))

# When multiple scales target the same panel, the scale added first gets
# priority over scales added later.
p + scale_y_facet(COL == 2, limits = c(10, 40)) +
  scale_y_facet(cyl %in% c(4, 6), breaks = scales::breaks_width(1))

# A standard plot with discrete x scales
p &lt;- ggplot(mtcars, aes(factor(cyl), mpg)) +
  geom_boxplot() +
  facet_wrap(~ vs, scales = "free")

# Expanding limits to show every level
p + scale_x_facet(vs == 1, limits = factor(c(4, 6, 8)), type = "discrete")

# Shrinking limits to hide a level
p + scale_x_facet(vs == 0, limits = factor(c(4, 6)), type = "discrete")
</code></pre>

<hr>
<h2 id='scale_fill_multi'>Multiple gradient colour scales</h2><span id='topic+scale_fill_multi'></span><span id='topic+scale_colour_multi'></span>

<h3>Description</h3>

<p>Maps multiple aesthetics to multiple colour fill gradient
scales. It takes in listed arguments for each aesthetic and disseminates
these to <code><a href="ggplot2.html#topic+continuous_scale">ggplot2::continuous_scale()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_fill_multi(
  ...,
  colours,
  values = NULL,
  na.value = "transparent",
  guide = "colourbar",
  aesthetics = "fill",
  colors
)

scale_colour_multi(
  ...,
  colours,
  values = NULL,
  na.value = "transparent",
  guide = "colourbar",
  aesthetics = "colour",
  colors
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_fill_multi_+3A_...">...</code>, <code id="scale_fill_multi_+3A_colours">colours</code>, <code id="scale_fill_multi_+3A_values">values</code>, <code id="scale_fill_multi_+3A_na.value">na.value</code>, <code id="scale_fill_multi_+3A_guide">guide</code>, <code id="scale_fill_multi_+3A_colors">colors</code></td>
<td>
<p>listed arguments in
<code><a href="ggplot2.html#topic+scale_gradient">scale_colour_gradientn()</a></code> (e.g. <code>colours = list(c("white", "red"), c("black", "blue"))</code>).</p>
</td></tr>
<tr><td><code id="scale_fill_multi_+3A_aesthetics">aesthetics</code></td>
<td>
<p>a <code>character</code> vector with names of aesthetic mapping.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function should only be called after all layers that this
function affects are added to the plot.
</p>
<p>The list elements of the listed arguments are assumed to follow the
<code>aesthetics</code> order, i.e. the n<em>th</em> list element belongs to the n<em>th</em>
aesthetic. When there are more list elements than n aesthetics, only the
first n<em>th</em> list elements are taken. When there are more <code>aesthetics</code>
than list elements, the first list element is used for the remaining
aesthethics.
</p>
<p>In contrast to other <code style="white-space: pre;">&#8288;scale_*_continous&#8288;</code>-family functions, the
<code>guide</code> argument is interpreted before adding it to the plot instead
of at the time of plot building. This behaviour ensures that the
<code>available_aes</code> argument of the guides are set correctly, but may
interfere with the <code><a href="ggplot2.html#topic+guides">ggplot2::guides()</a></code> function.
</p>


<h3>Value</h3>

<p>A nested list-like structure of the class <code>MultiScale</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Setup dummy data
df &lt;- rbind(data.frame(x = 1:3, y = 1, v = NA, w = 1:3, z = NA),
            data.frame(x = 1:3, y = 2, v = 1:3, w = NA, z = NA),
            data.frame(x = 1:3, y = 3, v = NA, w = NA, z = 1:3))

ggplot(df, aes(x, y)) +
  geom_raster(aes(fill1 = v)) +
  geom_raster(aes(fill2 = w)) +
  geom_raster(aes(fill3 = z)) +
  scale_fill_multi(aesthetics = c("fill1", "fill2", "fill3"),
                   colours = list(c("white", "red"),
                                  c("black", "blue"),
                                  c("grey50", "green")))
</code></pre>

<hr>
<h2 id='scale_listed'>Add a list of scales for non-standard aesthetics</h2><span id='topic+scale_listed'></span>

<h3>Description</h3>

<p>This function should only be called after all layers that the
non-standard aesthetic scales affects have been added to the plot.
</p>
<p>Inside a layer, the non-standard aesthetic should be part of the call to
<code>aes</code> mapping.
</p>
<p>May return a warning that the plot is ignoring unknown aesthetics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_listed(scalelist, replaces = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_listed_+3A_scalelist">scalelist</code></td>
<td>
<p>A <code>list</code> wherein elements are the results of calls to a
scale function with a non-standard aesthetic set as the <code>aesthetic</code>
argument.</p>
</td></tr>
<tr><td><code id="scale_listed_+3A_replaces">replaces</code></td>
<td>
<p>A <code>character</code> vector of the same length as- and parallel
to- <code>scalelist</code>, indicating what standard aesthetic to replace with
the non-standard aesthetic. Typically <code>"colour"</code> or <code>"fill"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Distributes a list of non-standard aesthetics scales to the plot,
substituting geom and scale settings as necessary to display the non-standard
aesthetics. Useful for mapping different geoms to different scales for
example.
</p>


<h3>Value</h3>

<p>A <code>list</code> of which the elements are of the class
<code>MultiScale</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Annotation of heatmap
iriscor &lt;- cor(t(iris[, 1:4]))

df &lt;- data.frame(
  x = as.vector(row(iriscor)),
  y = as.vector(col(iriscor)),
  value = as.vector(iriscor)
)

annotation &lt;- data.frame(
  z = seq_len(nrow(iris)),
  Species = iris$Species,
  Leaves = ifelse(iris$Species == "setosa", "Short", "Long")
)

ggplot(df, aes(x, y)) +
  geom_raster(aes(fill = value)) +
  geom_tile(data = annotation,
            aes(x = z, y = -5, spec = Species), height = 5) +
  geom_tile(data = annotation,
            aes(y = z, x = -5, leav = Leaves), width = 5) +
  scale_listed(
    list(scale_fill_brewer(palette = "Set1", aesthetics = "spec"),
         scale_fill_brewer(palette = "Dark2", aesthetics = "leav")),
    replaces = c("fill", "fill")
  )
</code></pre>

<hr>
<h2 id='scale_x_manual'>Manual position scales</h2><span id='topic+scale_x_manual'></span><span id='topic+scale_y_manual'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>scale_x_manual()</code> and <code>scale_y_manual()</code> are hybrid discrete and continuous
position scales for the <code>x</code> and <code>y</code> aesthetics. These accept input like
<a href="ggplot2.html#topic+scale_discrete">discrete scales</a>, but may map these discrete
values to continuous values that needn't be equally spaced.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_manual(values, c_limits = NULL, position = "bottom", ...)

scale_y_manual(values, c_limits = NULL, position = "left", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_manual_+3A_values">values</code></td>
<td>
<p>A <code>numeric</code> vector with the same length as unique values.
Alternatively, a function that accepts the limits (unique values) as
determined from the data and returns a <code>numeric</code> vector parallel to the
input.</p>
</td></tr>
<tr><td><code id="scale_x_manual_+3A_c_limits">c_limits</code></td>
<td>
<p>Either <code>NULL</code> (default) to accept the range of <code>values</code> as
the continuous limits, or a <code>numeric(2)</code> to set custom continuous limits.</p>
</td></tr>
<tr><td><code id="scale_x_manual_+3A_position">position</code></td>
<td>
<p>For position scales, The position of the axis.
<code>left</code> or <code>right</code> for y axes, <code>top</code> or <code>bottom</code> for x axes.</p>
</td></tr>
<tr><td><code id="scale_x_manual_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="ggplot2.html#topic+discrete_scale">ggplot2::discrete_scale</a></code>
</p>

<dl>
<dt><code>scale_name</code></dt><dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> The name of the scale
that should be used for error messages associated with this scale.</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of the scale. Used as the axis or legend title. If
<code>waiver()</code>, the default, the name of the scale is taken from the first
mapping used for that aesthetic. If <code>NULL</code>, the legend title will be
omitted.</p>
</dd>
<dt><code>breaks</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks (the scale limits)
</p>
</li>
<li><p> A character vector of breaks
</p>
</li>
<li><p> A function that takes the limits as input and returns breaks
as output. Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> function
notation.
</p>
</li></ul>
</dd>
<dt><code>labels</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> An expression vector (must be the same length as breaks). See ?plotmath for details.
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels
as output. Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> function
notation.
</p>
</li></ul>
</dd>
<dt><code>limits</code></dt><dd><p>One of:
</p>

<ul>
<li> <p><code>NULL</code> to use the default scale values
</p>
</li>
<li><p> A character vector that defines possible values of the scale and their
order
</p>
</li>
<li><p> A function that accepts the existing (automatic) values and returns
new ones. Also accepts rlang <a href="rlang.html#topic+as_function">lambda</a> function
notation.
</p>
</li></ul>
</dd>
<dt><code>expand</code></dt><dd><p>For position scales, a vector of range expansion constants used to add some
padding around the data to ensure that they are placed some distance
away from the axes. Use the convenience function <code><a href="ggplot2.html#topic+expansion">expansion()</a></code>
to generate the values for the <code>expand</code> argument. The defaults are to
expand the scale by 5% on each side for continuous variables, and by
0.6 units on each side for discrete variables.</p>
</dd>
<dt><code>na.translate</code></dt><dd><p>Unlike continuous scales, discrete scales can easily show
missing values, and do so by default. If you want to remove missing values
from a discrete scale, specify <code>na.translate = FALSE</code>.</p>
</dd>
<dt><code>na.value</code></dt><dd><p>If <code>na.translate = TRUE</code>, what aesthetic value should the
missing values be displayed as? Does not apply to position scales
where <code>NA</code> is always placed at the far right.</p>
</dd>
<dt><code>drop</code></dt><dd><p>Should unused factor levels be omitted from the scale?
The default, <code>TRUE</code>, uses the levels that appear in the data;
<code>FALSE</code> includes the levels in the factor. Please note that to display
every level in a legend, the layer should use <code>show.legend = TRUE</code>.</p>
</dd>
<dt><code>guide</code></dt><dd><p>A function used to create a guide or its name. See
<code><a href="ggplot2.html#topic+guides">guides()</a></code> for more information.</p>
</dd>
<dt><code>call</code></dt><dd><p>The <code>call</code> used to construct the scale for reporting messages.</p>
</dd>
<dt><code>super</code></dt><dd><p>The super class to use for the constructed scale</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>Many thanks to Constantin Ahlmann-Eltze for discussion and suggesting
the adoption of this functionality in ggh4x.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;ScaleManualPosition&gt;&#8288;</code> object that can be added to a plot.
</p>


<h3>Note</h3>

<p>There currently is a known bug wherein a <code>c_limits</code> cannot be applied
correctly when that range is within the range of the discrete limits.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sep_discrete">sep_discrete()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A boxplot with interactions
p &lt;- ggplot(mpg, aes(interaction(year, cyl), displ)) +
  geom_boxplot()

# Manually setting positions
p + scale_x_manual(values = c(1, 2, 4, 6, 7, 9, 10))

# Using a function to separate grouped labels
p + scale_x_manual(values = sep_discrete())

# Expanding the continuous limits
p + scale_x_manual(values = sep_discrete(), c_limits = c(NA, 15))

# Together with grouped axis
p + scale_x_manual(values = sep_discrete(), guide = guide_axis_nested())
</code></pre>

<hr>
<h2 id='sep_discrete'>Separator for discrete grouped labels</h2><span id='topic+sep_discrete'></span>

<h3>Description</h3>

<p>This is a function factory that provides a function to split grouped discrete
labels into numerical positions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sep_discrete(sep = ".", inv = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sep_discrete_+3A_sep">sep</code></td>
<td>
<p>A <code>character(1)</code> separator to use for splitting. May not contain
regular expressions.</p>
</td></tr>
<tr><td><code id="sep_discrete_+3A_inv">inv</code></td>
<td>
<p>A <code>logical(1)</code> whether to invert the layering of groups.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>function</code> that accepts <code>character</code> input and returns
<code>numeric</code> output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Here, 'bar.qux' belongs to the second group, so has +1 value
sep_discrete()(c("foo.bar", "bar.bar", "bar.qux"))

# Now, the values are grouped by the groups before the separator
sep_discrete(inv = TRUE)(c("foo.bar", "bar.bar", "bar.qux"))
</code></pre>

<hr>
<h2 id='stat_difference'>Difference ribbon</h2><span id='topic+stat_difference'></span>

<h3>Description</h3>

<p>This makes a ribbon that is filled depending on whether the <code>max</code> is
higher than <code>min</code>. This can be useful for displaying differences
between two series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_difference(
  mapping = NULL,
  data = NULL,
  geom = "ribbon",
  position = "identity",
  ...,
  levels = c("+", "-"),
  na.rm = FALSE,
  orientation = NA,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_difference_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_geom">geom</code></td>
<td>
<p>Use to override the default connection between
<code>geom_ribbon()</code> and <code>stat_difference()</code>.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_difference_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_difference_+3A_levels">levels</code></td>
<td>
<p>A <code>character(2)</code> indicating factor levels for the <code>fill</code>
aesthetic for the cases where (1) <code>max &gt; min</code> and where (2) <code>max &lt; min</code>.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_orientation">orientation</code></td>
<td>
<p>The orientation of the layer. The default (<code>NA</code>)
automatically determines the orientation from the aesthetic mapping. In the
rare event that this fails it can be given explicitly by setting <code>orientation</code>
to either <code>"x"</code> or <code>"y"</code>. See the <em>Orientation</em> section for more detail.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_difference_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The stat may reorder the <code>group</code> aesthetic to accommodate two
different fills for the signs of differences. The stat takes care to
interpolate a series whenever a crossover between <code>max</code> and <code>min</code> series
happens. This makes the ribbon not look stumpy at these crossovers.
</p>


<h3>Value</h3>

<p>A <code>Layer</code> object that can be added to a plot.
</p>


<h3>Aesthetics</h3>

<p><code>geom_ribbon()</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">x</a></code> <em>or</em> <code><a href="ggplot2.html#topic+aes_position">y</a></code></strong>
</p>
</li>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">ymin</a></code> <em>or</em> <code><a href="ggplot2.html#topic+aes_position">xmin</a></code></strong>
</p>
</li>
<li> <p><strong><code><a href="ggplot2.html#topic+aes_position">ymax</a></code> <em>or</em> <code><a href="ggplot2.html#topic+aes_position">xmax</a></code></strong>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">alpha</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">colour</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_colour_fill_alpha">fill</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_group_order">group</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_linetype_size_shape">linetype</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+aes_linetype_size_shape">linewidth</a></code>
</p>
</li></ul>

<p>Learn more about setting these aesthetics in <code>vignette("ggplot2-specs")</code>.
</p>


<h3>Computed variables</h3>


<dl>
<dt><code>sign</code></dt><dd><p>A <code>factor</code> with the <code>levels</code> attribute set to the <code>levels</code>
argument.</p>
</dd>
</dl>



<h3>Note</h3>

<p>When there is a run of more than two 0-difference values, the inner values
will be ignored.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(2021)
df &lt;- data.frame(
  x = 1:100,
  y = cumsum(rnorm(100)),
  z = cumsum(rnorm(100))
)

ggplot(df, aes(x = x)) +
  stat_difference(aes(ymin = y, ymax = z), alpha = 0.3) +
  geom_line(aes(y = y, colour = "min")) +
  geom_line(aes(y = z, colour = "max"))
</code></pre>

<hr>
<h2 id='stat_funxy'>Apply function to position coordinates</h2><span id='topic+stat_funxy'></span><span id='topic+stat_centroid'></span><span id='topic+stat_midpoint'></span>

<h3>Description</h3>

<p>The function xy stat applies a function to the x- and y-coordinates of a
layers positions by group. The <code>stat_centroid()</code> and
<code>stat_midpoint()</code> functions are convenience wrappers for calculating
centroids and midpoints. <code>stat_funxy()</code> by default leaves the data
as-is, but can be supplied functions and arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_funxy(
  mapping = NULL,
  data = NULL,
  geom = "point",
  position = "identity",
  ...,
  funx = force,
  funy = force,
  argx = list(),
  argy = list(),
  crop_other = TRUE,
  show.legend = NA,
  inherit.aes = TRUE
)

stat_centroid(
  ...,
  funx = mean,
  funy = mean,
  argx = list(na.rm = TRUE),
  argy = list(na.rm = TRUE)
)

stat_midpoint(..., argx = list(na.rm = TRUE), argy = list(na.rm = TRUE))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_funxy_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_geom">geom</code></td>
<td>
<p>The geometric object to use to display the data for this layer.
When using a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function to construct a layer, the <code>geom</code> argument
can be used to override the default coupling between stats and geoms. The
<code>geom</code> argument accepts the following:
</p>

<ul>
<li><p> A <code>Geom</code> ggproto subclass, for example <code>GeomPoint</code>.
</p>
</li>
<li><p> A string naming the geom. To give the geom as a string, strip the
function name of the <code>geom_</code> prefix. For example, to use <code>geom_point()</code>,
give the geom as <code>"point"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the geom, see the
<a href="ggplot2.html#topic+layer_geoms">layer geom</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_funxy_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_funxy_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_funxy_+3A_funx">funx</code>, <code id="stat_funxy_+3A_funy">funy</code></td>
<td>
<p>A <code>function</code> to call on the layer's <code>x</code> and
<code>y</code> positions respectively.</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_argx">argx</code>, <code id="stat_funxy_+3A_argy">argy</code></td>
<td>
<p>A named <code>list</code> containing arguments to the <code>funx</code>,
and <code>funy</code> function calls.</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_crop_other">crop_other</code></td>
<td>
<p>A <code>logical</code> of length one; whether the other data
should be fitted to the length of <code>x</code> and <code>y</code> (default:
<code>TRUE</code>). Useful to set to <code>FALSE</code> when <code>funx</code> or <code>funy</code>
calculate summaries of length one that need to be recycled.</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_funxy_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This statistic only makes a minimal attempt at ensuring that the
results from calling both functions are of equal length. Results of length
1 are recycled to match the longest length result.
</p>


<h3>Value</h3>

<p>A <code>StatFunxy</code> ggproto object, that can be added to a plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(iris, aes(Sepal.Width, Sepal.Length, colour = Species))

# Labelling group midpoints
p + geom_point() +
  stat_midpoint(aes(label = Species, group = Species),
                geom = "text", colour = "black")

# Drawing segments to centroids
p + geom_point() +
  stat_centroid(aes(xend = Sepal.Width, yend = Sepal.Length),
                geom = "segment", crop_other = FALSE)

# Drawing intervals
ggplot(iris, aes(Sepal.Width, Sepal.Length, colour = Species)) +
  geom_point() +
  stat_funxy(geom = "path",
             funx = median, funy = quantile,
             argy = list(probs = c(0.1, 0.9)))
</code></pre>

<hr>
<h2 id='stat_rle'>Run length encoding</h2><span id='topic+stat_rle'></span>

<h3>Description</h3>

<p>Run length encoding takes a vector of values and calculates the
lengths of consecutive repeated values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_rle(
  mapping = NULL,
  data = NULL,
  geom = "rect",
  position = "identity",
  ...,
  align = "none",
  na.rm = FALSE,
  orientation = "x",
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_rle_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_geom">geom</code></td>
<td>
<p>Use to override the default connection between
<code>geom_rect()</code> and <code>stat_rle()</code>.</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_rle_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_rle_+3A_align">align</code></td>
<td>
<p>A <code>character</code> of length one that effect the computed
<code>start</code> and <code>end</code> variables. One of the following:
</p>

<dl>
<dt><code>"none"</code></dt><dd><p>Take exact start and end <code>x</code> values.</p>
</dd>
<dt><code>"center"</code></dt><dd><p>Return start and end <code>x</code> values in between an
end and the subsequent start.</p>
</dd>
<dt><code>"start"</code></dt><dd><p>Align start values with previous end values.</p>
</dd>
<dt><code>"end"</code></dt><dd><p>Align end values with next start values.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="stat_rle_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_orientation">orientation</code></td>
<td>
<p>The orientation of the layer. The default (<code>NA</code>)
automatically determines the orientation from the aesthetic mapping. In the
rare event that this fails it can be given explicitly by setting <code>orientation</code>
to either <code>"x"</code> or <code>"y"</code>. See the <em>Orientation</em> section for more detail.</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_rle_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data is first ordered on the <code>x</code> aesthetic before run lengths are
calculated for the <code>label</code> aesthetic. In contrast to <code>base::rle()</code>, <code>NA</code>s
are considered equivalent values, not different values.
</p>


<h3>Value</h3>

<p>A <code>ggplot2</code> layer
</p>


<h3>Aesthetics</h3>

<p><code>stat_rle()</code> understands the following
aesthetics (required aesthetics are in bold)
</p>

<ul>
<li><p><strong>x</strong>
</p>
</li>
<li><p><strong>label</strong>
</p>
</li>
<li><p>group
</p>
</li></ul>



<h3>Computed variables</h3>


<dl>
<dt>start</dt><dd><p>The <code>x</code> values at the start of every run.</p>
</dd>
<dt>end</dt><dd><p>The <code>x</code> values at the end of every run.</p>
</dd>
<dt>start_id</dt><dd><p>The index where a run starts.</p>
</dd>
<dt>end_id</dt><dd><p>The index where a run ends.</p>
</dd>
<dt>run_id</dt><dd><p>The index of a run.</p>
</dd>
<dt>runlength</dt><dd><p>The length of a run.</p>
</dd>
<dt>runvalue</dt><dd><p>The value associated with a run.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(
  x = seq(0, 10, length.out = 100),
  y = sin(seq(0, 10, length.out = 100)*2)
)

# Label every run of increasing values
ggplot(df) +
  stat_rle(aes(x, label = diff(c(0, y)) &gt; 0),
           align = "end") +
  geom_point(aes(x, y))

# Label every run above some threshold
ggplot(df) +
  stat_rle(aes(x, label = y &gt; 0),
           align = "center") +
  geom_point(aes(x, y))

# Categorising runs, more complicated usage
ggplot(df) +
  stat_rle(aes(stage(x, after_stat = run_id),
               after_stat(runlength),
               label = cut(y, c(-1, -0.6, 0.6, 1)),
               fill = after_stat(runvalue)),
           geom = "col")
</code></pre>

<hr>
<h2 id='stat_rollingkernel'>Rolling Kernel</h2><span id='topic+stat_rollingkernel'></span>

<h3>Description</h3>

<p>A rolling kernel moves along one of the axes and assigns weights to
datapoints depending on the distance to the kernel's location. It then
calculates a weighted average on the y-values of the datapoints, creating a
trendline. In contrast to (weighted) rolling averages, the interval between
datapoints do not need to be constant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_rollingkernel(
  mapping = NULL,
  data = NULL,
  geom = "line",
  position = "identity",
  ...,
  bw = "nrd",
  kernel = "gaussian",
  n = 256,
  expand = 0.1,
  na.rm = FALSE,
  orientation = "x",
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_rollingkernel_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_geom">geom</code></td>
<td>
<p>Use to override the default geom (<code>"line"</code>).</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_bw">bw</code></td>
<td>
<p>A bandwidth, which can be one of the following: </p>
 <ul>
<li><p> A
<code>numeric</code> of length one indicating a measure of kernel width, in data
units. </p>
</li>
<li><p> A <code>rel</code> object of length one constructed for setting a
bandwidth relative to the group data range. Can be constructed with the
<code>rel()</code> function. </p>
</li>
<li><p> A <code>character</code> of length one, naming one
of the functions documented in <code><a href="stats.html#topic+bandwidth">bw.nrd()</a></code>. </p>
</li></ul>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_kernel">kernel</code></td>
<td>
<p>One of the following: </p>
 <ul>
<li><p> A <code>function</code> that
takes a vector of distances as first argument, a numeric bandwidth as
second argument and returns relative weights. </p>
</li>
<li><p> A <code>character</code> of
length one that can take one of the following values: </p>

<dl>
<dt><code>"gaussian"</code> or <code>"norm"</code></dt><dd><p>A kernel that follows a normal
distribution with 0 mean and bandwidth as standard deviation.</p>
</dd>
<dt><code>"mean"</code> or <code>"unif"</code></dt><dd><p>A kernel that follows a uniform
distribution with <code class="reqn">bandwidth * -0.5</code> and <code class="reqn">bandwidth * 0.5</code> as
minimum and maximum. This is similar to a simple, unweighted moving
average.</p>
</dd> <dt><code>"cauchy"</code></dt><dd><p>A kernel that follows a Cauchy
distribution with 0 as location and bandwidth as scale parameters. The
Cauchy distribution has fatter tails than the normal distribution.</p>
</dd> </dl>
 </li></ul>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_n">n</code></td>
<td>
<p>An <code>integer</code> of length one: how many points to return per
group.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_expand">expand</code></td>
<td>
<p>A <code>numeric</code> of length one: how much to expand the range
for which the rolling kernel is calculated beyond the most extreme
datapoints.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_orientation">orientation</code></td>
<td>
<p>A <code>character</code> of length one, either <code>"x"</code>
(default) or <code>"y"</code>, setting the axis along which the rolling should
occur.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_rollingkernel_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <em>Layer</em> ggproto object.
</p>


<h3>Aesthetics</h3>

<p><code>stat_rollingkernel()</code> understands the following
aesthetics (required aesthetics are in bold)
</p>

<ul>
<li> <p><strong>x</strong>
</p>
</li>
<li> <p><strong>y</strong>
</p>
</li>
<li><p> group
</p>
</li></ul>



<h3>Computed variables</h3>


<dl>
<dt><code>x</code></dt><dd><p>A sequence of ordered x positions.</p>
</dd>
<dt><code>y</code></dt><dd><p>The weighted value of the rolling kernel.</p>
</dd>
<dt><code>weight</code></dt><dd><p>The sum of weight strengths at a position.</p>
</dd>
<dt><code>scaled</code></dt><dd><p>The fraction of weight strengths at a position. This is
the same as <code>weight / sum(weight)</code> by group.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>ggplot(mpg, aes(displ, hwy, colour = class)) +
  geom_point() +
  stat_rollingkernel()

# The (scaled) weights can be used to emphasise data-dense areas
ggplot(mpg, aes(displ, hwy, colour = class)) +
  geom_point() +
  stat_rollingkernel(aes(alpha = after_stat(scaled)))
</code></pre>

<hr>
<h2 id='stat_theodensity'>Fitted theoretical density</h2><span id='topic+stat_theodensity'></span>

<h3>Description</h3>

<p>Estimates the parameters of a given distribution and evaluates
the probability density function with these parameters. This can be useful
for comparing histograms or kernel density estimates against a theoretical
distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_theodensity(
  mapping = NULL,
  data = NULL,
  geom = "line",
  position = "identity",
  ...,
  distri = "norm",
  n = 512,
  fix.arg = NULL,
  start.arg = NULL,
  na.rm = TRUE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_theodensity_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_geom">geom</code></td>
<td>
<p>Use to override the default geom for <code>stat_theodensity</code>.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_position">position</code></td>
<td>
<p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:
</p>

<ul>
<li><p> The result of calling a position function, such as <code>position_jitter()</code>.
This method allows for passing extra arguments to the position.
</p>
</li>
<li><p> A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code>position_jitter()</code>, give the position as <code>"jitter"</code>.
</p>
</li>
<li><p> For more information and other ways to specify the position, see the
<a href="ggplot2.html#topic+layer_positions">layer position</a> documentation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>'s <code>params</code> argument. These
arguments broadly fall into one of 4 categories below. Notably, further
arguments to the <code>position</code> argument, or aesthetics that are required
can <em>not</em> be passed through <code>...</code>. Unknown arguments that are not part
of the 4 categories below are ignored.
</p>

<ul>
<li><p> Static aesthetics that are not mapped to a scale, but are at a fixed
value and apply to the layer as a whole. For example, <code>colour = "red"</code>
or <code>linewidth = 3</code>. The geom's documentation has an <strong>Aesthetics</strong>
section that lists the available options. The 'required' aesthetics
cannot be passed on to the <code>params</code>. Please note that while passing
unmapped aesthetics as vectors is technically possible, the order and
required length is not guaranteed to be parallel to the input data.
</p>
</li>
<li><p> When constructing a layer using
a <code style="white-space: pre;">&#8288;stat_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on
parameters to the <code>geom</code> part of the layer. An example of this is
<code>stat_density(geom = "area", outline.type = "both")</code>. The geom's
documentation lists which parameters it can accept.
</p>
</li>
<li><p> Inversely, when constructing a layer using a
<code style="white-space: pre;">&#8288;geom_*()&#8288;</code> function, the <code>...</code> argument can be used to pass on parameters
to the <code>stat</code> part of the layer. An example of this is
<code>geom_area(stat = "density", adjust = 0.5)</code>. The stat's documentation
lists which parameters it can accept.
</p>
</li>
<li><p> The <code>key_glyph</code> argument of <code><a href="ggplot2.html#topic+layer">layer()</a></code> may also be passed on through
<code>...</code>. This can be one of the functions described as
<a href="ggplot2.html#topic+draw_key">key glyphs</a>, to change the display of the layer in the legend.
</p>
</li></ul>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_distri">distri</code></td>
<td>
<p>A <code>character</code> of length 1 naming a distribution without
prefix. See details.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_n">n</code></td>
<td>
<p>An <code>integer</code> of length 1 with the number of equally spaced
points at which the density function is evaluated. Ignored if distribution
is discrete.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_fix.arg">fix.arg</code></td>
<td>
<p>An optional named list giving values of fixed parameters of
the named distribution. Parameters with fixed value are not estimated by
maximum likelihood procedures.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_start.arg">start.arg</code></td>
<td>
<p>A named list giving initial values of parameters for the
named distribution. This argument may be omitted (default) for some
distributions for which reasonable starting values are computed.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_theodensity_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Valid <code>distri</code> arguments are the names of distributions for
which there exists a density function. The names should be given without a
prefix (typically 'd', 'r', 'q' and 'r'). For example: <code>"norm"</code> for
the normal distribution and <code>"nbinom"</code> for the negative binomial
distribution. Take a look at <code><a href="stats.html#topic+Distributions">distributions()</a></code> in the
<span class="pkg">stats</span> package for an overview.
</p>
<p>There are a couple of distribution for which there exist no reasonable
starting values, such as the Student t-distribution and the F-distribution.
In these cases, it would probably be wise to provide reasonable starting
values as a named list to the <code>start.arg</code> argument. When estimating a
binomial distribution, it would be best to supply the <code>size</code> to the
<code>fix.arg</code> argument.
</p>
<p>By default, the y values are such that the integral of the distribution is
1, which scales well with the defaults of kernel density estimates. When
comparing distributions with absolute count histograms, a sensible choice
for aesthetic mapping would be <code>aes(y = stat(count) * binwidth)</code>,
wherein <code>binwidth</code> is matched with the bin width of the histogram.
</p>
<p>For discrete distributions, the input data are expected to be integers, or
doubles that can be divided by 1 without remainders.
</p>
<p>Parameters are estimated using the
<code><a href="fitdistrplus.html#topic+fitdist">fitdistrplus::fitdist()</a></code> function in the
<span class="pkg">fitdistrplus</span> package using maximum likelihood estimation.
Hypergeometric and multinomial distributions from the <span class="pkg">stats</span> package
are not supported.
</p>


<h3>Value</h3>

<p>A <em>Layer</em> ggproto object.
</p>


<h3>Computed variables</h3>

 <dl>
<dt>density</dt><dd><p>probability density</p>
</dd>
<dt>count</dt><dd><p>density * number of observations - useful for comparing to
histograms</p>
</dd> <dt>scaled</dt><dd><p>density scaled to a maximum of 1</p>
</dd> </dl>



<h3>See Also</h3>

<p><code><a href="stats.html#topic+Distributions">stats::Distributions()</a></code>
<code><a href="fitdistrplus.html#topic+fitdist">fitdistrplus::fitdist()</a></code> <code><a href="ggplot2.html#topic+geom_density">ggplot2::geom_density()</a></code>
<code><a href="ggplot2.html#topic+geom_histogram">ggplot2::geom_histogram()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A mixture of normal distributions where the standard deviation is
# inverse gamma distributed resembles a cauchy distribution.
x &lt;- rnorm(2000, 10, 1/rgamma(2000, 2, 0.5))
df &lt;- data.frame(x = x)

ggplot(df, aes(x)) +
  geom_histogram(binwidth = 0.1,
                 alpha = 0.3, position = "identity") +
  stat_theodensity(aes(y = stat(count) * 0.1, colour = "Normal"),
                   distri = "norm", geom = "line") +
  stat_theodensity(aes(y = stat(count) * 0.1, colour = "Cauchy"),
                   distri = "cauchy", geom = "line") +
  coord_cartesian(xlim = c(5, 15))

# A negative binomial can be understood as a Poisson-gamma mixture
df &lt;- data.frame(x = c(rpois(500, 25),
                       rpois(500, rgamma(500, 5, 0.2))),
                 cat = rep(c("Poisson", "Poisson-gamma"), each = 500))

ggplot(df, aes(x)) +
  geom_histogram(binwidth = 1, aes(fill = cat),
                 alpha = 0.3, position = "identity") +
  stat_theodensity(aes(y = stat(count), colour = cat), distri = "nbinom",
                   geom = "step", position = position_nudge(x = -0.5)) +
  stat_summary(aes(y = x, colour = cat, x = 1),
               fun.data = function(x){data.frame(xintercept = mean(x))},
               geom = "vline")
</code></pre>

<hr>
<h2 id='strip_nested'>Nested strips</h2><span id='topic+strip_nested'></span>

<h3>Description</h3>

<p>This strip style groups strips on the same layer that share a label. It is
the default strip for <code><a href="#topic+facet_nested">facet_nested()</a></code> and
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_nested(
  clip = "inherit",
  size = "constant",
  bleed = FALSE,
  text_x = NULL,
  text_y = NULL,
  background_x = NULL,
  background_y = NULL,
  by_layer_x = FALSE,
  by_layer_y = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strip_nested_+3A_clip">clip</code></td>
<td>
<p>A <code>character(1)</code> that controls whether text labels are clipped to
the background boxes. Can be either <code>"inherit"</code> (default), <code>"on"</code> or
<code>"off"</code>.</p>
</td></tr>
<tr><td><code id="strip_nested_+3A_size">size</code></td>
<td>
<p>A <code>character(1)</code> stating that the strip margins in different
layers remain <code>"constant"</code> or are <code>"variable"</code>.</p>
</td></tr>
<tr><td><code id="strip_nested_+3A_bleed">bleed</code></td>
<td>
<p>A <code>logical(1)</code> indicating whether merging of lower-layer
variables is allowed when the higher-layer variables are separate. See
details.</p>
</td></tr>
<tr><td><code id="strip_nested_+3A_text_x">text_x</code>, <code id="strip_nested_+3A_text_y">text_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_text()</a></code> elements. See the details
section in <code><a href="#topic+strip_themed">strip_themed()</a></code>.</p>
</td></tr>
<tr><td><code id="strip_nested_+3A_background_x">background_x</code>, <code id="strip_nested_+3A_background_y">background_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> elements. See the details
section in <code><a href="#topic+strip_themed">strip_themed()</a></code>.</p>
</td></tr>
<tr><td><code id="strip_nested_+3A_by_layer_x">by_layer_x</code>, <code id="strip_nested_+3A_by_layer_y">by_layer_y</code></td>
<td>
<p>A <code>logical(1)</code> that when <code>TRUE</code>, maps the
different elements to different layers of the strip. When <code>FALSE</code>, maps the
different elements to individual strips, possibly repeating the elements to
match the number of strips through <code>rep_len()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The display order is always such that the outermost
variable is placed the furthest away from the panels. Strips are
automatically grouped when they span a nested variable.
</p>
<p>The <code>bleed</code> argument controls whether lower-layer strips are allowed
to be merged when higher-layer strips are different, i.e. they can bleed
over hierarchies. Suppose the <code>strip_vanilla()</code> behaviour would be the
following for strips:
</p>
<p><code style="white-space: pre;">&#8288;[_1_][_2_][_2_]&#8288;</code> <br /> <code style="white-space: pre;">&#8288;[_3_][_3_][_4_]&#8288;</code>
</p>
<p>In such case, the default <code>bleed = FALSE</code> argument would result in the
following:
</p>
<p><code style="white-space: pre;">&#8288;[_1_][___2____]&#8288;</code> <br /> <code style="white-space: pre;">&#8288;[_3_][_3_][_4_]&#8288;</code>
</p>
<p>Whereas <code>bleed = TRUE</code> would allow the following:
</p>
<p><code style="white-space: pre;">&#8288;[_1_][___2____]&#8288;</code> <br /> <code style="white-space: pre;">&#8288;[___3____][_4_]&#8288;</code>
</p>


<h3>Value</h3>

<p>A <code>StripNested</code> ggproto object that can be given as an argument to
facets in ggh4x.
</p>


<h3>See Also</h3>

<p>Other strips: 
<code><a href="#topic+strip_split">strip_split</a>()</code>,
<code><a href="#topic+strip_tag">strip_tag</a>()</code>,
<code><a href="#topic+strip_themed">strip_themed</a>()</code>,
<code><a href="#topic+strip_vanilla">strip_vanilla</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# Combine the strips
p + facet_wrap2(vars(cyl, drv), strip = strip_nested())

# The facet_nested and facet_nested_wrap functions have nested strips
# automatically
p + facet_nested_wrap(vars(cyl, drv))

# Changing the bleed argument merges the "f" labels in the top-right
p + facet_wrap2(vars(cyl, drv), strip = strip_nested(bleed = TRUE))
</code></pre>

<hr>
<h2 id='strip_split'>Split strips</h2><span id='topic+strip_split'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This strip style allows a greater control over where a strip is placed
relative to the panel. Different facetting variables are allowed to be
placed on different sides.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_split(
  position = c("top", "left"),
  clip = "inherit",
  size = "constant",
  bleed = FALSE,
  text_x = NULL,
  text_y = NULL,
  background_x = NULL,
  background_y = NULL,
  by_layer_x = FALSE,
  by_layer_y = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strip_split_+3A_position">position</code></td>
<td>
<p>A <code>character</code> vector stating where the strips of faceting
variables should be placed. Can be some of the following: <code>"top"</code>,
<code>"bottom"</code>, <code>"left"</code> or <code>"right"</code>. The length of the <code>position</code> argument
must match the length of variables provided to the <code>facets</code> argument in
wrap/manual layouts, or those provided to the <code>rows</code> and <code>cols</code> arguments
in the grid layout.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_clip">clip</code></td>
<td>
<p>A <code>character(1)</code> that controls whether text labels are clipped to
the background boxes. Can be either <code>"inherit"</code> (default), <code>"on"</code> or
<code>"off"</code>.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_size">size</code></td>
<td>
<p>A <code>character(1)</code> stating that the strip margins in different
layers remain <code>"constant"</code> or are <code>"variable"</code>.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_bleed">bleed</code></td>
<td>
<p>A <code>logical(1)</code> indicating whether merging of lower-layer
variables is allowed when the higher-layer variables are separate. See
the details of <code><a href="#topic+strip_nested">strip_nested</a></code> for more info. Note that currently,
<code>strip_split()</code> cannot recognise collisions between strips, so changing
to <code>bleed = TRUE</code> can have unexpected results.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_text_x">text_x</code>, <code id="strip_split_+3A_text_y">text_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_text()</a></code> elements. See the details
section in <code><a href="#topic+strip_themed">strip_themed()</a></code>.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_background_x">background_x</code>, <code id="strip_split_+3A_background_y">background_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> elements. See the details
section in <code><a href="#topic+strip_themed">strip_themed()</a></code>.</p>
</td></tr>
<tr><td><code id="strip_split_+3A_by_layer_x">by_layer_x</code>, <code id="strip_split_+3A_by_layer_y">by_layer_y</code></td>
<td>
<p>A <code>logical(1)</code> that when <code>TRUE</code>, maps the
different elements to different layers of the strip. When <code>FALSE</code>, maps the
different elements to individual strips, possibly repeating the elements to
match the number of strips through <code>rep_len()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Using this style of strip completely overrules the <code>strip.position</code>
and <code>switch</code> arguments.
</p>


<h3>Value</h3>

<p>A <code>StripSplit</code> ggproto object that can be given as an argument to
facets in ggh4x.
</p>


<h3>See Also</h3>

<p>Other strips: 
<code><a href="#topic+strip_nested">strip_nested</a>()</code>,
<code><a href="#topic+strip_tag">strip_tag</a>()</code>,
<code><a href="#topic+strip_themed">strip_themed</a>()</code>,
<code><a href="#topic+strip_vanilla">strip_vanilla</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# --- Wrap examples ------

# Defaults to 1st (cyl) at top, 2nd (drv) on left
p + facet_wrap2(vars(cyl, drv), strip = strip_split())

# Change cyl to left, drv to bottom
p + facet_wrap2(vars(cyl, drv), strip = strip_split(c("left", "bottom")))

# --- Grid examples -----

# Display both strips levels on the left
p + facet_grid2(vars(drv), vars(cyl),
                strip = strip_split(c("left", "left")))

# Separate the strips again
p + facet_grid2(vars(cyl, year),
                strip = strip_split(c("bottom", "left")))

# Using a dummy variable as a title strip
p + facet_grid2(vars(cyl, "year", year),
                strip = strip_split(c("bottom", "left", "left")))
</code></pre>

<hr>
<h2 id='strip_tag'>Strips as tags</h2><span id='topic+strip_tag'></span>

<h3>Description</h3>

<p>This strip style renders the strips as text with fitted boxes onto the panels
of the plot. This is in contrast to strips that match the panel size and
are located outside the panels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_tag(
  clip = "inherit",
  order = c("x", "y"),
  just = c(0, 1),
  text_x = NULL,
  text_y = element_text(angle = 0),
  background_x = NULL,
  background_y = NULL,
  by_layer_x = FALSE,
  by_layer_y = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strip_tag_+3A_clip">clip</code></td>
<td>
<p>A <code>character(1)</code> that controls whether text labels are clipped to
the background boxes. Can be either <code>"inherit"</code> (default), <code>"on"</code> or
<code>"off"</code>.</p>
</td></tr>
<tr><td><code id="strip_tag_+3A_order">order</code></td>
<td>
<p>Either <code>c("x", "y")</code> or <code>c("y", "x")</code>, setting the top-to-bottom
order of horizontal versus &quot;vertical&quot; labels in facets with a grid layout.</p>
</td></tr>
<tr><td><code id="strip_tag_+3A_just">just</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;numeric[2]&gt;&#8288;</code> setting the horizontal and vertical
justification of placing the textbox.</p>
</td></tr>
<tr><td><code id="strip_tag_+3A_text_x">text_x</code>, <code id="strip_tag_+3A_text_y">text_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_text()</a></code> elements. See details.</p>
</td></tr>
<tr><td><code id="strip_tag_+3A_background_x">background_x</code>, <code id="strip_tag_+3A_background_y">background_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> elements. See details.</p>
</td></tr>
<tr><td><code id="strip_tag_+3A_by_layer_x">by_layer_x</code>, <code id="strip_tag_+3A_by_layer_y">by_layer_y</code></td>
<td>
<p>A <code>logical(1)</code> that when <code>TRUE</code>, maps the
different elements to different layers of the strip. When <code>FALSE</code>, maps the
different elements to individual strips, possibly repeating the elements
to match the number of strips through <code>rep_len()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>StripTag</code> ggproto object that can be given as an argument to
facets in ggh4x.
</p>


<h3>See Also</h3>

<p>Other strips: 
<code><a href="#topic+strip_nested">strip_nested</a>()</code>,
<code><a href="#topic+strip_split">strip_split</a>()</code>,
<code><a href="#topic+strip_themed">strip_themed</a>()</code>,
<code><a href="#topic+strip_vanilla">strip_vanilla</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A standard plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# Typical use
p + facet_wrap2(
  ~ class,
  strip = strip_tag()
)

# Adjusting justification
p + facet_wrap2(
  ~ class,
  strip = strip_tag(just = c(1, 0))
)

p + facet_wrap2(
  ~ drv + year,
  strip = strip_tag()
)

# With a grid layout, you can control in which order the labels are drawn
p + facet_grid2(
  "vertical" ~ "horizontal",
  strip = strip_tag(order = c("x", "y")) # default
)

p +facet_grid2(
  "vertical" ~ "horizontal",
  strip = strip_tag(order = c("y", "x")) # invert order
)
</code></pre>

<hr>
<h2 id='strip_themed'>Strip with themed boxes and texts</h2><span id='topic+strip_themed'></span>

<h3>Description</h3>

<p>A style of strips with individually themed strips.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_themed(
  clip = "inherit",
  size = "constant",
  text_x = NULL,
  text_y = NULL,
  background_x = NULL,
  background_y = NULL,
  by_layer_x = FALSE,
  by_layer_y = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strip_themed_+3A_clip">clip</code></td>
<td>
<p>A <code>character(1)</code> that controls whether text labels are clipped to
the background boxes. Can be either <code>"inherit"</code> (default), <code>"on"</code> or
<code>"off"</code>.</p>
</td></tr>
<tr><td><code id="strip_themed_+3A_size">size</code></td>
<td>
<p>A <code>character(1)</code> stating that the strip margins in different
layers remain <code>"constant"</code> or are <code>"variable"</code>.</p>
</td></tr>
<tr><td><code id="strip_themed_+3A_text_x">text_x</code>, <code id="strip_themed_+3A_text_y">text_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_text()</a></code> elements. See details.</p>
</td></tr>
<tr><td><code id="strip_themed_+3A_background_x">background_x</code>, <code id="strip_themed_+3A_background_y">background_y</code></td>
<td>
<p>A <code>list()</code> with
<code><a href="ggplot2.html#topic+element">element_rect()</a></code> elements. See details.</p>
</td></tr>
<tr><td><code id="strip_themed_+3A_by_layer_x">by_layer_x</code>, <code id="strip_themed_+3A_by_layer_y">by_layer_y</code></td>
<td>
<p>A <code>logical(1)</code> that when <code>TRUE</code>, maps the
different elements to different layers of the strip. When <code>FALSE</code>, maps the
different elements to individual strips, possibly repeating the elements
to match the number of strips through <code>rep_len()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With respect to the <code style="white-space: pre;">&#8288;text_*&#8288;</code> and <code style="white-space: pre;">&#8288;background_*&#8288;</code> arguments, they can
be a list with (a mix of) the following objects:
</p>

<ul>
<li> <p><code>NULL</code> indicates that the global plot theme applies.
</p>
</li>
<li> <p><code>element_blank()</code> omits drawing the background or text.
</p>
</li>
<li><p> An <code>element</code> class object inheriting from the <code>element_text</code> or
<code>element_rect</code> classes.
</p>
</li></ul>

<p>For constructing homogeneous lists of elements, the
<code><a href="#topic+elem_list_text">elem_list_text()</a></code> and
<code><a href="#topic+elem_list_rect">elem_list_rect()</a></code> are provided for convenience.
</p>


<h3>Value</h3>

<p>A <code>StripThemed</code> ggproto object that can be given as an argument to
facets in ggh4x.
</p>


<h3>See Also</h3>

<p>Other strips: 
<code><a href="#topic+strip_nested">strip_nested</a>()</code>,
<code><a href="#topic+strip_split">strip_split</a>()</code>,
<code><a href="#topic+strip_tag">strip_tag</a>()</code>,
<code><a href="#topic+strip_vanilla">strip_vanilla</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Some simple plot
p &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point()

# Set some theming options, we can use `element_blank()`
backgrounds &lt;- list(element_blank(), element_rect(fill = "dodgerblue"))
# Or we could use `NULL` to use the global theme
texts &lt;- list(element_text(colour = "red"), NULL, element_text(face = "bold"))

# Elements are repeated until the fit the number of facets
p + facet_wrap2(
  vars(drv, year),
  strip = strip_themed(
    background_x = backgrounds,
    text_x = texts
  )
)

# Except when applied to each layer instead of every strip
p + facet_wrap2(
  vars(drv, year),
  strip = strip_themed(
    background_x = backgrounds,
    text_x = texts,
    by_layer_x = TRUE
  )
)

# To conveniently distribute arguments over a list of the same elements,
# you can use the following wrappers:
p + facet_wrap2(
  vars(drv, year),
  strip = strip_themed(
    text_x = elem_list_text(colour = c("blue", "red")),
    background_x = elem_list_rect(fill = c("white", "grey80")),
    by_layer_x = TRUE
  )
)
</code></pre>

<hr>
<h2 id='strip_vanilla'>Default strips</h2><span id='topic+strip_vanilla'></span>

<h3>Description</h3>

<p>Strips with the style of vanilla ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_vanilla(clip = "inherit", size = "constant")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strip_vanilla_+3A_clip">clip</code></td>
<td>
<p>A <code>character(1)</code> that controls whether text labels are clipped to
the background boxes. Can be either <code>"inherit"</code> (default), <code>"on"</code> or
<code>"off"</code>.</p>
</td></tr>
<tr><td><code id="strip_vanilla_+3A_size">size</code></td>
<td>
<p>A <code>character(1)</code> stating that the strip margins in different
layers remain <code>"constant"</code> or are <code>"variable"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Strip</code> ggproto object that can be used ggh4x facets.
</p>


<h3>See Also</h3>

<p>Other strips: 
<code><a href="#topic+strip_nested">strip_nested</a>()</code>,
<code><a href="#topic+strip_split">strip_split</a>()</code>,
<code><a href="#topic+strip_tag">strip_tag</a>()</code>,
<code><a href="#topic+strip_themed">strip_themed</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Some dummy data with a long string
df &lt;- data.frame(
  short = "X",
  long  = "A very long string that takes up a lot of space",
  value = 1
)
# Simple plot
p &lt;- ggplot(df, aes(value, value)) +
  geom_point() +
  theme(strip.text.y.right = element_text(angle = 0))

# Short titles take up as much space as long titles
p + facet_grid2(
  vars(short, long),
  strip = strip_vanilla(size = "constant")
)

# Short titles take up less space
p + facet_grid2(
  vars(short, long),
  strip = strip_vanilla(size = "variable")
)
</code></pre>

<hr>
<h2 id='theme_extensions'>Theme extensions</h2><span id='topic+theme_extensions'></span><span id='topic+ggh4x_theme_elements'></span>

<h3>Description</h3>

<p>Some functions in <span class="pkg">ggh4x</span> are using extensions to the theme
system. These extended theme argument are listed below, along with what
elements they are expected to be, and in what function(s) they are used.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_extensions_+3A_ggh4x.facet.nestline">ggh4x.facet.nestline</code></td>
<td>
<p>An <code><a href="ggplot2.html#topic+element">element_line()</a></code>
used as the parent for the <code>nest_line</code> argument in <code><a href="#topic+facet_nested">facet_nested()</a></code> and
<code><a href="#topic+facet_nested_wrap">facet_nested_wrap()</a></code>. Inherits directly from the '<code>line</code>' theme element.</p>
</td></tr>
<tr><td><code id="theme_extensions_+3A_ggh4x.axis.nestline">ggh4x.axis.nestline</code>, <code id="theme_extensions_+3A_ggh4x.axis.nestline.x">ggh4x.axis.nestline.x</code>, <code id="theme_extensions_+3A_ggh4x.axis.nestline.y">ggh4x.axis.nestline.y</code></td>
<td>
<p>An
<code><a href="ggplot2.html#topic+element">element_line()</a></code> used as the line to separate
different layers of labels in <code><a href="#topic+guide_axis_nested">guide_axis_nested()</a></code>. Inherits from the
'<code>axis.ticks</code>' theme element.</p>
</td></tr>
<tr><td><code id="theme_extensions_+3A_ggh4x.axis.nesttext.x">ggh4x.axis.nesttext.x</code>, <code id="theme_extensions_+3A_ggh4x.axis.nesttext.y">ggh4x.axis.nesttext.y</code></td>
<td>
<p>An
<code><a href="ggplot2.html#topic+element">element_text()</a></code> used to differentiate text higher
in the hierarchy from the axis labels directly next to the axis line in
<code><a href="#topic+guide_axis_nested">guide_axis_nested()</a></code>. Inherits from the '<code>axis.text.x</code>' and
'<code>axis.text.y</code>' theme elements respectively.</p>
</td></tr>
<tr><td><code id="theme_extensions_+3A_ggh4x.axis.ticks.length.minor">ggh4x.axis.ticks.length.minor</code></td>
<td>
<p>A <code><a href="ggplot2.html#topic+element">rel()</a></code> object used to
set the size of minor tick marks relative to the regular tick marks. This
is used in the <code><a href="#topic+guide_axis_minor">guide_axis_minor()</a></code> and <code><a href="#topic+guide_axis_logticks">guide_axis_logticks()</a></code>
functions. Defaults to <code>rel(2/3)</code>.</p>
</td></tr>
<tr><td><code id="theme_extensions_+3A_ggh4x.axis.ticks.length.mini">ggh4x.axis.ticks.length.mini</code></td>
<td>
<p>A <code><a href="ggplot2.html#topic+element">rel()</a></code> object used to
set the size of the smallest tick marks relative to regular tick marks.
This is only used in the <code><a href="#topic+guide_axis_logticks">guide_axis_logticks()</a></code> function.
Defaults to <code>rel(1/3)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='weave_factors'>Bind together factors</h2><span id='topic+weave_factors'></span>

<h3>Description</h3>

<p>Computes a new factor out of combinations of input factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weave_factors(..., drop = TRUE, sep = ".", replaceNA = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weave_factors_+3A_...">...</code></td>
<td>
<p>The vectors</p>
</td></tr>
<tr><td><code id="weave_factors_+3A_drop">drop</code></td>
<td>
<p>A <code>logical</code> of length 1 which when <code>TRUE</code> will remove
combinations of factors not occurring in the input data.</p>
</td></tr>
<tr><td><code id="weave_factors_+3A_sep">sep</code></td>
<td>
<p>A <code>character</code> of length 1 with a string to delimit the new
level labels.</p>
</td></tr>
<tr><td><code id="weave_factors_+3A_replacena">replaceNA</code></td>
<td>
<p>A <code>logical</code> of length 1: replace <code>NA</code> values with
empty strings?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>weave_factors()</code> broadly resembles <code>interaction(..., lex.order = TRUE)</code>, with a slightly altered approach to non-factor inputs.
In other words, this function orders the new levels such that the levels of
the first input variable in <code>...</code> is given priority over the second
input, the second input has priority over the third, etc.
</p>
<p>This function treats non-factor inputs as if their levels were
<code>unique(as.character(x))</code>, wherein <code>x</code> represents an input.
</p>


<h3>Value</h3>

<p>A <code>factor</code> representing combinations of input factors.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+interaction">interaction()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f1 &lt;- c("banana", "apple", "apple", "kiwi")
f2 &lt;- factor(c(1, 1:3), labels = c("house", "cat", "dog"))

# Notice the difference in level ordering between the following:
interaction(f1, f2, drop = TRUE, lex.order = TRUE)
interaction(f1, f2, drop = TRUE, lex.order = FALSE)
weave_factors(f1, f2)

# The difference is in how characters are interpreted
# The following are equivalent
interaction(f1, f2, drop = TRUE, lex.order = TRUE)
weave_factors(as.factor(f1), f2)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
