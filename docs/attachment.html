<!DOCTYPE html><html><head><title>Help for package attachment</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {attachment}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#attachment-package'><p>attachment: Deal with Dependencies</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#att_amend_desc'><p>Amend DESCRIPTION with dependencies read from package code parsing</p></a></li>
<li><a href='#att_from_description'><p>Return all package dependencies from current package</p></a></li>
<li><a href='#att_from_namespace'><p>return package dependencies from NAMESPACE file</p></a></li>
<li><a href='#att_from_rmd'><p>Get all dependencies from a Rmd file</p></a></li>
<li><a href='#att_from_rmds'><p>Get all packages called in vignettes folder</p></a></li>
<li><a href='#att_from_rscript'><p>Look for functions called with <code>::</code> and library/requires in one script</p></a></li>
<li><a href='#att_from_rscripts'><p>Look for functions called with <code>::</code> and library/requires in folder of scripts</p></a></li>
<li><a href='#att_to_desc_from_is'><p>Amend DESCRIPTION with dependencies from imports and suggests package list</p></a></li>
<li><a href='#attachment-deprecated'><p>Deprecated functions</p></a></li>
<li><a href='#create_dependencies_file'><p>Create the list of instructions to install dependencies from a DESCRIPTION file</p></a></li>
<li><a href='#create_renv_for_dev'><p>Create reproducible environments for your R projects with <em>renv</em></p></a></li>
<li><a href='#find_remotes'><p>Proposes values for Remotes field for DESCRIPTION file based on your installation</p></a></li>
<li><a href='#install_from_description'><p>Install missing package from DESCRIPTION</p></a></li>
<li><a href='#install_if_missing'><p>install  packages if missing</p></a></li>
<li><a href='#set_remotes_to_desc'><p>Add Remotes field to DESCRIPTION based on your local installation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Deal with Dependencies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Manage dependencies during package development. This can
    retrieve all dependencies that are used in ".R" files in the "R/"
    directory, in ".Rmd" files in "vignettes/" directory and in 'roxygen2'
    documentation of functions. There is a function to update the
    "DESCRIPTION" file of your package with 'CRAN' packages or any other
    remote package.  All functions to retrieve dependencies of ".R"
    scripts and ".Rmd" or ".qmd" files can be used independently of a
    package development.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://thinkr-open.github.io/attachment/">https://thinkr-open.github.io/attachment/</a>,
<a href="https://github.com/ThinkR-open/attachment">https://github.com/ThinkR-open/attachment</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ThinkR-open/attachment/issues">https://github.com/ThinkR-open/attachment/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/fusen/version:</td>
<td>0.5.0.9000</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>ThinkR-open/thinkrtemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, desc (&ge; 1.2.0), glue (&ge; 1.3.0), knitr (&ge; 1.20),
magrittr (&ge; 1.5), rmarkdown (&ge; 1.10), roxygen2, stats,
stringr (&ge; 1.3.1), utils, withr, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lifecycle, renv (&ge; 0.8.4), rstudioapi, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-22 08:44:54 UTC; murielle</td>
</tr>
<tr>
<td>Author:</td>
<td>Sébastien Rochette
    <a href="https://orcid.org/0000-0002-1565-9313"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre, aut],
  Vincent Guyader <a href="https://orcid.org/0000-0003-0671-9270"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut] (previous maintainer),
  Murielle Delmotte <a href="https://orcid.org/0000-0002-1339-2424"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Swann Floc'hlay <a href="https://orcid.org/0000-0003-1477-830X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  ThinkR [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sébastien Rochette &lt;sebastien@thinkr.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-22 09:32:46 UTC</td>
</tr>
</table>
<hr>
<h2 id='attachment-package'>attachment: Deal with Dependencies</h2><span id='topic+attachment'></span><span id='topic+attachment-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Manage dependencies during package development. This can retrieve all dependencies that are used in &quot;.R&quot; files in the &quot;R/&quot; directory, in &quot;.Rmd&quot; files in &quot;vignettes/&quot; directory and in 'roxygen2' documentation of functions. There is a function to update the &quot;DESCRIPTION&quot; file of your package with 'CRAN' packages or any other remote package. All functions to retrieve dependencies of &quot;.R&quot; scripts and &quot;.Rmd&quot; or &quot;.qmd&quot; files can be used independently of a package development.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Murielle Delmotte <a href="mailto:murielle@thinkr.fr">murielle@thinkr.fr</a> (<a href="https://orcid.org/0000-0002-1339-2424">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Sébastien Rochette <a href="mailto:sebastien@thinkr.fr">sebastien@thinkr.fr</a> (<a href="https://orcid.org/0000-0002-1565-9313">ORCID</a>)
</p>
</li>
<li><p> Vincent Guyader <a href="mailto:vincent@thinkr.fr">vincent@thinkr.fr</a> (<a href="https://orcid.org/0000-0003-0671-9270">ORCID</a>) (previous maintainer)
</p>
</li>
<li><p> Swann Floc'hlay <a href="mailto:swann@thinkr.fr">swann@thinkr.fr</a> (<a href="https://orcid.org/0000-0003-1477-830X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> ThinkR [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://thinkr-open.github.io/attachment/">https://thinkr-open.github.io/attachment/</a>
</p>
</li>
<li> <p><a href="https://github.com/ThinkR-open/attachment">https://github.com/ThinkR-open/attachment</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ThinkR-open/attachment/issues">https://github.com/ThinkR-open/attachment/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code style="white-space: pre;">&#8288;magrittr::[\%&gt;\%][magrittr::pipe]&#8288;</code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='att_amend_desc'>Amend DESCRIPTION with dependencies read from package code parsing</h2><span id='topic+att_amend_desc'></span><span id='topic+att_to_desc_from_pkg'></span>

<h3>Description</h3>

<p>Amend package DESCRIPTION file with the list of dependencies extracted from
R, tests, vignettes files.
att_to_desc_from_pkg() is an alias of att_amend_desc(),
for the correspondence with <code><a href="#topic+att_to_desc_from_is">att_to_desc_from_is()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_amend_desc(
  path = ".",
  path.n = "NAMESPACE",
  path.d = "DESCRIPTION",
  dir.r = "R",
  dir.v = "vignettes",
  dir.t = "tests",
  extra.suggests = NULL,
  pkg_ignore = NULL,
  document = TRUE,
  normalize = TRUE,
  inside_rmd = FALSE,
  must.exist = TRUE,
  check_if_suggests_is_installed = TRUE,
  update.config = FALSE,
  use.config = TRUE,
  path.c = "dev/config_attachment.yaml"
)

att_to_desc_from_pkg(
  path = ".",
  path.n = "NAMESPACE",
  path.d = "DESCRIPTION",
  dir.r = "R",
  dir.v = "vignettes",
  dir.t = "tests",
  extra.suggests = NULL,
  pkg_ignore = NULL,
  document = TRUE,
  normalize = TRUE,
  inside_rmd = FALSE,
  must.exist = TRUE,
  check_if_suggests_is_installed = TRUE,
  update.config = FALSE,
  use.config = TRUE,
  path.c = "dev/config_attachment.yaml"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_amend_desc_+3A_path">path</code></td>
<td>
<p>path to the root of the package directory. Default to current directory.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_path.n">path.n</code></td>
<td>
<p>path to namespace file.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_path.d">path.d</code></td>
<td>
<p>path to description file.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_dir.r">dir.r</code></td>
<td>
<p>path to directory with R scripts.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_dir.v">dir.v</code></td>
<td>
<p>path to vignettes directory. Set to empty (dir.v = &quot;&quot;) to ignore.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_dir.t">dir.t</code></td>
<td>
<p>path to tests directory. Set to empty (dir.t = &quot;&quot;) to ignore.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_extra.suggests">extra.suggests</code></td>
<td>
<p>vector of other packages that should be added in Suggests (pkgdown, covr for instance)</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_pkg_ignore">pkg_ignore</code></td>
<td>
<p>vector of packages names to ignore.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_document">document</code></td>
<td>
<p>Run function roxygenise of roxygen2 package</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_normalize">normalize</code></td>
<td>
<p>Logical. Whether to normalize the DESCRIPTION file. See <code><a href="desc.html#topic+desc_normalize">desc::desc_normalize()</a></code></p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_inside_rmd">inside_rmd</code></td>
<td>
<p>Logical. Whether function is run inside a Rmd,
in case this must be executed in an external R session</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_must.exist">must.exist</code></td>
<td>
<p>Logical. If TRUE then an error is given if packages do not exist
within installed packages. If NA, a warning.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_check_if_suggests_is_installed">check_if_suggests_is_installed</code></td>
<td>
<p>Logical. Whether to require that packages in the Suggests section are installed.</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_update.config">update.config</code></td>
<td>
<p>logical. Should the parameters used in this call be saved in the config file of the package</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_use.config">use.config</code></td>
<td>
<p>logical. Should the command use the parameters from the config file to run</p>
</td></tr>
<tr><td><code id="att_amend_desc_+3A_path.c">path.c</code></td>
<td>
<p>character Path to the yaml config file where parameters are saved</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Your daily use is to run <code>att_amend_desc()</code>, as is.
You will want to run this function sometimes with some extra information like
<code>att_amend_desc(pkg_ignore = "x", update.config = TRUE)</code> if you have to update
the configuration file.
Next time <code>att_amend_desc()</code> will use these parameters from the configuration
file directly.
</p>


<h3>Value</h3>

<p>Update DESCRIPTION file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Run on an external "dummypackage" as an example
# For your local use, you do not have to specify the `path` as below
# By default, `att_amend_desc()` will run on the current working directory

# Create a fake package for the example
tmpdir &lt;- tempfile(pattern = "description")
dir.create(tmpdir)
file.copy(system.file("dummypackage",package = "attachment"), tmpdir,
 recursive = TRUE)
dummypackage &lt;- file.path(tmpdir, "dummypackage")

# Update documentation and dependencies
att_amend_desc(path = dummypackage)

# You can look at the content of this external package
#' # browseURL(dummypackage)

# Update the config file with extra parameters
# We recommend that you store this code in a file in your "dev/" directory
# to run it when needed
att_amend_desc(path = dummypackage, extra.suggests = "testthat", update.config = TRUE)

# Next time, in your daily development
att_amend_desc(path = dummypackage)

# Clean after examples
unlink(tmpdir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='att_from_description'>Return all package dependencies from current package</h2><span id='topic+att_from_description'></span>

<h3>Description</h3>

<p>Return all package dependencies from current package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_description(
  path = "DESCRIPTION",
  dput = FALSE,
  field = c("Depends", "Imports", "Suggests")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_description_+3A_path">path</code></td>
<td>
<p>path to the DESCRIPTION file</p>
</td></tr>
<tr><td><code id="att_from_description_+3A_dput">dput</code></td>
<td>
<p>if FALSE return a vector instead of dput output</p>
</td></tr>
<tr><td><code id="att_from_description_+3A_field">field</code></td>
<td>
<p>DESCRIPTION field to parse, Import, Suggests and Depends by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with packages names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dummypackage &lt;- system.file("dummypackage", package = "attachment")
# browseURL(dummypackage)
att_from_description(path = file.path(dummypackage, "DESCRIPTION"))

</code></pre>

<hr>
<h2 id='att_from_namespace'>return package dependencies from NAMESPACE file</h2><span id='topic+att_from_namespace'></span>

<h3>Description</h3>

<p>return package dependencies from NAMESPACE file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_namespace(path = "NAMESPACE", document = TRUE, clean = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_namespace_+3A_path">path</code></td>
<td>
<p>path to NAMESPACE file</p>
</td></tr>
<tr><td><code id="att_from_namespace_+3A_document">document</code></td>
<td>
<p>Run function roxygenise of roxygen2 package</p>
</td></tr>
<tr><td><code id="att_from_namespace_+3A_clean">clean</code></td>
<td>
<p>Logical. Whether to remove the original NAMESPACE before updating</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmpdir &lt;- tempfile(pattern = "namespace")
dir.create(tmpdir)
file.copy(system.file("dummypackage",package = "attachment"), tmpdir,
 recursive = TRUE)
dummypackage &lt;- file.path(tmpdir, "dummypackage")
# browseURL(dummypackage)
att_from_namespace(path = file.path(dummypackage, "NAMESPACE"))

# Clean temp files after this example
unlink(tmpdir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='att_from_rmd'>Get all dependencies from a Rmd file</h2><span id='topic+att_from_rmd'></span><span id='topic+att_from_qmd'></span>

<h3>Description</h3>

<p>Get all dependencies from a Rmd file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_rmd(
  path,
  temp_dir = tempdir(),
  warn = -1,
  encoding = getOption("encoding"),
  inside_rmd = FALSE,
  inline = TRUE
)

att_from_qmd(
  path,
  temp_dir = tempdir(),
  warn = -1,
  encoding = getOption("encoding"),
  inside_rmd = FALSE,
  inline = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_rmd_+3A_path">path</code></td>
<td>
<p>Path to a Rmd file</p>
</td></tr>
<tr><td><code id="att_from_rmd_+3A_temp_dir">temp_dir</code></td>
<td>
<p>Path to temporary script from purl vignette</p>
</td></tr>
<tr><td><code id="att_from_rmd_+3A_warn">warn</code></td>
<td>
<p>-1 for quiet warnings with purl, 0 to see warnings</p>
</td></tr>
<tr><td><code id="att_from_rmd_+3A_encoding">encoding</code></td>
<td>
<p>Encoding of the input file; always assumed to be UTF-8 (i.e.,
this argument is effectively ignored).</p>
</td></tr>
<tr><td><code id="att_from_rmd_+3A_inside_rmd">inside_rmd</code></td>
<td>
<p>Logical. Whether function is run inside a Rmd,
in case this must be executed in an external R session</p>
</td></tr>
<tr><td><code id="att_from_rmd_+3A_inline">inline</code></td>
<td>
<p>Logical. Default TRUE. Whether to explore inline code for dependencies.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of character of packages names found in the Rmd
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dummypackage &lt;- system.file("dummypackage",package = "attachment")
# browseURL(dummypackage)
att_from_rmd(path = file.path(dummypackage,"vignettes/demo.Rmd"))

</code></pre>

<hr>
<h2 id='att_from_rmds'>Get all packages called in vignettes folder</h2><span id='topic+att_from_rmds'></span><span id='topic+att_from_qmds'></span>

<h3>Description</h3>

<p>Get all packages called in vignettes folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_rmds(
  path = "vignettes",
  pattern = "*.[.](Rmd|rmd|qmd)$",
  recursive = TRUE,
  warn = -1,
  inside_rmd = FALSE,
  inline = TRUE
)

att_from_qmds(
  path = "vignettes",
  pattern = "*.[.](Rmd|rmd|qmd)$",
  recursive = TRUE,
  warn = -1,
  inside_rmd = FALSE,
  inline = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_rmds_+3A_path">path</code></td>
<td>
<p>path to directory with Rmds or vector of Rmd files</p>
</td></tr>
<tr><td><code id="att_from_rmds_+3A_pattern">pattern</code></td>
<td>
<p>pattern to detect Rmd files</p>
</td></tr>
<tr><td><code id="att_from_rmds_+3A_recursive">recursive</code></td>
<td>
<p>logical. Should the listing recurse into directories?</p>
</td></tr>
<tr><td><code id="att_from_rmds_+3A_warn">warn</code></td>
<td>
<p>-1 for quiet warnings with purl, 0 to see warnings</p>
</td></tr>
<tr><td><code id="att_from_rmds_+3A_inside_rmd">inside_rmd</code></td>
<td>
<p>Logical. Whether function is run inside a Rmd,
in case this must be executed in an external R session</p>
</td></tr>
<tr><td><code id="att_from_rmds_+3A_inline">inline</code></td>
<td>
<p>Logical. Default TRUE. Whether to explore inline code for dependencies.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of packages called with library or require.
<em>knitr</em> and <em>rmarkdown</em> are added by default to allow building the vignettes
if the directory contains &quot;vignettes&quot; in the path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dummypackage &lt;- system.file("dummypackage",package = "attachment")
# browseURL(dummypackage)
att_from_rmds(path = file.path(dummypackage,"vignettes"))
</code></pre>

<hr>
<h2 id='att_from_rscript'>Look for functions called with <code>::</code> and library/requires in one script</h2><span id='topic+att_from_rscript'></span>

<h3>Description</h3>

<p>Look for functions called with <code>::</code> and library/requires in one script
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_rscript(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_rscript_+3A_path">path</code></td>
<td>
<p>path to R script file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calls from pkg::fun in roxygen skeleton and comments are ignored
</p>


<h3>Value</h3>

<p>a vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dummypackage &lt;- system.file("dummypackage",package = "attachment")
# browseURL(dummypackage)

att_from_rscript(path = file.path(dummypackage,"R","my_mean.R"))
</code></pre>

<hr>
<h2 id='att_from_rscripts'>Look for functions called with <code>::</code> and library/requires in folder of scripts</h2><span id='topic+att_from_rscripts'></span>

<h3>Description</h3>

<p>Look for functions called with <code>::</code> and library/requires in folder of scripts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_from_rscripts(path = "R", pattern = "*.[.](r|R)$", recursive = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_from_rscripts_+3A_path">path</code></td>
<td>
<p>directory with R scripts inside or vector of R scripts</p>
</td></tr>
<tr><td><code id="att_from_rscripts_+3A_pattern">pattern</code></td>
<td>
<p>pattern to detect R script files</p>
</td></tr>
<tr><td><code id="att_from_rscripts_+3A_recursive">recursive</code></td>
<td>
<p>logical. Should the listing recurse into directories?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of character of packages names found in the R script
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dummypackage &lt;- system.file("dummypackage",package = "attachment")
# browseURL(dummypackage)

att_from_rscripts(path = file.path(dummypackage, "R"))
att_from_rscripts(path = list.files(file.path(dummypackage, "R"), full.names = TRUE))
</code></pre>

<hr>
<h2 id='att_to_desc_from_is'>Amend DESCRIPTION with dependencies from imports and suggests package list</h2><span id='topic+att_to_desc_from_is'></span>

<h3>Description</h3>

<p>Amend DESCRIPTION with dependencies from imports and suggests package list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_to_desc_from_is(
  path.d = "DESCRIPTION",
  imports = NULL,
  suggests = NULL,
  check_if_suggests_is_installed = TRUE,
  normalize = TRUE,
  must.exist = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att_to_desc_from_is_+3A_path.d">path.d</code></td>
<td>
<p>path to description file.</p>
</td></tr>
<tr><td><code id="att_to_desc_from_is_+3A_imports">imports</code></td>
<td>
<p>character vector of package names to add in Imports section</p>
</td></tr>
<tr><td><code id="att_to_desc_from_is_+3A_suggests">suggests</code></td>
<td>
<p>character vector of package names to add in Suggests section</p>
</td></tr>
<tr><td><code id="att_to_desc_from_is_+3A_check_if_suggests_is_installed">check_if_suggests_is_installed</code></td>
<td>
<p>Logical. Whether to require that packages in the Suggests section are installed.</p>
</td></tr>
<tr><td><code id="att_to_desc_from_is_+3A_normalize">normalize</code></td>
<td>
<p>Logical. Whether to normalize the DESCRIPTION file. See <code><a href="desc.html#topic+desc_normalize">desc::desc_normalize()</a></code></p>
</td></tr>
<tr><td><code id="att_to_desc_from_is_+3A_must.exist">must.exist</code></td>
<td>
<p>Logical. If TRUE then an error is given if packages do not exist
within installed packages. If NA, a warning.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>must.exist</code> is better set to <code>TRUE</code> during package development.
This stops the process when a package does not exists on your system.
This avoids check errors with typos in package names in DESCRIPTION.
When used in CI to discover dependencies, for a bookdown for instance,
you may want to set to <code>FALSE</code> (no message at all) or <code>NA</code> (warning for not installed).
</p>


<h3>Value</h3>

<p>Fill in Description file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmpdir &lt;- tempfile(pattern = "descfromis")
dir.create(tmpdir)
file.copy(system.file("dummypackage",package = "attachment"), tmpdir,
 recursive = TRUE)
dummypackage &lt;- file.path(tmpdir, "dummypackage")
# browseURL(dummypackage)
att_to_desc_from_is(path.d = file.path(dummypackage, "DESCRIPTION"),
imports = c("magrittr", "attachment"), suggests = c("knitr"))

# In combination with other functions
att_to_desc_from_is(path.d = file.path(dummypackage, "DESCRIPTION"),
imports = att_from_rscripts(file.path(dummypackage, "R")),
suggests = att_from_rmds(file.path(dummypackage, "vignettes")))

# Clean temp files after this example
unlink(tmpdir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='attachment-deprecated'>Deprecated functions</h2><span id='topic+attachment-deprecated'></span><span id='topic+att_to_description'></span>

<h3>Description</h3>

<p>List of functions deprecated. They will be removed in a future release.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_to_description(
  path = ".",
  path.n = "NAMESPACE",
  path.d = "DESCRIPTION",
  dir.r = "R",
  dir.v = "vignettes",
  dir.t = "tests",
  extra.suggests = NULL,
  pkg_ignore = NULL,
  document = TRUE,
  normalize = TRUE,
  inside_rmd = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attachment-deprecated_+3A_path">path</code></td>
<td>
<p>path to the root of the package directory. Default to current directory.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_path.n">path.n</code></td>
<td>
<p>path to namespace file.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_path.d">path.d</code></td>
<td>
<p>path to description file.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_dir.r">dir.r</code></td>
<td>
<p>path to directory with R scripts.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_dir.v">dir.v</code></td>
<td>
<p>path to vignettes directory. Set to empty (dir.v = &quot;&quot;) to ignore.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_dir.t">dir.t</code></td>
<td>
<p>path to tests directory. Set to empty (dir.t = &quot;&quot;) to ignore.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_extra.suggests">extra.suggests</code></td>
<td>
<p>vector of other packages that should be added in Suggests (pkgdown, covr for instance)</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_pkg_ignore">pkg_ignore</code></td>
<td>
<p>vector of packages names to ignore.</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_document">document</code></td>
<td>
<p>Run function roxygenise of roxygen2 package</p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_normalize">normalize</code></td>
<td>
<p>Logical. Whether to normalize the DESCRIPTION file. See <code><a href="desc.html#topic+desc_normalize">desc::desc_normalize()</a></code></p>
</td></tr>
<tr><td><code id="attachment-deprecated_+3A_inside_rmd">inside_rmd</code></td>
<td>
<p>Logical. Whether function is run inside a Rmd,
in case this must be executed in an external R session</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of functions used for deprecation side effects.
Output depends on the deprecated function.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: right;">
<code>att_to_description</code> </td><td style="text-align: left;"> is now called <code>att_amend_desc</code>
so that it is the first function proposed when using auto-completion</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>


<hr>
<h2 id='create_dependencies_file'>Create the list of instructions to install dependencies from a DESCRIPTION file</h2><span id='topic+create_dependencies_file'></span>

<h3>Description</h3>

<p>Outputs the list of instructions and a &quot;dependencies.R&quot; file with instructions in the &quot;inst/&quot; directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_dependencies_file(
  path = "DESCRIPTION",
  field = c("Depends", "Imports"),
  to = "inst/dependencies.R",
  open_file = TRUE,
  ignore_base = TRUE,
  install_only_if_missing = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_dependencies_file_+3A_path">path</code></td>
<td>
<p>path to the DESCRIPTION file</p>
</td></tr>
<tr><td><code id="create_dependencies_file_+3A_field">field</code></td>
<td>
<p>DESCRIPTION field to parse, &quot;Import&quot; and &quot;Depends&quot; by default. Can add &quot;Suggests&quot;</p>
</td></tr>
<tr><td><code id="create_dependencies_file_+3A_to">to</code></td>
<td>
<p>path where to save the dependencies file. Set to &quot;inst/dependencies.R&quot; by default. Set to <code>NULL</code> if you do not want the file, but only the instructions as a list of character.</p>
</td></tr>
<tr><td><code id="create_dependencies_file_+3A_open_file">open_file</code></td>
<td>
<p>Logical. Open the file created in an editor</p>
</td></tr>
<tr><td><code id="create_dependencies_file_+3A_ignore_base">ignore_base</code></td>
<td>
<p>Logical. Whether to ignore package coming with base, as they cannot be installed (default TRUE)</p>
</td></tr>
<tr><td><code id="create_dependencies_file_+3A_install_only_if_missing">install_only_if_missing</code></td>
<td>
<p>Logical Modify the installation instructions to check, beforehand, if the packages are missing . (default FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of R instructions to install all dependencies from a DESCRIPTION file. Side effect: creates a R file containing these instructions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a fake package
tmpdir &lt;- tempfile(pattern = "depsfile")
dir.create(tmpdir)
file.copy(system.file("dummypackage",package = "attachment"), tmpdir,
          recursive = TRUE)
dummypackage &lt;- file.path(tmpdir, "dummypackage")

# Create the dependencies commands but no file
create_dependencies_file(
  path = file.path(dummypackage,"DESCRIPTION"),
  to = NULL,
  open_file = FALSE)

# Create the dependencies files in the package
create_dependencies_file(
  path = file.path(dummypackage,"DESCRIPTION"),
  to = file.path(dummypackage, "inst/dependencies.R"),
  open_file = FALSE)
list.files(file.path(dummypackage, "inst"))
# browseURL(dummypackage)

# Clean temp files after this example
unlink(tmpdir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='create_renv_for_dev'>Create reproducible environments for your R projects with <em>renv</em></h2><span id='topic+create_renv_for_dev'></span><span id='topic+create_renv_for_prod'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Tool to create and maintain renv.lock files.
The idea is to have 2 distinct files, one for development and the other for deployment.
Indeed, although packages like <em>attachment</em> or <em>pkgload</em> must be installed to develop,
they are not necessary in your project, package or Shiny application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_renv_for_dev(
  path = ".",
  dev_pkg = "_default",
  folder_to_include = c("dev", "data-raw"),
  output = "renv.lock",
  install_if_missing = TRUE,
  document = TRUE,
  pkg_ignore = NULL,
  check_if_suggests_is_installed = TRUE,
  ...
)

create_renv_for_prod(
  path = ".",
  output = "renv.lock.prod",
  dev_pkg = "remotes",
  check_if_suggests_is_installed = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_renv_for_dev_+3A_path">path</code></td>
<td>
<p>Path to your current package source folder</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_dev_pkg">dev_pkg</code></td>
<td>
<p>Vector of packages you need for development. Use <code style="white-space: pre;">&#8288;_default&#8288;</code>
(with underscore before to avoid confusing with a package name), to
use the default list. Use <code>NULL</code> for no extra package.
Use <code>attachment:::extra_dev_pkg</code> for the list.</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_folder_to_include">folder_to_include</code></td>
<td>
<p>Folder to scan to detect development packages</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_output">output</code></td>
<td>
<p>Path and name of the file created, default is <code>./renv.lock</code></p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_install_if_missing">install_if_missing</code></td>
<td>
<p>Logical. Install missing packages. <code>TRUE</code> by default</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_document">document</code></td>
<td>
<p>Logical. Whether to run <code><a href="#topic+att_amend_desc">att_amend_desc()</a></code> before
detecting packages in DESCRIPTION.</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_pkg_ignore">pkg_ignore</code></td>
<td>
<p>Vector of packages to ignore from being discovered in your files.
This does not prevent them to be in &quot;renv.lock&quot; if they are recursive dependencies.</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_check_if_suggests_is_installed">check_if_suggests_is_installed</code></td>
<td>
<p>Logical. Whether to require that packages in the Suggests section are installed.</p>
</td></tr>
<tr><td><code id="create_renv_for_dev_+3A_...">...</code></td>
<td>
<p>Other arguments to pass to <code><a href="renv.html#topic+snapshot">renv::snapshot()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a renv.lock file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Writes a renv.lock a file in the user directory
create_renv_for_dev()
create_renv_for_dev(dev_pkg = "attachment")
create_renv_for_prod()

## End(Not run)
</code></pre>

<hr>
<h2 id='find_remotes'>Proposes values for Remotes field for DESCRIPTION file based on your installation</h2><span id='topic+find_remotes'></span>

<h3>Description</h3>

<p>Proposes values for Remotes field for DESCRIPTION file based on your installation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_remotes(pkg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_remotes_+3A_pkg">pkg</code></td>
<td>
<p>Character. Packages to test for potential non-CRAN installation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of all non-CRAN packages and code to add in Remotes field in DESCRIPTION.
NULL otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Find from vector of packages
find_remotes(pkg = c("attachment", "desc", "glue"))

# Find from Description file
dummypackage &lt;- system.file("dummypackage", package = "attachment")
att_from_description(
path = file.path(dummypackage, "DESCRIPTION")) %&gt;%
find_remotes()

## Not run: 
# For the current package directory
att_from_description() %&gt;% find_remotes()

## End(Not run)


# For a specific package name
find_remotes("attachment")

# Find remotes from all installed packages
find_remotes(list.dirs(.libPaths(), full.names = FALSE, recursive = FALSE))

</code></pre>

<hr>
<h2 id='install_from_description'>Install missing package from DESCRIPTION</h2><span id='topic+install_from_description'></span>

<h3>Description</h3>

<p>Install missing package from DESCRIPTION
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_from_description(
  path = "DESCRIPTION",
  field = c("Depends", "Imports", "Suggests"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_from_description_+3A_path">path</code></td>
<td>
<p>path to the DESCRIPTION file</p>
</td></tr>
<tr><td><code id="install_from_description_+3A_field">field</code></td>
<td>
<p>DESCRIPTION fields to parse, &quot;Depends&quot;, &quot;Imports&quot;, &quot;Suggests&quot; by default</p>
</td></tr>
<tr><td><code id="install_from_description_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code><a href="utils.html#topic+install.packages">utils::install.packages()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effect. Installs R packages from DESCRIPTION file if missing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This will install packages on your system
dummypackage &lt;- system.file("dummypackage", package = "attachment")
# browseURL(dummypackage)

install_from_description(path = file.path(dummypackage, "DESCRIPTION"))

## End(Not run)
</code></pre>

<hr>
<h2 id='install_if_missing'>install  packages if missing</h2><span id='topic+install_if_missing'></span>

<h3>Description</h3>

<p>install  packages if missing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_if_missing(to_be_installed, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_if_missing_+3A_to_be_installed">to_be_installed</code></td>
<td>
<p>a character vector containing required packages names</p>
</td></tr>
<tr><td><code id="install_if_missing_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code><a href="utils.html#topic+install.packages">utils::install.packages()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effect. Install missing packages from the character vector input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This will install packages on your system
install_if_missing(c("dplyr", "fcuk", "rusk"))

## End(Not run)

</code></pre>

<hr>
<h2 id='set_remotes_to_desc'>Add Remotes field to DESCRIPTION based on your local installation</h2><span id='topic+set_remotes_to_desc'></span>

<h3>Description</h3>

<p>Add Remotes field to DESCRIPTION based on your local installation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_remotes_to_desc(path.d = "DESCRIPTION", stop.local = FALSE, clean = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_remotes_to_desc_+3A_path.d">path.d</code></td>
<td>
<p>path to description file.</p>
</td></tr>
<tr><td><code id="set_remotes_to_desc_+3A_stop.local">stop.local</code></td>
<td>
<p>Logical. Whether to stop if package was installed from local source.
Message otherwise.</p>
</td></tr>
<tr><td><code id="set_remotes_to_desc_+3A_clean">clean</code></td>
<td>
<p>Logical. Whether to clean all existing remotes before run.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effect. Adds Remotes field in DESCRIPTION file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmpdir &lt;- tempfile(pattern = "setremotes")
dir.create(tmpdir)
file.copy(system.file("dummypackage", package = "attachment"), tmpdir,
 recursive = TRUE)
dummypackage &lt;- file.path(tmpdir, "dummypackage")
# Add remotes field if there are Remotes locally
att_amend_desc(dummypackage) %&gt;%
  set_remotes_to_desc()

# Clean temp files after this example
unlink(tmpdir, recursive = TRUE)

## Not run: 
# For your current package
att_amend_desc() %&gt;%
  set_remotes_to_desc()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
