<!DOCTYPE html><html><head><title>Help for package rankdist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rankdist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rankdist-package'>
<p>A package for fitting distance based ranking models</p></a></li>
<li><a href='#apa_obj'><p>American Psychological Association (APA) election data</p></a></li>
<li><a href='#apa_partial_obj'><p>American Psychological Association (APA) election data (partial rankings included)</p></a></li>
<li><a href='#DistanceBlock'><p>Calculate Kendall distance between one ranking and a matrix of rankings</p></a></li>
<li><a href='#DistanceMatrix'><p>Calculate Kendall distance matrix between rankings</p></a></li>
<li><a href='#DistancePair'><p>Calculate Kendall distance between a pair of rankings</p></a></li>
<li><a href='#GenerateExample'><p>Generate simple examples</p></a></li>
<li><a href='#GenerateExampleTopQ'><p>Generate simple examples of top-q rankings</p></a></li>
<li><a href='#HashtoRank'><p>Obtain Ranking from Hash Value</p></a></li>
<li><a href='#ModelSummary'><p>Print a brief summary of the fitted model</p></a></li>
<li><a href='#MomentsEst'><p>Find Initial Values of phi</p></a></li>
<li><a href='#OrderingToRanking'><p>Transformation between Rankings and Orderings</p></a></li>
<li><a href='#RankControl-class'><p>RankControl Class</p></a></li>
<li><a href='#RankControlCayley-class'><p>RankControlCayley Class</p></a></li>
<li><a href='#RankControlFootrule-class'><p>RankControlFootrule Class</p></a></li>
<li><a href='#RankControlHamming-class'><p>RankControlHamming Class</p></a></li>
<li><a href='#RankControlKendall-class'><p>RankControlKendall Class</p></a></li>
<li><a href='#RankControlPhiComponent-class'><p>RankControlPhiComponent Class</p></a></li>
<li><a href='#RankControlSpearman-class'><p>RankControlSpearman Class</p></a></li>
<li><a href='#RankControlWeightedKendall-class'><p>RankControlWeightedKendall Class</p></a></li>
<li><a href='#RankControlWtau-class'><p>RankControlWtau Class</p></a></li>
<li><a href='#RankData-class'><p>RankData Class</p></a></li>
<li><a href='#RankDistanceModel'><p>Fit A Mixture of Distance-based Models</p></a></li>
<li><a href='#RankInit-class'><p>RankInit Class</p></a></li>
<li><a href='#RanktoHash'><p>Create Hash Value for Ranking</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Distance Based Ranking Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-07-27</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhaozhi Qian</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhaozhi Qian &lt;qianzhaozhi@connect.hku.hk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements distance based probability models for ranking data. 
    The supported distance metrics include Kendall distance, Spearman distance, Footrule distance, Hamming distance,
    Weighted-tau distance and Weighted Kendall distance.
    Phi-component model and mixture models are also supported.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.11.4), hash, optimx, permute, methods</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-07-27 16:28:49 UTC; steven</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-07-27 21:40:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='rankdist-package'>
A package for fitting distance based ranking models
</h2><span id='topic+rankdist-package'></span><span id='topic+rankdist'></span>

<h3>Description</h3>

<p>The rankdist package implements distance based probability models for ranking data. Mixture models are also supported. Ranking data are stored as S4 objects to avoid confusions about representations.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> rankdist</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.1.4</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2019-07-27</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Distance based models are effective ways to model ranking data. This package supports models based on Kendall distance and weighted Kendall distance. Mixture models can be easily fitted as well. The package includes a well-studied ranking data set, the APA Election data.
</p>


<h3>Author(s)</h3>

<p>Zhaozhi Qian
</p>
<p>Maintainer: Zhaozhi Qian &lt;qianzhaozhi@connect.hku.hk&gt;
</p>


<h3>References</h3>

<p>Qian Z,  Yu L. H. P (2019) &quot;Weighted Distance-Based Models for Ranking Data Using the R Package rankdist.&quot; <em>Journal of Statistical Software</em>, <strong>90</strong>(5), 1-31. doi: 10.18637/jss.v090.i05
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
fitted_model &lt;- RankDistanceModel(rankdata,rankinit,rankctrl)

## End(Not run)
</code></pre>

<hr>
<h2 id='apa_obj'>American Psychological Association (APA) election data</h2><span id='topic+apa_obj'></span>

<h3>Description</h3>

<p>A dataset containing 5738 complete votes in APA election. There are 5 candidates in total.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apa_obj
</code></pre>


<h3>Format</h3>

<p>a RankData object</p>


<h3>References</h3>

<p>Marden, J. I. (1995). Analyzing and Modeling Rank Data (94-96). Chapman Hall, New York.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+apa_partial_obj">apa_partial_obj</a></code>
</p>

<hr>
<h2 id='apa_partial_obj'>American Psychological Association (APA) election data (partial rankings included)</h2><span id='topic+apa_partial_obj'></span>

<h3>Description</h3>

<p>A dataset containing 5738 complete votes and 9711 partial votes in APA election. There are 5 candidates in total.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apa_partial_obj
</code></pre>


<h3>Format</h3>

<p>a RankData object</p>


<h3>References</h3>

<p>Marden, J. I. (1995). Analyzing and Modeling Rank Data (94-96). Chapman Hall, New York.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+apa_obj">apa_obj</a></code>
</p>

<hr>
<h2 id='DistanceBlock'>Calculate Kendall distance between one ranking and a matrix of rankings</h2><span id='topic+DistanceBlock'></span>

<h3>Description</h3>

<p>Calculate Kendall distance between one ranking and a matrix of rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DistanceBlock(mat, r)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DistanceBlock_+3A_mat">mat</code></td>
<td>
<p>a matrix of rankings. Each row stores a ranking.</p>
</td></tr>
<tr><td><code id="DistanceBlock_+3A_r">r</code></td>
<td>
<p>a single ranking</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of Kendall distances
</p>

<hr>
<h2 id='DistanceMatrix'>Calculate Kendall distance matrix between rankings</h2><span id='topic+DistanceMatrix'></span>

<h3>Description</h3>

<p>Calculate Kendall distance matrix between rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DistanceMatrix(ranking)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DistanceMatrix_+3A_ranking">ranking</code></td>
<td>
<p>a matrix of rankings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Kendall distance matrix between rankings. The value in ith row and jth column is the
Kendall distance between the ith and jth rankings.
</p>

<hr>
<h2 id='DistancePair'>Calculate Kendall distance between a pair of rankings</h2><span id='topic+DistancePair'></span>

<h3>Description</h3>

<p>Calculate Kendall distance between a pair of rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DistancePair(r1, r2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DistancePair_+3A_r1">r1</code></td>
<td>
<p>a single ranking</p>
</td></tr>
<tr><td><code id="DistancePair_+3A_r2">r2</code></td>
<td>
<p>a single ranking</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Kendall distance value
</p>

<hr>
<h2 id='GenerateExample'>Generate simple examples</h2><span id='topic+GenerateExample'></span>

<h3>Description</h3>

<p>This function generates simple examples for illustrative proposes.
The sample contains rankings of five objects and the underlying model is a Mallows' phi
model with default dispersion parameter set to 0.2
and modal ranking set to (1,2,3,4,5)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GenerateExample(ranking = TRUE, central = 1:5, lambda = 0.2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GenerateExample_+3A_ranking">ranking</code></td>
<td>
<p>TRUE if &quot;ranking&quot; representation is used in the output data; otherwise &quot;ordering&quot; representation is used.</p>
</td></tr>
<tr><td><code id="GenerateExample_+3A_central">central</code></td>
<td>
<p>The modal ranking.</p>
</td></tr>
<tr><td><code id="GenerateExample_+3A_lambda">lambda</code></td>
<td>
<p>The parameter in the model.</p>
</td></tr>
</table>

<hr>
<h2 id='GenerateExampleTopQ'>Generate simple examples of top-q rankings</h2><span id='topic+GenerateExampleTopQ'></span>

<h3>Description</h3>

<p>This function generates simple examples for illustrative proposes.
The sample contains the top-3 rankings of five objects and the underlying model is a weighted Kendall distance model
with default weights set to (0.7,0.5,0.3,0)
and modal ranking set to (1,2,3,4,4)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GenerateExampleTopQ(central = c(1, 2, 3, 4, 4), w = c(0.7, 0.5, 0.3, 0))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GenerateExampleTopQ_+3A_central">central</code></td>
<td>
<p>The modal ranking.</p>
</td></tr>
<tr><td><code id="GenerateExampleTopQ_+3A_w">w</code></td>
<td>
<p>The weights in the model.</p>
</td></tr>
</table>

<hr>
<h2 id='HashtoRank'>Obtain Ranking from Hash Value</h2><span id='topic+HashtoRank'></span>

<h3>Description</h3>

<p><code>HashToRank</code> returns rankings from given hash values. Maximum 52 objects are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HashtoRank(h)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="HashtoRank_+3A_h">h</code></td>
<td>
<p>A vector of hash values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix of rankings if input has more than one element or a single ranking (numeric vector) if input has only one element
</p>


<h3>See Also</h3>

<p><code><a href="#topic+RanktoHash">RanktoHash</a></code> for a reverse operation.
</p>

<hr>
<h2 id='ModelSummary'>Print a brief summary of the fitted model</h2><span id='topic+ModelSummary'></span>

<h3>Description</h3>

<p>Print a brief summary of the fitted model. This includes information about goodness
of fit as well as parameter estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ModelSummary(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ModelSummary_+3A_model">model</code></td>
<td>
<p>a ranking model returned by a call to RankDistanceModel function.</p>
</td></tr>
</table>

<hr>
<h2 id='MomentsEst'>Find Initial Values of phi</h2><span id='topic+MomentsEst'></span>

<h3>Description</h3>

<p><code>MomentsEst</code> finds the initial values of phi which can be used in the subsequent optimization problems.
Linear model is fitted to the log odds of rankings.This function is only useful to the Weighted Kendall model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MomentsEst(dat, size, pi0 = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MomentsEst_+3A_dat">dat</code></td>
<td>
<p>a RankData object</p>
</td></tr>
<tr><td><code id="MomentsEst_+3A_size">size</code></td>
<td>
<p>the number of samples to take in the linear model</p>
</td></tr>
<tr><td><code id="MomentsEst_+3A_pi0">pi0</code></td>
<td>
<p>an optional argument showing the location of central ranking.
If not provided, Borda Count method is used to estimate the central ranking.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>estimated phi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>MomentsEst(apa_obj,40)
</code></pre>

<hr>
<h2 id='OrderingToRanking'>Transformation between Rankings and Orderings</h2><span id='topic+OrderingToRanking'></span>

<h3>Description</h3>

<p><code>OrderingToRanking</code> transforms between ranking representation and ordering representation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OrderingToRanking(ordering)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="OrderingToRanking_+3A_ordering">ordering</code></td>
<td>
<p>a matrix of orderings or rankings. Each row contains an observation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ranking representation encodes the position of objects. Ordering representation is an ordered sequence of objects.
For example ranking (2 3 1 4) is equivalent to ordering (3 1 2 4), which means object 3 is first, object 1 is second, followed by object 2 and 4.
Also note that we can use this function to transform rankings into orderings, and applying this function twice will not change the input value.
</p>


<h3>Value</h3>

<p>a matrix of transformed rankings or orderings. Each row contains an observation.
</p>

<hr>
<h2 id='RankControl-class'>RankControl Class</h2><span id='topic+RankControl'></span><span id='topic+RankControl-class'></span>

<h3>Description</h3>

<p>A virtual S4 class to store control parameters for model fitting.
</p>


<h3>Details</h3>

<p>RankControl class must be extended to reflect what distance metric should be used. Possibles extensions are <code><a href="#topic+RankControlWeightedKendall">RankControlWeightedKendall</a></code>, <code><a href="#topic+RankControlKendall">RankControlKendall</a></code>, <code><a href="#topic+RankControlPhiComponent">RankControlPhiComponent</a></code>,
<code><a href="#topic+RankControlWtau">RankControlWtau</a></code>, <code><a href="#topic+RankControlSpearman">RankControlSpearman</a></code>, <code><a href="#topic+RankControlFootrule">RankControlFootrule</a></code>, <code><a href="#topic+RankControlHamming">RankControlHamming</a></code>, and <code><a href="#topic+RankControlCayley">RankControlCayley</a></code>.
</p>
<p>The control parameters that start with prefix <code>EM_</code> are intended for the EM iteration. The ones with prefix <code>SeachPi0</code> control the behaviour of searching model ranking.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current best. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>User-defined Criterion</h3>

<p>You can specify user-defined criterion to choose modal rankings. The function object SearchPi0_FUN takes a list as argument. The components in the list include the following. <code>obs</code>: the number of observations.
<code>w.est</code>: the estimated weights. <code>log_likelihood</code>: the estimated log_likelihood. With this information, most of the popular information criterion can be supported and customized criterion can also be defined.
A larger returned value indicates a better fit. Note that if you are fitting a mixture model the EM algorithm always tries to maximized the log likelihood. Thus the default value should be used in this case.
</p>


<h3>References</h3>

<p>Qian Z,  Yu L. H. P (2019) &quot;Weighted Distance-Based Models for Ranking Data Using the R Package rankdist.&quot; <em>Journal of Statistical Software</em>, <strong>90</strong>(5), 1-31. doi: 10.18637/jss.v090.i05
</p>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>
</p>

<hr>
<h2 id='RankControlCayley-class'>RankControlCayley Class</h2><span id='topic+RankControlCayley'></span><span id='topic+RankControlCayley-class'></span>

<h3>Description</h3>

<p>A S4 class for the Cayley distance model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankControlFootrule-class'>RankControlFootrule Class</h2><span id='topic+RankControlFootrule'></span><span id='topic+RankControlFootrule-class'></span>

<h3>Description</h3>

<p>A S4 class for the Footrule distance model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankControlHamming-class'>RankControlHamming Class</h2><span id='topic+RankControlHamming'></span><span id='topic+RankControlHamming-class'></span>

<h3>Description</h3>

<p>A S4 class for the Hamming distance model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankControlKendall-class'>RankControlKendall Class</h2><span id='topic+RankControlKendall'></span><span id='topic+RankControlKendall-class'></span>

<h3>Description</h3>

<p>A S4 class to store control parameters for Kendall distance model fitting (Mallow's Phi Model).
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Details</h3>

<p><code>RankControlKendall</code> is derived from virtual class <code><a href="#topic+RankControl">RankControl</a></code>.
This control class tells the solver to fit a model based on Kendall distance.
The control parameters that start with prefix <code>EM_</code> are intended for the EM iteration. The ones with prefix <code>SeachPi0</code> control the behaviour of searching model ranking.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># enabling messages
testctrl = new("RankControlKendall",SearchPi0_show_message=TRUE)
</code></pre>

<hr>
<h2 id='RankControlPhiComponent-class'>RankControlPhiComponent Class</h2><span id='topic+RankControlPhiComponent'></span><span id='topic+RankControlPhiComponent-class'></span>

<h3>Description</h3>

<p>A S4 class to store control parameters for Phi component model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Details</h3>

<p><code>RankControlKendall</code> is derived from virtual class <code><a href="#topic+RankControl">RankControl</a></code>.
This control class tells the solver to fit a model based on a stage-wise generalization of Kendall distance.
The control parameters that start with prefix <code>EM_</code> are intended for the EM iteration. The ones with prefix <code>SeachPi0</code> control the behaviour of searching model ranking.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># enabling messages
testctrl = new("RankControlPhiComponent",SearchPi0_show_message=TRUE)
</code></pre>

<hr>
<h2 id='RankControlSpearman-class'>RankControlSpearman Class</h2><span id='topic+RankControlSpearman'></span><span id='topic+RankControlSpearman-class'></span>

<h3>Description</h3>

<p>A S4 class for the Spearman distance model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankControlWeightedKendall-class'>RankControlWeightedKendall Class</h2><span id='topic+RankControlWeightedKendall'></span><span id='topic+RankControlWeightedKendall-class'></span>

<h3>Description</h3>

<p>A S4 class to store control parameters for Weighted Kendall distance model fitting. It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Details</h3>

<p><code>RankControlWeightedKendall</code> is derived from virtual class <code><a href="#topic+RankControl">RankControl</a></code>. All slots in <code><a href="#topic+RankControl">RankControl</a></code> are still valid.
This control class tells the solver to fit a model based on Weighted Kendall distance.
The control parameters that start with prefix <code>EM_</code> are intended for the EM iteration. The ones with prefix <code>SeachPi0</code> control the behaviour of searching model ranking.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
<dt><code>optimx_control</code></dt><dd><p>a list to be passed to <code><a href="optimx.html#topic+optimx">optimx</a></code>. The list must not contain a component <code>maximize=TRUE</code> since internally the negation of the likelihood function is minimized.</p>
</dd>
<dt><code>assumption</code></dt><dd><p>A character string specifying which assumption to use when handling top-q rankings. Supported choices are &quot;equal-probability&quot; and &quot;tied-rank&quot;.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># enabling  warnings
testctrl = new("RankControlWeightedKendall",optimx_control=list(dowarn=TRUE))
</code></pre>

<hr>
<h2 id='RankControlWtau-class'>RankControlWtau Class</h2><span id='topic+RankControlWtau'></span><span id='topic+RankControlWtau-class'></span>

<h3>Description</h3>

<p>A S4 class for the Weighted tau model fitting.
It is derived from class <code><a href="#topic+RankControl-class">RankControl-class</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>EM_limit</code></dt><dd><p>maximum number of EM iteration</p>
</dd>
<dt><code>EM_epsilon</code></dt><dd><p>convergence error for weights and cluster probabilities in EM iteration</p>
</dd>
<dt><code>SearchPi0_limit</code></dt><dd><p>maximum number of iterations in the local search of pi0.</p>
</dd>
<dt><code>SearchPi0_FUN</code></dt><dd><p>a function object that gives a goodness of fit criterion. The default is log likelihood.</p>
</dd>
<dt><code>SearchPi0_fast_traversal</code></dt><dd><p>a logical value. If TRUE (by default), immediately traverse to the neighbour if it is better than the current pi0. Otherwise, check all neighbours and traverse to the best one.</p>
</dd>
<dt><code>SearchPi0_show_message</code></dt><dd><p>a logical value. If TRUE, the location of the current pi0 is shown.</p>
</dd>
<dt><code>SearchPi0_neighbour</code></dt><dd><p>a character string specifying which type of neighbour to use in the local search. Supported values are: &quot;Cayley&quot; to use neighbours in terms of Cayley distance or &quot;Kendall&quot; to use neighbours in terms of Kendall distance.
Note that Kendall neighbours are a subset of Cayley neighbours</p>
</dd>
<dt><code>optimx_control</code></dt><dd><p>a list to be passed to <code><a href="optimx.html#topic+optimx">optimx</a></code>. The list must not contain a component <code>maximize=TRUE</code> since internally the negation of the likelihood function is minimized.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankData-class'>RankData Class</h2><span id='topic+RankData'></span><span id='topic+RankData-class'></span>

<h3>Description</h3>

<p>A S4 class to represent ranking data
</p>
<p>It is well understood that the ranking representation and ordering representation of ranking data can easily be confused.
I thus use a S4 class to store all the information about the ranking data. This can avoid unnecessary confusion.
</p>


<h3>Details</h3>

<p>It is possible to store both complete and top-q rankings in the same RankData object. Three slots <code>topq</code>, <code>subobs</code>, and
<code>q_ind</code> are introduced for this purpose. Note that there is generally no need to specify these slots if your data set only contains
a single &quot;q&quot; level (for example all data are top-10 rankings). The &quot;q&quot; level for complete ranking should be <code>nobj-1</code>.
Moreover, if the rankings are organized in chunks of increasing &quot;q&quot; levels (for
example, top-2 rankings followed by top-3 rankings followed by top-5 rankings etc.), then slots <code>subobs</code>, and <code>q_ind</code> can also be inferred
correctly by the initializer. Therefore it is highly recommender that you organise the ranking matrix in this way and utilize the initializer.
</p>


<h3>Slots</h3>


<dl>
<dt><code>nobj</code></dt><dd><p>The number of ranked objects. If not provided, it will be inferred as the maximum ranking in the data set. As a result, it must be provided if the data is top-q ranking.</p>
</dd>
<dt><code>nobs</code></dt><dd><p>the number of observations. No need to be provided during initialization since it must be equal to the sum of slot <code>count</code>.</p>
</dd>
<dt><code>ndistinct</code></dt><dd><p>the number of distinct rankings. No need to be provided during initialization since it must be equal to the number of rows of slot <code>ranking</code>.</p>
</dd>
<dt><code>ranking</code></dt><dd><p>a matrix that stores the ranking representation of distinct rankings. Each row contains one ranking. For top-q ranking, all unobserved objects have ranking <code>q+1</code>.</p>
</dd>
<dt><code>count</code></dt><dd><p>the number of observations for each distinct ranking corresponding to each row of <code>ranking</code>.</p>
</dd>
<dt><code>topq</code></dt><dd><p>a numeric vector to store top-q ranking information. More information in details section.</p>
</dd>
<dt><code>subobs</code></dt><dd><p>a numeric vector to store number of observations for each chunk of top-q rankings.</p>
</dd>
<dt><code>q_ind</code></dt><dd><p>a numeric vector to store the beginning and ending of each chunk of top-q rankings. The last element has to be <code>ndistinct+1</code>.</p>
</dd>
</dl>


<h3>References</h3>

<p>Qian Z,  Yu L. H. P (2019) &quot;Weighted Distance-Based Models for Ranking Data Using the R Package rankdist.&quot; <em>Journal of Statistical Software</em>, <strong>90</strong>(5), 1-31. doi: 10.18637/jss.v090.i05
</p>


<h3>See Also</h3>

<p><code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># creating a data set with only complete rankings
rankmat &lt;- replicate(10,sample(1:52,52), simplify = "array")
countvec &lt;- sample(1:52,52,replace=TRUE)
rankdat &lt;- new("RankData",ranking=rankmat,count=countvec)
# creating a data set with both complete and top-10 rankings
rankmat_in &lt;- replicate(10,sample(1:52,52), simplify = "array")
rankmat_in[rankmat_in&gt;11] &lt;- 11
rankmat_total &lt;- cbind(rankmat_in, rankmat)
countvec_total &lt;- c(countvec,countvec)
rankdat2 &lt;- new("RankData",ranking=rankmat_total,count=countvec_total, nobj=52, topq=c(10,51))
</code></pre>

<hr>
<h2 id='RankDistanceModel'>Fit A Mixture of Distance-based Models</h2><span id='topic+RankDistanceModel'></span>

<h3>Description</h3>

<p><code>RankDistanceModel</code> fits ranking models based on inputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RankDistanceModel(dat, init, ctrl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RankDistanceModel_+3A_dat">dat</code></td>
<td>
<p>A <a href="#topic+RankData-class">RankData</a> object.</p>
</td></tr>
<tr><td><code id="RankDistanceModel_+3A_init">init</code></td>
<td>
<p>A <a href="#topic+RankInit-class">RankInit</a> object.</p>
</td></tr>
<tr><td><code id="RankDistanceModel_+3A_ctrl">ctrl</code></td>
<td>
<p>A <a href="#topic+RankControl-class">RankControl</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The procedure will estimate central rankings, the probability of each cluster and weights.
</p>


<h3>Value</h3>

<p>A list containing the following components:
</p>

<dl>
<dt><code>modal_ranking.est</code></dt><dd><p>the estimated modal ranking for each cluster.</p>
</dd>
<dt><code>p</code></dt><dd><p>the marginal probability of each cluster.</p>
</dd>
<dt><code>w.est</code></dt><dd><p>the estimated weights of each cluster.</p>
</dd>
<dt><code>param.est</code></dt><dd><p>the phi parametrisation of weights of each cluster (for Weighted Kendall model only).</p>
</dd>
<dt><code>SSR</code></dt><dd><p>the sum of squares of Pearson residuals</p>
</dd>
<dt><code>log_likelihood</code></dt><dd><p>the fitted log_likelihood</p>
</dd>
<dt><code>BIC</code></dt><dd><p>the fitted Bayesian Information Criterion value</p>
</dd>
<dt><code>free_params</code></dt><dd><p>the number of free parameters in the model</p>
</dd>
<dt><code>expectation</code></dt><dd><p>the expected value of each observation given by the model</p>
</dd>
<dt><code>iteration</code></dt><dd><p>the number of EM iteration</p>
</dd>
<dt><code>model.call</code></dt><dd><p>the function call</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankInit">RankInit</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>

<hr>
<h2 id='RankInit-class'>RankInit Class</h2><span id='topic+RankInit'></span><span id='topic+RankInit-class'></span>

<h3>Description</h3>

<p>A S4 class to store initialization information of model fitting
</p>
<p>The <code>RankInit</code> class is used to give initial values of model fitting procedures.
</p>


<h3>Slots</h3>


<dl>
<dt><code>param.init</code></dt><dd><p>a list containing initial values of the positive parametrization of weights.</p>
</dd>
<dt><code>modal_ranking.init</code></dt><dd><p>a list containing starting points for the modal ranking search.</p>
</dd>
<dt><code>clu</code></dt><dd><p>an integer containing the number of clusters used in the model.</p>
</dd>
<dt><code>p.init</code></dt><dd><p>a numeric vector containing the initial values for cluster probabilities.</p>
</dd>
</dl>


<h3>References</h3>

<p>Qian Z,  Yu L. H. P (2019) &quot;Weighted Distance-Based Models for Ranking Data Using the R Package rankdist.&quot; <em>Journal of Statistical Software</em>, <strong>90</strong>(5), 1-31. doi: 10.18637/jss.v090.i05
</p>


<h3>See Also</h3>

<p><code><a href="#topic+RankData">RankData</a></code>, <code><a href="#topic+RankControl">RankControl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>c1init = new("RankInit",param.init=list(rep(1,4)),
     modal_ranking.init=list(c(2,3,4,1,5)),clu=1L)
c2init = new("RankInit",param.init=list(rep(0.1,4),rep(0.1,4)),
     modal_ranking.init = list(c(2,3,4,1,5),c(2,5,1,4,3)),clu=2L,p.init=c(0.5,0.5))
</code></pre>

<hr>
<h2 id='RanktoHash'>Create Hash Value for Ranking</h2><span id='topic+RanktoHash'></span>

<h3>Description</h3>

<p>Sometimes it is handy to deal with rankings as a hash value. <code>RanktoHash</code> returns hash values for ranks.
Maximum 52 objects are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RanktoHash(r)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RanktoHash_+3A_r">r</code></td>
<td>
<p>a vector or matrix of rankings. Each row of the matrix represents a ranking.
The ranking should be a integer from one to number of objects. No NA is allowed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of character strings representing the hash values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+HashtoRank">HashtoRank</a></code> for a reverse operation.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
