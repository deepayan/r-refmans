<!DOCTYPE html><html><head><title>Help for package pdi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pdi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#agrilusExitHoleDensity'><p>Agrilus exit hole density (m^-2)</p></a></li>
<li><a href='#bleedPrevalence'><p>Estimated bleed prevalence (%)</p></a></li>
<li><a href='#calcDIs'><p>Calculate Decline Indexes</p></a></li>
<li><a href='#crownCondition'><p>Crown condition</p></a></li>
<li><a href='#crownProductionEfficiency'><p>Crown production efficiency</p></a></li>
<li><a href='#crownSurfaceArea'><p>Crown surface area (m^2)</p></a></li>
<li><a href='#crownVolume'><p>Estimated crown volume (m^3)</p></a></li>
<li><a href='#descriptorContributions'><p>Descriptor contributions</p></a></li>
<li><a href='#liveCrownRatio'><p>Live crown ratio</p></a></li>
<li><a href='#makeAnalysisTable'><p>Make analysis table</p></a></li>
<li><a href='#mds'><p>Multidimensional scaling</p></a></li>
<li><a href='#minMaxScale'><p>Min-max scaling</p></a></li>
<li><a href='#phenotypingTemplate'><p>Phenotyping template</p></a></li>
<li><a href='#preparePhenotypeData'><p>Prepare phenotype data</p></a></li>
<li><a href='#readPhenotypeSheet'><p>Read phenptyping sheet</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#rf'><p>Random forest analysis</p></a></li>
<li><a href='#siteAdjustment'><p>Site adjustment</p></a></li>
<li><a href='#siteAdjustmentFactors'><p>Site adjustment factors</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Phenotypic Index Measures for Oak Decline Severity</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Oak declines are complex disease syndromes and consist of many visual indicators that include aspects of tree size, crown condition and trunk condition. This can cause difficulty in the manual classification of symptomatic and non-symptomatic trees from what is in reality a broad spectrum of oak tree health condition. Two phenotypic oak decline indexes have been developed to quantitatively describe and differentiate oak decline syndromes in Quercus robur. This package provides a toolkit to generate these decline indexes from phenotypic descriptors using the machine learning algorithm random forest. The methodology for generating these indexes is outlined in Finch et al. (2121) &lt;<a href="https://doi.org/10.1016%2Fj.foreco.2021.118948">doi:10.1016/j.foreco.2021.118948</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jasenfinch.github.io/pdi">https://jasenfinch.github.io/pdi</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jasenfinch/pdi/issues">https://github.com/jasenfinch/pdi/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, magrittr, purrr, randomForest, readxl, stringr, tibble,
tidyr, tidyselect</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown, ggplot2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-09 13:29:41 UTC; jasen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jasen Finch <a href="https://orcid.org/0000-0002-6070-7476"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jasen Finch &lt;jsf9@aber.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-09 17:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='agrilusExitHoleDensity'>Agrilus exit hole density (m^-2)</h2><span id='topic+agrilusExitHoleDensity'></span>

<h3>Description</h3>

<p>Calculate Agrilus biguttatus exit hole density.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agrilusExitHoleDensity(n, d, s = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agrilusExitHoleDensity_+3A_n">n</code></td>
<td>
<p>number of Agrilus exit holes</p>
</td></tr>
<tr><td><code id="agrilusExitHoleDensity_+3A_d">d</code></td>
<td>
<p>diameter at breast height (m)</p>
</td></tr>
<tr><td><code id="agrilusExitHoleDensity_+3A_s">s</code></td>
<td>
<p>height to which stem surveyed from the tree base (m)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>agrilusExitHoleDensity(2,1.02,1.3)
</code></pre>

<hr>
<h2 id='bleedPrevalence'>Estimated bleed prevalence (%)</h2><span id='topic+bleedPrevalence'></span>

<h3>Description</h3>

<p>Calculate estimated bleed prevalence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bleedPrevalence(a, A, b, B, d, s = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bleedPrevalence_+3A_a">a</code></td>
<td>
<p>average active bleed size (mm)</p>
</td></tr>
<tr><td><code id="bleedPrevalence_+3A_a">A</code></td>
<td>
<p>number of active bleeds</p>
</td></tr>
<tr><td><code id="bleedPrevalence_+3A_b">b</code></td>
<td>
<p>average black stain size (mm)</p>
</td></tr>
<tr><td><code id="bleedPrevalence_+3A_b">B</code></td>
<td>
<p>number of black stains</p>
</td></tr>
<tr><td><code id="bleedPrevalence_+3A_d">d</code></td>
<td>
<p>diameter at breast height (m)</p>
</td></tr>
<tr><td><code id="bleedPrevalence_+3A_s">s</code></td>
<td>
<p>height to which stem surveyed from the tree base (m)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>bleedPrevalence(30,10,40,5,1,1.3)
</code></pre>

<hr>
<h2 id='calcDIs'>Calculate Decline Indexes</h2><span id='topic+calcDIs'></span>

<h3>Description</h3>

<p>Calculate Phenotypic Decline Index (PDI) and Decline Acuteness Index (DAI).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcDIs(rfModels, PDI = TRUE, DAI = TRUE, invertPDI = TRUE, invertDAI = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcDIs_+3A_rfmodels">rfModels</code></td>
<td>
<p>list containing random forest models as returned by <code>rf()</code></p>
</td></tr>
<tr><td><code id="calcDIs_+3A_pdi">PDI</code></td>
<td>
<p>TRUE/FALSE, calculate PDI?</p>
</td></tr>
<tr><td><code id="calcDIs_+3A_dai">DAI</code></td>
<td>
<p>TRUE/FALSE, calculate DAI?</p>
</td></tr>
<tr><td><code id="calcDIs_+3A_invertpdi">invertPDI</code></td>
<td>
<p>invert the PDI scale? TRUE/FALSE. Ignored if argument PDI is FALSE</p>
</td></tr>
<tr><td><code id="calcDIs_+3A_invertdai">invertDAI</code></td>
<td>
<p>invert the DAI scale? TRUE/FALSE. Ignored if argument DAI is FALSE</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() %&gt;%
   mutate(`Live crown ratio (%)` = liveCrownRatio(`Total height (m)`,
     `Lower crown height (m)`),
     `Crown condition (%)` = crownCondition(`Missing crown (%)`,
                               `Crown transparency (%)`),
     `Crown volume (m^3)` = crownVolume(`Crown radius (m)`,
                               `Total height (m)`,
                               `Lower crown height (m)`,
                               `Crown condition (%)`),
     `Bleed prevalence (%)` = bleedPrevalence(`Active bleed length (mm)`,
                               `Active bleeds`,
                               `Black staining length (mm)`,
                               `Black staining`,
                               `Diameter at breast height (m)`),
     `Agrilus exit hole density (m^-2)` = agrilusExitHoleDensity(`Agrilus exit holes`,
                               `Diameter at breast height (m)`)
)

t &lt;- makeAnalysisTable(d)

## Generate random forest models
m &lt;- rf(t,cls = NULL,nreps = 10)

## Calculate decline indexese
DIs &lt;- calcDIs(m,DAI = FALSE,invertPDI = FALSE) %&gt;%
  bind_cols(d %&gt;%
    select(Location,ID,Status))
</code></pre>

<hr>
<h2 id='crownCondition'>Crown condition</h2><span id='topic+crownCondition'></span>

<h3>Description</h3>

<p>Calculate crown condition (%).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crownCondition(m, t)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crownCondition_+3A_m">m</code></td>
<td>
<p>missing crown (%)</p>
</td></tr>
<tr><td><code id="crownCondition_+3A_t">t</code></td>
<td>
<p>crown transparency (%)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>crownCondition(50,60)
</code></pre>

<hr>
<h2 id='crownProductionEfficiency'>Crown production efficiency</h2><span id='topic+crownProductionEfficiency'></span>

<h3>Description</h3>

<p>Calculate the crown production efficiency
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crownProductionEfficiency(crown_surface_area, crown_volume)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crownProductionEfficiency_+3A_crown_surface_area">crown_surface_area</code></td>
<td>
<p>crown surface area (m^2)</p>
</td></tr>
<tr><td><code id="crownProductionEfficiency_+3A_crown_volume">crown_volume</code></td>
<td>
<p>crown volume (m^3)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>crownProductionEfficiency(34,35)
</code></pre>

<hr>
<h2 id='crownSurfaceArea'>Crown surface area (m^2)</h2><span id='topic+crownSurfaceArea'></span>

<h3>Description</h3>

<p>Calculate the crown surface area
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crownSurfaceArea(r, h, l, c)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crownSurfaceArea_+3A_r">r</code></td>
<td>
<p>crown radius (m)</p>
</td></tr>
<tr><td><code id="crownSurfaceArea_+3A_h">h</code></td>
<td>
<p>total height (m)</p>
</td></tr>
<tr><td><code id="crownSurfaceArea_+3A_l">l</code></td>
<td>
<p>lower crown height (m)</p>
</td></tr>
<tr><td><code id="crownSurfaceArea_+3A_c">c</code></td>
<td>
<p>crown condition (%)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>crownSurfaceArea(3,15,10,50)
</code></pre>

<hr>
<h2 id='crownVolume'>Estimated crown volume (m^3)</h2><span id='topic+crownVolume'></span>

<h3>Description</h3>

<p>Calculate estimated crown volume.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crownVolume(r, h, l, c)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crownVolume_+3A_r">r</code></td>
<td>
<p>crown radius (m)</p>
</td></tr>
<tr><td><code id="crownVolume_+3A_h">h</code></td>
<td>
<p>total height (m)</p>
</td></tr>
<tr><td><code id="crownVolume_+3A_l">l</code></td>
<td>
<p>lower crown height (m)</p>
</td></tr>
<tr><td><code id="crownVolume_+3A_c">c</code></td>
<td>
<p>crown condition (%)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>crownVolume(3,15,10,50)
</code></pre>

<hr>
<h2 id='descriptorContributions'>Descriptor contributions</h2><span id='topic+descriptorContributions'></span>

<h3>Description</h3>

<p>Calculate average descriptor contributions to random forest models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>descriptorContributions(rfModels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="descriptorContributions_+3A_rfmodels">rfModels</code></td>
<td>
<p>list containing random forest models as returned by <code>rf()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code>see ?randomForest::importance</code> for details on random forest importance metrics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() %&gt;%
   mutate(`Live crown ratio (%)` = liveCrownRatio(`Total height (m)`,
     `Lower crown height (m)`),
     `Crown condition (%)` = crownCondition(`Missing crown (%)`,
                               `Crown transparency (%)`),
     `Crown volume (m^3)` = crownVolume(`Crown radius (m)`,
                               `Total height (m)`,
                               `Lower crown height (m)`,
                               `Crown condition (%)`),
     `Bleed prevalence (%)` = bleedPrevalence(`Active bleed length (mm)`,
                               `Active bleeds`,
                               `Black staining length (mm)`,
                               `Black staining`,
                               `Diameter at breast height (m)`),
     `Agrilus exit hole density (m^-2)` = agrilusExitHoleDensity(`Agrilus exit holes`,
                               `Diameter at breast height (m)`)
)

t &lt;- makeAnalysisTable(d)

## Generate random forest models
m &lt;- rf(t,cls = NULL,nreps = 10)

descriptor_contributions &lt;- m %&gt;%
  descriptorContributions()
</code></pre>

<hr>
<h2 id='liveCrownRatio'>Live crown ratio</h2><span id='topic+liveCrownRatio'></span>

<h3>Description</h3>

<p>Calculate the live crown ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>liveCrownRatio(h, l)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="liveCrownRatio_+3A_h">h</code></td>
<td>
<p>total height (m)</p>
</td></tr>
<tr><td><code id="liveCrownRatio_+3A_l">l</code></td>
<td>
<p>lower crown height (m)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>liveCrownRatio(15,10)
</code></pre>

<hr>
<h2 id='makeAnalysisTable'>Make analysis table</h2><span id='topic+makeAnalysisTable'></span>

<h3>Description</h3>

<p>prepare data table ready for random forest analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeAnalysisTable(phenoData)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeAnalysisTable_+3A_phenodata">phenoData</code></td>
<td>
<p>tibble containing phenotype data</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() %&gt;%
   mutate(`Live crown ratio (%)` = liveCrownRatio(`Total height (m)`,
     `Lower crown height (m)`),
     `Crown condition (%)` = crownCondition(`Missing crown (%)`,
                               `Crown transparency (%)`),
     `Crown volume (m^3)` = crownVolume(`Crown radius (m)`,
                               `Total height (m)`,
                               `Lower crown height (m)`,
                               `Crown condition (%)`),
     `Bleed prevalence (%)` = bleedPrevalence(`Active bleed length (mm)`,
                               `Active bleeds`,
                               `Black staining length (mm)`,
                               `Black staining`,
                               `Diameter at breast height (m)`),
     `Agrilus exit hole density (m^-2)` = agrilusExitHoleDensity(`Agrilus exit holes`,
                               `Diameter at breast height (m)`)
)

t &lt;- makeAnalysisTable(d)
</code></pre>

<hr>
<h2 id='mds'>Multidimensional scaling</h2><span id='topic+mds'></span>

<h3>Description</h3>

<p>perform multidimensional scaling of random forest proximities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mds(rfModels, dimensions = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mds_+3A_rfmodels">rfModels</code></td>
<td>
<p>list containing random forest models as returned by <code>rf()</code></p>
</td></tr>
<tr><td><code id="mds_+3A_dimensions">dimensions</code></td>
<td>
<p>number of dimensions to scale to</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() %&gt;%
   mutate(`Live crown ratio (%)` = liveCrownRatio(`Total height (m)`,
     `Lower crown height (m)`),
     `Crown condition (%)` = crownCondition(`Missing crown (%)`,
                               `Crown transparency (%)`),
     `Crown volume (m^3)` = crownVolume(`Crown radius (m)`,
                               `Total height (m)`,
                               `Lower crown height (m)`,
                               `Crown condition (%)`),
     `Bleed prevalence (%)` = bleedPrevalence(`Active bleed length (mm)`,
                               `Active bleeds`,
                               `Black staining length (mm)`,
                               `Black staining`,
                               `Diameter at breast height (m)`),
     `Agrilus exit hole density (m^-2)` = agrilusExitHoleDensity(`Agrilus exit holes`,
                               `Diameter at breast height (m)`)
)

t &lt;- makeAnalysisTable(d)

## Generate random forest models
m &lt;- rf(t,cls = NULL,nreps = 10)

mds_data &lt;- mds(m,2)
</code></pre>

<hr>
<h2 id='minMaxScale'>Min-max scaling</h2><span id='topic+minMaxScale'></span>

<h3>Description</h3>

<p>Variable min-max scaling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minMaxScale(vec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="minMaxScale_+3A_vec">vec</code></td>
<td>
<p>vector of numbers to scale</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1234)

d &lt;- runif(20,1,10)

minMaxScale(d)
</code></pre>

<hr>
<h2 id='phenotypingTemplate'>Phenotyping template</h2><span id='topic+phenotypingTemplate'></span>

<h3>Description</h3>

<p>Export a copy of the oak phenotyping data collection spreadsheet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phenotypingTemplate(path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="phenotypingTemplate_+3A_path">path</code></td>
<td>
<p>directory path for export output</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
phenotypingTemplate()

## End(Not run)
</code></pre>

<hr>
<h2 id='preparePhenotypeData'>Prepare phenotype data</h2><span id='topic+preparePhenotypeData'></span>

<h3>Description</h3>

<p>Process parsed phenotype data sheets into a tibble suitable for random forest analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preparePhenotypeData(phenotypeData)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="preparePhenotypeData_+3A_phenotypedata">phenotypeData</code></td>
<td>
<p>parsed phenotype data collection sheet returned from <code>readPhenotypeSheet</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData)
</code></pre>

<hr>
<h2 id='readPhenotypeSheet'>Read phenptyping sheet</h2><span id='topic+readPhenotypeSheet'></span>

<h3>Description</h3>

<p>Parse .xlsx phenotype data collection sheets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readPhenotypeSheet(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readPhenotypeSheet_+3A_file">file</code></td>
<td>
<p>file path to excel file to parse</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- readPhenotypeSheet(files[1])
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span><span id='topic+map'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
<dt>purrr</dt><dd><p><code><a href="purrr.html#topic+map">map</a></code></p>
</dd>
</dl>

<hr>
<h2 id='rf'>Random forest analysis</h2><span id='topic+rf'></span>

<h3>Description</h3>

<p>Perform random forest repetitions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rf(analysisTable, cls, params = list(), nreps = 100, seed = 1234)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rf_+3A_analysistable">analysisTable</code></td>
<td>
<p>tibble of phenotype data suitable for random forest analysis as returned by <code>preparePhenotypeData</code></p>
</td></tr>
<tr><td><code id="rf_+3A_cls">cls</code></td>
<td>
<p>analysisTable column to use as response vector. NULL for unsupervised analyses.</p>
</td></tr>
<tr><td><code id="rf_+3A_params">params</code></td>
<td>
<p>additional arguments to pass to randomForest::randomForest</p>
</td></tr>
<tr><td><code id="rf_+3A_nreps">nreps</code></td>
<td>
<p>number of repetitions</p>
</td></tr>
<tr><td><code id="rf_+3A_seed">seed</code></td>
<td>
<p>random number seed</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() %&gt;%
   mutate(`Live crown ratio (%)` = liveCrownRatio(`Total height (m)`,
     `Lower crown height (m)`),
     `Crown condition (%)` = crownCondition(`Missing crown (%)`,
                               `Crown transparency (%)`),
     `Crown volume (m^3)` = crownVolume(`Crown radius (m)`,
                               `Total height (m)`,
                               `Lower crown height (m)`,
                               `Crown condition (%)`),
     `Bleed prevalence (%)` = bleedPrevalence(`Active bleed length (mm)`,
                               `Active bleeds`,
                               `Black staining length (mm)`,
                               `Black staining`,
                               `Diameter at breast height (m)`),
     `Agrilus exit hole density (m^-2)` = agrilusExitHoleDensity(`Agrilus exit holes`,
                               `Diameter at breast height (m)`)
)

t &lt;- makeAnalysisTable(d)

## Generate random forest models
m &lt;- rf(t,cls = NULL,nreps = 10)
</code></pre>

<hr>
<h2 id='siteAdjustment'>Site adjustment</h2><span id='topic+siteAdjustment'></span>

<h3>Description</h3>

<p>Perform a site adjustment of selected descriptors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>siteAdjustment(
  phenoData,
  descriptors = c("Diameter at breast height (m)", "Lower crown height (m)",
    "Timber height (m)", "Total height (m)", "Crown radius (m)")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="siteAdjustment_+3A_phenodata">phenoData</code></td>
<td>
<p>phenoData tibble containing phenotype data</p>
</td></tr>
<tr><td><code id="siteAdjustment_+3A_descriptors">descriptors</code></td>
<td>
<p>columns of phenoData on which to perform site correction</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment() 
</code></pre>

<hr>
<h2 id='siteAdjustmentFactors'>Site adjustment factors</h2><span id='topic+siteAdjustmentFactors'></span>

<h3>Description</h3>

<p>Return site adjustment factors of selected phenotypic descriptors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>siteAdjustmentFactors(
  phenoData,
  descriptors = c("Diameter at breast height (m)", "Lower crown height (m)",
    "Timber height (m)", "Total height (m)", "Crown radius (m)")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="siteAdjustmentFactors_+3A_phenodata">phenoData</code></td>
<td>
<p>phenoData tibble containing phenotype data</p>
</td></tr>
<tr><td><code id="siteAdjustmentFactors_+3A_descriptors">descriptors</code></td>
<td>
<p>columns of phenoData on which calculate site correction factors</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

## Retrieve file paths for example data
files &lt;- list.files(system.file('phenotypeDataCollectionSheets',
  package = 'pdi'),full.names = TRUE)

## Prepare data
d &lt;- map(files,readPhenotypeSheet) %&gt;%
  map(preparePhenotypeData) %&gt;%
  bind_rows() %&gt;%
  siteAdjustment()

sa_factors &lt;- siteAdjustmentFactors(d)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
