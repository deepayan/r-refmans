<!DOCTYPE html><html lang="en"><head><title>Help for package sanityTracker</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sanityTracker}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.add_sanity_check'><p>Adds a sanity check to the list of already performed sanity checks</p></a></li>
<li><a href='#add_sanity_check'><p>Adds a sanity check to the list of already performed sanity checks</p></a></li>
<li><a href='#clear_sanity_checks'><p>Removes all tracked sanity checks</p></a></li>
<li><a href='#get_sanity_checks'><p>Returns all performed sanity checks</p></a></li>
<li><a href='#h_add_sanity_check'><p>Wrapper for add_sanity_check for internal use</p></a></li>
<li><a href='#h_collapse_char_vec'><p>Collapse a vector of characters to a string with separators</p></a></li>
<li><a href='#h_complete_list'><p>Extends a list with an named element if the element does not exist</p></a></li>
<li><a href='#h_deparsed_sys_call'><p>Simply converts a call into a character</p></a></li>
<li><a href='#sc_col_elements'><p>Checks that the elements of a column belong to a certain set</p></a></li>
<li><a href='#sc_cols_bounded'><p>Checks that all elements from the specified columns are in a certain range</p></a></li>
<li><a href='#sc_cols_bounded_above'><p>Checks that all elements from the given columns are below a certain number</p></a></li>
<li><a href='#sc_cols_bounded_below'><p>Checks that all elements from the given columns are above a certain number</p></a></li>
<li><a href='#sc_cols_non_NA'><p>Checks that all elements from the specified columns are not NA</p></a></li>
<li><a href='#sc_cols_positive'><p>Checks that all elements from the specified columns are positive</p></a></li>
<li><a href='#sc_cols_unique'><p>Checks that the combination of the specified columns is unique</p></a></li>
<li><a href='#sc_left_join'><p>Performs various checks after a left-join was performed</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Keeps Track of all Performed Sanity Checks</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-04-14</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marsel Scheer &lt;scheer@freescience.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>During the preparation of data set(s) one usually performs
    some sanity checks. The idea is that irrespective of where the
    checks are performed, they are centralized by this package in order
    to list all at once with examples if a check failed.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.12.2), checkmate (&ge; 2.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/MarselScheer/sanityTracker">https://github.com/MarselScheer/sanityTracker</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/MarselScheer/sanityTracker/issues">https://github.com/MarselScheer/sanityTracker/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-04-15 14:10:54 UTC; rstudio</td>
</tr>
<tr>
<td>Author:</td>
<td>Marsel Scheer [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-04-22 16:12:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='.add_sanity_check'>Adds a sanity check to the list of already performed sanity checks</h2><span id='topic+.add_sanity_check'></span>

<h3>Description</h3>

<p>NOTE the also add_sanity_check calls this function, the parameters
are documented in add_sanity_check because that function gets
exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.add_sanity_check(
  fail_vec,
  description,
  counter_meas,
  data,
  data_name,
  example_size,
  param_name,
  call,
  fail_callback,
  .fail_vec_str,
  .generated_desc
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".add_sanity_check_+3A_fail_vec">fail_vec</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_description">description</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_counter_meas">counter_meas</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_data">data</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_data_name">data_name</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_example_size">example_size</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_param_name">param_name</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_call">call</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_fail_callback">fail_callback</code></td>
<td>
<p>see <a href="#topic+add_sanity_check">add_sanity_check</a></p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_.fail_vec_str">.fail_vec_str</code></td>
<td>
<p>should capture what was used originally for
<code>fail_vec</code>.</p>
</td></tr>
<tr><td><code id=".add_sanity_check_+3A_.generated_desc">.generated_desc</code></td>
<td>
<p>for convenience functions like
<a href="#topic+sc_col_elements">sc_col_elements</a> to provide additional information about
the check.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>see <a href="#topic+add_sanity_check">add_sanity_check</a>
</p>

<hr>
<h2 id='add_sanity_check'>Adds a sanity check to the list of already performed sanity checks</h2><span id='topic+add_sanity_check'></span>

<h3>Description</h3>

<p>Adds a sanity check to the list of already performed sanity checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_sanity_check(
  fail_vec,
  description = "-",
  counter_meas = "-",
  data,
  data_name = checkmate::vname(x = data),
  example_size = 3,
  param_name = "-",
  call = h_deparsed_sys_call(which = -3),
  fail_callback
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_sanity_check_+3A_fail_vec">fail_vec</code></td>
<td>
<p>logical vector where <code>TRUE</code> indicates that a
fail has happend</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_description">description</code></td>
<td>
<p>(optional) of the sanity check. default is &quot;-&quot;.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_counter_meas">counter_meas</code></td>
<td>
<p>(optional) description of the counter measures that
were applied to correct the problems. default is &quot;-&quot;.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_data">data</code></td>
<td>
<p>(optional) where the fails were found. Is used to
store examples of failures. default is &quot;-&quot;.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_data_name">data_name</code></td>
<td>
<p>(optional) name of the data set that was used. defaults is
the name of the object passed to data.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_example_size">example_size</code></td>
<td>
<p>(optional) number failures to be extracted from the
object passed to <code>data</code>. By default 3 random examples are extracted.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_param_name">param_name</code></td>
<td>
<p>(optional) name of the parameter(s) that is used. This may
be helpful for filtering the table of all performed sanity checks.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_call">call</code></td>
<td>
<p>(optional) by default tracks the function that called
<a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
<tr><td><code id="add_sanity_check_+3A_fail_callback">fail_callback</code></td>
<td>
<p>(optional) user-defined function that is called if
any element of <code>fail_vec</code> is <code>TRUE</code>. This is helpful if an
additional warning or error should be thrown or maybe a log-entry
should be created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with three elements
</p>

<dl>
<dt>entry_sanity_table</dt><dd><p>invisibly the sanity check that is stored
internally with the other sanity checks</p>
</dd>
<dt>fail_vec</dt><dd><p><code>fail_vec</code> as passed over to this function</p>
</dd>
<dt>fail</dt><dd><p>TRUE if any element of fail is TRUE. Otherwise FALSE.</p>
</dd>
</dl>

<p>All performed sanity checks can be fetched via <a href="#topic+get_sanity_checks">get_sanity_checks</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(person_id = 1:4, bmi = c(18,23,-1,35), age = 31:34)
dummy_call &lt;- function(x) {
  add_sanity_check(
    x$bmi &lt; 15,
    description = "bmi above 15",
    counter_meas = "none",
    data = x,
    param_name = "bmi")
  add_sanity_check(
    x$bmi &gt; 30,
    description = "bmi below 30",
    counter_meas = "none")
}
dummy_call(x = d)
get_sanity_checks()
add_sanity_check(
   d$bmi &lt; 15,
   description = "bmi above 15",
   fail_callback = warning)
</code></pre>

<hr>
<h2 id='clear_sanity_checks'>Removes all tracked sanity checks</h2><span id='topic+clear_sanity_checks'></span>

<h3>Description</h3>

<p>Removes all tracked sanity checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_sanity_checks()
</code></pre>

<hr>
<h2 id='get_sanity_checks'>Returns all performed sanity checks</h2><span id='topic+get_sanity_checks'></span>

<h3>Description</h3>

<p>Returns all performed sanity checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sanity_checks()
</code></pre>


<h3>Value</h3>

<p>all sanity checks, i.e. a data.table with the following column
</p>

<dl>
<dt>description</dt><dd><p>character that was provided by the user through the
parameter <code>description</code></p>
</dd>
<dt>additional_desc</dt><dd><p>character that provides additional information
about the check that was generated by the convenience functions</p>
</dd>
<dt>data_name</dt><dd><p>name of the data set that passed to the function that
performed the sanity check. This can also be specified by the user</p>
</dd>
<dt>n</dt><dd><p>a logical vector is the basis of all sanity checks. This is
length of the logical vector that was used, which in general is the
number of rows of the table that was checked</p>
</dd>
<dt>n_fail</dt><dd><p>how often the logical vector was TRUE</p>
</dd>
<dt>n_na</dt><dd><p>how often the logical vector was NA</p>
</dd>
<dt>counter_meas</dt><dd><p>character provided by the user about how a fail will
be addressed. Note that this never happens inside a function of
<code>sanityTracker</code> but is realized by the user after the check was
performed. It is only for documentation when the results of the checks
are displayed.</p>
</dd>
<dt>fail_vec_str</dt><dd><p>this captures how the actual logical vector of fails
was build</p>
</dd>
<dt>param_name</dt><dd><p>usually generated by the convenience functions and it
also may be a composition of more than one parameter name. However this
parameter could also have been provided by the user</p>
</dd>
<dt>call</dt><dd><p>character of the call where the sanity check happend</p>
</dd>
<dt>example</dt><dd><p>if a check failed and the table is available,
then some examples of rows that lead to the fail are stored here</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+add_sanity_check">add_sanity_check</a>
</p>

<hr>
<h2 id='h_add_sanity_check'>Wrapper for <a href="#topic+add_sanity_check">add_sanity_check</a> for internal use</h2><span id='topic+h_add_sanity_check'></span>

<h3>Description</h3>

<p>The convenience function usually provide some defaults
like description that can be overwritten by the user
through the ... argument of the convenience function.
This function manages to set those values that were
NOT overwritten by the user through the ... argument
and then call <a href="#topic+add_sanity_check">add_sanity_check</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h_add_sanity_check(
  ellipsis,
  fail_vec,
  .generated_desc,
  data,
  data_name = "",
  param_name = "",
  call = h_deparsed_sys_call(which = -2),
  .fail_vec_str = checkmate::vname(x = fail_vec)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="h_add_sanity_check_+3A_ellipsis">ellipsis</code></td>
<td>
<p>usually list(...) of the function that calls this function.
It contains the parameters defined by the user for add_sanity_check.</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_fail_vec">fail_vec</code></td>
<td>
<p>logical vector where <code>TRUE</code> indicates that a
fail has happend</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_.generated_desc">.generated_desc</code></td>
<td>
<p>will be passed to <a href="#topic+.add_sanity_check">.add_sanity_check</a> if ellipsis
does not contain a element with name 'description'</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_data">data</code></td>
<td>
<p>will be passed to <a href="#topic+.add_sanity_check">.add_sanity_check</a> if ellipsis
does not contain a element with name 'data'</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_data_name">data_name</code></td>
<td>
<p>will be passed to <a href="#topic+.add_sanity_check">.add_sanity_check</a> if ellipsis
does not contain a element with name 'data_name'</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_param_name">param_name</code></td>
<td>
<p>will be passed to <a href="#topic+.add_sanity_check">.add_sanity_check</a> if ellipsis
does not contain a element with name 'param_name'</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_call">call</code></td>
<td>
<p>will be passed to <a href="#topic+.add_sanity_check">.add_sanity_check</a> if ellipsis
does not contain a element with name 'call'</p>
</td></tr>
<tr><td><code id="h_add_sanity_check_+3A_.fail_vec_str">.fail_vec_str</code></td>
<td>
<p>usually not used by the user. Captures what
was passed to <code>fail_vec</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>see return value of <a href="#topic+add_sanity_check">add_sanity_check</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(type = letters[1:4], nmb = 1:4)
# h_add_sanity_check is used on sc_col_elements()
sc_col_elements(object = d, col = "type", feasible_elements = letters[2:4])
get_sanity_checks()
</code></pre>

<hr>
<h2 id='h_collapse_char_vec'>Collapse a vector of characters to a string with separators</h2><span id='topic+h_collapse_char_vec'></span>

<h3>Description</h3>

<p>Collapse a vector of characters to a string with separators
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h_collapse_char_vec(v, collapse = ", ", qoute = "'")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="h_collapse_char_vec_+3A_v">v</code></td>
<td>
<p>vector of chars to be collapsed</p>
</td></tr>
<tr><td><code id="h_collapse_char_vec_+3A_collapse">collapse</code></td>
<td>
<p>character that separates the elements in the returned object</p>
</td></tr>
<tr><td><code id="h_collapse_char_vec_+3A_qoute">qoute</code></td>
<td>
<p>character that surronds every element in <code>v</code> in the
returned object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>collapsed version of <code>v</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat(sanityTracker:::h_collapse_char_vec(v = letters[1:4]))
</code></pre>

<hr>
<h2 id='h_complete_list'>Extends a list with an named element if the element does not exist</h2><span id='topic+h_complete_list'></span>

<h3>Description</h3>

<p>Extends a list with an named element if the element does not exist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h_complete_list(ell, name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="h_complete_list_+3A_ell">ell</code></td>
<td>
<p>list to be extended (usually an ellipsis as list(...))</p>
</td></tr>
<tr><td><code id="h_complete_list_+3A_name">name</code></td>
<td>
<p>character with the name for the element to be added</p>
</td></tr>
<tr><td><code id="h_complete_list_+3A_value">value</code></td>
<td>
<p>value that will be stored in <code>ell[[el_name]]</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>if <code>ell</code> already contained the element <code>name</code>, then
<code>ell</code> is returned without being modified. Otherwise, <code>ell</code>
is returned extended by a new element with name <code>name</code> and value
<code>value</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ell &lt;- list(a = 1, b = 2)
sanityTracker:::h_complete_list(ell = ell, name = "a", value = 100)
sanityTracker:::h_complete_list(ell = ell, name = "d", value = Inf)
</code></pre>

<hr>
<h2 id='h_deparsed_sys_call'>Simply converts a call into a character</h2><span id='topic+h_deparsed_sys_call'></span>

<h3>Description</h3>

<p>Simply converts a call into a character
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h_deparsed_sys_call(which)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="h_deparsed_sys_call_+3A_which">which</code></td>
<td>
<p>see <a href="base.html#topic+sys.call">sys.call</a>. However the function bounds it by
the number of encolsing environments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the call of the corresponding environment as character
</p>

<hr>
<h2 id='sc_col_elements'>Checks that the elements of a column belong to a certain set</h2><span id='topic+sc_col_elements'></span>

<h3>Description</h3>

<p>Checks that the elements of a column belong to a certain set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_col_elements(object, col, feasible_elements, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_col_elements_+3A_object">object</code></td>
<td>
<p>table with a column specified by <code>col</code></p>
</td></tr>
<tr><td><code id="sc_col_elements_+3A_col">col</code></td>
<td>
<p>name as a character of the column which is checked</p>
</td></tr>
<tr><td><code id="sc_col_elements_+3A_feasible_elements">feasible_elements</code></td>
<td>
<p>vector with characters that are feasible
for <code>col</code>. Note that an element that is NA it is always
counted as a fail if <code>feasible_elements</code> does not
explicitly contains NA.</p>
</td></tr>
<tr><td><code id="sc_col_elements_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>see return object of <a href="#topic+add_sanity_check">add_sanity_check</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(type = letters[1:4], nmb = 1:4)
dummy_call &lt;- function(x) {
  sc_col_elements(object = d, col = "type", feasible_elements = letters[2:4])
}
dummy_call(x = d)
get_sanity_checks()
</code></pre>

<hr>
<h2 id='sc_cols_bounded'>Checks that all elements from the specified columns are in a certain range</h2><span id='topic+sc_cols_bounded'></span>

<h3>Description</h3>

<p>Checks that all elements from the specified columns are in a certain range
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_bounded(object, cols, rule = "(-Inf, Inf)", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_bounded_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_bounded_+3A_cols">cols</code></td>
<td>
<p>vector of characters of columns that are checked against
the specified range</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_+3A_rule">rule</code></td>
<td>
<p>check as two numbers separated by a comma, enclosed by square
brackets (endpoint included) or parentheses (endpoint excluded).
For example, “[0, 3)” results in all(x &gt;= 0 &amp; x &lt; 3).
The lower and upper bound may be omitted which is the equivalent
of a negative or positive infinite bound, respectively.
By definition [0,] contains Inf, while [0,)
does not. The same holds for the left (lower) boundary and -Inf.
This explanation was copied from <code>checkmate::qtest</code>. That function
is also the backbone of the this function.</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of logical vectors where TRUE indicates where the check failed.
Every list entry represents one of the columns specified in cols.
This might be helpful if one wants to apply a counter-measure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dummy_call &lt;- function(x) {
  sc_cols_bounded(object = iris, cols = c("Sepal.Length", "Petal.Length"),
    rule = "[1, 7.9)")
}
dummy_call(x = d)
get_sanity_checks()
</code></pre>

<hr>
<h2 id='sc_cols_bounded_above'>Checks that all elements from the given columns are below a certain number</h2><span id='topic+sc_cols_bounded_above'></span>

<h3>Description</h3>

<p>Checks that all elements from the given columns are below a certain number
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_bounded_above(
  object,
  cols,
  upper_bound,
  include_upper_bound = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_bounded_above_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_bounded_above_+3A_cols">cols</code></td>
<td>
<p>vector of characters of columns that are checked against
the specified range</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_above_+3A_upper_bound">upper_bound</code></td>
<td>
<p>elements of the specified columns must be below this
bound</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_above_+3A_include_upper_bound">include_upper_bound</code></td>
<td>
<p>if TRUE (default), elements are allowed to be
equal to the <code>upper_bound</code></p>
</td></tr>
<tr><td><code id="sc_cols_bounded_above_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of logical vectors where TRUE indicates where the check failed.
Every list entry represents one of the columns specified in cols.
This might be helpful if one wants to apply a counter-measure
</p>

<hr>
<h2 id='sc_cols_bounded_below'>Checks that all elements from the given columns are above a certain number</h2><span id='topic+sc_cols_bounded_below'></span>

<h3>Description</h3>

<p>Checks that all elements from the given columns are above a certain number
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_bounded_below(
  object,
  cols,
  lower_bound,
  include_lower_bound = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_bounded_below_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_bounded_below_+3A_cols">cols</code></td>
<td>
<p>vector of characters of columns that are checked against
the specified range</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_below_+3A_lower_bound">lower_bound</code></td>
<td>
<p>elements of the specified columns must be above this
bound</p>
</td></tr>
<tr><td><code id="sc_cols_bounded_below_+3A_include_lower_bound">include_lower_bound</code></td>
<td>
<p>if TRUE (default), elements are allowed to be
equal to the <code>lower_bound</code></p>
</td></tr>
<tr><td><code id="sc_cols_bounded_below_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of logical vectors where TRUE indicates where the check failed.
Every list entry represents one of the columns specified in cols.
This might be helpful if one wants to apply a counter-measure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(a = c(0, 0.2, 3, Inf), b = c(1:4))
dummy_call &lt;- function(x) {
  sc_cols_bounded_below(
    object = d, cols = c("a", "b"),
    lower_bound = 0.2,
    include_lower_bound = FALSE,
    description = "Measurements are expected to be bounded from below")
}
dummy_call(x = d)
get_sanity_checks()
</code></pre>

<hr>
<h2 id='sc_cols_non_NA'>Checks that all elements from the specified columns are not NA</h2><span id='topic+sc_cols_non_NA'></span>

<h3>Description</h3>

<p>Checks that all elements from the specified columns are not NA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_non_NA(object, cols = names(object), ..., unk_cols_callback = stop)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_non_NA_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_non_NA_+3A_cols">cols</code></td>
<td>
<p>vector of characters of columns that are checked for NAs</p>
</td></tr>
<tr><td><code id="sc_cols_non_NA_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
<tr><td><code id="sc_cols_non_NA_+3A_unk_cols_callback">unk_cols_callback</code></td>
<td>
<p>user-defined function that is called if
some of the <code>cols</code> are not contained in the <code>object</code>.
This is helpful if an additional warning or error should be thrown
or maybe a log-entry should be created. Default is the function
<code>stop</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list where every element is an object returned by
<a href="#topic+add_sanity_check">add_sanity_check</a> for each column specified in <code>cols</code>
that exists in <code>object</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>iris[c(1,3,5,7,9), 1] &lt;- NA
dummy_call &lt;- function(x) {
  sc_cols_non_NA(object = iris, description = "No NAs expected in iris")
}
dummy_call(x = iris)
get_sanity_checks()
</code></pre>

<hr>
<h2 id='sc_cols_positive'>Checks that all elements from the specified columns are positive</h2><span id='topic+sc_cols_positive'></span>

<h3>Description</h3>

<p>Checks that all elements from the specified columns are positive
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_positive(object, cols, zero_feasible = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_positive_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_positive_+3A_cols">cols</code></td>
<td>
<p>vector of characters of columns that are checked against the
specified range</p>
</td></tr>
<tr><td><code id="sc_cols_positive_+3A_zero_feasible">zero_feasible</code></td>
<td>
<p>if zero is in the range or not</p>
</td></tr>
<tr><td><code id="sc_cols_positive_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of logical vectors where TRUE indicates where the check failed.
Every list entry represents one of the columns specified in cols.
This might be helpful if one wants to apply a counter-measure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(a = c(0, 0.2, 3, Inf), b = c(1:4))
dummy_call &lt;- function(x) {
  sc_cols_positive(d, cols = c("a", "b"), zero_feasible = FALSE,
    description = "Measurements are expected to be positive")
}
dummy_call(x = d)
get_sanity_checks()
</code></pre>

<hr>
<h2 id='sc_cols_unique'>Checks that the combination of the specified columns is unique</h2><span id='topic+sc_cols_unique'></span>

<h3>Description</h3>

<p>Checks that the combination of the specified columns is unique
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_cols_unique(object, cols = names(object), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_cols_unique_+3A_object">object</code></td>
<td>
<p>table with a columns specified by <code>cols</code></p>
</td></tr>
<tr><td><code id="sc_cols_unique_+3A_cols">cols</code></td>
<td>
<p>vector of characters which combination is checked to be unique</p>
</td></tr>
<tr><td><code id="sc_cols_unique_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>see return object of <a href="#topic+add_sanity_check">add_sanity_check</a>. Note that if a
combination appears 3 times, then n_fail will increased by 3.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dummy_call &lt;- function(x) {
  sc_cols_unique(
    object = x,
    cols = c("Species", "Sepal.Length",
             "Sepal.Width", "Petal.Length"))
}
dummy_call(x = iris)
get_sanity_checks()
get_sanity_checks()[["example"]]
</code></pre>

<hr>
<h2 id='sc_left_join'>Performs various checks after a left-join was performed</h2><span id='topic+sc_left_join'></span>

<h3>Description</h3>

<p>One check is that no rows were duplicated during merge
and the other check is that no columns were duplicated
during merge.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sc_left_join(joined, left, right, by, ..., find_nonunique_key = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sc_left_join_+3A_joined">joined</code></td>
<td>
<p>the result of the left-join</p>
</td></tr>
<tr><td><code id="sc_left_join_+3A_left">left</code></td>
<td>
<p>the left table used in the left-join</p>
</td></tr>
<tr><td><code id="sc_left_join_+3A_right">right</code></td>
<td>
<p>the right table used in the left-join</p>
</td></tr>
<tr><td><code id="sc_left_join_+3A_by">by</code></td>
<td>
<p>the variables used for the left-join</p>
</td></tr>
<tr><td><code id="sc_left_join_+3A_...">...</code></td>
<td>
<p>further parameters that are passed to <a href="#topic+add_sanity_check">add_sanity_check</a>.</p>
</td></tr>
<tr><td><code id="sc_left_join_+3A_find_nonunique_key">find_nonunique_key</code></td>
<td>
<p>if TRUE a sanity-check is performed
that finds keys (defined by <code>by</code>) that are non-unique.
However this can be a time-consuming step.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with two elements for the two sanity checks performed
by this function. The structure of each element is as the
return object of <a href="#topic+add_sanity_check">add_sanity_check</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ab &lt;- data.table::data.table(a = 1:4, b = letters[1:4])
abc &lt;- data.table::data.table(a = c(1:4, 2), b = letters[1:5], c = rnorm(5))
j &lt;- merge(x = ab, y = abc, by = "a")
dummy_call &lt;- function() {
  sc_left_join(joined = j, left = ab, right = abc, by = "a",
    description = "Left join outcome to main population")
}
dummy_call()
get_sanity_checks()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
