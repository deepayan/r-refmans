<!DOCTYPE html><html lang="en"><head><title>Help for package neonUtilities</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {neonUtilities}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#assignClasses'><p>Assign correct column classes</p></a></li>
<li><a href='#byFileAOP'><p>Serially download all AOP files for a given site, year, and product</p></a></li>
<li><a href='#byTileAOP'><p>Download AOP tiles overlapping specified coordinates for a given site, year, and product</p></a></li>
<li><a href='#chem_bundles'><p>Bundled chemistry data product information</p></a></li>
<li><a href='#cleanUp'><p>Clean up folder after stacking</p></a></li>
<li><a href='#convByteSize'><p>Convert a number of bytes into megabytes or gigabytes</p></a></li>
<li><a href='#dateConvert'><p>Convert date stamps from character</p></a></li>
<li><a href='#eddyStampCheck'><p>Convert date stamps from character and check for only one record in a day</p></a></li>
<li><a href='#findDatatables'><p>Find data tables</p></a></li>
<li><a href='#findTablesByFormat'><p>Find unique data tables in dataset</p></a></li>
<li><a href='#findTablesUnique'><p>Find unique data tables in dataset</p></a></li>
<li><a href='#footRaster'><p>Extract eddy covariance footprint data from HDF5 format</p></a></li>
<li><a href='#getAPI'><p>Get the data from API</p></a></li>
<li><a href='#getAPIHeaders'><p>Get only headers from API</p></a></li>
<li><a href='#getAttributes'><p>Extract attributes from eddy covariance H5 files</p></a></li>
<li><a href='#getAvg'><p>Get a list of the available averaging intervals for a data product</p></a></li>
<li><a href='#getCitation'><p>Get a Bibtex citation for NEON data with a DOI, or generate a provisional Bibtex citation</p></a></li>
<li><a href='#getDatatable'><p>Get NEON data table</p></a></li>
<li><a href='#getEddyLog'><p>Get the full issue log set for the SAE bundle</p></a></li>
<li><a href='#getFileUrls'><p>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</p></a></li>
<li><a href='#getIssueLog'><p>Get the issue log for a specific data product</p></a></li>
<li><a href='#getNeonDOI'><p>Get either a list of NEON DOIs, or the DOI for a specific data product and release</p></a></li>
<li><a href='#getPackage'><p>Get NEON data package</p></a></li>
<li><a href='#getProductInfo'><p>Get NEON data product information</p></a></li>
<li><a href='#getProductSensors'><p>Get data product-sensor relationships</p></a></li>
<li><a href='#getReadmePublicationDate'><p>Scrape the publication date from each ReadMe file</p></a></li>
<li><a href='#getRecentPublication'><p>Returns the most recent files for those that do not need stacking</p></a></li>
<li><a href='#getTaxonTable'><p>Get NEON taxon table</p></a></li>
<li><a href='#getTileUrls'><p>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</p></a></li>
<li><a href='#getTimeIndex'><p>Get a list of the available time intervals for a data product</p></a></li>
<li><a href='#getTitle'><p>Get NEON data product title</p></a></li>
<li><a href='#getVariables'><p>Get correct data types</p></a></li>
<li><a href='#getVariablesEddy'><p>Get variable names and units from SAE H5 files</p></a></li>
<li><a href='#getVarsEddy'><p>Extract list of eddy covariance tables from HDF5 files</p></a></li>
<li><a href='#getZipUrls'><p>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</p></a></li>
<li><a href='#listFilesInZip'><p>Get a data frame with the names of all files within a zipped NEON data package</p></a></li>
<li><a href='#listZipfiles'><p>Get all zip file names within a zipped NEON data package</p></a></li>
<li><a href='#loadByProduct'><p>Get files from NEON API, stack tables, and load into the current environment</p></a></li>
<li><a href='#makePosColumns'><p>Create position (horizontal and vertical) columns</p></a></li>
<li><a href='#other_bundles'><p>Bundled vegetation and sediment data product information</p></a></li>
<li><a href='#quietMessages'><p>Will suppress all output messages, while retaining the output dataframe</p></a></li>
<li><a href='#readTableNEON'><p>Read a NEON data table with correct data types for each variable</p></a></li>
<li><a href='#shared_aquatic'><p>Terrestrial-aquatic shared data information</p></a></li>
<li><a href='#shared_flights'><p>Flight coverage information</p></a></li>
<li><a href='#stackByTable'><p>Join data files in a zipped NEON data package by table type</p></a></li>
<li><a href='#stackDataFilesParallel'><p>Join data files in a unzipped NEON data package by table type</p></a></li>
<li><a href='#stackEddy'><p>Extract eddy covariance data from HDF5 format</p></a></li>
<li><a href='#stackFromStore'><p>Select files from a stored set of NEON data, created by neonstore package methods or another method</p></a></li>
<li><a href='#table_types'><p>Publication table information</p></a></li>
<li><a href='#timeStampSet'><p>Generate a consensus set of time stamps from a set of input tables.</p></a></li>
<li><a href='#transformFileToGeoCSV'><p>Transform NEON CSV file to GeoCSV</p></a></li>
<li><a href='#unzipZipfileParallel'><p>Unzip a zip file either at just the top level or recursively through the file</p></a></li>
<li><a href='#zipsByProduct'><p>Get files from NEON API to feed the stackByTable() function</p></a></li>
<li><a href='#zipsByURI'><p>Get files from NEON ECS Bucket using URLs in stacked data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>2.4.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-12-04</td>
</tr>
<tr>
<td>Title:</td>
<td>Utilities for Working with NEON Data</td>
</tr>
<tr>
<td>Description:</td>
<td>NEON data packages can be accessed through the NEON Data Portal <a href="https://www.neonscience.org">https://www.neonscience.org</a>
    or through the NEON Data API (see <a href="https://data.neonscience.org/data-api">https://data.neonscience.org/data-api</a> for documentation). Data delivered from
    the Data Portal are provided as monthly zip files packaged within a parent zip file, while individual files
    can be accessed from the API. This package provides tools that aid in discovering, downloading, and reformatting 
    data prior to use in analyses. This includes downloading data via the API, merging data tables by type, and 
    converting formats. For more information, see the readme file at <a href="https://github.com/NEONScience/NEON-utilities">https://github.com/NEONScience/NEON-utilities</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, jsonlite, downloader, data.table, utils, R.utils, stats,
tidyr, stringr, pbapply, parallel, curl</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rhdf5, terra, testthat, fasttime</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/NEONScience/NEON-utilities">https://github.com/NEONScience/NEON-utilities</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/NEONScience/NEON-utilities/issues">https://github.com/NEONScience/NEON-utilities/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-05 15:28:33 UTC; clunch</td>
</tr>
<tr>
<td>Author:</td>
<td>Claire Lunch [aut, cre, ctb],
  Christine Laney [aut, ctb],
  Nathan Mietkiewicz [aut, ctb],
  Eric Sokol [aut, ctb],
  Kaelin Cawley [aut, ctb],
  NEON (National Ecological Observatory Network) [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Claire Lunch &lt;clunch@battelleecology.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-05 17:20:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='assignClasses'>Assign correct column classes</h2><span id='topic+assignClasses'></span>

<h3>Description</h3>

<p>Use the variables file to assign classes to each column in each data file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assignClasses(dt, inVars)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assignClasses_+3A_dt">dt</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="assignClasses_+3A_invars">inVars</code></td>
<td>
<p>The variables expected in the df</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with corrected column classes
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='byFileAOP'>Serially download all AOP files for a given site, year, and product</h2><span id='topic+byFileAOP'></span>

<h3>Description</h3>

<p>Query the API for AOP data by site, year, and product, and download all files found, preserving original
folder structure. Downloads serially to avoid overload; may take a very long time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>byFileAOP(
  dpID,
  site,
  year,
  include.provisional = FALSE,
  check.size = TRUE,
  savepath = NA,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="byFileAOP_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product to pull, in the form DPL.PRNUM.REV, e.g. DP1.10023.001</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_site">site</code></td>
<td>
<p>The four-letter code of a single NEON site, e.g. 'CLBJ'.</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_year">year</code></td>
<td>
<p>The four-digit year to search for data. Defaults to 2017.</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files? Defaults to F. See https://www.neonscience.org/data-samples/data-management/data-revisions-releases for details on the difference between provisional and released data.</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_check.size">check.size</code></td>
<td>
<p>T or F, should the user approve the total file size before downloading? Defaults to T. When working in batch mode, or other non-interactive workflow, use check.size=F.</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_savepath">savepath</code></td>
<td>
<p>The file path to download to. Defaults to NA, in which case the working directory is used.</p>
</td></tr>
<tr><td><code id="byFileAOP_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within data.neonscience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A folder in the working directory, containing all files meeting query criteria.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To download 2017 vegetation index data from San Joaquin Experimental Range:
byFileAOP(dpID="DP3.30026.001", site="SJER", year="2017")

## End(Not run)
</code></pre>

<hr>
<h2 id='byTileAOP'>Download AOP tiles overlapping specified coordinates for a given site, year, and product</h2><span id='topic+byTileAOP'></span>

<h3>Description</h3>

<p>Query the API for AOP data by site, year, product, and tile location, and download all files found.
Downloads serially to avoid overload; may take a very long time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>byTileAOP(
  dpID,
  site,
  year,
  easting,
  northing,
  buffer = 0,
  include.provisional = FALSE,
  check.size = TRUE,
  savepath = NA,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="byTileAOP_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product to pull, in the form DPL.PRNUM.REV, e.g. DP1.10023.001</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_site">site</code></td>
<td>
<p>The four-letter code of a single NEON site, e.g. 'CLBJ'.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_year">year</code></td>
<td>
<p>The four-digit year to search for data. Defaults to 2017.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_easting">easting</code></td>
<td>
<p>A vector containing the easting UTM coordinates of the locations to download.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_northing">northing</code></td>
<td>
<p>A vector containing the northing UTM coordinates of the locations to download.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_buffer">buffer</code></td>
<td>
<p>Size, in meters, of the buffer to be included around the coordinates when determining which tiles to download. Defaults to 0. If easting and northing coordinates are the centroids of NEON TOS plots, use buffer=20.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files? Defaults to F. See https://www.neonscience.org/data-samples/data-management/data-revisions-releases for details on the difference between provisional and released data.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_check.size">check.size</code></td>
<td>
<p>T or F, should the user approve the total file size before downloading? Defaults to T. When working in batch mode, or other non-interactive workflow, use check.size=F.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_savepath">savepath</code></td>
<td>
<p>The file path to download to. Defaults to NA, in which case the working directory is used.</p>
</td></tr>
<tr><td><code id="byTileAOP_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A folder in the working directory, containing all files meeting query criteria.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='chem_bundles'>Bundled chemistry data product information</h2><span id='topic+chem_bundles'></span>

<h3>Description</h3>

<p>A dataset containing NEON data product codes of terrestrial chemistry data products and the &quot;home&quot; data products they are bundled with.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chem_bundles
</code></pre>


<h3>Format</h3>

<p>A data frame with 2 variables:
</p>

<dl>
<dt>product</dt><dd><p>Data product ID of a terrestrial chemistry product</p>
</dd>
<dt>homeProduct</dt><dd><p>Data product ID of the corresponding home data product</p>
</dd>
</dl>



<h3>Source</h3>

<p>NEON data product bundles
</p>

<hr>
<h2 id='cleanUp'>Clean up folder after stacking</h2><span id='topic+cleanUp'></span>

<h3>Description</h3>

<p>Remove unzipped monthly data folders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanUp(folder, orig)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanUp_+3A_folder">folder</code></td>
<td>
<p>The file path to the folder that needs to be cleaned up (the root directory of the data package)</p>
</td></tr>
<tr><td><code id="cleanUp_+3A_orig">orig</code></td>
<td>
<p>The list of files that were present in the folder before unzipping and stacking</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Only the folders created during unzip will be deleted. All custom folders/files and the stackedFiles output folder will be retained.
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='convByteSize'>Convert a number of bytes into megabytes or gigabytes</h2><span id='topic+convByteSize'></span>

<h3>Description</h3>

<p>For any number of bytes, convert to a number of MB or GB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convByteSize(objSize)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convByteSize_+3A_objsize">objSize</code></td>
<td>
<p>The size in bytes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The size of the file in megabytes or gigabytes
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='dateConvert'>Convert date stamps from character</h2><span id='topic+dateConvert'></span>

<h3>Description</h3>

<p>Attempt to convert date stamps from character, iterating through known NEON date formats
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dateConvert(dates, useFasttime = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dateConvert_+3A_dates">dates</code></td>
<td>
<p>A vector of date values in character format [character]</p>
</td></tr>
<tr><td><code id="dateConvert_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used for date conversion? Defaults to false. [logical]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A POSIXct vector, if possible; if conversion was unsuccessful, the original vector is returned
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='eddyStampCheck'>Convert date stamps from character and check for only one record in a day</h2><span id='topic+eddyStampCheck'></span>

<h3>Description</h3>

<p>Convert SAE time stamps to POSIX and check for missing data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eddyStampCheck(tab, useFasttime = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eddyStampCheck_+3A_tab">tab</code></td>
<td>
<p>A table of SAE data</p>
</td></tr>
<tr><td><code id="eddyStampCheck_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used to convert time stamps?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same table of SAE data, with time stamps converted and empty records representing a single day (filler records inserted during processing) removed.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='findDatatables'>Find data tables</h2><span id='topic+findDatatables'></span>

<h3>Description</h3>

<p>List the names of the data tables within each folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findDatatables(folder, fnames = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findDatatables_+3A_folder">folder</code></td>
<td>
<p>The folder of the outputs</p>
</td></tr>
<tr><td><code id="findDatatables_+3A_fnames">fnames</code></td>
<td>
<p>Full names - if true, then return the full file names including enclosing folders, if false, return only the file names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame of file names
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='findTablesByFormat'>Find unique data tables in dataset</h2><span id='topic+findTablesByFormat'></span>

<h3>Description</h3>

<p>Find the unique data tables that are present in the dataset (e.g., 2 minute vs 30 minute, or pinning vs identification data) and their types, based on the file name formatting. Adapted from findTablesUnique().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findTablesByFormat(datatables)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findTablesByFormat_+3A_datatables">datatables</code></td>
<td>
<p>A list of data files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array of unique table names and their types
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='findTablesUnique'>Find unique data tables in dataset</h2><span id='topic+findTablesUnique'></span>

<h3>Description</h3>

<p>Find the unique data tables that are present in the dataset (e.g., 2 minute vs 30 minute, or pinning vs identification data)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findTablesUnique(datatables, tabletypes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findTablesUnique_+3A_datatables">datatables</code></td>
<td>
<p>A list of data files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array of unique table names
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='footRaster'>Extract eddy covariance footprint data from HDF5 format</h2><span id='topic+footRaster'></span>

<h3>Description</h3>

<p>Create a raster of flux footprint data. Specific to expanded package of eddy covariance data product: DP4.00200.001
For definition of a footprint, see Glossary of Meteorology: https://glossary.ametsoc.org/wiki/Footprint
For background information about flux footprints and considerations around the time scale of footprint calculations, see Amiro 1998: https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.922.4124&amp;rep=rep1&amp;type=pdf
</p>


<h3>Usage</h3>

<pre><code class='language-R'>footRaster(filepath)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="footRaster_+3A_filepath">filepath</code></td>
<td>
<p>One of: a folder containing NEON EC H5 files, a zip file of DP4.00200.001 data downloaded from the NEON data portal, a folder of DP4.00200.001 data downloaded by the neonUtilities::zipsByProduct() function, or a single NEON EC H5 file. Filepath can only contain files for a single site. [character]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given a filepath containing H5 files of expanded package DP4.00200.001 data, extracts flux footprint data and creates a raster.
</p>


<h3>Value</h3>

<p>A rasterStack object containing all the footprints in the input files, plus one layer (the first in the stack) containing the mean footprint.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To run the function on a zip file downloaded from the NEON data portal:
ftprnt &lt;- footRaster(filepath="~/NEON_eddy-flux.zip")

## End(Not run)
</code></pre>

<hr>
<h2 id='getAPI'>Get the data from API</h2><span id='topic+getAPI'></span>

<h3>Description</h3>

<p>Accesses the API with options to use the user-specific API token generated within neon.datascience user accounts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAPI(apiURL, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAPI_+3A_apiurl">apiURL</code></td>
<td>
<p>The API endpoint URL</p>
</td></tr>
<tr><td><code id="getAPI_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Nate Mietkiewicz <a href="mailto:mietkiewicz@battelleecology.org">mietkiewicz@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getAPIHeaders'>Get only headers from API</h2><span id='topic+getAPIHeaders'></span>

<h3>Description</h3>

<p>Accesses the API with options to use the user-specific API token generated within neon.datascience user accounts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAPIHeaders(apiURL, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAPIHeaders_+3A_apiurl">apiURL</code></td>
<td>
<p>The API endpoint URL</p>
</td></tr>
<tr><td><code id="getAPIHeaders_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getAttributes'>Extract attributes from eddy covariance H5 files</h2><span id='topic+getAttributes'></span>

<h3>Description</h3>

<p>Extract attribute metadata from H5 files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAttributes(fil, sit, type, valName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAttributes_+3A_fil">fil</code></td>
<td>
<p>File path to the H5 file to extract attributes from [character]</p>
</td></tr>
<tr><td><code id="getAttributes_+3A_sit">sit</code></td>
<td>
<p>The site, for site attributes. Must match site of file path. [character]</p>
</td></tr>
<tr><td><code id="getAttributes_+3A_type">type</code></td>
<td>
<p>The type of attributes to retrieve. [character]</p>
</td></tr>
<tr><td><code id="getAttributes_+3A_valname">valName</code></td>
<td>
<p>If CO2 validation metadata are requested, the H5 name of the level where they can be found. [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with one row containing the extracted attributes
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getAvg'>Get a list of the available averaging intervals for a data product</h2><span id='topic+getAvg'></span>

<h3>Description</h3>

<p>Most IS products are available at multiple averaging intervals; get a list of what's available for a given data product
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAvg(dpID, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAvg_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product, in the form DPL.PRNUM.REV, e.g. DP1.00006.001</p>
</td></tr>
<tr><td><code id="getAvg_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the available averaging intervals, typically in minutes.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get available averaging intervals for PAR data product
getAvg("DP1.00024.001")
</code></pre>

<hr>
<h2 id='getCitation'>Get a Bibtex citation for NEON data with a DOI, or generate a provisional Bibtex citation</h2><span id='topic+getCitation'></span>

<h3>Description</h3>

<p>Use the DOI Foundation API to get Bibtex-formatted citations for NEON data, or use a template to generate a Bibtex citation for provisional data. Helper function to download and stacking functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCitation(dpID = NA_character_, release = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCitation_+3A_dpid">dpID</code></td>
<td>
<p>The data product ID of the data to be cited [character]</p>
</td></tr>
<tr><td><code id="getCitation_+3A_release">release</code></td>
<td>
<p>The data release to be cited. Can be provisional. [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string containing the Bibtex citation
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get the citation for Breeding landbird point counts (DP1.10003.001), RELEASE-2023
cit &lt;- getCitation(dpID="DP1.10003.001", release="RELEASE-2023")

## End(Not run)
</code></pre>

<hr>
<h2 id='getDatatable'>Get NEON data table</h2><span id='topic+getDatatable'></span>

<h3>Description</h3>

<p>This is a function to retrieve a data table
from the NEON data portal for sites and dates provided by the
enduser. NOTE that this function only works for NEON
Observation System (OS) data products, and only for select tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDatatable(
  dpid = NA,
  data_table_name = NA,
  sample_location_list = NA,
  sample_location_type = "siteID",
  sample_date_min = "2012-01-01",
  sample_date_max = Sys.Date(),
  sample_date_format = "%Y-%m-%d",
  data_package_type = "basic",
  url_prefix_data = "https://data.neonscience.org/api/v0/data/",
  url_prefix_products = "https://data.neonscience.org/api/v0/products/",
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getDatatable_+3A_dpid">dpid</code></td>
<td>
<p>character sting for NEON data product ID</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_data_table_name">data_table_name</code></td>
<td>
<p>character sting for name of the data table to download, e.g., 'sls_soilCoreCollection'</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_sample_location_list">sample_location_list</code></td>
<td>
<p>list of sites, domains, etc. If NA, retrieve all data for the given data table / dpid combination.</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_sample_location_type">sample_location_type</code></td>
<td>
<p>character sting for location type, such as 'siteID'. Must be one of the NEON controlled terms. If you're unsure, use 'siteID'</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_sample_date_min">sample_date_min</code></td>
<td>
<p>start date for query. Default is 1-Jan-2012, and this should capture the earliest NEON data record.</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_sample_date_max">sample_date_max</code></td>
<td>
<p>end date for query. Default is current date.</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_sample_date_format">sample_date_format</code></td>
<td>
<p>date format. Default/expected format is yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_data_package_type">data_package_type</code></td>
<td>
<p>package type, either 'basic' or 'expanded'. If unsure, use 'expanded'</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_url_prefix_data">url_prefix_data</code></td>
<td>
<p>data endpoint for NEON API.</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_url_prefix_products">url_prefix_products</code></td>
<td>
<p>products endpoint for NEON API.</p>
</td></tr>
<tr><td><code id="getDatatable_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with selected NEON data
</p>


<h3>Author(s)</h3>

<p>Eric R. Sokol <a href="mailto:esokol@battelleecology.org">esokol@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getEddyLog'>Get the full issue log set for the SAE bundle</h2><span id='topic+getEddyLog'></span>

<h3>Description</h3>

<p>Use the NEON API to get the issue log from all products in the bundle in a user-friendly format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getEddyLog(token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getEddyLog_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of issues reported for the data product.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getFileUrls'>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</h2><span id='topic+getFileUrls'></span>

<h3>Description</h3>

<p>Used to generate a data frame of available AOP files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getFileUrls(m.urls, include.provisional, token = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getFileUrls_+3A_m.urls">m.urls</code></td>
<td>
<p>The monthly API URL for the AOP files</p>
</td></tr>
<tr><td><code id="getFileUrls_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files?</p>
</td></tr>
<tr><td><code id="getFileUrls_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe comprised of file names, S3 URLs, file size, and download status (default = 0)
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getIssueLog'>Get the issue log for a specific data product</h2><span id='topic+getIssueLog'></span>

<h3>Description</h3>

<p>Use the NEON API to get the issue log in a user-friendly format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIssueLog(dpID = NA, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getIssueLog_+3A_dpid">dpID</code></td>
<td>
<p>The data product identifier, formatted as DP#.#####.###</p>
</td></tr>
<tr><td><code id="getIssueLog_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of issues reported for the data product.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get documentation and availability of plant foliar properties data product
cfcIssues &lt;- getIssueLog("DP1.10026.001")
</code></pre>

<hr>
<h2 id='getNeonDOI'>Get either a list of NEON DOIs, or the DOI for a specific data product and release</h2><span id='topic+getNeonDOI'></span>

<h3>Description</h3>

<p>Use the DataCite API to get NEON data DOIs in a user-friendly format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getNeonDOI(dpID = NA_character_, release = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getNeonDOI_+3A_dpid">dpID</code></td>
<td>
<p>The data product identifier, formatted as DP#.#####.### [character]</p>
</td></tr>
<tr><td><code id="getNeonDOI_+3A_release">release</code></td>
<td>
<p>Name of a specific release, e.g. RELEASE-2022 [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of data product IDs and DOIs.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get all NEON data DOIs
allDOIs &lt;- getNeonDOI()

## End(Not run)
</code></pre>

<hr>
<h2 id='getPackage'>Get NEON data package</h2><span id='topic+getPackage'></span>

<h3>Description</h3>

<p>Get a zipped file for a single data product, site, and year-month combination. Use the NEON data portal or API to determine data
availability by data product, site, and year-month combinations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPackage(dpID, site_code, year_month, package = "basic", savepath = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPackage_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product to pull, in the form DPL.PRNUM.REV, e.g. DP1.10023.001</p>
</td></tr>
<tr><td><code id="getPackage_+3A_site_code">site_code</code></td>
<td>
<p>A four-letter NEON research site code, such as HEAL for Healy.</p>
</td></tr>
<tr><td><code id="getPackage_+3A_year_month">year_month</code></td>
<td>
<p>The year and month of interest, in format YYYY-MM.</p>
</td></tr>
<tr><td><code id="getPackage_+3A_package">package</code></td>
<td>
<p>Either 'basic' or 'expanded', indicating which data package to download. Defaults to basic.</p>
</td></tr>
<tr><td><code id="getPackage_+3A_savepath">savepath</code></td>
<td>
<p>The location to save the output files to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zipped monthly file
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getProductInfo'>Get NEON data product information</h2><span id='topic+getProductInfo'></span>

<h3>Description</h3>

<p>Use the NEON API to get data product information such as availability, science team, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProductInfo(dpID = "", token = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getProductInfo_+3A_dpid">dpID</code></td>
<td>
<p>The data product id (optional), formated as DP#.#####.###</p>
</td></tr>
<tr><td><code id="getProductInfo_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of metadata and availability information for a single data product. If the dpID argument is omitted, a table of information for all data products in the NEON catalog.
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get documentation and availability of plant foliar properties data product
cfcInfo &lt;- getProductInfo("DP1.10026.001")
</code></pre>

<hr>
<h2 id='getProductSensors'>Get data product-sensor relationships</h2><span id='topic+getProductSensors'></span>

<h3>Description</h3>

<p>Pull all data from the NEON API /products endpoint, create a data frame with data product ID, data product name, and sensor type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProductSensors()
</code></pre>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sensors &lt;- getProductSensors()

## End(Not run)
</code></pre>

<hr>
<h2 id='getReadmePublicationDate'>Scrape the publication date from each ReadMe file</h2><span id='topic+getReadmePublicationDate'></span>

<h3>Description</h3>

<p>Given a directory, this will recursively list all of the ReadMe files that were unzipped.
This should result in a single text file with a list of all of the publication dates from the ReadMe file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getReadmePublicationDate(savepath, out_filepath, dpID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getReadmePublicationDate_+3A_savepath">savepath</code></td>
<td>
<p>The root folder directory where the ReadMe files are located.</p>
</td></tr>
<tr><td><code id="getReadmePublicationDate_+3A_out_filepath">out_filepath</code></td>
<td>
<p>The output directory and filename.</p>
</td></tr>
<tr><td><code id="getReadmePublicationDate_+3A_dpid">dpID</code></td>
<td>
<p>The data product identifier</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Nathan Mietkiewicz <a href="mailto:mietkiewicz@battelleecology.org">mietkiewicz@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getRecentPublication'>Returns the most recent files for those that do not need stacking</h2><span id='topic+getRecentPublication'></span>

<h3>Description</h3>

<p>Given a list of files, this will order and return the file with the most recent publication date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRecentPublication(inList)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getRecentPublication_+3A_inlist">inList</code></td>
<td>
<p>The list of files.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Nathan Mietkiewicz <a href="mailto:mietkiewicz@battelleecology.org">mietkiewicz@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getTaxonTable'>Get NEON taxon table</h2><span id='topic+getTaxonTable'></span>

<h3>Description</h3>

<p>This is a function to retrieve a taxon table
from the NEON data portal for the taxon type by the
enduser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTaxonTable(
  taxonType = NA,
  recordReturnLimit = NA,
  stream = "true",
  token = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTaxonTable_+3A_taxontype">taxonType</code></td>
<td>
<p>Character string for the taxonTypeCode. Must be one of ALGAE, BEETLE, BIRD,
FISH, HERPETOLOGY, MACROINVERTEBRATE, MOSQUITO, MOSQUITO_PATHOGENS, SMALL_MAMMAL, PLANT, TICK</p>
</td></tr>
<tr><td><code id="getTaxonTable_+3A_recordreturnlimit">recordReturnLimit</code></td>
<td>
<p>Integer. The number of items to limit the result set to. If NA, will return all records in table.</p>
</td></tr>
<tr><td><code id="getTaxonTable_+3A_stream">stream</code></td>
<td>
<p>Character string, true or false. Option to obtain the result as a stream. Utilize for large requests.</p>
</td></tr>
<tr><td><code id="getTaxonTable_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with selected NEON data
</p>


<h3>Author(s)</h3>

<p>Eric R. Sokol <a href="mailto:esokol@battelleecology.org">esokol@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getTileUrls'>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</h2><span id='topic+getTileUrls'></span>

<h3>Description</h3>

<p>Produces a data frame that is populated by available tiles for the AOP product.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTileUrls(
  m.urls,
  tileEasting,
  tileNorthing,
  include.provisional,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTileUrls_+3A_m.urls">m.urls</code></td>
<td>
<p>The monthly API URL for the AOP tile.</p>
</td></tr>
<tr><td><code id="getTileUrls_+3A_tileeasting">tileEasting</code></td>
<td>
<p>A vector containing the easting UTM coordinates of the locations to download.</p>
</td></tr>
<tr><td><code id="getTileUrls_+3A_tilenorthing">tileNorthing</code></td>
<td>
<p>A vector containing the northing UTM coordinates of the locations to download.</p>
</td></tr>
<tr><td><code id="getTileUrls_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files?</p>
</td></tr>
<tr><td><code id="getTileUrls_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe comprised of file names, S3 URLs, file size, and download status (default = 0)
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getTimeIndex'>Get a list of the available time intervals for a data product</h2><span id='topic+getTimeIndex'></span>

<h3>Description</h3>

<p>Most IS products are available at multiple time intervals; get a list of what's available for a given data product
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTimeIndex(dpID, token = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTimeIndex_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product, in the form DPL.PRNUM.REV, e.g. DP1.00006.001</p>
</td></tr>
<tr><td><code id="getTimeIndex_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the available time intervals, typically in minutes.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get available time intervals for PAR data product
getTimeIndex("DP1.00024.001")
</code></pre>

<hr>
<h2 id='getTitle'>Get NEON data product title</h2><span id='topic+getTitle'></span>

<h3>Description</h3>

<p>Create a title for a NEON data CSV file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTitle(filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTitle_+3A_filename">filename</code></td>
<td>
<p>A NEON file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A title for the respective GeoCSV file
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getVariables'>Get correct data types</h2><span id='topic+getVariables'></span>

<h3>Description</h3>

<p>Support way to force R to read assign correct data types to each column based on variables file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVariables(varFile)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getVariables_+3A_varfile">varFile</code></td>
<td>
<p>A file that contains variable definitions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with fieldName and assigned column class, along with table if present
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getVariablesEddy'>Get variable names and units from SAE H5 files</h2><span id='topic+getVariablesEddy'></span>

<h3>Description</h3>

<p>Extract variable names and units from SAE H5 files and return in user-friendly form. Used in stackEddy(), not intended for independent use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVariablesEddy(tabList)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getVariablesEddy_+3A_tablist">tabList</code></td>
<td>
<p>A list of SAE data tables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of variable names and units, aggregated from the input tables
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='getVarsEddy'>Extract list of eddy covariance tables from HDF5 files</h2><span id='topic+getVarsEddy'></span>

<h3>Description</h3>

<p>Extracts a list of table metadata from a single HDF5 file. Specific to eddy covariance data product: DP4.00200.001. Can inform inputs to stackEddy(); variables listed in 'name' are available inputs to the 'var' parameter in stackEddy().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVarsEddy(filepath)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getVarsEddy_+3A_filepath">filepath</code></td>
<td>
<p>The folder containing the H5 file [character]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the metadata for each data table in the HDF5 file
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# read variables from a file in a hypothetical filepath
ec.vars &lt;- getVarsEddy(filepath='/data/NEON.D19.BONA.DP4.00200.001.nsae.2017-12.basic.h5')

## End(Not run)
</code></pre>

<hr>
<h2 id='getZipUrls'>Get and store the file names, S3 URLs, file size, and download status (default = 0) in a data frame</h2><span id='topic+getZipUrls'></span>

<h3>Description</h3>

<p>Used to generate a data frame of available zipfile URLs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getZipUrls(
  month.urls,
  avg,
  package,
  dpID,
  release,
  messages,
  tabl,
  include.provisional,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getZipUrls_+3A_month.urls">month.urls</code></td>
<td>
<p>The monthly API URL for the URL files</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_avg">avg</code></td>
<td>
<p>Global variable for averaging interval</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_package">package</code></td>
<td>
<p>Global varaible for package type (basic or expanded)</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_dpid">dpID</code></td>
<td>
<p>Global variable for data product ID</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_release">release</code></td>
<td>
<p>Data release to be downloaded</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_messages">messages</code></td>
<td>
<p>Error/warning messages from previous steps</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_tabl">tabl</code></td>
<td>
<p>Table name to get</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_include.provisional">include.provisional</code></td>
<td>
<p>Should provisional data be included?</p>
</td></tr>
<tr><td><code id="getZipUrls_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe comprised of file names, S3 URLs, file size, and download status (default = 0)
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='listFilesInZip'>Get a data frame with the names of all files within a zipped NEON data package</h2><span id='topic+listFilesInZip'></span>

<h3>Description</h3>

<p>Given the top level zip file, return dataframe of all of the files within it without
unzipping the file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listFilesInZip(zippath)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="listFilesInZip_+3A_zippath">zippath</code></td>
<td>
<p>The path to a zip file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of filenames within the given zip file
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='listZipfiles'>Get all zip file names within a zipped NEON data package</h2><span id='topic+listZipfiles'></span>

<h3>Description</h3>

<p>Given the data frame of all the files within the top level zip file,
return an array of just the zip file names (no pdf, xml, or other files).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listZipfiles(zippath)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="listZipfiles_+3A_zippath">zippath</code></td>
<td>
<p>The path to a zip file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array of all zip files contained within the focal zip file
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='loadByProduct'>Get files from NEON API, stack tables, and load into the current environment</h2><span id='topic+loadByProduct'></span>

<h3>Description</h3>

<p>Pull files from the NEON API, by data product, merge data for each table, and read into the current R environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadByProduct(
  dpID,
  site = "all",
  startdate = NA,
  enddate = NA,
  package = "basic",
  release = "current",
  timeIndex = "all",
  tabl = "all",
  check.size = TRUE,
  include.provisional = FALSE,
  nCores = 1,
  forceParallel = FALSE,
  token = NA_character_,
  useFasttime = FALSE,
  avg = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadByProduct_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product to pull, in the form DPL.PRNUM.REV, e.g. DP1.10023.001</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_site">site</code></td>
<td>
<p>Either the string 'all', meaning all available sites, or a character vector of 4-letter NEON site codes, e.g. c('ONAQ','RMNP'). Defaults to all.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_startdate">startdate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_enddate">enddate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_package">package</code></td>
<td>
<p>Either 'basic' or 'expanded', indicating which data package to download. Defaults to basic.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_release">release</code></td>
<td>
<p>The data release to be downloaded; either 'current' or the name of a release, e.g. 'RELEASE-2021'. 'current' returns the most recent release, as well as provisional data if include.provisional is set to TRUE. To download only provisional data, use release='PROVISIONAL'. Defaults to 'current'.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_timeindex">timeIndex</code></td>
<td>
<p>Either the string 'all', or the time index of data to download, in minutes. Only applicable to sensor (IS) data. Defaults to 'all'.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_tabl">tabl</code></td>
<td>
<p>Either the string 'all', or the name of a single data table to download. Defaults to 'all'.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_check.size">check.size</code></td>
<td>
<p>T or F, should the user approve the total file size before downloading? Defaults to T. When working in batch mode, or other non-interactive workflow, use check.size=F.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files? Defaults to F. See https://www.neonscience.org/data-samples/data-management/data-revisions-releases for details on the difference between provisional and released data.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_ncores">nCores</code></td>
<td>
<p>The number of cores to parallelize the stacking procedure. By default it is set to a single core.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_forceparallel">forceParallel</code></td>
<td>
<p>If the data volume to be processed does not meet minimum requirements to run in parallel, this overrides. Set to FALSE as default.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts)</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used to read date-time fields? Defaults to false.</p>
</td></tr>
<tr><td><code id="loadByProduct_+3A_avg">avg</code></td>
<td>
<p>Deprecated; use timeIndex</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All available data meeting the query criteria will be downloaded. Most data products are collected at only a subset of sites, and dates of collection vary. Consult the NEON data portal for sampling details.
Dates are specified only to the month because NEON data are provided in monthly packages. Any month included in the search criteria will be included in the download. Start and end date are inclusive.
</p>


<h3>Value</h3>

<p>A named list of all the data tables in the data product downloaded, plus a validation file and a variables file, as available.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To download plant foliar properties data from all sites, expanded data package:
cfc &lt;- loadByProduct(dpID="DP1.10026.001", site="all", package="expanded")

## End(Not run)
</code></pre>

<hr>
<h2 id='makePosColumns'>Create position (horizontal and vertical) columns</h2><span id='topic+makePosColumns'></span>

<h3>Description</h3>

<p>For instrumented meteorological data products, create position (horizontal and vertical) columns based on values
embedded in the file names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makePosColumns(d, datafl, site)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makePosColumns_+3A_d">d</code></td>
<td>
<p>A data table</p>
</td></tr>
<tr><td><code id="makePosColumns_+3A_datafl">datafl</code></td>
<td>
<p>A data file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table with new columns
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='other_bundles'>Bundled vegetation and sediment data product information</h2><span id='topic+other_bundles'></span>

<h3>Description</h3>

<p>A dataset containing NEON data product codes of vegetation and sediment data products and the &quot;home&quot; data products they are bundled with.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>other_bundles
</code></pre>


<h3>Format</h3>

<p>A data frame with 2 variables:
</p>

<dl>
<dt>product</dt><dd><p>Data product ID of a product</p>
</dd>
<dt>homeProduct</dt><dd><p>Data product ID of the corresponding home data product</p>
</dd>
</dl>



<h3>Source</h3>

<p>NEON data product bundles
</p>

<hr>
<h2 id='quietMessages'>Will suppress all output messages, while retaining the output dataframe</h2><span id='topic+quietMessages'></span>

<h3>Description</h3>

<p>Used to quiet all output messages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quietMessages(toBeQuieted)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="quietMessages_+3A_tobequieted">toBeQuieted</code></td>
<td>
<p>Input to be quieted</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The expected output without associated messages/warnings.
</p>


<h3>Author(s)</h3>

<p>Nate Mietkiewicz <a href="mailto:mietkiewicz@battelleecology.org">mietkiewicz@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='readTableNEON'>Read a NEON data table with correct data types for each variable</h2><span id='topic+readTableNEON'></span>

<h3>Description</h3>

<p>Load a table into R, assigning classes to each column based on data types in variables file; or convert a table already loaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readTableNEON(dataFile, varFile, useFasttime = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readTableNEON_+3A_datafile">dataFile</code></td>
<td>
<p>A data frame containing a NEON data table, or the filepath to a data table to load</p>
</td></tr>
<tr><td><code id="readTableNEON_+3A_varfile">varFile</code></td>
<td>
<p>A data frame containing the corresponding NEON variables file, or the filepath to the variables file</p>
</td></tr>
<tr><td><code id="readTableNEON_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used to read date-time variables? Defaults to false.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of a NEON data table, with column classes assigned by data type
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='shared_aquatic'>Terrestrial-aquatic shared data information</h2><span id='topic+shared_aquatic'></span>

<h3>Description</h3>

<p>A dataset containing NEON site codes and data product IDs for places where meteorological data from terrestrial sites are used as the data of record for nearby aquatic sites as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_aquatic
</code></pre>


<h3>Format</h3>

<p>A data frame with 3 variables:
</p>

<dl>
<dt>site</dt><dd><p>site code of a NEON aquatic site</p>
</dd>
<dt>towerSite</dt><dd><p>site code of the NEON terrestrial site used as the data source for the corresponding aquatic site</p>
</dd>
<dt>product</dt><dd><p>Data product ID of the data products to which the corresponding terrestrial-aquatic site relationship relates</p>
</dd>
</dl>



<h3>Source</h3>

<p>NEON site layouts and spatial design
</p>

<hr>
<h2 id='shared_flights'>Flight coverage information</h2><span id='topic+shared_flights'></span>

<h3>Description</h3>

<p>A dataset containing NEON site codes for places where a single AOP flight may cover multiple sites
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_flights
</code></pre>


<h3>Format</h3>

<p>A data frame with 2 variables:
</p>

<dl>
<dt>site</dt><dd><p>site code of a NEON site</p>
</dd>
<dt>flightSite</dt><dd><p>site code that matches the file naming for flights that may include &quot;site&quot;</p>
</dd>
</dl>



<h3>Source</h3>

<p>NEON flight plans
</p>

<hr>
<h2 id='stackByTable'>Join data files in a zipped NEON data package by table type</h2><span id='topic+stackByTable'></span>

<h3>Description</h3>

<p>Given a zipped data file, do a full join of all data files, grouped by table type.
This should result in a small number of large files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackByTable(
  filepath,
  savepath = NA,
  folder = FALSE,
  saveUnzippedFiles = FALSE,
  dpID = NA,
  package = NA,
  nCores = 1,
  useFasttime = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stackByTable_+3A_filepath">filepath</code></td>
<td>
<p>The location of the zip file</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_savepath">savepath</code></td>
<td>
<p>The location to save the output files to</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_folder">folder</code></td>
<td>
<p>T or F: does the filepath point to a parent, unzipped folder, or a zip file? If F, assumes the filepath points to a zip file. Defaults to F. No longer needed; included for back compatibility.</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_saveunzippedfiles">saveUnzippedFiles</code></td>
<td>
<p>T or F: should the unzipped monthly data folders be retained?</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_dpid">dpID</code></td>
<td>
<p>Data product ID of product to stack. Ignored and determined from data unless input is a vector of files, generally via stackFromStore().</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_package">package</code></td>
<td>
<p>Data download package, either basic or expanded. Ignored and determined from data unless input is a vector of files, generally via stackFromStore().</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_ncores">nCores</code></td>
<td>
<p>The number of cores to parallelize the stacking procedure. To automatically use the maximum number of cores on your machine we suggest setting nCores=parallel::detectCores(). By default it is set to a single core.</p>
</td></tr>
<tr><td><code id="stackByTable_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used to read date-time variables? Only relevant if savepath=&quot;envt&quot;. Defaults to false.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All files are unzipped and one file for each table type is created and written. If savepath=&quot;envt&quot; is specified, output is a named list of tables; otherwise, function output is null and files are saved to the location specified.
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To unzip and merge files downloaded from the NEON Data Portal
stackByTable("~/NEON_par.zip")

# To unzip and merge files downloaded using zipsByProduct()
stackByTable("~/filesToStack00024")

## End(Not run)
</code></pre>

<hr>
<h2 id='stackDataFilesParallel'>Join data files in a unzipped NEON data package by table type</h2><span id='topic+stackDataFilesParallel'></span>

<h3>Description</h3>

<p>Given a folder of unzipped files (unzipped NEON data file), do a full join of all data files, grouped by table type.
This should result in a small number of large files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackDataFilesParallel(folder, nCores = 1, dpID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stackDataFilesParallel_+3A_folder">folder</code></td>
<td>
<p>The location of the data</p>
</td></tr>
<tr><td><code id="stackDataFilesParallel_+3A_ncores">nCores</code></td>
<td>
<p>The number of cores to parallelize the stacking procedure. To automatically use the maximum number of cores on your machine we suggest setting 'nCores=parallel::detectCores()'. By default it is set to a single core. If the files are less than 25000 bytes the userdefined nCores will be overridden to a single core.</p>
</td></tr>
<tr><td><code id="stackDataFilesParallel_+3A_dpid">dpID</code></td>
<td>
<p>The data product identifier</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One file for each table type is created and written.
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='stackEddy'>Extract eddy covariance data from HDF5 format</h2><span id='topic+stackEddy'></span>

<h3>Description</h3>

<p>Convert data of choice from HDF5 to tabular format. Specific to eddy covariance data product: DP4.00200.001
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackEddy(
  filepath,
  level = "dp04",
  var = NA,
  avg = NA,
  metadata = FALSE,
  useFasttime = FALSE,
  runLocal = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stackEddy_+3A_filepath">filepath</code></td>
<td>
<p>One of: a folder containing NEON EC H5 files, a zip file of DP4.00200.001 data downloaded from the NEON data portal, a folder of DP4.00200.001 data downloaded by the neonUtilities::zipsByProduct() function, or a single NEON EC H5 file [character]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_level">level</code></td>
<td>
<p>The level of data to extract; one of dp01, dp02, dp03, dp04 [character]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_var">var</code></td>
<td>
<p>The variable set to extract. Can be any of the variables in the &quot;name&quot; level or the &quot;system&quot; level of the H5 file; use the getVarsEddy() function to see the available variables. From the inputs, all variables from &quot;name&quot; and all variables from &quot;system&quot; will be returned, but if variables from both &quot;name&quot; and &quot;system&quot; are specified, the function will return only the intersecting set. This allows the user to, e.g., return only the pressure data (&quot;pres&quot;) from the CO2 storage system (&quot;co2Stor&quot;), instead of all the pressure data from all instruments.  [character]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_avg">avg</code></td>
<td>
<p>The averaging interval to extract, in minutes [numeric]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_metadata">metadata</code></td>
<td>
<p>Should the output include metadata from the attributes of the H5 files? Defaults to false. Even when false, variable definitions, issue logs, and science review flags will be included. [logical]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_usefasttime">useFasttime</code></td>
<td>
<p>Should the fasttime package be used to convert time stamps to time format? Decreases stacking time but can introduce imprecision at the millisecond level. Defaults to false. [logical]</p>
</td></tr>
<tr><td><code id="stackEddy_+3A_runlocal">runLocal</code></td>
<td>
<p>Set to TRUE to omit any calls to the NEON API. Data are extracted and reformatted from local files, but citation and issue log are not retrieved. [logical]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given a filepath containing H5 files of DP4.00200.001 data, extracts variables, stacks data tables over time, and joins variables into a single table.
For data product levels 2-4 (dp02, dp03, dp04), joins all available data, except for the flux footprint data in the expanded package.
For dp01, an averaging interval and a set of variable names must be provided as inputs.
</p>


<h3>Value</h3>

<p>A named list of data frames. One data frame per site, plus one data frame containing the metadata (objDesc) table and one data frame containing units for each variable (variables).
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To extract and merge Level 4 data tables, where data files are in the working directory
flux &lt;- stackEddy(filepath=getwd(), level='dp04', var=NA, avg=NA)

## End(Not run)
</code></pre>

<hr>
<h2 id='stackFromStore'>Select files from a stored set of NEON data, created by neonstore package methods or another method</h2><span id='topic+stackFromStore'></span>

<h3>Description</h3>

<p>Select files from a stored set based on input criteria and pass to stackByTable() or stackEddy()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackFromStore(
  filepaths,
  dpID,
  site = "all",
  startdate = NA,
  enddate = NA,
  pubdate = NA,
  timeIndex = "all",
  level = "dp04",
  var = NA,
  zipped = FALSE,
  package = "basic",
  load = TRUE,
  nCores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stackFromStore_+3A_filepaths">filepaths</code></td>
<td>
<p>Either a vector of filepaths pointing to files to be stacked, or a single directory containing files that can be stacked, with selection criteria detmined by the other inputs. In both cases files to be stacked must be either site-month zip files or unzipped folders corresponding to site-month zips. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_dpid">dpID</code></td>
<td>
<p>The NEON data product ID of the data to be stacked [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_site">site</code></td>
<td>
<p>Either &quot;all&quot; or a vector of NEON site codes to be stacked [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_startdate">startdate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_enddate">enddate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_pubdate">pubdate</code></td>
<td>
<p>The maximum publication date of data to include in stacking, in the form YYYY-MM-DD. If NA, the most recently published data for each product-site-month combination will be selected. Otherwise, the most recent publication date that is older than pubdate will be selected. Thus the data stacked will be the data that would have been accessed on the NEON Data Portal, if it had been downloaded on pubdate. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_timeindex">timeIndex</code></td>
<td>
<p>Either the string 'all', or the time index of data to be stacked, in minutes. Only applicable to sensor (IS) and eddy covariance data. Defaults to 'all'. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_level">level</code></td>
<td>
<p>Data product level of data to stack. Only applicable to eddy covariance (SAE) data; see stackEddy() documentation. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_var">var</code></td>
<td>
<p>Variables to be extracted and stacked from H5 files. Only applicable to eddy covariance (SAE) data; see stackEddy() documentation. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_zipped">zipped</code></td>
<td>
<p>Should stacking use data from zipped files or unzipped folders? This option allows zips and their equivalent unzipped folders to be stored in the same directory; stacking will extract whichever is specified. Defaults to FALSE, i.e. stacking using unzipped folders. [logical]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_package">package</code></td>
<td>
<p>Either &quot;basic&quot; or &quot;expanded&quot;, indicating which data package to stack. Defaults to basic. [character]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_load">load</code></td>
<td>
<p>If TRUE, stacked data are read into the current R environment. If FALSE, stacked data are written to the directory where data files are stored. Defaults to TRUE. [logical]</p>
</td></tr>
<tr><td><code id="stackFromStore_+3A_ncores">nCores</code></td>
<td>
<p>Number of cores to use for optional parallel processing. Defaults to 1. [integer]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If load=TRUE, returns a named list of stacked data tables. If load=FALSE, return is empty and stacked files are written to data directory.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='table_types'>Publication table information</h2><span id='topic+table_types'></span>

<h3>Description</h3>

<p>A dataset containing publication table names, descriptions, type (site-date, site-all, lab-all, lab-current), and a time index
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_types
</code></pre>


<h3>Format</h3>

<p>A data frame with 5 variables. Number of rows changes frequently as more tables are added:
</p>

<dl>
<dt>productID</dt><dd><p>data product ID</p>
</dd>
<dt>tableName</dt><dd><p>name of table</p>
</dd>
<dt>tableDesc</dt><dd><p>description of table</p>
</dd>
<dt>tableType</dt><dd><p>type of table (important for knowing which tables to stack, and how to stack)</p>
</dd>
<dt>tableTMI</dt><dd><p>a time index (e.g., 0 = native resolution, 1 = 1 minute, 30 = 30 minute averages or totals)</p>
</dd>
</dl>



<h3>Source</h3>

<p>NEON database
</p>

<hr>
<h2 id='timeStampSet'>Generate a consensus set of time stamps from a set of input tables.</h2><span id='topic+timeStampSet'></span>

<h3>Description</h3>

<p>Generate consensus SAE time stamps from a set of tables. Used in stackEddy(), not intended for independent use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timeStampSet(tabList)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="timeStampSet_+3A_tablist">tabList</code></td>
<td>
<p>A list of SAE data tables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of time stamps (start and end times) aggregated from the input tables
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='transformFileToGeoCSV'>Transform NEON CSV file to GeoCSV</h2><span id='topic+transformFileToGeoCSV'></span>

<h3>Description</h3>

<p>Read in a NEON monthly data zip file and parse the respective variables file to create a new GeoCSV file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transformFileToGeoCSV(infile, varfile, outfile)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="transformFileToGeoCSV_+3A_infile">infile</code></td>
<td>
<p>The path to the file that needs to be parsed</p>
</td></tr>
<tr><td><code id="transformFileToGeoCSV_+3A_varfile">varfile</code></td>
<td>
<p>The path to the variables file needed to parse the infile</p>
</td></tr>
<tr><td><code id="transformFileToGeoCSV_+3A_outfile">outfile</code></td>
<td>
<p>The path where the new GeoCSV file should be placed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data file with a GeoCSV header
</p>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='unzipZipfileParallel'>Unzip a zip file either at just the top level or recursively through the file</h2><span id='topic+unzipZipfileParallel'></span>

<h3>Description</h3>

<p>Unzip a zip file either at just the top level or recursively through the file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unzipZipfileParallel(
  zippath,
  outpath = substr(zippath, 1, nchar(zippath) - 4),
  level = "all",
  nCores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unzipZipfileParallel_+3A_zippath">zippath</code></td>
<td>
<p>The filepath of the input file</p>
</td></tr>
<tr><td><code id="unzipZipfileParallel_+3A_outpath">outpath</code></td>
<td>
<p>The name of the folder to save unpacked files to</p>
</td></tr>
<tr><td><code id="unzipZipfileParallel_+3A_level">level</code></td>
<td>
<p>Whether the unzipping should occur only for the 'top' zip file, or unzip 'all' recursively, or only files 'in' the folder specified</p>
</td></tr>
<tr><td><code id="unzipZipfileParallel_+3A_ncores">nCores</code></td>
<td>
<p>Number of cores to use for parallelization</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Christine Laney <a href="mailto:claney@battelleecology.org">claney@battelleecology.org</a>
Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>

<hr>
<h2 id='zipsByProduct'>Get files from NEON API to feed the stackByTable() function</h2><span id='topic+zipsByProduct'></span>

<h3>Description</h3>

<p>Pull files from the NEON API, by data product, in a structure that will allow them to be stacked by the stackByTable() function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zipsByProduct(
  dpID,
  site = "all",
  startdate = NA,
  enddate = NA,
  package = "basic",
  release = "current",
  timeIndex = "all",
  tabl = "all",
  check.size = TRUE,
  include.provisional = FALSE,
  savepath = NA,
  load = F,
  token = NA_character_,
  avg = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zipsByProduct_+3A_dpid">dpID</code></td>
<td>
<p>The identifier of the NEON data product to pull, in the form DPL.PRNUM.REV, e.g. DP1.10023.001</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_site">site</code></td>
<td>
<p>Either the string 'all', meaning all available sites, or a character vector of 4-letter NEON site codes, e.g. c('ONAQ','RMNP'). Defaults to all.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_startdate">startdate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_enddate">enddate</code></td>
<td>
<p>Either NA, meaning all available dates, or a character vector in the form YYYY-MM, e.g. 2017-01. Defaults to NA.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_package">package</code></td>
<td>
<p>Either 'basic' or 'expanded', indicating which data package to download. Defaults to basic.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_release">release</code></td>
<td>
<p>The data release to be downloaded; either 'current' or the name of a release, e.g. 'RELEASE-2021'. 'current' returns the most recent release, as well as provisional data if include.provisional is set to TRUE. To download only provisional data, use release='PROVISIONAL'. Defaults to 'current'.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_timeindex">timeIndex</code></td>
<td>
<p>Either the string 'all', or the time index of data to download, in minutes. Only applicable to sensor (IS) data. Defaults to 'all'.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_tabl">tabl</code></td>
<td>
<p>Either the string 'all', or the name of a single data table to download. Defaults to 'all'.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_check.size">check.size</code></td>
<td>
<p>T or F, should the user approve the total file size before downloading? Defaults to T. When working in batch mode, or other non-interactive workflow, use check.size=F.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_include.provisional">include.provisional</code></td>
<td>
<p>T or F, should provisional data be included in downloaded files? Defaults to F. See https://www.neonscience.org/data-samples/data-management/data-revisions-releases for details on the difference between provisional and released data.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_savepath">savepath</code></td>
<td>
<p>The location to save the output files to</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_load">load</code></td>
<td>
<p>T or F, are files saved locally or loaded directly? Used silently with loadByProduct(), do not set manually.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
<tr><td><code id="zipsByProduct_+3A_avg">avg</code></td>
<td>
<p>Deprecated; use timeIndex</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All available data meeting the query criteria will be downloaded. Most data products are collected at only a subset of sites, and dates of collection vary. Consult the NEON data portal for sampling details.
Dates are specified only to the month because NEON data are provided in monthly packages. Any month included in the search criteria will be included in the download. Start and end date are inclusive.
timeIndex: NEON sensor data are published at pre-determined averaging intervals, usually 1 and 30 minutes. The default download includes all available data. Download volume can be greatly reduced by downloading only the 30 minute files, if higher frequency data are not needed. Use getTimeIndex() to find the available averaging intervals for each sensor data product.
</p>


<h3>Value</h3>

<p>A folder in the working directory (or in savepath, if specified), containing all zip files meeting query criteria.
</p>


<h3>Author(s)</h3>

<p>Claire Lunch <a href="mailto:clunch@battelleecology.org">clunch@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To download plant foliar properties data from all sites, expanded data package:
zipsByProduct(dpID="DP1.10026.001", site="all", package="expanded")

## End(Not run)
</code></pre>

<hr>
<h2 id='zipsByURI'>Get files from NEON ECS Bucket using URLs in stacked data</h2><span id='topic+zipsByURI'></span>

<h3>Description</h3>

<p>Read in a set of URLs from NEON data tables and then download the data from the NEON ECS buckets. 
Assumes data tables are in the format resulting from merging files using stackByTable().
File downloads from ECS can be extremely large; be prepared for long download times and large file storage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zipsByURI(
  filepath,
  savepath = paste0(filepath, "/ECS_zipFiles"),
  pick.files = FALSE,
  check.size = TRUE,
  unzip = TRUE,
  saveZippedFiles = FALSE,
  token = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zipsByURI_+3A_filepath">filepath</code></td>
<td>
<p>The location of the NEON data containing URIs. Can be either a local directory containing NEON tabular data or a list object containing tabular data.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_savepath">savepath</code></td>
<td>
<p>The location to save the output files from the ECS bucket, optional. 
Defaults to creating a &quot;ECS_zipFiles&quot; folder in the filepath directory.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_pick.files">pick.files</code></td>
<td>
<p>T or F, should the user be told the name of each file before downloading? 
Defaults to F. When working in batch mode, or other non-interactive workflow, use pick.files=F.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_check.size">check.size</code></td>
<td>
<p>T or F, should the user be told the total file size before downloading? 
Defaults to T. When working in batch mode, or other non-interactive workflow, use check.size=F.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_unzip">unzip</code></td>
<td>
<p>T or F, indicates if the downloaded zip files from ECS buckets should be 
unzipped into the same directory, defaults to T. Supports .zip and .tar.gz files currently.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_savezippedfiles">saveZippedFiles</code></td>
<td>
<p>T or F: should the zip files be retained after unzipping? Defaults to F.</p>
</td></tr>
<tr><td><code id="zipsByURI_+3A_token">token</code></td>
<td>
<p>User specific API token (generated within neon.datascience user accounts). Optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A folder in the working directory (or in savepath, if specified), containing all files meeting query criteria.
</p>


<h3>Author(s)</h3>

<p>Kaelin Cawley <a href="mailto:kcawley@battelleecology.org">kcawley@battelleecology.org</a>
</p>


<h3>References</h3>

<p>License: GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To download stream morphology data from stacked data:
zipsByURI(filepath="~/filesToStack00131/stackedFiles")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
