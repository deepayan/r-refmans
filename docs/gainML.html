<!DOCTYPE html><html><head><title>Help for package gainML</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gainML}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#analyze.gain'><p>Analyze Potential Gain from Passive Device Installation on WTGs by Using a</p>
Machine Learning-Based Tool</a></li>
<li><a href='#analyze.p1'><p>Apply Period 1 Analysis</p></a></li>
<li><a href='#analyze.p2'><p>Apply Period 2 Analysis</p></a></li>
<li><a href='#arrange.data'><p>Split, Merge, and Filter Given Datasets for the Subsequent Analysis</p></a></li>
<li><a href='#bootstrap.gain'><p>Construct a Confidence Interval of the Gain Estimate</p></a></li>
<li><a href='#pw.freq'><p>Long-Term Frequency of Power Output</p></a></li>
<li><a href='#quantify.gain'><p>Quantify Gain Based on Period 1 and Period 2 Prediction</p></a></li>
<li><a href='#wtg'><p>Wind turbine operational data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-06-25</td>
</tr>
<tr>
<td>Title:</td>
<td>Machine Learning-Based Analysis of Potential Power Gain from
Passive Device Installation on Wind Turbine Generators</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Hoon Hwangbo [aut, cre],
  Yu Ding [aut],
  Daniel Cabezon [aut],
  Texas A&amp;M University [cph],
  EDP Renewables [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hoon Hwangbo &lt;hhwangb1@utk.edu&gt;</td>
</tr>
<tr>
<td>Copyright:</td>
<td>Copyright (c) 2019 Y. Ding, H. Hwangbo, Texas A&amp;M
University, D. Cabezon, and EDP Renewables</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides an effective machine learning-based tool that quantifies the gain of passive device installation on wind turbine generators.
  H. Hwangbo, Y. Ding, and D. Cabezon (2019) &lt;<a href="https://doi.org/10.48550/arXiv.1906.05776">doi:10.48550/arXiv.1906.05776</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>fields (&ge; 9.0), FNN (&ge; 1.1), utils, stats</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-06-25 16:50:02 UTC; User</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-06-28 13:40:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='analyze.gain'>Analyze Potential Gain from Passive Device Installation on WTGs by Using a
Machine Learning-Based Tool</h2><span id='topic+analyze.gain'></span>

<h3>Description</h3>

<p>Implements the gain analysis as a whole; this includes data arrangement,
period 1 analysis, period 2 analysis, and gain quantification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyze.gain(df1, df2, df3, p1.beg, p1.end, p2.beg, p2.end, ratedPW, AEP,
  pw.freq, freq.id = 3, time.format = "%Y-%m-%d %H:%M:%S",
  k.fold = 5, col.time = 1, col.turb = 2, bootstrap = NULL,
  free.sec = NULL, neg.power = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyze.gain_+3A_df1">df1</code></td>
<td>
<p>A dataframe for reference turbine data. This dataframe must
include five columns: timestamp, turbine id, wind direction, power output,
and air density.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_df2">df2</code></td>
<td>
<p>A dataframe for baseline control turbine data. This dataframe must
include four columns: timestamp, turbine id, wind speed, and power output.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_df3">df3</code></td>
<td>
<p>A dataframe for neutral control turbine data. This dataframe must
include four columns and have the same structure with <code>df2</code>.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_p1.beg">p1.beg</code></td>
<td>
<p>A string specifying the beginning date of period 1. By default,
the value needs to be specified in &lsquo;<span class="samp">&#8288;%Y-%m-%d&#8288;</span>&rsquo; format, for example,
<code>'2014-10-24'</code>. A user can use a different format as long as it is
consistent with the format defined in <code>time.format</code> below.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_p1.end">p1.end</code></td>
<td>
<p>A string specifying the end date of period 1. For example, if
the value is <code>'2015-10-24'</code>, data observed until
<code>'2015-10-23 23:50:00'</code> would be considered for period 1.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_p2.beg">p2.beg</code></td>
<td>
<p>A string specifying the beginning date of period 2.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_p2.end">p2.end</code></td>
<td>
<p>A string specifying the end date of period 2. Defined similarly
as <code>p1.end</code>.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_ratedpw">ratedPW</code></td>
<td>
<p>A kW value that describes the (common) rated power of the
selected turbines (REF and CTR-b).</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_aep">AEP</code></td>
<td>
<p>A kWh value describing the annual energy production from a single
turbine.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_pw.freq">pw.freq</code></td>
<td>
<p>A matrix or a dataframe that includes power output bins and
corresponding frequency in terms of the accumulated hours during an annual
period.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_freq.id">freq.id</code></td>
<td>
<p>An integer indicating the column number of <code>pw.freq</code> that
describes the frequency of power bins in terms of the accumulated hours
during an annual period. By default, this parameter is set to 3.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_time.format">time.format</code></td>
<td>
<p>A string describing the format of time stamps used in the
data to be analyzed. The default value is <code>'%Y-%m-%d %H:%M:%S'</code>.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_k.fold">k.fold</code></td>
<td>
<p>An integer defining the number of data folds for the period 1
analysis and prediction. In the period 1 analysis, <code class="reqn">k</code>-fold cross
validation (CV) will be applied to choose the optimal set of covariates
that results in the least prediction error. The value of <code>k.fold</code>
corresponds to the <code class="reqn">k</code> of the <code class="reqn">k</code>-fold CV. The default value is 5.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_col.time">col.time</code></td>
<td>
<p>An integer specifying the column number of time stamps in
wind turbine datasets. The default value is 1.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_col.turb">col.turb</code></td>
<td>
<p>An integer specifying the column number of turbines' id in
wind turbine datasets. The default value is 2.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_bootstrap">bootstrap</code></td>
<td>
<p>An integer indicating the current replication (run) number
of bootstrap. If set to <code>NULL</code>, bootstrap is not applied. The default
is <code>NULL</code>. A user is not recommended to set this value and directly
run bootstrap; instead, use <code><a href="#topic+bootstrap.gain">bootstrap.gain</a></code> to run bootstrap.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_free.sec">free.sec</code></td>
<td>
<p>A list of vectors defining free sectors. Each vector in the
list has two scalars: one for starting direction and another for ending
direction, ordered clockwise. For example, a vector of <code>c(310 , 50)</code>
is a valid component of the list. By default, this is set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="analyze.gain_+3A_neg.power">neg.power</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>, indicating whether or
not to use data points with a negative power output, respectively, in the
analysis. The default value is <code>FALSE</code>, i.e., negative power output
data will be eliminated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Builds a machine learning model for a REF turbine (device installed)
and a baseline CTR turbine (CTR-b; without device installation and
preferably closest to the REF turbine) by using data measurements from a
neutral CTR turbine (CTR-n; without device installation). Gain is
quantified by evaluating predictions from the machine learning models and
their differences during two different time periods, namely, period 1
(without device installation on the REF turbine) and period 2 (device
installed on the REF turbine).
</p>


<h3>Value</h3>

<p>The function returns a list of several objects (lists) that includes
all the analysis results from all steps. </p>
 <dl>
<dt><code>data</code></dt><dd><p>A
list of arranged datasets including period 1 and period 2 data as well as
<code class="reqn">k</code>-folded training and test datasets generated from the period 1 data.
See also <code><a href="#topic+arrange.data">arrange.data</a></code>.</p>
</dd> <dt><code>p1.res</code></dt><dd><p>A list
containing period 1 analysis results. This includes the optimal set of
predictor variables, period 1 prediction for the REF turbine and CTR-b
turbine, the corresponding error measures such as RMSE and BIAS, and BIAS
curves for both REF and CTR-b turbine models; see <code><a href="#topic+analyze.p1">analyze.p1</a></code>
for the details.</p>
</dd> <dt><code>p2.res</code></dt><dd><p>A list containing period 2 analysis
results. This includes period 2 prediction for the REF turbine and CTR-b
turbine. See also <code><a href="#topic+analyze.p2">analyze.p2</a></code>.</p>
</dd> <dt><code>gain.res</code></dt><dd><p>A list
containing gain quantification results. This includes effect curve, offset
curve, and gain curve as well as the measures of effect (gain without
offset), offset, and (the final) gain; see <code><a href="#topic+quantify.gain">quantify.gain</a></code> for
the details.</p>
</dd> </dl>



<h3>Note</h3>

 <ul>
<li><p> This function will execute four other functions in
sequence, namely, <code><a href="#topic+arrange.data">arrange.data</a></code>, <code><a href="#topic+analyze.p1">analyze.p1</a></code>,
<code><a href="#topic+analyze.p2">analyze.p2</a></code>, <code><a href="#topic+quantify.gain">quantify.gain</a></code>. </p>
</li>
<li><p> A user can
alternatively run the four funtions by calling them individually in
sequence.</p>
</li></ul>



<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+arrange.data">arrange.data</a></code>, <code><a href="#topic+analyze.p1">analyze.p1</a></code>,
<code><a href="#topic+analyze.p2">analyze.p2</a></code>, <code><a href="#topic+quantify.gain">quantify.gain</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

# For Full Sector Analysis
res &lt;- analyze.gain(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 ratedPW = 1000, AEP = 300000, pw.freq = pw.freq, k.fold = 2)
# In practice, one may use annual data for each of period 1 and period 2 analysis.
# One may typically use k.fold = 5 or 10.

# For Free Sector Analysis
free.sec &lt;- list(c(310, 50), c(150, 260))

res &lt;- analyze.gain(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 ratedPW = 1000, AEP = 300000, pw.freq = pw.freq, k.fold = 2,
 free.sec = free.sec)

gain.res &lt;- res$gain.res
gain.res$gain    #This will provide the final gain value.

</code></pre>

<hr>
<h2 id='analyze.p1'>Apply Period 1 Analysis</h2><span id='topic+analyze.p1'></span>

<h3>Description</h3>

<p>Conducts period 1 analysis; selects the optimal set of variables that
minimizes a <em>k</em>-fold CV error measure and establishes a machine learning
model that predicts power output of REF and CTR-b turbines by using period 1
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyze.p1(train, test, ratedPW)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyze.p1_+3A_train">train</code></td>
<td>
<p>A list containing <em>k</em> datasets that will be used to train
the machine learning model.</p>
</td></tr>
<tr><td><code id="analyze.p1_+3A_test">test</code></td>
<td>
<p>A list containing <em>k</em> datasets that will be used to test the
machine learning model and calculate CV error measures.</p>
</td></tr>
<tr><td><code id="analyze.p1_+3A_ratedpw">ratedPW</code></td>
<td>
<p>A kW value that describes the (common) rated power of the
selected turbines (REF and CTR-b).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list containing period 1 analysis results as
follows. </p>
 <dl>
<dt><code>opt.cov</code></dt><dd><p>A character vector presenting the
names of predictor variables chosen for the optimal set.</p>
</dd>
<dt><code>pred.REF</code></dt><dd><p>A list of <code class="reqn">k</code> datasets each representing the
<code class="reqn">k</code>th fold's period 1 prediction for the REF turbine.</p>
</dd>
<dt><code>pred.CTR</code></dt><dd><p>A list of <code class="reqn">k</code> datasets each representing the
<code class="reqn">k</code>th fold's period 1 prediction for the CTR-b turbine.</p>
</dd>
<dt><code>err.REF</code></dt><dd><p>A data frame containing <code class="reqn">k</code>-fold CV based RMSE
values and BIAS values for the REF turbine model (so <code class="reqn">k</code> of them for
both). The first column includes the RMSE values and the second column
includes the BIAS values.</p>
</dd> <dt><code>err.CTR</code></dt><dd><p>A data frame containing
<code class="reqn">k</code>-fold CV based RMSE values and BIAS values for the CTR-b turbine
model. Similarly structured with <code>err.REF</code>.</p>
</dd>
<dt><code>biasCurve.REF</code></dt><dd><p>A <code class="reqn">k</code> by <code class="reqn">m</code> matrix describing the
binned BIAS (technically speacking, &lsquo;residuals&rsquo; which are the negative
BIAS) curve for the REF turbine model, where <code class="reqn">m</code> is the number of power
bins.</p>
</dd> <dt><code>biasCurve.CTR</code></dt><dd><p>A <code class="reqn">k</code> by <code class="reqn">m</code> matrix describing
the binned BIAS curve for the CTR-b turbine model.</p>
</dd></dl>



<h3>Note</h3>

<p><b>VERY IMPORTANT!</b> </p>
 <ul>
<li><p> Selecting the optimal set of
variables will take a significant amount of time. For example, with a
typical size of an annual dataset, the evaluation of one set of variables
for a single fold testing may take about 20-40 minutes (from the authors'
experience). </p>
</li>
<li><p> To help understand the progress of the selection, some
informative messages will be displayed while this function runs.</p>
</li></ul>



<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

data &lt;- arrange.data(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 k.fold = 2)

p1.res &lt;- analyze.p1(data$train, data$test, ratedPW = 1000)
p1.res$opt.cov #This provides the optimal set of variables.

</code></pre>

<hr>
<h2 id='analyze.p2'>Apply Period 2 Analysis</h2><span id='topic+analyze.p2'></span>

<h3>Description</h3>

<p>Conducts period 2 analysis; uses the optimal set of variables obtained in the
period 1 analysis to predict the power output of REF and CTR-b turbines in
period 2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyze.p2(per1, per2, opt.cov)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyze.p2_+3A_per1">per1</code></td>
<td>
<p>A dataframe containing the period 1 data.</p>
</td></tr>
<tr><td><code id="analyze.p2_+3A_per2">per2</code></td>
<td>
<p>A dataframe containing the period 2 data.</p>
</td></tr>
<tr><td><code id="analyze.p2_+3A_opt.cov">opt.cov</code></td>
<td>
<p>A character vector indicating the optimal set of variables
(obtained from the period 1 analysis).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list of the following datasets. </p>

<dl>
<dt><code>pred.REF</code></dt><dd><p>A dataframe including the period 2 prediction for
the REF turbine.</p>
</dd> <dt><code>pred.CTR</code></dt><dd><p>A dataframe including the period 2
prediction for the CTR-b turbine.</p>
</dd> </dl>



<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

data &lt;- arrange.data(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 k.fold = 2)

p1.res &lt;- analyze.p1(data$train, data$test, ratedPW = 1000)
p2.res &lt;- analyze.p2(data$per1, data$per2, p1.res$opt.cov)

</code></pre>

<hr>
<h2 id='arrange.data'>Split, Merge, and Filter Given Datasets for the Subsequent Analysis</h2><span id='topic+arrange.data'></span>

<h3>Description</h3>

<p>Generates datasets that consist of the measurements from REF, CTR-b, and
CTR-n turbines only. Filters the datasets by eliminating data points with a
missing measurement and those with negative power output (optional).
Generates training and test datasets for <code class="reqn">k</code>-fold CV and splits the
entire data into period 1 data and period 2 data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arrange.data(df1, df2, df3, p1.beg, p1.end, p2.beg, p2.end,
  time.format = "%Y-%m-%d %H:%M:%S", k.fold = 5, col.time = 1,
  col.turb = 2, bootstrap = NULL, free.sec = NULL,
  neg.power = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="arrange.data_+3A_df1">df1</code></td>
<td>
<p>A dataframe for reference turbine data. This dataframe must
include five columns: timestamp, turbine id, wind direction, power output,
and air density.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_df2">df2</code></td>
<td>
<p>A dataframe for baseline control turbine data. This dataframe must
include four columns: timestamp, turbine id, wind speed, and power output.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_df3">df3</code></td>
<td>
<p>A dataframe for neutral control turbine data. This dataframe must
include four columns and have the same structure with <code>df2</code>.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_p1.beg">p1.beg</code></td>
<td>
<p>A string specifying the beginning date of period 1. By default,
the value needs to be specified in &lsquo;<span class="samp">&#8288;%Y-%m-%d&#8288;</span>&rsquo; format, for example,
<code>'2014-10-24'</code>. A user can use a different format as long as it is
consistent with the format defined in <code>time.format</code> below.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_p1.end">p1.end</code></td>
<td>
<p>A string specifying the end date of period 1. For example, if
the value is <code>'2015-10-24'</code>, data observed until
<code>'2015-10-23 23:50:00'</code> would be considered for period 1.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_p2.beg">p2.beg</code></td>
<td>
<p>A string specifying the beginning date of period 2.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_p2.end">p2.end</code></td>
<td>
<p>A string specifying the end date of period 2. Defined similarly
as <code>p1.end</code>.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_time.format">time.format</code></td>
<td>
<p>A string describing the format of time stamps used in the
data to be analyzed. The default value is <code>'%Y-%m-%d %H:%M:%S'</code>.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_k.fold">k.fold</code></td>
<td>
<p>An integer defining the number of data folds for the period 1
analysis and prediction. In the period 1 analysis, <code class="reqn">k</code>-fold cross
validation (CV) will be applied to choose the optimal set of covariates
that results in the least prediction error. The value of <code>k.fold</code>
corresponds to the <code class="reqn">k</code> of the <code class="reqn">k</code>-fold CV. The default value is 5.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_col.time">col.time</code></td>
<td>
<p>An integer specifying the column number of time stamps in
wind turbine datasets. The default value is 1.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_col.turb">col.turb</code></td>
<td>
<p>An integer specifying the column number of turbines' id in
wind turbine datasets. The default value is 2.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_bootstrap">bootstrap</code></td>
<td>
<p>An integer indicating the current replication (run) number
of bootstrap. If set to <code>NULL</code>, bootstrap is not applied. The default
is <code>NULL</code>. A user is not recommended to set this value and directly
run bootstrap; instead, use <code><a href="#topic+bootstrap.gain">bootstrap.gain</a></code> to run bootstrap.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_free.sec">free.sec</code></td>
<td>
<p>A list of vectors defining free sectors. Each vector in the
list has two scalars: one for starting direction and another for ending
direction, ordered clockwise. For example, a vector of <code>c(310 , 50)</code>
is a valid component of the list. By default, this is set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="arrange.data_+3A_neg.power">neg.power</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>, indicating whether or
not to use data points with a negative power output, respectively, in the
analysis. The default value is <code>FALSE</code>, i.e., negative power output
data will be eliminated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list of several datasets including the
following. </p>
 <dl>
<dt><code>train</code></dt><dd><p>A list containing <em>k</em>
datasets that will be used to <b>train</b> the machine learning model.</p>
</dd>
<dt><code>test</code></dt><dd><p>A list containing <em>k</em> datasets that will be used to
<b>test</b> the machine learning model.</p>
</dd> <dt><code>per1</code></dt><dd><p>A dataframe
containing the period 1 data.</p>
</dd> <dt><code>per2</code></dt><dd><p>A dataframe containing
the period 2 data.</p>
</dd> </dl>



<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D, power = y,
 air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V, power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

# For Full Sector Analysis
data &lt;- arrange.data(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24', p1.end = '2014-10-27',
 p2.beg = '2014-10-27', p2.end = '2014-10-30')

# For Free Sector Analysis
free.sec &lt;- list(c(310, 50), c(150, 260))
data &lt;- arrange.data(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24', p1.end = '2014-10-27',
 p2.beg = '2014-10-27', p2.end = '2014-10-30', free.sec = free.sec)

length(data$train) #This equals to k.
length(data$test)  #This equals to k.
head(data$per1)    #This shows the beginning of the period 1 dataset.
head(data$per2)    #This shows the beginning of the period 2 dataset.
</code></pre>

<hr>
<h2 id='bootstrap.gain'>Construct a Confidence Interval of the Gain Estimate</h2><span id='topic+bootstrap.gain'></span>

<h3>Description</h3>

<p>Estimates gain and its confidence interval at a given level of confidence by
using bootstrap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bootstrap.gain(df1, df2, df3, opt.cov, n.rep, p1.beg, p1.end, p2.beg,
  p2.end, ratedPW, AEP, pw.freq, freq.id = 3,
  time.format = "%Y-%m-%d %H:%M:%S", k.fold = 5, col.time = 1,
  col.turb = 2, free.sec = NULL, neg.power = FALSE,
  pred.return = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bootstrap.gain_+3A_df1">df1</code></td>
<td>
<p>A dataframe for reference turbine data. This dataframe must
include five columns: timestamp, turbine id, wind direction, power output,
and air density.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_df2">df2</code></td>
<td>
<p>A dataframe for baseline control turbine data. This dataframe must
include four columns: timestamp, turbine id, wind speed, and power output.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_df3">df3</code></td>
<td>
<p>A dataframe for neutral control turbine data. This dataframe must
include four columns and have the same structure with <code>df2</code>.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_opt.cov">opt.cov</code></td>
<td>
<p>A character vector indicating the optimal set of variables
(obtained from the period 1 analysis).</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_n.rep">n.rep</code></td>
<td>
<p>An integer describing the total number of replications when
applying bootstrap. This number determines the confidence level; for
example, if <code>n.rep</code> is set to 10, this function will provide an 80%
confidence interval.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_p1.beg">p1.beg</code></td>
<td>
<p>A string specifying the beginning date of period 1. By default,
the value needs to be specified in &lsquo;<span class="samp">&#8288;%Y-%m-%d&#8288;</span>&rsquo; format, for example,
<code>'2014-10-24'</code>. A user can use a different format as long as it is
consistent with the format defined in <code>time.format</code> below.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_p1.end">p1.end</code></td>
<td>
<p>A string specifying the end date of period 1. For example, if
the value is <code>'2015-10-24'</code>, data observed until
<code>'2015-10-23 23:50:00'</code> would be considered for period 1.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_p2.beg">p2.beg</code></td>
<td>
<p>A string specifying the beginning date of period 2.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_p2.end">p2.end</code></td>
<td>
<p>A string specifying the end date of period 2. Defined similarly
as <code>p1.end</code>.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_ratedpw">ratedPW</code></td>
<td>
<p>A kW value that describes the (common) rated power of the
selected turbines (REF and CTR-b).</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_aep">AEP</code></td>
<td>
<p>A kWh value describing the annual energy production from a single
turbine.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_pw.freq">pw.freq</code></td>
<td>
<p>A matrix or a dataframe that includes power output bins and
corresponding frequency in terms of the accumulated hours during an annual
period.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_freq.id">freq.id</code></td>
<td>
<p>An integer indicating the column number of <code>pw.freq</code> that
describes the frequency of power bins in terms of the accumulated hours
during an annual period. By default, this parameter is set to 3.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_time.format">time.format</code></td>
<td>
<p>A string describing the format of time stamps used in the
data to be analyzed. The default value is <code>'%Y-%m-%d %H:%M:%S'</code>.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_k.fold">k.fold</code></td>
<td>
<p>An integer defining the number of data folds for the period 1
analysis and prediction. In the period 1 analysis, <code class="reqn">k</code>-fold cross
validation (CV) will be applied to choose the optimal set of covariates
that results in the least prediction error. The value of <code>k.fold</code>
corresponds to the <code class="reqn">k</code> of the <code class="reqn">k</code>-fold CV. The default value is 5.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_col.time">col.time</code></td>
<td>
<p>An integer specifying the column number of time stamps in
wind turbine datasets. The default value is 1.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_col.turb">col.turb</code></td>
<td>
<p>An integer specifying the column number of turbines' id in
wind turbine datasets. The default value is 2.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_free.sec">free.sec</code></td>
<td>
<p>A list of vectors defining free sectors. Each vector in the
list has two scalars: one for starting direction and another for ending
direction, ordered clockwise. For example, a vector of <code>c(310 , 50)</code>
is a valid component of the list. By default, this is set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_neg.power">neg.power</code></td>
<td>
<p>Either <code>TRUE</code> or <code>FALSE</code>, indicating whether or
not to use data points with a negative power output, respectively, in the
analysis. The default value is <code>FALSE</code>, i.e., negative power output
data will be eliminated.</p>
</td></tr>
<tr><td><code id="bootstrap.gain_+3A_pred.return">pred.return</code></td>
<td>
<p>A logical value whether to return the full prediction
results; see <b>Details</b> below. The default value is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each replication, this function will make a <code class="reqn">k</code> of period 1
predictions for each of REF and CTR-b turbine models and an additional
period 2 prediction for each model. This results in <code class="reqn">2 \times (k + 1)</code>
predictions for each replication. With <code>n.rep</code> replications, there
will be <code class="reqn">n.rep \times 2 \times (k + 1)</code> predictions in total.
</p>
<p>One can avoid storing such many datasets in the memory by setting
<code>pred.return</code> to <code>FALSE</code>; which is the default setting.
</p>


<h3>Value</h3>

<p>The function returns a list of <code>n.rep</code> replication objects
(lists) each of which includes the following. </p>

<dl>
<dt><code>gain.res</code></dt><dd><p>A list containing gain quantification results; see
<code><a href="#topic+quantify.gain">quantify.gain</a></code> for the details.</p>
</dd> <dt><code>p1.pred</code></dt><dd><p>A list
containing period 1 prediction results. </p>
 <ul>
<li><p><code>pred.REF</code>: A
list of <code class="reqn">k</code> datasets each representing the <code class="reqn">k</code>th fold's period 1
prediction for the REF turbine. </p>
</li>
<li><p><code>pred.CTR</code>: A list of <code class="reqn">k</code>
datasets each representing the <code class="reqn">k</code>th fold's period 1 prediction for the
CTR-b turbine.</p>
</li></ul>
</dd> <dt><code>p2.pred</code></dt><dd><p>A list containing period 2
prediction results; see <code><a href="#topic+analyze.p2">analyze.p2</a></code> for the details.</p>
</dd> </dl>



<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

opt.cov = c('D','density','Vn','hour')
n.rep = 2 # just for illustration; a user may use at leat 10 for this.

res &lt;- bootstrap.gain(df.ref, df.ctrb, df.ctrn, opt.cov = opt.cov, n.rep = n.rep,
 p1.beg = '2014-10-24', p1.end = '2014-10-25', p2.beg = '2014-10-25',
 p2.end = '2014-10-26', ratedPW = 1000, AEP = 300000, pw.freq = pw.freq,
 k.fold = 2)

length(res) #2
sapply(res, function(ls) ls$gain.res$gainCurve) #This provides 2 gain curves.
sapply(res, function(ls) ls$gain.res$gain) #This provides 2 gain values.

</code></pre>

<hr>
<h2 id='pw.freq'>Long-Term Frequency of Power Output</h2><span id='topic+pw.freq'></span>

<h3>Description</h3>

<p>A dataset containing power bins, the proportion of observing each power bin,
and the accumulated hours of observing each power bin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pw.freq
</code></pre>


<h3>Format</h3>

<p>A data frame with 10 rows and 3 columns: </p>

<dl>
<dt><code>PW_bin</code></dt><dd><p>the right end point of the intervals defining power
bins</p>
</dd> <dt><code>freq</code></dt><dd><p>the proportion of observing each power bin from
historical data</p>
</dd> <dt><code>freq_h</code></dt><dd><p>the accumulated hours of observing
each power bin from historical data</p>
</dd> </dl>


<h3>Note</h3>

 <ul>
<li><p> This dataset is provided to show how a user is expected
to structure the long-term frequency data, which will be used in
<code><a href="#topic+analyze.gain">analyze.gain</a></code> or in <code><a href="#topic+quantify.gain">quantify.gain</a></code>. </p>
</li>
<li><p> In the
gain analysis performed by <code><a href="#topic+analyze.gain">analyze.gain</a></code>, power bins will be
defined with 100kW increments. To be consistent, <code>PW_bin</code> must be
defined with 100kW increments. For example, if rated power is 1,000kW
(1MW), power bins shalle be generated by using the intervals of [0kW,
100kW], [100kW, 200kW], <code class="reqn"> \ldots</code>, [900kW, 1000kW]. </p>
</li>
<li><p> The gain
analysis will only need the information specified in <code>freq_h</code>, so as
long as the elements in this column correponds to each power bin (with
100kW increments) and the number of elements matches the number of power
bins, there should not be any problem. </p>
</li></ul>


<hr>
<h2 id='quantify.gain'>Quantify Gain Based on Period 1 and Period 2 Prediction</h2><span id='topic+quantify.gain'></span>

<h3>Description</h3>

<p>Calculates effect curve, offset curve, and gain curve, and quantifies gain by
using both period 1 and period 2 prediction results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quantify.gain(p1.res, p2.res, ratedPW, AEP, pw.freq, freq.id = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quantify.gain_+3A_p1.res">p1.res</code></td>
<td>
<p>A list containing the period 1 analysis results.</p>
</td></tr>
<tr><td><code id="quantify.gain_+3A_p2.res">p2.res</code></td>
<td>
<p>A list containing the period 2 prediction results.</p>
</td></tr>
<tr><td><code id="quantify.gain_+3A_ratedpw">ratedPW</code></td>
<td>
<p>A kW value that describes the (common) rated power of the
selected turbines (REF and CTR-b).</p>
</td></tr>
<tr><td><code id="quantify.gain_+3A_aep">AEP</code></td>
<td>
<p>A kWh value describing the annual energy production from a single
turbine.</p>
</td></tr>
<tr><td><code id="quantify.gain_+3A_pw.freq">pw.freq</code></td>
<td>
<p>A matrix or a dataframe that includes power output bins and
corresponding frequency in terms of the accumulated hours during an annual
period.</p>
</td></tr>
<tr><td><code id="quantify.gain_+3A_freq.id">freq.id</code></td>
<td>
<p>An integer indicating the column number of <code>pw.freq</code> that
describes the frequency of power bins in terms of the accumulated hours
during an annual period. By default, this parameter is set to 3.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list containing the following. </p>

<dl>
<dt><code>effectCurve</code></dt><dd><p>A vector of length <code class="reqn">m</code> illustrating REF
turbine's power output difference between period 1 and 2, where <code class="reqn">m</code> is
the number of power bins.</p>
</dd> <dt><code>offsetCurve</code></dt><dd><p>A vector of length
<code class="reqn">m</code> illustrating CTR-b turbine's power output difference between period
1 and 2.</p>
</dd> <dt><code>gainCurve</code></dt><dd><p>A vector of length <code class="reqn">m</code> illustrating
the bin-wise gain. Equivalent to <code>effCurve - offCurve</code>.</p>
</dd>
<dt><code>gain</code></dt><dd><p>A scalar representing the final gain after offset
adjustment (derived from <code>gainCurve</code>).</p>
</dd> <dt><code>effect</code></dt><dd><p>A scalar
representing the initial effect without offset correction (derived from
<code>effCurve</code>).</p>
</dd> <dt><code>offset</code></dt><dd><p>A scalar representing the offset
value for the final gain quantification (derived from <code>offCurve</code>).</p>
</dd></dl>



<h3>References</h3>

<p>H. Hwangbo, Y. Ding, and D. Cabezon, 'Machine Learning Based
Analysis and Quantification of Potential Power Gain from Passive Device
Installation,' arXiv:1906.05776 [stat.AP], Jun. 2019.
<a href="https://arxiv.org/abs/1906.05776">https://arxiv.org/abs/1906.05776</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df.ref &lt;- with(wtg, data.frame(time = time, turb.id = 1, wind.dir = D,
 power = y, air.dens = rho))
df.ctrb &lt;- with(wtg, data.frame(time = time, turb.id = 2, wind.spd = V,
 power = y))
df.ctrn &lt;- df.ctrb
df.ctrn$turb.id &lt;- 3

data &lt;- arrange.data(df.ref, df.ctrb, df.ctrn, p1.beg = '2014-10-24',
 p1.end = '2014-10-25', p2.beg = '2014-10-25', p2.end = '2014-10-26',
 k.fold = 2)

p1.res &lt;- analyze.p1(data$train, data$test, ratedPW = 1000)
p2.res &lt;- analyze.p2(data$per1, data$per2, p1.res$opt.cov)

res &lt;- quantify.gain(p1.res, p2.res, ratedPW = 1000, AEP = 300000, pw.freq = pw.freq)

res$effect - res$offset #This should be equivalent to the final gain below.
res$gain

res$gainCurve #This shows the bin-wise gain (after offset adjustment).

</code></pre>

<hr>
<h2 id='wtg'>Wind turbine operational data</h2><span id='topic+wtg'></span>

<h3>Description</h3>

<p>A dataset containing the measurements of wind-related and other environmental
variables as well as the actual power output measurements of an operating
wind turbine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtg
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows and 7 variables: </p>
 <ul>
<li> <p><code>time</code>:
timestamp, </p>
</li>
<li> <p><code>V</code>: wind speed (<code class="reqn">m/s</code>), </p>
</li>
<li> <p><code>D</code>: wind
direction (degree), </p>
</li>
<li> <p><code>rho</code>: air density (<code class="reqn">kg/m^3</code>), </p>
</li>
<li>
<p><code>I</code>: turbulence intensity, </p>
</li>
<li> <p><code>Sb</code>: below-hub wind shear, </p>
</li>
<li>
<p><code>y</code>: power output (<code class="reqn">kW</code>). </p>
</li></ul>


<h3>Note</h3>

<p>This dataset is generated by using <code>windpw</code> dataset in <code>kernplus</code>
package. Timestamp has been added (randomly), and the power output of
<code>windpw</code> dataset has been arbitrarily muliplied by 10 to represent
<code class="reqn">kW</code> values.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
