<!DOCTYPE html><html lang="en"><head><title>Help for package provParseR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {provParseR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#get.environment'><p>Provenance access functions</p></a></li>
<li><a href='#prov.parse'><p>Provenance parser</p></a></li>
<li><a href='#ProvInfo-class'><p>Collection of information gathered from parsing a PROV file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Pulls Information from Prov.Json Files</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-08-08</td>
</tr>
<tr>
<td>Description:</td>
<td>R functions to access provenance information collected by 'rdt' or 
    'rdtLite'.  The information is stored inside a 'ProvInfo' object and can be 
    accessed through a collection of functions that will return the requested 
    data. The exact format of the JSON created by 'rdt' and 'rdtLite' is described 
    in <a href="https://github.com/End-to-end-provenance/ExtendedProvJson">https://github.com/End-to-end-provenance/ExtendedProvJson</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>jsonlite, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/End-to-end-provenance">https://github.com/End-to-end-provenance</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-12 20:10:02 UTC; blerner</td>
</tr>
<tr>
<td>Author:</td>
<td>Orenna Brand [aut],
  Joseph Wonsil [aut],
  Emery Boose [aut],
  Barbara Lerner [cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Barbara Lerner &lt;blerner@mtholyoke.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-15 22:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='get.environment'>Provenance access functions</h2><span id='topic+get.environment'></span><span id='topic+get.libs'></span><span id='topic+get.tool.info'></span><span id='topic+get.args'></span><span id='topic+get.scripts'></span><span id='topic+get.saved.scripts'></span><span id='topic+get.proc.nodes'></span><span id='topic+get.data.nodes'></span><span id='topic+get.stdout.nodes'></span><span id='topic+get.error.nodes'></span><span id='topic+get.func.nodes'></span><span id='topic+get.proc.proc'></span><span id='topic+get.data.proc'></span><span id='topic+get.proc.data'></span><span id='topic+get.func.proc'></span><span id='topic+get.func.lib'></span><span id='topic+get.input.files'></span><span id='topic+get.urls'></span><span id='topic+get.output.files'></span><span id='topic+get.preexisting'></span><span id='topic+get.variables.set'></span><span id='topic+get.variables.used'></span><span id='topic+get.variable.named'></span><span id='topic+get.val.type'></span>

<h3>Description</h3>

<p>These functions extract information from a ProvInfo object created by the prov.parse function 
and return this information as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.environment(prov)

get.libs(prov)

get.tool.info(prov)

get.args(prov)

get.scripts(prov)

get.saved.scripts(prov)

get.proc.nodes(prov)

get.data.nodes(prov)

get.stdout.nodes(prov)

get.error.nodes(prov)

get.func.nodes(prov)

get.proc.proc(prov)

get.data.proc(prov)

get.proc.data(prov)

get.func.proc(prov)

get.func.lib(prov)

get.input.files(prov, only.files = FALSE)

get.urls(prov)

get.output.files(prov)

get.preexisting(prov)

get.variables.set(prov)

get.variables.used(prov)

get.variable.named(prov, var.name)

get.val.type(prov, node.id = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.environment_+3A_prov">prov</code></td>
<td>
<p>a ProvInfo object created by calling <code><a href="#topic+prov.parse">prov.parse</a></code>.</p>
</td></tr>
<tr><td><code id="get.environment_+3A_only.files">only.files</code></td>
<td>
<p>If true, the output of get.input.files contains just files.  If false,
it contains both files and URLs.</p>
</td></tr>
<tr><td><code id="get.environment_+3A_var.name">var.name</code></td>
<td>
<p>a string containing the name of a variable used in the script the
provenance is for</p>
</td></tr>
<tr><td><code id="get.environment_+3A_node.id">node.id</code></td>
<td>
<p>A vector of node id.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All access functions return NULL if there is no parsed provenance.  If parsed provenance
exists, but there is no provenance for the type of information requested, such as no input 
files, an empty data frame is returned.
</p>
<p>get.environment returns a data frame containing information about how the provenance was collected.
The data frame has 2 columns:  label and value.  The labels are: 
</p>

<ul>
<li> <p>name - whose value will always be &quot;environment&quot;
</p>
</li>
<li> <p>architecture
</p>
</li>
<li> <p>operatingSystem
</p>
</li>
<li> <p>language
</p>
</li>
<li> <p>langVersion
</p>
</li>
<li> <p>script - the absolute path to the script executed
</p>
</li>
<li> <p>scriptTimeStamp - when the script was last modified
</p>
</li>
<li> <p>workingDirectory
</p>
</li>
<li> <p>provDirectory - where the provenance is stored
</p>
</li>
<li> <p>provTimeStamp - when the provenance was collected
</p>
</li>
<li> <p>hashAlgorithm
</p>
</li></ul>

<p>get.libs returns a data frame describing the libraries used by the 
script.  It contains 3 columns:  id, name, and version.
</p>
<p>get.tool.info returns a data frame describing the tool that 
collected the provenance.  It contains 3 columns:  tool.name, tool.version
and json.version.
</p>
<p>get.args returns a named list describing the arguments that were passed
to prov.run or prov.init when the provenance was collected.
Each element is the value of an argument in its original type, 
each element name is the name of the arguemnt the value corresponds to.
</p>
<p>get.scripts returns a data frame identifying all the scripts executed.  The main script
will be first, followed by all sourced scripts.  The data frame contains 
2 columns:  name and timestamp (when the script was last modified).
</p>
<p>get.saved.scripts returns a data frame identifying the location of saved copies
of all the scripts executed.  The main script
will be first, followed by all sourced scripts.  The data frame contains 
2 columns:  name and timestamp (when the script was last modified).
</p>
<p>get.proc.nodes returns a data frame identifying all the procedural nodes executed.  
These are represented in PROV-JSON as activities and include nodes
corresponding to lines of code, start or finish nodes that surround
blocks of code, and nodes to represent the binding of function arguments
to parameters.  The data frame contains 
8 columns:  
</p>

<ul>
<li><p>id - a unique id
</p>
</li>
<li><p>name - a description of what the node represents.  Often this is a line of code from
the script, perhaps shortened
</p>
</li>
<li><p>type - one of Operation, Binding, Start, Finish, or Incomplete
</p>
</li>
<li><p>elapsedTime - when this executed relative to the start of the script
</p>
</li>
<li> <p>scriptNum - a number identifing the script it comes from, with script 1 being the main
script
</p>
</li>
<li> <p>startLine - the line in the script this corresponds to, which may be NA, and the following
other position infofmation
</p>
</li>
<li> <p>startCol
</p>
</li>
<li> <p>endLine
</p>
</li>
<li> <p>endCol
</p>
</li></ul>

<p>get.data.nodes returns a data frame with an entry for each data node
in the provenance.  The data frame contains the following columns:
</p>

<ul>
<li> <p>id - a unique id
</p>
</li>
<li> <p>name - the descriptive name for the node, which is generally a variable name, file name, or URL
</p>
</li>
<li> <p>value - either a text value (possible shortened) or the name of a file where the value is stored
</p>
</li>
<li> <p>valType - a description of the value's type, including its container (such as list, vector, etc.), 
dimensions and member types (such as character, numeric, etc.)
</p>
</li>
<li> <p>type - the type of the node, one of Data, Snapshot, File, URL, Exception, Device, 
StandardOutput, or StandardOutputSnapshot
</p>
</li>
<li> <p>scope - a hex number identifying the scope.  This is only used for node's with type Data or Snapshot
</p>
</li>
<li> <p>fromEnv - a logical value.  If true, it means the variable had a value before the script began execution
</p>
</li>
<li> <p>hash - the hash value for File nodes
</p>
</li>
<li> <p>timestamp - the time at which the node was created
</p>
</li>
<li> <p>location - for file nodes, the absolute path to the file
</p>
</li></ul>

<p>get.stdout.nodes returns a data frame with an entry for each standard output node
in the provenance.  The data frame contains the following columns:
</p>

<ul>
<li> <p>id - a unique id
</p>
</li>
<li> <p>value - either a text value (possible shortened) or the name of a file where the value is stored
</p>
</li>
<li> <p>timestamp - the time at which the node was created
</p>
</li></ul>

<p>get.error.nodes returns a data frame with an entry for each error node
in the provenance.  The data frame contains the following columns:
</p>

<ul>
<li> <p>id - a unique id
</p>
</li>
<li> <p>value - either a text value (possible shortened) or the name of a file where the value is stored
</p>
</li>
<li> <p>timestamp - the time at which the node was created
</p>
</li></ul>

<p>get.func.nodes returns a data frame containing information about the functions
used from other libraries within the script.  The data frame has 2 columns:  id 
(a unique id) and name (the name of the function called).
</p>
<p>get.proc.proc returns a data frame containing information about the edges
that go between two procedural nodes.  These edges indicate a control-flow relationship
between the two activities.  The data frame has 3 columns:  id 
(a unique id), informant (the tail of the edge), and informed (the head of the edge).
</p>
<p>get.data.proc returns a data frame containing information about the edges
that go from data nodes to procedural nodes.  These edges indicate an input relationship
where the data is used by the activity.  The data frame has 3 columns:  id 
(a unique id), entity (the input data), and activity (the procedural node that uses the
data).
</p>
<p>get.proc.data returns a data frame containing information about the edges
that go from procedural nodes to data nodes.  These edges indicate an output relationship
where the data is produed by the activity.  The data frame has 3 columns:  id 
(a unique id), entity (the output data), and activity (the procedural node that produces the
data).
</p>
<p>get.proc.func returns a data frame containing information about where externally-defined
functions are used in the script.  The data frame has 3 columns:  func_id (the id of the
function node), activity (the procedural node 
that calls the function) and function (the function's name).
</p>
<p>get.func.lib returns a data frame containing information about what
libraries externally-defined
functions come from.  The data frame has 3 columns:  func_id (the id of the
function node), library (a library node)
and function (the name of a function).
</p>
<p>get.input.files returns a data frame containing a subset of the data nodes that correspond to files that are 
read by the script.  If only.files is False, the data frame contains information about both input files and URLs.
</p>
<p>get.urls returns a data frame containing a subset of the data nodes that correspond to urls used 
in the script.
</p>
<p>get.output.files returns a data frame containing a subset of the data nodes that correspond to files that are 
written by the script.
</p>
<p>get.preexisting returns a data frame containing variables in the global environment 
that are used but not set by a script or a console session.
</p>
<p>get.variables.set returns a data frame containing a subset of the data nodes that correspond to variables
assigned to in the script.
</p>
<p>get.variables.used returns a data frame containing a subset of the data nodes that correspond to variables
whose values are used in the script.
</p>
<p>get.variable.named returns a data frame containing a subset of the data nodes that correspond to variables
with the specified name.
</p>
<p>A data frame containing the valType of the specified data node, 
or the valTypes of all data nodes if no data node is specified. Return NULL
if there are no data nodes or if the specified data node is not found.
If not NULL, the data frame will contain 4 columns in the following order:
</p>

<ul>
<li> <p>id - The data node id.
</p>
</li>
<li> <p>container - The type for the data's container, such as list, vector, etc. 
NA in cases such as environment and function where the original valType is not a json object.
</p>
</li>
<li> <p>dimension - The size of the data, represented as a string list when there are 2 or more dimensions.
NA in cases such as environment and function where the original valType is not a json object.
</p>
</li>
<li> <p>type - The type(s) contained within the container, represented as a string list in containers such as 
data frames when there are multiple types. NA in cases like lists where the type of each element can be complex.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+prov.parse">prov.parse</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prov &lt;- prov.parse(system.file ("testdata", "prov.json", package="provParseR", mustWork=TRUE))
get.proc.nodes(prov)
get.input.files(prov)
get.urls(prov)
get.output.files(prov)
get.variables.set(prov)
get.variables.used(prov)
get.variable.named(prov, "z")
get.data.nodes(prov)
get.error.nodes(prov)
get.func.nodes(prov)
get.proc.proc(prov)
get.data.proc(prov)
get.proc.data(prov)
get.func.proc(prov)
get.func.lib(prov)
get.libs(prov)
get.scripts(prov)
get.environment(prov)
get.val.type(prov, "d1")
get.tool.info(prov)
get.args(prov)
get.stdout.nodes(prov)

</code></pre>

<hr>
<h2 id='prov.parse'>Provenance parser</h2><span id='topic+prov.parse'></span>

<h3>Description</h3>

<p>The prov.parse function parses the provenance collected by rdt or rdtLite.  This 
provenance can be stored in a prov.json file or passed to prov.parse as a string.  
The provParseR package also defines
a number of functions that extract and return information from the parsed
provenance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prov.parse(prov.input, isFile = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prov.parse_+3A_prov.input">prov.input</code></td>
<td>
<p>A path to a json file that has been created by rdt
or rdtLite or a string that is in prov.json format.</p>
</td></tr>
<tr><td><code id="prov.parse_+3A_isfile">isFile</code></td>
<td>
<p>A logical value that indicates whether the provenance information 
is stored in a file (isFile=T) or in a string (isFile=F).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ProvInfo object that can be passed to the access functions provided
by the provParseR package.
</p>


<h3>See Also</h3>

<p>The access functions, including <code><a href="#topic+get.environment">get.environment</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prov &lt;- prov.parse(system.file ("testdata", "prov.json", package="provParseR", mustWork=TRUE))
</code></pre>

<hr>
<h2 id='ProvInfo-class'>Collection of information gathered from parsing a PROV file</h2><span id='topic+ProvInfo-class'></span><span id='topic+ProvInfo'></span>

<h3>Description</h3>

<p>This is the class that stores provenance information.  It is created by 
prov.parse.  Rather than access the slots directly, it is better to use
the access functions the package provides.
</p>


<h3>Slots</h3>


<dl>
<dt><code>proc.nodes</code></dt><dd><p>the procedure nodes</p>
</dd>
<dt><code>data.nodes</code></dt><dd><p>the data nodes</p>
</dd>
<dt><code>func.nodes</code></dt><dd><p>the function nodes</p>
</dd>
<dt><code>proc.proc.edges</code></dt><dd><p>control flow edges</p>
</dd>
<dt><code>proc.data.edges</code></dt><dd><p>output data edges</p>
</dd>
<dt><code>data.proc.edges</code></dt><dd><p>input data edges</p>
</dd>
<dt><code>func.proc.edges</code></dt><dd><p>function use edges</p>
</dd>
<dt><code>func.lib.edges</code></dt><dd><p>function library edges</p>
</dd>
<dt><code>agents</code></dt><dd><p>tool that created the provenance</p>
</dd>
<dt><code>args</code></dt><dd><p>arguments passed when provenance was created</p>
</dd>
<dt><code>envi</code></dt><dd><p>environmental information</p>
</dd>
<dt><code>libs</code></dt><dd><p>libraries</p>
</dd>
<dt><code>scripts</code></dt><dd><p>scripts executed</p>
</dd>
</dl>


<h3>See Also</h3>

<p>The parse function, which creates the ProvInfo object, <code><a href="#topic+prov.parse">prov.parse</a></code>
</p>
<p>The access functions, including <code><a href="#topic+get.environment">get.environment</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
