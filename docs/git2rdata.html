<!DOCTYPE html><html lang="en-GB"><head><title>Help for package git2rdata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {git2rdata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#git2rdata-package'><p>git2rdata: Store and Retrieve Data.frames in a Git Repository</p></a></li>
<li><a href='#commit'><p>Re-exported Function From <code>git2r</code></p></a></li>
<li><a href='#data_package'><p>Create a Data Package for a directory of CSV files</p></a></li>
<li><a href='#display_metadata'><p>Display metadata for a <code>git2rdata</code> object</p></a></li>
<li><a href='#is_git2rdata'><p>Check Whether a Git2rdata Object is Valid.</p></a></li>
<li><a href='#is_git2rmeta'><p>Check Whether a Git2rdata Object Has Valid Metadata.</p></a></li>
<li><a href='#list_data'><p>List Available Git2rdata Files Containing Data</p></a></li>
<li><a href='#meta'><p>Optimize an Object for Storage as Plain Text and Add Metadata</p></a></li>
<li><a href='#print.git2rdata'><p>Print method for <code>git2rdata</code> objects.</p></a></li>
<li><a href='#prune_meta'><p>Prune Metadata Files</p></a></li>
<li><a href='#pull'><p>Re-exported Function From <code>git2r</code></p></a></li>
<li><a href='#push'><p>Re-exported Function From <code>git2r</code></p></a></li>
<li><a href='#read_vc'><p>Read a Git2rdata Object from Disk</p></a></li>
<li><a href='#recent_commit'><p>Retrieve the Most Recent File Change</p></a></li>
<li><a href='#relabel'><p>Relabel Factor Levels by Updating the Metadata</p></a></li>
<li><a href='#rename_variable'><p>Rename a Variable</p></a></li>
<li><a href='#repository'><p>Re-exported Function From <code>git2r</code></p></a></li>
<li><a href='#rm_data'><p>Remove Data Files From Git2rdata Objects</p></a></li>
<li><a href='#status'><p>Re-exported Function From <code>git2r</code></p></a></li>
<li><a href='#summary.git2rdata'><p>Summary method for <code>git2rdata</code> objects.</p></a></li>
<li><a href='#update_metadata'><p>Update the description of a <code>git2rdata</code> object</p></a></li>
<li><a href='#upgrade_data'><p>Upgrade Files to the New Version</p></a></li>
<li><a href='#verify_vc'><p>Read a file an verify the presence of variables</p></a></li>
<li><a href='#write_vc'><p>Store a Data.Frame as a Git2rdata Object on Disk</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Store and Retrieve Data.frames in a Git Repository</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Description:</td>
<td>The git2rdata package is an R package for writing and reading
    dataframes as plain text files.  A metadata file stores important
    information.  1) Storing metadata allows to maintain the classes of
    variables.  By default, git2rdata optimizes the data for file storage.
    The optimization is most effective on data containing factors.  The
    optimization makes the data less human readable.  The user can turn
    this off when they prefer a human readable format over smaller files.
    Details on the implementation are available in vignette("plain_text",
    package = "git2rdata").  2) Storing metadata also allows smaller row
    based diffs between two consecutive commits.  This is a useful feature
    when storing data as plain text files under version control.  Details
    on this part of the implementation are available in
    vignette("version_control", package = "git2rdata").  Although we
    envisioned git2rdata with a git workflow in mind, you can use it in
    combination with other version control systems like subversion or
    mercurial.  3) git2rdata is a useful tool in a reproducible and
    traceable workflow.  vignette("workflow", package = "git2rdata") gives
    a toy example.  4) vignette("efficiency", package = "git2rdata")
    provides some insight into the efficiency of file storage, git
    repository size and speed for writing and reading.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ropensci.github.io/git2rdata/">https://ropensci.github.io/git2rdata/</a>,
<a href="https://github.com/ropensci/git2rdata/">https://github.com/ropensci/git2rdata/</a>,
<a href="https://doi.org/10.5281/zenodo.1485309">https://doi.org/10.5281/zenodo.1485309</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/git2rdata/issues">https://github.com/ropensci/git2rdata/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, git2r (&ge; 0.23.0), methods, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, jsonlite, knitr, microbenchmark, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/checklist/communities:</td>
<td>inbo</td>
</tr>
<tr>
<td>Config/checklist/keywords:</td>
<td>git; version control; plain text data</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Collate:</td>
<td>'clean_data_path.R' 'data_package.R' 'datahash.R'
'display_metadata.R' 'git2rdata_package.R' 'write_vc.R'
'is_git2rdata.R' 'is_git2rmeta.R' 'list_data.R' 'meta.R'
'print.R' 'prune.R' 'read_vc.R' 'recent_commit.R' 'reexport.R'
'relabel.R' 'rename_variable.R' 'update_metadata.R'
'upgrade_data.R' 'utils.R' 'verify_vc.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-24 16:18:33 UTC; root</td>
</tr>
<tr>
<td>Author:</td>
<td>Thierry Onkelinx <a href="https://orcid.org/0000-0001-8804-4216"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Floris Vanderhaeghe
    <a href="https://orcid.org/0000-0002-6378-6229"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]
    (affiliation: Research Institute for Nature and Forest (INBO)),
  Peter Desmet <a href="https://orcid.org/0000-0002-8442-8025"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Els Lommelen <a href="https://orcid.org/0000-0002-3481-5684"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Research Institute for Nature and Forest (INBO) [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thierry Onkelinx &lt;thierry.onkelinx@inbo.be&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-24 16:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='git2rdata-package'>git2rdata: Store and Retrieve Data.frames in a Git Repository</h2><span id='topic+git2rdata'></span><span id='topic+git2rdata-package'></span>

<h3>Description</h3>

<p>The git2rdata package is an R package for writing and reading dataframes as plain text files. A metadata file stores important information. 1) Storing metadata allows to maintain the classes of variables. By default, git2rdata optimizes the data for file storage. The optimization is most effective on data containing factors. The optimization makes the data less human readable. The user can turn this off when they prefer a human readable format over smaller files. Details on the implementation are available in vignette(&quot;plain_text&quot;, package = &quot;git2rdata&quot;). 2) Storing metadata also allows smaller row based diffs between two consecutive commits. This is a useful feature when storing data as plain text files under version control. Details on this part of the implementation are available in vignette(&quot;version_control&quot;, package = &quot;git2rdata&quot;). Although we envisioned git2rdata with a git workflow in mind, you can use it in combination with other version control systems like subversion or mercurial. 3) git2rdata is a useful tool in a reproducible and traceable workflow. vignette(&quot;workflow&quot;, package = &quot;git2rdata&quot;) gives a toy example. 4) vignette(&quot;efficiency&quot;, package = &quot;git2rdata&quot;) provides some insight into the efficiency of file storage, git repository size and speed for writing and reading.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Thierry Onkelinx <a href="mailto:thierry.onkelinx@inbo.be">thierry.onkelinx@inbo.be</a> (<a href="https://orcid.org/0000-0001-8804-4216">ORCID</a>) (Research Institute for Nature and Forest (INBO))
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Floris Vanderhaeghe <a href="mailto:floris.vanderhaeghe@inbo.be">floris.vanderhaeghe@inbo.be</a> (<a href="https://orcid.org/0000-0002-6378-6229">ORCID</a>) (Research Institute for Nature and Forest (INBO)) [contributor]
</p>
</li>
<li><p> Peter Desmet <a href="mailto:peter.desmet@inbo.be">peter.desmet@inbo.be</a> (<a href="https://orcid.org/0000-0002-8442-8025">ORCID</a>) (Research Institute for Nature and Forest (INBO)) [contributor]
</p>
</li>
<li><p> Els Lommelen <a href="mailto:els.lommelen@inbo.be">els.lommelen@inbo.be</a> (<a href="https://orcid.org/0000-0002-3481-5684">ORCID</a>) (Research Institute for Nature and Forest (INBO)) [contributor]
</p>
</li>
<li><p> Research Institute for Nature and Forest (INBO) <a href="mailto:info@inbo.be">info@inbo.be</a> [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ropensci.github.io/git2rdata/">https://ropensci.github.io/git2rdata/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/git2rdata/">https://github.com/ropensci/git2rdata/</a>
</p>
</li>
<li> <p><a href="https://doi.org/10.5281/zenodo.1485309">doi:10.5281/zenodo.1485309</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/git2rdata/issues">https://github.com/ropensci/git2rdata/issues</a>
</p>
</li></ul>


<hr>
<h2 id='commit'>Re-exported Function From <code>git2r</code></h2><span id='topic+commit'></span>

<h3>Description</h3>

<p>See <code><a href="git2r.html#topic+commit">commit</a></code> in <code>git2r</code>.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+pull">pull</a>()</code>,
<code><a href="#topic+push">push</a>()</code>,
<code><a href="#topic+recent_commit">recent_commit</a>()</code>,
<code><a href="#topic+repository">repository</a>()</code>,
<code><a href="#topic+status">status</a>()</code>
</p>

<hr>
<h2 id='data_package'>Create a Data Package for a directory of CSV files</h2><span id='topic+data_package'></span>

<h3>Description</h3>

<p>Create a <code>datapackage.json</code> file for a directory of CSV files.
The function will look for all <code>.csv</code> files in the directory and its
subdirectories.
It will then create a <code>datapackage.json</code> file with the metadata of each CSV
file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_package(path = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_package_+3A_path">path</code></td>
<td>
<p>the directory in which to create the <code>datapackage.json</code> file.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>

<hr>
<h2 id='display_metadata'>Display metadata for a <code>git2rdata</code> object</h2><span id='topic+display_metadata'></span>

<h3>Description</h3>

<p>Display metadata for a <code>git2rdata</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>display_metadata(x, minimal = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="display_metadata_+3A_x">x</code></td>
<td>
<p>a <code>git2rdata</code> object</p>
</td></tr>
<tr><td><code id="display_metadata_+3A_minimal">minimal</code></td>
<td>
<p>logical, if <code>TRUE</code> only a message is displayed</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>

<hr>
<h2 id='is_git2rdata'>Check Whether a Git2rdata Object is Valid.</h2><span id='topic+is_git2rdata'></span>

<h3>Description</h3>

<p>A valid git2rdata object has valid metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_git2rdata(file, root = ".", message = c("none", "warning", "error"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_git2rdata_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="is_git2rdata_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="is_git2rdata_+3A_message">message</code></td>
<td>
<p>a single value indicating the type of messages on top of the
logical value. <code>"none"</code>: no messages, <code>"warning"</code>: issue a warning in case of
an invalid metadata file. <code>"error"</code>: an invalid metadata file results in an
error. Defaults to <code>"none"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value. <code>TRUE</code> in case of a valid git2rdata object.
Otherwise <code>FALSE</code>.
</p>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rmeta">is_git2rmeta</a>()</code>,
<code><a href="#topic+meta">meta</a>()</code>,
<code><a href="#topic+print.git2rdata">print.git2rdata</a>()</code>,
<code><a href="#topic+summary.git2rdata">summary.git2rdata</a>()</code>,
<code><a href="#topic+upgrade_data">upgrade_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# store a file
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
# check the stored file
is_git2rmeta("iris", root)
is_git2rdata("iris", root)

# Remove the metadata from the existing git2rdata object. Then it stops
# being a git2rdata object.
junk &lt;- file.remove(file.path(root, "iris.yml"))
is_git2rmeta("iris", root)
is_git2rdata("iris", root)

# recreate the file and remove the data and keep the metadata. It stops being
# a git2rdata object, but the metadata remains valid.
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
junk &lt;- file.remove(file.path(root, "iris.tsv"))
is_git2rmeta("iris", root)
is_git2rdata("iris", root)
</code></pre>

<hr>
<h2 id='is_git2rmeta'>Check Whether a Git2rdata Object Has Valid Metadata.</h2><span id='topic+is_git2rmeta'></span>

<h3>Description</h3>

<p>Valid metadata is a file with <code>.yml</code> extension. It has a top level item
<code>..generic</code>. This item contains <code>git2rdata</code> (the version number), <code>hash</code> (a
hash on the metadata) and <code>data_hash</code> (a hash on the data file). The version
number must be the current version.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_git2rmeta(file, root = ".", message = c("none", "warning", "error"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_git2rmeta_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="is_git2rmeta_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="is_git2rmeta_+3A_message">message</code></td>
<td>
<p>a single value indicating the type of messages on top of the
logical value. <code>"none"</code>: no messages, <code>"warning"</code>: issue a warning in case of
an invalid metadata file. <code>"error"</code>: an invalid metadata file results in an
error. Defaults to <code>"none"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value. <code>TRUE</code> in case of a valid metadata file. Otherwise
<code>FALSE</code>.
</p>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rdata">is_git2rdata</a>()</code>,
<code><a href="#topic+meta">meta</a>()</code>,
<code><a href="#topic+print.git2rdata">print.git2rdata</a>()</code>,
<code><a href="#topic+summary.git2rdata">summary.git2rdata</a>()</code>,
<code><a href="#topic+upgrade_data">upgrade_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# store a file
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
# check the stored file
is_git2rmeta("iris", root)
is_git2rdata("iris", root)

# Remove the metadata from the existing git2rdata object. Then it stops
# being a git2rdata object.
junk &lt;- file.remove(file.path(root, "iris.yml"))
is_git2rmeta("iris", root)
is_git2rdata("iris", root)

# recreate the file and remove the data and keep the metadata. It stops being
# a git2rdata object, but the metadata remains valid.
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
junk &lt;- file.remove(file.path(root, "iris.tsv"))
is_git2rmeta("iris", root)
is_git2rdata("iris", root)
</code></pre>

<hr>
<h2 id='list_data'>List Available Git2rdata Files Containing Data</h2><span id='topic+list_data'></span>

<h3>Description</h3>

<p>The function returns the names of all valid git2rdata objects. This implies
<code>.tsv</code> files with a matching <strong>valid</strong> metadata file (<code>.yml</code>). <strong>Invalid</strong>
metadata files result in a warning. The function ignores <strong>valid</strong> metadata
files without matching raw data (<code>.tsv</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_data(root = ".", path = ".", recursive = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_data_+3A_root">root</code></td>
<td>
<p>the <code>root</code> of the repository. Either a path or a <code>git-repository</code></p>
</td></tr>
<tr><td><code id="list_data_+3A_path">path</code></td>
<td>
<p>relative <code>path</code> from the <code>root</code>. Defaults to the <code>root</code></p>
</td></tr>
<tr><td><code id="list_data_+3A_recursive">recursive</code></td>
<td>
<p>logical.  Should the listing recurse into directories?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of git2rdata object names, including their
relative path.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## on file system

# create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# store a dataframe as git2rdata object. Capture the result to minimise
# screen output
junk &lt;- write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
# write a standard tab separate file (non git2rdata object)
write.table(iris, file = file.path(root, "standard.tsv"), sep = "\t")
# write a YAML file
yml &lt;- list(
  authors = list(
   "Research Institute for Nature and Forest" = list(
       href = "https://www.inbo.be/en")))
yaml::write_yaml(yml, file = file.path(root, "_pkgdown.yml"))

# list the git2rdata objects
list_data(root)
# list the files
list.files(root, recursive = TRUE)

# remove all .tsv files from valid git2rdata objects
rm_data(root, path = ".")
# check the removal of the .tsv file
list.files(root, recursive = TRUE)
list_data(root)

# remove dangling git2rdata metadata files
prune_meta(root, path = ".")
# check the removal of the metadata
list.files(root, recursive = TRUE)
list_data(root)


## on git repo

# initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# store a dataframe
write_vc(iris[1:6, ], "iris", repo, sorting = "Sepal.Length", stage = TRUE)
# check that the dataframe is stored
status(repo)
list_data(repo)

# commit the current version and check the git repo
commit(repo, "add iris data", session = TRUE)
status(repo)

# remove the data files from the repo
rm_data(repo, path = ".")
# check the removal
list_data(repo)
status(repo)

# remove dangling metadata
prune_meta(repo, path = ".")
# check the removal
list_data(repo)
status(repo)
</code></pre>

<hr>
<h2 id='meta'>Optimize an Object for Storage as Plain Text and Add Metadata</h2><span id='topic+meta'></span><span id='topic+meta.character'></span><span id='topic+meta.factor'></span><span id='topic+meta.logical'></span><span id='topic+meta.POSIXct'></span><span id='topic+meta.Date'></span><span id='topic+meta.data.frame'></span>

<h3>Description</h3>

<p>Prepares a vector for storage. When relevant, <code>meta()</code> optimizes the object
for storage by changing the format to one which needs less characters. The
metadata stored in the <code>meta</code> attribute, contains all required information to
back-transform the optimized format into the original format.
</p>
<p>In case of a data.frame, <code>meta()</code> applies itself to each of the columns. The
<code>meta</code> attribute becomes a named list containing the metadata for each column
plus an additional <code>..generic</code> element. <code>..generic</code> is a reserved name for
the metadata and not allowed as column name in a <code>data.frame</code>.
</p>
<p><code>write_vc()</code> uses this function to prepare a dataframe for storage.
Existing metadata is passed through the optional <code>old</code> argument. This
argument intended for internal use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meta(x, ..., digits)

## S3 method for class 'character'
meta(x, na = "NA", optimize = TRUE, ...)

## S3 method for class 'factor'
meta(x, optimize = TRUE, na = "NA", index, strict = TRUE, ...)

## S3 method for class 'logical'
meta(x, optimize = TRUE, ...)

## S3 method for class 'POSIXct'
meta(x, optimize = TRUE, ...)

## S3 method for class 'Date'
meta(x, optimize = TRUE, ...)

## S3 method for class 'data.frame'
meta(
  x,
  optimize = TRUE,
  na = "NA",
  sorting,
  strict = TRUE,
  split_by = character(0),
  ...,
  digits
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="meta_+3A_x">x</code></td>
<td>
<p>the vector.</p>
</td></tr>
<tr><td><code id="meta_+3A_...">...</code></td>
<td>
<p>further arguments to the methods.</p>
</td></tr>
<tr><td><code id="meta_+3A_digits">digits</code></td>
<td>
<p>The number of significant digits of the smallest absolute
value.
The function applies the rounding automatically.
Only relevant for numeric variables.
Either a single positive integer or a named vector where the names link to
the variables in the <code>data.frame</code>.
Defaults to <code>6</code> with a warning.</p>
</td></tr>
<tr><td><code id="meta_+3A_na">na</code></td>
<td>
<p>the string to use for missing values in the data.</p>
</td></tr>
<tr><td><code id="meta_+3A_optimize">optimize</code></td>
<td>
<p>If <code>TRUE</code>, recode the data to get smaller text files.
If <code>FALSE</code>, <code>meta()</code> converts the data to character.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="meta_+3A_index">index</code></td>
<td>
<p>An optional named vector with existing factor indices.
The names must match the existing factor levels.
Unmatched levels from <code>x</code> will get new indices.</p>
</td></tr>
<tr><td><code id="meta_+3A_strict">strict</code></td>
<td>
<p>What to do when the metadata changes. <code>strict = FALSE</code>
overwrites the data and the metadata with a warning listing the changes,
<code>strict = TRUE</code> returns an error and leaves the data and metadata as is.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="meta_+3A_sorting">sorting</code></td>
<td>
<p>an optional vector of column names defining which columns to
use for sorting <code>x</code> and in what order to use them.
The default empty <code>sorting</code> yields a warning.
Add <code>sorting</code> to avoid this warning.
Strongly recommended in combination with version control.
See <code>vignette("efficiency", package = "git2rdata")</code> for an illustration of
the importance of sorting.</p>
</td></tr>
<tr><td><code id="meta_+3A_split_by">split_by</code></td>
<td>
<p>An optional vector of variables name to split the text files.
This creates a separate file for every combination.
We prepend these variables to the vector of <code>sorting</code> variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the optimized vector <code>x</code> with <code>meta</code> attribute.
</p>


<h3>Note</h3>

<p>The default order of factor levels depends on the current locale.
See <code><a href="base.html#topic+Comparison">Comparison</a></code> for more details on that.
The same code on a different locale might result in a different sorting.
<code>meta()</code> ignores, with a warning, any change in the order of factor levels.
Add <code>strict = FALSE</code> to enforce the new order of factor levels.
</p>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rdata">is_git2rdata</a>()</code>,
<code><a href="#topic+is_git2rmeta">is_git2rmeta</a>()</code>,
<code><a href="#topic+print.git2rdata">print.git2rdata</a>()</code>,
<code><a href="#topic+summary.git2rdata">summary.git2rdata</a>()</code>,
<code><a href="#topic+upgrade_data">upgrade_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>meta(c(NA, "'NA'", '"NA"', "abc\tdef", "abc\ndef"))
meta(1:3)
meta(seq(1, 3, length = 4), digits = 6)
meta(factor(c("b", NA, "NA"), levels = c("NA", "b", "c")))
meta(factor(c("b", NA, "a"), levels = c("a", "b", "c")), optimize = FALSE)
meta(factor(c("b", NA, "a"), levels = c("a", "b", "c"), ordered = TRUE))
meta(
  factor(c("b", NA, "a"), levels = c("a", "b", "c"), ordered = TRUE),
  optimize = FALSE
)
meta(c(FALSE, NA, TRUE))
meta(c(FALSE, NA, TRUE), optimize = FALSE)
meta(complex(real = c(1, NA, 2), imaginary = c(3, NA, -1)))
meta(as.POSIXct("2019-02-01 10:59:59", tz = "CET"))
meta(as.POSIXct("2019-02-01 10:59:59", tz = "CET"), optimize = FALSE)
meta(as.Date("2019-02-01"))
meta(as.Date("2019-02-01"), optimize = FALSE)
</code></pre>

<hr>
<h2 id='print.git2rdata'>Print method for <code>git2rdata</code> objects.</h2><span id='topic+print.git2rdata'></span>

<h3>Description</h3>

<p>Prints the data and the description of the columns when available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'git2rdata'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.git2rdata_+3A_x">x</code></td>
<td>
<p>a <code>git2rdata</code> object</p>
</td></tr>
<tr><td><code id="print.git2rdata_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>print</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rdata">is_git2rdata</a>()</code>,
<code><a href="#topic+is_git2rmeta">is_git2rmeta</a>()</code>,
<code><a href="#topic+meta">meta</a>()</code>,
<code><a href="#topic+summary.git2rdata">summary.git2rdata</a>()</code>,
<code><a href="#topic+upgrade_data">upgrade_data</a>()</code>
</p>

<hr>
<h2 id='prune_meta'>Prune Metadata Files</h2><span id='topic+prune_meta'></span><span id='topic+prune_meta.git_repository'></span>

<h3>Description</h3>

<p>Removes all <strong>valid</strong> metadata (<code>.yml</code> files) from the <code>path</code> when they don't
have accompanying data (<code>.tsv</code> file). <strong>Invalid</strong> metadata triggers a warning
without removing the metadata file.
</p>
<p>Use this function with caution since it will remove all valid metadata files
without asking for confirmation. We strongly recommend to use this
function on files under version control. See
<code>vignette("workflow", package = "git2rdata")</code> for some examples on how to use
this.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prune_meta(root = ".", path = NULL, recursive = TRUE, ...)

## S3 method for class 'git_repository'
prune_meta(root, path = NULL, recursive = TRUE, ..., stage = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prune_meta_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="prune_meta_+3A_path">path</code></td>
<td>
<p>the directory in which to clean all the data files. The directory
is relative to <code>root</code>.</p>
</td></tr>
<tr><td><code id="prune_meta_+3A_recursive">recursive</code></td>
<td>
<p>remove files in subdirectories too.</p>
</td></tr>
<tr><td><code id="prune_meta_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
<tr><td><code id="prune_meta_+3A_stage">stage</code></td>
<td>
<p>stage the changes after removing the files. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns invisibly a vector of removed files names. The paths are
relative to <code>root</code>.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## on file system

# create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# store a dataframe as git2rdata object. Capture the result to minimise
# screen output
junk &lt;- write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
# write a standard tab separate file (non git2rdata object)
write.table(iris, file = file.path(root, "standard.tsv"), sep = "\t")
# write a YAML file
yml &lt;- list(
  authors = list(
   "Research Institute for Nature and Forest" = list(
       href = "https://www.inbo.be/en")))
yaml::write_yaml(yml, file = file.path(root, "_pkgdown.yml"))

# list the git2rdata objects
list_data(root)
# list the files
list.files(root, recursive = TRUE)

# remove all .tsv files from valid git2rdata objects
rm_data(root, path = ".")
# check the removal of the .tsv file
list.files(root, recursive = TRUE)
list_data(root)

# remove dangling git2rdata metadata files
prune_meta(root, path = ".")
# check the removal of the metadata
list.files(root, recursive = TRUE)
list_data(root)


## on git repo

# initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# store a dataframe
write_vc(iris[1:6, ], "iris", repo, sorting = "Sepal.Length", stage = TRUE)
# check that the dataframe is stored
status(repo)
list_data(repo)

# commit the current version and check the git repo
commit(repo, "add iris data", session = TRUE)
status(repo)

# remove the data files from the repo
rm_data(repo, path = ".")
# check the removal
list_data(repo)
status(repo)

# remove dangling metadata
prune_meta(repo, path = ".")
# check the removal
list_data(repo)
status(repo)
</code></pre>

<hr>
<h2 id='pull'>Re-exported Function From <code>git2r</code></h2><span id='topic+pull'></span>

<h3>Description</h3>

<p>See <code><a href="git2r.html#topic+pull">pull</a></code> in <code>git2r</code>.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+commit">commit</a>()</code>,
<code><a href="#topic+push">push</a>()</code>,
<code><a href="#topic+recent_commit">recent_commit</a>()</code>,
<code><a href="#topic+repository">repository</a>()</code>,
<code><a href="#topic+status">status</a>()</code>
</p>

<hr>
<h2 id='push'>Re-exported Function From <code>git2r</code></h2><span id='topic+push'></span>

<h3>Description</h3>

<p>See <code><a href="git2r.html#topic+push">push</a></code> in  <code>git2r</code>.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+commit">commit</a>()</code>,
<code><a href="#topic+pull">pull</a>()</code>,
<code><a href="#topic+recent_commit">recent_commit</a>()</code>,
<code><a href="#topic+repository">repository</a>()</code>,
<code><a href="#topic+status">status</a>()</code>
</p>

<hr>
<h2 id='read_vc'>Read a Git2rdata Object from Disk</h2><span id='topic+read_vc'></span>

<h3>Description</h3>

<p><code>read_vc()</code> handles git2rdata objects stored by <code>write_vc()</code>. It reads and
verifies the metadata file (<code>.yml</code>). Then it reads and verifies the raw data.
The last step is back-transforming any transformation done by <code>meta()</code> to
return the <code>data.frame</code> as stored by <code>write_vc()</code>.
</p>
<p><code>read_vc()</code> is an S3 generic on <code>root</code> which currently handles <code>"character"</code>
(a path) and <code>"git-repository"</code> (from <code>git2r</code>). S3 methods for other version
control system could be added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_vc(file, root = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_vc_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="read_vc_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>data.frame</code> with the file names and hashes as attributes.
It has the additional class <code>"git2rdata"</code> to support extra methods to
display the descriptions.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## on file system

# create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# write a dataframe to the directory
write_vc(
  iris[1:6, ], file = "iris", root = root, sorting = "Sepal.Length",
  digits = 6
)
# check that a data file (.tsv) and a metadata file (.yml) exist.
list.files(root, recursive = TRUE)
# read the git2rdata object from the directory
read_vc("iris", root)

# store a new version with different observations but the same metadata
write_vc(iris[1:5, ], "iris", root)
list.files(root, recursive = TRUE)
# Removing a column requires version requires new metadata.
# Add strict = FALSE to override the existing metadata.
write_vc(
  iris[1:6, -2], "iris", root, sorting = "Sepal.Length", strict = FALSE
)
list.files(root, recursive = TRUE)
# storing the orignal version again requires another update of the metadata
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Width", strict = FALSE)
list.files(root, recursive = TRUE)
# optimize = FALSE stores the data more verbose. This requires larger files.
write_vc(
  iris[1:6, ], "iris2", root, sorting = "Sepal.Width", optimize = FALSE
)
list.files(root, recursive = TRUE)



## on git repo using a git2r::git-repository

# initialise a git repo using the git2r package
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# store a dataframe in git repo.
write_vc(iris[1:6, ], file = "iris", root = repo, sorting = "Sepal.Length")
# This git2rdata object is not staged by default.
status(repo)
# read a dataframe from a git repo
read_vc("iris", repo)

# store a new version in the git repo and stage it in one go
write_vc(iris[1:5, ], "iris", repo, stage = TRUE)
status(repo)

# store a verbose version in a different gir2data object
write_vc(
  iris[1:6, ], "iris2", repo, sorting = "Sepal.Width", optimize = FALSE
)
status(repo)
</code></pre>

<hr>
<h2 id='recent_commit'>Retrieve the Most Recent File Change</h2><span id='topic+recent_commit'></span>

<h3>Description</h3>

<p>Retrieve the most recent commit that added or updated a file or git2rdata
object. This does not imply that file still exists at the current HEAD as it
ignores the deletion of files.
</p>
<p>Use this information to document the current version of file or git2rdata
object in an analysis. Since it refers to the most recent change of this
file, it remains unchanged by committing changes to other files. You can
also use it to track if data got updated, requiring an analysis to
be rerun. See <code>vignette("workflow", package = "git2rdata")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recent_commit(file, root, data = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recent_commit_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="recent_commit_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.</p>
</td></tr>
<tr><td><code id="recent_commit_+3A_data">data</code></td>
<td>
<p>does <code>file</code> refers to a data object (<code>TRUE</code>) or to a file
(<code>FALSE</code>)?
Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> with <code>commit</code>, <code>author</code> and <code>when</code> for the most recent
commit that adds op updates the file.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+commit">commit</a>()</code>,
<code><a href="#topic+pull">pull</a>()</code>,
<code><a href="#topic+push">push</a>()</code>,
<code><a href="#topic+repository">repository</a>()</code>,
<code><a href="#topic+status">status</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# write and commit a first dataframe
# store the output of write_vc() minimize screen output
junk &lt;- write_vc(
  iris[1:6, ], "iris", repo, sorting = "Sepal.Length", stage = TRUE,
  digits = 6
)
commit(repo, "important analysis", session = TRUE)
list.files(repo_path)
Sys.sleep(1.1) # required because git doesn't handle subsecond timings

# write and commit a second dataframe
junk &lt;- write_vc(
  iris[7:12, ], "iris2", repo, sorting = "Sepal.Length", stage = TRUE,
  digits = 6
)
commit(repo, "important analysis", session = TRUE)
list.files(repo_path)
Sys.sleep(1.1) # required because git doesn't handle subsecond timings

# write and commit a new version of the first dataframe
junk &lt;- write_vc(iris[7:12, ], "iris", repo, stage = TRUE)
list.files(repo_path)
commit(repo, "important analysis", session = TRUE)



# find out in which commit a file was last changed

# "iris.tsv" was last updated in the third commit
recent_commit("iris.tsv", repo)
# "iris.yml" was last updated in the first commit
recent_commit("iris.yml", repo)
# "iris2.yml" was last updated in the second commit
recent_commit("iris2.yml", repo)
# the git2rdata object "iris" was last updated in the third commit
recent_commit("iris", repo, data = TRUE)

# remove a dataframe and commit it to see what happens with deleted files
file.remove(file.path(repo_path, "iris.tsv"))
prune_meta(repo, ".")
commit(repo, message = "remove iris", all = TRUE, session = TRUE)
list.files(repo_path)

# still points to the third commit as this is the latest commit in which the
# data was present
recent_commit("iris", repo, data = TRUE)
</code></pre>

<hr>
<h2 id='relabel'>Relabel Factor Levels by Updating the Metadata</h2><span id='topic+relabel'></span>

<h3>Description</h3>

<p>Imagine the situation where we have a dataframe with a factor variable and we
have stored it with <code>write_vc(optimize = TRUE)</code>. The raw data file contains
the factor indices and the metadata contains the link between the factor
index and the corresponding label. See
<code>vignette("version_control", package = "git2rdata")</code>. In such a case,
relabelling a factor can be fast and lightweight by updating the metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relabel(file, root = ".", change)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="relabel_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="relabel_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="relabel_+3A_change">change</code></td>
<td>
<p>either a <code>list</code> or a <code>data.frame</code>. In case of a <code>list</code> is a
named <code>list</code> with named <code>vectors</code>. The names of list elements must match the
names of the variables. The names of the vector elements must match the
existing factor labels. The values represent the new factor labels. In case
of a <code>data.frame</code> it needs to have the variables <code>factor</code> (name of the
factor), <code>old</code> (the old) factor label and <code>new</code> (the new factor label).
<code>relabel()</code> ignores all other columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible <code>NULL</code>.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# Create a dataframe and store it as an optimized git2rdata object.
# Note that write_vc() uses optimization by default.
# Stage and commit the git2rdata object.
ds &lt;- data.frame(
  a = c("a1", "a2"),
  b = c("b2", "b1"),
  stringsAsFactors = TRUE
)
junk &lt;- write_vc(ds, "relabel", repo, sorting = "b", stage = TRUE)
cm &lt;- commit(repo, "initial commit")
# check that the workspace is clean
status(repo)

# Define new labels as a list and apply them to the git2rdata object.
new_labels &lt;- list(
  a = list(a2 = "a3")
)
relabel("relabel", repo, new_labels)
# check the changes
read_vc("relabel", repo)
# relabel() changed the metadata, not the raw data
status(repo)
git2r::add(repo, "relabel.*")
cm &lt;- commit(repo, "relabel using a list")

# Define new labels as a dataframe and apply them to the git2rdata object
change &lt;- data.frame(
  factor = c("a", "a", "b"),
  old = c("a3", "a1", "b2"),
  new = c("c2", "c1", "b3"),
  stringsAsFactors = TRUE
)
relabel("relabel", repo, change)
# check the changes
read_vc("relabel", repo)
# relabel() changed the metadata, not the raw data
status(repo)
</code></pre>

<hr>
<h2 id='rename_variable'>Rename a Variable</h2><span id='topic+rename_variable'></span><span id='topic+rename_variable.character'></span><span id='topic+rename_variable.default'></span><span id='topic+rename_variable.git_repository'></span>

<h3>Description</h3>

<p>The raw data file contains a header with the variable names.
The metadata list the variable names and their type.
Changing a variable name and overwriting the <code>git2rdata</code> object with result
in an error.
Because it will look like removing an existing variable and adding a new one.
Overwriting the object with <code>strict = FALSE</code> potentially changes the order of
the variables, leading to a large diff.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename_variable(file, change, root = ".", ...)

## S3 method for class 'character'
rename_variable(file, change, root = ".", ...)

## Default S3 method:
rename_variable(file, change, root, ...)

## S3 method for class 'git_repository'
rename_variable(file, change, root, ..., stage = FALSE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rename_variable_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="rename_variable_+3A_change">change</code></td>
<td>
<p>A named vector with the old names as values and the new names
as names.</p>
</td></tr>
<tr><td><code id="rename_variable_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="rename_variable_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
<tr><td><code id="rename_variable_+3A_stage">stage</code></td>
<td>
<p>Logical value indicating whether to stage the changes after
writing the data. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rename_variable_+3A_force">force</code></td>
<td>
<p>Add ignored files. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function solves this by only updating the raw data header and the
metadata.
</p>


<h3>Value</h3>

<p>invisible <code>NULL</code>.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# Create a dataframe and store it as an optimized git2rdata object.
# Note that write_vc() uses optimization by default.
# Stage and commit the git2rdata object.
ds &lt;- data.frame(
  a = c("a1", "a2"),
  b = c("b2", "b1"),
  stringsAsFactors = TRUE
)
junk &lt;- write_vc(ds, "rename", repo, sorting = "b", stage = TRUE)
cm &lt;- commit(repo, "initial commit")
# check that the workspace is clean
status(repo)

# Define change.
change &lt;- c(new_name = "a")
rename_variable(file = "rename", change = change, root = repo)
# check the changes
read_vc("rename", repo)
status(repo)
</code></pre>

<hr>
<h2 id='repository'>Re-exported Function From <code>git2r</code></h2><span id='topic+repository'></span>

<h3>Description</h3>

<p>See <code><a href="git2r.html#topic+repository">repository</a></code> in <code>git2r</code>.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+commit">commit</a>()</code>,
<code><a href="#topic+pull">pull</a>()</code>,
<code><a href="#topic+push">push</a>()</code>,
<code><a href="#topic+recent_commit">recent_commit</a>()</code>,
<code><a href="#topic+status">status</a>()</code>
</p>

<hr>
<h2 id='rm_data'>Remove Data Files From Git2rdata Objects</h2><span id='topic+rm_data'></span><span id='topic+rm_data.git_repository'></span>

<h3>Description</h3>

<p>Remove the data (<code>.tsv</code>) file from all valid git2rdata objects at the <code>path</code>.
The metadata remains untouched. A warning lists any git2rdata object with
<strong>invalid</strong> metadata. The function keeps any <code>.tsv</code> file with
invalid metadata or from non-git2rdata objects.
</p>
<p>Use this function with caution since it will remove all valid data files
without asking for confirmation. We strongly recommend to use this
function on files under version control. See
<code>vignette("workflow", package = "git2rdata")</code> for some examples on how to use
this.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_data(root = ".", path = NULL, recursive = TRUE, ...)

## S3 method for class 'git_repository'
rm_data(
  root,
  path = NULL,
  recursive = TRUE,
  ...,
  stage = FALSE,
  type = c("unmodified", "modified", "ignored", "all")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rm_data_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="rm_data_+3A_path">path</code></td>
<td>
<p>the directory in which to clean all the data files. The directory
is relative to <code>root</code>.</p>
</td></tr>
<tr><td><code id="rm_data_+3A_recursive">recursive</code></td>
<td>
<p>remove files in subdirectories too.</p>
</td></tr>
<tr><td><code id="rm_data_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
<tr><td><code id="rm_data_+3A_stage">stage</code></td>
<td>
<p>stage the changes after removing the files. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="rm_data_+3A_type">type</code></td>
<td>
<p>Defines the classes of files to remove. <code>unmodified</code> are files in
the git history and unchanged since the last commit. <code>modified</code> are files in
the git history and changed since the last commit. <code>ignored</code> refers to file
listed in a <code>.gitignore</code> file. Selecting <code>modified</code> will remove both
<code>unmodified</code> and <code>modified</code> data files. Selecting <code>gnored</code> will remove
<code>unmodified</code>, <code>modified</code> and <code>ignored</code> data files. <code>all</code> refers to all
visible data files, including <code>untracked</code> files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns invisibly a vector of removed files names. The paths are
relative to <code>root</code>.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## on file system

# create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# store a dataframe as git2rdata object. Capture the result to minimise
# screen output
junk &lt;- write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Length")
# write a standard tab separate file (non git2rdata object)
write.table(iris, file = file.path(root, "standard.tsv"), sep = "\t")
# write a YAML file
yml &lt;- list(
  authors = list(
   "Research Institute for Nature and Forest" = list(
       href = "https://www.inbo.be/en")))
yaml::write_yaml(yml, file = file.path(root, "_pkgdown.yml"))

# list the git2rdata objects
list_data(root)
# list the files
list.files(root, recursive = TRUE)

# remove all .tsv files from valid git2rdata objects
rm_data(root, path = ".")
# check the removal of the .tsv file
list.files(root, recursive = TRUE)
list_data(root)

# remove dangling git2rdata metadata files
prune_meta(root, path = ".")
# check the removal of the metadata
list.files(root, recursive = TRUE)
list_data(root)


## on git repo

# initialise a git repo using git2r
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# store a dataframe
write_vc(iris[1:6, ], "iris", repo, sorting = "Sepal.Length", stage = TRUE)
# check that the dataframe is stored
status(repo)
list_data(repo)

# commit the current version and check the git repo
commit(repo, "add iris data", session = TRUE)
status(repo)

# remove the data files from the repo
rm_data(repo, path = ".")
# check the removal
list_data(repo)
status(repo)

# remove dangling metadata
prune_meta(repo, path = ".")
# check the removal
list_data(repo)
status(repo)
</code></pre>

<hr>
<h2 id='status'>Re-exported Function From <code>git2r</code></h2><span id='topic+status'></span>

<h3>Description</h3>

<p>See <code><a href="git2r.html#topic+status">status</a></code> in <code>git2r</code>.
</p>


<h3>See Also</h3>

<p>Other version_control: 
<code><a href="#topic+commit">commit</a>()</code>,
<code><a href="#topic+pull">pull</a>()</code>,
<code><a href="#topic+push">push</a>()</code>,
<code><a href="#topic+recent_commit">recent_commit</a>()</code>,
<code><a href="#topic+repository">repository</a>()</code>
</p>

<hr>
<h2 id='summary.git2rdata'>Summary method for <code>git2rdata</code> objects.</h2><span id='topic+summary.git2rdata'></span>

<h3>Description</h3>

<p>Prints the summary of the data and the description of the columns when
available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'git2rdata'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.git2rdata_+3A_object">object</code></td>
<td>
<p>a <code>git2rdata</code> object</p>
</td></tr>
<tr><td><code id="summary.git2rdata_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>summary</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rdata">is_git2rdata</a>()</code>,
<code><a href="#topic+is_git2rmeta">is_git2rmeta</a>()</code>,
<code><a href="#topic+meta">meta</a>()</code>,
<code><a href="#topic+print.git2rdata">print.git2rdata</a>()</code>,
<code><a href="#topic+upgrade_data">upgrade_data</a>()</code>
</p>

<hr>
<h2 id='update_metadata'>Update the description of a <code>git2rdata</code> object</h2><span id='topic+update_metadata'></span>

<h3>Description</h3>

<p>Allows to update the description of the fields, the table name, the title,
and the description of a <code>git2rdata</code> object.
All arguments are optional.
Setting an argument to <code>NA</code> or an empty string will remove the corresponding
field from the metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_metadata(
  file,
  root = ".",
  field_description,
  name,
  title,
  description,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_metadata_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_field_description">field_description</code></td>
<td>
<p>a named character vector with the new descriptions
for the fields.
The names of the vector must match the variable names.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_name">name</code></td>
<td>
<p>a character string with the new table name of the object.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_title">title</code></td>
<td>
<p>a character string with the new title of the object.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_description">description</code></td>
<td>
<p>a character string with the new description of the object.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>

<hr>
<h2 id='upgrade_data'>Upgrade Files to the New Version</h2><span id='topic+upgrade_data'></span><span id='topic+upgrade_data.git_repository'></span>

<h3>Description</h3>

<p>Updates the data written by older versions to the current data format
standard. Works both on a single file and (recursively) on a path. The
<code>".yml"</code> file must contain a <code>"..generic"</code> element. <code>upgrade_data()</code> ignores
all other files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upgrade_data(file, root = ".", verbose, ..., path)

## S3 method for class 'git_repository'
upgrade_data(
  file,
  root = ".",
  verbose = TRUE,
  ...,
  path,
  stage = FALSE,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="upgrade_data_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_verbose">verbose</code></td>
<td>
<p>display a message with the update status. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_path">path</code></td>
<td>
<p>specify <code>path</code> instead of <code>file</code> to update all git2rdata objects
in this directory and it's subdirectories. <code>path</code> is relative to <code>root</code>. Use
<code>path = "."</code> to upgrade all git2rdata objects under <code>root</code>.</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_stage">stage</code></td>
<td>
<p>Logical value indicating whether to stage the changes after
writing the data. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="upgrade_data_+3A_force">force</code></td>
<td>
<p>Add ignored files. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the git2rdata object names.
</p>


<h3>See Also</h3>

<p>Other internal: 
<code><a href="#topic+is_git2rdata">is_git2rdata</a>()</code>,
<code><a href="#topic+is_git2rmeta">is_git2rmeta</a>()</code>,
<code><a href="#topic+meta">meta</a>()</code>,
<code><a href="#topic+print.git2rdata">print.git2rdata</a>()</code>,
<code><a href="#topic+summary.git2rdata">summary.git2rdata</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# write dataframes to the root
write_vc(
  iris[1:6, ], file = "iris", root = root, sorting = "Sepal.Length",
  digits = 6
)
write_vc(
  iris[5:10, ], file = "subdir/iris", root = root, sorting = "Sepal.Length",
  digits = 6
)
# upgrade a single git2rdata object
upgrade_data(file = "iris", root = root)
# use path = "." to upgrade all git2rdata objects under root
upgrade_data(path = ".", root = root)
</code></pre>

<hr>
<h2 id='verify_vc'>Read a file an verify the presence of variables</h2><span id='topic+verify_vc'></span>

<h3>Description</h3>

<p>Reads the file with <code><a href="#topic+read_vc">read_vc()</a></code>.
Then verifies that every variable listed in <code>variables</code> is present in the
data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>verify_vc(file, root, variables)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="verify_vc_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="verify_vc_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="verify_vc_+3A_variables">variables</code></td>
<td>
<p>a character vector with variable names.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+write_vc">write_vc</a>()</code>
</p>

<hr>
<h2 id='write_vc'>Store a Data.Frame as a Git2rdata Object on Disk</h2><span id='topic+write_vc'></span><span id='topic+write_vc.character'></span><span id='topic+write_vc.git_repository'></span>

<h3>Description</h3>

<p>A git2rdata object consists of two files.
The <code>".tsv"</code> file contains the raw data as a plain text tab separated file.
The <code>".yml"</code> contains the metadata on the columns in plain text YAML format.
See <code>vignette("plain text", package = "git2rdata")</code> for more details on the
implementation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_vc(
  x,
  file,
  root = ".",
  sorting,
  strict = TRUE,
  optimize = TRUE,
  na = "NA",
  ...,
  split_by
)

## S3 method for class 'character'
write_vc(
  x,
  file,
  root = ".",
  sorting,
  strict = TRUE,
  optimize = TRUE,
  na = "NA",
  ...,
  append = FALSE,
  split_by = character(0),
  digits
)

## S3 method for class 'git_repository'
write_vc(
  x,
  file,
  root,
  sorting,
  strict = TRUE,
  optimize = TRUE,
  na = "NA",
  ...,
  stage = FALSE,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_vc_+3A_x">x</code></td>
<td>
<p>the <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_file">file</code></td>
<td>
<p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_root">root</code></td>
<td>
<p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p>
</td></tr>
<tr><td><code id="write_vc_+3A_sorting">sorting</code></td>
<td>
<p>an optional vector of column names defining which columns to
use for sorting <code>x</code> and in what order to use them.
The default empty <code>sorting</code> yields a warning.
Add <code>sorting</code> to avoid this warning.
Strongly recommended in combination with version control.
See <code>vignette("efficiency", package = "git2rdata")</code> for an illustration of
the importance of sorting.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_strict">strict</code></td>
<td>
<p>What to do when the metadata changes. <code>strict = FALSE</code>
overwrites the data and the metadata with a warning listing the changes,
<code>strict = TRUE</code> returns an error and leaves the data and metadata as is.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_optimize">optimize</code></td>
<td>
<p>If <code>TRUE</code>, recode the data to get smaller text files.
If <code>FALSE</code>, <code>meta()</code> converts the data to character.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_na">na</code></td>
<td>
<p>the string to use for missing values in the data.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_...">...</code></td>
<td>
<p>parameters used in some methods</p>
</td></tr>
<tr><td><code id="write_vc_+3A_split_by">split_by</code></td>
<td>
<p>An optional vector of variables name to split the text files.
This creates a separate file for every combination.
We prepend these variables to the vector of <code>sorting</code> variables.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_append">append</code></td>
<td>
<p>logical. Only relevant if <code>file</code> is a character
string.  If <code>TRUE</code>, the output is appended to the
file.  If <code>FALSE</code>, any existing file of the name is destroyed.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_digits">digits</code></td>
<td>
<p>The number of significant digits of the smallest absolute
value.
The function applies the rounding automatically.
Only relevant for numeric variables.
Either a single positive integer or a named vector where the names link to
the variables in the <code>data.frame</code>.
Defaults to <code>6</code> with a warning.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_stage">stage</code></td>
<td>
<p>Logical value indicating whether to stage the changes after
writing the data. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="write_vc_+3A_force">force</code></td>
<td>
<p>Add ignored files. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named vector with the file paths relative to <code>root</code>. The names
contain the hashes of the files.
</p>


<h3>Note</h3>

<p><code>..generic</code> is a reserved name for the metadata and is a forbidden
column name in a <code>data.frame</code>.
</p>


<h3>See Also</h3>

<p>Other storage: 
<code><a href="#topic+data_package">data_package</a>()</code>,
<code><a href="#topic+display_metadata">display_metadata</a>()</code>,
<code><a href="#topic+list_data">list_data</a>()</code>,
<code><a href="#topic+prune_meta">prune_meta</a>()</code>,
<code><a href="#topic+read_vc">read_vc</a>()</code>,
<code><a href="#topic+relabel">relabel</a>()</code>,
<code><a href="#topic+rename_variable">rename_variable</a>()</code>,
<code><a href="#topic+rm_data">rm_data</a>()</code>,
<code><a href="#topic+update_metadata">update_metadata</a>()</code>,
<code><a href="#topic+verify_vc">verify_vc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## on file system

# create a directory
root &lt;- tempfile("git2rdata-")
dir.create(root)

# write a dataframe to the directory
write_vc(
  iris[1:6, ], file = "iris", root = root, sorting = "Sepal.Length",
  digits = 6
)
# check that a data file (.tsv) and a metadata file (.yml) exist.
list.files(root, recursive = TRUE)
# read the git2rdata object from the directory
read_vc("iris", root)

# store a new version with different observations but the same metadata
write_vc(iris[1:5, ], "iris", root)
list.files(root, recursive = TRUE)
# Removing a column requires version requires new metadata.
# Add strict = FALSE to override the existing metadata.
write_vc(
  iris[1:6, -2], "iris", root, sorting = "Sepal.Length", strict = FALSE
)
list.files(root, recursive = TRUE)
# storing the orignal version again requires another update of the metadata
write_vc(iris[1:6, ], "iris", root, sorting = "Sepal.Width", strict = FALSE)
list.files(root, recursive = TRUE)
# optimize = FALSE stores the data more verbose. This requires larger files.
write_vc(
  iris[1:6, ], "iris2", root, sorting = "Sepal.Width", optimize = FALSE
)
list.files(root, recursive = TRUE)



## on git repo using a git2r::git-repository

# initialise a git repo using the git2r package
repo_path &lt;- tempfile("git2rdata-repo-")
dir.create(repo_path)
repo &lt;- git2r::init(repo_path)
git2r::config(repo, user.name = "Alice", user.email = "alice@example.org")

# store a dataframe in git repo.
write_vc(iris[1:6, ], file = "iris", root = repo, sorting = "Sepal.Length")
# This git2rdata object is not staged by default.
status(repo)
# read a dataframe from a git repo
read_vc("iris", repo)

# store a new version in the git repo and stage it in one go
write_vc(iris[1:5, ], "iris", repo, stage = TRUE)
status(repo)

# store a verbose version in a different gir2data object
write_vc(
  iris[1:6, ], "iris2", repo, sorting = "Sepal.Width", optimize = FALSE
)
status(repo)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
