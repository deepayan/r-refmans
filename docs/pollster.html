<!DOCTYPE html><html><head><title>Help for package pollster</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pollster}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#crosstab'><p>weighted crosstabs</p></a></li>
<li><a href='#crosstab_3way'><p>weighted 3-way crosstabs</p></a></li>
<li><a href='#deff_calc'><p>Calculate the design effect of a sample</p></a></li>
<li><a href='#illinois'><p>Illinois respondents to the Voting and Registration Supplement for the Current Population Survey</p></a></li>
<li><a href='#moe_crosstab'><p>weighted crosstabs with margin of error</p></a></li>
<li><a href='#moe_crosstab_3way'><p>weighted 3-way crosstabs with margin of error</p></a></li>
<li><a href='#moe_topline'><p>weighted topline with margin of error</p></a></li>
<li><a href='#moe_wave_crosstab'><p>weighted crosstabs with margin of error, where the x-variable identifies different survey waves</p></a></li>
<li><a href='#moe_wave_crosstab_3way'><p>weighted 3-way crosstabs with margin of error, where the z-variable identifies different survey waves</p></a></li>
<li><a href='#moedeff_calc'><p>Calculate the margin of error (including design effect) of a sample</p></a></li>
<li><a href='#summary_table'><p>weighted summary table</p></a></li>
<li><a href='#topline'><p>weighted topline</p></a></li>
<li><a href='#wtd_mean'><p>weighted mean</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculate Crosstab and Topline Tables of Weighted Survey Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Author:</td>
<td>John D. Johnson [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John D. Johnson &lt;john.d.johnson@marquette.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculate common types of tables for weighted survey data.
    Options include topline and (2-way and 3-way) crosstab tables of
    categorical or ordinal data as well as summary tables of weighted
    numeric variables. Optionally, include the margin of error at
    selected confidence intervals including the design effect. The
    design effect is calculated as described by 
    Kish (1965) &lt;<a href="https://doi.org/10.1002%2Fbimj.19680100122">doi:10.1002/bimj.19680100122</a>&gt; beginning
    on page 257. Output takes the form of tibbles (simple data frames).
    This package conveniently handles labelled data, such as that
    commonly used by 'Stata' and 'SPSS.' Complex survey design is 
    not supported at this time. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 0.8.0), stringr (&ge; 1.0.0), tidyr (&ge; 1.1.0),
labelled (&ge; 2.0.0), forcats (&ge; 1.0.0), rlang (&ge; 0.4.5)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2 (&ge; 3.3.0), knitr, rmarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-12 18:43:13 UTC; johnsonjoh</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-12 19:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='crosstab'>weighted crosstabs</h2><span id='topic+crosstab'></span>

<h3>Description</h3>

<p><code>crosstab</code> returns a tibble containing a weighted crosstab of two variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstab(
  df,
  x,
  y,
  weight,
  remove = "",
  n = TRUE,
  pct_type = "row",
  format = "wide",
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosstab_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="crosstab_+3A_x">x</code></td>
<td>
<p>The independent variable</p>
</td></tr>
<tr><td><code id="crosstab_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="crosstab_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
<tr><td><code id="crosstab_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="crosstab_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included. They are included in a separate column for row and cell
percentages, but in a separate row for wide format column percentages.</p>
</td></tr>
<tr><td><code id="crosstab_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row,&quot; &quot;cell,&quot; or &quot;column.&quot;</p>
</td></tr>
<tr><td><code id="crosstab_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="crosstab_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE a column &quot;unweighted_n&quot; is included containing the unweighted frequency count. It is not available when pct_type is &quot;column&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row, column, or cell percentages. The tibble can be in long or wide format.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>crosstab(df = illinois, x = voter, y = raceethnic, weight = weight)
crosstab(df = illinois, x = voter, y = raceethnic, weight = weight, n = FALSE)
</code></pre>

<hr>
<h2 id='crosstab_3way'>weighted 3-way crosstabs</h2><span id='topic+crosstab_3way'></span>

<h3>Description</h3>

<p><code>crosstab_3way</code> returns a tibble containing a weighted crosstab of two variables by a third variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstab_3way(
  df,
  x,
  y,
  z,
  weight,
  remove = c(""),
  n = TRUE,
  pct_type = "row",
  format = "wide",
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosstab_3way_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_x">x</code></td>
<td>
<p>The independent variable</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_z">z</code></td>
<td>
<p>The second control variable</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included.</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row&quot; or &quot;cell.&quot;</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="crosstab_3way_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE a column is added containing unweighted frequency counts</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row or cell percentages. The tibble can be in long or wide format.
These tables are ideal for use with small multiples created with ggplot2::facet_wrap.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>crosstab_3way(df = illinois, x = sex, y = educ6, z = maritalstatus, weight = weight)
crosstab_3way(df = illinois, x = sex, y = educ6, z = maritalstatus, weight = weight,
format = "wide")
</code></pre>

<hr>
<h2 id='deff_calc'>Calculate the design effect of a sample</h2><span id='topic+deff_calc'></span>

<h3>Description</h3>

<p><code>deff_calc</code> returns a single number
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deff_calc(w)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deff_calc_+3A_w">w</code></td>
<td>
<p>a vector of weights</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the design effect of a given sample using the formula
length(w)*sum(w^2)/(sum(w)^2).
It is designed for use in the moe family of functions. If any weights are equal to 0, they are removed prior to calculation.
</p>


<h3>Value</h3>

<p>A number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>deff_calc(illinois$weight)

</code></pre>

<hr>
<h2 id='illinois'>Illinois respondents to the Voting and Registration Supplement for the Current Population Survey</h2><span id='topic+illinois'></span>

<h3>Description</h3>

<p>A dataset containing the responses of 36,207 Illinois respondents to the Current
Population Survey's biennial Voting and Registration Supplement for the Current
Population Survey, 1996-2018.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>illinois
</code></pre>


<h3>Format</h3>

<p>A data frame with 36207 rows and 9 variables:
</p>

<dl>
<dt>year</dt><dd><p>year of survey</p>
</dd>
<dt>fips</dt><dd><p>the state fips code</p>
</dd>
<dt>sex</dt><dd><p>sex of the respondent, labelled value</p>
</dd>
<dt>educ6</dt><dd><p>highest level of education for respondent, labelled values</p>
</dd>
<dt>raceethnic</dt><dd><p>one of white, black, Hispanic, or other, labelled values</p>
</dd>
<dt>maritalstatus</dt><dd><p>one of Married, Widowed/divorced/Sep, or Never Married, labelled values</p>
</dd>
<dt>rv</dt><dd><p>indicates if the respondent is registered to vote, labelled values</p>
</dd>
<dt>voter</dt><dd><p>indicates if the respondent voted, labelled values</p>
</dd>
<dt>age</dt><dd><p>the age of the respondent, numeric values</p>
</dd>
<dt>weight</dt><dd><p>the number of people each respondent is calculated to represent</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.census.gov/topics/public-sector/voting.html">https://www.census.gov/topics/public-sector/voting.html</a>
</p>

<hr>
<h2 id='moe_crosstab'>weighted crosstabs with margin of error</h2><span id='topic+moe_crosstab'></span>

<h3>Description</h3>

<p><code>moe_crosstab</code> returns a tibble containing a weighted crosstab of two variables with margin of error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moe_crosstab(
  df,
  x,
  y,
  weight,
  remove = c(""),
  n = TRUE,
  pct_type = "row",
  format = "long",
  zscore = 1.96,
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moe_crosstab_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_x">x</code></td>
<td>
<p>The independent variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_weight">weight</code></td>
<td>
<p>The weighting variable, defaults to zwave_weight</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included.</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row&quot; or &quot;cell.&quot;
Column percents are not supported.</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval</p>
</td></tr>
<tr><td><code id="moe_crosstab_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE it adds a column with unweighted frequency values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row or cell percentages. The tibble can be in long or wide format. The margin of
error includes the design effect of the weights.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moe_crosstab(df = illinois, x = voter, y = raceethnic, weight = weight)
moe_crosstab(df = illinois, x = voter, y = raceethnic, weight = weight, n = FALSE)
</code></pre>

<hr>
<h2 id='moe_crosstab_3way'>weighted 3-way crosstabs with margin of error</h2><span id='topic+moe_crosstab_3way'></span>

<h3>Description</h3>

<p><code>moe_crosstab_3way</code> returns a tibble containing a weighted crosstab of two variables by a third variable with margin of error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moe_crosstab_3way(
  df,
  x,
  y,
  z,
  weight,
  remove = c(""),
  n = TRUE,
  pct_type = "row",
  format = "long",
  zscore = 1.96,
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moe_crosstab_3way_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_x">x</code></td>
<td>
<p>The independent variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_z">z</code></td>
<td>
<p>The second control variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included.</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row&quot; or &quot;cell.&quot;</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval</p>
</td></tr>
<tr><td><code id="moe_crosstab_3way_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE it adds a column with unweighted frequency values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row or cell percentages. The tibble can be in long or wide format.
These tables are ideal for use with small multiples created with ggplot2::facet_wrap.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moe_crosstab_3way(df = illinois, x = sex, y = educ6, z = maritalstatus, weight = weight)
moe_crosstab_3way(df = illinois, x = sex, y = educ6, z = maritalstatus, weight = weight,
format = "wide")
</code></pre>

<hr>
<h2 id='moe_topline'>weighted topline with margin of error</h2><span id='topic+moe_topline'></span>

<h3>Description</h3>

<p><code>moe_topline</code> returns a tibble containing a weighted topline of one variable with margin of error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moe_topline(
  df,
  variable,
  weight,
  remove = c(""),
  n = TRUE,
  pct = TRUE,
  valid_pct = TRUE,
  cum_pct = TRUE,
  zscore = 1.96
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moe_topline_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_variable">variable</code></td>
<td>
<p>the variable name</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_weight">weight</code></td>
<td>
<p>The weighting variable, defaults to zwave_weight</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_n">n</code></td>
<td>
<p>logical, if TRUE a frequency column is included
percentages, but in a separate row for column percentages.</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_pct">pct</code></td>
<td>
<p>logical, if TRUE a column of percents is included</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_valid_pct">valid_pct</code></td>
<td>
<p>logical, if TRUE a column of valid percents is included</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_cum_pct">cum_pct</code></td>
<td>
<p>logical, if TRUE a column of cumulative percents is included</p>
</td></tr>
<tr><td><code id="moe_topline_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the table includes a column for frequency count, percent, valid percent, and cumulative percent.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moe_topline(df = illinois, variable = educ6, weight = weight)
moe_topline(df = illinois, variable = educ6, weight = weight, remove = c("LT HS"))
</code></pre>

<hr>
<h2 id='moe_wave_crosstab'>weighted crosstabs with margin of error, where the x-variable identifies different survey waves</h2><span id='topic+moe_wave_crosstab'></span>

<h3>Description</h3>

<p><code>moe_wave_crosstab</code> returns a tibble containing a weighted crosstab of two variables
with margin of error. Use this function when the x-variable indicates different survey
waves for which weights were calculated independently.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moe_wave_crosstab(
  df,
  x,
  y,
  weight,
  remove = c(""),
  n = TRUE,
  pct_type = "row",
  format = "long",
  zscore = 1.96,
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moe_wave_crosstab_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_x">x</code></td>
<td>
<p>The independent variable, which uniquely identifies survey waves</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_weight">weight</code></td>
<td>
<p>The weighting variable, defaults to zwave_weight</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included.</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row&quot; or &quot;cell.&quot;
Column percents are not supported.</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE it adds a column with unweighted frequency values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row or cell percentages. The tibble can be in long or wide format. The margin of
error includes the design effect of the weights, calculated separately for each
survey wave.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moe_wave_crosstab(df = illinois, x = year, y = maritalstatus, weight = weight)
moe_wave_crosstab(df = illinois, x = year, y = maritalstatus, weight = weight, format = "wide")
</code></pre>

<hr>
<h2 id='moe_wave_crosstab_3way'>weighted 3-way crosstabs with margin of error, where the z-variable identifies different survey waves</h2><span id='topic+moe_wave_crosstab_3way'></span>

<h3>Description</h3>

<p><code>moe_wave_crosstab_3way</code> returns a tibble containing a weighted crosstab of two variables by a third variable with margin of error.
Use this function when the z-variable indicates different survey
waves for which weights were calculated independently.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moe_wave_crosstab_3way(
  df,
  x,
  y,
  z,
  weight,
  remove = c(""),
  n = TRUE,
  pct_type = "row",
  format = "long",
  zscore = 1.96,
  unwt_n = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moe_wave_crosstab_3way_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_x">x</code></td>
<td>
<p>The independent variable</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_y">y</code></td>
<td>
<p>The dependent variable</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_z">z</code></td>
<td>
<p>The second control variable, uniquely identifies survey waves</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_n">n</code></td>
<td>
<p>logical, if TRUE numeric totals are included.</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_pct_type">pct_type</code></td>
<td>
<p>Controls the kind of percentage values returned. One of &quot;row&quot; or &quot;cell.&quot;</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_format">format</code></td>
<td>
<p>one of &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval</p>
</td></tr>
<tr><td><code id="moe_wave_crosstab_3way_+3A_unwt_n">unwt_n</code></td>
<td>
<p>logical, if TRUE it adds a column with unweighted frequency values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Options  include row or cell percentages. The tibble can be in long or wide format.
These tables are ideal for use with small multiples created with ggplot2::facet_wrap.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moe_crosstab_3way(df = illinois, x = sex, y = educ6, z = year, weight = weight)
moe_crosstab_3way(df = illinois, x = sex, y = educ6, z = year, weight = weight, format = "wide")
</code></pre>

<hr>
<h2 id='moedeff_calc'>Calculate the margin of error (including design effect) of a sample</h2><span id='topic+moedeff_calc'></span>

<h3>Description</h3>

<p><code>moedeff_calc</code> returns a single number. It is designed for use in the moe family of functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moedeff_calc(pct, deff, n, zscore = 1.96)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moedeff_calc_+3A_pct">pct</code></td>
<td>
<p>a proportion</p>
</td></tr>
<tr><td><code id="moedeff_calc_+3A_deff">deff</code></td>
<td>
<p>a design effect</p>
</td></tr>
<tr><td><code id="moedeff_calc_+3A_n">n</code></td>
<td>
<p>the sample size</p>
</td></tr>
<tr><td><code id="moedeff_calc_+3A_zscore">zscore</code></td>
<td>
<p>defaults to 1.96, consistent with a 95% confidence interval.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the margin of error including design effect of a given sample of weighted data using the formula
sqrt(deff)*zscore*sqrt((pct*(1-pct))/(n-1))*100
</p>


<h3>Value</h3>

<p>A percentage
</p>


<h3>Examples</h3>

<pre><code class='language-R'>moedeff_calc(pct = 0.515, deff = 1.6, n = 214)
</code></pre>

<hr>
<h2 id='summary_table'>weighted summary table</h2><span id='topic+summary_table'></span>

<h3>Description</h3>

<p><code>summary_table</code> returns a tibble containing a weighted summary table of a single variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary_table(df, variable, weight, name_style = "clean")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_table_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="summary_table_+3A_variable">variable</code></td>
<td>
<p>the variable to summarize, it should be numeric</p>
</td></tr>
<tr><td><code id="summary_table_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
<tr><td><code id="summary_table_+3A_name_style">name_style</code></td>
<td>
<p>the style of the column names&ndash;one of &quot;clean&quot; or &quot;pretty.&quot;
Clean names are all lower case and words are separated by an underscore.
Pretty names begin with a capital letter are words a separated by a space.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The resulting tible includes columns for the variable name, unweighted observations,
weighted observations, weighted mean, minimum value, maximum value,
unweighted missing values, and weighted missing values
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary_table(illinois, age, weight)
summary_table(illinois, age, weight, name_style = "pretty")
</code></pre>

<hr>
<h2 id='topline'>weighted topline</h2><span id='topic+topline'></span>

<h3>Description</h3>

<p><code>topline</code> returns a tibble containing a weighted topline of one variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topline(
  df,
  variable,
  weight,
  remove = c(""),
  n = TRUE,
  pct = TRUE,
  valid_pct = TRUE,
  cum_pct = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="topline_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="topline_+3A_variable">variable</code></td>
<td>
<p>the variable name</p>
</td></tr>
<tr><td><code id="topline_+3A_weight">weight</code></td>
<td>
<p>The weighting variable, defaults to zwave_weight</p>
</td></tr>
<tr><td><code id="topline_+3A_remove">remove</code></td>
<td>
<p>An optional character vector of values to remove from final table (e.g. &quot;refused&quot;).
This will not affect any calculations made. The vector is not case-sensitive.</p>
</td></tr>
<tr><td><code id="topline_+3A_n">n</code></td>
<td>
<p>logical, if TRUE a frequency column is included
percentages, but in a separate row for column percentages.</p>
</td></tr>
<tr><td><code id="topline_+3A_pct">pct</code></td>
<td>
<p>logical, if TRUE a column of percents is included</p>
</td></tr>
<tr><td><code id="topline_+3A_valid_pct">valid_pct</code></td>
<td>
<p>logical, if TRUE a column of valid percents is included</p>
</td></tr>
<tr><td><code id="topline_+3A_cum_pct">cum_pct</code></td>
<td>
<p>logical, if TRUE a column of cumulative percents is included</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the table includes a column for frequency count, percent, valid percent, and cumulative percent.
</p>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>topline(illinois, sex, weight)
topline(illinois, sex, weight, pct = FALSE)
</code></pre>

<hr>
<h2 id='wtd_mean'>weighted mean</h2><span id='topic+wtd_mean'></span>

<h3>Description</h3>

<p><code>wtd_mean</code> returns the weighted mean of a variable. It's a tidy-compatible
wrapper around stats::weighted.mean().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtd_mean(df, variable, weight)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtd_mean_+3A_df">df</code></td>
<td>
<p>The data source</p>
</td></tr>
<tr><td><code id="wtd_mean_+3A_variable">variable</code></td>
<td>
<p>the variable, it should be numeric</p>
</td></tr>
<tr><td><code id="wtd_mean_+3A_weight">weight</code></td>
<td>
<p>The weighting variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wtd_mean(illinois, age, weight)

library(dplyr)
illinois %&gt;% wtd_mean(age, weight)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
