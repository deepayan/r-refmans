<!DOCTYPE html><html lang="en"><head><title>Help for package ripc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ripc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ripc-package'><p>ripc: Download and Tidy IPC and CH Data</p></a></li>
<li><a href='#ipc_get'><p>Get resource from IPC API</p></a></li>
<li><a href='#ipc_get_analyses'><p>Get analyses resources from the IPC API</p></a></li>
<li><a href='#ipc_get_areas'><p>Get areas resources from the IPC-CH API</p></a></li>
<li><a href='#ipc_get_country'><p>Get country resources from the IPC API</p></a></li>
<li><a href='#ipc_get_icons'><p>Get icons resources from the IPC API</p></a></li>
<li><a href='#ipc_get_points'><p>Get points resources from the IPC API</p></a></li>
<li><a href='#ipc_get_population'><p>Get population resources from the IPC API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Download and Tidy IPC and CH Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Utilities to access Integrated Food Security Phase Classification
    (IPC) and Cadre Harmonisé (CH) food security data. Wrapper functions are
    available for all of the 'IPC-CH' Public API (<a href="https://docs.api.ipcinfo.org">https://docs.api.ipcinfo.org</a>)
    simplified and advanced endpoints to easily download the data in a clean and
    tidy format.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ocha-dap/ripc">https://github.com/ocha-dap/ripc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ocha-dap/ripc/issues">https://github.com/ocha-dap/ripc/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>countrycode, dplyr, httr, jsonlite, lifecycle, lubridate,
purrr, readr, rlang, sf, stringr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-25 11:16:08 UTC; caldwellst</td>
</tr>
<tr>
<td>Author:</td>
<td>Seth Caldwell [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Seth Caldwell &lt;caldwellst@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-25 11:40:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='ripc-package'>ripc: Download and Tidy IPC and CH Data</h2><span id='topic+ripc'></span><span id='topic+ripc-package'></span>

<h3>Description</h3>

<p>Utilities to access Integrated Food Security Phase Classification (IPC) and Cadre Harmonisé (CH) food security data. Wrapper functions are available for all of the 'IPC-CH' Public API (<a href="https://docs.api.ipcinfo.org">https://docs.api.ipcinfo.org</a>) simplified and advanced endpoints to easily download the data in a clean and tidy format.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Seth Caldwell <a href="mailto:caldwellst@gmail.com">caldwellst@gmail.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ocha-dap/ripc">https://github.com/ocha-dap/ripc</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ocha-dap/ripc/issues">https://github.com/ocha-dap/ripc/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ipc_get'>Get resource from IPC API</h2><span id='topic+ipc_get'></span>

<h3>Description</h3>

<p>Back-end function used to drive the API calls of the other <code>ipc_get_...()</code>
family of functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get(resource, return_format, pass_format, api_key = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_+3A_resource">resource</code></td>
<td>
<p>One of the resources exposed in the IPC API, such
<code>"areas"</code> , <code>"analyses"</code>, <code>"points"</code>, or <code>"country"</code>.</p>
</td></tr>
<tr><td><code id="ipc_get_+3A_return_format">return_format</code></td>
<td>
<p>The format that should be returned by the API. Allows
<code>"csv"</code> (the default) and <code>"geojson"</code>.</p>
</td></tr>
<tr><td><code id="ipc_get_+3A_pass_format">pass_format</code></td>
<td>
<p>Pass format explicitly in the API call.</p>
</td></tr>
<tr><td><code id="ipc_get_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_+3A_...">...</code></td>
<td>
<p>Named parameters passed to the API call URL in the form of
<code>argument=value</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame from the API
</p>

<hr>
<h2 id='ipc_get_analyses'>Get analyses resources from the IPC API</h2><span id='topic+ipc_get_analyses'></span>

<h3>Description</h3>

<p>Accesses the areas resources on the IPC API. Contains detailed analysis
information. If <code>country</code>, <code>year</code> and/or <code>type</code> parameters are passed,
accesses the <strong>analyses</strong> simplified API endpoint and pulls in all analyses or
filtered to those parameters. To get the details for a specific analysis
available on the <strong>analyses/{id}/{period}</strong> advanced API endpoint,
pass in <code>id</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_analyses(
  country = NULL,
  year = NULL,
  type = NULL,
  id = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_analyses_+3A_country">country</code></td>
<td>
<p>ISO2 country code.</p>
</td></tr>
<tr><td><code id="ipc_get_analyses_+3A_year">year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td></tr>
<tr><td><code id="ipc_get_analyses_+3A_type">type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td></tr>
<tr><td><code id="ipc_get_analyses_+3A_id">id</code></td>
<td>
<p>Analysis ID.</p>
</td></tr>
<tr><td><code id="ipc_get_analyses_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_analyses_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Analyses data is metadata related to specific analyses conducted by the IPC,
including title of the analysis, link to its release page on the IPC website,
and creation/modification dates.
</p>


<h3>Value</h3>

<p>Data frame of analysis metadata. Refer to the
<a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a> for details
on the returned values, with variables described in full in the <a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the following changes are made to the initial
output to ensure each row represents a single analysis:
</p>

<ol>
<li><p> The data is arranged by <code>country</code>, <code>year</code>, and <code>created</code>.
</p>
</li>
<li> <p><code>id</code> column is renamed to be <code>analysis_id</code>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
# get all analyses details from the simplified API
ipc_get_analyses()

# get analysis details for a specific analysis ID
ipc_get_analyses(id = 12856213)

</code></pre>

<hr>
<h2 id='ipc_get_areas'>Get areas resources from the IPC-CH API</h2><span id='topic+ipc_get_areas'></span>

<h3>Description</h3>

<p>Accesses the areas resources on the IPC-CH API. Contains detailed area and
population data. If <code>country</code>, <code>year</code> and/or <code>type</code> parameters are passed,
accesses the <strong>areas</strong> simplified API endpoint and pulls in all areas filtered to
those parameters. To get all areas for a specific analysis
and period, available on the <strong>areas/{id}/{period}</strong> advanced API endpoint,
pass in <code>id</code> and <code>period</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_areas(
  country = NULL,
  year = NULL,
  type = NULL,
  id = NULL,
  period = NULL,
  return_format = c("csv", "geojson"),
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_areas_+3A_country">country</code></td>
<td>
<p>ISO2 country code.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_year">year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_type">type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_id">id</code></td>
<td>
<p>Analysis ID.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_period">period</code></td>
<td>
<p>Period code, either 'C', 'P', or 'A' for current, projection,
and second projection.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_return_format">return_format</code></td>
<td>
<p>The format that should be returned by the API. Allows
<code>"csv"</code> (the default) and <code>"geojson"</code>.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_areas_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Areas data is the typical unit of analysis in IPC-CH outputs. These are
typically administrative units (or clusters of them together). For each area,
estimates of the population in each phase is provided and a general phase
classification is assigned. Use <code><a href="#topic+ipc_get_population">ipc_get_population()</a></code> to get
detailed population data and classifications for all analysis periods.
</p>
<p>See the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more information.
</p>


<h3>Value</h3>

<p>Data frame of IPC and CH analysis at the areas level. Refer to the
<a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a> for details
on the returned values, with variables described in full in the <a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the following changes are made to the initial
output to ensure each row represents a single area analysis, and all estimates
and values are stored as columns:
</p>

<ol>
<li> <p><code>analysis_period_start</code> and <code>analysis_period_end</code> created as <code>Date</code> columns
from the <code>from</code> and <code>to</code> columns respectively, allocating the day of the
start and end periods to be the 15th of the month.
</p>
</li>
<li> <p><code>title</code> column is renamed to be <code>area_name</code>, <code>anl_id</code> to <code>analysis_id</code>,
and <code>id</code> and <code>aar_id</code> are changed to <code>area_id</code>.
</p>
</li>
<li><p> Duplicated rows are removed from the data frame if the return value is CSV,
because the duplicates are there due to polygon geometries.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
# get all areas from the simplified API
ipc_get_areas()

# get areas for specific analysis ID and period from advanced API
ipc_get_areas(id = 12856213, period = "P")

# request GeoJSON return
ipc_get_areas(id = 12856213, period = "P", return_format = "geojson")

</code></pre>

<hr>
<h2 id='ipc_get_country'>Get country resources from the IPC API</h2><span id='topic+ipc_get_country'></span>

<h3>Description</h3>

<p>Accesses the country resources on the IPC API. Contains detailed
country-level data. If <code>country</code>, <code>year</code> and/or <code>type</code> parameters are passed,
accesses the <strong>country</strong> simplified API endpoint and pulls in all country data
filtered to those parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_country(
  country = NULL,
  year = NULL,
  type = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_country_+3A_country">country</code></td>
<td>
<p>ISO2 country code.</p>
</td></tr>
<tr><td><code id="ipc_get_country_+3A_year">year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td></tr>
<tr><td><code id="ipc_get_country_+3A_type">type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td></tr>
<tr><td><code id="ipc_get_country_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_country_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Country data is the highest level of aggregation for IPC analysis. Data is
the population estimates and other details aggregated from area and point
analyses within the country for that specific analysis. No phase
classifications are made at the country level. Data is currently output only
for current periods through the <strong>country</strong> endpoint. Use
<code><a href="#topic+ipc_get_population">ipc_get_population()</a></code> to get detailed population data for all analysis
periods.
</p>
<p>See the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more information.
</p>


<h3>Value</h3>

<p>Data frame of IPC and CH analysis at the country level. Refer to the
<a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a> for details
on the returned values, with variables described in full in the <a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the following changes are made to the initial
output to ensure each row represents a single country analysis, and all estimates
and values are stored as columns:
</p>

<ol>
<li> <p><code>analysis_period_start</code> and <code>analysis_period_end</code> created as <code>Date</code> columns
from the <code>from</code> and <code>to</code> columns respectively, allocating the day of the
start and end periods to be the 15th of the month.
</p>
</li>
<li> <p><code>id</code> column is renamed to be <code>analysis_id</code>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
# get all areas from the simplified API
ipc_get_country()

# get country data just for Somalia
ipc_get_country(country = "SO")

</code></pre>

<hr>
<h2 id='ipc_get_icons'>Get icons resources from the IPC API</h2><span id='topic+ipc_get_icons'></span>

<h3>Description</h3>

<p>Accesses the icons resources on the IPC API. Contains links from analysis and
area IDs to the icon resource the IPC uses in maps and publications. This
is likely <strong>not useful for the general user</strong>. If <code>year</code> and/or <code>type</code>
parameters are passed, accesses the <strong>icons</strong> simplified API endpoint, pulls in
data filtered to those parameters. To get all icons for a specific analysis
and period, available on the <strong>types/{id}/{period}</strong> advanced API endpoint,
pass in <code>id</code> and <code>period</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_icons(
  year = NULL,
  type = NULL,
  id = NULL,
  period = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_icons_+3A_year">year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td></tr>
<tr><td><code id="ipc_get_icons_+3A_type">type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td></tr>
<tr><td><code id="ipc_get_icons_+3A_id">id</code></td>
<td>
<p>Analysis ID.</p>
</td></tr>
<tr><td><code id="ipc_get_icons_+3A_period">period</code></td>
<td>
<p>Period code, either 'C', 'P', or 'A' for current, projection,
and second projection.</p>
</td></tr>
<tr><td><code id="ipc_get_icons_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_icons_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Icons data is used internally by the IPC to link up analyses for areas and a
relevant icon for display on maps and in publications. The icons are stored
in an Amazon S3 bucket that is not publicly accessible and therefore not
useful for general users. Provided here for convenience.
</p>
<p>See the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more information.
</p>


<h3>Value</h3>

<p>Data from of icons for analysis publications.
Refer to the <a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a>
for details on the returned values, with variables described in full in the
<a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, <code>aar_id</code> is renamed to <code>area_id</code> and <code>area</code> to
<code>area_name</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# get all icons from the simplified API
ipc_get_icons()

# get icons for specific analysis ID and period from advanced API
ipc_get_icons(id = 12135625, period = "C")

</code></pre>

<hr>
<h2 id='ipc_get_points'>Get points resources from the IPC API</h2><span id='topic+ipc_get_points'></span>

<h3>Description</h3>

<p>Accesses the points resources on the IPC API. Contains detailed area and
population data. If <code>year</code> and/or <code>type</code> parameters are passed, accesses
the <strong>types</strong> simplified API endpoint and pulls in all types data or filtered to
either <code>year</code> or <code>type</code>. To get all types for a specific analysis
and period, available on the <strong>types/{id}/{period}</strong> advanced API endpoint,
pass in <code>id</code> and <code>period</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_points(
  year = NULL,
  type = NULL,
  id = NULL,
  period = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_points_+3A_year">year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td></tr>
<tr><td><code id="ipc_get_points_+3A_type">type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td></tr>
<tr><td><code id="ipc_get_points_+3A_id">id</code></td>
<td>
<p>Analysis ID.</p>
</td></tr>
<tr><td><code id="ipc_get_points_+3A_period">period</code></td>
<td>
<p>Period code, either 'C', 'P', or 'A' for current, projection,
and second projection.</p>
</td></tr>
<tr><td><code id="ipc_get_points_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_points_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Points data is IPC data generated from analysis on geographic
entities that are smaller than the standard areas. These are typically
urban areas or displacement sites where food insecurity conditions might
differ significantly from the wider context and justify specific analysis.
Population estimates as well as an overall phase classification are provided
for each point. Data is currently output only for current
periods through the <strong>points</strong> endpoint. Use <code><a href="#topic+ipc_get_population">ipc_get_population()</a></code> to get
detailed population data and classifications for all analysis periods. Points
data is contained within the <code>areas</code> dataset returned from
<code><a href="#topic+ipc_get_population">ipc_get_population()</a></code>.
</p>
<p>See the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more information.
</p>


<h3>Value</h3>

<p>Data frame of IPC and CH analysis at the point level. Refer to the
<a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a> for details
on the returned values, with variables described in full in the <a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the following changes are made to the initial
output to ensure each row represents a single point analysis, and all estimates
and values are stored as columns:
</p>

<ol>
<li><p> All columns containing <code>phase</code> or <code>population</code> are converted to numeric.
</p>
</li>
<li> <p><code>aar_id</code> is renamed to <code>area_id</code> and <code>anl_id</code> to <code>analysis_id</code>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>

# get all areas from the simplified API
ipc_get_points()

# get areas for specific analysis ID and period from advanced API
ipc_get_points(id = 18978466, period = "P")

</code></pre>

<hr>
<h2 id='ipc_get_population'>Get population resources from the IPC API</h2><span id='topic+ipc_get_population'></span>

<h3>Description</h3>

<p>Accesses the population resources on the IPC API. Contains detailed
population data. If <code>country</code> and/or <code>start</code> and <code>end</code> parameters are passed,
accesses the <strong>population</strong> advanced API endpoint and pulls in all data.
filtered by those parameters. To get the population data for a specific
analysis, available on the <strong>types/{id}</strong> advanced API endpoint,
pass in <code>id</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipc_get_population(
  country = NULL,
  start = NULL,
  end = NULL,
  id = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipc_get_population_+3A_country">country</code></td>
<td>
<p>ISO2 country code.</p>
</td></tr>
<tr><td><code id="ipc_get_population_+3A_start">start</code></td>
<td>
<p>Start year.</p>
</td></tr>
<tr><td><code id="ipc_get_population_+3A_end">end</code></td>
<td>
<p>End year.</p>
</td></tr>
<tr><td><code id="ipc_get_population_+3A_id">id</code></td>
<td>
<p>Analysis ID.</p>
</td></tr>
<tr><td><code id="ipc_get_population_+3A_api_key">api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td></tr>
<tr><td><code id="ipc_get_population_+3A_tidy_df">tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike the other <code>ipc_get_..()</code> family of functions, this returns a list of
datasets, corresponding to <code>country</code>, <code>areas</code>, and <code>groups</code> data. The benefit of
<code>ipc_get_population()</code> is that the
returned data for each level of analysis contains all periods of analysis.
</p>
<p>Groups data, where available, are geographies within a country that
comprise multiple areas and/or points.
Areas and points data is the lowest level of IPC analysis where population
estimates for each phase are provided and a general area-level classification
is made. There is no phase classification at
the group level, but populations in each phase are provided. The same applies
to country-level data.
</p>
<p>These datasets are available elsewhere through:
</p>

<ul>
<li><p> Country data: <code><a href="#topic+ipc_get_country">ipc_get_country()</a></code>
</p>
</li>
<li><p> Areas data: <code><a href="#topic+ipc_get_areas">ipc_get_areas()</a></code>
</p>
</li>
<li><p> Groups data: Not available through other functions
</p>
</li></ul>

<p>See the respective function documentation for more details on what each
dataset comprises or the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more detailed and
comprehensive information on the data and analysis.
</p>


<h3>Value</h3>

<p>A list of 3 data frames:
</p>

<ul>
<li><p> Country data frame.
</p>
</li>
<li><p> Areas data frame.
</p>
</li>
<li><p> Groups data frame.
</p>
</li></ul>

<p>Refer to the <a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a>
for details on the returned values, with variables described in full in the
<a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the data returned from the population end point is
transformed into a list of 3 data frames to ensure that each row represents a
single analysis, and all estimates and values are stored as columns, while
data at different levels of aggregation are in completely separate data
frames. The steps are:
</p>

<ol>
<li> <p><code>analysis_period_start</code> and <code>analysis_period_end</code> created as <code>Date</code> columns
from the <code>period_dates</code> column respectively, allocating the day of the
start and end periods to be the 15th of the month.
</p>
</li>
<li> <p><code>analysis_date</code> converted to a date column, using the 15th day of the month.
</p>
</li>
<li> <p><code>phases</code> is unnested from a list column to bring the phase data into
the main data frame.
</p>
</li>
<li><p> The population estimates are pivoted to a wider format with names <code>phase#_num</code>
and <code>phase#_pct</code>.
</p>
</li>
<li> <p><code>id</code> column renamed to <code>analysis_id</code>.
</p>
</li>
<li><p> Data frames are split out so multiple aggregations not present in a single
single data frame.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
# get all populations from the simplified API
ipc_get_population()

# get populations for specific analysis ID from advanced API
ipc_get_population(id = 12856213) # analysis with areas data frame
ipc_get_population(id = 65508276) # analysis with groups data frame

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
