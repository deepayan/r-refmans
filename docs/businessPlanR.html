<!DOCTYPE html><html><head><title>Help for package businessPlanR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {businessPlanR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#barplot'><p>Plot business plan transactions</p></a></li>
<li><a href='#businessPlanR-package'><p>Simple Modelling Tools for Business Plans</p></a></li>
<li><a href='#calc_staff'><p>Calculate the number of staff persons necessary to complete a task</p></a></li>
<li><a href='#condense'><p>Condense operations objects into neat data frame</p></a></li>
<li><a href='#depreciation,-class'><p>S4 Class depreciation</p></a></li>
<li><a href='#expense,-class'><p>S4 Class expense</p></a></li>
<li><a href='#fin_needs'><p>Estimate capital requirement from cash flow</p></a></li>
<li><a href='#first_last'><p>Shortcut for lists with steady transactions.</p></a></li>
<li><a href='#get_revenue'><p>Getter/setter methods for businessPlanR objects</p></a></li>
<li><a href='#growth'><p>Growth of a numeric vector</p></a></li>
<li><a href='#kable_bpR'><p>Format table from condensed objects</p></a></li>
<li><a href='#kbl_by_types'><p>Format table from collection of types of operations objects</p></a></li>
<li><a href='#loan,-class'><p>S4 Class loan</p></a></li>
<li><a href='#model2df'><p>Convert model from list to data frame</p></a></li>
<li><a href='#nice_numbers'><p>Format numbers in nice layout</p></a></li>
<li><a href='#operations,-class'><p>S4 Class operations</p></a></li>
<li><a href='#permalink2list'><p>Turn a Shiny permalink into a list</p></a></li>
<li><a href='#regularly'><p>Generate list of repeating financial transactions</p></a></li>
<li><a href='#regularly_delayed'><p>Generate list of repeating financial transactions with delayed starting month</p></a></li>
<li><a href='#revenue,-class'><p>S4 Class revenue</p></a></li>
<li><a href='#set_types'><p>Define valid types of revenues and expenses</p></a></li>
<li><a href='#table_model'><p>Define a model node for business plan tables</p></a></li>
<li><a href='#transaction_plan,-class'><p>S4 Class transaction_plan</p></a></li>
<li><a href='#transaction,-class'><p>S4 Class transaction</p></a></li>
<li><a href='#update_operations&lt;-'><p>Update operations objects</p></a></li>
<li><a href='#update_plan&lt;-'><p>Update transaction_plan objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simple Modelling Tools for Business Plans</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of S4 classes, methods and functions to create
        and visualize business plans. Different types of cash flows can be
        defined, which can then be used and tabulated to create profit and
        loss statements, cash flow plans, investment and depreciation
        schedules, loan amortization schedules, etc. The methods are
        designed to produce handsome tables in both PDF and HTML using
        'RMarkdown' or 'Shiny'.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods,kableExtra,knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat,rmarkdown,shiny</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.c3s.cc">https://www.c3s.cc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/C3S/businessPlanR/issues">https://github.com/C3S/businessPlanR/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-14</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Collate:</td>
<td>'00_environment.R' '01_class_01_operations.R'
'01_class_02_transaction.R' '01_class_03_revenue.R'
'01_class_04_expense.R' '01_class_05_loan.R'
'01_class_06_depreciation.R' '01_class_07_transaction_plan.R'
'02_method_barplot.R' '02_method_condense.R'
'02_method_get_set_as.R' '02_method_kable_bpR.R'
'02_method_kbl_by_types.R' '02_method_model2df.R'
'02_method_update_operations.R' '02_method_update_plan.R'
'businessPlanR-package.R' 'businessPlanR_internal.R'
'calc_staff.R' 'fin_needs.R' 'first_last.R' 'growth.R'
'model_node.R' 'nice_numbers.R' 'options.R' 'permalink2list.R'
'regularly.R' 'regularly_delayed.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-14 11:32:29 UTC; m</td>
</tr>
<tr>
<td>Author:</td>
<td>Meik Michalke [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Meik Michalke &lt;meik.michalke@c3s.cc&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-15 11:20:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='barplot'>Plot business plan transactions</h2><span id='topic+barplot'></span><span id='topic+barplot+2Crevenue-method'></span><span id='topic+barplot+2Cexpense-method'></span><span id='topic+barplot+2Coperations-method'></span>

<h3>Description</h3>

<p>Plot business plan transactions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>barplot(height, ...)

## S4 method for signature 'revenue'
barplot(height, resolution = "month", types = "default", ...)

## S4 method for signature 'expense'
barplot(height, resolution = "month", types = "default", ...)

## S4 method for signature 'operations'
barplot(height, resolution = "month", scope = "profit",
      types = "default", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="barplot_+3A_height">height</code></td>
<td>
<p>An object of class <code><a href="#topic+operations-class">operations</a></code>,
<code><a href="#topic+revenue-class">revenue</a></code> or <code><a href="#topic+expense-class">expense</a></code>.</p>
</td></tr>
<tr><td><code id="barplot_+3A_...">...</code></td>
<td>
<p>Any other argument suitable for <code>barplot()</code>.</p>
</td></tr>
<tr><td><code id="barplot_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>, or <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="barplot_+3A_types">types</code></td>
<td>
<p>Character string naming the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used.</p>
</td></tr>
<tr><td><code id="barplot_+3A_scope">scope</code></td>
<td>
<p>One of <code>"revenue"</code>, <code>"expense"</code>, <code>"rev_exp"</code>,
<code>"profit"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See <code><a href="graphics.html#topic+barplot">barplot</a></code>.
</p>

<hr>
<h2 id='businessPlanR-package'>Simple Modelling Tools for Business Plans</h2><span id='topic+businessPlanR'></span><span id='topic+businessPlanR-package'></span>

<h3>Description</h3>

<p>A collection of S4 classes, methods and functions to create
        and visualize business plans. Different types of cash flows can be
        defined, which can then be used and tabulated to create profit and
        loss statements, cash flow plans, investment and depreciation
        schedules, loan amortization schedules, etc. The methods are
        designed to produce handsome tables in both PDF and HTML using
        'RMarkdown' or 'Shiny'.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> businessPlanR</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1-0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-08-14</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 4.0.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
Encoding: </td><td style="text-align: left;"> UTF-8</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 3)</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> https://www.c3s.cc</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>NA
</p>
<p>Maintainer: NA
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.c3s.cc">https://www.c3s.cc</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/C3S/businessPlanR/issues">https://github.com/C3S/businessPlanR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='calc_staff'>Calculate the number of staff persons necessary to complete a task</h2><span id='topic+calc_staff'></span>

<h3>Description</h3>

<p>Calculates two values (split by 'boom_months') and returns both in a vector,
so that there's never a shortage of staff.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_staff(
  task,
  workdays = 205,
  hours = 8,
  rnd = 0.25,
  boom_months = 6,
  boom_pct = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_staff_+3A_task">task</code></td>
<td>
<p>The total number of hours to get done in one year.</p>
</td></tr>
<tr><td><code id="calc_staff_+3A_workdays">workdays</code></td>
<td>
<p>Numeric, average total working days for a staff person. 205 is the 
conservative lower end for Germany,
see <a href="https://www.deutschlandinzahlen.de/tab/deutschland/arbeitsmarkt/arbeitszeit/arbeitstage">https://www.deutschlandinzahlen.de/tab/deutschland/arbeitsmarkt/arbeitszeit/arbeitstage</a>.</p>
</td></tr>
<tr><td><code id="calc_staff_+3A_hours">hours</code></td>
<td>
<p>Number of hours per working day.</p>
</td></tr>
<tr><td><code id="calc_staff_+3A_rnd">rnd</code></td>
<td>
<p>Round numbers up to this next fraction of a part-time job.</p>
</td></tr>
<tr><td><code id="calc_staff_+3A_boom_months">boom_months</code></td>
<td>
<p>Number of months with highest workload, e.g., festival summer</p>
</td></tr>
<tr><td><code id="calc_staff_+3A_boom_pct">boom_pct</code></td>
<td>
<p>Total fraction of <code>task</code> that needs to be done during <code>boom_months</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Set <code>boom_months=6</code> and <code>boom_pct=.5</code> to get all hours spread evenly across the year.
</p>


<h3>Value</h3>

<p>A named vector with two elements,
<code>high</code> (number of staff needed for months with higher workload)
and <code>low</code> (number of staff needed for months with lower workload).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calc_staff(12328)
</code></pre>

<hr>
<h2 id='condense'>Condense operations objects into neat data frame</h2><span id='topic+condense'></span><span id='topic+condense-methods'></span><span id='topic+condense+2Coperations-method'></span><span id='topic+condense+2C-methods'></span>

<h3>Description</h3>

<p>Uses the provided <code>model</code> to create a data frame from the
<code><a href="#topic+operations-class">operations</a></code> object.
Depending on the type of data frame requestet (i.e., default or cashflow)
and the temporal resolution (month, quarter or year), various subsets of
the overall data in <code>obj</code> are returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>condense(
  obj,
  model = get_model(),
  resolution = c("year", "quarter", "month"),
  keep_types = TRUE,
  cashflow = FALSE,
  cf_init = 0,
  cf_names = c(begin = "Begin", end = "End"),
  years = get_period(obj, years = TRUE),
  digits = 2
)

## S4 method for signature 'operations'
condense(
  obj,
  model = get_model(),
  resolution = c("year", "quarter", "month"),
  keep_types = TRUE,
  cashflow = FALSE,
  cf_init = 0,
  cf_names = c(begin = "Begin", end = "End"),
  years = get_period(obj, years = TRUE),
  digits = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="condense_+3A_obj">obj</code></td>
<td>
<p>An object of class <code><a href="#topic+operations-class">operations</a></code>.</p>
</td></tr>
<tr><td><code id="condense_+3A_model">model</code></td>
<td>
<p>A named list of named lists describing the stepwise accounting rules
for all data in in <code>obj</code>.</p>
</td></tr>
<tr><td><code id="condense_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>, or <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="condense_+3A_keep_types">keep_types</code></td>
<td>
<p>Logical,
whether the returned data frame should keep the intermediate results
for each relevant type of transaction. This will add a column <code>type</code> to the data frame.</p>
</td></tr>
<tr><td><code id="condense_+3A_cashflow">cashflow</code></td>
<td>
<p>Logical,
whether the <code>model</code> describes a cashflow plan. If <code>TRUE</code>,
calculations will start with the initial value as specified by <code>cf_init</code> and use the
result of each period as the starting value of following periods.</p>
</td></tr>
<tr><td><code id="condense_+3A_cf_init">cf_init</code></td>
<td>
<p>Numeric,
used as the initial value for cashflow calculations if <code>cashflow=TRUE</code>; i.e.,
the first beginning cash value.</p>
</td></tr>
<tr><td><code id="condense_+3A_cf_names">cf_names</code></td>
<td>
<p>Character vector with two entries named <code>begin</code> and <code>end</code>,
used in the resulting
table for beginning cash and ending cash.</p>
</td></tr>
<tr><td><code id="condense_+3A_years">years</code></td>
<td>
<p>Character (or numeric) vector defining the year(s) to be represented in the output. This is intended to be
useful for splitting up quarterly or monthly output.</p>
</td></tr>
<tr><td><code id="condense_+3A_digits">digits</code></td>
<td>
<p>Number of digits used for rounding values, disabled if set to <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with a subset of the financial transactions of <code>obj</code>.
</p>

<hr>
<h2 id='depreciation+2C-class'>S4 Class depreciation</h2><span id='topic+depreciation+2C-class'></span><span id='topic+depreciation'></span><span id='topic+depreciation-class'></span><span id='topic+initialize+2Cdepreciation-method'></span>

<h3>Description</h3>

<p>This is a special case of the generic class <code><a href="#topic+transaction-class">transaction</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'depreciation'
initialize(
  .Object,
  type,
  category,
  name,
  amount,
  obsolete,
  invest_month = format(Sys.Date(), "%Y.%m"),
  method = c("linear", "writedown", "sumofyears", "doubledecline"),
  valid_types = "default",
  value
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="depreciation+2B2C-class_+3A_.object">.Object</code></td>
<td>
<p>The object to initialize.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_type">type</code></td>
<td>
<p>A character string defining the type of transaction as defined by <code>valid_types</code>.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_name">name</code></td>
<td>
<p>A character string, custom name or ID for this transaction (i.e.,
a particular asset that was purchased).</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_amount">amount</code></td>
<td>
<p>Numeric, the amount of money invested into the asset.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_obsolete">obsolete</code></td>
<td>
<p>Integer value defining the period (in months) over which the value of the asset diminishes to zero.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_invest_month">invest_month</code></td>
<td>
<p>Character string in <code>YYYY.MM</code> format,
the month of the investment/purchase.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_method">method</code></td>
<td>
<p>One of the following, defining the depreciation method:
</p>

<ul>
<li><p><code>"linear"</code>: The straight line depreciation. This is currently the only implemented option.
</p>
</li>
<li><p><code>"writedown"</code>: The written-down value depreciation, not yet implemented.
</p>
</li>
<li><p><code>"sumofyears"</code>: The sum-of-years depreciation, not yet implemented.
</p>
</li>
<li><p><code>"doubledecline"</code>: The double-declining depreciation,
not yet implemented.
</p>
</li></ul>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string,
the model types defined by <code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="depreciation+2B2C-class_+3A_value">value</code></td>
<td>
<p>A valid data frame to be used as the value slot directly,
omitting calculation via <code>amount</code>, <code>obsolete</code>, <code>invest_month</code>, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In contrast to <code><a href="#topic+revenue-class">revenue</a></code> or <code><a href="#topic+expense-class">expense</a></code>,
the time range of this class of objects is defined by details of the investment as specified. Only when used as
an aspect of an <code><a href="#topic+operations-class">operations</a></code> class object,
this range is adjusted
to fit that particular object.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>A character string,
for valid values see <code>valid_types</code>. You might use all valid types pre-defined for either
<code>revenue</code> or <code>expense</code>,
considering that you might be the depreciation giver or receiver.</p>
</dd>
<dt><code>category</code></dt><dd><p>A character string, custom category for this depreciation.</p>
</dd>
<dt><code>name</code></dt><dd><p>A character string, custom name or ID for this depreciation.</p>
</dd>
<dt><code>value</code></dt><dd><p>Data frame containing an investment plan and allowance for depreciation balance,
each month in a row named <code>YYYY.MM</code>.
The columns are <code>investment</code>, <code>depreciation</code>, and remaining <code>value</code>.</p>
</dd>
<dt><code>valid_types</code></dt><dd><p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>depreciation(...)</code> can be used instead of
<code>new("depreciation", ...)</code>.
</p>


<h3>NA</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>depreciation(...)</code> can be used instead of
<code>new("depreciation", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>depreciation_printer &lt;- depreciation(
    type="Depreciation",
    category="Office",
    name="Printer",
    amount=100,
    obsolete=36,
    invest_month="2019.04"
)

# turn depreciation object into an expense
depreciation_as_expense_printer &lt;- as_transaction(
    depreciation_printer,
    to="expense",
    aspect="depreciation"
)
</code></pre>

<hr>
<h2 id='expense+2C-class'>S4 Class expense</h2><span id='topic+expense+2C-class'></span><span id='topic+expense'></span><span id='topic+expense-class'></span><span id='topic+initialize+2Cexpense-method'></span>

<h3>Description</h3>

<p>This is a special case of the generic class <code><a href="#topic+transaction-class">transaction</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'expense'
initialize(
  .Object,
  type,
  category,
  name,
  per_use,
  missing = c("rep", "interpol", "0"),
  due_month = NA,
  valid_types = "default",
  ...,
  .list = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expense+2B2C-class_+3A_.object">.Object</code></td>
<td>
<p>The object to initialize.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_type">type</code></td>
<td>
<p>A character string defining the type of transaction as defined by <code>valid_types</code>.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_name">name</code></td>
<td>
<p>A character string, custom name or ID for this transaction.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_per_use">per_use</code></td>
<td>
<p>If given, the numbers provided via <code>...</code> (or <code>.list</code>) are
not interpreted as the monetary value, but as number of transactions in that
month, and the actual fiscal value is calculated by multiplying it with the value
given here.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_missing">missing</code></td>
<td>
<p>One of <code>"rep"</code>, <code>"interpol"</code>, or <code>"0"</code>.
This defines how gaps are filled: If <code>"rep"</code>, present values are repeated
until the next valid value; if <code>"interpol"</code>, missing values are interpolated
using <code>approx</code>; if <code>"0"</code>, missing values are set to zero.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_due_month">due_month</code></td>
<td>
<p>Character vector to define months where transactions are due. This argument
causes previous amounts to be cumulated and thereby postponed to the given month of a year.
Combined with e.g. <code>.list</code> this makes it easier to turn monthly amounts into quarterly
ones.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_...">...</code></td>
<td>
<p>Numeric values named in <code>YYYY.MM</code> format,
defining the transaction amount for a particular month.
The resulting object will automatically cover all months from the earliest to the latest among all given values.</p>
</td></tr>
<tr><td><code id="expense+2B2C-class_+3A_.list">.list</code></td>
<td>
<p>An alternative to <code>...</code> if the values are already present as a list. If both are given,
their values
will be merged into one list.</p>
</td></tr>
</table>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>A character string, for valid values see <code>valid_types</code>.</p>
</dd>
<dt><code>category</code></dt><dd><p>A character string, custom category for this expense.</p>
</dd>
<dt><code>name</code></dt><dd><p>A character string, custom name or ID for this expense.</p>
</dd>
<dt><code>value</code></dt><dd><p>Data frame containing all expenses,
each month in a column named <code>YYYY.MM</code>.</p>
</dd>
<dt><code>valid_types</code></dt><dd><p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>expense(...)</code> can be used instead of
<code>new("expense", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>exp_2019_2021 &lt;- expense(
   type="Goods",
   category="Merch",
   name="T-Shirts",
   "2019.03"=65,
   "2019.07"=170,
   "2020.02"=210,
   "2020.08"=312,
   "2021.01"=450,
   "2021.06"=600,
   "2021.10"=720
)
</code></pre>

<hr>
<h2 id='fin_needs'>Estimate capital requirement from cash flow</h2><span id='topic+fin_needs'></span>

<h3>Description</h3>

<p>To avoid cash flow issues, this function takes a data frame as returned by
<code><a href="#topic+condense">condense</a></code> with <code>cashflow=TRUE</code> to calculate
the amount of financial needs per time resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fin_needs(
  cashflow_df,
  resolution = c("year", "quarter", "month"),
  row_names = c("Financial needs", "Cumulative")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fin_needs_+3A_cashflow_df">cashflow_df</code></td>
<td>
<p>Data frame as returned by <code><a href="#topic+condense-methods">condense</a></code> with <code>cashflow=TRUE</code>.</p>
</td></tr>
<tr><td><code id="fin_needs_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>,
or <code>"year"</code>. Must be identical
to the value used with the call to <code>condense</code>!</p>
</td></tr>
<tr><td><code id="fin_needs_+3A_row_names">row_names</code></td>
<td>
<p>Character vector of two, names for the rows of the resulting data frame.
The first represents financial need per time period (column),
the second is cumulated over all columns.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only negative values are returned, so the row sum can be used as an estimate
of the overall financial demand for the given period of time.
</p>


<h3>Value</h3>

<p>A data frame with two rows and columns depending on <code>resolution</code> and period covered by <code>cashflow_df</code>.
</p>

<hr>
<h2 id='first_last'>Shortcut for lists with steady transactions.</h2><span id='topic+first_last'></span>

<h3>Description</h3>

<p>Generates a list of two elements, first and last month of the full years range, both
with the same value specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>first_last(years, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="first_last_+3A_years">years</code></td>
<td>
<p>Integer vector, at least two elements, the range of years to cover.</p>
</td></tr>
<tr><td><code id="first_last_+3A_value">value</code></td>
<td>
<p>The transaction amount that is assumed to remain unchanged over all <code>years</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can use this in combination with the <code>.list</code> argument of
<code><a href="#topic+expense">expense</a></code>,
<code><a href="#topic+revenue">revenue</a></code>, and
<code><a href="#topic+transaction">transaction</a></code>.
</p>


<h3>Value</h3>

<p>A list with two elements named after the first and last month of the <code>years</code>' range
in <code>YYYY.MM</code> format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>expense(
    type="Operation",
    category="Bank",
    name="Accounting",
    missing="rep",
    .list=first_last(2022:2025, value=20)
)
</code></pre>

<hr>
<h2 id='get_revenue'>Getter/setter methods for businessPlanR objects</h2><span id='topic+get_revenue'></span><span id='topic+get_revenue+2Coperations-method'></span><span id='topic+get_revenue+2C-methods'></span><span id='topic+get_expense'></span><span id='topic+get_expense+2Coperations-method'></span><span id='topic+get_expense+2C-methods'></span><span id='topic+get_value'></span><span id='topic+get_value+2Ctransaction_plan-method'></span><span id='topic+get_value+2C-methods'></span><span id='topic+get_value+2Cloan-method'></span><span id='topic+get_value+2Cdepreciation-method'></span><span id='topic+get_value+2Crevenue-method'></span><span id='topic+get_value+2Cexpense-method'></span><span id='topic+get_loans'></span><span id='topic+get_loans+2Coperations-method'></span><span id='topic+get_loans+2C-methods'></span><span id='topic+get_plan'></span><span id='topic+get_plan+2Ctransaction_plan-method'></span><span id='topic+get_plan+2C-methods'></span><span id='topic+get_period'></span><span id='topic+get_period+2Coperations-method'></span><span id='topic+get_period+2C-methods'></span><span id='topic+get_period+2Ctransaction_plan-method'></span><span id='topic+get_period+2Cloan-method'></span><span id='topic+get_period+2Cdepreciation-method'></span><span id='topic+get_depreciation_plan'></span><span id='topic+get_depreciation_plan+2Coperations-method'></span><span id='topic+get_depreciation_plan+2C-methods'></span><span id='topic+get_plan_type'></span><span id='topic+get_plan_type+2Ctransaction_plan-method'></span><span id='topic+get_plan_type+2C-methods'></span><span id='topic+get_misc'></span><span id='topic+get_misc+2Coperations-method'></span><span id='topic+get_misc+2C-methods'></span><span id='topic+set_misc+3C-'></span><span id='topic+set_misc+3C-+2Coperations-method'></span><span id='topic+set_misc+3C-+2C-methods'></span><span id='topic+list_plans'></span><span id='topic+list_plans+2Ctransaction_plan-method'></span><span id='topic+list_plans+2C-methods'></span><span id='topic+get_sum'></span><span id='topic+get_sum+2Crevenue-method'></span><span id='topic+get_sum+2C-methods'></span><span id='topic+get_sum+2Cexpense-method'></span><span id='topic+as_transaction'></span><span id='topic+as_transaction+2Cloan-method'></span><span id='topic+as_transaction+2C-methods'></span><span id='topic+as_transaction+2Cdepreciation-method'></span>

<h3>Description</h3>

<p>These methods return the requested slots from objects of class
<code><a href="#topic+operations-class">operations</a></code>,
<code><a href="#topic+revenue-class">revenue</a></code>,
<code><a href="#topic+expense-class">expense</a></code>,
<code><a href="#topic+transaction_plan-class">transaction_plan</a></code>,
<code><a href="#topic+loan-class">loan</a></code> or
<code><a href="#topic+depreciation-class">depreciation</a></code>,
or, in case of their <code>&lt;-</code> counterparts, replace slots with a given <code>value</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_revenue(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year"),
  only_type,
  not_type
)

## S4 method for signature 'operations'
get_revenue(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year"),
  only_type,
  not_type
)

get_expense(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year"),
  only_type,
  not_type
)

## S4 method for signature 'operations'
get_expense(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year"),
  only_type,
  not_type
)

get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

## S4 method for signature 'transaction_plan'
get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

## S4 method for signature 'loan'
get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

## S4 method for signature 'depreciation'
get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

## S4 method for signature 'revenue'
get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

## S4 method for signature 'expense'
get_value(
  obj,
  drop_nonyear_cols = FALSE,
  resolution = c("month", "quarter", "year")
)

get_loans(obj, as_data_frame = TRUE)

## S4 method for signature 'operations'
get_loans(obj, as_data_frame = TRUE)

get_plan(obj, type, category, name, valid_types = "default")

## S4 method for signature 'transaction_plan'
get_plan(obj, type, category, name, valid_types = "default")

get_period(obj, years = FALSE)

## S4 method for signature 'operations'
get_period(obj, years = FALSE)

## S4 method for signature 'transaction_plan'
get_period(obj, years = FALSE)

## S4 method for signature 'loan'
get_period(obj, years = FALSE)

## S4 method for signature 'depreciation'
get_period(obj, years = FALSE)

get_depreciation_plan(obj, as_data_frame = TRUE)

## S4 method for signature 'operations'
get_depreciation_plan(obj, as_data_frame = TRUE)

get_plan_type(obj)

## S4 method for signature 'transaction_plan'
get_plan_type(obj)

get_misc(obj, name)

## S4 method for signature 'operations'
get_misc(obj, name)

set_misc(obj, name) &lt;- value

## S4 replacement method for signature 'operations'
set_misc(obj, name) &lt;- value

list_plans(obj)

## S4 method for signature 'transaction_plan'
list_plans(obj)

get_sum(obj)

## S4 method for signature 'revenue'
get_sum(obj)

## S4 method for signature 'expense'
get_sum(obj)

as_transaction(obj, to, aspect, valid_types = "default", type)

## S4 method for signature 'loan'
as_transaction(
  obj,
  to = c("revenue", "expense"),
  aspect = c("interest", "balance_start", "principal", "total", "cumsum",
    "balance_remain"),
  valid_types = "default",
  type
)

## S4 method for signature 'depreciation'
as_transaction(
  obj,
  to = c("revenue", "expense"),
  aspect = c("investment", "depreciation", "value"),
  valid_types = "default",
  type
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_revenue_+3A_obj">obj</code></td>
<td>
<p>An object of class
<code><a href="#topic+operations-class">operations</a></code>,
<code><a href="#topic+revenue-class">revenue</a></code>,
<code><a href="#topic+expense-class">expense</a></code>,
<code><a href="#topic+transaction_plan-class">transaction_plan</a></code>,
<code><a href="#topic+loan-class">loan</a></code> or
<code><a href="#topic+depreciation-class">depreciation</a></code>.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_drop_nonyear_cols">drop_nonyear_cols</code></td>
<td>
<p>Logical, whether to drop or keep columns specifying type,
category or name or rows.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>, or <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_only_type">only_type</code></td>
<td>
<p>Optional character vector, if given,
only rows with matching type are returned.
Overrides <code>not_type</code> if both are provided.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_not_type">not_type</code></td>
<td>
<p>Optional character vector, if given,
only rows with types not matching the vector entries are returned.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>Logical,
if <code>FALSE</code> returns an object of class <code>transaction_plan</code>
instead of a data frame.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_type">type</code></td>
<td>
<p>Character string, a valid type name for the resulting object.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_name">name</code></td>
<td>
<p>Character or integer, specifying which element to get/set. If missing,
the whole list is returned/replaced.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_years">years</code></td>
<td>
<p>Logical,
if <code>TRUE</code> doesn't return the period vector but a vector of all years in the period.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_value">value</code></td>
<td>
<p>A value to assign to the object.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_to">to</code></td>
<td>
<p>Character string, the transaction class to coerce into.</p>
</td></tr>
<tr><td><code id="get_revenue_+3A_aspect">aspect</code></td>
<td>
<p>Character string,
the row/column of the input objects's <code>value</code> data frame to use in the resulting object.
All additional data are silently dropped.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>as_transaction(..., aspect="balance_start")</code> is being called on a loan object,
only the initial
value (and perhaps growth instead of declining values) is used,
e.g. as revenue for calculations.
</p>


<h3>Value</h3>

<p>Depending on the method, either a data frame or a numeric value.
</p>

<hr>
<h2 id='growth'>Growth of a numeric vector</h2><span id='topic+growth'></span>

<h3>Description</h3>

<p>Calculates the differences between consecutive values in a numeric vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>growth(x, round = c("round", "ceiling", "floor"), digits = 0, init = x[1])
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="growth_+3A_x">x</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
<tr><td><code id="growth_+3A_round">round</code></td>
<td>
<p>One of <code>"round"</code> (invokes <code><a href="base.html#topic+round">round</a></code> on <code>x</code> before calculation),
<code>"ceiling"</code> (calling <code><a href="base.html#topic+ceiling">ceiling</a></code>), or <code>"floor"</code> (calling
<code><a href="base.html#topic+floor">floor</a></code> instead of <code>round</code>, respectively).</p>
</td></tr>
<tr><td><code id="growth_+3A_digits">digits</code></td>
<td>
<p>Integer, passed to <code>round</code> if <code>round="round"</code>.</p>
</td></tr>
<tr><td><code id="growth_+3A_init">init</code></td>
<td>
<p>Numeric, the initial value to compare the first element of <code>x</code> to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector the same length as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>growth(c(1,10,12,15,122))
</code></pre>

<hr>
<h2 id='kable_bpR'>Format table from condensed objects</h2><span id='topic+kable_bpR'></span><span id='topic+kable_bpR+2Coperations-method'></span><span id='topic+kable_bpR+2C-methods'></span><span id='topic+kable_bpR+2Cloan-method'></span><span id='topic+kable_bpR+2Ctransaction_plan-method'></span>

<h3>Description</h3>

<p>This method uses the <code>kableExtra</code> package for table formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kable_bpR(
  obj,
  model = get_model(),
  resolution = c("year", "quarter", "month"),
  keep_types = TRUE,
  detailed = FALSE,
  cashflow = FALSE,
  currency = "€",
  DIY = FALSE,
  longtable_clean_cut = TRUE,
  font_size = NULL,
  latex_options = "striped",
  stripe_color = "gray!6",
  years = get_period(obj, years = TRUE),
  detail_names = c(revenue = "Revenue", expense = "Exepense"),
  detail_colors = c(color = "white", background = "grey"),
  cf_init = 0,
  cf_names = c(begin = "Begin", end = "End"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  detail_width,
  ...
)

## S4 method for signature 'operations'
kable_bpR(
  obj,
  model = get_model(),
  resolution = c("year", "quarter", "month"),
  keep_types = TRUE,
  detailed = FALSE,
  cashflow = FALSE,
  currency = "€",
  DIY = FALSE,
  longtable_clean_cut = TRUE,
  font_size = NULL,
  latex_options = "striped",
  stripe_color = "gray!6",
  years = get_period(obj, years = TRUE),
  detail_names = c(revenue = "Revenue", expense = "Exepense"),
  detail_colors = c(color = "white", background = "grey"),
  cf_init = 0,
  cf_names = c(begin = "Begin", end = "End"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  detail_width,
  ...
)

## S4 method for signature 'loan'
kable_bpR(
  obj,
  resolution = c("month", "quarter", "year"),
  currency = "€",
  DIY = FALSE,
  font_size = NULL,
  latex_options = "striped",
  stripe_color = "gray!6",
  loan_names = c(balance_start = "Balance start", interest = "Interest", principal =
    "Principal", total = "Total", cumsum = "Cumulated", balance_remain =
    "Balance remain"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  ...
)

## S4 method for signature 'transaction_plan'
kable_bpR(
  obj,
  resolution = c("month", "quarter", "year"),
  keep_types = FALSE,
  currency = "€",
  DIY = FALSE,
  longtable_clean_cut = TRUE,
  font_size = NULL,
  latex_options = "basic",
  stripe_color = "gray!6",
  years = get_period(obj, years = TRUE),
  dep_names = c(investment = "Investment", depreciation = "Depreciation", value =
    "Value", sum = "Sum"),
  loan_names = c(balance_start = "Balance start", interest = "Interest", principal =
    "Principal", total = "Total", cumsum = "Cumulated", balance_remain =
    "Balance remain", sum = "Sum"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  zeroes = c(html = "#C0C0C0", latex = "gray!25"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kable_bpR_+3A_obj">obj</code></td>
<td>
<p>An object of class <code><a href="#topic+operations-class">operations</a></code> or <code><a href="#topic+loan-class">loan</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_model">model</code></td>
<td>
<p>A named list of named lists describing the stepwise accounting rules
for all data in in <code>obj</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>, or <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_keep_types">keep_types</code></td>
<td>
<p>Logical,
whether the returned data frame should keep the intermediate results
for each relevant type of transaction. This will add a column <code>type</code> to the data frame.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_detailed">detailed</code></td>
<td>
<p>Logical, supersedes <code>keep_types</code>. If <code>TRUE</code>,
the table includes detailed
information all the way down to types, categories, and transaction names.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_cashflow">cashflow</code></td>
<td>
<p>Logical,
whether the <code>model</code> describes a cash flow plan. If <code>TRUE</code>,
calculations will start with the initial value as specified by <code>cf_init</code> and use the
result of each period as the starting value of following periods. This only works if <code>detailed=FALSE</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_currency">currency</code></td>
<td>
<p>Character defining a currency symbol.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_diy">DIY</code></td>
<td>
<p>Logical,
if <code>TRUE</code> returns the <code>kable</code> object prior to any row collapsing, column specs or kable styling,
so you can apply all of those as you wish.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_longtable_clean_cut">longtable_clean_cut</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+collapse_rows">collapse_rows</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_font_size">font_size</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_latex_options">latex_options</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_stripe_color">stripe_color</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_years">years</code></td>
<td>
<p>Character (or numeric) vector defining the year(s) to be represented in the output. This is intended to be
useful for splitting up quarterly or monthly output.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_detail_names">detail_names</code></td>
<td>
<p>A named character vector with two entries,
<code>revenue</code> and <code>expense</code>,
defining the global names used for the two transaction classes in the data frame if <code>detailed=TRUE</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_detail_colors">detail_colors</code></td>
<td>
<p>A named character vector with two entries,
<code>color</code> and <code>background</code>, defining the color scheme
for position headlines (revenue and expense). Only relevant if <code>detailed=TRUE</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_cf_init">cf_init</code></td>
<td>
<p>Numeric,
used as the initial value for cash flow calculations if <code>cashflow=TRUE</code>; i.e.,
the first beginning cash value.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_cf_names">cf_names</code></td>
<td>
<p>Character vector with two entries named <code>begin</code> and <code>end</code>,
used in the resulting
table for beginning cash and ending cash.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_space">space</code></td>
<td>
<p>Character, a space definition to put between currency and value.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_detail_width">detail_width</code></td>
<td>
<p>Optional vector of length 3,
if given defined the width of the three categorial columns,
<code>Type</code>, <code>Category</code>, and <code>Name</code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to <code><a href="kableExtra.html#topic+kbl">kbl</a></code>.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_loan_names">loan_names</code></td>
<td>
<p>Like <code>dep_names</code> but with seven named entries,
<code>balance_start</code>, <code>interest</code>,
<code>principal</code>, <code>total</code>, <code>cumsum</code>, <code>balance_remain</code>, and <code>sum</code>,
for loan plans, respectively.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_dep_names">dep_names</code></td>
<td>
<p>A named character vector with four entries, <code>investment</code>,
<code>depreciation</code>, <code>value</code>,
and <code>sum</code>, used in table to describe the rows of each depreciation item,
with <code>sum</code> only being used
in the final set of rows showing a summary over all items.</p>
</td></tr>
<tr><td><code id="kable_bpR_+3A_zeroes">zeroes</code></td>
<td>
<p>Named character vector defining the text color to use for zero amounts,
for both LaTeX and HTML format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>kable</code>.
</p>

<hr>
<h2 id='kbl_by_types'>Format table from collection of types of operations objects</h2><span id='topic+kbl_by_types'></span><span id='topic+kbl_by_types+2Coperations-method'></span><span id='topic+kbl_by_types+2C-methods'></span>

<h3>Description</h3>

<p>This method uses the <code>kableExtra</code> package for table formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kbl_by_types(
  obj,
  types,
  resolution = c("year", "quarter", "month"),
  currency = "€",
  digits = 0,
  DIY = FALSE,
  font_size = NULL,
  latex_options = "striped",
  stripe_color = "gray!6",
  years = get_period(obj, years = TRUE),
  sum_names = c(subtotal = "Subtotal", total = "Total"),
  type_colors = c(color = "white", background = "grey"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  ...
)

## S4 method for signature 'operations'
kbl_by_types(
  obj,
  types,
  resolution = c("year", "quarter", "month"),
  currency = "€",
  digits = 0,
  DIY = FALSE,
  font_size = NULL,
  latex_options = "striped",
  stripe_color = "gray!6",
  years = get_period(obj, years = TRUE),
  sum_names = c(subtotal = "Subtotal", total = "Total"),
  type_colors = c(color = "white", background = "grey"),
  space = c(html = "&amp;#8239;", latex = "\\,"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kbl_by_types_+3A_obj">obj</code></td>
<td>
<p>An object of class <code><a href="#topic+operations-class">operations</a></code> or <code><a href="#topic+loan-class">loan</a></code>.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_types">types</code></td>
<td>
<p>A named character vector of types to fetch from <code>obj</code> and print in the resulting table.
Names must be the type names,
their value must be one of <code>"revenue"</code> or <code>"expense"</code> so the method knows what
to use in case identical type names are defined for both.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_resolution">resolution</code></td>
<td>
<p>One of <code>"month"</code>, <code>"quarter"</code>, or <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_currency">currency</code></td>
<td>
<p>Character defining a currency symbol.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_digits">digits</code></td>
<td>
<p>Integer, round values to number of digits.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_diy">DIY</code></td>
<td>
<p>Logical,
if <code>TRUE</code> returns the <code>kable</code> object prior to any row packing, specs or kable styling,
so you can apply all of those as you wish.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_font_size">font_size</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_latex_options">latex_options</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_stripe_color">stripe_color</code></td>
<td>
<p>Passed to <code><a href="kableExtra.html#topic+kable_styling">kable_styling</a></code>.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_years">years</code></td>
<td>
<p>Character (or numeric) vector defining the year(s) to be represented in the output. This is intended to be
useful for splitting up quarterly or monthly output.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_sum_names">sum_names</code></td>
<td>
<p>A named character vector with two entries,
<code>subtotal</code> and <code>total</code>,
to be used in the resulting table for those values.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_type_colors">type_colors</code></td>
<td>
<p>A named character vector with two entries,
<code>color</code> and <code>background</code>, defining the color scheme
for type headlines.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_space">space</code></td>
<td>
<p>Character, a space definition to put between currency and value.</p>
</td></tr>
<tr><td><code id="kbl_by_types_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to <code><a href="kableExtra.html#topic+kbl">kbl</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>kable</code>.
</p>

<hr>
<h2 id='loan+2C-class'>S4 Class loan</h2><span id='topic+loan+2C-class'></span><span id='topic+loan'></span><span id='topic+loan-class'></span><span id='topic+initialize+2Cloan-method'></span>

<h3>Description</h3>

<p>This is a special case of the generic class <code><a href="#topic+transaction-class">transaction</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'loan'
initialize(
  .Object,
  type,
  category,
  name,
  amount,
  period,
  interest,
  first_month = format(Sys.Date(), "%Y.%m"),
  schedule = c("annuity", "amortization", "maturity"),
  due_month = NA,
  valid_types = "default",
  value
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loan+2B2C-class_+3A_.object">.Object</code></td>
<td>
<p>The object to initialize.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_type">type</code></td>
<td>
<p>A character string defining the type of transaction as defined by <code>valid_types</code>.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_name">name</code></td>
<td>
<p>A character string, custom name or ID for this transaction.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_amount">amount</code></td>
<td>
<p>Numeric, the amount of money loaned.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_period">period</code></td>
<td>
<p>Integer, number of months to fully repay the loan.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_interest">interest</code></td>
<td>
<p>Numeric, the nominal interest rate per annum (a value between 0 and 1).</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_first_month">first_month</code></td>
<td>
<p>Character string in <code>YYYY.MM</code> format,
defining the initial date of the loan.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_schedule">schedule</code></td>
<td>
<p>One of the following, defining the repayment schedule:
</p>

<ul>
<li><p><code>"annuity"</code>: Equal rates of total repayment over <code>period</code>,
thereby interest is relatively higher
and principal payment relatively lower at the beginning.
</p>
</li>
<li><p><code>"amortization"</code>: Repayment of equal rates of principal payment with decreasing interest and total payments over <code>period</code>.
</p>
</li>
<li><p><code>"maturity"</code>: Repayment of the full loan amount at the end of <code>period</code>,
until then only payment of interest.
</p>
</li></ul>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_due_month">due_month</code></td>
<td>
<p>Integer value defining the first month of principal repayment. The selected <code>schedule</code> will not begin before this month,
until then only interest rates are due.
Beware that this is a different behaviour of this argument compared to <code><a href="#topic+transaction-class">transaction</a></code>.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string,
the model types defined by <code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="loan+2B2C-class_+3A_value">value</code></td>
<td>
<p>A valid data frame to be used as the value slot directly,
omitting calculation via <code>amount</code>, <code>period</code>, <code>interest</code>, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In contrast to <code><a href="#topic+revenue-class">revenue</a></code> or <code><a href="#topic+expense-class">expense</a></code>,
the time range of this class of objects is defined by details of the loan as specified. Only when used as
an aspect of an <code><a href="#topic+operations-class">operations</a></code> class object,
this range is adjusted
to fit that particular object.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>A character string,
for valid values see <code>valid_types</code>. You might use all valid types pre-defined for either
<code>revenue</code> or <code>expense</code>,
considering that you might be the loan giver or receiver.</p>
</dd>
<dt><code>category</code></dt><dd><p>A character string, custom category for this loan.</p>
</dd>
<dt><code>name</code></dt><dd><p>A character string, custom name or ID for this loan.</p>
</dd>
<dt><code>value</code></dt><dd><p>Data frame containing an amortization schedule for the loan,
each month in a row named <code>YYYY.MM</code>.
It has a row for each month and the columns <code>balance_start</code>, <code>interest</code>,
<code>principal</code>, <code>total</code>,
<code>cumsum</code>, and <code>balance_remain</code>.</p>
</dd>
<dt><code>valid_types</code></dt><dd><p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>loan(...)</code> can be used instead of
<code>new("loan", ...)</code>.
</p>


<h3>NA</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>loan(...)</code> can be used instead of
<code>new("loan", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>loan_2019 &lt;- loan(
    type="Interest",
    category="Bank",
    name="New office",
    amount=10000,
    period=60,
    interest=0.075,
    first_month="2019.04",
    schedule=c("amortization")
)

# turn loan object into an expense
loan_as_expense_2019 &lt;- as_transaction(
    loan_2019,
    to="expense",
    aspect="interest"
)
</code></pre>

<hr>
<h2 id='model2df'>Convert model from list to data frame</h2><span id='topic+model2df'></span><span id='topic+model2df+2Clist-method'></span><span id='topic+model2df+2C-methods'></span>

<h3>Description</h3>

<p>Converting a model from list format into a data frame makes it easier to work with nested sub-positions,
and to check the model for completeness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model2df(model = get_model(), factorize = TRUE)

## S4 method for signature 'list'
model2df(model = get_model(), factorize = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model2df_+3A_model">model</code></td>
<td>
<p>A named list describing a transaction model.</p>
</td></tr>
<tr><td><code id="model2df_+3A_factorize">factorize</code></td>
<td>
<p>Logical,
whether columns not representing a transaction type should be returned as a factor.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list provided must have named entries which form the top level of the transaction model.
Values are in turn a list with optional named arguments:
</p>

<ul>
<li><p><code>subpos</code> A named list, nested sub-position to this level,
structured like any higher level position.
</p>
</li>
<li><p><code>carry</code> Name of a previous position of the same level,
its value is used as the starting value of this position.
</p>
</li>
<li><p><code>revenue</code> Character vecotor of valid revenue types,
their values are added to the position total.
</p>
</li>
<li><p><code>expense</code> Character vecotor of valid expense types,
their values are subtracted from the position total.
</p>
</li></ul>



<h3>Value</h3>

<p>A data frame,
representing the model structure that was defined with <code><a href="#topic+table_model">table_model</a></code>.
</p>

<hr>
<h2 id='nice_numbers'>Format numbers in nice layout</h2><span id='topic+nice_numbers'></span>

<h3>Description</h3>

<p>Uses <code><a href="base.html#topic+format">format</a></code> with some customized defaults.
It's being called by <code><a href="#topic+kable_bpR">kable_bpR</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nice_numbers(
  x,
  prefix,
  suffix,
  digits = 0L,
  width = NULL,
  nsmall = digits,
  space = c(html = "&amp;#8239;", latex = "\\,")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nice_numbers_+3A_x">x</code></td>
<td>
<p>The numeric value to format. Can be a single number, numeric vector, matrix,
or data frame.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_prefix">prefix</code></td>
<td>
<p>An optional symbol to prepend, ignored if missing.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_suffix">suffix</code></td>
<td>
<p>An optional symbol to append, ignored if missing.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_digits">digits</code></td>
<td>
<p>See <code><a href="base.html#topic+round">round</a></code>.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_width">width</code></td>
<td>
<p>See <code><a href="base.html#topic+format">format</a></code>.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_nsmall">nsmall</code></td>
<td>
<p>See <code><a href="base.html#topic+format">format</a></code>.</p>
</td></tr>
<tr><td><code id="nice_numbers_+3A_space">space</code></td>
<td>
<p>Named character vector,
a space definition to put between prefix/suffix and value.
Defaults to a thin space for both, LaTeX and HTML.
If you use provide one character, that one is used regardless of the output environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>nice_numbers(12345.6789, suffix="€", digits=2)
</code></pre>

<hr>
<h2 id='operations+2C-class'>S4 Class operations</h2><span id='topic+operations+2C-class'></span><span id='topic+operations'></span><span id='topic+operations-class'></span>

<h3>Description</h3>

<p>This class is used for objects that contain all transactions of the business plan.
</p>


<h3>Slots</h3>


<dl>
<dt><code>period</code></dt><dd><p>A character vector defining beginning and end of the time period covered by the business plan.
Values can either be a vector of two in <code>YYYY.MM</code> format,
or a numeric vector of full fiscal years which will automatically be
transformed into character.</p>
</dd>
<dt><code>revenue</code></dt><dd><p>Data frame containing <code>type</code>, <code>category</code>, <code>name</code>,
and all revenues,
each month in a column named <code>YYYY.MM</code>. If these are not covering <code>period</code> exactly, missing values will be set to zero.</p>
</dd>
<dt><code>expense</code></dt><dd><p>Data frame containing all expenses,
data structure like the <code>revenue</code> slot.</p>
</dd>
<dt><code>loan</code></dt><dd><p>Data frame,
basically the <code>plan</code> slot as in <code><a href="#topic+transaction_plan-class">transaction_plan</a></code> with
<code>plan_type="loan"</code>.</p>
</dd>
<dt><code>depreciation</code></dt><dd><p>Data frame, like <code>loan</code>,
but with <code>plan_type="depreciation"</code>, respectively.</p>
</dd>
<dt><code>misc</code></dt><dd><p>A list to keep miscellaneous data or information for documentation or re-use.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>operations(...)</code> can be used instead of
<code>new("operations", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rev_2019_2021_merch &lt;- revenue(
   type="Sale",
   category="Merch",
   name="T-Shirts",
   "2019.01"=100,
   "2019.08"=267,
   "2020.03"=344,
   "2020.09"=549,
   "2021.02"=770,
   "2021.07"=1022,
   "2021.12"=1263
)
rev_2019_2021_rec &lt;- revenue(
   type="Sale",
   category="Records",
   name="Albums",
   "2019.01"=220,
   "2019.08"=234,
   "2020.03"=221,
   "2020.09"=354,
   "2021.02"=276,
   "2021.07"=285,
   "2021.12"=311
)
rev_2019_2021_inv &lt;- revenue(
   type="Invest income",
   category="Rent",
   name="Studio",
   "2019.01"=120,
   "2019.08"=234,
   "2020.03"=321,
   "2020.09"=454,
   "2021.02"=376,
   "2021.07"=385,
   "2021.12"=211
)
exp_2019_2021_merch &lt;- expense(
   type="Goods",
   category="Merch",
   name="T-Shirts",
   "2019.01"=65,
   "2019.07"=170,
   "2020.02"=210,
   "2020.08"=312,
   "2021.01"=450,
   "2021.06"=600,
   "2021.12"=720
)
exp_2019_2021_rec &lt;- expense(
   type="Goods",
   category="Records",
   name="Pressing",
   "2019.01"=1860,
   "2019.02"=0,
   "2020.08"=600,
   "2020.09"=0,
   "2021.12"=0
)

op_2019_2021 &lt;- operations(
    period=c("2019.01", "2021.12") # alternative: 2019:2021
) 
update_operations(op_2019_2021) &lt;- rev_2019_2021_merch
update_operations(op_2019_2021) &lt;- exp_2019_2021_merch
update_operations(op_2019_2021) &lt;- rev_2019_2021_rec
update_operations(op_2019_2021) &lt;- exp_2019_2021_rec
update_operations(op_2019_2021) &lt;- rev_2019_2021_inv
</code></pre>

<hr>
<h2 id='permalink2list'>Turn a Shiny permalink into a list</h2><span id='topic+permalink2list'></span>

<h3>Description</h3>

<p>The Shiny package can generate permalinks of its web apps,
making it possible to share individual configurations
of the app with others. This function translated such a permalink into a named list,
so you can use the configuration
also in R code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>permalink2list(permalink, prefix = ".*\\?_inputs_&amp;")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="permalink2list_+3A_permalink">permalink</code></td>
<td>
<p>Character string,
the actual URL with arguments copied from the Shiny app as-is.</p>
</td></tr>
<tr><td><code id="permalink2list_+3A_prefix">prefix</code></td>
<td>
<p>Character string or regular expression,
should capture everything up to the first argument name.
This is the part that will be discarded.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When this package was written,
we also wrote a Shiny web app for it but separated the actual calculations from the app's code.
This allowed us to use the same functions and objects in RMarkdown. We were discussing the numbers in the web tool
using permalinks, and finally transferred the calculations to the PDF version.
</p>
<p>To transfer the configuration from the web app to the markdown document,
this function discards the URL prefix and splits
the arguments into a named list that behaves like the input object commonly used in Shiny apps.
</p>


<h3>Value</h3>

<p>A named list with one element for each argument in <code>permalink</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>permalink2list(
  paste0(
    "https://example.com/businessPlanR/?_inputs_&amp;salary=50000",
    "&amp;loan_interest=3.22&amp;loan_period=7&amp;loan_due=2&amp;years=%5B%222022%22%2C%222026%22%5D"
  )
)
</code></pre>

<hr>
<h2 id='regularly'>Generate list of repeating financial transactions</h2><span id='topic+regularly'></span>

<h3>Description</h3>

<p>For all years defined, generates a list of values as defined by <code>pa</code>
and due at the given month. The result can be used as input for the
<code>.list</code> argument of <code><a href="#topic+expense">expense</a></code>,
<code><a href="#topic+revenue">revenue</a></code>,
and <code><a href="#topic+transaction">transaction</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regularly(
  years,
  pa,
  month = "01",
  last = 0,
  first = 0,
  merge = list(),
  digits = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regularly_+3A_years">years</code></td>
<td>
<p>Integer vector, the range of years to cover.</p>
</td></tr>
<tr><td><code id="regularly_+3A_pa">pa</code></td>
<td>
<p>A vector with values for each year. This amounts to the total sum for the respective year.</p>
</td></tr>
<tr><td><code id="regularly_+3A_month">month</code></td>
<td>
<p>Character,
but numeric description of a month in &quot;MM&quot; format when to account the values of <code>pa</code>.
If you provide more than a single month here, e.g., quarterly payments,
the amounts defined by <code>pa</code> are
divided the number of months.</p>
</td></tr>
<tr><td><code id="regularly_+3A_last">last</code></td>
<td>
<p>Defines the final entry, last month of the last year. It can be either
a numeric value (taken as-is), <code>"rep"</code> (repeats the last value of pa),
or <code>"none"</code> to omit adding a last month (e.g.,
to later merge with results of another call to this function).
Only used if month is not &quot;12&quot;.</p>
</td></tr>
<tr><td><code id="regularly_+3A_first">first</code></td>
<td>
<p>Defines how to treat years if January was included in in <code>month</code>. This could be desired for merging,
but problematic if you want to create a new transaction object. Valid values are the same as for <code>last</code> except
<code>"rep"</code>.</p>
</td></tr>
<tr><td><code id="regularly_+3A_merge">merge</code></td>
<td>
<p>Another list of values to be merged with the results,
can be used for nested calls of this function to
generate more complex patterns.</p>
</td></tr>
<tr><td><code id="regularly_+3A_digits">digits</code></td>
<td>
<p>Number of digits used for rounding when <code>month</code> is more than one entry.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of monthly transactions named in &quot;YYYY.MM&quot; scheme (<code>regularly_delayed</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>expense(
    type="Operation",
    category="Insurance",
    name="Electronics",
    missing="0",
    .list=regularly(
        years=2021:2025,
        pa=rep(111.11, 5),
        month="01",
        last=0
    )
)
</code></pre>

<hr>
<h2 id='regularly_delayed'>Generate list of repeating financial transactions with delayed starting month</h2><span id='topic+regularly_delayed'></span><span id='topic+delayed'></span>

<h3>Description</h3>

<p>In case you only know the annual sum of transactions for given years but also that they
don't begin in January of the first year,
you can use the function <code>regularly_delayed</code> to split the sums
to be used in revenue or expense objects that acknowledge the delay.
It extends <code><a href="#topic+regularly">regularly</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regularly_delayed(years, pa, start_month = 1)

delayed(pa, start_month = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regularly_delayed_+3A_years">years</code></td>
<td>
<p>See <code><a href="#topic+regularly">regularly</a></code>.</p>
</td></tr>
<tr><td><code id="regularly_delayed_+3A_pa">pa</code></td>
<td>
<p>See <code><a href="#topic+regularly">regularly</a></code>.</p>
</td></tr>
<tr><td><code id="regularly_delayed_+3A_start_month">start_month</code></td>
<td>
<p>Integer number,
the month of the first revenue/expense. All earlier monthly transactions will be 0
and the sum for the respective year divided by the number months left for that year.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>delayed</code> function assumes <code>pa</code> to be a total value for a full year,
but does not distribute it evenly
over the active months,
but rather subtracts any amount that would have been due before <code>start_month</code>.
</p>


<h3>Value</h3>

<p>Either a list of monthly transactions named in &quot;YYYY.MM&quot; scheme (<code>regularly_delayed</code>),
or
vector of the same length as <code>pa</code> (<code>delayed</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># say you earn 3000 each year, but payment starts in September
# calculate payment sums
delayed_2019_2021 &lt;- delayed(
   pa=rep(3000, 3),
   start_month=9
)

# now use the result to caclulate monthly amounts
delayed_monthly_2019_2021 &lt;- regularly_delayed(
   years=2019:2021,
   pa=delayed_2019_2021,
   start_month=9
)
</code></pre>

<hr>
<h2 id='revenue+2C-class'>S4 Class revenue</h2><span id='topic+revenue+2C-class'></span><span id='topic+revenue'></span><span id='topic+revenue-class'></span><span id='topic+initialize+2Crevenue-method'></span>

<h3>Description</h3>

<p>This is a special case of the generic class <code><a href="#topic+transaction-class">transaction</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'revenue'
initialize(
  .Object,
  type,
  category,
  name,
  per_use,
  missing = c("rep", "interpol", "0"),
  due_month = NA,
  valid_types = "default",
  ...,
  .list = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="revenue+2B2C-class_+3A_.object">.Object</code></td>
<td>
<p>The object to initialize.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_type">type</code></td>
<td>
<p>A character string defining the type of transaction as defined by <code>valid_types</code>.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_name">name</code></td>
<td>
<p>A character string, custom name or ID for this transaction.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_per_use">per_use</code></td>
<td>
<p>If given, the numbers provided via <code>...</code> (or <code>.list</code>) are
not interpreted as the monetary value, but as number of transactions in that
month, and the actual fiscal value is calculated by multiplying it with the value
given here.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_missing">missing</code></td>
<td>
<p>One of <code>"rep"</code>, <code>"interpol"</code>, or <code>"0"</code>.
This defines how gaps are filled: If <code>"rep"</code>, present values are repeated
until the next valid value; if <code>"interpol"</code>, missing values are interpolated
using <code>approx</code>; if <code>"0"</code>, missing values are set to zero.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_due_month">due_month</code></td>
<td>
<p>Character vector to define months where transactions are due. This argument
causes previous amounts to be cumulated and thereby postponed to the given month of a year.
Combined with e.g. <code>.list</code> this makes it easier to turn monthly amounts into quarterly
ones.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_...">...</code></td>
<td>
<p>Numeric values named in <code>YYYY.MM</code> format,
defining the transaction amount for a particular month.
The resulting object will automatically cover all months from the earliest to the latest among all given values.</p>
</td></tr>
<tr><td><code id="revenue+2B2C-class_+3A_.list">.list</code></td>
<td>
<p>An alternative to <code>...</code> if the values are already present as a list. If both are given,
their values
will be merged into one list.</p>
</td></tr>
</table>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>A character string, for valid values see <code>valid_types</code>.</p>
</dd>
<dt><code>category</code></dt><dd><p>A character string, custom category for this revenue.</p>
</dd>
<dt><code>name</code></dt><dd><p>A character string, custom name or ID for this revenue.</p>
</dd>
<dt><code>value</code></dt><dd><p>Data frame containing all revenues,
each month in a column named <code>YYYY.MM</code>.</p>
</dd>
<dt><code>valid_types</code></dt><dd><p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>revenue(...)</code> can be used instead of
<code>new("revenue", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rev_2019_2021 &lt;- revenue(
   type="Sale",
   category="Merch",
   name="T-Shirts",
   "2019.03"=100,
   "2019.08"=267,
   "2020.03"=344,
   "2020.09"=549,
   "2021.02"=770,
   "2021.07"=1022,
   "2021.10"=1263
)
</code></pre>

<hr>
<h2 id='set_types'>Define valid types of revenues and expenses</h2><span id='topic+set_types'></span><span id='topic+get_types'></span><span id='topic+get_model'></span>

<h3>Description</h3>

<p>These functions change the globally available options of the running R session.
Its values define types of transactions you want to be able to use in your
business plan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_types(types, class = c("revenue", "expense"), name = "default")

get_types(
  name = "default",
  class = c("revenue", "expense"),
  names_only = FALSE
)

get_model()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_types_+3A_types">types</code></td>
<td>
<p>Named list,
one entry for each type. Values define the color to use in plots.</p>
</td></tr>
<tr><td><code id="set_types_+3A_class">class</code></td>
<td>
<p>One of <code>"revenue"</code> or <code>"expense"</code>.</p>
</td></tr>
<tr><td><code id="set_types_+3A_name">name</code></td>
<td>
<p>Character string,
giving the set of types a name. You can use this to have multiple
sets of types simultaneously in the same session.</p>
</td></tr>
<tr><td><code id="set_types_+3A_names_only">names_only</code></td>
<td>
<p>Logical,
whether the full list or only the names of defined types should be returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The getter functions return a list of default types if none have been defined so far.
</p>


<h3>Value</h3>

<p><code>set_types</code> is a wrapper for <code><a href="base.html#topic+options">options</a></code> and adds/replaces a list
called <code>name</code> to the <code>businessPlanR</code> option of the running session.
<code>get_types</code> returns the list from the <code>businessPlanR</code> option.
<code>get_model</code> just returns the internal definition of default operations model as a list.
</p>

<hr>
<h2 id='table_model'>Define a model node for business plan tables</h2><span id='topic+table_model'></span><span id='topic+model_node'></span>

<h3>Description</h3>

<p>Tool to define a (possibly nested) model for generating tables for our business plan. The &quot;model&quot; is in fact a nested list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_model(..., valid_types, check_carry = TRUE)

model_node(carry, ..., revenue, expense)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_model_+3A_...">...</code></td>
<td>
<p>Optional named lists of nodes (<code>table_model</code>) or nested sub-nodes (<code>model_node</code>),
like subsections of this
section. You can use <code>model_node</code> recursive to define these named nodes. Just don't forget to give each a unique name.</p>
</td></tr>
<tr><td><code id="table_model_+3A_valid_types">valid_types</code></td>
<td>
<p>Optional character string,
the name of the type set to use for checking if all used revenue and expense
names are actually valid.</p>
</td></tr>
<tr><td><code id="table_model_+3A_check_carry">check_carry</code></td>
<td>
<p>Logical,
if <code>TRUE</code> all node names used und the nested list will be looked up if they are referenced by
<code>carry</code> somewhere down the line.</p>
</td></tr>
<tr><td><code id="table_model_+3A_carry">carry</code></td>
<td>
<p>Optional character string, the name of another already defined named list,
probably at the same level. The sum of that
list will then be used as the initial value for the calculation of this node.</p>
</td></tr>
<tr><td><code id="table_model_+3A_revenue">revenue</code></td>
<td>
<p>Optional character vector defining names defined as class revenue via <code><a href="#topic+set_types">set_types</a></code>.</p>
</td></tr>
<tr><td><code id="table_model_+3A_expense">expense</code></td>
<td>
<p>Optional character vector defining names defined as class expense via <code><a href="#topic+set_types">set_types</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you define nested levels,
you want to probably only want to combine this node with <code>carry</code> and neither <code>revenue</code>
nor <code>expense</code>.
</p>


<h3>Value</h3>

<p>A nested, named list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_model &lt;- table_model(
  "Basic Income"=model_node(
    revenue="Sale"
  ),
  "Basic Costs"=model_node(
    carry="Basic Income",
    expense=c(
      "Goods",
      "Operation"
    )
  ),
  valid_types="default",
  check_carry=TRUE
)
</code></pre>

<hr>
<h2 id='transaction_plan+2C-class'>S4 Class transaction_plan</h2><span id='topic+transaction_plan+2C-class'></span><span id='topic+transaction_plan'></span><span id='topic+transaction_plan-class'></span>

<h3>Description</h3>

<p>This is a container class for multiple objects of either class <code><a href="#topic+depreciation-class">depreciation</a></code> or
<code><a href="#topic+loan-class">loan</a></code>,
similar to <code><a href="#topic+operations-class">operations</a></code> for revenues and expenses.
Its main data frame stores each transaction object in multiple rows.
Investment have three rows, <code>investment</code>, <code>depreciation</code>,
and remaining <code>value</code>, while loans have six named
<code>balance_start</code>, <code>interest</code>, <code>principal</code>, <code>total</code>, <code>cumsum</code>,
and <code>balance_remain</code>, repectively.
This makes it easier to create nice overview tables via <code><a href="#topic+kable_bpR">kable_bpR</a></code>.
</p>


<h3>Details</h3>

<p>The data frame has four meta data columns, <code>type</code>, <code>category</code>, <code>name</code>,
and <code>part</code>, followed by a column for each month
covered by any of the contained <code>transaction</code> objects. The first three columns take their values from the respective object,
while
the fourth, <code>part</code>, defines the rows as explained earlier.
</p>


<h3>Slots</h3>


<dl>
<dt><code>plan_type</code></dt><dd><p>One of <code>"depreciation"</code> or <code>"loan"</code>,
defining which type of transactions are accumulated in the object.</p>
</dd>
<dt><code>plan</code></dt><dd><p>A data frame with three rows for each <code><a href="#topic+depreciation-class">depreciation</a></code> or
six for each <code><a href="#topic+loan-class">loan</a></code> class object added to it, e.g.,
via <code><a href="#topic+update_plan">update_plan</a></code>.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>transaction_plan(...)</code> can be used instead of
<code>new("transaction_plan", ...)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>depreciation_printer &lt;- depreciation(
    type="Depreciation",
    category="Office",
    name="Printer",
    amount=100,
    obsolete=36,
    invest_month="2019.04"
)
depreciation_laptop &lt;- depreciation(
    type="Depreciation",
    category="Office",
    name="Laptop",
    amount=1200,
    obsolete=36,
    invest_month="2019.02"
)
# initialize an empty plan
dep_plan &lt;- transaction_plan()
# add your assets to the plan
update_plan(dep_plan) &lt;- depreciation_printer
update_plan(dep_plan) &lt;- depreciation_laptop
</code></pre>

<hr>
<h2 id='transaction+2C-class'>S4 Class transaction</h2><span id='topic+transaction+2C-class'></span><span id='topic+transaction'></span><span id='topic+transaction-class'></span><span id='topic+initialize+2Ctransaction-method'></span>

<h3>Description</h3>

<p>This is a generic class used by subclasses <code><a href="#topic+revenue-class">revenue</a></code> and <code><a href="#topic+expense-class">expense</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'transaction'
initialize(
  .Object,
  type,
  category,
  name,
  per_use,
  missing = c("rep", "interpol", "0"),
  due_month = NA,
  valid_types = "default",
  ...,
  .list = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transaction+2B2C-class_+3A_.object">.Object</code></td>
<td>
<p>The object to initialize.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_type">type</code></td>
<td>
<p>A character string defining the type of transaction as defined by <code>valid_types</code>.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_category">category</code></td>
<td>
<p>A character string, custom category for this transaction.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_name">name</code></td>
<td>
<p>A character string, custom name or ID for this transaction.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_per_use">per_use</code></td>
<td>
<p>If given, the numbers provided via <code>...</code> (or <code>.list</code>) are
not interpreted as the monetary value, but as number of transactions in that
month, and the actual fiscal value is calculated by multiplying it with the value
given here.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_missing">missing</code></td>
<td>
<p>One of <code>"rep"</code>, <code>"interpol"</code>, or <code>"0"</code>.
This defines how gaps are filled: If <code>"rep"</code>, present values are repeated
until the next valid value; if <code>"interpol"</code>, missing values are interpolated
using <code>approx</code>; if <code>"0"</code>, missing values are set to zero.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_due_month">due_month</code></td>
<td>
<p>Character vector to define months where transactions are due. This argument
causes previous amounts to be cumulated and thereby postponed to the given month of a year.
Combined with e.g. <code>.list</code> this makes it easier to turn monthly amounts into quarterly
ones.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_valid_types">valid_types</code></td>
<td>
<p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.
If <code>"default"</code>, pre-defined example types are used.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_...">...</code></td>
<td>
<p>Numeric values named in <code>YYYY.MM</code> format,
defining the transaction amount for a particular month.
The resulting object will automatically cover all months from the earliest to the latest among all given values.</p>
</td></tr>
<tr><td><code id="transaction+2B2C-class_+3A_.list">.list</code></td>
<td>
<p>An alternative to <code>...</code> if the values are already present as a list. If both are given,
their values
will be merged into one list.</p>
</td></tr>
</table>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>A character string, valid values are defined by the subclasses.</p>
</dd>
<dt><code>category</code></dt><dd><p>A character string, custom category for this transaction.</p>
</dd>
<dt><code>name</code></dt><dd><p>A character string, custom name or ID for this transaction.</p>
</dd>
<dt><code>value</code></dt><dd><p>Data frame containing all transactions,
each month of each year in a column named <code>YYYY.MM</code>.</p>
</dd>
<dt><code>valid_types</code></dt><dd><p>A character string, the model types defined by
<code><a href="#topic+set_types">set_types</a></code> to be used for validation.</p>
</dd>
</dl>


<h3>Constructor function</h3>

<p>Should you need to manually generate objects of this class, the constructor function 
<code>transaction(...)</code> can be used instead of <code>new("transaction", ...)</code>. It
uses the same arguments like the <code>initialize()</code> method.
</p>
<p>You should either provide exactly one named value for each month of the full scope
of the respective business plan, or at least two, representing the first and last
value.
</p>


<h3>Missing values</h3>

<p>How missing values are dealt with depends on the value of the <code>missing</code> parameter.
By default (<code>missing="rep"</code>) a given value will be repeated until a later value comes,
which will then be repeated further on. That is,
you can define a staring value and only have to
provide updated values for months that differ from the previous value.
Alternatively, <code>missing="interpol"</code> will interpolate missing values linearly, and
<code>missing="0"</code> fills missing values with zeroes.
</p>

<hr>
<h2 id='update_operations+26lt+3B-'>Update operations objects</h2><span id='topic+update_operations+3C-'></span><span id='topic+update_operations+3C-+2Coperations-method'></span><span id='topic+update_operations+3C-+2C-methods'></span>

<h3>Description</h3>

<p>You can use this method to add or replace transactions to an existing object of class
<code><a href="#topic+operations-class">operations</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_operations(obj, cut_to_period = TRUE, warning = FALSE, as_transaction) &lt;- value

## S4 replacement method for signature 'operations'
update_operations(obj, cut_to_period = TRUE, warning = FALSE,
      as_transaction) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_operations+2B26lt+2B3B-_+3A_obj">obj</code></td>
<td>
<p>An object of class <code><a href="#topic+operations-class">operations</a></code>.</p>
</td></tr>
<tr><td><code id="update_operations+2B26lt+2B3B-_+3A_cut_to_period">cut_to_period</code></td>
<td>
<p>Logical,
whether to adjust the data of <code>value</code> to the period covered by <code>obj</code>. This means that missing months
will be added with zero values,
and months that lie beyond the covered period will be dropped.
This only affects objects of class <code>revenue</code> and <code>expense</code>.</p>
</td></tr>
<tr><td><code id="update_operations+2B26lt+2B3B-_+3A_warning">warning</code></td>
<td>
<p>Logical,
if <code>TRUE</code> shows a warning when <code>cut_to_period=TRUE</code> and months are adjusted.</p>
</td></tr>
<tr><td><code id="update_operations+2B26lt+2B3B-_+3A_as_transaction">as_transaction</code></td>
<td>
<p>Optional list of vectors of arguments for <code>value</code> of class <code><a href="#topic+loan-class">loan</a></code> or
<code><a href="#topic+depreciation-class">depreciation</a></code>,
as used by <code><a href="#topic+as_transaction">as_transaction</a></code>.
If given,
the object provided as <code>value</code> will also be processed as if <code>as_transaction</code> was also called. This is repeated
for each vector of arguments.</p>
</td></tr>
<tr><td><code id="update_operations+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>An object of either class <code><a href="#topic+revenue-class">revenue</a></code>,
<code><a href="#topic+expense-class">expense</a></code>,
<code><a href="#topic+loan-class">loan</a></code>,
<code><a href="#topic+depreciation-class">depreciation</a></code>, or
<code><a href="#topic+transaction_plan-class">transaction_plan</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated object of class <code>operations</code>.
</p>

<hr>
<h2 id='update_plan+26lt+3B-'>Update transaction_plan objects</h2><span id='topic+update_plan+3C-'></span><span id='topic+update_plan'></span><span id='topic+update_plan+3C-+2Ctransaction_plan-method'></span><span id='topic+update_plan+3C-+2C-methods'></span>

<h3>Description</h3>

<p>You can use this method to add or replace <code><a href="#topic+depreciation-class">depreciation</a></code> or
<code><a href="#topic+loan-class">loan</a></code> class objects to/in an existing object of class
<code><a href="#topic+transaction_plan-class">transaction_plan</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_plan(obj) &lt;- value

## S4 replacement method for signature 'transaction_plan'
update_plan(obj) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_plan+2B26lt+2B3B-_+3A_obj">obj</code></td>
<td>
<p>An object of class <code><a href="#topic+transaction_plan-class">transaction_plan</a></code>.</p>
</td></tr>
<tr><td><code id="update_plan+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>An object of class <code><a href="#topic+depreciation-class">depreciation</a></code> or
<code><a href="#topic+loan-class">loan</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated object of class <code>transaction_plan</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>depreciation_printer &lt;- depreciation(
    type="Depreciation",
    category="Office",
    name="Printer",
    amount=100,
    obsolete=36,
    invest_month="2019.04"
)
depreciation_laptop &lt;- depreciation(
    type="Depreciation",
    category="Office",
    name="Laptop",
    amount=1200,
    obsolete=36,
    invest_month="2019.02"
)
# initialize an empty plan
dep_plan &lt;- transaction_plan()
# add your assets to the plan
update_plan(dep_plan) &lt;- depreciation_printer
update_plan(dep_plan) &lt;- depreciation_laptop
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
