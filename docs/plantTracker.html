<!DOCTYPE html><html><head><title>Help for package plantTracker</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {plantTracker}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#plantTracker-package'>
<p>Extract Demographic and Competition Data from Fine-Scale Maps</p></a></li>
<li><a href='#aggregateByGenet'><p>aggregateByGenet</p></a></li>
<li><a href='#assign'><p>Tracks genets through time</p></a></li>
<li><a href='#checkDat'><p>checkDat</p></a></li>
<li><a href='#drawQuadMap'><p>Create maps of a quadrat over time</p></a></li>
<li><a href='#getBasalAreas'><p>Calculates basal area for each species in a quadrat</p></a></li>
<li><a href='#getLambda'><p>Calculates lambda, the population growth rate, for each species in a quadrat</p>
based on changes in basal cover.</a></li>
<li><a href='#getNeighbors'><p>Calculates local neighborhood density around each individual in a</p>
mapped dataset</a></li>
<li><a href='#getRecruits'><p>Calculates the number of recruits of each species per year in each quadrat</p></a></li>
<li><a href='#grasslandData'><p>Chart Quadrat Dataset for grassland species in MT and AZ</p>
An example dataset that contains data from mapped plant chart quadrats. Each
row is an observation of one plant.</a></li>
<li><a href='#grasslandInventory'><p>A dataset indicating sampling years for the grasslandData example dataset</p></a></li>
<li><a href='#groupByGenet'><p>Group polygon observations together into a 'genet' based on proximity</p></a></li>
<li><a href='#trackSpp'><p>Tracks genets through time for multiple species and sites</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Extract Demographic and Competition Data from Fine-Scale Maps</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-05-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Alice Stears <a href="https://orcid.org/0000-0002-1325-6641"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Jared Studyvin [aut],
  David Atkins [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alice Stears &lt;alice.e.stears@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Extracts growth, survival, and local neighborhood density 
  information from repeated, fine-scale maps of organism occurrence. Further 
  information about this package can be found in our journal article, 
  "plantTracker: An R package to translate maps of plant occurrence into 
  demographic data" published in 2022 in Methods in Ecology and Evolution 
  (Stears, et al., 2022) &lt;<a href="https://doi.org/10.1111%2F2041-210X.13950">doi:10.1111/2041-210X.13950</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/aestears/plantTracker">https://github.com/aestears/plantTracker</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, rmarkdown, spelling, minidown,
ggplot2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>Matrix, igraph, sf, methods, stats, graphics, grDevices, units</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-05 18:03:42 UTC; alicestears</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-05 18:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='plantTracker-package'>
Extract Demographic and Competition Data from Fine-Scale Maps
</h2><span id='topic+plantTracker-package'></span><span id='topic+plantTracker'></span>

<h3>Description</h3>

<p>Extracts growth, survival, and local neighborhood density 
  information from repeated, fine-scale maps of organism occurrence. Further 
  information about this package can be found in our journal article, 
  &quot;plantTracker: An R package to translate maps of plant occurrence into 
  demographic data&quot; published in 2022 in Methods in Ecology and Evolution 
  (Stears, et al., 2022) &lt;doi:10.1111/2041-210X.13950&gt;. 
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> plantTracker</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Extract Demographic and Competition Data from Fine-Scale Maps</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-05-03</td>
</tr>
<tr>
 <td style="text-align: left;">
Authors@R: </td><td style="text-align: left;"> c(person(given = "Alice",
           family = "Stears",
           role = c("aut", "cre"),
           email = "alice.e.stears@gmail.com",
           comment = c(ORCID = "0000-0002-1325-6641")),
    person(given = "Jared",
           family = "Studyvin",
           role = c("aut"),
           email = "studyvin@uwyo.edu"),
    person(given = "David", 
           family = "Atkins", 
           role = c("aut"), 
           email = "datkins8@uwyo.edu"))</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Alice Stears [aut, cre] (&lt;https://orcid.org/0000-0002-1325-6641&gt;), Jared Studyvin [aut], David Atkins [aut]</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Alice Stears &lt;alice.e.stears@gmail.com&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> Extracts growth, survival, and local neighborhood density 
  information from repeated, fine-scale maps of organism occurrence. Further 
  information about this package can be found in our journal article, 
  "plantTracker: An R package to translate maps of plant occurrence into 
  demographic data" published in 2022 in Methods in Ecology and Evolution 
  (Stears, et al., 2022) &lt;doi:10.1111/2041-210X.13950&gt;. </td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> MIT + file LICENSE</td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> https://github.com/aestears/plantTracker</td>
</tr>
<tr>
 <td style="text-align: left;">
Encoding: </td><td style="text-align: left;"> UTF-8</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyData: </td><td style="text-align: left;"> true</td>
</tr>
<tr>
 <td style="text-align: left;">
Roxygen: </td><td style="text-align: left;"> list(markdown = TRUE)</td>
</tr>
<tr>
 <td style="text-align: left;">
RoxygenNote: </td><td style="text-align: left;"> 7.2.3</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 2.10)</td>
</tr>
<tr>
 <td style="text-align: left;">
Suggests: </td><td style="text-align: left;"> testthat (&gt;= 3.0.0),
knitr,
rmarkdown,
spelling,
minidown,
ggplot2</td>
</tr>
<tr>
 <td style="text-align: left;">
Config/testthat/edition: </td><td style="text-align: left;"> 3</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> Matrix,
igraph,
sf,
methods,
stats,
graphics,
grDevices,
units</td>
</tr>
<tr>
 <td style="text-align: left;">
VignetteBuilder: </td><td style="text-align: left;"> knitr</td>
</tr>
<tr>
 <td style="text-align: left;">
Language: </td><td style="text-align: left;"> en-US</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
aggregateByGenet        aggregateByGenet
assign                  Tracks genets through time
checkDat                checkDat
drawQuadMap             Create maps of a quadrat over time
getBasalAreas           Calculates basal area for each species in a
                        quadrat
getLambda               Calculates lambda, the population growth rate,
                        for each species in a quadrat based on changes
                        in basal cover.
getNeighbors            Calculates local neighborhood density around
                        each individual in a mapped dataset
getRecruits             Calculates the number of recruits of each
                        species per year in each quadrat
grasslandData           Chart Quadrat Dataset for grassland species in
                        MT and AZ An example dataset that contains data
                        from mapped plant chart quadrats. Each row is
                        an observation of one plant.
grasslandInventory      A dataset indicating sampling years for the
                        grasslandData example dataset
groupByGenet            Group polygon observations together into a
                        'genet' based on proximity
plantTracker-package    Extract Demographic and Competition Data from
                        Fine-Scale Maps
trackSpp                Tracks genets through time for multiple species
                        and sites
</pre>


<h3>Author(s)</h3>

<p>Alice Stears [aut, cre] (&lt;https://orcid.org/0000-0002-1325-6641&gt;), Jared Studyvin [aut], David Atkins [aut]
</p>
<p>Maintainer: Alice Stears &lt;alice.e.stears@gmail.com&gt;
</p>


<h3>See Also</h3>

<p>Use the following code to see the vignette will guide you through using the plantTracker package
<code>vignette(topic = "Suggested_plantTracker_Workflow", package = "plantTracker")</code>
</p>
<p>Use the following code to see the vignette goes through the trackSpp() function step-by-step
<code>vignette(topic = "Using_the_plantTracker_trackSpp_function", package = "plantTracker")</code>
</p>

<hr>
<h2 id='aggregateByGenet'>aggregateByGenet</h2><span id='topic+aggregateByGenet'></span>

<h3>Description</h3>

<p>This function aggregates a data.frame by unique trackIDs so that
each row represents a genet (unique genetic individual) in a given year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggregateByGenet(
  dat,
  site = "Site",
  quad = "Quad",
  species = "Species",
  year = "Year",
  trackID = "trackID",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggregateByGenet_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame. Typically this is a data.frame that has been
returned from the <code><a href="#topic+trackSpp">trackSpp()</a></code> function, although 'dat' can be any sf
data.frame of organism demographic data in which each genet is given unique
identifying value (what we call here a 'trackID'). If 'dat' already only has
one row for each unique trackID in each unique year (i.e. there are no
vegetative individuals&ndash;no ramets), then the output of <code><a href="#topic+aggregateByGenet">aggregateByGenet()</a></code>
will have the same number of rows as 'dat'. If 'dat' has
multiple rows (each of which is a ramet) for the same trackID in the same
year, then the output of <code><a href="#topic+aggregateByGenet">aggregateByGenet()</a></code> will have fewer rows than the
input 'dat' data.frame. 'dat' MUST have columns called 'basalArea_genet',
'age', 'recruit', 'survives_tplus1', 'nearEdge', and 'size_tplus1', although
they can be populated with NAs. The <code><a href="#topic+trackSpp">trackSpp()</a></code> function adds these columns,
so if you have made no changes to the data.frame that was returned from
<code><a href="#topic+trackSpp">trackSpp()</a></code>, then your data.frame should have these columns already.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_site">site</code></td>
<td>
<p>A character string giving the name of the column in 'dat' that
contains the values for site. The default is &quot;Site&quot;.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_quad">quad</code></td>
<td>
<p>A character string giving the name of the column in 'dat' that
contains the values for quadrat. The default is &quot;Quad&quot;.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_species">species</code></td>
<td>
<p>A character string giving the name of the column in 'dat' that
contains the values for species. The default is &quot;Species&quot;.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_year">year</code></td>
<td>
<p>A character string giving the name of the column in 'dat' that
contains the values for year. The default is &quot;Year&quot;.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_trackid">trackID</code></td>
<td>
<p>A character string giving the name of the column in 'dat' that
contains the values for the unique identifier, or trackID. The default
is &quot;trackID&quot;.</p>
</td></tr>
<tr><td><code id="aggregateByGenet_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a <span class="pkg">plantTracker</span>-specific, user-friendly
wrapper for the 'aggregate' function. This function was designed for use
within the <code><a href="#topic+trackSpp">trackSpp</a></code> function, but can be also called
independently by the user. The function is designed to take a data.frame of
the same format that is returned by <code><a href="#topic+trackSpp">trackSpp()</a></code>, but it can be used to
aggregate any dataset by genet (or some other unique identifier), as long as
there is a column that identifies genet (or unique identifier) identity for
each observation.
</p>


<h3>Value</h3>

<p>An sf data.frame that has been aggregated by genet so that each row
represents one unique genetic individual in one year. This data.frame has
columns containing data for site, quadrat, species, year, and trackID, as
well as columns called 'basalArea_genet', 'age', 'recruit',
'survives_tplus1', 'nearEdge', and 'size_tplus1'. This data.frame will most
likely be shorter than the input 'dat', because a genet that was previously
broken into multiple rows representing each ramet in each year will now have
only one row in each year.
</p>


<h3>See Also</h3>

<p>This function is called inside the <code><a href="#topic+trackSpp">trackSpp()</a></code> function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == c("AZ") &amp;
 grasslandData$Species %in% c("Bouteloua rothrockii", "Calliandra eriophylla" ),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = FALSE
 )

aggregateByGenet(dat = outDat,
species = 'speciesName')
</code></pre>

<hr>
<h2 id='assign'>Tracks genets through time</h2><span id='topic+assign'></span>

<h3>Description</h3>

<p>This function tracks individual organisms through time, but only
for one species in one quadrat. It is designed for use within the
<code><a href="#topic+trackSpp">trackSpp</a></code> function, and is not intended for use on its own.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign(
  dat,
  inv,
  dorm,
  buff,
  buffGenet,
  clonal,
  flagSuspects = FALSE,
  shrink = 0.1,
  dormSize = 0.05,
  inheritsFromTrackSpp = FALSE,
  nearEdgeBox = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assign_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame of the same format as
<code><a href="#topic+grasslandData">grasslandData</a></code>. 'dat' must contain data for only one species in
one quadrat. It must have columns that contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a= polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>

<p>This function will add columns called &quot;basalArea_ramet&quot;, &quot;trackID&quot;,
&quot;age&quot;, &quot;size_tplus1&quot;, &quot;recruit&quot; and &quot;survives_tplus1&quot;, so 'dat' should not
contain columns with these names.</p>
</td></tr>
<tr><td><code id="assign_+3A_inv">inv</code></td>
<td>
<p>An integer vector that contains all of years in which this quadrat
(or other unique spatial area) was sampled. Years must be
ordered sequentially.</p>
</td></tr>
<tr><td><code id="assign_+3A_dorm">dorm</code></td>
<td>
<p>A numeric vector of length 1, indicating the number of years this
species is allowed to go dormant, i.e. be absent from the map but be
considered the same individual when it reappears. This must be an integer
greater than or equal to 0.</p>
</td></tr>
<tr><td><code id="assign_+3A_buff">buff</code></td>
<td>
<p>A numeric vector of length 1 that is greater than or equal to
zero, indicating how far (in the same units as spatial values in 'dat') a
polygon can move from year <code>t</code> to year <code>t+1</code> and still be
considered the same individual.</p>
</td></tr>
<tr><td><code id="assign_+3A_buffgenet">buffGenet</code></td>
<td>
<p>A numeric vector of length 1 that is greater than or equal
to zero, indicating how close (in the same units as spatial values in 'dat')
polygons must be to one another in the same year to be grouped as a genet
(if 'clonal' argument = TRUE). This argument is passed to
the <code><a href="#topic+groupByGenet">groupByGenet</a></code> function, which is used inside the
<code><a href="#topic+assign">assign</a></code> function.</p>
</td></tr>
<tr><td><code id="assign_+3A_clonal">clonal</code></td>
<td>
<p>A logical argument of length 1, indicating whether this
species is allowed to be clonal or not (i.e. if multiple polygons (ramets)
can be grouped into one individual (genet)). If clonal = TRUE, the species is
allowed to be clonal, and if clonal = FALSE, the species is not allowed to
be clonal.</p>
</td></tr>
<tr><td><code id="assign_+3A_flagsuspects">flagSuspects</code></td>
<td>
<p>A logical argument of length 1, indicating whether
observations that are 'suspect' will be flagged. The default is
<code>flagSuspects = FALSE</code>. If <code>flagSuspects = TRUE</code>, then a column called
'Suspect' is added to the output data.frame. Any suspect observations get a
'TRUE' in the 'Suspect' column, while non-suspect observations receive a
'FALSE'. There are two ways that an observation can be classified as
'suspect'. First, if two consecutive observations have the same trackID, but
the basal area of the observation in year <code>t+1</code> is less that a certain
percentage (defined by the <code>shrink</code> arg.) of the basal area of the
observation in year t, it is possible that the observation in year <code>t+1</code>
is a new recruit and not the same individual. The second way an observation
can be classified as 'suspect' is if it is very small before going dormant.
It is unlikely that a very small individual will survive dormancy, so it is
possible that the function has mistakenly given a survival value of '1' to
this individual. A 'very small individual' is any observation with an area
below a certain percentile (specified by 'dormSize') of the size distribution
for this species, which is generated using all of the size data for this
species in 'dat'.</p>
</td></tr>
<tr><td><code id="assign_+3A_shrink">shrink</code></td>
<td>
<p>A single numeric value. This value is only used when
<code>flagSuspects = TRUE</code>. When two consecutive observations have the same
trackID, and the ratio of size_t+1 to size_t is smaller than the value of
<code>shrink</code>, the observation in year <code>t</code> gets a 'TRUE' in the 'Suspect'
column. For example, <code>shrink = 0.2</code>, and an individual that the tracking
function has identified as 'BOUGRA_1992_5' has an area of 9 cm^2 in
year <code>t</code> and an area of 1.35 cm^2 in year <code>t+1</code>. The ratio of
size <code>t+1</code> to size <code>t</code> is 1.35/9 = 0.15, which is smaller than the
cutoff specified by <code>shrink</code>, so the observation of BOUGRA_1992_5' in year
<code>t</code> gets a 'TRUE' in the 'Suspect' column. The default value
is <code>shrink = 0.10</code>.</p>
</td></tr>
<tr><td><code id="assign_+3A_dormsize">dormSize</code></td>
<td>
<p>A single numeric value. This value is only used when
<code>flagSuspects = TRUE</code> and <code>dorm</code> is greater than or equal to 1. An individual
is flagged as 'suspect'
if it 'goes dormant' and has a size that is less than or equal to the
percentile of the size distribution for this species that is designated by
<code>dormSize</code>. For example, <code>dormSize = 0.05</code>, and the focal individual has a
basal area of 0.5 cm^2. The 5th percentile of the distribution of size for
this species, which is made using the mean and standard deviation of all
observations in 'dat' for the species in question, is 0.6 cm^2. This
individual does not have any overlaps in the next year (year <code>t+1</code>), but
does have an overlap in year <code>t+2</code>. However, because the basal area of
this observation is smaller than the 5th percentile of size for this species,
the observation in year <code>t</code> will get a 'TRUE' in the 'Suspect' column.
It is possible that the tracking function has mistakenly assigned a '1' for
survival in year t, because it is unlikely that this individual is large
enough to survive dormancy. The default value is <code>dormSize = .05</code>.</p>
</td></tr>
<tr><td><code id="assign_+3A_inheritsfromtrackspp">inheritsFromTrackSpp</code></td>
<td>
<p>A logical argument that is only applicable when
'assign()' is used internally in 'trackSpp()'.</p>
</td></tr>
<tr><td><code id="assign_+3A_nearedgebox">nearEdgeBox</code></td>
<td>
<p>An sf data frame indicating the bounding box of the
quadrat. This argument is only used if 'assign()' is used internally
in 'trackSpp()'.</p>
</td></tr>
<tr><td><code id="assign_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>see <code><a href="#topic+trackSpp">trackSpp</a></code> for details of arguments and usage.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+trackSpp">trackSpp()</a></code>, which is a wrapper for the <code><a href="#topic+assign">assign()</a></code> function that
applies it over many species and quadrats. The <code><a href="#topic+assign">assign()</a></code> function uses the
<code><a href="#topic+groupByGenet">groupByGenet()</a></code> function to group ramets into genets
(if 'clonal' argument = TRUE).
</p>

<hr>
<h2 id='checkDat'>checkDat</h2><span id='topic+checkDat'></span>

<h3>Description</h3>

<p>A function that both checks and prepares a data.frame for use in
the <code><a href="#topic+trackSpp">trackSpp</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDat(
  dat,
  inv = NULL,
  species = "Species",
  site = "Site",
  quad = "Quad",
  year = "Year",
  geometry = "geometry",
  reformatDat = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkDat_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame of the same format as
<code><a href="#topic+grasslandData">grasslandData</a></code>. It must have columns that contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>
</td></tr>
<tr><td><code id="checkDat_+3A_inv">inv</code></td>
<td>
<p>The name of each element of the list is a
quadrat name in 'dat', and the contents of that list element is a numeric
vector of all of the years in which that quadrat (or other unique spatial
area) was sampled. Make sure this is the years the quadrat was actually
sampled, not just the years that have data in the 'dat' argument! This
argument allows the function to differentiate between years when the quadrat
wasn't sampled and years when there just weren't any individuals of a species
present in that quadrat.</p>
</td></tr>
<tr><td><code id="checkDat_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="checkDat_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="checkDat_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="checkDat_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="checkDat_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to include a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="checkDat_+3A_reformatdat">reformatDat</code></td>
<td>
<p>A TRUE/FALSE argument. If 'FALSE', which is the default
value, then <code><a href="#topic+checkDat">checkDat()</a></code> prints a message that says the 'dat' and 'inv'
datasets are ready for use in the <code><a href="#topic+trackSpp">trackSpp()</a></code> function. This message
includes any column name arguments that must be included in the <code><a href="#topic+trackSpp">trackSpp()</a></code>
function call for these datasets.
If 'TRUE', <code><a href="#topic+checkDat">checkDat()</a></code> returns a list with three elements: a version of
'dat' that has been checked for errors and is ready to be input directly into
the  <code><a href="#topic+trackSpp">trackSpp</a></code> or  <code><a href="#topic+assign">assign</a></code> functions, a version of
'inv' that is checked and ready for input into <code><a href="#topic+trackSpp">trackSpp()</a></code> or <code><a href="#topic+assign">assign()</a></code>,
and a character vector called 'userColNames' that has all of the user-defined
column names that were used in the original version of 'dat'.</p>
</td></tr>
<tr><td><code id="checkDat_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in <code><a href="#topic+trackSpp">trackSpp</a></code> and other
plantTracker functions to check the 'dat' and 'inv' arguments and ensure that
they are in the correct format with the correct column names. <code><a href="#topic+checkDat">checkDat()</a></code>
can also be used independently to check that a data.frame is in the correct
format and contains the correct data to be used in the <code><a href="#topic+trackSpp">trackSpp()</a></code> or other
plantTracker functions.
</p>


<h3>Value</h3>

<p>If the 'reformatDat' argument is FALSE (the default), the return of
this function is a message that says the 'dat' and 'inv' datasets are ready
for use in the <code><a href="#topic+trackSpp">trackSpp()</a></code> function. This message includes any column name
arguments that must be included in the <code><a href="#topic+trackSpp">trackSpp()</a></code> function call for these
datasets.
If the 'reformatDat' argument is TRUE, then <code><a href="#topic+checkDat">checkDat()</a></code> returns a list that
contains versions of 'dat' and 'inv' that are ready to go directly into the
<code><a href="#topic+trackSpp">trackSpp()</a></code> or <code><a href="#topic+assign">assign()</a></code> functions. The list has the following elements:
</p>
<table>
<tr><td><code>dat</code></td>
<td>
<p>An sf data.frame that has five columns called 'Species', 'Site',
'Quad', 'Year', and 'geometry'. Any additional columns that were present in
the version of 'dat' input into the <code><a href="#topic+checkDat">checkDat()</a></code> function will also be
included in this version, although the column names will be appended with
&quot;_USER&quot;.</p>
</td></tr>
<tr><td><code>inv</code></td>
<td>
<p>A named list. The name of each element of the list is a quadrat
name in 'dat', and the contents of that list element is a numeric vector of
all of the years in which that quadrat (or other unique spatial area) was
sampled. For each list element, the vector of years is in sequential order
from oldest to most recent.</p>
</td></tr>
<tr><td><code>userColNames</code></td>
<td>
<p>A named character vector. This vector contains the column
names provided by the user for all of the required data columns in the
original version of 'dat'. The name of each vector element indicates the type
of data that is contained in the column with the name in that vector element.
For example, if the 'dat' data.frame input into <code><a href="#topic+checkDat">checkDat()</a></code> has the names
'Species','location' 'quadrat', 'Year', and 'geometry', then this list element
will be a character vector of these values with the names 'species', 'site',
'quad', 'year', and 'geometry'. </p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>checkDat(dat = grasslandData,
inv = grasslandInventory)

checkDat(dat = grasslandData,
inv = grasslandInventory,
reformatDat = TRUE)

</code></pre>

<hr>
<h2 id='drawQuadMap'>Create maps of a quadrat over time</h2><span id='topic+drawQuadMap'></span>

<h3>Description</h3>

<p>This function creates maps of a quadrat over time, color-coded
by either species or by genet (trackID).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawQuadMap(
  dat,
  type = "bySpecies",
  addBuffer = FALSE,
  species = "Species",
  site = "Site",
  quad = "Quad",
  year = "Year",
  geometry = "geometry",
  trackID = "trackID",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawQuadMap_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame in which each row represents a unique polygon
(either a genet or a ramet) in a unique site/quadrat/year combination. It is
recommended that you only input data for one quadrat at a time. A data.frame
returned by <code><a href="#topic+trackSpp">trackSpp</a></code> can be put into this function after being
subset by quadrat. 'dat' must have columns that contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> a unique identifier for each genet in character format with no NAs (the
default column name is &quot;trackID&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_type">type</code></td>
<td>
<p>A character argument indicating how the plots returned by
<code>drawQuadMap()</code> will be color coded. If <code>type = "bySpecies"</code>, then
observations are color-coded by species. If <code>type = "bytrackID"</code>, then
observations are color-coded by trackID. The default value is &quot;bySpecies&quot;.</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_addbuffer">addBuffer</code></td>
<td>
<p>A logical argument indicating whether <code>drawQuadMap()</code>
will draw a small buffer around each polygon in the returned maps to make the
observations more visible. This is particularly useful for observations that
were originally mapped as points, which are hard to see when plotted in their
original dimensions. The buffer distance is 1/20th of the quadrat width. The
default value is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to include a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_trackid">trackID</code></td>
<td>
<p>An optional character string argument. Indicates the name of
the column in 'dat' that contains unique identifiers for each genet. It is
unnecessary to include a value for this argument if the column name is
&quot;trackID&quot; (default is 'trackID')</p>
</td></tr>
<tr><td><code id="drawQuadMap_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns a multipanel plot where each panel shows a map
of the quadrat in a unique year. Panels are arranged in chronological order,
and plots are color-coded either by species or trackID (unique
genet identifier).
</p>
<p>#' @seealso <code><a href="#topic+trackSpp">trackSpp()</a></code>, which can be used to assign trackIDs
to observations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> dat &lt;- grasslandData[grasslandData$Site == c("AZ") &amp;
 grasslandData$Quad == "SG2" &amp;
 grasslandData$Year %in% c(1922:1925),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = TRUE
 )
drawQuadMap(dat = outDat,
type = "bySpecies",
addBuffer = FALSE,
species = "speciesName"
)
</code></pre>

<hr>
<h2 id='getBasalAreas'>Calculates basal area for each species in a quadrat</h2><span id='topic+getBasalAreas'></span>

<h3>Description</h3>

<p>This function calculates the total basal area for each species
present in a quadrat for each year of data collection. Both the absolute
basal area (in the same units of area as the input data.frame) is returned,
as well as the percentage of the total occupied basal area in the quadrat
that is occupied by a given species (&quot;percent total basal area&quot;). If you'd
like to ultimately calculate the population growth rate (lambda) for each
species, you can use the <code><a href="#topic+getLambda">getLambda</a></code> function directly, which
takes raw species occurrence data (like in 'dat' here) and returns lambda
values for each species and quadrat for each transition in the dataset.
This function should only be used if the individuals in 'dat' were mapped as
polygons that are representative of their actual basal area, i.e. were not
mapped as points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBasalAreas(
  dat,
  inv,
  species = "Species",
  quad = "Quad",
  site = "Site",
  year = "Year",
  geometry = "geometry",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getBasalAreas_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame in which each row represents a unique polygon
(either a genet or a ramet) in a unique site/quadrat/year combination. A
data.frame returned by <code><a href="#topic+trackSpp">trackSpp</a></code> can be put directly into this
function. However, it is not necessary for 'dat' to have demographic data or
unique identifiers (i.e. 'trackIDs') assigned. 'dat' must have columns that
contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>

<p>This function should only be used if
the individuals in 'dat' were mapped as polygons that are representative of
their actual basal area, i.e. were not mapped as points.</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_inv">inv</code></td>
<td>
<p>The name of each element of the list is a
quadrat name in 'dat', and the contents of that list element is a numeric
vector of all of the years in which that quadrat (or other unique spatial
area) was sampled. Make sure this is the years the quadrat was actually
sampled, not just the years that have data in the 'dat' argument! This
argument allows the function to differentiate between years when the quadrat
wasn't sampled and years when there just weren't any individuals of a species
present in that quadrat.</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to include a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="getBasalAreas_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+getBasalAreas">getBasalAreas()</a></code> returns a data.frame with the columns &quot;Site&quot;,
&quot;Quad&quot;, &quot;Year&quot; and &quot;Species&quot;. No two rows will have the same values for all
four of these columns. The column &quot;absolute_basalArea&quot; has the area of the
quadrat that is occupied by a species in a given unique site/quadrat/year
combination. This is in the same units as the area in 'dat'.
&quot;quad_basalArea&quot; gives the combined basal area of all organisms in a given
site/quadrat/year. &quot;percent_basalArea&quot; gives the percentage of occupied basal
area within a quadrat that is occupied by each species in a given
site/quadrat/year. For example, species A has a basal area of 22 cm^2 in
quadrat 1 in 2005 (&quot;absolute_basalArea = 22). In 2005, there are 50 cm^2 of
quadrat 1 that are occupied by organisms (&quot;quad_basalArea&quot; = 55). 44% of the
occupied basal area in quadrat 1 in 2005 is occupied by species A
(&quot;percent_basalArea&quot; = 44). There may be an 'NA' in the &quot;percent_basalArea&quot;
column if the &quot;quad_basalArea&quot; for that species and year is 0.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getLambda">getLambda()</a></code>, which uses this function to calculate basal areas and
ultimately return population growth rates (lambdas) for each species in
each quadrat.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == "AZ" &amp;
 grasslandData$Year %in% c(1922:1925),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = TRUE
 )
getBasalAreas(dat = outDat, inv = inv,
species = "speciesName")
</code></pre>

<hr>
<h2 id='getLambda'>Calculates lambda, the population growth rate, for each species in a quadrat
based on changes in basal cover.</h2><span id='topic+getLambda'></span>

<h3>Description</h3>

<p>This function calculates the population growth rate (lambda) for
every species in a quadrat. This value is the ratio of basal area or number
of individuals in the next year to basal area or number of individuals in the
current year (basal area in year t+1/ basal area in year t). A lambda value
greater than 1 indicates a population is growing, while a value less than 1
indicates population decline. Lambda is 'infinity' when the basal area or
number of individuals in year t is 0, and is NA when basal area or number of
individuals in year t is zero (i.e. when there are no organims present in
year =t). Note that a lambda value is calculated between of the years when a
quadrat was sampled, even if there is a gap in sampling. For example, a
quadrat is sampled in 1998, 1999, 2001, and 2002 (but skipped in 2000). A
lambda value will be calculated for 1998-1999 and 2001-2002, which is a
transition from year <code>t</code> to year <code>t+1</code>. However, a lambda value is calculated
in the same manner for 1999-2001, which is actually a transition from year
<code>t</code> to year <code>t+2</code>. You can remove these values by subsetting the data.frame
returned by <code>getLambda()</code> for rows when &quot;Year_tplus1&quot;- &quot;Year_t&quot; is equal
to 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLambda(
  dat,
  inv,
  method = "area",
  species = "Species",
  quad = "Quad",
  site = "Site",
  year = "Year",
  geometry = "geometry",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getLambda_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame in which each row represents a unique polygon
(either a genet or a ramet) in a unique site/quadrat/year combination. A
data.frame returned by <code><a href="#topic+trackSpp">trackSpp</a></code> can be put directly into this
function. However, it is not strictly necessary for 'dat' to have demographic
data or unique identifiers (i.e. 'trackIDs') assigned. If there are not
trackIDs assigned for each individual, then the function assumes that each
row of data repesents one genetic individual.'dat' <em>must</em> have columns that
contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>
</td></tr>
<tr><td><code id="getLambda_+3A_inv">inv</code></td>
<td>
<p>The name of each element of the list is a
quadrat name in 'dat', and the contents of that list element is a numeric
vector of all of the years in which that quadrat (or other unique spatial
area) was sampled. Make sure this is the years the quadrat was actually
sampled, not just the years that have data in the 'dat' argument! This
argument allows the function to differentiate between years when the quadrat
wasn't sampled and years when there just weren't any individuals of a species
present in that quadrat.</p>
</td></tr>
<tr><td><code id="getLambda_+3A_method">method</code></td>
<td>
<p>A single character argument that determines the method for
calculating lambda. The default value is &quot;area&quot;, which means that lambda is
calculated by comparing total basal area for a given species in year t+1 to
year t. If 'method' = &quot;count&quot;, then lambda is calculated by comparing total
number of individuals for a given species in year t+1 to year t. If each
individual in 'dat' is mapped as a point, it is best to use
'method' = &quot;count&quot;.</p>
</td></tr>
<tr><td><code id="getLambda_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="getLambda_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="getLambda_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="getLambda_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="getLambda_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to include a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="getLambda_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns a data.frame with columns containing site,
quadrat, and species data, as well as the following columns:
</p>

<dl>
<dt>Year_t</dt><dd><p>the 'current' year</p>
</dd>
<dt>absolute_basalArea_t</dt><dd><p>basal area (in the same units as the spatial
elements of 'dat') for this species in this quadrat in year 't'</p>
</dd>
<dt>Year_tplus1</dt><dd><p>the 'next' year</p>
</dd>
<dt>absolute_basalArea_tplus1</dt><dd><p>basal area (in the same units as the spatial
elements of 'dat') for this species in this quadrat in year 't+1'</p>
</dd>
<dt>lambda</dt><dd><p>The population growth rate for this species in this quadrat
from year t to year t+1.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+getBasalAreas">getBasalAreas()</a></code>, used internally in this function, which
calculates absolute and relative basal areas for each species in each quadrat
for each year of sampling.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == "AZ" &amp;
 grasslandData$Year %in% c(1922:1925),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = TRUE
 )
getLambda(dat = outDat, inv = inv, method = "area",
species = "speciesName")
</code></pre>

<hr>
<h2 id='getNeighbors'>Calculates local neighborhood density around each individual in a
mapped dataset</h2><span id='topic+getNeighbors'></span>

<h3>Description</h3>

<p>This function calculates the density of individuals around
each distinct individual in a mapped dataset. It is intended for use on
a dataset that has been returned by the <code><a href="#topic+trackSpp">trackSpp</a></code> function, but
will work with any sf data.frame where each individual row represents a
distinct individual (genet) in a unique year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getNeighbors(
  dat,
  buff,
  method,
  compType = "allSpp",
  output = "summed",
  trackID = "trackID",
  species = "Species",
  quad = "Quad",
  year = "Year",
  site = "Site",
  geometry = "geometry",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getNeighbors_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame. Each row must represent a unique individual
organism in a unique year. This argument can be a data.frame that is returned
by the <code><a href="#topic+trackSpp">trackSpp</a></code> function. It must have columns that contain...
#' * a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>

<ul>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> a unique identifier for each genet in character format with no NAs (the
default column name is &quot;trackID&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>
</td></tr>
<tr><td><code id="getNeighbors_+3A_buff">buff</code></td>
<td>
<p>A numeric value that is greater than or equal to zero. This
indicates the distance (in the same units as the spatial data in 'dat')
around each focal individual within which you want to look for competitors.
OR buff can be a data.frame with the columns &quot;Species&quot; and &quot;buff&quot;. This
data.frame must have a row for each unique species present in 'dat', with
species name as a character string in the &quot;Species&quot; column, and a numeric
value in the 'buff' column you'd like to use for that species.</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_method">method</code></td>
<td>
<p>A character string, either 'count' or 'area'. This argument
determines which method is used to calculate local neighborhood density.
If 'method' = 'count', then the number of other individuals within the buffer
will be returned in the 'neighbors' column. If method = 'area', then the
proportion of the buffer area that is occupied by other individuals will be
returned in the 'neighbors' column. If the data in 'dat' was mapped initially
as points, it is best to use 'method' = 'count'. If the data was mapped as
polygons that are representative of individual basal area, using
'method' = 'area' is likely a more accurate representation of the crowding
the focal individual is experiencing.</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_comptype">compType</code></td>
<td>
<p>A character string, either 'allSpp' or 'oneSpp'.
If compType = 'allSpp', then local neighborhood density is calculated
considering all individuals around the focal individual, regardless of
species (interspecific competition). If compType = 'oneSpp', then local
neighborhood density is calculated considering only individuals in the buffer
area that are the same species as the focal individual (intraspecific
competition).</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_output">output</code></td>
<td>
<p>A character string, either 'summed' or 'bySpecies'. The default
is 'summed'. This argument is only important to consider if you are using
compType = 'allSpp'. If output = 'summed', then only one count/area value is
returned for each individual. This value is the total count or area of all
neighbors within the focal species buffer zone, regardless of species. If
output = 'bySpecies', there is a count or area value returned for each
species present in the buffer zone. For example, there are 15 individuals
inside a buffer zone. Five are species A, three are species B, and 7 are
species C. If output = 'summed', then the 'neighbors_count' column in the
output data.frame will have the single value '15' in the row for this focal
individual. However, if output = 'bySpecies', the row for this focal
individual in the output data.frame will contain a named list in the
'neighbors_count' column that looks like the one below. If 'method' = 'area'
and 'output' = 'bySpecies', a similar list will be returned, but will be in
the 'neighbors_area' column and will contain areas rather than counts.
</p>
<div class="sourceCode r"><pre>list("Species A "= 5, "Species B" = 3, "Species C" = 7)
#&gt; $`Species A `
#&gt; [1] 5
#&gt; 
#&gt; $`Species B`
#&gt; [1] 3
#&gt; 
#&gt; $`Species C`
#&gt; [1] 7
</pre></div></td></tr>
<tr><td><code id="getNeighbors_+3A_trackid">trackID</code></td>
<td>
<p>An optional character string argument. Indicates the name of
the column in 'dat' that contains a value that uniquely identifies each
individual/genet. It is unnecessary to include a value for this argument if
the column name is 'trackID' (the default value is 'trackID').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to include a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="getNeighbors_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function draws a buffer around each individual genet of a
distance specified by the user. Then it either counts the number of other
genets within that buffer, or calculates the proportion of that buffer area
that is occupied by other individuals. <a href="#topic+getNeighbors">getNeighbors</a> can calculate
either interspecific local neighborhood density (between the focal individual
and all other individuals within the buffer area) or intraspecific local
neighborhood density (between the focal individual and other individuals of
the same species within the buffer area).
</p>


<h3>Value</h3>

<p>This function returns a data.frame with the same number of rows as
'dat' and all of the same columns, but with an additional column or columns.
If method = 'count', then a column called &quot;neighbors_count&quot; is added, which
contains a count of the number of individuals within the buffer area that is
occupied by other individuals. If method = 'area', two columns are added. The
first is called &quot;nBuff_area&quot;, which contains the area of the buffer around
the focal individual. The second is called &quot;neighbors_area&quot;, which contains
the area of the individuals within the buffer zone around the
focal individual.
</p>


<h3>See Also</h3>

<p>The <code><a href="#topic+trackSpp">trackSpp()</a></code> function returns a data.frame that can be input
directly into this function. If a data.frame is not aggregated by genet such
that each unique genet/year combination is represented by only one row, then
passing it through the <code><a href="#topic+aggregateByGenet">aggregateByGenet()</a></code> function will return a data.frame
that can be input directly into this function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == c("AZ") &amp;
 grasslandData$Species %in% c("Bouteloua rothrockii",
 "Calliandra eriophylla"),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE)),
 species = "speciesName",
 aggByGenet = TRUE
 )

 finalDat &lt;- getNeighbors(dat = outDat,
 buff = .15,
 method = 'count',
 compType = 'oneSpp',
 species = "speciesName")

</code></pre>

<hr>
<h2 id='getRecruits'>Calculates the number of recruits of each species per year in each quadrat</h2><span id='topic+getRecruits'></span>

<h3>Description</h3>

<p>This function calculates the number of new recruits of
each species in each quadrat in each year. The input data must already
contain a column indicating whether each observation is classified as a
recruit or not. This recruit status can be generated from the
<code><a href="#topic+trackSpp">trackSpp</a></code> function in <code>plantTracker</code>, or can be information that
was collected in the field. This function includes an option that determines
whether each ramet of a clonal species is considered an individual recruit,
or if the entire genet is considered a single recruit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRecruits(
  dat,
  byGenet = TRUE,
  species = "Species",
  quad = "Quad",
  site = "Site",
  year = "Year",
  trackID = "trackID",
  recruit = "recruit",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getRecruits_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame in which each row represents a unique polygon
(either a genet or a ramet) in a unique site/quadrat/year combination. A
data.frame returned by <code><a href="#topic+trackSpp">trackSpp</a></code> can be put directly into this
function. 'dat' must have columns that contain...
</p>

<ul>
<li><p> a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>
</li>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> a unique identifier for each genet in character format with no NAs (the
default column name is &quot;trackID&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
</p>
</li></ul>
</td></tr>
<tr><td><code id="getRecruits_+3A_bygenet">byGenet</code></td>
<td>
<p>A logical argument. <code>TRUE</code> indicates that a new genet will be
considered as only one recruit, even if it consists of multiple ramets.
<code>FALSE</code> indicates that each new ramet will be considered as a new recruit,
even if other ramets of the same genet were present in previous years.</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to include a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to include a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_trackid">trackID</code></td>
<td>
<p>An optional character string argument. Indicates the name of
the column in 'dat' that contains unique identifiers for each genet. It is
unnecessary to include a value for this argument if the column name is
&quot;trackID&quot; (default is 'trackID')</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_recruit">recruit</code></td>
<td>
<p>An optional character string argument. Indicates the name of
the column in 'dat' that contains information indicating whether or not this
row represents data for a recruit. It is unnecessary to include a value for
this argument if the column name is &quot;recruit&quot; (default is &quot;recruit&quot;).</p>
</td></tr>
<tr><td><code id="getRecruits_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns a table with columns for site, quadrat,
species name, year, and number of recruits.
</p>
<p>This function returns a data frame with the columns 'Site', 'Quad',
'speciesName', 'Year', and 'recruits'. The 'recruits' column contains a count
of the number of individuals of the species and in the site, quadrat, and
year indicated in the other columns of the data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == c("AZ") &amp;
 grasslandData$Species %in% c("Bouteloua rothrockii",
 "Calliandra eriophylla") &amp;
 grasslandData$Year %in% c(1922:1925),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = TRUE
 )
 getRecruits(dat = outDat,
 byGenet = TRUE,
 species = "speciesName"
 )

</code></pre>

<hr>
<h2 id='grasslandData'>Chart Quadrat Dataset for grassland species in MT and AZ
An example dataset that contains data from mapped plant chart quadrats. Each
row is an observation of one plant.</h2><span id='topic+grasslandData'></span>

<h3>Description</h3>

<p>Chart Quadrat Dataset for grassland species in MT and AZ
An example dataset that contains data from mapped plant chart quadrats. Each
row is an observation of one plant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grasslandData
</code></pre>


<h3>Format</h3>

<p>An sf data frame with 1242 rows and 15 variables:
</p>

<dl>
<dt>Species</dt><dd><p>A character string indicating the specific epithet for this
observation. The ideal formats are the 1) the latin binomial separated by
a space (i.e. &quot;Bouteloua gracilis&quot;), 2) the latin binomial separated by an
underscore (i.e. &quot;Bouteloua_gracilis&quot;), or 3) a species code consisting of
the first n' letters of each element of the latin binomial (i.e. &quot;BOUGRA&quot;
or &quot;BOGR&quot;). Whichever format is used, it must be used for all rows.</p>
</dd>
<dt>Clone</dt><dd><p>An integer vector. (1) indicates that this individual is a
clone (genet). (0) indicates that this individual is not a clone. NA
indicates that this data was not recorded.</p>
</dd>
<dt>Seedling</dt><dd><p>An integer vector indicating whether this observation was a
seedling (1), or not (0). This data was not collected for many
observations, which have an NA in this column. </p>
</dd>
<dt>Stems</dt><dd><p>An integer greater than 0 indicating how many stems were
present for the observed plant. This data was not collected for many
observations, which have an NA in this column.</p>
</dd>
<dt>Basal</dt><dd><p>An integer vector. (1) indicates that the basal area of
this individual was mapped. (0) indicates that the basal area of this
individual was not mapped (in which case it cannot be used in the
<code><a href="#topic+assign">assign</a></code> function.) NA indicates that this data was not
recorded.</p>
</dd>
<dt>Type</dt><dd><p>A factor with two levels: 'point' or 'poly', which indicates
whether the observation was originally mapped as a 'point' or a 'polygon'.</p>
</dd>
<dt>Site</dt><dd><p>A character string indicating the sampling location of this
observation. In this dataset, this value is either:
</p>

<ul>
<li> <p>AZ (Santa Rita Experimental Range, Tucson, AZ)
</p>
</li>
<li> <p>MT (Fort Keogh Livestock and Range Research Laboratory,
Miles City, MT)</p>
</li></ul>
</dd>
<dt>Quad</dt><dd><p>A character string indicating the name of the quadrat where
this plant was mapped.</p>
</dd>
<dt>Year</dt><dd><p>An integer indicating the year when this plant was mapped.</p>
</dd>
<dt>sp_code_4</dt><dd><p>A character string of the 4-letter species code for this
observation (The first two letters of the genus name, and first two letters
of the species name, capitalized with no spaces).</p>
</dd>
<dt>sp_code_6</dt><dd><p>A character string of the 6-letter species code for this
observation (The first three letters of the genus name, and first three
letters of the species name, capitalized with no spaces).</p>
</dd>
<dt>Area</dt><dd><p>A numeric variable indicating the basal area in m^2 of this
observation. In this dataset, observations originally mapped as points were
assigned an area of 2.46e-05 m^2. For individuals mapped as polygons, the
value in this column indicates the basal area of that plant.</p>
</dd>
<dt>geometry</dt><dd><p>The sf geometry of class &quot;MULTIPOLYGON&quot; for
this observation. The location of this polygon indicates the plant's
location in a 1 m x 1 m square. If the plant was mapped as a polygon,
the area of this polygon indicates the basal area of that plant.</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://doi.org/dx.doi.org/10.1890/11-2200.1">doi:dx.doi.org/10.1890/11-2200.1</a> <br />
<a href="https://doi.org/doi.org/10.6084/m9.figshare.c.3304113.v1">doi:doi.org/10.6084/m9.figshare.c.3304113.v1</a>
</p>

<hr>
<h2 id='grasslandInventory'>A dataset indicating sampling years for the grasslandData example dataset</h2><span id='topic+grasslandInventory'></span>

<h3>Description</h3>

<p>This dataset indicates years in which sampling was conducted for each of the
four quadrats included in the <code><a href="#topic+grasslandData">grasslandData</a></code> example dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grasslandInventory
</code></pre>


<h3>Format</h3>

<p>A named list with 8 items, each of which if named for a quadrat
included in the grasslandData dataset.
</p>

<dl>
<dt>C5</dt><dd><p>An integer vector indicating the years in which quadrat C5 was
mapped. </p>
</dd>
<dt>D1</dt><dd><p>An integer vector indicating the years in which quadrat D1 was
mapped.</p>
</dd>
<dt>SG2</dt><dd><p>An integer vector indicating the years in which quadrat SG2
was mapped.</p>
</dd>
<dt>SG4</dt><dd><p>An integer vector indicating the years in which quadrat SG4 was
mapped.</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://doi.org/dx.doi.org/10.1890/11-2200.1">doi:dx.doi.org/10.1890/11-2200.1</a> <br />
<a href="https://doi.org/doi.org/10.6084/m9.figshare.c.3304113.v1">doi:doi.org/10.6084/m9.figshare.c.3304113.v1</a>
</p>

<hr>
<h2 id='groupByGenet'>Group polygon observations together into a 'genet' based on proximity</h2><span id='topic+groupByGenet'></span>

<h3>Description</h3>

<p>This function assigns a unique 'genetID' to polygons if they are
within a user-defined distance from one another. Each ramet is still
represented by a single row of data, but all ramets of the same genet have
the same 'genetID'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupByGenet(dat, buffGenet, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupByGenet_+3A_dat">dat</code></td>
<td>
<p>An sf object that contains polygons to be grouped. Typically
should include data only for one species, one quadrat, and one year. For
intended use, this dataset should be of the format described in
<code><a href="#topic+grasslandData">grasslandData</a></code>. This function will run if 'dat' contains
only 'geometry' data, but it is <em>strongly</em> recommended that other columns
specified in <code><a href="#topic+grasslandData">grasslandData</a></code> are included.</p>
</td></tr>
<tr><td><code id="groupByGenet_+3A_buffgenet">buffGenet</code></td>
<td>
<p>A numeric argument indicating half of the maximum distance
between individual ramets (polygons) that the function will group together as
one genet. Note that this argument is in the same units that are used in the
'dat' argument. For example, if buffGenet = 0.005 and we use the
<code><a href="#topic+grasslandData">grasslandData</a></code> (in which measurements are in meters), then
polygons that are 0.01 m (1 cm) apart or less will be grouped as a genet.</p>
</td></tr>
<tr><td><code id="groupByGenet_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If polygons are 'grouped,' they are given the same number in the
'genetID' column. This assignment is made using network analysis to group
together polygons that are closest to one another. In the context of
<span class="pkg">plantTracker</span>, this function was designed to group ramets (vegetative
clones) together into one genet (genetically distinct individual). This
function was designed for use within the <code><a href="#topic+assign">assign</a></code> function (and
then the <code><a href="#topic+trackSpp">trackSpp</a></code> function), but can be used independently.
</p>


<h3>Value</h3>

<p>A numeric vector of unique genetIDs that is as long as the number of
rows in 'dat.' Each element <code>i</code> in the output is the genetID for the
<code>i</code>th row in 'dat'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+assign">assign()</a></code> and <code><a href="#topic+trackSpp">trackSpp()</a></code>, <span class="pkg">plantTracker</span> functions that apply
this function across multiple species, quadrats, and years.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == "AZ" &amp;
grasslandData$Quad == "SG2" &amp;
grasslandData$Species == "Bouteloua rothrockii" &amp;
grasslandData$Year == 1922,]

groupByGenet(dat = dat, buffGenet = 0.01)
groupByGenet(dat = dat, buffGenet = 0.1)

</code></pre>

<hr>
<h2 id='trackSpp'>Tracks genets through time for multiple species and sites</h2><span id='topic+trackSpp'></span>

<h3>Description</h3>

<p>This function tracks individual organisms in mapped quadrats
through time to generate a demographic dataset that includes survival
and growth for each individual.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trackSpp(
  dat,
  inv,
  dorm,
  buff,
  buffGenet,
  clonal,
  species = "Species",
  site = "Site",
  quad = "Quad",
  year = "Year",
  geometry = "geometry",
  aggByGenet = TRUE,
  printMessages = TRUE,
  flagSuspects = FALSE,
  shrink = 0.1,
  dormSize = 0.05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trackSpp_+3A_dat">dat</code></td>
<td>
<p>An sf data.frame of the same format as
<code><a href="#topic+grasslandData">grasslandData</a></code>. It must have columns that contain ...
#' * a unique identification for each research site in character format
with no NAs (the default column name is &quot;Site&quot;)
</p>

<ul>
<li><p> species name in character format with no NAs (the default column
name is &quot;Species&quot;)
</p>
</li>
<li><p> unique quadrat identifier in character format with no NAs (the default
column name is &quot;Quad&quot;)
</p>
</li>
<li><p> year of data collection in integer format with no NAs (the
default column name is &quot;Year&quot;)
</p>
</li>
<li><p> an s.f 'geometry' column that contains a polygon or multipolygon data type
for each individual observation (the default column name is &quot;geometry&quot;)
and an s.f 'geometry' column
</p>
</li></ul>

<p>This function will add columns called
&quot;basalArea_ramet&quot;, &quot;trackID&quot;, &quot;age&quot;, &quot;size_tplus1&quot;, &quot;recruit,&quot; &quot;nearEdge,&quot;
and &quot;survives_tplus1&quot;, so 'dat' should not contain columns with these names.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_inv">inv</code></td>
<td>
<p>A named list of the same format as
<code><a href="#topic+grasslandInventory">grasslandInventory</a></code>. The name of each element of the list is a
quadrat name in 'dat', and the contents of that list element is a numeric
vector of all of the years in which that quadrat (or other unique spatial
area) was sampled. Make sure this is the years the quadrat was actually
sampled, not just the years that have data in the 'dat' argument! This
argument allows the function to differentiate between years when the quadrat
wasn't sampled and years when there just weren't any individuals of a species
present in that quadrat.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_dorm">dorm</code></td>
<td>
<p>A numeric vector of length 1, indicating the number of years an
individual of these species is allowed to go dormant, i.e. be absent from the
map but be considered the same individual when it reappears. This must be an
integer greater than or equal to 0. <em>OR</em> dorm can be a data.frame with
the columns &quot;Species&quot; and &quot;dorm&quot;. This data.frame must have a row for each
unique species present in 'dat', with species name as a character string in
the &quot;Species&quot; column, and a numeric value greater than or equal to 0 in the
'dorm' column that indicates the number of years each species is allowed to
go dormant.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_buff">buff</code></td>
<td>
<p>A numeric vector of length 1 that is greater than or equal to
zero, indicating how far (in the same units as spatial values in 'dat') a
polygon can move from year <code>i</code> to year <code>i+1</code> and still be
considered the same individual. <em>OR</em> buff can be a data.frame with
the columns &quot;Species&quot; and &quot;buff&quot;. This data.frame must have a row for each
unique species present in 'dat', with species name as a character string in
the &quot;Species&quot; column, and a numeric value in the 'buff' column specifying the
'buff' argument for each species.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_buffgenet">buffGenet</code></td>
<td>
<p>A numeric vector of length 1 that is greater than or equal
to zero, indicating how close (in the same units as spatial values in 'dat')
polygons must be to one another in the same year to be grouped as a genet
(if 'clonal' argument = TRUE). <em>OR</em> buffGenet can be a data.frame with
the columns &quot;Species&quot; and &quot;buffGenet&quot;. This data.frame must have a row for
each unique species present in 'dat', with species name as a character string
in the &quot;Species&quot; column, and a numeric value greater than or equal to 0 in
the 'buffGenet' specifying the 'buffGenet' argument for each species. This
argument is passed to the <code><a href="#topic+groupByGenet">groupByGenet</a></code> function, which is used
inside the <code><a href="#topic+assign">assign</a></code> function.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_clonal">clonal</code></td>
<td>
<p>A logical vector of length 1, indicating whether a
species is allowed to be clonal or not (i.e. if multiple polygons (ramets)
can be grouped as one individual (genet)). If clonal = TRUE, the species is
allowed to be clonal, and if clonal = FALSE, the species is not allowed to
be clonal. <em>OR</em> clonal can be a data.frame with the columns &quot;Species&quot; and
&quot;clonal&quot;. This data.frame must have a row for each unique species present in
'dat', with species name as a character string in the &quot;Species&quot; column, and a
logical value in the 'clonal' specifying the 'clonal' argument for
each species.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_species">species</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains species name data. It is
unnecessary to provide a value for this argument if the column name is
&quot;Species&quot; (default value is 'Species').</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_site">site</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains site name data. It is
unnecessary to provide a value for this argument if the column name is
&quot;Site&quot; (default value is 'Site').</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_quad">quad</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains quadrat name data. It is
unnecessary to provide a value for this argument if the column name is
&quot;Quad&quot; (default is 'Quad').</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_year">year</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains data for year of sampling. It
is unnecessary to provide a value for this argument if the column name is
&quot;Year&quot; (default is 'Year').</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_geometry">geometry</code></td>
<td>
<p>An optional character string argument. Indicates
the name of the column in 'dat' that contains sf geometry data. It is
unnecessary to provide a value for this argument if the column name is
&quot;geometry&quot; (default is 'geometry').</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_aggbygenet">aggByGenet</code></td>
<td>
<p>A logical argument that determines whether the output
of <code><a href="#topic+trackSpp">trackSpp()</a></code> will be aggregated by genet. If the value is TRUE
(the default), then each unique trackID (or genet) in each year will be
represented by only one row in the output data.frame. This prepares the
dataset for most demographic analyses. If the value is FALSE, then each
unique trackID in each year may be represented by multiple rows in the data
(each ramet gets a row). Note that if the value is TRUE, then some columns
present in the input data.frame 'dat' will be dropped. If you do not wish
this to happen, then you can aggregate the data.frame to genet by hand.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_printmessages">printMessages</code></td>
<td>
<p>A logical argument that determines whether this
function returns messages about genet aggregation, as well as messages
indicating which year is the last year of sampling in each quadrat and which
year(s) come before a gap in sampling that exceeds the 'dorm' argument (and
thus which years of data have an 'NA' for &quot;survives_tplus1&quot; and
&quot;size_tplus1&quot;). If printMessages = TRUE (the default), then messages are
printed. If printMessages = FALSE, messages are not printed.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_flagsuspects">flagSuspects</code></td>
<td>
<p>A logical argument of length 1, indicating whether
observations that are 'suspect' will be flagged. The default is
<code>flagSuspects = FALSE</code>. If <code>flagSuspects = TRUE</code>, then a column called
'Suspect' is added to the output data.frame. Any suspect observations get a
'TRUE' in the 'Suspect' column, while non-suspect observations receive a
'FALSE'. There are two ways that an observation can be classified as
'suspect'. First, if two consecutive observations have the same trackID, but
the basal area of the observation in year <code>t+1</code> is less that a certain
percentage (defined by the <code>shrink</code> arg.) of the basal area of the
observation in year <code>t</code>, it is possible that the observation in year <code>t+1</code> is
a new recruit and not the same individual. The second way an observation can
be classified as 'suspect' is if it is very small before going dormant. It is
unlikely that a very small individual will survive dormancy, so it is
possible that the function has mistakenly given a survival value of '1' to
this individual. A 'very small individual' is any observation with an area
below a certain percentile (specified by 'dormSize') of the size distribution f
or this species, which is generated using all of the size data for this
species in 'dat'.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_shrink">shrink</code></td>
<td>
<p>A single numeric value. This value is only used when
<code>flagSuspects = TRUE</code>. When two consecutive observations have the same
trackID, and the ratio of size <code>t+1</code> to size <code>t</code> is smaller than the value of
<code>shrink</code>, the observation in year <code>t</code> gets a 'TRUE' in the 'Suspect' column.
For example, <code>shrink = 0.2</code>, and an individual that the tracking function has
identified as 'BOUGRA_1992_5' has an area of 9 cm^2 in year <code>t</code> and an area
of 1.35 cm^2 in year <code>t+1</code>. The ratio of size <code>t+1</code> to size <code>t</code> is
1.35/9 = 0.15, which is smaller than the cutoff specified by <code>shrink</code>, so the
observation of BOUGRA_1992_5' in year <code>t</code> gets a 'TRUE' in the 'Suspect'
column. The default value is <code>shrink = 0.10</code>.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_dormsize">dormSize</code></td>
<td>
<p>A single numeric value. This value is only used when
<code>flagSuspects = TRUE</code> and <code>dorm</code> is greater than or equal to 1. An individual
is flagged as 'suspect'
if it 'goes dormant' and has a size that is less than or equal to the
percentile of the size distribution for this species that is designated by
<code>dormSize</code>. For example <code>dormSize = 0.05</code>, and an individual has a basal area
of 0.5 cm^2. The 5th percentile of the distribution of size for this species,
which is made using the mean and standard deviation of all observations in
'dat' for the species in question, is 0.6 cm^2. This individual does not have
any overlaps in the next year (year <code>t+1</code>), but does have an overlap in year
<code>t+2</code>. However, because the basal area of this observation is smaller than the
5th percentile of size for this species, the observation in year t will get a
'TRUE' in the 'Suspect' column. It is possible that the tracking function has
mistakenly assigned a '1' for survival in year <code>t</code>, because it is unlikely
that this individual is large enough to survive dormancy. The default value
is <code>dormSize = .05</code>.</p>
</td></tr>
<tr><td><code id="trackSpp_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a wrapper function that applies <code><a href="#topic+assign">assign</a></code> across multiple
species, quadrats, and sites. For each species and quadrat, <code><a href="#topic+trackSpp">trackSpp()</a></code>
loads a spatially referenced data.frame ('dat'), and then uses the
<code><a href="#topic+groupByGenet">groupByGenet</a></code> function to assign genetIDs to polygons (if
'clonal' = TRUE) such that polygons that form the same genet have the same
genetID. A buffer of a distance defined by 'buff' is applied around each
genet polygon. Then, the spatial data for each genet from the current year
(year <code>t</code>) is compared to individuals in the next year (year <code>t+1</code>). Then
<code><a href="#topic+trackSpp">trackSpp()</a></code> calculates the amount of overlapping area between polygons
of each year <code>t</code> genet and polygons of each year <code>t+1</code> genet (using
<code><a href="sf.html#topic+st_intersection">st_intersection</a></code>). If there is unambiguous overlap between a
'parent' genet from year <code>t</code> and a 'child' genet from year <code>t+1</code>, then that
'child' gets the same identifying trackID as the parent. If there is a 'tie,'
where more than one parent overlaps the same child or more than one child
overlaps the same parent, the parent-child pair with the greatest amount of
overlap receives the same trackID. Polygons in year <code>t+1</code> that do not have a
parent are given new trackIDs and are identified as new recruits. If dormancy
is not allowed, then polygons in year <code>t</code> that do not have child polygons get
a '0' in the 'survival' column. If dormancy is allowed, parent polygons
without child polygons are stored as 'ghosts' and are then compared to data
from year <code>t+1+i</code> to find potential child polygons, where <code>i</code>='dorm'
argument. For a more detailed description of the <code><a href="#topic+trackSpp">trackSpp()</a></code> function, see
the vignette:
<code>vignette("Using_the_plantTracker_trackSpp_function",
package = "plantTracker")</code>
</p>


<h3>Value</h3>

<p>An sf data.frame with the same columns as 'dat,' but with the
following additional columns:
</p>
<table>
<tr><td><code>trackID</code></td>
<td>
<p>A unique value for each individual genet, consisting of the
6-letter species code, the year in which this individual was recruited, and a
unique index number, all separated by a &quot;_&quot;.</p>
</td></tr>
<tr><td><code>age</code></td>
<td>
<p>An integer indicating the age of this individual in year <code>t</code>.
Values of NA indicate that an accurate age cannot be calculated because this
individual was observed either in the first year of sampling or in a year
following a gap in sampling, so the exact year of recruitment is not known.</p>
</td></tr>
<tr><td><code>size_tplus1</code></td>
<td>
<p>The  size of this <strong>genet</strong> in year <code>t+1</code>, in the same
units as the 'area' column in 'dat'.</p>
</td></tr>
<tr><td><code>recruit</code></td>
<td>
<p>A Boolean integer indicating whether this individual is a new
recruit in year <code>t</code> (1), or existed in a previous year (0). Values of NA
indicate that this individual was observed either in the first year of
sampling or in a year following a gap in sampling, so it is not possible to
accurately determine whether or not it is a new recruit in year <code>t</code>.</p>
</td></tr>
<tr><td><code>survives_tplus1</code></td>
<td>
<p>A Boolean integer indicating whether this individual
survived (1), or died (0) in year <code>t+1</code>.</p>
</td></tr>
<tr><td><code>basalArea_genet</code></td>
<td>
<p>The size of this entire genet in year <code>t</code>, in the same
units as the 'area' column in 'dat.' If the 'clonal' argument = FALSE, then
this number will be identical to the 'basalArea_ramet' column. </p>
</td></tr>
<tr><td><code>basalArea_ramet</code></td>
<td>
<p>This is only included if 'aggByGenet' = FALSE.
This is the size of this ramet in year <code>t</code>, in the same units as the 'area'
column in 'dat'. If the 'clonal' argument = FALSE , then this number will be
identical to the 'basalArea_genet' column.</p>
</td></tr>
<tr><td><code>nearEdge</code></td>
<td>
<p>A logical value indicating whether this individual is within
a buffer (specified by the 'buff' argument) from the edge of the quadrat.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+assign">assign()</a></code>, which is used inside the <code><a href="#topic+trackSpp">trackSpp()</a></code> function.
<code><a href="#topic+trackSpp">trackSpp()</a></code> applies the <code><a href="#topic+assign">assign()</a></code> function over multiple species and
quadrats, and uses the <code><a href="#topic+aggregateByGenet">aggregateByGenet()</a></code> function to aggregate the
demographic results by genet (if 'aggByGenet' = TRUE). The <code><a href="#topic+assign">assign()</a></code>
function uses the <code><a href="#topic+groupByGenet">groupByGenet()</a></code> function to group ramets into genets
(if 'clonal' argument = TRUE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- grasslandData[grasslandData$Site == c("AZ") &amp;
 grasslandData$Species %in% c("Bouteloua rothrockii",
  "Calliandra eriophylla"),]
names(dat)[1] &lt;- "speciesName"
inv &lt;- grasslandInventory[unique(dat$Quad)]
outDat &lt;- trackSpp(dat = dat,
 inv = inv,
 dorm = 1,
 buff = .05,
 buffGenet = 0.005,
 clonal = data.frame("Species" = unique(dat$speciesName),
 "clonal" = c(TRUE,FALSE)),
 species = "speciesName",
 aggByGenet = TRUE
 )

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
