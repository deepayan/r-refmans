<!DOCTYPE html><html lang="en"><head><title>Help for package tidyrules</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tidyrules}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#package_tidyrules'><p><code>tidyrules</code></p></a></li>
<li><a href='#addBackquotes'><p>Add backquotes</p></a></li>
<li><a href='#as_rulelist'><p>as_rulelist generic from tidyrules package</p></a></li>
<li><a href='#as_rulelist.data.frame'><p>as_rulelist method for a data.frame</p></a></li>
<li><a href='#as_ruleset'><p>Get a ruleset from a rulelist</p></a></li>
<li><a href='#augment'><p><code>augment</code> is re-export of generics::augment from</p>
tidyrules package</a></li>
<li><a href='#augment_class_keys'><p>as the name says</p></a></li>
<li><a href='#augment_class_no_keys'><p>as the name says</p></a></li>
<li><a href='#augment_regr_keys'><p>as the name says</p></a></li>
<li><a href='#augment_regr_no_keys'><p>as the name says</p></a></li>
<li><a href='#augment.rulelist'><p>Augment a rulelist</p></a></li>
<li><a href='#calculate'><p><code>calculate</code> is re-export of generics::calculate from</p>
tidyrules package</a></li>
<li><a href='#calculate.rulelist'><p><code>calculate</code> metrics for a rulelist</p></a></li>
<li><a href='#convert_rule_flavor'><p>Convert a R parsable rule to python/sql parsable rule</p></a></li>
<li><a href='#plot.prune_rulelist'><p>Plot method for <code>prune_rulelist</code> class</p></a></li>
<li><a href='#plot.rulelist'><p>Plot method for rulelist</p></a></li>
<li><a href='#positionSpaceOutsideSinglequotes'><p>Position of space outside single quotes</p></a></li>
<li><a href='#predict_all_nokeys_rulelist'><p>as the name says</p></a></li>
<li><a href='#predict_all_rulelist'><p>with or without keys</p></a></li>
<li><a href='#predict_nokeys_rulelist'><p>as the name says</p></a></li>
<li><a href='#predict_rulelist'><p>with or without keys</p></a></li>
<li><a href='#predict.rulelist'><p><code>predict</code> method for a rulelist</p></a></li>
<li><a href='#predict.ruleset'><p><code>predict</code> method for a ruleset</p></a></li>
<li><a href='#print.prune_rulelist'><p>Print method for <code>prune_rulelist</code> class</p></a></li>
<li><a href='#print.rulelist'><p>Print method for rulelist class</p></a></li>
<li><a href='#print.ruleset'><p>Print method for ruleset class</p></a></li>
<li><a href='#prune'><p><code>prune</code> is re-export of generics::prune from</p>
tidyrules package</a></li>
<li><a href='#prune.rulelist'><p><code>prune</code> rules of a rulelist</p></a></li>
<li><a href='#removeEmptyLines'><p>Remove empty lines</p></a></li>
<li><a href='#reorder'><p>reorder generic</p></a></li>
<li><a href='#reorder.rulelist'><p>Reorder the rules/rows of a rulelist</p></a></li>
<li><a href='#rulelist'><p>Rulelist</p></a></li>
<li><a href='#ruleset'><p>Ruleset</p></a></li>
<li><a href='#set_keys'><p>Set keys for a rulelist</p></a></li>
<li><a href='#set_validation_data'><p>Add <code>validation_data</code> to a rulelist</p></a></li>
<li><a href='#strHead'><p>Vectorized semantic equivalent of 'head' for a string</p></a></li>
<li><a href='#strReplaceReduce'><p>Sequential string replace</p></a></li>
<li><a href='#strSplitSingle'><p>String split a string</p></a></li>
<li><a href='#strTail'><p>Vectorized semantic equivalent of tail for a string</p></a></li>
<li><a href='#tidy'><p><code>tidy</code> is re-export of generics::tidy from</p>
tidyrules package</a></li>
<li><a href='#tidy.C5.0'><p>Get the rulelist from a C5 model</p></a></li>
<li><a href='#tidy.constparty'><p>Get the rulelist from a party model</p></a></li>
<li><a href='#tidy.cubist'><p>Get the rulelist from a cubist model</p></a></li>
<li><a href='#tidy.rpart'><p>Get the rulelist from a rpart model</p></a></li>
<li><a href='#to_sql_case'><p>Extract SQL case statement from a rulelist</p></a></li>
<li><a href='#varSpec'><p>Get variable specification for a Cubist/C5 object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Utilities to Retrieve Rulelists from Model Fits, Filter, Prune,
Reorder and Predict on Unseen Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Srikanth Komala Sheshachala &lt;sri.teach@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>stringr (&ge; 1.3.1), magrittr (&ge; 1.5), purrr (&ge; 0.3.2),
partykit (&ge; 1.2.2), rlang (&ge; 1.1.3), generics (&ge; 0.1.3),
checkmate (&ge; 2.3.1), tidytable (&ge; 0.11.0), data.table (&ge;
1.14.6), DescTools (&ge; 0.99.54), MetricsWeighted (&ge; 1.0.3),
cli (&ge; 3.6.2), glue (&ge; 1.7.0), pheatmap (&ge; 1.0.12), proxy
(&ge; 0.4.27), tibble (&ge; 3.2.1),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>AmesHousing (&ge; 0.0.3), dplyr (&ge; 0.8), C50 (&ge; 0.1.2),
Cubist (&ge; 0.2.2), rpart (&ge; 1.2.2), rpart.plot (&ge; 3.0.7),
modeldata (&ge; 0.0.1), testthat (&ge; 2.0.1), MASS (&ge; 7.3.50),
mlbench (&ge; 2.1.1), rmarkdown (&ge; 1.13), palmerpenguins (&ge;
0.1.1),</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a framework to work with decision rules. Rules can be extracted from supported models, augmented with (custom) metrics using validation data, manipulated using standard dataframe operations, reordered and pruned based on a metric, predict on unseen (test) data. Utilities include; Creating a rulelist manually, Exporting a rulelist as a SQL case statement and so on. The package offers two classes; rulelist and ruleset based on dataframe.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/talegari/tidyrules">https://github.com/talegari/tidyrules</a>,
<a href="https://talegari.github.io/tidyrules/">https://talegari.github.io/tidyrules/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/talegari/tidyrules/issues">https://github.com/talegari/tidyrules/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-29 12:19:43 UTC; srikanth-ks</td>
</tr>
<tr>
<td>Author:</td>
<td>Srikanth Komala Sheshachala [aut, cre],
  Amith Kumar Ullur Raghavendra [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-29 22:40:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='package_tidyrules'><code>tidyrules</code></h2><span id='topic+tidyrules'></span><span id='topic+tidyrules-package'></span><span id='topic+package_tidyrules'></span>

<h3>Description</h3>

<p><code>tidyrules</code> package provides a framework to work with decision
rules. Rules can be extracted from supported models using <a href="#topic+tidy">tidy</a>, augmented
using validation data by <a href="#topic+augment.rulelist">augment</a>, manipulated using
standard dataframe operations, (modified) rulelists can be used to
<a href="#topic+predict.rulelist">predict</a> on unseen (test) data. Utilities include:
Create a rulelist manually (<a href="#topic+as_rulelist.data.frame">as_rulelist</a>), Export
a rulelist to SQL (<a href="#topic+to_sql_case">to_sql_case</a>) and so on. The package offers two
classes; <a href="#topic+rulelist">rulelist</a> and <a href="#topic+ruleset">ruleset</a> based on dataframe.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Srikanth Komala Sheshachala <a href="mailto:sri.teach@gmail.com">sri.teach@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Amith Kumar Ullur Raghavendra <a href="mailto:amith54@gmail.com">amith54@gmail.com</a>
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>
</p>

<hr>
<h2 id='addBackquotes'>Add backquotes</h2><span id='topic+addBackquotes'></span>

<h3>Description</h3>

<p>(vectorized) Add backquotes when a string has a space in it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addBackquotes(string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addBackquotes_+3A_string">string</code></td>
<td>
<p>character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::addBackquotes(c("ab", "a b"))


</code></pre>

<hr>
<h2 id='as_rulelist'>as_rulelist generic from <a href="#topic+package_tidyrules">tidyrules</a> package</h2><span id='topic+as_rulelist'></span>

<h3>Description</h3>

<p>as_rulelist generic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_rulelist(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_rulelist_+3A_x">x</code></td>
<td>
<p>object to be coerced to a <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="as_rulelist_+3A_...">...</code></td>
<td>
<p>for methods to use</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='as_rulelist.data.frame'>as_rulelist method for a data.frame</h2><span id='topic+as_rulelist.data.frame'></span>

<h3>Description</h3>

<p>Convert a set of rules in a dataframe to a <a href="#topic+rulelist">rulelist</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
as_rulelist(x, keys = NULL, model_type = NULL, estimation_type, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_rulelist.data.frame_+3A_x">x</code></td>
<td>
<p>dataframe to be coerced to a <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="as_rulelist.data.frame_+3A_keys">keys</code></td>
<td>
<p>(character vector, default: NULL) column names which form the key</p>
</td></tr>
<tr><td><code id="as_rulelist.data.frame_+3A_model_type">model_type</code></td>
<td>
<p>(string, default: NULL) Name of the model which generated
the rules</p>
</td></tr>
<tr><td><code id="as_rulelist.data.frame_+3A_estimation_type">estimation_type</code></td>
<td>
<p>(string) One among: 'regression',
'classification'</p>
</td></tr>
<tr><td><code id="as_rulelist.data.frame_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Input dataframe should contain these columns: <code>rule_nbr</code>, <code>LHS</code>,
<code>RHS</code>. Providing other inputs helps augment better.
</p>


<h3>Value</h3>

<p><a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules_df = tidytable::tidytable(rule_nbr = 1:2,
                                LHS      = c("var_1 &gt; 50", "var_2 &lt; 30"),
                                RHS      = c(2, 1)
                                )
as_rulelist(rules_df, estimation_type = "regression")
</code></pre>

<hr>
<h2 id='as_ruleset'>Get a ruleset from a rulelist</h2><span id='topic+as_ruleset'></span>

<h3>Description</h3>

<p>Returns a ruleset object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_ruleset(rulelist)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_ruleset_+3A_rulelist">rulelist</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+ruleset">ruleset</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_class_party = partykit::ctree(species ~ .,
                                    data = palmerpenguins::penguins
                                    )
as_ruleset(tidy(model_class_party))

</code></pre>

<hr>
<h2 id='augment'><code>augment</code> is re-export of <a href="generics.html#topic+augment">generics::augment</a> from
<a href="#topic+package_tidyrules">tidyrules</a> package</h2><span id='topic+augment'></span>

<h3>Description</h3>

<p>See <a href="#topic+augment.rulelist">augment.rulelist</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>augment(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="augment_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="augment_+3A_...">...</code></td>
<td>
<p>For methods to use</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='augment_class_keys'>as the name says</h2><span id='topic+augment_class_keys'></span>

<h3>Description</h3>

<p>as the name says
not to be exported
</p>


<h3>Usage</h3>

<pre><code class='language-R'>augment_class_keys(x, new_data, y_name, weight, ...)
</code></pre>

<hr>
<h2 id='augment_class_no_keys'>as the name says</h2><span id='topic+augment_class_no_keys'></span>

<h3>Description</h3>

<p>as the name says
not to be exported
</p>


<h3>Usage</h3>

<pre><code class='language-R'>augment_class_no_keys(x, new_data, y_name, weight, ...)
</code></pre>

<hr>
<h2 id='augment_regr_keys'>as the name says</h2><span id='topic+augment_regr_keys'></span>

<h3>Description</h3>

<p>as the name says
not to be exported
</p>


<h3>Usage</h3>

<pre><code class='language-R'>augment_regr_keys(x, new_data, y_name, weight, ...)
</code></pre>

<hr>
<h2 id='augment_regr_no_keys'>as the name says</h2><span id='topic+augment_regr_no_keys'></span>

<h3>Description</h3>

<p>as the name says
not to be exported
</p>


<h3>Usage</h3>

<pre><code class='language-R'>augment_regr_no_keys(x, new_data, y_name, weight, ...)
</code></pre>

<hr>
<h2 id='augment.rulelist'>Augment a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+augment.rulelist'></span>

<h3>Description</h3>

<p><code>augment</code> outputs a <a href="#topic+rulelist">rulelist</a> with an additional column named
<code>augmented_stats</code> based on summary statistics calculated using attribute
<code>validation_data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
augment(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="augment.rulelist_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="augment.rulelist_+3A_...">...</code></td>
<td>
<p>(expressions) To be send to <a href="tidytable.html#topic+summarize">tidytable::summarise</a> for custom
aggregations. See examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dataframe-column <code>augmented_stats</code> will have these columns
corresponding to the <code>estimation_type</code>:
</p>

<ul>
<li><p> For <code>regression</code>: <code>support</code>, <code>IQR</code>, <code>RMSE</code>
</p>
</li>
<li><p> For <code>classification</code>: <code>support</code>, <code>confidence</code>, <code>lift</code>
</p>
</li></ul>

<p>along with custom aggregations.
</p>


<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> with a new dataframe-column named <code>augmented_stats</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples for augment ------------------------------------------------------
library("magrittr")

# C5 ----
att = modeldata::attrition
set.seed(100)
train_index = sample(c(TRUE, FALSE), nrow(att), replace = TRUE)

model_c5 = C50::C5.0(Attrition ~., data = att[train_index, ], rules = TRUE)
tidy_c5  =
  model_c5 %&gt;%
  tidy() %&gt;%
  set_validation_data(att[!train_index, ], "Attrition")

tidy_c5

augment(tidy_c5) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# augment with custom aggregator
augment(tidy_c5,output_counts = list(table(Attrition))) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# rpart ----
set.seed(100)
train_index = sample(c(TRUE, FALSE), nrow(iris), replace = TRUE)

model_class_rpart = rpart::rpart(Species ~ ., data = iris[train_index, ])
tidy_class_rpart  = tidy(model_class_rpart) %&gt;%
  set_validation_data(iris[!train_index, ], "Species")
tidy_class_rpart

model_regr_rpart = rpart::rpart(Sepal.Length ~ ., data = iris[train_index, ])
tidy_regr_rpart  = tidy(model_regr_rpart) %&gt;%
  set_validation_data(iris[!train_index, ], "Sepal.Length")
tidy_regr_rpart

# augment (classification case)
augment(tidy_class_rpart) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# augment (regression case)
augment(tidy_regr_rpart) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# party ----
pen = palmerpenguins::penguins %&gt;%
  tidytable::drop_na(bill_length_mm)
set.seed(100)
train_index = sample(c(TRUE, FALSE), nrow(pen), replace = TRUE)

model_class_party = partykit::ctree(species ~ ., data = pen[train_index, ])
tidy_class_party  = tidy(model_class_party) %&gt;%
  set_validation_data(pen[!train_index, ], "species")
tidy_class_party

model_regr_party =
  partykit::ctree(bill_length_mm ~ ., data = pen[train_index, ])
tidy_regr_party  = tidy(model_regr_party) %&gt;%
  set_validation_data(pen[!train_index, ], "bill_length_mm")
tidy_regr_party

# augment (classification case)
augment(tidy_class_party) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# augment (regression case)
augment(tidy_regr_party) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

# cubist ----
att         = modeldata::attrition
set.seed(100)
train_index = sample(c(TRUE, FALSE), nrow(att), replace = TRUE)
cols_att    = setdiff(colnames(att), c("MonthlyIncome", "Attrition"))

model_cubist = Cubist::cubist(x = att[train_index, cols_att],
                              y = att[train_index, "MonthlyIncome"]
                              )

tidy_cubist = tidy(model_cubist) %&gt;%
  set_validation_data(att[!train_index, ], "MonthlyIncome")
tidy_cubist

augment(tidy_cubist) %&gt;%
  tidytable::unnest(augmented_stats, names_sep = "__") %&gt;%
  tidytable::glimpse()

</code></pre>

<hr>
<h2 id='calculate'><code>calculate</code> is re-export of <a href="generics.html#topic+calculate">generics::calculate</a> from
<a href="#topic+package_tidyrules">tidyrules</a> package</h2><span id='topic+calculate'></span>

<h3>Description</h3>

<p>See <a href="#topic+calculate.rulelist">calculate.rulelist</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="calculate_+3A_...">...</code></td>
<td>
<p>See <a href="#topic+calculate.rulelist">calculate.rulelist</a></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='calculate.rulelist'><code>calculate</code> metrics for a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+calculate.rulelist'></span>

<h3>Description</h3>

<p>Computes some metrics (based on <code>estimation_type</code>) in cumulative
window function style over the rulelist (in the same order) ignoring the
keys.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
calculate(x, metrics_to_exclude = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate.rulelist_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="calculate.rulelist_+3A_metrics_to_exclude">metrics_to_exclude</code></td>
<td>
<p>(character vector) Names of metrics to exclude</p>
</td></tr>
<tr><td><code id="calculate.rulelist_+3A_...">...</code></td>
<td>
<p>Named list of custom metrics. See 'details'.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Default Metrics</h4>

<p>These metrics are calculated by default:
</p>

<ul>
<li> <p><code>cumulative_coverage</code>: For nth rule in the rulelist, number of distinct <code>row_nbr</code>s (of <code>new_data</code>) covered by nth and all preceding rules (in order). In weighted case, we sum the weights corresponding to the distinct <code>row_nbr</code>s.
</p>
</li>
<li> <p><code>cumulative_overlap</code>: Up til nth rule in the rulelist, number of distinct <code>row_nbr</code>s (of <code>new_data</code>) already covered by some preceding rule (in order). In weighted case, we sum the weights corresponding to the distinct <code>row_nbr</code>s.
</p>
</li></ul>

<p>For classification:
</p>

<ul>
<li> <p><code>cumulative_accuracy</code>: For nth rule in the rulelist, fraction of <code>row_nbr</code>s such that <code>RHS</code> matches the <code>y_name</code> column (of <code>new_data</code>) by nth and all preceding rules (in order). In weighted case, weighted accuracy is computed.
</p>
</li></ul>

<p>For regression:
</p>

<ul>
<li> <p><code>cumulative_RMSE</code>: For nth rule in the rulelist, weighted RMSE of all predictions (<code>RHS</code>) predicted by nth rule and all preceding rules.
</p>
</li></ul>




<h4>Custom metrics</h4>

<p>Custom metrics to be computed should be passed a named list of function(s) in
<code>...</code>. The custom metric function should take these arguments in same order:
<code>rulelist</code>, <code>new_data</code>, <code>y_name</code>, <code>weight</code>. The custom metric function should
return a numeric vector of same length as the number of rows of rulelist.
</p>



<h3>Value</h3>

<p>A dataframe of metrics with a <code>rule_nbr</code> column.
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("magrittr")
model_c5  = C50::C5.0(Attrition ~., data = modeldata::attrition, rules = TRUE)
tidy_c5   = tidy(model_c5) %&gt;%
            set_validation_data(modeldata::attrition, "Attrition") %&gt;%
            set_keys(NULL)

# calculate default metrics (classification)
calculate(tidy_c5)

model_rpart = rpart::rpart(MonthlyIncome ~., data = modeldata::attrition)
tidy_rpart  =
  tidy(model_rpart) %&gt;%
  set_validation_data(modeldata::attrition, "MonthlyIncome") %&gt;%
  set_keys(NULL)

# calculate default metrics (regression)
calculate(tidy_rpart)

# calculate default metrics with a custom metric
#' custom function to get cumulative MAE
library("tidytable")
get_cumulative_MAE = function(rulelist, new_data, y_name, weight){

  priority_df =
    rulelist %&gt;%
    select(rule_nbr) %&gt;%
    mutate(priority = 1:nrow(rulelist)) %&gt;%
    select(rule_nbr, priority)

  pred_df =
    predict(rulelist, new_data) %&gt;%
    left_join(priority_df, by = "rule_nbr") %&gt;%
    mutate(weight = local(weight)) %&gt;%
    select(rule_nbr, row_nbr, weight, priority)

  new_data2 =
    new_data %&gt;%
    mutate(row_nbr = 1:n()) %&gt;%
    select(all_of(c("row_nbr", y_name)))

  rmse_till_rule = function(rn){

    if (is.character(rulelist$RHS)) {
      inter_df =
        pred_df %&gt;%
        tidytable::filter(priority &lt;= rn) %&gt;%
        left_join(mutate(new_data, row_nbr = 1:n()), by = "row_nbr") %&gt;%
        left_join(select(rulelist, rule_nbr, RHS), by = "rule_nbr") %&gt;%
        nest(.by = c("RHS", "rule_nbr", "row_nbr", "priority", "weight")) %&gt;%
        mutate(RHS = purrr::map2_dbl(RHS,
                                     data,
                                     ~ eval(parse(text = .x), envir = .y)
                                     )
               ) %&gt;%
        unnest(data)
    } else {

      inter_df =
        pred_df %&gt;%
        tidytable::filter(priority &lt;= rn) %&gt;%
        left_join(new_data2, by = "row_nbr") %&gt;%
        left_join(select(rulelist, rule_nbr, RHS), by = "rule_nbr")
    }

    inter_df %&gt;%
      summarise(rmse = MetricsWeighted::mae(RHS,
                                             .data[[y_name]],
                                             weight,
                                             na.rm = TRUE
                                             )
                ) %&gt;%
      `[[`("rmse")
  }

  res = purrr::map_dbl(1:nrow(rulelist), rmse_till_rule)
  return(res)
}

calculate(tidy_rpart,
          metrics_to_exclude = NULL,
          list("cumulative_mae" = get_cumulative_MAE)
          )

</code></pre>

<hr>
<h2 id='convert_rule_flavor'>Convert a R parsable rule to python/sql parsable rule</h2><span id='topic+convert_rule_flavor'></span>

<h3>Description</h3>

<p>Convert a R parsable rule to python/sql parsable rule
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_rule_flavor(rule, flavor)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_rule_flavor_+3A_rule">rule</code></td>
<td>
<p>(chr vector) R parsable rule(s)</p>
</td></tr>
<tr><td><code id="convert_rule_flavor_+3A_flavor">flavor</code></td>
<td>
<p>(string) One among: 'python', 'sql'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(chr vector) of rules
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>, <a href="#topic+predict.rulelist">predict</a>, <a href="#topic+to_sql_case">to_sql_case</a>
</p>
<p>Other Auxiliary Rulelist Utility: 
<code><a href="#topic+to_sql_case">to_sql_case</a>()</code>
</p>

<hr>
<h2 id='plot.prune_rulelist'>Plot method for <code>prune_rulelist</code> class</h2><span id='topic+plot.prune_rulelist'></span>

<h3>Description</h3>

<p>Plot method for <code>prune_rulelist</code> class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'prune_rulelist'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.prune_rulelist_+3A_x">x</code></td>
<td>
<p>A 'prune_rulelist' object</p>
</td></tr>
<tr><td><code id="plot.prune_rulelist_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot2 object (invisibly)
</p>

<hr>
<h2 id='plot.rulelist'>Plot method for rulelist</h2><span id='topic+plot.rulelist'></span>

<h3>Description</h3>

<p>Plots a heatmap with <code>rule_nbr</code>'s on x-side and clusters of
<code>row_nbr</code>'s on y-side of a binary matrix with 1 if a rule is applicable for
a row.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
plot(x, thres_cluster_rows = 1000, dist_metric = "jaccard", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.rulelist_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="plot.rulelist_+3A_thres_cluster_rows">thres_cluster_rows</code></td>
<td>
<p>(positive integer) Maximum number of rows beyond
which a x-side dendrogram is not computed</p>
</td></tr>
<tr><td><code id="plot.rulelist_+3A_dist_metric">dist_metric</code></td>
<td>
<p>(string or function, default: &quot;jaccard&quot;) Distance metric
for y-side (<code>rule_nbr</code>) passed to <code>method</code> argument of <a href="proxy.html#topic+dist">proxy::dist</a></p>
</td></tr>
<tr><td><code id="plot.rulelist_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <a href="pheatmap.html#topic+pheatmap">pheatmap::pheatmap</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Number of clusters is set to min(number of unique rows in the
row_nbr X rule_nbr matrix and thres_cluster_rows)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("magrittr")
att = modeldata::attrition
tidy_c5 =
  C50::C5.0(Attrition ~., data = att, rules = TRUE) %&gt;%
  tidy() %&gt;%
  set_validation_data(att, "Attrition") %&gt;%
  set_keys(NULL)

plot(tidy_c5)

</code></pre>

<hr>
<h2 id='positionSpaceOutsideSinglequotes'>Position of space outside single quotes</h2><span id='topic+positionSpaceOutsideSinglequotes'></span>

<h3>Description</h3>

<p>(vectorised) Detect the position of space in a string not within
a pair of single quotes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>positionSpaceOutsideSinglequotes(string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="positionSpaceOutsideSinglequotes_+3A_string">string</code></td>
<td>
<p>A character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A integer vector of positions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::positionSpaceOutsideSinglequotes(c("hello", "hel' 'o "))


</code></pre>

<hr>
<h2 id='predict_all_nokeys_rulelist'>as the name says</h2><span id='topic+predict_all_nokeys_rulelist'></span>

<h3>Description</h3>

<p>as the name says
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_all_nokeys_rulelist(rulelist, new_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_all_nokeys_rulelist_+3A_rulelist">rulelist</code></td>
<td>
<p>rulelist</p>
</td></tr>
<tr><td><code id="predict_all_nokeys_rulelist_+3A_new_data">new_data</code></td>
<td>
<p>new_data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe
</p>

<hr>
<h2 id='predict_all_rulelist'>with or without keys</h2><span id='topic+predict_all_rulelist'></span>

<h3>Description</h3>

<p>uses predict_all_nokeys_rulelist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_all_rulelist(rulelist, new_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_all_rulelist_+3A_rulelist">rulelist</code></td>
<td>
<p>rulelist</p>
</td></tr>
<tr><td><code id="predict_all_rulelist_+3A_new_data">new_data</code></td>
<td>
<p>new_data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe
</p>

<hr>
<h2 id='predict_nokeys_rulelist'>as the name says</h2><span id='topic+predict_nokeys_rulelist'></span>

<h3>Description</h3>

<p>as the name says
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_nokeys_rulelist(rulelist, new_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_nokeys_rulelist_+3A_rulelist">rulelist</code></td>
<td>
<p>rulelist</p>
</td></tr>
<tr><td><code id="predict_nokeys_rulelist_+3A_new_data">new_data</code></td>
<td>
<p>new_data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe
</p>

<hr>
<h2 id='predict_rulelist'>with or without keys</h2><span id='topic+predict_rulelist'></span>

<h3>Description</h3>

<p>uses predict_nokeys_rulelist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_rulelist(rulelist, new_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_rulelist_+3A_rulelist">rulelist</code></td>
<td>
<p>rulelist</p>
</td></tr>
<tr><td><code id="predict_rulelist_+3A_new_data">new_data</code></td>
<td>
<p>new_data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe
</p>

<hr>
<h2 id='predict.rulelist'><code>predict</code> method for a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+predict.rulelist'></span>

<h3>Description</h3>

<p>Predicts <code>rule_nbr</code> applicable (as per the order in rulelist)
for a <code>row_nbr</code> (per key) in new_data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
predict(object, new_data, multiple = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.rulelist_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="predict.rulelist_+3A_new_data">new_data</code></td>
<td>
<p>(dataframe)</p>
</td></tr>
<tr><td><code id="predict.rulelist_+3A_multiple">multiple</code></td>
<td>
<p>(flag, default: FALSE) Whether to output all rule numbers
applicable for a row. If FALSE, the first satisfying rule is provided.</p>
</td></tr>
<tr><td><code id="predict.rulelist_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a <code>row_nbr</code> is covered more than one <code>rule_nbr</code> per 'keys', then
<code>rule_nbr</code> appearing earlier (as in row order of the <a href="#topic+rulelist">rulelist</a>) takes
precedence.
</p>


<h4>Output Format</h4>


<ul>
<li><p> When multiple is <code>FALSE</code>(default), output is a dataframe with three
or more columns: <code>row_number</code> (int), columns corresponding to 'keys',
<code>rule_nbr</code> (int).
</p>
</li>
<li><p> When multiple is <code>TRUE</code>, output is a dataframe with three
or more columns: <code>row_number</code> (int), columns corresponding to 'keys',
<code>rule_nbr</code> (list column of integers).
</p>
</li>
<li><p> If a row number and 'keys' combination is not covered by any rule, then
<code>rule_nbr</code> column has missing value.
</p>
</li></ul>




<h3>Value</h3>

<p>A  dataframe. See <strong>Details</strong>.
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_c5 = C50::C5.0(species ~.,
                     data = palmerpenguins::penguins,
                     trials = 5,
                     rules = TRUE
                     )
tidy_c5 = tidy(model_c5)
tidy_c5

output_1 = predict(tidy_c5, palmerpenguins::penguins)
output_1 # different rules per 'keys' (`trial_nbr` here)

output_2 = predict(tidy_c5, palmerpenguins::penguins, multiple = TRUE)
output_2 # `rule_nbr` is a list-column of integer vectors

</code></pre>

<hr>
<h2 id='predict.ruleset'><code>predict</code> method for a <a href="#topic+ruleset">ruleset</a></h2><span id='topic+predict.ruleset'></span>

<h3>Description</h3>

<p>Predicts multiple <code>rule_nbr</code>(s) applicable for a <code>row_nbr</code> (per
key) in new_data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ruleset'
predict(object, new_data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.ruleset_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+ruleset">ruleset</a></p>
</td></tr>
<tr><td><code id="predict.ruleset_+3A_new_data">new_data</code></td>
<td>
<p>(dataframe)</p>
</td></tr>
<tr><td><code id="predict.ruleset_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with three or more columns: <code>row_number</code> (int), columns
corresponding to 'keys', <code>rule_nbr</code> (list column of integers). If a row
number and 'keys' combination is not covered by any rule, then <code>rule_nbr</code>
column has missing value.
</p>


<h3>See Also</h3>

<p><a href="#topic+predict.rulelist">predict.rulelist</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_c5 = C50::C5.0(species ~.,
                     data = palmerpenguins::penguins,
                     trials = 5,
                     rules = TRUE
                     )
tidy_c5_ruleset = as_ruleset(tidy(model_c5))
tidy_c5_ruleset

predict(tidy_c5_ruleset, palmerpenguins::penguins)

</code></pre>

<hr>
<h2 id='print.prune_rulelist'>Print method for <code>prune_rulelist</code> class</h2><span id='topic+print.prune_rulelist'></span>

<h3>Description</h3>

<p>Print method for <code>prune_rulelist</code> class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'prune_rulelist'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.prune_rulelist_+3A_x">x</code></td>
<td>
<p>A 'prune_rulelist' object</p>
</td></tr>
<tr><td><code id="print.prune_rulelist_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>

<hr>
<h2 id='print.rulelist'>Print method for <a href="#topic+rulelist">rulelist</a> class</h2><span id='topic+print.rulelist'></span>

<h3>Description</h3>

<p>Prints <a href="#topic+rulelist">rulelist</a> attributes and first few rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
print(x, banner = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.rulelist_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a> object</p>
</td></tr>
<tr><td><code id="print.rulelist_+3A_banner">banner</code></td>
<td>
<p>(flag, default: <code>TRUE</code>) Should the banner be displayed</p>
</td></tr>
<tr><td><code id="print.rulelist_+3A_...">...</code></td>
<td>
<p>Passed to <code>tidytable::print</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>input <a href="#topic+rulelist">rulelist</a> (invisibly)
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='print.ruleset'>Print method for ruleset class</h2><span id='topic+print.ruleset'></span>

<h3>Description</h3>

<p>Prints the ruleset object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ruleset'
print(x, banner = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.ruleset_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="print.ruleset_+3A_banner">banner</code></td>
<td>
<p>(flag, default: <code>TRUE</code>) Should the banner be displayed</p>
</td></tr>
<tr><td><code id="print.ruleset_+3A_...">...</code></td>
<td>
<p>Passed to <code>print.rulelist</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>(invisibly) Returns the ruleset object
</p>


<h3>See Also</h3>

<p><a href="#topic+print.rulelist">print.rulelist</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_class_party = partykit::ctree(species ~ .,
                                    data = palmerpenguins::penguins
                                    )
as_ruleset(tidy(model_class_party))

</code></pre>

<hr>
<h2 id='prune'><code>prune</code> is re-export of <a href="generics.html#topic+prune">generics::prune</a> from
<a href="#topic+package_tidyrules">tidyrules</a> package</h2><span id='topic+prune'></span>

<h3>Description</h3>

<p>See <a href="#topic+prune.rulelist">prune.rulelist</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prune(tree, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prune_+3A_tree">tree</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="prune_+3A_...">...</code></td>
<td>
<p>See <a href="#topic+prune.rulelist">prune.rulelist</a></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='prune.rulelist'><code>prune</code> rules of a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+prune.rulelist'></span>

<h3>Description</h3>

<p>Prune the <a href="#topic+rulelist">rulelist</a> by suggesting to keep first 'k' rules based
on metrics computed by <a href="#topic+calculate.rulelist">calculate</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
prune(
  tree,
  metrics_to_exclude = NULL,
  stop_expr_string = "relative__cumulative_coverage &gt;= 0.9",
  min_n_rules = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prune.rulelist_+3A_tree">tree</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="prune.rulelist_+3A_metrics_to_exclude">metrics_to_exclude</code></td>
<td>
<p>(character vector or NULL) Names of metrics not to
be calculated. See <a href="#topic+calculate.rulelist">calculate</a> for the list of default
metrics.</p>
</td></tr>
<tr><td><code id="prune.rulelist_+3A_stop_expr_string">stop_expr_string</code></td>
<td>
<p>(string default: &quot;relative__cumulative_coverage &gt;=
0.9&quot;) Parsable condition</p>
</td></tr>
<tr><td><code id="prune.rulelist_+3A_min_n_rules">min_n_rules</code></td>
<td>
<p>(positive integer) Minimum number of rules to keep</p>
</td></tr>
<tr><td><code id="prune.rulelist_+3A_...">...</code></td>
<td>
<p>Named list of custom metrics passed to
<a href="#topic+calculate.rulelist">calculate</a></p>
</td></tr>
</table>


<h3>Details</h3>


<ol>
<li><p> Metrics are computed using <a href="#topic+calculate.rulelist">calculate</a>. 2.
Relative metrics (prepended by 'relative__') are calculated by dividing
each metric by its max value. 3. The first rule in rulelist order which
meets the 'stop_expr_string' criteria is stored (say 'pos'). Print method
suggests to keep rules until pos.
</p>
</li></ol>



<h3>Value</h3>

<p>Object of class 'prune_ruleslist' with these components: 1. pruned:
ruleset keeping only first 'pos' rows. 2. n_pruned_rules: pos. If stop
criteria is never met, then pos = nrow(ruleset) 3. n_total_rules:
nrow(ruleset), 4. metrics_df: Dataframe with metrics and relative metrics
5. stop_expr_string
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("magrittr")
model_c5  = C50::C5.0(Attrition ~., data = modeldata::attrition, rules = TRUE)
tidy_c5   = tidy(model_c5) %&gt;%
            set_validation_data(modeldata::attrition, "Attrition") %&gt;%
            set_keys(NULL)

#' prune with defaults
prune_obj = prune(tidy_c5)
#' note that all other metrics are visible in the print output
prune_obj
plot(prune_obj)
prune_obj$pruned

#' prune with a different stop_expr_string threshold
prune_obj = prune(tidy_c5,
                  stop_expr_string = "relative__cumulative_coverage &gt;= 0.2"
                  )
prune_obj #' as expected, has smaller then 10 rules as compared to default args
plot(prune_obj)
prune_obj$pruned

#' prune with a different stop_expr_string metric
st = "relative__cumulative_overlap &lt;= 0.7 &amp; relative__cumulative_overlap &gt; 0"
prune_obj = prune(tidy_c5, stop_expr_string = st)
prune_obj #' as expected, has smaller then 10 rules as compared to default args
plot(prune_obj)
prune_obj$pruned

</code></pre>

<hr>
<h2 id='removeEmptyLines'>Remove empty lines</h2><span id='topic+removeEmptyLines'></span>

<h3>Description</h3>

<p>Remove empty strings from a character vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeEmptyLines(strings)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="removeEmptyLines_+3A_strings">strings</code></td>
<td>
<p>A character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::removeEmptyLines(c("abc", "", "d"))


</code></pre>

<hr>
<h2 id='reorder'>reorder generic</h2><span id='topic+reorder'></span>

<h3>Description</h3>

<p>reorder generic for rulelist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reorder(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reorder_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="reorder_+3A_...">...</code></td>
<td>
<p>See <a href="#topic+reorder.rulelist">reorder.rulelist</a></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='reorder.rulelist'>Reorder the rules/rows of a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+reorder.rulelist'></span>

<h3>Description</h3>

<p>Implements a greedy strategy to add one rule at a time which
maximizes/minimizes a metric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rulelist'
reorder(x, metric = "cumulative_coverage", minimize = FALSE, init = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reorder.rulelist_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="reorder.rulelist_+3A_metric">metric</code></td>
<td>
<p>(character vector or named list) Name of metrics or a custom
function(s). See <a href="#topic+calculate.rulelist">calculate</a>. The 'n+1'th metric is
used when there is a match at 'nth' level, similar to <a href="base.html#topic+order">base::order</a>. If
there is a match at final level, row order of the rulelist comes into play.</p>
</td></tr>
<tr><td><code id="reorder.rulelist_+3A_minimize">minimize</code></td>
<td>
<p>(logical vector) Whether to minimize. Either TRUE/FALSE or a
logical vector of same length as metric</p>
</td></tr>
<tr><td><code id="reorder.rulelist_+3A_init">init</code></td>
<td>
<p>(positive integer) Initial number of rows after which reordering
should begin</p>
</td></tr>
<tr><td><code id="reorder.rulelist_+3A_...">...</code></td>
<td>
<p>passed to <a href="#topic+calculate.rulelist">calculate</a></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("magrittr")
att = modeldata::attrition
tidy_c5 =
  C50::C5.0(Attrition ~., data = att, rules = TRUE) %&gt;%
  tidy() %&gt;%
  set_validation_data(att, "Attrition") %&gt;%
  set_keys(NULL) %&gt;%
  head(5)

# with defaults
reorder(tidy_c5)

# use 'cumulative_overlap' to break ties (if any)
reorder(tidy_c5, metric = c("cumulative_coverage", "cumulative_overlap"))

# reorder after 2 rules
reorder(tidy_c5, init = 2)

</code></pre>

<hr>
<h2 id='rulelist'>Rulelist</h2><span id='topic+rulelist'></span>

<h3>Description</h3>



<h4>Structure</h4>

<p>A <code>rulelist</code> is ordered list of rules stored as a dataframe. Each row,
specifies a rule (LHS), expected outcome (RHS) and some other details.
</p>
<p>It has these mandatory columns:
</p>

<ul>
<li> <p><code>rule_nbr</code>: (integer vector) Rule number
</p>
</li>
<li> <p><code>LHS</code>: (character vector) A rule is a string that can be parsed using <code><a href="base.html#topic+parse">base::parse()</a></code>
</p>
</li>
<li> <p><code>RHS</code>: (character vector or a literal)
</p>
</li></ul>




<h4>Example</h4>

<div class="sourceCode"><pre>| rule_nbr|LHS                                                                  |RHS       | support| confidence|     lift|
|--------:|:--------------------------------------------------------------------|:---------|-------:|----------:|--------:|
|        1|( island %in% c('Biscoe') ) &amp; ( flipper_length_mm &gt; 203 )            |Gentoo    |     122|  1.0000000| 2.774193|
|        2|( island %in% c('Biscoe') ) &amp; ( flipper_length_mm &lt;= 203 )           |Adelie    |      46|  0.9565217| 2.164760|
|        3|( island %in% c('Dream', 'Torgersen') ) &amp; ( bill_length_mm &gt; 44.1 )  |Chinstrap |      65|  0.9538462| 4.825339|
|        4|( island %in% c('Dream', 'Torgersen') ) &amp; ( bill_length_mm &lt;= 44.1 ) |Adelie    |     111|  0.9459459| 2.140825|
</pre></div>



<h4>Create a rulelist</h4>

<p>A <code>rulelist</code> can be created using <code><a href="#topic+tidy">tidy()</a></code> on some supported model fits
(run: <code>utils::methods(tidy)</code>). It can also be created manually from a
existing dataframe using <a href="#topic+as_rulelist.data.frame">as_rulelist</a>.
</p>



<h4>Keys and attributes</h4>

<p>Columns identified as 'keys' along with <code>rule_nbr</code> form a unique
combination
&ndash; a group of rules. For example, rule-based C5 model with multiple trials
creates rules per each <code>trial_nbr</code>. <code>predict</code> method understands 'keys',
thereby provides/predicts a rule number (for each row in new data / test
data) within the same <code>trial_nbr</code>.
</p>
<p>A rulelist has these mandatory attributes:
</p>

<ul>
<li> <p><code>estimation_type</code>: One among <code>regression</code>, <code>classification</code>
</p>
<p>A rulelist has these optional attributes:
</p>
</li>
<li> <p><code>keys</code>: (character vector)Names of the column that forms a key.
</p>
</li>
<li> <p><code>model_type</code>: (string) Name of the model
</p>
</li></ul>



<h5>Set Validation data</h5>

<p>This helps a few methods like <a href="#topic+augment">augment</a>, <a href="#topic+calculate">calculate</a>, <a href="#topic+prune">prune</a>, <a href="#topic+reorder">reorder</a>
require few additional attributes which can be set using
<a href="#topic+set_validation_data">set_validation_data</a>.
</p>



<h5>Methods for rulelist</h5>


<ol>
<li> <p><a href="#topic+predict.rulelist">Predict</a>: Given a dataframe (possibly without a
dependent variable column aka 'test data'), predicts the first rule (as
ordered in the rulelist) per 'keys' that is applicable for each row. When
<code>multiple = TRUE</code>, returns all rules applicable for a row (per key).
</p>
</li>
<li> <p><a href="#topic+augment.rulelist">Augment</a>: Outputs summary statistics per rule over
validation data and returns a rulelist with a new dataframe-column.
</p>
</li>
<li> <p><a href="#topic+calculate.rulelist">Calculate</a>: Computes metrics for a rulelist in a
cumulative manner such as <code>cumulative_coverage</code>, <code>cumulative_overlap</code>,
<code>cumulative_accuracy</code>.
</p>
</li>
<li> <p><a href="#topic+prune.rulelist">Prune</a>: Suggests pruning a rulelist such that some
expectation are met (based on metrics). Example: cumulative_coverage of 80%
can be met with a first few rules.
</p>
</li>
<li> <p><a href="#topic+reorder.rulelist">Reorder</a>: Reorders a rulelist in order to maximize a
metric.
</p>
</li></ol>




<h5>Manipulating a rulelist</h5>

<p>Rulelists are essentially dataframes. Hence, any dataframe operations which
preferably preserve attributes will output a rulelist. <a href="#topic+as_rulelist">as_rulelist</a> and
<a href="base.html#topic+as.data.frame">as.data.frame</a> will help in moving back and forth between rulelist and
dataframe worlds.
</p>



<h5>Utilities for a rulelist</h5>


<ol>
<li> <p><a href="#topic+as_rulelist.data.frame">as_rulelist</a>: Create a <code>rulelist</code> from a
dataframe with some mandatory columns.
</p>
</li>
<li> <p><a href="#topic+set_keys">set_keys</a>: Set or Unset 'keys' of a <code>rulelist</code>.
</p>
</li>
<li> <p><a href="#topic+to_sql_case">to_sql_case</a>: Outputs a SQL case statement for a <code>rulelist</code>.
</p>
</li>
<li> <p><a href="#topic+convert_rule_flavor">convert_rule_flavor</a>: Converts <code>R</code>-parsable rule strings to python/SQL
parsable rule strings.
</p>
</li></ol>





<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>

<hr>
<h2 id='ruleset'>Ruleset</h2><span id='topic+ruleset'></span>

<h3>Description</h3>

<p>ruleset class is a piggyback class that inherits <a href="#topic+rulelist">rulelist</a>
class for convenience of <a href="base.html#topic+print">print</a> and <a href="stats.html#topic+predict">predict</a> methods.
</p>

<hr>
<h2 id='set_keys'>Set keys for a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+set_keys'></span>

<h3>Description</h3>

<p>'keys' are a set of column(s) which identify a group of rules in
a <a href="#topic+rulelist">rulelist</a>. Methods like <a href="#topic+predict.rulelist">predict</a>,
<a href="#topic+augment.rulelist">augment</a> produce output per key combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_keys(x, keys, reset = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_keys_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="set_keys_+3A_keys">keys</code></td>
<td>
<p>(character vector or NULL)</p>
</td></tr>
<tr><td><code id="set_keys_+3A_reset">reset</code></td>
<td>
<p>(flag) Whether to reset the keys to sequential numbers starting
with 1 when <code>keys</code> is set to NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A new <a href="#topic+rulelist">rulelist</a> is returned with attr <code>keys</code> is modified. The input
<a href="#topic+rulelist">rulelist</a> object is unaltered.
</p>


<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Rulelist Utility: 
<code><a href="#topic+set_validation_data">set_validation_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_c5 = C50::C5.0(Attrition ~., data = modeldata::attrition, rules = TRUE)
tidy_c5 = tidy(model_c5)
tidy_c5 # keys are: "trial_nbr"

tidy_c5[["rule_nbr"]] = 1:nrow(tidy_c5)
new_tidy_c5 = set_keys(tidy_c5, NULL) # remove all keys
new_tidy_c5

new_2_tidy_c5 = set_keys(new_tidy_c5, "trial_nbr") # set "trial_nbr" as key
new_2_tidy_c5

# Note that `tidy_c5` and `new_tidy_c5` are not altered.
tidy_c5
new_tidy_c5

</code></pre>

<hr>
<h2 id='set_validation_data'>Add <code>validation_data</code> to a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+set_validation_data'></span>

<h3>Description</h3>

<p>Returns a <a href="#topic+rulelist">rulelist</a> with three new attributes set:
<code>validation_data</code>, <code>y_name</code> and <code>weight</code>. Methods such as
<a href="#topic+augment.rulelist">augment</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder">reorder</a> require this to be set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_validation_data(x, validation_data, y_name, weight = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_validation_data_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a></p>
</td></tr>
<tr><td><code id="set_validation_data_+3A_validation_data">validation_data</code></td>
<td>
<p>(dataframe) Data to used for computing some metrics.
It is expected to contain <code>y_name</code> column.</p>
</td></tr>
<tr><td><code id="set_validation_data_+3A_y_name">y_name</code></td>
<td>
<p>(string) Name of the dependent variable column.</p>
</td></tr>
<tr><td><code id="set_validation_data_+3A_weight">weight</code></td>
<td>
<p>(non-negative numeric vector, default: 1) Weight per
observation/row of <code>validation_data</code>. This is expected to have same length
as the number of rows in <code>validation_data</code>. Only exception is when it is a
single positive number, which means that all rows have equal weight.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> with some extra attributes set.
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Rulelist Utility: 
<code><a href="#topic+set_keys">set_keys</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>att = modeldata::attrition
set.seed(100)
index = sample(c(TRUE, FALSE), nrow(att), replace = TRUE)
model_c5 = C50::C5.0(Attrition ~., data = att[index, ], rules = TRUE)

tidy_c5 = tidy(model_c5)
tidy_c5

tidy_c5_2 = set_validation_data(tidy_c5,
                                validation_data = att[!index, ],
                                y_name = "Attrition",
                                weight = 1 # default
                                )
tidy_c5_2
tidy_c5 # not altered

</code></pre>

<hr>
<h2 id='strHead'>Vectorized semantic equivalent of 'head' for a string</h2><span id='topic+strHead'></span>

<h3>Description</h3>

<p>Picks the substring starting from the first character
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strHead(string, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strHead_+3A_string">string</code></td>
<td>
<p>string</p>
</td></tr>
<tr><td><code id="strHead_+3A_n">n</code></td>
<td>
<p>(integer) Number of characters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'n' can be in the interval [-len + 1, len] (both ends inclusive)
</p>


<h3>Value</h3>

<p>A string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::strHead(c("string", "string2"), 2)
tidyrules:::strHead(c("string", "string2"), -1)


</code></pre>

<hr>
<h2 id='strReplaceReduce'>Sequential string replace</h2><span id='topic+strReplaceReduce'></span>

<h3>Description</h3>

<p>Sequential string replace via reduce
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strReplaceReduce(string, pattern, replacement)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strReplaceReduce_+3A_string">string</code></td>
<td>
<p>string</p>
</td></tr>
<tr><td><code id="strReplaceReduce_+3A_pattern">pattern</code></td>
<td>
<p>pattern</p>
</td></tr>
<tr><td><code id="strReplaceReduce_+3A_replacement">replacement</code></td>
<td>
<p>replacement</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::strReplaceReduce("abcd", c("ab", "dc"), c("cd", "ab"))


</code></pre>

<hr>
<h2 id='strSplitSingle'>String split a string</h2><span id='topic+strSplitSingle'></span>

<h3>Description</h3>

<p>and return a character vector (not a list)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strSplitSingle(string, pattern)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strSplitSingle_+3A_string">string</code></td>
<td>
<p>A string</p>
</td></tr>
<tr><td><code id="strSplitSingle_+3A_pattern">pattern</code></td>
<td>
<p>Passed as-is to 'stringr::str_split'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::strSplitSingle("abc,d", ",")


</code></pre>

<hr>
<h2 id='strTail'>Vectorized semantic equivalent of tail for a string</h2><span id='topic+strTail'></span>

<h3>Description</h3>

<p>Picks the substring starting from the first character
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strTail(string, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strTail_+3A_string">string</code></td>
<td>
<p>string</p>
</td></tr>
<tr><td><code id="strTail_+3A_n">n</code></td>
<td>
<p>(integer) Number of characters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'n' can be in the interval [-len + 1, len] (both ends inclusive)
</p>


<h3>Value</h3>

<p>A string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tidyrules:::strTail(c("string", "string2"), 2)
tidyrules:::strTail(c("string", "string2"), -1)


</code></pre>

<hr>
<h2 id='tidy'><code>tidy</code> is re-export of <a href="generics.html#topic+tidy">generics::tidy</a> from
<a href="#topic+package_tidyrules">tidyrules</a> package</h2><span id='topic+tidy'></span>

<h3>Description</h3>

<p><code>tidy</code> applied on a supported model fit creates a <a href="#topic+rulelist">rulelist</a>.
<strong>See Also</strong> section links to documentation of specific methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_+3A_x">x</code></td>
<td>
<p>A supported model object</p>
</td></tr>
<tr><td><code id="tidy_+3A_...">...</code></td>
<td>
<p>For model specific implementations to use</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Tidy Utility: 
<code><a href="#topic+tidy.C5.0">tidy.C5.0</a>()</code>,
<code><a href="#topic+tidy.cubist">tidy.cubist</a>()</code>,
<code><a href="#topic+tidy.rpart">tidy.rpart</a>()</code>
</p>

<hr>
<h2 id='tidy.C5.0'>Get the <a href="#topic+rulelist">rulelist</a> from a <a href="C50.html#topic+C5.0">C5</a> model</h2><span id='topic+tidy.C5.0'></span>

<h3>Description</h3>

<p>Each row corresponds to a rule per <code>trial_nbr</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'C5.0'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.C5.0_+3A_x">x</code></td>
<td>
<p><a href="C50.html#topic+C5.0">C50::C5.0</a> model fitted with <code>rules = TRUE</code></p>
</td></tr>
<tr><td><code id="tidy.C5.0_+3A_...">...</code></td>
<td>
<p>Other arguments (See details)</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> The output columns are: <code>rule_nbr</code>, <code>trial_nbr</code>, <code>LHS</code>, <code>RHS</code>,
<code>support</code>, <code>confidence</code>, <code>lift</code>.
</p>
</li>
<li><p> Rules per <code>trial_nbr</code> are sorted in this order: <code>desc(confidence)</code>,
<code>desc(lift)</code>, <code>desc(support)</code>.
</p>
</li></ul>

<p>Optional named arguments:
</p>

<ul>
<li> <p><code>laplace</code> (flag, default: TRUE) is supported. This
computes confidence with laplace correction as documented under 'Rulesets'
here: <a href="https://www.rulequest.com/see5-unix.html">C5 doc</a>.
</p>
</li></ul>



<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Tidy Utility: 
<code><a href="#topic+tidy">tidy</a>()</code>,
<code><a href="#topic+tidy.cubist">tidy.cubist</a>()</code>,
<code><a href="#topic+tidy.rpart">tidy.rpart</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_c5 = C50::C5.0(Attrition ~., data = modeldata::attrition, rules = TRUE)
tidy(model_c5)

</code></pre>

<hr>
<h2 id='tidy.constparty'>Get the <a href="#topic+rulelist">rulelist</a> from a <a href="partykit.html#topic+party">party</a> model</h2><span id='topic+tidy.constparty'></span>

<h3>Description</h3>

<p>Each row corresponds to a rule
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'constparty'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.constparty_+3A_x">x</code></td>
<td>
<p><a href="partykit.html#topic+party">partykit::party</a> model typically built using <a href="partykit.html#topic+ctree">partykit::ctree</a></p>
</td></tr>
<tr><td><code id="tidy.constparty_+3A_...">...</code></td>
<td>
<p>Other arguments (currently unused)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These types of <a href="partykit.html#topic+party">party</a> models are supported:
<code>regression</code> (y is numeric), <code>classification</code> (y is factor)
</p>
<p>For <a href="partykit.html#topic+party">party</a> classification model:
</p>

<ul>
<li><p> Output columns are: <code>rule_nbr</code>, <code>LHS</code>, <code>RHS</code>, <code>support</code>, <code>confidence</code>, <code>lift</code>, <code>terminal_node_id</code>.
</p>
</li>
<li><p> Rules are sorted in this order: <code>desc(confidence)</code>, <code>desc(lift)</code>,
<code>desc(support)</code>.
</p>
</li></ul>

<p>For <a href="partykit.html#topic+party">party</a> regression model:
</p>

<ul>
<li><p> Output columns are: <code>rule_nbr</code>, <code>LHS</code>, <code>RHS</code>, <code>support</code>, <code>IQR</code>, <code>RMSE</code>, <code>terminal_node_id</code>.
</p>
</li>
<li><p> Rules are sorted in this order: <code>RMSE</code>, <code>desc(support)</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pen = palmerpenguins::penguins
model_class_party = partykit::ctree(species ~ ., data = pen)
tidy(model_class_party)
model_regr_party = partykit::ctree(bill_length_mm ~ ., data = pen)
tidy(model_regr_party)

</code></pre>

<hr>
<h2 id='tidy.cubist'>Get the <a href="#topic+rulelist">rulelist</a> from a <a href="Cubist.html#topic+cubist.default">cubist</a> model</h2><span id='topic+tidy.cubist'></span>

<h3>Description</h3>

<p>Each row corresponds to a rule per <code>committee</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cubist'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.cubist_+3A_x">x</code></td>
<td>
<p><a href="Cubist.html#topic+cubist.default">Cubist::cubist</a> model</p>
</td></tr>
<tr><td><code id="tidy.cubist_+3A_...">...</code></td>
<td>
<p>Other arguments (currently unused)</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> The output columns are: <code>rule_nbr</code>, <code>committee</code>, <code>LHS</code>, <code>RHS</code>, <code>support</code>, <code>mean</code>, <code>min</code>, <code>max</code>, <code>error</code>.
</p>
</li>
<li><p> Rules are sorted in this order per committee:
<code>error</code>, <code>desc(support)</code>
</p>
</li></ul>



<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Tidy Utility: 
<code><a href="#topic+tidy">tidy</a>()</code>,
<code><a href="#topic+tidy.C5.0">tidy.C5.0</a>()</code>,
<code><a href="#topic+tidy.rpart">tidy.rpart</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>att = modeldata::attrition
cols_att    = setdiff(colnames(att), c("MonthlyIncome", "Attrition"))
model_cubist = Cubist::cubist(x = att[, cols_att],
                              y = att[["MonthlyIncome"]]
                              )
tidy(model_cubist)

</code></pre>

<hr>
<h2 id='tidy.rpart'>Get the <a href="#topic+rulelist">rulelist</a> from a <a href="rpart.html#topic+rpart">rpart</a> model</h2><span id='topic+tidy.rpart'></span>

<h3>Description</h3>

<p>Each row corresponds to a rule
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.rpart_+3A_x">x</code></td>
<td>
<p><a href="rpart.html#topic+rpart">rpart::rpart</a> model</p>
</td></tr>
<tr><td><code id="tidy.rpart_+3A_...">...</code></td>
<td>
<p>Other arguments (currently unused)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For rpart rules, one should build the model without <a href="base.html#topic+factor">ordered factor</a> variable. We recommend you to convert <a href="base.html#topic+factor">ordered factor</a> to <a href="base.html#topic+factor">factor</a> or <em>integer</em> class.
</p>
<p>For <a href="rpart.html#topic+rpart">rpart::rpart</a> classification model:
</p>

<ul>
<li><p> Output columns are: <code>rule_nbr</code>, <code>LHS</code>, <code>RHS</code>, <code>support</code>, <code>confidence</code>, <code>lift</code>.
</p>
</li>
<li><p> The rules are sorted in this order: <code>desc(confidence)</code>, <code>desc(lift)</code>,
<code>desc(support)</code>.
</p>
</li></ul>

<p>For <a href="rpart.html#topic+rpart">rpart::rpart</a> regression(anova) model:
</p>

<ul>
<li><p> Output columns are: <code>rule_nbr</code>, <code>LHS</code>, <code>RHS</code>, <code>support</code>.
</p>
</li>
<li><p> The rules are sorted in this order: <code>desc(support)</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>A <a href="#topic+rulelist">rulelist</a> object
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>,
<a href="#topic+predict.rulelist">predict</a>, <a href="#topic+calculate.rulelist">calculate</a>,
<a href="#topic+prune.rulelist">prune</a>, <a href="#topic+reorder.rulelist">reorder</a>
</p>
<p>Other Core Tidy Utility: 
<code><a href="#topic+tidy">tidy</a>()</code>,
<code><a href="#topic+tidy.C5.0">tidy.C5.0</a>()</code>,
<code><a href="#topic+tidy.cubist">tidy.cubist</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_class_rpart = rpart::rpart(Species ~ ., data = iris)
tidy(model_class_rpart)

model_regr_rpart = rpart::rpart(Sepal.Length ~ ., data = iris)
tidy(model_regr_rpart)

</code></pre>

<hr>
<h2 id='to_sql_case'>Extract SQL case statement from a <a href="#topic+rulelist">rulelist</a></h2><span id='topic+to_sql_case'></span>

<h3>Description</h3>

<p>Extract SQL case statement from a <a href="#topic+rulelist">rulelist</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_sql_case(rulelist, rhs_column_name = "RHS", output_colname = "output")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="to_sql_case_+3A_rulelist">rulelist</code></td>
<td>
<p>A <a href="#topic+rulelist">rulelist</a> object</p>
</td></tr>
<tr><td><code id="to_sql_case_+3A_rhs_column_name">rhs_column_name</code></td>
<td>
<p>(string, default: &quot;RHS&quot;) Name of the column in the
rulelist to be used as RHS (WHEN some_rule THEN rhs) in the sql case
statement</p>
</td></tr>
<tr><td><code id="to_sql_case_+3A_output_colname">output_colname</code></td>
<td>
<p>(string, default: &quot;output&quot;) Name of the output column
created by the SQL statement (used in case ... AS output_column)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As a side-effect, the SQL statement is cat to stdout. The output
contains newline character.
</p>


<h3>Value</h3>

<p>(string invisibly) SQL case statement
</p>


<h3>See Also</h3>

<p><a href="#topic+rulelist">rulelist</a>, <a href="#topic+tidy">tidy</a>, <a href="#topic+augment.rulelist">augment</a>, <a href="#topic+predict.rulelist">predict</a>, <a href="#topic+convert_rule_flavor">convert_rule_flavor</a>
</p>
<p>Other Auxiliary Rulelist Utility: 
<code><a href="#topic+convert_rule_flavor">convert_rule_flavor</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_c5 = C50::C5.0(Attrition ~., data = modeldata::attrition, rules = TRUE)
tidy(model_c5)
to_sql_case(tidy(model_c5))
</code></pre>

<hr>
<h2 id='varSpec'>Get variable specification for a Cubist/C5 object</h2><span id='topic+varSpec'></span>

<h3>Description</h3>

<p>Obtain variable names, type (numeric, ordered, factor) and
levels as a tidytable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varSpec(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varSpec_+3A_object">object</code></td>
<td>
<p>Cubist/C5 object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidytable with three columns: variable(character), type(character)
and levels(a list-column). For numeric variables, levels are set to NA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data("attrition", package = "modeldata")
cols_att = setdiff(colnames(attrition), c("MonthlyIncome", "Attrition"))

cb_att = Cubist::cubist(x = attrition[, cols_att],
                        y = attrition[["MonthlyIncome"]]
                        )
varSpec(cb_att)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
