<!DOCTYPE html><html><head><title>Help for package metro</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {metro}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bus_departs'><p>Bus Schedule at Stop</p></a></li>
<li><a href='#bus_incidents'><p>Bus Incidents</p></a></li>
<li><a href='#bus_path'><p>Bus Path Details</p></a></li>
<li><a href='#bus_position'><p>Bus Position</p></a></li>
<li><a href='#bus_routes'><p>Bus Routes</p></a></li>
<li><a href='#bus_schedule'><p>Bus Schedule</p></a></li>
<li><a href='#bus_stops'><p>Bus Stop Search</p></a></li>
<li><a href='#elevator_incidents'><p>Elevator/Escalator Outages</p></a></li>
<li><a href='#metro_lines'><p>All WMATA Rail Lines</p></a></li>
<li><a href='#metro_routes'><p>All WMATA Bus Routes</p></a></li>
<li><a href='#metro_stations'><p>All WMATA Rail Stations</p></a></li>
<li><a href='#metro_stops'><p>All WMATA Bus Stops</p></a></li>
<li><a href='#metro-package'><p>metro: A package for the Washington Metropolitan Area Transit Authority API</p></a></li>
<li><a href='#next_bus'><p>Next Buses</p></a></li>
<li><a href='#next_train'><p>Next Trains</p></a></li>
<li><a href='#no_data_now'><p>Check if data has length and rows</p></a></li>
<li><a href='#rail_destination'><p>Rail Station to Station Information</p></a></li>
<li><a href='#rail_entrance'><p>Rail Station Entrances</p></a></li>
<li><a href='#rail_incidents'><p>Rail Incidents</p></a></li>
<li><a href='#rail_lines'><p>Rail Lines</p></a></li>
<li><a href='#rail_path'><p>Path Between Stations</p></a></li>
<li><a href='#rail_positions'><p>Live Train Positions</p></a></li>
<li><a href='#rail_stations'><p>Rail Station List</p></a></li>
<li><a href='#rail_times'><p>Rail Station Timings</p></a></li>
<li><a href='#standard_routes'><p>Standard Routes</p></a></li>
<li><a href='#station_info'><p>Rail Station Information</p></a></li>
<li><a href='#track_circuits'><p>Track Circuits</p></a></li>
<li><a href='#wmata_api'><p>Call the WMATA API</p></a></li>
<li><a href='#wmata_key'><p>Find a WMATA API key</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Washington Metropolitan Area Transit Authority API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.3</td>
</tr>
<tr>
<td>Description:</td>
<td>The Washington Metropolitan Area Transit Authority is a
    government agency operating light rail and passenger buses in the
    Washington D.C. area. With a free developer account, access their
    'Metro Transparent Data Sets API' <a href="https://developer.wmata.com/">https://developer.wmata.com/</a> to
    return data frames of transit data for easy analysis.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://k5cents.github.io/metro/">https://k5cents.github.io/metro/</a>, <a href="https://github.com/k5cents/metro">https://github.com/k5cents/metro</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/k5cents/metro/issues">https://github.com/k5cents/metro/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>geodist (&ge; 0.0.6), hms (&ge; 1.0.0), httr (&ge; 1.4.2), jsonlite
(&ge; 1.7.1), tibble (&ge; 3.0.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr (&ge; 3.5.1), mockr (&ge; 0.1), spelling (&ge; 2.2), testthat
(&ge; 3.0.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-11 14:26:00 UTC; kiernan</td>
</tr>
<tr>
<td>Author:</td>
<td>Kiernan Nicholls <a href="https://orcid.org/0000-0002-9229-7897"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kiernan Nicholls &lt;k5cents@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-11 15:40:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='bus_departs'>Bus Schedule at Stop</h2><span id='topic+bus_departs'></span>

<h3>Description</h3>

<p>Returns a set of buses scheduled at a stop for a given date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_departs(StopID, Date = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_departs_+3A_stopid">StopID</code></td>
<td>
<p>7-digit regional stop ID.</p>
</td></tr>
<tr><td><code id="bus_departs_+3A_date">Date</code></td>
<td>
<p>(Optional) Date for which to retrieve route and stop information.</p>
</td></tr>
<tr><td><code id="bus_departs_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble with 1 row per bus departure and 8 variables:
</p>

<dl>
<dt>StopID</dt><dd><p>7-digit regional ID which can be used in various bus-related</p>
</dd>
<dt>ScheduleTime</dt><dd><p>Date and time (UTC) when the bus is scheduled to stop
at this location.</p>
</dd>
<dt>DirectionNum</dt><dd><p>Denotes a binary direction (0 or 1) of the bus. There
is no specific mapping to direction, but a different value for the same
route signifies that the buses are traveling in opposite directions. Use
the <code>TripDirectionText</code> column to show the actual destination of the bus.</p>
</dd>
<dt>StartTime</dt><dd><p>Scheduled start date and time (UTC) for this trip.</p>
</dd>
<dt>EndTime</dt><dd><p>Scheduled end date and time (UTC) for this trip.</p>
</dd>
<dt>RouteID</dt><dd><p>Bus route variant identifier (pattern). This variant can be
used in several other bus methods which accept variants. Note that
customers will never see anything other than the base route name, so
variants 10A, 10Av1, 10Av2, etc. will be displayed as 10A on the bus.</p>
</dd>
<dt>TripDirectionText</dt><dd><p>General direction of the trip (e.g.: NORTH, SOUTH,
EAST, WEST).</p>
</dd>
<dt>TripHeadsign</dt><dd><p>Destination of the bus.</p>
</dd>
<dt>TripID</dt><dd><p>Trip identifier. This can be correlated with the data in our
bus schedule information as well as bus positions.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame containing scheduled arrival information.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6c/console">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6c/console</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_path">bus_path</a>()</code>,
<code><a href="#topic+bus_position">bus_position</a>()</code>,
<code><a href="#topic+bus_routes">bus_routes</a>()</code>,
<code><a href="#topic+bus_schedule">bus_schedule</a>()</code>,
<code><a href="#topic+bus_stops">bus_stops</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_departs(1001195, Sys.Date())

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_incidents'>Bus Incidents</h2><span id='topic+bus_incidents'></span>

<h3>Description</h3>

<p>Returns a set of reported bus incidents/delays for a given Route. Omit the
Route to return all reported items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_incidents(Route = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_incidents_+3A_route">Route</code></td>
<td>
<p>Base bus route; variations are not recognized (i.e.: C2 instead
of C2v1, C2v2, etc.).</p>
</td></tr>
<tr><td><code id="bus_incidents_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A data frame with 1 row per incident and 5 variables:
</p>

<dl>
<dt>IncidentID</dt><dd><p>Unique identifier for an incident.</p>
</dd>
<dt>IncidentType</dt><dd><p>Free-text description of the incident type. Usually
<code>Delay</code> or <code>Alert</code> but is subject to change at any time.</p>
</dd>
<dt>RoutesAffected</dt><dd><p>Character string of routes affected. Routes listed
are usually identical to base route names (i.e.: not 10Av1 or 10Av2, but
10A), but may differ from what our bus methods return.</p>
</dd>
<dt>Description</dt><dd><p>Free-text description of the delay or incident.</p>
</dd>
<dt>DateUpdated</dt><dd><p>Date and time (UTC) of last update.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Note that the Route parameter accepts only base route names and no
variations, i.e.: use 10A instead of 10Av1 and 10Av2.
</p>


<h3>Value</h3>

<p>Data frame of bus incidents and delays.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d75">https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d75</a>
</p>
<p>Other Incident APIs: 
<code><a href="#topic+elevator_incidents">elevator_incidents</a>()</code>,
<code><a href="#topic+rail_incidents">rail_incidents</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_incidents()

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_path'>Bus Path Details</h2><span id='topic+bus_path'></span>

<h3>Description</h3>

<p>For a given date, returns the set of ordered latitude/longitude points along
a route variant along with the list of stops served.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_path(RouteID, Date = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_path_+3A_routeid">RouteID</code></td>
<td>
<p>Bus route variant, e.g.: 70, 10A, 10Av1.</p>
</td></tr>
<tr><td><code id="bus_path_+3A_date">Date</code></td>
<td>
<p>Date for which to retrieve route and stop information. Uses
today's date if <code>NULL</code> (default).</p>
</td></tr>
<tr><td><code id="bus_path_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A list with 4 elements:
</p>

<dl>
<dt>RouteID</dt><dd><p>Bus route variant.</p>
</dd>
<dt>Name</dt><dd><p>Descriptive name for the route.</p>
</dd>
<dt>ShapePoint</dt><dd><p>The coordinate path of the line in both directions.</p>
</dd>
<dt>Stops</dt><dd><p>The coordinates of stops on a given line.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A list with (1) set of ordered latitude/longitude points along a
route variant along with (2) the list of stops served.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d69">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d69</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_departs">bus_departs</a>()</code>,
<code><a href="#topic+bus_position">bus_position</a>()</code>,
<code><a href="#topic+bus_routes">bus_routes</a>()</code>,
<code><a href="#topic+bus_schedule">bus_schedule</a>()</code>,
<code><a href="#topic+bus_stops">bus_stops</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_path("70")

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_position'>Bus Position</h2><span id='topic+bus_position'></span>

<h3>Description</h3>

<p>Returns bus positions for the given route, with an optional search radius. If
no parameters are specified, all bus positions are returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_position(
  RouteId = NULL,
  Lat = NULL,
  Lon = NULL,
  Radius = NULL,
  api_key = wmata_key()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_position_+3A_routeid">RouteId</code></td>
<td>
<p>Base bus route, e.g.: 70, 10A.</p>
</td></tr>
<tr><td><code id="bus_position_+3A_lat">Lat</code></td>
<td>
<p>Center point Latitude, required if Longitude and Radius are
specified.</p>
</td></tr>
<tr><td><code id="bus_position_+3A_lon">Lon</code></td>
<td>
<p>Center point Longitude, required if Latitude and Radius are
specified.</p>
</td></tr>
<tr><td><code id="bus_position_+3A_radius">Radius</code></td>
<td>
<p>Radius (meters) to include in the search area. If <code>NULL</code>
(default) when <code>Lat</code> and <code>Lon</code> are supplied, a generic max of 50 kilometers
is used.</p>
</td></tr>
<tr><td><code id="bus_position_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A data frame with 1 row per bus and 13 variables:
</p>

<dl>
<dt>VehicleID</dt><dd><p>Unique identifier for the bus. This is usually visible on
the bus itself.</p>
</dd>
<dt>Lat</dt><dd><p>Last reported Latitude of the bus.</p>
</dd>
<dt>Lon</dt><dd><p>Last reported Longitude of the bus.</p>
</dd>
<dt>Distance</dt><dd><p>Distance (meters) of the bus from the provided search
coordinates. Calculated using <code><a href="geodist.html#topic+geodist">geodist::geodist()</a></code> and the &quot;cheap ruler&quot;
method.</p>
</dd>
<dt>Deviation</dt><dd><p>Deviation, in minutes, from schedule. Positive values
indicate that the bus is running late while negative ones are for buses
running ahead of schedule.</p>
</dd>
<dt>DateTime</dt><dd><p>Date and time (UTC) of last position update.</p>
</dd>
<dt>TripID</dt><dd><p>Unique trip ID. This can be correlated with the data returned
from the schedule-related methods.</p>
</dd>
<dt>RouteID</dt><dd><p>Base route name as shown on the bus. Note that the base
route name could also refer to any variant, so a RouteID of 10A could refer
to 10A, 10Av1, 10Av2, etc.</p>
</dd>
<dt>DirectionText</dt><dd><p>General direction of the trip, not the bus itself
(e.g.: NORTH, SOUTH, EAST, WEST).</p>
</dd>
<dt>TripHeadsign</dt><dd><p>Destination of the bus.</p>
</dd>
<dt>TripStartTime</dt><dd><p>Scheduled start date and time (UTC) of the bus's
current trip.</p>
</dd>
<dt>TripEndTime</dt><dd><p>Scheduled end date and time (UTC) of the bus's current
trip.</p>
</dd>
<dt>BlockNumber</dt><dd></dd>
</dl>



<h3>Details</h3>

<p>Note that the <code>RouteID</code> parameter accepts only base route names and no
variations, i.e.: use 10A instead of 10Av1 or 10Av2.
</p>


<h3>Value</h3>

<p>Data frame containing bus position information.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d68">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d68</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_departs">bus_departs</a>()</code>,
<code><a href="#topic+bus_path">bus_path</a>()</code>,
<code><a href="#topic+bus_routes">bus_routes</a>()</code>,
<code><a href="#topic+bus_schedule">bus_schedule</a>()</code>,
<code><a href="#topic+bus_stops">bus_stops</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_position("70", 38.8895, -77.0353)

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_routes'>Bus Routes</h2><span id='topic+bus_routes'></span>

<h3>Description</h3>

<p>Returns a list of all bus route variants (patterns). For example, the 10A and
10Av1 are the same route, but may stop at slightly different locations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_routes(api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_routes_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble with 3 variables and one row per route variant:
</p>

<dl>
<dt>RouteID</dt><dd><p>Unique identifier for a given route variant. Can be used in
various other bus-related methods.</p>
</dd>
<dt>Name</dt><dd><p>Descriptive name of the route variant.</p>
</dd>
<dt>LineDescription</dt><dd><p>Denotes the route variant's grouping - lines are a
combination of routes which lie in the same corridor and which have
significant portions of their paths along the same roadways.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame containing route variant information
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6a">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6a</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_departs">bus_departs</a>()</code>,
<code><a href="#topic+bus_path">bus_path</a>()</code>,
<code><a href="#topic+bus_position">bus_position</a>()</code>,
<code><a href="#topic+bus_schedule">bus_schedule</a>()</code>,
<code><a href="#topic+bus_stops">bus_stops</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_routes()

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_schedule'>Bus Schedule</h2><span id='topic+bus_schedule'></span>

<h3>Description</h3>

<p>Returns schedules for a given route variant for a given date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_schedule(
  RouteID,
  IncludingVariations = TRUE,
  Date = NULL,
  api_key = wmata_key()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_schedule_+3A_routeid">RouteID</code></td>
<td>
<p>Bus route variant, e.g.: 70, 10A, 10Av1, etc.</p>
</td></tr>
<tr><td><code id="bus_schedule_+3A_includingvariations">IncludingVariations</code></td>
<td>
<p>Whether or not to include variations if a base
route is specified in RouteID. For example, if B30 is specified and
<code>IncludingVariations</code> is set to <code>TRUE</code> (default), data for all variations
of B30 such as B30v1, B30v2, etc. will be returned.</p>
</td></tr>
<tr><td><code id="bus_schedule_+3A_date">Date</code></td>
<td>
<p>(Optional) Date for which to retrieve route and stop information.</p>
</td></tr>
<tr><td><code id="bus_schedule_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A data frame with 1 row per trip and 10 variables:
</p>

<dl>
<dt>RouteID</dt><dd><p>Bus route variant. This can be used in several other bus
methods which accept variants.</p>
</dd>
<dt>TripDirectionText</dt><dd><p>General direction of the trip (NORTH, SOUTH, EAST,
WEST, LOOP, etc.).</p>
</dd>
<dt>TripHeadsign</dt><dd><p>Descriptive text of where the bus is headed. This is
similar, but not necessarily identical, to what is displayed on the bus.</p>
</dd>
<dt>StartTime</dt><dd><p>Scheduled start date and time (UTC) for this trip.</p>
</dd>
<dt>EndTime</dt><dd><p>Scheduled end date and time (UTC) for this trip.</p>
</dd>
<dt>TripID</dt><dd><p>Unique trip ID. This can be correlated with the data returned
from the schedule-related methods.</p>
</dd>
<dt>StopID</dt><dd><p>7-digit regional ID which can be used in various bus-related
methods. If unavailable, the <code>StopID</code> will be 0 or <code>NA</code></p>
</dd>
<dt>StopName</dt><dd><p>Stop name. May be slightly different from what is spoken or
displayed in the bus.</p>
</dd>
<dt>StopSeq</dt><dd><p>Order of the stop in the sequence of StopTimes.</p>
</dd>
<dt>Time</dt><dd><p>Scheduled departure date and time (UTC) from this stop.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame containing trip information
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6b">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6b</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_departs">bus_departs</a>()</code>,
<code><a href="#topic+bus_path">bus_path</a>()</code>,
<code><a href="#topic+bus_position">bus_position</a>()</code>,
<code><a href="#topic+bus_routes">bus_routes</a>()</code>,
<code><a href="#topic+bus_stops">bus_stops</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_schedule("70")

## End(Not run)
</code></pre>

<hr>
<h2 id='bus_stops'>Bus Stop Search</h2><span id='topic+bus_stops'></span>

<h3>Description</h3>

<p>Returns a list of nearby bus stops based on latitude, longitude, and radius.
Omit all parameters to retrieve a list of all stops.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bus_stops(Lat = NULL, Lon = NULL, Radius = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bus_stops_+3A_lat">Lat</code></td>
<td>
<p>Center point Latitude, required if <code>Longitude</code> and <code>Radius</code> are
specified.</p>
</td></tr>
<tr><td><code id="bus_stops_+3A_lon">Lon</code></td>
<td>
<p>Center point Longitude, required if <code>Latitude</code> and <code>Radius</code> are
specified.</p>
</td></tr>
<tr><td><code id="bus_stops_+3A_radius">Radius</code></td>
<td>
<p>Radius (meters) to include in the search area, required if
<code>Latitude</code> and <code>Longitude</code> are specified.</p>
</td></tr>
<tr><td><code id="bus_stops_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble with 1 row per stop and 6 variables:
</p>

<dl>
<dt>StopID</dt><dd><p>String array of route variants which provide service at this
stop. Note that these are not date-specific; any route variant which stops
at this stop on any day will be listed.</p>
</dd>
<dt>Name</dt><dd><p>Stop name. May be slightly different from what is spoken or
displayed in the bus.</p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Distance</dt><dd><p>Distance (meters) of the stop from the provided search
coordinates. Calculated using <code><a href="geodist.html#topic+geodist">geodist::geodist()</a></code> and the &quot;cheap ruler&quot;
method.</p>
</dd>
<dt>Routes</dt><dd><p>Character string of route variants which provide service at
this stop. Note that these are not date-specific; any route variant which
stops at this stop on any day will be listed.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame containing stop information
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6d">https://developer.wmata.com/docs/services/54763629281d83086473f231/operations/5476362a281d830c946a3d6d</a>
</p>
<p>Other Bus Route and Stop Methods: 
<code><a href="#topic+bus_departs">bus_departs</a>()</code>,
<code><a href="#topic+bus_path">bus_path</a>()</code>,
<code><a href="#topic+bus_position">bus_position</a>()</code>,
<code><a href="#topic+bus_routes">bus_routes</a>()</code>,
<code><a href="#topic+bus_schedule">bus_schedule</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bus_stops(38.8895, -77.0353, 500)

## End(Not run)
</code></pre>

<hr>
<h2 id='elevator_incidents'>Elevator/Escalator Outages</h2><span id='topic+elevator_incidents'></span>

<h3>Description</h3>

<p>Elevator/Escalator Outages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>elevator_incidents(StationCode = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="elevator_incidents_+3A_stationcode">StationCode</code></td>
<td>
<p>Station code. Use <code><a href="#topic+rail_stations">rail_stations()</a></code> to return a list of
all station codes. Use <code>NULL</code> (default) to list all incidents.</p>
</td></tr>
<tr><td><code id="elevator_incidents_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A data frame with 1 row per incident and 9 variables:
</p>

<dl>
<dt>UnitName</dt><dd><p>Unique identifier for unit, by type (a single elevator and
escalator may have the same <code>UnitName</code>, but no two elevators or two
escalators will have the same <code>UnitName</code>).</p>
</dd>
<dt>UnitType</dt><dd><p>Type of unit. Will be <code>ELEVATOR</code> or <code>ESCALATOR</code>.</p>
</dd>
<dt>StationCode</dt><dd><p>Unit's station code. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full station name, may include entrance information
(e.g.: Metro Center, G and 11th St Entrance).</p>
</dd>
<dt>LocationDescription</dt><dd><p>Free-text description of the unit location
within a station (e.g.: Escalator between mezzanine and platform).</p>
</dd>
<dt>SymptomDescription</dt><dd><p>Description for why the unit is out of service or
otherwise in reduced operation.</p>
</dd>
<dt>DateOutOfServ</dt><dd><p>Date and time (UTC) unit was reported out of service.</p>
</dd>
<dt>DateUpdated</dt><dd><p>Date and time (UTC) outage details was last updated.</p>
</dd>
<dt>EstimatedReturnToService</dt><dd><p>Estimated date and time (UTC) by when unit
is expected to return to normal service. May be NULL.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Note that for stations with multiple platforms and therefore <code>StationCodes</code>
(e.g.: Metro Center, L'Enfant Plaza, etc.), a distinct call is required for
each <code>StationCode</code>.
</p>


<h3>Value</h3>

<p>Data frame of <em>reported</em> elevator and escalator outages.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d76">https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d76</a>
</p>
<p>Other Incident APIs: 
<code><a href="#topic+bus_incidents">bus_incidents</a>()</code>,
<code><a href="#topic+rail_incidents">rail_incidents</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
elevator_incidents()

## End(Not run)
</code></pre>

<hr>
<h2 id='metro_lines'>All WMATA Rail Lines</h2><span id='topic+metro_lines'></span>

<h3>Description</h3>

<p>All WMATA Rail Lines
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_lines
</code></pre>


<h3>Format</h3>

<p>A tibble with 6 rows and 6 variables:
</p>

<dl>
<dt>LineCode</dt><dd><p>Two-letter abbreviation for the line (e.g.: RD, BL, YL, OR,
GR, or SV).</p>
</dd>
<dt>DisplayName</dt><dd><p>Full name of line color.</p>
</dd>
<dt>StartStationCode</dt><dd><p>Start station code. For example, will be F11
(Branch Avenue) for the Green Line, A15 (Shady Grove) for the Red Line,
etc. Use this value in other rail-related APIs to retrieve data about a
station.</p>
</dd>
<dt>EndStationCode</dt><dd><p>End station code. For example, will be E10
(Greenbelt) for the Green Line, B11 (Glenmont) for the Red Line, etc. Use
this value in other rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>InternalDestination</dt><dd><p>Intermediate terminal station code(s). During
normal service, some trains on some lines might end their trip prior to the
<code>StartStationCode</code> or <code>EndStationCode.</code> A good example is on the Red Line
where some trains stop at A11 (Grosvenor) or B08 (Silver Spring). <code>NA</code> if
not defined.</p>
</dd>
</dl>



<h3>Details</h3>

<p>As of 2021-02-22 22:00:00 ET.
</p>

<hr>
<h2 id='metro_routes'>All WMATA Bus Routes</h2><span id='topic+metro_routes'></span>

<h3>Description</h3>

<p>All WMATA Bus Routes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_routes
</code></pre>


<h3>Format</h3>

<p>A tibble 322 rows and 3 variables:
</p>

<dl>
<dt>RouteID</dt><dd><p>Unique identifier for a given route variant. Can be used in
various other bus-related methods.</p>
</dd>
<dt>Name</dt><dd><p>Descriptive name of the route variant.</p>
</dd>
<dt>LineDescription</dt><dd><p>Denotes the route variant's grouping - lines are a
combination of routes which lie in the same corridor and which have
significant portions of their paths along the same roadways.</p>
</dd>
</dl>



<h3>Details</h3>

<p>As of 2021-02-22 22:00:00 ET.
</p>

<hr>
<h2 id='metro_stations'>All WMATA Rail Stations</h2><span id='topic+metro_stations'></span>

<h3>Description</h3>

<p>All WMATA Rail Stations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_stations
</code></pre>


<h3>Format</h3>

<p>A tibble with 95 rows and 10 variables:
</p>

<dl>
<dt>StationCode</dt><dd><p>Station code for this station. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full name for this station, as shown on the WMATA
website.</p>
</dd>
<dt>StationTogether</dt><dd><p>For stations with multiple platforms (e.g.: Gallery
Place, Fort Totten, L'Enfant Plaza, and Metro Center), the additional
<code>StationCode</code> will be listed here.</p>
</dd>
<dt>LineCodes</dt><dd><p>Character vector of two-letter abbreviations (e.g.: RD,
BL, YL, OR, GR, or SV) served by this station. If the station has an
additional platform, the lines served by the other platform are listed in
the <code>LineCodes</code> values for the record associated with the <code>StationCode</code>
found in <code>StationTogether.</code></p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Street</dt><dd><p>Street address (for GPS use).</p>
</dd>
<dt>City</dt><dd><p>City.</p>
</dd>
<dt>State</dt><dd><p>State (abbreviated).</p>
</dd>
<dt>Zip</dt><dd><p>Zip code.</p>
</dd>
</dl>



<h3>Details</h3>

<p>As of 2021-02-22 22:00:00 ET.
</p>

<hr>
<h2 id='metro_stops'>All WMATA Bus Stops</h2><span id='topic+metro_stops'></span>

<h3>Description</h3>

<p>All WMATA Bus Stops
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metro_stops
</code></pre>


<h3>Format</h3>

<p>A tibble with 9,044 rows and 5 variables:
</p>

<dl>
<dt>StopID</dt><dd><p>String array of route variants which provide service at this
stop. Note that these are not date-specific; any route variant which stops
at this stop on any day will be listed.</p>
</dd>
<dt>Name</dt><dd><p>Stop name. May be slightly different from what is spoken or
displayed in the bus.</p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Routes</dt><dd><p>Character string of route variants which provide service at
this stop. Note that these are not date-specific; any route variant which
stops at this stop on any day will be listed.</p>
</dd>
</dl>



<h3>Details</h3>

<p>As of 2021-02-22 22:00:00 ET.
</p>

<hr>
<h2 id='metro-package'>metro: A package for the Washington Metropolitan Area Transit Authority API</h2><span id='topic+metro'></span><span id='topic+metro-package'></span>

<h3>Description</h3>

<p>The Metro Transparent Data Sets API provides developer access to JSON data
for the order and location of rail stations by line, train arrival
predictions for each station, service alerts, and elevator/escalator status.
This package has been developed to make calls to the API using dedicated
R functions with copied documentation and identical parameters/arguments. All
functions return one or more data frames for easy analysis.
</p>


<h3>Endpoints</h3>

<p>There are six endpoint categories returning JSON data.
</p>

<ol>
<li><p> Bus Route and Stop Methods, starting with <code style="white-space: pre;">&#8288;bus_*&#8288;</code>:
</p>

<ul>
<li><p> Bus Position: <code><a href="#topic+bus_position">bus_position()</a></code>
</p>
</li>
<li><p> Path details: <code><a href="#topic+bus_path">bus_path()</a></code>
</p>
</li>
<li><p> Routes: <code><a href="#topic+bus_routes">bus_routes()</a></code>
</p>
</li>
<li><p> Schedule: <code><a href="#topic+bus_schedule">bus_schedule()</a></code>
</p>
</li>
<li><p> Schedule at stop: <code><a href="#topic+bus_departs">bus_departs()</a></code>
</p>
</li>
<li><p> Stop search: <code><a href="#topic+bus_stops">bus_stops()</a></code>
</p>
</li></ul>

</li>
<li><p> Incidents, ending with <code style="white-space: pre;">&#8288;*_incidents&#8288;</code>:
</p>

<ul>
<li><p> Bus Incidents: <code><a href="#topic+bus_incidents">bus_incidents()</a></code>
</p>
</li>
<li><p> Elevator/Escalator Outages: <code><a href="#topic+elevator_incidents">elevator_incidents()</a></code>
</p>
</li>
<li><p> Rail Incidents: <code><a href="#topic+rail_incidents">rail_incidents()</a></code>
</p>
</li></ul>

</li>
<li><p> Misc Methods
</p>

<ul>
<li><p> Validate API Key: <code><a href="#topic+wmata_validate">wmata_validate()</a></code>
</p>
</li></ul>

</li>
<li><p> Rail Station Information, starting with <code style="white-space: pre;">&#8288;rail_*&#8288;</code>:
</p>

<ul>
<li><p> Lines: <code><a href="#topic+rail_lines">rail_lines()</a></code>
</p>
</li>
<li><p> Parking Information: Not yet covered.
</p>
</li>
<li><p> Path Between Stations: <code><a href="#topic+rail_path">rail_path()</a></code>
</p>
</li>
<li><p> Station Entrances: <code><a href="#topic+rail_entrance">rail_entrance()</a></code>
</p>
</li>
<li><p> Station Information: <code><a href="#topic+station_info">station_info()</a></code>
</p>
</li>
<li><p> Station List: <code><a href="#topic+rail_stations">rail_stations()</a></code>
</p>
</li>
<li><p> Station Timings: <code><a href="#topic+rail_times">rail_times()</a></code>
</p>
</li>
<li><p> Station to Station Information: <code><a href="#topic+rail_destination">rail_destination()</a></code>
</p>
</li></ul>

</li>
<li><p> Real-Time Predictions, starting with <code style="white-space: pre;">&#8288;next_*&#8288;</code>:
</p>

<ul>
<li><p> Next Buses: <code><a href="#topic+next_bus">next_bus()</a></code>
</p>
</li>
<li><p> Next Trains: <code><a href="#topic+next_train">next_train()</a></code>
</p>
</li></ul>

</li>
<li><p> Train Positions:
</p>

<ul>
<li><p> Live Train Positions: <code><a href="#topic+rail_positions">rail_positions()</a></code>
</p>
</li>
<li><p> Standard Routes: <code><a href="#topic+standard_routes">standard_routes()</a></code>
</p>
</li>
<li><p> Track Circuits: <code><a href="#topic+track_circuits">track_circuits()</a></code>
</p>
</li></ul>

</li></ol>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kiernan Nicholls <a href="mailto:k5cents@gmail.com">k5cents@gmail.com</a> (<a href="https://orcid.org/0000-0002-9229-7897">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://k5cents.github.io/metro/">https://k5cents.github.io/metro/</a>
</p>
</li>
<li> <p><a href="https://github.com/k5cents/metro">https://github.com/k5cents/metro</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/k5cents/metro/issues">https://github.com/k5cents/metro/issues</a>
</p>
</li></ul>


<hr>
<h2 id='next_bus'>Next Buses</h2><span id='topic+next_bus'></span>

<h3>Description</h3>

<p>Returns next bus arrival times at a stop.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>next_bus(StopID, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="next_bus_+3A_stopid">StopID</code></td>
<td>
<p>7-digit regional stop ID.</p>
</td></tr>
<tr><td><code id="next_bus_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per arrival with 8 variables:
</p>

<dl>
<dt>StopID</dt><dd><p>7-digit regional ID which can be used in various bus-related
methods. If unavailable, the <code>StopID</code> will be 0 or <code>NA</code></p>
</dd>
<dt>StopName</dt><dd><p>Stop name. May be slightly different from what is spoken or
displayed in the bus.</p>
</dd>
<dt>RouteID</dt><dd><p>Base route name as shown on the bus. This can be used in
other bus-related methods. Note that all variants will be shown as their
base route names (i.e.: 10Av1 and 10Av2 will be shown as 10A).</p>
</dd>
<dt>DirectionText</dt><dd><p>Customer-friendly description of direction and
destination for a bus.</p>
</dd>
<dt>DirectionNum</dt><dd><p>Denotes a binary direction (0 or 1) of the bus. There
is no specific mapping to direction, but a different value for the same
route signifies that the buses are traveling in opposite directions. Use
the DirectionText element to show the actual destination of the bus.</p>
</dd>
<dt>Minutes</dt><dd><p>Minutes until bus arrival at this stop. Numeric value.</p>
</dd>
<dt>VehicleID</dt><dd><p>Bus identifier. This can be correlated with results
returned from bus positions.</p>
</dd>
<dt>TripID</dt><dd><p>Trip identifier. This can be correlated with the data in our
bus schedule information as well as bus positions.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame of bus arrivals.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476365e031f590f38092508/operations/5476365e031f5909e4fe331d">https://developer.wmata.com/docs/services/5476365e031f590f38092508/operations/5476365e031f5909e4fe331d</a>
</p>
<p>Other Real-Time Predictions: 
<code><a href="#topic+next_train">next_train</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
next_bus(StopID = "1001195")

## End(Not run)
</code></pre>

<hr>
<h2 id='next_train'>Next Trains</h2><span id='topic+next_train'></span>

<h3>Description</h3>

<p>Returns next train arrival information for one or more stations. Will return
an empty set of results when no predictions are available. Use &quot;All&quot; for the
<code>StationCodes</code> parameter to return predictions for all stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>next_train(StationCodes = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="next_train_+3A_stationcodes">StationCodes</code></td>
<td>
<p>Character vector of station codes. For all predictions,
use <code>NULL</code> (default) or &quot;All&quot;.</p>
</td></tr>
<tr><td><code id="next_train_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per arrival with 9 variables:
</p>

<dl>
<dt>Car</dt><dd><p>Number of cars on a train, usually 6 or 8, but might also <code>NA</code>.</p>
</dd>
<dt>Destination</dt><dd><p>Abbreviated version of the final destination for a
train. This is similar to what is displayed on the signs at stations.</p>
</dd>
<dt>DestinationCode</dt><dd></dd></dl>
<p>Destination station code. Can be <code>NA</code>. Use this
value in other rail-related APIs to retrieve data about a station.
</p>
<dl>
<dt>DestinationName</dt><dd><p>When <code>DestinationCode</code> is populated, this is the
full name of the destination station, as shown on the WMATA website.</p>
</dd>
<dt>Group</dt><dd><p>Denotes the track this train is on, but does not necessarily
equate to Track 1 or Track 2. With the exception of terminal stations,
predictions at the same station with different Group values refer to trains
on different tracks.</p>
</dd>
<dt>Line</dt><dd><p>Two-letter abbreviation for the line (e.g.: RD, BL, YL, OR, GR,
or SV). May also be <code>NA</code> for trains with no passengers.</p>
</dd>
<dt>LocationCode</dt><dd><p>Station code for where the train is arriving. Useful
when passing in All as the <code>StationCodes</code> parameter. Use this value in
other rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>LocationName</dt><dd><p>Full name of the station where the train is arriving.
Useful when passing in &quot;All&quot; as the <code>StationCodes</code> parameter.</p>
</dd>
<dt>Min</dt><dd><p>Minutes until arrival. Can be a numeric value, 0 (arriving),
-1 (boarding), or <code>NA</code>.</p>
</dd>
</dl>



<h3>Details</h3>

<p>For terminal stations (e.g.: Greenbelt, Shady Grove, etc.), predictions may
be displayed twice.
</p>
<p>Some stations have two platforms (e.g.: Gallery Place, Fort Totten, L'Enfant
Plaza, and Metro Center). To retrieve complete predictions for these
stations, be sure to pass in both StationCodes.
</p>
<p>For trains with no passengers, the <code>DestinationName</code> will be &quot;No Passenger&quot;.
</p>


<h3>Value</h3>

<p>Data frame of train arrivals.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/547636a6f9182302184cda78/operations/547636a6f918230da855363f">https://developer.wmata.com/docs/services/547636a6f9182302184cda78/operations/547636a6f918230da855363f</a>
</p>
<p>Other Real-Time Predictions: 
<code><a href="#topic+next_bus">next_bus</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
next_train(StationCodes = c("A02", "B02"))

## End(Not run)
</code></pre>

<hr>
<h2 id='no_data_now'>Check if data has length and rows</h2><span id='topic+no_data_now'></span>

<h3>Description</h3>

<p>Check if data has length and rows
</p>


<h3>Usage</h3>

<pre><code class='language-R'>no_data_now(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="no_data_now_+3A_x">x</code></td>
<td>
<p>A data frame or list to check</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>no_data_now(data.frame())
no_data_now(data.frame(a = 1))
</code></pre>

<hr>
<h2 id='rail_destination'>Rail Station to Station Information</h2><span id='topic+rail_destination'></span>

<h3>Description</h3>

<p>Returns a distance, fare information, and estimated travel time between any
two stations, including those on different lines. Omit both parameters to
retrieve data for all stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_destination(
  FromStationCode = NULL,
  ToStationCode = NULL,
  api_key = wmata_key()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_destination_+3A_fromstationcode">FromStationCode</code></td>
<td>
<p>Station code for the origin station. Use the
<code><a href="#topic+rail_stations">rail_stations()</a></code> function to return a list of all station codes.</p>
</td></tr>
<tr><td><code id="rail_destination_+3A_tostationcode">ToStationCode</code></td>
<td>
<p>Station code for the destination station. Use the
<code><a href="#topic+rail_stations">rail_stations()</a></code> function to return a list of all station codes.</p>
</td></tr>
<tr><td><code id="rail_destination_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per  with  variables:
</p>

<dl>
<dt>SourceStation</dt><dd><p>Origin station code. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>DestinationStation</dt><dd><p>Destination station code. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>CompositeMiles</dt><dd><p>Average of distance traveled between two stations and
straight-line distance (as used for WMATA fare calculations). For more
details, please refer to WMATA's <a href="https://www.wmata.com/about/records/public_docs/upload/Tariff-on-Fares-Annotated-2-12-18.pdf#page=6">Tariff on Fares</a>.</p>
</dd>
<dt>RailTime</dt><dd><p>Estimated travel time (schedule time) in minutes between
the source and destination station. This is not correlated to minutes
(<code>Min</code>) in Real-Time Rail Predictions.</p>
</dd>
<dt>PeakTime</dt><dd><p>Fare during peak times (weekdays from opening to 9:30 AM
and 3-7 PM (EST), and weekends from midnight to closing).</p>
</dd>
<dt>OffPeakTime</dt><dd><p>Fare during off-peak times (times other than the ones
described below).</p>
</dd>
<dt>SeniorDisabled</dt><dd><p>Reduced fare for <a href="https://www.wmata.com/service/accessibility/reduced-fare.cfm">senior citizens or people with disabilities.</a></p>
</dd>
</dl>



<h3>Value</h3>

<p>A data frame containing station to station information
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3313">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3313</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_destination("A01", "A08")

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_entrance'>Rail Station Entrances</h2><span id='topic+rail_entrance'></span>

<h3>Description</h3>

<p>Returns a list of nearby station entrances based on latitude, longitude, and
radius (meters). Omit search parameters to return all station entrances.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_entrance(Lat = NULL, Lon = NULL, Radius = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_entrance_+3A_lat">Lat</code></td>
<td>
<p>(Optional) Center point Latitude, required if <code>Longitude</code> and
<code>Radius</code> are specified.</p>
</td></tr>
<tr><td><code id="rail_entrance_+3A_lon">Lon</code></td>
<td>
<p>(Optional) Center point Longitude, required if <code>Latitude</code> and
<code>Radius</code> are specified.</p>
</td></tr>
<tr><td><code id="rail_entrance_+3A_radius">Radius</code></td>
<td>
<p>(Optional) Radius (meters) to include in the search area,
required if <code>Latitude</code> and <code>Longitude</code> are specified.</p>
</td></tr>
<tr><td><code id="rail_entrance_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per entrance with 7 variables:
</p>

<dl>
<dt>Name</dt><dd><p>Name of the entrance (usually the station name and nearest
intersection).</p>
</dd>
<dt>StationCode</dt><dd><p>The station code associated with this entrance. Use this
value in other rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationTogether</dt><dd><p>For stations containing multiple platforms (e.g.:
Gallery Place, Fort Totten, L'Enfant Plaza, and Metro Center), the other
station code (previously <code>StationCode2</code>).</p>
</dd>
<dt>Description</dt><dd><p>Additional information for the entrance, if available.
Currently available data usually shows the same value as the <code>Name</code>
element.</p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Distance</dt><dd><p>Distance (meters) of the entrance from the provided search
coordinates. Calculated using <code><a href="geodist.html#topic+geodist">geodist::geodist()</a></code> and the &quot;cheap ruler&quot;
method.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A data frame of station entrances.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330f">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330f</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_entrance(38.8895, -77.0353)

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_incidents'>Rail Incidents</h2><span id='topic+rail_incidents'></span>

<h3>Description</h3>

<p>Reported rail incidents (significant disruptions and delays to normal
service). The data is identical to WMATA's Metrorail Service Status feed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_incidents(api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_incidents_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A data frame with 1 row incident and 5 variables:
</p>

<dl>
<dt>IncidentID</dt><dd><p>Unique identifier for an incident.</p>
</dd>
<dt>Description</dt><dd><p>Free-text description of the incident.</p>
</dd>
<dt>IncidentType</dt><dd><p>Free-text description of the incident type. Usually
Delay or Alert but is subject to change at any time.</p>
</dd>
<dt>LinesAffected</dt><dd><p>Character vector of line codes (e.g.: RD; or BL; OR;
or BL; OR; RD;).</p>
</dd>
<dt>DateUpdated</dt><dd><p>Date and time (UTC) of last update.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Data frame of all rail incidents.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d77">https://developer.wmata.com/docs/services/54763641281d83086473f232/operations/54763641281d830c946a3d77</a>
</p>
<p>Other Incident APIs: 
<code><a href="#topic+bus_incidents">bus_incidents</a>()</code>,
<code><a href="#topic+elevator_incidents">elevator_incidents</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_incidents()

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_lines'>Rail Lines</h2><span id='topic+rail_lines'></span>

<h3>Description</h3>

<p>Returns information about all rail lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_lines(api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_lines_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per line with 6 variables:
</p>

<dl>
<dt>LineCode</dt><dd><p>Two-letter abbreviation for the line (e.g.: RD, BL, YL, OR,
GR, or SV).</p>
</dd>
<dt>DisplayName</dt><dd><p>Full name of line color.</p>
</dd>
<dt>StartStationCode</dt><dd><p>Start station code. For example, will be F11
(Branch Avenue) for the Green Line, A15 (Shady Grove) for the Red Line,
etc. Use this value in other rail-related APIs to retrieve data about a
station.</p>
</dd>
<dt>EndStationCode</dt><dd><p>End station code. For example, will be E10
(Greenbelt) for the Green Line, B11 (Glenmont) for the Red Line, etc. Use
this value in other rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>InternalDestination</dt><dd><p>Intermediate terminal station code(s). During
normal service, some trains on some lines might end their trip prior to the
<code>StartStationCode</code> or <code>EndStationCode.</code> A good example is on the Red Line
where some trains stop at A11 (Grosvenor) or B08 (Silver Spring). <code>NA</code> if
not defined.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A data frame of rail lines.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330c">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330c</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_lines()

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_path'>Path Between Stations</h2><span id='topic+rail_path'></span>

<h3>Description</h3>

<p>Returns a set of ordered stations and distances between two stations on the
<em>same line</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_path(FromStationCode, ToStationCode, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_path_+3A_fromstationcode">FromStationCode</code></td>
<td>
<p>Station code for the origin station. Use the Station
List method to return a list of all station codes.</p>
</td></tr>
<tr><td><code id="rail_path_+3A_tostationcode">ToStationCode</code></td>
<td>
<p>Station code for the destination station. Use the
Station List method to return a list of all station codes.</p>
</td></tr>
<tr><td><code id="rail_path_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per arrival with 6 variables:
</p>

<dl>
<dt>LineCode</dt><dd><p>Two-letter abbreviation for the line (e.g.: RD, BL, YL, OR,
GR, or SV) this station's platform is on.</p>
</dd>
<dt>StationCode</dt><dd><p>Station code for this station. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full name for this station, as shown on the WMATA
website.</p>
</dd>
<dt>SeqNum</dt><dd><p>Ordered sequence number.</p>
</dd>
<dt>DistanceToPrev</dt><dd><p>Distance in meters to the previous station in the
list, ordered by <code>SeqNum</code>. Converted from feet, rounded to the nearest
meter.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Note that this method is not suitable on its own as a pathfinding solution
between stations.
</p>


<h3>Value</h3>

<p>A data frame of stations on rail path.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330e">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe330e</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_path("A01", "A08")

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_positions'>Live Train Positions</h2><span id='topic+rail_positions'></span>

<h3>Description</h3>

<p>Returns uniquely identifiable trains in service and what track circuits they
currently occupy. Will return an empty set of results when no positions are
available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_positions(api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_positions_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble with 1 row per train and 9 variables:
</p>

<dl>
<dt>TrainId</dt><dd><p>Uniquely identifiable internal train identifier.</p>
</dd>
<dt>TrainNumber</dt><dd><p><em>Non-unique</em> train identifier, often used by WMATA's
Rail Scheduling and Operations Teams, as well as over open radio
communication.</p>
</dd>
<dt>CarCount</dt><dd><p>Number of cars. Can sometimes be 0 when there is no data
available.</p>
</dd>
<dt>DirectionNum</dt><dd><p>The direction of movement regardless of which track the
train is on. Valid values are 1 or 2. Generally speaking, trains with
direction 1 are northbound/eastbound, while trains with direction 2 are
southbound/westbound.</p>
</dd>
<dt>CircuitId</dt><dd><p>The circuit identifier the train is currently on. This
identifier can be referenced from the Standard Routes method.</p>
</dd>
<dt>DestinationStationCode</dt><dd><p>Destination station code. Can be <code>NA</code>. Use
this value in other rail-related APIs to retrieve data about a station.
Note that this value may <em>sometimes</em> differ from the destination station
code returned by our Next Trains methods.</p>
</dd>
<dt>LineCode</dt><dd><p>Two-letter abbreviation for the line (e.g.: RD, BL, YL, OR,
GR, or SV). May also be <code>NA</code> in certain cases.</p>
</dd>
<dt>SecondsAtLocation</dt><dd><p>Approximate &quot;dwell time&quot;. This is not an exact
value, but can be used to determine how long a train has been reported at
the same track circuit.</p>
</dd>
<dt>ServiceType</dt><dd><p>Service Type of a train, can be any of the following
Service Types:
</p>

<ul>
<li> <p><code>NoPassengers</code>: This is a non-revenue train with no passengers on board.
Note that this designation of <code>NoPassengers</code> does not necessarily
correlate with PIDS &quot;No Passengers&quot;. As of 08/22/2016, this functionality
has been reinstated to include all non-revenue vehicles, with minor
exceptions.
</p>
</li>
<li> <p><code>Normal</code>: This is a normal revenue service train.
</p>
</li>
<li> <p><code>Special</code>: This is a special revenue service train with an unspecified
line and destination. This is more prevalent during scheduled track
work.
</p>
</li>
<li> <p><code>Unknown</code>: This often denotes cases with unknown data or work vehicles.
</p>
</li></ul>

</dd>
</dl>



<h3>Details</h3>

<p>Please refer to <a href="https://developer.wmata.com/TrainPositionsFAQ">this page</a>
for additional details.
</p>


<h3>Value</h3>

<p>A data frame of train positions.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/5763fb35f91823096cac1058">https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/5763fb35f91823096cac1058</a>
</p>
<p>Other Train Positions: 
<code><a href="#topic+standard_routes">standard_routes</a>()</code>,
<code><a href="#topic+track_circuits">track_circuits</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_positions()

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_stations'>Rail Station List</h2><span id='topic+rail_stations'></span>

<h3>Description</h3>

<p>Returns a list of station location and address information based on a given
<code>LineCode</code>. Use <code>NULL</code> (default) to return all stations. The response is an
data frame identical to that returned in the Station Information method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_stations(LineCode = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_stations_+3A_linecode">LineCode</code></td>
<td>
<p>Two-letter line code abbreviation, or <code>NULL</code> (default):
</p>

<ul>
<li><p> RD - Red
</p>
</li>
<li><p> YL - Yellow
</p>
</li>
<li><p> GR - Green
</p>
</li>
<li><p> BL - Blue
</p>
</li>
<li><p> OR - Orange
</p>
</li>
<li><p> SV - Silver
</p>
</li></ul>
</td></tr>
<tr><td><code id="rail_stations_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per station with 10 variables:
</p>

<dl>
<dt>StationCode</dt><dd><p>Station code for this station. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full name for this station, as shown on the WMATA
website.</p>
</dd>
<dt>StationTogether</dt><dd><p>For stations with multiple platforms (e.g.: Gallery
Place, Fort Totten, L'Enfant Plaza, and Metro Center), the additional
<code>StationCode</code> will be listed here.</p>
</dd>
<dt>LineCodes</dt><dd><p>Character vector of two-letter abbreviations (e.g.: RD,
BL, YL, OR, GR, or SV) served by this station. If the station has an
additional platform, the lines served by the other platform are listed in
the <code>LineCodes</code> values for the record associated with the <code>StationCode</code>
found in <code>StationTogether.</code></p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Street</dt><dd><p>Street address (for GPS use).</p>
</dd>
<dt>City</dt><dd><p>City.</p>
</dd>
<dt>State</dt><dd><p>State (abbreviated).</p>
</dd>
<dt>Zip</dt><dd><p>Zip code.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A data frame of stations on a rail line.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3311">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3311</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_stations("RD")

## End(Not run)
</code></pre>

<hr>
<h2 id='rail_times'>Rail Station Timings</h2><span id='topic+rail_times'></span>

<h3>Description</h3>

<p>Returns opening and scheduled first/last train times based on a given
<code>StationCode</code>. Omit the <code>StationCode</code> to return timing information for all
stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rail_times(StationCode = NULL, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rail_times_+3A_stationcode">StationCode</code></td>
<td>
<p>Station code. Use the <code><a href="#topic+rail_stations">rail_stations()</a></code> function to return
a list of all station codes. Use <code>NULL</code> (default) to return times for all
stations.</p>
</td></tr>
<tr><td><code id="rail_times_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per train with 8 variables:
</p>

<dl>
<dt>StationCode</dt><dd><p>Station code for this station. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full name of the station.</p>
</dd>
<dt>DestinationStation</dt><dd><p>Station code for the train's destination. Use
this value in other rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>Weekday</dt><dd><p>Day of the week abbreviation. From list element names.</p>
</dd>
<dt>OpeningTime</dt><dd><p>Station opening time. Converted to <code>hms</code> class with
<code><a href="hms.html#topic+parse_hms">hms::parse_hm()</a></code>, representing seconds since midnight of that <code>Weekday</code>.</p>
</dd>
<dt>FirstTime</dt><dd><p>First train leaves the station at this time (ET).
Converted to <code>hms</code> class with <code><a href="hms.html#topic+parse_hms">hms::parse_hm()</a></code>, representing seconds since
midnight of that <code>Weekday</code>.</p>
</dd>
<dt>LastTime</dt><dd><p>Last train leaves the station at this time (ET). Converted
to <code>hms</code> class with <code><a href="hms.html#topic+parse_hms">hms::parse_hm()</a></code>, representing seconds since midnight
of that <code>Weekday</code>. For times that were in the AM of the <em>next</em> <code>Weekday</code>,
time is greater than 24 hours.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Note that for stations with multiple platforms (e.g.: Metro Center, L'Enfant
Plaza, etc.), a distinct call is required for each <code>StationCode</code> to retrieve
the full set of train times at such stations.
</p>


<h3>Value</h3>

<p>A <em>tidy</em> data frame of station schedules. Combined from a nested list
of weekday times.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3312">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3312</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+station_info">station_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rail_times("A01")

## End(Not run)
</code></pre>

<hr>
<h2 id='standard_routes'>Standard Routes</h2><span id='topic+standard_routes'></span>

<h3>Description</h3>

<p>Returns an ordered list of mostly revenue (and some lead) track circuits,
arranged by line and track number. This data does not change frequently and
should be cached for a reasonable amount of time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standard_routes()
</code></pre>


<h3>Format</h3>

<p>A nested tibble with 1 row per track and 3 variables:
</p>

<dl>
<dt>LineCode</dt><dd><p>Abbreviation for the revenue line. Note that this also
includes <strong>YLRP</strong> (Yellow Line Rush Plus).</p>
</dd>
<dt>TrackNum</dt><dd><p>Track number (1 or 2).</p>
</dd>
<dt>TrackCircuits</dt><dd><p>Array containing ordered track circuit information:
</p>

<ul>
<li> <p><code>CircuitId</code>: An internal system-wide uniquely identifiable circuit
number.
</p>
</li>
<li> <p><code>SeqNum</code>: Order in which the circuit appears for the given line and
track. Sequences go from West to East and South to North.
</p>
</li>
<li> <p><code>StationCode</code>: If the circuit is at a station, this value will represent
the station code. Otherwise, it will be be <code>NA</code>. Use this value in other
rail-related APIs to retrieve data about a station.
</p>
</li></ul>

</dd>
</dl>



<h3>Details</h3>

<p>Please refer to <a href="https://developer.wmata.com/TrainPositionsFAQ">this page</a>
for additional details.
</p>


<h3>Value</h3>

<p>A nested data frame of track circuits.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/57641afc031f59363c586dca">https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/57641afc031f59363c586dca</a>
</p>
<p>Other Train Positions: 
<code><a href="#topic+rail_positions">rail_positions</a>()</code>,
<code><a href="#topic+track_circuits">track_circuits</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
standard_routes()

## End(Not run)
</code></pre>

<hr>
<h2 id='station_info'>Rail Station Information</h2><span id='topic+station_info'></span>

<h3>Description</h3>

<p>Returns station location and address information based on a given
<code>StationCode</code>. Similar to <code><a href="#topic+rail_stations">rail_stations()</a></code>, but returns data on a given
station(s) rather than all stations on a line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>station_info(StationCode, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="station_info_+3A_stationcode">StationCode</code></td>
<td>
<p>A character vector of one or more station codes. A
separate call is made to the API for each code, do not provide more than
10.</p>
</td></tr>
<tr><td><code id="station_info_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A tibble 1 row per station with 10 variables:
</p>

<dl>
<dt>StationCode</dt><dd><p>Station code for this station. Use this value in other
rail-related APIs to retrieve data about a station.</p>
</dd>
<dt>StationName</dt><dd><p>Full name for this station, as shown on the WMATA
website.</p>
</dd>
<dt>StationTogether</dt><dd><p>For stations with multiple platforms (e.g.: Gallery
Place, Fort Totten, L'Enfant Plaza, and Metro Center), the additional
<code>StationCode</code> will be listed here.</p>
</dd>
<dt>LineCodes</dt><dd><p>Character vector of two-letter abbreviations (e.g.: RD,
BL, YL, OR, GR, or SV) served by this station. If the station has an
additional platform, the lines served by the other platform are listed in
the <code>LineCodes</code> values for the record associated with the <code>StationCode</code>
found in <code>StationTogether.</code></p>
</dd>
<dt>Lat</dt><dd><p>Latitude.</p>
</dd>
<dt>Lon</dt><dd><p>Longitude.</p>
</dd>
<dt>Street</dt><dd><p>Street address (for GPS use).</p>
</dd>
<dt>City</dt><dd><p>City.</p>
</dd>
<dt>State</dt><dd><p>State (abbreviated).</p>
</dd>
<dt>Zip</dt><dd><p>Zip code.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A data frame of stations.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3311">https://developer.wmata.com/docs/services/5476364f031f590f38092507/operations/5476364f031f5909e4fe3311</a>
</p>
<p>Other Rail Station Information: 
<code><a href="#topic+rail_destination">rail_destination</a>()</code>,
<code><a href="#topic+rail_entrance">rail_entrance</a>()</code>,
<code><a href="#topic+rail_lines">rail_lines</a>()</code>,
<code><a href="#topic+rail_path">rail_path</a>()</code>,
<code><a href="#topic+rail_stations">rail_stations</a>()</code>,
<code><a href="#topic+rail_times">rail_times</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
station_info(StationCode = c("A07", "B07"))

## End(Not run)
</code></pre>

<hr>
<h2 id='track_circuits'>Track Circuits</h2><span id='topic+track_circuits'></span>

<h3>Description</h3>

<p>Returns a list of all track circuits including those on pocket tracks and
crossovers. Each track circuit may include references to its right and left
neighbors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>track_circuits()
</code></pre>


<h3>Format</h3>

<p>A nested tibble with 1 row per train and 9 variables:
</p>

<dl>
<dt>Track</dt><dd><p>Track number. 1 and 2 denote &quot;main&quot; lines, while 0 and 3 are
connectors (between different types of tracks) and pocket tracks,
respectively.</p>
</dd>
<dt>CircuitId</dt><dd><p>An internal system-wide uniquely identifiable circuit
number.</p>
</dd>
<dt>Neighbors</dt><dd><p>Data frame containing track circuit neighbor information.
Note that some track circuits have no neighbors in one direction. All track
circuits have at least one neighbor.
</p>

<ul>
<li> <p><code>NeighborType</code>: Left or Right neighbor group. Generally speaking, left
neighbors are to the west and south, while right neighbors are to the
east/north.
</p>
</li>
<li> <p><code>CircuitIds</code>: Data frame containing neighboring circuit IDs as list
column.
</p>
</li></ul>

</dd>
</dl>



<h3>Details</h3>

<p>Please refer to <a href="https://developer.wmata.com/TrainPositionsFAQ">this page</a>
for additional details.
</p>


<h3>Value</h3>

<p>A data frame of nested track circuit information.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/57644238031f59363c586dcb">https://developer.wmata.com/docs/services/5763fa6ff91823096cac1057/operations/57644238031f59363c586dcb</a>
</p>
<p>Other Train Positions: 
<code><a href="#topic+rail_positions">rail_positions</a>()</code>,
<code><a href="#topic+standard_routes">standard_routes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
track_circuits()

## End(Not run)
</code></pre>

<hr>
<h2 id='wmata_api'>Call the WMATA API</h2><span id='topic+wmata_api'></span>

<h3>Description</h3>

<p>Use <code><a href="httr.html#topic+GET">httr::GET()</a></code> to make a request to the WMATA API and return the parsed
list from the JSON data. The function uses <code><a href="httr.html#topic+RETRY">httr::RETRY()</a></code>, so the call will
repeat up to three times if there is a failure (often from a rate limit).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wmata_api(path, query = NULL, ..., level, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wmata_api_+3A_path">path</code></td>
<td>
<p>The path to an API endpoint (e.g., &quot;Bus.svc/json/jStopSchedule&quot;)</p>
</td></tr>
<tr><td><code id="wmata_api_+3A_query">query</code></td>
<td>
<p>Additional queries also passed, possibly your key if need be.</p>
</td></tr>
<tr><td><code id="wmata_api_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> for parsing.</p>
</td></tr>
<tr><td><code id="wmata_api_+3A_level">level</code></td>
<td>
<p>If parsed JSON is a list, select only this element. Useful if
the list is length one containing a data frame or some other object.</p>
</td></tr>
<tr><td><code id="wmata_api_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function was modified from 'zamorarr/wmata' on GitHub:
<a href="https://github.com/zamorarr/wmata/blob/master/R/api.r">https://github.com/zamorarr/wmata/blob/master/R/api.r</a>
</p>


<h3>Value</h3>

<p>A single JSON string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wmata_api("Rail.svc/json/jLines", query = list(LineCode = "RD"))

## End(Not run)
</code></pre>

<hr>
<h2 id='wmata_key'>Find a WMATA API key</h2><span id='topic+wmata_key'></span><span id='topic+wmata_validate'></span>

<h3>Description</h3>

<p>All calls to the WMATA API must be accompanied by a personal API key. A free
key can be obtained by subscribing to the default tier:
</p>

<ol>
<li><p> Sign up for a free WMATA developer account: <a href="https://developer.wmata.com/">https://developer.wmata.com/</a>
</p>
</li>
<li><p> Log in and subscribe to the free default tier.
</p>
</li>
<li><p> Copy the primary or secondary key from your profile.
</p>
</li>
<li><p> Pass your API key to a function through one of three ways:
</p>

<ol>
<li><p> Use <code><a href="base.html#topic+Sys.setenv">Sys.setenv()</a></code> to temporarily set define <code>WMATA_KEY</code>.
</p>
</li>
<li><p> Pass your key as a string to the <code>api_key</code> argument of any function.
</p>
</li>
<li><p> Store the the WMATA key as a line like <code>WMATA_KEY=xxxyyyzzz</code> in your
<code>.Renviron</code> file, to be called by <code><a href="#topic+wmata_key">wmata_key()</a></code> via <code><a href="base.html#topic+Sys.getenv">Sys.getenv()</a></code>.
</p>
</li></ol>

</li></ol>

<p>The WMATA also provides a demonstration key. This key should <strong>never</strong> be
used in production applications, it is rate limited and subject to change at
<em>any</em> time. The key can be found on the WMATA products page when not
signed into a developer account.
</p>
<p>The <code><a href="#topic+wmata_validate">wmata_validate()</a></code> function can be used to verify a key is valid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wmata_key(api_key = Sys.getenv("WMATA_KEY"))

wmata_validate(api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wmata_key_+3A_api_key">api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code><a href="#topic+wmata_key">wmata_key()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Default tier sufficient for most casual developers. Rate limited to 10
calls/second and 50,000 calls per day. This product contains 8 APIs and all
APIs needed for the functions in this package:
</p>

<ul>
<li><p> Bus Route and Stop Methods
</p>
</li>
<li><p> GTFS (unused)
</p>
</li>
<li><p> Incidents
</p>
</li>
<li><p> Misc Methods
</p>
</li>
<li><p> Rail Station Information
</p>
</li>
<li><p> Real-Time Bus Predictions
</p>
</li>
<li><p> Real-Time Rail Predictions
</p>
</li>
<li><p> Train Positions
</p>
</li></ul>



<h3>Value</h3>

<p>For <code><a href="#topic+wmata_key">wmata_key()</a></code>, a 32 character alphanumeric API key. For
<code><a href="#topic+wmata_validate">wmata_validate()</a></code>, either <code>TRUE</code> for a valid key or an error if invalid.
</p>


<h3>See Also</h3>

<p><a href="https://developer.wmata.com/docs/services/5923434c08d33c0f201a600a/operations/5923437c031f5914d0204bcf">https://developer.wmata.com/docs/services/5923434c08d33c0f201a600a/operations/5923437c031f5914d0204bcf</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
