<!DOCTYPE html><html><head><title>Help for package prediction</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {prediction}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#build_datalist'><p>Build list of data.frames</p></a></li>
<li><a href='#find_data'><p>Extract data from a model object</p></a></li>
<li><a href='#margex'><p>Artificial data for margins, copied from Stata</p></a></li>
<li><a href='#mean_or_mode'><p>Class-dependent variable aggregation</p></a></li>
<li><a href='#prediction-package'><p>Extract Predictions from a Model Object</p></a></li>
<li><a href='#seq_range'><p>Create a sequence over the range of a vector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy, Type-Safe 'prediction()' Methods</td>
</tr>
<tr>
<td>Description:</td>
<td>A one-function package containing 'prediction()', a type-safe alternative to 'predict()' that always returns a data frame. The 'summary()' method provides a data frame with average predictions, possibly over counterfactual versions of the data (a la the 'margins' command in 'Stata'). Marginal effect estimation is provided by the related package, 'margins' <a href="https://cran.r-project.org/package=margins">https://cran.r-project.org/package=margins</a>. The package currently supports common model types (e.g., "lm", "glm") from the 'stats' package, as well as numerous other model classes from other add-on packages. See the README or main package documentation page for a complete listing.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.14</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-06-16</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/leeper/prediction">https://github.com/leeper/prediction</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/leeper/prediction/issues">https://github.com/leeper/prediction/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, stats, data.table</td>
</tr>
<tr>
<td>Suggests:</td>
<td>datasets, methods, testthat</td>
</tr>
<tr>
<td>Enhances:</td>
<td>AER, aod, betareg, biglm, brglm, caret, crch, e1071, earth,
ff, ffbase, gam (&ge; 1.15), gee, glmnet, glmx, kernlab, lme4,
MASS, mclogit, mda, mlogit, MNP, nlme, nnet, ordinal, plm,
pscl, quantreg, rpart, sampleSelection, speedglm, survey (&ge;
3.31-5), survival, truncreg, VGAM</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-06-17 18:36:42 UTC; THOMAS</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas J. Leeper <a href="https://orcid.org/0000-0003-4097-6326"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Carl Ganz [ctb],
  Vincent Arel-Bundock
    <a href="https://orcid.org/0000-0003-2042-7063"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas J. Leeper &lt;thosjleeper@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-06-17 19:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='build_datalist'>Build list of data.frames</h2><span id='topic+build_datalist'></span>

<h3>Description</h3>

<p>Construct a list of data.frames based upon an input data.frame and a list of one or more <code>at</code> values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_datalist(data, at = NULL, as.data.frame = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_datalist_+3A_data">data</code></td>
<td>
<p>A data.frame containing the original data.</p>
</td></tr>
<tr><td><code id="build_datalist_+3A_at">at</code></td>
<td>
<p>A list of one or more named vectors of values, which will be used to specify values of variables in <code>data</code>. All possible combinations are generated. Alternatively, this can be a data frame of combination levels if only a subset of combinations are desired. See examples.</p>
</td></tr>
<tr><td><code id="build_datalist_+3A_as.data.frame">as.data.frame</code></td>
<td>
<p>A logical indicating whether to return a single stacked data frame rather than a list of data frames</p>
</td></tr>
<tr><td><code id="build_datalist_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data.frames, unless <code>as.data.frame = TRUE</code> in which case a single, stacked data frame is returned.
</p>


<h3>Author(s)</h3>

<p>Thomas J. Leeper
</p>


<h3>See Also</h3>

<p><code><a href="#topic+find_data">find_data</a></code>, <code><a href="#topic+mean_or_mode">mean_or_mode</a></code>, <code><a href="#topic+seq_range">seq_range</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># basic examples
require("datasets")
build_datalist(head(mtcars), at = list(cyl = c(4, 6)))

str(build_datalist(head(mtcars), at = list(cyl = c(4,6), wt = c(2.75,3,3.25))), 1)

str(build_datalist(head(mtcars), at = data.frame(cyl = c(4,4), wt = c(2.75,3))))

</code></pre>

<hr>
<h2 id='find_data'>Extract data from a model object</h2><span id='topic+find_data'></span><span id='topic+find_data.default'></span><span id='topic+find_data.data.frame'></span><span id='topic+find_data.crch'></span><span id='topic+find_data.glimML'></span><span id='topic+find_data.glm'></span><span id='topic+find_data.hxlr'></span><span id='topic+find_data.lm'></span><span id='topic+find_data.mca'></span><span id='topic+find_data.merMod'></span><span id='topic+find_data.svyglm'></span><span id='topic+find_data.train'></span><span id='topic+find_data.vgam'></span><span id='topic+find_data.vglm'></span>

<h3>Description</h3>

<p>Attempt to reconstruct the data used to create a model object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_data(model, ...)

## Default S3 method:
find_data(model, env = parent.frame(), ...)

## S3 method for class 'data.frame'
find_data(model, ...)

## S3 method for class 'crch'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'glimML'
find_data(model, ...)

## S3 method for class 'glm'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'hxlr'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'lm'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'mca'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'merMod'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'svyglm'
find_data(model, ...)

## S3 method for class 'train'
find_data(model, ...)

## S3 method for class 'vgam'
find_data(model, env = parent.frame(), ...)

## S3 method for class 'vglm'
find_data(model, env = parent.frame(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_data_+3A_model">model</code></td>
<td>
<p>The model object.</p>
</td></tr>
<tr><td><code id="find_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to methods.</p>
</td></tr>
<tr><td><code id="find_data_+3A_env">env</code></td>
<td>
<p>An environment in which to look for the <code>data</code> argument to the modelling call.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a convenience function and, as such, carries no guarantees. To behave well, it typically requires that a model object be specified using a formula interface and an explicit <code>data</code> argument. Models that can be specified using variables from the <code>.GlobalEnv</code> or with a non-formula interface (e.g., a matrix of data) will tend to generate errors. <code>find_data</code> is an S3 generic so it is possible to expand it with new methods.
</p>


<h3>Value</h3>

<p>A data frame containing the original data used in a modelling call, modified according to the original model's 'subset' and 'na.action' arguments, if appropriate.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prediction">prediction</a></code>, <code><a href="#topic+build_datalist">build_datalist</a></code>, <code><a href="#topic+mean_or_mode">mean_or_mode</a></code>, <code><a href="#topic+seq_range">seq_range</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("datasets")
x &lt;- lm(mpg ~ cyl * hp + wt, data = head(mtcars))
find_data(x)

</code></pre>

<hr>
<h2 id='margex'>Artificial data for margins, copied from Stata</h2><span id='topic+margex'></span>

<h3>Description</h3>

<p>The dataset is identical to the one provided by Stata and available from <code>webuse::webuse("margex")</code> with categorical variables explicitly encoded as factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>margex
</code></pre>


<h3>Format</h3>

<p>A data frame with 3000 observations on the following 11 variables.
</p>

<dl>
<dt>&lsquo;<span class="samp">&#8288;y&#8288;</span>&rsquo;</dt><dd><p>A numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;outcome&#8288;</span>&rsquo;</dt><dd><p>A binary numeric vector with values (0,1)</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;sex&#8288;</span>&rsquo;</dt><dd><p>A factor with two levels</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo;</dt><dd><p>A factor with three levels</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;age&#8288;</span>&rsquo;</dt><dd><p>A numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;distance&#8288;</span>&rsquo;</dt><dd><p>A numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;ycn&#8288;</span>&rsquo;</dt><dd><p>A numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;yc&#8288;</span>&rsquo;</dt><dd><p>A numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;treatment&#8288;</span>&rsquo;</dt><dd><p>A factor with two levels</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;agegroup&#8288;</span>&rsquo;</dt><dd><p>A factor with three levels</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;arm&#8288;</span>&rsquo;</dt><dd><p>A factor with three levels</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://www.stata-press.com/data/r14/margex.dta">http://www.stata-press.com/data/r14/margex.dta</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prediction">prediction</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Examples from Stata's help files
# Also available from: webuse::webuse("margex")
data("margex")

# A simple case after regress
# . regress y i.sex i.group
# . margins sex
m1 &lt;- lm(y ~ factor(sex) + factor(group), data = margex)
prediction(m1, at = list(sex = c("male", "female")))

# A simple case after logistic
# . logistic outcome i.sex i.group
# . margins sex
m2 &lt;- glm(outcome ~ sex + group, binomial(), data = margex)
prediction(m2, at = list(sex = c("male", "female")))

# Average response versus response at average
# . margins sex
prediction(m2, at = list(sex = c("male", "female")))
# . margins sex, atmeans
## TODO

# Multiple margins from one margins command
# . margins sex group
prediction(m2, at = list(sex = c("male", "female")))
prediction(m2, at = list(group = c("1", "2", "3")))

# Margins with interaction terms
# . logistic outcome i.sex i.group sex#group
# . margins sex group
m3 &lt;- glm(outcome ~ sex * group, binomial(), data = margex)
prediction(m3, at = list(sex = c("male", "female")))
prediction(m3, at = list(group = c("1", "2", "3")))

# Margins with continuous variables
# . logistic outcome i.sex i.group sex#group age
# . margins sex group
m4 &lt;- glm(outcome ~ sex * group + age, binomial(), data = margex)
prediction(m4, at = list(sex = c("male", "female")))
prediction(m4, at = list(group = c("1", "2", "3")))

# Margins of continuous variables
# . margins, at(age=40)
prediction(m4, at = list(age = 40))
# . margins, at(age=(30 35 40 45 50))
prediction(m4, at = list(age = c(30, 35, 40, 45, 50)))

# Margins of interactions
# . margins sex#group
prediction(m4, at = list(sex = c("male", "female"), group = c("1", "2", "3")))


</code></pre>

<hr>
<h2 id='mean_or_mode'>Class-dependent variable aggregation</h2><span id='topic+mean_or_mode'></span><span id='topic+mean_or_mode.default'></span><span id='topic+mean_or_mode.numeric'></span><span id='topic+mean_or_mode.data.frame'></span><span id='topic+median_or_mode'></span><span id='topic+median_or_mode.default'></span><span id='topic+median_or_mode.numeric'></span><span id='topic+median_or_mode.data.frame'></span>

<h3>Description</h3>

<p>Summarize a vector/variable into a single number, either a mean (median) for numeric vectors or the mode for categorical (character, factor, ordered, or logical) vectors. Useful for aggregation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_or_mode(x)

## Default S3 method:
mean_or_mode(x)

## S3 method for class 'numeric'
mean_or_mode(x)

## S3 method for class 'data.frame'
mean_or_mode(x)

median_or_mode(x)

## Default S3 method:
median_or_mode(x)

## S3 method for class 'numeric'
median_or_mode(x)

## S3 method for class 'data.frame'
median_or_mode(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mean_or_mode_+3A_x">x</code></td>
<td>
<p>A vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric or factor vector of length 1.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prediction">prediction</a></code>, <code><a href="#topic+build_datalist">build_datalist</a></code>, <code><a href="#topic+seq_range">seq_range</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("datasets")
# mean for numerics
mean_or_mode(iris)
mean_or_mode(iris[["Sepal.Length"]])
mean_or_mode(iris[["Species"]])

# median for numerics
median_or_mode(iris)

</code></pre>

<hr>
<h2 id='prediction-package'>Extract Predictions from a Model Object</h2><span id='topic+prediction-package'></span><span id='topic+prediction'></span><span id='topic+prediction.default'></span><span id='topic+prediction.Arima'></span><span id='topic+prediction.ar'></span><span id='topic+prediction.arima0'></span><span id='topic+prediction.betareg'></span><span id='topic+prediction.biglm'></span><span id='topic+prediction.bruto'></span><span id='topic+prediction.clm'></span><span id='topic+prediction.coxph'></span><span id='topic+prediction.crch'></span><span id='topic+prediction.earth'></span><span id='topic+prediction.fda'></span><span id='topic+prediction.Gam'></span><span id='topic+prediction.gausspr'></span><span id='topic+prediction.gee'></span><span id='topic+prediction.glimML'></span><span id='topic+prediction.glimQL'></span><span id='topic+prediction.glm'></span><span id='topic+prediction.glmnet'></span><span id='topic+prediction.glmx'></span><span id='topic+prediction.gls'></span><span id='topic+prediction.hetglm'></span><span id='topic+prediction.hurdle'></span><span id='topic+prediction.hxlr'></span><span id='topic+prediction.ivreg'></span><span id='topic+prediction.knnreg'></span><span id='topic+prediction.kqr'></span><span id='topic+prediction.ksvm'></span><span id='topic+prediction.lm'></span><span id='topic+prediction.lme'></span><span id='topic+prediction.loess'></span><span id='topic+prediction.lqs'></span><span id='topic+prediction.mars'></span><span id='topic+prediction.mca'></span><span id='topic+prediction.mclogit'></span><span id='topic+prediction.merMod'></span><span id='topic+prediction.mnp'></span><span id='topic+prediction.multinom'></span><span id='topic+prediction.nls'></span><span id='topic+prediction.nnet'></span><span id='topic+prediction.plm'></span><span id='topic+prediction.polr'></span><span id='topic+prediction.polyreg'></span><span id='topic+prediction.ppr'></span><span id='topic+prediction.princomp'></span><span id='topic+prediction.rlm'></span><span id='topic+prediction.rpart'></span><span id='topic+prediction.rq'></span><span id='topic+prediction.selection'></span><span id='topic+prediction.speedglm'></span><span id='topic+prediction.speedlm'></span><span id='topic+prediction.survreg'></span><span id='topic+prediction.svm'></span><span id='topic+prediction.svyglm'></span><span id='topic+prediction.train'></span><span id='topic+prediction.truncreg'></span><span id='topic+prediction.zeroinfl'></span><span id='topic+prediction_summary'></span>

<h3>Description</h3>

<p>Extract predicted values via <code><a href="stats.html#topic+predict">predict</a></code> from a model object, conditional on data, and return a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prediction(model, ...)

## Default S3 method:
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = "response",
  vcov = stats::vcov(model), calculate_se = TRUE, ...)

## S3 method for class 'Arima'
prediction(model, calculate_se = TRUE, ...)

## S3 method for class 'ar'
prediction(model, data, at = NULL, calculate_se = TRUE,
  ...)

## S3 method for class 'arima0'
prediction(model, data, at = NULL,
  calculate_se = TRUE, ...)

## S3 method for class 'betareg'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link", "precision",
  "variance", "quantile"), calculate_se = FALSE, ...)

## S3 method for class 'biglm'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = "response", calculate_se = TRUE,
  ...)

## S3 method for class 'bruto'
prediction(model, data = NULL, at = NULL,
  type = "fitted", calculate_se = FALSE, ...)

## S3 method for class 'clm'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = NULL, calculate_se = TRUE, category, ...)

## S3 method for class 'coxph'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("risk", "expected", "lp"),
  calculate_se = TRUE, ...)

## S3 method for class 'crch'
prediction(model, data = find_data(model), at = NULL,
  type = c("response", "location", "scale", "quantile"),
  calculate_se = FALSE, ...)

## S3 method for class 'earth'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link"),
  calculate_se = TRUE, category, ...)

## S3 method for class 'fda'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = NULL, calculate_se = FALSE, category, ...)

## S3 method for class 'Gam'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = c("response", "link", "terms"),
  calculate_se = TRUE, ...)

## S3 method for class 'gausspr'
prediction(model, data, at = NULL, type = NULL,
  calculate_se = TRUE, category, ...)

## S3 method for class 'gee'
prediction(model, calculate_se = FALSE, ...)

## S3 method for class 'glimML'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link"),
  calculate_se = TRUE, ...)

## S3 method for class 'glimQL'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link"),
  calculate_se = TRUE, ...)

## S3 method for class 'glm'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = c("response", "link"), vcov = stats::vcov(model),
  calculate_se = TRUE, ...)

## S3 method for class 'glmnet'
prediction(model, data, lambda = model[["lambda"]][1L],
  at = NULL, type = c("response", "link"), calculate_se = FALSE, ...)

## S3 method for class 'glmx'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = c("response", "link"), calculate_se = FALSE, ...)

## S3 method for class 'gls'
prediction(model, data = find_data(model), at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'hetglm'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link", "scale"),
  calculate_se = FALSE, ...)

## S3 method for class 'hurdle'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "count", "prob",
  "zero"), calculate_se = FALSE, ...)

## S3 method for class 'hxlr'
prediction(model, data = find_data(model), at = NULL,
  type = c("class", "probability", "cumprob", "location", "scale"),
  calculate_se = FALSE, ...)

## S3 method for class 'ivreg'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'knnreg'
prediction(model, data, at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'kqr'
prediction(model, data, at = NULL, calculate_se = FALSE,
  ...)

## S3 method for class 'ksvm'
prediction(model, data, at = NULL, type = NULL,
  calculate_se = TRUE, category, ...)

## S3 method for class 'lm'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = "response", vcov = stats::vcov(model),
  calculate_se = TRUE, ...)

## S3 method for class 'lme'
prediction(model, data = find_data(model), at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'loess'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = "response", calculate_se = TRUE,
  ...)

## S3 method for class 'lqs'
prediction(model, data = find_data(model), at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'mars'
prediction(model, data = NULL, at = NULL,
  type = "fitted", calculate_se = FALSE, ...)

## S3 method for class 'mca'
prediction(model, data = find_data(model), at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'mclogit'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = "response",
  vcov = stats::vcov(model), calculate_se = TRUE, ...)

## S3 method for class 'merMod'
prediction(model, data = find_data(model), at = NULL,
  type = c("response", "link"), re.form = NULL, calculate_se = FALSE,
  ...)

## S3 method for class 'mnp'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = NULL, calculate_se = FALSE, category, ...)

## S3 method for class 'multinom'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = NULL, calculate_se = FALSE,
  category, ...)

## S3 method for class 'nls'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'nnet'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = NULL, calculate_se = FALSE, category, ...)

## S3 method for class 'plm'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'polr'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = NULL, calculate_se = FALSE, category, ...)

## S3 method for class 'polyreg'
prediction(model, data = NULL, at = NULL,
  type = "fitted", calculate_se = FALSE, ...)

## S3 method for class 'ppr'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'princomp'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'rlm'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, type = "response", vcov = stats::vcov(model),
  calculate_se = TRUE, ...)

## S3 method for class 'rpart'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = NULL, calculate_se = FALSE,
  category, ...)

## S3 method for class 'rq'
prediction(model, data = find_data(model, parent.frame()),
  at = NULL, calculate_se = TRUE, ...)

## S3 method for class 'selection'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = "response",
  calculate_se = FALSE, ...)

## S3 method for class 'speedglm'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link"),
  calculate_se = FALSE, ...)

## S3 method for class 'speedlm'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, calculate_se = FALSE, ...)

## S3 method for class 'survreg'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "lp", "quantile",
  "uquantile"), calculate_se = TRUE, ...)

## S3 method for class 'svm'
prediction(model, data = NULL, at = NULL,
  calculate_se = TRUE, category, ...)

## S3 method for class 'svyglm'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "link"),
  calculate_se = TRUE, ...)

## S3 method for class 'train'
prediction(model, data = find_data(model), at = NULL,
  type = c("raw", "prob"), ...)

## S3 method for class 'truncreg'
prediction(model, data, at = NULL,
  calculate_se = FALSE, ...)

## S3 method for class 'zeroinfl'
prediction(model, data = find_data(model,
  parent.frame()), at = NULL, type = c("response", "count", "prob",
  "zero"), calculate_se = FALSE, ...)

prediction_summary(model, ..., level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prediction-package_+3A_model">model</code></td>
<td>
<p>A model object, perhaps returned by <code><a href="stats.html#topic+lm">lm</a></code> or <code><a href="stats.html#topic+glm">glm</a></code>.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="stats.html#topic+predict">predict</a></code> methods.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_data">data</code></td>
<td>
<p>A data.frame over which to calculate marginal effects. If missing, <code><a href="#topic+find_data">find_data</a></code> is used to specify the data frame.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_at">at</code></td>
<td>
<p>A list of one or more named vectors, specifically values at which to calculate the predictions. These are used to modify the value of <code>data</code> (see <code><a href="#topic+build_datalist">build_datalist</a></code> for details on use).</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_type">type</code></td>
<td>
<p>A character string indicating the type of marginal effects to estimate. Mostly relevant for non-linear models, where the reasonable options are &ldquo;response&rdquo; (the default) or &ldquo;link&rdquo; (i.e., on the scale of the linear predictor in a GLM). For models of class &ldquo;polr&rdquo; (from <code><a href="MASS.html#topic+polr">polr</a></code>), possible values are &ldquo;class&rdquo; or &ldquo;probs&rdquo;; both are returned.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_vcov">vcov</code></td>
<td>
<p>A matrix containing the variance-covariance matrix for estimated model coefficients, or a function to perform the estimation with <code>model</code> as its only argument.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_calculate_se">calculate_se</code></td>
<td>
<p>A logical indicating whether to calculate standard errors for observation-specific predictions and average predictions (if possible). The output will always contain a &ldquo;calculate_se&rdquo; column regardless of this value; this only controls the calculation of standard errors. Setting it to <code>FALSE</code> may improve speed.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_category">category</code></td>
<td>
<p>For multi-level or multi-category outcome models (e.g., ordered probit, multinomial logit, etc.), a value specifying which of the outcome levels should be used for the <code>"fitted"</code> column. If missing, some default is chosen automatically.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_lambda">lambda</code></td>
<td>
<p>For models of class &ldquo;glmnet&rdquo;, a value of the penalty parameter at which predictions are required.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_re.form">re.form</code></td>
<td>
<p>An argument passed forward to <code><a href="lme4.html#topic+predict.merMod">predict.merMod</a></code>.</p>
</td></tr>
<tr><td><code id="prediction-package_+3A_level">level</code></td>
<td>
<p>A numeric value specifying the confidence level for calculating p-values and confidence intervals.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is simply a wrapper around <code><a href="stats.html#topic+predict">predict</a></code> that returns a data frame containing the value of <code>data</code> and the predicted values with respect to all variables specified in <code>data</code>.
</p>
<p>Methods are currently implemented for the following object classes:
</p>

<ul>
<li> <p>&ldquo;lm&rdquo;, see <code><a href="stats.html#topic+lm">lm</a></code>
</p>
</li>
<li> <p>&ldquo;glm&rdquo;, see <code><a href="stats.html#topic+glm">glm</a></code>, <code><a href="MASS.html#topic+glm.nb">glm.nb</a></code>, <code><a href="glmx.html#topic+glmx">glmx</a></code>, <code><a href="glmx.html#topic+hetglm">hetglm</a></code>, <code><a href="brglm.html#topic+brglm">brglm</a></code>
</p>
</li>
<li> <p>&ldquo;ar&rdquo;, see <code><a href="stats.html#topic+ar">ar</a></code>
</p>
</li>
<li> <p>&ldquo;Arima&rdquo;, see <code><a href="stats.html#topic+arima">arima</a></code>
</p>
</li>
<li> <p>&ldquo;arima0&rdquo;, see <code><a href="stats.html#topic+arima0">arima0</a></code>
</p>
</li>
<li> <p>&ldquo;bigglm&rdquo;, see <code><a href="biglm.html#topic+bigglm">bigglm</a></code> (including &ldquo;ffdf&rdquo;-backed models provided by <code><a href="ffbase.html#topic+bigglm.ffdf">bigglm.ffdf</a></code>)
</p>
</li>
<li> <p>&ldquo;betareg&rdquo;, see <code><a href="betareg.html#topic+betareg">betareg</a></code>
</p>
</li>
<li> <p>&ldquo;bruto&rdquo;, see <code><a href="mda.html#topic+bruto">bruto</a></code>
</p>
</li>
<li> <p>&ldquo;clm&rdquo;, see <code><a href="ordinal.html#topic+clm">clm</a></code>
</p>
</li>
<li> <p>&ldquo;coxph&rdquo;, see <code><a href="survival.html#topic+coxph">coxph</a></code>
</p>
</li>
<li> <p>&ldquo;crch&rdquo;, see <code><a href="crch.html#topic+crch">crch</a></code>
</p>
</li>
<li> <p>&ldquo;earth&rdquo;, see <code><a href="earth.html#topic+earth">earth</a></code>
</p>
</li>
<li> <p>&ldquo;fda&rdquo;, see <code><a href="mda.html#topic+fda">fda</a></code>
</p>
</li>
<li> <p>&ldquo;Gam&rdquo;, see <code><a href="gam.html#topic+gam">gam</a></code>
</p>
</li>
<li> <p>&ldquo;gausspr&rdquo;, see <code><a href="kernlab.html#topic+gausspr">gausspr</a></code>
</p>
</li>
<li> <p>&ldquo;gee&rdquo;, see <code><a href="gee.html#topic+gee">gee</a></code>
</p>
</li>
<li> <p>&ldquo;glmnet&rdquo;, see <code><a href="glmnet.html#topic+glmnet">glmnet</a></code>
</p>
</li>
<li> <p>&ldquo;gls&rdquo;, see <code><a href="nlme.html#topic+gls">gls</a></code>
</p>
</li>
<li> <p>&ldquo;glimML&rdquo;, see <code><a href="aod.html#topic+betabin">betabin</a></code>, <code><a href="aod.html#topic+negbin">negbin</a></code>
</p>
</li>
<li> <p>&ldquo;glimQL&rdquo;, see <code><a href="aod.html#topic+quasibin">quasibin</a></code>, <code><a href="aod.html#topic+quasipois">quasipois</a></code>
</p>
</li>
<li> <p>&ldquo;hurdle&rdquo;, see <code><a href="pscl.html#topic+hurdle">hurdle</a></code>
</p>
</li>
<li> <p>&ldquo;hxlr&rdquo;, see <code><a href="crch.html#topic+hxlr">hxlr</a></code>
</p>
</li>
<li> <p>&ldquo;ivreg&rdquo;, see <code><a href="AER.html#topic+ivreg">ivreg</a></code>
</p>
</li>
<li> <p>&ldquo;knnreg&rdquo;, see <code><a href="caret.html#topic+knnreg">knnreg</a></code>
</p>
</li>
<li> <p>&ldquo;kqr&rdquo;, see <code><a href="kernlab.html#topic+kqr">kqr</a></code>
</p>
</li>
<li> <p>&ldquo;ksvm&rdquo;, see <code><a href="kernlab.html#topic+ksvm">ksvm</a></code>
</p>
</li>
<li> <p>&ldquo;lda&rdquo;, see <code><a href="MASS.html#topic+lda">lda</a></code>
</p>
</li>
<li> <p>&ldquo;lme&rdquo;, see <code><a href="nlme.html#topic+lme">lme</a></code>
</p>
</li>
<li> <p>&ldquo;loess&rdquo;, see <code><a href="stats.html#topic+loess">loess</a></code>
</p>
</li>
<li> <p>&ldquo;lqs&rdquo;, see <code><a href="MASS.html#topic+lqs">lqs</a></code>
</p>
</li>
<li> <p>&ldquo;mars&rdquo;, see <code><a href="mda.html#topic+mars">mars</a></code>
</p>
</li>
<li> <p>&ldquo;mca&rdquo;, see <code><a href="MASS.html#topic+mca">mca</a></code>
</p>
</li>
<li> <p>&ldquo;mclogit&rdquo;, see <code><a href="mclogit.html#topic+mclogit">mclogit</a></code>
</p>
</li>
<li> <p>&ldquo;mda&rdquo;, see <code><a href="mda.html#topic+mda">mda</a></code>
</p>
</li>
<li> <p>&ldquo;merMod&rdquo;, see <code><a href="lme4.html#topic+lmer">lmer</a></code>, <code><a href="lme4.html#topic+glmer">glmer</a></code>
</p>
</li>
<li> <p>&ldquo;mnp&rdquo;, see <code><a href="MNP.html#topic+mnp">mnp</a></code>
</p>
</li>
<li> <p>&ldquo;naiveBayes&rdquo;, see <code><a href="e1071.html#topic+naiveBayes">naiveBayes</a></code>
</p>
</li>
<li> <p>&ldquo;nlme&rdquo;, see <code><a href="nlme.html#topic+nlme">nlme</a></code>
</p>
</li>
<li> <p>&ldquo;nls&rdquo;, see <code><a href="stats.html#topic+nls">nls</a></code>
</p>
</li>
<li> <p>&ldquo;nnet&rdquo;, see <code><a href="nnet.html#topic+nnet">nnet</a></code>
</p>
</li>
<li> <p>&ldquo;plm&rdquo;, see <code><a href="plm.html#topic+plm">plm</a></code>
</p>
</li>
<li> <p>&ldquo;polr&rdquo;, see <code><a href="MASS.html#topic+polr">polr</a></code>
</p>
</li>
<li> <p>&ldquo;polyreg&rdquo;, see <code><a href="mda.html#topic+polyreg">polyreg</a></code>
</p>
</li>
<li> <p>&ldquo;ppr&rdquo;, see <code><a href="stats.html#topic+ppr">ppr</a></code>
</p>
</li>
<li> <p>&ldquo;princomp&rdquo;, see <code><a href="stats.html#topic+princomp">princomp</a></code>
</p>
</li>
<li> <p>&ldquo;qda&rdquo;, see <code><a href="MASS.html#topic+qda">qda</a></code>
</p>
</li>
<li> <p>&ldquo;rlm&rdquo;, see <code><a href="MASS.html#topic+rlm">rlm</a></code>
</p>
</li>
<li> <p>&ldquo;rpart&rdquo;, see <code><a href="rpart.html#topic+rpart">rpart</a></code>
</p>
</li>
<li> <p>&ldquo;rq&rdquo;, see <code><a href="quantreg.html#topic+rq">rq</a></code>
</p>
</li>
<li> <p>&ldquo;selection&rdquo;, see <code><a href="sampleSelection.html#topic+selection">selection</a></code>
</p>
</li>
<li> <p>&ldquo;speedglm&rdquo;, see <code><a href="speedglm.html#topic+speedglm">speedglm</a></code>
</p>
</li>
<li> <p>&ldquo;speedlm&rdquo;, see <code><a href="speedglm.html#topic+speedlm">speedlm</a></code>
</p>
</li>
<li> <p>&ldquo;survreg&rdquo;, see <code><a href="survival.html#topic+survreg">survreg</a></code>
</p>
</li>
<li> <p>&ldquo;svm&rdquo;, see <code><a href="e1071.html#topic+svm">svm</a></code>
</p>
</li>
<li> <p>&ldquo;svyglm&rdquo;, see <code><a href="survey.html#topic+svyglm">svyglm</a></code>
</p>
</li>
<li> <p>&ldquo;tobit&rdquo;, see <code><a href="AER.html#topic+tobit">tobit</a></code>
</p>
</li>
<li> <p>&ldquo;train&rdquo;, see <code><a href="caret.html#topic+train">train</a></code>
</p>
</li>
<li> <p>&ldquo;truncreg&rdquo;, see <code><a href="truncreg.html#topic+truncreg">truncreg</a></code>
</p>
</li>
<li> <p>&ldquo;zeroinfl&rdquo;, see <code><a href="pscl.html#topic+zeroinfl">zeroinfl</a></code>
</p>
</li></ul>

<p>Where implemented, <code>prediction</code> also returns average predictions (and the variances thereof). Variances are implemented using the delta method, as described in <a href="http://indiana.edu/~jslsoc/stata/ci_computations/spost_deltaci.pdf">http://indiana.edu/~jslsoc/stata/ci_computations/spost_deltaci.pdf</a>.
</p>


<h3>Value</h3>

<p>A data frame with class &ldquo;prediction&rdquo; that has a number of rows equal to number of rows in <code>data</code>, or a multiple thereof, if <code>!is.null(at)</code>. The return value contains <code>data</code> (possibly modified by <code>at</code> using <code><a href="#topic+build_datalist">build_datalist</a></code>), plus a column containing fitted/predicted values (<code>"fitted"</code>) and a column containing the standard errors thereof (<code>"calculate_se"</code>). Additional columns may be reported depending on the object class. The data frame also carries attributes used by <code>print</code> and <code>summary</code>, which will be lost during subsetting.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+find_data">find_data</a></code>, <code><a href="#topic+build_datalist">build_datalist</a></code>, <code><a href="#topic+mean_or_mode">mean_or_mode</a></code>, <code><a href="#topic+seq_range">seq_range</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("datasets")
x &lt;- lm(Petal.Width ~ Sepal.Length * Sepal.Width * Species, data = iris)
# prediction for every case
prediction(x)

# prediction for first case
prediction(x, iris[1,])

# basic use of 'at' argument
summary(prediction(x, at = list(Species = c("setosa", "virginica"))))

# basic use of 'at' argument
prediction(x, at = list(Sepal.Length = seq_range(iris$Sepal.Length, 5)))

# prediction at means/modes of input variables
prediction(x, at = lapply(iris, mean_or_mode))

# prediction with multi-category outcome
## Not run: 
  library("mlogit")
  data("Fishing", package = "mlogit")
  Fish &lt;- mlogit.data(Fishing, varying = c(2:9), shape = "wide", choice = "mode")
  mod &lt;- mlogit(mode ~ price + catch, data = Fish)
  prediction(mod)
  prediction(mod, category = 3)

## End(Not run)

</code></pre>

<hr>
<h2 id='seq_range'>Create a sequence over the range of a vector</h2><span id='topic+seq_range'></span>

<h3>Description</h3>

<p>Define a sequence of evenly spaced values from the minimum to the maximum of a vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seq_range(x, n = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="seq_range_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
<tr><td><code id="seq_range_+3A_n">n</code></td>
<td>
<p>An integer specifying the length of sequence (i.e., number of points across the range of <code>x</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length <code>n</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mean_or_mode">mean_or_mode</a></code>, <code><a href="#topic+build_datalist">build_datalist</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>identical(range(1:5), seq_range(1:5, n = 2))
seq_range(1:5, n = 3)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
