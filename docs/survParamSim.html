<!DOCTYPE html><html><head><title>Help for package survParamSim</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survParamSim}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#calc_hr_pi'><p>Generate hazard ratio with prediction intervals from parametric bootstrap simulation</p></a></li>
<li><a href='#calc_km_pi'><p>Generate Kaplan-Meier curves with prediction intervals from parametric bootstrap simulation</p></a></li>
<li><a href='#extract_median_surv'><p>Functions to extract prediction intervals and observed data</p></a></li>
<li><a href='#extractpi'><p>Functions to extract prediction intervals and observed data</p></a></li>
<li><a href='#extractrawsim'><p>Functions to extract raw simulated samples</p></a></li>
<li><a href='#plot_hr_pi'><p>Plot simulated HR histogram(s) overlayed with prediction intervals</p></a></li>
<li><a href='#plot_km_pi'><p>Plot Kaplan-Meier curves with prediction intervals from parametric bootstrap simulation</p></a></li>
<li><a href='#print.survparamsim.hrpi'><p>Methods for S3 objects in the package</p></a></li>
<li><a href='#surv_param_sim_pre_resampled'><p>Simulation of parametric survival model with an already-resampled dataset</p></a></li>
<li><a href='#survparamsim'><p>Simulation of parametric survival model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Parametric Survival Simulation with Parameter Uncertainty</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Perform survival simulation with parametric survival model generated from 'survreg' function in 'survival' package.
    In each simulation coefficients are resampled from variance-covariance matrix of parameter estimates to 
    capture uncertainty in model parameters.
    Prediction intervals of Kaplan-Meier estimates and hazard ratio of treatment effect can be further calculated using simulated survival data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, dplyr, forcats, ggplot2, lifecycle (&ge; 0.2.0), magrittr
(&ge; 1.5), methods, mvtnorm, purrr, rlang, survival (&ge; 2.43),
tibble, tidyr (&ge; 1.1),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, survminer, testthat (&ge; 2.1.0), vdiffr,
withr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/yoshidk6/survParamSim">https://github.com/yoshidk6/survParamSim</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yoshidk6/survParamSim/issues">https://github.com/yoshidk6/survParamSim/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-02 19:23:07 UTC; yoshidk6</td>
</tr>
<tr>
<td>Author:</td>
<td>Kenta Yoshida <a href="https://orcid.org/0000-0003-4967-3831"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Laurent Claret [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kenta Yoshida &lt;yoshida.kenta.6@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-03 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='calc_hr_pi'>Generate hazard ratio with prediction intervals from parametric bootstrap simulation</h2><span id='topic+calc_hr_pi'></span>

<h3>Description</h3>

<p>Generate hazard ratio with prediction intervals from parametric bootstrap simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_hr_pi(
  sim,
  trt,
  group = NULL,
  pi.range = 0.95,
  calc.obs = TRUE,
  trt.assign = c("default", "reverse")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_hr_pi_+3A_sim">sim</code></td>
<td>
<p>A <code>survparamsim</code> class object generated by <code><a href="#topic+surv_param_sim">surv_param_sim()</a></code> function.</p>
</td></tr>
<tr><td><code id="calc_hr_pi_+3A_trt">trt</code></td>
<td>
<p>A string to specify which column define treatment status to calculate HR.</p>
</td></tr>
<tr><td><code id="calc_hr_pi_+3A_group">group</code></td>
<td>
<p>Optional string(s) to specify grouping variable(s).
You will have faceted histograms for these variables in <code><a href="#topic+plot_hr_pi">plot_hr_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="calc_hr_pi_+3A_pi.range">pi.range</code></td>
<td>
<p>Prediction interval for simulated HR.</p>
</td></tr>
<tr><td><code id="calc_hr_pi_+3A_calc.obs">calc.obs</code></td>
<td>
<p>A logical to specify whether to calculate HR for the observed data.
Need be set as FALSE if survival information in the <code>newdata</code> is dummy.</p>
</td></tr>
<tr><td><code id="calc_hr_pi_+3A_trt.assign">trt.assign</code></td>
<td>
<p>Specify which of the categories of <code>trt</code> need to be considered as control group.
See details below if you have more than two categories.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If your <code>trt</code> has more than two categories/levels and want to specify which one to use as a
reference group, you can convert the column into a factor in the <code>newdata</code> input for
<code><a href="#topic+surv_param_sim">surv_param_sim()</a></code>. The first level will be used as a reference group.
</p>

<hr>
<h2 id='calc_km_pi'>Generate Kaplan-Meier curves with prediction intervals from parametric bootstrap simulation</h2><span id='topic+calc_km_pi'></span>

<h3>Description</h3>

<p>Generate Kaplan-Meier curves with prediction intervals from parametric bootstrap simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_km_pi(
  sim,
  trt = NULL,
  group = NULL,
  pi.range = 0.95,
  calc.obs = TRUE,
  simtimelast = NULL,
  trt.assign = c("default", "reverse")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_km_pi_+3A_sim">sim</code></td>
<td>
<p>A <code>survparamsim</code> class object generated by <code><a href="#topic+surv_param_sim">surv_param_sim()</a></code> function.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_trt">trt</code></td>
<td>
<p>An optional string to specify which column define treatment status.
You will have survival curves with different colors in <code><a href="#topic+plot_km_pi">plot_km_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_group">group</code></td>
<td>
<p>Optional string(s) to specify grouping variable(s).
You will have faceted survival curves for these variables in <code><a href="#topic+plot_km_pi">plot_km_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_pi.range">pi.range</code></td>
<td>
<p>Prediction interval for simulated survival curves.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_calc.obs">calc.obs</code></td>
<td>
<p>A logical to specify whether KM estimates will be performed
for the observed data. Need be set as FALSE if survival information in the <code>newdata</code> is dummy.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_simtimelast">simtimelast</code></td>
<td>
<p>An optional numeric to specify last simulation time for survival curve.
If NULL (default), the last observation time in the <code>newdata</code> will be used.</p>
</td></tr>
<tr><td><code id="calc_km_pi_+3A_trt.assign">trt.assign</code></td>
<td>
<p>Specify which of the categories of <code>trt</code> need to be considered as control group.
See details below if you have more than two categories. Only applicable if you will use
<code><a href="#topic+extract_medsurv_delta_pi">extract_medsurv_delta_pi()</a></code> to extract delta of median survival times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If your <code>trt</code> has more than two categories/levels and want to specify which one to use as a
reference group, you can convert the column into a factor in the <code>newdata</code> input for
<code><a href="#topic+surv_param_sim">surv_param_sim()</a></code>. The first level will be used as a reference group.
</p>

<hr>
<h2 id='extract_median_surv'>Functions to extract prediction intervals and observed data</h2><span id='topic+extract_median_surv'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_median_surv(km.pi, outtype = c("long", "wide"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_median_surv_+3A_km.pi">km.pi</code></td>
<td>
<p>A return object from <code><a href="#topic+calc_km_pi">calc_km_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="extract_median_surv_+3A_outtype">outtype</code></td>
<td>
<p>Specifies whether output will be in long or wide format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+extract_median_surv">extract_median_surv()</a></code> was renamed to <code><a href="#topic+extract_medsurv_pi">extract_medsurv_pi()</a></code> for function name consistency.
</p>
<p><code><a href="#topic+extract_median_surv">extract_median_surv()</a></code> extracts prediction intervals of
median survival times and and the corresponding observed values.
</p>

<hr>
<h2 id='extractpi'>Functions to extract prediction intervals and observed data</h2><span id='topic+extractpi'></span><span id='topic+extract_hr_pi'></span><span id='topic+extract_km_pi'></span><span id='topic+extract_medsurv_pi'></span><span id='topic+extract_medsurv_delta_pi'></span>

<h3>Description</h3>

<p>Functions to extract prediction intervals and observed data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_hr_pi(hr.pi, outtype = c("long", "wide"))

extract_km_pi(km.pi, trunc.sim.censor = TRUE)

extract_medsurv_pi(km.pi, outtype = c("long", "wide"))

extract_medsurv_delta_pi(km.pi, outtype = c("long", "wide"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractpi_+3A_hr.pi">hr.pi</code></td>
<td>
<p>a return object from <code><a href="#topic+calc_hr_pi">calc_hr_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="extractpi_+3A_outtype">outtype</code></td>
<td>
<p>Specifies whether output will be in long or wide format.</p>
</td></tr>
<tr><td><code id="extractpi_+3A_km.pi">km.pi</code></td>
<td>
<p>A return object from <code><a href="#topic+calc_km_pi">calc_km_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="extractpi_+3A_trunc.sim.censor">trunc.sim.censor</code></td>
<td>
<p>A logical specifying whether to truncate the simulated
curve at the last time of <code>censor.dur</code> specified in <code><a href="#topic+surv_param_sim">surv_param_sim()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+extract_hr_pi">extract_hr_pi()</a></code> extracts prediction intervals of simulated
hazard ratios and the corresponding observed values.
</p>
<p><code><a href="#topic+extract_km_pi">extract_km_pi()</a></code> extracts prediction intervals of simulated Kaplan-Meier curves.
</p>
<p><code><a href="#topic+extract_medsurv_pi">extract_medsurv_pi()</a></code> extracts prediction intervals of
median survival times and and the corresponding observed values.
</p>
<p><code><a href="#topic+extract_medsurv_delta_pi">extract_medsurv_delta_pi()</a></code> extracts prediction intervals of
delta of median survival times between treatment groups
</p>

<hr>
<h2 id='extractrawsim'>Functions to extract raw simulated samples</h2><span id='topic+extractrawsim'></span><span id='topic+extract_sim'></span><span id='topic+extract_hr'></span><span id='topic+extract_km_obs'></span><span id='topic+extract_medsurv'></span><span id='topic+extract_medsurv_delta'></span>

<h3>Description</h3>

<p>Functions to extract raw simulated samples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_sim(sim)

extract_hr(hr.pi)

extract_km_obs(km.pi)

extract_medsurv(km.pi)

extract_medsurv_delta(km.pi)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractrawsim_+3A_sim">sim</code></td>
<td>
<p>A <code>survparamsim</code> class object generated by <code><a href="#topic+surv_param_sim">surv_param_sim()</a></code> function.</p>
</td></tr>
<tr><td><code id="extractrawsim_+3A_hr.pi">hr.pi</code></td>
<td>
<p>a return object from <code><a href="#topic+calc_hr_pi">calc_hr_pi()</a></code> function.</p>
</td></tr>
<tr><td><code id="extractrawsim_+3A_km.pi">km.pi</code></td>
<td>
<p>A return object from <code><a href="#topic+calc_km_pi">calc_km_pi()</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+extract_sim">extract_sim()</a></code> extracts raw survival time &amp; event status for all simulated subjects.
</p>
<p><code><a href="#topic+extract_hr">extract_hr()</a></code> extracts simulated HRs for all repeated simulations.
It also returns p values for Cox regression fits, one for each group
based on Wald test and another for the overall significance of the
coefficient based on logrank test. The latter has the same values
across treatment groups when &gt;2 levels in treatment
</p>
<p><code><a href="#topic+extract_km_obs">extract_km_obs()</a></code> extracts observed Kaplan-Meier curves.
</p>
<p><code><a href="#topic+extract_medsurv">extract_medsurv()</a></code> extracts simulated median survival times for all repeated simulations
</p>
<p><code><a href="#topic+extract_medsurv_delta">extract_medsurv_delta()</a></code> extracts delta of median survival times between treatment groups
</p>

<hr>
<h2 id='plot_hr_pi'>Plot simulated HR histogram(s) overlayed with prediction intervals</h2><span id='topic+plot_hr_pi'></span>

<h3>Description</h3>

<p>Plot simulated HR histogram(s) overlayed with prediction intervals
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hr_pi(hr.pi, show.obs = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_hr_pi_+3A_hr.pi">hr.pi</code></td>
<td>
<p>a return object from <code><a href="#topic+calc_hr_pi">calc_hr_pi</a></code> function.</p>
</td></tr>
<tr><td><code id="plot_hr_pi_+3A_show.obs">show.obs</code></td>
<td>
<p>A logical specifying whether to show observed HR on the plot.
This will have no effect if <code>calc.obs</code> was set to <code>FALSE</code> in <code><a href="#topic+calc_hr_pi">calc_hr_pi</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='plot_km_pi'>Plot Kaplan-Meier curves with prediction intervals from parametric bootstrap simulation</h2><span id='topic+plot_km_pi'></span>

<h3>Description</h3>

<p>Need to think about how to apply this for subgroups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_km_pi(km.pi, show.obs = TRUE, trunc.sim.censor = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_km_pi_+3A_km.pi">km.pi</code></td>
<td>
<p>an output from <code><a href="#topic+calc_km_pi">calc_km_pi</a></code> function.</p>
</td></tr>
<tr><td><code id="plot_km_pi_+3A_show.obs">show.obs</code></td>
<td>
<p>A logical specifying whether to show observed K-M curve on the plot.
This will have no effect if <code>calc.obs</code> was set to <code>FALSE</code> in <code><a href="#topic+calc_km_pi">calc_km_pi</a></code>.</p>
</td></tr>
<tr><td><code id="plot_km_pi_+3A_trunc.sim.censor">trunc.sim.censor</code></td>
<td>
<p>A logical specifying whether to truncate the simulated
curve at the last time of <code>censor.dur</code> specified in <code><a href="#topic+surv_param_sim">surv_param_sim</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='print.survparamsim.hrpi'>Methods for S3 objects in the package</h2><span id='topic+print.survparamsim.hrpi'></span><span id='topic+summary.survparamsim.hrpi'></span><span id='topic+print.survparamsim.kmpi'></span><span id='topic+summary.survparamsim.kmpi'></span><span id='topic+survparamsim-methods'></span><span id='topic+print.survparamsim'></span>

<h3>Description</h3>

<p>Methods for S3 objects in the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survparamsim.hrpi'
print(x, ...)

## S3 method for class 'survparamsim.hrpi'
summary(object, ...)

## S3 method for class 'survparamsim.kmpi'
print(x, ...)

## S3 method for class 'survparamsim.kmpi'
summary(object, ...)

## S3 method for class 'survparamsim'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.survparamsim.hrpi_+3A_x">x</code></td>
<td>
<p>An object of the corresponding class</p>
</td></tr>
<tr><td><code id="print.survparamsim.hrpi_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to methods.</p>
</td></tr>
<tr><td><code id="print.survparamsim.hrpi_+3A_object">object</code></td>
<td>
<p>An object of the corresponding class</p>
</td></tr>
</table>

<hr>
<h2 id='surv_param_sim_pre_resampled'>Simulation of parametric survival model with an already-resampled dataset</h2><span id='topic+surv_param_sim_pre_resampled'></span>

<h3>Description</h3>

<p>Simulation of parametric survival model with an already-resampled dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surv_param_sim_pre_resampled(
  object,
  newdata.resampled,
  newdata.orig = NULL,
  censor.dur = NULL,
  coef.var = TRUE,
  na.warning = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_object">object</code></td>
<td>
<p>A <code>survreg</code> class object. Currently accept exponential,
lognormal, weibull, loglogistic, and gaussian distributions.</p>
</td></tr>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_newdata.resampled">newdata.resampled</code></td>
<td>
<p>A required input, the already resampled dataset for simulation.
This dataset must have: (a) <code>rep</code> variable indicating the #simulation groups, and (b) the same number of subjects per each <code>rep</code></p>
</td></tr>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_newdata.orig">newdata.orig</code></td>
<td>
<p>An optional input needed for calculating KM and HR for the observed data.</p>
</td></tr>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_censor.dur">censor.dur</code></td>
<td>
<p>A two elements vector specifying duration of events
censoring. Censoring time will be calculated with uniform distribution
between two numbers. No censoring will be applied if NULL is provided.</p>
</td></tr>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_coef.var">coef.var</code></td>
<td>
<p>Boolean specifying whether parametric bootstrap are
performed on survival model coefficients, based on variance-covariance
matrix. If FALSE, prediction interval only reflects inherent variability
from survival events.</p>
</td></tr>
<tr><td><code id="surv_param_sim_pre_resampled_+3A_na.warning">na.warning</code></td>
<td>
<p>Boolean specifying whether warning will be shown if
<code>newdata</code> contain subjects with missing model variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+surv_param_sim">surv_param_sim()</a></code> for additional details.
</p>


<h3>Value</h3>

<p>A <code>survparamsim</code> object that contains the original <code>survreg</code> class
object, newdata, and a data frame for predicted survival profiles.
</p>

<hr>
<h2 id='survparamsim'>Simulation of parametric survival model</h2><span id='topic+survparamsim'></span><span id='topic+surv_param_sim'></span><span id='topic+surv_param_sim_resample'></span>

<h3>Description</h3>

<p>The main function(s) to generate predicted survival using a model object
generated with <code><a href="survival.html#topic+survreg">survival::survreg()</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surv_param_sim(
  object,
  newdata,
  n.rep = 1000,
  censor.dur = NULL,
  coef.var = TRUE,
  na.warning = TRUE
)

surv_param_sim_resample(
  object,
  newdata,
  n.rep = 1000,
  censor.dur = NULL,
  n.resample,
  strat.resample = NULL,
  coef.var = TRUE,
  na.warning = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survparamsim_+3A_object">object</code></td>
<td>
<p>A <code>survreg</code> class object. Currently accept exponential,
lognormal, weibull, loglogistic, and gaussian distributions.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_newdata">newdata</code></td>
<td>
<p>A required data frame for simulation that contain covariates in
the survival model. It is required even if this is the same as the one used
for <a href="survival.html#topic+survreg">survival::survreg</a> function.
</p>
<p>It also has to contain columns for survival information. These can be used
in <code><a href="#topic+plot_km_pi">plot_km_pi()</a></code> and <code><a href="#topic+plot_hr_pi">plot_hr_pi()</a></code> function as
observed data. Survival information can be dummy data, but time need to be
long enough so that simulated KM plot will be long enough for
<code><a href="#topic+plot_km_pi">plot_km_pi()</a></code> to draw simulated survival curves.
</p>
<p>Subjects with NA for covariates in <code>survreg</code> model will be removed from
the simulation and subsequent plotting of observed data.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_n.rep">n.rep</code></td>
<td>
<p>An integer defining numbers of parametric bootstrap runs</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_censor.dur">censor.dur</code></td>
<td>
<p>A two elements vector specifying duration of events
censoring. Censoring time will be calculated with uniform distribution
between two numbers. No censoring will be applied if NULL is provided.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_coef.var">coef.var</code></td>
<td>
<p>Boolean specifying whether parametric bootstrap are
performed on survival model coefficients, based on variance-covariance
matrix. If FALSE, prediction interval only reflects inherent variability
from survival events.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_na.warning">na.warning</code></td>
<td>
<p>Boolean specifying whether warning will be shown if
<code>newdata</code> contain subjects with missing model variables.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_n.resample">n.resample</code></td>
<td>
<p>Number of subjects for resampled simulations.
If <code>strat.resample</code> is provided, this needs to be a vector of the length
equal to the number of categories in the stratification variable.</p>
</td></tr>
<tr><td><code id="survparamsim_+3A_strat.resample">strat.resample</code></td>
<td>
<p>String specifying stratification variable for
resampling. Currently only one variable is allowed. If you need more than one,
create a new variable e.g. by <code><a href="base.html#topic+interaction">base::interaction()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+surv_param_sim">surv_param_sim()</a></code> returns simulation using the provided subject
in <code>newdata</code> as it is, while <code><a href="#topic+surv_param_sim_resample">surv_param_sim_resample</a></code> perform
simulation based on resampled subjects from the dataset. The latter allows
more flexibility in terms of simulating future trials with different number
of subjects.
Note that with <code><a href="#topic+surv_param_sim_resample">surv_param_sim_resample()</a></code>, there is no
automatic safeguard to ensure certain number of subjects in each subgroup
or treatment groups, which may result in inconsistent number of subjects per
simulation or leads to Cox regression instability due to small N. Consider
using stratified resampling in this case.
</p>
<p>Currently we have not tested whether this function work for a <code>survreg</code> model
with stratification variables.
</p>


<h3>Value</h3>

<p>A <code>survparamsim</code> object that contains the original <code>survreg</code> class
object, newdata, and a data frame for predicted survival profiles with the
following columns:
</p>
<ul>
<li> <p><strong>time</strong>: predicted event or censor time
</p>
</li>
<li> <p><strong>event</strong>: event status, 0=censored, 1=event
</p>
</li>
<li> <p><strong>rep</strong>: ID for parametric bootstrap runs
</p>
</li>
<li> <p><strong>subj</strong>: ID for subjects in newdata (currently
original ID is not retained and subj is sequentially assigned
as 1:nrow(newdata))
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(survival)

fit.lung &lt;- survreg(Surv(time, status) ~ sex + ph.ecog, data = lung)

object &lt;- fit.lung
n.rep  &lt;-  30
newdata &lt;-
  tibble::as_tibble(dplyr::select(lung, time, status, sex, ph.ecog)) %&gt;%
  tidyr::drop_na()
censor.dur &lt;- c(200, 1100)

sim &lt;- surv_param_sim(object, newdata, n.rep, censor.dur)



</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
