<!DOCTYPE html><html lang="en"><head><title>Help for package sankey</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sankey}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#sankey'><p>Sankey Diagrams</p></a></li>
<li><a href='#make_sankey'><p>Create an object that describes a sankey plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Illustrate the Flow of Information or Material</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Author:</td>
<td>G치bor Cs치rdi, January Weiner</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>G치bor Cs치rdi &lt;csardi.gabor@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Plots that illustrate the flow of information or material.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/gaborcsardi/sankey#readme">https://github.com/gaborcsardi/sankey#readme</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gaborcsardi/sankey/issues">https://github.com/gaborcsardi/sankey/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, mockery, testthat</td>
</tr>
<tr>
<td>Imports:</td>
<td>simplegraph, utils, graphics, grDevices</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-10-22 14:30:14 UTC; gaborcsardi</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-10-22 16:45:58 UTC</td>
</tr>
</table>
<hr>
<h2 id='sankey'>Sankey Diagrams</h2><span id='topic+sankey'></span><span id='topic+sankey-package'></span><span id='topic+plot.sankey'></span>

<h3>Description</h3>

<p>Sankey plots illustrate the flow of information or material.
</p>
<p>Draw a sankey plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sankey'
plot(x, ...)

sankey(x, mar = c(0, 5, 0, 5) + 0.2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sankey_+3A_x">x</code></td>
<td>
<p>The plot, created via <code><a href="#topic+make_sankey">make_sankey</a></code>.</p>
</td></tr>
<tr><td><code id="sankey_+3A_...">...</code></td>
<td>
<p>Additional arguments, ignored currently.</p>
</td></tr>
<tr><td><code id="sankey_+3A_mar">mar</code></td>
<td>
<p>Margin of the plot, see <code>mar</code> in the <code>par</code>
manual.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='make_sankey'>Create an object that describes a sankey plot</h2><span id='topic+make_sankey'></span>

<h3>Description</h3>

<p>Create an object that describes a sankey plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_sankey(nodes = NULL, edges, y = c("optimal", "simple"),
  break_edges = FALSE, gravity = c("center", "top", "bottom"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_sankey_+3A_nodes">nodes</code></td>
<td>
<p>A data frame of nodes on the plot, and possibly
their visual style. The first column must be the ids of the
nodes. If this argument is <code>NULL</code>, then the ids of the
nodes are determined from <code>edges</code>.</p>
</td></tr>
<tr><td><code id="make_sankey_+3A_edges">edges</code></td>
<td>
<p>A data frame of the edges. The first two columns
must be node ids, and they define the edges. The rest of the columns
contain the visual style of the edges.</p>
</td></tr>
<tr><td><code id="make_sankey_+3A_y">y</code></td>
<td>
<p>How to calculate vertical coordinates of nodes, if they
are not given in the input. <code>optimal</code> tries to minimize edge
crossings, <code>simple</code> simply packs nodes in the order they are
given, from bottom to top.</p>
</td></tr>
<tr><td><code id="make_sankey_+3A_break_edges">break_edges</code></td>
<td>
<p>Whether to plot each edge as two segments,
or a single one. Sometimes two segment plots look better.</p>
</td></tr>
<tr><td><code id="make_sankey_+3A_gravity">gravity</code></td>
<td>
<p>Whether to push the nodes to the top, to the bottom
or to the center, within a column.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The node and edges data frames may contain columns that specify
how the plot is created. All parameters have reasonable default
values.
</p>
<p>Current list of graphical parameters for nodes:
</p>

<ul>
<li> <p><code>col</code> Node color.
</p>
</li>
<li> <p><code>size</code> Node size.
</p>
</li>
<li> <p><code>x</code> Horizontal coordinates of the center of the node.
</p>
</li>
<li> <p><code>y</code> Vertical coordinates of the center of the node.
</p>
</li>
<li> <p><code>shape</code> Shape of the node. Possible values:
<code>rectangle</code>, <code>point</code>, <code>invisible</code>.
</p>
</li>
<li> <p><code>lty</code> Lite type, see <code>par</code>.
</p>
</li>
<li> <p><code>srt</code> How to rotate the label, see <code>par</code>.
</p>
</li>
<li> <p><code>textcol</code> Label color.
</p>
</li>
<li> <p><code>label</code> Label text. Defaults to node name.
</p>
</li>
<li> <p><code>adjx</code> Horizontal adjustment of the label. See
<code>adj</code> in the <code>par</code> manual.
</p>
</li>
<li> <p><code>adjy</code> Vertical adjustment of the label. See
<code>adj</code> in the <code>par</code> manual.
</p>
</li>
<li> <p><code>boxw</code> Width of the node boxes.
</p>
</li>
<li> <p><code>cex</code> Label size multiplication factor.
</p>
</li>
<li> <p><code>top</code> Vertical coordinate of the top of the node.
</p>
</li>
<li> <p><code>center</code> Vertical coordinate of the center of the node.
</p>
</li>
<li> <p><code>bottom</code> Vertical coordinate of the bottom of the node.
</p>
</li>
<li> <p><code>pos</code> Position of the text label, see <code>par</code>.
</p>
</li>
<li> <p><code>textx</code> Horizontal position of the text label.
</p>
</li>
<li> <p><code>texty</code> Vertical position of the text label.
</p>
</li></ul>

<p>Current list of graphical parameters for edges:
</p>

<ul>
<li> <p><code>colorstyle</code> Whether the to use a solid color (<code>col</code>),
or <code>gradient</code> to plot the edges. The color of a gradient
edges is between the colors of the nodes.
</p>
</li>
<li> <p><code>curvestyle</code> Edge style, <code>sin</code> for sinusoid curves,
<code>line</code> for straight lines.
</p>
</li>
<li> <p><code>col</code> Edge color, for edges with solid colors.
</p>
</li>
<li> <p><code>weight</code> Edge weight. Determines the width of the edges.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>sankey</code> object that can be plotted via the
<code><a href="#topic+sankey">sankey</a></code> function.x
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Function calls in the pkgsnap package:
edges &lt;- read.table(stringsAsFactors = FALSE, textConnection(
"                get_deps          get_description
                 get_deps               parse_deps
                 get_deps                     %||%
                 get_deps            drop_internal
          get_description        pkg_from_filename
               parse_deps                 str_trim
                cran_file             get_pkg_type
                cran_file          r_minor_version
            download_urls split_pkg_names_versions
            download_urls                cran_file
             pkg_download               dir_exists
             pkg_download            download_urls
             pkg_download        filename_from_url
             pkg_download             try_download
                  restore             pkg_download
                  restore        drop_missing_deps
                  restore            install_order
                  restore                 get_deps
 split_pkg_names_versions               data_frame
"))
pkgsnap_sankey &lt;- make_sankey(edges = edges)
sankey(pkgsnap_sankey)

## Some customization
nodes &lt;- data.frame(
  stringsAsFactors = FALSE,
  id = c("snap", sort(unique(c(edges[,1], edges[,2]))))
)
nodes$col &lt;- ifelse(nodes$id %in% c("snap", "restore"), "orange", "#2ca25f")
edges$colorstyle &lt;- "gradient"

sankey(make_sankey(nodes, edges))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
