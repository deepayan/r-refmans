<!DOCTYPE html><html lang="en-US"><head><title>Help for package formulops</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {formulops}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#formula_side'><p>Extract formula parts</p></a></li>
<li><a href='#formula.substituting_formula'><p>Convert a substituting_formula object into a regular formula.</p></a></li>
<li><a href='#modify_formula'><p>Modify a formula by finding some part of it and replacing it with a new</p>
value.</a></li>
<li><a href='#op_formula'><p>Perform a mathematical operation on two formula</p></a></li>
<li><a href='#simplify_parens'><p>Remove extraneous parentheses from a formula.</p></a></li>
<li><a href='#substituting_formula'><p>A substituting formula helps clarify a formula where the parameters are more</p>
simply described in separate formulae.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Mathematical Operations on R Formula</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Perform mathematical operations on R formula (add, subtract, multiply, etc.) and substitute parts of formula.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/humanpred/formulops">https://github.com/humanpred/formulops</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/humanpred/formulops/issues">https://github.com/humanpred/formulops/issues</a></td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-22 18:47:49 UTC; bill</td>
</tr>
<tr>
<td>Author:</td>
<td>Bill Denney <a href="https://orcid.org/0000-0002-5759-428X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bill Denney &lt;wdenney@humanpredictions.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-22 19:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='formula_side'>Extract formula parts</h2><span id='topic+formula_side'></span><span id='topic+get_lhs'></span><span id='topic+get_rhs'></span>

<h3>Description</h3>

<p>Extract formula parts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_lhs(x)

get_rhs(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formula_side_+3A_x">x</code></td>
<td>
<p>A formula (or something that can be coerced to a formula) to extract
a part from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The requested part of the formula as a name or call or <code>NULL</code> if
it does not exist.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>get_lhs()</code>: Extract the left hand side (NULL for one-sided
formula).
</p>
</li>
<li> <p><code>get_rhs()</code>: Extract the right hand side.
</p>
</li></ul>

<hr>
<h2 id='formula.substituting_formula'>Convert a substituting_formula object into a regular formula.</h2><span id='topic+formula.substituting_formula'></span>

<h3>Description</h3>

<p>Convert a substituting_formula object into a regular formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'substituting_formula'
formula(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formula.substituting_formula_+3A_x">x</code></td>
<td>
<p>the substituting_formula object</p>
</td></tr>
<tr><td><code id="formula.substituting_formula_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formula with values substituted.
</p>

<hr>
<h2 id='modify_formula'>Modify a formula by finding some part of it and replacing it with a new
value.</h2><span id='topic+modify_formula'></span>

<h3>Description</h3>

<p>Modify a formula by finding some part of it and replacing it with a new
value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modify_formula(formula, find, replace, add_parens = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modify_formula_+3A_formula">formula</code></td>
<td>
<p>The formula to modify (may also be a call)</p>
</td></tr>
<tr><td><code id="modify_formula_+3A_find">find</code></td>
<td>
<p>A call or name (or list thereof) to search for within the formula</p>
</td></tr>
<tr><td><code id="modify_formula_+3A_replace">replace</code></td>
<td>
<p>A call or name (or list thereof) to replace the <code>find</code>
values</p>
</td></tr>
<tr><td><code id="modify_formula_+3A_add_parens">add_parens</code></td>
<td>
<p>Add parentheses if <code>replace</code> is not a name or if it is
not already something in parentheses?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Replacement occurs at the first match, so if the replacement list
would modify something in the find list, that change will not occur (make
two calls to the function for that effect).  See the &quot;Replacement is not
sequential&quot; examples below.
</p>
<p>A special call can be used to expand a formula.  If an expansion of
arguments is desired to change a single function argument to multiple
arguments, 'formulops_expand()' can be used.  (See the examples.)
</p>


<h3>Value</h3>

<p><code>formula</code> modified
</p>


<h3>Examples</h3>

<pre><code class='language-R'>modify_formula(a~b, find=quote(a), replace=quote(c))
modify_formula(a~b, find=quote(a), replace=quote(c+d))
modify_formula(a~b/c, find=quote(b/c), replace=quote(d))
# Replacement is not sequential
modify_formula(a~b/c, find=list(quote(b/c), quote(d)), replace=list(quote(d), quote(e)))
modify_formula(a~b/c+d, find=list(quote(b/c), quote(d)), replace=list(quote(d), quote(e)))
# Expanding arguments to functions is possible
modify_formula(a~b(c), find=quote(c), replace=quote(formulops_expand(d, e)))
</code></pre>

<hr>
<h2 id='op_formula'>Perform a mathematical operation on two formula</h2><span id='topic+op_formula'></span><span id='topic+multiply_formula'></span><span id='topic+divide_formula'></span><span id='topic+add_formula'></span><span id='topic+subtract_formula'></span><span id='topic+Ops.formula'></span><span id='topic+Math.formula'></span>

<h3>Description</h3>

<p>Perform a mathematical operation on two formula
</p>


<h3>Usage</h3>

<pre><code class='language-R'>op_formula(op, e1, e2)

multiply_formula(e1, e2)

divide_formula(e1, e2)

add_formula(e1, e2)

subtract_formula(e1, e2)

## S3 method for class 'formula'
Ops(e1, e2)

## S3 method for class 'formula'
Math(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="op_formula_+3A_op">op</code></td>
<td>
<p>The operation to perform either as a name or something that can be
coerced into a name.</p>
</td></tr>
<tr><td><code id="op_formula_+3A_e1">e1</code>, <code id="op_formula_+3A_e2">e2</code>, <code id="op_formula_+3A_x">x</code></td>
<td>
<p>The formulae to operate on</p>
</td></tr>
<tr><td><code id="op_formula_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method for combination depends if the two formula are one- or
two-sided.
</p>
<p>If both formula are one-sided, the right hand side (RHS) of both are added
together with additional parentheses added, if parentheses appear to be
needed.  If both formula are two-sided, the left hand side (LHS) and RHS are
separately added.  If one formula is one-sided and the other is two-sided,
the LHS is selected from the two-sided formula and the RHS follows rules as
though two one-sided formula were added.
</p>
<p><code>multiply_formula</code> Multiply two formula (identical to <code>(a~b) * (c~d)</code>
</p>
<p><code>divide_formula</code> Divide two formula (identical to <code>(a~b) / (c~d)</code>
</p>
<p><code>add_formula</code> Add two formula (identical to <code>(a~b) + (c~d)</code>
</p>
<p><code>subtract_formula</code> Multiply two formula (identical to <code>(a~b) - (c~d)</code>
</p>
<p><code>Ops.formula</code> Supports generic binary operators and a couple of
unary operators (see ?Ops).
</p>
<p><code>Math.formula</code> Supports generic unary operators (see ?Math).
</p>


<h3>Value</h3>

<p><code>e1</code> and <code>e2</code> combined by the operation with the
environment from <code>e1</code>.  See Details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>op_formula("+", a~b, c~d)
op_formula("+", a~b, ~d)
op_formula("+", ~b, c~d)
op_formula("+", ~b, ~d)
op_formula("-", a~b)
op_formula("-", -a~b) # Dumb, but accurate
op_formula("-", -a~b, c~-d) # Dumb, but accurate

log(a~b)
</code></pre>

<hr>
<h2 id='simplify_parens'>Remove extraneous parentheses from a formula.</h2><span id='topic+simplify_parens'></span>

<h3>Description</h3>

<p>Remove extraneous parentheses from a formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simplify_parens(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simplify_parens_+3A_x">x</code></td>
<td>
<p>The formula (or call) to simplify</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The simplified formula
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simplify_parens(((a))~((b+c)))
</code></pre>

<hr>
<h2 id='substituting_formula'>A substituting formula helps clarify a formula where the parameters are more
simply described in separate formulae.</h2><span id='topic+substituting_formula'></span><span id='topic+as_substituting_formula'></span>

<h3>Description</h3>

<p>A substituting formula helps clarify a formula where the parameters are more
simply described in separate formulae.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>substituting_formula(x, ...)

as_substituting_formula(x, substitutions)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="substituting_formula_+3A_x">x</code></td>
<td>
<p>The base formula</p>
</td></tr>
<tr><td><code id="substituting_formula_+3A_...">...</code></td>
<td>
<p>Supporting formula of the form <code>x1~x2+x3*x4...</code></p>
</td></tr>
<tr><td><code id="substituting_formula_+3A_substitutions">substitutions</code></td>
<td>
<p>A list of supporting formula.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Formula are substituted in order.  Substitutions may not have the
same left hand side.
</p>


<h3>Value</h3>

<p>A <code>substituting_formula</code> object which may be coerced into a
single formula with an <code>as.formula()</code> method or printed as a list of
formulae.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>as_substituting_formula()</code>: Generate and check substituting_formula
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>foo &lt;- substituting_formula(y~x1+x2, x1~x3*x4, x2~x5/x6+x7)
as.formula(foo)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
