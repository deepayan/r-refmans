<!DOCTYPE html><html><head><title>Help for package ttservice</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ttservice}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggregate_cells'><p>Aggregate cells</p></a></li>
<li><a href='#bind_rows'><p>Efficiently bind multiple data frames by row and column</p></a></li>
<li><a href='#join_features'><p>join_features</p></a></li>
<li><a href='#plot_ly'><p>Initiate a plotly visualization</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Service for Tidy Transcriptomics Software Suite</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>It provides generic methods that are used by more than one package, avoiding conflicts. This package will be imported by 'tidySingleCellExperiment' and 'tidyseurat'. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, Matrix, plotly</td>
</tr>
<tr>
<td>Suggests:</td>
<td>methods</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-01 03:32:59 UTC; mangiola.s</td>
</tr>
<tr>
<td>Author:</td>
<td>Stefano Mangiola [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stefano Mangiola &lt;mangiolastefano@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-01 05:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggregate_cells'>Aggregate cells</h2><span id='topic+aggregate_cells'></span>

<h3>Description</h3>

<p>Combine cells into groups based on shared variables and aggregate feature counts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggregate_cells(
  .data,
  .sample = NULL,
  slot = "data",
  assays = NULL,
  aggregation_function = Matrix::rowSums,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggregate_cells_+3A_.data">.data</code></td>
<td>
<p>A tidySingleCellExperiment object</p>
</td></tr>
<tr><td><code id="aggregate_cells_+3A_.sample">.sample</code></td>
<td>
<p>A vector of variables by which cells are aggregated</p>
</td></tr>
<tr><td><code id="aggregate_cells_+3A_slot">slot</code></td>
<td>
<p>The slot to which the function is applied</p>
</td></tr>
<tr><td><code id="aggregate_cells_+3A_assays">assays</code></td>
<td>
<p>The assay to which the function is applied</p>
</td></tr>
<tr><td><code id="aggregate_cells_+3A_aggregation_function">aggregation_function</code></td>
<td>
<p>The method of cell-feature value aggregation</p>
</td></tr>
<tr><td><code id="aggregate_cells_+3A_...">...</code></td>
<td>
<p>Used for future extendibility</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
print("pbmc_small |&gt; aggregate_cells(c(groups, ident), assays = \"counts\")")

</code></pre>

<hr>
<h2 id='bind_rows'>Efficiently bind multiple data frames by row and column</h2><span id='topic+bind_rows'></span><span id='topic+bind_cols'></span>

<h3>Description</h3>

<p>This is an efficient implementation of the common pattern of
'do.call(rbind, dfs)' or 'do.call(cbind, dfs)' for binding many
data frames into one.
</p>
<p>This is an efficient implementation of the common pattern of
'do.call(rbind, dfs)' or 'do.call(cbind, dfs)' for binding many
data frames into one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bind_rows(..., .id = NULL, add.cell.ids = NULL)

bind_cols(..., .id = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bind_rows_+3A_...">...</code></td>
<td>
<p>Data frames to combine.
</p>
<p>Each argument can either be a data frame, a list that could be a data
frame, or a list of data frames.
</p>
<p>When row-binding, columns are matched by name, and any missing
columns will be filled with NA.
</p>
<p>When column-binding, rows are matched by position, so all data
frames must have the same number of rows. To match by value, not
position, see mutate-joins.</p>
</td></tr>
<tr><td><code id="bind_rows_+3A_.id">.id</code></td>
<td>
<p>Data frame identifier.
</p>
<p>When '.id' is supplied, a new column of identifiers is
created to link each row to its original data frame. The labels
are taken from the named arguments to 'bind_rows()'. When a
list of data frames is supplied, the labels are taken from the
names of the list. If no names are found a numeric sequence is
used instead.</p>
</td></tr>
<tr><td><code id="bind_rows_+3A_add.cell.ids">add.cell.ids</code></td>
<td>
<p>from Seurat 3.0 A character vector of length(x = c(x, y)). Appends the corresponding values to the start of each objects' cell names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output of 'bind_rows()' will contain a column if that column
appears in any of the inputs.
</p>
<p>The output of 'bind_rows()' will contain a column if that column
appears in any of the inputs.
</p>


<h3>Value</h3>

<p>'bind_rows()' and 'bind_cols()' return the same type as
the first input, either a data frame, 'tbl_df', or 'grouped_df'.
</p>
<p>'bind_rows()' and 'bind_cols()' return the same type as
the first input, either a data frame, 'tbl_df', or 'grouped_df'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>print("small_pbmc |&gt; bind_rows(small_pbmc)")



print("small_pbmc |&gt; bind_cols(annotation_column)")


</code></pre>

<hr>
<h2 id='join_features'>join_features</h2><span id='topic+join_features'></span>

<h3>Description</h3>

<p>join_features() extracts and joins information for specific
features
</p>


<h3>Usage</h3>

<pre><code class='language-R'>join_features(
  .data,
  features = NULL,
  all = FALSE,
  exclude_zeros = FALSE,
  shape = "long",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="join_features_+3A_.data">.data</code></td>
<td>
<p>A tidy SingleCellExperiment object</p>
</td></tr>
<tr><td><code id="join_features_+3A_features">features</code></td>
<td>
<p>A vector of feature identifiers to join</p>
</td></tr>
<tr><td><code id="join_features_+3A_all">all</code></td>
<td>
<p>If TRUE return all</p>
</td></tr>
<tr><td><code id="join_features_+3A_exclude_zeros">exclude_zeros</code></td>
<td>
<p>If TRUE exclude zero values</p>
</td></tr>
<tr><td><code id="join_features_+3A_shape">shape</code></td>
<td>
<p>Format of the returned table &quot;long&quot; or &quot;wide&quot;</p>
</td></tr>
<tr><td><code id="join_features_+3A_...">...</code></td>
<td>
<p>Parameters to pass to join wide, i.e. assay name to extract feature abundance from and gene prefix, for shape=&quot;wide&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function extracts information for specified features and
returns the information in either long or wide format.
</p>


<h3>Value</h3>

<p>A 'tbl' containing the information.for the specified features
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
print("this is a method generics Example is not applicable")
# &lt;object&gt; |&gt; join_features(features=c("HLA-DRA", "LYZ"))

</code></pre>

<hr>
<h2 id='plot_ly'>Initiate a plotly visualization</h2><span id='topic+plot_ly'></span>

<h3>Description</h3>

<p>This function maps R objects to <a href="https://plotly.com/javascript/">plotly.js</a>,
an (MIT licensed) web-based interactive charting library. It provides
abstractions for doing common things (e.g. mapping data values to
fill colors (via <code>color</code>) or creating <a href="plotly.html#topic+animation">animation</a>s (via <code>frame</code>)) and sets
some different defaults to make the interface feel more 'R-like'
(i.e., closer to <code><a href="graphics.html#topic+plot">plot()</a></code> and <code><a href="ggplot2.html#topic+qplot">ggplot2::qplot()</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ly(
  data = data.frame(),
  ...,
  type = NULL,
  name = NULL,
  color = NULL,
  colors = NULL,
  alpha = NULL,
  stroke = NULL,
  strokes = NULL,
  alpha_stroke = 1,
  size = NULL,
  sizes = c(10, 100),
  span = NULL,
  spans = c(1, 20),
  symbol = NULL,
  symbols = NULL,
  linetype = NULL,
  linetypes = NULL,
  split = NULL,
  frame = NULL,
  width = NULL,
  height = NULL,
  source = "A"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_ly_+3A_data">data</code></td>
<td>
<p>A data frame (optional) or <a href="crosstalk.html#topic+SharedData">crosstalk::SharedData</a> object.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_...">...</code></td>
<td>
<p>Arguments (i.e., attributes) passed along to the trace <code>type</code>.
See <code><a href="plotly.html#topic+schema">schema()</a></code> for a list of acceptable attributes for a given trace <code>type</code>
(by going to <code>traces</code> -&gt; <code>type</code> -&gt; <code>attributes</code>). Note that attributes
provided at this level may override other arguments
(e.g. <code>plot_ly(x = 1:10, y = 1:10, color = I("red"), marker = list(color = "blue"))</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_type">type</code></td>
<td>
<p>A character string specifying the trace type (e.g. <code>"scatter"</code>, <code>"bar"</code>, <code>"box"</code>, etc).
If specified, it <em>always</em> creates a trace, otherwise</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_name">name</code></td>
<td>
<p>Values mapped to the trace's name attribute. Since a trace can
only have one name, this argument acts very much like <code>split</code> in that it
creates one trace for every unique value.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_color">color</code></td>
<td>
<p>Values mapped to relevant 'fill-color' attribute(s)
(e.g. <a href="https://plotly.com/r/reference/#scatter-fillcolor">fillcolor</a>,
<a href="https://plotly.com/r/reference/#scatter-marker-color">marker.color</a>,
<a href="https://plotly.com/r/reference/#scatter-textfont-color">textfont.color</a>, etc.).
The mapping from data values to color codes may be controlled using
<code>colors</code> and <code>alpha</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>color = I("red")</code>).
Any color understood by <code><a href="grDevices.html#topic+col2rgb">grDevices::col2rgb()</a></code> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_colors">colors</code></td>
<td>
<p>Either a colorbrewer2.org palette name (e.g. &quot;YlOrRd&quot; or &quot;Blues&quot;),
or a vector of colors to interpolate in hexadecimal &quot;#RRGGBB&quot; format,
or a color interpolation function like <code>colorRamp()</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_alpha">alpha</code></td>
<td>
<p>A number between 0 and 1 specifying the alpha channel applied to <code>color</code>.
Defaults to 0.5 when mapping to <a href="https://plotly.com/r/reference/#scatter-fillcolor">fillcolor</a> and 1 otherwise.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_stroke">stroke</code></td>
<td>
<p>Similar to <code>color</code>, but values are mapped to relevant 'stroke-color' attribute(s)
(e.g., <a href="https://plotly.com/r/reference/#scatter-marker-line-color">marker.line.color</a>
and <a href="https://plotly.com/r/reference/#scatter-line-color">line.color</a>
for filled polygons). If not specified, <code>stroke</code> inherits from <code>color</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_strokes">strokes</code></td>
<td>
<p>Similar to <code>colors</code>, but controls the <code>stroke</code> mapping.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_alpha_stroke">alpha_stroke</code></td>
<td>
<p>Similar to <code>alpha</code>, but applied to <code>stroke</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_size">size</code></td>
<td>
<p>(Numeric) values mapped to relevant 'fill-size' attribute(s)
(e.g., <a href="https://plotly.com/r/reference/#scatter-marker-size">marker.size</a>,
<a href="https://plotly.com/r/reference/#scatter-textfont-size">textfont.size</a>,
and <a href="https://plotly.com/r/reference/#scatter-error_x-width">error_x.width</a>).
The mapping from data values to symbols may be controlled using
<code>sizes</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>size = I(30)</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_sizes">sizes</code></td>
<td>
<p>A numeric vector of length 2 used to scale <code>size</code> to pixels.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_span">span</code></td>
<td>
<p>(Numeric) values mapped to relevant 'stroke-size' attribute(s)
(e.g.,
<a href="https://plotly.com/r/reference/#scatter-marker-line-width">marker.line.width</a>,
<a href="https://plotly.com/r/reference/#scatter-line-width">line.width</a> for filled polygons,
and <a href="https://plotly.com/r/reference/#scatter-error_x-thickness">error_x.thickness</a>)
The mapping from data values to symbols may be controlled using
<code>spans</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>span = I(30)</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_spans">spans</code></td>
<td>
<p>A numeric vector of length 2 used to scale <code>span</code> to pixels.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_symbol">symbol</code></td>
<td>
<p>(Discrete) values mapped to <a href="https://plotly.com/r/reference/#scatter-marker-symbol">marker.symbol</a>.
The mapping from data values to symbols may be controlled using
<code>symbols</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>symbol = I("pentagon")</code>).
Any <a href="graphics.html#topic+pch">pch</a> value or <a href="https://plotly.com/r/reference/#scatter-marker-symbol">symbol name</a> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_symbols">symbols</code></td>
<td>
<p>A character vector of <a href="graphics.html#topic+pch">pch</a> values or <a href="https://plotly.com/r/reference/#scatter-marker-symbol">symbol names</a>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_linetype">linetype</code></td>
<td>
<p>(Discrete) values mapped to <a href="https://plotly.com/r/reference/#scatter-line-dash">line.dash</a>.
The mapping from data values to symbols may be controlled using
<code>linetypes</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>linetype = I("dash")</code>).
Any <code>lty</code> (see <a href="graphics.html#topic+par">par</a>) value or <a href="https://plotly.com/r/reference/#scatter-line-dash">dash name</a> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_linetypes">linetypes</code></td>
<td>
<p>A character vector of <code>lty</code> values or <a href="https://plotly.com/r/reference/#scatter-line-dash">dash names</a></p>
</td></tr>
<tr><td><code id="plot_ly_+3A_split">split</code></td>
<td>
<p>(Discrete) values used to create multiple traces (one trace per value).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_frame">frame</code></td>
<td>
<p>(Discrete) values used to create animation frames.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_width">width</code></td>
<td>
<p>Width in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_height">height</code></td>
<td>
<p>Height in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string
with the source argument in <code><a href="plotly.html#topic+event_data">event_data()</a></code> to retrieve the
event data corresponding to a specific plot (shiny apps can have multiple plots).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unless <code>type</code> is specified, this function just initiates a plotly
object with 'global' attributes that are passed onto downstream uses of
<code><a href="plotly.html#topic+add_trace">add_trace()</a></code> (or similar). A <a href="stats.html#topic+formula">formula</a> must always be used when
referencing column name(s) in <code>data</code> (e.g. <code>plot_ly(mtcars, x = ~wt)</code>).
Formulas are optional when supplying values directly, but they do
help inform default axis/scale titles
(e.g., <code>plot_ly(x = mtcars$wt)</code> vs <code>plot_ly(x = ~mtcars$wt)</code>)
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly-r.com/overview.html">https://plotly-r.com/overview.html</a>
</p>


<h3>See Also</h3>


<ul>
<li><p> For initializing a plotly-geo object: <code><a href="plotly.html#topic+plot_geo">plot_geo()</a></code>
</p>
</li>
<li><p> For initializing a plotly-mapbox object: <code><a href="plotly.html#topic+plot_mapbox">plot_mapbox()</a></code>
</p>
</li>
<li><p> For translating a ggplot2 object to a plotly object: <code><a href="plotly.html#topic+ggplotly">ggplotly()</a></code>
</p>
</li>
<li><p> For modifying any plotly object: <code><a href="plotly.html#topic+layout">layout()</a></code>, <code><a href="plotly.html#topic+add_trace">add_trace()</a></code>, <code><a href="plotly.html#topic+style">style()</a></code>
</p>
</li>
<li><p> For linked brushing: <code><a href="plotly.html#topic+highlight">highlight()</a></code>
</p>
</li>
<li><p> For arranging multiple plots: <code><a href="plotly.html#topic+subplot">subplot()</a></code>, <code><a href="crosstalk.html#topic+bscols">crosstalk::bscols()</a></code>
</p>
</li>
<li><p> For inspecting plotly objects: <code><a href="plotly.html#topic+plotly_json">plotly_json()</a></code>
</p>
</li>
<li><p> For quick, accurate, and searchable plotly.js reference: <code><a href="plotly.html#topic+schema">schema()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# plot_ly() tries to create a sensible plot based on the information you 
# give it. If you don't provide a trace type, plot_ly() will infer one.
plot_ly(economics, x = ~pop)
plot_ly(economics, x = ~date, y = ~pop)
# plot_ly() doesn't require data frame(s), which allows one to take 
# advantage of trace type(s) designed specifically for numeric matrices
plot_ly(z = ~volcano)
plot_ly(z = ~volcano, type = "surface")

# plotly has a functional interface: every plotly function takes a plotly
# object as it's first input argument and returns a modified plotly object
add_lines(plot_ly(economics, x = ~date, y = ~unemploy/pop))

# To make code more readable, plotly imports the pipe operator from magrittr
economics %&gt;% plot_ly(x = ~date, y = ~unemploy/pop) %&gt;% add_lines()

# Attributes defined via plot_ly() set 'global' attributes that 
# are carried onto subsequent traces, but those may be over-written
plot_ly(economics, x = ~date, color = I("black")) %&gt;%
 add_lines(y = ~uempmed) %&gt;%
 add_lines(y = ~psavert, color = I("red"))

# Attributes are documented in the figure reference -&gt; https://plotly.com/r/reference
# You might notice plot_ly() has named arguments that aren't in this figure
# reference. These arguments make it easier to map abstract data values to
# visual attributes.
p &lt;- plot_ly(palmerpenguins::penguins, x = ~bill_length_mm, y = ~body_mass_g)
add_markers(p, color = ~bill_depth_mm, size = ~bill_depth_mm)
add_markers(p, color = ~species)
add_markers(p, color = ~species, colors = "Set1")
add_markers(p, symbol = ~species)
add_paths(p, linetype = ~species)


## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
