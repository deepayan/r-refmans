<!DOCTYPE html><html><head><title>Help for package support.CEs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {support.CEs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#support.CEs-package'>
<p>Basic functions for supporting an implementation of choice experiments</p></a></li>
<li><a href='#ce.dataset'>
<p>Making a data set from a choice experiment design and respondent data set</p></a></li>
<li><a href='#ce.response'>
<p>Generating artificial responses to choice experiment questions</p></a></li>
<li><a href='#gofm'>
<p>Calculating goodness-of-fit measures</p></a></li>
<li><a href='#Lma.design'>
<p>Creating a choice experiment design using the L^MA method</p></a></li>
<li><a href='#make.dataset'>
<p>Making a data set</p></a></li>
<li><a href='#make.design.matrix'>
<p>Converting a choice experiment design into a design matrix</p></a></li>
<li><a href='#mwtp'>
<p>Calculating the marginal willingness to pay</p></a></li>
<li><a href='#pork'>
<p>Synthetic respondent data set: consumers' valuation of pork</p></a></li>
<li><a href='#questionnaire'>
<p>Converting a choice experiment design into a choice experiment questionnaire</p></a></li>
<li><a href='#rice'>
<p>Synthetic respondent data set: consumers' valuation of rice</p></a></li>
<li><a href='#rotation.design'>
<p>Creating a choice experiment design using the rotation or mix-and-match method</p></a></li>
<li><a href='#rural'>
<p>Synthetic respondent data set: residents' valuation of rural environment conservation plan</p></a></li>
<li><a href='#syn.res1+2C+20syn.res2+2C+20syn.res3'>
<p>Synthetic respondent data sets</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Basic Functions for Supporting an Implementation of Choice
Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Hideo Aizaki</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hideo Aizaki &lt;azk-r@spa.nifty.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides basic functions that support an implementation of (discrete) choice experiments (CEs). CEs is a question-based survey method measuring people's preferences for goods/services and their characteristics. Refer to Louviere et al. (2000) &lt;<a href="https://doi.org/10.1017%2FCBO9780511753831">doi:10.1017/CBO9780511753831</a>&gt; for details on CEs, and Aizaki (2012) &lt;<a href="https://doi.org/10.18637%2Fjss.v050.c02">doi:10.18637/jss.v050.c02</a>&gt; for the package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>DoE.base, MASS, simex, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>survival, mded</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-03 06:28:01 UTC; rpkgdev</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-03 07:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='support.CEs-package'>
Basic functions for supporting an implementation of choice experiments
</h2><span id='topic+support.CEs-package'></span><span id='topic+support.CEs'></span>

<h3>Description</h3>

<p>The package <span class="pkg">support.CEs</span> provides seven basic functions that support an implementation of choice experiments. These include the following functions: two for creating a choice experiment design, which is based on orthogonal main-effect arrays; one for converting a choice experiment design into questionnaire format; one for converting a choice experiment design into a design matrix; one for making the data set suitable for a conditional logit model analysis using the function <code>clogit</code> in the package <span class="pkg">survival</span>, or for a binary choice model analysis using the function <code>glm</code> in the package <span class="pkg">stats</span>; one for calculating goodness-of-fit measures for an estimated model; and one for calculating the marginal willingness to pay for the attributes and/or levels of the estimated model. Version 0.3-0 and later versions of this package are also available for binary choice experiments. Refer to Aizaki (2012) and Aizaki et al. (2014) for details on the package.
</p>


<h3>Details</h3>

<p>The terms in this manual are defined as follows. An &quot;attribute&quot; is a characteristic or feature of an alternative. A &quot;level&quot; or &quot;attribute level&quot; represents the value of an attribute. One attribute can have two or more levels. An &quot;alternative&quot; is a combination of attributes; that is, one alternative can have two or more attributes. For example, when applying choice experiments to marketing research, the alternatives would refer to the &quot;goods&quot; or &quot;services&quot; that respondents are asked to select. A &quot;choice set&quot; refers to a set of alternatives available to individuals. One choice set includes two or more alternatives, including an opt-out alternative, if one exists. In a choice experiment question, respondents are usually asked to select the most preferred alternative from a choice set; therefore, one choice set constitutes a choice experiment question. A &quot;choice experiment design&quot; refers to a collection of individual choice sets.
</p>
<p>The following shows an example of a choice experiment design. The choice experiment design includes a total of 9 choice sets (Q1 to Q9). Each choice set (question) consists of three alternatives (&quot;Alternative 1,&quot; &quot;Alternative 2,&quot; and &quot;None of these&quot; option). &quot;Alternative 1&quot; and &quot;Alternative 2&quot; each consist of three attributes: an attribute A with the three levels of &quot;a1,&quot; &quot;a2,&quot; and &quot;a3&quot;; an attribute B with the three levels of &quot;b1,&quot; &quot;b2,&quot; and &quot;b3&quot;; and an attribute C with the three levels of &quot;c1,&quot; &quot;c2,&quot; and &quot;c3.&quot; 
</p>

<table>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>

<p>Q1. Please select your most preferred alternative from the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
            </td><td style="text-align: center;"> Alternative 1 </td><td style="text-align: center;"> Alternative 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute A </td><td style="text-align: center;"> a2 </td><td style="text-align: center;"> a3 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute B </td><td style="text-align: center;"> b2 </td><td style="text-align: center;"> b3 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute C </td><td style="text-align: center;"> c2 </td><td style="text-align: center;"> c3 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<ul>
<li><p>I select alternative 1.
</p>
</li>
<li><p>I select alternative 2.
</p>
</li>
<li><p>I select none of these.
</p>
</li></ul>


<table>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>

<p>Q2. Please select your most preferred alternative from the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
            </td><td style="text-align: center;"> Alternative 1 </td><td style="text-align: center;"> Alternative 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute A </td><td style="text-align: center;"> a2 </td><td style="text-align: center;"> a1 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute B </td><td style="text-align: center;"> b3 </td><td style="text-align: center;"> b2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute C </td><td style="text-align: center;"> c1 </td><td style="text-align: center;"> c3 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<ul>
<li><p>I select alternative 1.
</p>
</li>
<li><p>I select alternative 2.
</p>
</li>
<li><p>I select none of these.
</p>
</li></ul>


<table>
<tr>
 <td style="text-align: center;">
&lt;&lt; Q3 to Q8 are omitted for the sake of simplicity&gt;&gt; </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>

<p>Q9. Please select your most preferred alternative from the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
            </td><td style="text-align: center;"> Alternative 1 </td><td style="text-align: center;"> Alternative 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute A </td><td style="text-align: center;"> a3 </td><td style="text-align: center;"> a2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute B </td><td style="text-align: center;"> b2 </td><td style="text-align: center;"> b2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Attribute C </td><td style="text-align: center;"> c1 </td><td style="text-align: center;"> c2 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<ul>
<li><p>I select alternative 1.
</p>
</li>
<li><p>I select alternative 2.
</p>
</li>
<li><p>I select none of these.
</p>
</li></ul>


<table>
<tr>
 <td style="text-align: center;"> </td>
</tr>

</table>

<p>Although there are three alternatives in the example above, the case of two alternatives for each question also exists. Such a choice experiment is known as a binary choice experiment.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>References</h3>

<p>Aizaki, H. (2012) Basic Functions for Supporting an Implementation of Choice Experiments in R. <em>Journal of Statistical Software</em>, <b>50</b>(C2), 1&ndash;24. <a href="https://www.jstatsoft.org/v50/c02/">https://www.jstatsoft.org/v50/c02/</a>.
</p>
<p>Aizaki, H. and Nishimura, K. (2008) Design and Analysis of Choice Experiments Using R: A Brief Introduction. <em>Agricultural Information Research</em>, <b>17</b>(2), 86&ndash;94. <a href="https://www.jstage.jst.go.jp/article/air/17/2/17_2_86/_article">https://www.jstage.jst.go.jp/article/air/17/2/17_2_86/_article</a>.
</p>
<p>Aizaki, H., Nakatani, T. and Sato K. (2014) <em>Stated Preference Methods Using R</em>. CRC Press.
</p>
<p>Ben-Akiva, M. and Lerman, S. R. (1985) <em>Discrete Choice Analysis: Theory and Application to Travel Demand</em>. The MIT Press.
</p>
<p>Cameron, A. C. and Trivedi, P. K. (2005) <em>Microeconometrics: Methods and Applications</em>. Cambridge University Press.
</p>
<p>Hole, A. R. (2007) A Comparison of Approaches to Estimating Confidence Intervals for Willingness to Pay Measures. <em>Health Economics</em>, <b>16</b>, 827&ndash;840.
</p>
<p>Johnson, F. R., Kanninen, B., Bingham, M. and Ozdemir, S. (2007) Experimental Design for Stated Choice Studies. In B. J. Kanninen (ed), <em>Valuing Environmental Amenities Using Stated Choice Studies: A Common Sense Approach to Theory and Practice</em>. pp.159&ndash;202. Springer. 
</p>
<p>Krinsky, I. and Robb. A. L. (1986) On Approximating the Statistical Properties of Elasticities. <em>The Review of Economics and Statistics</em>, <b>68</b>, 715&ndash;719.
</p>
<p>Louviere, J. J., Hensher, D. A. and Swait, J. D. (2000) <em>Stated Choice Methods: Analysis and Application</em>. Cambridge University Press.
</p>


<h3>See Also</h3>

<p><code><a href="DoE.base.html#topic+oa.design">oa.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>
</p>

<hr>
<h2 id='ce.dataset'>
Making a data set from a choice experiment design and respondent data set
</h2><span id='topic+ce.dataset'></span>

<h3>Description</h3>

<p>This function combines <code>make.design.matrix</code> and <code>make.dataset</code>. It returns a data set for analysis that is similar to one from <code>make.dataset</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ce.dataset(data,
           response,
           design,
           categorical.attributes = NULL, 
           continuous.attributes = NULL,
           common = NULL,
           optout = TRUE,
           unlabeled = TRUE,
           binary = FALSE,
           detail = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ce.dataset_+3A_data">data</code></td>
<td>

<p>A data frame containing respondents' answers to choice experiment questions. It corresponds to an argument  <code>respondent.dataset</code> in <code>make.dataset</code>.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_response">response</code></td>
<td>

<p>A vector of variables showing the alternative of which was selected in each choice experiment question. It corresponds to an argument <code>choice.indicators</code> in <code>make.dataset</code>.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_design">design</code></td>
<td>

<p>A data frame containing a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code>. It corresponds to an argument <code>choice.experiment.design</code> in <code>make.design.matrix</code>.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_categorical.attributes">categorical.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as categorical independent variables in the analysis.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_continuous.attributes">continuous.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as continuous independent variables in the analysis.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_common">common</code></td>
<td>

<p>A vector containing a fixed combination of attribute-levels corresponding to a common base option in each question. If there is no common base option, the argument is set as <code>NULL</code> (default).
</p>
</td></tr> 
<tr><td><code id="ce.dataset_+3A_optout">optout</code></td>
<td>

<p>A logical variable describing whether or not the opt-out alternative is included in the design matrix created by this function. If <code>TRUE</code> (default), the opt-out alternative is included; otherwise it is not.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_unlabeled">unlabeled</code></td>
<td>

<p>A logical variable describing the types of a choice experiment design assigned by the argument <code>choice.experiment.design</code>. If the type is unlabeled, the argument is set as <code>TRUE</code> (default). If the type is labeled, it is set as <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_binary">binary</code></td>
<td>

<p>When the function is applied to the conditional logit model, the argument is set as <code>FALSE</code> (default). When the function is applied to the binary choice model, it is set as <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="ce.dataset_+3A_detail">detail</code></td>
<td>

<p>A logical variable describing whether or not some variables contained in the argument <code>data</code> and variables created in this function are stored in a data set produced by this function.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a data set for analysis by combining a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> and respondent data set. The resultant data set is similar to one from <code>make.dataset</code>.
</p>
<p>For details on arguments, see help for <code>make.dataset</code> and <code>make.design.matrix</code>.
</p>
<p>For details on the output, see help for <code>make.dataset</code>.
</p>


<h3>Value</h3>

<p>This function provides a data set (data frame) for discrete choice analysis of responses to choice experiment questions. The resultant data set is similar to one from the function <code>make.dataset</code>. For details, see help for <code>make.dataset</code>.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+make.design.matrix">make.design.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='ce.response'>
Generating artificial responses to choice experiment questions
</h2><span id='topic+ce.response'></span>

<h3>Description</h3>

<p>This function synthesizes responses to choice experiment questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ce.response(design,
            categorical.attributes = NULL, 
            continuous.attributes = NULL,
            optout = FALSE,
            b,
            n,
            detail = FALSE,
            seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ce.response_+3A_design">design</code></td>
<td>

<p>An object of the S3 class &quot;cedes&quot;. 
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_categorical.attributes">categorical.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as categorical independent variables in the model. If there are no categorical variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_continuous.attributes">continuous.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as continuous independent variables in the model.  If there are no continuous variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_optout">optout</code></td>
<td>

<p>A logical variable describing whether or not the opt-out alternative is included in the choice experiment questions. If <code>TRUE</code> (default), the opt-out alternative is included; otherwise it is not.
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_b">b</code></td>
<td>

<p>A vector containing parameters of independent variables in the model. The vector is used to calculate utilities for alternatives.
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_n">n</code></td>
<td>

<p>An integer value showing the number of respondents in the resultant dataset.
</p>
</td></tr> 
<tr><td><code id="ce.response_+3A_detail">detail</code></td>
<td>

<p>A logical variable: if <code>TRUE</code>, the dataset is returned in a detailed format; and if <code>FALSE</code> (default), the dataset is return in a simple format.
</p>
</td></tr>
<tr><td><code id="ce.response_+3A_seed">seed</code></td>
<td>

<p>Seed for a random number generator.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function synthesizes responses to choice experiment questions. Before using the function, see help for functions <code>rotation.design</code>, <code>make.design.matrix</code>, and <code>make.dataset</code>. For details on the usage, refer to section Examples below.
</p>


<h3>Value</h3>

<p>This function returns a data frame that contains synthesized responses to choice experiment questions, in either a detailed or a simple format. The detailed format dataset contains the following variables, as well as independent variables according to the arguments <code>categorical.attributes</code> and/or <code>continuous.attributes</code>.
</p>
<table>
<tr><td><code>ID</code></td>
<td>
<p>An identification number of artificial respondents.</p>
</td></tr>
<tr><td><code>BLOCK</code></td>
<td>
<p>A serial number of blocks in the choice sets.</p>
</td></tr>
<tr><td><code>QES</code></td>
<td>
<p>A serial number of questions.</p>
</td></tr>
<tr><td><code>ALT</code></td>
<td>
<p>A serial number of alternatives.</p>
</td></tr>
<tr><td><code>ASC</code></td>
<td>
<p>Alternative specific constant.</p>
</td></tr>
<tr><td><code>STR</code></td>
<td>
<p>A stratification variable used to identify each combination of respondent and question.</p>
</td></tr>
<tr><td><code>RES</code></td>
<td>
<p>Responses to choice experiment questions, taking the value of 1 if an alternative is selected by the synthesized respondents and 0 otherwise.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rotation.design">rotation.design</a></code>, <code><a href="#topic+make.design.matrix">make.design.matrix</a></code>, <code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+rice">rice</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The following example is based on the dataset rice.
# The choice sets differ from those in the dataset rice.

library(survival)

dsgn.rice &lt;- rotation.design(
  attribute.names = list(
    Region = c("RegA", "RegB", "RegC"),
    Cultivation = c("Conv", "NoChem", "Organic"),
    Price = c("1700", "2000", "2300")),
  nalternatives = 2,
  nblocks = 3,
  row.renames = FALSE,
  randomize = TRUE,
  seed = 987)

syn.rice1 &lt;- ce.response(
  design = dsgn.rice, 
  categorical.attributes = c("Region", "Cultivation"),
  continuous.attributes = "Price",
  optout = TRUE,
  b = c(4.4, 0.47, 0.97, 0.66, 1.1, -0.0023),
  n = 99,
  detail = TRUE,
  seed = 1)
head(syn.rice1, 30)
mf &lt;- RES ~ ASC + RegB + RegC + NoChem + Organic + Price + strata(STR)
(out1 &lt;- clogit(mf, data = syn.rice1))

syn.rice.simple &lt;- ce.response(
  design = dsgn.rice, 
  categorical.attributes = c("Region", "Cultivation"),
  continuous.attributes = "Price",
  optout = TRUE,
  b = c(4.4, 0.47, 0.97, 0.66, 1.1, -0.0023),
  n = 99,
  detail = FALSE,
  seed = 1)
head(syn.rice.simple)
dsgnmat.rice &lt;- make.design.matrix(
  choice.experiment.design = dsgn.rice,
  optout = TRUE,
  categorical.attributes = c("Region", "Cultivation"),
  continuous.attributes = c("Price"),
  unlabeled = TRUE)
syn.rice2 &lt;- make.dataset(
  respondent.dataset = syn.rice.simple,
  choice.indicators =
    c("q1", "q2", "q3"),
  design.matrix = dsgnmat.rice)
(out2 &lt;- clogit(mf, data = syn.rice2))

all.equal(coef(out1), coef(out2))

</code></pre>

<hr>
<h2 id='gofm'>
Calculating goodness-of-fit measures
</h2><span id='topic+gofm'></span><span id='topic+print.gofm'></span>

<h3>Description</h3>

<p>This function provides rho-squared and rho-squared adjusted by the number of estimated coefficients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gofm(output)

## S3 method for class 'gofm'
print(x, digits = getOption("digits"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gofm_+3A_output">output</code></td>
<td>

<p>An object containing the output from the function <code>clogit</code> or <code>glm</code>.
</p>
</td></tr>
<tr><td><code id="gofm_+3A_x">x</code></td>
<td>

<p>An object of class &quot;gofm.&quot;
</p>
</td></tr>
<tr><td><code id="gofm_+3A_digits">digits</code></td>
<td>

<p>A number of significant digits.
</p>
</td></tr>
<tr><td><code id="gofm_+3A_...">...</code></td>
<td>

<p>Arguments passed to the function <code>format</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides rho-squared (also called McFadden's R-squared or pseudo R-squared), rho-squared adjusted by the number of estimated coefficients, the number of estimated coefficients, and log likelihood values at the start and at convergence (see, e.g., Ben-Akiva and Lerman 1985; Cameron and Trivedi 2005).
</p>
<p>In version 0.3-0 and later versions, this function is also available for calculating goodness-of-fit measures for binary choice models estimated by using the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>


<h3>Value</h3>

<p>This function returns an object of S3 class &quot;gofm&quot; that is a list with the following components.
</p>
<table>
<tr><td><code>RHO2</code></td>
<td>
<p>The rho-squared value. Defined as <code>RHO2 = 1 - (LLb / LL0)</code>. </p>
</td></tr>
<tr><td><code>AdjRHO2</code></td>
<td>
<p>The rho-squared value adjusted by the number of estimated coefficients. Defined as <code>AdjRHO2 = 1 - ((LLb - K) / LL0)</code>.</p>
</td></tr>
<tr><td><code>AIC</code></td>
<td>
<p>The Akaike Information Criterion (AIC).</p>
</td></tr>
<tr><td><code>BIC</code></td>
<td>
<p>The Bayesian Information Criterion.</p>
</td></tr>
<tr><td><code>K</code></td>
<td>
<p>The number of estimated coefficients.</p>
</td></tr>
<tr><td><code>LL0</code></td>
<td>
<p>The log likelihood value at the start.</p>
</td></tr>
<tr><td><code>LLb</code></td>
<td>
<p>The log likelihood value at convergence.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>, <code><a href="#topic+make.dataset">make.dataset</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='Lma.design'>
Creating a choice experiment design using the L^MA method
</h2><span id='topic+Lma.design'></span><span id='topic+print.cedes'></span>

<h3>Description</h3>

<p>This function creates a choice experiment design according to the <em>L^MA</em> method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Lma.design(candidate.array = NULL, attribute.names, 
           nalternatives, nblocks, row.renames = TRUE, 
           seed = NULL)

## S3 method for class 'cedes'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Lma.design_+3A_candidate.array">candidate.array</code></td>
<td>

<p>A data frame containing an array created by the user. Normally, when this function is used, this argument does not need to be set by the user.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_attribute.names">attribute.names</code></td>
<td>

<p>A list of the names of attributes and levels.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_nalternatives">nalternatives</code></td>
<td>

<p>An integer value describing the number of alternatives per choice set, excluding an opt-out alternative such as a &quot;none of these&quot; or a common base alternative.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_nblocks">nblocks</code></td>
<td>

<p>An integer value describing the number of blocks into which a choice experiment design is divided.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_row.renames">row.renames</code></td>
<td>

<p>A logical variable describing whether or not the row names of a choice experiment design created by this function are changed. When its value is <code>TRUE</code> (default), integer values are assigned to the row names starting from 1. When its value is <code>FALSE</code>, the row names are the same as those of an array created by the function <code>oa.design</code> (included in the <span class="pkg">DoE.base</span> package) via the function <code>Lma.design</code>, or those of an array assigned to the argument <code>candidate.array</code> by the user.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_seed">seed</code></td>
<td>

<p>Seed for a random number generator.
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_x">x</code></td>
<td>

<p>An object of S3 class &quot;ceds.&quot;
</p>
</td></tr>
<tr><td><code id="Lma.design_+3A_...">...</code></td>
<td>

<p>Arguments passed to the function <code>print</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <em>L^MA</em> method directly creates a choice experiment design from an orthogonal main-effect array (Johnson et al. 2007). In this method, an orthogonal main-effect array with <code>M</code> times <code>A</code> columns of <code>L</code> level factors is used to create each choice set that contains <code>M</code> alternatives of <code>A</code> attributes with <code>L</code> levels. Each row of the array corresponds to the alternatives of a choice set.
</p>
<p>This method creates a labeled type choice experiment design that can contain both generic attributes and alternative-specific attributes: the generic attribute refers to that which is included in all the alternatives; the alternative-specific attribute is that which is included in only one alternative. The reader is referred to chapters 3 and 5 of Louviere et al. (2000) for details about the types of attribute&mdash;generic or alternative-specific&mdash;and the types of choice experiment design&mdash;labeled or unlabeled.
</p>
<p>When this function is used, the combination of attributes and attribute levels, the number of alternatives per choice set excluding an opt-out or common base option, and the number of blocks are respectively assigned to the arguments.
</p>
<p>The combination of attributes and attribute levels are assigned to the argument <code>attribute.names</code> in list format. For example, let's assume that the alternative has three attributes, each of which has three levels: an attribute X with the three levels of x1, x2, and x3; an attribute Y with the three levels of y1, y2, and y3; and an attribute Z with the three levels of 10, 20, and 30. In this case, the argument is set as follows:
</p>
<p><code>attribute.names = list(X = c("x1", "x2", "x3"),</code> <br />
<code>Y = c("y1", "y2", "y3"), Z = c("10", "20", "30"))</code>
</p>
<p>The number of alternatives per choice set is defined by the argument <code>nalternatives</code>: the number of alternatives does not include an opt-out option such as a &quot;none of these&quot; or a common base option.
</p>
<p>When a large choice experiment design is created (that is, there are numerous choice experiment questions), the respondent may carry a heavy psychological burden in terms of answering the questions: in these cases, the choice experiment design is frequently divided into two or more blocks (subsets) of choice sets (questions), and each respondent is asked to answer one block of questions. The argument <code>nblocks</code> assigns the number of blocks. For example, when the argument <code>nblocks</code> is set to be <code>3</code> and the choice experiment design contains 27 individual choice sets (that is, there are 27 choice experiment questions), the choice experiment design is divided into 3 blocks, each of which has 9 individual choice sets (9 choice experiment questions). &quot;Blocking&quot; is performed on the basis of a factor with <code>nblocks</code> levels.
</p>
<p>Under default settings, this function uses an orthogonal main-effect array that is automatically produced by the function <code>oa.design</code> in the package <span class="pkg">DoE.base</span> based on the argument <code>attribute.names</code> to create a choice experiment design. However, when there is no array corresponding to the argument <code>attribute.names</code>, the function <code>oa.design</code> returns a full factorial based on the argument <code>attribute.names</code> (See help for the function <code>oa.design</code> in the packge <span class="pkg">DoE.base</span>). On the other hand, when this function does not create a choice experiment design matching the user's requirements, the user might achieve it by assigning an arbitrary (user-defined) array to the argument <code>candidate.array</code>: this function uses the array to create a choice experiment design. When the user-defined array is used, the last column of the array must contain a column for dividing the design based on the argument <code>nblocks</code>. The arguments <code>attribute.names</code> and <code>nblocks</code> must also be assigned according to the array.
</p>
<p>The function <code>Lma.design</code> can also be used for creating a binary choice experiment design on the basis of an orthogonal main-effect array by setting the argument <code>nalternatives</code> as <code>1</code> for a binary choice experiment with an opt-out or common base option, and <code>2</code> for a forced-choice format binary choice experiment.
</p>


<h3>Value</h3>

<p>This function returns an object of S3 class &quot;cedes&quot; that is a list with the following components.
</p>
<table>
<tr><td><code>alternatives</code></td>
<td>
<p>A list of objects, <code>alt.j</code>: the <em>j</em>th alternative in each choice set created by this function. Each of <code>alt.j</code> includes a variable <code>BLOCK</code> describing the serial number of blocks, a variable <code>QES</code> describing the serial number of choice experiment questions for each value of the variable <code>BLOCK</code>, a variable <code>ALT</code> describing the serial number of alternatives for each value of the <code>QES</code> variable, and attribute variables corresponding to the argument <code>attribute.names</code>.</p>
</td></tr>
<tr><td><code>candidate</code></td>
<td>
<p>A candidate array used for creating a choice experiment design, which is generated using the function <code>oa.design</code> in the package <span class="pkg">DoE.base</span> or which the user sets for the argument <code>candidate.array</code>. When <code>nblocks</code> &gt;= 2, the last column in this value (<code>candidate</code>) shows a factor that is used for blocking.</p>
</td></tr>
<tr><td><code>design.information</code></td>
<td>
<p>Information related to the choice experiment design created by this function, which is used as arguments in post-processing functions, such as the functions <code>questionnaire</code> and <code>make.design.matrix</code>. This list includes objects such as the number of blocks into which the choice experiment design is divided (<code>nblocks</code>), the number of questions per block (<code>nquestions</code>), the number of alternatives per choice set excluding an opt-out or common base option (<code>nalternatives</code>), and the number of attributes per alternative (<code>nattributes</code>).</p>
</td></tr>
</table>
<p>Messages are frequently shown immediately after executing this function when it works properly. These messages are taken from the function <code>oa.design</code> and may be valuable to a user who wishes to define the original array and assign it the argument <code>candidate.array</code>.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rotation.design">rotation.design</a></code>, <code><a href="#topic+syn.res2">syn.res2</a></code>, <code><a href="DoE.base.html#topic+oa.design">oa.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the second and third cases in "Example"
# for the function make.dataset.
</code></pre>

<hr>
<h2 id='make.dataset'>
Making a data set
</h2><span id='topic+make.dataset'></span>

<h3>Description</h3>

<p>This function makes a data set used for a conditional logit model analysis with the function <code>clogit</code> in the package <span class="pkg">survival</span> or for a binary choice model analysis with the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.dataset(respondent.dataset, design.matrix, 
             choice.indicators, detail = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.dataset_+3A_respondent.dataset">respondent.dataset</code></td>
<td>

<p>A data frame containing respondents' answers to choice experiment questions.
</p>
</td></tr>
<tr><td><code id="make.dataset_+3A_design.matrix">design.matrix</code></td>
<td>

<p>A data frame containing a design matrix created by the function <code>make.design.matrix</code> in this package.
</p>
</td></tr>
<tr><td><code id="make.dataset_+3A_choice.indicators">choice.indicators</code></td>
<td>

<p>A vector of variables showing the alternative of which was selected in each choice experiment question.
</p>
</td></tr>
<tr><td><code id="make.dataset_+3A_detail">detail</code></td>
<td>

<p>A logical variable describing whether or not some variables contained in the argument <code>respondent.dataset</code> and variables created in this function are stored in a data set produced by this function.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Conditional logit model analyses of responses to choice experiment questions in R can be conducted using the function <code>clogit</code> in the package <span class="pkg">survival</span>. When the function is used to analyze the responses to the choice experiment questions, a data set in a special format is needed; each alternative should comprise one row of the data set (see the example in Figure 4 in Aizaki and Nishimura 2008). The function <code>make.dataset</code> is able to create such a data set by combining a data set containing information about responses to the choice experiment questions and a data set containing a design matrix related to these questions.
</p>
<p>The respondent data set has to be created by the user and is assigned to the argument <code>respondent.dataset</code>. The data set, in which each row shows one respondent, has to contain a variable <code>ID</code>, corresponding to the respondent's identification number; a variable <code>BLOCK</code>, corresponding to the serial number of blocks to which each respondent had been assigned; and response variables, corresponding to the answers to each of the choice experiment questions. If necessary, covariates showing the respondent's individual characteristics such as age and gender are also included in the <code>respondent.dataset</code>. Although the names of the response variables and covariates are discretionary, the names of the respondent's identification number variable and block variable must be <code>ID</code> and <code>BLOCK</code>, respectively. 
</p>
<p>The names of the response variables are assigned to the argument <code>choice.indicators</code>. For example, when the names of the response variables in the respondent data set are q1, q2, q3, and q4, the argument is set as <code>c("q1", "q2", "q3", "q4")</code>. The response variables show the serial number of the alternative selected by the respondent for each choice experiment question. The method of assigning the serial number of the alternatives must be the same as that of assigning the <code>ALT</code> in the output from the <code>make.design.matrix</code>. In other words, each alternative must be assigned an integer value that starts from 1. In the <code>respondent.dataset</code>, all variables are automatically treated as covariates, except for the variable <code>ID</code>, the variable <code>BLOCK</code>, and the response variables assigned by the argument <code>choice.indicators</code>. 
</p>
<p>The design matrix data set created by the function <code>make.design.matrix</code> is assigned to the argument <code>design.matrix</code>.
</p>
<p>It should be noted that the order of the questions in the <code>respondent.dataset</code> must be the same as that of the variable <code>QES</code> in the design matrix data set that was assigned to the argument <code>design.matrix</code>, if the order of choice experiment questions presented to respondents was randomized.
</p>
<p>The function <code>make.dataset</code> can also be used for making a data set suitable for a binary choice model analysis using the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>


<h3>Value</h3>

<p>In addition to some variables contained in the respondent and design matrix data sets, the data set also contains the following two variables that are used in the functions <code>clogit</code> and <code>glm</code>:
</p>
<table>
<tr><td><code>STR</code></td>
<td>
<p>A variable assigned to the argument <code>strata</code> in the function <code>clogit</code> in order to identify each combination of respondent and question.</p>
</td></tr>
<tr><td><code>RES</code></td>
<td>
<p>A logical variable taking on <code>TRUE</code> when the alternative is selected and <code>FALSE</code> when it is not. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.design.matrix">make.design.matrix</a></code>, <code><a href="#topic+syn.res1">syn.res1</a></code>, <code><a href="#topic+syn.res2">syn.res2</a></code>, <code><a href="#topic+syn.res3">syn.res3</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
library(stats)

if(getRversion() &gt;= "3.6.0") RNGkind(sample.kind = "Rounding")

# Case 1
# Choice experiments using the function rotaion.design.
# See "Details" for the data set syn.res1.

des1 &lt;- rotation.design(
 attribute.names = list(
  Region = c("Reg_A", "Reg_B", "Reg_C"), 
  Eco = c("Conv.", "More", "Most"), 
  Price = c("1", "1.1", "1.2")), 
 nalternatives = 2,
 nblocks = 1,
 row.renames = FALSE, 
 randomize = TRUE,
 seed = 987)
des1
questionnaire(choice.experiment.design = des1)
desmat1 &lt;- make.design.matrix(
 choice.experiment.design = des1, 
 optout = TRUE, 
 categorical.attributes = c("Region", "Eco"), 
 continuous.attributes = c("Price"),
 unlabeled = TRUE)
data(syn.res1)
dataset1 &lt;- make.dataset(
 respondent.dataset = syn.res1, 
 choice.indicators = 
  c("q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9"), 
 design.matrix = desmat1)
clogout1 &lt;- clogit(RES ~ ASC + Reg_B + Reg_C + More + Most + 
 More:F + Most:F + Price + strata(STR), data = dataset1)
clogout1
gofm(clogout1)
mwtp(
 output = clogout1,
 monetary.variables = c("Price"), 
 nonmonetary.variables = 
  c("Reg_B", "Reg_C", "More", "Most", "More:F", "Most:F"), 
 seed = 987)

# Case 2
# Choice experiments using the function Lma.design.
# See "Details" for the data set syn.res2.

des2 &lt;- Lma.design(
 attribute.names = list(
  Eco = c("Conv.", "More", "Most"), 
  Price = c("1", "1.1", "1.2")), 
 nalternatives = 3,
 nblocks = 2,
 row.renames = FALSE,
 seed = 987)
des2
questionnaire(choice.experiment.design = des2, quote = FALSE)
desmat2 &lt;- make.design.matrix(
 choice.experiment.design = des2, 
 optout = TRUE, 
 categorical.attributes = c("Eco"), 
 continuous.attributes = c("Price"), 
 unlabeled = FALSE)
data(syn.res2)
dataset2 &lt;- make.dataset(
 respondent.dataset = syn.res2, 
 choice.indicators = 
  c("q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9"), 
 design.matrix = desmat2)
clogout2 &lt;- clogit(RES ~ ASC1 + More1 + Most1 + Price1 + 
 ASC2 + More2 + Most2 + Price2 + ASC3 + More3 + Most3 + Price3 + 
 strata(STR), data = dataset2)
clogout2
gofm(clogout2)
mwtp(
 output = clogout2, 
 monetary.variables = c("Price1", "Price2", "Price3"), 
 nonmonetary.variables = list(
  c("More1", "Most1"), c("More2", "Most2"), c("More3", "Most3")), 
 seed = 987)

# Case 3
# Binary choice experiments using the function Lma.design.
# See "Details" for the data set syn.res3.

des3 &lt;- Lma.design(
 attribute.names = list(
  Region = c("Reg_A", "Reg_B", "Reg_C"),
  Eco = c("Conv.", "More", "Most"),
  Price = c("1", "1.1", "1.2")),
 nalternatives = 1,
 nblocks = 1,
 row.renames = FALSE,
 seed = 987)
des3
questionnaire(choice.experiment.design = des3, quote = FALSE)
desmat3 &lt;- make.design.matrix(
 choice.experiment.design = des3,
 optout = TRUE,
 categorical.attributes = c("Region", "Eco"),
 continuous.attributes = c("Price"),
 unlabeled = TRUE,
 common = NULL,
 binary = TRUE)
data(syn.res3)
dataset3 &lt;- make.dataset(
 respondent.dataset = syn.res3,
 choice.indicators = 
  c("q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9"),
 design.matrix = desmat3)
blout &lt;- glm(RES ~ Reg_B + Reg_C + More + Most + Price,
 family = binomial(link = logit), data = dataset3)
summary(blout)
gofm(blout)
mwtp(output = blout,
 monetary.variables = c("Price"),
 nonmonetary.variables = 
  c("Reg_B", "Reg_C", "More", "Most"),
 seed = 987)

</code></pre>

<hr>
<h2 id='make.design.matrix'>
Converting a choice experiment design into a design matrix
</h2><span id='topic+make.design.matrix'></span>

<h3>Description</h3>

<p>This function converts a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> into a design matrix suitable for a conditional logit model analysis with the function <code>clogit</code> in the package <span class="pkg">survival</span>, or for a binary choice model analysis with the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.design.matrix(choice.experiment.design,
                   optout = TRUE,
                   categorical.attributes = NULL, 
                   continuous.attributes = NULL,
                   unlabeled = TRUE,
                   common = NULL,
                   binary = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.design.matrix_+3A_choice.experiment.design">choice.experiment.design</code></td>
<td>

<p>A data frame containing a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code>.
</p>
</td></tr>
<tr><td><code id="make.design.matrix_+3A_optout">optout</code></td>
<td>

<p>A logical variable describing whether or not the opt-out alternative is included in the design matrix created by this function. If <code>TRUE</code> (default), the opt-out alternative is included; otherwise it is not.
</p>
</td></tr>
<tr><td><code id="make.design.matrix_+3A_categorical.attributes">categorical.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as categorical independent variables in the analysis.
</p>
</td></tr>
<tr><td><code id="make.design.matrix_+3A_continuous.attributes">continuous.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as continuous independent variables in the analysis.
</p>
</td></tr>
<tr><td><code id="make.design.matrix_+3A_unlabeled">unlabeled</code></td>
<td>

<p>A logical variable describing the types of a choice experiment design assigned by the argument <code>choice.experiment.design</code>. If the type is unlabeled, the argument is set as <code>TRUE</code> (default). If the type is labeled, it is set as <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="make.design.matrix_+3A_common">common</code></td>
<td>

<p>A vector containing a fixed combination of attribute-levels corresponding to a common base option in each question. If there is no common base option, the argument is set as <code>NULL</code> (default).
</p>
</td></tr> 
<tr><td><code id="make.design.matrix_+3A_binary">binary</code></td>
<td>

<p>When the function is applied to the conditional logit model, the argument is set as <code>FALSE</code> (default). When the function is applied to the binary choice model, it is set as <code>TRUE</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function converts a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> into a design matrix that is suitable for conditional logit model analysis with the function <code>clogit</code> in the package <span class="pkg">survival</span> or binary choice model analysis with the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>
<p>A choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> is assigned to the argument <code>choice.experiment.design</code>.
</p>
<p>Attributes included in the choice experiment design assigned to the argument <code>choice.experiment.design</code> are classified into categorical and continuous attributes that are assigned to the arguments <code>categorical.attributes</code> and <code>continuous.attributes</code>, respectively. For example, an alternative may have three attributes such as X, Y, and Z. In the conditional logit model analysis, when attributes X and Y are treated as categorical variables and attribute Z is treated as continuous variable, the arguments are set as follows:
</p>
<p><code>categorical.attributes = c("X", "Y")</code> <br />
<code>continuous.attributes = c("Z")</code>
</p>
<p>The categorical variables are created in dummy-variable format. In other words, the minimum value in a categorical attribute is normalized; as a result, each dummy variable is assigned a value of 1 when the categorical attribute takes on a value other than the minimum value. The dummy variables are referred to by their levels. For example, in a categorical attribute X with the three levels of &quot;x1,&quot; &quot;x2,&quot; and &quot;x3,&quot; the dummy variables are created as follows: (1) When the choice experiment design is unlabeled, two dummy variables are created: a dummy variable x2 that assumes a value of 1 when attribute X takes &quot;x2,&quot; and 0 otherwise; and a dummy variable x3 that assumes a value of 1 when attribute X takes &quot;x3,&quot; and 0 otherwise. (2) When the choice experiment design is labeled and the design contains two alternatives (&quot;alternative 1&quot; and &quot;alternative 2&quot;), excluding an opt-out alternative, four dummy variables are created: a dummy variable x21 that assumes a value of 1 when attribute X in alternative 1 takes &quot;x2,&quot; and 0 otherwise; a dummy variable x22 that assumes a value of 1 when attribute X in alternative 2 takes &quot;x2,&quot; and 0 otherwise; a dummy variable x31 that assumes a value of 1 when attribute X in alternative 1 takes &quot;x3,&quot; and 0 otherwise; and a dummy variable x32 that assumes a value of 1 when attribute X in alternative 2 takes &quot;x3,&quot; and 0 otherwise.
</p>
<p>Two points should be noted with regard to continuous and categorical variables in the function <code>make.design.matrix</code>. First, the level of the argument <code>continuous.attributes</code> must take on numerical values: that is, the level must not contain a unit of the attribute, such as &quot;USD,&quot; &quot;kg,&quot; or &quot;km.&quot; For example, when the argument <code>continuous.attributes</code> is set as <code>c("Z")</code> and it shows the price attribute of a product alternative, the variable Z must not contain the levels <code>USD10</code>, <code>USD20</code>, and <code>USD30</code> but must have the levels of <code>10</code>, <code>20</code>, and <code>30</code>, respectively. Second, categorical variables created by the function are not in factor format. R usually treats categorical variables as factors. However, values of attribute variables in each row corresponding to an opt-out option must be set as zero (<code>0</code>) because the systematic component of the utility for the opt-out option is normalized to zero. Therefore, the function <code>make.design.matrix</code> converts categorical attributes into dummy variables (the same treatment is applied to the function <code>make.dataset</code>).
</p>
<p>The argument <code>unlabeled</code> is set as <code>TRUE</code> when the choice experiment design assigned to the argument <code>choice.experiment.design</code> is unlabeled; it is <code>FALSE</code> otherwise (when the choice experiment design is labeled).
</p>
<p>The argument <code>optout</code> is set as <code>TRUE</code> when an opt-out alternative such as the option &quot;none of these&quot; is included in the choice experiment questions. It is set as <code>FALSE</code> when the opt-out alternative is not included.
</p>
<p>When a common base option, which is also known as the constant comparator, is included in each choice set, a combination of attribute-levels corresponding to the common base is assigned to the argument <code>common</code>. For example, when the common base is an alternative in which attribute X takes &quot;x1,&quot; attribute Y takes &quot;y2&quot; and attriute Z &quot;10,&quot; the argument is set as follows:
</p>
<p><code>common = c(X = "x1", Y = "y2", Z = "10")</code>
</p>
<p>The argument <code>common</code> is set as <code>NULL</code> when the common base option is not included. It is noted that levels of categorical attributes in the common base option are limited to those that are used in the design assigned to the argument <code>choice.experiment.design</code>.
</p>
<p>When this function is used for constructing a design matrix for the function <code>clogit</code>, the argument <code>binary</code> is set as <code>FALSE</code> (default); the argument is set as <code>TRUE</code> when the function is applied to binary choice models with the function <code>glm</code>.
</p>


<h3>Value</h3>

<p>This function provides a design matrix that can be directly assigned to an argument <code>design.matrix</code> in the function <code>make.dataset</code>. The design matrix contains categorical and/or continuous variables created by this function as well as the following four kinds of variables.
</p>
<table>
<tr><td><code>BLOCK</code></td>
<td>
<p>An integer variable describing the serial number of blocks.</p>
</td></tr>
<tr><td><code>QES</code></td>
<td>
<p>An integer variable describing the serial number of questions according to the value of the variable <code>BLOCK</code>.</p>
</td></tr>
<tr><td><code>ALT</code></td>
<td>
<p>An integer variable describing the serial number of alternatives according to the value of the variable <code>QES</code>.</p>
</td></tr>
<tr><td><code>ASC</code></td>
<td>
<p>Alternative specific constant(s). When the choice experiment design is labeled, the serial number of alternatives (<code>ALT</code>) is automatically appended to the tail of <code>ASC</code> (such as <code>ASC1</code>, <code>ASC2</code>, and <code>ASC3</code>)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Lma.design">Lma.design</a></code>, <code><a href="#topic+rotation.design">rotation.design</a></code>, <code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+syn.res1">syn.res1</a></code>, <code><a href="#topic+syn.res2">syn.res2</a></code>, <code><a href="#topic+syn.res3">syn.res3</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='mwtp'>
Calculating the marginal willingness to pay
</h2><span id='topic+mwtp'></span><span id='topic+print.mwtp'></span>

<h3>Description</h3>

<p>This function calculates the marginal willingness to pay for the attributes and/or levels of the estimated model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mwtp(output, monetary.variables, nonmonetary.variables = NULL,
     nreplications = 10000,
     percentile.points = NULL,
     confidence.level = 0.95,
     method = "kr", 
     seed = NULL)

## S3 method for class 'mwtp'
print(x, digits = max(3, getOption("digits") - 3),
      scientific = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mwtp_+3A_output">output</code></td>
<td>

<p>An object containing the output from the function <code>clogit</code> in the package <span class="pkg">survival</span> or from the function <code>glm</code> in the package <span class="pkg">stats</span>.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_monetary.variables">monetary.variables</code></td>
<td>

<p>A vector containing the names of the monetary variables in the <code>output</code> used to calculate the MWTPs.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_nonmonetary.variables">nonmonetary.variables</code></td>
<td>

<p>A vector containing the names of the non-monetary variables in the <code>output</code> used to calculate the MWTPs. Its default is <code>NULL</code>.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_nreplications">nreplications</code></td>
<td>

<p>An integer value denoting the number of replications in the simulation method. The default value is set as <code>10000</code>.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_percentile.points">percentile.points</code></td>
<td>

<p>It is only kept for giving an error message regarding unused argument. It will be removed. The argument <code>confidence.level</code> is used instead.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_confidence.level">confidence.level</code></td>
<td>

<p>A value showing the confidence level (coefficient) of an empirical distribution of each MWTP. Its default vector is set as <code>0.95</code>, which indicates the lower and upper bounds of the 95 percent confidence interval.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_method">method</code></td>
<td>

<p>A character variable describing the method used for calculating confidence intervals of MWTPs. It is set as &quot;kr&quot; if the Krinsky and Robb's method is used; it is set as &quot;delta&quot; if the delta method is used.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_seed">seed</code></td>
<td>

<p>Seed for a random number generator.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_x">x</code></td>
<td>

<p>An object of S3 class &quot;mwtp.&quot;
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_digits">digits</code></td>
<td>

<p>A number of significant digits. See the function <code>format</code>.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_scientific">scientific</code></td>
<td>

<p>Whether MWTPs and their confidence intervals are encoded in scientific format. See the function <code>format</code>.
</p>
</td></tr>
<tr><td><code id="mwtp_+3A_...">...</code></td>
<td>

<p>Arguments passed to the function <code>format</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The definition of the marginal willingness to pay (MWTP) for a non-monetary variable provided by this function is <code class="reqn">-b_{nm}/b_{m}</code>; where, <code class="reqn">b_{nm}</code> is the estimated coefficient of the non-monetary variable, and <code class="reqn">b_{m}</code> is the estimated coefficient of a monetary variable. Further, confidence intervals for the MWTPs are calculated according to the simulation method proposed by Krinsky and Robb (1987) or the delta method (see, e.g., Hole 2007).
</p>
<p>In the Krinsky and Robb's method, <em>N</em> replications of a vector of the coefficients in the model are randomly sampled from a multivariate normal distribution with a vector of means and a variance-covariance matrix of the estimated coefficients. An empirical distribution for each of the MWTPs can be generated from <em>N</em> sets of the replicated coefficients, and a confidence interval for each of the MWTPs is identified on the basis of each empirical distribution.
</p>
<p>In the delta method, a variance of MWTP of the non-monetary variable is calculated using estimated coefficients and variance-covariance matrix regarding the non-monetary and monetary variables, and then a confidence interval for the MWTP is calculated.
</p>
<p>When the argument <code>nonmonetary.variables</code> is not set by the user, variables in the argument <code>output</code>&mdash;except for those assigned by the argument <code>monetary.variables</code>&mdash;are treated as non-monetary variables, and the MWTPs for these variables are calculated. In the model that assumes alternative-specific attribute variables (that is, a labeled type choice experiment design), variables in the argument <code>output</code> are classified into monetary and non-monetary variables according to the alternatives. Therefore, the argument <code>monetary.variables</code> is set as a vector, whereas the argument <code>nonmonetary.variables</code> is set as a list of vectors.
</p>
<p>In version 0.3-0 and later versions, this function is also available for binary choice models estimated using the function <code>glm</code>.
</p>


<h3>Value</h3>

<p>This function returns an object of S3 class &quot;mwtp&quot; that is a list with the following components.
</p>
<table>
<tr><td><code>mwtp.table</code></td>
<td>
<p>A matrix containing the MWTPs for the non-monetary attribute variables and confidence intervals for each of the MWTPs.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>A character variable containing the method used for calculating confidence intervals of MWTPs.</p>
</td></tr>
<tr><td><code>mwtps</code></td>
<td>
<p>A matrix containing empirical distributions of the MWTPs. It is included when the Krinsky and Robb's method is used.</p>
</td></tr> 
<tr><td><code>repb</code></td>
<td>
<p>A matrix containing N sets of replicated coefficients. It is included when the Krinsky and Robb's method is used.</p>
</td></tr> 
</table>
<p>The object <code>mwtps</code> can be used for a function <code>mded</code> in the package <span class="pkg">mded</span> that calculates differences between two independent/dependent empirical distributions of the MWTPs.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>, <code><a href="mded.html#topic+mded">mded</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='pork'>
Synthetic respondent data set: consumers' valuation of pork
</h2><span id='topic+pork'></span>

<h3>Description</h3>

<p>Data set artificially created for an example based on a labeled DCE design. This example illustrates consumers' valuation of pork.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(pork)
</code></pre>


<h3>Format</h3>

<p>Data frames with 200 respondents on the following 6 variables.
</p>

<dl>
<dt><code>ID</code></dt><dd><p>Identification number of respondents.</p>
</dd>
<dt><code>BLOCK</code></dt><dd><p>Serial number of blocks to which each respondent had been assigned.</p>
</dd>
<dt><code>q1</code></dt><dd><p>Response to choice experiment question 1.</p>
</dd>
<dt><code>q2</code></dt><dd><p>Response to choice experiment question 2.</p>
</dd>
<dt><code>q3</code></dt><dd><p>Response to choice experiment question 3.</p>
</dd>
<dt><code>q4</code></dt><dd><p>Response to choice experiment question 4.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+make.design.matrix">make.design.matrix</a></code>, <code><a href="#topic+Lma.design">Lma.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)

if(getRversion() &gt;= "3.6.0") RNGkind(sample.kind = "Rounding")

d.pork &lt;- Lma.design(
  attribute.names = list(
    Price = c("100", "130", "160", "190")),
  nalternatives = 3,
  nblocks = 4,
  row.renames = FALSE,
  seed = 987)

data(pork)

dm.pork &lt;- make.design.matrix(
  choice.experiment.design = d.pork,
  optout = TRUE,
  continuous.attributes = c("Price"),
  unlabeled = FALSE)

ds.pork &lt;- make.dataset(
  respondent.dataset = pork,
  choice.indicators =
    c("q1", "q2", "q3", "q4"),
  design.matrix = dm.pork)

fm.pork &lt;- RES ~ ASC1 + Price1 +
                 ASC2 + Price2 +
                 ASC3 + Price3 +
                 strata(STR)
out.pork &lt;- clogit(fm.pork, data = ds.pork)
out.pork
</code></pre>

<hr>
<h2 id='questionnaire'>
Converting a choice experiment design into a choice experiment questionnaire
</h2><span id='topic+questionnaire'></span>

<h3>Description</h3>

<p>This function converts a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> into choice experiment questions used in a questionnaire survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>questionnaire(choice.experiment.design,
              common = NULL,
              quote = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="questionnaire_+3A_choice.experiment.design">choice.experiment.design</code></td>
<td>

<p>A data frame containing a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code>.
</p>
</td></tr>
<tr><td><code id="questionnaire_+3A_common">common</code></td>
<td>

<p>A vector containing a fixed combination of attribute-levels corresponding to a common base option in each question. If there is no common base option, the argument is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="questionnaire_+3A_quote">quote</code></td>
<td>

<p>A logical variable indicating whether or not the attribute-levels in each question are printed wth quotation marks.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function converts a choice experiment design created by the function <code>Lma.design</code> or <code>rotation.design</code> into choice experiment questions used in a questionnaire survey.
</p>


<h3>Value</h3>

<p>Choice experiment questions converted from the choice experiment design are returned.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Lma.design">Lma.design</a></code>, <code><a href="#topic+rotation.design">rotation.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='rice'>
Synthetic respondent data set: consumers' valuation of rice
</h2><span id='topic+rice'></span>

<h3>Description</h3>

<p>Data set artificially created for an example based on an unlabeled DCE design. This example illustrates consumers' valuation of rice.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(rice)
</code></pre>


<h3>Format</h3>

<p>Data frames with 100 respondents on the following 12 variables.
</p>

<dl>
<dt><code>ID</code></dt><dd><p>Identification number of respondents.</p>
</dd>
<dt><code>BLOCK</code></dt><dd><p>Serial number of blocks to which each respondent had been assigned.</p>
</dd>
<dt><code>q1</code></dt><dd><p>Response to choice experiment question 1.</p>
</dd>
<dt><code>q2</code></dt><dd><p>Response to choice experiment question 2.</p>
</dd>
<dt><code>q3</code></dt><dd><p>Response to choice experiment question 3.</p>
</dd>
<dt><code>q4</code></dt><dd><p>Response to choice experiment question 4.</p>
</dd>
<dt><code>q5</code></dt><dd><p>Response to choice experiment question 5.</p>
</dd>
<dt><code>q6</code></dt><dd><p>Response to choice experiment question 6.</p>
</dd>
<dt><code>q7</code></dt><dd><p>Response to choice experiment question 7.</p>
</dd>
<dt><code>q8</code></dt><dd><p>Response to choice experiment question 8.</p>
</dd>
<dt><code>q9</code></dt><dd><p>Response to choice experiment question 9.</p>
</dd>
<dt><code>F</code></dt><dd><p>Female dummy variable (<code>1</code> = Female, otherwise <code>0</code>).</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+make.design.matrix">make.design.matrix</a></code>, <code><a href="#topic+rotation.design">rotation.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)

if(getRversion() &gt;= "3.6.0") RNGkind(sample.kind = "Rounding")

d.rice &lt;- rotation.design(
  attribute.names = list(
    Region = c("RegA", "RegB", "RegC"),
    Cultivation = c("Conv", "NoChem", "Organic"),
    Price = c("1700", "2000", "2300")),
  nalternatives = 2,
  nblocks = 1,
  row.renames = FALSE,
  randomize = TRUE,
  seed = 987)

data(rice)

dm.rice &lt;- make.design.matrix(
  choice.experiment.design = d.rice,
  optout = TRUE,
  categorical.attributes = c("Region", "Cultivation"),
  continuous.attributes = c("Price"),
  unlabeled = TRUE)

ds.rice &lt;- make.dataset(
  respondent.dataset = rice,
  choice.indicators =
    c("q1", "q2", "q3", "q4", "q5",
      "q6", "q7", "q8", "q9"),
  design.matrix = dm.rice)

fm.rice &lt;- RES ~ ASC + RegB + RegC + NoChem + Organic +
           NoChem:F + Organic:F + Price + strata(STR)
out.rice &lt;- clogit(fm.rice, data = ds.rice)
out.rice
</code></pre>

<hr>
<h2 id='rotation.design'>
Creating a choice experiment design using the rotation or mix-and-match method
</h2><span id='topic+rotation.design'></span>

<h3>Description</h3>

<p>This function creates a choice experiment design according to the rotation or mix-and-match method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotation.design(candidate.array = NULL, attribute.names, 
                nalternatives, nblocks, row.renames = TRUE, 
                randomize = FALSE, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rotation.design_+3A_candidate.array">candidate.array</code></td>
<td>

<p>A data frame containing an array created by the user. Normally, when this function is used, this argument does not need to be set by the user.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_attribute.names">attribute.names</code></td>
<td>

<p>A list of the names of attributes and levels.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_nalternatives">nalternatives</code></td>
<td>

<p>An integer value describing the number of alternatives per choice set, excluding an opt-out alternative such as a &quot;none of these&quot; or common base alternative.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_nblocks">nblocks</code></td>
<td>

<p>An integer value describing the number of blocks into which a choice experiment design is divided.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_row.renames">row.renames</code></td>
<td>

<p>A logical variable describing whether or not the row names of a choice experiment design created by this function are changed. When its value is <code>TRUE</code> (default), integer values are assigned to the row names starting from 1. When its value is <code>FALSE</code>, the row names are the same as those of an array created by the function <code>oa.design</code> (included in the package <span class="pkg">DoE.base</span>) via the function <code>rotation.design</code>, or those of an array assigned to the argument <code>candidate.array</code> by the user.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_randomize">randomize</code></td>
<td>

<p>If this argument is <code>TRUE</code> (default), the function executes the mix-and-match method. If <code>FALSE</code>, the function executes the rotation method.
</p>
</td></tr>
<tr><td><code id="rotation.design_+3A_seed">seed</code></td>
<td>

<p>Seed for a random number generator.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates an unlabeled (generic) choice experiment design according to the rotation or mix-and-match method (Johnson et al. 2007) (see &quot;Details&quot; for the function <code>Lma.design</code> about the types of choice experiment design). Each method depends on an orthogonal main-effect array generated by the function <code>oa.design</code> in the package <span class="pkg">DoE.base</span> or an arbitrary array set by the user.
</p>
<p>The rotation method uses an orthogonal main-effect array as the first alternative in each choice set; this method creates one or more additional alternative(s) by adding a constant to each attribute level of the first alternative; the <em>k</em>th(&gt;= 2) alternative in the <em>j</em>th (= 1, 2, ..., J) choice set is created by adding one to each of the <em>m</em> attributes in the <em>k</em> - 1 th alternative in the <em>j</em>th choice set. If the level of the attribute in the <em>k</em> - 1 th alternative is maximum, then the level of the attribute in the <em>k</em> th alternative is assigned the minimum value. 
</p>
<p>The mix-and-match method modifies the rotation method by introducing the randomizing process. After placing a set of <em>N</em> alternatives created from the orthogonal main-effect array into an urn, one or more additional set(s) of <em>N</em> alternatives are created using the rotation method and placed into different urn(s). A choice set is generated by selecting one alternative from each urn at random. This selection process is repeated, without replacement, until all the alternatives are assigned to <em>N</em> choice sets. These <em>N</em> choice sets correspond to a choice experiment design.
</p>
<p>When the mix-and-match method is implemented by this function, the argument <code>randomize</code> is set as <code>TRUE</code> (default). When the rotation method is implemented by this function, the argument is set as <code>FALSE</code>.
</p>
<p>When this function is used, the combination of attributes and attribute levels, the number of alternatives per choice set excluding an opt-out or common base option, and the number of blocks are respectively assigned to the arguments.
</p>
<p>The combination of attributes and attribute levels are assigned to the argument <code>attribute.names</code> in list format. For example, the alternative has three attributes, each of which has three levels: an attribute X with the three levels of x1, x2, and x3; an attribute Y with the three levels of y1, y2, and y3; and an attribute Z with the three levels of 10, 20, and 30. In this case, the argument is set as follows:
</p>
<p><code>attribute.names = list(X = c("x1", "x2", "x3"),</code> <br />
<code>Y = c("y1", "y2", "y3"), Z = c("10", "20", "30"))</code>
</p>
<p>The number of alternatives per choice set is defined by the argument <code>nalternatives</code>: the number of alternatives does not include an opt-out option such as a &quot;none of these&quot; or a common base option.
</p>
<p>Similar to the function <code>Lma.design</code>, this function can divide a choice experiment design into two or more blocks based on the argument <code>nblocks</code>. A choice experiment design is randomly divided into <code>nblocks</code> blocks; therefore, <code>nblocks</code> must be divisors of the number of choice sets included in the choice experiment design.
</p>
<p>Under default settings, this function uses an orthogonal main-effect array that is automatically produced by the function <code>oa.design</code> based on the argument <code>attribute.names</code> to create a choice experiment design. However, when there is no array corresponding to the argument <code>attribute.names</code>, the function <code>oa.design</code> returns a full factorial based on the argument <code>attribute.names</code> (See help for the function <code>oa.design</code> in the packge <span class="pkg">DoE.base</span>). On the other hand, when this function does not create a choice experiment design matching the user's requirements, the user might achieve it by assigning an arbitrary (user-defined) array to the argument <code>candidate.array</code>: this function uses the array to create a choice experiment design. When the user-defined array is used, the last column of the array must contain a column for dividing the design based on the argument <code>nblocks</code>. The arguments <code>attribute.names</code> and <code>nblocks</code> must also be assigned according to the array.
</p>


<h3>Value</h3>

<p>This function returns an object of S3 class &quot;cedes&quot; (see <code>Lma.design</code>) that is a list with the following components.
</p>
<table>
<tr><td><code>alternatives</code></td>
<td>
<p>A list of objects, <code>alt.j</code>: the <em>j</em>th alternative in each choice set created by this function. Each of <code>alt.j</code> includes a variable <code>BLOCK</code> describing the serial number of blocks, a variable <code>QES</code> describing the serial number of choice experiment questions for each value of the variable <code>BLOCK</code>, a variable <code>ALT</code> describing the serial number of alternatives for each value of the <code>QES</code> variable, and attribute variables corresponding to the argument <code>attribute.names</code>.</p>
</td></tr>
<tr><td><code>candidate</code></td>
<td>
<p>A candidate array used for creating a choice experiment design, which is generated using the <code>oa.design</code> function in the <span class="pkg">DoE.base</span> package or which the user sets for the argument <code>candidate.array</code>. When <code>nblocks</code> &gt;= 2, the last column in this value (<code>candidate</code>) shows a factor that is used for blocking.</p>
</td></tr>
<tr><td><code>design.information</code></td>
<td>
<p>Information related to the choice experiment design created by this function, which is used as arguments in post-processing functions, such as the functions <code>questionnaire</code> and <code>make.design.matrix</code>. This list includes objects such as the number of blocks into which the choice experiment design is divided (<code>nblocks</code>), the number of questions per block (<code>nquestions</code>), the number of alternatives per choice set excluding an opt-out or common base option (<code>nalternatives</code>), and the number of attributes per alternative (<code>nattributes</code>).</p>
</td></tr>
</table>
<p>An error message is displayed when the argument <code>nblocks</code> does not match a choice experiment design. In such a case, the argument <code>nblocks</code> is set to be a divisior of the number of rows of the choice experiment design. Ohter messages are frequently shown immediately after executing this function when it works properly. These messages are taken from the function <code>oa.design</code> and may be valuable to a user who wishes to define the original array and assign it the argument <code>candidate.array</code>.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Lma.design">Lma.design</a></code>, <code><a href="#topic+syn.res1">syn.res1</a></code>, <code><a href="DoE.base.html#topic+oa.design">oa.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

<hr>
<h2 id='rural'>
Synthetic respondent data set: residents' valuation of rural environment conservation plan
</h2><span id='topic+rural'></span>

<h3>Description</h3>

<p>Data set artificially created for an example based on a BDCE design. This example illustrates residents' valuation of rural environment conservation plan.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(rural)
</code></pre>


<h3>Format</h3>

<p>Data frames with 400 respondents on the following 7 variables.
</p>

<dl>
<dt><code>ID</code></dt><dd><p>Identification number of respondents.</p>
</dd>
<dt><code>BLOCK</code></dt><dd><p>Serial number of blocks to which each respondent had been assigned.</p>
</dd>
<dt><code>q1</code></dt><dd><p>Response to choice experiment question 1.</p>
</dd>
<dt><code>q2</code></dt><dd><p>Response to choice experiment question 2.</p>
</dd>
<dt><code>q3</code></dt><dd><p>Response to choice experiment question 3.</p>
</dd>
<dt><code>q4</code></dt><dd><p>Response to choice experiment question 4.</p>
</dd>
<dt><code>Region</code></dt><dd><p>Region variable denoting whether the respondent was sampled from region 1 (<code>Region = 1</code>) or region 2 (<code>Region = 2</code>).</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+make.design.matrix">make.design.matrix</a></code>, <code><a href="#topic+Lma.design">Lma.design</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(stats)

if(getRversion() &gt;= "3.6.0") RNGkind(sample.kind = "Rounding")

d.rural &lt;- Lma.design(
  attribute.names = list(
    Area = c("20", "40", "60", "80"),
    Facility = c("None", "Agr", "Env", "Rec"),
    Tax = c("1000", "3000", "5000", "7000")),
  nalternatives = 1,
  nblocks = 4,
  row.renames = FALSE,
  seed = 987)

common.alt &lt;- c(Area = "0", Facility = "None", Tax = "0")

dm.rural &lt;- make.design.matrix(
  choice.experiment.design = d.rural,
  optout = FALSE,
  categorical.attributes = c("Facility"),
  continuous.attributes = c("Area", "Tax"),
  unlabeled = TRUE,
  common = common.alt,
  binary = TRUE)

data(rural)
rural1 &lt;- subset(rural, Region == 1)
rural2 &lt;- subset(rural, Region == 2)

ds.rural1 &lt;- make.dataset(
  respondent.dataset = rural1,
  choice.indicators =
    c("q1", "q2", "q3", "q4"),
  design.matrix = dm.rural,
  detail = FALSE)

ds.rural2 &lt;- make.dataset(
  respondent.dataset = rural2,
  choice.indicators =
    c("q1", "q2", "q3", "q4"),
  design.matrix = dm.rural,
  detail = FALSE)

fm.rural &lt;- RES ~ Agr + Env + Rec + Area + Tax

out.rural1 &lt;- glm(fm.rural,
                  family = binomial(link = "logit"),
                  data = ds.rural1)
summary(out.rural1)

out.rural2 &lt;- glm(fm.rural,
                  family = binomial(link = "logit"),
                  data = ds.rural2)
summary(out.rural2)
</code></pre>

<hr>
<h2 id='syn.res1+2C+20syn.res2+2C+20syn.res3'>
Synthetic respondent data sets
</h2><span id='topic+syn.res1'></span><span id='topic+syn.res2'></span><span id='topic+syn.res3'></span>

<h3>Description</h3>

<p>Data sets artificially created for the &quot;Examples&quot; in this package. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(syn.res1)
data(syn.res2)
data(syn.res3)
</code></pre>


<h3>Format</h3>

<p>Data frames with 100 respondents on the following 11 or 12 variables.
</p>

<dl>
<dt><code>ID</code></dt><dd><p>Identification number of respondents.</p>
</dd>
<dt><code>BLOCK</code></dt><dd><p>Serial number of blocks to which each respondent had been assigned.</p>
</dd>
<dt><code>q1</code></dt><dd><p>Response to choice experiment question 1.</p>
</dd>
<dt><code>q2</code></dt><dd><p>Response to choice experiment question 2.</p>
</dd>
<dt><code>q3</code></dt><dd><p>Response to choice experiment question 3.</p>
</dd>
<dt><code>q4</code></dt><dd><p>Response to choice experiment question 4.</p>
</dd>
<dt><code>q5</code></dt><dd><p>Response to choice experiment question 5.</p>
</dd>
<dt><code>q6</code></dt><dd><p>Response to choice experiment question 6.</p>
</dd>
<dt><code>q7</code></dt><dd><p>Response to choice experiment question 7.</p>
</dd>
<dt><code>q8</code></dt><dd><p>Response to choice experiment question 8.</p>
</dd>
<dt><code>q9</code></dt><dd><p>Response to choice experiment question 9.</p>
</dd>
<dt><code>F</code></dt><dd><p>Female dummy variable (<code>1</code> = Female, otherwise <code>0</code>) that is included only in <code>syn.res1</code>.</p>
</dd>
</dl>



<h3>Details</h3>

<p>The &quot;Examples&quot; for each function in this package is based on three hypothetical cases in which choice experiments are applied to measure consumers' valuation of an agricultural product (Aizaki 2012). 
</p>
<p>The agricultural product has three attributes: (1) the region of origin: this attribute has three levels&mdash;&quot;Region A,&quot; &quot;Region B,&quot; and &quot;Region C.&quot;; (2) the eco-friendly label: this describe the three types of cultivation method&mdash;&quot;Conv. (conventional cultivation method),&quot; &quot;More (more eco-friendly cultivation method),&quot; and &quot;Most (most eco-friendly cultivation method); and (3) the price per piece of the product&mdash;&quot;$1,&quot; &quot;$1.1,&quot; &quot;$1.2.&quot; 
</p>

<ul>
<li><p><code>syn.res1</code> (Unlabeled choice experiments)
</p>
<p>The data set <code>syn.res1</code> is based on a case in which an unlabeled choice experiment design created by the mix-and-match method is used in a questionnaire survey. A total of 100 respondents were assumed to have been requested to select their most preferred from among two agricultural products and the option &quot;none of these.&quot;
</p>

<table>
<tr>
 <td style="text-align: center;"> 
Q1. Please select your most preferred alternative from the following:
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;">
                 </td><td style="text-align: left;"> Product 1 </td><td style="text-align: left;"> Product 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
Region of origin </td><td style="text-align: left;"> Region B </td><td style="text-align: left;"> Region C </td>
</tr>
<tr>
 <td style="text-align: left;">
Eco-friendly </td><td style="text-align: left;"> More </td><td style="text-align: left;"> Most </td>
</tr>
<tr>
 <td style="text-align: left;">
Price </td><td style="text-align: left;"> $1.1 </td><td style="text-align: left;"> $1.2
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;"> 
</td><td style="text-align: left;"> 1. I select product 1. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 2. I select product 2. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 3. I select none of these. 
</td>
</tr>

</table>

<p>A total of 9 choice experiment questions are created by the function <code>rotation.design</code> . Each respondent had to respond to a total of 9 choice experiment questions, implying that the sample size of the analysis based on their responses was 900 (= 9 choice experiment questions per respondent * 100 respondents). In the example, the effect of the respondents' gender on their valuations of the cultivation methods was also examined (see &quot;Examples&quot; for the function <code>make.dataset</code>). See the first case in &quot;Example&quot; for the function <code>make.dataset</code>.
</p>
</li>
<li><p><code>syn.res2</code> (Labeled choice experiments)
</p>
<p>The data set <code>syn.res2</code> is based on a case in which a labeled choice experiment design created by the <em>L^MA</em> method is used in a questionnaire survey. A total of 100 respondents were assumed to have been requested to select their most preferred from among three agricultural products and the option &quot;none of these.&quot;
</p>

<table>
<tr>
 <td style="text-align: center;">
Q1. Please select your most preferred alternative from the following:
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;">
             </td><td style="text-align: left;"> Region A </td><td style="text-align: left;"> Region B </td><td style="text-align: left;"> Region C </td>
</tr>
<tr>
 <td style="text-align: left;">
Eco-friendly </td><td style="text-align: left;"> Most </td><td style="text-align: left;"> Conv. </td><td style="text-align: left;"> More </td>
</tr>
<tr>
 <td style="text-align: left;">
Price </td><td style="text-align: left;"> $1.1 </td><td style="text-align: left;"> $1 </td><td style="text-align: left;"> $1.1
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 1. I select the Region A product. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 2. I select the Region B product. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 3. I select the Region C product. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 4. I select none of these. 
</td>
</tr>

</table>

<p>Although the agricultural products have also three attributes and their levels mentioned above, the region of origin attribute is treated as an alternative specific attribute: the first, second, and third alternatives in a choice set always read as &quot;Region A,&quot; &quot;Region B,&quot; and &quot;Region C,&quot; respectively. 
</p>
<p>A total of 18 choice experiment questions were created by the function <code>Lma.design</code> and divided into two blocks: this means that two types of questionnaire were created, each of which was randomly assigned to the respondents. Therefore, the sample size of the analysis based on their responses was 900 (= 9 choice experiment questions per respondent * 100 respondents). See the second case in &quot;Examples&quot; for the function <code>make.dataset</code>.
</p>
</li>
<li><p><code>syn.res3</code> (Binary choice experiments with an opt-out option)
</p>
<p>The data set <code>syn.res3</code> is based on a case in which a binary choice experiment design created by the <em>L^MA</em> method is used in a questionnaire survey. A total of 100 respondents were assumed to have been requested to decide whether they select an agricultural product or not.
</p>

<table>
<tr>
 <td style="text-align: center;"> 
Q1. Would you like to purchase the following?
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;">
                 </td><td style="text-align: left;"> Product </td>
</tr>
<tr>
 <td style="text-align: left;">
Region of origin </td><td style="text-align: left;"> Region A </td>
</tr>
<tr>
 <td style="text-align: left;">
    Eco-friendly </td><td style="text-align: left;"> Conv. </td>
</tr>
<tr>
 <td style="text-align: left;">
           Price </td><td style="text-align: left;"> $1 
</td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 1. Yes. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> 2. No. 
</td>
</tr>

</table>

<p>A total of 9 binary choice experiment questions are created by the function <code>Lma.design</code>. Each respondent had to respond to a total of 9 binary choice experiment questions, implying that the sample size of the analysis based on their responses was 900 (= 9 binary choice experiment questions per respondent * 100 respondents). See the last case in &quot;Examples&quot; for the function <code>make.dataset</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.dataset">make.dataset</a></code>, <code><a href="#topic+rotation.design">rotation.design</a></code>, <code><a href="#topic+Lma.design">Lma.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See "Examples" for the function make.dataset.
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
