<!DOCTYPE html><html><head><title>Help for package tidygam</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tidygam}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#gest'><p>Number of gestures by infants at 10, 11 and 12 months</p></a></li>
<li><a href='#get_difference'><p>Get difference between two smooths</p></a></li>
<li><a href='#plot.tidygam'><p>Plot methods for tidygam objects</p></a></li>
<li><a href='#plot.tidygam.diff'><p>Plot methods for tidygam.diff objects</p></a></li>
<li><a href='#predict_gam'><p>Get predictions from a GAM model</p></a></li>
<li><a href='#struct'><p>ERP to structural violation in music and language</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Prediction and Plotting of Generalised Additive Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-05-08</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions that compute predictions from Generalised
    Additive Models (GAMs) fitted with 'mgcv' and return them as a tibble.
    These can be plotted with a generic plot()-method that uses 'ggplot2' or
    plotted as any other data frame. The main function is predict_gam().</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/stefanocoretta/tidygam">https://github.com/stefanocoretta/tidygam</a>,
<a href="https://stefanocoretta.github.io/tidygam/">https://stefanocoretta.github.io/tidygam/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stefanocoretta/tidygam/issues">https://github.com/stefanocoretta/tidygam/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, ggplot2, glue, insight, magrittr, mgcv, rlang,
stringr, tibble, tidyr, tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en_GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-08 13:02:33 UTC; ste</td>
</tr>
<tr>
<td>Author:</td>
<td>Stefano Coretta [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stefano Coretta &lt;stefano.coretta@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-09 08:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='gest'>Number of gestures by infants at 10, 11 and 12 months</h2><span id='topic+gest'></span>

<h3>Description</h3>

<p>This data table contains counts of three type of gestures performed by 60
infants  from Bengali, Chinese and British backgrounds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gest
</code></pre>


<h3>Format</h3>

<p>A tibble with 540 observations and 5 variables: </p>

<dl>
<dt>dyad</dt><dd><p>Unique parent/infant dyad ID.</p>
</dd>
<dt>background</dt><dd><p>Cultural background of dyad.</p>
</dd>
<dt>months</dt><dd><p>Time point in infant months.</p>
</dd>
<dt>gesture</dt><dd><p>Type of gesture.</p>
</dd>
<dt>count</dt><dd><p>Number of gestures.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/cdev.13406">doi:10.1111/cdev.13406</a>
</p>

<hr>
<h2 id='get_difference'>Get difference between two smooths</h2><span id='topic+get_difference'></span>

<h3>Description</h3>

<p>Get difference between two smooths
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_difference(
  model,
  series,
  compare,
  values = NULL,
  exclude_terms = NULL,
  length_out = 25,
  ci_z = 1.96
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_difference_+3A_model">model</code></td>
<td>
<p>A <code>gam</code> or <code>bam</code> model object.</p>
</td></tr>
<tr><td><code id="get_difference_+3A_series">series</code></td>
<td>
<p>A string specifying the variable that corresponds to the series
to be plotted on the $x$-axis. If a string is given, the other numeric
variables in the model are set to their mean value, unless specific values
are given in <code>values</code>. If a character vector of two strings is given, the
two variables will be taken as the elements of a tensor product smooth.
This allows the user to plot 2D raster plots.</p>
</td></tr>
<tr><td><code id="get_difference_+3A_compare">compare</code></td>
<td>
<p>A named list of factor levels to compare.</p>
</td></tr>
<tr><td><code id="get_difference_+3A_values">values</code></td>
<td>
<p>User supplied values for specific variables as a named list.</p>
</td></tr>
<tr><td><code id="get_difference_+3A_exclude_terms">exclude_terms</code></td>
<td>
<p>Terms to be excluded from the prediction. Term names
should be given as they appear in the model summary (for example,
<code>"s(x0,x1)"</code>).</p>
</td></tr>
<tr><td><code id="get_difference_+3A_length_out">length_out</code></td>
<td>
<p>An integer indicating how many values to use along the
numeric variables for predicting the response (the default is <code>10</code>).</p>
</td></tr>
<tr><td><code id="get_difference_+3A_ci_z">ci_z</code></td>
<td>
<p>The z-value for calculating the CIs (the default is <code>1.96</code> for
95 percent CI).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the difference smooth.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(mgcv)
set.seed(10)
data &lt;- gamSim(4)
model &lt;- gam(y ~ s(x2, by = fac) + s(x0), data = data)

get_difference(model, "x2", list(fac = c("1", "2")))
</code></pre>

<hr>
<h2 id='plot.tidygam'>Plot methods for tidygam objects</h2><span id='topic+plot.tidygam'></span>

<h3>Description</h3>

<p>Plotting methods for <code>tidygam</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tidygam'
plot(x, series = NULL, comparison = NULL, raster_interp = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.tidygam_+3A_x">x</code></td>
<td>
<p>A <code>tidygam</code> object (see <code><a href="#topic+predict_gam">predict_gam()</a></code>).</p>
</td></tr>
<tr><td><code id="plot.tidygam_+3A_series">series</code></td>
<td>
<p>A string specifying the variable that corresponds to the series
to be plotted on the $x$-axis. If a string is given, the other numeric
variables in the model are set to their mean value, unless specific values
are given in <code>values</code>. If a character vector of two strings is given, the
two variables will be taken as the elements of a tensor product smooth.
This allows the user to plot 2D raster plots.</p>
</td></tr>
<tr><td><code id="plot.tidygam_+3A_comparison">comparison</code></td>
<td>
<p>Name of a categorical predictor to compare as a string.</p>
</td></tr>
<tr><td><code id="plot.tidygam_+3A_raster_interp">raster_interp</code></td>
<td>
<p>Whether to linearly interpolate when plotting a tensor
product smooth/interaction. It makes sense only when <code>series</code> has two
variables. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot.tidygam_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>plot()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(mgcv)
set.seed(10)
sim_data &lt;- gamSim(4)

model_1 &lt;- gam(y ~ s(x2, by = fac) + s(x0), data = sim_data)

preds_1 &lt;- predict_gam(model_1, length_out = 50, exclude_terms = "s(x0)")
plot(preds_1, "x2")

preds_2 &lt;- predict_gam(model_1, length_out = 100, values = list(x0 = 0))
plot(preds_2, "x2", "fac")
library(ggplot2)
plot(preds_2, "x2", "fac") +
  scale_fill_brewer(type = "qual") +
  scale_color_brewer(type = "qual")

# Plotting tensor product smooths/interactions
model_2 &lt;- gam(y ~ te(x0, x2, by = fac), data = sim_data)
preds_3 &lt;- predict_gam(model_2)
preds_3 %&gt;% plot(series = c("x0", "x2"), comparison = "fac")
</code></pre>

<hr>
<h2 id='plot.tidygam.diff'>Plot methods for tidygam.diff objects</h2><span id='topic+plot.tidygam.diff'></span>

<h3>Description</h3>

<p>Plotting methods for <code>tidygam.diff</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tidygam.diff'
plot(x, ..., sig = TRUE, sig_col = "red", sig_alpha = 0.25)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.tidygam.diff_+3A_x">x</code></td>
<td>
<p>A <code>tidygam.diff</code> object (see <code><a href="#topic+get_difference">get_difference()</a></code>).</p>
</td></tr>
<tr><td><code id="plot.tidygam.diff_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>plot()</code>.</p>
</td></tr>
<tr><td><code id="plot.tidygam.diff_+3A_sig">sig</code></td>
<td>
<p>Shade the interval(s) where the difference smooth does not include 0 (default is <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="plot.tidygam.diff_+3A_sig_col">sig_col</code></td>
<td>
<p>Colour for the shading (default is <code>"red"</code>).</p>
</td></tr>
<tr><td><code id="plot.tidygam.diff_+3A_sig_alpha">sig_alpha</code></td>
<td>
<p>Alpha level for the shading (default is <code>0.25</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(mgcv)
set.seed(10)
data &lt;- gamSim(4)
model &lt;- gam(y ~ s(x2, by = fac) + s(x0), data = data)

model_diff &lt;- get_difference(model, "x2", list(fac = c("1", "2")))
plot(model_diff)
</code></pre>

<hr>
<h2 id='predict_gam'>Get predictions from a GAM model</h2><span id='topic+predict_gam'></span>

<h3>Description</h3>

<p>Return predictions from a GAM model generated with mgcv. The output can be plotted with <code>plot()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_gam(
  model,
  length_out = 10,
  values = NULL,
  series = NULL,
  exclude_terms = NULL,
  ci_z = 1.96,
  tran_fun = NULL,
  separate = NULL,
  sep_by = "\\."
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_gam_+3A_model">model</code></td>
<td>
<p>A <code>gam</code> or <code>bam</code> model object.</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_length_out">length_out</code></td>
<td>
<p>An integer indicating how many values to use along the
numeric variables for predicting the response (the default is <code>10</code>).</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_values">values</code></td>
<td>
<p>User supplied values for specific variables as a named list.</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_series">series</code></td>
<td>
<p>A string specifying the variable that corresponds to the series
to be plotted on the $x$-axis. If a string is given, the other numeric
variables in the model are set to their mean value, unless specific values
are given in <code>values</code>. If a character vector of two strings is given, the
two variables will be taken as the elements of a tensor product smooth.
This allows the user to plot 2D raster plots.</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_exclude_terms">exclude_terms</code></td>
<td>
<p>Terms to be excluded from the prediction. Term names
should be given as they appear in the model summary (for example,
<code>"s(x0,x1)"</code>).</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_ci_z">ci_z</code></td>
<td>
<p>The z-value for calculating the CIs (the default is <code>1.96</code> for
95 percent CI).</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_tran_fun">tran_fun</code></td>
<td>
<p>Function to use for transforming the predicted values and CIs.</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_separate">separate</code></td>
<td>
<p>Names list of factor interaction variables to be separated.</p>
</td></tr>
<tr><td><code id="predict_gam_+3A_sep_by">sep_by</code></td>
<td>
<p>Character to separate by (the default is <code style="white-space: pre;">&#8288;\\.&#8288;</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with predictions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(mgcv)
set.seed(10)

sim_data_1 &lt;- gamSim(1, n = 200, scale = 2)
model &lt;- gam(y ~ x0 + s(I(x1^2)) + s(x2) + offset(x3), data = sim_data_1)
predict_gam(model)
predict_gam(model, values = list(x0 = mean(sim_data_1$x0)))
predict_gam(model, series = "x2")
predict_gam(model, exclude_terms = "s(I(x1^2))")

# By-variables
sim_data_2 &lt;- gamSim(4)
model_2 &lt;- gam(y ~ s(x2, by = fac) + s(x0), data = sim_data_2)
predict_gam(model_2)

# Poisson data
sim_data_3 &lt;- sim_data_2
sim_data_3$y &lt;- round(sim_data_2$y) + 20
model_3 &lt;- gam(y ~ s(x2, by = fac), data = sim_data_3, family = poisson)
predict_gam(model_3, length_out = 50)
predict_gam(model_3, length_out = 50, tran_fun = exp)

# Bivariate smooths
model_4 &lt;- gam(y ~ te(x1, x2), data = sim_data_1)
predict_gam(model_4)
</code></pre>

<hr>
<h2 id='struct'>ERP to structural violation in music and language</h2><span id='topic+struct'></span>

<h3>Description</h3>

<p>This data table contains ERP amplitude data from 39 subjects listening to speech and music.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>struct
</code></pre>


<h3>Format</h3>

<p>A tibble with 17160 observations and 6 variables: </p>

<dl>
<dt>t</dt><dd><p>Time from stimulus onset in milliseconds.</p>
</dd>
<dt>electrode</dt><dd><p>Electrode number.</p>
</dd>
<dt>voltage</dt><dd><p>Electrode voltage at time t.</p>
</dd>
<dt>stimulus.condition</dt><dd><p>Language vs music.</p>
</dd>
<dt>grammar.condition</dt><dd><p>Structural type (grammatical vs ungrammatical).</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.31234/osf.io/e9w3v">doi:10.31234/osf.io/e9w3v</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
