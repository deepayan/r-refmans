<!DOCTYPE html><html lang="en"><head><title>Help for package logib</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {logib}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#all_column_names'><p>Column names</p></a></li>
<li><a href='#analysis'><p>Run a Salary Analysis</p></a></li>
<li><a href='#build_custom_mapping'><p>Build column name mappings</p></a></li>
<li><a href='#build_errors'><p>Builds a dataframe of errors</p></a></li>
<li><a href='#check_data'><p>Check a dataframe</p></a></li>
<li><a href='#compute_age'><p>Compute age values</p></a></li>
<li><a href='#compute_years_of_service'><p>Compute years_of_service value</p></a></li>
<li><a href='#datalist_example'><p>Example datalist</p></a></li>
<li><a href='#download_datalist'><p>Download official Excel datalists</p></a></li>
<li><a href='#download_example_datalist'><p>Download official filled-in sample Excel datalists</p></a></li>
<li><a href='#feb29_between'><p>Check if the interval between two dates contains February 29</p></a></li>
<li><a href='#get_kennedy_estimator'><p>Kennedy Estimator</p></a></li>
<li><a href='#prepare_data'><p>Prepares a dataframe for the analysis</p></a></li>
<li><a href='#read_data'><p>Create the dataframe object used for the standard analysis model</p></a></li>
<li><a href='#read_official_excel'><p>Read official datalist or data_export Excel file</p></a></li>
<li><a href='#run_standard_analysis_model'><p>Standard Analysis Model</p></a></li>
<li><a href='#summary.analysis_model'><p>Summary of the Salary Analysis</p></a></li>
<li><a href='#transform_data'><p>Transform a data.frame according to the requirements of the model</p></a></li>
<li><a href='#within_a_year'><p>Check if the interval between two dates is less than a year</p></a></li>
<li><a href='#yearfrac'><p>Time difference between two dates in fractional year terms</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Salary Analysis by the Swiss Federal Office for Gender Equality</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of the Swiss Confederation's standard analysis
    model for salary analyses
    <a href="https://www.ebg.admin.ch/en/equal-pay-analysis-with-logib">https://www.ebg.admin.ch/en/equal-pay-analysis-with-logib</a> in R. The
    analysis is run at company-level and the model is intended for
    medium-sized and large companies. It can technically be used with 50
    or more employees (apprentices, trainees/interns and expats are not
    included in the analysis). Employees with at least 100 employees are
    required by the Gender Equality Act to conduct an equal pay analysis.
    This package allows users to run the equal salary analysis in R,
    providing additional transparency with respect to the methodology and
    simple automation possibilities.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>lubridate, readxl, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/admin-ebg/logib">https://github.com/admin-ebg/logib</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/admin-ebg/logib/issues">https://github.com/admin-ebg/logib/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-19 17:03:56 UTC; marcc</td>
</tr>
<tr>
<td>Author:</td>
<td>Marc Stöckli [aut, cre],
  Jonathan Chassot [aut],
  Jeremy Kolly [ctb],
  Federal Office for Gender Equality of Switzerland [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marc Stöckli &lt;marc.stoeckli@ebg.admin.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-20 09:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='all_column_names'>Column names</h2><span id='topic+all_column_names'></span>

<h3>Description</h3>

<p>List of column names used in the code, from the datalist and exportfiles
in all four languages (de, fr, it, en)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_column_names
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 3.
</p>

<hr>
<h2 id='analysis'>Run a Salary Analysis</h2><span id='topic+analysis'></span>

<h3>Description</h3>

<p>Runs a salary analysis according to the Swiss standard analysis model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analysis(
  data,
  reference_month,
  reference_year,
  usual_weekly_hours = NULL,
  female_spec = "F",
  male_spec = "M",
  age_spec = NULL,
  entry_date_spec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analysis_+3A_data">data</code></td>
<td>
<p>a data.frame of employees as produced by <code>read_data</code></p>
</td></tr>
<tr><td><code id="analysis_+3A_reference_month">reference_month</code></td>
<td>
<p>an integer representing the reference month, i.e. the
month for which we analyze the salaries</p>
</td></tr>
<tr><td><code id="analysis_+3A_reference_year">reference_year</code></td>
<td>
<p>an integer representing the reference year, i.e. the
year for which we analyze the salaries</p>
</td></tr>
<tr><td><code id="analysis_+3A_usual_weekly_hours">usual_weekly_hours</code></td>
<td>
<p>an optional numeric representing the usual weekly
working hours (missing values in <code>weekly_hours</code> are replaced by
<code>usual_weekly_hours</code>; if <code>NULL</code>, the missing values are not
replaced)</p>
</td></tr>
<tr><td><code id="analysis_+3A_female_spec">female_spec</code></td>
<td>
<p>an optional string or numeric representing the way women
are encoded in the <code>data</code></p>
</td></tr>
<tr><td><code id="analysis_+3A_male_spec">male_spec</code></td>
<td>
<p>an optional string or numeric representing the way men are
encoded in the <code>data</code></p>
</td></tr>
<tr><td><code id="analysis_+3A_age_spec">age_spec</code></td>
<td>
<p>an optional string to specify the way <code>age</code> is encoded
in the data (<code>NULL</code> will try to automatically infer the age format,
<code>"age"</code> implies that the <code>age</code> is specified as the age of a person,
<code>"birthyear"</code> implies that the <code>age</code> is specified as the year of
birth of a person, and <code>"birthdate"</code> implies that the <code>age</code> is
specified as the date of birth of a person)</p>
</td></tr>
<tr><td><code id="analysis_+3A_entry_date_spec">entry_date_spec</code></td>
<td>
<p>an optional string to specify the way
<code>entry_date</code> is encoded in the data (<code>NULL</code> will try to
automatically infer the format, <code>"years"</code> implies that the
<code>entry_date</code> is specified as the number of years for which the person
has been in the company, <code>"entry_year"</code> implies that the
<code>entry_date</code> is specified as the year of the entry date of the person,
<code>"entry_date"</code> implies that the age is specified as the date of entry
of the person)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of type <code>analysis_model</code> with the following
elements
</p>
<table role = "presentation">
<tr><td><code>params:</code></td>
<td>
<p>The set of original parameters passed to the
function</p>
</td></tr>
<tr><td><code>data_original:</code></td>
<td>
<p>The original data passed by the user in the
<code>data</code> parameter</p>
</td></tr>
<tr><td><code>data_clean:</code></td>
<td>
<p>The cleaned up data which was used for the
analysis</p>
</td></tr>
<tr><td><code>data_errors:</code></td>
<td>
<p>The list of errors which were found upon
checking the data</p>
</td></tr>
<tr><td><code>results:</code></td>
<td>
<p>The result of the standard analysis model</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>results &lt;- analysis(data = datalist_example, reference_month = 1,
   reference_year = 2019, usual_weekly_hours = 40, female_spec = "F",
   male_spec = "M", age_spec = "age")

</code></pre>

<hr>
<h2 id='build_custom_mapping'>Build column name mappings</h2><span id='topic+build_custom_mapping'></span>

<h3>Description</h3>

<p><code>build_custom_mapping</code> creates a vector of column name mappings for the
user to read her or his custom dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_custom_mapping(data, language = "de", prompt_mapping = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_custom_mapping_+3A_data">data</code></td>
<td>
<p>the custom dataframe for which the user wants to build a custom
mapping</p>
</td></tr>
<tr><td><code id="build_custom_mapping_+3A_language">language</code></td>
<td>
<p>a character string representing the language in which the
columns will be displayed during the mapping prompt (<code>"de"</code> or
<code>"fr"</code> or <code>"it"</code> or <code>"en"</code>)</p>
</td></tr>
<tr><td><code id="build_custom_mapping_+3A_prompt_mapping">prompt_mapping</code></td>
<td>
<p>a boolean indicating whether the function prompts the
user for the exact mapping of his dataframe or whether the columns are
mapped automatically by order</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Builds a mapping from the custom column names of a given data.frame to the
variable names used in the standard analysis model. If <code>prompt_mapping</code>
is set to <code>TRUE</code>, the function prompts the mapping for each column
of the data.frame. If <code>prompt_mapping</code> is set to <code>FALSE</code>, the
mapping is built using the order of the columns of the given data.frame.
</p>


<h3>Value</h3>

<p>A named vector of characters, where the name indicates the column name in the
original data.frame and the value indicates the column name as used by the
standard analysis model.
</p>

<hr>
<h2 id='build_errors'>Builds a dataframe of errors</h2><span id='topic+build_errors'></span>

<h3>Description</h3>

<p><code>build_errors</code> builds a dataframe of errors as used by the function
<code>check_data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_errors(rows, pers_id, vals, column, description, importance)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_errors_+3A_rows">rows</code></td>
<td>
<p>a vector of numbers representing the rows which contain an error</p>
</td></tr>
<tr><td><code id="build_errors_+3A_pers_id">pers_id</code></td>
<td>
<p>a vector of strings of the personal ID which contain an error</p>
</td></tr>
<tr><td><code id="build_errors_+3A_vals">vals</code></td>
<td>
<p>a vector of the erroneous values</p>
</td></tr>
<tr><td><code id="build_errors_+3A_column">column</code></td>
<td>
<p>the name of the column containing the error</p>
</td></tr>
<tr><td><code id="build_errors_+3A_description">description</code></td>
<td>
<p>the description of the error occurring</p>
</td></tr>
<tr><td><code id="build_errors_+3A_importance">importance</code></td>
<td>
<p>the importance of the error occurring</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe of errors with the columns <code>column</code>,
<code>description</code>, <code>importance</code>
</p>

<hr>
<h2 id='check_data'>Check a dataframe</h2><span id='topic+check_data'></span>

<h3>Description</h3>

<p><code>check_data</code> checks a dataframe (as produced by
<code><a href="#topic+read_data">read_data</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_data(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_data_+3A_data">data</code></td>
<td>
<p>data.frame to be checked</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks a dataframe (as produced by <code>read_data</code>
for correctness and consistency)
</p>


<h3>Value</h3>

<p>a data.frame with information concerning each incorrect data point
in the <code>data</code> data.frame
</p>

<hr>
<h2 id='compute_age'>Compute age values</h2><span id='topic+compute_age'></span>

<h3>Description</h3>

<p>Computes the age given a birth year or a birth date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_age(x, age_spec = NULL, reference_year = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_age_+3A_x">x</code></td>
<td>
<p>a string or number vector to be transformed</p>
</td></tr>
<tr><td><code id="compute_age_+3A_age_spec">age_spec</code></td>
<td>
<p>a string indicating the age specification, can be one of
<code>NULL</code>, <code>"age"</code>, <code>"birthyear"</code>, or <code>"date_of_birth"</code>. If
this parameter is set to <code>NULL</code>, the function automatically tries to
infers the specification</p>
</td></tr>
<tr><td><code id="compute_age_+3A_reference_year">reference_year</code></td>
<td>
<p>a number indicating the reference year in order to
compute the age from a birth year or birth date. If <code>age_spec</code> is
<code>"age"</code>, this parameter can be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric vector of ages
</p>

<hr>
<h2 id='compute_years_of_service'>Compute years_of_service value</h2><span id='topic+compute_years_of_service'></span>

<h3>Description</h3>

<p>Computes the years of service given an entry date or entry year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_years_of_service(
  x,
  entry_date_spec = NULL,
  reference_year = NULL,
  reference_month = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_years_of_service_+3A_x">x</code></td>
<td>
<p>a string or number vector to be transformed</p>
</td></tr>
<tr><td><code id="compute_years_of_service_+3A_entry_date_spec">entry_date_spec</code></td>
<td>
<p>a string indicating the entry_date specification, can
be one of <code>NULL</code>, <code>"years"</code>, <code>"entry_year"</code>, or
<code>"entry_date"</code>. If this parameter is set to <code>NULL</code>, the function
automatically tries to infers the specification</p>
</td></tr>
<tr><td><code id="compute_years_of_service_+3A_reference_year">reference_year</code></td>
<td>
<p>a number indicating the reference year in order to
compute the years of service from an entry date. If <code>entry_date_spec</code> is
<code>"years"</code>, this parameter can be ignored.</p>
</td></tr>
<tr><td><code id="compute_years_of_service_+3A_reference_month">reference_month</code></td>
<td>
<p>a number indicating the reference month in order to
compute the years of service from an entry date. If <code>entry_date_spec</code> is
<code>"years"</code> or <code>"entry_years"</code>, this parameter can be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric vector of years of service
</p>

<hr>
<h2 id='datalist_example'>Example datalist</h2><span id='topic+datalist_example'></span>

<h3>Description</h3>

<p>Fictional dataset containing the necessary information to run an equal pay
analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datalist_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 318 rows and 23 variables:
</p>

<dl>
<dt>personal_number</dt><dd><p>personal number of the employee, alphanumeric</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>age</dt><dd><p>age, in years</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>sex</dt><dd><p>sex, 1 = male, 2 = female</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>years_of_service</dt><dd><p>years of service, in years</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>training</dt><dd><p>training code, 1-8</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>professional_function</dt><dd><p>function / job</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>level_of_requirements</dt><dd><p>level of requirements code, 1-4</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>professional_position</dt><dd><p>professional position / hierarchy code, 1-5</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>activity_rate</dt><dd><p>activity rate, in percent</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>paid_hours</dt><dd><p>paid hours, in hours</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>basic_wage</dt><dd><p>basic wage, in CHF</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>allowances</dt><dd><p>allowances, in CHF</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>monthly_wage_13</dt><dd><p>13th monthly wage, in CHF</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>special_payments</dt><dd><p>special payments, in CHF</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>weekly_hours</dt><dd><p>weekly contractual hours, in hours</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>annual_hours</dt><dd><p>annual contractual hours, in hours</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>population</dt><dd><p>analysis population code, 1-5</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>comments</dt><dd><p>comments for the employee</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>supplement1</dt><dd><p>additional remarks (1 of 5)</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>supplement2</dt><dd><p>additional remarks (2 of 5)</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>supplement3</dt><dd><p>additional remarks (3 of 5)</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>supplement4</dt><dd><p>additional remarks (4 of 5)</p>
</dd></dl>
<p>,
</p>
<dl>
<dt>supplement5</dt><dd><p>additional remarks (5 of 5)</p>
</dd></dl>


<hr>
<h2 id='download_datalist'>Download official Excel datalists</h2><span id='topic+download_datalist'></span>

<h3>Description</h3>

<p>Downloads an empty version of the latest official Excel datalist in the
specified language to the given <code>path</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_datalist(file, language = "de")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_datalist_+3A_file">file</code></td>
<td>
<p>a character string representing the file path to which the
downloaded datalist will be saved.</p>
</td></tr>
<tr><td><code id="download_datalist_+3A_language">language</code></td>
<td>
<p>a character string representing the language of the datalist
to be download (<code>"de"</code> or <code>"fr"</code> or <code>"it"</code> or <code>"en"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='download_example_datalist'>Download official filled-in sample Excel datalists</h2><span id='topic+download_example_datalist'></span>

<h3>Description</h3>

<p>Downloads a filled-in version of the latest official Excel datalist in the
specified language to the given <code>path</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_example_datalist(file, language = "de")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_example_datalist_+3A_file">file</code></td>
<td>
<p>a character string representing the file path to which the
downloaded datalist will be saved.</p>
</td></tr>
<tr><td><code id="download_example_datalist_+3A_language">language</code></td>
<td>
<p>a character string representing the language of the datalist
to be download (<code>"de"</code> or <code>"fr"</code> or <code>"it"</code> or <code>"en"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='feb29_between'>Check if the interval between two dates contains February 29</h2><span id='topic+feb29_between'></span>

<h3>Description</h3>

<p>Check if the interval between two dates contains February 29
</p>


<h3>Usage</h3>

<pre><code class='language-R'>feb29_between(date1, date2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="feb29_between_+3A_date1">date1</code></td>
<td>
<p>the first date by chronological order</p>
</td></tr>
<tr><td><code id="feb29_between_+3A_date2">date2</code></td>
<td>
<p>the second date by chronological order</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a boolean
</p>

<hr>
<h2 id='get_kennedy_estimator'>Kennedy Estimator</h2><span id='topic+get_kennedy_estimator'></span>

<h3>Description</h3>

<p>Computes the consistent and almost unbiased estimator for dummy variables in
semi-logarithmic regressions proposed by Kennedy, P.E. (1981). Estimation
with correctly interpreted dummy variables in semi-logarithmic equations.
American Economic Review, 71, 801.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_kennedy_estimator(coefficient, variance)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_kennedy_estimator_+3A_coefficient">coefficient</code></td>
<td>
<p>numeric value of the estimated coefficient for a dummy
variable in a semi-logarithmic regression</p>
</td></tr>
<tr><td><code id="get_kennedy_estimator_+3A_variance">variance</code></td>
<td>
<p>numeric value of the variance of this estimated coefficient</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given a semi-logarithmic regression with a dummy variable and its estimated
coefficient <code>c</code> with a variance <code>v</code>, the consistent and almost
unbiased estimator proposed by Kennedy is computed as
<code>k = exp(c) / exp(v / 2) - 1</code>
</p>


<h3>Value</h3>

<p>a numeric value representing the so-called &quot;Kennedy estimator&quot;
</p>

<hr>
<h2 id='prepare_data'>Prepares a dataframe for the analysis</h2><span id='topic+prepare_data'></span>

<h3>Description</h3>

<p>Prepares a dataframe for the analysis in three steps:
</p>

<ul>
<li><p>Checks whether <code>sex</code>, <code>age</code>, and <code>entry_date</code> have the
correct format and whether their specifications are plausible
</p>
</li>
<li><p>Build the dataframe used for the analysis
</p>
</li>
<li><p>Check each row of the dataframe for correctness and plausibility
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>prepare_data(
  data,
  reference_month,
  reference_year,
  usual_weekly_hours,
  female_spec = "F",
  male_spec = "M",
  age_spec = NULL,
  entry_date_spec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prepare_data_+3A_data">data</code></td>
<td>
<p>a dataframe object as produced by <code>read_data</code> which is to
be used in the analysis</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_reference_month">reference_month</code></td>
<td>
<p>a number indicating the reference month of the
analysis</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_reference_year">reference_year</code></td>
<td>
<p>a number indicating the reference year of the analysis</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_usual_weekly_hours">usual_weekly_hours</code></td>
<td>
<p>an optional numeric representing the usual weekly
working hours</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_female_spec">female_spec</code></td>
<td>
<p>a string or number indicating the way females are
specified in the dataset</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_male_spec">male_spec</code></td>
<td>
<p>a string or number indicating the way males are
specified in the dataset</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_age_spec">age_spec</code></td>
<td>
<p>a string indicating the age specification, can be one of
<code>NULL</code>, <code>"age"</code>, <code>"birthyear"</code>, or <code>"date_of_birth"</code>. If
this parameter is set to <code>NULL</code>, the function automatically tries to
infers the specification</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_entry_date_spec">entry_date_spec</code></td>
<td>
<p>a string indicating the entry_date specification, can
be one of <code>NULL</code>, <code>"years"</code>, <code>"entry_year"</code>, or
<code>"entry_date"</code>. If this parameter is set to <code>NULL</code>, the function
automatically tries to infers the specification</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame which has no incorrect rows left and can be used to
estimate the standard analysis model
</p>

<hr>
<h2 id='read_data'>Create the dataframe object used for the standard analysis model</h2><span id='topic+read_data'></span>

<h3>Description</h3>

<p>Reads either a custom dataframe object or an official Excel file (datalist
or data export) and transforms it to a dataframe object which can be used
for the standard analysis model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_data(
  data_path = NULL,
  custom_data = NULL,
  prompt_mapping = TRUE,
  language = "de"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_data_+3A_data_path">data_path</code></td>
<td>
<p>a string indicating the path for an official Excel file,
if this parameter is set to <code>NULL</code>, the function reads the dataframe
object provided in the parameter <code>custom_data</code> instead</p>
</td></tr>
<tr><td><code id="read_data_+3A_custom_data">custom_data</code></td>
<td>
<p>a dataframe which was imported by the user beforehand,
if this parameter is set to <code>NULL</code>, the function import the data from
the path provided in the parameter <code>data_path</code> instead</p>
</td></tr>
<tr><td><code id="read_data_+3A_prompt_mapping">prompt_mapping</code></td>
<td>
<p>a boolean indicating whether the function prompts the
user for the exact mapping of his dataframe or whether the columns are
mapped automatically by order. This parameter is only relevant when
<code>custom_data</code> is not set to <code>NULL</code></p>
</td></tr>
<tr><td><code id="read_data_+3A_language">language</code></td>
<td>
<p>a character string representing the language in which the
columns will be displayed during the mapping prompt (<code>"de"</code> or
<code>"fr"</code> or <code>"it"</code> or <code>"en"</code>). This parameter is only relevant
when <code>custom_data</code> is not set to <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of <code>data_path</code> or <code>custom_data</code> must be <code>NULL</code>.
</p>


<h3>Value</h3>

<p>a dataframe which can be used to compute the standard analysis model
</p>

<hr>
<h2 id='read_official_excel'>Read official datalist or data_export Excel file</h2><span id='topic+read_official_excel'></span>

<h3>Description</h3>

<p>Reads an official datalist or data_export file into a dataframe object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_official_excel(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_official_excel_+3A_path">path</code></td>
<td>
<p>a character string indicating the path of the Excel file to be
read</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe with the contents of the datalist or data_export
</p>

<hr>
<h2 id='run_standard_analysis_model'>Standard Analysis Model</h2><span id='topic+run_standard_analysis_model'></span>

<h3>Description</h3>

<p>Estimates the Swiss Confederation standard analysis model (a linear
regression) for salary equality between women and men.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_standard_analysis_model(data, sex_neutral = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_standard_analysis_model_+3A_data">data</code></td>
<td>
<p>data.frame as produced by <code><a href="#topic+prepare_data">prepare_data</a></code></p>
</td></tr>
<tr><td><code id="run_standard_analysis_model_+3A_sex_neutral">sex_neutral</code></td>
<td>
<p>boolean indicating whether the linear regression is to be
run using the sex_neutral model or the standard one.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The standard analysis model's formula is the following:
</p>
<p><code>log(standardized_salary) ~ years_of_training + years_of_service +
years_of_earning + years_of_earning^2 + level_of_requirements + professional_position +
sex</code>
</p>
<p>The <code>sex_neutral</code> parameter can be used to run the sex neutral model,
i.e. a linear regression without the sex coefficient.
</p>


<h3>Value</h3>

<p>an object of <code><a href="base.html#topic+class">class</a></code> &quot;<code><a href="stats.html#topic+lm">lm</a></code>&quot;
</p>

<hr>
<h2 id='summary.analysis_model'>Summary of the Salary Analysis</h2><span id='topic+summary.analysis_model'></span>

<h3>Description</h3>

<p>Summary of an estimated salary analysis object of class
<code>analysis_model</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'analysis_model'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.analysis_model_+3A_object">object</code></td>
<td>
<p>estimated salary analysis object of class
<code>analysis_model</code></p>
</td></tr>
<tr><td><code id="summary.analysis_model_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>summary.analysis_model</code> provides a short summary of the wage
analysis according to the Standard Analysis Model. The summary describes the
number of records used for the analysis, the Kennedy estimate of the wage
difference under otherwise equal circumstances and the summary of the linear
regression.
</p>


<h3>Value</h3>

<p>Nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Estimate standard analysis model
results &lt;- analysis(data = datalist_example, reference_month = 1,
   reference_year = 2019, usual_weekly_hours = 40, female_spec = "F",
   male_spec = "M", age_spec = "age")

# Show summary of the salary analysis
summary(results)

</code></pre>

<hr>
<h2 id='transform_data'>Transform a data.frame according to the requirements of the model</h2><span id='topic+transform_data'></span>

<h3>Description</h3>

<p>Transforms specific columns of a data.frame to match the requirements of
the standard analysis model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_data(
  data,
  reference_year,
  usual_weekly_hours,
  female_spec = "F",
  male_spec = "M",
  age_spec = NULL,
  entry_date_spec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="transform_data_+3A_data">data</code></td>
<td>
<p>a dataframe object as produced by <code>read_data</code> which is to
be transformed</p>
</td></tr>
<tr><td><code id="transform_data_+3A_reference_year">reference_year</code></td>
<td>
<p>a number indicating the reference year of the analysis</p>
</td></tr>
<tr><td><code id="transform_data_+3A_usual_weekly_hours">usual_weekly_hours</code></td>
<td>
<p>an optional numeric representing the usual weekly
working hours</p>
</td></tr>
<tr><td><code id="transform_data_+3A_female_spec">female_spec</code></td>
<td>
<p>a string or number indicating the way females are
specified in the dataset.</p>
</td></tr>
<tr><td><code id="transform_data_+3A_male_spec">male_spec</code></td>
<td>
<p>a string or number indicating the way males are
specified in the dataset</p>
</td></tr>
<tr><td><code id="transform_data_+3A_age_spec">age_spec</code></td>
<td>
<p>a string indicating the age specification, can be one of
<code>NULL</code>, <code>"age"</code>, <code>"birthyear"</code>, or <code>"date_of_birth"</code>. If
this parameter is set to <code>NULL</code>, the function automatically tries to
infers the specification</p>
</td></tr>
<tr><td><code id="transform_data_+3A_entry_date_spec">entry_date_spec</code></td>
<td>
<p>a string indicating the entry_date specification, can
be one of <code>NULL</code>, <code>"years"</code>, <code>"entry_year"</code>, or
<code>"entry_date"</code>. If this parameter is set to <code>NULL</code>, the function
automatically tries to infers the specification</p>
</td></tr>
</table>

<hr>
<h2 id='within_a_year'>Check if the interval between two dates is less than a year</h2><span id='topic+within_a_year'></span>

<h3>Description</h3>

<p>Check if the interval between two dates is less than a year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>within_a_year(date1, date2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="within_a_year_+3A_date1">date1</code></td>
<td>
<p>the first date by chronological order</p>
</td></tr>
<tr><td><code id="within_a_year_+3A_date2">date2</code></td>
<td>
<p>the second date by chronological order</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a boolean
</p>

<hr>
<h2 id='yearfrac'>Time difference between two dates in fractional year terms</h2><span id='topic+yearfrac'></span>

<h3>Description</h3>

<p>Computes the time difference between <code>date1</code> and <code>date2</code> in
fractional year terms. This is equivalent to the YEARFRAC() method from
Excel, with the parameter &quot;Actual/Actual&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>yearfrac(date1, date2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="yearfrac_+3A_date1">date1</code></td>
<td>
<p>the first date</p>
</td></tr>
<tr><td><code id="yearfrac_+3A_date2">date2</code></td>
<td>
<p>the second date</p>
</td></tr>
</table>


<h3>Value</h3>

<p>fractional years between <code>date1</code> and <code>date2</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
