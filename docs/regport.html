<!DOCTYPE html><html lang="en"><head><title>Help for package regport</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {regport}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#regport-package'><p>regport: Regression Model Processing Port</p></a></li>
<li><a href='#REGModel'><p>R6 class representing a regression model</p></a></li>
<li><a href='#REGModelList'><p>R6 class representing a list of regression model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Regression Model Processing Port</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides R6 classes, methods and utilities to construct,
    analyze, summarize, and visualize regression models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ShixiangWang/regport">https://github.com/ShixiangWang/regport</a>,
<a href="https://shixiangwang.github.io/regport/">https://shixiangwang.github.io/regport/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ShixiangWang/regport/issues">https://github.com/ShixiangWang/regport/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>broom.helpers, data.table, dplyr, forestploter, glue,
parameters, R6, rlang (&ge; 0.4.11), stats, survival</td>
</tr>
<tr>
<td>Suggests:</td>
<td>parallel, roxygen2, see, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-10 05:04:39 UTC; Administrator</td>
</tr>
<tr>
<td>Author:</td>
<td>Shixiang Wang <a href="https://orcid.org/0000-0001-9855-7357"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shixiang Wang &lt;w_shixiang@163.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-10 05:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='regport-package'>regport: Regression Model Processing Port</h2><span id='topic+regport'></span><span id='topic+regport-package'></span>

<h3>Description</h3>

<p>Provides R6 classes, methods and utilities to construct, analyze, summarize, and visualize regression models.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Shixiang Wang <a href="mailto:w_shixiang@163.com">w_shixiang@163.com</a> (<a href="https://orcid.org/0000-0001-9855-7357">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ShixiangWang/regport">https://github.com/ShixiangWang/regport</a>
</p>
</li>
<li> <p><a href="https://shixiangwang.github.io/regport/">https://shixiangwang.github.io/regport/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ShixiangWang/regport/issues">https://github.com/ShixiangWang/regport/issues</a>
</p>
</li></ul>


<hr>
<h2 id='REGModel'>R6 class representing a regression model</h2><span id='topic+REGModel'></span>

<h3>Description</h3>

<p>Contains fields storing data and methods to build, process and visualize
a regression model.
Currently, this class is designed for CoxPH and GLM regression models.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>data</code></dt><dd><p>a <code>data.table</code> storing modeling data.</p>
</dd>
<dt><code>recipe</code></dt><dd><p>an R <code>formula</code> storing model formula.</p>
</dd>
<dt><code>terms</code></dt><dd><p>all terms (covariables, i.e. columns) used for building model.</p>
</dd>
<dt><code>args</code></dt><dd><p>other arguments used for building model.</p>
</dd>
<dt><code>model</code></dt><dd><p>a constructed model.</p>
</dd>
<dt><code>type</code></dt><dd><p>model type (class).</p>
</dd>
<dt><code>result</code></dt><dd><p>model result, a object of <code>parameters_model</code>. Can be converted into
data.frame with <code><a href="base.html#topic+as.data.frame">as.data.frame()</a></code> or <code><a href="data.table.html#topic+as.data.table">data.table::as.data.table()</a></code>.</p>
</dd>
<dt><code>forest_data</code></dt><dd><p>more detailed data used for plotting forest.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>REGModel$new()</code></a>
</p>
</li>
<li> <p><a href="#method-get_forest_data"><code>REGModel$get_forest_data()</code></a>
</p>
</li>
<li> <p><a href="#method-plot_forest"><code>REGModel$plot_forest()</code></a>
</p>
</li>
<li> <p><a href="#method-plot"><code>REGModel$plot()</code></a>
</p>
</li>
<li> <p><a href="#method-print"><code>REGModel$print()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>REGModel$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>Build a <code>REGModel</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$new(
  data,
  recipe,
  ...,
  f = c("coxph", "binomial", "gaussian", "Gamma", "inverse.gaussian", "poisson",
    "quasi", "quasibinomial", "quasipoisson"),
  exp = NULL,
  ci = 0.95
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>a <code>data.table</code> storing modeling data.</p>
</dd>
<dt><code>recipe</code></dt><dd><p>an R <code>formula</code> or a list with two elements 'x' and 'y',
where 'x' is for covariables and 'y' is for label. See example for detail
operation.</p>
</dd>
<dt><code>...</code></dt><dd><p>other parameters passing to corresponding regression model function.</p>
</dd>
<dt><code>f</code></dt><dd><p>a length-1 string specifying modeling function or family of <code><a href="stats.html#topic+glm">glm()</a></code>, default is 'coxph'.
Other options are members of GLM family, see <code><a href="stats.html#topic+family">stats::family()</a></code>.
'binomial' is logistic, and 'gaussian' is linear.</p>
</dd>
<dt><code>exp</code></dt><dd><p>logical, indicating whether or not to exponentiate the the coefficients.</p>
</dd>
<dt><code>ci</code></dt><dd><p>confidence Interval (CI) level. Default to 0.95 (95%).
e.g. <code><a href="survival.html#topic+coxph">survival::coxph()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a <code>REGModel</code> R6 object.
</p>


<hr>
<a id="method-get_forest_data"></a>



<h4>Method <code>get_forest_data()</code></h4>

<p>get tidy data for plotting forest.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$get_forest_data(separate_factor = FALSE, global_p = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>separate_factor</code></dt><dd><p>separate factor/class as a blank row.</p>
</dd>
<dt><code>global_p</code></dt><dd><p>if <code>TRUE</code>, return global p value.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-plot_forest"></a>



<h4>Method <code>plot_forest()</code></h4>

<p>plot forest.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$plot_forest(ref_line = NULL, xlim = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ref_line</code></dt><dd><p>reference line, default is <code>1</code> for HR.</p>
</dd>
<dt><code>xlim</code></dt><dd><p>limits of x axis.</p>
</dd>
<dt><code>...</code></dt><dd><p>other plot options passing to <code><a href="forestploter.html#topic+forest">forestploter::forest()</a></code>.
Also check <a href="https://github.com/adayim/forestploter">https://github.com/adayim/forestploter</a> to see more complex adjustment of the result plot.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-plot"></a>



<h4>Method <code>plot()</code></h4>

<p>print the <code>REGModel$result</code> with default plot methods from <strong>see</strong> package.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$plot(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>other parameters passing to <code>plot()</code> in <code>see:::plot.see_parameters_model</code> function.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-print"></a>



<h4>Method <code>print()</code></h4>

<p>print the <code>REGModel</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>unused.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
test1 &lt;- data.frame(
  time = c(4, 3, 1, 1, 2, 2, 3),
  status = c(1, 1, 1, 0, 1, 1, 0),
  x = c(0, 2, 1, 1, 1, 0, 0),
  sex = c(0, 0, 0, 0, 1, 1, 1)
)
test1$sex &lt;- factor(test1$sex)

# --------------
# Build a model
# --------------

# way 1:
mm &lt;- REGModel$new(
  test1,
  Surv(time, status) ~ x + strata(sex)
)
mm
as.data.frame(mm$result)
if (require("see")) mm$plot()
mm$print() # Same as print(mm)

# way 2:
mm2 &lt;- REGModel$new(
  test1,
  recipe = list(
    x = c("x", "strata(sex)"),
    y = c("time", "status")
  )
)
mm2

# Add other parameters, e.g., weights
# For more, see ?coxph
mm3 &lt;- REGModel$new(
  test1,
  recipe = list(
    x = c("x", "strata(sex)"),
    y = c("time", "status")
  ),
  weights = c(1, 1, 1, 2, 2, 2, 3)
)
mm3$args

# ----------------------
# Another type of model
# ----------------------
library(stats)
counts &lt;- c(18, 17, 15, 20, 10, 20, 25, 13, 12)
outcome &lt;- gl(3, 1, 9)
treatment &lt;- gl(3, 3)
data &lt;- data.frame(treatment, outcome, counts)

mm4 &lt;- REGModel$new(
  data,
  counts ~ outcome + treatment,
  f = "poisson"
)
mm4
mm4$plot_forest()
mm4$get_forest_data()
mm4$plot_forest()
</code></pre>

<hr>
<h2 id='REGModelList'>R6 class representing a list of regression model</h2><span id='topic+REGModelList'></span>

<h3>Description</h3>

<p>Contains fields storing data and methods to build, process and visualize
a list of regression model.
Currently, this class is designed for CoxPH and GLM regression models.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>data</code></dt><dd><p>a <code>data.table</code> storing modeling data.</p>
</dd>
<dt><code>x</code></dt><dd><p>focal variables (terms).</p>
</dd>
<dt><code>y</code></dt><dd><p>predicted variables or expression.</p>
</dd>
<dt><code>covars</code></dt><dd><p>covariables.</p>
</dd>
<dt><code>mlist</code></dt><dd><p>a list of <code>REGModel</code>.</p>
</dd>
<dt><code>args</code></dt><dd><p>other arguments used for building model.</p>
</dd>
<dt><code>type</code></dt><dd><p>model type (class).</p>
</dd>
<dt><code>result</code></dt><dd><p>model result, a object of <code>parameters_model</code>. Can be converted into
data.frame with <code><a href="base.html#topic+as.data.frame">as.data.frame()</a></code> or <code><a href="data.table.html#topic+as.data.table">data.table::as.data.table()</a></code>.</p>
</dd>
<dt><code>forest_data</code></dt><dd><p>more detailed data used for plotting forest.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>REGModelList$new()</code></a>
</p>
</li>
<li> <p><a href="#method-build"><code>REGModelList$build()</code></a>
</p>
</li>
<li> <p><a href="#method-plot_forest"><code>REGModelList$plot_forest()</code></a>
</p>
</li>
<li> <p><a href="#method-print"><code>REGModelList$print()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>REGModelList$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a <code>REGModelList</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModelList$new(data, y, x, covars = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>a <code>data.table</code> storing modeling data.</p>
</dd>
<dt><code>y</code></dt><dd><p>predicted variables or expression.</p>
</dd>
<dt><code>x</code></dt><dd><p>focal variables (terms).</p>
</dd>
<dt><code>covars</code></dt><dd><p>covariables.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a <code>REGModelList</code> R6 object.
</p>


<hr>
<a id="method-build"></a>



<h4>Method <code>build()</code></h4>

<p>Build <code>REGModelList</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModelList$build(
  f = c("coxph", "binomial", "gaussian", "Gamma", "inverse.gaussian", "poisson",
    "quasi", "quasibinomial", "quasipoisson"),
  exp = NULL,
  ci = 0.95,
  parallel = FALSE,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>f</code></dt><dd><p>a length-1 string specifying modeling function or family of <code><a href="stats.html#topic+glm">glm()</a></code>, default is 'coxph'.
Other options are members of GLM family, see <code><a href="stats.html#topic+family">stats::family()</a></code>.
'binomial' is logistic, and 'gaussian' is linear.</p>
</dd>
<dt><code>exp</code></dt><dd><p>logical, indicating whether or not to exponentiate the the coefficients.</p>
</dd>
<dt><code>ci</code></dt><dd><p>confidence Interval (CI) level. Default to 0.95 (95%).
e.g. <code><a href="survival.html#topic+coxph">survival::coxph()</a></code>.</p>
</dd>
<dt><code>parallel</code></dt><dd><p>if <code>TRUE</code>, use N-1 cores to run the task.</p>
</dd>
<dt><code>...</code></dt><dd><p>other parameters passing to corresponding regression model function.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a <code>REGModel</code> R6 object.
</p>


<hr>
<a id="method-plot_forest"></a>



<h4>Method <code>plot_forest()</code></h4>

<p>plot forest.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModelList$plot_forest(
  ref_line = NULL,
  xlim = NULL,
  vars = NULL,
  p = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ref_line</code></dt><dd><p>reference line, default is <code>1</code> for HR.</p>
</dd>
<dt><code>xlim</code></dt><dd><p>limits of x axis.</p>
</dd>
<dt><code>vars</code></dt><dd><p>selected variables to show.</p>
</dd>
<dt><code>p</code></dt><dd><p>selected variables with level' pvalue lower than p.</p>
</dd>
<dt><code>...</code></dt><dd><p>other plot options passing to <code><a href="forestploter.html#topic+forest">forestploter::forest()</a></code>.
Also check <a href="https://github.com/adayim/forestploter">https://github.com/adayim/forestploter</a> to see more complex adjustment of the result plot.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-print"></a>



<h4>Method <code>print()</code></h4>

<p>print the <code>REGModelList</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModelList$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>unused.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>REGModelList$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>ml &lt;- REGModelList$new(
  data = mtcars,
  y = "mpg",
  x = c("factor(cyl)", colnames(mtcars)[3:5]),
  covars = c(colnames(mtcars)[8:9], "factor(gear)")
)
ml
ml$print()
ml$plot_forest()

ml$build(f = "gaussian")
## Not run: 
ml$build(f = "gaussian", parallel = TRUE)

## End(Not run)
ml$print()
ml$result
ml$forest_data
ml$plot_forest()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
