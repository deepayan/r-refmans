<!DOCTYPE html><html lang="en"><head><title>Help for package utsf</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {utsf}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#utsf-package'><p>utsf: Univariate Time Series Forecasting</p></a></li>
<li><a href='#autoplot.utsf'><p>Create a ggplot object from an <code>utsf</code> object</p></a></li>
<li><a href='#build_examples'><p>Build the training examples</p></a></li>
<li><a href='#evaluation'><p>Specify the way in which the estimation of forecast accuracy is done</p></a></li>
<li><a href='#forecast'><p>Train an univariate time series forecasting model and make forecasts</p></a></li>
<li><a href='#predict.utsf'><p>Prediction from <code>utsf</code> objects</p></a></li>
<li><a href='#trend'><p>Specifying the transformation for dealing with trended series</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Univariate Time Series Forecasting</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>An engine for univariate time series forecasting using
    different regression models in an autoregressive way. The engine
    provides an uniform interface for applying the different models. 
    Furthermore, it is extensible so that users can easily apply their
    own regression models to univariate time series forecasting and 
    benefit from all the features of the engine, such as preprocessings
    or estimation of forecast accuracy.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Francisco Martinez &lt;fmartin@ujaen.es&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/franciscomartinezdelrio/utsf">https://github.com/franciscomartinezdelrio/utsf</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/franciscomartinezdelrio/utsf/issues">https://github.com/franciscomartinezdelrio/utsf/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Cubist, FNN, forecast, ggplot2, ipred, methods, ranger, rpart,
vctsfr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-10 11:02:17 UTC; UJA</td>
</tr>
<tr>
<td>Author:</td>
<td>Maria Pilar Frias-Bustamante
    <a href="https://orcid.org/0000-0001-6886-0953"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Francisco Martinez
    <a href="https://orcid.org/0000-0002-5206-1898"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-10 11:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='utsf-package'>utsf: Univariate Time Series Forecasting</h2><span id='topic+utsf'></span><span id='topic+utsf-package'></span>

<h3>Description</h3>

<p>An engine for univariate time series forecasting using different regression models in an autoregressive way. The engine provides an uniform interface for applying the different models. Furthermore, it is extensible so that users can easily apply their own regression models to univariate time series forecasting and benefit from all the features of the engine, such as preprocessings or estimation of forecast accuracy.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Francisco Martinez <a href="mailto:fmartin@ujaen.es">fmartin@ujaen.es</a> (<a href="https://orcid.org/0000-0002-5206-1898">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Maria Pilar Frias-Bustamante <a href="mailto:mpfrias@ujaen.es">mpfrias@ujaen.es</a> (<a href="https://orcid.org/0000-0001-6886-0953">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/franciscomartinezdelrio/utsf">https://github.com/franciscomartinezdelrio/utsf</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/franciscomartinezdelrio/utsf/issues">https://github.com/franciscomartinezdelrio/utsf/issues</a>
</p>
</li></ul>


<hr>
<h2 id='autoplot.utsf'>Create a ggplot object from an <code>utsf</code> object</h2><span id='topic+autoplot.utsf'></span>

<h3>Description</h3>

<p>Plot the time series and its associated forecast.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'utsf'
autoplot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.utsf_+3A_object">object</code></td>
<td>
<p>An object of class <code>utsf</code>.</p>
</td></tr>
<tr><td><code id="autoplot.utsf_+3A_...">...</code></td>
<td>
<p>additional parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>ggplot</code> object representing a plotting of the time series and
its forecast.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- forecast(AirPassengers, h = 12, lags = 1:12, method = "rf")
library(ggplot2)
autoplot(f)
</code></pre>

<hr>
<h2 id='build_examples'>Build the training examples</h2><span id='topic+build_examples'></span>

<h3>Description</h3>

<p>Build the training examples for a regressive model to forecast a time series
using lagged values of the series as autoregressive features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_examples(timeS, lags)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_examples_+3A_times">timeS</code></td>
<td>
<p>The time series.</p>
</td></tr>
<tr><td><code id="build_examples_+3A_lags">lags</code></td>
<td>
<p>An integer vector with the lags used as feature vector in
decreasing order.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two fields: 1) a matrix with the features of the examples
and 2) a vector with the targets of the examples
</p>


<h3>Examples</h3>

<pre><code class='language-R'>build_examples(ts(1:5), lags = 2:1)
</code></pre>

<hr>
<h2 id='evaluation'>Specify the way in which the estimation of forecast accuracy is done</h2><span id='topic+evaluation'></span>

<h3>Description</h3>

<p>Specify the way in which the estimation of forecast accuracy is done
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluation(type = "normal", size = NULL, prop = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evaluation_+3A_type">type</code></td>
<td>
<p>A string. Possible values are <code>"normal"</code> (the default) and
<code>"minimum"</code>. See the vignette for an explanation of both ways of evaluating
forecast accuracy.</p>
</td></tr>
<tr><td><code id="evaluation_+3A_size">size</code></td>
<td>
<p>An integer. It is the size of the test set (how many of the last
observations of the time series are used as test set). It can only be used
when the type parameter is <code>"normal"</code>.</p>
</td></tr>
<tr><td><code id="evaluation_+3A_prop">prop</code></td>
<td>
<p>A numeric value in the range (0, 1). It is the proportion of the
time series used as test set. It can only be used when the type parameter
is <code>"normal"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of class <code>evaluation</code> with the chosen evaluation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>evaluation("normal", size = 10)
</code></pre>

<hr>
<h2 id='forecast'>Train an univariate time series forecasting model and make forecasts</h2><span id='topic+forecast'></span>

<h3>Description</h3>

<p>This function trains a model from the historical values of a time series using
an autoregressive approach: the targets are the historical values and the
features of the targets their lagged values. Then, the trained model is used
to predict the future values of the series using a recursive strategy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forecast(
  timeS,
  h,
  lags = NULL,
  method = "knn",
  param = NULL,
  efa = NULL,
  tuneGrid = NULL,
  preProcess = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forecast_+3A_times">timeS</code></td>
<td>
<p>A time series of class <code>ts</code> or a numeric vector.</p>
</td></tr>
<tr><td><code id="forecast_+3A_h">h</code></td>
<td>
<p>A positive integer. Number of values to be forecast into the future,
i.e., forecast horizon.</p>
</td></tr>
<tr><td><code id="forecast_+3A_lags">lags</code></td>
<td>
<p>An integer vector, in increasing order, expressing the lags used
as autoregressive variables. If the default value (<code>NULL</code>) is provided, a
suitable vector is chosen.</p>
</td></tr>
<tr><td><code id="forecast_+3A_method">method</code></td>
<td>
<p>A string indicating the method used for training and
forecasting. Allowed values are:
</p>

<ul>
<li> <p><code>"knn"</code>: k-nearest neighbors (the default)
</p>
</li>
<li> <p><code>"lm"</code>: linear regression
</p>
</li>
<li> <p><code>"rt"</code>: regression trees
</p>
</li>
<li> <p><code>"mt"</code>:  model trees
</p>
</li>
<li> <p><code>"bagging"</code>
</p>
</li>
<li> <p><code>"rf"</code>: random forests.
</p>
</li></ul>

<p>See details for a brief explanation of the models. It is also possible to
use your own regression model, in that case a function explaining how to
build your model must be provided, see the vignette for further details.</p>
</td></tr>
<tr><td><code id="forecast_+3A_param">param</code></td>
<td>
<p>A list with parameters for the underlying function that builds
the model. If the default value (<code>NULL</code>) is provided, the model is fitted
with its default parameters. See details for the functions used to train the
models.</p>
</td></tr>
<tr><td><code id="forecast_+3A_efa">efa</code></td>
<td>
<p>It is used to indicate how to estimate the forecast accuracy of the
model using the last observations of the time series as test set. If the
default value (<code>NULL</code>) is provided, no estimation is done. To specify the
size of the test set the <code><a href="#topic+evaluation">evaluation()</a></code> function must be used.</p>
</td></tr>
<tr><td><code id="forecast_+3A_tunegrid">tuneGrid</code></td>
<td>
<p>A data frame with possible tuning values. The columns are
named the same as the tuning parameters. The estimation of forecast accuracy
is done as explained for the <code>efa</code> parameter. Rolling or fixed origin
evaluation is done according to the value of the <code>efa</code> parameter (fixed if
NULL). The best combination of parameters is used to train the model with
all the historical values of the time series.</p>
</td></tr>
<tr><td><code id="forecast_+3A_preprocess">preProcess</code></td>
<td>
<p>A list indicating the preprocessings or transformations.
Currently, the length of the list must be 1 (only one preprocessing). If
<code>NULL</code> the additive transformation is applied to the series. The element of
the list is created with the <code><a href="#topic+trend">trend()</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions used to build and train the model are:
</p>

<ul>
<li><p> KNN: In this case no model is built and the function <code><a href="FNN.html#topic+knn.reg">FNN::knn.reg()</a></code> is
used to predict the future values of the time series.
</p>
</li>
<li><p> Linear models: Function <code><a href="stats.html#topic+lm">stats::lm()</a></code> to build the model and the method
<code><a href="stats.html#topic+predict.lm">stats::predict.lm()</a></code> associated with the trained model to forecast the future
values of the time series.
</p>
</li>
<li><p> Regression trees: Function <code><a href="rpart.html#topic+rpart">rpart::rpart()</a></code> to build the model and the
method <code><a href="rpart.html#topic+predict.rpart">rpart::predict.rpart()</a></code> associated with the trained model to forecast
the future values of the time series.
</p>
</li>
<li><p> Model trees: Function <code><a href="Cubist.html#topic+cubist.default">Cubist::cubist()</a></code> to build the model and the
method <code><a href="Cubist.html#topic+predict.cubist">Cubist::predict.cubist()</a></code> associated with the trained model to
forecast the future values of the time series.
</p>
</li>
<li><p> Bagging: Function <code><a href="ipred.html#topic+bagging">ipred::bagging()</a></code> to build the model and the
method <code><a href="ipred.html#topic+predict.bagging">ipred::predict.regbagg()</a></code> associated with the trained model to
forecast the future values of the time series.
</p>
</li>
<li><p> Random forest: Function <code><a href="ranger.html#topic+ranger">ranger::ranger()</a></code> to build the model and the
method <code><a href="ranger.html#topic+predict.ranger">ranger::predict.ranger()</a></code> associated with the trained model to
forecast the future values of the time series.
</p>
</li></ul>



<h3>Value</h3>

<p>An S3 object of class <code>utsf</code>, basically a list with, at least, the
following components: </p>
<table role = "presentation">
<tr><td><code>ts</code></td>
<td>
<p>The time series being forecast.</p>
</td></tr>
<tr><td><code>features</code></td>
<td>
<p>A data frame with the features of the training set. The
column names of the data frame indicate the autoregressive lags.</p>
</td></tr>
<tr><td><code>targets</code></td>
<td>
<p>A vector with the targets of the training set.</p>
</td></tr>
<tr><td><code>lags</code></td>
<td>
<p>An integer vector with the autoregressive lags.</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>The regression model used recursively to make the forecast.</p>
</td></tr>
<tr><td><code>pred</code></td>
<td>
<p>An object of class <code>ts</code> and length <code>h</code> with the forecast.</p>
</td></tr>
<tr><td><code>efa</code></td>
<td>
<p>This component is included if forecast accuracy is estimated.
A vector with estimates of forecast accuracy according to different
forecast accuracy measures.</p>
</td></tr>
<tr><td><code>tuneGrid</code></td>
<td>
<p>This component is included if the tuneGrid parameter has
been used. A data frame in which each row contains estimates of forecast
accuracy for a combination of tuning parameters.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Forecast time series using k-nearest neighbors
f &lt;- forecast(AirPassengers, h = 12, method = "knn")
f$pred
library(ggplot2)
autoplot(f)

## Using k-nearest neighbors changing the default k value
forecast(AirPassengers, h = 12, method = "knn", param = list(k = 5))$pred

## Using your own regression model

# Function to build the regression model
my_knn_model &lt;- function(X, y) {
  structure(list(X = X, y = y), class = "my_knn")
}
# Function to predict a new example
predict.my_knn &lt;- function(object, new_value) {
  FNN::knn.reg(train = object$X, test = new_value, y = object$y)$pred
}
forecast(AirPassengers, h = 12, method = my_knn_model)$pred

## Estimating forecast accuracy of the model
f &lt;- forecast(UKgas, h = 4, lags = 1:4, method = "rf", efa = evaluation("minimum"))
f$efa

## Estimating forecast accuracy of different tuning parameters
f &lt;- forecast(UKgas, h = 4, lags = 1:4, method = "knn", tuneGrid = expand.grid(k = 1:5))
f$tuneGrid

## Forecasting a trending series
# Without any preprocessing or transformation
f &lt;- forecast(airmiles, h = 4, method = "knn", preProcess = list(trend("none")))
autoplot(f)

# Applying the additive transformation (default)
f &lt;- forecast(airmiles, h = 4, method = "knn")
autoplot(f)
</code></pre>

<hr>
<h2 id='predict.utsf'>Prediction from <code>utsf</code> objects</h2><span id='topic+predict.utsf'></span>

<h3>Description</h3>

<p>Predict the class of a new observation based on the model associated with the
<code>utsf</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'utsf'
predict(object, new_value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.utsf_+3A_object">object</code></td>
<td>
<p>object of class <code>utsf</code>.</p>
</td></tr>
<tr><td><code id="predict.utsf_+3A_new_value">new_value</code></td>
<td>
<p>a data frame with one row of a new observation.</p>
</td></tr>
<tr><td><code id="predict.utsf_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value with the forecast.
</p>

<hr>
<h2 id='trend'>Specifying the transformation for dealing with trended series</h2><span id='topic+trend'></span>

<h3>Description</h3>

<p>This function is used to specify the preprocessing associated with the trend
of a time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trend(type = "additive", n = -1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trend_+3A_type">type</code></td>
<td>
<p>A character indicating the type of preprocessing applied to the
time series. Possible values are: <code style="white-space: pre;">&#8288;"none&#8288;</code>, <code>"additive"</code>, <code>"multiplicative"</code>
and <code>"differences"</code>.</p>
</td></tr>
<tr><td><code id="trend_+3A_n">n</code></td>
<td>
<p>An integer specifying the order of first differences to be applied.
If the default (-1) is used, the order of first differences needed by the
time series will be estimated by the <code><a href="forecast.html#topic+ndiffs">forecast::ndiffs()</a></code> function. This
parameter is only meant when the <code>type</code> parameter is <code>"differences"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the selected options
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trend("none")            # no preprocessing
trend("additive")        # additive preprocessing
trend("differences", 1)  # order 1 first differences
trend("differences", -1) # number of first differences estimated
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
