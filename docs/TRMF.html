<!DOCTYPE html><html><head><title>Help for package TRMF</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TRMF}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#coef.TRMF'>
<p>Extract TRMF Coefficients (Fm)</p></a></li>
<li><a href='#components.TRMF'>
<p>Access TRMF factors</p></a></li>
<li><a href='#create_TRMF'><p>Create a TRMF object</p></a></li>
<li><a href='#fitted.TRMF'>
<p>Extract TRMF fitted values.</p></a></li>
<li><a href='#impute_TRMF'>
<p>Impute missing values in a matrix</p></a></li>
<li><a href='#NormalizeMatrix'>
<p>Matrix Scaling</p></a></li>
<li><a href='#plot.TRMF'>
<p>Plot Latent Time Series for a TRMF Object</p></a></li>
<li><a href='#predict.TRMF'>
<p>Predict method for TRMF model fit</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#residuals.TRMF'>
<p>Extract TRMF residuals</p></a></li>
<li><a href='#retrain'>
<p>Retrain TRMF objects.</p></a></li>
<li><a href='#summary.TRMF'>
<p>Summarize TRMF</p></a></li>
<li><a href='#train.TRMF'><p>Train a TRMF model</p></a></li>
<li><a href='#TRMF_ar'><p>Add an Auto-Regressive Regularization Model to a TRMF Object.</p></a></li>
<li><a href='#TRMF_columns'>
<p>Add a column regularization model to TRMF object</p></a></li>
<li><a href='#TRMF_es'><p>Add exponential smoothing regularization model to a TRMF object.</p></a></li>
<li><a href='#TRMF_regression'><p>Add external regressors to TRMF object</p></a></li>
<li><a href='#TRMF_seasonal'><p>Add seasonal regularization model to a TRMF object</p></a></li>
<li><a href='#TRMF_simple'><p>Add L2 regularization model to a TRMF object</p></a></li>
<li><a href='#TRMF_trend'><p>Add Trend Model to a TRMF Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Temporally Regularized Matrix Factorization</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.5</td>
</tr>
<tr>
<td>Author:</td>
<td>Chad Hammerquist [aut, cre],
    Scentsy Inc [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chad Hammerquist &lt;chammerquist@scentsy.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to estimate temporally regularized matrix factorizations (TRMF) for forecasting and imputing values in short but high-dimensional time series. Uses regularized alternating least squares to compute the factorization, allows for several types of constraints on matrix factors and natively handles weighted and missing data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>Matrix(&ge; 1.3-3),limSolve,generics</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magrittr, knitr,rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-08-16 16:04:22 UTC; chammerquist</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-08-16 16:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='coef.TRMF'>
Extract TRMF Coefficients (Fm)
</h2><span id='topic+coef.TRMF'></span>

<h3>Description</h3>

<p>Returns the Fm (transposed) matrix from the matrix factorization Xm*Fm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coef.TRMF_+3A_object">object</code></td>
<td>
<p>a trained TRMF object.</p>
</td></tr>
<tr><td><code id="coef.TRMF_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the coefficient matrix, t(Fm)
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
coef(out)
</code></pre>

<hr>
<h2 id='components.TRMF'>
Access TRMF factors
</h2><span id='topic+components.TRMF'></span>

<h3>Description</h3>

<p>This function returns the factors (Xm, Fm) from a trained TRMF object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
components(object, XorF = c("Xm","Fm"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="components.TRMF_+3A_object">object</code></td>
<td>
<p>trained TRMF object</p>
</td></tr>
<tr><td><code id="components.TRMF_+3A_xorf">XorF</code></td>
<td>
<p> which factor to return</p>
</td></tr>
<tr><td><code id="components.TRMF_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the matrix factors. Could also use <code>object$Factors$Xm, object$Factors$Fm</code> . If matrix normalization was used in <code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code>Xm%*%Fm</code> could look much different than the input data matrix. 
</p>


<h3>Value</h3>

<p>A matrix.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(rnorm(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
plot(out)
components(out,"Xm")

</code></pre>

<hr>
<h2 id='create_TRMF'>Create a TRMF object</h2><span id='topic+create_TRMF'></span>

<h3>Description</h3>

<p>Creates a TRMF object from a data matrix. This function is always needed to initialize a TRMF model.</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_TRMF(dataM, weight = 1, 
      normalize = c("none", "standard", "robust", "range"),
      normalize.type = c("global", "columnwise", "rowwise"),
      na.action = c("impute", "fail"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_TRMF_+3A_datam">dataM</code></td>
<td>
<p>The data matrix, each column represents a time series.
</p>
</td></tr>
<tr><td><code id="create_TRMF_+3A_weight">weight</code></td>
<td>
<p>An optional matrix of weights to be used in the fitting process. If used, <code>sum(w^2*e^2)</code> is minimized.</p>
</td></tr>
<tr><td><code id="create_TRMF_+3A_normalize">normalize</code></td>
<td>
<p>Type of scaling/centering for the data. Recommended to reduce bias when using regularization. <code>none</code> does nothing,
<code>standard</code> centers with mean, and scales by <code>sd()</code>, <code>robust</code> centers with the median and scales by <code>mad(,constant=1)</code>,
<code>range</code> maps to <code>[0-1]</code> interval</p>
</td></tr>
<tr><td><code id="create_TRMF_+3A_normalize.type">normalize.type</code></td>
<td>
<p>how should normalization be applied. <code>global</code> scales and centers matrix by one value. <code>columnwise</code> and <code>rowwise</code>
normalize each column or row separately.</p>
</td></tr>
<tr><td><code id="create_TRMF_+3A_na.action">na.action</code></td>
<td>
<p>what action to take when data contains NAs</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function doesn't do any computation, it is the entry point for creating a TRMF model. To train the model or add additional details, see examples. Normalization is recommended in general. Regularization biases the factorization toward zero a little bit, centering changes that to bias towards the mean. Scaling makes the choosing of regularization parameters easier. If the factorization is to be used for forward forecasting, rowwise normalization is not recommended as it could remove some temporal information.
</p>


<h3>Value</h3>

<p><code>create_TRMF</code> returns an object of <code><a href="base.html#topic+class">class</a></code> &quot;<code>TRMF</code>&quot; to be passed to other TRMF functions.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+train.TRMF">train.TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_trend(obj,numTS=4,order=2)
out = train(obj)
plot(out)

</code></pre>

<hr>
<h2 id='fitted.TRMF'>
Extract TRMF fitted values.
</h2><span id='topic+fitted.TRMF'></span>

<h3>Description</h3>

<p>A function to extract fitted values from a trained TRMF object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
fitted(object,impute = FALSE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted.TRMF_+3A_object">object</code></td>
<td>
<p>a trained TRMF object.</p>
</td></tr>
<tr><td><code id="fitted.TRMF_+3A_impute">impute</code></td>
<td>
<p>logical, should imputed values be returned?</p>
</td></tr>
<tr><td><code id="fitted.TRMF_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Fitted values extracted from object. If <code>impute</code> is TRUE then entire fitted (unscaled and uncentered) matrix is returned, otherwise
there are NAs in the same locations as the time series matrix.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
fitted(out)
</code></pre>

<hr>
<h2 id='impute_TRMF'>
Impute missing values in a matrix
</h2><span id='topic+impute_TRMF'></span>

<h3>Description</h3>

<p>Impute missing values in matrix from a pre-trained TRMF object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_TRMF(obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="impute_TRMF_+3A_obj">obj</code></td>
<td>
<p>a trained TRMF object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Essentially an accessor function. Replaces the missing values in data matrix with values from the fitted TRMF object.
</p>


<h3>Value</h3>

<p>data matrix with missing values imputed
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+train.TRMF">train.TRMF</a></code>, <code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>

# create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(rnorm(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)
Am[sample.int(210,20)] = NA

# create model
obj = create_TRMF(Am)
obj = TRMF_trend(obj,numTS=4,order=2)
out = train(obj)
impute_TRMF(out)

</code></pre>

<hr>
<h2 id='NormalizeMatrix'>
Matrix Scaling </h2><span id='topic+NormalizeMatrix'></span>

<h3>Description</h3>

<p>A function for normalizing (scaling and centering) a matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NormalizeMatrix(X, method = c("standard", "robust", "range", "none"),
            type = c("global", "rowwise", "columnwise"), na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NormalizeMatrix_+3A_x">X</code></td>
<td>
<p>a numeric matrix(like object)</p>
</td></tr>
<tr><td><code id="NormalizeMatrix_+3A_method">method</code></td>
<td>
<p>type of scaling to perform, <code>standard</code> centers with mean, and scales by <code>sd()</code>, <code>robust</code> centers with the median and scales by <code>mad(,constant=1)</code>,  <code>range</code> maps to <code>[0-1]</code> interval</p>
</td></tr>
<tr><td><code id="NormalizeMatrix_+3A_type">type</code></td>
<td>
<p>how should normalization be applied. <code>global</code> scales and centers matrix by one value. <code>columnwise</code> and <code>rowwise</code>
normalize each column or row separately.</p>
</td></tr>
<tr><td><code id="NormalizeMatrix_+3A_na.rm">na.rm</code></td>
<td>
<p>logical value, ignore NA values or not.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Scaling and centering quantities are stored as attributes.
</p>


<h3>Value</h3>

<p>The possibly centered and scaled matrix. Scaling and centering quantities are stored as attributes.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = matrix(1:10, ncol = 2)
NormalizeMatrix(x)
</code></pre>

<hr>
<h2 id='plot.TRMF'>
Plot Latent Time Series for a TRMF Object
</h2><span id='topic+plot.TRMF'></span>

<h3>Description</h3>

<p>Plots all the time series in Xm from a trained TRMF object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.TRMF_+3A_x">x</code></td>
<td>
<p>a trained TRMF object.</p>
</td></tr>
<tr><td><code id="plot.TRMF_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
plot(out)
</code></pre>

<hr>
<h2 id='predict.TRMF'>
Predict method for TRMF model fit
</h2><span id='topic+predict.TRMF'></span>

<h3>Description</h3>

<p>Predict values based on the TRMF fit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
predict(object,newdata=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.TRMF_+3A_object">object</code></td>
<td>
<p>A trained TRMF object</p>
</td></tr>
<tr><td><code id="predict.TRMF_+3A_newdata">newdata</code></td>
<td>
<p>A list with slot <code>Xm</code> and possibly with slots <code>cXreg</code> and <code>gXreg</code></p>
</td></tr>
<tr><td><code id="predict.TRMF_+3A_...">...</code></td>
<td>
<p>other arguments, ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If newdata is NULL, returns fitted model. If newdata doesn't have the term <code>Xm</code> or if it has a different 
number of columns than the number of latent time series, it will throw an error. If the object also contains
a global regression, <code>gXreg</code> must be present and appropriately sized. If the object also contains
a column-wise regression, <code>cXreg</code> must be present and appropriately sized.
</p>


<h3>Value</h3>

<p>Returns a matrix of predictions.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code>,<code><a href="#topic+train.TRMF">train.TRMF</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
fitted(out)
newXm = 1:5
predict(out,newdata=list(Xm=newXm))

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+train'></span><span id='topic+components'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+train">train</a></code></p>
</dd>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+components">components</a></code></p>
</dd>
</dl>

<hr>
<h2 id='residuals.TRMF'>
Extract TRMF residuals
</h2><span id='topic+residuals.TRMF'></span>

<h3>Description</h3>

<p>A function to extract residuals from a trained TRMF object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
residuals(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residuals.TRMF_+3A_object">object</code></td>
<td>
<p>a trained TRMF object.</p>
</td></tr>
<tr><td><code id="residuals.TRMF_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>residuals extracted from TRMF object
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
resid(out)
</code></pre>

<hr>
<h2 id='retrain'>
Retrain TRMF objects.
</h2><span id='topic+retrain'></span>

<h3>Description</h3>

<p>Continue training on a pretrained TRMF object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrain(obj, numit, fit_xm_first = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retrain_+3A_obj">obj</code></td>
<td>
<p>Pretrained TRMF object</p>
</td></tr>
<tr><td><code id="retrain_+3A_numit">numit</code></td>
<td>
<p>Number of training iterations</p>
</td></tr>
<tr><td><code id="retrain_+3A_fit_xm_first">fit_xm_first</code></td>
<td>
<p>Fit the Xm factor first? This could be useful it modifications are made to one of the factors that we don't want to be overwritten.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is basically the same function as <code>train()</code> but it doesn't create any of the constraint matrices and doesn't do any initialization.
</p>


<h3>Value</h3>

<p>A trained TRMF object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+train.TRMF">train.TRMF</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create test data
tm = 3*poly(x = (-20:20)/10,degree=3)
sm = diffinv(rnorm(29,0,.1),lag=12,xi=(-5:6)/6)
xm = cbind(sm,tm)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(410,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_trend(obj,numTS=3,order=2)
obj = TRMF_seasonal(obj,numTS=1,freq=12,lambdaD=5)

# train 
out = train(obj,numit=0) # intialize
plot(out)
new_out = retrain(out,numit=10)
plot(new_out)
</code></pre>

<hr>
<h2 id='summary.TRMF'>
Summarize TRMF
</h2><span id='topic+summary.TRMF'></span>

<h3>Description</h3>

<p><code>summary</code> method for class &quot;TRMF&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.TRMF_+3A_object">object</code></td>
<td>
<p>TRMF object.</p>
</td></tr>
<tr><td><code id="summary.TRMF_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
summary(obj)
summary(out)
</code></pre>

<hr>
<h2 id='train.TRMF'>Train a TRMF model</h2><span id='topic+train.TRMF'></span>

<h3>Description</h3>

<p>This function is the &quot;engine&quot; of the TRMF package. It takes a previously created TRMF object and fits it to the data using an alternating least squares algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TRMF'
train(x, numit = 10, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="train.TRMF_+3A_x">x</code></td>
<td>
<p>A TRMF object to be fit.</p>
</td></tr>
<tr><td><code id="train.TRMF_+3A_numit">numit</code></td>
<td>
<p>Number of alternating least squares iterations</p>
</td></tr>
<tr><td><code id="train.TRMF_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a coefficient model is not present in <code>object</code>, it adds a L2 regularization model. If no time series models have been added to <code>object</code>, it adds a simple model using <code><a href="#topic+TRMF_simple">TRMF_simple</a></code>.
</p>


<h3>Value</h3>

<p><code>train</code> returns a fitted object of <code><a href="base.html#topic+class">class</a></code> &quot;<code>TRMF</code>&quot; that contains the data, all added models, matrix factorization and fitted model. The matrix factors Xm, Fm 
are stored in <code>object$Factors$Xm</code> and <code>object$Factors$Fm</code> respectively. Use <code><a href="stats.html#topic+fitted">fitted</a></code> to get fitted model, use <code><a href="stats.html#topic+resid">resid</a></code> to get residuals, use <code><a href="stats.html#topic+coef">coef</a></code> to get coefficients (Fm matrix) and <code><a href="#topic+components">components</a></code> to get <code>Xm</code> or <code>Fm</code>.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(rnorm(40),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
out = train(obj)
plot(out)

</code></pre>

<hr>
<h2 id='TRMF_ar'>Add an Auto-Regressive Regularization Model to a TRMF Object.</h2><span id='topic+TRMF_ar'></span>

<h3>Description</h3>

<p>Creates a regularization scheme that constrains latent time-series based on auto-regressive parameters and adds it to a TRMF object.
In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaD^2||w(DX_s)||^2 + lambdaA^2||X_s||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model and D is a matrix that corresponds to an auto-regressive model.</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_ar(obj,numTS = 1,AR,lambdaD=1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_ar_+3A_obj">obj</code></td>
<td>
<p>A TRMF object</p>
</td></tr>
<tr><td><code id="TRMF_ar_+3A_numts">numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td></tr>
<tr><td><code id="TRMF_ar_+3A_lambdad">lambdaD</code></td>
<td>
<p>regularization parameter for temporal constraint matrix</p>
</td></tr>
<tr><td><code id="TRMF_ar_+3A_lambdaa">lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td></tr>
<tr><td><code id="TRMF_ar_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights to weight constraints, i.e. R(x) = lambdaD^2*||w*(D%*%X)||^2</p>
</td></tr>
<tr><td><code id="TRMF_ar_+3A_ar">AR</code></td>
<td>
<p>vector of autoregressive parameters. No checks are performed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Setting AR = c(1) gives a random walk model, same as <code>TRMF_trend(..., order=1)</code>
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create test data
xm = matrix(rnorm(80),20,4)
fm = matrix(rnorm(40),4,10)+1
Am = xm%*%fm+rnorm(200,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_ar(obj,numTS=2,AR=c(0.5),lambdaD=4)
out = train(obj)
plot(out)

</code></pre>

<hr>
<h2 id='TRMF_columns'>
Add a column regularization model to TRMF object
</h2><span id='topic+TRMF_columns'></span><span id='topic+TRMF_coefficients'></span>

<h3>Description</h3>

<p>Adds a regularization model to TRMF object created by <code>create_TRMF()</code> to constrain the fitting process of the coefficient matrix. 
</p>
<p><code>TRMF_coefficient</code> is a (soon to be deprecated) alias for <code>TRMF_columns</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_columns(obj,
    reg_type = c("l2", "nnls", "constrain", "interval", "none"), lambda = 0.0001)
TRMF_coefficients(obj,
    reg_type = c("l2", "nnls", "constrain", "interval", "none"), lambda = 0.0001)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_columns_+3A_obj">obj</code></td>
<td>
<p>TRMF object created by <code>create_TRMF()</code></p>
</td></tr>
<tr><td><code id="TRMF_columns_+3A_reg_type">reg_type</code></td>
<td>
<p>regularization type to apply when fitting TRMF model. <code>l2</code> regularizes by simple sum of squares, <code>nnls</code>
forces coefficients to be non-negative. <code>constrain</code> constrains coefficients to be non-negative and to sum to 1. <code>interval</code> constrains coefficients
to the interval [0-1]
</p>
</td></tr>
<tr><td><code id="TRMF_columns_+3A_lambda">lambda</code></td>
<td>
<p>L2 regularization parameter used for all regularization types. If NULL, uses lambda set in create_TRMF().
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function doesn't do any computations, it just sets up regularization parameters for the coefficient matrix. This function should only be called once on a TRMF object. If called twice, it will overwrite previous model with a warning.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+train.TRMF">train.TRMF</a></code>, <code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(abs(rnorm(40)),4,10)
Am = xm%*%fm+rnorm(210,0,.2)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="nnls")
out = train(obj)
plot(out)


</code></pre>

<hr>
<h2 id='TRMF_es'>Add exponential smoothing regularization model to a TRMF object.</h2><span id='topic+TRMF_es'></span>

<h3>Description</h3>

<p>Creates a regularization scheme that favors exponentially smoothed solutions and adds it to a TRMF object. In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaD^2||w(DX_s)||^2 + lambdaA^2||X_s||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model and D is a matrix with weights from exponential smoothing.</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_es(obj,numTS = 1,alpha=1,es_type=c("single","double"),
        lambdaD=1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_es_+3A_obj">obj</code></td>
<td>
<p>A TRMF object</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_numts">numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_lambdad">lambdaD</code></td>
<td>
<p>regularization parameter for temporal constraint matrix</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_lambdaa">lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights to weight constraint, i.e. R(x) = lambdaD^2*||w*(D%*%X)||^2</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_es_type">es_type</code></td>
<td>
<p>type of exponential smoothing. <code>"double"</code> does Brown's double exponential smoothing.</p>
</td></tr>
<tr><td><code id="TRMF_es_+3A_alpha">alpha</code></td>
<td>
<p>exponential smoothing parameter, constrained to be in the interval [0,1]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This creates a non-sparse constraint matrix which could slow training down for longer time series.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>
<p>https://en.wikipedia.org/wiki/Exponential_smoothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code>,<code><a href="#topic+TRMF_seasonal">TRMF_seasonal</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create test data
xm = cbind(cumsum(rnorm(20)),cumsum(rnorm(20)))
fm = matrix(runif(20),2,10)
Am = xm%*%fm+rnorm(200,0,.2)

# create model
obj = create_TRMF(Am)
obj = TRMF_es(obj,numTS=2,alpha=0.5)
out = train(obj)
plot(out)


</code></pre>

<hr>
<h2 id='TRMF_regression'>Add external regressors to TRMF object</h2><span id='topic+TRMF_regression'></span>

<h3>Description</h3>

<p>A function to add external regressors to a TRMF object.</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_regression(obj, Xreg, type = c("global", "columnwise"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_regression_+3A_obj">obj</code></td>
<td>
<p>TRMF object created by <code>create_TRMF()</code></p>
</td></tr>
<tr><td><code id="TRMF_regression_+3A_xreg">Xreg</code></td>
<td>
<p>Vector or matrix of external regressors. If <code>type = "columnwise"</code>, <code>Xreg</code> can be a matrix or array, but the first two dimensions must match those of the data matrix.</p>
</td></tr>
<tr><td><code id="TRMF_regression_+3A_type">type</code></td>
<td>
<p>how are the regressors added to the model. If <code>type = "global"</code> the matrix factorization includes all the regressors. If <code>type = "columnwise"</code> each column in the data matrix is regressed of the corresponding column of <code>Xreg</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The coefficients model for the regressors are subject to the same regularization as the rest of the matrix factorization. Only one columnwise and one global model should be used in the same model. Both types can be include in the same model though.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># ~ Global regression example ~
# create test data 
bb = (-10:10)/10
xReg = 10*cos(bb*10)
xm = poly(x = bb,degree=3)
fm = matrix(rnorm(40),4,10)
Am = cbind(xReg,xm)%*%fm+rnorm(210,0,.2)

# creat model and fit
obj = create_TRMF(Am)
obj = TRMF_trend(obj,numTS=3,order=2)
obj = TRMF_regression(obj,Xreg=xReg,type="global")
out = train(obj)
plot(out)

# ~ columnwise regression example ~
# create test data 
bb = (-10:10)/10
xm = poly(x = bb,degree=4)
fm = matrix(rnorm(84),4,21)
Am = xm%*%fm+rnorm(441,0,.2)

layers = array(0,dim=c(21,21,2))
layers[,,1] = 2*cos(2*bb)%o%sin(4*bb)
layers[,,2] = 2*sqrt(abs(bb%o%bb))
nAm = Am+layers[,,1]+layers[,,2]

# creat model and fit
obj = create_TRMF(nAm)
obj = TRMF_trend(obj,numTS=4,order=2)
obj = TRMF_regression(obj,Xreg=layers,type="columnwise")
out = train(obj)
plot(out)


</code></pre>

<hr>
<h2 id='TRMF_seasonal'>Add seasonal regularization model to a TRMF object</h2><span id='topic+TRMF_seasonal'></span>

<h3>Description</h3>

<p>Creates a regularization scheme that favors seasonally varying solutions and adds it to a TRMF object. In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaD^2||w(DX_s)||^2 + lambdaA^2||X_s||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model and D is a (with a lag of freq) finite difference matrix.</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_seasonal(obj,numTS = 1,freq = 12,sumFirst=FALSE,lambdaD=1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_seasonal_+3A_obj">obj</code></td>
<td>
<p>A TRMF object</p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_numts">numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_lambdad">lambdaD</code></td>
<td>
<p>regularization parameter for temporal constraint matrix</p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_lambdaa">lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights to weight constraints, i.e. R(x) = lambdaD^2*||w*(D%*%X)||^2</p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_freq">freq</code></td>
<td>
<p>The frequency of the seasonal time series model. Minimize the differences of lag = <code>freq</code></p>
</td></tr>
<tr><td><code id="TRMF_seasonal_+3A_sumfirst">sumFirst</code></td>
<td>
<p>minimize the sum of first <code>freq</code> elements in time series</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>TRMF_seasonal(freq=N)</code> fits a lag N random walk. For monthly data, use freq=12, for quarterly data, freq=4. If <code>sumFirst = TRUE</code>, the sum of the first <code>freq</code> elements in the latent time series are also minimized.This can be used to help force the seasonal component to vary around a zero mean.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>,<code><a href="#topic+TRMF_simple">TRMF_simple</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># create test data
tm = 3*poly(x = (-20:20)/10,degree=3)
sm = diffinv(rnorm(29,0,.1),lag=12,xi=(-5:6)/6)
xm = cbind(sm,tm)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(410,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_trend(obj,numTS=3,order=2)
obj = TRMF_seasonal(obj,numTS=1,freq=12,lambdaD=5)
out = train(obj)
plot(out)

</code></pre>

<hr>
<h2 id='TRMF_simple'>Add L2 regularization model to a TRMF object</h2><span id='topic+TRMF_simple'></span>

<h3>Description</h3>

<p>Creates an L2 regularization and adds it to a TRMF object. In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaA^2||w(X_s)||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model.</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_simple(obj,numTS = 1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_simple_+3A_obj">obj</code></td>
<td>
<p>A TRMF object</p>
</td></tr>
<tr><td><code id="TRMF_simple_+3A_numts">numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td></tr>
<tr><td><code id="TRMF_simple_+3A_lambdaa">lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td></tr>
<tr><td><code id="TRMF_simple_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights to weight constraints, i.e. R(x) = lambdaA^2*||w*X||^2</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is called by <code>train_TRMF</code> if the TRMF object doesn't have any time series models.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>,<code><a href="#topic+TRMF_seasonal">TRMF_seasonal</a></code>, <code><a href="#topic+TRMF_trend">TRMF_trend</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># create test data
xm = matrix(rnorm(160),40,4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(400,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_simple(obj,numTS=4,lambdaA=0.1)
out = train(obj)
plot(out)
</code></pre>

<hr>
<h2 id='TRMF_trend'>Add Trend Model to a TRMF Object</h2><span id='topic+TRMF_trend'></span>

<h3>Description</h3>

<p>Creates a regularization scheme that favors trend-like solutions and adds it to a TRMF object. In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaD^2||w(DX_s)||^2 + lambdaA^2||X_s||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model and D is a finite difference matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TRMF_trend(obj,numTS = 1,order = 1,lambdaD=1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TRMF_trend_+3A_obj">obj</code></td>
<td>
<p>A TRMF object</p>
</td></tr>
<tr><td><code id="TRMF_trend_+3A_numts">numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td></tr>
<tr><td><code id="TRMF_trend_+3A_order">order</code></td>
<td>
<p>The order of derivative for finite difference constraint matrix. Fractionally and negative values allowed.</p>
</td></tr>
<tr><td><code id="TRMF_trend_+3A_lambdad">lambdaD</code></td>
<td>
<p>regularization parameter for temporal constraint matrix</p>
</td></tr>
<tr><td><code id="TRMF_trend_+3A_lambdaa">lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td></tr>
<tr><td><code id="TRMF_trend_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights to weight constraints, i.e. R(x) = lambdaD^2*||w*(D%*%X)||^2</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An arbitrary number of time series models can be added. <code>TRMF_trend(order = 1)</code> fits a random walk. <code>TRMF_trend(order = 2)</code> fits a cubic smoothing spline. For a single time series, <code>TRMF_trend(order = 2)</code> is basically equivalent to the Hodge-Prescot filter. A fractional value for order minimizes a squared fractional derivative. A negative value minimizes a (possibly fractional order) squared integral of time-series. Using a fractional or negative order for <code>TRMF_trend</code> or using <code>TRMF_es</code> could drastically reduce the sparsity of constraint matrix and slow down training. Fractional or negative order has only been lightly tested, so use with care.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. &quot;High-dimensional time series prediction with missing values.&quot; arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_TRMF">create_TRMF</a></code>, <code><a href="#topic+TRMF_columns">TRMF_columns</a></code>, <code><a href="#topic+TRMF_simple">TRMF_simple</a></code>, <code><a href="#topic+TRMF_seasonal">TRMF_seasonal</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create test data
xm = poly(x = (-10:10)/10,degree=4)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(210,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_trend(obj,numTS=4,order=2,lambdaD=2)
out = train(obj)
plot(out)

# more complex model
require(magrittr) # for pipes

obj = create_TRMF(Am)%&gt;%
    TRMF_columns(reg_type ="interval")%&gt;%
    TRMF_trend(numTS=2,order=1,lambdaD=4)%&gt;%
    TRMF_trend(numTS=2,order=2,lambdaD=4)%&gt;%
    TRMF_trend(numTS=1,order=1.5)

out = train(obj)
plot(out)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
