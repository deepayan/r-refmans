<!DOCTYPE html><html lang="en"><head><title>Help for package rbm25</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rbm25}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BM25'><p>BM25 Object</p></a></li>
<li><a href='#bm25_score'><p>Score a text corpus based on the Okapi BM25 algorithm</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A Light Wrapper Around the 'BM25' 'Rust' Crate for Okapi BM25
Text Search</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>
    BM25 is a ranking function used by search engines to rank matching documents according to their relevance to a user's search query.
    This package provides a light wrapper around the 'BM25' 'rust' crate for Okapi BM25 text search.
    For more information, see Robertson et al. (1994) <a href="https://trec.nist.gov/pubs/trec3/t3_proceedings.html">https://trec.nist.gov/pubs/trec3/t3_proceedings.html</a>.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://davzim.github.io/rbm25/">https://davzim.github.io/rbm25/</a>, <a href="https://github.com/DavZim/rbm25/">https://github.com/DavZim/rbm25/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DavZim/rbm25/issues">https://github.com/DavZim/rbm25/issues</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Cargo (Rust's package manager), rustc &gt;= 1.71.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/rextendr/version:</td>
<td>0.3.1.9001</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/rbm25/MSRV:</td>
<td>1.71.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-15 11:55:21 UTC; dazimme</td>
</tr>
<tr>
<td>Author:</td>
<td>David Zimmermann-Kollenda [aut, cre],
  Michael Barlow [aut] (bm25 Rust library),
  Authors of the dependency Rust crates [aut] (see AUTHORS file)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Zimmermann-Kollenda &lt;david_j_zimmermann@hotmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-16 10:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='BM25'>BM25 Object</h2><span id='topic+BM25'></span>

<h3>Description</h3>

<p>Class to construct the BM25 search object
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-BM25-new"><code>BM25$new()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-available_languages"><code>BM25$available_languages()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-get_data"><code>BM25$get_data()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-get_lang"><code>BM25$get_lang()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-print"><code>BM25$print()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-add_data"><code>BM25$add_data()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-query"><code>BM25$query()</code></a>
</p>
</li>
<li> <p><a href="#method-BM25-clone"><code>BM25$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-BM25-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of a BM25 class
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$new(data = NULL, lang = "detect", k1 = 1.2, b = 0.75, metadata = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>text data, a vector of strings. Note any preprocessing steps
(tolower, removing stopwords etc) need to have taken place before this!</p>
</dd>
<dt><code>lang</code></dt><dd><p>language of the data, see self$available_languages(),
can also be &quot;detect&quot; to automatically detect the language,  default is &quot;detect&quot;</p>
</dd>
<dt><code>k1</code></dt><dd><p>k1 parameter of BM25, default is 1.2</p>
</dd>
<dt><code>b</code></dt><dd><p>b parameter of BM25, default is 0.75</p>
</dd>
<dt><code>metadata</code></dt><dd><p>a data.frame with metadata for each document, default is NULL
must be a data.frame with the same number of rows containing arbitrary
metadata for each document, e.g. a file path or a URL</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>BM25 object
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>corpus &lt;- c(
 "The rabbit munched the orange carrot.",
 "The snake hugged the green lizard.",
 "The hedgehog impaled the orange orange.",
 "The squirrel buried the brown nut."
)
bm25 &lt;- BM25$new(data = corpus, lang = "en",
                 metadata = data.frame(src = paste("file", 1:4)))
bm25
bm25$get_data()

bm25$query("orange", max_n = 2)
bm25$query("orange", max_n = 3)
bm25$query("orange") # return all, same as max_n = Inf or NULL
</pre>
</div>


<hr>
<a id="method-BM25-available_languages"></a>



<h4>Method <code>available_languages()</code></h4>

<p>Returns the available languages
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$available_languages()</pre></div>



<h5>Returns</h5>

<p>a named character vector with language codes and their full names
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>BM25$new()$available_languages()
</pre>
</div>


<hr>
<a id="method-BM25-get_data"></a>



<h4>Method <code>get_data()</code></h4>

<p>Returns the data
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$get_data(add_metadata = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>add_metadata</code></dt><dd><p>whether to add metadata to the data, default is TRUE</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a data.frame with the data and metadata if available and selected
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>BM25$new(data = letters, metadata = LETTERS)$get_data()
</pre>
</div>


<hr>
<a id="method-BM25-get_lang"></a>



<h4>Method <code>get_lang()</code></h4>

<p>Returns the language used
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$get_lang()</pre></div>



<h5>Returns</h5>

<p>a character string with the language code
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>BM25$new()$get_lang()
BM25$new(lang = "en")$get_lang()
BM25$new(lang = "detect")$get_lang()
</pre>
</div>


<hr>
<a id="method-BM25-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints a BM25 object
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$print(n = 5, nchar = 20)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n</code></dt><dd><p>number of data to print, default is 5</p>
</dd>
<dt><code>nchar</code></dt><dd><p>number of characters to print for each text, default is 20</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>the object invisible
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>BM25$new(data = letters, metadata = LETTERS)
</pre>
</div>


<hr>
<a id="method-BM25-add_data"></a>



<h4>Method <code>add_data()</code></h4>

<p>Adds data to the BM25 object
</p>
<p>This can be useful to add more data later on, note this will rebuild the engine.
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$add_data(data, metadata = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>a vector of strings</p>
</dd>
<dt><code>metadata</code></dt><dd><p>a data.frame with metadata for each document, default is NULL</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>NULL
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>bm25 &lt;- BM25$new()
bm25$add_data(letters, metadata = LETTERS)
bm25
</pre>
</div>


<hr>
<a id="method-BM25-query"></a>



<h4>Method <code>query()</code></h4>

<p>Query the BM25 object for the N best matches
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$query(query, max_n = NULL, return_text = TRUE, return_metadata = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>query</code></dt><dd><p>the term to search for, note all preprocessing that was
applied to the text corpus initially needs to be already performed on
the term, e.g., tolower, removing stopwords etc</p>
</dd>
<dt><code>max_n</code></dt><dd><p>the maximum number of results to return, default is all</p>
</dd>
<dt><code>return_text</code></dt><dd><p>whether to return the text, default is TRUE</p>
</dd>
<dt><code>return_metadata</code></dt><dd><p>whether to return metadata, default is TRUE</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a data.frame with the results
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>corpus &lt;- c(
 "The rabbit munched the orange carrot.",
 "The snake hugged the green lizard.",
 "The hedgehog impaled the orange orange.",
 "The squirrel buried the brown nut."
)
bm25 &lt;- BM25$new(data = corpus, lang = "en",
                 metadata = data.frame(src = paste("file", 1:4)))

bm25$query("orange", max_n = 2)
bm25$query("orange", max_n = 3)
bm25$query("orange", return_text = FALSE, return_metadata = FALSE)
bm25$query("orange", max_n = 3)
</pre>
</div>


<hr>
<a id="method-BM25-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>BM25$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>corpus &lt;- c(
  "The rabbit munched the orange carrot.",
  "The snake hugged the green lizard.",
  "The hedgehog impaled the orange orange.",
  "The squirrel buried the brown nut."
)
bm25 &lt;- BM25$new(data = corpus, lang = "en",
                 metadata = data.frame(src = paste("file", 1:4)))
bm25$query("orange", max_n = 2)
bm25$query("orange")

## ------------------------------------------------
## Method `BM25$new`
## ------------------------------------------------

corpus &lt;- c(
 "The rabbit munched the orange carrot.",
 "The snake hugged the green lizard.",
 "The hedgehog impaled the orange orange.",
 "The squirrel buried the brown nut."
)
bm25 &lt;- BM25$new(data = corpus, lang = "en",
                 metadata = data.frame(src = paste("file", 1:4)))
bm25
bm25$get_data()

bm25$query("orange", max_n = 2)
bm25$query("orange", max_n = 3)
bm25$query("orange") # return all, same as max_n = Inf or NULL

## ------------------------------------------------
## Method `BM25$available_languages`
## ------------------------------------------------

BM25$new()$available_languages()

## ------------------------------------------------
## Method `BM25$get_data`
## ------------------------------------------------

BM25$new(data = letters, metadata = LETTERS)$get_data()

## ------------------------------------------------
## Method `BM25$get_lang`
## ------------------------------------------------

BM25$new()$get_lang()
BM25$new(lang = "en")$get_lang()
BM25$new(lang = "detect")$get_lang()

## ------------------------------------------------
## Method `BM25$print`
## ------------------------------------------------

BM25$new(data = letters, metadata = LETTERS)

## ------------------------------------------------
## Method `BM25$add_data`
## ------------------------------------------------

bm25 &lt;- BM25$new()
bm25$add_data(letters, metadata = LETTERS)
bm25

## ------------------------------------------------
## Method `BM25$query`
## ------------------------------------------------

corpus &lt;- c(
 "The rabbit munched the orange carrot.",
 "The snake hugged the green lizard.",
 "The hedgehog impaled the orange orange.",
 "The squirrel buried the brown nut."
)
bm25 &lt;- BM25$new(data = corpus, lang = "en",
                 metadata = data.frame(src = paste("file", 1:4)))

bm25$query("orange", max_n = 2)
bm25$query("orange", max_n = 3)
bm25$query("orange", return_text = FALSE, return_metadata = FALSE)
bm25$query("orange", max_n = 3)
</code></pre>

<hr>
<h2 id='bm25_score'>Score a text corpus based on the Okapi BM25 algorithm</h2><span id='topic+bm25_score'></span>

<h3>Description</h3>

<p>A simple wrapper around the <a href="#topic+BM25">BM25</a> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bm25_score(data, query, lang = NULL, k1 = 1.2, b = 0.75)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bm25_score_+3A_data">data</code></td>
<td>
<p>text data, a vector of strings. Note any preprocessing steps
(tolower, removing stopwords etc) need to have taken place before this!</p>
</td></tr>
<tr><td><code id="bm25_score_+3A_query">query</code></td>
<td>
<p>the term to search for, note all preprocessing that was
applied to the text corpus initially needs to be already performed on
the term, e.g., tolower, removing stopwords etc</p>
</td></tr>
<tr><td><code id="bm25_score_+3A_lang">lang</code></td>
<td>
<p>language of the data, see self$available_languages(),
can also be &quot;detect&quot; to automatically detect the language,  default is &quot;detect&quot;</p>
</td></tr>
<tr><td><code id="bm25_score_+3A_k1">k1</code></td>
<td>
<p>k1 parameter of BM25, default is 1.2</p>
</td></tr>
<tr><td><code id="bm25_score_+3A_b">b</code></td>
<td>
<p>b parameter of BM25, default is 0.75</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric vector of the BM25 scores, note higher values are showing
a higher relevance of the text to the query
</p>


<h3>See Also</h3>

<p><a href="#topic+BM25">BM25</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>corpus &lt;- c(
 "The rabbit munched the orange carrot.",
 "The snake hugged the green lizard.",
 "The hedgehog impaled the orange orange.",
 "The squirrel buried the brown nut."
)
scores &lt;- bm25_score(data = corpus, query = "orange")
data.frame(text = corpus, scores_orange = scores)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
