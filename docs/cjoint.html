<!DOCTYPE html><html><head><title>Help for package cjoint</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cjoint}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#amce'>
<p>Estimating Causal Effects in Conjoint Experiments</p></a></li>
<li><a href='#cjoint-package'>
<p>cjoint: A Package for Estimating Average Marginal Component-specific Effects for Conjoint Survey Experiments</p></a></li>
<li><a href='#immigrationconjoint'>
<p>Immigration Conjoint Experiment Dataset from Hainmueller et. al. (2014)</p></a></li>
<li><a href='#immigrationdesign'>
<p>Conjoint Design for the Immigration Experiment in Hainmueller et. al. (2014)</p></a></li>
<li><a href='#japan2014conjoint'>
<p>Japan 2014 Conjoint Experiment Dataset from Horiuchi et. al. (2014)</p></a></li>
<li><a href='#makeDesign'>
<p>Create conjoint design</p></a></li>
<li><a href='#plot.amce'>
<p>Plot AMCE Estimates</p></a></li>
<li><a href='#read.qualtrics'>
<p>Read Data from a Conjoint Qualtrics Experiment</p></a></li>
<li><a href='#read.with.qualtRics'>
<p>Read Data from a Conjoint Qualtrics Experiment</p></a></li>
<li><a href='#summary.amce'>
<p>Summarizing AMCE estimates</p></a></li>
<li><a href='#view'>
<p>Graphical interfaces for conjoint analysis</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>2.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-21</td>
</tr>
<tr>
<td>Title:</td>
<td>AMCE Estimator for Conjoint Experiments</td>
</tr>
<tr>
<td>Author:</td>
<td>Soubhik Barari, Elissa Berwick, Jens Hainmueller, Daniel Hopkins, Sean Liu, Anton Strezhnev, Teppei Yamamoto</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anton Strezhnev &lt;astrezhnev@uchicago.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), sandwich, lmtest, ggplot2, survey, Matrix</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils, methods, DT, shiny, shinyjs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Description:</td>
<td>An R implementation of the Average Marginal Component-specific
    Effects (AMCE) estimator presented in Hainmueller, J., Hopkins, D., and Yamamoto
    T. (2014) &lt;<a href="https://doi.org/10.1093%2Fpan%2Fmpt024">doi:10.1093/pan/mpt024</a>&gt; Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional
    Choices via Stated Preference Experiments. Political Analysis 22(1):1-30.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.0</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-21 20:00:11 UTC; anton</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-22 07:50:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='amce'>
Estimating Causal Effects in Conjoint Experiments
</h2><span id='topic+amce'></span>

<h3>Description</h3>

<p>This function takes a dataset and a conjoint design and returns Average Marginal Component Effects (AMCEs) and Average Component Interaction Effects (ACIE) for the attributes specified in the formula. By default, this function assumes uniform randomization of attribute levels and no profile restrictions. If your design incorporates weighted randomization or restrictions on displayable profiles, first generate a design object using <code>makeDesign</code>. Interactions with respondent-level characteristics are handled by identifying relevant variables as respondent-varying.</p>


<h3>Usage</h3>

<pre><code class='language-R'>amce(formula, data, design = "uniform",
	      respondent.varying = NULL, subset = NULL,
	      respondent.id = NULL, cluster = TRUE, na.ignore=FALSE,
	      weights = NULL, baselines = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="amce_+3A_formula">formula</code></td>
<td>

<p>A <code>formula</code> object specifying the name of the outcome variable on the left-hand side and the attributes for which effects are to be estimated on the right-hand side. RHS attributes should be separated by <code>+</code> signs. Interaction effects can be specified using standard interaction syntax - joining attribute names using either <code>:</code> or <code>*</code>.  However using the <code>:</code> syntax will produce the same results as <code>*</code> since missing base terms are automatically added to the formula. For example <code>Y ~ X1 + X2</code> will return AMCEs for X1 and X2. <code>Y ~ X1 + X2 + X1:X2</code> will return AMCEs for X1 and X2 along with an ACIE for X1/X2. <code>Y ~ X1*X2</code> and <code>Y ~ X1:X2</code> will produce identical results to <code>Y ~ X1 + X2 + X1:X2</code>. Note that you can place backticks around a variable name containing spaces in order to have <code><a href="stats.html#topic+formula">formula</a></code> interpret it as a single variable name. Any respondent characteristics must be designated as such in <code>redpondent.varying</code>. 
</p>
</td></tr>
<tr><td><code id="amce_+3A_data">data</code></td>
<td>

<p>A dataframe containing the outcome variable, attributes, respondent identifiers, respondent covariate data and sampling weights from a conjoint experiment.
</p>
</td></tr>
<tr><td><code id="amce_+3A_design">design</code></td>
<td>

<p>Either the character string <code>"uniform"</code> or a <code>conjointDesign</code> object created by the <code><a href="#topic+makeDesign">makeDesign</a></code> function. If a <code>conjointDesign</code> is not passed, the function will assume all attribute levels have an equal probability of being presented to a respondent and that no profiles are restricted. Defaults to <code>"uniform"</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_respondent.varying">respondent.varying</code></td>
<td>

<p>A vector of character strings giving the names of any respondent-varying characteristics being interacted with AMCEs or ACIEs in the <code>formula</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_subset">subset</code></td>
<td>

<p>A logical vector with length <code>nrow(data)</code> denoting which rows in <code>data</code> should be included in estimation. This can for example be used to subset the data along respondent-level covariates. Defaults to <code>NULL</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_respondent.id">respondent.id</code></td>
<td>

<p>A character string indicating the column of <code>data</code> containing a unique identifier for each respondent. Defaults to <code>NULL</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_cluster">cluster</code></td>
<td>

<p>A logical indicating whether estimated standard errors should be clustered on <code>respondent.id</code>. Defaults to <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_na.ignore">na.ignore</code></td>
<td>

<p>A logical indicating whether the function should ignore missing rows in <code>data</code>. If <code>FALSE</code>, amce() will raise an error if there are rows with missing values. Defaults to <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="amce_+3A_weights">weights</code></td>
<td>

<p>A character string giving the name of the column in the data containing any survey weights. See documentation for <code>survey</code> package for more information.
</p>
</td></tr>
<tr><td><code id="amce_+3A_baselines">baselines</code></td>
<td>

<p>Manually adjust the baselines of select factor variables (either attributes or respondent varying) by supplying a list. Names of list entries should correspond with variable names. The content of each entry should be a character string giving the new baseline.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class &quot;amce&quot; containing:
</p>
<table>
<tr><td><code>attributes</code></td>
<td>
<p>A list containing the names of attributes.</p>
</td></tr>
<tr><td><code>baselines</code></td>
<td>
<p>Baseline levels for each attribute in <code>estimates</code>. Baselines determined using the first element of <code>levels()</code>. If a different baseline level is desired for an attribute, use the <code>relevel()</code> function on the variable prior to calling the <code>amce()</code> routine or supply an alternative baseline in <code>baselines</code> argument.</p>
</td></tr>
<tr><td><code>continuous</code></td>
<td>
<p>List of quantiles for any non-factor variables, whether attributes or respondent varying.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>The original data.</p>
</td></tr>
<tr><td><code>estimates</code></td>
<td>
<p>A list containing AMCE and ACIE estimates for each attribute in <code>formula</code>. Each element of <code>estimates</code> corresponds to a single attribute or interaction.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>The <code>formula</code> passed to the <code>amce()</code> routine.</p>
</td></tr>
<tr><td><code>samplesize_prof</code></td>
<td>
<p>The number of valid profiles (rows) in the dataset</p>
</td></tr>
<tr><td><code>user.names</code></td>
<td>
<p>A vector with the original user supplied names for any attributes. These may differ from the attribute names in <code>estimates</code> if the original names contain spaces.</p>
</td></tr>
<tr><td><code>vcov.prof</code></td>
<td>
<p>The modified variance-covariance matrix for AMCE and ACIE estimates. Incorporates cluster corrections as well as attribute dependencies. Profile varying attributes only.</p>
</td></tr>
<tr><td><code>numrespondents</code></td>
<td>
<p>The number of respondents in the dataset (if <code>respondent.id</code> is not <code>NULL</code>). </p>
</td></tr>
<tr><td><code>respondent.varying</code></td>
<td>
<p>Names of respondent-varying variables, if any.</p>
</td></tr>
<tr><td><code>cond.formula</code></td>
<td>
<p>The formula used for calculating estimates conditional on respondent varying characteristics. Only returned when respondent-varying characteristics are present.</p>
</td></tr>
<tr><td><code>cond.estimates</code></td>
<td>
<p>A list containing estimated effects of respondent-varying characteristics conditional on attribute values. Each element of <code>cond.estimates</code> corresponds to a single attribute or interaction. Only returned when respondent-varying characteristics are present. To obtain AMCE and ACIE estimates conditional on the values of the respondent-varying characteristics see <code><a href="#topic+summary.amce">summary.amce</a></code></p>
</td></tr>
<tr><td><code>samplesize_full</code></td>
<td>
<p>The number of valid profiles (rows) in the dataset when respondent varying characteristics are included. Only returned when respondent-varying characteristics are present. </p>
</td></tr>
<tr><td><code>vcov.resp</code></td>
<td>
<p>The modified variance-covariance matrix for effect estimates conditional on respondent-varying characteristics, where dependent relationships have been incorporated into variances and covariances. Only returned when respondent-varying characteristics are present. </p>
</td></tr>
</table>


<h3>References</h3>

<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.amce">summary.amce</a></code> for summaries and <code><a href="#topic+plot.amce">plot.amce</a></code> for generating a coefficient plot using <code>ggplot2</code>.
</p>
<p><code><a href="#topic+makeDesign">makeDesign</a></code> to create <code>conjointDesign</code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Immigration Choice Conjoint Experiment Data from Hainmueller et. al. (2014).
data("immigrationconjoint")
data("immigrationdesign")

# Run AMCE estimator using all attributes in the design
results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` +
                `Country of Origin` + Job + `Job Experience` + `Job Plans` +
                `Reason for Application` + `Prior Entry`, data=immigrationconjoint,
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign)
# Print summary
summary(results)


# Run AMCE estimator using all attributes in the design with interactions
interaction_results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` +
                `Country of Origin` + Job + `Job Experience` + `Job Plans` +
                `Reason for Application` + `Prior Entry` + Education:`Language Skills` +
		Job: `Job Experience` + `Job Plans`:`Reason for Application`,
		data=immigrationconjoint, cluster=TRUE, respondent.id="CaseID",
		design=immigrationdesign)
# Print summary
summary(interaction_results)

# create weights in data
weights &lt;- runif(nrow(immigrationconjoint))
immigrationconjoint$weights &lt;- weights
# Run AMCE estimator using weights
results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` +
                `Country of Origin` + Job + `Job Experience` + `Job Plans` +
                `Reason for Application` + `Prior Entry`, data=immigrationconjoint,
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign,
		weights = "weights")
# Print summary
summary(results)

# Include a respondent-varying interaction
results &lt;- amce(Chosen_Immigrant ~ Gender + Education + Job +
	   	ethnocentrism:Job + Education:Job,
		data=immigrationconjoint, na.ignore = TRUE,
		cluster=FALSE,design=immigrationdesign,
		respondent.varying = "ethnocentrism")
# Print summary
summary(results)

# Change the baseline for "Education"
baselines &lt;- list()
baselines$Education &lt;- "graduate degree"

results &lt;- amce(Chosen_Immigrant ~ Gender + Education + Job +
		 Education:Job, data=immigrationconjoint,
		 cluster=FALSE,design=immigrationdesign,
		 baselines=baselines)
# Print summary
summary(results)

## End(Not run)

</code></pre>

<hr>
<h2 id='cjoint-package'>
cjoint: A Package for Estimating Average Marginal Component-specific Effects for Conjoint Survey Experiments
</h2><span id='topic+cjoint-package'></span><span id='topic+cjoint'></span>

<h3>Description</h3>

<p>This package allows researchers to estimate the causal effects of attributes in conjoint survey experiments. It implements the Average Marginal Component-specific Effects (AMCE) estimator presented in Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> cjoint</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 2.1.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-08-21</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Authors: Soubhik Barari, Elissa Berwick, Jens Hainmueller, Daniel Hopkins, Sean Liu, Anton Strezhnev, Teppei Yamamoto
</p>
<p>Maintainer: Anton Strezhnev &lt;astrezhnev@uchicago.edu&gt;
</p>


<h3>References</h3>

<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>

<hr>
<h2 id='immigrationconjoint'>
Immigration Conjoint Experiment Dataset from Hainmueller et. al. (2014)
</h2><span id='topic+immigrationconjoint'></span>

<h3>Description</h3>

<p>A dataset containing the results of a conjoint survey of a representative sample of American adults who were asked to choose which hypothetical immigrants they think should be admitted into the United States. Each row corresponds to a single profile presented to the respondent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("immigrationconjoint")</code></pre>


<h3>Format</h3>

<p>A data frame with 13,960 observations on the following 16 variables.
</p>

<dl>
<dt><code>CaseID</code></dt><dd><p>a numeric vector indicating the respondent to which the particular profile corresponds</p>
</dd>
<dt><code>contest_no</code></dt><dd><p>a numeric vector indicating the number of the task to which the profile corresponds</p>
</dd>
<dt><code>Education</code></dt><dd><p>a factor with levels <code>no formal</code>, <code>4th grade</code>, <code>8th grade</code>, <code>high school</code>, <code>two-year college</code>, <code>college degree</code>, <code>graduate degree</code></p>
</dd>
<dt><code>Gender</code></dt><dd><p>a factor with levels <code>female</code>, <code>male</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Country of Origin&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>India</code>, <code>Germany</code>, <code>France</code>, <code>Mexico</code>, <code>Philippines</code>, <code>Poland</code>, <code>China</code>, <code>Sudan</code>, <code>Somalia</code>, <code>Iraq</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Reason for Application&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>reunite with family</code>, <code>seek better job</code>, <code>escape persecution</code></p>
</dd>
<dt><code>Job</code></dt><dd><p>a factor with levels <code>janitor</code>, <code>waiter</code>, <code>child care provider</code>, <code>gardener</code>, <code>financial analyst</code>, <code>construction worker</code>, <code>teacher</code>, <code>computer programmer</code>, <code>nurse</code>, <code>research scientist</code>, <code>doctor</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Job Experience&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>none</code>, <code>1-2 years</code>, <code>3-5 years</code>, <code>5+ years</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Job Plans&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>will look for work</code>, <code>contract with employer</code>, <code>interviews with employer</code>, <code>no plans to look for work</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Prior Entry&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>never</code>, <code>once as tourist</code>, <code>many times as tourist</code>, <code>six months with family</code>, <code>once w/o authorization</code></p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Language Skills&#8288;</span>&rsquo;</dt><dd><p>a factor with levels <code>fluent English</code>, <code>broken English</code>, <code>tried English but unable</code>, <code>used interpreter</code></p>
</dd>
<dt><code>Chosen_Immigrant</code></dt><dd><p>a numeric vector denoting whether the immigrant profile was selected</p>
</dd>
<dt><code>ethnocentrism</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>profile</code></dt><dd><p>a numeric vector giving the profile number</p>
</dd>
<dt><code>LangPos</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>PriorPos</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data("immigrationconjoint")
data("immigrationdesign")

# Run AMCE estimator using all attributes in the design
results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` + 
                `Country of Origin` + Job + `Job Experience` + `Job Plans` + 
                `Reason for Application` + `Prior Entry`, data=immigrationconjoint, 
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign)

## End(Not run)
</code></pre>

<hr>
<h2 id='immigrationdesign'>
Conjoint Design for the Immigration Experiment in Hainmueller et. al. (2014)
</h2><span id='topic+immigrationdesign'></span>

<h3>Description</h3>

<p>A &quot;conjointDesign&quot; object for the randomization scheme used in the immigration conjoint experiment in &quot;Causal Inference in Conjoint Analysis.&quot; See <code><a href="#topic+immigrationconjoint">immigrationconjoint</a></code> for the accompanying dataset. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("immigrationdesign")</code></pre>


<h3>Format</h3>

<p>A &quot;conjointDesign&quot; object. See <code><a href="#topic+makeDesign">makeDesign</a></code> for more information about the structure.
</p>


<h3>Source</h3>

<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Loads the immigrationconjoint dataset and the immigrationdesign object
data("immigrationconjoint")
data("immigrationdesign")

# immigrationdesign is passed to the amce() function through the "design" argument.
results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` + 
                `Country of Origin` + Job + `Job Experience` + `Job Plans` + 
                `Reason for Application` + `Prior Entry`, data=immigrationconjoint, 
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign)


## End(Not run)
</code></pre>

<hr>
<h2 id='japan2014conjoint'>
Japan 2014 Conjoint Experiment Dataset from Horiuchi et. al. (2014)
</h2><span id='topic+japan2014conjoint'></span>

<h3>Description</h3>

<p>A dataset containing the results of a conjoint survey of a representative sample of Japanese adults who were asked to choose which of two parties (with specified policy manifestos) they would support in the 2014 House of Representatives general election. Each row corresponds to a single profile presented to the respondent. See the original replication archive (Horiuchi et. al. 2014) for more detailed descriptions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("japan2014conjoint")</code></pre>


<h3>Format</h3>

<p>A data frame with 20,360 observations on the following 11 variables.
</p>

<dl>
<dt>respondent</dt><dd><p>a character vector uniquely identifying the respondent</p>
</dd>
<dt>respondentIndex</dt><dd><p>a numeric vector uniquely indexing the respondent</p>
</dd>
<dt>task</dt><dd><p>a numeric vector indexing the task presented to the respondent</p>
</dd>
<dt>profile</dt><dd><p>a numeric vector indexing the profile presented to the respondent</p>
</dd>
<dt>selected</dt><dd><p>a numeric vector indicating whether the profile was selected</p>
</dd>
<dt>Consumption tax</dt><dd><p>a factor indicating the profile position on 'Consumption Tax'</p>
</dd>
<dt>Consumption tax.rowpos</dt><dd><p>a numeric vector indicating which row the attribute 'Consumption Tax' appeared in the given profile</p>
</dd>
<dt>Employment</dt><dd><p>a factor indicating the profile position on 'Employment'</p>
</dd>
<dt>Employment.rowpos</dt><dd><p>a numeric vector indicating which row the attribute 'Employment' appeared in the given profile</p>
</dd>
<dt>Monetary and fiscal policy</dt><dd><p>a factor indicating the profile position on 'Monetary and Fiscal Policy'</p>
</dd>
<dt>Monetary and fiscal policy.rowpos</dt><dd><p>a numeric vector indicating which row the attribute 'Monetary and Fiscal Policy' appeared in the given profile</p>
</dd>
<dt>Economic growth strategy</dt><dd><p>a factor indicating the profile position on 'Economic Growth Strategy'</p>
</dd>
<dt>Economic growth strategy.rowpos</dt><dd><p>a factor indicating which row the attribute 'Economic Growth Strategy' appeared in the given profile</p>
</dd>
<dt>Nuclear power</dt><dd><p>a factor indicating the profile position on 'Nuclear Power'</p>
</dd>
<dt>Nuclear power.rowpos</dt><dd><p>a factor indicating which row the attribute 'Nuclear Power' appeared in the given profile</p>
</dd>
<dt>TPP</dt><dd><p>a factor indicating the profile position on 'Trans-Pacific Partnership (TPP)'</p>
</dd>
<dt>TPP.rowpos</dt><dd><p>a factor indicating which row the attribute 'Trans-Pacific Partnership (TPP)' appeared in the given profile</p>
</dd>
<dt>Collective self-defense</dt><dd><p>a factor indicating which row the attribute 'Collective Self-Defense' appeared in the given profile</p>
</dd>
<dt>Collective self-defense.rowpos</dt><dd><p>a factor indicating which row the attribute 'Collective Self-Defense' appeared in the given profile</p>
</dd>
<dt>Constitutional revision</dt><dd><p>a factor indicating the profile position on 'Constitutional Revision'</p>
</dd>
<dt>Constitutional revision.rowpos</dt><dd><p>a factor indicating which row the attribute 'Constitutional Revision' appeared in the given profile</p>
</dd>
<dt>National assembly seat reduction</dt><dd><p>a factor indicating the profile position on 'National Assembly Seat Reduction'</p>
</dd>
<dt>National assembly seat reduction.rowpos</dt><dd><p>a factor indicating which row the attribute 'National Assembly Seat Reduction' appeared in the given profile</p>
</dd>
<dt>wgt</dt><dd><p>post-stratification weights to map the survey sample to the census population</p>
</dd>
</dl>



<h3>Note</h3>

<p>The origional survey was conducted in Japanese. To comply with CRAN's policy, we translate the variable names into English.
</p>


<h3>Source</h3>

<p>Horiuchi, Yusaku; Smith, Daniel M.; Yamamoto, Teppei, 2017, &quot;Replication Data for: Measuring Voters' Multidimensional Policy Preferences with Conjoint Analysis: Application to Japan's 2014 Election&quot;, https://doi.org/10.7910/DVN/KUMMUJ, Harvard Dataverse, V1
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("japan2014conjoint")

# Run AMCE estimator using all attributes and uniform design
results &lt;- amce(selected ~ `Consumption tax` + `Employment` + `Monetary and fiscal policy` + 
                  `Economic growth strategy` + `Nuclear power` + `TPP` + 
                  `Collective self-defense` + `Constitutional revision` + 
                  `National assembly seat reduction`,  data=japan2014conjoint, cluster=TRUE, 
                  respondent.id="respondentIndex", weights="wgt", design="uniform")
</code></pre>

<hr>
<h2 id='makeDesign'>
Create conjoint design
</h2><span id='topic+makeDesign'></span>

<h3>Description</h3>

<p>Generates a &quot;conjointDesign&quot; object to be passed to <code><a href="#topic+amce">amce</a></code>. Average Marginal Component Effects (AMCEs) are defined relative to the distribution of potential choice profiles. When the probability of each profile being presented to a respondent is not constant (e.g. some profiles are restricted from appearing), some attributes will not be independent and simple difference-in-means estimates will not be unbiased for the AMCE. This function allows users to specify non-uniform profile assignment schemes to be used by <code><a href="#topic+amce">amce</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeDesign(type="file", J=NULL, filename=NULL, attribute.levels = NULL,
            constraints=NULL, level.probs=NULL, tol=1e-14)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeDesign_+3A_type">type</code></td>
<td>

<p>A character string - either &quot;file&quot;, &quot;constraints&quot;, or &quot;array&quot;. Each option requires a different set of additional arguments. If &quot;file&quot;, the user must specify a filename of a &quot;.dat&quot; file exported via the Conjoint Survey Design Tool. If &quot;constraints,&quot; the user must provide a list of attributes and levels in &quot;attribute.levels&quot; along with any constraints in &quot;constraints&quot; and attribute randomization weights in &quot;level.probs&quot;. If &quot;array,&quot; the user must pass an array to J.
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_j">J</code></td>
<td>

<p>If type=&quot;array&quot;, <code>makeDesign</code> requires a d-dimensional array to be passed to J where d is the number of attributes in a single profile. . Each dimension should have a number of indices corresponding to the number of levels for that attribute. Attribute and level names are taken from the <code>dimnames</code> of the array (level names are taken from the list elements, attribute names are taken from the names of the elements). Each cell of the array is the joint probability of assigning that particular profile (combination of attribute-levels).
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_filename">filename</code></td>
<td>

<p>If type=&quot;file&quot;, this is a character string giving the name of a design file exported from the Conjoint Survey Design Tool using the &quot;Export design to R&quot; option.
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_attribute.levels">attribute.levels</code></td>
<td>

<p>If type=&quot;constraints&quot;, attribute.levels is a required argument. This takes a named list with each element containing a character vector with the level names of a single attribute. The names of the elements should be the attribute names.
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_constraints">constraints</code></td>
<td>

<p>If type = &quot;constraints&quot;, this is an optional argument. A list of lists. Each element list is a &quot;restriction&quot; and describes a set of restricted profiles (attribute-level groupings that cannot be displayed to a respondent) with character vectors containing the attribute-levels that cannot be displayed together. If your design prevents certain profiles from being seen by respondents (for example, if the particular profile would be highly impluasible), this argument allows you to specify those restrictions. Each element of a restriction is a character vector of levels for a particular attribute. That element must have the name of one of the attributes. For each specified restriction, <code>makeDesign</code> will treat any profile containing any combination of the restricted levels as having zero probability of being displayed. For example, if a restriction contains two elements: A = c(&quot;1&quot;,&quot;2&quot;) and B = c(&quot;4&quot;, &quot;5&quot;), then any profiles containing levels 1 or 2 of attribute A and levels 4 or 5 of attribute B will restricted from the design.
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_level.probs">level.probs</code></td>
<td>

<p>If type = &quot;constraints&quot;, this is an optional argument. A named list containing numeric vector elements. Each list element should have the name of one of the attributes passed in attribute.levels and the numeric vector it contains should have the names of the corresponding levels. Each element of the numeric vector specifies the marginal probability of that level appearing in a profile before any restricted profiles are eliminated. Each of the vectors should sum to 1.  If NULL, then uniform randomization is assumed (excluding constrained profiles).
</p>
</td></tr>
<tr><td><code id="makeDesign_+3A_tol">tol</code></td>
<td>

<p>A very small non-zero number used in the routine for determining which attributes are dependent (the distribution of one attribute depends on the value of another attribute). Two attributes are independent if the distribution of one attribute does not change conditional on the other - this is calculated automatically through the J matrix Do not change unless you are having issues with <code>makeDesign</code> incorrectly labeling independent attributes as dependent (in which case, lower the value) or incorrectly labeling dependent attributes as independent (in which case, raise the value).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See Hainmueller et. al. (2014) for details on the AMCE estimator in the presence of conditionally independent attributes. If you have no restricted profiles in your design and uniform randomization across profiles is used, then creating a design object is not necessary (the regression coefficients will give you AMCEs). However, if some profile combinations are restricted or some profiles are made to appear more often than others, it is necessary to specify them using <code>makeDesign</code> in order to obtain the correct AMCE estimates using <code><a href="#topic+amce">amce</a></code>.
</p>
<p>You can create designs with assignment probabilities different from those of your original experiment. This allows you to estimate AMCEs for another tailored user-defined distribution of attribute-levels, such as the empirical distribution of the attributes in the population of interest. Note that the distribution of the original experiment must have a support that covers the entire support of the custom-made distribution. See Hainmueller et. al. (2014) for more details about the AMCE estimator and its relationship to the attribute-level distribution.
</p>


<h3>Value</h3>

<p>Returns an object of class &quot;conjointDesign&quot; containing:
</p>
<table>
<tr><td><code>J</code></td>
<td>

<p>A d-dimensional array where d is the number of attributes in a single profile. Each dimension has a number of indices corresponding to the number of levels for that attribute. Each entry is the probability of that profile being displayed to a survey respondent. The <code>dimnames</code> of the array contain the attribute and level names.
</p>
</td></tr>
<tr><td><code>dependence</code></td>
<td>

<p>A list of character vectors denoting which attributes are marginally dependent - used in the <code><a href="#topic+amce">amce</a></code> estimation routine.
</p>
</td></tr>
</table>


<h3>References</h3>

<p>Strezhnev, A., Hainmueller, J., Hopkins, D., and Yamamoto, T. (2014) Conjoint Survey Design Tool. <a href="https://github.com/astrezhnev/conjointsdt/">https://github.com/astrezhnev/conjointsdt/</a>
</p>
<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>See Also</h3>

<p><code><a href="#topic+amce">amce</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("immigrationconjoint")
## Not run: 
## You can load a design from a .dat file from the Conjoint SDT
immigrationdesign &lt;- makeDesign(type="file", filename="immigrant.dat")

## End(Not run)

## Or you can construct the conjoint design manually in in R
attribute_list &lt;- list()
attribute_list[["Education"]] &lt;-c("no formal","4th grade",
                                  "8th grade","high school",
                                  "two-year college","college degree",
                                  "graduate degree")
attribute_list[["Gender"]] &lt;- c("female","male")
attribute_list[["Country of Origin"]] &lt;-  c("Germany","France","Mexico",
                                            "Philippines","Poland","India",
                                            "China","Sudan","Somalia","Iraq")
attribute_list[["Reason for Application"]] &lt;- c("reunite with family",
                                                "seek better job",
                                                "escape persecution")
attribute_list[["Job"]] &lt;- c("janitor","waiter","child care provider",
                             "gardener","financial analyst",
                             "construction worker","teacher",
                             "computer programmer","nurse",
                             "research scientist","doctor")
attribute_list[["Job Experience"]] &lt;- c("none","1-2 years",
                                        "3-5 years","5+ years")
attribute_list[["Job Plans"]] &lt;- c("contract with employer",
                                   "interviews with employer", "will look for work",
                                   "no plans to look for work")
attribute_list[["Prior Entry"]] &lt;- c("never","once as tourist",
                                     "many times as tourist","six months with family",
                                     "once w/o authorization")
attribute_list[["Language Skills"]] &lt;- c("fluent English",
                                         "broken English",
                                         "tried English but unable",
                                         "used interpreter")

# Randomization constraints in the conjoint design
constraint_list &lt;- list()
# Constraints on Education and Job attributes
# Cannot have "doctor" with "no formal" - "high school" education
constraint_list[[1]] &lt;- list()
constraint_list[[1]][["Education"]] &lt;- c("no formal","4th grade",
                                          "8th grade","high school")
constraint_list[[1]][["Job"]] &lt;- c("financial analyst",
                                  "computer programmer","research scientist",
                                  "doctor")
# Constraints on Reason for Application/Country of Origin
constraint_list[[2]] &lt;- list()
constraint_list[[2]][["Reason for Application"]] &lt;- c("escape persecution")
constraint_list[[2]][["Country of Origin"]] &lt;- c("Germany","France",
                                                "Mexico","Philippines",
                                                "Poland","India")

immigrationdesign &lt;- makeDesign(type='constraints', attribute.levels=attribute_list,
                                constraints=constraint_list)

## You can set your own user-defined distribution over the attribute-levels
marginal_weights &lt;- list() # Uniform for all except education which is bimodal
marginal_weights[["Education"]] &lt;- c(1/20, 1/20, 2/10, 2/10, 1/10, 2/10, 2/10)
marginal_weights[["Gender"]] &lt;- rep(1/length(attribute_list[["Gender"]]),
                                length(attribute_list[["Gender"]]))
marginal_weights[["Country of Origin"]] &lt;- rep(1/length(
                                      attribute_list[["Country of Origin"]]),
                                      length(attribute_list[["Country of Origin"]]))
marginal_weights[["Reason for Application"]] &lt;- rep(1/length(
                              attribute_list[["Reason for Application"]]),
                              length(attribute_list
                              [["Reason for Application"]]))
marginal_weights[["Job"]] &lt;- rep(1/length(attribute_list[["Job"]]),
                              length(attribute_list[["Job"]]))
marginal_weights[["Job Experience"]] &lt;- rep(1/length(attribute_list[["Job Experience"]]),
                                      length(attribute_list[["Job Experience"]]))
marginal_weights[["Job Plans"]] &lt;- rep(1/length(attribute_list[["Job Plans"]]),
                                      length(attribute_list[["Job Plans"]]))
marginal_weights[["Prior Entry"]] &lt;- rep(1/length(attribute_list[["Prior Entry"]]),
                                      length(attribute_list[["Prior Entry"]]))
marginal_weights[["Language Skills"]] &lt;- rep(1/length(attribute_list[["Language Skills"]]),
                                      length(attribute_list[["Language Skills"]]))

## Not run: 
immigrationdesign_reweight &lt;- makeDesign(type='constraints', attribute.levels=attribute_list,
                                constraints=constraint_list, level.probs=marginal_weights)

## Note that estimated AMCEs can depend on the randomization distribution

results &lt;- amce(Chosen_Immigrant ~  Gender + Education + Job, data=immigrationconjoint,
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign)
summary(results)

results_wt &lt;- amce(Chosen_Immigrant ~  Gender + Education + Job, data=immigrationconjoint,
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign_reweight)
summary(results_wt)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.amce'>
Plot AMCE Estimates
</h2><span id='topic+plot.amce'></span>

<h3>Description</h3>

<p><code>plot</code> method for &quot;amce&quot; objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'amce'
plot(x, main = "", xlab = "Change in E[Y]", ci = 0.95,
                    colors = NULL, xlim = NULL, breaks = NULL,
                    labels = NULL, attribute.names = NULL, level.names = NULL,
                    label.baseline = TRUE, text.size = 11, text.color = "black",
                    point.size = 0.5, dodge.size = 0.9, plot.theme = NULL,
                    plot.display = "all",
					facet.names = NULL, facet.levels = NULL, 
					group.order = NULL,font.family = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.amce_+3A_x">x</code></td>
<td>

<p>An object of class &quot;amce&quot;, a result of a call to <code><a href="#topic+amce">amce</a></code>
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_main">main</code></td>
<td>

<p>Title of the plot.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_xlab">xlab</code></td>
<td>

<p>Label of the x-axis of the plot (AMCE or ACIE). Default is &quot;Change in E[Y]&quot;
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_ci">ci</code></td>
<td>

<p>Levels for confidence intervals to plot around point estimates. Must be between 0 and 1. Default is .95
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_colors">colors</code></td>
<td>

<p>Vector of color names to be used for points and confidence intervals. The <code>plot</code> function will alternate between the colors in the vector for each attribute being plotted. If NULL, <code>plot</code> will use a default <code>ggplot2</code> color scheme.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_xlim">xlim</code></td>
<td>

<p>Numeric vector denoting the upper and lower bounds of the x-axis in the plot. If <code>NULL</code> the plot function will automatically set a range that includes all effect estimates.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_breaks">breaks</code></td>
<td>

<p>Numeric vector denoting where x-axis tick marks should be placed. If <code>NULL</code> plot will use <code>ggplot2</code> defaults.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_labels">labels</code></td>
<td>

<p>Vector denoting how x-axis tick marks should be labeled. If <code>NULL</code> plot will use ggplot2 defaults.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_attribute.names">attribute.names</code></td>
<td>

<p>Character vector of attribute names to be plotted as labels. By default <code>plot.amce</code> will use the attribute names in the &quot;amce&quot; object passed to it.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_level.names">level.names</code></td>
<td>

<p>A list containing character vector elements with names in <code>attribute.names</code>. Each character vector in the list contains the level names to be plotted as labels beneath the corresponding attribute. By default <code>plot.amce</code> will use the level names in the &quot;amce&quot; object passed to it.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_label.baseline">label.baseline</code></td>
<td>

<p>If <code>TRUE</code>, the baseline levels for each attribute will be labeled as such. Defaults to <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_text.size">text.size</code></td>
<td>

<p>Size of text. Defaults to 11.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_text.color">text.color</code></td>
<td>

<p>Color of text in plot. Defaults to &quot;black&quot;.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_point.size">point.size</code></td>
<td>

<p>Size of points in the plot. Defaults to 0.5.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_dodge.size">dodge.size</code></td>
<td>

<p>Width to dodge overlaps to the side. Defaults to 0.9.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_plot.theme">plot.theme</code></td>
<td>

<p>A ggplot2 'theme' object to be added to the plot. If NULL, defaults to black-and-white theme. Note that passing a theme object will override text and point color/size options. 
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_plot.display">plot.display</code></td>
<td>

<p>Character string, one of &quot;all&quot;, &quot;unconditional&quot;, or &quot;interaction&quot;. Option &quot;all&quot; will display both unconditional and interaction estimates. The &quot;unconditional&quot; option will display only 1 plot for unconditional estimates (both AMCE and ACIE) ignoring any facets provided to &quot;facet.names&quot; or respondent-varying characteristics. Option &quot;interaction&quot; will drop the unconditional plot and instead display only (unconditional) ACIE's or estimates conditional on respondent-varying characteristics as specified in the user-supplied option &quot;facet.names&quot;. Defaults to &quot;all&quot;.</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_facet.names">facet.names</code></td>
<td>

<p>To facet plots (i.e., make separate plots for each value of a variable) give &quot;facet.names&quot; a vector of character strings containing the names of the variable(s) (either profile attribute or respondent-varying) to facet by. Unless given specific levels in &quot;facet.levels&quot;, the plotted levels will consist of all levels of a factor variable or the quantiles of a continuous variable. Multiple facet variables cannot currently be varied at the same time within the same plot. Instead conditional effects will be calculated for one facet at a time while others are held at their first value in facet.levels, by default the bottom quantile for continuous variables and the baseline for factors.</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_facet.levels">facet.levels</code></td>
<td>

<p>To manually set facet levels, provide a list to &quot;facet.levels&quot;. Names of list entries should correspond with variable names. The content of each entry should be a vector giving the desired levels, whether factors or continuous. To change the displayed names of the levels, assign names to each vector entry. 
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_group.order">group.order</code></td>
<td>

<p>To manually set the order of the attributes, provide a vector to &quot;group.order&quot;. Names of the vector entries should correspond with name of the attribute. 
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_...">...</code></td>
<td>

<p>Other graphical parameters passed to <code>ggplot</code>.
</p>
</td></tr>
<tr><td><code id="plot.amce_+3A_font.family">font.family</code></td>
<td>

<p>Will be passed to the ggplot function as the argument for font.family. If NULL, defaults will be used.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object containing a dotplot of estimated AMCEs.
</p>


<h3>References</h3>

<p>Hainmueller, J., Hopkins, D., and Yamamoto T. (2014) Causal Inference in Conjoint Analysis: Understanding Multi-Dimensional Choices via Stated Preference Experiments. Political Analysis 22(1):1-30
</p>


<h3>See Also</h3>

<p><code><a href="#topic+amce">amce</a></code> for the main estimation routine.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Immigration Choice Conjoint Experiment Data from Hainmueller et. al. (2014).
data("immigrationconjoint")
data("immigrationdesign")

# Run AMCE estimator using all attributes in the design
results &lt;- amce(Chosen_Immigrant ~  Gender + Education + `Language Skills` +
                `Country of Origin` + Job + `Job Experience` + `Job Plans` +
                `Reason for Application` + `Prior Entry`, data=immigrationconjoint,
                cluster=TRUE, respondent.id="CaseID", design=immigrationdesign)

# Plot results
plot(results, xlab="Change in Pr(Immigrant Preferred for Admission to U.S.)",
    ylim=c(-.3,.3), breaks=c(-.2, 0, .2), labels=c("-.2","0",".2"), text.size=13)
	
# Plot results with user-specified order of attributes
plot(results, xlab="Change in Pr(Immigrant Preferred for Admission to U.S.)",
     ylim=c(-.3,.3), breaks=c(-.2, 0, .2), labels=c("-.2","0",".2"), text.size=13,
     group.order=c("Gender","Education","Job",
                     "Language Skills","Job Experience",
                     "Job Plans","Reason for Application",
                     "Prior Entry","Country of Origin"))


# Run AMCE estimator with an interaction with a respondent-varying characteristic
interaction_results &lt;- amce(Chosen_Immigrant ~ Gender + Education
		    + Job + ethnocentrism:Job,
		    data = immigrationconjoint,na.ignore=TRUE,
		    design = immigrationdesign, cluster = FALSE,
		    respondent.varying = "ethnocentrism")

# Plot results with additional plots for quantiles of the respondent-varying characteristic
plot(interaction_results)

# Plot results with user-specified order of attributes
plot(interaction_results, group.order=c("Gender","Education","Job"))

# Do not show output for variables that do not vary with facetted levels
plot(interaction_results,plot.display="unconditional")

# RUN AMCE estimator with an interaction between two factor variables
interaction_results &lt;- amce(Chosen_Immigrant ~ Gender + Education + Job
		    + Education:Job, data = immigrationconjoint,
		    cluster = FALSE, design = immigrationdesign)

# Plot results with different plots for all levels of ACIE
plot(interaction_results,facet.names = "Education")


# Plot results with different plots for only two levels of one interacted variable
facet.levels1 &lt;- list()
facet.levels1[["Education"]] &lt;- c("college degree","graduate degree")
plot(interaction_results,facet.names = "Education",facet.levels = facet.levels1)

# Display only interaction panes
plot(interaction_results,facet.names = "Education",plot.display="interaction")

#Display only non-interaction panes
plot(interaction_results,facet.names = "Education",plot.display="unconditional")

#Change displayed attribute and level names
results &lt;- amce(Chosen_Immigrant ~ Gender + Education + Job, data = immigrationconjoint,
		    cluster = FALSE, design = immigrationdesign)
levels.test&lt;-list()
levels.test[["Gender"]]&lt;-c("level1","level2")
levels.test[["Education"]]&lt;-c("level1","b","c","d","e","f","g")
levels.test[["Job"]]&lt;-c("a","b","c","d","e","f","g","h","i","j","k")
plot(results, level.names = levels.test, main="test", xlab="test", 
ci=0.95, breaks=c(-0.2,-0.1,0,0.1,0.2), attribute.names = c("attribute1","attribute2","attribute3"))


## End(Not run)
</code></pre>

<hr>
<h2 id='read.qualtrics'>
Read Data from a Conjoint Qualtrics Experiment
</h2><span id='topic+read.qualtrics'></span>

<h3>Description</h3>

<p>Converts the raw .CSV data file downloaded from an online conjoint experiment run using the Qualtrics survey software into a data frame usable by the <code><a href="#topic+amce">amce</a></code> routine. Each row of the Qualtrics .CSV file is a single survey respondent. The rows of the resulting dataframe correspond to individual profile choices. Currently, the function supports various types of outcomes in a conjoint experiment, with details explained below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.qualtrics(filename, responses = NULL, covariates = NULL,
	respondentID = NULL, letter = "F",  new.format=FALSE, ranks = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.qualtrics_+3A_filename">filename</code></td>
<td>

<p>A .CSV file containing responses exported from a Qualtrics survey experiment. The first row contains question and variable identifiers (e.g. V1, Q1). The second row contains variable names and question texts. Subsequent rows contain the answers of each respondent. This .CSV file can be exported through the &quot;Download Data&quot; panel in the Qualtrics web interface. Note that answers should be shown as &quot;coded values&quot; and not as choice text.
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_responses">responses</code></td>
<td>

<p>A character or integer vector with the identifiers of the CSV columns that contain the conjoint responses. The first element corresponds to the identifier of the first question, the second element corresponds to the second question and so on. The length of this vector must be equal to the number of conjoint tasks answered by each respondent. Identifiers are typically in the form &quot;Q#&quot; - e.g. <code>c("Q1", "Q3", "Q5")</code> would represent a three question survey where the conjoint questions are Q1, Q3 and Q5. If specified as an integer vector, the elements are the column numbers corresponding to each question response.
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_covariates">covariates</code></td>
<td>

<p>A character vector denoting the column names of any other respondent-level characteristics measured in the survey that should be included in the resulting dataframe.
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_respondentid">respondentID</code></td>
<td>

<p>A character string denoting a column containing a unique identifier for each respondent (e.g. an IP address). This identifier will be carried over into the output. If NULL, each respondent will be given an arbitrary identifier in the output dataframe. Leave as NULL if you do not want responses to be linked back to a known respondent identifier.
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_new.format">new.format</code></td>
<td>

<p>Indicator for whether the .csv file is from the new Qualtrics export format with three title rows (TRUE) or from the old format (FALSE) with two title rows. Defaults to FALSE.
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_ranks">ranks</code></td>
<td>

<p>An integer vector with the identifiers of the CSV columns that contain the conjoint rankings or ratings. 
</p>
</td></tr>
<tr><td><code id="read.qualtrics_+3A_letter">letter</code></td>
<td>

<p>The beginning letter used in the naming convention of levels and attributes.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function currently only works with experiments that generate profiles using .PHP scripts created by the Conjoint Survey Design Tool. It also is only able to handle standard conjoint designs (binary outcome variable/forced choice).<br />
(<a href="https://github.com/astrezhnev/conjointsdt/">https://github.com/astrezhnev/conjointsdt/</a>). <br />
</p>
<p>For each respondent in the .CSV file, attribute and level names are stored using the following naming convention:<br />
<b>Level Name</b>: F-[task number]-[profile number]-[attribute number]<br />
<b>Attribute Name</b>: F-[task number]-[attribute number]<br />
<b>Example</b>: F-1-3-2 denotes the level corresponding to Task 1, Profile 3, Attribute 2<br />
F-3-3 denotes the attribute name corresponding to Task 3, Attribute 3
</p>
<p><b>Special Characters</b>: Some special characters have been reserved for this function if (cjoint&gt;v2.0.6) for efficienty purpose. This means some special characters cannot be used in the attribute names in your data. However, if you still want to display special characters in attribute names in your plot, you may want to use the argument <code>attribute.names</code> in function <code>plot.amce</code> to customize the display of your attribute names.
</p>
<p><b>East Asian Language Support:</b> The read.qualtrics function relies on the read.csv function in R-core. The read.csv function only works well for some of character encoding, but not others, for East Asian languages in some Operation 
systems. In Windows, .csv files containing East Asian languages such as Chinese or Japanese should be stored in the ANSI encoding rather than UTF-8 for the read.csv function to work. Further, if you are reading the csv file in a Windows OS with a different display language as the file you are trying to read in, you will need to reconfigure R into the language of the csv file by <code>Sys.setlocale()</code>. 
</p>
<p><b>Different types of responses</b>: This function supports various types of responses commonly used in conjoint analyses. Here are some illustrations on some typical types. 
</p>
<p>1. The respondent is asked to fill in the profile she prefers the most, and her choice is restored in one response variable. In this case, set the argument responses=the response variable.
</p>
<p>2. The respondent is asked to give each profile a rank within each task, and her ranks for each profile within each task are restored in J response variables, suppose there are J profiles within each task. In this case, set the argument ranks as a vector restoring the variables names of these responses variables, in the order of rank of profile 1 in task 1, rank of profile 2 in task 1, ... rank of profile J in task 1, rank of profile 1 in task 2, rank of profile 2 in task 2, ... rank of profile J in task 2, ..., rank of profile J in task K.
</p>
<p>3. The respondent is asked to rate each profile within each task, and her ratings for each profile within each task are restored in J response variables, suppose there are J profiles within each task. In this case, set the argument ratings as a vector restoring the variables names of these responses variables, in the order of rating of profile 1 in task 1, rating of profile 2 in task 1, ... rating of profile J in task 1, rating of profile 1 in task 2, rating of profile 2 in task 2, ... rating of profile J in task 2, ..., rating of profile J in task K.
</p>
<p>4. The respondent is asked to select the top L profiles she prefers within each task. L colud be smaller than the number of profiles J available within each task. Her choices are recorded with L variables for each task, indicating the first choice among J profiles in task 1, the second choice among J profiles in task 1, ..., the L-th choice among J profiles in task 1, the first choice among J profiles in task 2, the second choice among J profiles in task 2, ..., the L-th choice among J profiles in task 2, ..., the L-th choice among J profiles in task K. In this case, the read.qualtrics function should be applied in the following step:
</p>
<p>(a) Set the argument response as a vector restoring the variables names of the first choice among J profiles in all tasks, in the order of first choice among J profiles in task 1, first choice among J profiles in task 2, ..., first choice among J profiles in task K. Save the respective data output.
</p>
<p>(b) Set the argument response as a vector restoring the variables names of the second choice among J profiles in all tasks, in the order of second choice among J profiles in task 1, second choice among J profiles in task 2, ..., second choice among J profiles in task K. Save the respective data output.
</p>
<p>(c) Repeat until you have completed the above steps for all top L choices. And then merge all data according to their respondentID. However, you may need to change the variable name of the responses a little bit for a successful merge.
</p>
<p>5. The respondent is asked to select the top L profiles she prefers within each task. L colud be smaller than the number of profiles J available within each task. The questionnaire is designed in such format that the respondent fills in the ranking of top L profiles that she prefers, while leave the ranking of the other J-L profiles blank. In this case, set the argument ranks as a vector restoring the variables names of these J responses variables, in the order of rank of profile 1 in task 1, rank of profile 2 in task 1, ... rank of profile J in task 1, rank of profile 1 in task 2, rank of profile 2 in task 2, ... rank of profile J in task 2, ..., rank of profile J in task K. 
</p>


<h3>Value</h3>

<p>A dataframe in which each row corresponds to a single profile. The column &quot;selected&quot; denotes whether that profile was selected by the respondent. The columns &quot;respondent&quot; and &quot;task&quot; denote the respondent and task numbers to which the profile was assigned. Respondent-level covariates are appended to each row.
</p>


<h3>References</h3>

<p>Strezhnev, A., Hainmueller, J., Hopkins, D., and Yamamoto, T. (2014) Conjoint Survey Design Tool. <a href="https://github.com/astrezhnev/conjointsdt/">https://github.com/astrezhnev/conjointsdt/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# An example file with 5 conjoint tasks per respondent and a single covariate
# You can demonstrate this function's output using the CandidateConjointQualtrics.csv 
# demonstration file in the 'inst' subdirectory
conjoint_data &lt;- read.qualtrics("CandidateConjointQualtrics.csv", 
responses=c("Q2.3", "Q2.7", "Q2.10", "Q2.13", "Q2.16"), 
covariates=c("Q6.6"), respondentID="V1")

## End(Not run)
</code></pre>

<hr>
<h2 id='read.with.qualtRics'>
Read Data from a Conjoint Qualtrics Experiment
</h2><span id='topic+read.with.qualtRics'></span>

<h3>Description</h3>

<p>Converts the raw dataframe downloaded with R Package <code>"qualtRics"</code> from an online conjoint experiment into a data frame usable by the <code><a href="#topic+amce">amce</a></code> routine. Each row of the raw dataframe is a single survey respondent. The rows of the resulting dataframe correspond to individual profile choices. Currently, the function supports various types of outcomes in a conjoint experiment, with details explained below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.with.qualtRics(filename, responses = NULL, covariates = NULL,
	respondentID = NULL, letter = "F",  new.format=FALSE, ranks = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.with.qualtRics_+3A_filename">filename</code></td>
<td>

<p>A dataframe containing responses download from a Qualtrics survey experiment with R package <code>"qualtRics"</code>. Each row contains the answers of each respondent. Note that answers should be shown as &quot;coded values&quot; and not as choice text.
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_responses">responses</code></td>
<td>

<p>A character or integer vector with the identifiers of the CSV columns that contain the conjoint responses. The first element corresponds to the identifier of the first question, the second element corresponds to the second question and so on. The length of this vector must be equal to the number of conjoint tasks answered by each respondent. Identifiers are typically in the form &quot;Q#&quot; - e.g. <code>c("Q1", "Q3", "Q5")</code> would represent a three question survey where the conjoint questions are Q1, Q3 and Q5. If specified as an integer vector, the elements are the column numbers corresponding to each question response.
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_covariates">covariates</code></td>
<td>

<p>A character vector denoting the column names of any other respondent-level characteristics measured in the survey that should be included in the resulting dataframe.
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_respondentid">respondentID</code></td>
<td>

<p>A character string denoting a column containing a unique identifier for each respondent (e.g. an IP address). This identifier will be carried over into the output. If NULL, each respondent will be given an arbitrary identifier in the output dataframe. Leave as NULL if you do not want responses to be linked back to a known respondent identifier.
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_new.format">new.format</code></td>
<td>

<p>Indicator for whether the .csv file is from the new Qualtrics export format with three title rows (TRUE) or from the old format (FALSE) with two title rows. Defaults to FALSE.
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_ranks">ranks</code></td>
<td>

<p>An integer vector with the identifiers of the CSV columns that contain the conjoint rankings or ratings. 
</p>
</td></tr>
<tr><td><code id="read.with.qualtRics_+3A_letter">letter</code></td>
<td>

<p>The beginning letter used in the naming convention of levels and attributes.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function currently only works with experiments that generate profiles using .PHP scripts created by the Conjoint Survey Design Tool. It also is only able to handle standard conjoint designs (binary outcome variable/forced choice).<br />
(<a href="https://github.com/astrezhnev/conjointsdt/">https://github.com/astrezhnev/conjointsdt/</a>). <br />
</p>
<p>For each respondent in the dataframe, attribute and level names are stored using the following naming convention:<br />
<b>Level Name</b>: F-[task number]-[profile number]-[attribute number]<br />
<b>Attribute Name</b>: F-[task number]-[attribute number]<br />
<b>Example</b>: F-1-3-2 denotes the level corresponding to Task 1, Profile 3, Attribute 2<br />
F-3-3 denotes the attribute name corresponding to Task 3, Attribute 3
</p>
<p><b>East Asian Language Support:</b> The read.qualtrics function relies on the read.csv function in R-core. The read.csv function only works well for some of character encoding, but not others, for East Asian languages in some Operation 
systems. In Windows, .csv files containing East Asian languages such as Chinese or Japanese should be stored in the ANSI encoding rather than UTF-8 for the read.csv function to work.
</p>
<p><b>Different types of responses</b>: This function supports various types of responses commonly used in conjoint analyses. Here are some illustrations on some typical types. 
</p>
<p>1. The respondent is asked to fill in the profile she prefers the most, and her choice is restored in one response variable. In this case, set the argument responses=the response variable.
</p>
<p>2. The respondent is asked to give each profile a rank within each task, and her ranks for each profile within each task are restored in J response variables, suppose there are J profiles within each task. In this case, set the argument ranks as a vector restoring the variables names of these responses variables, in the order of rank of profile 1 in task 1, rank of profile 2 in task 1, ... rank of profile J in task 1, rank of profile 1 in task 2, rank of profile 2 in task 2, ... rank of profile J in task 2, ..., rank of profile J in task K.
</p>
<p>3. The respondent is asked to rate each profile within each task, and her ratings for each profile within each task are restored in J response variables, suppose there are J profiles within each task. In this case, set the argument ratings as a vector restoring the variables names of these responses variables, in the order of rating of profile 1 in task 1, rating of profile 2 in task 1, ... rating of profile J in task 1, rating of profile 1 in task 2, rating of profile 2 in task 2, ... rating of profile J in task 2, ..., rating of profile J in task K.
</p>
<p>4. The respondent is asked to select the top L profiles she prefers within each task. L colud be smaller than the number of profiles J available within each task. Her choices are recorded with L variables for each task, indicating the first choice among J profiles in task 1, the second choice among J profiles in task 1, ..., the L-th choice among J profiles in task 1, the first choice among J profiles in task 2, the second choice among J profiles in task 2, ..., the L-th choice among J profiles in task 2, ..., the L-th choice among J profiles in task K. In this case, the read.qualtrics function should be applied in the following step:
</p>
<p>(a) Set the argument response as a vector restoring the variables names of the first choice among J profiles in all tasks, in the order of first choice among J profiles in task 1, first choice among J profiles in task 2, ..., first choice among J profiles in task K. Save the respective data output.
</p>
<p>(b) Set the argument response as a vector restoring the variables names of the second choice among J profiles in all tasks, in the order of second choice among J profiles in task 1, second choice among J profiles in task 2, ..., second choice among J profiles in task K. Save the respective data output.
</p>
<p>(c) Repeat until you have completed the above steps for all top L choices. And then merge all data according to their respondentID. However, you may need to change the variable name of the responses a little bit for a successful merge.
</p>
<p>5. The respondent is asked to select the top L profiles she prefers within each task. L colud be smaller than the number of profiles J available within each task. The questionnaire is designed in such format that the respondent fills in the ranking of top L profiles that she prefers, while leave the ranking of the other J-L profiles blank. In this case, set the argument ranks as a vector restoring the variables names of these J responses variables, in the order of rank of profile 1 in task 1, rank of profile 2 in task 1, ... rank of profile J in task 1, rank of profile 1 in task 2, rank of profile 2 in task 2, ... rank of profile J in task 2, ..., rank of profile J in task K. 
</p>


<h3>Value</h3>

<p>A dataframe in which each row corresponds to a single profile. The column &quot;selected&quot; denotes whether that profile was selected by the respondent. The columns &quot;respondent&quot; and &quot;task&quot; denote the respondent and task numbers to which the profile was assigned. Respondent-level covariates are appended to each row.
</p>


<h3>References</h3>

<p>Strezhnev, A., Hainmueller, J., Hopkins, D., and Yamamoto, T. (2014) Conjoint Survey Design Tool. <a href="https://github.com/astrezhnev/conjointsdt/">https://github.com/astrezhnev/conjointsdt/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# An example file with 5 conjoint tasks per respondent and a single covariate
# Suppose "CandidateConjointQualtrics" is the dataframe exported by R Package qualtRics
conjoint_data &lt;- read.with.qualtRics(CandidateConjointQualtrics, 
responses=c("Q2.3", "Q2.7", "Q2.10", "Q2.13", "Q2.16"), 
covariates=c("Q6.6"), respondentID="V1")

## End(Not run)
</code></pre>

<hr>
<h2 id='summary.amce'>
Summarizing AMCE estimates
</h2><span id='topic+summary.amce'></span><span id='topic+print.summary.amce'></span>

<h3>Description</h3>

<p><code>summary</code> method for class &quot;amce&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'amce'
summary(object, covariate.values=NULL, ...)

## S3 method for class 'summary.amce'
print(x, digits=5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.amce_+3A_object">object</code></td>
<td>

<p>An object of class &quot;amce&quot;, a result of a call to <code><a href="#topic+amce">amce</a></code>.
</p>
</td></tr>
<tr><td><code id="summary.amce_+3A_covariate.values">covariate.values</code></td>
<td>

<p>An optional list containing a vector at which conditional effects will be calculated in the case of AMCE and ACIE's conditional on respondent-varying characteristics. The class of the values in the vector must match the class of the respondent-varying characteristic in question. If the &quot;amce&quot; object contains respondent varying characteristics, when set to NULL (default) interaction effects will be reported at quantiles in the case of a continuous variable and levels in the case of a factor. Names of list entries must correspond to variable names. If there are multiple respondent-varying characteristics then while each is varied in turn, all others will be held at first value of their entry in <code>covariate.values</code>. This is the bottom quantile in the case of a continuous variable and the baseline in the case of a factor variable. 
</p>
</td></tr>
<tr><td><code id="summary.amce_+3A_x">x</code></td>
<td>

<p>An object of class &quot;summary.amce&quot;, a result of a call to <code>summary.amce</code>.
</p>
</td></tr>
<tr><td><code id="summary.amce_+3A_digits">digits</code></td>
<td>

<p>The number of significant digits to use when printing.
</p>
</td></tr>
<tr><td><code id="summary.amce_+3A_...">...</code></td>
<td>

<p>Further arguments from other methods.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function <code>summary.amce</code> computes and returns formatted data frames of effect estimates returned by <code><a href="#topic+amce">amce</a></code>
</p>
<table>
<tr><td><code>amce</code></td>
<td>
<p>A dataframe containing AMCE estimates and standard errors. Each row corresponds to a single attribute-level effect. </p>
</td></tr>
<tr><td><code>baselines_amce</code></td>
<td>
<p>Baseline levels for each attribute relative to which the AMCEs are calculated. </p>
</td></tr>
<tr><td><code>acie</code></td>
<td>
<p>A dataframe containing ACIE estimates and standard errors, if any. Each row corresponds to a single attribute-level effect. </p>
</td></tr>
<tr><td><code>baselines_acie</code></td>
<td>
<p>Baseline levels for each attribute relative to which the ACIEs are calculated. </p>
</td></tr>
<tr><td><code>baselines_amce_resp</code></td>
<td>
<p>Baseline levels for conditional AMCE estimates, if any, relative to which interactions are calculated. </p>
</td></tr>
<tr><td><code>baselines_acie_resp</code></td>
<td>
<p>Baseline levels for conditional ACIE estimates, if any, relative to which interactions are calculated. </p>
</td></tr>
<tr><td><code>samplesize_estimates</code></td>
<td>
<p>The number of valid profiles (rows) in the dataset when only effects of profile varying attributes are calculated. </p>
</td></tr>
<tr><td><code>samplesize_resp</code></td>
<td>
<p>The number of valid profiles (rows) in the dataset when respondent-varying characteristics are incorporated. </p>
</td></tr>
<tr><td><code>numrespondents</code></td>
<td>
<p>The number of respondents in the dataset (if a <code>respondent.id</code> argument was passed to <code>amce</code>)</p>
</td></tr>
<tr><td><code>table_values_amce</code></td>
<td>
<p>A dataframe giving the names of additional tables of AMCE estimates conditional on respondent-varying characteristics. A separate table is produced for each level of each respondent varying characteristic. </p>
</td></tr>
<tr><td><code>table_values_acie</code></td>
<td>
<p>A dataframe giving the names of tables of ACIE estimates conditional on respondent-varying characteristics. A separate table is produced for each level of each respondent varying characteristic. </p>
</td></tr>
</table>


<h3>See Also</h3>

<p>The estimation function <code><a href="#topic+amce">amce</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

#Results with respondent-varying characteristics
results &lt;-amce(Chosen_Immigrant ~ Gender + Education + Education:ethnocentrism +
	`Country of Origin`+ `Country of Origin`:ethnocentrism + Job +
	Job:ethnocentrism + `Job Experience` + `Job Experience`:ethnocentrism,
	data=immigrationconjoint, design=immigrationdesign,cluster=FALSE,
	respondent.varying="ethnocentrism", na.ignore=TRUE)

#Calculate conditional estimates at user-supplied levels
int.vals&lt;-list()
int.vals[["ethnocentrism"]]&lt;-c(60,77,88,99,45)
summary(results, covariate.values = int.vals)


## End(Not run)
</code></pre>

<hr>
<h2 id='view'>
Graphical interfaces for conjoint analysis
</h2><span id='topic+view'></span><span id='topic+view.amce'></span>

<h3>Description</h3>

<p>Launches a graphical interface (in R Shiny) for a given conjoint analysis operation. This allows the user to interactively perform a conjoint analysis task without having to specify any code in R. Graphical interface is launched locally in user's default web browser. It is recommended that this feature be used for exploratory analysis only.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Launch graphical interface to interactively run AMCE
view(amce) 

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
