<!DOCTYPE html><html lang="en"><head><title>Help for package BATSS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BATSS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#alloc.balanced'><p>Balanced allocation function</p></a></li>
<li><a href='#alloc.simple'><p>Simple allocation function</p></a></li>
<li><a href='#BATSS'><p>BATSS</p></a></li>
<li><a href='#batss.combine'><p>Combines outputs generated by batss.glm</p></a></li>
<li><a href='#batss.glm'><p>Bayesian adaptive trial simulations for generalised linear models</p></a></li>
<li><a href='#eff.arm.infofract'><p>information-fraction based arm efficacy stop</p></a></li>
<li><a href='#eff.arm.simple'><p>Simple arm efficacy stop</p></a></li>
<li><a href='#eff.trial.all'><p>trial efficacy stop</p></a></li>
<li><a href='#eff.trial.any'><p>trial efficacy stop</p></a></li>
<li><a href='#fut.arm.simple'><p>arm futility stop</p></a></li>
<li><a href='#fut.trial.all'><p>trial futility stop</p></a></li>
<li><a href='#plot.batss'><p>Plot function for 'BATSS' outputs</p></a></li>
<li><a href='#print.batss'><p>Print function for BATSS outputs</p></a></li>
<li><a href='#RAR.optimal'><p>'Optimal' control allocation</p></a></li>
<li><a href='#RAR.trippa'><p>RAR of Trippa et al. (2012)</p></a></li>
<li><a href='#summary.batss'><p>Summary function for 'BATSS' outputs</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Bayesian Adaptive Trial Simulator Software (BATSS) for
Generalised Linear Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Defines operating characteristics of Bayesian Adaptive Trials considering a generalised linear model response via Monte Carlo simulations of Bayesian GLM fitted via integrated Laplace approximations (INLA). </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://batss-dev.github.io/BATSS/">https://batss-dev.github.io/BATSS/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>INLA</td>
</tr>
<tr>
<td>Imports:</td>
<td>parallel, methods, stats, grDevices, abind, plyr, rlang,
R.utils, cli</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://inla.r-inla-download.org/R/testing">https://inla.r-inla-download.org/R/testing</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-02 15:47:42 UTC; research</td>
</tr>
<tr>
<td>Author:</td>
<td>Dominique-Laurent Couturier
    <a href="https://orcid.org/0000-0001-5774-5036"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Liz Ryan <a href="https://orcid.org/0000-0001-9367-4204"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Rainer Puhr [aut],
  Thomas Jaki <a href="https://orcid.org/0000-0002-1096-188X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Stephane Heritier <a href="https://orcid.org/0000-0002-3640-079X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dominique-Laurent Couturier &lt;dominique.couturier@mrc-bsu.cam.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-02 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='alloc.balanced'>Balanced allocation function</h2><span id='topic+alloc.balanced'></span>

<h3>Description</h3>

<p><a href="#topic+alloc.balanced">alloc.balanced</a> first allocates the largest possible number of units to the different groups given their exact target probabilities and then assigns randomly the remaining units to the different groups according to multinomial draws. This method leads to observed allocation probabilities matching the target ones when m*prob is an integer for each group and to observed allocation probabilities (on average) closer to the target ones compared to <a href="#topic+alloc.simple">alloc.simple</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alloc.balanced(m, prob)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="alloc.balanced_+3A_m">m</code></td>
<td>
<p>the 'BATSS' ingredient '<code>m</code>', a scalar corresponding to the number of participants to be allocated.</p>
</td></tr>
<tr><td><code id="alloc.balanced_+3A_prob">prob</code></td>
<td>
<p>the 'BATSS' ingredient '<code>prob</code>', a named vector of allocation ratios or probabilities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+alloc.balanced">alloc.balanced</a> returns an object of class <a href="base.html#topic+factor">factor</a> of length '<code>m</code>' with levels matching the names of the vector '<code>prob</code>'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+alloc.simple">alloc.simple()</a></code>, another group allocation function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc.balanced(100, prob = c(A=.4,B=.6))
table(alloc.balanced(100, prob = c(A=.4,B=.6)))
table(alloc.balanced(100, prob = c(A=.4,B=.6)))
</code></pre>

<hr>
<h2 id='alloc.simple'>Simple allocation function</h2><span id='topic+alloc.simple'></span>

<h3>Description</h3>

<p><a href="#topic+alloc.simple">alloc.simple</a> independently randomises each unit to a group (i.e., flips a coin for each unit) so that the observed allocation probabilities may be far from the target ones. This strategy is often considered to be a poor choice.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alloc.simple(m, prob)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="alloc.simple_+3A_m">m</code></td>
<td>
<p>the 'BATSS' ingredient '<code>m</code>', a scalar corresponding to the number of participants to be allocated.</p>
</td></tr>
<tr><td><code id="alloc.simple_+3A_prob">prob</code></td>
<td>
<p>the 'BATSS' ingredient '<code>prob</code>', a named vector of allocation ratios or probabilities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+alloc.simple">alloc.simple</a> returns an object of class <a href="base.html#topic+factor">factor</a> of length '<code>m</code>' with levels matching the names of the vector '<code>prob</code>'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+alloc.balanced">alloc.balanced()</a></code>, another group allocation function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc.simple(100, prob = c(A=.4,B=.6))
table(alloc.simple(100, prob = c(A=.4,B=.6)))
table(alloc.simple(100, prob = c(A=.4,B=.6)))
</code></pre>

<hr>
<h2 id='BATSS'>BATSS</h2><span id='topic+BATSS'></span>

<h3>Description</h3>

<p>BATSS
</p>

<hr>
<h2 id='batss.combine'>Combines outputs generated by <a href="#topic+batss.glm">batss.glm</a></h2><span id='topic+batss.combine'></span>

<h3>Description</h3>

<p>Combines different evaluations of <a href="#topic+batss.glm">batss.glm</a> considering the same trial design but different sets of seeds. This function is useful when the evaluation of Monte Carlo samples generated by different seeds was split in sets computed by different nodes/cpus. The output of this function is of class 'batss' meaning that the usual generic functions (print, summary, plot) can be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batss.combine(paths, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="batss.combine_+3A_paths">paths</code></td>
<td>
<p>Vector indicating the paths to the rdata files containing the outputs of the function <a href="#topic+batss.glm">batss.glm</a> considering the same trial design but different set of seeds. This requires the argument '<code>extended</code>' of the function <a href="#topic+batss.glm">batss.glm</a> to be &gt; 0.</p>
</td></tr>
<tr><td><code id="batss.combine_+3A_force">force</code></td>
<td>
<p>a <a href="base.html#topic+logical">logical</a> with default <code>force=FALSE</code>. Among other checks, <a href="#topic+batss.glm">batss.glm</a> controls that the <a href="base.html#topic+call">call</a>s of the Monte Carlo trials to be combined are <a href="base.html#topic+identical">identical</a> and stops if they are not (Note that this check is not bullet proof: such a check, for example, would be able to note that two sets of Monte Carlo trials used a <code>eff.arm</code> function named the same way and considered the same optional parameters but would be blind to the fact that they could correspond to two <em>different</em> functions). <code>force=TRUE</code> forces <a href="#topic+batss.glm">batss.glm</a> to ignore this check. This could be useful if the calls differ due to the <code>batss</code> objects to be combined being generated using different versions of <a href="#topic+batss.glm">batss.glm</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class 'batss'. Refer to the section 'Value' in <a href="#topic+batss.glm">batss.glm</a> for details about this object structure.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+batss.glm">batss.glm()</a></code>, the function allowing to simulate Bayesian adaptive trials with GLM endpoint for different seeds.
</p>

<hr>
<h2 id='batss.glm'>Bayesian adaptive trial simulations for generalised linear models</h2><span id='topic+batss.glm'></span>

<h3>Description</h3>

<p>Simulation of Bayesian adaptive trials with GLM endpoint using Integrated Nested Laplace Approximation (INLA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batss.glm(
  model,
  var,
  var.control = NULL,
  family = "gaussian",
  link = "identity",
  beta,
  which,
  alternative = "greater",
  R = 10000,
  N,
  interim,
  prob0,
  delta.eff = 0,
  delta.fut = delta.eff,
  delta.RAR = 0,
  eff.arm,
  eff.arm.control = NULL,
  eff.trial = NULL,
  eff.trial.control = NULL,
  fut.arm,
  fut.arm.control = NULL,
  fut.trial = NULL,
  fut.trial.control = NULL,
  RAR = NULL,
  RAR.control = NULL,
  H0 = TRUE,
  computation = "parallel",
  mc.cores = getOption("mc.cores", 3L),
  extended = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="batss.glm_+3A_model">model</code></td>
<td>
<p>an object of class '<a href="stats.html#topic+formula">formula</a>' indicating a symbolic description of the model to be fitted (as in the <a href="stats.html#topic+lm">lm</a> and <a href="stats.html#topic+glm">glm</a> functions).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_var">var</code></td>
<td>
<p>A list. Each entry corresponds to a variable described under '<code>model</code>' and indicates the name of a function allowing to generate variates (like <a href="stats.html#topic+rnorm">rnorm</a> and <a href="stats.html#topic+rexp">rexp</a>, for example). The list names have to match the variable names unded in '<code>model</code>' and its first element should correspond to the model outcome. The grouping variable corresponding to the target parameters has to be of class '<a href="base.html#topic+factor">factor</a>' with levels corresponding to the names indicated in argument <code>prob0</code> (see below).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_var.control">var.control</code></td>
<td>
<p>An optional list of control parameters for the functions indicated in '<code>var</code>'. The names of the list items need to correspond to the names used in '<code>var</code>'. Each element is another list with names of the elements corresponding to the parameter names of the functions specified in '<code>var</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_family">family</code></td>
<td>
<p>A character string indicating the name of the conditional distribution as described in the package INLA (check <a href="INLA.html#topic+inla.list.models">inla.list.models</a>). Default set to '<code>gaussian</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_link">link</code></td>
<td>
<p>A character string describing the link function to be used in the model to relate the outcome to the set of predictors: 'identity', 'log', 'logit', 'probit', 'robit', 'cauchit', 'loglog' and 'cloglog' are the currently available options. Default set to 'identity'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_beta">beta</code></td>
<td>
<p>A numerical vector of parameter values for the linear predictor. Its length has to match the number of column of the <strong>X</strong> matrix induced by the formula indicated under '<code>model</code>' (check <a href="stats.html#topic+model.matrix">model.matrix</a>).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_which">which</code></td>
<td>
<p>A numerical vector indicating the position of the target <code>beta</code> parameters.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_alternative">alternative</code></td>
<td>
<p>A vector of strings providing the one-sided direction of the alternative hypothesis corresponding to each target parameter indicated under '<code>which</code>' (in the same order). Possibilities are 'greater' (default) or 'less'. If the vector is of length 1, the same direction will be used for all target parameter tests.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_r">R</code></td>
<td>
<p>a vector of natural numbers to be used as seeds (check <a href="base.html#topic+set.seed">set.seed</a>) for the different Monte Carlo trials (the vector length will thus correspond to the number of Monte Carlo trials). When <code>R</code> is a scalar, seeds <code>1</code> to <code>R</code> are used, where <code>R</code> corresponds to the number of Monte Carlo trials.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_n">N</code></td>
<td>
<p>A scalar indicating the maximum sample size.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_interim">interim</code></td>
<td>
<p>A list of parameters related to interim analyses. Currently, only '<code>recruited</code>' is available.  It consists in a vector of integers indicating the number of completed observations at each look, last excluded, in increasing order.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_prob0">prob0</code></td>
<td>
<p>A named vector with initial allocation probabilities. Names need to correspond to the levels of the grouping variable. If <code>RAR = NULL</code>, these probabilities/ratios will be used throughout (fixed allocation probabilities).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_delta.eff">delta.eff</code></td>
<td>
<p>A vector (of length equal to the number of looks (i.e., number of interims + 1)) of clinically meaningful treatment effect values (on the linear predictor scale) to be used to define the efficacy-related posterior probabilities for each target parameter at each look. If a scalar is provided, the same value is used at each look. The default is <code>delta.eff = 0</code>.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_delta.fut">delta.fut</code></td>
<td>
<p>A vector (of length equal to the number of looks (i.e., number of interims + 1)) of clinically meaningful treatment effect values (on the linear predictor scale) to be used to define the futility-related posterior probabilities for each target parameter at each look. If a scalar is provided, the same value is used at each look. The default is <code>delta.fut = delta.eff</code>.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_delta.rar">delta.RAR</code></td>
<td>
<p>A vector (of length equal to the number of looks (i.e., number of interims + 1)) of clinically meaningful treatment effect values (on the linear predictor scale) to be used to define the RAR-related posterior probabilities for each target parameter at each look. If a scalar is provided, the same value is used at each interim analysis. The default is <code>delta.RAR = 0</code>. Note that, when a vector is provided, its last value is ignored as no randomisation is made at the last look.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_eff.arm">eff.arm</code></td>
<td>
<p>A function defining if efficacy has been achieved at a given look given the information available at that stage a given target parameter. The output of this function must be a <a href="base.html#topic+logical">logical</a> (of length 1). Arguments of this function will typically consider 'BATSS' ingredients. Check <a href="#topic+eff.arm.simple">eff.arm.simple</a> and <a href="#topic+eff.arm.infofract">eff.arm.infofract</a> for examples.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_eff.arm.control">eff.arm.control</code></td>
<td>
<p>An optional list of parameters for the function indicated in '<code>eff.arm</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_eff.trial">eff.trial</code></td>
<td>
<p>A function defining if the trial can be stopped for efficacy given the output of the function indicated in '<code>eff.arm</code>'. The output of this function must be a <a href="base.html#topic+logical">logical</a> of length one. Arguments of this function will typically only consider the 'BATSS' ingredient <code>eff.target</code>. Check <a href="#topic+eff.trial.all">eff.trial.all</a> and <a href="#topic+eff.trial.any">eff.trial.any</a> for examples. When <code>eff.trial = NULL</code> (default), the trial stops for efficacy when <em>all</em> target parameters are found to be effective (like in <a href="#topic+eff.trial.all">eff.trial.all</a>).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_eff.trial.control">eff.trial.control</code></td>
<td>
<p>An optional list of parameters for the function indicated in '<code>eff.trial</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_fut.arm">fut.arm</code></td>
<td>
<p>A function defining if futility has been achieved at a given look given the information available at that stage for each target parameter. The output of this function must be a <a href="base.html#topic+logical">logical</a> (of length 1). Arguments of this function will typically consider 'BATSS' ingredients. Check <a href="#topic+fut.arm.simple">fut.arm.simple</a> to see an example of such a function.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_fut.arm.control">fut.arm.control</code></td>
<td>
<p>An optional list of parameters for the function indicated in '<code>fut.arm</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_fut.trial">fut.trial</code></td>
<td>
<p>A function defining if the trial can be stopped for futility given the output of the function indicated in '<code>fut.arm</code>'. The output of this function must be a <a href="base.html#topic+logical">logical</a> of length one. Arguments of this function will typically only consider the 'BATSS' ingredient <code>fut.target</code>. Check <a href="#topic+fut.trial.all">fut.trial.all</a> for an example of such a function. When <code>fut.trial = NULL</code> (default), the trial stops for futility when <em>all</em> target parameters are found to be futile (like in <a href="#topic+fut.trial.all">fut.trial.all</a>).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_fut.trial.control">fut.trial.control</code></td>
<td>
<p>An optional list of parameters for the function indicated in '<code>fut.trial</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_rar">RAR</code></td>
<td>
<p>A function defining the response-adaptive randomisation probabilities of each group - reference group included - with the same group names and ordering as used in '<code>prob0</code>'. Arguments of this function will typically consider 'BATSS' ingredients. Check <a href="#topic+RAR.trippa">RAR.trippa</a> and <a href="#topic+RAR.optimal">RAR.optimal</a> for examples. If <code>RAR = NULL</code> (default), the probabilities/ratios indicated under <code>prob0</code> will be used throughout (fixed allocation probabilities).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_rar.control">RAR.control</code></td>
<td>
<p>An optional list of control parameters for the function provided in '<code>RAR</code>'.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_h0">H0</code></td>
<td>
<p>A logical indicating whether the simulation should also consider the case with all target parameters set to 0 to check the probability of rejecting the hypothesis that the target parameter value is equal to 0 individually (pairwise type I error) or globally (family-wise error rate). Default set to <code>H0=TRUE</code>.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_computation">computation</code></td>
<td>
<p>A character string indicating how the computation should be performed. Possibilities are 'parallel' or 'sequential' with default <code>computation="parallel"</code> meaning that the computation is split between <code>mc.cores</code>.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_mc.cores">mc.cores</code></td>
<td>
<p>An integer indicating the number of CPUs to be used when <code>computation="parallel"</code> (Default to 3 if no global '<code>mc.cores</code>' global option is available via <a href="base.html#topic+getOption">getOption</a>).</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_extended">extended</code></td>
<td>
<p>an integer indicating the type of results to be returned. 0 (default) provides summary statistics, 1 adds the results of each Monte Carlo trial and 2 additionally returns each Monte Carlo dataset. <a href="#topic+batss.combine">batss.combine</a> requires extended &gt; 0 as the function needs to merge results of different sets of seeds.</p>
</td></tr>
<tr><td><code id="batss.glm_+3A_...">...</code></td>
<td>
<p>Additional arguments to control fitting in <a href="INLA.html#topic+inla">inla</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function <a href="#topic+batss.glm">batss.glm</a> returns an S3 object of class 'batss' with available print/summary/plot functions
</p>

<ul>
<li><p> beta - A data frame providing information related to the beta parameter vector, like parameter names and values, for example.
</p>
</li>
<li><p> look - A data frame providing information related to looks, like sample size of a given interim (m) and cumulative sample size at a given interim (n), for example.
</p>
</li>
<li><p> par - A list providing different information, like the used seeds (seed) and the groups (group), for example.
</p>
</li>
<li><p> H1 - A list providing trial results under the alternative, like the estimates per target parameter when the corresponding arm was stopped (estimate), the efficacy and futility probabilites per target parameter and overall (target, efficacy and futility), the sample size per group and trial (sample), the probabilities associated to each combination of efficacy and futility per group (scenario), the detailed results per trial (trial), for example.
</p>
</li>
<li><p> H0 - A list providing trial results under the global null hypothesis (same structure as H1).
</p>
</li>
<li><p> call - The matched call.
</p>
</li>
<li><p> type - The type of 'BATSS' analysis (only 'glm' is currently available).
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+summary.batss">summary.batss</a> and <a href="#topic+plot.batss">plot.batss</a> for detailed summaries and plots, and <a href="#topic+batss.combine">batss.combine</a> to combine different evaluations of <a href="#topic+batss.glm">batss.glm</a> considering the same trial design but different sets of seeds (useful for cluster computation).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example: 
# * Gaussian conditional distribution with sigma = 5
# * 3 groups with group means 'C' = 1 (ref), 'T1' = 2, 'T2' = 3,
#     where higher means correspond to better outcomes 
# * 5 interim analyses occurring when n = 100, 120, 140, 160, and 180
# * fixed and equal allocation probabilities per arm (i.e., no RAR)
# * max sample size = 200 
# * efficacy stop per arm when the prob of the corresponding parameter 
#     being greater than 0 is greater than 0.975 (?eff.arm.simple)
# * futility stop per arm when the prob of the corresponding parameter 
#     being greater than 0 is smaller than 0.05 (?fut.arm.simple) 
# * trial stop once all arms have stopped (?eff.trial.all and ?fut.trial.all)
#     or the max sample size was reached 

sim = batss.glm(model            = y ~ group,   
                var              = list(y     = rnorm,
                                        group = alloc.balanced),
                var.control      = list(y = list(sd = 5)),
                beta             = c(1, 1, 2),
                which            = c(2:3),
                alternative      = "greater",
                R                = 20,
                N                = 200,
                interim          = list(recruited = seq(100, 180, 20)),
                prob0            = c(C = 1/3, T1 = 1/3, T2 = 1/3),
                eff.arm          = eff.arm.simple,
                eff.arm.control  = list(b = 0.975),
                fut.arm          = fut.arm.simple,
                fut.arm.control  = list(b = 0.05),
                computation      = "parallel",
                H0               = TRUE,
                mc.cores         = 2)# better: parallel::detectCores()-1

</code></pre>

<hr>
<h2 id='eff.arm.infofract'>information-fraction based arm efficacy stop</h2><span id='topic+eff.arm.infofract'></span>

<h3>Description</h3>

<p>allows stopping an arm for efficacy at a given look when the probability of the corresponding target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than <code>delta.eff</code> is greater than a function of the information fraction at that look.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eff.arm.infofract(posterior, b, n, N, p)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eff.arm.infofract_+3A_posterior">posterior</code></td>
<td>
<p>the 'BATSS' ingredient '<code>posterior</code>' corresponding, in this context, to the (posterior) probability of the target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than '<code>delta.eff</code>'.</p>
</td></tr>
<tr><td><code id="eff.arm.infofract_+3A_b">b</code></td>
<td>
<p>a tuning parameter (to be defined in <code>eff.arm.control</code>).</p>
</td></tr>
<tr><td><code id="eff.arm.infofract_+3A_n">n</code></td>
<td>
<p>the 'BATSS' ingredient '<code>n</code>' corresponding to the vector of number of recruited participants per arm including the control group.</p>
</td></tr>
<tr><td><code id="eff.arm.infofract_+3A_n">N</code></td>
<td>
<p>the 'BATSS' ingredient '&lsquo;N&rsquo; corresponding to the maximum (planned) sample size.</p>
</td></tr>
<tr><td><code id="eff.arm.infofract_+3A_p">p</code></td>
<td>
<p>a tuning parameter (to be defined in <code>eff.arm.control</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+eff.arm.infofract">eff.arm.infofract</a> returns a logical constant.
</p>

<hr>
<h2 id='eff.arm.simple'>Simple arm efficacy stop</h2><span id='topic+eff.arm.simple'></span>

<h3>Description</h3>

<p>allows stopping an arm for efficacy at a given look when the probability of the corresponding target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than <code>delta.eff</code> is greater than a fixed value <code>b</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eff.arm.simple(posterior, b)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eff.arm.simple_+3A_posterior">posterior</code></td>
<td>
<p>the 'BATSS' ingredient '<code>posterior</code>' corresponding, in this context, to the (posterior) probability of the target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than '<code>delta.eff</code>'.</p>
</td></tr>
<tr><td><code id="eff.arm.simple_+3A_b">b</code></td>
<td>
<p>the cut-off value used to declare efficacy (to be defined in <code>eff.arm.control</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+eff.arm.simple">eff.arm.simple</a> returns a logical constant.
</p>

<hr>
<h2 id='eff.trial.all'>trial efficacy stop</h2><span id='topic+eff.trial.all'></span>

<h3>Description</h3>

<p>allows stopping the trial for efficacy if <em>all</em> target parameters reached efficacy at the look of interest or before.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eff.trial.all(eff.target)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eff.trial.all_+3A_eff.target">eff.target</code></td>
<td>
<p>the 'BATSS' ingredient '<code>eff.target</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length as argument <code>which</code> (i.e., the number of target parameters) indicating if efficacy was reached for each target parameter at that stage or at a previous stage.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+eff.trial.all">eff.trial.all</a> returns a logical constant.
</p>

<hr>
<h2 id='eff.trial.any'>trial efficacy stop</h2><span id='topic+eff.trial.any'></span>

<h3>Description</h3>

<p>allows stopping the trial for efficacy if <em>at least one</em> target parameter reached efficacy at the look of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eff.trial.any(eff.target)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eff.trial.any_+3A_eff.target">eff.target</code></td>
<td>
<p>the 'BATSS' ingredient '<code>eff.target</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length as argument <code>which</code> (i.e., the number of target parameters) indicating if efficacy was reached for each target parameter at that stage or at a previous stage.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+eff.trial.any">eff.trial.any</a> returns a logical constant.
</p>

<hr>
<h2 id='fut.arm.simple'>arm futility stop</h2><span id='topic+fut.arm.simple'></span>

<h3>Description</h3>

<p>allows stopping an arm for futility when the probability of the corresponding target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than '<code>delta.fut</code>' is smaller than a fixed value '<code>b</code>'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fut.arm.simple(posterior, b)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fut.arm.simple_+3A_posterior">posterior</code></td>
<td>
<p>the 'BATSS' ingredient '<code>posterior</code>' corresponding, in this context, to the (posterior) probability of the target parameter being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than '<code>delta.fut</code>'.</p>
</td></tr>
<tr><td><code id="fut.arm.simple_+3A_b">b</code></td>
<td>
<p>the cut-off value used to declare futility (to be defined in <code>fut.arm.control</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+fut.arm.simple">fut.arm.simple</a> returns a logical constant.
</p>

<hr>
<h2 id='fut.trial.all'>trial futility stop</h2><span id='topic+fut.trial.all'></span>

<h3>Description</h3>

<p>allows stopping the trial for efficacy if <em>all</em> active treatment reached futility at the look of interest or before.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fut.trial.all(fut.target)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fut.trial.all_+3A_fut.target">fut.target</code></td>
<td>
<p>the 'BATSS' ingredient '<code>fut.target</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length as argument <code>which</code> (i.e., the number of target parameters) indicating if futility was declared for each target parameter at that stage or at a previous stage.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+fut.trial.all">fut.trial.all</a> returns a logical constant.
</p>

<hr>
<h2 id='plot.batss'>Plot function for 'BATSS' outputs</h2><span id='topic+plot.batss'></span>

<h3>Description</h3>

<p>Plot for objects of class 'batss'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'batss'
plot(
  x,
  type = "size",
  hypothesis = "H1",
  title = TRUE,
  legend = TRUE,
  col = c("#008B0040", "#8B3A3A40", "#8B897040", "#FF990075", "blue"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.batss_+3A_x">x</code></td>
<td>
<p>An object of class 'batss' (i.e., output of the function <a href="#topic+batss.glm">batss.glm</a>).</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_type">type</code></td>
<td>
<p>A character string indicating the type of plot with options 'size' (default) to display the total and per group sample size observed in the Monte Carlo trials, and 'estimates' to display the Monte Carlo trial target estimates as a function of the sample size.</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_hypothesis">hypothesis</code></td>
<td>
<p>A character string indicating which alternative hypothesis to use for analyses considering both &quot;H0&quot; and &quot;H1&quot;, with options &quot;H1&quot; (default) and &quot;H0&quot;.</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_title">title</code></td>
<td>
<p>Either a <a href="base.html#topic+logical">logical</a> indicating if a title should be added or a string (of class <a href="base.html#topic+character">character</a>) indicating the title to be added. If <code>title</code> equals <code>TRUE</code> (default), the title 'Under 'H1' or 'Under 'H0' (depending on the argument <code>hypothesis</code>) is added to the outer margin of the plot. No outer margin space is added if <code>title = FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_legend">legend</code></td>
<td>
<p>a <a href="base.html#topic+logical">logical</a> (with default set to <code>TRUE</code>) indicating if, when '<code>type = estimates</code>', a legend should be added at the bottom of the plot.</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_col">col</code></td>
<td>
<p>a vector of length 5 specifiying the colour respectively assigned to i/ efficacy, ii/ futility, iii/ neither or iv/ both when color-coding trials when <code>type = "estimates"</code>. The 5th colour is used for lines. Default to c(&quot;#8B897040&quot;,&quot;#008B0040&quot;,&quot;#8B3A3A40&quot;,&quot;#FF990075&quot;,&quot;blue&quot;) where the 2 last digits of the long hexadecimal strings of colours 1 to 4 specify the level of transluency. Refer to the Section 'colour specification' in <a href="graphics.html#topic+par">par</a> for details. If the length of <code>col</code> equals 1, the same colour is used for all cases. When <code>type = "size"</code>, the 3rd and 5th colours of the vector <code>col</code> are used to display boxplots and lines.</p>
</td></tr>
<tr><td><code id="plot.batss_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the plot produced, like ylim and ylab.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Generates graphical displays of results for objects of class 'batss'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+batss.glm">batss.glm()</a></code>, the function generating S3 objects of class 'batss'.
</p>

<hr>
<h2 id='print.batss'>Print function for BATSS outputs</h2><span id='topic+print.batss'></span>

<h3>Description</h3>

<p>Print method function for objects of class 'batss' (i.e., output of the function <a href="#topic+batss.glm">batss.glm</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'batss'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.batss_+3A_x">x</code></td>
<td>
<p>An object of class 'batss'.</p>
</td></tr>
<tr><td><code id="print.batss_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the print produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Prints information for objects of class 'batss'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+batss.glm">batss.glm()</a></code>, the function generating S3 objects of class 'batss'.
</p>

<hr>
<h2 id='RAR.optimal'>'Optimal' control allocation</h2><span id='topic+RAR.optimal'></span>

<h3>Description</h3>

<p>technically not response adaptive but keeps allocation ratio to control at the square root of active intervention arms
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RAR.optimal(active)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RAR.optimal_+3A_active">active</code></td>
<td>
<p>the 'BATSS' ingredient '<code>active</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length and order as <code>'prob0'</code> (i.e., number of arms initially included in the study including the reference group)) and  indicating if each arm is active at the look of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+RAR.optimal">RAR.optimal</a> returns a vector of probabilities with length of active.
</p>

<hr>
<h2 id='RAR.trippa'>RAR of Trippa et al. (2012)</h2><span id='topic+RAR.trippa'></span>

<h3>Description</h3>

<p>define the group allocation probabilities based on the response adaptive randomisation rule of Trippa et al. (2012)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RAR.trippa(posterior, n, N, ref, active, gamma, eta, nu)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RAR.trippa_+3A_posterior">posterior</code></td>
<td>
<p>the 'BATSS' ingredient '<code>posterior</code>' corresponding, in this context, to the (posterior) probability of the active target parameters being greater or smaller (depending on the argument <code>'alternative'</code> of <a href="#topic+batss.glm">batss.glm</a>) than '<code>delta.RAR</code>'.</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_n">n</code></td>
<td>
<p>the 'BATSS' ingredient '<code>n</code>' corresponding to the vector of number of recruited participants per arm including the control group at the look of interest.</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_n">N</code></td>
<td>
<p>the 'BATSS' ingredient '&lsquo;N&rsquo; corresponding to the maximum (planned) sample size.</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_ref">ref</code></td>
<td>
<p>the 'BATSS' ingredient '<code>ref</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length and order as <code>'prob0'</code> (i.e., number of arms initially included in the study including the reference group)) and indicating which group is the reference one.</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_active">active</code></td>
<td>
<p>the 'BATSS' ingredient '<code>active</code>' corresponding to a <a href="base.html#topic+logical">logical</a> vector of the same length and order as <code>'prob0'</code> (i.e., number of arms initially included in the study including the reference group)) and  indicating if each arm is active at the look of interest.</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_gamma">gamma</code></td>
<td>
<p>a scaling factor (to be defined in <code>RAR.arm.control</code>).</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_eta">eta</code></td>
<td>
<p>a scaling factor (to be defined in <code>RAR.arm.control</code>).</p>
</td></tr>
<tr><td><code id="RAR.trippa_+3A_nu">nu</code></td>
<td>
<p>a scaling factor (to be defined in <code>RAR.arm.control</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+RAR.trippa">RAR.trippa</a> returns a vector of probabilities with length of active.
</p>

<hr>
<h2 id='summary.batss'>Summary function for 'BATSS' outputs</h2><span id='topic+summary.batss'></span>

<h3>Description</h3>

<p>Summary method function for objects of class 'batss'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'batss'
summary(object, full = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.batss_+3A_object">object</code></td>
<td>
<p>An object of class 'batss' (i.e., output of the function <a href="#topic+batss.glm">batss.glm</a>).</p>
</td></tr>
<tr><td><code id="summary.batss_+3A_full">full</code></td>
<td>
<p>A logical indicating if a standard (full = FALSE, default) or extended output (full = TRUE) should be returned.</p>
</td></tr>
<tr><td><code id="summary.batss_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Prints a summary for objects of class 'batss'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+batss.glm">batss.glm()</a></code>, the function generating S3 objects of class 'batss'.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
