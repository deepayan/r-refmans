<!DOCTYPE html><html lang="en"><head><title>Help for package sbtools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sbtools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#sbtools-package'><p>R interface to ScienceBase</p></a></li>
<li><a href='#authenticate_sb'><p>Authenticate to SB for subsequent calls</p></a></li>
<li><a href='#current_session'><p>Return current cached session</p></a></li>
<li><a href='#folder_create'><p>Create a folder</p></a></li>
<li><a href='#identifier_exists'><p>Check if identifier exists</p></a></li>
<li><a href='#initialize_sciencebase_session'><p>Initialize ScienceBase Session</p></a></li>
<li><a href='#is_logged_in'><p>Check whether you're logged into a ScienceBase session</p></a></li>
<li><a href='#item_append_files'><p>Upload File to Item</p></a></li>
<li><a href='#item_create'><p>Create a new SB item</p></a></li>
<li><a href='#item_exists'><p>check if identifier touple already exists on SB</p></a></li>
<li><a href='#item_file_download'><p>Download files attached to item</p></a></li>
<li><a href='#item_get'><p>Retrieve SB item</p></a></li>
<li><a href='#item_get_fields'><p>Retrieve specific fields from an SB item</p></a></li>
<li><a href='#item_get_parent'><p>Get an item's parent ID</p></a></li>
<li><a href='#item_list_children'><p>Return IDs for all child items</p></a></li>
<li><a href='#item_list_files'><p>Get list of files attached to SB item</p></a></li>
<li><a href='#item_move'><p>Move item from one folder to another</p></a></li>
<li><a href='#item_publish_cloud'><p>Publish file to public cloud S3 bucket</p></a></li>
<li><a href='#item_rename_files'><p>Rename item attached files</p></a></li>
<li><a href='#item_replace_files'><p>Replace files associated with an item</p></a></li>
<li><a href='#item_rm'><p>Remove item from SB</p></a></li>
<li><a href='#item_rm_files'><p>Remove files associated with an item</p></a></li>
<li><a href='#item_rm_recursive'><p>Remove an item completely by recursively removing its child items</p></a></li>
<li><a href='#item_update'><p>Update a SB item with new metadata</p></a></li>
<li><a href='#item_update_identifier'><p>Add custom identifier to an existing item</p></a></li>
<li><a href='#item_upload_cloud'><p>Upload File to Item Cloud Storage</p></a></li>
<li><a href='#item_upload_create'><p>#' Upload file(s) and create a new item</p></a></li>
<li><a href='#item_upsert'><p>Upsert an SB item</p></a></li>
<li><a href='#items_create'><p>Create many new SB items</p></a></li>
<li><a href='#items_update'><p>Update many SB items with new metadata</p></a></li>
<li><a href='#items_upsert'><p>Upsert many SB items</p></a></li>
<li><a href='#query_item_identifier'><p>Query SB for items based on custom identifier</p></a></li>
<li><a href='#query_item_in_folder'><p>Search within an SB folder</p></a></li>
<li><a href='#query_items'><p>Query SB for items using generic query parameters</p></a></li>
<li><a href='#query_sb'><p>Query SB for items using generic query parameters</p></a></li>
<li><a href='#query_sb_datatype'><p>Query SB for specific data type</p></a></li>
<li><a href='#query_sb_date'><p>Query SB for items within a date range</p></a></li>
<li><a href='#query_sb_doi'><p>Query SB for specific DOI (Digital Object Identifier)</p></a></li>
<li><a href='#query_sb_spatial'><p>Query SB based on spatial extent</p></a></li>
<li><a href='#query_sb_text'><p>Query SB for items containing specific text</p></a></li>
<li><a href='#readPassword'><p>Read in a password from the user</p></a></li>
<li><a href='#sb_datatypes'><p>Query SB for all available datatypes</p></a></li>
<li><a href='#sb_ping'><p>Ping ScienceBase to see if it's available</p></a></li>
<li><a href='#sbitem'><p>ScienceBase item class</p></a></li>
<li><a href='#sbtools_GET'><p>generic GETs for sbtools package</p></a></li>
<li><a href='#sbtools_POST'><p>generic POSTs for sbtools package</p>
package wrapped for generic POSTs that test sessions internally and wrap some errors</a></li>
<li><a href='#sbtools_PUT'><p>generic PUTs for sbtools package</p></a></li>
<li><a href='#session_age'><p>a convienence function for getting the age of a session.</p></a></li>
<li><a href='#session_details'><p>Get session info (deprecated)</p></a></li>
<li><a href='#session_expired'><p>Check whether an SB session is expired</p></a></li>
<li><a href='#session_renew'><p>Checks current session and re-authenticates if necessary</p></a></li>
<li><a href='#session_validate'><p>Validate sbtools session state</p></a></li>
<li><a href='#set_endpoint'><p>Set SB endpoint</p></a></li>
<li><a href='#user_id'><p>Get your parent ID</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>USGS ScienceBase Tools</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Blodgett &lt;dblodgett@usgs.gov&gt;</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for interacting with U.S. Geological Survey ScienceBase
    <a href="https://www.sciencebase.gov">https://www.sciencebase.gov</a> interfaces. ScienceBase is a data cataloging and
    collaborative data management platform. Functions included for querying
    ScienceBase, and creating and fetching datasets.</td>
</tr>
<tr>
<td>Imports:</td>
<td>jsonlite, curl, httr (&ge; 1.0.0), methods, mime, utils, cli,
keyring, tools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, xml2, sf, knitr, rmarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/DOI-USGS/sbtools">https://github.com/DOI-USGS/sbtools</a>,
<a href="https://doi-usgs.github.io/sbtools/">https://doi-usgs.github.io/sbtools/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DOI-USGS/sbtools/issues">https://github.com/DOI-USGS/sbtools/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-21 02:39:02 UTC; dblodgett</td>
</tr>
<tr>
<td>Author:</td>
<td>David Blodgett [cre],
  Luke Winslow [aut],
  Scott Chamberlain [ctb],
  Alison Appling [ctb],
  Jordan Read [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-21 11:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='sbtools-package'>R interface to ScienceBase</h2><span id='topic+sbtools-package'></span><span id='topic+sbtools'></span>

<h3>Description</h3>

<p>This package provides a rich interface to USGS's ScienceBase 
<a href="https://www.sciencebase.gov/">https://www.sciencebase.gov/</a> - a data cataloging and collaborative 
data management platform. For further information, see the sbtools manuscript
<a href="https://journal.r-project.org/archive/2016-1/winslow-chamberlain-appling-etal.pdf">here</a>.
</p>
<p>Functions are inluded for searching for data, retrieving, creating, and 
updating datasets.
</p>


<h3>Details</h3>

<p>Functionality in this package allows all users to query ScienceBase for 
data using a variety of metadata types (<code><a href="#topic+query_sb_text">query_sb_text</a></code>, 
<code><a href="#topic+query_sb_doi">query_sb_doi</a></code>, <code><a href="#topic+query_sb_spatial">query_sb_spatial</a></code>). Items and associated
information can be requested by <code><a href="#topic+item_get">item_get</a></code> including item parents 
<code><a href="#topic+item_get_parent">item_get_parent</a></code> and children <code><a href="#topic+item_list_children">item_list_children</a></code>.
Data and attached files can be accessed for all available items through provided
functionality (e.g., <code><a href="#topic+item_file_download">item_file_download</a></code>).
</p>


<h3>Authentication</h3>

<p>See the function <code><a href="#topic+authenticate_sb">authenticate_sb</a></code> to authenticate. You'll be 
required to pass in your ScienceBase username and password.
</p>
<p>Authenticated users can create, update, and remove items (<code><a href="#topic+item_list_children">item_list_children</a></code>, 
<code><a href="#topic+item_list_children">item_list_children</a></code>, <code><a href="#topic+item_create">item_create</a></code>, <code><a href="#topic+item_update">item_update</a></code>, 
<code><a href="#topic+item_rm">item_rm</a></code>).
</p>


<h3>Feedback</h3>

<p>Report any feedback or bugs at <a href="https://github.com/DOI-USGS/sbtools/issues">https://github.com/DOI-USGS/sbtools/issues</a>
</p>

<hr>
<h2 id='authenticate_sb'>Authenticate to SB for subsequent calls</h2><span id='topic+authenticate_sb'></span>

<h3>Description</h3>

<p>This connects to SB, authenticates and gets a session token for communicating
with SB. If you do not supply a username or password, you will be prompted to
enter them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>authenticate_sb(username, password)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="authenticate_sb_+3A_username">username</code></td>
<td>
<p>Sciencebase username</p>
</td></tr>
<tr><td><code id="authenticate_sb_+3A_password">password</code></td>
<td>
<p>Sciencebase password, prompts user if not supplied and
no password is returned by 'keyring::key_get(&quot;sciencebase&quot;, username)'.
See <code><a href="keyring.html#topic+keyring-package">keyring-package</a></code> documentation for more details.</p>
</td></tr>
</table>

<hr>
<h2 id='current_session'>Return current cached session</h2><span id='topic+current_session'></span>

<h3>Description</h3>

<p>Returns the currently cached SB session token. If there
is no authenticated session, returns NULL. Emits a
warning if the session has expired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>current_session()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>

session = current_session()
#null unless currently authenticated
session

</code></pre>

<hr>
<h2 id='folder_create'>Create a folder</h2><span id='topic+folder_create'></span>

<h3>Description</h3>

<p>Create a special kind of item on ScienceBase that is intended to be 
a &quot;folder&quot; that contains one or more child items. This is similar to 
a standard item (<code><a href="#topic+item_create">item_create</a></code>) but defaults to showing 
child-items on the ScienceBase web interface.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>folder_create(parent_id = user_id(), name, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="folder_create_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID corresponding to the 
parent item (folder)</p>
</td></tr>
<tr><td><code id="folder_create_+3A_name">name</code></td>
<td>
<p>(character) the folder name</p>
</td></tr>
<tr><td><code id="folder_create_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="httr.html#topic+response">response</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
folder_create(name="foobar345")

## End(Not run)
</code></pre>

<hr>
<h2 id='identifier_exists'>Check if identifier exists</h2><span id='topic+identifier_exists'></span>

<h3>Description</h3>

<p>This function quickly checks to see if an identifier exists. 
It does a quick head request to skip the overhead of item metadta retrieval.
This will also return <code>FALSE</code> if the identifier exists but is associated
with an item that is unavailable due to permission restrictions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>identifier_exists(sb_id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="identifier_exists_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="identifier_exists_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical, <code>TRUE</code> or <code>FALSE</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# identifier exists
identifier_exists(sb_id = "57976a0ce4b021cadec97890")

# identifier does not exist
identifier_exists(sb_id = "aaaaaaakkkkkkkbbbbbb")

</code></pre>

<hr>
<h2 id='initialize_sciencebase_session'>Initialize ScienceBase Session</h2><span id='topic+initialize_sciencebase_session'></span>

<h3>Description</h3>

<p>Unless 'token_text' is provided, will open a browser for two 
factor authentication. 
</p>
<p>Once logged in, retrieve the token from the user drop down in the upper 
right hand corner of the browser. Click the icon with the silhouette of 
a person, and select 'Copy API Token.' The token should be pasted into the 
popup prompt.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initialize_sciencebase_session(username = NULL, token_text = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initialize_sciencebase_session_+3A_username">username</code></td>
<td>
<p>email address of sciencebase user. Will be retrieved from the 
'sb_user' environment variable if set. A prompt will be raised if not provided.</p>
</td></tr>
<tr><td><code id="initialize_sciencebase_session_+3A_token_text">token_text</code></td>
<td>
<p>character json formatted token text. 'token_text' is 
stashed in <a href="tools.html#topic+R_user_dir">R_user_dir</a> and does not need to be re-entered unless 
it becomes stale.
</p>
<p>If the token text is provided as input, no popup prompt will be raised.</p>
</td></tr>
</table>

<hr>
<h2 id='is_logged_in'>Check whether you're logged into a ScienceBase session</h2><span id='topic+is_logged_in'></span>

<h3>Description</h3>

<p>Check whether you're logged into a ScienceBase session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_logged_in()
</code></pre>


<h3>Value</h3>

<p>Logical, <code>TRUE</code> or <code>FALSE</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
is_logged_in()

## End(Not run)
</code></pre>

<hr>
<h2 id='item_append_files'>Upload File to Item</h2><span id='topic+item_append_files'></span>

<h3>Description</h3>

<p>Adds a file to an item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_append_files(sb_id, files, ..., scrape_files = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_append_files_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_append_files_+3A_files">files</code></td>
<td>
<p>A string vector of paths to files to be uploaded</p>
</td></tr>
<tr><td><code id="item_append_files_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_append_files_+3A_scrape_files">scrape_files</code></td>
<td>
<p>logical should the files be scraped for metadata? 
If TRUE, sciencebase will attempt to create extensions based on the files.
</p>
<p>For example, for shapefiles, this will result in a shapefile extension 
to be returned as a facet of the sciencebase item. 
See item: &quot;58069258e4b0824b2d1d422e&quot; for an example.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "testing 123")
cat("foo bar", file = "foobar.txt")
item_append_files(res$id, "foobar.txt")
item_rm(res)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_create'>Create a new SB item</h2><span id='topic+item_create'></span>

<h3>Description</h3>

<p>Create a new item on ScienceBase with the requested parent and item title. 
Info can be provided to populate metadata at the time of creation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_create(parent_id = user_id(), title, ..., info)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_create_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID corresponding to the 
parent item (folder)</p>
</td></tr>
<tr><td><code id="item_create_+3A_title">title</code></td>
<td>
<p>The title of the new SB item</p>
</td></tr>
<tr><td><code id="item_create_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
<tr><td><code id="item_create_+3A_info">info</code></td>
<td>
<p>(optional) list of metadata info for the new item</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create an item - by default we use your user ID
item_create(title = "testing 123")

# Pass an object of class sbitem
x &lt;- folder_create(user_id(), "foobar456")
item_create(x, "foobar456-item")

## End(Not run)
</code></pre>

<hr>
<h2 id='item_exists'>check if identifier touple already exists on SB</h2><span id='topic+item_exists'></span>

<h3>Description</h3>

<p>returns TRUE if touple already belongs to a sciencebase item, FALSE if not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_exists(scheme, type, key, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_exists_+3A_scheme">scheme</code></td>
<td>
<p>the identifier scheme</p>
</td></tr>
<tr><td><code id="item_exists_+3A_type">type</code></td>
<td>
<p>the identifier type</p>
</td></tr>
<tr><td><code id="item_exists_+3A_key">key</code></td>
<td>
<p>the identifier key</p>
</td></tr>
<tr><td><code id="item_exists_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean for whether item exists
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
item_exists('mda_streams','ts_doobs','nwis_01018035')
item_exists('mda_streams','site_root','nwis_01018035')

## End(Not run)
</code></pre>

<hr>
<h2 id='item_file_download'>Download files attached to item</h2><span id='topic+item_file_download'></span>

<h3>Description</h3>

<p>Function to downlod files attached to an item on SB. Either files can be
specified directly using the <code>names</code> and <code>destinations</code> parameters,
or a <code>dest_dir</code> can be supplied where all attached files will be written
with the names as stored on SB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_file_download(
  sb_id,
  ...,
  names,
  destinations,
  dest_dir = getwd(),
  overwrite_file = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_file_download_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_file_download_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_file_download_+3A_names">names</code></td>
<td>
<p>String vector list of file names attached to item that you wish
to download.</p>
</td></tr>
<tr><td><code id="item_file_download_+3A_destinations">destinations</code></td>
<td>
<p>String vector list of destinations for requested files.
Must be same length as <code>names</code></p>
</td></tr>
<tr><td><code id="item_file_download_+3A_dest_dir">dest_dir</code></td>
<td>
<p>A directory path for saving files when <code>names</code> destinations 
parameter is not specified.</p>
</td></tr>
<tr><td><code id="item_file_download_+3A_overwrite_file">overwrite_file</code></td>
<td>
<p>Boolean indicating if file should be overwritten if it
already exists locally</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of full paths to local files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

#downloads all files attached to this item
item_file_download('627f1572d34e3bef0c9a30d8', dest_dir=tempdir())

#downloads a specific file attached to this item
item_file_download('627f1572d34e3bef0c9a30d8', names='example.txt',
		destinations=file.path(tempdir(), 'out.txt'))
		

## End(Not run)
</code></pre>

<hr>
<h2 id='item_get'>Retrieve SB item</h2><span id='topic+item_get'></span>

<h3>Description</h3>

<p>Retrieves an item and its metadata from ScienceBase based on its
unique ID. Errors if the requested item ID does not exist or
access is restricted due to permissions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_get(sb_id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_get_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_get_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get an item
item_get("4f4e4b24e4b07f02db6aea14")

# Search for item IDs, then pass to item_get
library("httr")
res &lt;- query_items(list(s = "Search", q = "water", format = "json"))

if(inherits(res, "response") &amp;&amp; res$status != 404) {
  ids &lt;- vapply(httr::content(res)$items, "[[", "", "id")
  lapply(ids[1:3], item_get)
}


</code></pre>

<hr>
<h2 id='item_get_fields'>Retrieve specific fields from an SB item</h2><span id='topic+item_get_fields'></span>

<h3>Description</h3>

<p>Retrieve specific fields from an SB item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_get_fields(sb_id, fields, ..., drop = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_get_fields_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_get_fields_+3A_fields">fields</code></td>
<td>
<p>a vector of fields</p>
</td></tr>
<tr><td><code id="item_get_fields_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_get_fields_+3A_drop">drop</code></td>
<td>
<p>logical. If only one field is selected, should the
list format be dropped?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List serialization of chosen metadata for an SB item
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get certain fields from an item
item_get_fields("63cb38b2d34e06fef14f40ad", c('title', 'citation', 'contacts'))

#' # If only 1 field selection, do or don't drop list format
item_get_fields("63cb38b2d34e06fef14f40ad", 'title')
item_get_fields("63cb38b2d34e06fef14f40ad", 'title', drop = FALSE)

</code></pre>

<hr>
<h2 id='item_get_parent'>Get an item's parent ID</h2><span id='topic+item_get_parent'></span>

<h3>Description</h3>

<p>Retrieves the parent of a supplied item based on the ScienceBase
item tree hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_get_parent(sb_id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_get_parent_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_get_parent_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An item object representing the parent of the supplied item.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
item_get_parent("57976a0ce4b021cadec97890")

item_get_parent(item_get("57976a0ce4b021cadec97890"))

</code></pre>

<hr>
<h2 id='item_list_children'>Return IDs for all child items</h2><span id='topic+item_list_children'></span>

<h3>Description</h3>

<p>Returns a list of child IDs for a ScienceBase item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_list_children(sb_id, fields = c("id", "title"), ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_list_children_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_list_children_+3A_fields">fields</code></td>
<td>
<p>A character vector of requested data fields. Defaults to 'id' and 'title'. Full list of possible fields 
is available online in <a href="https://www.usgs.gov/sciencebase-instructions-and-documentation/item-core-model">SB documentation</a>.</p>
</td></tr>
<tr><td><code id="item_list_children_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_list_children_+3A_limit">limit</code></td>
<td>
<p>Max children returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of <code>sbitem</code> for each child item.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
item_list_children(user_id())

## End(Not run)


item_list_children(as.sbitem('5060b03ae4b00fc20c4f3c8b'))
item_list_children(item_get('5060b03ae4b00fc20c4f3c8b'))

</code></pre>

<hr>
<h2 id='item_list_files'>Get list of files attached to SB item</h2><span id='topic+item_list_files'></span>

<h3>Description</h3>

<p>Lists all files attached to a SB item. Files can be downloaded 
from ScienceBase using <code><a href="#topic+item_file_download">item_file_download</a></code>. 
</p>
<p>(advanced) Recursive options lists all files attached to an item and all children items. 
</p>
<p>NOTE: A sciencebase item can contain so-called &quot;extensions&quot;. The 
sciencebase item data model refers to the information that describes
an extension as a &quot;facet&quot;. Some extension facets contain files 
(such as with a shapefile). The &quot;facet&quot; attribute of the return from
this function will contain the name of the facet the file came from
if the file was found in a facet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_list_files(sb_id, recursive = FALSE, fetch_cloud_urls = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_list_files_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_list_files_+3A_recursive">recursive</code></td>
<td>
<p>(logical) List files recursively. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="item_list_files_+3A_fetch_cloud_urls">fetch_cloud_urls</code></td>
<td>
<p>(logical) fetch a tokenized cloud download URLs? Default: <code>TRUE</code>
This option will take slightly longer but the 'url' attribute of the returned list will
work for direct file downloads or use with pther applications and libraries.</p>
</td></tr>
<tr><td><code id="item_list_files_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with columns fname, size, url, and facet. 
If item has no attached files, returns a zero row data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

#regular files
item_list_files("57976a0ce4b021cadec97890")

# files in facets
item_list_files("5ebe92af82ce476925e44b8f")

# list files recursively
## create item
id &lt;- item_create(user_id(), title="some title")
## 1. create nested item w/ file
file &lt;- system.file("examples", "books.json", package = "sbtools")
id2 &lt;- item_create(id, title = "newest-thing")
item_upload_create(id2, file)
## 2. create nested item w/ file
file &lt;- system.file("examples", "species.json", package = "sbtools")
id3 &lt;- item_create(id, title = "a-new-thing")
item_upload_create(id3, file)
## 3. create nested item w/ file
file &lt;- system.file("examples", "data.csv", package = "sbtools")
id4 &lt;- item_create(id, title = "another-thing")
item_upload_create(id4, file)
item_list_files(id = '56562348e4b071e7ea53e09d', recursive = FALSE) # default
item_list_files(id = '56562348e4b071e7ea53e09d', recursive = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_move'>Move item from one folder to another</h2><span id='topic+item_move'></span>

<h3>Description</h3>

<p>Move item from one folder to another
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_move(sb_id, id_new, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_move_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_move_+3A_id_new">id_new</code></td>
<td>
<p>Folder/item to move <code>id</code> to. A ScienceBase ID or something 
that can be coerced to a SB item ID by <code><a href="#topic+as.sbitem">as.sbitem</a></code></p>
</td></tr>
<tr><td><code id="item_move_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>. Same as <code>id</code>, but with new 
parent id
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create 1st folder
(fold1 &lt;- folder_create(user_id(), "bear123"))
(res &lt;- item_create(fold1, "item-to-move"))

# create 2nd folder
(fold2 &lt;- folder_create(user_id(), "bear456"))

# move item in 1st folder to 2nd folder
(res2 &lt;- item_move(res, fold2))

# test identical
identical(res2$parentId, fold2$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_publish_cloud'>Publish file to public cloud S3 bucket</h2><span id='topic+item_publish_cloud'></span>

<h3>Description</h3>

<p>moves a cloud file from the S3 bucket only available via
ScienceBase authenticated services to a public S3 bucket.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_publish_cloud(sb_id, files, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_publish_cloud_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_publish_cloud_+3A_files">files</code></td>
<td>
<p>A string vector of paths to files to be uploaded</p>
</td></tr>
<tr><td><code id="item_publish_cloud_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>web service response invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "testing 123")
cat("foo bar", file = "foobar.txt")
item_upload_cloud(res$id, "foobar.txt")
item_publish_cloud(res$id, "foobar.txt") 

## End(Not run)

</code></pre>

<hr>
<h2 id='item_rename_files'>Rename item attached files</h2><span id='topic+item_rename_files'></span>

<h3>Description</h3>

<p>Renames files attached to an SB item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_rename_files(sb_id, names, new_names, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_rename_files_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_rename_files_+3A_names">names</code></td>
<td>
<p>List of names of files to rename</p>
</td></tr>
<tr><td><code id="item_rename_files_+3A_new_names">new_names</code></td>
<td>
<p>List of new file names to use</p>
</td></tr>
<tr><td><code id="item_rename_files_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

names = c('file1.txt', 'file2.txt')
new_names = c('newname1.txt', 'newname2.txt')

item_rename_files('sbid', names, new_names)


## End(Not run)

</code></pre>

<hr>
<h2 id='item_replace_files'>Replace files associated with an item</h2><span id='topic+item_replace_files'></span>

<h3>Description</h3>

<p>replaces existing files associated with an item with a new one. 
</p>
<p>NOTE: This function will not replace files stored in facets. Until and if 
facet support is added, direct alteration of the science base item object 
is required to manipulate facets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_replace_files(sb_id, files, ..., all = FALSE, scrape_files = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_replace_files_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_replace_files_+3A_files">files</code></td>
<td>
<p>A character vector of file paths</p>
</td></tr>
<tr><td><code id="item_replace_files_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_replace_files_+3A_all">all</code></td>
<td>
<p>A boolean indicating if all attached files should be removed before
uploading new files. FALSE if only files with matching names should be replaced. 
If you wish to upload files with duplicate names, see <code><a href="#topic+item_append_files">item_append_files</a></code>.
Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="item_replace_files_+3A_scrape_files">scrape_files</code></td>
<td>
<p>logical should the files be scraped for metadata? 
If TRUE, sciencebase will attempt to create extensions based on the files.
</p>
<p>For example, for shapefiles, this will result in a shapefile extension 
to be returned as a facet of the sciencebase item. 
See item: &quot;58069258e4b0824b2d1d422e&quot; for an example.</p>
</td></tr>
</table>

<hr>
<h2 id='item_rm'>Remove item from SB</h2><span id='topic+item_rm'></span>

<h3>Description</h3>

<p>Remove an item from ScienceBase. This is not reversible and will delete 
an item and its attached files. (advanced) Recursive is to be used with care
and could result in unexpected file deletion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_rm(sb_id, ..., limit = 1000, recursive = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_rm_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_rm_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_rm_+3A_limit">limit</code></td>
<td>
<p>The maximum number of child items to remove when called with
recursive=TRUE.</p>
</td></tr>
<tr><td><code id="item_rm_+3A_recursive">recursive</code></td>
<td>
<p>logical, FALSE by default. CAUTION: setting recursive=TRUE
means that not only will this item be deleted, but so will all its child
items and their child items and so on.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><span class="pkg">httr</span> <code><a href="httr.html#topic+response">response</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "item-to-delete")
item_rm(res)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_rm_files'>Remove files associated with an item</h2><span id='topic+item_rm_files'></span>

<h3>Description</h3>

<p>Removes existing files associated with an item.
</p>
<p>NOTE: This function will not alter facets which can also
contain facets. To manipulate facets, the facet element of
a sciencebase item must be altered and updated with <code><a href="#topic+item_update">item_update</a></code>.
</p>
<p>This function is the key way to remove files attached to SB items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_rm_files(sb_id, files, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_rm_files_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_rm_files_+3A_files">files</code></td>
<td>
<p>A character vector of file names to remove. 
If not supplied, defaults to removing all attached files.</p>
</td></tr>
<tr><td><code id="item_rm_files_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "item456") 
cat("foo bar", file = "foobar.txt")
item_append_files(res, "foobar.txt")
res &lt;- item_get(res)
res$files[[1]]$name
res2 &lt;- item_rm_files(res)
res2$files

## End(Not run)
</code></pre>

<hr>
<h2 id='item_rm_recursive'>Remove an item completely by recursively removing its child items</h2><span id='topic+item_rm_recursive'></span>

<h3>Description</h3>

<p>BEWARE: This completely removes ALL CHILD ITEMS AND THEIR CHILDREN
as well as the item itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_rm_recursive(sb_id, ..., limit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_rm_recursive_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_rm_recursive_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> to indicate success
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create an item with nested structure
authenticate_sb()
fname &lt;- "chairs"
folder = folder_create(user_id(), name = fname)
item_create(folder, title='child1')
item_create(folder, title='child2')

item_list_children(folder)

# then delete the whole folder
sbtools:::item_rm_recursive(folder)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_update'>Update a SB item with new metadata</h2><span id='topic+item_update'></span>

<h3>Description</h3>

<p>Updates metadata associated with a ScienceBase item based on 
supplied list of new or updated metadata elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_update(sb_id, info, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_update_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_update_+3A_info">info</code></td>
<td>
<p>list of metadata info (key-value pairs) to change on the item</p>
</td></tr>
<tr><td><code id="item_update_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "item-to-update") 
out &lt;- item_update(res, list(title = "item-updated"))
out$title

## End(Not run)
</code></pre>

<hr>
<h2 id='item_update_identifier'>Add custom identifier to an existing item</h2><span id='topic+item_update_identifier'></span>

<h3>Description</h3>

<p>Adds or updates an item's alternative identifier. This can add 
additional identifiers or update those already in place. See
<code><a href="#topic+query_item_identifier">query_item_identifier</a></code> for finding items based on alternative
identifier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_update_identifier(sb_id, scheme, type, key, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_update_identifier_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_update_identifier_+3A_scheme">scheme</code></td>
<td>
<p>The identifier scheme</p>
</td></tr>
<tr><td><code id="item_update_identifier_+3A_type">type</code></td>
<td>
<p>The identifier type</p>
</td></tr>
<tr><td><code id="item_update_identifier_+3A_key">key</code></td>
<td>
<p>The identifier key</p>
</td></tr>
<tr><td><code id="item_update_identifier_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

initialize_sciencebase_session()
item_update_identifier("5485fd99e4b02acb4f0c7e81", "scheme", "type", "key")


## End(Not run)

</code></pre>

<hr>
<h2 id='item_upload_cloud'>Upload File to Item Cloud Storage</h2><span id='topic+item_upload_cloud'></span>

<h3>Description</h3>

<p>Adds a file to an item in cloud storage
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_upload_cloud(sb_id, files, ..., status = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_upload_cloud_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID corresponding to the item</p>
</td></tr>
<tr><td><code id="item_upload_cloud_+3A_files">files</code></td>
<td>
<p>A string vector of paths to files to be uploaded</p>
</td></tr>
<tr><td><code id="item_upload_cloud_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="item_upload_cloud_+3A_status">status</code></td>
<td>
<p>logical display upload status?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Success message invisibly. NOTE: cloud processing
can take some time so the added file may not appear immediately. 
For this reason, a sciencebase item json is NOT returned as is
done with other similar functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- item_create(user_id(), "testing 123")
cat("foo bar", file = "foobar.txt")
item_upload_cloud(res$id, "foobar.txt")

## End(Not run)
</code></pre>

<hr>
<h2 id='item_upload_create'>#' Upload file(s) and create a new item</h2><span id='topic+item_upload_create'></span>

<h3>Description</h3>

<p>Create a new item with files attached, all in one call to SB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_upload_create(parent_id, files, ..., scrape_files = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_upload_create_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID corresponding to the 
parent item (folder)</p>
</td></tr>
<tr><td><code id="item_upload_create_+3A_files">files</code></td>
<td>
<p>A string vector of paths to files to be uploaded</p>
</td></tr>
<tr><td><code id="item_upload_create_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
<tr><td><code id="item_upload_create_+3A_scrape_files">scrape_files</code></td>
<td>
<p>logical should the files be scraped for metadata? 
If TRUE, sciencebase will attempt to create extensions based on the files.
</p>
<p>For example, for shapefiles, this will result in a shapefile extension 
to be returned as a facet of the sciencebase item. 
See item: &quot;58069258e4b0824b2d1d422e&quot; for an example.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# You'll need a parent id for a folder/item
## here, using your highest level parent folder
file &lt;- system.file("examples", "books.json", package = "sbtools")
item_upload_create(user_id(), file)

## End(Not run)
</code></pre>

<hr>
<h2 id='item_upsert'>Upsert an SB item</h2><span id='topic+item_upsert'></span>

<h3>Description</h3>

<p>Either creates or updates (if item already exists)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>item_upsert(parent_id = user_id(), title = NULL, ..., info = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="item_upsert_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID corresponding to the 
parent item (folder)</p>
</td></tr>
<tr><td><code id="item_upsert_+3A_title">title</code></td>
<td>
<p>The title of the new SB item</p>
</td></tr>
<tr><td><code id="item_upsert_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
<tr><td><code id="item_upsert_+3A_info">info</code></td>
<td>
<p>(optional) list of metadata info for the new item</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# helper function to make a random name
aname &lt;- function() paste0(sample(letters, size = 5, replace = TRUE), collapse = "")

# Create an item - by default we use your user ID
(x &lt;- item_upsert(title = aname()))

# Call item_upsert again, updates this time
item_upsert(x, info = list(
		contacts = list(list(name = "Suzy"))
	)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='items_create'>Create many new SB items</h2><span id='topic+items_create'></span>

<h3>Description</h3>

<p>A method to create multiple ScienceBase items with a single call and a single HTTP service
request. Can be useful for improving performance of creating a large number of items at once.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>items_create(parent_id = user_id(), title, ..., info = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="items_create_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID 
corresponding to the parent item (folder). This must be of length 1 or more. 
If length 1, then we recycle it for every item.</p>
</td></tr>
<tr><td><code id="items_create_+3A_title">title</code></td>
<td>
<p>Two or more titles for the new SB items</p>
</td></tr>
<tr><td><code id="items_create_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code>.</p>
</td></tr>
<tr><td><code id="items_create_+3A_info">info</code></td>
<td>
<p>(optional) list of metadata info for the new items. for each 
item include a named list of variables</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The length of the <code>title</code> and <code>info</code> values must be the same
length - however, the <code>parent_id</code> can be of length 1 or equal to the length 
of each of <code>title</code> and <code>info</code> parameters
</p>


<h3>Value</h3>

<p>One or more objects of class <code>sbitem</code> in a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# helper function to make a random name
aname &lt;- function() paste0(sample(letters, size = 5, replace = TRUE), collapse = "")

# Create some items - by default we use your user ID
items_create(title = c(aname(), aname()))

# add additional items in the info parameter - by default we use your user ID
items_create(title = c(aname(), aname()), 
		info = list(
						list(contacts = list(list(name = "Suzy"))), 
						list(contacts = list(list(name = "Brandy")))
					)
	)
	
# another example with more information - by default we use your user ID
items_create(title = c(aname(), aname()), 
		info = list(
						list(contacts = list(list(name = "Suzy"))), 
						list(contacts = list(list(name = "Brandy")))
					)
	)	

# Pass an object of class sbitem
(x &lt;- folder_create(user_id(), aname()))
items_create(x, title = c(aname(), aname()))

## End(Not run)
</code></pre>

<hr>
<h2 id='items_update'>Update many SB items with new metadata</h2><span id='topic+items_update'></span>

<h3>Description</h3>

<p>A method to update multiple ScienceBase items with a single call and a single HTTP service
request. Can be useful for improving performance of updating a large number of items at once.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>items_update(sb_id, info, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="items_update_+3A_sb_id">sb_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or a character ScienceBase ID 
corresponding to the item</p>
</td></tr>
<tr><td><code id="items_update_+3A_info">info</code></td>
<td>
<p>list of metadata info (key-value pairs) to change on the item</p>
</td></tr>
<tr><td><code id="items_update_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>If length of <code>sb_id</code> &gt; 1, then length of <code>info</code> input must be the same
</p>


<h3>Value</h3>

<p>One or more objects of class <code>sbitem</code> in a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# helper function to make a random name
aname &lt;- function() paste0(sample(letters, size = 5, replace = TRUE), collapse = "")

res &lt;- items_create(user_id(), title = c(aname(), aname())) 
out &lt;- items_update(res, info = list( list(title = aname()), list(title = aname()) ) )
vapply(out, "[[", "", "title")

## End(Not run)
</code></pre>

<hr>
<h2 id='items_upsert'>Upsert many SB items</h2><span id='topic+items_upsert'></span>

<h3>Description</h3>

<p>Either creates or updates (if items already exist)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>items_upsert(parent_id = user_id(), title = NULL, ..., info = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="items_upsert_+3A_parent_id">parent_id</code></td>
<td>
<p>An <code><a href="#topic+sbitem">sbitem</a></code> object or character ScienceBase ID corresponding to the 
parent item (folder)</p>
</td></tr>
<tr><td><code id="items_upsert_+3A_title">title</code></td>
<td>
<p>The title of the new SB item</p>
</td></tr>
<tr><td><code id="items_upsert_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>,
<code><a href="httr.html#topic+HEAD">HEAD</a></code>, <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
<tr><td><code id="items_upsert_+3A_info">info</code></td>
<td>
<p>(optional) list of metadata info for the new item</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sbitem</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# helper function to make a random name
aname &lt;- function() paste0(sample(letters, size = 5, replace = TRUE), collapse = "")

# Create some item - by default we use your user ID
z1 &lt;- item_create(title = aname())
z2 &lt;- item_create(title = aname())

# Upsert items
(x &lt;- items_upsert(list(z1, z2), title = c(aname(), aname())))

# Call item_upsert again, updates this time
items_upsert(x, info = list(
		contacts = list(list(name = "Suzy"))
	)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='query_item_identifier'>Query SB for items based on custom identifier</h2><span id='topic+query_item_identifier'></span>

<h3>Description</h3>

<p>Find all items under a scheme or also query by for a specific type and key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_item_identifier(scheme, type = NULL, key = NULL, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_item_identifier_+3A_scheme">scheme</code></td>
<td>
<p>The identifier scheme</p>
</td></tr>
<tr><td><code id="query_item_identifier_+3A_type">type</code></td>
<td>
<p>(optional) The identifier type</p>
</td></tr>
<tr><td><code id="query_item_identifier_+3A_key">key</code></td>
<td>
<p>(optional) The identifier key</p>
</td></tr>
<tr><td><code id="query_item_identifier_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_item_identifier_+3A_limit">limit</code></td>
<td>
<p>Max number of matching items to return</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The SB item id for the matching item. NULL if no matching item found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
authenticate_sb()

ex_item = item_create(title='identifier example')
item_update_identifier(ex_item, 'project1', 'dataset1', 'key1')
ex2_item = item_create(title='identifier example 2')
item_update_identifier(ex2_item, 'project1', 'dataset1', 'key2')


#query the specific item
query_item_identifier('project1', 'dataset1', 'key1')

#or get the collection of items based on the ID hierarchy
query_item_identifier('project1')

item_rm(ex_item)
item_rm(ex2_item)

## End(Not run)

</code></pre>

<hr>
<h2 id='query_item_in_folder'>Search within an SB folder</h2><span id='topic+query_item_in_folder'></span>

<h3>Description</h3>

<p>Search for text in the title, abstract, etc. within an SB folder and any
subfolders.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_item_in_folder(text, folder, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_item_in_folder_+3A_text">text</code></td>
<td>
<p>text in the title, abstract, etc. of the desired item</p>
</td></tr>
<tr><td><code id="query_item_in_folder_+3A_folder">folder</code></td>
<td>
<p>an SB item ID for the folder to search in</p>
</td></tr>
<tr><td><code id="query_item_in_folder_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_item_in_folder_+3A_limit">limit</code></td>
<td>
<p>Max number of matching items to return</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of matching items as sbitem objects.
</p>

<hr>
<h2 id='query_items'>Query SB for items using generic query parameters</h2><span id='topic+query_items'></span>

<h3>Description</h3>

<p>Query SB for items using generic query parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_items(query_list, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_items_+3A_query_list">query_list</code></td>
<td>
<p>List of item query selectors. See Details.</p>
</td></tr>
<tr><td><code id="query_items_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following is a list of query parameters you can use 
in the <code>query_list</code> parameter.
</p>

<ul>
<li><p> s (character): Only option: &quot;Search&quot;
</p>
</li>
<li><p> format (character): One of &quot;json&quot;, &quot;xml&quot;, &quot;csv&quot;, or &quot;atom&quot;
</p>
</li>
<li><p> q (character): Query string
</p>
</li>
<li><p> q (character): Lucene query string
</p>
</li>
<li><p> max (integer): Number of records to return. Default: 20
</p>
</li>
<li><p> offset (integer): Record to start at. Default: 1
</p>
</li>
<li><p> fields (character): Character vector of fields to return
</p>
</li>
<li><p> folderId (character): Alphanumeric string representing folder ID
</p>
</li>
<li><p> parentId (character): Alphanumeric string representing folder ID. This
can be used to return all children items within the folder, but not within 
sub-folders.
</p>
</li>
<li><p> sort (character) One of &quot;firstContact&quot;, &quot;dateCreated&quot;, &quot;lastUpdated&quot;, 
or &quot;title&quot;. By default sorted by search score
</p>
</li>
<li><p> order (character) One of &quot;asc&quot; or &quot;desc&quot;
</p>
</li>
<li><p> ids Vector of item ids.
</p>
</li>
<li><p> ancestors (character): Alphanumeric string representing folder ID. This
can be used to return all children items within the folder, even within 
sub-folders. Used as a filter 
</p>
</li>
<li><p> tags Filter by tags, e.g, &quot;distribution&quot;. Used as a filter 
</p>
</li>
<li><p> browseCategory One of .... Used as a filter 
</p>
</li>
<li><p> browseType One of .... Used as a filter 
</p>
</li>
<li><p> dateRange A json string with keys dateType and choice. Where dateType is one of
Acquisition, Award, Collected, dateCreated, Received, Reported, Transmitted, Due, End,
Info, lastUpdated, Publication, Release, or Start. And where choice is one of 
day, week, month, year, or range (if range selected, also supply start and end
keys with dates of the form YYYY-MM-DD). Used as a filter 
</p>
</li>
<li><p> projectStatus One of Active, Approved, Completed, In Progress, Proposed. Used as a filter 
</p>
</li>
<li><p> spatialQuery A WKT string. Used as a filter 
</p>
</li>
<li><p> extentQuery Use existing extents (footprints) to search against item bounding 
boxes and representational points. This is a alphanumeric string.
</p>
</li></ul>



<h3>Value</h3>

<p>An object of class <code><a href="httr.html#topic+response">response</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+query_item_identifier">query_item_identifier</a></code>, <code><a href="#topic+query_item_in_folder">query_item_in_folder</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Basic query
library("httr")
res &lt;- query_items(list(s = "Search", q = "water", format = "json"))
httr::content(res)

# Paging
## max - number of results
res &lt;- query_items(list(s = "Search", q = "water", format = "json", max = 2))
length(httr::content(res)$items)
res &lt;- query_items(list(s = "Search", q = "water", format = "json", max = 30))
length(httr::content(res)$items)
## offset - start at certain record
res &lt;- query_items(list(s = "Search", q = "water", format = "json", 
max = 30, offset = 10))
httr::content(res)
## links - use links given in output for subsequent queries
httr::content(httr::GET(
		content(res)$nextlink$url
))

# Return only certain fields
res &lt;- query_items(list(s = "Search", q = "water", format = "json", fields = 'title'))
httr::content(res)$items[[1]]

# Search a folder ID
res &lt;- query_items(list(s = "Search", q = "water", format = "json", 
folderId = '504216b9e4b04b508bfd337d'))
httr::content(res)$items

# Filter by ancestor
query_items(list(s = "Search", ancestors = "4f831626e4b0e84f6086809b", format = "json"))

# Filter by tags
content(query_items(list(s = "Search", tags = "distribution", format = "json")))

# Filter by browse category
content(query_items(list(s = "Search", browseCategory = "Image", format = "json")))

# Filter by browse type
content(query_items(list(s = "Search", browseType = "Collection", format = "json")))

# Filter by WKT geometry string
wkt1 &lt;- "POLYGON((-104.4 41.0,-95.1 41.0,-95.1 37.5,-104.4 37.5,-104.4 41.0))"
wkt2 &lt;- "POLYGON((-104.4 38.3,-95.2 38.3,-95.2 33.7,-104.4 34.0,-104.4 38.3))"
content(query_items(list(s = "Search", spatialQuery = wkt1, format = "json")))
content(query_items(list(s = "Search", spatialQuery = wkt1, 
		spatialQuery = wkt2, format = "json")))

# Project status
content(query_items(list(s = "Search", projectStatus = "Active", format = "json")))

# Date range
query_items(list(s = "Search", 
		dateRange = '{"dateType":"Collected","choice":"year"}', format = "json"))
query_items(list(s = "Search", 
		dateRange = '{"dateType":"lastUpdated","choice":"month"}', format = "json"))
query_items(list(s = "Search", 
		dateRange = 
		'{"dateType":"Release","choice":"range","start":"2014-09-01","end":"2015-09-01"}', 
		format = "json"))

# Extent query
## just a alphanumeric code
content(query_items(list(s = "Search", extentQuery = '2873462', format = "json")))
## with buffering, intersect
content(query_items(list(s = "Search", extentQuery = '{"extent":2873462,
		"relation":"intersects","buffer":"5"}', format = "json")))
## with buffering, within
content(query_items(list(s = "Search", extentQuery = '{"extent":2873462,
		"relation":"within","buffer":"5"}', format = "json")))
## with buffering, within
content(query_items(list(s = "Search", extentQuery = '{"extent":2873462,
		"relation":"disjoint","buffer":"5"}', format = "json")))
		
# Lucene query
## note, you have to pass the q parameter if you pass the lq parameter
content(query_items(list(s = "Search", q = "", lq = '"sage OR grouse"')))

## End(Not run)
</code></pre>

<hr>
<h2 id='query_sb'>Query SB for items using generic query parameters</h2><span id='topic+query_sb'></span>

<h3>Description</h3>

<p>Generic SB query function to construct advanced queries.
</p>
<p>The following is a list of query parameters you can use 
in the <code>query_list</code> parameter.
</p>

<ul>
<li><p> q (character): Query string
</p>
</li>
<li><p> q (character): Lucene query string
</p>
</li>
<li><p> fields (character): Character vector of fields to return
</p>
</li>
<li><p> folderId (character): Alphanumeric string representing folder ID
</p>
</li>
<li><p> parentId (character): Alphanumeric string representing folder ID. This
can be used to return all children items within the folder, but not within 
sub-folders.
</p>
</li>
<li><p> sort (character) One of &quot;firstContact&quot;, &quot;dateCreated&quot;, &quot;lastUpdated&quot;, 
or &quot;title&quot;. By default sorted by search score
</p>
</li>
<li><p> order (character) One of &quot;asc&quot; or &quot;desc&quot;
</p>
</li>
<li><p> ids Vector of item ids.
</p>
</li>
<li><p> ancestors (character): Alphanumeric string representing folder ID. This
can be used to return all children items within the folder, even within 
sub-folders. Used as a filter 
</p>
</li>
<li><p> tags Filter by tags, e.g, &quot;distribution&quot;. Used as a filter 
</p>
</li>
<li><p> browseCategory One of .... Used as a filter 
</p>
</li>
<li><p> browseType One of .... Used as a filter 
</p>
</li>
<li><p> dateRange A json string with keys dateType and choice. Where dateType is one of
Acquisition, Award, Collected, dateCreated, Received, Reported, Transmitted, Due, End,
Info, lastUpdated, Publication, Release, or Start. And where choice is one of 
day, week, month, year, or range (if range selected, also supply start and end
keys with dates of the form YYYY-MM-DD). Used as a filter 
</p>
</li>
<li><p> projectStatus One of Active, Approved, Completed, In Progress, Proposed. Used as a filter 
</p>
</li>
<li><p> spatialQuery A WKT string. Used as a filter 
</p>
</li>
<li><p> extentQuery Use existing extents (footprints) to search against item bounding 
boxes and representational points. This is a alphanumeric string.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>query_sb(query_list, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_+3A_query_list">query_list</code></td>
<td>
<p>List of item query selectors. See Details.</p>
</td></tr>
<tr><td><code id="query_sb_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code><a href="#topic+sbitem">sbitem</a></code> objects
</p>


<h3>See Also</h3>

<p><code><a href="#topic+query_items">query_items</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
query_sb(list(q = "water"))

# Search by project status
query_sb(list(projectStatus = "Active"))

# Search a folder ID
query_sb(list(q = "water", folderId = '504216b9e4b04b508bfd337d'))

# Filter by ancestor
query_sb(list(ancestors = "4f831626e4b0e84f6086809b"))

# Filter by tags
query_sb(list(tags = "distribution"))

# Filter by browse category
query_sb(list(browseCategory = "Image"))

# Filter by browse type
query_sb(list(browseType = "Map Service"))

# Filter by WKT geometry string
wkt1 &lt;- "POLYGON((-104.4 41.0,-95.1 41.0,-95.1 37.5,-104.4 37.5,-104.4 41.0))"
wkt2 &lt;- "POLYGON((-104.4 38.3,-95.2 38.3,-95.2 33.7,-104.4 34.0,-104.4 38.3))"
query_sb(list(spatialQuery = wkt1))
query_sb(list(spatialQuery = wkt1, spatialQuery = wkt2))

# Date range
query_sb(list(dateRange = '{"dateType":"Collected","choice":"year"}'))
query_sb(list(dateRange = '{"dateType":"lastUpdated","choice":"month"}'))
query_sb(list(dateRange = 
		'{"dateType":"Release","choice":"range","start":"2014-09-01","end":"2015-09-01"}'))

## End(Not run)


</code></pre>

<hr>
<h2 id='query_sb_datatype'>Query SB for specific data type</h2><span id='topic+query_sb_datatype'></span>

<h3>Description</h3>

<p>Queries ScienceBase for items with matching datatype.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_sb_datatype(datatype, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_datatype_+3A_datatype">datatype</code></td>
<td>
<p>Character string indicating datatype. See <code><a href="#topic+sb_datatypes">sb_datatypes</a></code> for full
list of available datatypes.</p>
</td></tr>
<tr><td><code id="query_sb_datatype_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_datatype_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code><a href="#topic+sbitem">sbitem</a></code> objects. List of length 0 
means no matches were found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#query for items with WFS Layer data
query_sb_datatype('Static Map Image')

#query for US Topo maps
query_sb_datatype('Map Service')


</code></pre>

<hr>
<h2 id='query_sb_date'>Query SB for items within a date range</h2><span id='topic+query_sb_date'></span>

<h3>Description</h3>

<p>Queries ScienceBase for items with timestamps within a certain date/time range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_sb_date(
  start = as.POSIXct("1970-01-01"),
  end = Sys.time(),
  date_type = "lastUpdated",
  ...,
  limit = 20
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_date_+3A_start">start</code></td>
<td>
<p>Start date as <code><a href="base.html#topic+POSIXct">POSIXct</a></code> object. Defaults to 1970-01-01</p>
</td></tr>
<tr><td><code id="query_sb_date_+3A_end">end</code></td>
<td>
<p>End date as <code><a href="base.html#topic+POSIXct">POSIXct</a></code> object. Defaults to today.</p>
</td></tr>
<tr><td><code id="query_sb_date_+3A_date_type">date_type</code></td>
<td>
<p>Which object timestamp to query against. Options are (case sensitive): 
'Acquisition', 'Award', 'Collected', 'dateCreated', 'Received', 'Reported', 
'Transmitted', 'Due', 'End', 'Info', 'lastUpdated', 'Publication', 'Release', 
'Repository Created', 'Repository Updated', 'Start'.</p>
</td></tr>
<tr><td><code id="query_sb_date_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_date_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# find items updated today
query_sb_date(Sys.time(), Sys.time())

# find items with publications from the 1970's
query_sb_date(as.POSIXct('1970-01-01'), as.POSIXct('1980-01-01'), 
  date_type='Publication', limit=1000)


## End(Not run)

</code></pre>

<hr>
<h2 id='query_sb_doi'>Query SB for specific DOI (Digital Object Identifier)</h2><span id='topic+query_sb_doi'></span>

<h3>Description</h3>

<p>Queries for ScienceBase items with a specific DOI identifier. 
In ScienceBase, these are stored as additional unique identifiers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_sb_doi(doi, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_doi_+3A_doi">doi</code></td>
<td>
<p>DOI to search for as character</p>
</td></tr>
<tr><td><code id="query_sb_doi_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_doi_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code><a href="#topic+sbitem">sbitem</a></code> objects. List of length 0 
means no matches were found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Two example DOI-specific queries
query_sb_doi('10.5066/F7M043G7')

query_sb_doi('10.5066/F7Z60M35')

</code></pre>

<hr>
<h2 id='query_sb_spatial'>Query SB based on spatial extent</h2><span id='topic+query_sb_spatial'></span>

<h3>Description</h3>

<p>Queries ScienceBase based on a spatial bounding box. Accepts either an sp spatial data object
(uses the spatial object's bounding box) or long/lat coordinates defining the bounding box limits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_sb_spatial(bbox, long, lat, bb_wkt, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_spatial_+3A_bbox">bbox</code></td>
<td>
<p>An sf spatial data object. The bounding box of the object is used for the query.</p>
</td></tr>
<tr><td><code id="query_sb_spatial_+3A_long">long</code></td>
<td>
<p>A vector of longitude values that will define the boundaries of a bounding box. Min and Max of supplied longitudes are used. (alternate option to bbox).</p>
</td></tr>
<tr><td><code id="query_sb_spatial_+3A_lat">lat</code></td>
<td>
<p>A vector of latitude values that will define the boundaries of a bounding box. Min and Max of supplied latitude are used. (alternate option to bbox).</p>
</td></tr>
<tr><td><code id="query_sb_spatial_+3A_bb_wkt">bb_wkt</code></td>
<td>
<p>A character string using the Well Known Text (WKT) standard for defining spatial data. Must be a POLYGON WKT object.</p>
</td></tr>
<tr><td><code id="query_sb_spatial_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_spatial_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
#specify the latitude and longitude points to define the bounding box range. 
# This is simply bottom left and top right points
query_sb_spatial(long=c(-104.4, -95.1), lat=c(37.5, 41.0), limit=3)

#use a pre-formatted WKT polygon to grab data
query_sb_spatial(bb_wkt="POLYGON((-104.4 41.0,-95.1 41.0,-95.1 37.5,-104.4 37.5,-104.4 41.0))", 
	                limit=3)

</code></pre>

<hr>
<h2 id='query_sb_text'>Query SB for items containing specific text</h2><span id='topic+query_sb_text'></span>

<h3>Description</h3>

<p>Queries for ScienceBase items that have matching text in the title or 
description
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_sb_text(text, ..., limit = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_sb_text_+3A_text">text</code></td>
<td>
<p>Text string for search</p>
</td></tr>
<tr><td><code id="query_sb_text_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
<tr><td><code id="query_sb_text_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code><a href="#topic+sbitem">sbitem</a></code> objects. List of length 0 
means no matches were found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#query for a person's name
query_sb_text('Luna Leopold')

#query for one of the old river gaging stations
query_sb_text('Lees Ferry')


</code></pre>

<hr>
<h2 id='readPassword'>Read in a password from the user</h2><span id='topic+readPassword'></span>

<h3>Description</h3>

<p>Uses the RStudio pop-up password window if available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readPassword(prompt)
</code></pre>

<hr>
<h2 id='sb_datatypes'>Query SB for all available datatypes</h2><span id='topic+sb_datatypes'></span>

<h3>Description</h3>

<p>Queries ScienceBase for the list of all available datatypes. This can be
coupled with <code><a href="#topic+query_sb_datatype">query_sb_datatype</a></code> to query based on the type of data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sb_datatypes(limit = 50)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sb_datatypes_+3A_limit">limit</code></td>
<td>
<p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#return all datatypes (limit 50 by default)
sb_datatypes()

## End(Not run)

</code></pre>

<hr>
<h2 id='sb_ping'>Ping ScienceBase to see if it's available</h2><span id='topic+sb_ping'></span>

<h3>Description</h3>

<p>Ping ScienceBase to see if it's available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sb_ping(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sb_ping_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+GET">GET</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean (TRUE) indicating if a connection to ScienceBase can be established 
and if it is responding as expected. FALSE otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#TRUE if all is well and SB can be contacted
sb_ping()

</code></pre>

<hr>
<h2 id='sbitem'>ScienceBase item class</h2><span id='topic+sbitem'></span><span id='topic+as.sbitem'></span><span id='topic+as.sbitem.default'></span><span id='topic+is.sbitem'></span>

<h3>Description</h3>

<p>ScienceBase item class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.sbitem(x, ...)

## Default S3 method:
as.sbitem(x, ...)

is.sbitem(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sbitem_+3A_x">x</code></td>
<td>
<p>Input, variety of things, character, list, or sbitem class 
object</p>
</td></tr>
<tr><td><code id="sbitem_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+item_get">item_get</a></code>, only in 
the method for character class inputs</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Single item from item_get()
item_get("57976a0ce4b021cadec97890")

# Get many w/ e.g., an lapply() call
library("httr")
res &lt;- query_items(list(s = "Search", q = "water", format = "json"))
if(res$status == 200) {
  ids &lt;- vapply(httr::content(res)$items, "[[", "", "id")
  (out &lt;- lapply(ids[1:3], item_get))
}
# create item class from only an item ID
as.sbitem("5ebe92af82ce476925e44b8f")

# sbitem gives back itself
(x &lt;- as.sbitem("5ebe92af82ce476925e44b8f"))
as.sbitem(x)

</code></pre>

<hr>
<h2 id='sbtools_GET'>generic GETs for sbtools package</h2><span id='topic+sbtools_GET'></span>

<h3>Description</h3>

<p>package wrapped for generic GETs that test sessions internally and wrap some
errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sbtools_GET(url, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sbtools_GET_+3A_url">url</code></td>
<td>
<p>a base url for the GET</p>
</td></tr>
<tr><td><code id="sbtools_GET_+3A_...">...</code></td>
<td>
<p>additional params passed to <code><a href="httr.html#topic+GET">GET</a></code>, often 
including <code>query</code></p>
</td></tr>
</table>

<hr>
<h2 id='sbtools_POST'>generic POSTs for sbtools package
package wrapped for generic POSTs that test sessions internally and wrap some errors</h2><span id='topic+sbtools_POST'></span>

<h3>Description</h3>

<p>generic POSTs for sbtools package
package wrapped for generic POSTs that test sessions internally and wrap some errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sbtools_POST(url, body, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sbtools_POST_+3A_url">url</code></td>
<td>
<p>a base url for the POST</p>
</td></tr>
<tr><td><code id="sbtools_POST_+3A_body">body</code></td>
<td>
<p>a POST body</p>
</td></tr>
<tr><td><code id="sbtools_POST_+3A_...">...</code></td>
<td>
<p>additional params passed to <code><a href="httr.html#topic+POST">POST</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='sbtools_PUT'>generic PUTs for sbtools package</h2><span id='topic+sbtools_PUT'></span>

<h3>Description</h3>

<p>package wrapped for generic PUTs that test sessions internally and wrap some 
errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sbtools_PUT(url, body, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sbtools_PUT_+3A_url">url</code></td>
<td>
<p>a base url for the PUT</p>
</td></tr>
<tr><td><code id="sbtools_PUT_+3A_body">body</code></td>
<td>
<p>the PUT body as in <code><a href="httr.html#topic+PUT">PUT</a></code></p>
</td></tr>
<tr><td><code id="sbtools_PUT_+3A_...">...</code></td>
<td>
<p>additional params passed to <code><a href="httr.html#topic+PUT">PUT</a></code>, e.g.,
<code>accept_json()</code></p>
</td></tr>
</table>

<hr>
<h2 id='session_age'>a convienence function for getting the age of a session.</h2><span id='topic+session_age'></span>

<h3>Description</h3>

<p>a convienence function for getting the age of a session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session_age()
</code></pre>


<h3>Value</h3>

<p>difftime object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
authenticate_sb('bbadger@usgs.gov')
sbtools::session_age()

## End(Not run)
</code></pre>

<hr>
<h2 id='session_details'>Get session info (deprecated)</h2><span id='topic+session_details'></span>

<h3>Description</h3>

<p>Get the details associated with current ScienceBase user session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session_details()
</code></pre>


<h3>Value</h3>

<p>list, if not logged in states that, but if logged in, user details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

session_details()


## End(Not run)
</code></pre>

<hr>
<h2 id='session_expired'>Check whether an SB session is expired</h2><span id='topic+session_expired'></span>

<h3>Description</h3>

<p>Check the expiration using session_age
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session_expired()
</code></pre>

<hr>
<h2 id='session_renew'>Checks current session and re-authenticates if necessary</h2><span id='topic+session_renew'></span>

<h3>Description</h3>

<p>Checks the state of your Sciencebase session, re-authenticates if the session
is expired, and simply renews if the session is active.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session_renew(password, ..., username)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="session_renew_+3A_password">password</code></td>
<td>
<p>The password to use, if needed, to renew the session.</p>
</td></tr>
<tr><td><code id="session_renew_+3A_...">...</code></td>
<td>
<p>Any additional parameters are currently ignored.</p>
</td></tr>
<tr><td><code id="session_renew_+3A_username">username</code></td>
<td>
<p>Optional. Used only to confirm that the current username is 
what you expect; if you want to switch usernames, use 
<code>authenticate_sb()</code> instead of this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the session object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# an empty call is sufficient if the session is current, 
# but will break if haven't been logged in before
session_renew()

# include a password if session may be expired
session_renew('newpass')

# optionally confirm the value of the current username
session_renew(username='olduser@usgs.gov', 'newpass')

## End(Not run)
</code></pre>

<hr>
<h2 id='session_validate'>Validate sbtools session state</h2><span id='topic+session_validate'></span>

<h3>Description</h3>

<p>A session is considered valid if it is NULL or a true, non-expired SB session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session_validate()
</code></pre>


<h3>Details</h3>

<p>This function only operates on the active initialized session.
</p>


<h3>Value</h3>

<p><code>TRUE/FALSE</code> indicating if session is valid and can be used. 
Returns TRUE if session is NULL as well.
</p>

<hr>
<h2 id='set_endpoint'>Set SB endpoint</h2><span id='topic+set_endpoint'></span>

<h3>Description</h3>

<p>Sets the internal URLS used to either the production
or development (beta) SB server. URLS are stored internally to the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_endpoint(endpoint = c("production", "development"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_endpoint_+3A_endpoint">endpoint</code></td>
<td>
<p>Indicate which SB endpoint 
you want to use options: <code>c('production','development')</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Luke Winslow
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_endpoint('prod')

# getting item from production SB servers
item_get('5060b03ae4b00fc20c4f3c8b')

set_endpoint('dev')
# getting item from beta SB servers
item_get('521e4686e4b051c878dc35d0')



</code></pre>

<hr>
<h2 id='user_id'>Get your parent ID</h2><span id='topic+user_id'></span>

<h3>Description</h3>

<p>Required for creating items
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_id(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="user_id_+3A_...">...</code></td>
<td>
<p>Additional parameters are passed on to <code><a href="httr.html#topic+POST">POST</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single character string, your user id
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
user_id()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
