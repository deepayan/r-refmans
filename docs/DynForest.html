<!DOCTYPE html><html lang="en"><head><title>Help for package DynForest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DynForest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#compute_gvimp'><p>Compute the grouped importance of variables (gVIMP) statistic</p></a></li>
<li><a href='#compute_ooberror'><p>Compute the Out-Of-Bag error (OOB error)</p></a></li>
<li><a href='#compute_vardepth'><p>Extract characteristics from the trees building process</p></a></li>
<li><a href='#compute_vimp'><p>Compute the importance of variables (VIMP) statistic</p></a></li>
<li><a href='#data_simu1'><p>data_simu1 dataset</p></a></li>
<li><a href='#data_simu2'><p>data_simu2 dataset</p></a></li>
<li><a href='#dynforest'><p>Random forest with multivariate longitudinal endogenous covariates</p></a></li>
<li><a href='#get_tree'><p>Extract some information about the split for a tree by user</p></a></li>
<li><a href='#get_treenodes'><p>Extract nodes identifiers for a given tree</p></a></li>
<li><a href='#pbc2'><p>pbc2 dataset</p></a></li>
<li><a href='#plot.dynforest'><p>Plot function in dynforest</p></a></li>
<li><a href='#predict.dynforest'><p>Prediction using dynamic random forests</p></a></li>
<li><a href='#print.dynforest'><p>Print function</p></a></li>
<li><a href='#summary.dynforest'><p>Display the summary of dynforest</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Random Forest with Multivariate Longitudinal Predictors</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Based on random forest principle, 'DynForest' is able to include 
    multiple longitudinal predictors to provide individual predictions. 
    Longitudinal predictors are modeled through the random forest. The 
    methodology is fully described for a survival outcome in: 
    Devaux, Helmer, Genuer &amp; Proust-Lima (2023) 
    &lt;<a href="https://doi.org/10.1177%2F09622802231206477">doi:10.1177/09622802231206477</a>&gt;.</td>
</tr>
<tr>
<td>Imports:</td>
<td>DescTools, cli, cmprsk, doParallel, doRNG, foreach, ggplot2,
lcmm, methods, pbapply, pec, prodlim, stringr, survival, zoo</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.4.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/anthonydevaux/DynForest">https://github.com/anthonydevaux/DynForest</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/anthonydevaux/DynForest/issues">https://github.com/anthonydevaux/DynForest/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-23 09:22:36 UTC; antho</td>
</tr>
<tr>
<td>Author:</td>
<td>Anthony Devaux <a href="https://orcid.org/0000-0002-8862-4218"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Robin Genuer <a href="https://orcid.org/0000-0002-0981-3943"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  CÃ©cile Proust-Lima
    <a href="https://orcid.org/0000-0002-9884-955X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Louis Capitaine <a href="https://orcid.org/0000-0001-6800-2342"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anthony Devaux &lt;anthony.devauxbarault@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-23 10:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='compute_gvimp'>Compute the grouped importance of variables (gVIMP) statistic</h2><span id='topic+compute_gvimp'></span>

<h3>Description</h3>

<p>Compute the grouped importance of variables (gVIMP) statistic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_gvimp(
  dynforest_obj,
  IBS.min = 0,
  IBS.max = NULL,
  group = NULL,
  ncores = NULL,
  seed = 1234
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_gvimp_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
<tr><td><code id="compute_gvimp_+3A_ibs.min">IBS.min</code></td>
<td>
<p>(Only with survival outcome) Minimal time to compute the Integrated Brier Score. Default value is set to 0.</p>
</td></tr>
<tr><td><code id="compute_gvimp_+3A_ibs.max">IBS.max</code></td>
<td>
<p>(Only with survival outcome) Maximal time to compute the Integrated Brier Score. Default value is set to the maximal time-to-event found.</p>
</td></tr>
<tr><td><code id="compute_gvimp_+3A_group">group</code></td>
<td>
<p>A list of groups with the name of the predictors assigned in each group</p>
</td></tr>
<tr><td><code id="compute_gvimp_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores used to grow trees in parallel. Default value is the number of cores of the computer-1.</p>
</td></tr>
<tr><td><code id="compute_gvimp_+3A_seed">seed</code></td>
<td>
<p>Seed to replicate results</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>compute_gvimp()</code> function returns a list with the following elements:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>Inputs</code> </td><td style="text-align: left;"> A list of 3 elements: <code>Longitudinal</code>, <code>Numeric</code> and <code>Factor</code>. Each element contains the names of the predictors </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>group</code> </td><td style="text-align: left;"> A list of each group defined in <code>group</code> argument </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>gVIMP</code> </td><td style="text-align: left;"> A numeric vector containing the gVIMP for each group defined in <code>group</code> argument </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>tree_oob_err</code> </td><td style="text-align: left;"> A numeric vector containing the OOB error for each tree needed to compute the VIMP statistic </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>IBS.range</code> </td><td style="text-align: left;"> A vector containing the IBS min and max </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Compute gVIMP statistic
res_dyn_gVIMP &lt;- compute_gvimp(dynforest_obj = res_dyn,
                               group = list(group1 = c("serBilir","SGOT"),
                                            group2 = c("albumin","alkaline")),
                               ncores = 2, seed = 1234)

</code></pre>

<hr>
<h2 id='compute_ooberror'>Compute the Out-Of-Bag error (OOB error)</h2><span id='topic+compute_ooberror'></span>

<h3>Description</h3>

<p>Compute the Out-Of-Bag error (OOB error)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_ooberror(dynforest_obj, IBS.min = 0, IBS.max = NULL, ncores = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_ooberror_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
<tr><td><code id="compute_ooberror_+3A_ibs.min">IBS.min</code></td>
<td>
<p>(Only with survival outcome) Minimal time to compute the Integrated Brier Score. Default value is set to 0.</p>
</td></tr>
<tr><td><code id="compute_ooberror_+3A_ibs.max">IBS.max</code></td>
<td>
<p>(Only with survival outcome) Maximal time to compute the Integrated Brier Score. Default value is set to the maximal time-to-event found.</p>
</td></tr>
<tr><td><code id="compute_ooberror_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores used to grow trees in parallel. Default value is the number of cores of the computer-1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>compute_ooberror()</code> function return a list with the following elements:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>data</code> </td><td style="text-align: left;"> A list containing the data used to grow the trees </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>rf</code> </td><td style="text-align: left;"> A table with each tree in column. Provide multiple characteristics about the tree building </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>type</code> </td><td style="text-align: left;"> Outcome type </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>times</code> </td><td style="text-align: left;"> A numeric vector containing the time-to-event for all subjects </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cause</code> </td><td style="text-align: left;"> Indicating the cause of interest </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>causes</code> </td><td style="text-align: left;"> A numeric vector containing the causes indicator </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Inputs</code> </td><td style="text-align: left;"> A list of 3 elements: <code>Longitudinal</code>, <code>Numeric</code> and <code>Factor</code>. Each element contains the names of the predictors </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Longitudinal.model</code> </td><td style="text-align: left;"> A list of longitudinal markers containing the formula used for modeling in the random forest </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>param</code> </td><td style="text-align: left;"> A list containing the hyperparameters </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>oob.err</code> </td><td style="text-align: left;"> A numeric vector containing the OOB error for each subject </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>oob.pred</code> </td><td style="text-align: left;"> Outcome prediction for all subjects </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>IBS.range</code> </td><td style="text-align: left;"> A vector containing the IBS min and max </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Compute OOB error
res_dyn_OOB &lt;- compute_ooberror(dynforest_obj = res_dyn, ncores = 2)

</code></pre>

<hr>
<h2 id='compute_vardepth'>Extract characteristics from the trees building process</h2><span id='topic+compute_vardepth'></span>

<h3>Description</h3>

<p>Extract characteristics from the trees building process
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_vardepth(dynforest_obj)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_vardepth_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>compute_vardepth function return a list with the following elements:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>min_depth</code> </td><td style="text-align: left;"> A table providing for each feature in row: the average depth and the rank </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>var_node_depth</code> </td><td style="text-align: left;"> A table providing for each tree in column the minimal depth for each feature in row. NA indicates that the feature was not used for the corresponding tree </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>var_count</code> </td><td style="text-align: left;"> A table providing for each tree in column the number of times where the feature is used (in row). 0 value indicates that the feature was not used for the corresponding tree </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Run compute_vardepth function
res_varDepth &lt;- compute_vardepth(res_dyn)

</code></pre>

<hr>
<h2 id='compute_vimp'>Compute the importance of variables (VIMP) statistic</h2><span id='topic+compute_vimp'></span>

<h3>Description</h3>

<p>Compute the importance of variables (VIMP) statistic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_vimp(
  dynforest_obj,
  IBS.min = 0,
  IBS.max = NULL,
  ncores = NULL,
  seed = 1234
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_vimp_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
<tr><td><code id="compute_vimp_+3A_ibs.min">IBS.min</code></td>
<td>
<p>(Only with survival outcome) Minimal time to compute the Integrated Brier Score. Default value is set to 0.</p>
</td></tr>
<tr><td><code id="compute_vimp_+3A_ibs.max">IBS.max</code></td>
<td>
<p>(Only with survival outcome) Maximal time to compute the Integrated Brier Score. Default value is set to the maximal time-to-event found.</p>
</td></tr>
<tr><td><code id="compute_vimp_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores used to grow trees in parallel. Default value is the number of cores of the computer-1.</p>
</td></tr>
<tr><td><code id="compute_vimp_+3A_seed">seed</code></td>
<td>
<p>Seed to replicate results</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>compute_vimp()</code> function returns a list with the following elements:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>Inputs</code> </td><td style="text-align: left;"> A list of 3 elements: <code>Longitudinal</code>, <code>Numeric</code> and <code>Factor</code>. Each element contains the names of the predictors </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Importance</code> </td><td style="text-align: left;"> A list of 3 elements: <code>Longitudinal</code>, <code>Numeric</code> and <code>Factor</code>. Each element contains a numeric vector of VIMP statistic predictor in <code>Inputs</code> value </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>tree_oob_err</code> </td><td style="text-align: left;"> A numeric vector containing the OOB error for each tree needed to compute the VIMP statistic </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>IBS.range</code> </td><td style="text-align: left;"> A vector containing the IBS min and max </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Compute VIMP statistic
res_dyn_VIMP &lt;- compute_vimp(dynforest_obj = res_dyn, ncores = 2, seed = 1234)


</code></pre>

<hr>
<h2 id='data_simu1'>data_simu1 dataset</h2><span id='topic+data_simu1'></span>

<h3>Description</h3>

<p>Simulated dataset 1 with continuous outcome
</p>


<h3>Format</h3>

<p>Longitudinal dataset with 1200 rows and 13 columns for 200 subjects
</p>

<dl>
<dt>id</dt><dd><p>Subject identifier</p>
</dd>
<dt>time</dt><dd><p>Time measurement</p>
</dd>
<dt>cont_covar1</dt><dd><p>Continuous time-fixed predictor 1</p>
</dd>
<dt>cont_covar2</dt><dd><p>Continuous time-fixed predictor 2</p>
</dd>
<dt>bin_covar1</dt><dd><p>Binary time-fixed predictor 1</p>
</dd>
<dt>bin_covar2</dt><dd><p>Binary time-fixed predictor 2</p>
</dd>
<dt>marker1</dt><dd><p>Continuous time-dependent predictor 1</p>
</dd>
<dt>marker2</dt><dd><p>Continuous time-dependent predictor 2</p>
</dd>
<dt>marker3</dt><dd><p>Continuous time-dependent predictor 3</p>
</dd>
<dt>marker4</dt><dd><p>Continuous time-dependent predictor 4</p>
</dd>
<dt>marker5</dt><dd><p>Continuous time-dependent predictor 5</p>
</dd>
<dt>marker6</dt><dd><p>Continuous time-dependent predictor 6</p>
</dd>
<dt>Y_res</dt><dd><p>Continuous outcome</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(data_simu1)
</code></pre>

<hr>
<h2 id='data_simu2'>data_simu2 dataset</h2><span id='topic+data_simu2'></span>

<h3>Description</h3>

<p>Simulated dataset 2 with continuous outcome
</p>


<h3>Format</h3>

<p>Longitudinal dataset with 1200 rows and 13 columns for 200 subjects
</p>

<dl>
<dt>id</dt><dd><p>Subject identifier</p>
</dd>
<dt>time</dt><dd><p>Time measurement</p>
</dd>
<dt>cont_covar1</dt><dd><p>Continuous time-fixed predictor 1</p>
</dd>
<dt>cont_covar2</dt><dd><p>Continuous time-fixed predictor 2</p>
</dd>
<dt>bin_covar1</dt><dd><p>Binary time-fixed predictor 1</p>
</dd>
<dt>bin_covar2</dt><dd><p>Binary time-fixed predictor 2</p>
</dd>
<dt>marker1</dt><dd><p>Continuous time-dependent predictor 1</p>
</dd>
<dt>marker2</dt><dd><p>Continuous time-dependent predictor 2</p>
</dd>
<dt>marker3</dt><dd><p>Continuous time-dependent predictor 3</p>
</dd>
<dt>marker4</dt><dd><p>Continuous time-dependent predictor 4</p>
</dd>
<dt>marker5</dt><dd><p>Continuous time-dependent predictor 5</p>
</dd>
<dt>marker6</dt><dd><p>Continuous time-dependent predictor 6</p>
</dd>
<dt>Y_res</dt><dd><p>Continuous outcome</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(data_simu2)
</code></pre>

<hr>
<h2 id='dynforest'>Random forest with multivariate longitudinal endogenous covariates</h2><span id='topic+dynforest'></span>

<h3>Description</h3>

<p>Build a random forest using multivariate longitudinal endogenous covariates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dynforest(
  timeData = NULL,
  fixedData = NULL,
  idVar = NULL,
  timeVar = NULL,
  timeVarModel = NULL,
  Y = NULL,
  ntree = 200,
  mtry = NULL,
  nodesize = 1,
  minsplit = 2,
  cause = 1,
  nsplit_option = "quantile",
  ncores = NULL,
  seed = 1234,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dynforest_+3A_timedata">timeData</code></td>
<td>
<p>A data.frame containing the id and time measurements variables and the time-dependent predictors.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_fixeddata">fixedData</code></td>
<td>
<p>A data.frame containing the id variable and the time-fixed predictors. Categorical variables should be characterized as factor.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_idvar">idVar</code></td>
<td>
<p>A character indicating the name of variable to identify the subjects</p>
</td></tr>
<tr><td><code id="dynforest_+3A_timevar">timeVar</code></td>
<td>
<p>A character indicating the name of time variable</p>
</td></tr>
<tr><td><code id="dynforest_+3A_timevarmodel">timeVarModel</code></td>
<td>
<p>A list for each time-dependent predictors containing a list of formula for fixed and random part from the mixed model</p>
</td></tr>
<tr><td><code id="dynforest_+3A_y">Y</code></td>
<td>
<p>A list of output which should contain: <code>type</code> defines the nature of the outcome, can be &quot;<code>surv</code>&quot;, &quot;<code>numeric</code>&quot; or &quot;<code>factor</code>&quot;; .</p>
</td></tr>
<tr><td><code id="dynforest_+3A_ntree">ntree</code></td>
<td>
<p>Number of trees to grow. Default value set to 200.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_mtry">mtry</code></td>
<td>
<p>Number of candidate variables randomly drawn at each node of the trees. This parameter should be tuned by minimizing the OOB error. Default is defined as the square root of the number of predictors.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_nodesize">nodesize</code></td>
<td>
<p>Minimal number of subjects required in both child nodes to split. Cannot be smaller than 1.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_minsplit">minsplit</code></td>
<td>
<p>(Only with survival outcome) Minimal number of events required to split the node. Cannot be smaller than 2.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_cause">cause</code></td>
<td>
<p>(Only with competing events) Number indicates the event of interest.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_nsplit_option">nsplit_option</code></td>
<td>
<p>A character indicates how the values are chosen to build the two groups for the splitting rule (only for continuous predictors). Values are chosen using deciles (<code>nsplit_option</code>=&quot;quantile&quot;) or randomly (<code>nsplit_option</code>=&quot;sample&quot;). Default value is &quot;quantile&quot;.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores used to grow trees in parallel. Default value is the number of cores of the computer-1.</p>
</td></tr>
<tr><td><code id="dynforest_+3A_seed">seed</code></td>
<td>
<p>Seed to replicate results</p>
</td></tr>
<tr><td><code id="dynforest_+3A_verbose">verbose</code></td>
<td>
<p>A logical controlling the function progress. Default is <code>TRUE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function currently supports survival (competing or single event), continuous or categorical outcome.
</p>
<p>FUTUR IMPLEMENTATIONS:
</p>

<ul>
<li><p> Continuous longitudinal outcome
</p>
</li>
<li><p> Functional data analysis
</p>
</li></ul>



<h3>Value</h3>

<p>dynforest function returns a list with the following elements:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>data</code> </td><td style="text-align: left;"> A list containing the data used to grow the trees </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>rf</code> </td><td style="text-align: left;"> A table with each tree in column. Provide multiple characteristics about the tree building </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>type</code> </td><td style="text-align: left;"> Outcome type </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>times</code> </td><td style="text-align: left;"> A numeric vector containing the time-to-event for all subjects </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cause</code> </td><td style="text-align: left;"> Indicating the cause of interest </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>causes</code> </td><td style="text-align: left;"> A numeric vector containing the causes indicator </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Inputs</code> </td><td style="text-align: left;"> A list of 3 elements: <code>Longitudinal</code>, <code>Numeric</code> and <code>Factor</code>. Each element contains the names of the predictors </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Longitudinal.model</code> </td><td style="text-align: left;"> A list of longitudinal markers containing the formula used for modeling in the random forest </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>param</code> </td><td style="text-align: left;"> A list containing the hyperparameters </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>comput.time</code> </td><td style="text-align: left;"> Computation time </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Anthony Devaux (<a href="mailto:anthony.devauxbarault@gmail.com">anthony.devauxbarault@gmail.com</a>)
</p>


<h3>References</h3>


<ul>
<li><p> Devaux A., Helmer C., Genuer R., Proust-Lima C. (2023). Random survival forests with multivariate longitudinal endogenous covariates. SMMR <a href="doi:10.1177/09622802231206477">doi:10.1177/09622802231206477</a>
</p>
</li>
<li><p> Devaux A., Proust-Lima C., Genuer R. (2023). Random Forests for time-fixed and time-dependent predictors: The DynForest R package. arXiv <a href="doi:10.48550/arXiv.2302.02670">doi:10.48550/arXiv.2302.02670</a>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+summary.dynforest">summary.dynforest()</a></code> <code><a href="#topic+compute_ooberror">compute_ooberror()</a></code> <code><a href="#topic+compute_vimp">compute_vimp()</a></code> <code><a href="#topic+compute_gvimp">compute_gvimp()</a></code> <code><a href="#topic+predict.dynforest">predict.dynforest()</a></code> <code><a href="#topic+plot.dynforest">plot.dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

</code></pre>

<hr>
<h2 id='get_tree'>Extract some information about the split for a tree by user</h2><span id='topic+get_tree'></span>

<h3>Description</h3>

<p>Extract some information about the split for a tree by user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_tree(dynforest_obj, tree)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_tree_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
<tr><td><code id="get_tree_+3A_tree">tree</code></td>
<td>
<p>Integer indicating the tree identifier</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table sorted by the node/leaf identifier with each row representing a node/leaf. Each column provides information about the splits:</p>

<table>
<tr>
 <td style="text-align: left;">
<code>type</code> </td><td style="text-align: left;"> The nature of the predictor (<code>Longitudinal</code> for longitudinal predictor, <code>Numeric</code> for continuous predictor or <code>Factor</code> for categorical predictor) if the node was split, <code>Leaf</code> otherwise </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>var_split</code> </td><td style="text-align: left;"> The predictor used for the split defined by its order in <code>timeData</code> and <code>fixedData</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>feature</code> </td><td style="text-align: left;"> The feature used for the split defined by its position in random statistic </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>threshold</code> </td><td style="text-align: left;"> The threshold used for the split (only with <code>Longitudinal</code> and <code>Numeric</code>). No information is returned for <code>Factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>N</code> </td><td style="text-align: left;"> The number of subjects in the node/leaf </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>Nevent</code> </td><td style="text-align: left;"> The number of events of interest in the node/leaf (only with survival outcome) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>depth</code> </td><td style="text-align: left;"> the depth level of the node/leaf </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Extract split information from tree 4
res_tree4 &lt;- get_tree(dynforest_obj = res_dyn, tree = 4)

</code></pre>

<hr>
<h2 id='get_treenodes'>Extract nodes identifiers for a given tree</h2><span id='topic+get_treenodes'></span>

<h3>Description</h3>

<p>Extract nodes identifiers for a given tree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_treenodes(dynforest_obj, tree = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_treenodes_+3A_dynforest_obj">dynforest_obj</code></td>
<td>
<p>dynforest_obj <code>dynforest</code> object</p>
</td></tr>
<tr><td><code id="get_treenodes_+3A_tree">tree</code></td>
<td>
<p>Integer indicating the tree identifier</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Extract nodes identifiers for a given tree
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Extract nodes identifiers for a given tree
get_treenodes(dynforest_obj = res_dyn, tree = 1)

</code></pre>

<hr>
<h2 id='pbc2'>pbc2 dataset</h2><span id='topic+pbc2'></span>

<h3>Description</h3>

<p>pbc2 data from Mayo clinic
</p>


<h3>Format</h3>

<p>Longitudinal dataset with 1945 rows and 19 columns for 312 patients
</p>

<dl>
<dt>id</dt><dd><p>Patient identifier</p>
</dd>
<dt>time</dt><dd><p>Time measurement</p>
</dd>
<dt>ascites</dt><dd><p>Presence of ascites (Yes/No)</p>
</dd>
<dt>hepatomegaly</dt><dd><p>Presence of hepatomegaly (Yes/No)</p>
</dd>
<dt>spiders</dt><dd><p>Blood vessel malformations in the skin (Yes/No)</p>
</dd>
<dt>edema</dt><dd><p>Edema levels (No edema/edema no diuretics/edema despite diuretics)</p>
</dd>
<dt>serBilir</dt><dd><p>Level of serum bilirubin</p>
</dd>
<dt>serChol</dt><dd><p>Level of serum cholesterol</p>
</dd>
<dt>albumin</dt><dd><p>Level of albumin</p>
</dd>
<dt>alkaline</dt><dd><p>Level of alkaline phosphatase</p>
</dd>
<dt>SGOT</dt><dd><p>Level of aspartate aminotransferase</p>
</dd>
<dt>platelets</dt><dd><p>Platelet count</p>
</dd>
<dt>prothrombin</dt><dd><p>Prothrombin time</p>
</dd>
<dt>histologic</dt><dd><p>Histologic stage of disease</p>
</dd>
<dt>drug</dt><dd><p>Drug treatment (D-penicillmain/Placebo)</p>
</dd>
<dt>age</dt><dd><p>Age at enrollment</p>
</dd>
<dt>sex</dt><dd><p>Sex of patient</p>
</dd>
<dt>years</dt><dd><p>Time-to-event in years</p>
</dd>
<dt>event</dt><dd><p>Event indicator: 0 (alive), 1 (transplanted) and 2 (dead)</p>
</dd>
</dl>



<h3>Source</h3>

<p>pbc2 joineRML
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pbc2)
</code></pre>

<hr>
<h2 id='plot.dynforest'>Plot function in dynforest</h2><span id='topic+plot.dynforest'></span><span id='topic+plot.dynforestvardepth'></span><span id='topic+plot.dynforestvimp'></span><span id='topic+plot.dynforestgvimp'></span><span id='topic+plot.dynforestpred'></span>

<h3>Description</h3>

<p>This function displays a plot of CIF for a given node and tree (for class <code>dynforest</code>), the most predictive variables with the minimal depth (for class <code>dynforestvardepth</code>), the variable importance (for class <code>dynforestvimp</code>) or the grouped variable importance (for class <code>dynforestgvimp</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dynforest'
plot(x, tree = NULL, nodes = NULL, id = NULL, max_tree = NULL, ...)

## S3 method for class 'dynforestvardepth'
plot(x, plot_level = c("predictor", "feature"), ...)

## S3 method for class 'dynforestvimp'
plot(x, PCT = FALSE, ordering = TRUE, ...)

## S3 method for class 'dynforestgvimp'
plot(x, PCT = FALSE, ...)

## S3 method for class 'dynforestpred'
plot(x, id = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.dynforest_+3A_x">x</code></td>
<td>
<p>Object inheriting from classes <code>dynforest</code>, <code>dynforestvardepth</code>, <code>dynforestvimp</code> or <code>dynforestgvimp</code>, to respectively plot the CIF, the minimal depth, the variable importance or grouped variable importance.</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_tree">tree</code></td>
<td>
<p>For <code>dynforest</code> class, integer indicating the tree identifier</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_nodes">nodes</code></td>
<td>
<p>For <code>dynforest</code> class, identifiers for the selected nodes</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_id">id</code></td>
<td>
<p>For <code>dynforest</code> and <code>dynforestpred</code> classes, identifier for a given subject</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_max_tree">max_tree</code></td>
<td>
<p>For <code>dynforest</code> class, integer indicating the number of tree to display while using <code>id</code> argument</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_...">...</code></td>
<td>
<p>Optional parameters to be passed to the low level function</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_plot_level">plot_level</code></td>
<td>
<p>For <code>dynforestvardepth</code> class, compute the statistic at predictor (<code>plot_level</code>=&quot;predictor&quot;) or feature (<code>plot_level</code>=&quot;feature&quot;) level</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_pct">PCT</code></td>
<td>
<p>For <code>dynforestvimp</code> or <code>dynforestgvimp</code> class, display VIMP statistic in percentage. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="plot.dynforest_+3A_ordering">ordering</code></td>
<td>
<p>For <code>dynforestvimp</code> class, order predictors according to VIMP value. Default value is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>plot()</code> function displays: </p>

<table>
<tr>
 <td style="text-align: left;">
With <code>dynforestvardepth</code> </td><td style="text-align: left;"> the minimal depth for each predictor/feature </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
With <code>dynforestvimp</code> </td><td style="text-align: left;"> the VIMP for each predictor </td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
With <code>dynforestgvimp</code> </td><td style="text-align: left;"> the grouped-VIMP for each given group </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code> <code><a href="#topic+compute_ooberror">compute_ooberror()</a></code> <code><a href="#topic+compute_vimp">compute_vimp()</a></code> <code><a href="#topic+compute_gvimp">compute_gvimp()</a></code> <code><a href="#topic+compute_vardepth">compute_vardepth()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Plot estimated CIF at nodes 17 and 32
plot(x = res_dyn, tree = 1, nodes = c(17,32))

# Run var_depth function
res_varDepth &lt;- compute_vardepth(res_dyn)

# Plot minimal depth
plot(x = res_varDepth, plot_level = "feature")

# Compute VIMP statistic
res_dyn_VIMP &lt;- compute_vimp(dynforest_obj = res_dyn, ncores = 2)

# Plot VIMP
plot(x = res_dyn_VIMP, PCT = TRUE)

# Compute gVIMP statistic
res_dyn_gVIMP &lt;- compute_gvimp(dynforest_obj = res_dyn,
                               group = list(group1 = c("serBilir","SGOT"),
                                            group2 = c("albumin","alkaline")),
                               ncores = 2)

# Plot gVIMP
plot(x = res_dyn_gVIMP, PCT = TRUE)

# Sample 5 subjects to predict the event
set.seed(123)
id_pred &lt;- sample(id, 5)

# Create predictors objects
pbc2_pred &lt;- pbc2[which(pbc2$id%in%id_pred),]
timeData_pred &lt;- pbc2_pred[,c("id", "time", "serBilir", "SGOT", "albumin", "alkaline")]
fixedData_pred &lt;- unique(pbc2_pred[,c("id","age","drug","sex")])

# Predict the CIF function for the new subjects with landmark time at 4 years
pred_dyn &lt;- predict(object = res_dyn,
                    timeData = timeData_pred, fixedData = fixedData_pred,
                    idVar = "id", timeVar = "time",
                    t0 = 4)

# Plot predicted CIF for subjects 26 and 110
plot(x = pred_dyn, id = c(26, 110))



</code></pre>

<hr>
<h2 id='predict.dynforest'>Prediction using dynamic random forests</h2><span id='topic+predict.dynforest'></span>

<h3>Description</h3>

<p>Prediction using dynamic random forests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dynforest'
predict(
  object,
  timeData = NULL,
  fixedData = NULL,
  idVar,
  timeVar,
  t0 = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.dynforest_+3A_object">object</code></td>
<td>
<p><code>dynforest</code> object containing the dynamic random forest used on train data</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_timedata">timeData</code></td>
<td>
<p>A data.frame containing the id and time measurements variables and the time-dependent predictors.</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_fixeddata">fixedData</code></td>
<td>
<p>A data.frame containing the id variable and the time-fixed predictors. Non-continuous variables should be characterized as factor.</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_idvar">idVar</code></td>
<td>
<p>A character indicating the name of variable to identify the subjects</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_timevar">timeVar</code></td>
<td>
<p>A character indicating the name of time variable</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_t0">t0</code></td>
<td>
<p>Landmark time</p>
</td></tr>
<tr><td><code id="predict.dynforest_+3A_...">...</code></td>
<td>
<p>Optional parameters to be passed to the low level function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the outcome of interest for the new subjects: matrix of probability of event of interest in survival mode, average value in regression mode and most likely value in classification mode
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Sample 5 subjects to predict the event
set.seed(123)
id_pred &lt;- sample(id, 5)

# Create predictors objects
pbc2_pred &lt;- pbc2[which(pbc2$id%in%id_pred),]
timeData_pred &lt;- pbc2_pred[,c("id", "time", "serBilir", "SGOT", "albumin", "alkaline")]
fixedData_pred &lt;- unique(pbc2_pred[,c("id","age","drug","sex")])

# Predict the CIF function for the new subjects with landmark time at 4 years
pred_dyn &lt;- predict(object = res_dyn,
                    timeData = timeData_pred, fixedData = fixedData_pred,
                    idVar = "id", timeVar = "time",
                    t0 = 4)

</code></pre>

<hr>
<h2 id='print.dynforest'>Print function</h2><span id='topic+print.dynforest'></span><span id='topic+print.dynforestvimp'></span><span id='topic+print.dynforestgvimp'></span><span id='topic+print.dynforestvardepth'></span><span id='topic+print.dynforestoob'></span><span id='topic+print.dynforestpred'></span>

<h3>Description</h3>

<p>This function displays a brief summary regarding the trees (for class <code>dynforest</code>), a data frame with variable importance (for class <code>dynforestvimp</code>) or the grouped variable importance (for class <code>dynforestgvimp</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dynforest'
print(x, ...)

## S3 method for class 'dynforestvimp'
print(x, ...)

## S3 method for class 'dynforestgvimp'
print(x, ...)

## S3 method for class 'dynforestvardepth'
print(x, ...)

## S3 method for class 'dynforestoob'
print(x, ...)

## S3 method for class 'dynforestpred'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.dynforest_+3A_x">x</code></td>
<td>
<p>Object inheriting from classes <code>dynforest</code>, <code>dynforestvimp</code> or <code>dynforestgvimp</code>.</p>
</td></tr>
<tr><td><code id="print.dynforest_+3A_...">...</code></td>
<td>
<p>Optional parameters to be passed to the low level function</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code> <code><a href="#topic+compute_ooberror">compute_ooberror()</a></code> <code><a href="#topic+compute_vimp">compute_vimp()</a></code> <code><a href="#topic+compute_gvimp">compute_gvimp()</a></code> <code><a href="#topic+compute_vardepth">compute_vardepth()</a></code> <code><a href="#topic+predict.dynforest">predict.dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Print function
print(res_dyn)

# Compute VIMP statistic
res_dyn_VIMP &lt;- compute_vimp(dynforest_obj = res_dyn, ncores = 2, seed = 1234)

# Print function
print(res_dyn_VIMP)

# Compute gVIMP statistic
res_dyn_gVIMP &lt;- compute_gvimp(dynforest_obj = res_dyn,
                               group = list(group1 = c("serBilir","SGOT"),
                                            group2 = c("albumin","alkaline")),
                               ncores = 2, seed = 1234)

# Print function
print(res_dyn_gVIMP)

# Run var_depth function
res_varDepth &lt;- compute_vardepth(res_dyn)

# Print function
print(res_varDepth)



</code></pre>

<hr>
<h2 id='summary.dynforest'>Display the summary of dynforest</h2><span id='topic+summary.dynforest'></span><span id='topic+summary.dynforestoob'></span>

<h3>Description</h3>

<p>Display the summary of dynforest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dynforest'
summary(object, ...)

## S3 method for class 'dynforestoob'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.dynforest_+3A_object">object</code></td>
<td>
<p><code>dynforest</code> or <code>dynforestOOB</code> object</p>
</td></tr>
<tr><td><code id="summary.dynforest_+3A_...">...</code></td>
<td>
<p>Optional parameters to be passed to the low level function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return some information about the random forest
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dynforest">dynforest()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(pbc2)

# Get Gaussian distribution for longitudinal predictors
pbc2$serBilir &lt;- log(pbc2$serBilir)
pbc2$SGOT &lt;- log(pbc2$SGOT)
pbc2$albumin &lt;- log(pbc2$albumin)
pbc2$alkaline &lt;- log(pbc2$alkaline)

# Sample 100 subjects
set.seed(1234)
id &lt;- unique(pbc2$id)
id_sample &lt;- sample(id, 100)
id_row &lt;- which(pbc2$id%in%id_sample)

pbc2_train &lt;- pbc2[id_row,]

timeData_train &lt;- pbc2_train[,c("id","time",
                                "serBilir","SGOT",
                                "albumin","alkaline")]

# Create object with longitudinal association for each predictor
timeVarModel &lt;- list(serBilir = list(fixed = serBilir ~ time,
                                     random = ~ time),
                     SGOT = list(fixed = SGOT ~ time + I(time^2),
                                 random = ~ time + I(time^2)),
                     albumin = list(fixed = albumin ~ time,
                                    random = ~ time),
                     alkaline = list(fixed = alkaline ~ time,
                                     random = ~ time))

# Build fixed data
fixedData_train &lt;- unique(pbc2_train[,c("id","age","drug","sex")])

# Build outcome data
Y &lt;- list(type = "surv",
          Y = unique(pbc2_train[,c("id","years","event")]))

# Run dynforest function
res_dyn &lt;- dynforest(timeData = timeData_train, fixedData = fixedData_train,
                     timeVar = "time", idVar = "id",
                     timeVarModel = timeVarModel, Y = Y,
                     ntree = 50, nodesize = 5, minsplit = 5,
                     cause = 2, ncores = 2, seed = 1234)

# Compute OOB error
res_dyn_OOB &lt;- compute_ooberror(dynforest_obj = res_dyn, ncores = 2)

# dynforest summary
summary(object = res_dyn_OOB)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
