<!DOCTYPE html><html lang="en"><head><title>Help for package diffeR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {diffeR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#diffeR-package'>
<p>Metrics of Difference for Comparing Pairs of Maps or Pairs of Variables</p></a></li>
<li><a href='#categoryComponentsPlot'>
<p>Category Components plot</p></a></li>
<li><a href='#categorySourcesPlot'>
<p>Category Sources plot</p></a></li>
<li><a href='#composite'>
<p>create a composite matrix</p></a></li>
<li><a href='#crosstabm'>
<p>create a contingency table between a comparison raster map (rows) and a reference raster map (columns)</p></a></li>
<li><a href='#differenceMR'>
<p>calculates difference metrics between a reference map and a comparison map both consecutively aggregated at multiple resolutions</p></a></li>
<li><a href='#diffMetrics'>
<p>Overall difference metrics and difference metrics at the category level or between pairs of categories</p></a></li>
<li><a href='#diffTablej'>
<p>calculates difference metrics at the category level from a square contingency table</p></a></li>
<li><a href='#MAD'>
<p>Mean Absolute Deviation (MAD)</p></a></li>
<li><a href='#MADscatterplot'>
<p>MAD scatterplot</p></a></li>
<li><a href='#memberships'>
<p>produces membership values for each category in the input raster at a specified aggregated resolution</p></a></li>
<li><a href='#overallComponentsPlot'>
<p>Overall Components plot</p></a></li>
<li><a href='#overallSourcesPlot'>
<p>Overall Sources plot</p></a></li>
<li><a href='#sample2pop'>
<p>corrects sample counts to population counts in a square contingency table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Metrics of Difference for Comparing Pairs of Maps or Pairs of
Variables</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0-8</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-21</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert Gilmore Pontius Jr. &lt;rpontius@clarku.edu&gt;, Ali Santacruz &lt;amsantac@unal.edu.co&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ali Santacruz &lt;amsantac@unal.edu.co&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.0), terra, methods, ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, grDevices, tidyr, tidyselect, rlang, raster</td>
</tr>
<tr>
<td>Description:</td>
<td>Metrics of difference for comparing pairs of variables or pairs of maps representing real or categorical variables at original and multiple resolutions.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/amsantac/diffeR/issues">https://github.com/amsantac/diffeR/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/amsantac/diffeR">https://github.com/amsantac/diffeR</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-20 21:19:47 UTC; spaziu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-22 03:10:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='diffeR-package'>
Metrics of Difference for Comparing Pairs of Maps or Pairs of Variables
</h2><span id='topic+diffeR'></span><span id='topic+diffeR-package'></span>

<h3>Description</h3>

<p>Metrics of difference for comparing pairs of variables or pairs of maps representing real or categorical variables at original and multiple resolutions.</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> diffeR</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.0-8</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-08-21</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
BugReports: </td><td style="text-align: left;"> https://github.com/amsantac/diffeR/issues</td>
</tr>
<tr>
 <td style="text-align: left;"> 
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Robert Gilmore Pontius Jr. &lt;rpontius@clarku.edu&gt;, Ali Santacruz &lt;amsantac@unal.edu.co&gt;
</p>
<p>Maintainer: Ali Santacruz &lt;amsantac@unal.edu.co&gt;
</p>

<hr>
<h2 id='categoryComponentsPlot'>
Category Components plot 
</h2><span id='topic+categoryComponentsPlot'></span>

<h3>Description</h3>

<p>If comparison and reference (raster) maps are provided, this function creates the Category Components plot from the comparison between the comparison map (or map at time <em>t</em>) and the reference map (or map at time <em>t</em>+1). If a square contingency table (matrix) is provided instead of raster maps, then this function creates the Category Components plot from the comparison between the comparison variable (or variable at time <em>t</em>) and the reference variable (or variable at time <em>t</em>+1). 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>categoryComponentsPlot(comp = NULL, ref = NULL, ctmatrix = NULL, 
                       units = NULL, population = NULL, 
                       fontSize = NULL, breaks = waiver(), 
                       labels = waiver(), limits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="categoryComponentsPlot_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to a comparison map (or map at time <em>t</em>). See Details below
</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to a reference map (or map at time <em>t</em>+1). See Details below
</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable or variable at time <em>t</em> (rows) and a reference variable or variable at time <em>t</em>+1 (columns). See Details below
</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_units">units</code></td>
<td>

<p>optional; character string indicating units of <code>ctmatrix</code>
</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_population">population</code></td>
<td>

<p>optional; an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_fontsize">fontSize</code></td>
<td>

<p>text size (in pts)</p>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_breaks">breaks</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks computed by the
transformation object
</p>
</li>
<li><p> A numeric vector of positions
</p>
</li>
<li><p> A function that takes the limits as input and returns breaks
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_labels">labels</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="categoryComponentsPlot_+3A_limits">limits</code></td>
<td>

<p>A numeric vector of length two providing limits of the scale.
Use <code>NA</code> to refer to the existing minimum or maximum.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users may enter as input either a square contingency table (<code>ctmatrix</code>) or a comparison and a reference raster maps (<code>comp</code> and <code>ref</code>, respectively).
</p>
<p>The first column of <code>population</code> must contain integer identifiers of each category, corresponding to the categories in the comparison and reference variables. The second column corresponds to the population totals for each category.  
</p>


<h3>Value</h3>

<p>a stacked barplot showing for each category the quantity, exchange and shift components of difference between the comparison map/variable (or map/variable at time <em>t</em>) and the reference map/variable (or map/variable at time <em>t</em>+1)
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffTablej">diffTablej</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
categoryComponentsPlot(comp, ref)

ctmat &lt;- crosstabm(comp, ref)
categoryComponentsPlot(ctmatrix = ctmat, units = "pixels")
</code></pre>

<hr>
<h2 id='categorySourcesPlot'>
Category Sources plot 
</h2><span id='topic+categorySourcesPlot'></span>

<h3>Description</h3>

<p>If comparison and reference (raster) maps are provided, this function creates the Category Sources plot from the comparison between the comparison map (or map at time <em>t</em>) and the reference map (or map at time <em>t</em>+1). If a square contingency table (matrix) is provided instead of raster maps, then this function creates the Category Sources plot from the comparison between the comparison variable (or variable at time <em>t</em>) and the reference variable (or variable at time <em>t</em>+1). 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>categorySourcesPlot(comp = NULL, ref = NULL, ctmatrix = NULL, 
                    analysis = "error", units = NULL, 
                    population = NULL, fontSize = NULL, 
                    breaks = waiver(), labels = waiver(), 
                    limits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="categorySourcesPlot_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to a comparison map (or map at time <em>t</em>). See Details below
</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to a reference map (or map at time <em>t</em>+1). See Details below
</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable or variable at time <em>t</em> (rows) and a reference variable or variable at time <em>t</em>+1 (columns). See Details below
</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_analysis">analysis</code></td>
<td>

<p>character string indicating type of analysis, either &quot;error&quot; (default) or &quot;change&quot;
</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_units">units</code></td>
<td>

<p>optional; character string indicating units of <code>ctmatrix</code>
</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_population">population</code></td>
<td>

<p>optional; an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_fontsize">fontSize</code></td>
<td>

<p>text size (in pts)</p>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_breaks">breaks</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks computed by the
transformation object
</p>
</li>
<li><p> A numeric vector of positions
</p>
</li>
<li><p> A function that takes the limits as input and returns breaks
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_labels">labels</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="categorySourcesPlot_+3A_limits">limits</code></td>
<td>

<p>A numeric vector of length two providing limits of the scale.
Use <code>NA</code> to refer to the existing minimum or maximum.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users may enter as input either a square contingency table (<code>ctmatrix</code>) or a comparison and a reference raster maps (<code>comp</code> and <code>ref</code>, respectively).
</p>
<p>The first column of <code>population</code> must contain integer identifiers of each category, corresponding to the categories in the comparison and reference variables. The second column corresponds to the population totals for each category.  
</p>


<h3>Value</h3>

<p>a stacked barplot showing for each category the agreement and the omission and comission components of difference between the comparison map/variable (or map/variable at time <em>t</em>) and the reference map/variable (or map/variable at time <em>t</em>+1)
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
categorySourcesPlot(comp, ref)

ctmat &lt;- crosstabm(comp, ref)
categorySourcesPlot(ctmatrix = ctmat, units = "Pixels")
</code></pre>

<hr>
<h2 id='composite'>
create a composite matrix 
</h2><span id='topic+composite'></span>

<h3>Description</h3>

<p>provide a method to create a composite matrix from the crosstabulation of a comparison map (or map at time <em>t</em>) and a reference map (or map at time <em>t</em>+1), both aggregated at a given factor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>composite(comp, ref, factor)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="composite_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to a comparison map (or map at time <em>t</em>)
</p>
</td></tr>
<tr><td><code id="composite_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to a reference map (or map at time <em>t</em>+1)
</p>
</td></tr>
<tr><td><code id="composite_+3A_factor">factor</code></td>
<td>

<p>integer. Aggregation factor expressed as number of cells in each direction (horizontally and vertically). Or two integers (horizontal and vertical aggregation factor). See <code>aggregate()</code> in the <code>terra</code> package for details
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>the pixel definition in a composite matrix interpretes class membership as the proportion of a pixel that belongs to a class. The pixel contains information about only the quantity of each category (Kuzera and Pontius 2008).
</p>


<h3>Value</h3>

<p>a matrix showing the contingency table derived from the crosstabulation of a comparison map (or map at time <em>t</em>) and a reference map (or map at time <em>t</em>+1), both aggregated at a given factor. Output values are given as proportion (0 to 1)
</p>


<h3>References</h3>

<p>Kuzera, K., Pontius Jr., R.G. 2008. <em>Importance of matrix construction for multiple-resolution categorical map comparison</em>. GIScience &amp; Remote Sensing 45 (3), 249-274.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+memberships">memberships</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
composite(comp, ref, factor = 2)
</code></pre>

<hr>
<h2 id='crosstabm'>
create a contingency table between a comparison raster map (rows) and a reference raster map (columns)
</h2><span id='topic+crosstabm'></span>

<h3>Description</h3>

<p>create a contingency table, also called cross-tabulated matrix, between a comparison raster map (rows), or map at time <em>t</em>, and a reference raster map (columns), or map at time <em>t</em>+1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstabm(comp, ref, percent = FALSE, population = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="crosstabm_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to the comparison map, or map at time <em>t</em>
</p>
</td></tr>
<tr><td><code id="crosstabm_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to the reference map, or map at time <em>t</em>+1
</p>
</td></tr>
<tr><td><code id="crosstabm_+3A_percent">percent</code></td>
<td>

<p>logical. If TRUE, output values are given as percentage. If FALSE, output values are given in pixel counts
</p>
</td></tr>
<tr><td><code id="crosstabm_+3A_population">population</code></td>
<td>

<p>an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For correcting the sample count to population count in the square contingency table, assuming a stratified random sampling, an <em>n</em> (number of categories) by 2 matrix can be provided in the <code>population</code> argument. The first column of <code>population</code> must contains integer identifiers of each category, corresponding to the categories in the comparison map (or map at time <em>t</em>) and reference map (or map at time <em>t</em>+1). The second column corresponds to the population totals for each map category  
</p>


<h3>Value</h3>

<p>a matrix showing the cross-tabulation between the comparison map (or map at time <em>t</em>) and the reference map (or map at time <em>t</em>+1)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+memberships">memberships</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
crosstabm(comp, ref)

# Population-adjusted square contingency table
(population &lt;- matrix(c(1, 2, 3, 2000, 4000, 6000), ncol = 2))
crosstabm(comp, ref, population = population)

# Population-adjusted square contingency table, output as percentage
crosstabm(comp, ref, percent = TRUE, population = population)
</code></pre>

<hr>
<h2 id='differenceMR'>
calculates difference metrics between a reference map and a comparison map both consecutively aggregated at multiple resolutions
</h2><span id='topic+differenceMR'></span>

<h3>Description</h3>

<p>calculates quantity, exchange and shift components of difference, as well as the overall difference, between a comparison raster map (or map at time <em>t</em>), and a reference raster map (or map at time <em>t</em>+1), both consecutively aggregated at multiple resolutions.  
</p>
<p>Quantity difference is defined as the amount of difference between the reference map and a comparison map that is due to the less than maximum match in the proportions of the categories. Exchange consists of a transition from category <em>i</em> to category <em>j</em> in some pixels and a transition from category <em>j</em> to category <em>i</em> in an identical number of other pixels. Shift refers to the difference remaining after subtracting quantity difference and exchange from the overall difference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>differenceMR(comp, ref, eval = "multiple", percent = TRUE, fact = 2, 
             population = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="differenceMR_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to the comparison map, or map at time <em>t</em>
</p>
</td></tr>
<tr><td><code id="differenceMR_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to the reference map, or map at time <em>t</em>+1
</p>
</td></tr>
<tr><td><code id="differenceMR_+3A_eval">eval</code></td>
<td>

<p>default &quot;original&quot;, return difference metrics between the input raster maps at the original resolution; if &quot;multiple&quot;, return difference metrics at multiple resolutions aggregated according to a geometric sequence 
</p>
</td></tr>
<tr><td><code id="differenceMR_+3A_percent">percent</code></td>
<td>

<p>logical. If TRUE, output value is given as percentage. If FALSE, output value is given as proportion (0 to 1)
</p>
</td></tr>
<tr><td><code id="differenceMR_+3A_fact">fact</code></td>
<td>

<p>positive integer. Aggregation factor expressed as number of cells in each direction (horizontally and vertically). Or two integers (horizontal and vertical aggregation factor). See <code>aggregate()</code> in the <code>terra</code> package for details
</p>
</td></tr>
<tr><td><code id="differenceMR_+3A_population">population</code></td>
<td>

<p>an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For correcting the sample count to population count in the square contingency table, assuming a stratified random sampling, an <em>n</em> (number of categories) by 2 matrix can be provided in the <code>population</code> argument. The first column of <code>population</code> must contains integer identifiers of each category, corresponding to the categories in the comparison map (or map at time <em>t</em>) and reference map (or map at time <em>t</em>+1). The second column corresponds to the population totals for each map category  
</p>


<h3>Value</h3>

<p>data.frame containing quantity, exchange and shift components of difference, as well as the overall difference, between the comparison map and the reference map at multiple resolutions
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>
<p>Pontius Jr., R.G., Santacruz, A. 2014. <em>Quantity, exchange and shift components of difference in a square contingency table</em>. International Journal of Remote Sensing 35 (21), 7543-7554.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
differenceMR(comp, ref, eval = "original")
differenceMR(comp, ref, eval = "multiple", fact = 2)

## End(Not run)
</code></pre>

<hr>
<h2 id='diffMetrics'>
Overall difference metrics and difference metrics at the category level or between pairs of categories
</h2><span id='topic+differenceMetrics'></span><span id='topic+exchangeDij'></span><span id='topic+exchangeDj'></span><span id='topic+overallAllocD'></span><span id='topic+overallDiff'></span><span id='topic+overallDiffCatj'></span><span id='topic+overallExchangeD'></span><span id='topic+overallQtyD'></span><span id='topic+overallShiftD'></span><span id='topic+quantityDj'></span><span id='topic+shiftDj'></span><span id='topic+omissionj'></span><span id='topic+comissionj'></span><span id='topic+agreementj'></span>

<h3>Description</h3>

<p>Overall difference metrics (overallAllocD, overallDiff, overallDiffCatj, overallExchangeD, overallQtyD, overallShiftD) and difference metrics at the category level (exchangeDj, quantityDj, shiftDj, omissionj, commisionj, agreementj) or between pairs of categories (exchangeDij) calculated using a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1) 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exchangeDij(ctmatrix)
exchangeDj(ctmatrix)
overallAllocD(ctmatrix)
overallDiff(ctmatrix)
overallDiffCatj(ctmatrix)
overallExchangeD(ctmatrix)
overallQtyD(ctmatrix)
overallShiftD(ctmatrix)
quantityDj(ctmatrix)
shiftDj(ctmatrix)
omissionj(ctmatrix)
comissionj(ctmatrix)
agreementj(ctmatrix)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diffMetrics_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable (rows) and a reference variable (columns)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exchangeDij</code> calculates the exchange matrix between pairs of categories from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Exchange consists of a transition from category <em>i</em> to category <em>j</em> in some observations and a transition from category <em>j</em> to category <em>i</em> in an identical number of other observations. 
</p>
<p><code>exchangeDj</code> calculates exchange difference at the category level from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Exchange consists of a transition from category <em>i</em> to category <em>j</em> in some observations and a transition from category <em>j</em> to category <em>i</em> in an identical number of other observations.
</p>
<p><code>overallAllocD</code> calculates overall allocation difference from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Allocation difference is defined as the amount of difference between a reference variable and a comparison variable that is due to the less than maximum match in the spatial allocation of the categories, given the proportions of the categories in the reference and comparison variables. Allocation difference is equivalent to the addition of the exchange and shift components of difference (i.e., allocation difference can be disaggregated into exchange and shift components).
</p>
<p><code>overallDiff</code> calculates overall difference from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Overall difference is equivalent to the addition of the quantity and allocation components of difference (i.e., overall difference can be disaggregated into quantity and allocation components).
</p>
<p><code>overallDiffCatj</code> calculates overall difference at the category level from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Overall difference is equivalent to the addition of the quantity and allocation components of difference (i.e., overall difference can be disaggregated into quantity and allocation components).
</p>
<p><code>overallExchangeD</code> calculates overall exchange difference from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1).
Exchange consists of a transition from category <em>i</em> to category <em>j</em> in some observations and a transition from category <em>j</em> to category <em>i</em> in an identical number of other observations.
</p>
<p><code>overallQtyD</code> calculates overall quantity difference from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Quantity difference is defined as the amount of difference between the reference variable and a comparison variable that is due to the less than maximum match in the proportions of the categories.
</p>
<p><code>overallShiftD</code> calculates overall shift difference from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Shift refers to the difference remaining after subtracting quantity difference and exchange from the overall difference.
</p>
<p><code>quantityDj</code> calculates quantity difference at the category level from a square contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Quantity difference is defined as the amount of difference between the reference variable and a comparison variable that is due to the less than maximum match in the proportions of the categories.
</p>
<p><code>shiftDj</code> calculates shift difference at the category level from a contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Shift refers to the difference remaining after subtracting quantity difference and exchange from the overall difference.
</p>
<p><code>omissionj</code> calculates omission error at the category level from a contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Omission error refers to observations in the reference variable that were classified in a category other than their true or known category, in other words, observations of a known category that were excluded from that category due to misclassification. 
</p>
<p><code>comissionj</code> calculates comission error at the category level from a contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). Commission error refers to observations that were incorrectly classified and do not belong in the category in which they were assigned according to the classification. 
</p>
<p><code>agreementj</code> calculates agreement at the category level from a contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1). 
</p>


<h3>Value</h3>

<p><code>exchangeDij</code> returns a matrix containing exchange occurring between pairs of categories from the comparison variable and the reference variable. Exchange is shown in the lower triangle of the output matrix. 
</p>
<p><code>exchangeDj</code> returns a numeric vector containing the exchange difference between the comparison variable and the reference variable at the category level.
</p>
<p><code>overallAllocD</code> returns the overall allocation difference between the comparison variable and the reference variable. 
</p>
<p><code>overallDiff</code> returns the overall difference between the comparison variable and the reference variable.
</p>
<p><code>overallDiffCatj</code> returns a numeric vector containing overall difference between the comparison variable and the reference variable at the category level. 
</p>
<p><code>overallExchangeD</code> returns the overall exchange difference between the comparison variable and the reference variable.
</p>
<p><code>overallQtyD</code> returns the overall quantity difference between the comparison variable and the reference variable. 
</p>
<p><code>overallShiftD</code> returns the overall shift difference between the comparison variable and the reference variable.
</p>
<p><code>quantityDj</code> returns a numeric vector containing the quantity difference between the comparison variable and the reference variable at the category level. 
</p>
<p><code>shiftDj</code> returns a numeric vector containing the shift difference between the comparison variable and the reference variable at the category level.
</p>
<p><code>omissionj</code> returns a numeric vector containing the omission disagreement between the comparison variable and the reference variable at the category level.
</p>
<p><code>comissionj</code> returns a numeric vector containing the comission disagreement between the comparison variable and the reference variable at the category level.
</p>
<p><code>agreementj</code> returns a numeric vector containing the agreement between the comparison variable and the reference variable at the category level.
</p>
<p>For all the functions above, the output values are given in the same units as <code>ctmatrix</code>.
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>
<p>Pontius Jr., R.G., Santacruz, A. 2014. <em>Quantity, exchange and shift components of difference in a square contingency table</em>. International Journal of Remote Sensing 35 (21), 7543-7554.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffTablej">diffTablej</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
ctmatCompRef &lt;- crosstabm(comp, ref)

exchangeDij(ctmatCompRef)
exchangeDj(ctmatCompRef)
overallAllocD(ctmatCompRef)
overallDiff(ctmatCompRef)
overallDiffCatj(ctmatCompRef)
overallExchangeD(ctmatCompRef)
overallQtyD(ctmatCompRef)
overallShiftD(ctmatCompRef)
quantityDj(ctmatCompRef)
shiftDj(ctmatCompRef)
omissionj(ctmatCompRef)
comissionj(ctmatCompRef)
agreementj(ctmatCompRef)
</code></pre>

<hr>
<h2 id='diffTablej'>
calculates difference metrics at the category level from a square contingency table
</h2><span id='topic+diffTablej'></span>

<h3>Description</h3>

<p>calculates quantity, exchange and shift components of difference, as well as the overall difference, at the category level from a contingency table derived from the crosstabulation between a comparison variable (or variable at time <em>t</em>), and a reference variable (or variable at time <em>t</em>+1).  
</p>
<p>Quantity difference is defined as the amount of difference between the reference variable and a comparison variable that is due to the less than maximum match in the proportions of the categories. Exchange consists of a transition from category <em>i</em> to category <em>j</em> in some observations and a transition from category <em>j</em> to category <em>i</em> in an identical number of other observations. Shift refers to the difference remaining after subtracting quantity difference and exchange from the overall difference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffTablej(ctmatrix, digits = 0, analysis = "error")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diffTablej_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable (rows) and a reference variable (columns)
</p>
</td></tr>
<tr><td><code id="diffTablej_+3A_digits">digits</code></td>
<td>
	
<p>integer indicating the number of decimal places to be used
</p>
</td></tr>
<tr><td><code id="diffTablej_+3A_analysis">analysis</code></td>
<td>
	
<p>character string either &quot;error&quot; (default) or &quot;change&quot;. The output table shows category-level omission error, agreement and comission error in the &quot;error&quot; analysis, and category-level gain, persistence and loss in the &quot;change&quot; analysis
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame containing difference metrics at the category level between a comparison variable (rows) and a reference variable (columns). Output values are given in the same units as <code>ctmatrix</code>
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>
<p>Pontius Jr., R.G., Santacruz, A. 2014. <em>Quantity, exchange and shift components of difference in a square contingency table</em>. International Journal of Remote Sensing 35 (21), 7543-7554.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
ctmatCompRef &lt;- crosstabm(comp, ref)
diffTablej(ctmatCompRef)

# Adjustment to population assuming a stratified random sampling
(population &lt;- matrix(c(1, 2, 3, 2000, 4000, 6000), ncol = 2))
ctmatCompRef &lt;- crosstabm(comp, ref, percent = TRUE, population = population)
diffTablej(ctmatCompRef)
</code></pre>

<hr>
<h2 id='MAD'>
Mean Absolute Deviation (MAD) 
</h2><span id='topic+MAD'></span>

<h3>Description</h3>

<p>Provides a method to compare the quantity difference and allocation difference between two images of the same real variable at the original resolution or at multiple resolutions.  
The output provides a stacked graph and an accompanying numerical table for the Mean Absolute Deviation (MAD) for the difference due to quantity, the difference due to stratum-level allocation, and difference due to pixel-level allocation.  The output also indicates which image has a smaller average.  A scatterplot indicating the distribution of values in relation to the 1:1 line can be produced with <code><a href="#topic+MADscatterplot">MADscatterplot</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MAD(grid1, grid2, strata = NULL, eval = "original")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MAD_+3A_grid1">grid1</code></td>
<td>

<p>object of class SpatRaster corresponding to the first image
</p>
</td></tr>
<tr><td><code id="MAD_+3A_grid2">grid2</code></td>
<td>

<p>object of class SpatRaster corresponding to the second image
</p>
</td></tr>
<tr><td><code id="MAD_+3A_strata">strata</code></td>
<td>

<p>object of class SpatRaster corresponding to the mask or strata image. Zero values are taken as no data (i.e., NA)
</p>
</td></tr>
<tr><td><code id="MAD_+3A_eval">eval</code></td>
<td>

<p>default &quot;original&quot;, return the MAD value for the original resolution; if &quot;multiple&quot;, return the MAD values for multiple resolutions following a geometric sequence 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe containing the multiples of the original resolution, the corresponding aggregated resolution, the difference due to quantity, the difference due to stratum-level allocation, and the difference due to pixel-level allocation.
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Thontteh, O., Chen, H. 2008. <em>Components of information for multiple resolution comparison between maps that share a real variable</em>. Environmental and Ecological Statistics 15 (2), 111-142. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MADscatterplot">MADscatterplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>old.par &lt;- par(no.readonly = TRUE)
grid1 &lt;- rast(system.file("external/GRID1_INT.rst", package = "diffeR"))
grid2 &lt;- rast(system.file("external/GRID2_INT.rst", package = "diffeR"))
strata &lt;- rast(system.file("external/strata_int.rst", package = "diffeR"))
MAD(grid1, grid2, strata, eval = "original")
MAD(grid1, grid2, strata, eval = "multiple")

## Not run: 
veg_obs1 &lt;- rast(system.file("external/veg_obs1.rst", package = "diffeR")) 
veg_pre1 &lt;- rast(system.file("external/veg_pre1.rst", package = "diffeR")) 
veg_mask1 &lt;- rast(system.file("external/veg_mask1.rst", package = "diffeR")) 
MADscatterplot(veg_obs1, veg_pre1, veg_mask1) 
MAD(veg_obs1, veg_pre1, veg_mask1, eval = "multiple") 

## End(Not run)
par(old.par)
</code></pre>

<hr>
<h2 id='MADscatterplot'>
MAD scatterplot
</h2><span id='topic+MADscatterplot'></span>

<h3>Description</h3>

<p>Generates a scatterplot indicating the distribution of values from two images in relation to the 1:1 line
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MADscatterplot(grid1, grid2, strata = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MADscatterplot_+3A_grid1">grid1</code></td>
<td>

<p>object of class SpatRaster corresponding to the first image 
</p>
</td></tr>
<tr><td><code id="MADscatterplot_+3A_grid2">grid2</code></td>
<td>

<p>object of class SpatRaster corresponding to the second image 
</p>
</td></tr>
<tr><td><code id="MADscatterplot_+3A_strata">strata</code></td>
<td>

<p>object of class SpatRaster corresponding to the mask or strata image. Zero values are taken as no data (i.e., NA) 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object corresponding to the scatterplot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MAD">MAD</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>old.par &lt;- par(no.readonly = TRUE)
grid1 &lt;- rast(system.file("external/GRID1_INT.rst", package = "diffeR"))
grid2 &lt;- rast(system.file("external/GRID2_INT.rst", package = "diffeR"))
strata &lt;- rast(system.file("external/strata_int.rst", package = "diffeR"))
MADscatterplot(grid1, grid2, strata)

veg_obs1 &lt;- rast(system.file("external/veg_obs1.rst", package = "diffeR")) 
veg_pre1 &lt;- rast(system.file("external/veg_pre1.rst", package = "diffeR"))
veg_mask1 &lt;- rast(system.file("external/veg_mask1.rst", package = "diffeR")) 
MADscatterplot(veg_obs1, veg_pre1, veg_mask1) 
par(old.par)
</code></pre>

<hr>
<h2 id='memberships'>
produces membership values for each category in the input raster at a specified aggregated resolution 
</h2><span id='topic+memberships'></span>

<h3>Description</h3>

<p>Calculates membership values for each category in the input raster at a specified aggregated resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>memberships(grid, fact = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="memberships_+3A_grid">grid</code></td>
<td>

<p>object of class SpatRaster
</p>
</td></tr>
<tr><td><code id="memberships_+3A_fact">fact</code></td>
<td>

<p>positive integer. Aggregation factor expressed as number of cells in each direction (horizontally and vertically). Or two integers (horizontal and vertical aggregation factor). See <code>aggregate()</code> in the <code>terra</code> package for details
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a RasterBrick object containing membership values for each category in the input raster at a specified aggregated resolution
</p>


<h3>See Also</h3>

<p><code><a href="#topic+composite">composite</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
plot(ref)
memb.ref &lt;- memberships(ref, fact = 2)
names(memb.ref) &lt;- c("ref.1", "ref.2", "ref.3")
plot(memb.ref)
</code></pre>

<hr>
<h2 id='overallComponentsPlot'>
Overall Components plot 
</h2><span id='topic+overallComponentsPlot'></span>

<h3>Description</h3>

<p>If comparison and reference (raster) maps are provided, this function creates the Overall Components plot from the comparison between the comparison map (or map at time <em>t</em>) and the reference map (or map at time <em>t</em>+1). If a square contingency table (matrix) is provided instead of raster maps, then this function creates the Overall Components plot from the comparison between the comparison variable (or variable at time <em>t</em>) and the reference variable (or variable at time <em>t</em>+1).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overallComponentsPlot(comp = NULL, ref = NULL, ctmatrix = NULL, 
                      units = NULL, population = NULL, 
                      graphics_system = 'ggplot2')
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="overallComponentsPlot_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to a comparison map (or map at time <em>t</em>). See Details below
</p>
</td></tr>
<tr><td><code id="overallComponentsPlot_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to a reference map (or map at time <em>t</em>+1). See Details below
</p>
</td></tr>
<tr><td><code id="overallComponentsPlot_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable (rows) and a reference variable (columns).. See Details below
</p>
</td></tr>
<tr><td><code id="overallComponentsPlot_+3A_units">units</code></td>
<td>

<p>character string indicating units of <code>ctmatrix</code>
</p>
</td></tr>
<tr><td><code id="overallComponentsPlot_+3A_population">population</code></td>
<td>

<p>an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below
</p>
</td></tr>
<tr><td><code id="overallComponentsPlot_+3A_graphics_system">graphics_system</code></td>
<td>

<p>character string indicating the graphics system for creating the plot, either &quot;ggplot2&quot; (default) or &quot;graphics&quot; (for base R graphics system) 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users may enter as input either a square contingency table (<code>ctmatrix</code>) or a comparison and a reference raster maps (<code>comp</code> and <code>ref</code>, respectively).
</p>
<p>The first column of <code>population</code> must contain integer identifiers of each category, corresponding to the categories in the comparison and reference variables. The second column corresponds to the population totals for each category.  
</p>


<h3>Value</h3>

<p>a stacked barplot showing the quantity, exchange and shift components of difference between the comparison map/variable (or map/variable at time <em>t</em>) and the reference map/variable (or map/variable at time <em>t</em>+1)
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
overallComponentsPlot(comp, ref)

ctmat &lt;- crosstabm(comp, ref)
overallComponentsPlot(ctmatrix = ctmat, units = "pixels")
</code></pre>

<hr>
<h2 id='overallSourcesPlot'>
Overall Sources plot 
</h2><span id='topic+overallSourcesPlot'></span>

<h3>Description</h3>

<p>If comparison and reference (raster) maps are provided, this function creates the Overall Sources plot from the comparison between the comparison map (or map at time <em>t</em>) and the reference map (or map at time <em>t</em>+1). If a square contingency table (matrix) is provided instead of raster maps, then this function creates the Overall Sources plot from the comparison between the comparison variable (or variable at time <em>t</em>) and the reference variable (or variable at time <em>t</em>+1).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overallSourcesPlot(comp = NULL, ref = NULL, ctmatrix = NULL, 
                   analysis = "error", units = NULL, 
                   population = NULL, fontSize = NULL, 
                   colorValues = NULL, breaks = waiver(), 
                   labels = waiver(), limits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="overallSourcesPlot_+3A_comp">comp</code></td>
<td>

<p>object of class SpatRaster corresponding to a comparison map (or map at time <em>t</em>). See Details below
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_ref">ref</code></td>
<td>

<p>object of class SpatRaster corresponding to a reference map (or map at time <em>t</em>+1). See Details below
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a square contingency table between a comparison variable (rows) and a reference variable (columns). See Details below
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_analysis">analysis</code></td>
<td>

<p>character string indicating type of analysis, either &quot;error&quot; (default) or &quot;change&quot;
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_units">units</code></td>
<td>

<p>character string indicating units of <code>ctmatrix</code>
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_population">population</code></td>
<td>

<p>an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_fontsize">fontSize</code></td>
<td>

<p>text size (in pts)
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_colorvalues">colorValues</code></td>
<td>

<p>a set of aesthetic values to map data values to. If this is a named vector, then the values will be matched based on the names. If unnamed, values will be matched in order (usually alphabetical) with the limits of the scale. Any data values that don't match will be given <code>na.value</code>.
</p>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_breaks">breaks</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks computed by the
transformation object
</p>
</li>
<li><p> A numeric vector of positions
</p>
</li>
<li><p> A function that takes the limits as input and returns breaks
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_labels">labels</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li><p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li><p> A function that takes the breaks as input and returns labels
as output
</p>
</li></ul>
</td></tr>
<tr><td><code id="overallSourcesPlot_+3A_limits">limits</code></td>
<td>

<p>A numeric vector of length two providing limits of the scale.
Use <code>NA</code> to refer to the existing minimum or maximum.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users may enter as input either a square contingency table (<code>ctmatrix</code>) or a comparison and a reference raster maps (<code>comp</code> and <code>ref</code>, respectively).
</p>
<p>The first column of <code>population</code> must contain integer identifiers of each category, corresponding to the categories in the comparison and reference variables. The second column corresponds to the population totals for each category.  
</p>


<h3>Value</h3>

<p>a stacked barplot showing the omission and comission components of difference between the comparison map/variable (or map/variable at time <em>t</em>) and the reference map/variable (or map/variable at time <em>t</em>+1)
</p>


<h3>References</h3>

<p>Pontius Jr., R.G., Millones, M. 2011. <em>Death to Kappa: birth of quantity disagreement and allocation disagreement for accuracy assessment</em>. International Journal of Remote Sensing 32 (15), 4407-4429.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))
overallSourcesPlot(comp, ref)

ctmat &lt;- crosstabm(comp, ref)
overallSourcesPlot(ctmatrix = ctmat, units = "pixels")
</code></pre>

<hr>
<h2 id='sample2pop'>
corrects sample counts to population counts in a square contingency table
</h2><span id='topic+sample2pop'></span>

<h3>Description</h3>

<p>Converts sample count to population count in the square contingency table, assuming a stratified random sampling
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample2pop(ctmatrix, population)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sample2pop_+3A_ctmatrix">ctmatrix</code></td>
<td>

<p>matrix representing a sampling-derived square contingency table between a comparison variable (rows) and a reference variable (columns)
</p>
</td></tr>
<tr><td><code id="sample2pop_+3A_population">population</code></td>
<td>

<p>an <em>n</em> x 2 matrix provided to correct the sample count to population count in the square contingency table. See Details below</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The first column of <code>population</code> must contain integer identifiers of each category, corresponding to the categories in the comparison and reference variables. The second column corresponds to the population totals for each category.  
</p>


<h3>Value</h3>

<p>matrix representing a population-adjusted square contingency table for the crosstabulation between a comparison variable (rows) and a reference variable (columns). Output values are given in the same units as <code>ctmatrix</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crosstabm">crosstabm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp &lt;- rast(system.file("external/comparison.rst", package = "diffeR"))
ref &lt;- rast(system.file("external/reference.rst", package = "diffeR"))

# Sample square contingency table
(ctmatCompRef &lt;- crosstabm(comp, ref))

# Population-adjusted square contingency table
(population &lt;- matrix(c(1, 2, 3, 2000, 4000, 6000), ncol = 2))
sample2pop(ctmatCompRef, population = population)

# The square contingency table can also be adjusted directly using the 
# crosstabm function
crosstabm(comp, ref, population = population)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
