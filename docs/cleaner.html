<!DOCTYPE html><html lang="en"><head><title>Help for package cleaner</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cleaner}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clean'><p>Clean column data to a class</p></a></li>
<li><a href='#currency'><p>Transform to currency</p></a></li>
<li><a href='#format_datetime'><p>Readable date format to POSIX</p></a></li>
<li><a href='#format_names'><p>Format names and values</p></a></li>
<li><a href='#format_p_value'><p>Format p values (APA guideline)</p></a></li>
<li><a href='#freq'><p>Frequency table</p></a></li>
<li><a href='#na_replace'><p>Replace NA values</p></a></li>
<li><a href='#percentage'><p>Transform to percentage</p></a></li>
<li><a href='#rdate'><p>Generate random dates</p></a></li>
<li><a href='#regex_true_false'><p>Regular expressions for <code>TRUE</code> and <code>FALSE</code></p></a></li>
<li><a href='#unclean'><p>Example data that is not clean</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Fast and Easy Data Cleaning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.5.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-11-17</td>
</tr>
<tr>
<td>Description:</td>
<td>Data cleaning functions for classes logical,
  factor, numeric, character, currency and Date to make
  data cleaning fast and easy. Relying on very few dependencies, it 
  provides smart guessing, but with user options to override 
  anything if needed.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>backports, crayon, knitr, pillar, rlang (&ge; 0.3.1), vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, rmarkdown, testthat (&ge; 1.0.2)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://msberends.github.io/cleaner/">https://msberends.github.io/cleaner/</a>,
<a href="https://github.com/msberends/cleaner">https://github.com/msberends/cleaner</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/msberends/cleaner/issues">https://github.com/msberends/cleaner/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-19 10:33:22 UTC; msberends</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthijs S. Berends
    <a href="https://orcid.org/0000-0001-7620-1800"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthijs S. Berends &lt;m.s.berends@umcg.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-19 10:50:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='clean'>Clean column data to a class</h2><span id='topic+clean'></span><span id='topic+clean.data.frame'></span><span id='topic+clean_logical'></span><span id='topic+clean_factor'></span><span id='topic+clean_numeric'></span><span id='topic+clean_double'></span><span id='topic+clean_integer'></span><span id='topic+clean_character'></span><span id='topic+clean_currency'></span><span id='topic+clean_percentage'></span><span id='topic+clean_Date'></span><span id='topic+clean_POSIXct'></span>

<h3>Description</h3>

<p>Use any of these functions to quickly clean columns in your data set. Use <code>clean()</code> to pick the functions that return the least relative number of <code>NA</code>s. They <strong>always</strong> return the class from the function name (e.g. <code>clean_Date()</code> always returns class <code>Date</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(x)

## S3 method for class 'data.frame'
clean(x)

clean_logical(
  x,
  true = regex_true(),
  false = regex_false(),
  na = NULL,
  fixed = FALSE,
  ignore.case = TRUE
)

clean_factor(
  x,
  levels = unique(x),
  ordered = FALSE,
  droplevels = FALSE,
  fixed = FALSE,
  ignore.case = TRUE
)

clean_numeric(x, remove = "[^0-9.,-]", fixed = FALSE)

clean_double(x, remove = "[^0-9.,-]", fixed = FALSE)

clean_integer(x, remove = "[^0-9.,-]", fixed = FALSE)

clean_character(
  x,
  remove = "[^a-z \t\r\n]",
  fixed = FALSE,
  ignore.case = TRUE,
  trim = TRUE
)

clean_currency(x, currency_symbol = NULL, remove = "[^0-9.,-]", fixed = FALSE)

clean_percentage(x, remove = "[^0-9.,-]", fixed = FALSE)

clean_Date(x, format = NULL, guess_each = FALSE, max_date = Sys.Date(), ...)

clean_POSIXct(
  x,
  tz = "",
  remove = "[^.0-9 :/-]",
  fixed = FALSE,
  max_date = Sys.Date(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_+3A_x">x</code></td>
<td>
<p>data to clean</p>
</td></tr>
<tr><td><code id="clean_+3A_true">true</code></td>
<td>
<p><a href="base.html#topic+regex">regex</a> to interpret values as <code>TRUE</code> (which defaults to <code><a href="#topic+regex_true">regex_true()</a></code>), see Details</p>
</td></tr>
<tr><td><code id="clean_+3A_false">false</code></td>
<td>
<p><a href="base.html#topic+regex">regex</a> to interpret values as <code>FALSE</code> (which defaults to <code><a href="#topic+regex_false">regex_false()</a></code>), see Details</p>
</td></tr>
<tr><td><code id="clean_+3A_na">na</code></td>
<td>
<p><a href="base.html#topic+regex">regex</a> to force interpret values as <code>NA</code>, i.e. not as <code>TRUE</code> or <code>FALSE</code></p>
</td></tr>
<tr><td><code id="clean_+3A_fixed">fixed</code></td>
<td>
<p>logical to indicate whether regular expressions should be turned off</p>
</td></tr>
<tr><td><code id="clean_+3A_ignore.case">ignore.case</code></td>
<td>
<p>logical to indicate whether matching should be case-insensitive</p>
</td></tr>
<tr><td><code id="clean_+3A_levels">levels</code></td>
<td>
<p>new factor levels, may be named regular expressions to match existing values, see Details</p>
</td></tr>
<tr><td><code id="clean_+3A_ordered">ordered</code></td>
<td>
<p>logical to indicate whether the factor levels should be ordered</p>
</td></tr>
<tr><td><code id="clean_+3A_droplevels">droplevels</code></td>
<td>
<p>logical to indicate whether non-existing factor levels should be dropped</p>
</td></tr>
<tr><td><code id="clean_+3A_remove">remove</code></td>
<td>
<p><a href="base.html#topic+regex">regex</a> to define the character(s) that should be removed, see Details</p>
</td></tr>
<tr><td><code id="clean_+3A_trim">trim</code></td>
<td>
<p>logical to indicate whether the result should be trimmed with <code><a href="base.html#topic+trimws">trimws(..., which = &quot;both&quot;)</a></code></p>
</td></tr>
<tr><td><code id="clean_+3A_currency_symbol">currency_symbol</code></td>
<td>
<p>the currency symbol to use, which will be guessed based on the input and otherwise defaults to the current system locale setting (see <code><a href="base.html#topic+Sys.localeconv">Sys.localeconv()</a></code>)</p>
</td></tr>
<tr><td><code id="clean_+3A_format">format</code></td>
<td>
<p>character string giving a date-time format as used by <code><a href="base.html#topic+strptime">strptime()</a></code>.
</p>
<p>For <code>clean_Date(..., guess_each = TRUE)</code>, this can be a vector of values to be used for guessing, see Examples.</p>
</td></tr>
<tr><td><code id="clean_+3A_guess_each">guess_each</code></td>
<td>
<p>logical to indicate whether all items of <code>x</code> should be guessed one by one, see Examples</p>
</td></tr>
<tr><td><code id="clean_+3A_max_date">max_date</code></td>
<td>
<p>date (coercible with <code><a href="base.html#topic+as.Date">as.Date()</a></code>) to indicate the maximum allowed of <code>x</code>, which defaults to today. This is to prevent that <code>clean_Date("23-03-47")</code> will return 23 March 2047 and instead returns 23 March 1947 with a warning.</p>
</td></tr>
<tr><td><code id="clean_+3A_...">...</code></td>
<td>
<p>for <code>clean_Date</code> and <code>clean_POSIXct</code>: other arguments passed on these functions</p>
</td></tr>
<tr><td><code id="clean_+3A_tz">tz</code></td>
<td>
<p>a character string.  The time zone specification to be used
for the conversion, <em>if one is required</em>.  System-specific (see
<a href="base.html#topic+time+20zones">time zones</a>), but <code>""</code> is the current time zone, and
<code>"GMT"</code> is UTC (Universal Time, Coordinated).  Invalid values
are most commonly treated as UTC, on some platforms with a warning.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Using <code>clean()</code> on a vector will guess a cleaning function based on the potential number of <code>NA</code>s it returns. Using <code>clean()</code> on a data frame to apply this guessed cleaning over all columns.
</p>
<p>Info about the different functions:
</p>

<ul>
<li> <p><strong><code>clean_logical()</code></strong>:
Use arguments <code>true</code> and <code>false</code> to match values using case-insensitive regular expressions (<a href="base.html#topic+regex">regex</a>). Unmatched values are considered <code>NA</code>. By default, values are matched with <code><a href="#topic+regex_true">regex_true()</a></code> and <code><a href="#topic+regex_false">regex_false()</a></code>. This allows support for values &quot;Yes&quot; and &quot;No&quot; in various languages. Use argument <code>na</code> to override values as <code>NA</code> that would otherwise be matched with <code>true</code> or <code>false</code>. See Examples.
</p>
</li>
<li> <p><strong><code>clean_factor()</code></strong>:
Use argument <code>levels</code> to set new factor levels. They can be named case-insensitive regular expressions to match existing values of <code>x</code>. For matching, new values for <code>levels</code> are internally temporarily sorted descending on text length. See Examples.
</p>
</li>
<li> <p><strong><code>clean_numeric()</code>, <code>clean_double()</code>, <code>clean_integer()</code> and <code>clean_character()</code></strong>:
Use argument <code>remove</code> to match values that must be removed from the input, using regular expressions (<a href="base.html#topic+regex">regex</a>). In the case of <code>clean_numeric()</code>, commas will be read as dots and only the last dot will be kept. Function <code>clean_character()</code> will keep middle spaces by default. See Examples.
</p>
</li>
<li> <p><strong><code>clean_percentage()</code></strong>:
This new class works like <code>clean_numeric()</code>, but transforms it with <code><a href="#topic+as.percentage">as.percentage()</a></code>, which will retain the original values but will print them as percentages. See Examples.
</p>
</li>
<li> <p><strong><code>clean_currency()</code></strong>:
This new class works like <code>clean_numeric()</code>, but transforms it with <code><a href="#topic+as.currency">as.currency()</a></code>. The currency symbol is guessed based on the most traded currencies by value (see Source): the United States dollar, Euro, Japanese yen, Pound sterling, Swiss franc, Renminbi, Swedish krona, Mexican peso, South Korean won, Turkish lira, Russian ruble, Indian rupee, and the South African rand. See Examples.
</p>
</li>
<li> <p><strong><code>clean_Date()</code></strong>:
Use argument <code>format</code> to define a date format or leave it empty to have the format guessed. Use <code>"Excel"</code> to read values as Microsoft Excel dates. The <code>format</code> argument will be evaluated with <code><a href="#topic+format_datetime">format_datetime()</a></code>, meaning that a format like <code>"d-mmm-yy"</code> will be translated internally to <code>"%e-%b-%y"</code> for convenience. See Examples.
</p>
</li>
<li> <p><strong><code>clean_POSIXct()</code></strong>:
Use argument <code>remove</code> to match values that must be removed from the input, using regular expressions (<a href="base.html#topic+regex">regex</a>). The resulting string will be coerced to a date/time element with class <code>POSIXct</code>, using <code><a href="base.html#topic+as.POSIXct">as.POSIXct()</a></code>. See Examples.
</p>
</li></ul>

<p>The use of invalid regular expressions in any of the above functions will not return an error (as in base R) but will instead interpret the expression as a fixed value and will throw a warning.
</p>


<h3>Value</h3>

<p>The <code style="white-space: pre;">&#8288;clean_*&#8288;</code> functions <strong>always</strong> return the class from the function name:
</p>

<ul>
<li> <p><code>clean_logical()</code>: class <code>logical</code>
</p>
</li>
<li> <p><code>clean_factor()</code>: class <code>factor</code>
</p>
</li>
<li> <p><code>clean_numeric()</code> and <code>clean_double()</code>: class <code>numeric</code>
</p>
</li>
<li> <p><code>clean_integer()</code>: class <code>integer</code>
</p>
</li>
<li> <p><code>clean_character()</code>: class <code>character</code>
</p>
</li>
<li> <p><code>clean_percentage()</code>: class <code>percentage</code>
</p>
</li>
<li> <p><code>clean_currency()</code>: class <code>currency</code>
</p>
</li>
<li> <p><code>clean_Date()</code>: class <code>Date</code>
</p>
</li>
<li> <p><code>clean_POSIXct()</code>: classes <code>POSIXct/POSIXt</code>
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.bis.org/publ/rpfx16fx.pdf">Triennial Central Bank Survey Foreign exchange turnover in April 2016 (PDF)</a>. Bank for International Settlements. 11 December 2016. p. 10.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clean_logical(c("Yes", "No"))   # English
clean_logical(c("Oui", "Non"))  # French
clean_logical(c("ya", "tidak")) # Indonesian
clean_logical(x = c("Positive", "Negative", "Unknown", "Some value"),
              true = "pos", false = "neg")

gender_age &lt;- c("male 0-50", "male 50+", "female 0-50", "female 50+")
clean_factor(gender_age, c("M", "F"))
clean_factor(gender_age, c("Male", "Female"))
clean_factor(gender_age, c("0-50", "50+"), ordered = TRUE)
clean_factor(gender_age, levels = c("Group A" = "female", "Group B" = "male 50+", Other = ".*"))

clean_Date("13jul18", "ddmmmyy")
clean_Date("12 August 2010")
clean_Date("12 06 2012")
clean_Date("October 1st 2012")
clean_Date("43658")
clean_Date("14526", "Excel")
clean_Date(c("1 Oct 13", "October 1st 2012")) # could not be fitted in 1 format
clean_Date(c("1 Oct 13", "October 1st 2012"), guess_each = TRUE)
clean_Date(c("12-14-13", "1 Oct 2012"), 
           guess_each = TRUE,
           format = c("d mmm yyyy", "mm-yy-dd")) # only these formats will be tried

clean_POSIXct("Created log on 2020/02/11 11:23 by user Joe")
clean_POSIXct("Created log on 2020.02.11 11:23 by user Joe", tz = "UTC")

clean_numeric("qwerty123456")
clean_numeric("Positive (0.143)")
clean_numeric("0,143")
clean_numeric("minus 12 degrees")

clean_percentage("PCT: 0.143")
clean_percentage(c("Total of -12.3%", "Total of +4.5%"))

clean_character("qwerty123456")
clean_character("Positive (0.143)")

clean_currency(c("Received 25", "Received 31.40"))
clean_currency(c("Jack sent £ 25", "Bill sent £ 31.40"))

df &lt;- data.frame(A = c("2 Apr 2016", "5 Feb 2020"), 
                 B = c("yes", "no"),
                 C = c("Total of -12.3%", "Total of +4.5%"),
                 D = c("Marker: 0.4513 mmol/l", "Marker: 0.2732 mmol/l"))
df
clean(df)
</code></pre>

<hr>
<h2 id='currency'>Transform to currency</h2><span id='topic+currency'></span><span id='topic+as.currency'></span><span id='topic+is.currency'></span><span id='topic+print.currency'></span><span id='topic+format.currency'></span>

<h3>Description</h3>

<p>Transform input to a currency. The actual values are numeric, but will be printed as formatted currency values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.currency(x, currency_symbol = Sys.localeconv()["int_curr_symbol"], ...)

is.currency(x)

## S3 method for class 'currency'
print(
  x,
  decimal.mark = getOption("OutDec"),
  big.mark = ifelse(decimal.mark == ",", ".", ","),
  as_symbol = FALSE,
  ...
)

## S3 method for class 'currency'
format(
  x,
  currency_symbol = attributes(x)$currency_symbol,
  decimal.mark = getOption("OutDec"),
  big.mark = ifelse(decimal.mark == ",", ".", ","),
  as_symbol = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="currency_+3A_x">x</code></td>
<td>
<p>input</p>
</td></tr>
<tr><td><code id="currency_+3A_currency_symbol">currency_symbol</code></td>
<td>
<p>the currency symbol to use, which defaults to the current system locale setting (see <code><a href="base.html#topic+Sys.localeconv">Sys.localeconv</a></code>)</p>
</td></tr>
<tr><td><code id="currency_+3A_...">...</code></td>
<td>
<p>other parameters passed on to methods</p>
</td></tr>
<tr><td><code id="currency_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>symbol to use as a decimal separator, defaults to <code><a href="base.html#topic+getOption">getOption</a>("OutDec")</code></p>
</td></tr>
<tr><td><code id="currency_+3A_big.mark">big.mark</code></td>
<td>
<p>symbol to use as a thousands separator, defaults to a dot if <code>decimal.mark</code> is a comma, and a comma otherwise</p>
</td></tr>
<tr><td><code id="currency_+3A_as_symbol">as_symbol</code></td>
<td>
<p>try to format and print using currency symbols instead of text</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Printing currency will always have a currency symbol followed by a space, 2 decimal places and is never written in scientific format (like 2.5e+04).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>money &lt;- as.currency(c(0.25, 2.5, 25, 25000))
money
sum(money)
max(money)
mean(money)

format(money, currency_symbol = "USD")
format(money, currency_symbol = "EUR", decimal.mark = ",")
format(money, currency_symbol = "EUR", as_symbol = TRUE)

as.currency(2.5e+04)
</code></pre>

<hr>
<h2 id='format_datetime'>Readable date format to POSIX</h2><span id='topic+format_datetime'></span>

<h3>Description</h3>

<p>Use this function to transform generic date/time info writing (dd-mm-yyyy) into POSIX standardised format (%d-%m-%Y), see Examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_datetime(format)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format_datetime_+3A_format">format</code></td>
<td>
<p>the format that needs to be transformed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>character</code> string (a POSIX standardised format)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>format_datetime("yyyy-mm-dd")

# Very hard to remember all these characters:
format(Sys.time(), "%a %b %d %Y %X")

# Easy to remember and write the same as above:
format(Sys.time(), format_datetime("ddd mmm dd yyyy HH:MM:ss"))

# seconds since the Epoch, 1970-01-01 00:00:00
format(Sys.time(), format_datetime("epoch"))
</code></pre>

<hr>
<h2 id='format_names'>Format names and values</h2><span id='topic+format_names'></span>

<h3>Description</h3>

<p>This function can be used on any <code>data.frame</code>, <code>list</code> or character vector to format their names or values. It supports <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a> and <a href="https://en.wikipedia.org/wiki/Camel_case">camel case</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_names(
  x,
  ...,
  snake_case = FALSE,
  camelCase = FALSE,
  tolower = FALSE,
  toupper = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format_names_+3A_x">x</code></td>
<td>
<p>a <code>data.frame</code>, <code>list</code> or <code>character</code> vector</p>
</td></tr>
<tr><td><code id="format_names_+3A_...">...</code></td>
<td>
<p>when <code>x</code> is a <code>data.frame</code>: new column names to set, which can be named (in the form <code>old = "new"</code>). The original column names do not need to be quoted, see Examples.</p>
</td></tr>
<tr><td><code id="format_names_+3A_snake_case">snake_case</code></td>
<td>
<p>logical to indicate whether the column names must be in <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a>. This will have no effect on manually set column names.</p>
</td></tr>
<tr><td><code id="format_names_+3A_camelcase">camelCase</code></td>
<td>
<p>logical to indicate whether the column names must be in <a href="https://en.wikipedia.org/wiki/Camel_case">camel case</a>. This will have no effect on manually set column names.</p>
</td></tr>
<tr><td><code id="format_names_+3A_tolower">tolower</code>, <code id="format_names_+3A_toupper">toupper</code></td>
<td>
<p>logical to indicate whether the column names must be lower/upper case. This will have no effect on manually set column names.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(Name.341ABC = "value", 
                 name_123def = "value",
                 This.is.a.column = "value")
                 
format_names(df, snake_case = TRUE)

format_names(df, camelCase = TRUE)

format_names(df, letters[1:3])

format_names(df, This.is.a.column = "a_new_colname")

rownames(mtcars) &lt;- format_names(rownames(mtcars), snake_case = TRUE)
mtcars[, 1:5]

format_names(list(a = 1, b = 2), c("new_1", "new_2"))

## Not run: 
library(dplyr)
starwars %&gt;%
  format_names(camelCase = TRUE) %&gt;%        # new column names
  mutate(name = name %&gt;% 
           format_names(name, 
                        snake_case = TRUE)) # new values in column

## End(Not run)
</code></pre>

<hr>
<h2 id='format_p_value'>Format p values (APA guideline)</h2><span id='topic+format_p_value'></span>

<h3>Description</h3>

<p>This function will round p values according to the APA guideline. It will try to round to two decimals where possible, and will try to avoid printing the value of <code>alpha</code>, see Examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_p_value(p, alpha = 0.05, prepend_p = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format_p_value_+3A_p">p</code></td>
<td>
<p>p value(s) to transform</p>
</td></tr>
<tr><td><code id="format_p_value_+3A_alpha">alpha</code></td>
<td>
<p>the value of alpha, defaults to 0.05</p>
</td></tr>
<tr><td><code id="format_p_value_+3A_prepend_p">prepend_p</code></td>
<td>
<p>a logical to indicate whether &quot;p =&quot; should be prepended to the result</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character
</p>


<h3>Examples</h3>

<pre><code class='language-R'>format_p_value(0.345678)
format_p_value(0.05125)

# this must not be "0.05", but is not "0.049" either,
# so it will add as many decimals as needed:
format_p_value(0.04993) 

format_p_value(c(0.123, 0.00000001))
format_p_value(c(0.123, 0.00000001), prepend_p = TRUE)
</code></pre>

<hr>
<h2 id='freq'>Frequency table</h2><span id='topic+freq'></span><span id='topic+freq.default'></span><span id='topic+freq.factor'></span><span id='topic+freq.matrix'></span><span id='topic+freq.table'></span><span id='topic+freq.numeric'></span><span id='topic+freq.Date'></span><span id='topic+freq.hms'></span><span id='topic+is.freq'></span><span id='topic+top_freq'></span><span id='topic+header'></span><span id='topic+print.freq'></span>

<h3>Description</h3>

<p>Create a frequency table of a <code>vector</code> or a <code>data.frame</code>. It supports tidyverse's quasiquotation and RMarkdown for reports. Easiest practice is: <code>data %&gt;% freq(var)</code> using the <a href="https://magrittr.tidyverse.org/#usage">tidyverse</a>.
</p>
<p><code>top_freq</code> can be used to get the top/bottom <em>n</em> items of a frequency table, with counts as names. It respects ties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>freq(x, ...)

## Default S3 method:
freq(
  x,
  sort.count = TRUE,
  nmax = getOption("max.print.freq"),
  na.rm = TRUE,
  row.names = TRUE,
  markdown = !interactive(),
  digits = 2,
  quote = NULL,
  header = TRUE,
  title = NULL,
  na = "&lt;NA&gt;",
  sep = " ",
  decimal.mark = getOption("OutDec"),
  big.mark = "",
  wt = NULL,
  ...
)

## S3 method for class 'factor'
freq(x, ..., droplevels = FALSE)

## S3 method for class 'matrix'
freq(x, ..., quote = FALSE)

## S3 method for class 'table'
freq(x, ..., sep = " ")

## S3 method for class 'numeric'
freq(x, ..., digits = 2)

## S3 method for class 'Date'
freq(x, ..., format = "yyyy-mm-dd")

## S3 method for class 'hms'
freq(x, ..., format = "HH:MM:SS")

is.freq(f)

top_freq(f, n)

header(f, property = NULL)

## S3 method for class 'freq'
print(
  x,
  nmax = getOption("max.print.freq", default = 10),
  markdown = !interactive(),
  header = TRUE,
  decimal.mark = getOption("OutDec"),
  big.mark = ifelse(decimal.mark != ",", ",", "."),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="freq_+3A_x">x</code></td>
<td>
<p>vector of any class or a <code><a href="base.html#topic+data.frame">data.frame</a></code> or <code><a href="base.html#topic+table">table</a></code></p>
</td></tr>
<tr><td><code id="freq_+3A_...">...</code></td>
<td>
<p>up to nine different columns of <code>x</code> when <code>x</code> is a <code>data.frame</code> or <code>tibble</code>, to calculate frequencies from - see Examples. Also supports quasiquotion.</p>
</td></tr>
<tr><td><code id="freq_+3A_sort.count">sort.count</code></td>
<td>
<p>sort on count, i.e. frequencies. This will be <code>TRUE</code> at default for everything except when using grouping variables.</p>
</td></tr>
<tr><td><code id="freq_+3A_nmax">nmax</code></td>
<td>
<p>number of row to print. The default, <code>10</code>, uses <code><a href="base.html#topic+getOption">getOption</a>("max.print.freq")</code>. Use <code>nmax = 0</code>, <code>nmax = Inf</code>, <code>nmax = NULL</code> or <code>nmax = NA</code> to print all rows.</p>
</td></tr>
<tr><td><code id="freq_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical value indicating whether <code>NA</code> values should be removed from the frequency table. The header (if set) will always print the amount of <code>NA</code>s.</p>
</td></tr>
<tr><td><code id="freq_+3A_row.names">row.names</code></td>
<td>
<p>a logical value indicating whether row indices should be printed as <code>1:nrow(x)</code></p>
</td></tr>
<tr><td><code id="freq_+3A_markdown">markdown</code></td>
<td>
<p>a logical value indicating whether the frequency table should be printed in markdown format. This will print all rows (except when <code>nmax</code> is defined) and is default behaviour in non-interactive R sessions (like when knitting RMarkdown files).</p>
</td></tr>
<tr><td><code id="freq_+3A_digits">digits</code></td>
<td>
<p>how many significant digits are to be used for numeric values in the header (not for the items themselves, that depends on <code><a href="base.html#topic+getOption">getOption</a>("digits")</code>)</p>
</td></tr>
<tr><td><code id="freq_+3A_quote">quote</code></td>
<td>
<p>a logical value indicating whether or not strings should be printed with surrounding quotes. Default is to print them only around characters that are actually numeric values.</p>
</td></tr>
<tr><td><code id="freq_+3A_header">header</code></td>
<td>
<p>a logical value indicating whether an informative header should be printed</p>
</td></tr>
<tr><td><code id="freq_+3A_title">title</code></td>
<td>
<p>text to show above frequency table, at default to tries to coerce from the variables passed to <code>x</code></p>
</td></tr>
<tr><td><code id="freq_+3A_na">na</code></td>
<td>
<p>a character string that should be used to show empty (<code>NA</code>) values (only useful when <code>na.rm = FALSE</code>)</p>
</td></tr>
<tr><td><code id="freq_+3A_sep">sep</code></td>
<td>
<p>a character string to separate the terms when selecting multiple columns</p>
</td></tr>
<tr><td><code id="freq_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>the character to be used to indicate the numeric decimal point</p>
</td></tr>
<tr><td><code id="freq_+3A_big.mark">big.mark</code></td>
<td>
<p>character; if not empty used as mark between every 'big.interval' decimals <em>before</em> (hence big) the decimal point</p>
</td></tr>
<tr><td><code id="freq_+3A_wt">wt</code></td>
<td>
<p>frequency weights. If a variable, computes <code>sum(wt)</code> instead of counting the rows.</p>
</td></tr>
<tr><td><code id="freq_+3A_droplevels">droplevels</code></td>
<td>
<p>a logical value indicating whether in factors empty levels should be dropped</p>
</td></tr>
<tr><td><code id="freq_+3A_format">format</code></td>
<td>
<p>a character to define the printing format (it supports <code><a href="#topic+format_datetime">format_datetime</a></code> to transform e.g. <code>"d mmmm yyyy"</code> to <code>"%e %B %Y"</code>)</p>
</td></tr>
<tr><td><code id="freq_+3A_f">f</code></td>
<td>
<p>a frequency table</p>
</td></tr>
<tr><td><code id="freq_+3A_n">n</code></td>
<td>
<p>number of top <em>n</em> items to return, use -n for the bottom <em>n</em> items. It will include more than <code>n</code> rows if there are ties.</p>
</td></tr>
<tr><td><code id="freq_+3A_property">property</code></td>
<td>
<p>property in header to return this value directly</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Frequency tables (or frequency distributions) are summaries of the distribution of values in a sample. With the 'freq' function, you can create univariate frequency tables. Multiple variables will be pasted into one variable, so it forces a univariate distribution. 
</p>
<p>Input can be done in many different ways. Base R methods are:
</p>
<pre>
freq(df$variable)
freq(df[, "variable"])
</pre>
<p>Tidyverse methods are:
</p>
<pre>
df$variable %&gt;% freq()
df[, "variable"] %&gt;% freq()
df %&gt;% freq("variable")
df %&gt;% freq(variable)
</pre>
<p>For numeric values of any class, these additional values will all be calculated with <code>na.rm = TRUE</code> and shown into the header:
</p>

<ul>
<li><p>Mean, using <code><a href="base.html#topic+mean">mean</a></code>
</p>
</li>
<li><p>Standard Deviation, using <code><a href="stats.html#topic+sd">sd</a></code>
</p>
</li>
<li><p>Coefficient of Variation (CV), the standard deviation divided by the mean
</p>
</li>
<li><p>Mean Absolute Deviation (MAD), using <code><a href="stats.html#topic+mad">mad</a></code>
</p>
</li>
<li><p>Tukey Five-Number Summaries (minimum, Q1, median, Q3, maximum), see <em>NOTE</em> below
</p>
</li>
<li><p>Interquartile Range (IQR) calculated as <code>Q3 - Q1</code>, see <em>NOTE</em> below
</p>
</li>
<li><p>Coefficient of Quartile Variation (CQV, sometimes called coefficient of dispersion) calculated as <code>(Q3 - Q1) / (Q3 + Q1)</code>, see <em>NOTE</em> below
</p>
</li>
<li><p>Outliers (total count and percentage), using <code><a href="grDevices.html#topic+boxplot.stats">boxplot.stats</a></code>
</p>
</li></ul>

<p><em>NOTE</em>: These values are calculated using the same algorithm as used by Minitab and SPSS: <em>p[k] = E[F(x[k])]</em>. See Type 6 on the <code><a href="stats.html#topic+quantile">quantile</a></code> page.
</p>
<p>For dates and times of any class, these additional values will be calculated with <code>na.rm = TRUE</code> and shown into the header:
</p>

<ul>
<li><p>Oldest, using <code><a href="base.html#topic+min">min</a></code>
</p>
</li>
<li><p>Newest, using <code><a href="base.html#topic+max">max</a></code>, with difference between newest and oldest
</p>
</li></ul>

<p>In factors, all factor levels that are not existing in the input data will be dropped at default.
</p>
<p>The function <code>top_freq</code> will include more than <code>n</code> rows if there are ties. Use a negative number for <em>n</em> (like <code>n = -3</code>) to select the bottom <em>n</em> values.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> (with an additional class <code>"freq"</code>) with five columns: <code>item</code>, <code>count</code>, <code>percent</code>, <code>cum_count</code> and <code>cum_percent</code>.
</p>


<h3>Extending the <code>freq()</code> function</h3>

<p>Interested in extending the <code>freq()</code> function with your own class? Add a method like below to your package, and optionally define some header info by passing a <code><a href="base.html#topic+list">list</a></code> to the <code>.add_header</code> parameter, like below example for class <code>difftime</code>. This example assumes that you use the <code>roxygen2</code> package for package development.
</p>
<pre>
#' @method freq difftime
#' @importFrom cleaner freq.default
#' @export
#' @noRd
freq.difftime &lt;- function(x, ...) {
  freq.default(x = x, ...,
               .add_header = list(units = attributes(x)$units))
}
</pre>
<p>Be sure to call <code>freq.default</code> in your function and not just <code>freq</code>. Also, add <code>cleaner</code> to the <code>Imports:</code> field of your <code>DESCRIPTION</code> file, to make sure that it will be installed with your package, e.g.:
</p>
<pre>
Imports: cleaner
</pre>


<h3>Examples</h3>

<pre><code class='language-R'>freq(unclean$gender, markdown = FALSE)

freq(x = clean_factor(unclean$gender, 
                      levels = c("^m" = "Male", 
                                 "^f" = "Female")),
     markdown = TRUE,
     title = "Frequencies of a cleaned version for a markdown report!",
     header = FALSE,
     quote = TRUE)
</code></pre>

<hr>
<h2 id='na_replace'>Replace NA values</h2><span id='topic+na_replace'></span><span id='topic+na_replace.default'></span><span id='topic+na_replace.data.frame'></span><span id='topic+na_replace.matrix'></span><span id='topic+na_replace.list'></span><span id='topic+na_replace.numeric'></span><span id='topic+na_replace.Date'></span><span id='topic+na_replace.logical'></span>

<h3>Description</h3>

<p>This is a generic function to replace NA values in data. It takes most data types as input and is extendible by other packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_replace(x, ...)

## Default S3 method:
na_replace(x, replacement = "", ...)

## S3 method for class 'data.frame'
na_replace(x, ..., replacement = NULL)

## S3 method for class 'matrix'
na_replace(x, replacement = 0, ...)

## S3 method for class 'list'
na_replace(x, replacement = NULL, ...)

## S3 method for class 'numeric'
na_replace(x, replacement = 0, ...)

## S3 method for class 'Date'
na_replace(x, replacement = Sys.Date(), ...)

## S3 method for class 'logical'
na_replace(x, replacement = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="na_replace_+3A_x">x</code></td>
<td>
<p>any vector, data.frame, matrix or list with values of which <code>NA</code> must be replaced</p>
</td></tr>
<tr><td><code id="na_replace_+3A_...">...</code></td>
<td>
<p>When <code>x</code> is a <code>data.frame</code>: columns of <code>x</code> to affect. This supports tidy evaluation without the need to quote the columns, see Examples.</p>
</td></tr>
<tr><td><code id="na_replace_+3A_replacement">replacement</code></td>
<td>
<p>value to replace <code>NA</code> with. This is at default: <code>0</code> for numeric values and class <a href="base.html#topic+matrix">matrix</a>, <code>FALSE</code> for class <a href="base.html#topic+logical">logical</a>, today for class <code>Date</code>, and <code>""</code> otherwise. Can also be a vector with the length of the number of NAs of <code>x</code> (<code>sum(is.na(x))</code>). When <code>x</code> is a <code>data.frame</code>, this can be a vector with the length of the number of columns to be affected, see Examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All functions preserve attributes. Within a <code>list</code> or <code>data.frame</code>, all attributes per index/item/column are also preserved.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mtrx &lt;- matrix(c(1, 2, NA, 3), nrow = 2)
mtrx
na_replace(mtrx)

na_replace(c(1, 2, NA, NA))
na_replace(c(1, 2, NA, NA), replacement = -1)
na_replace(c(1, 2, NA, NA), replacement = c(0, -1))

na_replace(c(Sys.Date(), NA)) # replacement defaults to 'today'

na_replace(c(TRUE, FALSE, NA))
na_replace(c(TRUE, FALSE, NA), replacement = TRUE)

# we're flexible, the class only remains the same if
# the replacement value allows it
na_replace(c(1, 2, 3, NA), replacement = "-")

# data.frame is a special case
mtcars[1:6, c("mpg", "hp")] &lt;- NA
head(mtcars)
head(na_replace(mtcars, mpg, hp)) # no need to quote columns (but you can)
head(na_replace(mtcars, mpg, hp, replacement = c(999, 123)))

## Not run: 
# practical way using tidyverse
library(dplyr)
starwars %&gt;% 
  na_replace()

# even maintains groups
starwars %&gt;%
  group_by(hair_color) %&gt;%
  na_replace(hair_color, replacement = "TEST!") %&gt;% 
  summarise(n = n())

## End(Not run)
</code></pre>

<hr>
<h2 id='percentage'>Transform to percentage</h2><span id='topic+percentage'></span><span id='topic+as.percentage'></span><span id='topic+is.percentage'></span><span id='topic+print.percentage'></span><span id='topic+format.percentage'></span>

<h3>Description</h3>

<p>Transform input to a percentage. The actual values are numeric, but will be printed as formatted percentages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.percentage(x, ...)

is.percentage(x)

## S3 method for class 'percentage'
print(x, ...)

## S3 method for class 'percentage'
format(x, digits = NULL, ...)

percentage(x, digits = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="percentage_+3A_x">x</code></td>
<td>
<p>input</p>
</td></tr>
<tr><td><code id="percentage_+3A_...">...</code></td>
<td>
<p>other parameters passed on to methods</p>
</td></tr>
<tr><td><code id="percentage_+3A_digits">digits</code></td>
<td>
<p>how many digits should be printed. It defaults to printing all decimals available in the data after transforming to a percentage, with a minimum of 0 and a maximum of 3.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Printing percentages will always have a percentage symbol and is never written in scientific format (like 2.5e+04%).
</p>
<p>The function <code>percentage</code> is a wrapper around <code>format(as.percentage(...))</code> with automatic determination of the number of digits, varying between 0 and 1. It also, unlike <span class="rlang"><b>R</b></span>, rounds according to basic math rules: <code>percentage(0.4455)</code> returns <code>"44.6%"</code> and not <code>"44.5%"</code>. This function always returns a character, and can also be used in plotting, see Examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>proportion &lt;- as.percentage(c(0.25, 2.5, 0.0025))
proportion
sum(proportion)
max(proportion)
mean(proportion)

as.percentage(2.5e-14)

as.percentage(pi)
format(as.percentage(pi))
format(as.percentage(pi), digits = 6)

round(0.4455 * 100, 1) # mind the rounding
percentage(0.4455) # does not round to 44.5%

if (require("ggplot2")) {
  ggplot(iris) +
    geom_col(aes(Species, Sepal.Length / sum(Sepal.Length)),
             position = "stack") +
    # add percentage as function to the labels:
    scale_y_continuous(labels = percentage)
}
</code></pre>

<hr>
<h2 id='rdate'>Generate random dates</h2><span id='topic+rdate'></span>

<h3>Description</h3>

<p>This function provides random date generation with a specified range, that defaults to the beginning and end of the current year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdate(
  n,
  min = paste0(format(Sys.Date(), "%Y"), "-01-01"),
  max = paste0(format(Sys.Date(), "%Y"), "-12-31"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rdate_+3A_n">n</code></td>
<td>
<p>number of observations. If <code>length(n) &gt; 1</code>, the length
is taken to be the number required.</p>
</td></tr>
<tr><td><code id="rdate_+3A_min">min</code>, <code id="rdate_+3A_max">max</code></td>
<td>
<p>lower and upper limits of the distribution. Must be (coercible to) valid dates.</p>
</td></tr>
<tr><td><code id="rdate_+3A_...">...</code></td>
<td>
<p>parameters given to <code>as.Date()</code> for coercing the values of <code>min</code> and <code>max</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># generate a million random dates and check the distribution
hist(rdate(1000000), breaks = "months")
</code></pre>

<hr>
<h2 id='regex_true_false'>Regular expressions for <code>TRUE</code> and <code>FALSE</code></h2><span id='topic+regex_true_false'></span><span id='topic+regex_true'></span><span id='topic+regex_false'></span>

<h3>Description</h3>

<p>These functions just return a regular expression to define values <code>TRUE</code> and <code>FALSE</code> in the most spoken languages in the world. They are the default input for the function <code><a href="#topic+clean_logical">clean_logical</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regex_true()

regex_false()
</code></pre>


<h3>Details</h3>

<p>Both functions support values &quot;Yes&quot; and &quot;No&quot; in the following languages: Arabic, Bengali, Chinese (Mandarin), Dutch, English, French, German, Hindi, Indonesian, Japanese, Malay, Portuguese, Russian, Spanish, Telugu, Turkish and Urdu. 
</p>
<p>Note: all these translations are in Latin characters only (e.g. &quot;da&quot; for Russian, &quot;haan&quot; for Hindi and &quot;hai&quot; for Japanese).
</p>


<h3>Source</h3>

<p>Wolfram Alpha, query: <a href="https://www.wolframalpha.com/input/?i=20+most+spoken+languages">https://www.wolframalpha.com/input/?i=20+most+spoken+languages</a>
</p>

<hr>
<h2 id='unclean'>Example data that is not clean</h2><span id='topic+unclean'></span>

<h3>Description</h3>

<p>This typical data example can be used for checking and cleaning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unclean
</code></pre>


<h3>Format</h3>

<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> with 500 observations and the following variables:
</p>

<dl>
<dt><code>date</code></dt><dd><p>Dates imported from Excel, they are integers ranging from ~30,000 to ~43,000.</p>
</dd>
<dt><code>gender</code></dt><dd><p>Characters with mixed values observed in original data about patients gender.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+freq">freq</a></code> to check values and <code><a href="#topic+clean">clean</a></code> to clean them.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
