<!DOCTYPE html><html lang="en"><head><title>Help for package grates</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {grates}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25during+25'><p>Is a date covered by a grouped date</p></a></li>
<li><a href='#boundaries'><p>Access the bounding dates of a grates object</p></a></li>
<li><a href='#epiweek_class'><p>Epiweek class</p></a></li>
<li><a href='#grouped_date_accessors'><p>Accessors for grate objects</p></a></li>
<li><a href='#int_period_class'><p>Integer-period class (Experimental)</p></a></li>
<li><a href='#isoweek_class'><p>ISO Week class</p></a></li>
<li><a href='#month_class'><p>Month class</p></a></li>
<li><a href='#period_class'><p>Period class</p></a></li>
<li><a href='#print.grates_month'><p>Format and print a month object</p></a></li>
<li><a href='#print.grates_period'><p>Print a period object</p></a></li>
<li><a href='#print.grates_yearmonth'><p>Format and print a yearmonth object</p></a></li>
<li><a href='#scale_x_grates_epiweek'><p>Epiweek scale</p></a></li>
<li><a href='#scale_x_grates_int_period'><p>Integer-period scale (Experimental)</p></a></li>
<li><a href='#scale_x_grates_isoweek'><p>Isoweek scale</p></a></li>
<li><a href='#scale_x_grates_month'><p>Month scale</p></a></li>
<li><a href='#scale_x_grates_period'><p>Period scale</p></a></li>
<li><a href='#scale_x_grates_year'><p>Year scale</p></a></li>
<li><a href='#scale_x_grates_yearmonth'><p>Yearmonth scale</p></a></li>
<li><a href='#scale_x_grates_yearquarter'><p>Yearquarter scale</p></a></li>
<li><a href='#scale_x_grates_yearweek'><p>Yearweek scale</p></a></li>
<li><a href='#year_class'><p>Year class</p></a></li>
<li><a href='#yearmonth_class'><p>Yearmonth class</p></a></li>
<li><a href='#yearquarter_class'><p>Yearquarter class</p></a></li>
<li><a href='#yearweek_class'><p>Yearweek class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Grouped Date Classes</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a coherent interface and implementation for creating
    grouped date classes.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.reconverse.org/grates/">https://www.reconverse.org/grates/</a>,
<a href="https://github.com/reconverse/grates">https://github.com/reconverse/grates</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, scales, vctrs, rlang, litedown, outbreaks, testthat
(&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>litedown</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-10 09:17:55 UTC; tim</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Taylor <a href="https://orcid.org/0000-0002-8587-7113"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tim Taylor &lt;tim.taylor@hiddenelephants.co.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-10 10:10:13 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25during+25'>Is a date covered by a grouped date</h2><span id='topic++25during+25'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;%during%&#8288;</code> determines whether a supplied date is within the period covered
by each element of a grates object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date %during% x
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25during+2B25_+3A_date">date</code></td>
<td>
<p>A scalar <code style="white-space: pre;">&#8288;&lt;date&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="+2B25during+2B25_+3A_x">x</code></td>
<td>
<p>grouped date vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector indicating whether the date was present within the range of
the tested object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dates &lt;- as.Date("2020-01-01") + 1:10
week &lt;- as_isoweek(dates)
dates[1] %during% week

period &lt;- as_period(dates, n = 3)
dates[10] %during% period

</code></pre>

<hr>
<h2 id='boundaries'>Access the bounding dates of a grates object</h2><span id='topic+boundaries'></span><span id='topic+date_start'></span><span id='topic+date_end'></span>

<h3>Description</h3>

<p>Utility functions for accessing the boundary dates for each element of
a grates object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_start(x)

date_end(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boundaries_+3A_x">x</code></td>
<td>
<p>grouped date vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The requested start and end dates for each element in the input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dates &lt;- as.Date("2020-01-01") + 1:9
week &lt;- as_isoweek(dates)
date_start(week)
date_end(week)

period &lt;- as_period(dates, n = 3)
date_start(period)
date_end(period)

</code></pre>

<hr>
<h2 id='epiweek_class'>Epiweek class</h2><span id='topic+epiweek_class'></span><span id='topic+epiweek'></span><span id='topic+as_epiweek'></span><span id='topic+as_epiweek.default'></span><span id='topic+as_epiweek.Date'></span><span id='topic+as_epiweek.POSIXt'></span><span id='topic+as_epiweek.character'></span><span id='topic+as_epiweek.factor'></span><span id='topic+new_epiweek'></span><span id='topic+is_epiweek'></span>

<h3>Description</h3>

<p>Epiweeks are defined to start on a Sunday and span a 7 day period.
Where they span calendar years, they are associated to the year which
contains the majority of the week's days (i.e. the first epiweek a year
is the one with at least four days in said year).
</p>
<p>Internally, <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> objects are stored as the number of weeks
(starting at 0) from the first Sunday after the Unix Epoch (1970-01-01).
That is, the number of seven day periods from 1970-01-04.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>epiweek(year = integer(), week = integer())

as_epiweek(x, ...)

## Default S3 method:
as_epiweek(x, ...)

## S3 method for class 'Date'
as_epiweek(x, ...)

## S3 method for class 'POSIXt'
as_epiweek(x, ...)

## S3 method for class 'character'
as_epiweek(x, format, tryFormats = c("%Y-%m-%d", "%Y/%m/%d"), ...)

## S3 method for class 'factor'
as_epiweek(x, format, tryFormats = c("%Y-%m-%d", "%Y/%m/%d"), ...)

new_epiweek(x = integer())

is_epiweek(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="epiweek_class_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the year associated with <code>week</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="epiweek_class_+3A_week">week</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the week associated with 'year.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="epiweek_class_+3A_x">x</code>, <code id="epiweek_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="epiweek_class_+3A_...">...</code></td>
<td>
<p>Other values passed to as.Date().</p>
</td></tr>
<tr><td><code id="epiweek_class_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Passed to as.Date() unless <code>format = "yearweek"</code> in which case input is
assumed to be in the form &quot;YYYY-Wxx&quot;.
</p>
<p>If not specified, it will try tryFormats one by one on the first non-NA
element, and give an error if none works. Otherwise, the processing is via
<code>strptime()</code> whose help page describes available conversion specifications.</p>
</td></tr>
<tr><td><code id="epiweek_class_+3A_tryformats">tryFormats</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Format strings to try if format is not specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>epiweek()</code> is a constructor for <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> objects. It takes a
vector of year and vector of week values as inputs. Length 1 inputs will be
recycled to the length of the other input and <code>double</code> vectors will again be
converted to integer via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_epiweek()</code> is a generic for conversion to <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code>.
</p>

<ul>
<li><p> Date, POSIXct, and POSIXlt are converted with the timezone respected.
</p>
</li>
<li><p> Character objects are first coerced to date via <code>as.Date()</code> unless
<code>format = "yearweek"</code> in which case input is assumed to be in the form
&quot;YYYY-Wxx&quot; and parsed accordingly.
</p>
</li></ul>

<p><code>new_epiweek()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> objects
aimed at developers. It takes, as input, the number of epiweeks since the
sunday after the Unix Epoch that you wish to represent. <code>double</code> vectors will
be converted to integer via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> object.
</p>


<h3>See Also</h3>

<p>The <a href="#topic+yearweek_class">yearweek</a> and <a href="#topic+isoweek_class">isoweek</a> classes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_epiweek(Sys.Date())

# POSIXt coercion
as_epiweek(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# character coercion assumes date input by default
as_epiweek("2019-05-03")

# character coercion can handle YYYY-Www format too
as_epiweek("2019-W12", format = "yearweek")

# construction
epiweek(year = 2000, week = 3)

# direct construction
stopifnot(
    identical(
        new_epiweek(0:1),
        as_epiweek("1970-01-04") + 0:1
    )
)
</code></pre>

<hr>
<h2 id='grouped_date_accessors'>Accessors for grate objects</h2><span id='topic+grouped_date_accessors'></span><span id='topic+get_firstday'></span><span id='topic+get_firstday.default'></span><span id='topic+get_firstday.grates_yearweek_monday'></span><span id='topic+get_firstday.grates_yearweek_tuesday'></span><span id='topic+get_firstday.grates_yearweek_wednesday'></span><span id='topic+get_firstday.grates_yearweek_thursday'></span><span id='topic+get_firstday.grates_yearweek_friday'></span><span id='topic+get_firstday.grates_yearweek_saturday'></span><span id='topic+get_firstday.grates_yearweek_sunday'></span><span id='topic+get_week'></span><span id='topic+get_week.default'></span><span id='topic+get_week.grates_yearweek'></span><span id='topic+get_week.grates_epiweek'></span><span id='topic+get_week.grates_isoweek'></span><span id='topic+get_year'></span><span id='topic+get_year.default'></span><span id='topic+get_year.grates_yearweek'></span><span id='topic+get_year.grates_epiweek'></span><span id='topic+get_year.grates_isoweek'></span><span id='topic+get_year.grates_yearmonth'></span><span id='topic+get_year.grates_yearquarter'></span><span id='topic+get_year.grates_year'></span><span id='topic+get_n'></span><span id='topic+get_n.default'></span><span id='topic+get_n.grates_month'></span><span id='topic+get_n.grates_period'></span><span id='topic+get_n.grates_int_period'></span><span id='topic+get_offset'></span><span id='topic+get_offset.default'></span><span id='topic+get_offset.grates_period'></span>

<h3>Description</h3>

<p>Generics and methods for accessing information about grouped date objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_firstday(x, ...)

## Default S3 method:
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_monday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_tuesday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_wednesday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_thursday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_friday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_saturday'
get_firstday(x, ...)

## S3 method for class 'grates_yearweek_sunday'
get_firstday(x, ...)

get_week(x, ...)

## Default S3 method:
get_week(x, ...)

## S3 method for class 'grates_yearweek'
get_week(x, ...)

## S3 method for class 'grates_epiweek'
get_week(x, ...)

## S3 method for class 'grates_isoweek'
get_week(x, ...)

get_year(x, ...)

## Default S3 method:
get_year(x, ...)

## S3 method for class 'grates_yearweek'
get_year(x, ...)

## S3 method for class 'grates_epiweek'
get_year(x, ...)

## S3 method for class 'grates_isoweek'
get_year(x, ...)

## S3 method for class 'grates_yearmonth'
get_year(x, ...)

## S3 method for class 'grates_yearquarter'
get_year(x, ...)

## S3 method for class 'grates_year'
get_year(x, ...)

get_n(x, ...)

## Default S3 method:
get_n(x, ...)

## S3 method for class 'grates_month'
get_n(x, ...)

## S3 method for class 'grates_period'
get_n(x, ...)

## S3 method for class 'grates_int_period'
get_n(x, ...)

get_offset(x, ...)

## Default S3 method:
get_offset(x, ...)

## S3 method for class 'grates_period'
get_offset(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grouped_date_accessors_+3A_x">x</code></td>
<td>
<p><span class="rlang"><b>R</b></span> object</p>
</td></tr>
<tr><td><code id="grouped_date_accessors_+3A_...">...</code></td>
<td>
<p>Not currently used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Requested value or an error if no method available.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dates &lt;- as.Date("2020-01-01") + 1:14
dat &lt;- as_isoweek(dates)
get_week(dat)
get_year(dat)

</code></pre>

<hr>
<h2 id='int_period_class'>Integer-period class (Experimental)</h2><span id='topic+int_period_class'></span><span id='topic+as_int_period.default'></span><span id='topic+as_int_period.integer'></span><span id='topic+as_int_period.double'></span><span id='topic+new_int_period'></span><span id='topic+is_int_period'></span><span id='topic+as_int_period'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;&lt;grates_int_period&gt;&#8288;</code> objects represent groupings of <code>n</code> consecutive integers
from <code>0</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
as_int_period(x, n = 1L, ...)

## S3 method for class 'integer'
as_int_period(x, n = 1L, ...)

## S3 method for class 'double'
as_int_period(x, n = 1L, ...)

new_int_period(x = integer(), n = 1L)

is_int_period(xx)

as_int_period(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="int_period_class_+3A_x">x</code>, <code id="int_period_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.
</p>
<p>For <code>as_int_period()</code> this is the object to be coerced.
</p>
<p>For <code>new_int_period()</code> this represents the number of <code>n</code> integer periods from 0.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="int_period_class_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of integers that are being grouped. Must be greater than 0.</p>
</td></tr>
<tr><td><code id="int_period_class_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>as_int_period()</code> is a generic for coercing input in to <code style="white-space: pre;">&#8288;&lt;grates_int_period&gt;&#8288;</code>
objects. For numeric input it coerces it's input <code>x</code> first via
<code>x &lt;- as.integer(floor(x))</code> and then via integer division by <code>n</code> (i.e.
<code>x %/% n</code>).
</p>
<p><code>new_int_period()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code>
objects aimed at developers. It takes, as input, the number of integer
periods and the value of <code>n</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_int_period&gt;&#8288;</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# coercion
as_int_period(1:10, n = 3)

# direct construction
stopifnot(
    identical(
        as_int_period(1:10, n = 3),
        new_int_period(c(0, 0, 1, 1, 1, 2, 2, 2, 3, 3), n = 3)
    )
)



</code></pre>

<hr>
<h2 id='isoweek_class'>ISO Week class</h2><span id='topic+isoweek_class'></span><span id='topic+isoweek'></span><span id='topic+as_isoweek'></span><span id='topic+as_isoweek.default'></span><span id='topic+as_isoweek.Date'></span><span id='topic+as_isoweek.POSIXt'></span><span id='topic+as_isoweek.character'></span><span id='topic+as_isoweek.factor'></span><span id='topic+new_isoweek'></span><span id='topic+is_isoweek'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> objects are used to represent ISO week dates as defined in
<a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>. To expand further, it is
easiest to quote from the related
<a href="https://en.wikipedia.org/w/index.php?title=ISO_week_date&amp;oldid=1269568343">wikipedia entry</a>:
</p>
<p><em>&quot;ISO weeks start with Monday and end on Sunday. Each week's year is the
Gregorian year in which the Thursday falls. The first week of the year, hence,
always contains 4 January. ISO week year numbering therefore usually
deviates by 1 from the Gregorian for some days close to 1 January.&quot;</em>
</p>
<p>Internally, <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> objects are stored as the number of weeks
(starting at 0) from the first Monday prior to the Unix Epoch (1970-01-01).
That is, the number of seven day periods from 1969-12-29.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isoweek(year = integer(), week = integer())

as_isoweek(x, ...)

## Default S3 method:
as_isoweek(x, ...)

## S3 method for class 'Date'
as_isoweek(x, ...)

## S3 method for class 'POSIXt'
as_isoweek(x, ...)

## S3 method for class 'character'
as_isoweek(x, format, tryFormats = c("%Y-%m-%d", "%Y/%m/%d"), ...)

## S3 method for class 'factor'
as_isoweek(x, format, tryFormats = c("%Y-%m-%d", "%Y/%m/%d"), ...)

new_isoweek(x = integer())

is_isoweek(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="isoweek_class_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the year associated with <code>week</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="isoweek_class_+3A_week">week</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the week associated with 'year.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="isoweek_class_+3A_x">x</code>, <code id="isoweek_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="isoweek_class_+3A_...">...</code></td>
<td>
<p>Other values passed to as.Date().</p>
</td></tr>
<tr><td><code id="isoweek_class_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Passed to as.Date() unless <code>format = "yearweek"</code> in which case input is
assumed to be in the form &quot;YYYY-Wxx&quot;.
</p>
<p>If not specified, it will try tryFormats one by one on the first non-NA
element, and give an error if none works. Otherwise, the processing is via
<code>strptime()</code> whose help page describes available conversion specifications.</p>
</td></tr>
<tr><td><code id="isoweek_class_+3A_tryformats">tryFormats</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Format strings to try if format is not specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>isoweek()</code> is a constructor for <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> objects. It takes a
vector of year and vector of week values as inputs. Length 1 inputs will be
recycled to the length of the other input and <code>double</code> vectors will again be
converted to integer via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_isoweek()</code> is a generic for conversion to <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code>.
</p>

<ul>
<li><p> Date, POSIXct, and POSIXlt are converted with the timezone respected.
</p>
</li>
<li><p> Character objects are first coerced to date via <code>as.Date()</code> unless
<code>format = "yearweek"</code> in which case input is assumed to be in the form
&quot;YYYY-Wxx&quot; and parsed accordingly.
</p>
</li></ul>

<p><code>new_isoweek()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> objects
aimed at developers. It takes, as input, the number of isoweeks since the
Monday prior to the Unix Epoch that you wish to represent. <code>double</code> vectors
will be converted to integer via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> object.
</p>


<h3>References</h3>

<p>Wikipedia contributors. (2025, January 15). ISO week date.
In Wikipedia, The Free Encyclopedia.
Retrieved 09:19, March 6, 2025, from https://en.wikipedia.org/w/index.php?title=ISO_week_date&amp;oldid=1269568343
</p>


<h3>See Also</h3>

<p>The <a href="#topic+yearweek_class">yearweek</a> and <a href="#topic+epiweek_class">epiweek</a> classes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_isoweek(Sys.Date())

# POSIXt coercion
as_isoweek(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# character coercion assumes date input by default
as_isoweek("2019-05-03")

# character coercion can handle YYYY-Www format too
as_isoweek("2019-W12", format = "yearweek")

# construction
isoweek(year = 2000, week = 3)

# direct construction
stopifnot(
    identical(
        new_isoweek(0:1),
        as_isoweek("1969-12-29") + 0:1
    )
)

</code></pre>

<hr>
<h2 id='month_class'>Month class</h2><span id='topic+month_class'></span><span id='topic+as_month'></span><span id='topic+as_month.default'></span><span id='topic+as_month.Date'></span><span id='topic+as_month.POSIXt'></span><span id='topic+as_month.character'></span><span id='topic+as_month.factor'></span><span id='topic+new_month'></span><span id='topic+is_month'></span>

<h3>Description</h3>

<p>Month objects are groupings of 'n consecutive months' stored relative to the
Unix Epoch. More precisely, <code>grates_month</code> objects are stored as the integer
number (starting at 0), of n-month groups since the Unix Epoch (1970-01-01).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_month(x, n, ...)

## Default S3 method:
as_month(x, n, ...)

## S3 method for class 'Date'
as_month(x, n, ...)

## S3 method for class 'POSIXt'
as_month(x, n, ...)

## S3 method for class 'character'
as_month(x, n, ...)

## S3 method for class 'factor'
as_month(x, n, ...)

new_month(x = integer(), n)

is_month(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="month_class_+3A_x">x</code>, <code id="month_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="month_class_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of months that are being grouped. Must be greater than 1 (use
<code>as_yearmonth()</code> for this case).</p>
</td></tr>
<tr><td><code id="month_class_+3A_...">...</code></td>
<td>
<p>Only used For character input where additional arguments are passed through
to <code>as.Date()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>as_month()</code> is a generic for conversion to <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code>.
</p>

<ul>
<li><p> Character input is first parsed using <code>as.Date()</code>.
</p>
</li>
<li><p> POSIXt inputs are converted with the timezone respected.
</p>
</li>
<li><p> Precision is only to the month level (i.e. the day of the month is always
dropped).
</p>
</li></ul>

<p><code>new_month()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code> objects
aimed at developers. It takes, as input <code>x</code>, the number of n-months since
the Unix Epoch (1970-01-01) and the related value of <code>n</code>.
<code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code> object.
</p>


<h3>References</h3>

<p>The algorithm to convert between dates and months relative to the UNIX Epoch
comes from the work of Davis Vaughan in the unreleased
<a href="https://github.com/DavisVaughan/datea/">datea</a> package.
</p>


<h3>See Also</h3>

<p>The <a href="#topic+yearmonth_class">yearmonth</a> class.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_month(Sys.Date(), n = 2)

# character coercion
as_month("2019-05-03", n = 4)

# POSIXt coercion
as_month(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"), n = 2)

# direct construction
d &lt;- seq.Date(from = as.Date("1970-03-01"), by = "2 month", length.out = 10)
stopifnot(
    identical(
        as_month(d, n = 2),
        new_month(1:10, 2)
    )
)

</code></pre>

<hr>
<h2 id='period_class'>Period class</h2><span id='topic+period_class'></span><span id='topic+as_period'></span><span id='topic+as_period.default'></span><span id='topic+as_period.Date'></span><span id='topic+as_period.POSIXt'></span><span id='topic+as_period.character'></span><span id='topic+as_period.factor'></span><span id='topic+new_period'></span><span id='topic+is_period'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> objects represent groupings of <code>n</code> consecutive days
calculated relative to an <code>offset</code>. It is useful for when you wish to group
an arbitrary number of dates together (e.g. 10 days).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_period(x, n, ...)

## Default S3 method:
as_period(x, n = 1L, offset = 0L, ...)

## S3 method for class 'Date'
as_period(x, n = 1L, offset = 0L, ...)

## S3 method for class 'POSIXt'
as_period(x, n = 1L, offset = 0L, ...)

## S3 method for class 'character'
as_period(x, n = 1L, offset = 0L, ...)

## S3 method for class 'factor'
as_period(x, n = 1L, offset = 0L, ...)

new_period(x = integer(), n = 1L, offset = 0L)

is_period(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="period_class_+3A_x">x</code>, <code id="period_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.
</p>
<p>For <code>as_period()</code> this is the object to be coerced.
</p>
<p>For <code>new_period()</code> this represents the number of periods since the Unix
Epoch (1970-01-01) and a specified offset.</p>
</td></tr>
<tr><td><code id="period_class_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of days that are being grouped.</p>
</td></tr>
<tr><td><code id="period_class_+3A_...">...</code></td>
<td>
<p>Only used for character input where additional arguments are passed through
to <code>as.Date()</code>.</p>
</td></tr>
<tr><td><code id="period_class_+3A_offset">offset</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code> or, for <code>as_period()</code>, a <code style="white-space: pre;">&#8288;[date]&#8288;</code>.
</p>
<p>Value you wish to start counting periods from relative to the Unix Epoch:
</p>

<ul>
<li><p> For integer values this is stored scaled by <code>n</code>
(<code>offset &lt;- as.integer(offset) %% n</code>).
</p>
</li>
<li><p> For date values this is first converted to an integer offset
(<code>offset &lt;- floor(as.numeric(offset))</code>) and then scaled via <code>n</code> as above.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Internally <code>grates_period</code> objects are stored as the integer number, starting
at 0, of  periods since the Unix Epoch (1970-01-01) and a specified offset. Here
periods are taken to mean groupings of <code>n</code> consecutive days. For storage and
calculation purposes, <code>offset</code> is scaled relative to <code>n</code>
(i.e. <code>offset &lt;- offset %% n</code>) and values of <code>x</code> stored relative to this
scaled offset.
</p>
<p><code>as_period()</code> is a generic for coercing input in to <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> objects.
It is the recommended way for constructing period objects as it allows the
<code>offset</code> to be specified as a <code>date</code> (rather than an integer value relative to
the Unix Epoch).
</p>

<ul>
<li><p> Character input is first parsed using <code>as.Date()</code>.
</p>
</li>
<li><p> POSIXct and POSIXlt are converted with their timezone respected.
</p>
</li></ul>

<p><code>new_period()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code>
objects aimed at developers. It takes, as input, the number of periods since
the Unix Epoch and the specified <code>offset</code>. <code>double</code> vectors will
be converted via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# coercion from date
dat &lt;- as.Date("2012-12-01")
as_period(dat + 0:3, n = 2, offset = dat)

# direct construction
new_period(1:10)

</code></pre>

<hr>
<h2 id='print.grates_month'>Format and print a month object</h2><span id='topic+print.grates_month'></span><span id='topic+format.grates_month'></span>

<h3>Description</h3>

<p>Format and print a month object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grates_month'
print(x, format = "%Y-%b", sep = "to", ...)

## S3 method for class 'grates_month'
format(x, format = "%Y-%b", sep = "to", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.grates_month_+3A_x">x</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="print.grates_month_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>The format to use for the bounds of each value.</p>
</td></tr>
<tr><td><code id="print.grates_month_+3A_sep">sep</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Where more than one month is grouped with others, <code>sep</code> is placed between the
upper and lower bounds when printing.</p>
</td></tr>
<tr><td><code id="print.grates_month_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>format()</code>, a character vector representing the formatted input.
<code>print()</code> is called for the side effect of printing to screen and thus
returns the input <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code> object invisibly.
</p>

<hr>
<h2 id='print.grates_period'>Print a period object</h2><span id='topic+print.grates_period'></span><span id='topic+format.grates_period'></span>

<h3>Description</h3>

<p>Print a period object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grates_period'
print(x, format = "%Y-%m-%d", sep = "to", ...)

## S3 method for class 'grates_period'
format(x, format = "%Y-%m-%d", sep = "to", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.grates_period_+3A_x">x</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="print.grates_period_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>The format to use for the bounds of each value.</p>
</td></tr>
<tr><td><code id="print.grates_period_+3A_sep">sep</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Where more than one day is grouped with others, <code>sep</code> is placed between the
upper and lower bounds when printing.</p>
</td></tr>
<tr><td><code id="print.grates_period_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>

<hr>
<h2 id='print.grates_yearmonth'>Format and print a yearmonth object</h2><span id='topic+print.grates_yearmonth'></span><span id='topic+format.grates_yearmonth'></span>

<h3>Description</h3>

<p>Format and print a yearmonth object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grates_yearmonth'
print(x, format = "%Y-%b", ...)

## S3 method for class 'grates_yearmonth'
format(x, format = "%Y-%b", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.grates_yearmonth_+3A_x">x</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="print.grates_yearmonth_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>The format to use for printing.</p>
</td></tr>
<tr><td><code id="print.grates_yearmonth_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>format()</code>, a character vector representing the formatted input.
<code>print()</code> is called for the side effect of printing to screen and thus
returns the input <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> object invisibly.
</p>

<hr>
<h2 id='scale_x_grates_epiweek'>Epiweek scale</h2><span id='topic+scale_x_grates_epiweek'></span>

<h3>Description</h3>

<p>ggplot2 scale for an <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_epiweek(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_epiweek_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_epiweek_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_epiweek&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_epiweek_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_epiweek_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If NULL (default) then labels are in the standard epiweek format (YYYY-Www).
</p>
<p>If &quot;week&quot; then the labels are of the form Www (e.g. W37).
</p>
<p>Otherwise the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist
x &lt;- as_epiweek(linelist$date_of_infection)
dat &lt;- aggregate(list(cases = x), by = list(week = x), FUN = length)

# plot the output
(week_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(week, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw())

# We can have non-centred date labels on the x_axis by using the
# associated scale function and explicitly specifying a format for
# the date labels:
week_plot + scale_x_grates_epiweek(format = "%Y-%m-%d")

</code></pre>

<hr>
<h2 id='scale_x_grates_int_period'>Integer-period scale (Experimental)</h2><span id='topic+scale_x_grates_int_period'></span>

<h3>Description</h3>

<p>ggplot2 scale for an integer-period vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_int_period(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  centre = FALSE,
  n
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_int_period_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_int_period_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_int_period&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_int_period_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_int_period_+3A_centre">centre</code></td>
<td>
<p>Only applicable to an <code>int_period</code> object with <code>n &gt; 1</code>.
</p>
<p>If FALSE labels are place at the edge of the bounds.
</p>
<p>If TRUE then labels are centralised and of the form <code style="white-space: pre;">&#8288;[lower, upper]&#8288;</code></p>
</td></tr>
<tr><td><code id="scale_x_grates_int_period_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number used for the original grouping.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>

<hr>
<h2 id='scale_x_grates_isoweek'>Isoweek scale</h2><span id='topic+scale_x_grates_isoweek'></span>

<h3>Description</h3>

<p>ggplot2 scale for an <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_isoweek(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_isoweek_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_isoweek_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_isoweek_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_isoweek_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If NULL (default) then labels are in the standard isoweek format (YYYY-Www).
</p>
<p>If &quot;week&quot; then the labels are of the form Www (e.g. W37).
</p>
<p>Otherwise the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist
x &lt;- as_isoweek(linelist$date_of_infection)
dat &lt;- aggregate(list(cases = x), by = list(week = x), FUN = length)

# plot the output
(week_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(week, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw())

# We can have non-centred date labels on the x_axis by using the
# associated scale function and explicitly specifying a format for
# the date labels:
week_plot + scale_x_grates_isoweek(format = "%Y-%m-%d")

</code></pre>

<hr>
<h2 id='scale_x_grates_month'>Month scale</h2><span id='topic+scale_x_grates_month'></span>

<h3>Description</h3>

<p>ggplot2 scale for a month vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_month(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = "%Y-%m-%d",
  bounds_format = "%Y-%b",
  sep = "to",
  n
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_month_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_month&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If NULL then labels are centralised and of the form &quot;lower category bound to
upper category bound&quot;.
</p>
<p>If not NULL then the value is used by <code>format.Date()</code> and can be any input
acceptable by that function (defaults to &quot;%Y-%m-%d).</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_bounds_format">bounds_format</code></td>
<td>
<p>Format to use for grouped date labels. Only used if <code>format</code> is NULL.</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_sep">sep</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Separator to use for grouped date labels.</p>
</td></tr>
<tr><td><code id="scale_x_grates_month_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of months used for the original grouping.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist

# calculate the bimonthly number of cases
x &lt;- as_month(linelist$date_of_infection, n = 2)
(dat &lt;- aggregate(list(cases = x), by = list(group = x), FUN = length))

# by default lower date bounds are used for the x axis
(bimonth_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(group, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw() +
    ggplot2::theme(
        axis.text.x = ggplot2::element_text(
            angle = 45,
            hjust = 1
        )
    ) +
    ggplot2::xlab(""))

# To obtain centred labels you must explicitly set the format to NULL
# in the scale:
bimonth_plot + scale_x_grates_month(format = NULL, n = 2)

</code></pre>

<hr>
<h2 id='scale_x_grates_period'>Period scale</h2><span id='topic+scale_x_grates_period'></span>

<h3>Description</h3>

<p>ggplot2 scale for an <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_period(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = "%Y-%m-%d",
  n,
  offset
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_period_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_period_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_period&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_period_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_period_+3A_format">format</code></td>
<td>
<p>Format to use for dates.
</p>
<p>Value is used by <code>format.Date()</code> and can be any input acceptable by that
function.</p>
</td></tr>
<tr><td><code id="scale_x_grates_period_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of days in each period.</p>
</td></tr>
<tr><td><code id="scale_x_grates_period_+3A_offset">offset</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Number of days used in original grouping for the offset from the Unix Epoch.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist

# Calculate the total of infections across 14 day periods offset from
# the first date
x &lt;- linelist$date_of_infection
x &lt;- as_period(x, n = 14, offset = min(x, na.rm = TRUE))
dat &lt;- aggregate(list(cases = x), by = list(period = x), FUN = length)
head(dat)

(period_plot &lt;- ggplot2::ggplot(dat, ggplot2::aes(period, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw() +
    ggplot2::theme(
        axis.text.x = ggplot2::element_text(
            angle = 45,
            hjust = 1
        )
    ) +
    ggplot2::xlab(""))

# To change defaults we must explicitly state the value of n and
# offset when calling the scale function
period_plot + scale_x_grates_period(
    n.breaks = 2,
    n = 14,
    offset = min(x, na.rm = TRUE)
)

</code></pre>

<hr>
<h2 id='scale_x_grates_year'>Year scale</h2><span id='topic+scale_x_grates_year'></span>

<h3>Description</h3>

<p>ggplot2 scale for year vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_year(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_year_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_year_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_isoweek&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_year_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_year_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If not NULL then the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist

# calculate yearly cases by date of infection
x &lt;- as_year(linelist$date_of_infection)
(dat &lt;- aggregate(list(cases = x), by = list(year = x), FUN = length))

# by default labels are centred
(year_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(year, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw() +
    ggplot2::xlab(""))

# To obtain centred labels you must explicitly set a date format
# in the scale:
year_plot + scale_x_grates_year(format = "%Y-%m-%d")


</code></pre>

<hr>
<h2 id='scale_x_grates_yearmonth'>Yearmonth scale</h2><span id='topic+scale_x_grates_yearmonth'></span>

<h3>Description</h3>

<p>ggplot2 scale for a yearmonth vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_yearmonth(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_yearmonth_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearmonth_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearmonth_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearmonth_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If not NULL then the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>

<hr>
<h2 id='scale_x_grates_yearquarter'>Yearquarter scale</h2><span id='topic+scale_x_grates_yearquarter'></span>

<h3>Description</h3>

<p>ggplot2 scale for a yearquarter vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_yearquarter(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_yearquarter_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearquarter_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearquarter_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearquarter_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If not NULL then the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist

# calculate quarterly cases by date of infection
x &lt;- as_yearquarter(linelist$date_of_infection)
(dat &lt;- aggregate(list(cases = x), by = list(quarter = x), FUN = length))

# by default labels are centred
(quarter_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(quarter, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw() +
    ggplot2::theme(
        axis.text.x = ggplot2::element_text(
            angle = 45,
            hjust = 1
        )
    ) +
    ggplot2::xlab(""))

# To obtain centred labels you must explicitly set a date format
# in the scale:
quarter_plot + scale_x_grates_yearquarter(format = "%Y-%m-%d")

</code></pre>

<hr>
<h2 id='scale_x_grates_yearweek'>Yearweek scale</h2><span id='topic+scale_x_grates_yearweek'></span><span id='topic+scale_x_grates_yearweek_monday'></span><span id='topic+scale_x_grates_yearweek_isoweek'></span><span id='topic+scale_x_grates_yearweek_tuesday'></span><span id='topic+scale_x_grates_yearweek_wednesday'></span><span id='topic+scale_x_grates_yearweek_thursday'></span><span id='topic+scale_x_grates_yearweek_friday'></span><span id='topic+scale_x_grates_yearweek_saturday'></span><span id='topic+scale_x_grates_yearweek_sunday'></span><span id='topic+scale_x_grates_yearweek_epiweek'></span>

<h3>Description</h3>

<p>ggplot2 scale for an <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_x_grates_yearweek(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6L,
  firstday,
  format = NULL
)

scale_x_grates_yearweek_monday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_isoweek(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_tuesday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_wednesday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_thursday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_friday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_saturday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_sunday(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)

scale_x_grates_yearweek_epiweek(
  ...,
  breaks = ggplot2::waiver(),
  n.breaks = 6,
  format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_x_grates_yearweek_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearweek_+3A_breaks">breaks</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> vector of the desired breaks.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearweek_+3A_n.breaks">n.breaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Approximate number of breaks calculated using <code>scales::breaks_pretty</code>
(default 6L).
</p>
<p>Will only have an effect if <code>breaks = waiver()</code>.</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearweek_+3A_firstday">firstday</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Integer value of the first weekday: 1 (Monday) to 7 (Sunday).</p>
</td></tr>
<tr><td><code id="scale_x_grates_yearweek_+3A_format">format</code></td>
<td>
<p>Format to use if &quot;Date&quot; scales are required.
</p>
<p>If NULL (default) then labels are in the standard yearweek format (YYYY-Www).
</p>
<p>If &quot;week&quot; then the labels are of the form Www (e.g. W37).
</p>
<p>Otherwise the value is used by <code>format.Date()</code> and can be any input
acceptable by that function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale for use with ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use simulated linelist data from the outbreaks package
linelist &lt;- outbreaks::ebola_sim_clean$linelist
x &lt;- as_yearweek(linelist$date_of_infection, firstday = 4)
dat &lt;- aggregate(list(cases = x), by = list(week = x), FUN = length)

# plot the output
(week_plot &lt;-
    ggplot2::ggplot(dat, ggplot2::aes(week, cases)) +
    ggplot2::geom_col(width = 1, colour = "white") +
    ggplot2::theme_bw())

# We can have non-centred date labels on the x_axis by using the
# associated scale function and explicitly specifying a format for the
# date labels and a value for firstday:
week_plot + scale_x_grates_yearweek(format = "%Y-%m-%d", firstday = 4)

</code></pre>

<hr>
<h2 id='year_class'>Year class</h2><span id='topic+year_class'></span><span id='topic+year'></span><span id='topic+as_year'></span><span id='topic+as_year.default'></span><span id='topic+as_year.Date'></span><span id='topic+as_year.POSIXt'></span><span id='topic+as_year.character'></span><span id='topic+as_year.factor'></span><span id='topic+is_year'></span>

<h3>Description</h3>

<p>Years are represented by a <code style="white-space: pre;">&#8288;&lt;grates_year&gt;&#8288;</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year(x = integer())

as_year(x, ...)

## Default S3 method:
as_year(x, ...)

## S3 method for class 'Date'
as_year(x, ...)

## S3 method for class 'POSIXt'
as_year(x, ...)

## S3 method for class 'character'
as_year(x, ...)

## S3 method for class 'factor'
as_year(x, ...)

is_year(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_class_+3A_x">x</code>, <code id="year_class_+3A_object">object</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="year_class_+3A_...">...</code></td>
<td>
<p>Only used For character input where additional arguments are passed through
to <code>as.Date()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>year()</code> takes as input a vector representing, unsurprisingly, the years.
<code>double</code> vectors are coerced via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_yearquarter()</code> is a generic for coercing input in to <code style="white-space: pre;">&#8288;&lt;grates_year&gt;&#8288;</code>.
</p>

<ul>
<li><p> Character input is first parsed using <code>as.Date()</code>.
</p>
</li>
<li><p> POSIXct and POSIXlt are converted with their timezone respected.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_year&gt;&#8288;</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_year(Sys.Date())

# POSIXt coercion
as_year(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# Character coercion
as_year("2019-05-03")

# direct construction
year(2011:2020)

</code></pre>

<hr>
<h2 id='yearmonth_class'>Yearmonth class</h2><span id='topic+yearmonth_class'></span><span id='topic+yearmonth'></span><span id='topic+as_yearmonth'></span><span id='topic+as_yearmonth.default'></span><span id='topic+as_yearmonth.Date'></span><span id='topic+as_yearmonth.POSIXt'></span><span id='topic+as_yearmonth.character'></span><span id='topic+as_yearmonth.factor'></span><span id='topic+new_yearmonth'></span><span id='topic+is_yearmonth'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> objects represent, unsurprisingly, years and associated months.
Internally they are stored as the number of months (starting at 0) since the
Unix Epoch (1970-01-01). Precision is only to the month level (i.e. the day
of the month is always dropped).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>yearmonth(year = integer(), month = integer())

as_yearmonth(x, ...)

## Default S3 method:
as_yearmonth(x, ...)

## S3 method for class 'Date'
as_yearmonth(x, ...)

## S3 method for class 'POSIXt'
as_yearmonth(x, ...)

## S3 method for class 'character'
as_yearmonth(x, ...)

## S3 method for class 'factor'
as_yearmonth(x, ...)

new_yearmonth(x = integer())

is_yearmonth(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="yearmonth_class_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the year associated with <code>month</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearmonth_class_+3A_month">month</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the month associated with <code>year</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearmonth_class_+3A_x">x</code>, <code id="yearmonth_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="yearmonth_class_+3A_...">...</code></td>
<td>
<p>Only used for character input where additional arguments are passed through
to <code>as.Date()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>yearmonth()</code> is a constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> objects. It takes a
vector of year and a vector of month values as inputs. Length 1 inputs will
be recycled to the length of the other input and <code>double</code> vectors will
be converted to integer via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_yearmonth()</code> is a generic for coercing input in to <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code>.
</p>

<ul>
<li><p> Character input is first parsed using <code>as.Date()</code>.
</p>
</li>
<li><p> POSIXct and POSIXlt are converted with their timezone respected.
</p>
</li></ul>

<p><code>new_yearmonth()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> objects
aimed at developers. It takes, as input, the number of months (starting at 0)
since the Unix Epoch, that you wish to represent. <code>double</code> vectors will again
be converted to integer via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearmonth&gt;&#8288;</code> object.
</p>


<h3>References</h3>

<p>The algorithm to convert between dates and months relative to the UNIX Epoch
comes from the work of Davis Vaughan in the unreleased
<a href="https://github.com/DavisVaughan/datea/">datea</a> package
</p>


<h3>See Also</h3>

<p><code>new_month()</code> and <code>as_month()</code> and for grouping of consecutive months.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_yearmonth(Sys.Date())

# POSIXt coercion
as_yearmonth(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# character coercion
as_yearmonth("2019-05-03")

# construction
yearmonth(year = 2000, month = 3)

# direct construction
d &lt;- seq.Date(from = as.Date("1970-01-01"), by = "month", length.out = 10)
stopifnot(
    identical(
        as_yearmonth(d),
        new_yearmonth(0:9)
    )
)

</code></pre>

<hr>
<h2 id='yearquarter_class'>Yearquarter class</h2><span id='topic+yearquarter_class'></span><span id='topic+yearquarter'></span><span id='topic+as_yearquarter'></span><span id='topic+as_yearquarter.default'></span><span id='topic+as_yearquarter.Date'></span><span id='topic+as_yearquarter.POSIXt'></span><span id='topic+as_yearquarter.character'></span><span id='topic+as_yearquarter.factor'></span><span id='topic+new_yearquarter'></span><span id='topic+is_yearquarter'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code> objects represent years and associated quarters
Internally they are stored as the number of quarters (starting at 0) since
the Unix Epoch (1970-01-01).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>yearquarter(year = integer(), quarter = integer())

as_yearquarter(x, ...)

## Default S3 method:
as_yearquarter(x, ...)

## S3 method for class 'Date'
as_yearquarter(x, ...)

## S3 method for class 'POSIXt'
as_yearquarter(x, ...)

## S3 method for class 'character'
as_yearquarter(x, ...)

## S3 method for class 'factor'
as_yearquarter(x, ...)

new_yearquarter(x = integer())

is_yearquarter(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="yearquarter_class_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the year associated with <code>quarter</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearquarter_class_+3A_quarter">quarter</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the quarter associated with <code>year</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearquarter_class_+3A_x">x</code>, <code id="yearquarter_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="yearquarter_class_+3A_...">...</code></td>
<td>
<p>Only used for character input where additional arguments are passed through
to <code>as.Date()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>yearquarter()</code> is a constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code> objects. It takes
a vector of year and a vector of quarter values as inputs. Length 1 inputs
will be recycled to the length of the other input and <code>double</code> vectors will
be converted to integer via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_yearquarter()</code> is a generic for coercing input in to <code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code>.
</p>

<ul>
<li><p> Character input is first parsed using <code>as.Date()</code>.
</p>
</li>
<li><p> POSIXct and POSIXlt are converted with their timezone respected.
</p>
</li></ul>

<p><code>new_yearquarter()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code>
objects aimed at developers. It takes, as input, the number of quarters
(starting at 0) since the Unix Epoch, that you wish to represent.
<code>double</code> vectors will again be converted to integer via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearquarter&gt;&#8288;</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_yearquarter(Sys.Date())

# POSIXt coercion
as_yearquarter(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# character coercion
as_yearquarter("2019-05-03")

# construction
yearquarter(year = 2000, quarter = 3)

# direct construction
d &lt;- seq.Date(from = as.Date("1970-01-01"), by = "quarter", length.out = 4)
stopifnot(
    identical(
        as_yearquarter(d),
        new_yearquarter(0:3)
    )
)


</code></pre>

<hr>
<h2 id='yearweek_class'>Yearweek class</h2><span id='topic+yearweek_class'></span><span id='topic+yearweek'></span><span id='topic+as_yearweek'></span><span id='topic+as_yearweek.default'></span><span id='topic+as_yearweek.Date'></span><span id='topic+as_yearweek.POSIXt'></span><span id='topic+as_yearweek.character'></span><span id='topic+as_yearweek.factor'></span><span id='topic+new_yearweek'></span><span id='topic+is_yearweek'></span>

<h3>Description</h3>

<p>Yearweeks start on a user defined day of the week and span a 7 day
period. For yearweek objects the first week of a &quot;year&quot; is considered to be
the first yearweek containing 4 days of the given calendar year. This means
that the calendar year will sometimes be different to that of the associated
yearweek object.
</p>
<p>Internally, <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> objects are stored as the number of weeks
(starting at 0) from the date of the user-specified <code>firstday</code> nearest the
Unix Epoch (1970-01-01). That is, the number of seven day periods from:
</p>
<div class="sourceCode"><pre>- 1969-12-29 for `firstday` equal to 1 (Monday)
- 1969-12-30 for `firstday` equal to 2 (Tuesday)
- 1969-12-31 for `firstday` equal to 3 (Wednesday)
- 1970-01-01 for `firstday` equal to 4 (Thursday)
- 1970-01-02 for `firstday` equal to 5 (Friday)
- 1970-01-03 for `firstday` equal to 6 (Saturday)
- 1970-01-04 for `firstday` equal to 7 (Sunday)
</pre></div>


<h3>Usage</h3>

<pre><code class='language-R'>yearweek(year = integer(), week = integer(), firstday = 1L)

as_yearweek(x, ...)

## Default S3 method:
as_yearweek(x, ...)

## S3 method for class 'Date'
as_yearweek(x, firstday = 1L, ...)

## S3 method for class 'POSIXt'
as_yearweek(x, firstday = 1L, ...)

## S3 method for class 'character'
as_yearweek(
  x,
  firstday = 1L,
  format,
  tryFormats = c("%Y-%m-%d", "%Y/%m/%d"),
  ...
)

## S3 method for class 'factor'
as_yearweek(
  x,
  firstday = 1L,
  format,
  tryFormats = c("%Y-%m-%d", "%Y/%m/%d"),
  ...
)

new_yearweek(x = integer(), firstday = 1L)

is_yearweek(xx)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="yearweek_class_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the year associated with <code>week</code>.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_week">week</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Vector representing the week associated with 'year.
</p>
<p><code>double</code> vectors will be converted via <code>as.integer(floor(x))</code>.</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_firstday">firstday</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The day the week starts on from 1 (Monday) to 7 (Sunday).</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_x">x</code>, <code id="yearweek_class_+3A_xx">xx</code></td>
<td>
<p><span class="rlang"><b>R</b></span> objects.</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_...">...</code></td>
<td>
<p>Other values passed to as.Date().</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Passed to as.Date() unless <code>format = "yearweek"</code> in which case input is
assumed to be in the form &quot;YYYY-Wxx&quot;.
</p>
<p>If not specified, it will try tryFormats one by one on the first non-NA
element, and give an error if none works. Otherwise, the processing is via
<code>strptime()</code> whose help page describes available conversion specifications.</p>
</td></tr>
<tr><td><code id="yearweek_class_+3A_tryformats">tryFormats</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>Format strings to try if format is not specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>yearweek()</code> is a constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> objects. These are
weeks whose first day can be specified by the user. It takes a
vector of year and vector of week values as inputs. Length 1 inputs will be
recycled to the length of the other input and <code>double</code> vectors will again be
converted to integer via <code>as.integer(floor(x))</code>.
</p>
<p><code>as_yearweek()</code> is a generic for conversion to <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code>.
</p>

<ul>
<li><p> Date, POSIXct, and POSIXlt are converted with the timezone respected.
</p>
</li>
<li><p> Character objects are first coerced to date via <code>as.Date()</code> unless
<code>format = "yearweek"</code> in which case input is assumed to be in the form
&quot;YYYY-Wxx&quot; and parsed accordingly.
</p>
</li></ul>

<p><code>new_yearweek()</code> is a minimal constructor for <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> objects
aimed at developers. It takes, as input, the number of weeks since the
user-specified <code>firstday</code> nearest the Unix Epoch. <code>double</code> vectors
will be converted to integer via <code>as.integer(floor(x))</code>.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;grates_yearweek&gt;&#8288;</code> object with subclass corresponding to the first day of
the week they represent (e.g. <code style="white-space: pre;">&#8288;&lt;grates_yearweek_monday&gt;&#8288;</code>).
</p>


<h3>See Also</h3>

<p><code>new_isoweek()</code> and <code>new_epiweek()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# date coercion
as_yearweek(Sys.Date())

# POSIXt coercion
as_yearweek(as.POSIXct("2019-03-04 01:01:01", tz = "America/New_York"))

# character coercion with Friday as the first day of the week
as_yearweek("2019-05-03", firstday = 5) # first day is Friday

# character coercion in yearweek format
as_yearweek("2019-W12", format = "yearweek")

# construction
yearweek(year = 2000, week = 3)

# direct construction
stopifnot(
    identical(
        new_yearweek(0:1, firstday = 1),
        as_yearweek("1969-12-29", firstday = 1) + 0:1
    )
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
