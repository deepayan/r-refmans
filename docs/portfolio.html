<!DOCTYPE html><html><head><title>Help for package portfolio</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {portfolio}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#assay'><p>Assay Research rankings as of 2004-12-31</p></a></li>
<li><a href='#contribution-class'><p>Class &quot;contribution&quot;</p></a></li>
<li><a href='#dow.jan.2005'><p>DJIA for January, 2005</p></a></li>
<li><a href='#exposure-class'><p>Class &quot;exposure&quot;</p></a></li>
<li><a href='#global.2004'><p>Security data of large global companies for 2004</p></a></li>
<li><a href='#map.market'><p> Create a Map of the Market</p></a></li>
<li><a href='#matchedPortfolio-class'><p>Class &quot;matchedPortfolio&quot;</p></a></li>
<li><a href='#matchedPortfolioCollection-class'><p>Class &quot;matchedPortfolioCollection&quot;</p></a></li>
<li><a href='#performance-class'><p>Class &quot;performance&quot;</p></a></li>
<li><a href='#portfolio-class'><p>Class &quot;portfolio&quot;</p></a></li>
<li><a href='#portfolio-package'>
<p>Analysing equity portfolios</p></a></li>
<li><a href='#portfolioBasic-class'><p>Class &quot;portfolioBasic&quot;</p></a></li>
<li><a href='#tradelist-class'><p>Class &quot;tradelist&quot;</p></a></li>
<li><a href='#trades-class'><p>Class &quot;trades&quot;</p></a></li>
<li><a href='#weight'><p> Calculate Position Weights</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Analysing Equity Portfolios</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5-2</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-07-09</td>
</tr>
<tr>
<td>Description:</td>
<td>Classes for analysing and implementing equity portfolios,
    including routines for generating tradelists and calculating
    exposures to user-specified risk factors.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0), graphics, grid, lattice, methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, nlme, stats, utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dgerlanc/portfolio">https://github.com/dgerlanc/portfolio</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dgerlanc/portfolio/issues">https://github.com/dgerlanc/portfolio/issues</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-07-09 13:05:32 UTC; dgerlanc</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeff Enos [aut],
  David Kane [aut],
  Daniel Gerlanc [aut, cre],
  Kyle Campbell [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Gerlanc &lt;dan@gerlanc.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-10 16:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='assay'>Assay Research rankings as of 2004-12-31</h2><span id='topic+assay'></span>

<h3>Description</h3>

<p>A universe of the 5000 largest global stocks as of 2004-12-31, and a
flag indicating whether a security was ranked by Assay Research at
that time.
</p>
<p>Special thanks to Assay Research for granting us permission to release
this data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(assay)</code></pre>


<h3>Format</h3>

<p>A data frame with 5000 observations on the following 11 variables.
</p>

<dl>
<dt><code>date</code></dt><dd><p>A vector containing a single <code>Date</code>: <code>2004-12-31</code>.</p>
</dd>
<dt><code>id</code></dt><dd><p>A <code>character</code> vector of SEDOLs and CUSIPs.</p>
</dd>
<dt><code>symbol</code></dt><dd><p>A <code>character</code> vector of symbols.</p>
</dd>
<dt><code>name</code></dt><dd><p>A <code>character</code> vector of the names of the companies.</p>
</dd>
<dt><code>country</code></dt><dd><p>A <code>factor</code> with levels <code>AUS</code> <code>AUT</code> <code>BEL</code> <code>CHE</code> <code>DEU</code> <code>DNK</code> <code>ESP</code> <code>FIN</code> <code>FRA</code> <code>GBR</code> <code>HKG</code> <code>ITA</code> <code>JPN</code> <code>NLD</code> <code>NOR</code> <code>NZL</code> <code>SGP</code> <code>SWE</code> <code>USA</code>.</p>
</dd>
<dt><code>currency</code></dt><dd><p>A <code>factor</code> with levels <code>AUD</code> <code>CHF</code> <code>DKK</code> <code>EUR</code> <code>GBP</code> <code>HKD</code> <code>JPY</code> <code>NOK</code> <code>NZD</code> <code>SEK</code> <code>SGD</code> <code>USD</code>.</p>
</dd>
<dt><code>price</code></dt><dd><p>A <code>numeric</code> vector of prices.</p>
</dd>
<dt><code>sector</code></dt><dd><p>A <code>factor</code> with levels <code>Communications</code> <code>Conglomerates</code> <code>Cyclicals</code> <code>Energy</code> <code>Financials</code> <code>Industrials</code> <code>Materials</code> <code>Staples</code> <code>Technology</code> <code>Utilities</code></p>
</dd>
<dt><code>sec</code></dt><dd><p>An alternative sector specification. This factor has levels <code>CND</code>, <code>CNS</code>, <code>COM</code>, <code>ENE</code>, <code>FIN</code>, <code>HTH</code>, <code>IND</code>, <code>MAT</code>, <code>TEC</code> and <code>UTL</code>.</p>
</dd>
<dt><code>ind</code></dt><dd><p>Industry specification. This factor has levels <code>AERDF</code>, <code>AIRLN</code>, <code>AUTOP</code>, <code>AUTOS</code>, <code>BANKS</code>, <code>BEVGS</code>, <code>BIOTC</code>, <code>BUILD</code>, <code>CHEMS</code>, <code>CNENG</code>, <code>CNFIN</code>, <code>CNMAT</code>, <code>COMEQ</code>, <code>COMPT</code>, <code>COMSS</code>, <code>CONGL</code>, <code>CPMKT</code>, <code>DICNS</code>, <code>DISTR</code>, <code>DVFIN</code>, <code>DVTEL</code>, <code>ELEQI</code>, <code>ELEQT</code>, <code>ELUTL</code>, <code>ENEQS</code>, <code>FDPRD</code>, <code>FDRET</code>, <code>GSUTL</code>, <code>HEPSV</code>, <code>HEQSP</code>, <code>HETEC</code>, <code>HOTEL</code>, <code>HSDUR</code>, <code>HSPRD</code>, <code>INSUR</code>, <code>INTSS</code>, <code>IPPET</code>, <code>ITCAT</code>, <code>ITCON</code>, <code>LEISR</code>, <code>LFSCI</code>, <code>LOGIS</code>, <code>MACHN</code>, <code>MEDIA</code>, <code>METAL</code>, <code>MGFIN</code>, <code>MLRET</code>, <code>MLUTL</code>, <code>OFFIC</code>, <code>OILGS</code>, <code>PACKG</code>, <code>PAPER</code>, <code>PHARM</code>, <code>PRPRD</code>, <code>REALE</code>, <code>REDEV</code>, <code>REITS</code>, <code>RRAIL</code>, <code>SEMIP</code>, <code>SEMIS</code>, <code>SHIPS</code>, <code>SMOKE</code>, <code>SOFTW</code>, <code>SPRET</code>, <code>TEXAP</code>, <code>TRADE</code>, <code>TRINF</code>, <code>WIREL</code> and <code>WTUTL</code></p>
</dd>
<dt><code>liq</code></dt><dd><p>A <code>numeric</code> vector of liquidities.</p>
</dd>
<dt><code>on.fl</code></dt><dd><p>A <code>logical</code> vector indicating presence on the
Assay Focus List as of 2004-12-31.</p>
</dd>
<dt><code>ret.0.1.m</code></dt><dd><p>A <code>numeric</code> vector of one-month forward returns</p>
</dd>
<dt><code>ret.0.3.m</code></dt><dd><p>A <code>numeric</code> vector of three-month forward returns</p>
</dd>
<dt><code>ret.0.6.m</code></dt><dd><p>A <code>numeric</code> vector of one-month forward returns</p>
</dd>
<dt><code>ret.1.0.m</code></dt><dd><p>A <code>numeric</code> vector of one-month prior returns</p>
</dd>
<dt><code>ret.6.0.m</code></dt><dd><p>A <code>numeric</code> vector of six-month prior returns</p>
</dd>
<dt><code>ret.12.0.m</code></dt><dd><p>A <code>numeric</code> vector of twelve-month prior returns</p>
</dd>
<dt><code>mn.dollar.volume.20.d</code></dt><dd><p>A <code>numeric</code> vector of mean dollar volumes of the past 20 days</p>
</dd>
<dt><code>md.dollar.volume.120.d</code></dt><dd><p>A <code>numeric</code> vector of median dollar volumes of the past 120 days</p>
</dd>
<dt><code>cap.usd</code></dt><dd><p>A <code>numeric</code> vector of market capitalisation in USD.</p>
</dd>
<dt><code>cap</code></dt><dd><p>A <code>numeric</code> vector of market capitalisation in local currency.</p>
</dd>
<dt><code>sales</code></dt><dd><p>Annual gross sales of the company.</p>
</dd>   
<dt><code>net.income</code></dt><dd><p>Annual net income of the company.</p>
</dd>       
<dt><code>common.equity</code></dt><dd><p>Annual common equity of the company.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(assay)
</code></pre>

<hr>
<h2 id='contribution-class'>Class &quot;contribution&quot;</h2><span id='topic+contribution-class'></span><span id='topic+plot+2Ccontribution+2Cmissing-method'></span><span id='topic+show+2Ccontribution-method'></span><span id='topic+summary+2Ccontribution-method'></span>

<h3>Description</h3>

<p>Portfolio contribution of numeric measures (intervals) and categories.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("contribution", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"list"</code> containing
contributions, as data.frame objects.  The names of this list
correspond to the category variable names. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>plot</dt><dd><p><code>signature(x = "contribution", y = "missing")</code>: Plot
this object. </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "contribution")</code>: show this
object, briefly. </p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "contribution")</code>: display a
summary of this object. </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p> Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>

<hr>
<h2 id='dow.jan.2005'>DJIA for January, 2005</h2><span id='topic+dow.jan.2005'></span>

<h3>Description</h3>

<p>Basic descriptive and market data for those securities in the DJIA as
of the end of January, 2005.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(dow.jan.2005)</code></pre>


<h3>Format</h3>

<p>A data frame with 500 observations on the following 15 variables.
</p>

<dl>
<dt><code>symbol</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>name</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>cap.bil</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>price</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sector</code></dt><dd><p>a factor with levels <code>Communications</code>
<code>Conglomerates</code> <code>Cyclicals</code> <code>Energy</code>
<code>Financials</code> <code>Industrials</code> <code>Materials</code> <code>Staples</code>
<code>Technology</code> <code>Utilities</code></p>
</dd>
<dt><code>month.ret</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(dow.jan.2005)
</code></pre>

<hr>
<h2 id='exposure-class'>Class &quot;exposure&quot;</h2><span id='topic+exposure-class'></span><span id='topic+plot+2Cexposure+2Cmissing-method'></span><span id='topic+show+2Cexposure-method'></span><span id='topic+summary+2Cexposure-method'></span>

<h3>Description</h3>

<p>Portfolio exposures to numeric measures and categories.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("exposure", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"list"</code> containing
exposures, as data.frame objects.  The names of this list
correspond to the exposure variable names.  The special exposure
&quot;numeric&quot; contains exposures to all numeric variables. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>plot</dt><dd><p><code>signature(x = "exposure", y = "missing")</code>: Plot
this object. </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "exposure")</code>: show the object,
briefly. </p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "exposure")</code>: display a
summary of this object. </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p> Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>

<hr>
<h2 id='global.2004'>Security data of large global companies for 2004</h2><span id='topic+global.2004'></span>

<h3>Description</h3>

<p>Contains basic security, category, and return information for a
selection of large companies for each month of 2004.  While 500
companies are included each month, the set of companies changes each
month.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(global.2004)</code></pre>


<h3>Format</h3>

<p>A data frame with 6000 observations on the following 16 variables.
</p>

<dl>
<dt><code>date</code></dt><dd><p>a Date</p>
</dd>
<dt><code>id</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>symbol</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>name</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>country</code></dt><dd><p>a factor with levels <code>AUS</code> <code>AUT</code>
<code>BEL</code> <code>CHE</code> <code>DEU</code> <code>DNK</code> <code>ESP</code> <code>FIN</code>
<code>FRA</code> <code>GBR</code> <code>HKG</code> <code>ITA</code> <code>JPN</code> <code>NLD</code>
<code>NOR</code> <code>SGP</code> <code>SWE</code> <code>USA</code></p>
</dd>
<dt><code>currency</code></dt><dd><p>a factor with levels <code>AUD</code> <code>CHF</code>
<code>DKK</code> <code>EUR</code> <code>GBP</code> <code>HKD</code> <code>JPY</code> <code>NOK</code>
<code>SEK</code> <code>SGD</code> <code>USD</code></p>
</dd>
<dt><code>cap</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>cap.usd</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>cap.bil</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>price</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>price.usd</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>round.lot</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sector</code></dt><dd><p>a factor with levels <code>Communications</code>
<code>Conglomerates</code> <code>Cyclicals</code> <code>Energy</code>
<code>Financials</code> <code>Industrials</code> <code>Materials</code> <code>Staples</code>
<code>Technology</code> <code>Utilities</code></p>
</dd>
<dt><code>liquidity</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>liq.w</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>volume</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>avg.volume</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ret.0.1.m</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(global.2004)
</code></pre>

<hr>
<h2 id='map.market'> Create a Map of the Market </h2><span id='topic+map.market'></span>

<h3>Description</h3>

<p>Utility function for creating a &quot;map of the market&quot; visualization.
Creates a treemap where rectangular regions of different size, color,
and groupings visualize the stocks in a portfolio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map.market(id, area, group, color,
           scale = NULL,
           lab   = c("group"=TRUE, "id"=FALSE),
           main  = "Map of the Market",
           print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map.market_+3A_id">id</code></td>
<td>
<p> A vector storing the labels to be used for each stock. </p>
</td></tr>
<tr><td><code id="map.market_+3A_area">area</code></td>
<td>
<p> A vector storing the values to be used to calculate the
areas of rectangles. </p>
</td></tr>
<tr><td><code id="map.market_+3A_group">group</code></td>
<td>
<p> A vector specifying the group (i.e. country, sector,
etc.) to which each stock belongs. </p>
</td></tr>
<tr><td><code id="map.market_+3A_color">color</code></td>
<td>
<p> A vector storing the values to be used to calculate the
color of rectangles. </p>
</td></tr>
<tr><td><code id="map.market_+3A_scale">scale</code></td>
<td>
<p> An object of class <code>numeric</code> indicating the scale
to be used in determining colors.</p>
</td></tr>
<tr><td><code id="map.market_+3A_lab">lab</code></td>
<td>
<p> A logical vector of length 2 specifying whether group and 
stock labels should be drawn.  If the two values are the same, the
second may be omitted.
</p>
</td></tr>
<tr><td><code id="map.market_+3A_main">main</code></td>
<td>
<p>A title for the plot.</p>
</td></tr>
<tr><td><code id="map.market_+3A_print">print</code></td>
<td>
<p> An object of class <code>logical</code> indicating whether the
map should be drawn. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dow.jan.2005)
map.market(id    = dow.jan.2005$symbol,
           area  = dow.jan.2005$price,
           group = dow.jan.2005$sector,
           color = 100 * dow.jan.2005$month.ret)

</code></pre>

<hr>
<h2 id='matchedPortfolio-class'>Class &quot;matchedPortfolio&quot;</h2><span id='topic+matchedPortfolio-class'></span><span id='topic+show+2CmatchedPortfolio-method'></span><span id='topic+summary+2CmatchedPortfolio-method'></span><span id='topic+performance+2CmatchedPortfolio-method'></span><span id='topic+exposure+2CmatchedPortfolio+2Ccharacter-method'></span><span id='topic+contribution+2CmatchedPortfolio+2Ccharacter-method'></span><span id='topic+plot+2CmatchedPortfolio+2Cmissing-method'></span>

<h3>Description</h3>

<p>An object of the class &quot;matchedPortfolio&quot; that contains an
object of class &quot;portfolioBasic&quot; and a matrix of weights for
portfolios that have been matched to the &quot;portfolioBasic&quot; according to
variables specified in a formula.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("matchedPortfolio", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>formula</code>:</dt><dd><p>an object of class <code>formula</code> specifying
the treatment variable and the covariates on which to match.
</p>
</dd>
<dt><code>original</code>:</dt><dd><p>an object of class <code>"portfolioBasic"</code>,
the attributes of which will be used for matching.
</p>
</dd>
<dt><code>matches</code>:</dt><dd><p>Object of class <code>"matrix"</code> with a column
for each matched portfolio.
</p>
</dd>
<dt><code>method</code>:</dt><dd><p>Object of class <code>"character"</code> specifying
the matching method used to generate the matched portfolio.
</p>
</dd>
<dt><code>omitted.control</code>:</dt><dd><p>Object of class <code>"numeric"</code>
containing the number of observations omitted from the control.
</p>
</dd>
<dt><code>omitted.treatment</code>:</dt><dd><p>Object of class <code>"numeric"</code>
containing the number of observations omitted from the treatment.
</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>show</dt><dd><p><code>signature(object = "matchedPortfolio")</code>: prints basic
information about the <code>original</code> portfolio and its matches.
</p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "matchedPortfolio")</code>: prints detailed
information about the <code>original</code> portfolio and its matches.
</p>
</dd>
<dt>performance</dt><dd><p><code>signature(object = "matchedPortfolio")</code>:
calculates the mean performance across all matched portfolios.
</p>
</dd>
<dt>exposure</dt><dd><p><code>signature(object = "matchedPortfolio", exp.var
      = "character")</code>: calculates the exposure across each variable
in <code>exp.var</code>.
</p>
</dd> 
<dt>contribution</dt><dd><p><code>signature(object = "matchedPortfolio", contrib.var
      = "character")</code>: calculates the contribution across each variable
in <code>contrib.var</code>.
</p>
</dd>
<dt>plot</dt><dd><p><code>signature(x = "matchedPortfolio", y = "missing")</code>:
graphs <code>exposure</code> and <code>contribution</code>.
</p>
</dd>
</dl>



<h3>Details</h3>

<p>The <code>matches</code> matrix contains as many rows as there are stocks in
the <code>data</code> slot of <code>original</code> and as many columns as there
are matched portfolios.  The row labels of the matrix are the values of
<code>original@data[["id.var"]]</code> and each column is a matched
portfolio.  The cell values are the weights of the stock in the
portfolio.
</p>


<h3>Author(s)</h3>

<p>Daniel Gerlanc <a href="mailto:dgerlanc@gmail.com">dgerlanc@gmail.com</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+portfolioBasic-class">portfolioBasic-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
m.p &lt;- new("matchedPortfolio")

</code></pre>

<hr>
<h2 id='matchedPortfolioCollection-class'>Class &quot;matchedPortfolioCollection&quot;</h2><span id='topic+matchedPortfolioCollection-class'></span><span id='topic+summary+2CmatchedPortfolioCollection-method'></span><span id='topic+plot+2CmatchedPortfolioCollection+2Cmissing-method'></span><span id='topic+matching+2Cdata.frame-method'></span>

<h3>Description</h3>

<p> A collection of objects of class <code>matchedPortfolio</code>.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("matchedPortfolioCollection", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"list"</code> A list of objects
of class <code>matchedPortfolio</code>. </p>
</dd>
</dl>



<h3>Methods</h3>

<p>No methods defined with class &quot;matchedPortfolioCollection&quot; in the signature.
</p>


<h3>Author(s)</h3>

<p>Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>

<hr>
<h2 id='performance-class'>Class &quot;performance&quot;</h2><span id='topic+performance-class'></span><span id='topic+plot+2Cperformance+2Cmissing-method'></span><span id='topic+initialize+2Cperformance-method'></span><span id='topic+show+2Cperformance-method'></span><span id='topic+summary+2Cperformance-method'></span>

<h3>Description</h3>

<p>Return, per-security return, and exposed portfolio object
for one period.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("performance", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>ret</code>:</dt><dd><p>Object of class <code>"numeric"</code> containing the
total return for the period. </p>
</dd>
<dt><code>profit</code>:</dt><dd><p>Object of class <code>"numeric"</code> containing
the profit for the period, as a monetary amount.</p>
</dd>
<dt><code>missing.price</code>:</dt><dd><p>Object of class <code>"numeric"</code>
containing the number of missing prices encountered during
performance calculation.</p>
</dd>
<dt><code>missing.return</code>:</dt><dd><p>Object of class <code>"numeric"</code>
containing the number of missing returns encountered during
performance calculation.</p>
</dd>
<dt><code>ret.detail</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
containing the per-security return detail for the period. </p>
</dd>
<dt><code>t.plus.one</code>:</dt><dd><p>Object of class <code>"portfolioBasic"</code>
containing the portfolio at the end of the period. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>plot</dt><dd><p><code>signature(x = "performance", y = "missing")</code>: Plot
this object. </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "performance")</code>: show this
object, briefly. </p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "performance")</code>: display a
summary of this object. </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p> Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>

<hr>
<h2 id='portfolio-class'>Class &quot;portfolio&quot;</h2><span id='topic+portfolio-class'></span><span id='topic++2B+2Cportfolio+2Cportfolio-method'></span><span id='topic+all.equal+2Cportfolio+2Cportfolio-method'></span><span id='topic+calcShares+2Cportfolio-method'></span><span id='topic+calcWeights+2Cportfolio-method'></span><span id='topic+contribution+2Cportfolio+2Ccharacter-method'></span><span id='topic+create+2Cportfolio-method'></span><span id='topic+securityInfo+2Cportfolio+2Ccharacter-method'></span><span id='topic+getYahooData+2Cportfolio+2Ccharacter-method'></span><span id='topic+expandData+2Cportfolio-method'></span><span id='topic+expose+2Cportfolio+2Ctrades-method'></span><span id='topic+initialize+2Cportfolio-method'></span><span id='topic+performance+2Cportfolio-method'></span><span id='topic+portfolioDiff+2Cportfolio+2Cportfolio-method'></span><span id='topic+updatePrices+2Cportfolio+2Ccharacter+2Cnumeric-method'></span><span id='topic+summary+2Cportfolio-method'></span><span id='topic+calcShares'></span><span id='topic+calcWeights'></span><span id='topic+securityInfo'></span><span id='topic+getYahooData'></span><span id='topic+expandData'></span><span id='topic+expose'></span><span id='topic+updatePrices'></span><span id='topic+portfolioOrNull-class'></span>

<h3>Description</h3>

<p> Class &quot;portfolio&quot; extends class &quot;portfolioBasic&quot; to include
price and share information. Price information must
be included in the supplementary &quot;data&quot; slot.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("portfolio", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>equity</code>:</dt><dd><p>Object of class <code>"numeric"</code> containing
the equity for this portfolio.e</p>
</dd>
<dt><code>file</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the file from which this portfolio was loaded, if applicable. </p>
</dd>
<dt><code>price.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the &quot;data&quot; slot to be used in
share and weight calculations.</p>
</dd>
<dt><code>shares</code>:</dt><dd><p>Object of class <code>"data.frame"</code> containing
a data frame of shares for each position.  Must have a unique column
called &quot;id&quot;.</p>
</dd>
<dt><code>name</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name for this portfolio.</p>
</dd>
<dt><code>instant</code>:</dt><dd><p>Object of class <code>"ANY"</code> containing the
instant to which the portfolio pertains.</p>
</dd>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"data.frame"</code> containing
supplementary information about the positions in this portfolio.
Must include a unique &quot;id&quot; column.  </p>
</dd>
<dt><code>id.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the <code>data</code> slot to be used as
a unique identifier. </p>
</dd>
<dt><code>symbol.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the &quot;data&quot; slot to be used as
a descriptive symbol. </p>
</dd>
<dt><code>in.var</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name of the column in the &quot;data&quot; slot to be used as a rank
vector in calls to <code>create</code>. </p>
</dd>
<dt><code>weight.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the &quot;data&quot; slot to be used as
weight overrides in calls to <code>create</code>.</p>
</dd>
<dt><code>weight.style</code>:</dt><dd><p>Object of class <code>"character"</code>
specifying how to calculate weights in this portfolio.  Valid
entries are:
</p>

<ul>
<li> <p><code>"sides.separate"</code>: The default.  Calculate weight of a
position with respect to the total market value of positions on the
same side.
</p>
</li>
<li> <p><code>"long.tmv"</code>: Calculate weight of a
position with respect to the total market value of long positions.
</p>
</li>
<li> <p><code>"short.tmv"</code>: Calculate weight of a
position with respect to the (positive) total market value of short
positions.
</p>
</li>
<li> <p><code>"reference.equity"</code>: Calculate weight of a position
relative to the reference equity in the <code>equity</code> slot.  The
<code>equity</code> slot must contain a numeric vector of length 1 for
this style.
</p>
</li></ul>

</dd>
<dt><code>ret.var</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name of the column in the &quot;data&quot; slot to be used as the return
in calls to <code>performance</code>.</p>
</dd>
<dt><code>type</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the type of weight formation to use in calls to <code>create</code>.
May be one of &quot;relative&quot;, &quot;equal&quot;, &quot;linear&quot;, &quot;sigmoid&quot;,
&quot;centroid&quot;, or &quot;complex&quot;.
Defaults to <code>equal</code>. </p>
</dd>
<dt><code>size</code>:</dt><dd><p>Object of class <code>"characterOrNumeric"</code>
containing the size of the portfolio to use in calls to
<code>create</code>.  May either contain the number of securities per
side or one of &quot;decile&quot;, &quot;quintile&quot;, &quot;quartile&quot;, &quot;tercile&quot;, or
&quot;demile&quot;.  Defaults to <code>quintile</code>. </p>
</dd>
<dt><code>weights</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
containing the data frame of weights for this portfolio's
positions.  Must contain a unique column called &quot;id&quot;. </p>
</dd>
</dl>



<h3>Extends</h3>

<p>Class <code>"portfolioBasic"</code>, directly.
</p>


<h3>Methods</h3>


<dl>
<dt>+</dt><dd><p><code>signature(e1 = "portfolio", e2 = "portfolio")</code></p>
</dd>
<dt>all.equal</dt><dd><p><code>signature(target = "portfolio", current
	= "portfolio")</code>: Compare two <code>portfolio</code> objects for
&quot;near equality&quot;.  Two <code>portfolio</code> objects are <code>all.equal</code> iff
they are <code>all.equal</code> as <code>portfolioBasic</code> objects, their
<code>shares</code> slots contain exactly the same set of securities and
shares vectors that are <code>all.equal</code>.</p>
</dd>
<dt>calcShares</dt><dd><p><code>signature(object = "portfolio")</code>: calculate
shares from price and weight information, and store the results in
the <code>shares</code> slot.</p>
</dd>
<dt>calcWeights</dt><dd><p><code>signature(object = "portfolio")</code>: calculate
weights from share and price information, and store the results in
the <code>weights</code> slot.</p>
</dd>
<dt>create</dt><dd><p><code>signature(object = "portfolio")</code>: create a
portfolio object in the same manner as <code>portfolioBasic</code>, but
also compute share amounts.</p>
</dd>
<dt>expandData</dt><dd><p><code>signature(object = "portfolio")</code>: ... </p>
</dd>
<dt>expose</dt><dd><p><code>signature(object = "portfolio", trades =
	"trades")</code>: ... </p>
</dd>
<dt>getYahooData</dt><dd><p><code>signature(object = "portfolio", symbol.var
	= "character")</code>: ... </p>
</dd>
<dt>performance</dt><dd><p><code>signature(object = "portfolio")</code>: ... </p>
</dd>
<dt>securityInfo</dt><dd><p><code>signature(object = "portfolio", id =
	"character")</code>: display information about position <code>id</code>
within this portfolio. </p>
</dd>
<dt>getYahooData</dt><dd><p><code>signature(object = "portfolio", symbol.var
	= "character")</code>: Returns data for P/E Ratio, Book Value, Market Cap,
Price/Book, and Price/Sales.</p>
</dd>
<dt>updatePrices</dt><dd><p><code>signature(object = "portfolio", id =
	"character", price = "numeric")</code>: ... </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>

<hr>
<h2 id='portfolio-package'>
Analysing equity portfolios
</h2><span id='topic+portfolio-package'></span><span id='topic+portfolio'></span>

<h3>Description</h3>

<p>Classes for analysing and implementing equity portfolios.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> portfolio</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.4-5</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2010-02-18</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 2.4.0), methods, graphics, grid, lattice, nlme</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Index:
</p>
<pre>
assay                   Assay Research rankings as of 2004-12-31
contribution-class      Class "contribution"
dow.jan.2005            DJIA for January, 2005
exposure-class          Class "exposure"
global.2004             Security data of large global companies for
                        2004
map.market              Create a Map of the Market
matchedPortfolio-class
                        Class "matchedPortfolio"
matchedPortfolioCollection-class
                        Class "matchedPortfolioCollection"
performance-class       Class "performance"
portfolio-class         Class "portfolio"
portfolio-package       Analysing equity portfolios
portfolioBasic-class    Class "portfolioBasic"
tradelist-class         Class "tradelist"
trades-class            Class "trades"
weight                  Calculate Position Weights
</pre>
<p>Further information is available in the following vignettes:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>matching_portfolio</code> </td><td style="text-align: left;"> Matching Portfolios (source, pdf)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>portfolio</code> </td><td style="text-align: left;"> Using the portfolio package (source, pdf)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>tradelist</code> </td><td style="text-align: left;"> Using the tradelist class (source, pdf)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Jeff Enos &lt;jeff@kanecap.com&gt; and David Kane &lt;dave@kanecap.com&gt;,
with contributions from Daniel Gerlanc &lt;daniel@gerlanc.com&gt; and
Kyle Campbell &lt;Kyle.W.Campbell@williams.edu&gt;
</p>
<p>Maintainer: Jeff Enos &lt;jeff@kanecap.com&gt;
</p>

<hr>
<h2 id='portfolioBasic-class'>Class &quot;portfolioBasic&quot;</h2><span id='topic+portfolioBasic-class'></span><span id='topic++2B+2CportfolioBasic+2CportfolioBasic-method'></span><span id='topic+all.equal+2CportfolioBasic+2CportfolioBasic-method'></span><span id='topic+balance+2CportfolioBasic+2Ccharacter-method'></span><span id='topic+contribution+2CportfolioBasic+2Ccharacter-method'></span><span id='topic+create+2CportfolioBasic-method'></span><span id='topic+exposure+2CportfolioBasic+2Ccharacter-method'></span><span id='topic+matching+2CportfolioBasic-method'></span><span id='topic+performance+2CportfolioBasic-method'></span><span id='topic+plot+2CportfolioBasic+2Cmissing-method'></span><span id='topic+portfolioDiff+2CportfolioBasic+2CportfolioBasic-method'></span><span id='topic+scaleWeights+2CportfolioBasic-method'></span><span id='topic+show+2CportfolioBasic-method'></span><span id='topic+summary+2CportfolioBasic-method'></span><span id='topic+initialize+2CportfolioBasic-method'></span><span id='topic+mapMarket+2CportfolioBasic-method'></span><span id='topic+balance'></span><span id='topic+contribution'></span><span id='topic+create'></span><span id='topic+exposure'></span><span id='topic+matching'></span><span id='topic+performance'></span><span id='topic+portfolioDiff'></span><span id='topic+scaleWeights'></span><span id='topic+mapMarket'></span><span id='topic+portfolioBasicOrNull-class'></span>

<h3>Description</h3>

<p>An object of the lightweight class &quot;portfolioBasic&quot; contains a data frame
of weights and a data frame of supplementary information.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("portfolioBasic", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name of this portfolio. </p>
</dd>
<dt><code>instant</code>:</dt><dd><p>Object of class <code>"ANY"</code> containing an
instant to which this portfolio pertains.</p>
</dd>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"data.frame"</code> containing
supplementary information about the positions in this portfolio.
Must include a unique column specified in the <code>id.var</code> slot. </p>
</dd>
<dt><code>id.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the <code>data</code> slot to be used as
a unique identifier. </p>
</dd>
<dt><code>symbol.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the <code>data</code> slot to be used as
a descriptive symbol. </p>
</dd>
<dt><code>in.var</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name of the column in the <code>data</code> slot to be used as a rank
vector in calls to <code>create</code>.</p>
</dd>
<dt><code>weight.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the <code>data</code> slot to be used as
weight overrides in calls to <code>create</code>. </p>
</dd>
<dt><code>ret.var</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the name of the column in the <code>data</code> slot to be used as the return
in calls to <code>performance</code>.</p>
</dd>
<dt><code>type</code>:</dt><dd><p>Object of class <code>"character"</code> containing
the type of weight formation to use in calls to <code>create</code>.
May be one of &quot;relative&quot;, &quot;equal&quot;, &quot;linear&quot;, &quot;sigmoid&quot;,
&quot;centroid&quot;, or &quot;complex&quot;.
Defaults to <code>equal</code>. </p>
</dd>
<dt><code>size</code>:</dt><dd><p>Object of class <code>"characterOrNumeric"</code>
containing the size of the portfolio to use in calls to
<code>create</code>.  May either contain the number of securities per
side or one of &quot;decile&quot;, &quot;quintile&quot;, &quot;quartile&quot;, &quot;tercile&quot;, or
&quot;demile&quot;.  Defaults to <code>quintile</code>. </p>
</dd>
<dt><code>weights</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
containing the data frame of weights for this portfolio's
positions.  Must contain a unique column called &quot;id&quot;. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>+</dt><dd><p><code>signature(e1 = "portfolioBasic", e2 = "portfolioBasic")</code></p>
</dd>
<dt>all.equal</dt><dd><p><code>signature(target = "portfolioBasic", current
	= "portfolioBasic")</code>: Compare two <code>portfolioBasic</code> objects for
&quot;near equality&quot;.  Two <code>portfolioBasic</code> objects are
<code>all.equal</code> iff their <code>weights</code> slots contain exactly
the same set of securities and weight vectors that are <code>all.equal</code>.</p>
</dd>
<dt>balance</dt><dd><p><code>signature(object = "portfolioBasic", in.var = "character")</code>:
balances the positions in portfolio <code>object</code> to be neutral to
the categories specified by column <code>in.var</code> in the <code>data</code> slot.</p>
</dd>
<dt>contribution</dt><dd><p><code>signature(object = "portfolioBasic",
	contrib.var = "character")</code>: returns one data.frame with
contribution analysis for each element of <code>contrib.var</code>.  All
results are returned in a list.</p>
</dd>
<dt>create</dt><dd><p><code>signature(object = "portfolioBasic")</code>: use this
object's creation parameters (such as in slots <code>size</code> and
<code>type</code>) to create and return a new object of class
<code>portfolioBasic</code>.</p>
</dd>
<dt>exposure</dt><dd><p><code>signature(object = "portfolioBasic", exp.var
	= "character")</code>: returns one data.frame with
exposure analysis for each element of <code>contrib.var</code>.  All
results are returned in a list. </p>
</dd>
<dt>matching</dt><dd><p><code>signature(object = "portfolioBasic",
	covariates = "character"</code>: returns a <code>matchedPortfolio</code> object
containing <code>n.matches</code> matched portfolios.  <code>object</code> is the
<code>portfolioBasic</code> to be matched.  <code>covariates</code> is a
character vector of the attributes on which to match.  
</p>
</dd>
<dt>performance</dt><dd><p><code>signature(object = "portfolioBasic")</code>:
returns a list containing performance results. </p>
</dd>
<dt>plot</dt><dd><p><code>signature(x = "portfolioBasic", y = "missing")</code>: Plot
this object. </p>
</dd>
<dt>portfolioDiff</dt><dd><p><code>signature(object = "portfolioBasic", x =
	"portfolioBasic")</code>: computes the difference, as a
<code>portfolioBasic</code> object, between two portfolios. </p>
</dd>
<dt>scaleWeights</dt><dd><p><code>signature(object = "portfolioBasic")</code>:
scale weights to the weights supplied in the <code>target</code>
parameter.  To restrict the set of positions whose weights are
scaled, use the <code>condition</code> argument. </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "portfolioBasic")</code>: display
this object, briefly. </p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "portfolioBasic")</code>: display
descriptive information about this portfolio. </p>
</dd>
<dt>initialize</dt><dd><p><code>signature(object = "portfolioBasic")</code>:
initialize the portfolio by calling <code>create</code>. </p>
</dd>
<dt>mapMarket</dt><dd><p><code>signature(object = "portfolioBasic")</code>: create
a map of the market plot of the portfolio. </p>
</dd>
</dl>



<h3>Matched portfolios</h3>

<p>The <code>matching</code> method allows one to benchmark a portfolio against
a similar portfolio formed from other stocks in the universe.  The
universe consists of all the stocks in the <code>data</code> slot of
<code>original</code>.
</p>
<p><code>matching</code> calculates a propensity score for each stock in the
universe.  <code>covariates</code> determines which attributes are used to
calculate the propensity score.  <code>covariates</code> must refer to the
names of columns in the <code>data</code> slot of <code>original</code>.
</p>
<p>Matching accepts an optional argument, <code>method</code>, which sets the
algorithm for determining the best match for each
stock.  There are 2 available algorithms, <code>"greedy"</code> and
<code>"sample"</code>.  <code>"greedy"</code> is the default and generates 1
matched portfolio.  <code>"sample"</code> randomly matches each stock
in <code>original</code> with one of the stocks in the universe.  Although the matching is random,
stocks in <code>original</code> are most likely to be matched with stocks
having similar propensity scores.
</p>
<p><code>n.matches</code> is another optional argument to <code>matching</code> which
determines the number of matched portfolios to generate.  Requesting
more than 1 matched portfolio.  (<code>n.matches &gt; 1</code>) while using
<code>greedy</code> is not allowed.  When using <code>sample</code>, there is
no bound on <code>n.matches</code>.
</p>


<h3>Author(s)</h3>

<p>Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a> with contributions from
Daniel Gerlanc <a href="mailto:dgerlanc@gmail.com">dgerlanc@gmail.com</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dow.jan.2005)

p &lt;- new("portfolioBasic",
         id.var = "symbol",
         in.var = "price",
         sides = "long",
         ret.var = "month.ret",
         data = dow.jan.2005)

summary(p)

exposure(p, exp.var = c("price", "sector"))
performance(p)
contribution(p, contrib.var = c("cap.bil", "sector"))

p &lt;- new("portfolioBasic",
         id.var = "symbol",
         in.var = "price",
         type = "linear",
         sides = c("long", "short"),
         ret.var = "month.ret",
         data = dow.jan.2005)

summary(p)

exposure(p, exp.var = c("price", "sector"))
performance(p)
contribution(p, contrib.var = c("cap.bil","sector"))
</code></pre>

<hr>
<h2 id='tradelist-class'>Class &quot;tradelist&quot;</h2><span id='topic+tradelist-class'></span><span id='topic+tradelist'></span><span id='topic+actualCols+2Ctradelist-method'></span><span id='topic+calcActual+2Ctradelist-method'></span><span id='topic+calcCandidates+2Ctradelist+2Cportfolio+2Cportfolio-method'></span><span id='topic+calcChunksActual+2Ctradelist-method'></span><span id='topic+calcChunks+2Ctradelist-method'></span><span id='topic+calcSwapsActual+2Ctradelist-method'></span><span id='topic+calcSwaps+2Ctradelist-method'></span><span id='topic+calcRanks+2Ctradelist-method'></span><span id='topic+candidatesCols+2Ctradelist-method'></span><span id='topic+chunksCols+2Ctradelist-method'></span><span id='topic+dummyChunks+2Ctradelist-method'></span><span id='topic+initialize+2Ctradelist-method'></span><span id='topic+ranksCols+2Ctradelist-method'></span><span id='topic+restrictedCols+2Ctradelist-method'></span><span id='topic+securityInfo+2Ctradelist+2Ccharacter-method'></span><span id='topic+show+2Ctradelist-method'></span><span id='topic+trimSide+2Ctradelist-method'></span>

<h3>Description</h3>

<p>Note: This class is a rough first pass and will change drastically in
future releases.
</p>
<p>An object of the class &quot;tradelist&quot; containing a data frame of trades
and a data frame of supplementary information.</p>


<h3>Objects from
the Class</h3>

<p> Objects can be created by calls of the form
<code>new("tradelist", orig, target, ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code>:</dt><dd><p>Object of class <code>"character"</code>
specifying the type of the tradelist.  Must be <code>"all"</code> or
<code>"ranks"</code>.</p>
</dd>
<dt><code>id.var</code>:</dt><dd><p>Object of class <code>"character"</code>
containing the name of the column in the <code>data</code> slot to be
used as a unique identifier. </p>
</dd>
<dt><code>price.var</code>:</dt><dd><p>Object of class <code>"character"</code>
specifying the column in the <code>data</code> slot to be used as the
reference price.  Defaults to <code>price.usd</code>.</p>
</dd>
<dt><code>candidates</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
containing one row for each candidate trade.</p>
</dd>
<dt><code>ranks</code>:</dt><dd><p>Object of class <code>"data.frame"</code> where
candidate trades have been interleaved by trade type (B,S,X,C) and
assigned a unique rank, &quot;rank.t&quot;.</p>
</dd>
<dt><code>chunks</code>:</dt><dd><p>Object of class <code>"data.frame"</code> that
contains one row for each chunk, a smaller portion of an order.</p>
</dd>
<dt><code>swaps</code>:</dt><dd><p>Object of class <code>"data.frame"</code> where buys
and sells have been matched with other shorts and covers of similar
market value and desirability.</p>
</dd>
<dt><code>swaps.actual</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
where the least desirable chunks that would exceed if
&quot;turnover&quot; if ordered have been removed.</p>
</dd>
<dt><code>actual</code>:</dt><dd><p>Object of class <code>"data.frame"</code> where the
chunks have been rolled up into one row/order per security.</p>
</dd>
<dt><code>final</code>:</dt><dd><p>Object of class <code>"trades"</code> containing
the most basic information on the set of trades in the tradelist.</p>
</dd>
<dt><code>chunks.actual</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
where &quot;swaps&quot; have been turned back into chunks and each chunk has
its own row.</p>
</dd>
<dt><code>sorts</code>:</dt><dd><p>Object of class <code>"optionalList"</code> which may
be interpreted as a list of key-value pairs.  The key is the name of
the sort and must exist as a column in the &quot;data&quot; slot.  The numeric
value expresses the relative weight of the sort.</p>
</dd>
<dt><code>rank.sorts</code>:</dt><dd><p>Object of class <code>"list"</code>, where the
names of the elements are the names of the sorts defined in the
&quot;sorts&quot; list and the elements are data frames, each of which
contains a ranking of the candidate trades created by applying an
individual sort.</p>
</dd>
<dt><code>regions</code>:</dt><dd><p>Object of class <code>"character"</code></p>
</dd>
<dt><code>chunk.usd</code>:</dt><dd><p>Object of class <code>"numeric"</code> that
expresses the minimum unsigned market value in US dollars of a
chunk. Defaults to \$10,000.</p>
</dd>
<dt><code>trade.usd.min</code>:</dt><dd><p>Object of class <code>"numeric"</code> that
expresses the minimum unsigned market value a trade must have in
order to be placed.  Trades of lower market value are removed from
the &quot;candidates&quot; data.frame and appended to the &quot;restricted&quot; data frame.</p>
</dd>
<dt><code>restrictions</code>:</dt><dd><p>Object of class <code>"data.frame"</code> with
1 row for each trade and three columns, &quot;id&quot;, &quot;type&quot;, and
&quot;reason&quot;.  &quot;id&quot; uniquely identifies the trade, &quot;type&quot; accepts a
value of B, S, C, or X (buy, sell, cover, or short), expressing
the type of trade that is prohibited, and &quot;reason&quot; is a label
expressing why the restriction exists.</p>
</dd>
<dt><code>restricted</code>:</dt><dd><p>Object of class <code>"data.frame"</code> that
contains one row for every trade for which a restriction exists</p>
</dd>
<dt><code>to.equity</code>:</dt><dd><p>Object of class <code>"logical"</code>
expressing whether or not the algorithm should trade towards the
value of <code>target.equity</code></p>
</dd>
<dt><code>turnover</code>:</dt><dd><p>Object of class <code>"numeric"</code> that
expresses the maximum unsigned market value of all trades effected in
one session.</p>
</dd>
<dt><code>tca</code>:</dt><dd><p>Object of class <code>"character"</code> expressing
whether or not to use trade cost adjustment.</p>
</dd>
<dt><code>rank.gain.min</code>:</dt><dd><p>Object of class <code>"numeric"</code>
specifying the minimum amount of difference between two trades'
rank required in order for the pair to be considered as a swap.</p>
</dd>
<dt><code>target.equity</code>:</dt><dd><p>Object of class <code>"numeric"</code>
expressing the unsigned market value of the target portfolio.</p>
</dd>
<dt><code>mv.long.orig</code>:</dt><dd><p>Object of class <code>"numeric"</code> The
market value of the long side of the original portfolio.</p>
</dd>
<dt><code>mv.short.orig</code>:</dt><dd><p>Object of class <code>"numeric"</code> The
unsigned market value of the short side of the original portfolio</p>
</dd>
<dt><code>unrestricted</code>:</dt><dd><p>Object of class <code>"logical"</code>
specifying whether any restrictions should be applied, including
checks for price and volume.</p>
</dd>
<dt><code>data</code>:</dt><dd><p>Object of class <code>"data.frame"</code> containing
supplementary information about the &quot;tradelist&quot;.  Must contain an
&quot;id&quot; column, a &quot;price.usd&quot; column, a &quot;volume&quot; column, and a column
named after each element listed in &quot;sorts&quot;.</p>
</dd>
<dt><code>verbose</code>:</dt><dd><p>Object of class <code>"logical"</code> controlling
whether methods on this object should be verbose.  Defaults to FALSE.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>actualCols</dt><dd><p><code>signature(object = "tradelist")</code>: Returns a
vector with the following elements: &quot;id&quot;, &quot;side&quot;, &quot;shares&quot;, &quot;mv&quot;,
<code>names(object@sorts), and "rank.t"</code></p>
</dd>
<dt>calcActual</dt><dd><p><code>signature(object = "tradelist")</code>: Rolls up the
chunks calculated in <code>calcChunksActual</code> into single orders and stores the
result as a data frame in the &quot;actual&quot; slot.</p>
</dd>
<dt>calcCandidates</dt><dd><p><code>signature(object = "tradelist", orig =
	"portfolio", target = "portfolio")</code>: Builds a data frame of
candidate trades with one row per trade by determining which positions
have different numbers of shares in the original and target
portfolios. Removes trades in the &quot;restrictions&quot; data frame,
trades with a market value below &quot;trade.usd.min&quot;, and trades that
would cause a side change in one session, and appends these trades
to the &quot;restricted data frame.&quot;</p>
</dd>
<dt>calcChunksActual</dt><dd><p><code>signature(object = "tradelist")</code>:
Turns the swaps calculated in <code>calcSwapsActual</code> back into
chunks and stores the results in a data frame in the
&quot;actual.chunks&quot; slot.</p>
</dd>
<dt>calcChunks</dt><dd><p><code>signature(object = "tradelist")</code>: Examines
the data frame stored in the &quot;ranks&quot; slot, breaks the
candidate trades into chunks of size &quot;chunk.usd&quot; or
smaller, and stores the results in the &quot;chunks&quot; slot</p>
</dd>
<dt>calcSwapsActual</dt><dd><p><code>signature(object = "tradelist")</code>:
Examines the data frame stored in the &quot;swaps&quot; slot and removes
swaps, which had they been processed as orders, would have
exceeded the specified &quot;turnover&quot; of the tradelist.  Stores the results as a data
frame in the &quot;swaps.actual&quot; slot.</p>
</dd>
<dt>calcSwaps</dt><dd><p><code>signature(object = "tradelist")</code>: Using the
&quot;chunks&quot; data frame created by the <code>calcChunks</code> method, pairs
attractive chunks with other attractive chunks of similar market
value and stores the results as a data frame in the <code>swaps</code> slot.</p>
</dd>
<dt>calcRanks</dt><dd><p><code>signature(object = "tradelist")</code>: Using
information from the <code>candidates</code> data frame, interleaves
the trades and calculates an absolute rank for each trade,
&quot;rank.t&quot;.  Stores the results in the <code>ranks</code> slot</p>
</dd>
<dt>candidatesCols</dt><dd><p><code>signature(object = "tradelist")</code>:
Returns a vector of class <code>character</code> containing the
following elements: &quot;id&quot;, &quot;orig&quot;, &quot;target&quot;, &quot;side&quot;, &quot;shares&quot;, &quot;mv&quot;</p>
</dd>
<dt>chunksCols</dt><dd><p><code>signature(object = "tradelist")</code>:  Returns a
vector of class <code>character</code> containing the following
elements: rankCols(object), &quot;tca.rank&quot;, &quot;chunk.shares&quot;,
&quot;chunk.mv&quot;, &quot;chunk&quot;.</p>
</dd>
<dt>dummyChunks</dt><dd><p><code>signature(object = "tradelist")</code>: Creates a
data frame of dummy chunks for a given side and dollar amount
(total.usd).  The supplied dollar amount, together with the tradelist
object's chunk size, determines the number of rows in the resulting
data frame.</p>
</dd>
<dt>initialize</dt><dd><p><code>signature(.Object = "tradelist")</code>:
Transparently calls <code>calcCandidates</code>, <code>calcRanks</code>, <code>calcChunks</code>,
<code>calcSwaps</code>, <code>calcSwapsActual</code>, <code>calcChunksActual</code>, <code>calcActual</code>
to construct the <code>tradelist</code> object.</p>
</dd>
<dt>ranksCols</dt><dd><p><code>signature(object = "tradelist")</code>: Returns a
vector of class <code>character</code> containing the following
elements: &quot;id&quot;, &quot;orig&quot;, &quot;target&quot;, &quot;side&quot;, &quot;shares&quot;, &quot;mv&quot;, <code>names(object@sorts)</code>,
&quot;rank.t&quot; </p>
</dd>
<dt>restrictedCols</dt><dd><p><code>signature(object = "tradelist")</code>:  Returns a
vector of class <code>character</code> containing the following
elements: <code>candidatesCols(object)</code>, &quot;reason&quot;.</p>
</dd>
<dt>securityInfo</dt><dd><p><code>signature(object = "tradelist", id =
	"character")</code>: Returns detailed information regarding a security in
the tradelist.</p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "tradelist")</code>: Prints a
detailed summary of tradelist attributes.</p>
</dd>
<dt>trimSide</dt><dd><p><code>signature(object = "tradelist")</code>: If the
market value of the side passed as the &quot;side&quot; parameter to this
function is is greater than market value of the side as specified
by the &quot;value&quot; parameter, excises the least desirable trades on
that side until the the market value of that side is less than
value.  Returns a copy of the data frame stored in the &quot;actual&quot;
slot with the trades that meet the forementioned conditions
removed.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Daniel Gerlanc <a href="mailto:daniel@gerlanc.com">daniel@gerlanc.com</a></p>

<hr>
<h2 id='trades-class'>Class &quot;trades&quot; </h2><span id='topic+trades-class'></span>

<h3>Description</h3>

<p>An object of the class &quot;trades&quot; contains a data frame
with columns &quot;id&quot;, &quot;side&quot;, and &quot;shares&quot; describing a simple list of
trades to be performed.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("trades", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>trades</code>:</dt><dd><p>Object of class <code>"data.frame"</code> with
columns &quot;id&quot;, &quot;side&quot;, and &quot;shares&quot;. </p>
</dd>
</dl>



<h3>Methods</h3>

<p>No methods defined with class &quot;trades&quot; in the signature.
</p>


<h3>Author(s)</h3>

<p> Kyle Campbell and Daniel Gerlanc </p>


<h3>See Also</h3>

<p><code><a href="#topic+tradelist-class">tradelist-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(id = c(1,2,3), side = c("B","X","C"), shares = c(10,20,30))

t &lt;- new("trades", trades = df)

</code></pre>

<hr>
<h2 id='weight'> Calculate Position Weights </h2><span id='topic+weight'></span>

<h3>Description</h3>

<p>Compute position weights of various types from an input variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weight(x, in.var, type, size, sides,
       weight.var = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weight_+3A_x">x</code></td>
<td>
<p> A data.frame containing the columns <code>in.var</code> and
<code>weight.var</code> (if necessary). </p>
</td></tr>
<tr><td><code id="weight_+3A_in.var">in.var</code></td>
<td>
<p> Character vector specifying the column in <code>x</code>
that contains a ranking from which weights can be computed. </p>
</td></tr>
<tr><td><code id="weight_+3A_type">type</code></td>
<td>
<p> Character vector specifying the method to use for weight
creation.  Can be one of <code>c("relative", "equal", "linear",
    "sigmoid", "centroid", "complex")</code>. </p>
</td></tr>
<tr><td><code id="weight_+3A_size">size</code></td>
<td>
<p> Character or numeric vector specifying the number of
desired non-na weights per side in the result.  Can either be a
positive number or one of <code>"all", "decile", "quintile",
      "tercile", "demile")</code>. </p>
</td></tr>
<tr><td><code id="weight_+3A_sides">sides</code></td>
<td>
<p> Character vector specifying the sides for which to
create weights.  May be any nonempty subset of <code>"long",
      "short"</code>.</p>
</td></tr>
<tr><td><code id="weight_+3A_weight.var">weight.var</code></td>
<td>
<p> Numeric vector containing specifying the column in
<code>x</code> that contains weight overrides.  Overrides are applied
after weights have been computed.  Defaults to NULL. </p>
</td></tr>
<tr><td><code id="weight_+3A_verbose">verbose</code></td>
<td>
<p> Be verbose.  Defaults to FALSE. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of weights the same length as <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Jeff Enos <a href="mailto:jeff@kanecap.com">jeff@kanecap.com</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(in.var = 1:50, weight.var = NA)
data$in.var &lt;- as.numeric(data$in.var)

weight(data, in.var = "in.var", type = "linear", size = "quintile",
       sides = c("long", "short"))

data$weight.var[25] &lt;- -0.05
weight(data, in.var = "in.var", type = "linear", size = "quintile",
       sides = c("long", "short"), weight.var = "weight.var")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
