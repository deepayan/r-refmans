<!DOCTYPE html><html lang="en"><head><title>Help for package imt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {imt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#imt-package'><p>The 'imt' package</p></a></li>
<li><a href='#.combineColumns'><p>Combine and Unite Columns</p></a></li>
<li><a href='#.randomize_internal'><p>Add a Random Treatment Indicator Column to a Data Frame</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#balancePlot'><p>Create a Baseline Balance Plot.</p></a></li>
<li><a href='#blm'><p>Bayesian Linear Model Factory</p></a></li>
<li><a href='#calcProb'><p>Calculate Probability of Posterior Draws Falling Within a Range</p></a></li>
<li><a href='#calculateEffectSizes'><p>Calculate Effect Sizes for Treatment vs. Control</p></a></li>
<li><a href='#checkBaseline'><p>Check Baseline Equivalency.</p></a></li>
<li><a href='#cleanData'><p>Cleans and prepares data for analysis</p></a></li>
<li><a href='#countMissing'><p>Count missing values (NA) in a dataframe</p></a></li>
<li><a href='#coxsIndex'><p>Cox's Proportional Hazards Index (Cox's C)</p></a></li>
<li><a href='#createData'><p>Converts a dataframe into a named list to provide data to a Stan model</p></a></li>
<li><a href='#credibleInterval'><p>Calculate credible interval from MCMC draws</p></a></li>
<li><a href='#fit'><p>Fits Stan model.</p></a></li>
<li><a href='#getStanParameter'><p>Extracts parameter from Stan model.</p></a></li>
<li><a href='#hedgesG'><p>Hedges' g Effect Size with Pooled Standard Deviation</p></a></li>
<li><a href='#logit'><p>Bayesian Logit Model Factory</p></a></li>
<li><a href='#logitRng'><p>Calculate logit link and sample from binomial distribution</p></a></li>
<li><a href='#mcmcChecks'><p>MCMC Checks</p></a></li>
<li><a href='#metaAnalysis'><p>Create a Meta-Analysis Object Using Data From Previous Studies</p></a></li>
<li><a href='#negativeBinomial'><p>Bayesian Negative Binomial Model Factory</p></a></li>
<li><a href='#pointEstimate'><p>Calculate Point Estimate (Median or Mean) as Percentage</p></a></li>
<li><a href='#randomize'><p>Randomly Assign Treatment While Controlling for Baseline Equivalency</p></a></li>
<li><a href='#randomizer'><p>Randomization Class for Treatment Assignment</p></a></li>
<li><a href='#validate_logical_vector'><p>Validate a Logical Subgroup Vector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Impact Measurement Toolkit</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A toolkit for causal inference in experimental and observational 
    studies. Implements various simple Bayesian models including linear, 
    negative binomial, and logistic regression for impact estimation. 
    Provides functionality for randomization and checking baseline equivalence 
    in experimental designs. The package aims to simplify the process of 
    impact measurement for researchers and analysts across different fields. 
    Examples and detailed usage instructions are available at 
    <a href="https://book.martinez.fyi">https://book.martinez.fyi</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2.0)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, bayesplot, caret, dplyr, ggplot2, glue, magrittr, methods,
Rcpp, RcppParallel, rlang, rstan, rstantools, tibble, tidyr,
vizdraws, purrr, scales, tidyselect</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH (&ge; 1.66.0), Rcpp (&ge; 0.12.0), RcppEigen (&ge; 0.3.3.3.0),
RcppParallel (&ge; 5.0.1), rstan (&ge; 2.18.1), StanHeaders (&ge;
2.18.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, roxygen2, testthat</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/google/imt">https://github.com/google/imt</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/google/imt/issues">https://github.com/google/imt/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-28 13:19:01 UTC; ignacio</td>
</tr>
<tr>
<td>Author:</td>
<td>Ignacio Martinez <a href="https://orcid.org/0000-0002-3721-8172"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ignacio Martinez &lt;martinezig@google.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-02 21:40:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='imt-package'>The 'imt' package</h2><span id='topic+imt'></span><span id='topic+imt-package'></span>

<h3>Description</h3>

<p>A DESCRIPTION OF THE PACKAGE
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ignacio Martinez <a href="mailto:martinezig@google.com">martinezig@google.com</a> (<a href="https://orcid.org/0000-0002-3721-8172">ORCID</a>)
</p>


<h3>References</h3>

<p>Stan Development Team (NA). RStan: the R interface to Stan. R package version 2.32.6. https://mc-stan.org
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/google/imt">https://github.com/google/imt</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/google/imt/issues">https://github.com/google/imt/issues</a>
</p>
</li></ul>


<hr>
<h2 id='.combineColumns'>Combine and Unite Columns</h2><span id='topic+.combineColumns'></span>

<h3>Description</h3>

<p>This function takes a data frame, identifies columns that are not specified
in the exclusion list, and combines them into a new column called 'group'.
The original columns used for the combination are then removed.
Finally, it returns a data frame with only the 'group',
'variables', 'std_diff', and 'balance' columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.combineColumns(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".combineColumns_+3A_df">df</code></td>
<td>
<p>A data frame containing the columns to be combined.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the combined 'group' column and specified columns.
</p>

<hr>
<h2 id='.randomize_internal'>Add a Random Treatment Indicator Column to a Data Frame</h2><span id='topic+.randomize_internal'></span>

<h3>Description</h3>

<p>This function takes a data frame and adds a new column named &quot;treated&quot; with
randomly assigned TRUE/FALSE values. Randomization can be done either on
the entire data frame or stratified by specified columns. The probability of
being assigned to the treatment group can be specified, with a
default of 0.5.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.randomize_internal(data, group_by = NULL, seed = NULL, pr_treated = 0.5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".randomize_internal_+3A_data">data</code></td>
<td>
<p>The input data frame.</p>
</td></tr>
<tr><td><code id=".randomize_internal_+3A_group_by">group_by</code></td>
<td>
<p>(Optional) A character vector of column names to stratify the
randomization. If provided, the randomization will be done within
d each groupefined by the specified columns.</p>
</td></tr>
<tr><td><code id=".randomize_internal_+3A_seed">seed</code></td>
<td>
<p>(Optional) An integer to set the random seed for reproducibility.</p>
</td></tr>
<tr><td><code id=".randomize_internal_+3A_pr_treated">pr_treated</code></td>
<td>
<p>(Optional) The probability of a row being assigned to the
treatment group (TRUE). Default is 0.5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new data frame with the added &quot;treated&quot; column.
</p>

<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='balancePlot'>Create a Baseline Balance Plot.</h2><span id='topic+balancePlot'></span>

<h3>Description</h3>

<p>Create a Baseline Balance Plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>balancePlot(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="balancePlot_+3A_data">data</code></td>
<td>
<p>tibble produced with <code>checkBaseline</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot2 baseline balance plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(imt)
set.seed(123)  # for reproducibility
N &lt;- 1000
fake_data &lt;- tibble::tibble(x1 = rnorm(N), x2 = rnorm(N), t = rbinom(N, 1, 0.5))
baseline &lt;- checkBaseline(data = fake_data, variables = c("x1", "x2"), treatment = "t")
balancePlot(data = baseline)

</code></pre>

<hr>
<h2 id='blm'>Bayesian Linear Model Factory</h2><span id='topic+blm'></span>

<h3>Description</h3>

<p>Bayesian Linear Model Factory
</p>
<p>Bayesian Linear Model Factory
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>version</code></dt><dd><p>im package version used to fit model</p>
</dd>
<dt><code>eta_draws</code></dt><dd><p>Posterior draws for the treatment effect</p>
</dd>
<dt><code>mcmChecks</code></dt><dd><p>MCMC diagnostics</p>
</dd>
<dt><code>credible_interval</code></dt><dd><p>Credible interval for the treatment effect</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-blm-new"><code>blm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-ppcDensOverlay"><code>blm$ppcDensOverlay()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-tracePlot"><code>blm$tracePlot()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-posteriorProb"><code>blm$posteriorProb()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-pointEstimate"><code>blm$pointEstimate()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-credibleInterval"><code>blm$credibleInterval()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-priorProb"><code>blm$priorProb()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-priorInterval"><code>blm$priorInterval()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-vizdraws"><code>blm$vizdraws()</code></a>
</p>
</li>
<li> <p><a href="#method-blm-clone"><code>blm$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-blm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Get the package version
</p>
<p>Get the posterior draws for eta
</p>
<p>Get the MCMC diagnostics
</p>
<p>Get the credible interval
</p>
<p>Create a new Bayesian Linear Model object.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$new(
  data,
  y,
  x,
  treatment,
  eta_mean,
  eta_sd,
  generate_fake_data = 0,
  seed = 1982,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data frame to be used</p>
</dd>
<dt><code>y</code></dt><dd><p>Name of the outcome variable in the data frame</p>
</dd>
<dt><code>x</code></dt><dd><p>Vector of names of all covariates in the data frame</p>
</dd>
<dt><code>treatment</code></dt><dd><p>Name of the treatment indicator variable in the data frame</p>
</dd>
<dt><code>eta_mean</code></dt><dd><p>Prior mean for the treatment effect estimation</p>
</dd>
<dt><code>eta_sd</code></dt><dd><p>Prior standard deviation for the treatment effect estimation</p>
</dd>
<dt><code>generate_fake_data</code></dt><dd><p>Flag for generating fake data</p>
</dd>
<dt><code>seed</code></dt><dd><p>Seed for Stan fitting</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>invisible
</p>


<hr>
<a id="method-blm-ppcDensOverlay"></a>



<h4>Method <code>ppcDensOverlay()</code></h4>

<p>This method compares the empirical distribution of the data 'y'
to the distributions of simulated/replicated data 'yrep' from the
posterior predictive distribution. This is done by creating a density
overlay plot using the <code>bayesplot::ppc_dens_overlay</code> function.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$ppcDensOverlay(n = 50)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n</code></dt><dd><p>Number of posterior draws to use for the overlay</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>ggplot2 visualization
</p>


<hr>
<a id="method-blm-tracePlot"></a>



<h4>Method <code>tracePlot()</code></h4>

<p>Plot MCMC trace for the eta and sigma parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$tracePlot(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A ggplot object.
</p>


<hr>
<a id="method-blm-posteriorProb"></a>



<h4>Method <code>posteriorProb()</code></h4>

<p>Calculate posterior probability of effect exceeding a threshold
</p>
<p>This function calculates the posterior probability of the effect
being larger or smaller than a specified threshold.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$posteriorProb(threshold = 0, gt = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>threshold</code></dt><dd><p>A numeric value specifying the threshold.</p>
</dd>
<dt><code>gt</code></dt><dd><p>A logical value indicating whether to calculate the probability
of the effect being greater than (TRUE) or less than (FALSE)
the threshold.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This function uses the private$..eta_draws internal variable
to obtain draws from the posterior distribution of the effect size.
Based on the specified arguments, the function calculates the
proportion of draws exceeding/falling below the threshold and
returns a formatted statement describing the estimated probability.
</p>
<p>Calculate point estimate of the effect
</p>
<p>This R6 method calculates the point estimate of the effect size
based on the posterior draws of the eta parameter.
</p>



<h5>Returns</h5>

<p>A character string summarizing the estimated probability.
</p>


<hr>
<a id="method-blm-pointEstimate"></a>



<h4>Method <code>pointEstimate()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>blm$pointEstimate(median = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>median</code></dt><dd><p>Logical value. If TRUE (default), the median of
the eta draws is returned. If FALSE, the mean is returned.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..eta_draws internal variable
which contains MCMC draws of the eta parameter representing the
effect size. Based on the specified median argument, the method
calculates and returns either the median or the mean of the draws.
Calculates credible interval for the effect of the intervention
</p>
<p>This R6 method calculates and returns a formatted statement summarizing
the credible interval of a specified width for the effect of the intervention.
</p>



<h5>Returns</h5>

<p>A numeric value representing the point estimate.
</p>


<hr>
<a id="method-blm-credibleInterval"></a>



<h4>Method <code>credibleInterval()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>blm$credibleInterval(width = 0.75, round = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width</code></dt><dd><p>Numeric value between 0 and 1 representing the desired
width of the credible interval (e.g., 0.95 for a 95% credible interval).</p>
</dd>
<dt><code>round</code></dt><dd><p>Integer value indicating the number of decimal places to round
the lower and upper bounds of the credible interval.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..eta_draws internal variable
containing MCMC draws of the eta parameter representing the effect
size. It calculates the credible interval, stores it internally, and
returns a formatted statement summarizing the findings.
</p>
<p>Calculate and format probability statement based on prior
</p>
<p>This method calculates the probability that the effect is greater than or
less than a given threshold based on the prior distribution of the effect.
The results are formatted into a statement suitable for reporting.
</p>



<h5>Returns</h5>

<p>A character string with the following information:
</p>

<ul>
<li><p> The probability associated with the specified width
</p>
</li>
<li><p> The lower and upper bounds of the credible interval, rounded to the
specified number of decimal places
</p>
</li></ul>



<hr>
<a id="method-blm-priorProb"></a>



<h4>Method <code>priorProb()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>blm$priorProb(threshold = 0, gt = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>threshold</code></dt><dd><p>Numerical threshold for comparison.</p>
</dd>
<dt><code>gt</code></dt><dd><p>Logical indicating whether to calculate probability greater than
or less than the threshold.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A character string containing the formatted probability statement.
Calculates the prior for the effedt of the intervention based on
the hyperpriors.
</p>
<p>This method computes and formats a statement about the probability interval
of the effect based on the prior distribution.
</p>


<hr>
<a id="method-blm-priorInterval"></a>



<h4>Method <code>priorInterval()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>blm$priorInterval(width = 0.75, round = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width</code></dt><dd><p>Desired probability width of the interval (default: 0.75).</p>
</dd>
<dt><code>round</code></dt><dd><p>Number of decimal places for rounding the bounds (default: 0).</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method calculates the lower and upper bounds of the interval based
on the specified probability width and the prior distribution of the effect.
It then formats the results into a clear and informative statement.
</p>
<p>Note that the probability is checked to be within valid range (0-1) with
consideration of machine precision using .Machine$double.eps.
</p>



<h5>Returns</h5>

<p>A character string containing the formatted probability interval
statement.
</p>


<hr>
<a id="method-blm-vizdraws"></a>



<h4>Method <code>vizdraws()</code></h4>

<p>Plots impact's prior and posterior distributions.
</p>
<p>For more details see <code><a href="vizdraws.html#topic+vizdraws">vizdraws::vizdraws()</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$vizdraws(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>other arguments passed to vizdraws.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An interactive plot of the prior and posterior distributions.
</p>


<hr>
<a id="method-blm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>blm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='calcProb'>Calculate Probability of Posterior Draws Falling Within a Range</h2><span id='topic+calcProb'></span>

<h3>Description</h3>

<p>This function estimates the probability that a vector of posterior draws,
represented by the parameter <code>eta</code>, falls within a specified range.
It provides flexibility to use either prior distributions or posterior draws,
and to specify one-sided or two-sided probability calculations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcProb(x, a = NULL, b = NULL, prior = FALSE, group_name = "group average")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calcProb_+3A_x">x</code></td>
<td>
<p>A numeric vector containing either posterior draws (default)
or prior samples of the treatment effect parameter (<code>eta</code>).</p>
</td></tr>
<tr><td><code id="calcProb_+3A_a">a</code></td>
<td>
<p>(Optional) The lower bound of the range (as a proportion, not percentage).</p>
</td></tr>
<tr><td><code id="calcProb_+3A_b">b</code></td>
<td>
<p>(Optional) The upper bound of the range (as a proportion, not percentage).</p>
</td></tr>
<tr><td><code id="calcProb_+3A_prior">prior</code></td>
<td>
<p>A logical value indicating whether to use prior samples (<code>TRUE</code>)
or posterior draws (<code>FALSE</code>, default) for calculation.</p>
</td></tr>
<tr><td><code id="calcProb_+3A_group_name">group_name</code></td>
<td>
<p>A string describing the group for which the probability
is being calculated (default: &quot;group average&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks the following cases:
</p>

<ul>
<li><p> If both <code>a</code> and <code>b</code> are <code>NULL</code>, it returns an empty string.
</p>
</li>
<li><p> If <code>b</code> is less than or equal to <code>a</code>, it throws an error.
</p>
</li></ul>

<p>The calculated probability and range are presented in a human-readable string
using the <code>glue</code> package for formatting.
</p>


<h3>Value</h3>

<p>A formatted string stating the calculated probability and the
specified range. The probability is the proportion of samples
(either prior or posterior) that fall within the defined range.
</p>

<hr>
<h2 id='calculateEffectSizes'>Calculate Effect Sizes for Treatment vs. Control</h2><span id='topic+calculateEffectSizes'></span>

<h3>Description</h3>

<p>This function calculates effect sizes for each variable in a data frame, 
comparing treatment and control groups. It handles continuous, binary, 
and categorical variables using appropriate effect size measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateEffectSizes(data, treatment_column, to_check = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculateEffectSizes_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables and treatment/control indicator.</p>
</td></tr>
<tr><td><code id="calculateEffectSizes_+3A_treatment_column">treatment_column</code></td>
<td>
<p>The name of the column (as a string) in the data frame that 
  indicates whether an observation is in the treatment or control group. This column 
  must be a factor with exactly two levels.</p>
</td></tr>
<tr><td><code id="calculateEffectSizes_+3A_to_check">to_check</code></td>
<td>
<p>(optional) A character vector specifying the names of the
variables for which effect sizes should be calculated. If NULL (default),
all variables (except the treatment column) are processed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>- For continuous variables, Hedges' g effect size is calculated.
  - For binary variables, Cox's Proportional Hazards Index (Cox's C) is calculated.
  - For categorical variables, the variable is converted into multiple indicator 
   (dummy) variables, and the average Cox's C across these indicators is reported.
</p>


<h3>Value</h3>

<p>A data frame with two columns:
  * <code>Variable</code>: The name of each variable in the original data frame.
  * <code>EffectSize</code>: The calculated effect size for each variable.
</p>

<hr>
<h2 id='checkBaseline'>Check Baseline Equivalency.</h2><span id='topic+checkBaseline'></span>

<h3>Description</h3>

<p>Check Baseline Equivalency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkBaseline(data, variables, treatment)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkBaseline_+3A_data">data</code></td>
<td>
<p>dataframe with the pre-intervention variables,
and the treatment indicator.</p>
</td></tr>
<tr><td><code id="checkBaseline_+3A_variables">variables</code></td>
<td>
<p>vector of with the names of the pre-intervention variables.</p>
</td></tr>
<tr><td><code id="checkBaseline_+3A_treatment">treatment</code></td>
<td>
<p>name of the treatment indicator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the standardized difference of the pre-intervention
variables. The tibble includes
variables: the variable name,
std_diff: the standardized difference for that variable as a number
balance: the standardized difference for that variable as a factor
variable.
For more details about this methodology check
<a href="https://ies.ed.gov/ncee/wwc/Docs/OnlineTraining/wwc_training_m3.pdf">https://ies.ed.gov/ncee/wwc/Docs/OnlineTraining/wwc_training_m3.pdf</a>.
</p>

<hr>
<h2 id='cleanData'>Cleans and prepares data for analysis</h2><span id='topic+cleanData'></span>

<h3>Description</h3>

<p>This function performs a series of data cleaning and preprocessing steps
to ensure the data is suitable for analysis. This includes:
</p>

<ul>
<li><p> Missing data handling
</p>
</li>
<li><p> Variable type checks
</p>
</li>
<li><p> Collinearity and zero-variance feature removal
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>cleanData(data, y, treatment, x = NULL, binary = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanData_+3A_data">data</code></td>
<td>
<p>A data.frame containing the data to be cleaned.</p>
</td></tr>
<tr><td><code id="cleanData_+3A_y">y</code></td>
<td>
<p>Name of the dependent variable (character).</p>
</td></tr>
<tr><td><code id="cleanData_+3A_treatment">treatment</code></td>
<td>
<p>Name of the treatment variable (character, should be logical).</p>
</td></tr>
<tr><td><code id="cleanData_+3A_x">x</code></td>
<td>
<p>Names of the covariates to include in the model (character vector, optional).</p>
</td></tr>
<tr><td><code id="cleanData_+3A_binary">binary</code></td>
<td>
<p>Should the dependent variable be treated as binary? Default is FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the cleaned dataset and relevant metadata:
</p>

<ul>
<li> <p><code>N</code>: The number of observations after cleaning.
</p>
</li>
<li> <p><code>K</code> The number of covariates after cleaning.
</p>
</li>
<li> <p><code>X</code> The cleaned covariate matrix.
</p>
</li>
<li> <p><code>treat_vec</code>: Treatment vector as integers (1 for TRUE, 0 for FALSE).
</p>
</li>
<li> <p><code>Y</code>: The dependent variable vector.
</p>
</li></ul>


<hr>
<h2 id='countMissing'>Count missing values (NA) in a dataframe</h2><span id='topic+countMissing'></span>

<h3>Description</h3>

<p>This function takes a dataframe as input and returns a tibble
summarizing the number of missing values (NA) in each column and
the number of rows with at least one missing value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>countMissing(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="countMissing_+3A_df">df</code></td>
<td>
<p>A dataframe to analyze.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the following columns:
</p>

<ul>
<li><p> NA_&lt;column_name&gt;: Number of NAs in each original column
</p>
</li>
<li><p> missing_rows: Number of rows with at least one NA across all columns
</p>
</li></ul>


<hr>
<h2 id='coxsIndex'>Cox's Proportional Hazards Index (Cox's C)</h2><span id='topic+coxsIndex'></span>

<h3>Description</h3>

<p>Calculates Cox's C, a standardized effect size measure for comparing hazard rates
between two groups in survival analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coxsIndex(p_t, p_c, n_t, n_c)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coxsIndex_+3A_p_t">p_t</code></td>
<td>
<p>Numeric value representing the proportion of events (e.g., failures, deaths) in the treatment group.</p>
</td></tr>
<tr><td><code id="coxsIndex_+3A_p_c">p_c</code></td>
<td>
<p>Numeric value representing the proportion of events in the control group.</p>
</td></tr>
<tr><td><code id="coxsIndex_+3A_n_t">n_t</code></td>
<td>
<p>Numeric value representing the sample size of the treatment group.</p>
</td></tr>
<tr><td><code id="coxsIndex_+3A_n_c">n_c</code></td>
<td>
<p>Numeric value representing the sample size of the control group.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cox's C is a useful effect size for survival analysis when hazard ratios are not constant over time.
It's calculated based on the log odds ratio of events and includes a small sample size correction.
The value 1.65 is used to approximate a conversion to a Cohen's d-like scale.
</p>


<h3>Value</h3>

<p>The calculated Cox's C effect size.
</p>


<h3>References</h3>

<p>Cox, D. R. (1972). Regression models and life-tables. Journal of the Royal Statistical Society: Series B (Methodological), 34(2), 187-202.
</p>

<hr>
<h2 id='createData'>Converts a dataframe into a named list to provide data to a Stan model</h2><span id='topic+createData'></span>

<h3>Description</h3>

<p>Converts a dataframe into a named list to provide data to a Stan model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createData(
  data,
  y,
  treatment,
  x = NULL,
  eta_mean = 0,
  eta_sd = 1,
  run_estimation = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createData_+3A_data">data</code></td>
<td>
<p>The data frame to be used</p>
</td></tr>
<tr><td><code id="createData_+3A_y">y</code></td>
<td>
<p>The name of the outcome variable in the data frame</p>
</td></tr>
<tr><td><code id="createData_+3A_treatment">treatment</code></td>
<td>
<p>The name of the treatment indicator variable in the data frame</p>
</td></tr>
<tr><td><code id="createData_+3A_x">x</code></td>
<td>
<p>A vector of names of all covariates to be used in the data frame</p>
</td></tr>
<tr><td><code id="createData_+3A_eta_mean">eta_mean</code></td>
<td>
<p>The prior mean to be used for estimating the treatment effect</p>
</td></tr>
<tr><td><code id="createData_+3A_eta_sd">eta_sd</code></td>
<td>
<p>The prior standard deviation to be used for estimating the treatment effect</p>
</td></tr>
<tr><td><code id="createData_+3A_run_estimation">run_estimation</code></td>
<td>
<p>Whether to run the estimation, or merely draw data from the priors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <br /><code>stan_data</code> a named list providing the data for the stan model
</p>

<hr>
<h2 id='credibleInterval'>Calculate credible interval from MCMC draws</h2><span id='topic+credibleInterval'></span>

<h3>Description</h3>

<p>This function calculates a credible interval of the specified
width from a vector of MCMC draws.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>credibleInterval(draws, width)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="credibleInterval_+3A_draws">draws</code></td>
<td>
<p>A numeric vector containing MCMC draws.</p>
</td></tr>
<tr><td><code id="credibleInterval_+3A_width">width</code></td>
<td>
<p>A numeric value between 0 and 1 specifying the desired
width of the credible interval.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function calculates the lower and upper bounds of the
credible interval using the quantile function based on the
specified width.
</p>


<h3>Value</h3>

<p>A named list containing three elements:
</p>

<ul>
<li><p> width: The specified width of the credible interval.
</p>
</li>
<li><p> lower_bound: The lower bound of the credible interval.
</p>
</li>
<li><p> upper_bound: The upper bound of the credible interval.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Generate example draws
draws &lt;- rnorm(1000)

# Calculate 95% credible interval
credibleInterval(draws, width = 0.95)

</code></pre>

<hr>
<h2 id='fit'>Fits Stan model.</h2><span id='topic+fit'></span>

<h3>Description</h3>

<p>Fits Stan model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit(stan_data, model = "blm", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fit_+3A_stan_data">stan_data</code></td>
<td>
<p>A named list providing the data for the Stan model.</p>
</td></tr>
<tr><td><code id="fit_+3A_model">model</code></td>
<td>
<p>A character string specifying the model type.
Must be either &quot;blm&quot; (Bayesian linear model) or &quot;bnb&quot; (Bayesian negative binomial model).
Defaults to &quot;blm&quot;.</p>
</td></tr>
<tr><td><code id="fit_+3A_...">...</code></td>
<td>
<p>Additional options to be passed through to <code>rstan::sampling</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The complete StanFit object from the fitted Stan model.
</p>

<hr>
<h2 id='getStanParameter'>Extracts parameter from Stan model.</h2><span id='topic+getStanParameter'></span>

<h3>Description</h3>

<p>Extracts parameter from Stan model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getStanParameter(fit, par)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getStanParameter_+3A_fit">fit</code></td>
<td>
<p>A Stan fit model.</p>
</td></tr>
<tr><td><code id="getStanParameter_+3A_par">par</code></td>
<td>
<p>Name of the parameter you want to extract.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A long tibble with draws for the pamete.
</p>

<hr>
<h2 id='hedgesG'>Hedges' g Effect Size with Pooled Standard Deviation</h2><span id='topic+hedgesG'></span>

<h3>Description</h3>

<p>Calculates Hedges' g, a standardized effect size for comparing means.
This version includes a small-sample correction factor (omega)
and uses the pooled standard deviation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hedgesG(n_t, n_c, y_t, y_c, s_t, s_c)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hedgesG_+3A_n_t">n_t</code></td>
<td>
<p>Numeric value representing the sample size of the treatment group.</p>
</td></tr>
<tr><td><code id="hedgesG_+3A_n_c">n_c</code></td>
<td>
<p>Numeric value representing the sample size of the control group.</p>
</td></tr>
<tr><td><code id="hedgesG_+3A_y_t">y_t</code></td>
<td>
<p>Numeric value representing the mean of the treatment group.</p>
</td></tr>
<tr><td><code id="hedgesG_+3A_y_c">y_c</code></td>
<td>
<p>Numeric value representing the mean of the control group.</p>
</td></tr>
<tr><td><code id="hedgesG_+3A_s_t">s_t</code></td>
<td>
<p>Numeric value representing the standard deviation of the treatment group.</p>
</td></tr>
<tr><td><code id="hedgesG_+3A_s_c">s_c</code></td>
<td>
<p>Numeric value representing the standard deviation of the control group.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Hedges' g is a variation of Cohen's d that adjusts for small-sample bias.
It is calculated as the difference in means divided by the pooled standard
deviation, then multiplied by a correction factor.
</p>


<h3>Value</h3>

<p>The calculated Hedges' g effect size.
</p>


<h3>References</h3>

<p>Hedges, L. V. (1981). Distribution theory for Glass's estimator of effect size and related estimators.
Journal of Educational Statistics, 6(2), 107-128.
</p>

<hr>
<h2 id='logit'>Bayesian Logit Model Factory</h2><span id='topic+logit'></span>

<h3>Description</h3>

<p>A class for creating and managing Bayesian Logit Models
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>version</code></dt><dd><p>im package version used to fit model</p>
</dd>
<dt><code>tau_draws</code></dt><dd><p>Posterior draws for the treatment effect</p>
</dd>
<dt><code>mcmChecks</code></dt><dd><p>MCMC diagnostics</p>
</dd>
<dt><code>credible_interval</code></dt><dd><p>Credible interval for the treatment effect</p>
</dd>
<dt><code>prior_eta</code></dt><dd><p>Prior distribution for eta</p>
</dd>
<dt><code>prior_tau</code></dt><dd><p>Prior distribution for tau</p>
</dd>
<dt><code>prior_mean_y</code></dt><dd><p>Prior distribution for mean y</p>
</dd>
<dt><code>eta_draws</code></dt><dd><p>Posterior draws for eta</p>
</dd>
<dt><code>predict_list</code></dt><dd><p>List of predictions</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-logit-new"><code>logit$new()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-tracePlot"><code>logit$tracePlot()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-calcProb"><code>logit$calcProb()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-pointEstimate"><code>logit$pointEstimate()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-credibleInterval"><code>logit$credibleInterval()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-vizdraws"><code>logit$vizdraws()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-lollipop"><code>logit$lollipop()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-plotPrior"><code>logit$plotPrior()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-predict"><code>logit$predict()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-getPred"><code>logit$getPred()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-predSummary"><code>logit$predSummary()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-predCompare"><code>logit$predCompare()</code></a>
</p>
</li>
<li> <p><a href="#method-logit-clone"><code>logit$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-logit-new"></a>



<h4>Method <code>new()</code></h4>

<p>Get the package version
</p>
<p>Get the posterior draws for tau
</p>
<p>Get the MCMC diagnostics
</p>
<p>Get the credible interval
</p>
<p>Get the prior for eta
</p>
<p>Get the prior for tau
</p>
<p>Get the prior for mean y
</p>
<p>Get the posterior draws for eta
</p>
<p>Get the list of predictions
</p>
<p>Create a new Bayesian Logit Model object.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$new(
  data,
  y,
  x,
  treatment,
  mean_alpha,
  sd_alpha,
  mean_beta,
  sd_beta,
  tau_mean,
  tau_sd,
  seed = 1982,
  fit = TRUE,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data frame to be used</p>
</dd>
<dt><code>y</code></dt><dd><p>Name of the outcome variable in the data frame</p>
</dd>
<dt><code>x</code></dt><dd><p>Vector of names of all covariates in the data frame</p>
</dd>
<dt><code>treatment</code></dt><dd><p>Name of the treatment indicator variable in the data frame</p>
</dd>
<dt><code>mean_alpha</code></dt><dd><p>Prior mean for alpha</p>
</dd>
<dt><code>sd_alpha</code></dt><dd><p>Prior standard deviation for alpha</p>
</dd>
<dt><code>mean_beta</code></dt><dd><p>Prior mean for beta</p>
</dd>
<dt><code>sd_beta</code></dt><dd><p>Prior standard deviation for beta</p>
</dd>
<dt><code>tau_mean</code></dt><dd><p>Prior mean for the treatment effect estimation</p>
</dd>
<dt><code>tau_sd</code></dt><dd><p>Prior standard deviation for the treatment effect estimation</p>
</dd>
<dt><code>seed</code></dt><dd><p>Seed for Stan fitting</p>
</dd>
<dt><code>fit</code></dt><dd><p>Flag for fitting the data to the model or not</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>invisible
</p>


<hr>
<a id="method-logit-tracePlot"></a>



<h4>Method <code>tracePlot()</code></h4>

<p>Plot MCMC trace for the eta and sigma parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$tracePlot(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A ggplot object.
</p>


<hr>
<a id="method-logit-calcProb"></a>



<h4>Method <code>calcProb()</code></h4>

<p>Calculates the posterior of an effect being greater than, less than,
or within a range defined by thresholds.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$calcProb(a = 0, b = NULL, prior = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>a</code></dt><dd><p>Optional. Lower bound for the threshold.</p>
</dd>
<dt><code>b</code></dt><dd><p>Optional. Upper bound for the threshold.</p>
</dd>
<dt><code>prior</code></dt><dd><p>Logical. If TRUE, calculates probabilities based on
the prior distribution.
If FALSE (default), uses the posterior distribution.</p>
</dd>
<dt><code>x</code></dt><dd><p>A numeric vector containing draws from the posterior</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A character string summarizing the estimated probability
</p>
<p>Calculate point estimate of the effect
</p>
<p>This R6 method calculates the point estimate of the effect size
based on the posterior draws of the eta parameter.
</p>


<hr>
<a id="method-logit-pointEstimate"></a>



<h4>Method <code>pointEstimate()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>logit$pointEstimate(median = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>median</code></dt><dd><p>Logical value. If TRUE (default), the median of
the eta draws is returned. If FALSE, the mean is returned.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..eta_draws internal variable
which contains MCMC draws of the eta parameter representing the
effect size. Based on the specified median argument, the method
calculates and returns either the median or the mean of the draws.
Calculates credible interval for the effect of the intervention
</p>
<p>This R6 method calculates and returns a formatted statement summarizing
the credible interval of a specified width for the effect of the intervention.
</p>



<h5>Returns</h5>

<p>A numeric value representing the point estimate.
</p>


<hr>
<a id="method-logit-credibleInterval"></a>



<h4>Method <code>credibleInterval()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>logit$credibleInterval(width = 0.75, round = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width</code></dt><dd><p>Numeric value between 0 and 1 representing the desired
width of the credible interval (e.g., 0.95 for a 95% credible interval).</p>
</dd>
<dt><code>round</code></dt><dd><p>Integer value indicating the number of decimal places to round
the lower and upper bounds of the credible interval.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..eta_draws internal variable
containing MCMC draws of the eta parameter representing the effect
size. It calculates the credible interval, stores it internally, and
returns a formatted statement summarizing the findings.
</p>



<h5>Returns</h5>

<p>A character string with the following information:
</p>

<ul>
<li><p> The probability associated with the specified width
</p>
</li>
<li><p> The lower and upper bounds of the credible interval, rounded to the
specified number of decimal places
</p>
</li></ul>



<hr>
<a id="method-logit-vizdraws"></a>



<h4>Method <code>vizdraws()</code></h4>

<p>Plots impact's prior and posterior distributions.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$vizdraws(tau = FALSE, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>tau</code></dt><dd><p>Logical. If TRUE, plot tau instead of eta</p>
</dd>
<dt><code>...</code></dt><dd><p>other arguments passed to vizdraws.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An interactive plot of the prior and posterior distributions.
</p>


<hr>
<a id="method-logit-lollipop"></a>



<h4>Method <code>lollipop()</code></h4>

<p>Plots lollipop chart for the prior and posterior of the impact being
greater or less than a threshold.
</p>
<p>For more details see <code><a href="vizdraws.html#topic+lollipops">vizdraws::lollipops()</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$lollipop(threshold = 0, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>threshold</code></dt><dd><p>cutoff used to calculate the probability. Defaults to
zero percent points</p>
</dd>
<dt><code>...</code></dt><dd><p>other arguments passed to vizdraws.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A lollipop chart with the prior and posterior probability of
the impact being above or below a threshold.
</p>


<hr>
<a id="method-logit-plotPrior"></a>



<h4>Method <code>plotPrior()</code></h4>

<p>Plots draws from the prior distribution of the outcome, tau, and impact
in percentage points.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$plotPrior()</pre></div>


<hr>
<a id="method-logit-predict"></a>



<h4>Method <code>predict()</code></h4>

<p>Predict new data
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$predict(new_data, name = NULL, M = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>new_data</code></dt><dd><p>Data frame to be predicted</p>
</dd>
<dt><code>name</code></dt><dd><p>Group name of the prediction</p>
</dd>
<dt><code>M</code></dt><dd><p>Number of posterior draws to sample from</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>invisible(self)
</p>


<hr>
<a id="method-logit-getPred"></a>



<h4>Method <code>getPred()</code></h4>

<p>Get posterior predictive draws
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$getPred(name = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Group name of the prediction</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments (not used)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Matrix of posterior predictive draws
</p>


<hr>
<a id="method-logit-predSummary"></a>



<h4>Method <code>predSummary()</code></h4>

<p>Get point estimate, credible interval and prob summary of predictive draws
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$predSummary(
  name = NULL,
  subgroup = NULL,
  median = TRUE,
  width = 0.75,
  round = 0,
  a = NULL,
  b = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Optional. Group name of the prediction</p>
</dd>
<dt><code>subgroup</code></dt><dd><p>Optional. A boolean vector to get summary on the conditional group average</p>
</dd>
<dt><code>median</code></dt><dd><p>Optional. Logical value for using median or mean</p>
</dd>
<dt><code>width</code></dt><dd><p>Optional. Numeric value for credible interval width</p>
</dd>
<dt><code>round</code></dt><dd><p>Optional. Integer value for rounding</p>
</dd>
<dt><code>a</code></dt><dd><p>Optional. Lower bound threshold</p>
</dd>
<dt><code>b</code></dt><dd><p>Optional. Upper bound threshold</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A character string with summary information
</p>


<hr>
<a id="method-logit-predCompare"></a>



<h4>Method <code>predCompare()</code></h4>

<p>Compare the average of the posterior draws of two groups
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$predCompare(
  name1,
  name2,
  subgroup1 = NULL,
  subgroup2 = NULL,
  median = TRUE,
  width = 0.75,
  round = 0,
  a = NULL,
  b = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name1</code></dt><dd><p>Group name of the first prediction to be compared</p>
</dd>
<dt><code>name2</code></dt><dd><p>Group name of the second prediction to be compared</p>
</dd>
<dt><code>subgroup1</code></dt><dd><p>Optional. A boolean vector for the first group</p>
</dd>
<dt><code>subgroup2</code></dt><dd><p>Optional. A boolean vector for the second group</p>
</dd>
<dt><code>median</code></dt><dd><p>Optional. Logical value for using median or mean</p>
</dd>
<dt><code>width</code></dt><dd><p>Optional. Numeric value for credible interval width</p>
</dd>
<dt><code>round</code></dt><dd><p>Optional. Integer value for rounding</p>
</dd>
<dt><code>a</code></dt><dd><p>Optional. Lower bound threshold</p>
</dd>
<dt><code>b</code></dt><dd><p>Optional. Upper bound threshold</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A character string with comparison summary
</p>


<hr>
<a id="method-logit-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>logit$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='logitRng'>Calculate logit link and sample from binomial distribution</h2><span id='topic+logitRng'></span>

<h3>Description</h3>

<p>This function takes prior / posterior draws of the Bayesian logit model,
applies theinverse logit (logistic) transformation to obtain probabilities,
and then generates random samples from binomial distributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logitRng(alpha, tau, beta, treat, X, N)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="logitRng_+3A_alpha">alpha</code></td>
<td>
<p>Numeric. A draw of alpha param from the logit model</p>
</td></tr>
<tr><td><code id="logitRng_+3A_tau">tau</code></td>
<td>
<p>Numeric. A draw of tau param from the logit model</p>
</td></tr>
<tr><td><code id="logitRng_+3A_beta">beta</code></td>
<td>
<p>Vector. A draw of beta params from the logit model</p>
</td></tr>
<tr><td><code id="logitRng_+3A_treat">treat</code></td>
<td>
<p>A 0 / 1 vector of treatment indicator</p>
</td></tr>
<tr><td><code id="logitRng_+3A_x">X</code></td>
<td>
<p>Data to be predicted</p>
</td></tr>
<tr><td><code id="logitRng_+3A_n">N</code></td>
<td>
<p>Numeric. Size of the sample, should depend on size of the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of N samples of preditive draws
</p>

<hr>
<h2 id='mcmcChecks'>MCMC Checks</h2><span id='topic+mcmcChecks'></span>

<h3>Description</h3>

<p>Checks convergence, mixing, effective sample size, and divergent transitions
</p>


<h3>Methods</h3>


<dl>
<dt><code>$new(fit, pars)</code></dt><dd><p>Runs diagnostics on the supplied <code>stanfit</code>
object, restricted to parameters identified by the character vector
<code>pars</code>.
<br /> Tests include:
<br /> Share of specified parameters with an Rhat less than 1.1. If any
have an Rhat &gt; 1.1, <code>everything_looks_fine</code> is set to <code>FALSE</code>.
<br /> Share of specified parameters with an n_eff at least 0.1% of the
total number of posterior draws. If any have n_eff &lt; 0.001 * N,
<code>everything_looks_fine</code> is set to <code>FALSE</code>.
<br /> Share of specified parameters with an n_eff of at least 100. If any
have n_eff &lt; 100, <code>everything_looks_fine</code> is set to <code>FALSE</code>.
<br /> Number of divergent transitions during posterior sampling. If there
are any whatsoever, <code>everything_looks_fine</code> is set to
<code>FALSE</code>.
<br /> Share of posterior iterations where the sampler reached the
maximum treedepth. If more than 25\
<code>everything_looks_fine</code> is set to <code>FALSE</code>.</p>
</dd>
</dl>



<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>everything_looks_fine</code></dt><dd><p>logical indicating whether all MCMC tests passed.</p>
</dd>
<dt><code>diagnostics</code></dt><dd><p>list of the outcome of each MCMC test</p>
</dd>
<dt><code>warnings</code></dt><dd><p>list of the warning messages from failed MCMC tests</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-mcmcChecks-new"><code>mcmcChecks$new()</code></a>
</p>
</li>
<li> <p><a href="#method-mcmcChecks-clone"><code>mcmcChecks$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-mcmcChecks-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a new mcmcChecks object and run diagnostics
</p>


<h5>Usage</h5>

<div class="r"><pre>mcmcChecks$new(fit, pars)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fit</code></dt><dd><p>A stanfit object to check</p>
</dd>
<dt><code>pars</code></dt><dd><p>A character vector of parameter names to check</p>
</dd>
</dl>

</div>


<hr>
<a id="method-mcmcChecks-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>mcmcChecks$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='metaAnalysis'>Create a Meta-Analysis Object Using Data From Previous Studies</h2><span id='topic+metaAnalysis'></span>

<h3>Description</h3>

<p>Create a Meta-Analysis Object Using Data From Previous Studies
</p>
<p>Create a Meta-Analysis Object Using Data From Previous Studies
</p>


<h3>Details</h3>

<p>A meta analysis has raw data and draws from the lift's posterior
distribution. This is represented by an R6 Class.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>PosteriorATE</code></dt><dd><p>Draws from the posterior distribution of the
average treatment effect.</p>
</dd>
<dt><code>checks</code></dt><dd><p>MCMC diagnostics</p>
</dd>
<dt><code>CredibleInterval</code></dt><dd><p>Lower and upper bounds of the credible interval</p>
</dd>
<dt><code>PointEstimate</code></dt><dd><p>Point estimate of the average treatment effect</p>
</dd>
<dt><code>fitted</code></dt><dd><p>Stan fit object</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-meta-analysis-new"><code>metaAnalysis$new()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-PlotRawData"><code>metaAnalysis$PlotRawData()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-PlotLift"><code>metaAnalysis$PlotLift()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-UpdateCI"><code>metaAnalysis$UpdateCI()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-probability"><code>metaAnalysis$probability()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-findings"><code>metaAnalysis$findings()</code></a>
</p>
</li>
<li> <p><a href="#method-meta-analysis-clone"><code>metaAnalysis$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-meta-analysis-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new meta analysis object.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$new(
  data,
  point_estimates,
  standard_errors,
  id,
  mean_mu = 0,
  sd_mu = 0.05,
  ci_width = 0.75,
  X = NULL,
  run_estimation = 1,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data frame with data point estimates and standard
errors from studies.</p>
</dd>
<dt><code>point_estimates</code></dt><dd><p>Name of the variable in the data frame that
contains the point estimates.</p>
</dd>
<dt><code>standard_errors</code></dt><dd><p>Name of the variable in the data frame that
contains the standard errors of the point estimates.</p>
</dd>
<dt><code>id</code></dt><dd><p>Name of the variable in the data frame that contains the
id of the studies.</p>
</dd>
<dt><code>mean_mu</code></dt><dd><p>Prior mean for the true lift in the population.</p>
</dd>
<dt><code>sd_mu</code></dt><dd><p>Prior mean for the standard deviation of the
true lift in the population.</p>
</dd>
<dt><code>ci_width</code></dt><dd><p>Credible interval's width.</p>
</dd>
<dt><code>X</code></dt><dd><p>Covariates matrix.</p>
</dd>
<dt><code>run_estimation</code></dt><dd><p>Integer flag to control whether estimation is run (1) or not (0).</p>
</dd>
<dt><code>...</code></dt><dd><p>other arguments passed to <code><a href="rstan.html#topic+stanmodel-method-sampling">rstan::sampling()</a></code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>meta_analysis</code> object.
</p>


<hr>
<a id="method-meta-analysis-PlotRawData"></a>



<h4>Method <code>PlotRawData()</code></h4>

<p>Plots the raw data.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$PlotRawData()</pre></div>



<h5>Returns</h5>

<p>A plot with point estimates and 95% confidence intervals.
</p>


<hr>
<a id="method-meta-analysis-PlotLift"></a>



<h4>Method <code>PlotLift()</code></h4>

<p>Plots lift's prior and posterior distributions.
</p>
<p>For more details see <code><a href="vizdraws.html#topic+vizdraws">vizdraws::vizdraws()</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$PlotLift(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>other arguments passed to vizdraws.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An interactive plot of the prior and posterior distributions.
</p>


<hr>
<a id="method-meta-analysis-UpdateCI"></a>



<h4>Method <code>UpdateCI()</code></h4>

<p>Update the width of the credible interval.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$UpdateCI(ci_width)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ci_width</code></dt><dd><p>New width for the credible interval. This number in the
(0,1) interval.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-meta-analysis-probability"></a>



<h4>Method <code>probability()</code></h4>

<p>Calculates that probability that lift is between a and b.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$probability(a = -Inf, b = Inf, percent = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>a</code></dt><dd><p>Lower bound. By default -Inf.</p>
</dd>
<dt><code>b</code></dt><dd><p>Upper bound. By default Inf.</p>
</dd>
<dt><code>percent</code></dt><dd><p>A logical that indicates that a and b should
be converted to percentage.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A string with the probability.
</p>


<hr>
<a id="method-meta-analysis-findings"></a>



<h4>Method <code>findings()</code></h4>

<p>Calculates the point estimate a credible interval for the meta analysis.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$findings(percent = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>percent</code></dt><dd><p>A logical that indicates that the point estimate should be
converted to percent.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A string with the findings
</p>


<hr>
<a id="method-meta-analysis-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>metaAnalysis$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='negativeBinomial'>Bayesian Negative Binomial Model Factory</h2><span id='topic+negativeBinomial'></span>

<h3>Description</h3>

<p>Bayesian Negative Binomial Model Factory
</p>
<p>Bayesian Negative Binomial Model Factory
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>version</code></dt><dd><p>Package version used to fit the model</p>
</dd>
<dt><code>mcmChecks</code></dt><dd><p>MCMC diagnostics</p>
</dd>
<dt><code>credible_interval</code></dt><dd><p>Credible interval for the treatment effect</p>
</dd>
<dt><code>tau_draws</code></dt><dd><p>Posterior draws for the treatment effect</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-bnb-new"><code>negativeBinomial$new()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-tracePlot"><code>negativeBinomial$tracePlot()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-posteriorProb"><code>negativeBinomial$posteriorProb()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-pointEstimate"><code>negativeBinomial$pointEstimate()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-credibleInterval"><code>negativeBinomial$credibleInterval()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-vizdraws"><code>negativeBinomial$vizdraws()</code></a>
</p>
</li>
<li> <p><a href="#method-bnb-clone"><code>negativeBinomial$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-bnb-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new Bayesian Negative Binomial Model object.
</p>


<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$new(
  data,
  y,
  x,
  treatment,
  tau_mean,
  tau_sd,
  run_estimation = 1,
  seed = 1982,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data frame to be used</p>
</dd>
<dt><code>y</code></dt><dd><p>Name of the outcome variable in the data frame</p>
</dd>
<dt><code>x</code></dt><dd><p>Vector of names of all covariates in the data frame</p>
</dd>
<dt><code>treatment</code></dt><dd><p>Name of the treatment indicator variable in the data frame</p>
</dd>
<dt><code>tau_mean</code></dt><dd><p>Prior mean for the treatment effect estimation</p>
</dd>
<dt><code>tau_sd</code></dt><dd><p>Prior standard deviation for the treatment effect estimation</p>
</dd>
<dt><code>run_estimation</code></dt><dd><p>Integer flag to control whether estimation is run (1) or not (0)</p>
</dd>
<dt><code>seed</code></dt><dd><p>Seed for Stan fitting</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>invisible
</p>


<hr>
<a id="method-bnb-tracePlot"></a>



<h4>Method <code>tracePlot()</code></h4>

<p>Plot MCMC trace for the eta and sigma parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$tracePlot(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Additional arguments for Stan</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A ggplot object.
</p>


<hr>
<a id="method-bnb-posteriorProb"></a>



<h4>Method <code>posteriorProb()</code></h4>

<p>Calculate posterior probability of effect exceeding a threshold
</p>
<p>This function calculates the posterior probability of the effect
being larger or smaller than a specified threshold.
</p>


<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$posteriorProb(threshold = 0, gt = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>threshold</code></dt><dd><p>A numeric value specifying the threshold.</p>
</dd>
<dt><code>gt</code></dt><dd><p>A logical value indicating whether to calculate the probability
of the effect being greater than (TRUE) or less than (FALSE)
the threshold.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This function uses the private$..tau_draws internal variable
to obtain draws from the posterior distribution of the effect size.
Based on the specified arguments, the function calculates the
proportion of draws exceeding/falling below the threshold and
returns a formatted statement describing the estimated probability.
</p>
<p>Calculate point estimate of the effect
</p>
<p>This R6 method calculates the point estimate of the effect size
based on the posterior draws of the tau parameter.
</p>



<h5>Returns</h5>

<p>A character string summarizing the estimated probability.
</p>


<hr>
<a id="method-bnb-pointEstimate"></a>



<h4>Method <code>pointEstimate()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$pointEstimate(median = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>median</code></dt><dd><p>Logical value. If TRUE (default), the median of
the tau draws is returned. If FALSE, the mean is returned.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..tau_draws internal variable
which contains MCMC draws of the tau parameter representing the
effect size. Based on the specified median argument, the method
calculates and returns either the median or the mean of the draws.
Calculates credible interval for the effect of the intervention
</p>
<p>This R6 method calculates and returns a formatted statement summarizing
the credible interval of a specified width for the effect of the intervention.
</p>



<h5>Returns</h5>

<p>A numeric value representing the point estimate.
</p>


<hr>
<a id="method-bnb-credibleInterval"></a>



<h4>Method <code>credibleInterval()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$credibleInterval(width = 0.75, round = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width</code></dt><dd><p>Numeric value between 0 and 1 representing the desired
width of the credible interval (e.g., 0.95 for a 95% credible interval).</p>
</dd>
<dt><code>round</code></dt><dd><p>Integer value indicating the number of decimal places to round
the lower and upper bounds of the credible interval.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method uses the private$..tau_draws internal variable
containing MCMC draws of the tau parameter representing the effect
size. It calculates the credible interval, stores it internally, and
returns a formatted statement summarizing the findings.
</p>



<h5>Returns</h5>

<p>A character string with the following information:
</p>

<ul>
<li><p> The probability associated with the specified width
</p>
</li>
<li><p> The lower and upper bounds of the credible interval, rounded to the
specified number of decimal places
</p>
</li></ul>



<hr>
<a id="method-bnb-vizdraws"></a>



<h4>Method <code>vizdraws()</code></h4>

<p>Plots impact's prior and posterior distributions.
</p>
<p>For more details see <code><a href="vizdraws.html#topic+vizdraws">vizdraws::vizdraws()</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$vizdraws(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>other arguments passed to vizdraws.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An interactive plot of the prior and posterior distributions.
</p>


<hr>
<a id="method-bnb-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>negativeBinomial$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='pointEstimate'>Calculate Point Estimate (Median or Mean) as Percentage</h2><span id='topic+pointEstimate'></span>

<h3>Description</h3>

<p>This function computes a point estimate from a numeric vector,
returning either the median or the mean as a percentage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pointEstimate(x, median = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pointEstimate_+3A_x">x</code></td>
<td>
<p>A numeric vector containing the data from which to calculate the point estimate.</p>
</td></tr>
<tr><td><code id="pointEstimate_+3A_median">median</code></td>
<td>
<p>A logical value indicating whether to use the median (default: <code>TRUE</code>)
or the mean (<code>FALSE</code>) as the point estimate.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a simple way to obtain either the median or mean
of a numeric vector as a percentage. The choice between these two measures
of central tendency can be controlled by the <code>median</code> argument.
</p>


<h3>Value</h3>

<p>A numeric value representing the chosen point estimate (median or mean)
of the input vector <code>x</code>, multiplied by 100 to express it as a percentage.
</p>

<hr>
<h2 id='randomize'>Randomly Assign Treatment While Controlling for Baseline Equivalency</h2><span id='topic+randomize'></span>

<h3>Description</h3>

<p>This function repeatedly randomizes treatment
assignment (using <code>.randomizer</code>) until
baseline equivalency is achieved across specified
variables, as measured by the <code>checkBaseline</code> function from
the <code>im</code> package. It can optionally stratify the randomization by
specified groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>randomize(
  data,
  variables,
  standard = "Not Concerned",
  seed = NULL,
  max_attempts = 100,
  pr_treated = 0.5,
  group_by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="randomize_+3A_data">data</code></td>
<td>
<p>The input data frame containing pre-intervention variables.</p>
</td></tr>
<tr><td><code id="randomize_+3A_variables">variables</code></td>
<td>
<p>A vector of the names of the pre-intervention
variables to check
for baseline equivalency.</p>
</td></tr>
<tr><td><code id="randomize_+3A_standard">standard</code></td>
<td>
<p>The desired level of baseline equivalence.
Must be one of &quot;Not Concerned&quot;,
&quot;Concerned&quot;, or &quot;Very Concerned&quot;. Default is &quot;Not Concerned&quot;.
(&quot;Not Concerned&quot;, &quot;Concerned&quot;, or &quot;Very Concerned&quot;).
Must be one of &quot;Not Concerned&quot;, &quot;Concerned&quot;, or &quot;Very Concerned&quot;.</p>
</td></tr>
<tr><td><code id="randomize_+3A_seed">seed</code></td>
<td>
<p>(Optional) An integer to set the random
seed for reproducibility of the
initial randomization attempt. Subsequent attempts will use new random seeds.</p>
</td></tr>
<tr><td><code id="randomize_+3A_max_attempts">max_attempts</code></td>
<td>
<p>The maximum number of randomization
attempts to make before stopping and returning an error.</p>
</td></tr>
<tr><td><code id="randomize_+3A_pr_treated">pr_treated</code></td>
<td>
<p>(Optional) The probability of a row being assigned to the
treatment group (TRUE). Default is 0.5.</p>
</td></tr>
<tr><td><code id="randomize_+3A_group_by">group_by</code></td>
<td>
<p>(Optional) A character vector of column names to stratify the
randomization. If provided, the randomization will be done within each group
defined by the specified columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new data frame with the added &quot;treated&quot;
column, if baseline equivalency is achieved within the specified number of
attempts. Otherwise, an error is thrown.
</p>

<hr>
<h2 id='randomizer'>Randomization Class for Treatment Assignment</h2><span id='topic+randomizer'></span>

<h3>Description</h3>

<p>This class provides methods to randomly assign treatments
to a dataset while ensuring baseline covariate balance. It can
handle both simple and stratified randomization.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>version</code></dt><dd><p>The version of the <code>im</code> package used for randomization.</p>
</dd>
<dt><code>data</code></dt><dd><p>The data frame with the assigned treatment.</p>
</dd>
<dt><code>seed</code></dt><dd><p>The random seed used for reproducibility.</p>
</dd>
<dt><code>balance_summary</code></dt><dd><p>A summary (or list of summaries) of the balance
assessment after randomization.</p>
</dd>
<dt><code>balance_plot</code></dt><dd><p>A plot (or list of plots) of the balance assessment
after randomization.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-randomized-new"><code>randomizer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-randomized-clone"><code>randomizer$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-randomized-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a new Randomizer object.
</p>


<h5>Usage</h5>

<div class="r"><pre>randomizer$new(
  data,
  variables,
  standard = "Not Concerned",
  seed = NULL,
  max_attempts = 100,
  group_by = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>The input data frame.</p>
</dd>
<dt><code>variables</code></dt><dd><p>A vector of covariate names to check for balance.</p>
</dd>
<dt><code>standard</code></dt><dd><p>The desired level of baseline equivalence.
Must be one of &quot;Not Concerned&quot;,
&quot;Concerned&quot;, or &quot;Very Concerned&quot;. Default is &quot;Not Concerned&quot;.
(&quot;Not Concerned&quot;, &quot;Concerned&quot;, or &quot;Very Concerned&quot;).</p>
</dd>
<dt><code>seed</code></dt><dd><p>(Optional) An integer to set the random seed.</p>
</dd>
<dt><code>max_attempts</code></dt><dd><p>(Optional) Maximum number of randomization attempts.</p>
</dd>
<dt><code>group_by</code></dt><dd><p>(Optional) A character vector of column names to
stratify randomization.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>randomizer</code> object.
</p>


<hr>
<a id="method-randomized-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>randomizer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='validate_logical_vector'>Validate a Logical Subgroup Vector</h2><span id='topic+validate_logical_vector'></span>

<h3>Description</h3>

<p>This function checks if a given vector is a logical vector (<code>TRUE</code>/<code>FALSE</code>)
and whether its length matches the number of rows in a specified matrix.
It is designed to validate subgroup vectors used for subsettin data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_logical_vector(subgroup, N, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_logical_vector_+3A_subgroup">subgroup</code></td>
<td>
<p>A logical vector representing the subgroup to be validated.</p>
</td></tr>
<tr><td><code id="validate_logical_vector_+3A_n">N</code></td>
<td>
<p>Length the subgroup should have.</p>
</td></tr>
<tr><td><code id="validate_logical_vector_+3A_name">name</code></td>
<td>
<p>(Optional) A string indicating the name of group.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs two key validations:
</p>

<ol>
<li><p> Checks if the <code>subgroup</code> vector is logical.
</p>
</li>
<li><p> Checks if the length of the <code>subgroup</code> vector matches the N.
</p>
</li></ol>



<h3>Value</h3>

<p>The original <code>subgroup</code> vector if it passes all validation checks.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
