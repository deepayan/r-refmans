<!DOCTYPE html><html lang="en"><head><title>Help for package automagic</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {automagic}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe imported from magrittr</p></a></li>
<li><a href='#automagic'><p>Automagically install all required R packages</p></a></li>
<li><a href='#get_dependent_packages'><p>get packages required to run R code</p></a></li>
<li><a href='#get_package_details'><p>get package details</p></a></li>
<li><a href='#install_deps_file'><p>Install R packages from a package dependencies (<code>deps.yaml</code>) file</p></a></li>
<li><a href='#install_package_guess'><p>Install latest version of package from CRAN</p></a></li>
<li><a href='#make_deps_file'><p>Make a package dependencies (<code>deps.yaml</code>) file</p></a></li>
<li><a href='#parse_packages'><p>Parse R code for required packages</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Automagically Document and Install Packages Necessary to Run R
Code</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Parse R code in a given directory for R packages and attempt to install them from CRAN or GitHub. Optionally use a dependencies file for tighter control over which package versions to install.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, formatR, knitr, magrittr, purrr, remotes, yaml</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/cole-brokamp/automagic">https://github.com/cole-brokamp/automagic</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/cole-brokamp/automagic/issues">https://github.com/cole-brokamp/automagic/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-03-05 21:23:46 UTC; cole</td>
</tr>
<tr>
<td>Author:</td>
<td>Cole Brokamp [aut, cre],
  Steph Locke [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cole Brokamp &lt;cole.brokamp@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-03-05 21:30:22 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe imported from magrittr</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>Pipe imported from magrittr
</p>

<hr>
<h2 id='automagic'>Automagically install all required R packages</h2><span id='topic+automagic'></span>

<h3>Description</h3>

<p>Searches a given directory for all R and R Markdown files, parses them for
required packages and attempts to install them from CRAN. More importantly,
if a 'deps.yaml' file was made using <code><a href="#topic+make_deps_file">make_deps_file</a></code>, automagic
will use this rather than try to install based on a best guess.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>automagic(directory = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="automagic_+3A_directory">directory</code></td>
<td>
<p>folder to search for R and Rmd files</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+install_package_guess">install_package_guess</a></code>, <code><a href="#topic+parse_packages">parse_packages</a></code>
</p>

<hr>
<h2 id='get_dependent_packages'>get packages required to run R code</h2><span id='topic+get_dependent_packages'></span>

<h3>Description</h3>

<p>get packages required to run R code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dependent_packages(directory = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_dependent_packages_+3A_directory">directory</code></td>
<td>
<p>folder to search for R and Rmd files</p>
</td></tr>
</table>


<h3>Details</h3>

<p>parses all R and Rmd files in a directory and uses <code><a href="#topic+parse_packages">parse_packages</a></code>
to find all R packages required for the code to run
</p>


<h3>Value</h3>

<p>a vector of package names
</p>

<hr>
<h2 id='get_package_details'>get package details</h2><span id='topic+get_package_details'></span>

<h3>Description</h3>

<p>Uses <code>packageDescription</code> to get details about given package from R library on local machine.
Currently only supports CRAN and GitHub packages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_package_details(pkg_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_package_details_+3A_pkg_name">pkg_name</code></td>
<td>
<p>package name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of package characteristics.
&quot;Package&quot;, &quot;Repository&quot;, and &quot;Version&quot; for CRAN packages.
&quot;Package&quot;, &quot;GithubUsername&quot;, &quot;GithubRepo&quot;, &quot;GithubRef&quot;, and &quot;GithubSHA1&quot; for Github packages.
</p>

<hr>
<h2 id='install_deps_file'>Install R packages from a package dependencies (<code>deps.yaml</code>) file</h2><span id='topic+install_deps_file'></span>

<h3>Description</h3>

<p>Installs packages from GitHub and CRAN based on Sha1 key and version number
respectively, as defined in a <code>deps.yaml</code> file created by
<code><a href="#topic+make_deps_file">make_deps_file</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_deps_file(directory = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_deps_file_+3A_directory">directory</code></td>
<td>
<p>directory containing <code>deps.yaml</code> file</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+make_deps_file">make_deps_file</a></code>, <code><a href="#topic+automagic">automagic</a></code>
</p>

<hr>
<h2 id='install_package_guess'>Install latest version of package from CRAN</h2><span id='topic+install_package_guess'></span>

<h3>Description</h3>

<p>If a package is not available in the R library, attempt to install it
from CRAN.  Unlike previous versions of automagic, if the packages is not available on CRAN,
the function will return an error (instead of trying to install from GitHub).
If R is running interactively, then the user will be prompted before installing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_package_guess(pkg, force_install = FALSE,
  prompt = interactive())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_package_guess_+3A_pkg">pkg</code></td>
<td>
<p>a character vector with the names of packages to install from CRAN</p>
</td></tr>
<tr><td><code id="install_package_guess_+3A_force_install">force_install</code></td>
<td>
<p>install even if package is in library (warning! this
could install a newer or older version of an already installed package)</p>
</td></tr>
<tr><td><code id="install_package_guess_+3A_prompt">prompt</code></td>
<td>
<p>prompt the user to install a package (defaults to yes if the R session is interactive)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>@details This function does not check package versions.  Specify
<code>force_install=TRUE</code> to force installation of the package, updating it
to the latest available version. Note that this function attempts to
install its packages based on a best guess and is meant for use in
automatically setting up an R programming environment. Do not use for
installing packages if you have the option to install from a <code>deps.yaml</code> file.
See <code><a href="#topic+make_deps_file">make_deps_file</a></code> and <code><a href="#topic+install_deps_file">install_deps_file</a></code> for
installing version specific packages based on a local R library.
</p>

<hr>
<h2 id='make_deps_file'>Make a package dependencies (<code>deps.yaml</code>) file</h2><span id='topic+make_deps_file'></span>

<h3>Description</h3>

<p>This function parses R code for required packages using
<code><a href="#topic+parse_packages">parse_packages</a></code> and then queries the R package library to
determine the exact source and version of each package to install.
Currently, only CRAN and GitHub packages are supported.
Install packages from the 'deps.yaml' file using
<code><a href="#topic+automagic">automagic</a>{install_deps_file}</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_deps_file(directory = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_deps_file_+3A_directory">directory</code></td>
<td>
<p>directory containing R code to parse</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+automagic">automagic</a></code>
</p>

<hr>
<h2 id='parse_packages'>Parse R code for required packages</h2><span id='topic+parse_packages'></span>

<h3>Description</h3>

<p>Parses an R or R Markdown file for the package names that would be required to run the code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_packages(fl)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_packages_+3A_fl">fl</code></td>
<td>
<p>file to parse for required package names</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses regular expressions to search through a file
containing R code to find required package names.  It extracts not only
package names denoted by <code><a href="base.html#topic+library">library</a></code> and <code><a href="base.html#topic+require">require</a></code>, but also
packages not attached to the global namespace, but are still called with
<code><a href="base.html#topic++3A+3A">::</a></code> or <code><a href="base.html#topic++3A+3A+3A">:::</a></code>.
</p>
<p>Because it relies on regular expressions, it assumes all packages adhere to
the valid CRAN package name rules (contain only ASCII letters, numbers, and
dot; have at least two characters and start with a letter and not end it a
dot). Code is also tidying internally, making the code more predictable and
easier to parse (removes comments, adds whitespace around operators, etc).
R Markdown files are also supported by extracting only R code using
<code><a href="knitr.html#topic+purl">purl</a></code>.
</p>


<h3>Value</h3>

<p>a vector of package names as character strings
</p>


<h3>See Also</h3>

<p><code><a href="#topic+install_package_guess">install_package_guess</a></code>, <code><a href="#topic+automagic">automagic</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cat('library(ggplot2)\n # library(curl)\n require(leaflet)\n CB::date_print()\n',file='temp.R')
parse_packages('temp.R')
unlink('temp.R')

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
