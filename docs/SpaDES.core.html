<!DOCTYPE html><html><head><title>Help for package SpaDES.core</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SpaDES.core}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#._inputObjectsDF'><p>Create an empty <code>data.frame</code> object for use with <code>inputObjects</code> or</p>
<code>outputObjects</code></a></li>
<li><a href='#.addChangedAttr,simList-method'><p><code>.addChangedAttr</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.addDepends'><p>Add simulation dependencies</p></a></li>
<li><a href='#.addTagsToOutput,simList-method'><p><code>.addTagsToOutput</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.cacheMessage,simList-method'><p><code>.cacheMessage</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.callingModuleName'><p>Namespacing within <code>SpaDES</code></p></a></li>
<li><a href='#.checkCacheRepo,list-method'><p><code>.checkCacheRepo</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.cleanPkgs'><p>strip GitHub repo info from vector of packages</p></a></li>
<li><a href='#.coreModules'><p>Named list of core <code>SpaDES</code> modules</p></a></li>
<li><a href='#.depsLoadOrder'><p>Determine module load order</p></a></li>
<li><a href='#.depsPruneEdges'><p>Prune edges to remove cycles in module dependencies</p></a></li>
<li><a href='#.emptyMetadata'><p>Default (empty) metadata</p></a></li>
<li><a href='#.fileEdit'><p>Open a file for editing</p></a></li>
<li><a href='#.fileExtensions'><p>File extensions map</p></a></li>
<li><a href='#.fileTableIn'><p>Create empty <code>fileTable</code> for inputs and outputs</p></a></li>
<li><a href='#.fillInputRows'><p>An internal function for coercing a data.frame to <code>inputs()</code></p></a></li>
<li><a href='#.fillOutputRows'><p>An internal function for coercing a data.frame to <code>outputs()</code></p></a></li>
<li><a href='#.findElementsInEnv'><p>Find all references to <code style="white-space: pre;">&#8288;sim$&#8288;</code></p></a></li>
<li><a href='#.findModuleName'><p>Identify module names up to a given recursive level</p></a></li>
<li><a href='#.findObjects'><p>Find objects if passed as character strings</p></a></li>
<li><a href='#.findSimList'><p>Find <code>simList</code> in a nested list</p></a></li>
<li><a href='#.getModuleInputObjects'><p>Extract the user-defined <code>.inputObjects</code> function from a module</p></a></li>
<li><a href='#.getOption'><p>A slightly modified version of <code>getOption()</code></p></a></li>
<li><a href='#.guessPkgFun'><p>Guess package of a function</p></a></li>
<li><a href='#.identifyChildModules'><p>Identify child modules from a recursive list</p></a></li>
<li><a href='#.isNamespaced'><p>Check is module uses module namespacing</p></a></li>
<li><a href='#.keepAttrs'><p>Attach missing attributes from <code>x</code> to <code>y</code></p></a></li>
<li><a href='#.modifySearchPath'><p>Modify package order in search path</p></a></li>
<li><a href='#.moduleDeps-class'><p>The <code>.moduleDeps</code> class</p></a></li>
<li><a href='#.parseElems,simList-method'><p><code>.parseElems</code> for <code>simList</code> class objects</p></a></li>
<li><a href='#.parseMessage'><p>Prepend module name to a message</p></a></li>
<li><a href='#.parseModulePartial'><p>Parse and initialize a module</p></a></li>
<li><a href='#.pkgEnv'><p>The <code>SpaDES.core</code> package environment</p></a></li>
<li><a href='#.preDigestByClass,simList-method'><p>Pre-digesting method for <code>simList</code></p></a></li>
<li><a href='#.prepareOutput,simList-method'><p><code>.prepareOutput</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.quickCheck'><p>The <code>SpaDES.core</code> variable to switch between quick and robust checking</p></a></li>
<li><a href='#.robustDigest,simList-method'><p><code>.robustDigest</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.runCodeChecks'><p>Runs a series of code checks during <code>simInit()</code></p></a></li>
<li><a href='#.runModuleInputObjects'><p>Run module's <code>.inputObjects</code></p></a></li>
<li><a href='#.sim2gantt'><p>sim2gantt</p></a></li>
<li><a href='#.simDeps-class'><p>The <code>.simDeps</code> class</p></a></li>
<li><a href='#.tagsByClass,simList-method'><p><code>.tagsByClass</code> for <code>simList</code> objects</p></a></li>
<li><a href='#.tryCatch'><p><code>tryCatch</code> that keeps warnings, errors and value (result)</p></a></li>
<li><a href='#.unparsed'><p>Determine which modules in a list are unparsed</p></a></li>
<li><a href='#.verb'><p>Chose verb conjugation for &quot;to be&quot;</p></a></li>
<li><a href='#.wrap.simList'><p>Methods for <code>.wrap</code> and <code>.unwrap</code></p></a></li>
<li><a href='#[,simList,character,ANY-method'><p>Extract an intact <code>simList</code> but with subset of objects</p></a></li>
<li><a href='#all.equal.simList'><p>All equal method for <code>simList</code> objects</p></a></li>
<li><a href='#anyPlotting'><p>Test whether there should be any plotting from <code>.plots</code> module parameter</p></a></li>
<li><a href='#append_attr'><p>Add a module to a <code>moduleList</code></p></a></li>
<li><a href='#bindrows'><p>Simple wrapper around <code>data.table::rbindlist</code></p></a></li>
<li><a href='#checkModule'><p>Check for the existence of a remote module</p></a></li>
<li><a href='#checkModuleLocal'><p>Check for the existence of a module locally</p></a></li>
<li><a href='#checkObject'><p>Check for existence of object(s) referenced by a <code>objects</code> slot of a</p>
<code>simList</code> object</a></li>
<li><a href='#checkParams'><p>Check use and existence of parameters passed to simulation.</p></a></li>
<li><a href='#checkpointFile'><p>Simulation checkpoints.</p></a></li>
<li><a href='#checksums'><p>Calculate checksum for a module's data files</p></a></li>
<li><a href='#citation'><p>A citation method for <code>SpaDES</code> modules</p></a></li>
<li><a href='#classFilter'><p>Filter objects by class</p></a></li>
<li><a href='#clearCache,simList-method'><p><code>clearCache</code> for <code>simList</code> objects</p></a></li>
<li><a href='#convertToPackage'><p>Convert standard module code into an R package</p></a></li>
<li><a href='#Copy,simList-method'><p>Copy for <code>simList</code> class objects</p></a></li>
<li><a href='#copyModule'><p>Create a copy of an existing module</p></a></li>
<li><a href='#createsOutput'><p>Define an output object of a module</p></a></li>
<li><a href='#defineEvent'><p>Alternative way to define events in SpaDES.core</p></a></li>
<li><a href='#defineModule'><p>Define a new module.</p></a></li>
<li><a href='#defineParameter'><p>Define a parameter used in a module</p></a></li>
<li><a href='#depsEdgeList'><p>Build edge list for module dependency graph</p></a></li>
<li><a href='#depsGraph'><p>Build a module dependency graph</p></a></li>
<li><a href='#dhour'><p>SpaDES time units</p></a></li>
<li><a href='#doEvent'><p>Process a simulation event</p></a></li>
<li><a href='#downloadData'><p>Download module data</p></a></li>
<li><a href='#downloadModule'><p>Download a module from a SpaDES module GitHub repository</p></a></li>
<li><a href='#emptyEventList'><p>Blank (template) event list</p></a></li>
<li><a href='#envir'><p>Simulation environment</p></a></li>
<li><a href='#eventDiagram'><p>Simulation event diagram</p></a></li>
<li><a href='#events'><p>Simulation event lists</p></a></li>
<li><a href='#expectsInput'><p>Define an input object that the module expects.</p></a></li>
<li><a href='#extractURL'><p>Extract a url from module metadata</p></a></li>
<li><a href='#fileName'><p>Extract filename (without extension) of a file</p></a></li>
<li><a href='#ganttStatus'><p><code>ganttStatus</code></p></a></li>
<li><a href='#getMapPath'><p>Get copies of sample files for examples and tests</p></a></li>
<li><a href='#getModuleVersion'><p>Find the latest module version from a SpaDES module repository</p></a></li>
<li><a href='#globals'><p>Get and set global simulation parameters</p></a></li>
<li><a href='#initialize,simList-method'><p>Generate a <code>simList</code> object</p></a></li>
<li><a href='#inputObjects'><p>Metadata accessors</p></a></li>
<li><a href='#inputs'><p>Simulation inputs</p></a></li>
<li><a href='#inSeconds'><p>Convert time units</p></a></li>
<li><a href='#loadSimList'><p>Load a saved <code>simList</code> and ancillary files</p></a></li>
<li><a href='#makeMemoisable.simList'><p>Make <code>simList</code> correctly work with <code>memoise</code></p></a></li>
<li><a href='#maxTimeunit'><p>Determine the largest timestep unit in a simulation</p></a></li>
<li><a href='#memoryUseThisSession'><p>Estimate memory used with <code>system("ps")</code></p></a></li>
<li><a href='#minTimeunit'><p>Determine the smallest timeunit in a simulation</p></a></li>
<li><a href='#moduleCodeFiles'><p>Extract the full file paths for R source code</p></a></li>
<li><a href='#moduleCoverage'><p>Calculate module coverage of unit tests</p></a></li>
<li><a href='#moduleDefaults'><p>Defaults values used in <code>defineModule</code></p></a></li>
<li><a href='#moduleDiagram'><p>Simulation module dependency diagram</p></a></li>
<li><a href='#moduleGraph'><p>Build a module dependency graph</p></a></li>
<li><a href='#moduleMetadata'><p>Parse and extract module metadata</p></a></li>
<li><a href='#moduleParams'><p>Extract a module's parameters, inputs, or outputs</p></a></li>
<li><a href='#modules'><p>Simulation modules and dependencies</p></a></li>
<li><a href='#moduleVersion'><p>Parse and extract a module's version</p></a></li>
<li><a href='#newModule'><p>Create new module from template</p></a></li>
<li><a href='#newModuleCode'><p>Create new module code file</p></a></li>
<li><a href='#newModuleDocumentation'><p>Create new module documentation</p></a></li>
<li><a href='#newModuleTests'><p>Create template testing structures for new modules</p></a></li>
<li><a href='#newProgressBar'><p>Progress bar</p></a></li>
<li><a href='#newProject'><p>Create new SpaDES project</p></a></li>
<li><a href='#newProjectCode'><p>Create new module code file</p></a></li>
<li><a href='#objectDiagram'><p>Simulation object dependency diagram</p></a></li>
<li><a href='#objectSynonyms'><p>Identify synonyms in a <code>simList</code></p></a></li>
<li><a href='#objs'><p>Extract or replace an object from the simulation environment</p></a></li>
<li><a href='#objSize.simList'><p>Object size for <code>simList</code></p></a></li>
<li><a href='#openModules'><p>Open all modules nested within a base directory</p></a></li>
<li><a href='#outputs'><p>Simulation outputs</p></a></li>
<li><a href='#packages'><p>Get module or simulation package dependencies</p></a></li>
<li><a href='#paramCheckOtherMods'><p>Test and update a parameter against same parameter in other modules</p></a></li>
<li><a href='#params'><p>Get and set simulation parameters</p></a></li>
<li><a href='#paths'><p>Specify paths for modules, inputs, outputs, and temporary rasters</p></a></li>
<li><a href='#Plot,simList-method'><p>Plot method for <code>simList</code> objects</p></a></li>
<li><a href='#Plots'><p><code>Plot</code> wrapper intended for use in a SpaDES module</p></a></li>
<li><a href='#priority'><p>Event priority</p></a></li>
<li><a href='#progressInterval'><p>Get and set simulation progress bar details</p></a></li>
<li><a href='#rasterCreate'><p>Simple wrapper to load any <code style="white-space: pre;">&#8288;Raster*&#8288;</code> object</p></a></li>
<li><a href='#rasterToMemory'><p>Read raster to memory</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#remoteFileSize'><p>Determine the size of a remotely hosted file</p></a></li>
<li><a href='#restartR'><p>Restart R programmatically</p></a></li>
<li><a href='#restartSpades'><p>Restart an interrupted simulation</p></a></li>
<li><a href='#rndstr'><p>Generate random strings</p></a></li>
<li><a href='#saveFiles'><p>Save objects using <code>.saveObjects</code> in <code>params</code> slot of <code>simInit</code></p></a></li>
<li><a href='#saveSimList'><p>Save a whole <code>simList</code> object to disk</p></a></li>
<li><a href='#scheduleConditionalEvent'><p>Schedule a conditional simulation event</p></a></li>
<li><a href='#scheduleEvent'><p>Schedule a simulation event</p></a></li>
<li><a href='#setPaths'><p>Get and set default working directories</p></a></li>
<li><a href='#show,simList-method'><p>Show an Object</p></a></li>
<li><a href='#simFile'><p>Generate simulation file name</p></a></li>
<li><a href='#simInit'><p>Initialize a new simulation</p></a></li>
<li><a href='#simInitAndSpades'><p>Call <code>simInit</code> and <code>spades</code> together</p></a></li>
<li><a href='#simList-class'><p>The <code>simList</code> class</p></a></li>
<li><a href='#spades'><p>Run a spatial discrete event simulation</p></a></li>
<li><a href='#SpaDES.core-package'><p>Categorized overview of the <code>SpaDES.core</code> package</p></a></li>
<li><a href='#spadesClasses'><p>Classes defined in SpaDES</p></a></li>
<li><a href='#spadesOptions'><p><code>SpaDES.core</code> options</p></a></li>
<li><a href='#suppliedElsewhere'><p>Assess whether an object has or will be supplied from elsewhere</p></a></li>
<li><a href='#times'><p>Time usage in <code>SpaDES</code></p></a></li>
<li><a href='#updateList'><p>Update elements of a named list with elements of a second named list</p></a></li>
<li><a href='#use_gha'><p>Use GitHub actions for automated module checking</p></a></li>
<li><a href='#writeEventInfo'><p>Write simulation event info to file</p></a></li>
<li><a href='#writeRNGInfo'><p>Write RNG state info to file</p></a></li>
<li><a href='#zipModule'><p>Create a zip archive of a module subdirectory</p></a></li>
<li><a href='#zipSimList'><p>Zip a <code>simList</code> and various files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Core Utilities for Developing and Running Spatially Explicit
Discrete Event Models</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides the core framework for a discrete event system to 
    implement a complete data-to-decisions, reproducible workflow.
    The core components facilitate the development of modular pieces, 
    and enable the user to include additional functionality by running user-built modules.
    Includes conditional scheduling, restart after interruption, packaging of
    reusable modules, tools for developing arbitrary automated workflows,
    automated interweaving of modules of different temporal resolution,
    and tools for visualizing and understanding the within-project dependencies. 
    The suggested package 'NLMR' can be installed from the repository 
    (<a href="https://PredictiveEcology.r-universe.dev">https://PredictiveEcology.r-universe.dev</a>).</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://spades-core.predictiveecology.org/">https://spades-core.predictiveecology.org/</a>,
<a href="https://github.com/PredictiveEcology/SpaDES.core">https://github.com/PredictiveEcology/SpaDES.core</a></td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-09</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1), quickPlot (&ge; 1.0.2), reproducible (&ge; 2.0.9)</td>
</tr>
<tr>
<td>Imports:</td>
<td>crayon, data.table (&ge; 1.11.0), fs, igraph (&ge; 1.0.1), lobstr,
methods, qs (&ge; 0.21.1), Require (&ge; 0.3.1), stats, terra (&ge;
1.7-46), utils, whisker</td>
</tr>
<tr>
<td>Suggests:</td>
<td>archive, CircStats, codetools, covr, DiagrammeR (&ge; 0.8.2),
future, future.callr, ggplot2, ggplotify, httr, knitr, lattice,
logging, magrittr, NLMR (&ge; 1.1.1), pkgload, png, RColorBrewer
(&ge; 1.1-2), raster (&ge; 2.5-8), rmarkdown, roxygen2, RSQLite,
rstudioapi, sp, SpaDES.tools (&ge; 2.0.0), tcltk, testthat (&ge;
1.0.2), withr</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://predictiveecology.r-universe.dev/">https://predictiveecology.r-universe.dev/</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-CA</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/PredictiveEcology/SpaDES.core/issues">https://github.com/PredictiveEcology/SpaDES.core/issues</a></td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>Collate:</td>
<td>'module-dependencies-class.R' 'misc-methods.R' 'environment.R'
'helpers.R' 'simList-class.R' 'times.R' 'simList-accessors.R'
'Plots.R' 'cache.R' 'check.R' 'priority.R' 'checkpoint.R'
'code-checking.R' 'convertToPackage.R' 'copy.R' 'debugging.R'
'downloadData.R' 'simulation-parseModule.R'
'simulation-simInit.R' 'load.R' 'memory-leaks.R' 'memory.R'
'modActiveBinding.R' 'module-define.R'
'module-dependencies-methods.R' 'module-repository.R'
'module-template.R' 'moduleCoverage.R' 'moduleMetadata.R'
'objectSynonyms.R' 'options.R' 'paths.R' 'plotting-diagrams.R'
'plotting.R' 'progress.R' 'project-template.R' 'reexports.R'
'restart.R' 'save.R' 'saveLoadSimList.R' 'simulation-spades.R'
'spades-classes.R' 'spades-core-deprecated.R'
'spades-core-package.R' 'suppliedElsewhere.R' 'zzz.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-09 15:43:52 UTC; emcintir</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex M Chubaty <a href="https://orcid.org/0000-0001-7146-8135"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Eliot J B McIntire
    <a href="https://orcid.org/0000-0002-6914-8316"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Yong Luo [ctb],
  Steve Cumming [ctb],
  Ceres Barros <a href="https://orcid.org/0000-0003-4036-977X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  His Majesty the King in Right of Canada, as represented by the Minister
    of Natural Resources Canada [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Eliot J B McIntire &lt;eliot.mcintire@canada.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-10 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='._inputObjectsDF'>Create an empty <code>data.frame</code> object for use with <code>inputObjects</code> or
<code>outputObjects</code></h2><span id='topic+._inputObjectsDF'></span><span id='topic+._inputObjectsDF+2Cmissing-method'></span><span id='topic+._outputObjectsDF'></span><span id='topic+._outputObjectsDF+2Cmissing-method'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>._inputObjectsDF(x)

## S4 method for signature 'missing'
._inputObjectsDF()

._outputObjectsDF(x)

## S4 method for signature 'missing'
._outputObjectsDF()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="._inputObjectsDF_+3A_x">x</code></td>
<td>
<p>Not used. Should be missing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+defineModule">defineModule()</a></code>
</p>

<hr>
<h2 id='.addChangedAttr+2CsimList-method'><code>.addChangedAttr</code> for <code>simList</code> objects</h2><span id='topic+.addChangedAttr+2CsimList-method'></span>

<h3>Description</h3>

<p>This will evaluate which elements in the <code>simList</code> object changed following
this Cached function call. It will add a named character string as an
attribute <code>attr(x, ".Cache")$changed</code>, indicating which ones changed.
When this function is subsequently called again, only these changed objects
will be returned. All other <code>simList</code> objects will remain unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.addChangedAttr(object, preDigest, origArguments, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".addChangedAttr+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
<tr><td><code id=".addChangedAttr+2B2CsimList-method_+3A_predigest">preDigest</code></td>
<td>
<p>The full, element by element hash of the input arguments to that same function,
e.g., from <code>.robustDigest</code></p>
</td></tr>
<tr><td><code id=".addChangedAttr+2B2CsimList-method_+3A_origarguments">origArguments</code></td>
<td>
<p>These are the actual arguments (i.e., the values, not the names) that
were the source for <code>preDigest</code></p>
</td></tr>
<tr><td><code id=".addChangedAttr+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>Anything passed to methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the object with attribute added
</p>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.addChangedAttr</a>
</p>

<hr>
<h2 id='.addDepends'>Add simulation dependencies</h2><span id='topic+.addDepends'></span><span id='topic+.addDepends+2CsimList+2C.moduleDeps-method'></span>

<h3>Description</h3>

<p>Internal function.
Adds a <code>.moduleDeps</code> object to the simulation dependency list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.addDepends(sim, x)

## S4 method for signature 'simList,.moduleDeps'
.addDepends(sim, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".addDepends_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id=".addDepends_+3A_x">x</code></td>
<td>
<p>A named list containing the parameters used to construct a new
<code>.moduleDeps</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='.addTagsToOutput+2CsimList-method'><code>.addTagsToOutput</code> for <code>simList</code> objects</h2><span id='topic+.addTagsToOutput+2CsimList-method'></span>

<h3>Description</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.addTagsToOutput()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.addTagsToOutput(object, outputObjects, FUN, preDigestByClass)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".addTagsToOutput+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
<tr><td><code id=".addTagsToOutput+2B2CsimList-method_+3A_outputobjects">outputObjects</code></td>
<td>
<p>Optional character vector indicating which objects to
return. This is only relevant for list, environment (or similar) objects</p>
</td></tr>
<tr><td><code id=".addTagsToOutput+2B2CsimList-method_+3A_fun">FUN</code></td>
<td>
<p>A function</p>
</td></tr>
<tr><td><code id=".addTagsToOutput+2B2CsimList-method_+3A_predigestbyclass">preDigestByClass</code></td>
<td>
<p>A list, usually from <code>.preDigestByClass</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>modified <code>object</code>, with attributes added
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='.cacheMessage+2CsimList-method'><code>.cacheMessage</code> for <code>simList</code> objects</h2><span id='topic+.cacheMessage+2CsimList-method'></span>

<h3>Description</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.cacheMessage()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.cacheMessage(
  object,
  functionName,
  fromMemoise = getOption("reproducible.useMemoise", TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".cacheMessage+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
<tr><td><code id=".cacheMessage+2B2CsimList-method_+3A_functionname">functionName</code></td>
<td>
<p>A character string indicating the function name</p>
</td></tr>
<tr><td><code id=".cacheMessage+2B2CsimList-method_+3A_frommemoise">fromMemoise</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the message will be about
recovery from memoised copy</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.cacheMessage</a>
</p>

<hr>
<h2 id='.callingModuleName'>Namespacing within <code>SpaDES</code></h2><span id='topic+.callingModuleName'></span><span id='topic+.callingModuleName+2CsimList-method'></span><span id='topic+currentModule'></span><span id='topic+currentModule+2CsimList-method'></span><span id='topic+.callingFrameTimeunit'></span>

<h3>Description</h3>

<p>This will only return the module name if it is inside a <code>spades</code> call,
i.e., it will return <code>NULL</code> if used in interactive mode.
The related function <code>currentModule</code> is simply a rapid accessor for the
current module name. This latter will return the module that is in the current
event queue, which will never be <code>NULL</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.callingModuleName(sim)

## S4 method for signature 'simList'
.callingModuleName(sim)

currentModule(sim)

## S4 method for signature 'simList'
currentModule(sim)

.callingFrameTimeunit(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".callingModuleName_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id=".callingModuleName_+3A_x">x</code></td>
<td>
<p>A <code>simList</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>.callingModuleName</code> returns the name of the module that is currently
the active module calling functions like <code>scheduleEvent</code>.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='.checkCacheRepo+2Clist-method'><code>.checkCacheRepo</code> for <code>simList</code> objects</h2><span id='topic+.checkCacheRepo+2Clist-method'></span>

<h3>Description</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.checkCacheRepo()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'list'
.checkCacheRepo(object, create = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".checkCacheRepo+2B2Clist-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
<tr><td><code id=".checkCacheRepo+2B2Clist-method_+3A_create">create</code></td>
<td>
<p>Logical. If TRUE, then it will create the path for cache.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string representing a directory path to the cache repo
</p>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.checkCacheRepo</a>
</p>

<hr>
<h2 id='.cleanPkgs'>strip GitHub repo info from vector of packages</h2><span id='topic+.cleanPkgs'></span>

<h3>Description</h3>

<p>strip GitHub repo info from vector of packages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.cleanPkgs(pkgs)
</code></pre>

<hr>
<h2 id='.coreModules'>Named list of core <code>SpaDES</code> modules</h2><span id='topic+.coreModules'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.coreModules()
</code></pre>


<h3>Value</h3>

<p>Returns a named list of the core modules.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.depsLoadOrder'>Determine module load order</h2><span id='topic+.depsLoadOrder'></span><span id='topic+.depsLoadOrder+2CsimList+2Cigraph-method'></span>

<h3>Description</h3>

<p>Internal function.
Checks module dependencies and attempts to ensure that cyclic dependencies
can be resolved, checking objects in the global environment, and finally,
attempts to determine the load order for modules in the simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.depsLoadOrder(sim, simGraph)

## S4 method for signature 'simList,igraph'
.depsLoadOrder(sim, simGraph)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".depsLoadOrder_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id=".depsLoadOrder_+3A_simgraph">simGraph</code></td>
<td>
<p>An <code><a href="igraph.html#topic+igraph">igraph()</a></code> object produced by <code><a href="#topic+depsGraph">depsGraph()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Uses <code><a href="igraph.html#topic+topo_sort">igraph::topo_sort()</a></code> to try to find a load order satisfying
all module object dependencies.
</p>


<h3>Value</h3>

<p>Character vector of module names, sorted in correct load order.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.depsPruneEdges'>Prune edges to remove cycles in module dependencies</h2><span id='topic+.depsPruneEdges'></span><span id='topic+.depsPruneEdges+2Cdata.table-method'></span>

<h3>Description</h3>

<p>Internal function.
Attempts to identify cycles in the dependency graph and remove edges representing
object dependencies which are provided by other modules in the simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.depsPruneEdges(simEdgeList)

## S4 method for signature 'data.table'
.depsPruneEdges(simEdgeList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".depsPruneEdges_+3A_simedgelist">simEdgeList</code></td>
<td>
<p>An edge list (<code>data.table</code>) produced by <code><a href="#topic+depsEdgeList">depsEdgeList()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated edge list object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.emptyMetadata'>Default (empty) metadata</h2><span id='topic+.emptyMetadata'></span><span id='topic+.emptyMetadata+2Cmissing-method'></span>

<h3>Description</h3>

<p>Internal use only.
Default values to use for metadata elements when not otherwise supplied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.emptyMetadata(x)

## S4 method for signature 'missing'
.emptyMetadata()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".emptyMetadata_+3A_x">x</code></td>
<td>
<p>Not used. Should be missing.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.fileEdit'>Open a file for editing</h2><span id='topic+.fileEdit'></span>

<h3>Description</h3>

<p>RStudio's <code>file.edit</code> behaves differently than <code>utils::file.edit</code>.
The workaround is to have the user manually open the file if they are using RStudio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fileEdit(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fileEdit_+3A_file">file</code></td>
<td>
<p>Character string giving the file path to open.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invoked for its side effect of opening a file for editing.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.fileExtensions'>File extensions map</h2><span id='topic+.fileExtensions'></span><span id='topic+loadFiles'></span><span id='topic+loadFiles+2CsimList+2Cmissing-method'></span><span id='topic+loadFiles+2Cmissing+2CANY-method'></span><span id='topic+loadFiles+2Cmissing+2Cmissing-method'></span><span id='topic+.saveFileExtensions'></span>

<h3>Description</h3>

<p>How to load various types of files in R.
</p>
<p>This function has two roles:
</p>

<ol>
<li><p> to proceed with the loading of files that are in a <code>simList</code>; or
</p>
</li>
<li><p> as a shortcut to <code>simInit(inputs = filelist)</code>.
</p>
</li></ol>

<p>A <code>data.frame</code> with information on how to load various types of files in R,
containing the columns:
</p>

<ul>
<li> <p><code>exts</code>: the file extension;
</p>
</li>
<li> <p><code>fun</code>: the function to use for files with this file extension;
</p>
</li>
<li> <p><code>package</code>: the package from which to load <code>fun</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>.fileExtensions()

loadFiles(sim, filelist, ...)

## S4 method for signature 'simList,missing'
loadFiles(sim, filelist, ...)

## S4 method for signature 'missing,ANY'
loadFiles(sim, filelist, ...)

## S4 method for signature 'missing,missing'
loadFiles(sim, filelist, ...)

.saveFileExtensions()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fileExtensions_+3A_sim">sim</code></td>
<td>
<p><code>simList</code> object.</p>
</td></tr>
<tr><td><code id=".fileExtensions_+3A_filelist">filelist</code></td>
<td>
<p><code>list</code> or <code>data.frame</code> to call <code>loadFiles</code> directly from the
<code>filelist</code> as described in Details</p>
</td></tr>
<tr><td><code id=".fileExtensions_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> of file extension, package, and function mappings
</p>
<p>the modified <code>sim</code>, invisibly.
</p>
<p><code>data.frame</code>
</p>


<h3>Note</h3>

<p>Generally not intended to be used by users.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+inputs">inputs()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(SpaDES.core)

# Load random maps included with package
filelist &lt;- data.frame(
  files = dir(getMapPath(tempdir()), full.names = TRUE),
  functions = "rasterToMemory",
  package = "SpaDES.core"
)
sim1 &lt;- loadFiles(filelist = filelist) # loads all the maps to sim1 simList

# Second, more sophisticated. All maps loaded at time = 0, and the last one is reloaded
#  at time = 10 and 20 (via "intervals").
# Also, pass the single argument as a list to all functions...
#  specifically, when add "native = TRUE" as an argument to the raster function
files &lt;- dir(getMapPath(tempdir()), full.names = TRUE)
arguments &lt;- I(rep(list(lyrs = 1), length(files)))
filelist &lt;- data.frame(
   files = files,
   functions = "terra::rast",
   objectName = NA,
   arguments = arguments,
   loadTime = 0,
   intervals = c(rep(NA, length(files)-1), 10)
)

sim2 &lt;- loadFiles(filelist = filelist) # only does the time = 0 loading; see next
end(sim2) &lt;- 10
sim2 &lt;- spades(sim2) # loads the object at time 10

# if we extend the end time and continue running, it will load an object scheduled
#  at time = 10, and it will also schedule a new object loading at 20 because
#  interval = 10
end(sim2) &lt;- 20
sim2 &lt;- spades(sim2) # loads the percentPine map 2 more times, once at 10, once at 20

</code></pre>

<hr>
<h2 id='.fileTableIn'>Create empty <code>fileTable</code> for inputs and outputs</h2><span id='topic+.fileTableIn'></span><span id='topic+.fileTableIn+2Cmissing-method'></span><span id='topic+.fileTableInCols'></span><span id='topic+.fileTableInDF'></span><span id='topic+.fileTableOut'></span><span id='topic+.fileTableOut+2Cmissing-method'></span><span id='topic+.fileTableOutCols'></span><span id='topic+.fileTableOutDF'></span>

<h3>Description</h3>

<p>Internal functions.
Returns an empty <code>fileTable</code> to be used with inputs and outputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fileTableIn(x)

## S4 method for signature 'missing'
.fileTableIn()

.fileTableInCols

.fileTableInDF

.fileTableOut(x)

## S4 method for signature 'missing'
.fileTableOut()

.fileTableOutCols

.fileTableOutDF
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fileTableIn_+3A_x">x</code></td>
<td>
<p>Not used (should be missing)</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 8.
</p>
<p>An object of class <code>data.frame</code> with 0 rows and 8 columns.
</p>
<p>An object of class <code>character</code> of length 7.
</p>
<p>An object of class <code>data.frame</code> with 0 rows and 7 columns.
</p>


<h3>Value</h3>

<p>An empty data.frame with structure needed for input/output <code>fileTable.</code>
</p>

<hr>
<h2 id='.fillInputRows'>An internal function for coercing a data.frame to <code>inputs()</code></h2><span id='topic+.fillInputRows'></span>

<h3>Description</h3>

<p>An internal function for coercing a data.frame to <code>inputs()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fillInputRows(inputDF, startTime)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fillInputRows_+3A_inputdf">inputDF</code></td>
<td>
<p>A data.frame with partial columns to pass to <code style="white-space: pre;">&#8288;inputs&lt;-&#8288;</code></p>
</td></tr>
<tr><td><code id=".fillInputRows_+3A_starttime">startTime</code></td>
<td>
<p>Numeric time. The <code>start(sim)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='.fillOutputRows'>An internal function for coercing a data.frame to <code>outputs()</code></h2><span id='topic+.fillOutputRows'></span>

<h3>Description</h3>

<p>An internal function for coercing a data.frame to <code>outputs()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fillOutputRows(outputDF, endTime)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fillOutputRows_+3A_outputdf">outputDF</code></td>
<td>
<p>A data.frame with partial columns to pass to <code style="white-space: pre;">&#8288;outputs&lt;-&#8288;</code></p>
</td></tr>
<tr><td><code id=".fillOutputRows_+3A_endtime">endTime</code></td>
<td>
<p>Numeric time. The <code>end(sim)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='.findElementsInEnv'>Find all references to <code style="white-space: pre;">&#8288;sim$&#8288;</code></h2><span id='topic+.findElementsInEnv'></span><span id='topic+.findElement'></span><span id='topic+.parsingSim'></span>

<h3>Description</h3>

<p>Find all references to <code style="white-space: pre;">&#8288;sim$&#8288;</code>
</p>
<p><code>.parsingSim</code> will pull out the various ways to use <code>sim</code>, e.g.,
<code>sim$xxx</code>, <code>sim[["xxx"]]</code>, <code>sim[[P(sim)$xxx]]</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.findElementsInEnv(
  envToFindSim = parent.frame(),
  moduleEnv = parent.frame(),
  type
)

.findElement(x, type)

.parsingSim(x, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".findElementsInEnv_+3A_envtofindsim">envToFindSim</code></td>
<td>
<p>An environment where <code>sim</code> is defined. This is used when
the element accessing the <code>simList</code> is actually a call, e.g.,
<code>sim[[P(sim)$stackName]]</code></p>
</td></tr>
<tr><td><code id=".findElementsInEnv_+3A_moduleenv">moduleEnv</code></td>
<td>
<p>The environment where the module functions are.</p>
</td></tr>
<tr><td><code id=".findElementsInEnv_+3A_type">type</code></td>
<td>
<p>Either &quot;get&quot;, &quot;assign&quot;, or &quot;globals&quot;. See details.</p>
</td></tr>
<tr><td><code id=".findElementsInEnv_+3A_x">x</code></td>
<td>
<p>A call in which to search for <code>sim</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>.findElementsInEnv</code> is a wrapper around <code>.findElements</code>.
It will convert function code to a call, and then pass it to <code>.findElements</code>.
It also does some cleaning for duplications, <code>NA</code> values, and cases where the element
inside a <code>sim[["xxx"]]</code> is a variable that should be evaluated, rather than
simply taken verbatim (e.g., <code style="white-space: pre;">&#8288;sim[[P(sim)$stackName]])&#8288;</code>.
</p>
<p>When <strong><code>type = "get"</code></strong>, the function scans for <code>sim$xxx</code> or <code style="white-space: pre;">&#8288;sim[["xxx"]]]&#8288;</code> on
the RHS of an assignment operator or when there is no assignment. When
<strong><code>type = "assign"</code></strong>, the function scans for <code>sim$xxx</code> or <code>sim[["xxx"]]</code> on the
LHS of an assignment operator. When <strong><code>type = "globals"</code></strong>, the function
scans for all functions (i.e., &quot;globals&quot;) being used.
This is similar to <code>codetools::findGlobals()</code>, but faster.
</p>
<p><code>.findElement</code> will omit whatever it finds inside a <code>is.null()</code>, when <code>type = "assign"</code>.
Usually this is a test of existence of that object, in order to assign to that object.
It is only reading it to determine whether or not it should write to it.
</p>


<h3>Value</h3>

<p>A character string with all <code>sim</code> objects found.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='.findModuleName'>Identify module names up to a given recursive level</h2><span id='topic+.findModuleName'></span>

<h3>Description</h3>

<p>With children, parents, grandparents, etc.; there can be several &quot;layers&quot; of recursion.
Some functions need to evaluate the outer level for a value, if found, they don't need
to proceed further. If not found, increment one more level of recursion, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.findModuleName(modList, recursive = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".findModuleName_+3A_modlist">modList</code></td>
<td>
<p>(Nested) Named list of module names</p>
</td></tr>
<tr><td><code id=".findModuleName_+3A_recursive">recursive</code></td>
<td>
<p>Numeric. The depth of recursion, where 0 is only top level, 1 is 1 level in etc.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of modules names
</p>

<hr>
<h2 id='.findObjects'>Find objects if passed as character strings</h2><span id='topic+.findObjects'></span>

<h3>Description</h3>

<p>Objects are passed into <code>simList</code> via <code>simInit</code> call or <code>objects(simList)</code>
assignment. This function is an internal helper to find those objects from their
environments by searching the call stack.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.findObjects(objects, functionCall = "simInit")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".findObjects_+3A_objects">objects</code></td>
<td>
<p>A character vector of object names</p>
</td></tr>
<tr><td><code id=".findObjects_+3A_functioncall">functionCall</code></td>
<td>
<p>A character string identifying the function name to be
searched in the call stack. Default is <code>"simInit"</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='.findSimList'>Find <code>simList</code> in a nested list</h2><span id='topic+.findSimList'></span>

<h3>Description</h3>

<p>This is recursive, so it will find the all <code>simList</code>s even if they are deeply nested.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.findSimList(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".findSimList_+3A_x">x</code></td>
<td>
<p>any object, used here only when it is a list with at least one
<code>simList</code> in it</p>
</td></tr>
</table>

<hr>
<h2 id='.getModuleInputObjects'>Extract the user-defined <code>.inputObjects</code> function from a module</h2><span id='topic+.getModuleInputObjects'></span>

<h3>Description</h3>

<p>Extract the user-defined <code>.inputObjects</code> function from a module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.getModuleInputObjects(sim, m)
</code></pre>

<hr>
<h2 id='.getOption'>A slightly modified version of <code>getOption()</code></h2><span id='topic+.getOption'></span>

<h3>Description</h3>

<p>This can take <code>x</code> as a character string or as a function that returns a character string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.getOption(x, default = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".getOption_+3A_x">x</code></td>
<td>
<p>a character string holding an option name.</p>
</td></tr>
<tr><td><code id=".getOption_+3A_default">default</code></td>
<td>
<p>if the specified option is not set in the options list,
this value is returned.  This facilitates retrieving an option and
checking whether it is set and setting it separately if not.</p>
</td></tr>
</table>

<hr>
<h2 id='.guessPkgFun'>Guess package of a function</h2><span id='topic+.guessPkgFun'></span>

<h3>Description</h3>

<p>Guess package of a function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.guessPkgFun(bsf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".guessPkgFun_+3A_bsf">bsf</code></td>
<td>
<p>character. A function name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character. The package and function name as <code>"pkg::bsf"</code>
</p>

<hr>
<h2 id='.identifyChildModules'>Identify child modules from a recursive list</h2><span id='topic+.identifyChildModules'></span>

<h3>Description</h3>

<p>There can be parents, grandparents, etc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.identifyChildModules(sim, modules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".identifyChildModules_+3A_sim">sim</code></td>
<td>
<p>a <code>simList</code> object</p>
</td></tr>
<tr><td><code id=".identifyChildModules_+3A_modules">modules</code></td>
<td>
<p>List of module names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of <code>modules</code> will flat named list of all module names (children, parents etc.) and
<code>childModules</code> a non-flat named list of only the <code>childModule</code> names.
</p>

<hr>
<h2 id='.isNamespaced'>Check is module uses module namespacing</h2><span id='topic+.isNamespaced'></span>

<h3>Description</h3>

<p>Older modules may not have their functions etc. namespaced in the <code>simList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.isNamespaced(sim, m)
</code></pre>

<hr>
<h2 id='.keepAttrs'>Attach missing attributes from <code>x</code> to <code>y</code></h2><span id='topic+.keepAttrs'></span>

<h3>Description</h3>

<p>This is an internal helper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.keepAttrs(x, y, omitAttrs = c(".envir", ".list", ".xData", ".Data"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".keepAttrs_+3A_x">x</code></td>
<td>
<p>an object with attributes</p>
</td></tr>
<tr><td><code id=".keepAttrs_+3A_y">y</code></td>
<td>
<p>an object with attributes</p>
</td></tr>
</table>

<hr>
<h2 id='.modifySearchPath'>Modify package order in search path</h2><span id='topic+.modifySearchPath'></span>

<h3>Description</h3>

<p>Intended for internal use only. It modifies the search path (i.e., <code>search()</code>)
such that the packages required by the current module are placed first in the
search path. Note, several &quot;core&quot; packages are not touched; or more specifically,
they will remain in the search path, but may move down if packages are rearranged.
The current set of these core packages used by SpaDES can be found here:
<code>SpaDES.core:::.corePackages</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.modifySearchPath(
  pkgs,
  removeOthers = FALSE,
  skipNamespacing = !getOption("spades.switchPkgNamespaces")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".modifySearchPath_+3A_pkgs">pkgs</code></td>
<td>
<p>The packages that are to be placed at the beginning of the search path,</p>
</td></tr>
<tr><td><code id=".modifySearchPath_+3A_removeothers">removeOthers</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then only the packages in
<code>c(pkgs, SpaDES.core:::.corePackages)</code>
will remain in the search path, i.e., all others will be removed.</p>
</td></tr>
<tr><td><code id=".modifySearchPath_+3A_skipnamespacing">skipNamespacing</code></td>
<td>
<p>Logical. If <code>FALSE</code>, then the running of an event in a module
will not trigger a rearrangement of the search() path. This will
generally speed up module simulations, but may create name
conflicts between packages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. This is used for its side effects, which are &quot;severe&quot;.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='.moduleDeps-class'>The <code>.moduleDeps</code> class</h2><span id='topic+.moduleDeps-class'></span><span id='topic+.moduleDeps'></span>

<h3>Description</h3>

<p>Descriptor object for specifying SpaDES module dependencies.
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code></dt><dd><p>Name of the module as a character string.</p>
</dd>
<dt><code>description</code></dt><dd><p>Description of the module as a character string.</p>
</dd>
<dt><code>keywords</code></dt><dd><p>Character vector containing a module's keywords.</p>
</dd>
<dt><code>authors</code></dt><dd><p>The author(s) of the module as a <code><a href="utils.html#topic+person">person()</a></code> object.</p>
</dd>
<dt><code>childModules</code></dt><dd><p>A character vector of child module names.
Modules listed here will be loaded with this module.</p>
</dd>
<dt><code>version</code></dt><dd><p>The module version as a <code>numeric_version</code>.
Semantic versioning is assumed <a href="https://semver.org/">https://semver.org/</a>.</p>
</dd>
<dt><code>spatialExtent</code></dt><dd><p>Specifies the module's spatial extent as an
<code>Raster::Extent</code> or <code>terra::SpatExtent</code> object. Default is <code>NA</code>.</p>
</dd>
<dt><code>timeframe</code></dt><dd><p>Specifies the valid timeframe for which the module was
designed to simulate. Must be a <code><a href="base.html#topic+POSIXt">POSIXt()</a></code>
object of length 2, specifying the start and end times
(e.g., <code>as.POSIXlt(c("1990-01-01 00:00:00", "2100-12-31 11:59:59"))</code>).
Can be specified as <code>NA</code> using <code>as.POSIXlt(c(NA, NA))</code>.</p>
</dd>
<dt><code>timeunit</code></dt><dd><p>Describes the time (in seconds) corresponding to 1.0
simulation time units. Default is <code>NA</code>.</p>
</dd>
<dt><code>citation</code></dt><dd><p>A list of citations for the module, each as character strings.
Alternatively, list of filenames of <code>.bib</code> or similar files.
Defaults to <code>NA_character_</code>.</p>
</dd>
<dt><code>documentation</code></dt><dd><p>List of filenames referring to module documentation sources.</p>
</dd>
<dt><code>loadOrder</code></dt><dd><p>An optional list of up to 2 named character vectors, named
&quot;before&quot; and &quot;after&quot;. If specified, then SpaDES.core will
use this information to help disentangle ambiguous module
load order estimation. Any module that is specified
in the &quot;before&quot; element will have its &quot;init&quot; event scheduled
before this module; any module specified in the &quot;after&quot;
element will have its &quot;init&quot; event scheduled after this module.</p>
</dd>
<dt><code>reqdPkgs</code></dt><dd><p>Character vector of R package names to be loaded.
Defaults to <code>NA_character_</code>.</p>
</dd>
<dt><code>parameters</code></dt><dd><p>A <code>data.frame</code> specifying the object dependencies
of the module, with columns <code>paramName</code>,
<code>paramClass</code>, and <code>default</code>, whose values are
of type <code>character</code>, <code>character</code>, and
<code>ANY</code>, respectively. Default values may be
overridden by the user by passing a list of parameters
to <code><a href="#topic+simInit">simInit()</a></code>.</p>
</dd>
<dt><code>inputObjects</code></dt><dd><p>A <code>data.frame</code> specifying the object dependencies of
the module, with columns <code>objectName</code>,
<code>objectClass</code>, and <code>other</code>.
For objects that are used within the module as both an
input and an output, add the object to each of these
<code>data.frame</code>s.</p>
</dd>
<dt><code>outputObjects</code></dt><dd><p>A <code>data.frame</code> specifying the objects output by the
module, following the format of <code>inputObjects</code>.</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>.simDeps</code>, <code><a href="#topic+spadesClasses">spadesClasses()</a></code>
</p>

<hr>
<h2 id='.parseElems+2CsimList-method'><code>.parseElems</code> for <code>simList</code> class objects</h2><span id='topic+.parseElems+2CsimList-method'></span>

<h3>Description</h3>

<p>See <code><a href="quickPlot.html#topic+parseElems">quickPlot::.parseElems()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.parseElems(tmp, elems, envir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".parseElems+2B2CsimList-method_+3A_tmp">tmp</code></td>
<td>
<p>A evaluated object</p>
</td></tr>
<tr><td><code id=".parseElems+2B2CsimList-method_+3A_elems">elems</code></td>
<td>
<p>A character string to be parsed</p>
</td></tr>
<tr><td><code id=".parseElems+2B2CsimList-method_+3A_envir">envir</code></td>
<td>
<p>An environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object, parsed from a character string and an environment.
</p>


<h3>See Also</h3>

<p><a href="quickPlot.html#topic+parseElems">quickPlot::.parseElems</a>
</p>

<hr>
<h2 id='.parseMessage'>Prepend module name to a message</h2><span id='topic+.parseMessage'></span>

<h3>Description</h3>

<p>Also makes it blue.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.parseMessage(m, problem, message)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".parseMessage_+3A_m">m</code></td>
<td>
<p>module name</p>
</td></tr>
<tr><td><code id=".parseMessage_+3A_message">message</code></td>
<td>
<p>rest of message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns <code>TRUE</code>; invoked for side effect of generating message with that starts with
<code>paste0(m, ":", message)</code>.
</p>

<hr>
<h2 id='.parseModulePartial'>Parse and initialize a module</h2><span id='topic+.parseModulePartial'></span><span id='topic+.parseModulePartial+2Cmissing+2Cmissing+2Ccharacter+2Ccharacter-method'></span><span id='topic+.parseModulePartial+2CsimList+2Clist+2Cmissing+2Ccharacter-method'></span><span id='topic+.parseModule'></span><span id='topic+.parseModule+2CsimList+2Clist-method'></span>

<h3>Description</h3>

<p>Internal function, used during <code><a href="#topic+simInit">simInit()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.parseModulePartial(sim, modules, filename, defineModuleElement, envir = NULL)

## S4 method for signature 'missing,missing,character,character'
.parseModulePartial(filename, defineModuleElement, envir)

## S4 method for signature 'simList,list,missing,character'
.parseModulePartial(sim, modules, defineModuleElement, envir = NULL)

.parseModule(
  sim,
  modules,
  userSuppliedObjNames = NULL,
  envir = NULL,
  notOlderThan,
  ...
)

## S4 method for signature 'simList,list'
.parseModule(
  sim,
  modules,
  userSuppliedObjNames = NULL,
  envir = NULL,
  notOlderThan,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".parseModulePartial_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_modules">modules</code></td>
<td>
<p>A list of modules with a logical attribute &quot;parsed&quot;.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_filename">filename</code></td>
<td>
<p>The filename of the module to be parsed.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_definemoduleelement">defineModuleElement</code></td>
<td>
<p>Character string indicating which of the list
elements in <code>defineModule</code> should be extracted</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_envir">envir</code></td>
<td>
<p>Optional environment in which to store parsed code. This may be
useful if the same file is being parsed multiple times. This
function will check in that environment for the parsed file before
parsing again. If the <code>envir</code> is transient, then this will have no effect.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_usersuppliedobjnames">userSuppliedObjNames</code></td>
<td>
<p>Character string (or <code>NULL</code>, the default)
indicating the names of objects that user has passed
into <code>simInit</code> via objects or inputs.
If all module <code>inputObject</code> dependencies are provided by user,
then the <code>.inputObjects</code> code will be skipped.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_notolderthan">notOlderThan</code></td>
<td>
<p>Passed to <code>Cache</code> that may be used for <code>.inputObjects</code> function call.</p>
</td></tr>
<tr><td><code id=".parseModulePartial_+3A_...">...</code></td>
<td>
<p>All <code>simInit</code> parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>.parseModulePartial</code> extracts just the individual element
requested from the module. This can be useful if parsing the whole module
would cause an error.
</p>
<p>A <code>simList</code> simulation object.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>
<p>Alex Chubaty and Eliot McIntire
</p>

<hr>
<h2 id='.pkgEnv'>The <code>SpaDES.core</code> package environment</h2><span id='topic+.pkgEnv'></span>

<h3>Description</h3>

<p>Environment used internally to store internal package objects and methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.pkgEnv
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 7.
</p>

<hr>
<h2 id='.preDigestByClass+2CsimList-method'>Pre-digesting method for <code>simList</code></h2><span id='topic+.preDigestByClass+2CsimList-method'></span>

<h3>Description</h3>

<p>Takes a snapshot of <code>simList</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.preDigestByClass(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".preDigestByClass+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.preDigestByClass()</a></code>.
</p>


<h3>Value</h3>

<p>character vector corresponding to the names of objects stored in the <code>.xData</code> slot
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.preDigestByClass</a>
</p>

<hr>
<h2 id='.prepareOutput+2CsimList-method'><code>.prepareOutput</code> for <code>simList</code> objects</h2><span id='topic+.prepareOutput+2CsimList-method'></span>

<h3>Description</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.prepareOutput()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.prepareOutput(object, cachePath, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".prepareOutput+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
<tr><td><code id=".prepareOutput+2B2CsimList-method_+3A_cachepath">cachePath</code></td>
<td>
<p>A repository used for storing cached objects.
This is optional if <code>Cache</code> is used inside a SpaDES module.</p>
</td></tr>
<tr><td><code id=".prepareOutput+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>Anything passed to methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the modified <code>object</code>
</p>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.prepareOutput</a>
</p>

<hr>
<h2 id='.quickCheck'>The <code>SpaDES.core</code> variable to switch between quick and robust checking</h2><span id='topic+.quickCheck'></span>

<h3>Description</h3>

<p>A variable that can be use by module developers and model users to switch between
a quick check of functions like <code>downloadData</code>, <code>Cache.</code>
The module developer must actually use this in their code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.quickCheck
</code></pre>


<h3>Format</h3>

<p>An object of class <code>logical</code> of length 1.
</p>

<hr>
<h2 id='.robustDigest+2CsimList-method'><code>.robustDigest</code> for <code>simList</code> objects</h2><span id='topic+.robustDigest+2CsimList-method'></span><span id='topic+Cache'></span>

<h3>Description</h3>

<p>This is intended to be used within the <code>Cache</code> function, but can be used to evaluate what
a <code>simList</code> would look like once it is converted to a repeatably digestible object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.robustDigest(object, .objects, length, algo, quick, classOptions)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>an object to digest.</p>
</td></tr>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_.objects">.objects</code></td>
<td>
<p>Character vector of objects to be digested. This is only applicable
if there is a list, environment (or similar) with named objects
within it. Only this/these objects will be considered for caching,
i.e., only use a subset of
the list, environment or similar objects. In the case of nested list-type
objects, this will only be applied outermost first.</p>
</td></tr>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_length">length</code></td>
<td>
<p>Numeric. If the element passed to Cache is a <code>Path</code> class
object (from e.g., <code>asPath(filename)</code>) or it is a <code>Raster</code> with
file-backing, then this will be
passed to <code>digest::digest</code>, essentially limiting the number of bytes
to digest (for speed). This will only be used if <code>quick = FALSE</code>.
Default is <code>getOption("reproducible.length")</code>, which is set to <code>Inf</code>.</p>
</td></tr>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_algo">algo</code></td>
<td>
<p>The algorithms to be used; currently available choices are
<code>md5</code>, which is also the default, <code>sha1</code>, <code>crc32</code>,
<code>sha256</code>, <code>sha512</code>, <code>xxhash32</code>, <code>xxhash64</code>,
<code>murmur32</code>, <code>spookyhash</code>, <code>blake3</code>, and <code>crc32c</code>.</p>
</td></tr>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_quick">quick</code></td>
<td>
<p>Logical or character. If <code>TRUE</code>,
no disk-based information will be assessed, i.e., only
memory content. See Details section about <code>quick</code> in <code><a href="reproducible.html#topic+Cache">Cache()</a></code>.</p>
</td></tr>
<tr><td><code id=".robustDigest+2B2CsimList-method_+3A_classoptions">classOptions</code></td>
<td>
<p>Optional list. This will pass into <code>.robustDigest</code> for
specific classes. Should be options that the <code>.robustDigest</code> knows what
to do with.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="reproducible.html#topic+robustDigest">reproducible::.robustDigest()</a></code>.
This method strips out stuff from a <code>simList</code> class object that would make it otherwise not
reproducibly digestible between sessions, operating systems, or machines.
This will likely still not allow identical digest results across R versions.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="reproducible.html#topic+robustDigest">reproducible::.robustDigest()</a></code>
</p>

<hr>
<h2 id='.runCodeChecks'>Runs a series of code checks during <code>simInit()</code></h2><span id='topic+.runCodeChecks'></span>

<h3>Description</h3>

<p>This uses custom tools and some optional tools in the <code>codetools</code> package to check for function
collisions with known, common function collisions (<code>raster::stack</code>, <code>raster::scale</code>).
All outputs will be sent as messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.runCodeChecks(sim, m, k, hadPrevMessage = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".runCodeChecks_+3A_sim">sim</code></td>
<td>
<p>a <code>simList</code> object</p>
</td></tr>
<tr><td><code id=".runCodeChecks_+3A_m">m</code></td>
<td>
<p>module name</p>
</td></tr>
<tr><td><code id=".runCodeChecks_+3A_k">k</code></td>
<td>
<p>numeric index of module name in sim@depends@dependencies, should align with <code>m</code></p>
</td></tr>
<tr><td><code id=".runCodeChecks_+3A_hadprevmessage">hadPrevMessage</code></td>
<td>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL (invisibly); invoked for side effect of generating message with that starts with
<code>paste0(m, ":", message)</code>.
</p>

<hr>
<h2 id='.runModuleInputObjects'>Run module's <code>.inputObjects</code></h2><span id='topic+.runModuleInputObjects'></span>

<h3>Description</h3>

<p>Run <code>.inputObjects()</code> from each module file from each module, one at a time,
and remove it from the <code>simList</code> so next module won't rerun it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.runModuleInputObjects(sim, m, objects, notOlderThan)
</code></pre>

<hr>
<h2 id='.sim2gantt'>sim2gantt</h2><span id='topic+.sim2gantt'></span><span id='topic+.sim2gantt+2CsimList+2Cnumeric+2Ccharacter+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Internal function to convert the completed events list of a <code>simList</code>
object to a list of <code>data.frame</code>s suitable to pass to a call to
<code>DiagrammeR::mermaid</code> to make a Gantt chart representing the
events in a completed simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.sim2gantt(sim, n, startDate, width)

## S4 method for signature 'simList,numeric,character,numeric'
.sim2gantt(sim, n, startDate, width)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".sim2gantt_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object (typically corresponding to a
completed simulation).</p>
</td></tr>
<tr><td><code id=".sim2gantt_+3A_n">n</code></td>
<td>
<p>The number of most recently completed events to plot.</p>
</td></tr>
<tr><td><code id=".sim2gantt_+3A_startdate">startDate</code></td>
<td>
<p>A character representation of date in <code>YYYY-MM-DD</code> format.</p>
</td></tr>
<tr><td><code id=".sim2gantt_+3A_width">width</code></td>
<td>
<p>Numeric. Passed to determine scale of vertical bars.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data.frames
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.simDeps-class'>The <code>.simDeps</code> class</h2><span id='topic+.simDeps-class'></span><span id='topic+.simDeps'></span>

<h3>Description</h3>

<p>Defines all simulation dependencies for all modules within a SpaDES simulation.
</p>


<h3>Slots</h3>


<dl>
<dt><code>dependencies</code></dt><dd><p>List of <code><a href="#topic+.moduleDeps">.moduleDeps()</a></code> dependency objects.</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+.moduleDeps">.moduleDeps()</a></code>, <code><a href="#topic+spadesClasses">spadesClasses()</a></code>
</p>

<hr>
<h2 id='.tagsByClass+2CsimList-method'><code>.tagsByClass</code> for <code>simList</code> objects</h2><span id='topic+.tagsByClass+2CsimList-method'></span>

<h3>Description</h3>

<p>See <code><a href="reproducible.html#topic+exportedMethods">reproducible::.tagsByClass()</a></code>. Adds current <code>moduleName</code>,
<code>eventType</code>, <code>eventTime</code>, and <code style="white-space: pre;">&#8288;function:spades&#8288;</code> as <code>userTags</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
.tagsByClass(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".tagsByClass+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>Any R object returned from a function</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><a href="reproducible.html#topic+exportedMethods">reproducible::.tagsByClass</a>
</p>

<hr>
<h2 id='.tryCatch'><code>tryCatch</code> that keeps warnings, errors and value (result)</h2><span id='topic+.tryCatch'></span>

<h3>Description</h3>

<p>From <a href="https://stackoverflow.com/a/24569739/3890027">https://stackoverflow.com/a/24569739/3890027</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.tryCatch(expr)
</code></pre>

<hr>
<h2 id='.unparsed'>Determine which modules in a list are unparsed</h2><span id='topic+.unparsed'></span><span id='topic+.unparsed+2Clist-method'></span>

<h3>Description</h3>

<p>Internal function, used during <code><a href="#topic+simInit">simInit()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.unparsed(modules)

## S4 method for signature 'list'
.unparsed(modules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".unparsed_+3A_modules">modules</code></td>
<td>
<p>A character vector specifying the modules to parse.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The ids of the unparsed list elements.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='.verb'>Chose verb conjugation for &quot;to be&quot;</h2><span id='topic+.verb'></span>

<h3>Description</h3>

<p>Chose verb conjugation for &quot;to be&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.verb(item)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".verb_+3A_item">item</code></td>
<td>
<p>The item to accord conjugation with. If length 1, then &quot;is&quot; else &quot;are&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string &quot;is&quot; or &quot;are&quot;.
</p>

<hr>
<h2 id='.wrap.simList'>Methods for <code>.wrap</code> and <code>.unwrap</code></h2><span id='topic+.wrap.simList'></span><span id='topic+.unwrap.simList'></span>

<h3>Description</h3>

<p>Methods for <code>.wrap</code> and <code>.unwrap</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'simList'
.wrap(
  obj,
  cachePath,
  preDigest,
  drv = getOption("reproducible.drv", NULL),
  conn = getOption("reproducible.conn", NULL),
  verbose = getOption("reproducible.verbose"),
  ...
)

## S3 method for class 'simList'
.unwrap(
  obj,
  cachePath,
  cacheId,
  drv = getOption("reproducible.drv", NULL),
  conn = getOption("reproducible.conn", NULL),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".wrap.simList_+3A_obj">obj</code></td>
<td>
<p>Any arbitrary R object.</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_cachepath">cachePath</code></td>
<td>
<p>A repository used for storing cached objects.
This is optional if <code>Cache</code> is used inside a SpaDES module.</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_predigest">preDigest</code></td>
<td>
<p>The list of <code>preDigest</code> that comes from <code>CacheDigest</code> of an object</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_drv">drv</code></td>
<td>
<p>an object that inherits from <code>DBIDriver</code>, or an existing
<code>DBIConnection</code> object (in order to clone an existing connection).</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_conn">conn</code></td>
<td>
<p>A <code>DBIConnection</code> object, as returned by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_verbose">verbose</code></td>
<td>
<p>Numeric, -1 silent (where possible), 0 being very quiet,
1 showing more messaging, 2 being more messaging, etc.
Default is 1. Above 3 will output much more information about the internals of
Caching, which may help diagnose Caching challenges. Can set globally with an
option, e.g., <code style="white-space: pre;">&#8288;options('reproducible.verbose' = 0) to reduce to minimal&#8288;</code></p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_...">...</code></td>
<td>
<p>Other arguments. Currently, <code>regexp</code>, a logical, can be provided.
This must be <code>TRUE</code> if the use is passing a regular expression.
Otherwise, <code>userTags</code> will need to be exact matches. Default is
missing, which is the same as <code>TRUE</code>. If there are errors due
to regular expression problem, try <code>FALSE</code>. For <code>cc</code>, it is
passed to <code>clearCache</code>, e.g., <code>ask</code>, <code>userTags</code>. For <code>showCache</code>,
it can also be <code>sorted = FALSE</code> to return the object unsorted.</p>
</td></tr>
<tr><td><code id=".wrap.simList_+3A_cacheid">cacheId</code></td>
<td>
<p>Used strictly for messaging. This should be the cacheId of the object being recovered.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same object as passed into the function, but dealt with so that it can be
saved to disk.
</p>

<hr>
<h2 id='+5B+2CsimList+2Ccharacter+2CANY-method'>Extract an intact <code>simList</code> but with subset of objects</h2><span id='topic++5B+2CsimList+2Ccharacter+2CANY-method'></span>

<h3>Description</h3>

<p>This is copies the non-object components of a <code>simList</code> (e.g., events, etc.)
then selects only the objects listed in <code>i</code> using <code>Copy(mget(i, envir(sim)))</code>
and adds them to the returned <code>simList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList,character,ANY'
x[i, j, ..., drop = TRUE]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B2CsimList+2B2Ccharacter+2B2CANY-method_+3A_x">x</code></td>
<td>
<p>A <code>simList</code></p>
</td></tr>
<tr><td><code id="+2B5B+2B2CsimList+2B2Ccharacter+2B2CANY-method_+3A_i">i</code></td>
<td>
<p>A character vector of objects to select.</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CsimList+2B2Ccharacter+2B2CANY-method_+3A_j">j</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CsimList+2B2Ccharacter+2B2CANY-method_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CsimList+2B2Ccharacter+2B2CANY-method_+3A_drop">drop</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>[</code> method returns a complete <code>simList</code> class with all the slots
copied from the original, but only the named objects in <code>i</code> are returned.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>Examples</h3>

<pre><code class='language-R'>s &lt;- simInit()
s$a &lt;- 1
s$b &lt;- 2
s$d &lt;- 3
s[c("a", "d")] # a simList with only 2 objects


</code></pre>

<hr>
<h2 id='all.equal.simList'>All equal method for <code>simList</code> objects</h2><span id='topic+all.equal.simList'></span>

<h3>Description</h3>

<p>This function removes a few attributes that are added internally
by <span class="pkg">SpaDES.core</span> and are not relevant to the <code>all.equal</code>.
One key element removed is any time stamps, as these are guaranteed to be different.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'equal.simList'
all(target, current, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all.equal.simList_+3A_target">target</code></td>
<td>
<p><span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="all.equal.simList_+3A_current">current</code></td>
<td>
<p>other <span class="rlang"><b>R</b></span> object, to be compared with <code>target</code>.</p>
</td></tr>
<tr><td><code id="all.equal.simList_+3A_...">...</code></td>
<td>
<p>further arguments for different methods, notably the
following two, for numerical comparison:</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See <code><a href="base.html#topic+all.equal">base::all.equal()</a></code>
</p>

<hr>
<h2 id='anyPlotting'>Test whether there should be any plotting from <code>.plots</code> module parameter</h2><span id='topic+anyPlotting'></span>

<h3>Description</h3>

<p>This will do all the various tests needed to determine whether
plotting of one sort or another will occur.
Testing any of the types as listed in <code><a href="#topic+Plots">Plots()</a></code> argument <code>types</code>.
Only the first 3 letters of the type are required.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anyPlotting(.plots)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anyPlotting_+3A_.plots">.plots</code></td>
<td>
<p>Usually will be the <code>P(sim)$.plots</code> is used within
a module.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical of length 1
</p>

<hr>
<h2 id='append_attr'>Add a module to a <code>moduleList</code></h2><span id='topic+append_attr'></span><span id='topic+append_attr+2Clist+2Clist-method'></span>

<h3>Description</h3>

<p>Ordinary base lists and vectors do not retain their attributes when subsetted
or appended. This function appends items to a list while preserving the
attributes of items in the list (but not of the list itself).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_attr(x, y)

## S4 method for signature 'list,list'
append_attr(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="append_attr_+3A_x">x</code>, <code id="append_attr_+3A_y">y</code></td>
<td>
<p>A <code>list</code> of items with optional attributes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Similar to <code>updateList</code> but does not require named lists.
</p>


<h3>Value</h3>

<p>An updated <code>list</code> with attributes.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp1 &lt;- list("apple", "banana")
tmp1 &lt;- lapply(tmp1, `attributes&lt;-`, list(type = "fruit"))
tmp2 &lt;- list("carrot")
tmp2 &lt;- lapply(tmp2, `attributes&lt;-`, list(type = "vegetable"))
append_attr(tmp1, tmp2)
rm(tmp1, tmp2)
</code></pre>

<hr>
<h2 id='bindrows'>Simple wrapper around <code>data.table::rbindlist</code></h2><span id='topic+bindrows'></span>

<h3>Description</h3>

<p>This simply sets defaults to <code>fill = TRUE</code>, and
<code>use.names = TRUE</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bindrows(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bindrows_+3A_...">...</code></td>
<td>
<p>1 or more <code>data.frame</code>, <code>data.table</code>, or <code>list</code> objects</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.table</code> object
</p>

<hr>
<h2 id='checkModule'>Check for the existence of a remote module</h2><span id='topic+checkModule'></span><span id='topic+checkModule+2Ccharacter+2Ccharacter-method'></span><span id='topic+checkModule+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Looks in the remote <code>repo</code> for a module named <code>name</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkModule(name, repo)

## S4 method for signature 'character,character'
checkModule(name, repo)

## S4 method for signature 'character,missing'
checkModule(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkModule_+3A_name">name</code></td>
<td>
<p>Character string giving the module name.</p>
</td></tr>
<tr><td><code id="checkModule_+3A_repo">repo</code></td>
<td>
<p>GitHub repository name.
Default is <code>"PredictiveEcology/SpaDES-modules"</code>, which is
specified by the global option <code>spades.moduleRepo</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of module file paths (invisibly).
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>

<hr>
<h2 id='checkModuleLocal'>Check for the existence of a module locally</h2><span id='topic+checkModuleLocal'></span><span id='topic+checkModuleLocal+2Ccharacter+2Ccharacter+2Ccharacter-method'></span><span id='topic+checkModuleLocal+2Ccharacter+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Looks the module path for a module named <code>name</code>, and checks for existence
of all essential module files listed below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkModuleLocal(name, path, version)

## S4 method for signature 'character,character,character'
checkModuleLocal(name, path, version)

## S4 method for signature 'character,ANY,ANY'
checkModuleLocal(name, path, version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkModuleLocal_+3A_name">name</code></td>
<td>
<p>Character string giving the module name.</p>
</td></tr>
<tr><td><code id="checkModuleLocal_+3A_path">path</code></td>
<td>
<p>Local path to modules directory.
Default is specified by the global option <code>spades.modulePath</code>.</p>
</td></tr>
<tr><td><code id="checkModuleLocal_+3A_version">version</code></td>
<td>
<p>Character specifying the desired module version.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p>&lsquo;<span class="file">data/CHECKSUMS.txt</span>&rsquo;
</p>
</li>
<li> <p>&lsquo;<span class="file">name.R</span>&rsquo;
</p>
</li></ul>



<h3>Value</h3>

<p>Logical indicating presence of the module (invisibly).
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='checkObject'>Check for existence of object(s) referenced by a <code>objects</code> slot of a
<code>simList</code> object</h2><span id='topic+checkObject'></span><span id='topic+checkObject+2CsimList+2CANY+2CANY-method'></span><span id='topic+checkObject+2CsimList+2Ccharacter+2Cmissing-method'></span><span id='topic+checkObject+2Cmissing+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Check that a named object exists in the provide <code>simList</code> environment slot,
and optionally has desired attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkObject(sim, name, object, layer, ...)

## S4 method for signature 'simList,ANY,ANY'
checkObject(sim, name, object, layer, ...)

## S4 method for signature 'simList,character,missing'
checkObject(sim, name, object, layer, ...)

## S4 method for signature 'missing,ANY,ANY'
checkObject(sim, name, object, layer, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkObject_+3A_sim">sim</code></td>
<td>
<p>A <code><a href="#topic+simList">simList()</a></code> object.</p>
</td></tr>
<tr><td><code id="checkObject_+3A_name">name</code></td>
<td>
<p>A character string specifying the name of an object to be checked.</p>
</td></tr>
<tr><td><code id="checkObject_+3A_object">object</code></td>
<td>
<p>An object. This is mostly used internally, or with layer,
because it will fail if the object does not exist.</p>
</td></tr>
<tr><td><code id="checkObject_+3A_layer">layer</code></td>
<td>
<p>Character string, specifying a layer name in a Raster, if the
<code>name</code> is a <code style="white-space: pre;">&#8288;Raster*&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="checkObject_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not implemented.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly return <code>TRUE</code> indicating object exists; <code>FALSE</code> if not.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+library">library()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sim &lt;- simInit()
sim$a &lt;- 1
sim$b &lt;- list(d = 1)
sim$r &lt;- terra::rast(terra::ext(0,2,0,2), res = 1, vals = 2)
sim$s &lt;- c(sim$r, terra::rast(terra::ext(0,2,0,2), res = 1, vals = 3))
names(sim$s) &lt;- c("r1", "r2") # give layer names
(checkObject(sim, name = "a")) # TRUE
(checkObject(sim, name = "b", layer = "d")) # TRUE
(checkObject(sim, name = "d")) # FALSE
(checkObject(sim, name = "r")) # TRUE
(checkObject(sim, object = sim$s)) # TRUE
(checkObject(sim, object = sim$s, layer = "r1")) # TRUE

</code></pre>

<hr>
<h2 id='checkParams'>Check use and existence of parameters passed to simulation.</h2><span id='topic+checkParams'></span><span id='topic+checkParams+2CsimList+2Clist-method'></span>

<h3>Description</h3>

<p>Checks that all parameters passed are used in a module,
and that all parameters used in a module are passed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkParams(sim, coreParams, ...)

## S4 method for signature 'simList,list'
checkParams(sim, coreParams, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkParams_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id="checkParams_+3A_coreparams">coreParams</code></td>
<td>
<p>List of default core parameters.</p>
</td></tr>
<tr><td><code id="checkParams_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not implemented.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly return <code>TRUE</code> indicating object exists; <code>FALSE</code> if not.
Sensible messages are produced identifying missing parameters.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='checkpointFile'>Simulation checkpoints.</h2><span id='topic+checkpointFile'></span><span id='topic+checkpointFile+2CsimList-method'></span><span id='topic+checkpointFile+3C-'></span><span id='topic+checkpointFile+3C-+2CsimList-method'></span><span id='topic+checkpointInterval'></span><span id='topic+checkpointInterval+2CsimList-method'></span><span id='topic+checkpointInterval+3C-'></span><span id='topic+checkpointInterval+3C-+2CsimList-method'></span><span id='topic+doEvent.checkpoint'></span><span id='topic+checkpointLoad'></span><span id='topic+.checkpointSave'></span>

<h3>Description</h3>

<p>Save and reload the current state of the simulation,
including the state of the random number generator,
by scheduling checkpoint events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkpointFile(sim)

## S4 method for signature 'simList'
checkpointFile(sim)

checkpointFile(sim) &lt;- value

## S4 replacement method for signature 'simList'
checkpointFile(sim) &lt;- value

checkpointInterval(sim)

## S4 method for signature 'simList'
checkpointInterval(sim)

checkpointInterval(sim) &lt;- value

## S4 replacement method for signature 'simList'
checkpointInterval(sim) &lt;- value

doEvent.checkpoint(sim, eventTime, eventType, debug = FALSE)

checkpointLoad(file)

.checkpointSave(sim, file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkpointFile_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id="checkpointFile_+3A_value">value</code></td>
<td>
<p>The parameter value to be set (in the corresponding <code>module</code> and <code>param</code>).</p>
</td></tr>
<tr><td><code id="checkpointFile_+3A_eventtime">eventTime</code></td>
<td>
<p>A numeric specifying the time of the next event.</p>
</td></tr>
<tr><td><code id="checkpointFile_+3A_eventtype">eventType</code></td>
<td>
<p>A character string specifying the type of event: one of
either <code>"init"</code>, <code>"load"</code>, or <code>"save"</code>.</p>
</td></tr>
<tr><td><code id="checkpointFile_+3A_debug">debug</code></td>
<td>
<p>Optional logical flag determines whether <code>sim</code> debug info
will be printed (default <code>debug = FALSE</code>).</p>
</td></tr>
<tr><td><code id="checkpointFile_+3A_file">file</code></td>
<td>
<p>The checkpoint file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>RNG save code adapted from:
<a href="http://www.cookbook-r.com/Numbers/Saving_the_state_of_the_random_number_generator/">http://www.cookbook-r.com/Numbers/Saving_the_state_of_the_random_number_generator/</a>
and <a href="https://stackoverflow.com/q/13997444/1380598">https://stackoverflow.com/q/13997444/1380598</a>
</p>


<h3>Value</h3>

<p>Returns the modified <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+.Random.seed">.Random.seed</a>.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='checksums'>Calculate checksum for a module's data files</h2><span id='topic+checksums'></span>

<h3>Description</h3>

<p>Verify (and optionally write) checksums for data files in a module's
&lsquo;<span class="file">data/</span>&rsquo; subdirectory. The file &lsquo;<span class="file">data/CHECKSUMS.txt</span>&rsquo; contains the
expected checksums for each data file.
Checksums are computed using <code>reproducible:::.digest</code>, which is simply a
wrapper around <code>digest::digest</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checksums(module, path, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checksums_+3A_module">module</code></td>
<td>
<p>Character string giving the name of the module.</p>
</td></tr>
<tr><td><code id="checksums_+3A_path">path</code></td>
<td>
<p>Character string giving the path to the module directory.</p>
</td></tr>
<tr><td><code id="checksums_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="reproducible.html#topic+Checksums">reproducible::Checksums()</a></code>, notably, <code>write</code>,
<code>quickCheck</code>,  <code>checksumFile</code> and <code>files</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Modules may require data that for various reasons cannot be distributed with
the module source code. In these cases, the module developer should ensure
that the module downloads and extracts the data required. It is useful to not
only check that the data files exist locally but that their checksums match
those expected.
</p>


<h3>Note</h3>

<p>In version 1.2.0 and earlier, two checksums per file were required
because of differences in the checksum hash values on Windows and Unix-like
platforms. Recent versions use a different (faster) algorithm and only require
one checksum value per file.
To update your &lsquo;<span class="file">CHECKSUMS.txt</span>&rsquo; files using the new algorithm:
</p>

<ol>
<li><p> specify your module (<code>moduleName &lt;- "my_module"</code>);
</p>
</li>
<li><p> use a temporary location to ensure all modules get fresh copies of the data
(<code>tmpdir &lt;- file.path(tempdir(), "SpaDES_modules")</code>);
</p>
</li>
<li><p> download your module's data to the temp dir (<code>downloadData(moduleName, tmpdir)</code>);
</p>
</li>
<li><p> initialize a dummy simulation to ensure any 'data prep' steps in the
<code>.inputObjects</code> section are run (<code>simInit(modules = moduleName)</code>);
</p>
</li>
<li><p> recalculate your checksums and overwrite the file
(<code>checksums(moduleName, tmpdir, write = TRUE)</code>);
</p>
</li>
<li><p> copy the new checksums file to your working module directory
(the one not in the temp dir)
(<code>file.copy(from = file.path(tmpdir, moduleName, 'data', 'CHECKSUMS.txt'), to = file.path('path/to/my/moduleDir', moduleName, 'data', 'CHECKSUMS.txt'), overwrite = TRUE)</code>).
</p>
</li></ol>


<hr>
<h2 id='citation'>A citation method for <code>SpaDES</code> modules</h2><span id='topic+citation'></span><span id='topic+citation+2CsimList-method'></span><span id='topic+citation+2Ccharacter-method'></span>

<h3>Description</h3>

<p>This is a wrapper around <code><a href="utils.html#topic+citation">utils::citation()</a></code> for cases with <code>package</code> is a
<code>character</code> string. Otherwise, it takes a <code>simList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>citation(package, lib.loc = NULL, auto = NULL, module = character())

## S4 method for signature 'simList'
citation(package, lib.loc = NULL, auto = NULL, module = character())

## S4 method for signature 'character'
citation(package, lib.loc = NULL, auto = NULL, module = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="citation_+3A_package">package</code></td>
<td>
<p>For compatibility with <code><a href="utils.html#topic+citation">utils::citation()</a></code>. This can be
a <code>simList</code> or a character string for a package name.</p>
</td></tr>
<tr><td><code id="citation_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector with path names of <span class="rlang"><b>R</b></span> libraries, or
the directory containing the source for <code>package</code>, or
<code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  If the default is used, the loaded
packages are searched before the libraries.</p>
</td></tr>
<tr><td><code id="citation_+3A_auto">auto</code></td>
<td>
<p>a logical indicating whether the default citation
auto-generated from the package &lsquo;<span class="file">DESCRIPTION</span>&rsquo; metadata should
be used or not, or <code>NULL</code> (default), indicating that a
&lsquo;<span class="file">CITATION</span>&rsquo; file is used if it exists, or an object of class
<code>"<a href="utils.html#topic+packageDescription">packageDescription</a>"</code> with package metadata (see
below).</p>
</td></tr>
<tr><td><code id="citation_+3A_module">module</code></td>
<td>
<p>Optional character string indicating which module params should come from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The citation information for a SpaDES module.
</p>

<hr>
<h2 id='classFilter'>Filter objects by class</h2><span id='topic+classFilter'></span><span id='topic+classFilter+2Ccharacter+2Ccharacter+2Ccharacter+2Cenvironment-method'></span><span id='topic+classFilter+2Ccharacter+2Ccharacter+2Ccharacter+2Cmissing-method'></span><span id='topic+classFilter+2Ccharacter+2Ccharacter+2Cmissing+2Cenvironment-method'></span><span id='topic+classFilter+2Ccharacter+2Ccharacter+2Cmissing+2Cmissing-method'></span>

<h3>Description</h3>

<p>Based on <a href="https://stackoverflow.com/a/5158978/1380598">https://stackoverflow.com/a/5158978/1380598</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>classFilter(x, include, exclude, envir)

## S4 method for signature 'character,character,character,environment'
classFilter(x, include, exclude, envir)

## S4 method for signature 'character,character,character,missing'
classFilter(x, include, exclude)

## S4 method for signature 'character,character,missing,environment'
classFilter(x, include, envir)

## S4 method for signature 'character,character,missing,missing'
classFilter(x, include)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="classFilter_+3A_x">x</code></td>
<td>
<p>Character vector of object names to filter, possibly from <code>ls</code>.</p>
</td></tr>
<tr><td><code id="classFilter_+3A_include">include</code></td>
<td>
<p>Class(es) to include, as a character vector.</p>
</td></tr>
<tr><td><code id="classFilter_+3A_exclude">exclude</code></td>
<td>
<p>Optional class(es) to exclude, as a character vector.</p>
</td></tr>
<tr><td><code id="classFilter_+3A_envir">envir</code></td>
<td>
<p>The environment ins which to search for objects.
Default is the calling environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of object names matching the class filter.
</p>


<h3>Note</h3>

<p><code><a href="base.html#topic+inherits">inherits()</a></code> is used internally to check the object class,
which can, in some cases, return results inconsistent with <code>is</code>.
See <a href="https://stackoverflow.com/a/27923346/1380598">https://stackoverflow.com/a/27923346/1380598</a>.
These (known) cases are checked manually and corrected.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## from local (e.g., function) environment
local({
  e &lt;- environment()
  a &lt;- list(1:10)     # class `list`
  b &lt;- letters        # class `character`
  d &lt;- stats::runif(10)      # class `numeric`
  f &lt;- sample(1L:10L) # class `numeric`, `integer`
  g &lt;- lm( jitter(d) ~ d ) # class `lm`
  h &lt;- glm( jitter(d) ~ d ) # class `lm`, `glm`
  classFilter(ls(), include=c("character", "list"), envir = e)
  classFilter(ls(), include = "numeric", envir = e)
  classFilter(ls(), include = "numeric", exclude = "integer", envir = e)
  classFilter(ls(), include = "lm", envir = e)
  classFilter(ls(), include = "lm", exclude = "glm", envir = e)
  rm(a, b, d, e, f, g, h)
})

## from another environment (can be omitted if .GlobalEnv)
e = new.env(parent = emptyenv())
e$a &lt;- list(1:10)     # class `list`
e$b &lt;- letters        # class `character`
e$d &lt;- stats::runif(10)      # class `numeric`
e$f &lt;- sample(1L:10L) # class `numeric`, `integer`
e$g &lt;- lm( jitter(e$d) ~ e$d ) # class `lm`
e$h &lt;- glm( jitter(e$d) ~ e$d ) # class `lm`, `glm`
classFilter(ls(e), include=c("character", "list"), envir = e)
classFilter(ls(e), include = "numeric", envir = e)
classFilter(ls(e), include = "numeric", exclude = "integer", envir = e)
classFilter(ls(e), include = "lm", envir = e)
classFilter(ls(e), include = "lm", exclude = "glm", envir = e)
rm(a, b, d, f, g, h, envir = e)
rm(e)

</code></pre>

<hr>
<h2 id='clearCache+2CsimList-method'><code>clearCache</code> for <code>simList</code> objects</h2><span id='topic+clearCache+2CsimList-method'></span><span id='topic+showCache+2CsimList-method'></span><span id='topic+keepCache+2CsimList-method'></span>

<h3>Description</h3>

<p>This will take the <code>cachePath(object)</code> and pass
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
clearCache(
  x,
  userTags = character(),
  after = NULL,
  before = NULL,
  ask = getOption("reproducible.ask"),
  useCloud = FALSE,
  cloudFolderID = getOption("reproducible.cloudFolderID", NULL),
  drv = getDrv(getOption("reproducible.drv", NULL)),
  conn = getOption("reproducible.conn", NULL),
  verbose = getOption("reproducible.verbose"),
  ...
)

## S4 method for signature 'simList'
showCache(
  x,
  userTags = character(),
  after = NULL,
  before = NULL,
  drv = getDrv(getOption("reproducible.drv", NULL)),
  conn = getOption("reproducible.conn", NULL),
  verbose = getOption("reproducible.verbose"),
  ...
)

## S4 method for signature 'simList'
keepCache(
  x,
  userTags = character(),
  after = NULL,
  before = NULL,
  ask = getOption("reproducible.ask"),
  drv = getDrv(getOption("reproducible.drv", NULL)),
  conn = getOption("reproducible.conn", NULL),
  verbose = getOption("reproducible.verbose"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_x">x</code></td>
<td>
<p>A simList or a directory containing a valid Cache repository. Note:
For compatibility with <code>Cache</code> argument, <code>cachePath</code> can also be
used instead of <code>x</code>, though <code>x</code> will take precedence.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_usertags">userTags</code></td>
<td>
<p>Character vector. If used, this will be used in place of the
<code>after</code> and <code>before</code>.
Specifying one or more <code>userTag</code> here will clear all
objects that match those tags.
Matching is via regular expression, meaning partial matches
will work unless strict beginning (<code>^</code>) and end (<code>$</code>) of string
characters are used.
Matching will be against any of the 3 columns returned by <code>showCache()</code>,
i.e., <code>artifact</code>, <code>tagValue</code> or <code>tagName</code>.
Also, if <code>length(userTags) &gt; 1</code>, then matching is by <code>and</code>.
For <code>or</code> matching, use <code>|</code> in a single character string.
See examples.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_after">after</code></td>
<td>
<p>A time (POSIX, character understandable by data.table).
Objects cached after this time will be shown or deleted.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_before">before</code></td>
<td>
<p>A time (POSIX, character understandable by data.table).
Objects cached before this time will be shown or deleted.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_ask">ask</code></td>
<td>
<p>Logical. If <code>FALSE</code>, then it will not ask to confirm deletions using
<code>clearCache</code> or <code>keepCache</code>. Default is <code>TRUE</code></p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_usecloud">useCloud</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then every object that is deleted locally will
also be deleted in the <code>cloudFolderID</code>, if it is non-<code>NULL</code></p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_cloudfolderid">cloudFolderID</code></td>
<td>
<p>A googledrive dribble of a folder, e.g., using <code>drive_mkdir()</code>.
If left as <code>NULL</code>, the function will create a cloud folder with name from last
two folder levels of the <code>cachePath</code> path, :
<code>paste0(basename(dirname(cachePath)), "_", basename(cachePath))</code>.
This <code>cloudFolderID</code> will be added to <code>options("reproducible.cloudFolderID")</code>,
but this will not persist across sessions. If this is a character string, it will
treat this as a folder name to create or use on GoogleDrive.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_drv">drv</code></td>
<td>
<p>an object that inherits from <code>DBIDriver</code>, or an existing
<code>DBIConnection</code> object (in order to clone an existing connection).</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_conn">conn</code></td>
<td>
<p>A <code>DBIConnection</code> object, as returned by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_verbose">verbose</code></td>
<td>
<p>Numeric, -1 silent (where possible), 0 being very quiet,
1 showing more messaging, 2 being more messaging, etc.
Default is 1. Above 3 will output much more information about the internals of
Caching, which may help diagnose Caching challenges. Can set globally with an
option, e.g., <code style="white-space: pre;">&#8288;options('reproducible.verbose' = 0) to reduce to minimal&#8288;</code></p>
</td></tr>
<tr><td><code id="clearCache+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>Other arguments. Currently, <code>regexp</code>, a logical, can be provided.
This must be <code>TRUE</code> if the use is passing a regular expression.
Otherwise, <code>userTags</code> will need to be exact matches. Default is
missing, which is the same as <code>TRUE</code>. If there are errors due
to regular expression problem, try <code>FALSE</code>. For <code>cc</code>, it is
passed to <code>clearCache</code>, e.g., <code>ask</code>, <code>userTags</code>. For <code>showCache</code>,
it can also be <code>sorted = FALSE</code> to return the object unsorted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> object showing the subset of items in the cache, located at <code>cachePath</code>
of the <code>sim</code> object, if <code>sim</code> is provided, or located in <code>cachePath</code>.
For <code>clearCache</code> (invoked for its side effect of clearing objects matching <code>userTags</code>, or those
between <code>after</code> or <code>before</code>), the returned <code>data.table</code> shows the removed items (invisibly).
</p>

<hr>
<h2 id='convertToPackage'>Convert standard module code into an R package</h2><span id='topic+convertToPackage'></span>

<h3>Description</h3>

<p><em>EXPERIMENTAL &ndash; USE WITH CAUTION</em>. This function will only create the
necessary source files so that all the code can be used (and installed) like an R package.
This function does not install anything (e.g., <code>devtools::install</code>). After
running this function, <code>simInit</code> will automatically detect that this is now
a package and will load the functions (via <code>pkgload::load_all</code>) from the source files.
This will have the effect that it emulates the &quot;non-package&quot; behaviour of a
SpaDES module exactly. After running this function, current tests show no
impact on module behaviour, other than event-level and module-level Caching will show
changes and will be rerun. Function-level Caching appears unaffected.
In other words, this should cause no changes to running the module code via
<code>simInit</code> and <code>spades</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convertToPackage(
  module = NULL,
  path = getOption("spades.modulePath"),
  buildDocuments = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convertToPackage_+3A_module">module</code></td>
<td>
<p>Character string of module name, without path</p>
</td></tr>
<tr><td><code id="convertToPackage_+3A_path">path</code></td>
<td>
<p>Character string of <code>modulePath</code>. Defaults to  <code>getOption("spades.modulePath")</code>.</p>
</td></tr>
<tr><td><code id="convertToPackage_+3A_builddocuments">buildDocuments</code></td>
<td>
<p>A logical. If <code>TRUE</code>, the default, then the documentation
will be built, if any exists, using <code>roxygen2::roxygenise</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This will move all functions that are not already in an <code>.R</code> file
in the <code>R</code> folder into that folder, one function per file, including the
<code>doEvent.xxx</code> function. It will not
touch any other functions already in the <code>"R"</code> folder. It will also create
and fill a minimal <code>DESCRIPTION</code> file. This will leave the <code>defineModule</code>
function call as the only code in the main module file. This <code>defineModule</code>
and a <code>doEvent.xxx</code> are the only 2 elements that are required for an R
package to be considered a SpaDES module. With these changes, the module should
still function normally, but will be able to act like an
R package, e.g., for writing function documentation with <code>roxygen2</code>,
using the <code>testthat</code> infrastructure, etc.
</p>
<p>This function is intended to be run once for a module that was created using
the &quot;standard&quot; SpaDES module structure (e.g., from a <code>newModule</code> call). There
is currently no way to &quot;revert&quot; the changes from R (though it can be done using
version control utilities if all files are under version control, e.g., GitHub).
Currently <code>SpaDES.core</code> identifies a module as being a package if it has
a <code>DESCRIPTION</code> file, or if it has been installed to the <code>.libPaths()</code>
e.g., via <code>devtools::install</code> or the like. So one can simply remove the
package from <code>.libPaths</code> and delete the <code>DESCRIPTION</code> file and
<code>SpaDES.core</code> will treat it as a normal module.
</p>


<h3>Value</h3>

<p>Invoked for its side effects. There will be a new or modified
<code>DESCRIPTION</code> file in the root directory of the module. Any functions that
were in the main module script (i.e., the .R file whose filename is the name of
the module and is in the root directory of the module) will be moved to individual
<code>.R</code> files in the <code>R</code> folder. Any function with a dot prefix will have the
dot removed in its respective filename, but the function name is unaffected.
</p>
<p>Currently, <code>SpaDES.core</code> does not install the package under any circumstances.
It will load it via <code>pkgdown::load_all</code>, and optionally (<code>option("spades.moduleDocument" = TRUE)</code>)
build documentation via <code>roxygen2::roxygenise</code> within the <code>simInit</code> call.
This means that any modifications to source code
will be read in during the <code>simInit</code> call, as is the practice when a module
is not a package.
</p>
<p>invoked for the side effect of converting a module to a package
</p>


<h3>Exported functions</h3>

<p>The only function that will be exported by default is the <code>doEvent.xxx</code>,
where <code>xxx</code> is the module name. If any other module is to be exported, it must
be explicitly exported with e.g., <code style="white-space: pre;">&#8288;@export&#8288;</code>, and then building the <code>NAMESPACE</code>
file, e.g., via <code>devtools::document(moduleRootPath)</code>. NOTE: as long as all
the functions are being used inside each other, and they all can be traced back
to a call in <code>doEvent.xxx</code>, then there is no need to export anything else.
</p>


<h3>DESCRIPTION</h3>

<p>The <code>DESCRIPTION</code> file that is created (destroying any existing <code>DESCRIPTION</code>
file) with this function will have
several elements that a user may wish to change. Notably, all packages that were
in <code>reqdPkgs</code> in the SpaDES module metadata will be in the <code>Imports</code>
section of the <code>DESCRIPTION</code>. To accommodate the need to see these functions,
a new R script, <code>imports.R</code> will be created with <code style="white-space: pre;">&#8288;@import&#8288;</code> for each
package in <code>reqdPkgs</code> of the module metadata. However, if a module already has used
<code style="white-space: pre;">&#8288;@importFrom&#8288;</code> for importing a function from a package, then the generic
<code style="white-space: pre;">&#8288;@import&#8288;</code> will be omitted for that (those) package(s).
So, a user should likely follow standard R package
best practices and use <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> to identify the specific functions that
are required within external packages, thereby limiting function name collisions
(and the warnings that come with them).
</p>
<p>Other elements of a standard <code>DESCRIPTION</code> file that will be missing or possibly
inappropriately short are <code>Title</code>, <code>Description</code>, <code>URL</code>,
<code>BugReports</code>.
</p>


<h3>Installing as a package</h3>

<p>There is no need to &quot;install&quot; the source code as a package because <code>simInit</code>
will load it on the fly. But, there may be reasons to install it, e.g., to have
access to individual functions, help manual, running tests etc. To do this,
simply use the <code>devtools::install(pathToModuleRoot)</code>. Even if it is installed,
<code>simInit</code> will nevertheless run <code>pkgload::load_all</code> to ensure the
<code>spades</code> call will be using the current source code.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("ggplot2") &amp;&amp; requireNamespace("pkgload") ) {
  tmpdir &lt;- tempdir2()
  newModule("test", tmpdir, open = FALSE)
  convertToPackage("test", path = tmpdir)
  pkgload::load_all(file.path(tmpdir, "test"))
  pkgload::unload("test")
}

</code></pre>

<hr>
<h2 id='Copy+2CsimList-method'>Copy for <code>simList</code> class objects</h2><span id='topic+Copy+2CsimList-method'></span>

<h3>Description</h3>

<p>Because a <code>simList</code> works with an environment to hold all objects,
all objects within that slot are pass-by-reference.
That means it is not possible to simply copy an object with an assignment operator:
the two objects will share the same objects.
As one <code>simList</code> object changes so will the other.
When this is not the desired behaviour, use this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
Copy(object, objects, queues, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Copy+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p>An R object (likely containing environments) or an environment.</p>
</td></tr>
<tr><td><code id="Copy+2B2CsimList-method_+3A_objects">objects</code></td>
<td>
<p>Whether the objects contained within the <code>simList</code> environment
should be copied. Default <code>TRUE</code>, which may be slow.</p>
</td></tr>
<tr><td><code id="Copy+2B2CsimList-method_+3A_queues">queues</code></td>
<td>
<p>Logical. Should the events queues (<code>events</code>, <code>current</code>, <code>completed</code>)
be deep copied via <code>data.table::copy()</code></p>
</td></tr>
<tr><td><code id="Copy+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>Only used for custom Methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>simList</code> objects can contain a lot of information, much of which could be
in pass-by-reference objects (e.g., <code>data.table</code> class), and objects that are
file-backed, such as some <code style="white-space: pre;">&#8288;Raster*&#8288;</code>-class objects. For all the objects that
are file-backed, it is likely <em>very</em> important to give unique file-backed
directories. This should be passed here, which gets passed on to the many methods
of <code>Copy</code> in <code>reproducible</code>.
</p>


<h3>Value</h3>

<p>a copy of <code>object</code>
</p>


<h3>Note</h3>

<p>uses capital C, to limit confusion with e.g., <code>data.table::copy()</code>.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="reproducible.html#topic+Copy">reproducible::Copy()</a></code>
</p>
<p><code><a href="reproducible.html#topic+Copy">reproducible::Copy()</a></code>
</p>

<hr>
<h2 id='copyModule'>Create a copy of an existing module</h2><span id='topic+copyModule'></span><span id='topic+copyModule+2Ccharacter+2Ccharacter+2Ccharacter-method'></span><span id='topic+copyModule+2Ccharacter+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Create a copy of an existing module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyModule(from, to, path, ...)

## S4 method for signature 'character,character,character'
copyModule(from, to, path, ...)

## S4 method for signature 'character,character,missing'
copyModule(from, to, path, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyModule_+3A_from">from</code></td>
<td>
<p>The name of the module to copy.</p>
</td></tr>
<tr><td><code id="copyModule_+3A_to">to</code></td>
<td>
<p>The name of the copy.</p>
</td></tr>
<tr><td><code id="copyModule_+3A_path">path</code></td>
<td>
<p>The path to a local module directory. Defaults to the path set by
the <code>spades.modulePath</code> option. See <code><a href="#topic+setPaths">setPaths()</a></code>.</p>
</td></tr>
<tr><td><code id="copyModule_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>file.copy</code>, e.g., <code>overwrite = TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible logical indicating success (<code>TRUE</code>) or failure (<code>FALSE</code>).
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='createsOutput'>Define an output object of a module</h2><span id='topic+createsOutput'></span><span id='topic+createsOutput+2CANY+2CANY+2CANY-method'></span><span id='topic+createsOutput+2Ccharacter+2Ccharacter+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Used to specify an output object's name, class, description and other specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createsOutput(objectName, objectClass, desc, ...)

## S4 method for signature 'ANY,ANY,ANY'
createsOutput(objectName, objectClass, desc, ...)

## S4 method for signature 'character,character,character'
createsOutput(objectName, objectClass, desc, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createsOutput_+3A_objectname">objectName</code></td>
<td>
<p>Character string to define the output object's name.</p>
</td></tr>
<tr><td><code id="createsOutput_+3A_objectclass">objectClass</code></td>
<td>
<p>Character string to specify the output object's class.</p>
</td></tr>
<tr><td><code id="createsOutput_+3A_desc">desc</code></td>
<td>
<p>Text string providing a brief description of the output object.
If there are extra spaces or carriage returns, these will be stripped,
allowing for multi-line character strings without using <code>paste</code>
or multiple quotes.</p>
</td></tr>
<tr><td><code id="createsOutput_+3A_...">...</code></td>
<td>
<p>Other specifications of the output object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> suitable to be passed to <code>outputObjects</code> in
a module's metadata.
</p>


<h3>Author(s)</h3>

<p>Yong Luo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>outputObjects &lt;- bindrows(
  createsOutput(objectName = "outputObject1", objectClass = "character",
                desc = "this is for example"),
  createsOutput(objectName = "outputObject2", objectClass = "numeric",
                desc = "this is for example",
                otherInformation = "I am the second output object")
)

</code></pre>

<hr>
<h2 id='defineEvent'>Alternative way to define events in SpaDES.core</h2><span id='topic+defineEvent'></span>

<h3>Description</h3>

<p>There are two ways to define what occurs during an event: defining a function
called <code>doEvent.moduleName</code>, where <code>moduleName</code> is the actual module name.
This approach is the original approach used in SpaDES.core, and it must have an
explicit <code>switch</code> statement branching on <code>eventType</code>.
The newer approach (still experimental) uses <code>defineEvent()</code>.
Instead of creating, <code>doEvent.moduleName()</code>, it creates one function
for each event, each with the name <code>doEvent.moduleName.eventName</code>.
This may be a little bit cleaner, but both with still work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineEvent(sim, eventName = "init", code, moduleName = NULL, envir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineEvent_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code></p>
</td></tr>
<tr><td><code id="defineEvent_+3A_eventname">eventName</code></td>
<td>
<p>Character string of the desired event name to define. Default is &quot;init&quot;</p>
</td></tr>
<tr><td><code id="defineEvent_+3A_code">code</code></td>
<td>
<p>An expression that defines the code to execute during the event. This will
be captured, and pasted into a new function (<code>doEvent.moduleName.eventName</code>),
remaining unevaluated until that new function is called.</p>
</td></tr>
<tr><td><code id="defineEvent_+3A_modulename">moduleName</code></td>
<td>
<p>Character string of the name of the module. If this function is
used within a module, then it will try to find the module name.</p>
</td></tr>
<tr><td><code id="defineEvent_+3A_envir">envir</code></td>
<td>
<p>An optional environment to specify where to put the resulting function.
The default will place a function called <code>doEvent.moduleName.eventName</code> in the
module function location, i.e., <code>sim$.mods[[moduleName]]</code>. However, if this
location does not exist, then it will place it in the <code>parent.frame()</code>, with a message.
Normally, especially, if used within SpaDES module code, this should be left missing.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+defineModule">defineModule()</a></code>, <code><a href="#topic+simInit">simInit()</a></code>, <code><a href="#topic+scheduleEvent">scheduleEvent()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sim &lt;- simInit()

# these put the functions in the parent.frame() which is .GlobalEnv for an interactive user
defineEvent(sim, "init", moduleName = "thisTestModule", code = {
  sim &lt;- Init(sim) # initialize
  # Now schedule some different event for "current time", i.e., will
  #   be put in the event queue to run *after* this current event is finished
  sim &lt;- scheduleEvent(sim, time(sim), "thisTestModule", "grow")
}, envir = envir(sim))

defineEvent(sim, "grow", moduleName = "thisTestModule", code = {
  sim &lt;- grow(sim) # grow
  # Now schedule this same event for "current time plus 1", i.e., a "loop"
  sim &lt;- scheduleEvent(sim, time(sim) + 1, "thisTestModule", "grow") # for "time plus 1"
})

Init &lt;- function(sim) {
  sim$messageToWorld &lt;- "Now the sim has an object in it that can be accessed"
  sim$size &lt;- 1 # initializes the size object --&gt; this can be anything, Raster, list, whatever
  message(sim$messageToWorld)
  return(sim)   # returns all the things you added to sim as they are in the simList
}

grow &lt;- function(sim) {
  sim$size &lt;- sim$size + 1 # increments the size
  message(sim$size)
  return(sim)
}

# schedule that first "init" event
sim &lt;- scheduleEvent(sim, 0, "thisTestModule", "init")
# Look at event queue
events(sim) # shows the "init" we just added

  # this is skipped when running in automated tests; it is fine in interactive use
  out &lt;- spades(sim)


</code></pre>

<hr>
<h2 id='defineModule'>Define a new module.</h2><span id='topic+defineModule'></span><span id='topic+defineModule+2CsimList+2Clist-method'></span>

<h3>Description</h3>

<p>Specify a new module's metadata as well as object and package dependencies.
Packages are loaded during this call. Any or all of these can be missing, with missing
values set to defaults
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineModule(sim, x)

## S4 method for signature 'simList,list'
defineModule(sim, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineModule_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="defineModule_+3A_x">x</code></td>
<td>
<p>A list with a number of named elements, referred to as the metadata. See details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated <code>simList</code> object.
</p>


<h3>Required metadata elements</h3>


<table>
<tr>
 <td style="text-align: left;">
<code>name</code> </td><td style="text-align: left;"> Module name. Must match the filename (without the <code>.R</code> extension).
This is currently not parsed by SpaDES;
it is for human readers only. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>description</code> </td><td style="text-align: left;"> Brief description of the module.
This is currently not parsed by SpaDES;
it is for human readers only. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>keywords</code> </td><td style="text-align: left;"> Author-supplied keywords.
This is currently not parsed by SpaDES;
it is for human readers only. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>childModules</code> </td><td style="text-align: left;"> If this contains any character vector, then it will
be treated as a parent module. If this is a parent module,
then only this list entry will be read. For normal,
i.e., 'child modules', this should be <code>character(0)</code> or
<code>NA</code>.
If a character vector is provided, then these must be the
names of the modules located in the same file path as this
parent module that will be loaded during the <code>simInit</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>authors</code> </td><td style="text-align: left;"> Module author information (as a vector of <code><a href="utils.html#topic+person">person()</a></code>
objects. This is currently not parsed by SpaDES;
it is for human readers only.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>version</code> </td><td style="text-align: left;"> Module version number (will be coerced to <code><a href="base.html#topic+numeric_version">numeric_version()</a></code>
if a character or numeric are supplied).
The module developer should update manually this with each change
that is made to the module. See <a href="https://semver.org/">https://semver.org/</a>
for a widely accepted standard for version numbering.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>spatialExtent</code> </td><td style="text-align: left;"> The spatial extent of the module supplied via
<code>terra::ext</code>. This is currently unimplemented.
Once implemented, this should define what spatial region this
module is scientifically reasonable to be used in.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>timeframe</code> </td><td style="text-align: left;"> Vector (length 2) of <code>POSIXt</code> dates specifying the temporal extent
of the module. Currently unimplemented.
Once implemented, this should define what time frame this
module is scientifically reasonable to be used for.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>timeunit</code> </td><td style="text-align: left;"> Time scale of the module (e.g., "day", "year"). If this is
not specified, then <code>.timeunitDefault()</code> will be used.
It indicates what '1' unit of time
means for this module. <code>SpaDES</code> interprets this
and if modules have different <code>timeunit</code> values
then it will correctly schedule each module, using the
smallest (currently the default) timeunit as the
'model' timeunit in the <code>spades</code> call.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>citation</code> </td><td style="text-align: left;"> List of character strings specifying module citation information.
Alternatively, a list of filenames of <code>.bib</code> or similar files.
This is currently not parsed by SpaDES;
it is for human readers only.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>documentation</code> </td><td style="text-align: left;"> List of filenames referring to module documentation sources.
This is currently not parsed by SpaDES;
it is for human readers only.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>loadOrder</code> </td><td style="text-align: left;"> Named list of length 0, 1, or 2, with names being <code>after</code> and <code>before</code>.
Each element should be a character string/vector naming 1 or more
modules that will be loaded <code>after</code> or <code>before</code> this module.
<code>after</code> and <code>before</code> are used from the current module's
perspective. So, <code>list(after = c("Biomass_core"))</code> means that
this module must come <em>after</em> <code>"Biomass_core"</code>. This should only
be used when there are cyclic dependencies (2 or more modules
have 1 or more objects that is in both <code>inputObjects</code> and
<code>outputObjects</code> of both/all modules) between this module
and other modules. In cases where the dependencies are not cyclic,
SpaDES is able to resolve the order correctly.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>reqdPkgs</code> </td><td style="text-align: left;"> List of R package names required by the module. These
packages will be loaded when <code>simInit</code> is called.
<code><a href="Require.html#topic+Require">Require::Require()</a></code> will be used internally
to load if available, and install if not available.
Because <code><a href="Require.html#topic+Require">Require::Require()</a></code> can also download from
GitHub.com, these packages can specify package names stored
on GitHub, e.g., <code>"PredictiveEcology/SpaDES.core@development"</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>parameters</code> </td><td style="text-align: left;"> A data.frame specifying the parameters used in the module.
Usually produced by <code>rbind</code>-ing the outputs of multiple
<code><a href="#topic+defineParameter">defineParameter()</a></code> calls. These parameters indicate
the default values that will be used unless a module user
overrides them with the <code>params</code> argument in the
<code><a href="#topic+simInit">simInit()</a></code> call. The minimum and maximum are
currently used by the <code>SpaDES.shiny::shine</code> function and the
<code>POM</code> function, and they should indicate the range
of values that are reasonable scientifically.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>inputObjects</code> </td><td style="text-align: left;"> A <code>data.frame</code> specifying the data objects expected as
inputs to the module,
with columns <code>objectName</code> (class <code>character</code>),
<code>objectClass</code> (class <code>character</code>),
<code>sourceURL</code> (class <code>character</code>), and <code>other</code>
(currently spades does nothing with this column).
This data.frame identifies the objects that are expected,
but does not do any loading of that object into the <code>simList</code>.
The <code>sourceURL</code> gives the developer the opportunity
to identify the source of a data file that can be used
with the model. This URL will be
used if the user calls <code>downloadData</code> (or
<code>downloadModule(..., data = TRUE)</code>. If the raw data
must be modified, the developer can use create a
function called <code>.inputObjects</code> in their module. That
function will be run during the <code>simInit</code> call. The
developer should ensure that if the object is supplied
by the module user as an argument in the <code>simInit</code>, then
the <code>.inputObjects</code> should not be run, i.e., use an
<code style="white-space: pre;">&#8288;(is.null(sim$xxx)))&#8288;</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>outputObjects</code> </td><td style="text-align: left;"> A <code>data.frame</code> specifying the data objects output by
the module, with columns identical to those in
<code>inputObjects</code>. Like <code>inputObjects</code> above,
this only identifies the objects that this module will output
into the <code>simList</code>.
The module developer must create the necessary functions
that will cause these objects to be put into the
<code>simList</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+moduleDefaults">moduleDefaults()</a></code>, <code><a href="#topic+defineEvent">defineEvent()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  ## a default version of the defineModule is created with a call to newModule
  newModule("test", path = tempdir(), open = FALSE)

  ## view the resulting module file
  if (interactive()) file.edit(file.path(tempdir(), "test", "test.R"))


</code></pre>

<hr>
<h2 id='defineParameter'>Define a parameter used in a module</h2><span id='topic+defineParameter'></span>

<h3>Description</h3>

<p>Used to specify a parameter's name, value, and set a default. The <code>min</code> and
<code>max</code> arguments are ignored by <code>simInit</code> or <code>spades</code>; they
are for human use only. To ensure that a user cannot set parameters outside of
a range of values, the module developer should use assertions in their module
code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineParameter(name, class, default, min, max, desc, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineParameter_+3A_name">name</code></td>
<td>
<p>Character string giving the parameter name.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_class">class</code></td>
<td>
<p>Character string giving the parameter class.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_default">default</code></td>
<td>
<p>The default value to use when none is specified by the user.
Non-standard evaluation is used for the expression.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_min">min</code></td>
<td>
<p>With <code>max</code>, used to define a suitable range of values.
Non-standard evaluation is used for the expression.
<em>These are not tested by</em> <code>simInit</code> <em>or</em>
<code>spades</code>. These are primarily for human use, i.e., to
tell a module user what values the module expects.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_max">max</code></td>
<td>
<p>With <code>min</code>, used to define a suitable range of values.
Non-standard evaluation is used for the expression.
<em>These are not tested by</em> <code>simInit</code> <em>or</em>
<code>spades</code>. These are primarily for human use, i.e., to
tell a module user what values the module expects.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_desc">desc</code></td>
<td>
<p>Text string providing a brief description of the parameter.
If there are extra spaces or carriage returns, these will be stripped,
allowing for multi-line character strings without using <code>paste</code>
or multiple quotes.</p>
</td></tr>
<tr><td><code id="defineParameter_+3A_...">...</code></td>
<td>
<p>A convenience that allows writing a long <code>desc</code> without
having to use <code>paste</code>; any character strings after <code>desc</code>
will be <code>paste</code>d together with <code>desc</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code>
</p>


<h3>Note</h3>

<p>Be sure to use the correct NA type: logical (<code>NA</code>), integer (<code>NA_integer_</code>),
real (<code>NA_real_</code>), complex (<code>NA_complex_</code>), or character (<code>NA_character_</code>).
See <code><a href="base.html#topic+NA">NA()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="#topic+P">P()</a></code>, <code><a href="#topic+params">params()</a></code> for accessing these parameters in a module.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>parameters = rbind(
  defineParameter("lambda", "numeric", 1.23, desc = "intrinsic rate of increase"),
  defineParameter("P", "numeric", 0.2, 0, 1, "probability of attack"),

  # multi-line desc without quotes on each line -- spaces and carriage returns are stripped
  defineParameter("rate", "numeric", 0.2, 0, 1,
                  "rate of arrival. This is in individuals
                  per day. This can be modified
                  by the user"),
  # multi-line desc with quotes on each line
  defineParameter("times", "numeric", 0.2, 0, 1,
                  desc = "The times during the year ",
                         "that events will occur ",
                         "with possibility of random arrival times")

)


# Create a new module, then access parameters using `P`
tmpdir &lt;- file.path(tempdir(), "test")
checkPath(tmpdir, create = TRUE)

# creates a  new, "empty" module -- it has defaults for everything that is required
newModule("testModule", tmpdir, open = FALSE)

# Look at new module code -- see defineParameter
if (interactive()) file.edit(file.path(tmpdir, "testModule", "testModule.R"))

# initialize the simList
if (requireNamespace("ggplot2", quietly = TRUE)) {
  # Some things not necessary in this example, if not interactive (like plotting)
  opts &lt;- if (interactive()) list() else
    options(spades.plot = NA, spades.useRequire = FALSE,
            spades.moduleCodeChecks = FALSE)
  mySim &lt;- simInit(modules = "testModule",
                   paths = list(modulePath = tmpdir))

  # Access one of the parameters -- because this line is not inside a module
  #  function, we must specify the module name. If used within a module,
  #  we can omit the module name
  P(mySim, module = "testModule") # gets all params in a module
  P(mySim, ".useCache", "testModule") # just one param
  options(opts)
}
unlink(tmpdir, recursive = TRUE)


</code></pre>

<hr>
<h2 id='depsEdgeList'>Build edge list for module dependency graph</h2><span id='topic+depsEdgeList'></span><span id='topic+depsEdgeList+2CsimList+2Clogical-method'></span><span id='topic+depsEdgeList+2CsimList+2Cmissing-method'></span>

<h3>Description</h3>

<p>Build edge list for module dependency graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>depsEdgeList(sim, plot)

## S4 method for signature 'simList,logical'
depsEdgeList(sim, plot)

## S4 method for signature 'simList,missing'
depsEdgeList(sim, plot)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="depsEdgeList_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="depsEdgeList_+3A_plot">plot</code></td>
<td>
<p>Logical indicating whether the edgelist (and subsequent graph)
will be used for plotting. If <code>TRUE</code>, duplicated rows
(i.e., multiple object dependencies between modules) are removed
so that only a single arrow is drawn connecting the modules.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> whose first two columns give a list of edges
and remaining columns the attributes of the dependency objects
(object name, class, etc.).
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='depsGraph'>Build a module dependency graph</h2><span id='topic+depsGraph'></span><span id='topic+depsGraph+2CsimList+2Clogical-method'></span><span id='topic+depsGraph+2CsimList+2Cmissing-method'></span>

<h3>Description</h3>

<p>Build a module dependency graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>depsGraph(sim, plot)

## S4 method for signature 'simList,logical'
depsGraph(sim, plot)

## S4 method for signature 'simList,missing'
depsGraph(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="depsGraph_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="depsGraph_+3A_plot">plot</code></td>
<td>
<p>Logical indicating whether the edgelist (and subsequent graph)
will be used for plotting. If <code>TRUE</code>, duplicated rows
(i.e., multiple object dependencies between modules) are removed
so that only a single arrow is drawn connecting the modules.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>igraph()</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='dhour'>SpaDES time units</h2><span id='topic+dhour'></span><span id='topic+dmin'></span><span id='topic+dday'></span><span id='topic+dyears'></span><span id='topic+dyears+2Cnumeric-method'></span><span id='topic+dmonths'></span><span id='topic+dmonths+2Cnumeric-method'></span><span id='topic+dweeks'></span><span id='topic+dweeks+2Cnumeric-method'></span><span id='topic+dweek'></span><span id='topic+dmonth'></span><span id='topic+dyear'></span><span id='topic+dsecond'></span><span id='topic+dNA'></span><span id='topic+dNA+2CANY-method'></span>

<h3>Description</h3>

<p><code>SpaDES</code> modules commonly use approximate durations that divide with no
remainder among themselves.
For example, models that simulate based on a &quot;week&quot; timestep, will likely
want to fall in lock step with a second module that is a &quot;year&quot; timestep.
Since, weeks, months, years don't really have this behaviour because of:
leap years, leap seconds, not quite 52 weeks in a year, months that are of
different duration, etc.
We have generated a set of units that work well together that are based on
the astronomical or &quot;Julian&quot; year.
In an astronomical year, leap years are added within each year with an extra
1/4 day, (i.e., 1 year == 365.25 days); months are defined as year/12, and
weeks as year/52.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhour(x)

dmin(x)

dday(x)

dyears(x)

## S4 method for signature 'numeric'
dyears(x)

dmonths(x)

## S4 method for signature 'numeric'
dmonths(x)

dweeks(x)

## S4 method for signature 'numeric'
dweeks(x)

dweek(x)

dmonth(x)

dyear(x)

dsecond(x)

dNA(x)

## S4 method for signature 'ANY'
dNA(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhour_+3A_x">x</code></td>
<td>
<p>numeric. Number of the desired units</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When these units are not correct, a module developer can create their own
time unit, and create a function to calculate the number of seconds
in that unit using the &quot;d&quot; prefix (for duration), following the
<code>lubridate</code> package standard:
<code>ddecade &lt;- function(x) lubridate::duration(dyear(10))</code>.
Then the module developer can use &quot;decade&quot; as the module's time unit.
</p>


<h3>Value</h3>

<p>Number of seconds within each unit
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='doEvent'>Process a simulation event</h2><span id='topic+doEvent'></span>

<h3>Description</h3>

<p>Internal function called from <code>spades</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>doEvent(
  sim,
  debug = FALSE,
  notOlderThan,
  useFuture = getOption("spades.futureEvents", FALSE),
  events = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="doEvent_+3A_sim">sim</code></td>
<td>
<p>Character string for the <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id="doEvent_+3A_debug">debug</code></td>
<td>
<p>Optional tools for invoking debugging. Supplying a <code>list</code>
will invoke the more powerful <code>logging</code> package. See details.
Default is to use the value in <code>getOption("spades.debug")</code>.</p>
</td></tr>
<tr><td><code id="doEvent_+3A_notolderthan">notOlderThan</code></td>
<td>
<p>Date or time. Passed to <code>reproducible::Cache</code> to update the cache.
Default is <code>NULL</code>, meaning don't update the cache.
If <code>Sys.time()</code> is provided, then it will force a recache,
i.e., remove old value and replace with new value.
Ignored if <code>cache</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="doEvent_+3A_usefuture">useFuture</code></td>
<td>
<p>Experimental use of future::future package. Not fully implemented.</p>
</td></tr>
<tr><td><code id="doEvent_+3A_events">events</code></td>
<td>
<p>A character vector or a named list of character vectors. If specified,
the simulations will only do the events indicated here. If a named list, the names
must correspond to the modules and the character vectors can be specific events within
each of the named modules. With the <code>list</code> form, all unspecified modules
will run <em>all</em> their events, including internal spades modules, e.g., <code>save</code>,
that get invoked with the <code>outputs</code> argument in  <code>simInit</code>. See example.</p>
</td></tr>
<tr><td><code id="doEvent_+3A_...">...</code></td>
<td>
<p>Any. Can be used to make a unique cache identity, such as &quot;replicate = 1&quot;.
This will be included in the <code>Cache</code> call, so will be unique
and thus <code>spades</code> will not use a cached copy as long as
anything passed in <code>...</code> is unique, i.e., not cached previously.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calls the module corresponding to the event call, and executes the event.
</p>
<p>Here, we implement a simulation in a more modular fashion so it's easier to add
submodules to the simulation. We use S4 classes and methods.
</p>


<h3>Value</h3>

<p>Returns the modified <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>

<hr>
<h2 id='downloadData'>Download module data</h2><span id='topic+downloadData'></span><span id='topic+downloadData+2Ccharacter+2Ccharacter+2Clogical-method'></span><span id='topic+downloadData+2Ccharacter+2Cmissing+2Cmissing-method'></span><span id='topic+downloadData+2Ccharacter+2Cmissing+2Clogical-method'></span><span id='topic+downloadData+2Ccharacter+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Download external data for a module if not already present in the module
directory, or if there is a checksum mismatch indicating that the file is not
the correct one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadData(
  module,
  path,
  quiet,
  quickCheck = FALSE,
  overwrite = FALSE,
  files = NULL,
  checked = NULL,
  urls = NULL,
  children = NULL,
  ...
)

## S4 method for signature 'character,character,logical'
downloadData(
  module,
  path,
  quiet,
  quickCheck = FALSE,
  overwrite = FALSE,
  files = NULL,
  checked = NULL,
  urls = NULL,
  children = NULL,
  ...
)

## S4 method for signature 'character,missing,missing'
downloadData(module, quickCheck, overwrite, files, checked, urls, children)

## S4 method for signature 'character,missing,logical'
downloadData(
  module,
  quiet,
  quickCheck,
  overwrite,
  files,
  checked,
  urls,
  children
)

## S4 method for signature 'character,character,missing'
downloadData(
  module,
  path,
  quickCheck,
  overwrite,
  files,
  checked,
  urls,
  children
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadData_+3A_module">module</code></td>
<td>
<p>Character string giving the name of the module.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_path">path</code></td>
<td>
<p>Character string giving the path to the module directory.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_quiet">quiet</code></td>
<td>
<p>Logical. This is passed to <code>download.file</code>. Default is FALSE.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_quickcheck">quickCheck</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the check with local data will only
use <code>file.size</code> instead of <code>digest::digest</code>.
This is faster, but potentially much less robust.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Should local data files be overwritten in case they exist?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_files">files</code></td>
<td>
<p>A character vector of length 1 or more if only a subset of files should be
checked in the &lsquo;<span class="file">CHECKSUMS.txt</span>&rsquo; file.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_checked">checked</code></td>
<td>
<p>The result of a previous <code>checksums</code> call. This should only be used when
there is no possibility that the file has changed, i.e., if <code>downloadData</code> is
called from inside another function.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_urls">urls</code></td>
<td>
<p>Character vector of urls from which to get the data. This is automatically
found from module metadata when this function invoked with
<code>SpaDES.core::downloadModule(..., data = TRUE)</code>. See also
<code><a href="reproducible.html#topic+prepInputs">prepInputs()</a></code>.</p>
</td></tr>
<tr><td><code id="downloadData_+3A_children">children</code></td>
<td>
<p>The character vector of child modules (without path) to also
run <code>downloadData</code> on</p>
</td></tr>
<tr><td><code id="downloadData_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="reproducible.html#topic+preProcess">reproducible::preProcess()</a></code>, e.g., <code>purge</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>downloadData</code> requires a checksums file to work, as it will only download
the files specified therein. Hence, module developers should make sure they
have manually downloaded all the necessary data and ran <code>checksums</code> to
build a checksums file.
</p>
<p>There is an experimental attempt to use the <span class="pkg">googledrive</span> package to download
data from a shared (publicly or with individual users) file.
To try this, put the Google Drive URL in <code>sourceURL</code> argument of
<code>expectsInputs</code> in the module metadata, and put the filename once downloaded
in the <code>objectName</code> argument.
If using RStudio Server, you may need to use &quot;out of band&quot; authentication by
setting <code>options(httr_oob_default = TRUE)</code>.
To avoid caching of Oauth credentials, set <code>options(httr_oauth_cache = TRUE)</code>.
</p>
<p>There is also an experimental option for the user to make a new &lsquo;<span class="file">CHECKSUMS.txt</span>&rsquo;
file if there is a <code>sourceURL</code> but no entry for that file.
This is experimental and should be used with caution.
</p>


<h3>Value</h3>

<p>Invisibly, a list of downloaded files.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty &amp; Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="reproducible.html#topic+prepInputs">prepInputs()</a></code>, <code><a href="#topic+checksums">checksums()</a></code>, and <code><a href="#topic+downloadModule">downloadModule()</a></code>
for downloading modules and building a checksums file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# In metadata, each expectsInput has a sourceURL; downloadData will look for
# that and download if it defined; however this sample module has all
# NAs for sourceURL, so nothing to download
modulePath &lt;- getSampleModules(tempdir())
downloadData("caribouMovement", path = modulePath)


</code></pre>

<hr>
<h2 id='downloadModule'>Download a module from a SpaDES module GitHub repository</h2><span id='topic+downloadModule'></span><span id='topic+downloadModule+2Ccharacter+2Ccharacter+2Ccharacter+2Ccharacter+2Clogical+2Clogical+2CANY+2Clogical-method'></span><span id='topic+downloadModule+2Ccharacter+2Cmissing+2Cmissing+2Cmissing+2Cmissing+2Cmissing+2CANY+2CANY-method'></span><span id='topic+downloadModule+2Ccharacter+2CANY+2CANY+2CANY+2CANY+2CANY+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Download a .zip file of the module and extract (unzip) it to a user-specified location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadModule(
  name,
  path,
  version,
  repo,
  data,
  quiet,
  quickCheck = FALSE,
  overwrite = FALSE
)

## S4 method for signature 
## 'character,character,character,character,logical,logical,ANY,logical'
downloadModule(
  name,
  path,
  version,
  repo,
  data,
  quiet,
  quickCheck = FALSE,
  overwrite = FALSE
)

## S4 method for signature 
## 'character,missing,missing,missing,missing,missing,ANY,ANY'
downloadModule(name, quickCheck, overwrite)

## S4 method for signature 'character,ANY,ANY,ANY,ANY,ANY,ANY,ANY'
downloadModule(
  name,
  path,
  version,
  repo,
  data,
  quiet,
  quickCheck = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadModule_+3A_name">name</code></td>
<td>
<p>Character string giving the module name.</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_path">path</code></td>
<td>
<p>Character string giving the location in which to save the
downloaded module.</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_version">version</code></td>
<td>
<p>The module version to download. (If not specified, or <code>NA</code>,
the most recent version will be retrieved.)</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_repo">repo</code></td>
<td>
<p>GitHub repository name, specified as <code>"username/repo"</code>.
Default is <code>"PredictiveEcology/SpaDES-modules"</code>, which is
specified by the global option <code>spades.moduleRepo</code>.
Only <code>master</code>/<code>main</code> branches can be used at this point.</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_data">data</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the data that is identified in the
module metadata will be downloaded, if possible. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_quiet">quiet</code></td>
<td>
<p>Logical. This is passed to <code>download.file</code> (default <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_quickcheck">quickCheck</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the check with local data will only
use <code>file.size</code> instead of <code>digest::digest</code>.
This is faster, but potentially much less robust.</p>
</td></tr>
<tr><td><code id="downloadModule_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Should local module files be overwritten in case they exist?
Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only works with GitHub repositories where modules are located in
a <code>modules</code> directory in the root tree on the <code>master</code> branch.
Module .zip files' names should contain the version number and be inside their
respective module folders (see <code><a href="#topic+zipModule">zipModule()</a></code> for zip compression of modules).
</p>


<h3>Value</h3>

<p>A list of length 2. The first element is a character vector containing
a character vector of extracted files for the module. The second element is
a <code>tbl</code> with details about the data that is relevant for the function,
including whether it was downloaded or not, and whether it was renamed
(because there was a local copy that had the wrong file name).
</p>


<h3>Note</h3>

<p><code>downloadModule</code> uses the <code>GITHUB_PAT</code> environment variable
if a value is set. This alleviates 403 errors caused by too-frequent downloads.
Generate a GitHub personal access token with no additional permissions at
<a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a>, and add this key to &lsquo;<span class="file">.Renviron</span>&rsquo;
as <code style="white-space: pre;">&#8288;GITHUB_PAT=&lt;your-github-pat-here&gt;&#8288;</code>.
</p>
<p>The default is to overwrite any existing files in the case of a conflict.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zipModule">zipModule()</a></code> for creating module .zip folders.
</p>

<hr>
<h2 id='emptyEventList'>Blank (template) event list</h2><span id='topic+emptyEventList'></span><span id='topic+.emptyEventListDT'></span><span id='topic+.singleEventListDT'></span><span id='topic+.emptyEventList'></span><span id='topic+.emptyEventList+2Cnumeric+2Ccharacter+2Ccharacter+2Cnumeric-method'></span><span id='topic+.emptyEventList+2Cmissing+2Cmissing+2Cmissing+2Cmissing-method'></span><span id='topic+.emptyEventListCols'></span>

<h3>Description</h3>

<p>Internal function called from <code>spades</code>, returning an empty event list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.emptyEventListDT

.singleEventListDT

.emptyEventList(eventTime, moduleName, eventType, eventPriority)

## S4 method for signature 'numeric,character,character,numeric'
.emptyEventList(eventTime, moduleName, eventType, eventPriority)

## S4 method for signature 'missing,missing,missing,missing'
.emptyEventList()

.emptyEventListCols
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="emptyEventList_+3A_eventtime">eventTime</code></td>
<td>
<p>The time the event is to occur.</p>
</td></tr>
<tr><td><code id="emptyEventList_+3A_modulename">moduleName</code></td>
<td>
<p>The module from which the event is taken.</p>
</td></tr>
<tr><td><code id="emptyEventList_+3A_eventtype">eventType</code></td>
<td>
<p>A character string for the programmer-defined event type.</p>
</td></tr>
<tr><td><code id="emptyEventList_+3A_eventpriority">eventPriority</code></td>
<td>
<p>The priority given to the event.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 0 rows and 4 columns.
</p>
<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 1 rows and 4 columns.
</p>
<p>An object of class <code>character</code> of length 4.
</p>


<h3>Details</h3>

<p>Event lists are sorted (keyed) first by time, second by priority.
Each event is represented by a <code><a href="data.table.html#topic+data.table">data.table()</a></code> row consisting of:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>eventTime</code> </td><td style="text-align: left;"> The time the event is to occur.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>moduleName</code> </td><td style="text-align: left;"> The module from which the event is taken.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eventType</code> </td><td style="text-align: left;"> A character string for the programmer-defined event type.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eventPriority</code> </td><td style="text-align: left;"> The priority given to the event. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>Returns an empty event list.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='envir'>Simulation environment</h2><span id='topic+envir'></span><span id='topic+simList-accessors-envir'></span><span id='topic+envir+2CsimList-method'></span><span id='topic+envir+3C-'></span><span id='topic+envir+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>.xData</code> slot, which is the default virtual
slot for an S4 class object that inherits from an S3 object (specifically,
the <code>simList</code> inherits from <code>environment</code>) in a <code>simList</code> object.
These are included for advanced users.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>envir(sim)

## S4 method for signature 'simList'
envir(sim)

envir(sim) &lt;- value

## S4 replacement method for signature 'simList'
envir(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="envir_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="envir_+3A_value">value</code></td>
<td>
<p>The object to be stored at the slot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, only get and set methods are defined. Subset methods are not.
</p>


<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.8 on <code>simList</code> environment.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='eventDiagram'>Simulation event diagram</h2><span id='topic+eventDiagram'></span><span id='topic+eventDiagram+2CsimList+2Cnumeric+2Ccharacter-method'></span><span id='topic+eventDiagram+2CsimList+2Cmissing+2Ccharacter-method'></span><span id='topic+eventDiagram+2CsimList+2Cmissing+2Cmissing-method'></span>

<h3>Description</h3>

<p>Create a Gantt Chart representing the events in a completed simulation.
This event diagram is constructed using the completed event list
To change the number of events shown, provide an <code>n</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eventDiagram(sim, n, startDate, ...)

## S4 method for signature 'simList,numeric,character'
eventDiagram(sim, n, startDate, ...)

## S4 method for signature 'simList,missing,character'
eventDiagram(sim, n, startDate, ...)

## S4 method for signature 'simList,missing,missing'
eventDiagram(sim, n, startDate, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eventDiagram_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object (typically corresponding to a completed simulation).</p>
</td></tr>
<tr><td><code id="eventDiagram_+3A_n">n</code></td>
<td>
<p>The number of most recently completed events to plot.</p>
</td></tr>
<tr><td><code id="eventDiagram_+3A_startdate">startDate</code></td>
<td>
<p>A character representation of date in <code>YYYY-MM-DD</code> format.</p>
</td></tr>
<tr><td><code id="eventDiagram_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>mermaid</code>.
Useful for specifying <code>height</code> and <code>width</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simulation time is presented on the x-axis, starting at date <code>startDate</code>.
Each module appears in a colour-coded row, within which each event for that
module is displayed corresponding to the sequence of events for that module.
Note that only the start time of the event is meaningful is these figures:
the width of the bar associated with a particular module's event DOES NOT
correspond to an event's &quot;duration&quot;.
</p>
<p>Based on this Stack Overflow answer: <a href="https://stackoverflow.com/a/29999300/1380598">https://stackoverflow.com/a/29999300/1380598</a>.
</p>


<h3>Value</h3>

<p>Plots an event diagram as Gantt Chart, invisibly returning a <code>mermaid</code> object.
</p>


<h3>Note</h3>

<p>A red vertical line corresponding to the current date may appear on the figure.
This is useful for Gantt Charts generally but can be considered a 'bug' here.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>DiagrammeR::mermaid</code>.
</p>

<hr>
<h2 id='events'>Simulation event lists</h2><span id='topic+events'></span><span id='topic+simList-accessors-events'></span><span id='topic+events+2CsimList+2Ccharacter-method'></span><span id='topic+events+2CsimList+2Cmissing-method'></span><span id='topic+events+3C-'></span><span id='topic+events+3C-+2CsimList-method'></span><span id='topic+conditionalEvents'></span><span id='topic+conditionalEvents+2CsimList+2Ccharacter-method'></span><span id='topic+conditionalEvents+2CsimList+2Cmissing-method'></span><span id='topic+current'></span><span id='topic+current+2CsimList+2Ccharacter-method'></span><span id='topic+current+2CsimList+2Cmissing-method'></span><span id='topic+current+3C-'></span><span id='topic+current+3C-+2CsimList-method'></span><span id='topic+completed'></span><span id='topic+completed+2CsimList+2Ccharacter-method'></span><span id='topic+completed+2CsimList+2Cmissing-method'></span><span id='topic+completed+3C-'></span><span id='topic+completed+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>events</code> and <code>completed</code> slots of a
<code>simList</code> object. These path functions will extract the values that were
provided to the <code>simInit</code> function in the <code>path</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>events(sim, unit)

## S4 method for signature 'simList,character'
events(sim, unit)

## S4 method for signature 'simList,missing'
events(sim, unit)

events(sim) &lt;- value

## S4 replacement method for signature 'simList'
events(sim) &lt;- value

conditionalEvents(sim, unit)

## S4 method for signature 'simList,character'
conditionalEvents(sim, unit)

## S4 method for signature 'simList,missing'
conditionalEvents(sim, unit)

current(sim, unit)

## S4 method for signature 'simList,character'
current(sim, unit)

## S4 method for signature 'simList,missing'
current(sim, unit)

current(sim) &lt;- value

## S4 replacement method for signature 'simList'
current(sim) &lt;- value

completed(sim, unit, times = TRUE)

## S4 method for signature 'simList,character'
completed(sim, unit, times = TRUE)

## S4 method for signature 'simList,missing'
completed(sim, unit, times = TRUE)

completed(sim) &lt;- value

## S4 replacement method for signature 'simList'
completed(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="events_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="events_+3A_unit">unit</code></td>
<td>
<p>Character. One of the time units used in <code>SpaDES</code>.</p>
</td></tr>
<tr><td><code id="events_+3A_value">value</code></td>
<td>
<p>The object to be stored at the slot.</p>
</td></tr>
<tr><td><code id="events_+3A_times">times</code></td>
<td>
<p>Logical. Should this function report the <code>clockTime</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, the event lists are shown when the <code>simList</code> object is printed,
thus most users will not require direct use of these methods.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>events</code> </td><td style="text-align: left;"> Scheduled simulation events (the event queue).</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>completed</code> </td><td style="text-align: left;"> Completed simulation events.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Currently, only get and set methods are defined. Subset methods are not.
</p>


<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>Note</h3>

<p>Each event is represented by a <code><a href="data.table.html#topic+data.table">data.table()</a></code> row consisting of:
</p>

<ul>
<li> <p><code>eventTime</code>: The time the event is to occur.
</p>
</li>
<li> <p><code>moduleName</code>: The module from which the event is taken.
</p>
</li>
<li> <p><code>eventType</code>: A character string for the programmer-defined event type.
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.6 on Simulation event queues.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='expectsInput'>Define an input object that the module expects.</h2><span id='topic+expectsInput'></span><span id='topic+expectsInput+2CANY+2CANY+2CANY+2CANY-method'></span><span id='topic+expectsInput+2Ccharacter+2Ccharacter+2Ccharacter+2Ccharacter-method'></span><span id='topic+expectsInput+2Ccharacter+2Ccharacter+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Used to specify an input object's name, class, description, source url and
other specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expectsInput(objectName, objectClass, desc, sourceURL, ...)

## S4 method for signature 'ANY,ANY,ANY,ANY'
expectsInput(objectName, objectClass, desc, sourceURL, ...)

## S4 method for signature 'character,character,character,character'
expectsInput(objectName, objectClass, desc, sourceURL, ...)

## S4 method for signature 'character,character,character,missing'
expectsInput(objectName, objectClass, desc, sourceURL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expectsInput_+3A_objectname">objectName</code></td>
<td>
<p>Character string to define the input object's name.</p>
</td></tr>
<tr><td><code id="expectsInput_+3A_objectclass">objectClass</code></td>
<td>
<p>Character string to specify the input object's class.</p>
</td></tr>
<tr><td><code id="expectsInput_+3A_desc">desc</code></td>
<td>
<p>Text string providing a brief description of the input object.
If there are extra spaces or carriage returns, these will be stripped,
allowing for multi-line character strings without using <code>paste</code>
or multiple quotes.</p>
</td></tr>
<tr><td><code id="expectsInput_+3A_sourceurl">sourceURL</code></td>
<td>
<p>Character string to specify an URL to reach the input object,
default is <code>NA</code>.</p>
</td></tr>
<tr><td><code id="expectsInput_+3A_...">...</code></td>
<td>
<p>Other specifications of the input object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> suitable to be passed to <code>inputObjects</code> in a module's metadata.
</p>


<h3>Author(s)</h3>

<p>Yong Luo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputObjects &lt;- bindrows(
  expectsInput(objectName = "inputObject1", objectClass = "character",
               desc = "this is for example", sourceURL = "not available"),
  expectsInput(objectName = "inputObject2", objectClass = "numeric",
               desc = "this is for example", sourceURL = "not available",
               otherInformation = "I am the second input object")
)

</code></pre>

<hr>
<h2 id='extractURL'>Extract a url from module metadata</h2><span id='topic+extractURL'></span><span id='topic+extractURL+2Ccharacter+2Cmissing-method'></span><span id='topic+extractURL+2Ccharacter+2CsimList-method'></span>

<h3>Description</h3>

<p>This will get the <code>sourceURL</code> for the object named.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractURL(objectName, sim, module)

## S4 method for signature 'character,missing'
extractURL(objectName, sim, module)

## S4 method for signature 'character,simList'
extractURL(objectName, sim, module)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractURL_+3A_objectname">objectName</code></td>
<td>
<p>A character string of the object name in the metadata.</p>
</td></tr>
<tr><td><code id="extractURL_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract the <code>sourceURL</code></p>
</td></tr>
<tr><td><code id="extractURL_+3A_module">module</code></td>
<td>
<p>An optional character string of the module name whose metadata is
to be used. If omitted, the function will use the <code>currentModule(sim)</code>,
if defined.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The url.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='fileName'>Extract filename (without extension) of a file</h2><span id='topic+fileName'></span>

<h3>Description</h3>

<p>Extract filename (without extension) of a file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fileName(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fileName_+3A_x">x</code></td>
<td>
<p>List or character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='ganttStatus'><code>ganttStatus</code></h2><span id='topic+ganttStatus'></span><span id='topic+ganttStatus+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Internal function assign the &quot;status&quot; of each event to be passed to <code>DiagrammeR::mermaid()</code>
to make a Gantt chart representing the events in a completed simulation.
<code>init</code> events are set as &quot;done&quot;; <code>plot</code> events as &quot;critical&quot;; and all others as &quot;active&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ganttStatus(eventType)

## S4 method for signature 'character'
ganttStatus(eventType)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ganttStatus_+3A_eventtype">eventType</code></td>
<td>
<p>Character vector of events.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='getMapPath'>Get copies of sample files for examples and tests</h2><span id='topic+getMapPath'></span><span id='topic+getSampleModules'></span>

<h3>Description</h3>

<p>Get copies of sample files for examples and tests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMapPath(tmpdir)

getSampleModules(tmpdir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMapPath_+3A_tmpdir">tmpdir</code></td>
<td>
<p>character specifying the path to a temporary directory (e.g., <code>tempdir()</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of filepaths to the copied files
</p>

<hr>
<h2 id='getModuleVersion'>Find the latest module version from a SpaDES module repository</h2><span id='topic+getModuleVersion'></span><span id='topic+getModuleVersion+2Ccharacter+2Ccharacter-method'></span><span id='topic+getModuleVersion+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Modified from <a href="https://stackoverflow.com/a/25485782/1380598">https://stackoverflow.com/a/25485782/1380598</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getModuleVersion(name, repo)

## S4 method for signature 'character,character'
getModuleVersion(name, repo)

## S4 method for signature 'character,missing'
getModuleVersion(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getModuleVersion_+3A_name">name</code></td>
<td>
<p>Character string giving the module name.</p>
</td></tr>
<tr><td><code id="getModuleVersion_+3A_repo">repo</code></td>
<td>
<p>GitHub repository name, specified as <code>"username/repo"</code>.
Default is <code>"PredictiveEcology/SpaDES-modules"</code>, which is
specified by the global option <code>spades.moduleRepo</code>.
Only <code>master</code>/<code>main</code> branches can be used at this point.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getModuleVersion</code> extracts a module's most recent version by
looking at the module &lsquo;<span class="file">.zip</span>&rsquo; files contained in the module directory.
It takes the most recent version, based on the name of the zip file.
</p>
<p>See the modules vignette for details of module directory structure
(<a href="https://spades-core.predictiveecology.org/articles/ii-modules.html#module-directory-structure-modulename">https://spades-core.predictiveecology.org/articles/ii-modules.html#module-directory-structure-modulename</a>),
and see our SpaDES-modules repo for details of module repository structure
(<a href="https://github.com/PredictiveEcology/SpaDES-modules">https://github.com/PredictiveEcology/SpaDES-modules</a>).
</p>


<h3>Value</h3>

<p><code>numeric_version</code>
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zipModule">zipModule()</a></code> for creating module &lsquo;<span class="file">.zip</span>&rsquo; folders.
</p>

<hr>
<h2 id='globals'>Get and set global simulation parameters</h2><span id='topic+globals'></span><span id='topic+globals+2CsimList-method'></span><span id='topic+globals+3C-'></span><span id='topic+globals+3C-+2CsimList-method'></span><span id='topic+G'></span><span id='topic+G+2CsimList-method'></span><span id='topic+G+3C-'></span><span id='topic+G+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p><code>globals</code>, and the alias <code>G</code>, accesses or sets the &quot;globals&quot;
in the <code>simList</code>. This currently is not an explicit slot in the <code>simList</code>,
but it is a <code>.globals</code> element in the <code>params</code> slot of the <code>simList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>globals(sim)

## S4 method for signature 'simList'
globals(sim)

globals(sim) &lt;- value

## S4 replacement method for signature 'simList'
globals(sim) &lt;- value

G(sim)

## S4 method for signature 'simList'
G(sim)

G(sim) &lt;- value

## S4 replacement method for signature 'simList'
G(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="globals_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="globals_+3A_value">value</code></td>
<td>
<p>The parameter value to be set (in the corresponding <code>module</code> and <code>param</code>).</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.1 on Simulation Parameters.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='initialize+2CsimList-method'>Generate a <code>simList</code> object</h2><span id='topic+initialize+2CsimList-method'></span><span id='topic+initialize+2CsimList_-method'></span>

<h3>Description</h3>

<p>Given the name or the definition of a class, plus optionally data to be
included in the object, <code>new</code> returns an object from that class.
</p>
<p>Given the name or the definition of a class, plus optionally data to be
included in the object, <code>new</code> returns an object from that class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
initialize(.Object, ...)

## S4 method for signature 'simList_'
initialize(.Object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize+2B2CsimList-method_+3A_.object">.Object</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>Optional Values passed to any or all slot</p>
</td></tr>
</table>

<hr>
<h2 id='inputObjects'>Metadata accessors</h2><span id='topic+inputObjects'></span><span id='topic+simList-accessors-metadata'></span><span id='topic+inputObjects+2CsimList-method'></span><span id='topic+inputObjects+2Cmissing-method'></span><span id='topic+outputObjects'></span><span id='topic+outputObjects+2CsimList-method'></span><span id='topic+outputObjects+2Cmissing-method'></span><span id='topic+outputObjectNames'></span><span id='topic+outputObjectNames+2CsimList-method'></span><span id='topic+reqdPkgs'></span><span id='topic+reqdPkgs+2CsimList-method'></span><span id='topic+reqdPkgs+2Cmissing-method'></span><span id='topic+documentation'></span><span id='topic+documentation+2CsimList-method'></span><span id='topic+sessInfo'></span><span id='topic+sessInfo+2CsimList-method'></span>

<h3>Description</h3>

<p>These accessors extract the metadata for a module (if specified) or all modules
in a <code>simList</code> if not specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inputObjects(sim, module, path)

## S4 method for signature 'simList'
inputObjects(sim, module, path)

## S4 method for signature 'missing'
inputObjects(sim, module, path)

outputObjects(sim, module, path)

## S4 method for signature 'simList'
outputObjects(sim, module, path)

## S4 method for signature 'missing'
outputObjects(sim, module, path)

outputObjectNames(sim, module)

## S4 method for signature 'simList'
outputObjectNames(sim, module)

reqdPkgs(sim, module, modulePath)

## S4 method for signature 'simList'
reqdPkgs(sim, module, modulePath)

## S4 method for signature 'missing'
reqdPkgs(sim, module, modulePath)

documentation(sim, module)

## S4 method for signature 'simList'
documentation(sim, module)

sessInfo(sim)

## S4 method for signature 'simList'
sessInfo(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inputObjects_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="inputObjects_+3A_module">module</code></td>
<td>
<p>Character vector of module name(s)</p>
</td></tr>
<tr><td><code id="inputObjects_+3A_path">path</code></td>
<td>
<p>The path to the module., i.e., the <code>modulePath</code>.
Only relevant if <code>sim</code> not supplied.</p>
</td></tr>
<tr><td><code id="inputObjects_+3A_modulepath">modulePath</code></td>
<td>
<p>That path where <code>module</code> can be found. If set already
using <code>setPaths</code>, it will use that. This will be ignored if <code>sim</code>
is supplied and is required if <code>sim</code> not supplied</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# set modulePath
setPaths(modulePath = getSampleModules(tempdir()))
# use Require and reqdPkgs
pkgs &lt;- reqdPkgs(module = c("caribouMovement", "randomLandscapes", "fireSpread"))

</code></pre>

<hr>
<h2 id='inputs'>Simulation inputs</h2><span id='topic+inputs'></span><span id='topic+simList-accessors-inout'></span><span id='topic+inputs+2CsimList-method'></span><span id='topic+inputs+3C-'></span><span id='topic+inputs+3C-+2CsimList-method'></span><span id='topic+inputArgs'></span><span id='topic+inputArgs+2CsimList-method'></span><span id='topic+inputArgs+3C-'></span><span id='topic+inputArgs+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>inputs</code> slots in a <code>simList</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inputs(sim)

## S4 method for signature 'simList'
inputs(sim)

inputs(sim) &lt;- value

## S4 replacement method for signature 'simList'
inputs(sim) &lt;- value

inputArgs(sim)

## S4 method for signature 'simList'
inputArgs(sim)

inputArgs(sim) &lt;- value

## S4 replacement method for signature 'simList'
inputArgs(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inputs_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="inputs_+3A_value">value</code></td>
<td>
<p>The object to be stored at the slot. See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are one of three mechanisms to add the information about which input files
to load in a <code>spades</code> call.
</p>

<ol>
<li><p> As arguments to a <code>simInit</code> call. Specifically, <code>inputs</code> or <code>outputs</code>.
See <code>?simInit</code>.
</p>
</li>
<li><p> With the <code>outputs(simList)</code> function call.
</p>
</li>
<li><p> By adding a function called <code>.inputObjects</code> inside a module, which will be executed
during the <code>simInit</code> call. This last way is the most &quot;modular&quot; way to create
default data sets for your model.
</p>
</li></ol>

<p>See below for more details.
</p>


<h3>Value</h3>

<p>Returns or sets the value(s) of the <code>input</code> or <code>output</code> slots
in the <code>simList</code> object.
</p>


<h3>inputs function or argument in <code>simInit</code></h3>

<p><code>inputs</code> accepts a data.frame, with up to 7 columns.
Columns are:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>file</code> </td><td style="text-align: left;"> required, a character string indicating the file path. There is no
default.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>objectName</code> </td><td style="text-align: left;"> optional, character string indicating the name of the object
that the loaded file will be assigned to in the <code>simList</code>. This object
can therefore be accessed with <code>sim$xxx</code> in any module, where
<code>objectName = "xxx"</code>. Defaults to the filename without file extension or
directory information.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>fun</code> </td><td style="text-align: left;"> optional, a character string indicating the function to use to
load that file. Defaults to the known extensions in <code>SpaDES</code> (found by
examining <code>.fileExtensions()</code>). The <code>package</code> and <code>fun</code> can be
jointly specified here as <code>"packageName::functionName"</code>, e.g.,
<code>"terra::rast"</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>package</code> </td><td style="text-align: left;"> optional character string indicating the package in
which to find the <code>fun</code>);</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>loadTime</code> </td><td style="text-align: left;"> optional numeric, indicating when in simulation time the file
should be loaded. The default is the highest priority at <code>start(sim)</code>,
i.e., at the very start. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>interval</code> </td><td style="text-align: left;"> optional numeric, indicating at what interval should this same
exact file  be reloaded from disk, e.g,. 10 would mean every 10 time units. The
default is NA or no interval, i.e, load the file only once as described in
<code>loadTime</code> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>arguments</code> </td><td style="text-align: left;"> is a list of lists of named arguments, one list for each
<code>fun</code>. For example, if <code>fun="raster"</code>, <code>arguments = list(native = TRUE)</code>
will pass the argument "native = TRUE" to raster.  If there is only one list,
then it is assumed to apply to all files and will be recycled as per normal R
rules of recycling for each <code>fun</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Currently, only <code>file</code> is required. All others will be filled with defaults
if not specified.
</p>
<p>See the modules vignette for more details (<code>browseVignettes("SpaDES.core")</code>).
</p>


<h3><code>.inputObjects</code> function placed inside module</h3>

<p>Any code placed inside a function called <code>.inputObjects</code> will be run during
<code>simInit()</code> for the purpose of creating any objects required by this module,
i.e., objects  identified in the <code>inputObjects</code> element of <code>defineModule</code>.
This is useful if there is something required before simulation to produce the module
object dependencies, including such things as downloading default datasets, e.g.,
<code>downloadData('LCC2005', modulePath(sim))</code>.
Nothing should be created here that does not create an named object in <code>inputObjects</code>.
Any other initiation procedures should be put in the &quot;init&quot; <code>eventType</code> of the <code>doEvent</code> function.
Note: the module developer can use <code>sim$.userSuppliedObjNames</code> inside the function to
selectively skip unnecessary steps because the user has provided those <code>inputObjects</code> in the
<code>simInit</code> call. e.g., the following code would look to see if the user had passed <code>defaultColor</code>
into during <code>simInit</code>. If the user had done this, then this function would not override
that value with 'red'. If the user has not passed in a value for <code>defaultColor</code>, then
the module will get it here:
</p>
<p><code>if (!('defaultColor' %in% sim$.userSuppliedObjNames)) {
 sim$defaultColor &lt;- 'red'
}</code>
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.2 on loading and saving.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#######################
# inputs
#######################

# Start with a basic empty simList
sim &lt;- simInit()

test &lt;- 1:10
tmpdir &lt;- file.path(tempdir(), "inputs") |&gt; checkPath(create = TRUE)
tmpFile &lt;- file.path(tmpdir, "test.rds")
saveRDS(test, file = tmpFile)
inputs(sim) &lt;- data.frame(file = tmpFile) # using only required column, "file"
inputs(sim) # see that it is not yet loaded, but when it is scheduled to be loaded
simOut &lt;- spades(sim)
inputs(simOut) # confirm it was loaded
simOut$test

# can put data.frame for inputs directly inside simInit call
allTifs &lt;- dir(getMapPath(tempdir()), full.names = TRUE)

# next: .objectNames are taken from the filenames (without the extension)
# This will load all 5 tifs in the SpaDES sample directory, using
#   the rast fuction in the terra package, all at time = 0
sim &lt;- simInit(
  inputs = data.frame(
    files = allTifs,
    functions = "rast",
    package = "terra",
    loadTime = 0,
    stringsAsFactors = FALSE)
)

##############################
#A fully described inputs object, including arguments:
files &lt;- dir(getMapPath(tempdir()), full.names = TRUE)

# arguments must be a list of lists. This may require I() to keep it as a list
#   once it gets coerced into the data.frame.
# arguments = I(rep(list(native = TRUE), length(files)))
filelist &lt;- data.frame(
  objectName = paste0("Maps", 1:5),
  files = files,
  functions = "terra::rast",
  # arguments = arguments,
  loadTime = 0,
  intervals = c(rep(NA, length(files) - 1), 10)
)
inputs(sim) &lt;- filelist
spades(sim)

# Example showing loading multiple objects from global environment onto the
#   same object in the simList, but at different load times
a1 &lt;- 1
a2 &lt;- 2
# Note arguments must be a list of NROW(inputs), with each element itself being a list,
#  which is passed to do.call(fun[x], arguments[[x]]), where x is row number, one at a time
args &lt;- lapply(1:2, function(x) {
               list(x = paste0("a", x),
                    envir = environment()) # may be necessary to specify in which envir a1, a2
                                           # are located, if not in an interactive session
               })
inputs &lt;- data.frame(objectName = "a", loadTime = 1:2, fun = "base::get", arguments = I(args))
a &lt;- simInit(inputs = inputs, times = list(start = 0, end = 1))
a &lt;- spades(a)
identical(a1, a$a)

end(a) &lt;- 3
a &lt;- spades(a) # different object (a2) loaded onto a$a
identical(a2, a$a)

# Clean up after
unlink(tmpdir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='inSeconds'>Convert time units</h2><span id='topic+inSeconds'></span><span id='topic+convertTimeunit'></span><span id='topic+.spadesTimes'></span><span id='topic+spadesTimes'></span><span id='topic+checkTimeunit'></span><span id='topic+checkTimeunit+2Ccharacter+2Cmissing-method'></span><span id='topic+checkTimeunit+2Ccharacter+2Cenvironment-method'></span>

<h3>Description</h3>

<p>Current pre-defined units are found within the <code>spadesTimes()</code> function.
The user can define a new unit.
The unit name can be anything, but the function definition must be of the
form <code>"dunitName"</code>, e.g., <code>dyear</code> or <code>dfortnight</code>.
The unit name is the part without the <code>d</code> and the function name
definition includes the <code>d</code>.
This new function, e.g., <code>dfortnight &lt;- function(x) lubridate::duration(dday(14))</code>
can be placed anywhere in the search path or in a module
(you will need to declare <code>"lubridate"</code> in your <code>pkgDeps</code> in the metadata).
</p>
<p>This function takes a numeric with a &quot;unit&quot; attribute and converts it to
another numeric with a different time attribute.
If the units passed to argument <code>units</code> are the same as
<code>attr(time, "unit")</code>, then it simply returns input <code>time</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inSeconds(unit, envir, skipChecks = FALSE)

convertTimeunit(time, unit, envir, skipChecks = FALSE)

.spadesTimes

spadesTimes()

checkTimeunit(unit, envir)

## S4 method for signature 'character,missing'
checkTimeunit(unit, envir)

## S4 method for signature 'character,environment'
checkTimeunit(unit, envir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inSeconds_+3A_unit">unit</code></td>
<td>
<p>Character. One of the time units used in <code>SpaDES</code> or user
defined time unit, given as the unit name only. See details.</p>
</td></tr>
<tr><td><code id="inSeconds_+3A_envir">envir</code></td>
<td>
<p>An environment. This is where to look up the function definition for
the time unit. See details.</p>
</td></tr>
<tr><td><code id="inSeconds_+3A_skipchecks">skipChecks</code></td>
<td>
<p>For speed, the internal checks for classes and missingness can be skipped.
Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="inSeconds_+3A_time">time</code></td>
<td>
<p>Numeric. With a unit attribute, indicating the time unit of the
input numeric. See Details.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 12.
</p>


<h3>Details</h3>

<p>Because of R scoping, if <code>envir</code> is a <code>simList</code> environment, then
this function will search there first, then up the current <code>search()</code> path.
Thus, it will find a user defined or module defined unit before a SpaDES unit.
This means that a user can override the <code>dyear</code> given in SpaDES, for example,
which is 365.25 days, with <code>dyear &lt;- function(x) lubridate::duration(dday(365))</code>.
</p>
<p>If <code>time</code> has no <code>unit</code> attribute, then it is assumed to be
seconds.
</p>


<h3>Value</h3>

<p>A numeric vector of length 1, with <code>unit</code> attribute set to &quot;seconds&quot;.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty &amp; Eliot McIntire
</p>
<p>Eliot McIntire
</p>

<hr>
<h2 id='loadSimList'>Load a saved <code>simList</code> and ancillary files</h2><span id='topic+loadSimList'></span><span id='topic+unzipSimList'></span>

<h3>Description</h3>

<p>Loading a <code>simList</code> from file can be problematic as there are non-standard
objects that must be rebuilt. See description in <code><a href="#topic+saveSimList">saveSimList()</a></code> for details.
</p>
<p><code>unzipSimList</code> is a convenience wrapper around <code>unzip</code> and <code>loadSimList</code> where
all the files are correctly identified and passed to
<code>loadSimList(..., otherFiles = xxx)</code>. See <a href="#topic+zipSimList">zipSimList</a> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadSimList(
  filename,
  projectPath = getwd(),
  tempPath = tempdir(),
  paths = NULL,
  otherFiles = "",
  verbose = getOption("reproducible.verbose")
)

unzipSimList(zipfile, load = TRUE, paths = getPaths(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadSimList_+3A_filename">filename</code></td>
<td>
<p>Character giving the name of a saved simulation file.
Currently, only file types <code>.qs</code> or <code>.rds</code> are supported.</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_projectpath">projectPath</code></td>
<td>
<p>An optional path for the project within which the <code>simList</code>
exists. This is used to identify relative paths for saving and loading the <code>simList</code>.</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_temppath">tempPath</code></td>
<td>
<p>A character string specifying the new base directory for the
temporary paths maintained in a <code>simList</code>.</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_paths">paths</code></td>
<td>
<p>A list of character vectors for all the <code>simList</code> paths. When
loading a <code>simList</code>, this will replace the paths of everything to
these new paths. Experimental still.</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_otherfiles">otherFiles</code></td>
<td>
<p>A character vector of (absolute) file names locating each of the
existing file-backed <code style="white-space: pre;">&#8288;Raster*&#8288;</code> files that are the real paths for the possibly
incorrect paths in <code>Filenames(sim)</code> if the the <code>file</code> being read in is from
a different computer, path, or drive. This could be the output from <code>unzipSimList</code>
(which is calls <code>loadSimList</code> internally, passing the unzipped filenames)</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_verbose">verbose</code></td>
<td>
<p>Numeric, -1 silent (where possible), 0 being very quiet,
1 showing more messaging, 2 being more messaging, etc.
Default is 1. Above 3 will output much more information about the internals of
Caching, which may help diagnose Caching challenges. Can set globally with an
option, e.g., <code style="white-space: pre;">&#8288;options('reproducible.verbose' = 0) to reduce to minimal&#8288;</code></p>
</td></tr>
<tr><td><code id="loadSimList_+3A_zipfile">zipfile</code></td>
<td>
<p>Filename of a zipped <code>simList</code></p>
</td></tr>
<tr><td><code id="loadSimList_+3A_load">load</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the default, then the <code>simList</code> will
also be loaded into R.</p>
</td></tr>
<tr><td><code id="loadSimList_+3A_...">...</code></td>
<td>
<p>passed to <code>unzip</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>cache</code> is used, it is likely that it should be trimmed before
zipping, to include only cache elements that are relevant.
</p>


<h3>Value</h3>

<p>For <code><a href="#topic+loadSimList">loadSimList()</a></code>, a <code>simList</code> object.
For <code><a href="#topic+unzipSimList">unzipSimList()</a></code>, either a character vector of file names unzipped
(if <code>load = FALSE</code>), or a <code>simList</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveSimList">saveSimList()</a></code>, <code><a href="#topic+zipSimList">zipSimList()</a></code>
</p>

<hr>
<h2 id='makeMemoisable.simList'>Make <code>simList</code> correctly work with <code>memoise</code></h2><span id='topic+makeMemoisable.simList'></span><span id='topic+unmakeMemoisable.simList_'></span>

<h3>Description</h3>

<p>Because of the environment slot, <code>simList</code> objects don't correctly
memoise a <code>simList</code>.
This method for <code>simList</code> converts the object to a <code>simList_</code> first.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'simList'
makeMemoisable(x)

## S3 method for class 'simList_'
unmakeMemoisable(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeMemoisable.simList_+3A_x">x</code></td>
<td>
<p>An object to make memoisable.
See individual methods in other packages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>simList_</code> object or a <code>simList</code>, in the case of <code>unmakeMemoisable</code>.
</p>


<h3>See Also</h3>

<p><code><a href="reproducible.html#topic+exportedMethods">reproducible::makeMemoisable()</a></code>
</p>

<hr>
<h2 id='maxTimeunit'>Determine the largest timestep unit in a simulation</h2><span id='topic+maxTimeunit'></span><span id='topic+maxTimeunit+2CsimList-method'></span>

<h3>Description</h3>

<p>Determine the largest timestep unit in a simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maxTimeunit(sim)

## S4 method for signature 'simList'
maxTimeunit(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maxTimeunit_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The timeunit as a character string. This defaults to <code>NA</code> if
none of the modules has explicit units.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>

<hr>
<h2 id='memoryUseThisSession'>Estimate memory used with <code>system("ps")</code></h2><span id='topic+memoryUseThisSession'></span><span id='topic+memoryUse'></span>

<h3>Description</h3>

<p>This will give a slightly different estimate than <code>pryr::mem_used</code>, which uses <code>gc()</code> internally.
The purpose of this function is to allow continuous monitoring, external to the R session.
Normally, this is run in a different session.
</p>
<p>This will only work if the user has specified before running the <code>spades</code> call,
set the interval, in seconds, that <code>ps</code> is run.
E.g., <code>options("spades.memoryUseInterval" = 0.5)</code>, will assess memory use every 0.5 seconds.
The default is <code>0</code>, meaning no interval, &quot;off&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>memoryUseThisSession(thisPid)

memoryUse(sim, max = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="memoryUseThisSession_+3A_thispid">thisPid</code></td>
<td>
<p>Numeric or integer, the <code>PID</code> of the process.
If omitted, it will be found with <code>Sys.getpid()</code>.</p>
</td></tr>
<tr><td><code id="memoryUseThisSession_+3A_sim">sim</code></td>
<td>
<p>A completed <code>simList</code></p>
</td></tr>
<tr><td><code id="memoryUseThisSession_+3A_max">max</code></td>
<td>
<p>Logical. If TRUE, then it the return value will be summarized by
module/event, showing the maximum memory used. If <code>FALSE</code>, then
the raw memory used during each event will be shown.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>estimated memory use in MiB
</p>
<p><code>data.table</code> summarizing the estimated memory use (in MiB) for each event type,
for each module, during the simulation.
</p>


<h3>Note</h3>

<p>The suggested <code>future</code> and <code>future.callr</code> packages must be available.
</p>


<h3>See Also</h3>

<p>The <code>vignette("iv-modules")</code>
</p>

<hr>
<h2 id='minTimeunit'>Determine the smallest timeunit in a simulation</h2><span id='topic+minTimeunit'></span><span id='topic+minTimeunit+2CsimList-method'></span><span id='topic+minTimeunit+2Clist-method'></span>

<h3>Description</h3>

<p>When modules have different timeunit, SpaDES automatically takes the smallest
(e.g., &quot;second&quot;) as the unit for a simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minTimeunit(sim)

## S4 method for signature 'simList'
minTimeunit(sim)

## S4 method for signature 'list'
minTimeunit(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="minTimeunit_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The timeunit as a character string. This defaults to &quot;second&quot; if
none of the modules has explicit units.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>

<hr>
<h2 id='moduleCodeFiles'>Extract the full file paths for R source code</h2><span id='topic+moduleCodeFiles'></span>

<h3>Description</h3>

<p>This can be used e.g., for Caching, to identify which files have changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleCodeFiles(paths, modules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleCodeFiles_+3A_paths">paths</code></td>
<td>
<p>An optional named list with up to 4 named elements,
<code>modulePath</code>, <code>inputPath</code>, <code>outputPath</code>, and <code>cachePath</code>.
See details. NOTE: Experimental feature now allows for multiple <code>modulePath</code>s
to be specified in a character vector. The modules will be searched for sequentially
in the first <code>modulePath</code>, then if it doesn't find it, in the second etc.</p>
</td></tr>
<tr><td><code id="moduleCodeFiles_+3A_modules">modules</code></td>
<td>
<p>A named list of character strings specifying the names of modules to be loaded
for the simulation.
Note: the module name should correspond to the R source file from which the module is loaded.
Example: a module named &quot;caribou&quot; will be sourced form the file &lsquo;<span class="file">caribou.R</span>&rsquo;,
located at the specified <code>modulePath(simList)</code> (see below).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of file paths.
</p>

<hr>
<h2 id='moduleCoverage'>Calculate module coverage of unit tests</h2><span id='topic+moduleCoverage'></span>

<h3>Description</h3>

<p>Calculate the test coverage by unit tests for the module and its functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleCoverage(mod, modulePath = "..")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleCoverage_+3A_mod">mod</code></td>
<td>
<p>Character string. The module's name. Default is <code>basename(getwd())</code></p>
</td></tr>
<tr><td><code id="moduleCoverage_+3A_modulepath">modulePath</code></td>
<td>
<p>Character string. The path to the module directory
(default is &quot;..&quot;, i.e., one level up from working directory).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a list of two coverage objects and two data.table objects.
The two coverage objects are named <code>moduleCoverage</code> and <code>functionCoverage</code>.
The <code>moduleCoverage</code> object contains the percent value of unit test coverage
for the module.
The <code>functionCoverage</code> object contains percentage values for unit test
coverage for each function defined in the module.
Please use <code>covr::report()</code> to view the coverage information.
Two data.tables give the information of all the tested and untested functions
in the module.
</p>


<h3>Note</h3>

<p>When running this function, the test files must be strictly placed in
the &lsquo;<span class="file">tests/testthat/</span>&rsquo; directory under module path.
To automatically generate this folder, please set <code>unitTests = TRUE</code>
when creating a new module using <code><a href="#topic+newModule">newModule()</a></code>.
To accurately test your module, the test filename must follow the format
<code>test-functionName.R</code>.
</p>


<h3>Author(s)</h3>

<p>Yong Luo
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newModule">newModule()</a></code>.
</p>

<hr>
<h2 id='moduleDefaults'>Defaults values used in <code>defineModule</code></h2><span id='topic+moduleDefaults'></span>

<h3>Description</h3>

<p>Where individual elements are missing in <code>defineModule</code>, these defaults will be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleDefaults
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 13.
</p>


<h3>Value</h3>

<p>named list of default module metadata
</p>

<hr>
<h2 id='moduleDiagram'>Simulation module dependency diagram</h2><span id='topic+moduleDiagram'></span><span id='topic+moduleDiagram+2CsimList+2Ccharacter+2Clogical-method'></span><span id='topic+moduleDiagram+2CsimList+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Create a network diagram illustrating the simplified module dependencies of a
simulation. Offers a less detailed view of specific objects than does
plotting the <code>depsEdgeList</code> directly with <code><a href="#topic+objectDiagram">objectDiagram()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleDiagram(sim, type, showParents = TRUE, ...)

## S4 method for signature 'simList,character,logical'
moduleDiagram(sim, type = "plot", showParents = TRUE, ...)

## S4 method for signature 'simList,ANY,ANY'
moduleDiagram(sim, type, showParents = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleDiagram_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object (typically corresponding to a
completed simulation).</p>
</td></tr>
<tr><td><code id="moduleDiagram_+3A_type">type</code></td>
<td>
<p>Character string, either <code>"rgl"</code> for <code>igraph::rglplot</code>
or <code>"tk"</code> for <code>igraph::tkplot</code>, <code>"Plot"</code> to use <code>quickPlot::Plot()</code>
or <code>"plot"</code> to use <code>base::plot()</code>, the default.</p>
</td></tr>
<tr><td><code id="moduleDiagram_+3A_showparents">showParents</code></td>
<td>
<p>Logical. If TRUE, then any children that are grouped into parent
modules will be grouped together by coloured blobs. Internally,
this is calling <code><a href="#topic+moduleGraph">moduleGraph()</a></code>. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="moduleDiagram_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to plotting function specified by <code>type</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invoked for its side effect of plotting the module dependency diagram.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="igraph.html#topic+igraph">igraph()</a></code>, <code><a href="#topic+moduleGraph">moduleGraph()</a></code> for a version that accounts for
parent and children module structure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
    requireNamespace("NLMR", quietly = TRUE)) {
library(igraph)
times &lt;- list(start = 0, end = 6, "month")
parameters &lt;- list(
  .globals = list(stackName = "landscape"),
  caribouMovement = list(
    .saveObjects = "caribou",
    .saveInitialTime = 1, .saveInterval = 1
  ),
  randomLandscapes = list(.plotInitialTime = NA, nx = 20, ny = 20))

modules &lt;- list("randomLandscapes", "caribouMovement")
paths &lt;- list(
  modulePath = getSampleModules(tempdir())
)

# Set some options so example runs faster
opts &lt;- options(spades.moduleCodeChecks = FALSE, spades.loadReqdPkgs = FALSE)
sim &lt;- simInit(times = times, params = parameters, modules = modules,
               paths = paths)
options(opts)
moduleDiagram(sim)
# Can also use default base::plot
modDia &lt;- depsGraph(sim, plot = TRUE)
# See ?plot.igraph
plot(modDia, layout = layout_as_star)

# Or for more control - here, change the label "_INPUT_" to "DATA"
edgeList &lt;- depsEdgeList(sim)
edgeList &lt;- edgeList[, list(from, to)]
edgeList[from == "_INPUT_", from := "Data"]
edgeList[to == "_INPUT_", to := "Data"]
edgeList &lt;- unique(edgeList)
ig &lt;- graph_from_data_frame(edgeList[, list(from, to)])
plot(ig)
}


</code></pre>

<hr>
<h2 id='moduleGraph'>Build a module dependency graph</h2><span id='topic+moduleGraph'></span><span id='topic+moduleGraph+2CsimList+2Clogical-method'></span><span id='topic+moduleGraph+2CsimList+2Cmissing-method'></span>

<h3>Description</h3>

<p>This is still experimental, but this will show the hierarchical structure of
parent and children modules and return a list with an <code>igraph</code> object
and an <code>igraph</code> communities object, showing the groups.
Currently only tested with relatively simple structures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleGraph(sim, plot, ...)

## S4 method for signature 'simList,logical'
moduleGraph(sim, plot, ...)

## S4 method for signature 'simList,missing'
moduleGraph(sim, plot, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleGraph_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="moduleGraph_+3A_plot">plot</code></td>
<td>
<p>Logical indicating whether the edgelist (and subsequent graph)
will be used for plotting. If <code>TRUE</code>, duplicated rows
(i.e., multiple object dependencies between modules) are removed
so that only a single arrow is drawn connecting the modules.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="moduleGraph_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>Plot</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 2 elements, an <code><a href="igraph.html#topic+igraph">igraph()</a></code> object and an <code>igraph</code> communities object.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><code><a href="#topic+moduleDiagram">moduleDiagram()</a></code>
</p>

<hr>
<h2 id='moduleMetadata'>Parse and extract module metadata</h2><span id='topic+moduleMetadata'></span><span id='topic+moduleMetadata+2Cmissing+2Ccharacter+2Ccharacter-method'></span><span id='topic+moduleMetadata+2Cmissing+2Ccharacter+2Cmissing-method'></span><span id='topic+moduleMetadata+2CANY+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Parse and extract module metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleMetadata(
  sim,
  module,
  path = getOption("spades.modulePath", NULL),
  defineModuleListItems = c("name", "description", "keywords", "childModules", "authors",
    "version", "spatialExtent", "timeframe", "timeunit", "citation", "documentation",
    "reqdPkgs", "parameters", "inputObjects", "outputObjects")
)

## S4 method for signature 'missing,character,character'
moduleMetadata(module, path, defineModuleListItems)

## S4 method for signature 'missing,character,missing'
moduleMetadata(module, defineModuleListItems)

## S4 method for signature 'ANY,ANY,ANY'
moduleMetadata(
  sim,
  module,
  path = getOption("spades.modulePath", NULL),
  defineModuleListItems = c("name", "description", "keywords", "childModules", "authors",
    "version", "spatialExtent", "timeframe", "timeunit", "citation", "documentation",
    "reqdPkgs", "parameters", "inputObjects", "outputObjects")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleMetadata_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object, generally produced by <code>simInit</code>.</p>
</td></tr>
<tr><td><code id="moduleMetadata_+3A_module">module</code></td>
<td>
<p>Character string. Your module's name.</p>
</td></tr>
<tr><td><code id="moduleMetadata_+3A_path">path</code></td>
<td>
<p>Character string specifying the file path to modules directory.
Default is to use the <code>spades.modulePath</code> option.</p>
</td></tr>
<tr><td><code id="moduleMetadata_+3A_definemodulelistitems">defineModuleListItems</code></td>
<td>
<p>A vector of metadata entries to return values
about.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of module metadata, matching the structure in <code><a href="#topic+defineModule">defineModule()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+defineModule">defineModule()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## turn off code checking -- don't need it here
opts &lt;- options("spades.moduleCodeChecks" = FALSE,
                "spades.useRequire" = FALSE)

path &lt;- getSampleModules(tempdir())
sampleModules &lt;- dir(path)
x &lt;- moduleMetadata(sampleModules[3], path = path)

## using simList
if (require("SpaDES.tools", quietly = TRUE)) {
   mySim &lt;- simInit(
      times = list(start = 2000.0, end = 2001.0, timeunit = "year"),
      params = list(
        .globals = list(stackName = "landscape")
      ),
      modules = list("caribouMovement"),
      paths = list(modulePath = path)
   )
   moduleMetadata(sim = mySim)
}

# turn code checking back on -- don't need it here
options(opts)
</code></pre>

<hr>
<h2 id='moduleParams'>Extract a module's parameters, inputs, or outputs</h2><span id='topic+moduleParams'></span><span id='topic+moduleParams+2Ccharacter+2Ccharacter-method'></span><span id='topic+moduleInputs'></span><span id='topic+moduleInputs+2Ccharacter+2Ccharacter-method'></span><span id='topic+moduleOutputs'></span><span id='topic+moduleOutputs+2Ccharacter+2Ccharacter-method'></span>

<h3>Description</h3>

<p>These are more or less wrappers around <code>moduleMetadata</code>, with the exception
that extraneous spaces and End-Of-Line characters will be removed from the
<code>desc</code> arguments in <code>defineParameters</code>, <code>defineInputs</code>, and
<code>defineOutputs</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleParams(module, path)

## S4 method for signature 'character,character'
moduleParams(module, path)

moduleInputs(module, path)

## S4 method for signature 'character,character'
moduleInputs(module, path)

moduleOutputs(module, path)

## S4 method for signature 'character,character'
moduleOutputs(module, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleParams_+3A_module">module</code></td>
<td>
<p>Character string. Your module's name.</p>
</td></tr>
<tr><td><code id="moduleParams_+3A_path">path</code></td>
<td>
<p>Character string specifying the file path to modules directory.
Default is to use the <code>spades.modulePath</code> option.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code>
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+moduleMetadata">moduleMetadata()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## easily include these tables in Rmd files using knitr
path &lt;- getSampleModules(tempdir())
sampleModules &lt;- dir(path)

p &lt;- moduleParams(sampleModules[3], path = path)
i &lt;- moduleInputs(sampleModules[3], path = path)
o &lt;- moduleOutputs(sampleModules[3], path = path)

knitr::kable(p)
knitr::kable(i)
knitr::kable(o)


</code></pre>

<hr>
<h2 id='modules'>Simulation modules and dependencies</h2><span id='topic+modules'></span><span id='topic+simList-accessors-modules'></span><span id='topic+modules+2CsimList-method'></span><span id='topic+modules+3C-'></span><span id='topic+modules+3C-+2CsimList-method'></span><span id='topic+depends'></span><span id='topic+depends+2CsimList-method'></span><span id='topic+depends+3C-'></span><span id='topic+depends+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>depends</code> and <code>modules</code> slots in a <code>simList</code> object.
These are included for advanced users.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+depends">depends()</a></code> </td><td style="text-align: left;"> List of simulation module dependencies. (advanced) </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+modules">modules()</a></code> </td><td style="text-align: left;"> List of simulation modules to be loaded. (advanced) </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+inputs">inputs()</a></code> </td><td style="text-align: left;"> List of loaded objects used in simulation. (advanced) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Usage</h3>

<pre><code class='language-R'>modules(sim, hidden = FALSE)

## S4 method for signature 'simList'
modules(sim, hidden = FALSE)

modules(sim) &lt;- value

## S4 replacement method for signature 'simList'
modules(sim) &lt;- value

depends(sim)

## S4 method for signature 'simList'
depends(sim)

depends(sim) &lt;- value

## S4 replacement method for signature 'simList'
depends(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modules_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="modules_+3A_hidden">hidden</code></td>
<td>
<p>Logical. If TRUE, show the default core modules.</p>
</td></tr>
<tr><td><code id="modules_+3A_value">value</code></td>
<td>
<p>The object to be stored at the slot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, only get and set methods are defined. Subset methods are not.
</p>


<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.7 on Modules and dependencies.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='moduleVersion'>Parse and extract a module's version</h2><span id='topic+moduleVersion'></span><span id='topic+moduleVersion+2Ccharacter+2Ccharacter+2Cmissing-method'></span><span id='topic+moduleVersion+2Ccharacter+2Cmissing+2Cmissing-method'></span><span id='topic+moduleVersion+2Ccharacter+2Cmissing+2CsimList-method'></span>

<h3>Description</h3>

<p>Parse and extract a module's version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moduleVersion(module, path, sim, envir = NULL)

## S4 method for signature 'character,character,missing'
moduleVersion(module, path, envir)

## S4 method for signature 'character,missing,missing'
moduleVersion(module, envir)

## S4 method for signature 'character,missing,simList'
moduleVersion(module, sim, envir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moduleVersion_+3A_module">module</code></td>
<td>
<p>Character string. Your module's name.</p>
</td></tr>
<tr><td><code id="moduleVersion_+3A_path">path</code></td>
<td>
<p>Character string specifying the file path to modules directory.
Default is to use the <code>spades.modulePath</code> option.</p>
</td></tr>
<tr><td><code id="moduleVersion_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object, generally produced by <code>simInit</code>.</p>
</td></tr>
<tr><td><code id="moduleVersion_+3A_envir">envir</code></td>
<td>
<p>Optional environment in which to store parsed code. This may be
useful if the same file is being parsed multiple times. This
function will check in that environment for the parsed file before
parsing again. If the <code>envir</code> is transient, then this will have no effect.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>numeric_version</code> indicating the module's version.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+moduleMetadata">moduleMetadata()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># using filepath
path &lt;- getSampleModules(tempdir())
moduleVersion("caribouMovement", path)

# using simList
options("spades.useRequire" = FALSE)
if (require("SpaDES.tools", quietly = TRUE)) {
   mySim &lt;- simInit(
      times = list(start = 2000.0, end = 2002.0, timeunit = "year"),
      params = list(
        .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
      ),
      modules = list("caribouMovement"),
      paths = list(modulePath = path)
   )
   moduleVersion("caribouMovement", sim = mySim)
}
</code></pre>

<hr>
<h2 id='newModule'>Create new module from template</h2><span id='topic+newModule'></span><span id='topic+newModule+2Ccharacter+2Ccharacter-method'></span><span id='topic+newModule+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Generate a skeleton for a new SpaDES module, a template for a
documentation file, a citation file, a license file, a &lsquo;<span class="file">README.md</span>&rsquo; file,
and a folder that contains unit tests information.
The <code>newModuleDocumentation</code> will not generate the module file, but will
create the other files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newModule(name, path, ...)

## S4 method for signature 'character,character'
newModule(name, path, ...)

## S4 method for signature 'character,missing'
newModule(name, path, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newModule_+3A_name">name</code></td>
<td>
<p>Character string specifying the name of the new module.</p>
</td></tr>
<tr><td><code id="newModule_+3A_path">path</code></td>
<td>
<p>Character string. Subdirectory in which to place the new module code file.
The default is the current working directory.</p>
</td></tr>
<tr><td><code id="newModule_+3A_...">...</code></td>
<td>
<p>Additional arguments. Currently, only the following are supported:<br /><br />
</p>

<dl>
<dt><code>children</code></dt><dd><p>Required when <code>type = "parent"</code>. A character vector
specifying the names of child modules.</p>
</dd>
<dt><code>open</code></dt><dd><p>Logical. Should the new module file be opened after creation?
Default <code>TRUE</code>.</p>
</dd>
<dt><code>type</code></dt><dd><p>Character string specifying one of <code>"child"</code> (default),
or <code>"parent"</code>.</p>
</dd>
<dt><code>unitTests</code></dt><dd><p>Logical. Should the new module include unit test files?
Default <code>TRUE</code>. Unit testing relies on the <span class="pkg">testthat</span> package.</p>
</dd>
<dt><code>useGitHub</code></dt><dd><p>Logical. Is module development happening on GitHub?
Default <code>TRUE</code>.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>All files will be created within a subdirectory named <code>name</code> within the
<code>path</code>:
</p>
<pre>
  &lt;path&gt;/
    |_ &lt;name&gt;/
    |_ R/               # contains additional module R scripts
    |_ data/            # directory for all included data
      |_ CHECKSUMS.txt  # contains checksums for data files
    |_ tests/           # contains unit tests for module code
    |_ citation.bib     # bibtex citation for the module
    |_ LICENSE          # describes module's legal usage
    |_ README.md        # provide overview of key aspects
    |_ &lt;name&gt;.R         # module code file (incl. metadata)
    |_ &lt;name&gt;.Rmd       # documentation, usage info, etc.
</pre>


<h3>Value</h3>

<p>Nothing is returned. The new module file is created at
&lsquo;<span class="file">path/name.R</span>&rsquo;, as well as ancillary files for documentation, citation,
&lsquo;<span class="file">LICENSE</span>&rsquo;, &lsquo;<span class="file">README</span>&rsquo;, and &lsquo;<span class="file">tests</span>&rsquo; directory.
</p>


<h3>Note</h3>

<p>On Windows there is currently a bug in RStudio that prevents the editor
from opening when <code>file.edit</code> is called.
Similarly, in RStudio on macOS, there is an issue opening files where they
are opened in an overlaid window rather than a new tab.
<code>file.edit</code> does work if the user types it at the command prompt.
A message with the correct lines to copy and paste is provided.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>See Also</h3>

<p>Other module creation helpers: 
<code><a href="#topic+newModuleCode">newModuleCode</a>()</code>,
<code><a href="#topic+newModuleDocumentation">newModuleDocumentation</a>()</code>,
<code><a href="#topic+newModuleTests">newModuleTests</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  tmpdir &lt;- tempdir2("exampleNewModule")
  ## create a "myModule" module in the "modules" subdirectory.
  newModule("myModule", tmpdir)

  ## create a new parent module in the "modules" subdirectory.
  newModule("myParentModule", tmpdir, type = "parent", children = c("child1", "child2"))
  unlink(tmpdir, recursive = TRUE)


</code></pre>

<hr>
<h2 id='newModuleCode'>Create new module code file</h2><span id='topic+newModuleCode'></span><span id='topic+newModuleCode+2Ccharacter+2Ccharacter+2Clogical+2Ccharacter+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Create new module code file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newModuleCode(name, path, open, type, children)

## S4 method for signature 'character,character,logical,character,character'
newModuleCode(name, path, open, type, children)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newModuleCode_+3A_name">name</code></td>
<td>
<p>Character string specifying the name of the new module.</p>
</td></tr>
<tr><td><code id="newModuleCode_+3A_path">path</code></td>
<td>
<p>Character string. Subdirectory in which to place the new module code file.
The default is the current working directory.</p>
</td></tr>
<tr><td><code id="newModuleCode_+3A_open">open</code></td>
<td>
<p>Logical. Should the new module file be opened after creation?
Default <code>TRUE</code> in an interactive session.</p>
</td></tr>
<tr><td><code id="newModuleCode_+3A_type">type</code></td>
<td>
<p>Character string specifying one of <code>"child"</code> (default),
or <code>"parent"</code>.</p>
</td></tr>
<tr><td><code id="newModuleCode_+3A_children">children</code></td>
<td>
<p>Required when <code>type = "parent"</code>. A character vector
specifying the names of child modules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned. Invoked for its side effect of creating new module code files.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p>Other module creation helpers: 
<code><a href="#topic+newModuleDocumentation">newModuleDocumentation</a>()</code>,
<code><a href="#topic+newModuleTests">newModuleTests</a>()</code>,
<code><a href="#topic+newModule">newModule</a>()</code>
</p>

<hr>
<h2 id='newModuleDocumentation'>Create new module documentation</h2><span id='topic+newModuleDocumentation'></span><span id='topic+newModuleDocumentation+2Ccharacter+2Ccharacter+2Clogical+2Ccharacter+2Ccharacter-method'></span><span id='topic+newModuleDocumentation+2Ccharacter+2Cmissing+2Clogical+2CANY+2CANY-method'></span><span id='topic+newModuleDocumentation+2Ccharacter+2Ccharacter+2Cmissing+2CANY+2CANY-method'></span><span id='topic+newModuleDocumentation+2Ccharacter+2Cmissing+2Cmissing+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Create new module documentation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newModuleDocumentation(name, path, open, type, children)

## S4 method for signature 'character,character,logical,character,character'
newModuleDocumentation(name, path, open, type, children)

## S4 method for signature 'character,missing,logical,ANY,ANY'
newModuleDocumentation(name, open)

## S4 method for signature 'character,character,missing,ANY,ANY'
newModuleDocumentation(name, path)

## S4 method for signature 'character,missing,missing,ANY,ANY'
newModuleDocumentation(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newModuleDocumentation_+3A_name">name</code></td>
<td>
<p>Character string specifying the name of the new module.</p>
</td></tr>
<tr><td><code id="newModuleDocumentation_+3A_path">path</code></td>
<td>
<p>Character string. Subdirectory in which to place the new module code file.
The default is the current working directory.</p>
</td></tr>
<tr><td><code id="newModuleDocumentation_+3A_open">open</code></td>
<td>
<p>Logical. Should the new module file be opened after creation?
Default <code>TRUE</code> in an interactive session.</p>
</td></tr>
<tr><td><code id="newModuleDocumentation_+3A_type">type</code></td>
<td>
<p>Character string specifying one of <code>"child"</code> (default),
or <code>"parent"</code>.</p>
</td></tr>
<tr><td><code id="newModuleDocumentation_+3A_children">children</code></td>
<td>
<p>Required when <code>type = "parent"</code>. A character vector
specifying the names of child modules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned. Invoked for its side effect of creating new module code files.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p>Other module creation helpers: 
<code><a href="#topic+newModuleCode">newModuleCode</a>()</code>,
<code><a href="#topic+newModuleTests">newModuleTests</a>()</code>,
<code><a href="#topic+newModule">newModule</a>()</code>
</p>

<hr>
<h2 id='newModuleTests'>Create template testing structures for new modules</h2><span id='topic+newModuleTests'></span><span id='topic+newModuleTests+2Ccharacter+2Ccharacter+2Clogical+2Clogical-method'></span>

<h3>Description</h3>

<p>Create template testing structures for new modules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newModuleTests(name, path, open, useGitHub)

## S4 method for signature 'character,character,logical,logical'
newModuleTests(name, path, open, useGitHub)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newModuleTests_+3A_name">name</code></td>
<td>
<p>Character string specifying the name of the new module.</p>
</td></tr>
<tr><td><code id="newModuleTests_+3A_path">path</code></td>
<td>
<p>Character string. Subdirectory in which to place the new module code file.
The default is the current working directory.</p>
</td></tr>
<tr><td><code id="newModuleTests_+3A_open">open</code></td>
<td>
<p>Logical. Should the new module file be opened after creation?
Default <code>TRUE</code> in an interactive session.</p>
</td></tr>
<tr><td><code id="newModuleTests_+3A_usegithub">useGitHub</code></td>
<td>
<p>Logical indicating whether GitHub will be used.
If <code>TRUE</code> (default), creates suitable configuration files (e.g.,
&lsquo;<span class="file">.gitignore</span>&rsquo;) and configures basic GitHub actions for module code checking.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned. Invoked for its side effect of creating new module test files.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p>Other module creation helpers: 
<code><a href="#topic+newModuleCode">newModuleCode</a>()</code>,
<code><a href="#topic+newModuleDocumentation">newModuleDocumentation</a>()</code>,
<code><a href="#topic+newModule">newModule</a>()</code>
</p>

<hr>
<h2 id='newProgressBar'>Progress bar</h2><span id='topic+newProgressBar'></span><span id='topic+setProgressBar'></span>

<h3>Description</h3>

<p>Shows a progress bar that is scaled to simulation end time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newProgressBar(sim)

setProgressBar(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newProgressBar_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The progress bar object is stored in a separate environment, #' <code>.pkgEnv</code>.
</p>


<h3>Value</h3>

<p>invoked for side effect of creating progress bar
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>

<hr>
<h2 id='newProject'>Create new SpaDES project</h2><span id='topic+newProject'></span><span id='topic+newProject+2Ccharacter+2Ccharacter+2Clogical-method'></span><span id='topic+newProject+2Ccharacter+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Initialize a project with subdirectories &lsquo;<span class="file">cache/</span>&rsquo;, &lsquo;<span class="file">modules/</span>&rsquo;,
&lsquo;<span class="file">inputs/</span>&rsquo;, &lsquo;<span class="file">outputs/</span>&rsquo;, and <code>setPaths</code> accordingly.
If invoked from Rstudio, will also create a new Rstudio project file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newProject(name, path, open)

## S4 method for signature 'character,character,logical'
newProject(name, path, open)

## S4 method for signature 'character,character,missing'
newProject(name, path, open)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newProject_+3A_name">name</code></td>
<td>
<p>project name (name of project directory)</p>
</td></tr>
<tr><td><code id="newProject_+3A_path">path</code></td>
<td>
<p>path to directory in which to create the project directory</p>
</td></tr>
<tr><td><code id="newProject_+3A_open">open</code></td>
<td>
<p>Logical. Should the new project file be opened after creation?
Default <code>TRUE</code> in an interactive session.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invoked for side effect of project file creation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>myProjDir &lt;- newProject("myProject", tempdir())

dir.exists(file.path(myProjDir, "cache"))
dir.exists(file.path(myProjDir, "inputs"))
dir.exists(file.path(myProjDir, "modules"))
dir.exists(file.path(myProjDir, "outputs"))
unlink(myProjDir, recursive = TRUE) ## cleanup
</code></pre>

<hr>
<h2 id='newProjectCode'>Create new module code file</h2><span id='topic+newProjectCode'></span><span id='topic+newProjectCode+2Ccharacter+2Ccharacter+2Clogical-method'></span>

<h3>Description</h3>

<p>Create new module code file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newProjectCode(name, path, open)

## S4 method for signature 'character,character,logical'
newProjectCode(name, path, open = interactive())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newProjectCode_+3A_name">name</code></td>
<td>
<p>project name (name of project directory)</p>
</td></tr>
<tr><td><code id="newProjectCode_+3A_path">path</code></td>
<td>
<p>path to directory in which to create the project directory</p>
</td></tr>
<tr><td><code id="newProjectCode_+3A_open">open</code></td>
<td>
<p>Logical. Should the new project file be opened after creation?
Default <code>TRUE</code> in an interactive session.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invoked for side effect of project file creation
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='objectDiagram'>Simulation object dependency diagram</h2><span id='topic+objectDiagram'></span><span id='topic+objectDiagram+2CsimList-method'></span>

<h3>Description</h3>

<p>Create a sequence diagram illustrating the data object dependencies of a
simulation. Offers a more detailed view of specific objects than does
plotting the <code>depsEdgeList</code> directly with <code><a href="#topic+moduleDiagram">moduleDiagram()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>objectDiagram(sim, ...)

## S4 method for signature 'simList'
objectDiagram(sim, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="objectDiagram_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object (typically corresponding to a
completed simulation).</p>
</td></tr>
<tr><td><code id="objectDiagram_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>DiagrammeR::mermaid</code>.
Useful for specifying <code>height</code> and <code>width</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plots a sequence diagram, invisibly returning a <code>DiagrammeR::mermaid</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>DiagrammeR::mermaid</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace("DiagrammeR", quietly = TRUE)) {
  sim &lt;- simInit()
  objectDiagram(sim)
  # if there are lots of objects, may need to increase width and/or height
  objectDiagram(sim, height = 3000, width = 3000)
}


</code></pre>

<hr>
<h2 id='objectSynonyms'>Identify synonyms in a <code>simList</code></h2><span id='topic+objectSynonyms'></span>

<h3>Description</h3>

<p>This will create active bindings amongst the synonyms. To minimize copying,
the first one that exists in the character vector will become the &quot;canonical&quot;
object. All others named in the character vector will be <code>activeBindings</code> to
that canonical one.  This synonym list will be assigned to the <code>envir</code>,
as an object named <code>objectSynonyms</code>. That object will have an attribute
called, <code>bindings</code> indicating which one is the canonical one and which
is/are the <code>activeBindings.</code> EXPERIMENTAL: If the objects are removed during a
<code>spades</code> call by, say, a module, then at the end of the event, the
<code>spades</code> call will replace the bindings. In other words, if a module
deletes the object, it will &quot;come back&quot;. This may not always be desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>objectSynonyms(envir, synonyms)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="objectSynonyms_+3A_envir">envir</code></td>
<td>
<p>An environment, which in the context of SpaDES.core is usually
a <code>simList</code> to find and/or place the <code>objectSynonyms</code>
object.</p>
</td></tr>
<tr><td><code id="objectSynonyms_+3A_synonyms">synonyms</code></td>
<td>
<p>A list of synonym character vectors, such as
<code>list(c("age", "ageMap", "age2"), c("veg", "vegMap"))</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is very experimental and only has minimal tests. Please report if this is
not working, and under what circumstances (e.g., please submit a reproducible example
to our issues tracker)
</p>
<p>This function will append any new <code>objectSynonym</code> to any pre-existing
<code>objectSynonym</code> in the <code>envir</code>. Similarly, this function assumes
transitivity, i.e., if <code>age</code> and <code>ageMap</code> are synonyms, and <code>ageMap</code> and <code>timeSinceFire</code>
are synonyms, then <code>age</code> and <code>timeSinceFire</code> must be synonyms.
</p>


<h3>Value</h3>

<p>Active bindings in the <code>envir</code> so that all synonyms point to the same
canonical object, e.g., they would be at <code>envir[[synonym[[1]][1]]]</code> and
<code>envir[[synonym[[1]][2]]]</code>, if a list of length one is passed into
<code>synonyms</code>, with a character vector of length two. See examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sim &lt;- simInit()

sim$age &lt;- 1:10;
sim &lt;- objectSynonyms(sim, list(c("age", "ageMap")))

identical(sim$ageMap, sim$age)
sim$age &lt;- 4
identical(sim$ageMap, sim$age)
sim$ageMap &lt;- 2:5
sim$ageMap[3] &lt;- 11
identical(sim$ageMap, sim$age)

# Also works to pass it in as an object
objectSynonyms &lt;- list(c("age", "ageMap"))
sim &lt;- simInit(objects = list(objectSynonyms = objectSynonyms))
identical(sim$ageMap, sim$age) # they are NULL at this point
sim$age &lt;- 1:10
identical(sim$ageMap, sim$age) # they are not NULL at this point

## More complicated, with 'updating' i.e., you can add new synonyms to previous
sim &lt;- simInit()
os &lt;- list(c("age", "ageMap"), c("vegMap", "veg"), c("studyArea", "studyArea2"))
os2 &lt;- list(c("ageMap", "timeSinceFire", "tsf"),
            c("systime", "systime2"),
            c("vegMap", "veg"))
sim &lt;- objectSynonyms(sim, os)
sim &lt;- objectSynonyms(sim, os2)

# check
sim$objectSynonyms


</code></pre>

<hr>
<h2 id='objs'>Extract or replace an object from the simulation environment</h2><span id='topic+objs'></span><span id='topic+simList-accessors-objects'></span><span id='topic+objs+2CsimList-method'></span><span id='topic+objs+3C-'></span><span id='topic+objs+3C-+2CsimList-method'></span><span id='topic+moduleObjects'></span><span id='topic+findObjects'></span>

<h3>Description</h3>

<p>The <code>[[</code> and <code>$</code> operators provide &quot;shortcuts&quot; for accessing
objects in the simulation environment.
I.e., instead of using <code>envir(sim)$object</code> or <code>envir(sim)[["object"]]</code>,
one can simply use <code>sim$object</code> or <code>sim[["object"]]</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>objs(sim, ...)

## S4 method for signature 'simList'
objs(sim, ...)

objs(sim) &lt;- value

## S4 replacement method for signature 'simList'
objs(sim) &lt;- value

moduleObjects(sim, module, path)

findObjects(objects, sim, module, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="objs_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="objs_+3A_...">...</code></td>
<td>
<p>passed to <code>ls</code></p>
</td></tr>
<tr><td><code id="objs_+3A_value">value</code></td>
<td>
<p>objects to assign to the <code>simList</code></p>
</td></tr>
<tr><td><code id="objs_+3A_module">module</code></td>
<td>
<p>Character vector of module name(s)</p>
</td></tr>
<tr><td><code id="objs_+3A_path">path</code></td>
<td>
<p>The path to the module., i.e., the <code>modulePath</code>.
Only relevant if <code>sim</code> not supplied.</p>
</td></tr>
<tr><td><code id="objs_+3A_objects">objects</code></td>
<td>
<p>A character vector of length &gt;= 1 with name(s) of objects to look
for in the metadata. This is used in a <code>grep</code>, meaning it will do partial
matching (e.g., <code>"studyArea"</code> will find <code>"studyArea"</code> and <code>"studyAreaLarge"</code>).
User can use regular expressions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>objs</code> can take <code>...</code> arguments passed to <code>ls</code>,
allowing, e.g. <code>all.names=TRUE</code>
<code style="white-space: pre;">&#8288;objs&lt;-&#8288;</code> requires takes a named list of values to be assigned in
the simulation environment.
</p>


<h3>Value</h3>

<p>Returns or sets a list of objects in the <code>simList</code> environment.
</p>
<p><code>moduleObjects</code> returns a data.table with 4 columns, <code>module</code>, <code>objectName</code>, <code>type</code>, and <code>desc</code>,
pulled directly from the object metadata in the <code>createsOutputs</code> and <code>expectsInputs</code>. These
will be determined either from a <code>simList</code> or from the module source code.
</p>
<p><code>findObjects</code> returns a data.table similar to <code>moduleObjects</code>, but with only the
objects provided by <code>objects</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.1 on Simulation Parameters.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># findObjects
path &lt;- getSampleModules(tempdir())
findObjects(path = path, module = dir(path), objects = "caribou")
</code></pre>

<hr>
<h2 id='objSize.simList'>Object size for <code>simList</code></h2><span id='topic+objSize.simList'></span>

<h3>Description</h3>

<p>Recursively, runs <code><a href="reproducible.html#topic+objSize">reproducible::objSize()</a></code> on the <code>simList</code> environment,
so it estimates the correct size of functions stored there (e.g., with their enclosing
environments) plus, it adds all other &quot;normal&quot; elements of the <code>simList</code>, e.g.,
<code>objSize(completed(sim))</code>.
The output is structured into 2 elements: the <code>sim</code> environment and all its objects,
and the other slots in the <code>simList</code> (e.g., events, completed, modules, etc.).
The returned object also has an attribute, &quot;total&quot;, which shows the total size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'simList'
objSize(x, quick = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="objSize.simList_+3A_x">x</code></td>
<td>
<p>An object</p>
</td></tr>
<tr><td><code id="objSize.simList_+3A_quick">quick</code></td>
<td>
<p>Logical. If <code>FALSE</code>, then an attribute, &quot;objSize&quot; will be added to
the returned value, with each of the elements' object size returned also.</p>
</td></tr>
<tr><td><code id="objSize.simList_+3A_...">...</code></td>
<td>
<p>Additional arguments (currently unused), enables backwards compatible use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an estimate of the size of the object, in bytes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- simInit(objects = list(d = 1:10, b = 2:20))
objSize(a)
utils::object.size(a)
</code></pre>

<hr>
<h2 id='openModules'>Open all modules nested within a base directory</h2><span id='topic+openModules'></span><span id='topic+openModules+2Ccharacter+2Ccharacter-method'></span><span id='topic+openModules+2Cmissing+2Cmissing-method'></span><span id='topic+openModules+2Cmissing+2Ccharacter-method'></span><span id='topic+openModules+2Ccharacter+2Cmissing-method'></span><span id='topic+openModules+2CsimList+2Cmissing-method'></span>

<h3>Description</h3>

<p>This is just a convenience wrapper for opening several modules at once, recursively.
A module is defined as any file that ends in <code>.R</code> or <code>.r</code> and has a
directory name identical to its filename. Thus, this must be case sensitive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openModules(name, path)

## S4 method for signature 'character,character'
openModules(name, path)

## S4 method for signature 'missing,missing'
openModules()

## S4 method for signature 'missing,character'
openModules(path)

## S4 method for signature 'character,missing'
openModules(name)

## S4 method for signature 'simList,missing'
openModules(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openModules_+3A_name">name</code></td>
<td>
<p>Character vector with names of modules to open. If missing, then
all modules will be opened within the base directory.</p>
</td></tr>
<tr><td><code id="openModules_+3A_path">path</code></td>
<td>
<p>Character string of length 1. The base directory within which
there are only module subdirectories.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned. All file are open via <code>file.edit</code>.
</p>


<h3>Note</h3>

<p>On Windows there is currently a bug in RStudio that prevents the editor
from opening when <code>file.edit</code> is called. <code>file.edit</code> does work if the
user types it at the command prompt. A message with the correct lines to copy
and paste is provided.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive())
  openModules("modules")


</code></pre>

<hr>
<h2 id='outputs'>Simulation outputs</h2><span id='topic+outputs'></span><span id='topic+outputs+2CsimList-method'></span><span id='topic+outputs+3C-'></span><span id='topic+outputs+3C-+2CsimList-method'></span><span id='topic+registerOutputs'></span><span id='topic+outputArgs'></span><span id='topic+outputArgs+2CsimList-method'></span><span id='topic+outputArgs+3C-'></span><span id='topic+outputArgs+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>outputs</code> slots in a <code>simList</code> object.
</p>
<p>If a module saves a file to disk during events, it can be useful to keep track
of the files that are saved e.g., for <code><a href="#topic+saveSimList">saveSimList()</a></code> so that all files can
be added to the archive. In addition to setting <code>outputs</code> at the <code>simInit</code>
stage, a module developer can also put this in a using any saving mechanism that
is relevant (e.g., <code>qs::qsave</code>, <code>saveRDS</code> etc.). When a module event does this
it can be useful to register that saved file. <code>registerOutputs</code> offers an additional
mechanism to do this. See examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outputs(sim)

## S4 method for signature 'simList'
outputs(sim)

outputs(sim) &lt;- value

## S4 replacement method for signature 'simList'
outputs(sim) &lt;- value

registerOutputs(filename, sim, ...)

outputArgs(sim)

## S4 method for signature 'simList'
outputArgs(sim)

outputArgs(sim) &lt;- value

## S4 replacement method for signature 'simList'
outputArgs(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="outputs_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code>. If missing, then the function will search in the call
stack, so it will find it if it is in a <code>SpaDES</code> module.</p>
</td></tr>
<tr><td><code id="outputs_+3A_value">value</code></td>
<td>
<p>The object to be stored at the slot. See Details.</p>
</td></tr>
<tr><td><code id="outputs_+3A_filename">filename</code></td>
<td>
<p>The filename to register in the <code>outputs(sim)</code> data.frame. If
missing, an attempt will be made to search for either a <code>file</code> or <code>filename</code>
argument in the call itself. This means that this function can be used with
the pipe, as long as the returned return from the upstream pipe function is
a filename or if it is <code>NULL</code> (e.g., <code>saveRDS</code>), then it will find the <code>file</code>
argument and use that.</p>
</td></tr>
<tr><td><code id="outputs_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are one of three mechanisms to add information about which output files to save.
</p>

<ol>
<li><p> As arguments to a <code>simInit</code> call. Specifically, <code>inputs</code> or <code>outputs</code>.
See <code>?simInit</code>.
</p>
</li>
<li><p> With the <code>outputs(simList)</code> function call.
</p>
</li>
<li><p> By adding a function called <code>.inputObjects</code> inside a module, which will be executed
during the <code>simInit</code> call. This last way is the most &quot;modular&quot; way to create
default data sets for your model.
</p>
</li></ol>

<p>See below for more details.
</p>
<p>Note using <code>registerOutputs</code>: a user can pass any other
arguments to <code>registerOutputs</code> that are in the
<code>outputs(sim)</code> data.frame, such as <code>objectName</code>, <code>fun</code>, <code>package</code>, though these
will not be used to save the files as this function is only about
registering an output that has already been saved.
</p>


<h3>Value</h3>

<p>A <code>simList</code> which will be the <code>sim</code> passed in with a new object registered
in the <code>outputs(sim)</code>
</p>


<h3>outputs function or argument in <code>simInit</code></h3>

<p><code>outputs</code> accepts a data.frame similar to the <code>inputs</code> data.frame, but
with up to 6 columns.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>objectName</code> </td><td style="text-align: left;"> required, character string indicating the name of the object
in the <code>simList</code> that will be saved to disk (without the <code style="white-space: pre;">&#8288;sim$&#8288;</code> prefix).</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>file</code> </td><td style="text-align: left;"> optional, a character string indicating the file path to save to.
The default is to concatenate <code>objectName</code> with the model timeunit and
<code>saveTime</code>, separated by underscore, '<code style="white-space: pre;">&#8288;_&#8288;</code>'. So a default filename would be
<code>"Fires_year1.rds"</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>fun</code> </td><td style="text-align: left;"> optional, a character string indicating the function to use to
save that file. The default is <code><a href="base.html#topic+saveRDS">saveRDS()</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>package</code> </td><td style="text-align: left;"> optional character string indicating the package in
which to find the <code>fun</code>);</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>saveTime</code> </td><td style="text-align: left;"> optional numeric, indicating when in simulation time the file
should be saved. The default is the lowest priority at <code>end(sim)</code>,
i.e., at the very end. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>arguments</code> </td><td style="text-align: left;"> is a list of lists of named arguments, one list for each
<code>fun</code>. For example, if <code>fun = "write.csv"</code>,
<code>arguments = list(row.names = TRUE)</code> will pass the argument
<code>row.names = TRUE</code> to <code>write.csv</code>  If there is only one list,
then it is assumed to apply to all files and will be recycled as per normal R
rules of recycling for each <code>fun</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>See the modules vignette for more details (<code>browseVignettes("SpaDES.core")</code>).
</p>


<h3>Note</h3>

<p>The automatic file type handling only adds the correct extension from a given
<code>fun</code> and <code>package</code>. It does not do the inverse, from a given extension find the
correct <code>fun</code> and <code>package</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+registerOutputs">registerOutputs()</a></code> which enables files that are saved to be added to
the <code>simList</code> using the <code>outputs(sim)</code> mechanism, so the files that are saved
during a module event can be tracked at the <code>simList</code> level. <code><a href="#topic+saveSimList">saveSimList()</a></code>
which will optionally add all the outputs that are tracked into an archive.
</p>
<p><code><a href="#topic+Plots">Plots()</a></code>, <code><a href="#topic+outputs">outputs()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#######################
# outputs
#######################

tmpdir &lt;- file.path(tempdir(), "outputs") |&gt; checkPath(create = TRUE)
tmpFile &lt;- file.path(tmpdir, "temp.rds")
tempObj &lt;- 1:10

# Can add data.frame of outputs directly into simInit call
sim &lt;- simInit(objects = c("tempObj"),
               outputs = data.frame(objectName = "tempObj"),
               paths = list(outputPath = tmpdir))
outputs(sim) # To see what will be saved, when, what filename
sim &lt;- spades(sim)
outputs(sim) # To see that it was saved, when, what filename

# Also can add using assignment after a simList object has been made
sim &lt;- simInit(objects = c("tempObj"), paths = list(outputPath = tmpdir))
outputs(sim) &lt;- data.frame(objectName = "tempObj", saveTime = 1:10)
sim &lt;- spades(sim)
outputs(sim) # To see that it was saved, when, what filename.

# can do highly variable saving
tempObj2 &lt;- paste("val", 1:10)
df1 &lt;- data.frame(col1 = tempObj, col2 = tempObj2)
sim &lt;- simInit(objects = c("tempObj", "tempObj2", "df1"),
  paths = list(outputPath = tmpdir))
outputs(sim) = data.frame(
     objectName = c(rep("tempObj", 2), rep("tempObj2", 3), "df1"),
     saveTime = c(c(1,4), c(2,6,7), end(sim)),
     fun = c(rep("saveRDS", 5), "write.csv"),
     package = c(rep("base", 5), "utils"),
     stringsAsFactors = FALSE)
# since write.csv has a default of adding a column, x, with rownames, must add additional
#   argument for 6th row in data.frame (corresponding to the write.csv function)
outputArgs(sim)[[6]] &lt;- list(row.names = FALSE)
sim &lt;- spades(sim)
outputs(sim)

# read one back in just to test it all worked as planned
newObj &lt;- read.csv(dir(tmpdir, pattern = "year10.csv", full.name = TRUE))
newObj

# using saving with SpaDES-aware methods
# To see current ones SpaDES can do
.saveFileExtensions()

library(terra)
ras &lt;- rast(ncol = 4, nrow = 5)
ras[] &lt;- 1:20

sim &lt;- simInit(objects = c("ras"), paths = list(outputPath = tmpdir))
outputs(sim) = data.frame(
  file = "test",
  fun = "writeRaster",
  package = "terra",
  objectName = "ras",
  stringsAsFactors = FALSE)

# outputArgs(sim)[[1]] &lt;- list(format = "GTiff") # see ?raster::writeFormats
simOut &lt;- spades(sim)
outputs(simOut)
newRas &lt;- rast(dir(tmpdir, full.name = TRUE, pattern = ".tif")[1])
all.equal(newRas, ras) # Should be TRUE
# Clean up after
unlink(tmpdir, recursive = TRUE)
# For `registerOutputs`
sim &lt;- simInit()
# This would normally be a save call, e.g., `writeRaster`
tf &lt;- reproducible::tempfile2(fileext = ".tif")
sim &lt;- registerOutputs(sim, filename = tf)

# Using a pipe
tf &lt;- reproducible::tempfile2(fileext = ".rds")
sim$a &lt;- 1
sim &lt;- saveRDS(sim$a, tf) |&gt; registerOutputs()
# confirm:
outputs(sim) # has object --&gt; saved = TRUE

</code></pre>

<hr>
<h2 id='packages'>Get module or simulation package dependencies</h2><span id='topic+packages'></span><span id='topic+simList-accessors-packages'></span><span id='topic+packages+2CANY-method'></span>

<h3>Description</h3>

<p>Get module or simulation package dependencies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>packages(sim, modules, paths, filenames, envir, clean = FALSE, ...)

## S4 method for signature 'ANY'
packages(sim, modules, paths, filenames, envir, clean = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="packages_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="packages_+3A_modules">modules</code></td>
<td>
<p>Character vector, specifying the name or vector of names of module(s)</p>
</td></tr>
<tr><td><code id="packages_+3A_paths">paths</code></td>
<td>
<p>Character vector, specifying the name or vector of names of paths(s) for
those modules. If path not specified, it will be taken from
<code>getOption("spades.modulePath")</code>, which is set with <code>setPaths()</code>)</p>
</td></tr>
<tr><td><code id="packages_+3A_filenames">filenames</code></td>
<td>
<p>Character vector specifying filenames of modules (i.e.
combined path &amp; module. If this is specified, then <code>modules</code> and
<code>path</code> are ignored.</p>
</td></tr>
<tr><td><code id="packages_+3A_envir">envir</code></td>
<td>
<p>Optional environment in which to store parsed code. This may be
useful if the same file is being parsed multiple times. This
function will check in that environment for the parsed file before
parsing again. If the <code>envir</code> is transient, then this will have no effect.</p>
</td></tr>
<tr><td><code id="packages_+3A_clean">clean</code></td>
<td>
<p>Optional logical. If <code>TRUE</code>, it will scrub any references to
GitHub repositories, e.g., &quot;PredictiveEcology/reproducible&quot; will be
returned as &quot;reproducible&quot;.</p>
</td></tr>
<tr><td><code id="packages_+3A_...">...</code></td>
<td>
<p>All <code>simInit</code> parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sorted character vector of package names.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty &amp; Eliot McIntire
</p>


<h3>See Also</h3>

<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='paramCheckOtherMods'>Test and update a parameter against same parameter in other modules</h2><span id='topic+paramCheckOtherMods'></span>

<h3>Description</h3>

<p>This function is intended to be part of module code and will test whether
the value of a parameter within the current module matches the value of the
same parameter in other modules. This is a test for parameters that might expect
to be part of a <code>params = list(.globals = list(someParam = "test"))</code> passed to <code>simInit</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paramCheckOtherMods(
  sim,
  paramToCheck,
  moduleToUse = "all",
  ifSetButDifferent = c("error", "warning", "message", "silent"),
  verbose = getOption("reproducible.verbose")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paramCheckOtherMods_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object</p>
</td></tr>
<tr><td><code id="paramCheckOtherMods_+3A_paramtocheck">paramToCheck</code></td>
<td>
<p>A character string, length one, of a parameter name to
check and compare between the current module and one or more or all others</p>
</td></tr>
<tr><td><code id="paramCheckOtherMods_+3A_moduletouse">moduleToUse</code></td>
<td>
<p>A character vector of module names to check against. This can be
<code>"all"</code> which will compare against all other modules.</p>
</td></tr>
<tr><td><code id="paramCheckOtherMods_+3A_ifsetbutdifferent">ifSetButDifferent</code></td>
<td>
<p>A character string indicating whether to <code>"error"</code> the default,
or send a <code>"warning"</code>, <code>message</code> or just silently continue (any other value).</p>
</td></tr>
<tr><td><code id="paramCheckOtherMods_+3A_verbose">verbose</code></td>
<td>
<p>Logical or Numeric, follows <code>reproducible.verbose</code> value by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is considered a &quot;fail&quot; under several conditions:
</p>

<ol>
<li><p> current module has a value that is not <code>NULL</code> or <code>"default"</code> and another module
has a different value;
</p>
</li>
<li><p> there is more than one value for the <code>paramToCheck</code> in the other modules,
so it is ambiguous which one to return.
</p>
</li></ol>

<p>Either the current module is different than other modules, unless it is &quot;default&quot; or NULL.
</p>


<h3>Value</h3>

<p>If the value of the <code>paramToCheck</code> in the current module is either <code>NULL</code> or
<code>"default"</code>, and there is only one other value across all modules named in <code>moduleToUse</code>,
then this will return a character string with the value of the single parameter value
in the other module(s).
It will return the current value if there are no other modules with the same parameter.
</p>

<hr>
<h2 id='params'>Get and set simulation parameters</h2><span id='topic+params'></span><span id='topic+parameters'></span><span id='topic+simList-accessors-params'></span><span id='topic+params+2CsimList-method'></span><span id='topic+params+3C-'></span><span id='topic+params+3C-+2CsimList-method'></span><span id='topic+P'></span><span id='topic+P+3C-'></span><span id='topic+parameters+2CsimList-method'></span>

<h3>Description</h3>

<p><code>params</code>, <code>P</code> and <code>Par</code> (an active binding, like &quot;mod&quot;) access the parameter
slot in the <code>simList</code>.
<code>params</code> has a replace method, so can be used to update a parameter value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>params(sim)

## S4 method for signature 'simList'
params(sim)

params(sim) &lt;- value

## S4 replacement method for signature 'simList'
params(sim) &lt;- value

P(sim, param, module)

P(sim, param, module) &lt;- value

parameters(sim, asDF = FALSE)

## S4 method for signature 'simList'
parameters(sim, asDF = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="params_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="params_+3A_value">value</code></td>
<td>
<p>The parameter value to be set (in the corresponding <code>module</code> and <code>param</code>).</p>
</td></tr>
<tr><td><code id="params_+3A_param">param</code></td>
<td>
<p>Optional character string indicating which parameter to choose.</p>
</td></tr>
<tr><td><code id="params_+3A_module">module</code></td>
<td>
<p>Optional character string indicating which module params should come from.</p>
</td></tr>
<tr><td><code id="params_+3A_asdf">asDF</code></td>
<td>
<p>Logical. For <code>parameters</code>, if TRUE, this will produce a single
data.frame of all model parameters. If FALSE, then it will return
a data.frame with 1 row for each parameter within nested lists,
with the same structure as <code>params</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>parameters</code> will extract only the metadata with the metadata defaults,
NOT the current values that may be overwritten by a user. See examples.
</p>


<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>Note</h3>

<p>The differences between <code>P()</code>, <code>params()</code> and being explicit with passing arguments
are mostly a question of speed and code compactness.
The computationally fastest way to get a parameter is to specify <code>moduleName</code> and parameter name,
as in: <code>P(sim, "paramName", "moduleName")</code> (replacing <code>moduleName</code> and <code>paramName</code> with your
specific module and parameter names), but it is more verbose than <code>P(sim)$paramName</code>.
Note: the important part for speed (e.g., 2-4x faster) is specifying the <code>moduleName</code>.
Specifying the parameter name is &lt;5% faster.
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.1 on Simulation parameters.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>s &lt;- simInit()
# add a parameter to tmp module
params(s)$tmp &lt;- list(a = 1)

# Only work inside a module, inside a function with `sim` is an argument
# P(s, "a") # get "a" parameter inside the current module
# Par$a     # same. Get "a" parameter inside the current module

if (requireNamespace("NLMR", quietly = TRUE) &amp;&amp;
    requireNamespace("SpaDES.tools", quietly = TRUE)) {
  opts &lt;- options("spades.moduleCodeChecks" = FALSE) # not necessary for example
  modules &lt;- list("randomLandscapes")
  paths &lt;- list(modulePath = getSampleModules(tempdir()))
  mySim &lt;- simInit(modules = modules, paths = paths,
                   params = list(.globals = list(stackName = "landscape")))

  # update some parameters using assignment -- currently only params will work
  params(mySim)$randomLandscapes$nx &lt;- 200
  params(mySim)$randomLandscapes$ny &lt;- 200

  parameters(mySim) # Does not contain these user overridden values

  # These next 2 are same here because they are not within a module
  P(mySim)          # Does contain the user overridden values
  params(mySim)     # Does contain the user overridden values

  # NOTE -- deleting a parameter will affect params and P, not parameters
  params(mySim)$randomLandscapes$nx &lt;- NULL
  params(mySim)$randomLandscapes$ny &lt;- NULL

  parameters(mySim) # Shows nx and ny

  # These next 2 are same here because they are not within a module
  P(mySim)          # nx and ny are Gone
  params(mySim)     # nx and ny are Gone

  options(opts) # reset
}
</code></pre>

<hr>
<h2 id='paths'>Specify paths for modules, inputs, outputs, and temporary rasters</h2><span id='topic+paths'></span><span id='topic+simList-accessors-paths'></span><span id='topic+paths+2CsimList-method'></span><span id='topic+paths+3C-'></span><span id='topic+paths+3C-+2CsimList-method'></span><span id='topic+cachePath'></span><span id='topic+cachePath+2CsimList-method'></span><span id='topic+cachePath+3C-'></span><span id='topic+cachePath+3C-+2CsimList-method'></span><span id='topic+inputPath'></span><span id='topic+inputPath+2CsimList-method'></span><span id='topic+inputPath+3C-'></span><span id='topic+inputPath+3C-+2CsimList-method'></span><span id='topic+outputPath'></span><span id='topic+outputPath+2CsimList-method'></span><span id='topic+outputPath+3C-'></span><span id='topic+outputPath+3C-+2CsimList-method'></span><span id='topic+figurePath'></span><span id='topic+figurePath+2CsimList-method'></span><span id='topic+logPath'></span><span id='topic+logPath+2CsimList-method'></span><span id='topic+modulePath'></span><span id='topic+modulePath+2CsimList-method'></span><span id='topic+modulePath+3C-'></span><span id='topic+modulePath+3C-+2CsimList-method'></span><span id='topic+scratchPath'></span><span id='topic+scratchPath+2CsimList-method'></span><span id='topic+scratchPath+3C-'></span><span id='topic+scratchPath+3C-+2CsimList-method'></span><span id='topic+rasterPath'></span><span id='topic+rasterPath+2CsimList-method'></span><span id='topic+rasterPath+3C-'></span><span id='topic+rasterPath+3C-+2CsimList-method'></span><span id='topic+terraPath'></span><span id='topic+terraPath+2CsimList-method'></span><span id='topic+terraPath+3C-'></span><span id='topic+terraPath+3C-+2CsimList-method'></span><span id='topic+dataPath'></span><span id='topic+dataPath+2CsimList-method'></span>

<h3>Description</h3>

<p>Accessor functions for the <code>paths</code> slot in a <code>simList</code> object.
</p>
<p><code>dataPath</code> will return <code>file.path(modulePath(sim), currentModule(sim), "data")</code>.
<code>dataPath</code>, like <code>currentModule</code>,is namespaced. This means that when
it is used inside a module, then it will return <em>that model-specific</em> information.
For instance, if used inside a module called <code>"movingAgent"</code>,
then <code>currentModule(sim)</code>
will return <code>"movingAgent"</code>, and <code>dataPath(sim)</code> will return
<code>file.path(modulePath(sim), "movingAgent", "data")</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paths(sim)

## S4 method for signature 'simList'
paths(sim)

paths(sim) &lt;- value

## S4 replacement method for signature 'simList'
paths(sim) &lt;- value

cachePath(sim)

## S4 method for signature 'simList'
cachePath(sim)

cachePath(sim) &lt;- value

## S4 replacement method for signature 'simList'
cachePath(sim) &lt;- value

inputPath(sim)

## S4 method for signature 'simList'
inputPath(sim)

inputPath(sim) &lt;- value

## S4 replacement method for signature 'simList'
inputPath(sim) &lt;- value

outputPath(sim)

## S4 method for signature 'simList'
outputPath(sim)

outputPath(sim) &lt;- value

## S4 replacement method for signature 'simList'
outputPath(sim) &lt;- value

figurePath(sim)

## S4 method for signature 'simList'
figurePath(sim)

logPath(sim)

## S4 method for signature 'simList'
logPath(sim)

modulePath(sim, module)

## S4 method for signature 'simList'
modulePath(sim, module)

modulePath(sim) &lt;- value

## S4 replacement method for signature 'simList'
modulePath(sim) &lt;- value

scratchPath(sim)

## S4 method for signature 'simList'
scratchPath(sim)

scratchPath(sim) &lt;- value

## S4 replacement method for signature 'simList'
scratchPath(sim) &lt;- value

rasterPath(sim)

## S4 method for signature 'simList'
rasterPath(sim)

rasterPath(sim) &lt;- value

## S4 replacement method for signature 'simList'
rasterPath(sim) &lt;- value

terraPath(sim)

## S4 method for signature 'simList'
terraPath(sim)

terraPath(sim) &lt;- value

## S4 replacement method for signature 'simList'
terraPath(sim) &lt;- value

dataPath(sim)

## S4 method for signature 'simList'
dataPath(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paths_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="paths_+3A_value">value</code></td>
<td>
<p>The parameter value to be set (in the corresponding <code>module</code> and <code>param</code>).</p>
</td></tr>
<tr><td><code id="paths_+3A_module">module</code></td>
<td>
<p>The optional character string of the module(s) whose
paths are desired. If omitted, will return all module paths,
if more than one exist.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These are ways to add or access the file paths used by <code><a href="#topic+spades">spades()</a></code>.
There are five file paths: <code>cachePath</code>, <code>modulePath</code>,
<code>inputPath</code>, <code>outputPath</code>, and <code>rasterPath</code>.
Each has a function to get or set the value in a <code>simList</code> object.
If no paths are specified, the defaults are as follows:
</p>

<ul>
<li> <p><code>cachePath</code>: <code>getOption("reproducible.cachePath")</code>;
</p>
</li>
<li> <p><code>inputPath</code>: <code>getOption("spades.modulePath")</code>;
</p>
</li>
<li> <p><code>modulePath</code>: <code>getOption("spades.inputPath")</code>;
</p>
</li>
<li> <p><code>outputPath</code>: <code>getOption("spades.outputPath")</code>;
</p>
</li>
<li> <p><code>rasterPath</code>: <code>file.path(getOption("spades.scratchPath"), "raster")</code>;
</p>
</li>
<li> <p><code>scratchPath</code>: <code>getOption("spades.scratchPath")</code>;
</p>
</li>
<li> <p><code>terraPath</code>: <code>file.path(getOption("spades.scratchPath"), "terra")</code>
</p>
</li></ul>



<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.4 on Simulation Paths.
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>

<hr>
<h2 id='Plot+2CsimList-method'>Plot method for <code>simList</code> objects</h2><span id='topic+Plot+2CsimList-method'></span>

<h3>Description</h3>

<p>Extends <code>quickPlot::Plot</code> for <code>simList</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
Plot(
  ...,
  new = FALSE,
  addTo = NULL,
  gp = gpar(),
  gpText = gpar(),
  gpAxis = gpar(),
  axes = FALSE,
  speedup = 1,
  size = 5,
  cols = NULL,
  col = NULL,
  zoomExtent = NULL,
  visualSqueeze = NULL,
  legend = TRUE,
  legendRange = NULL,
  legendText = NULL,
  pch = 19,
  title = NULL,
  na.color = "#FFFFFF00",
  zero.color = NULL,
  length = NULL,
  arr = NULL,
  plotFn = "plot",
  verbose = getOption("quickPlot.verbose")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Plot+2B2CsimList-method_+3A_...">...</code></td>
<td>
<p>A combination of <code>spatialObjects</code> or non-spatial objects.
For many object classes, there are specific <code>Plot</code> methods. Where
there are no specific ones, the base plotting will be used internally.
This means that for objects with no specific <code>Plot</code> methods,
many arguments, such as <code>addTo</code>, will not work.
See details.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_new">new</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the previous named plot area is wiped
and a new one made; if <code>FALSE</code>, then the <code>...</code> plots will be
added to the current device, adding or rearranging the plot layout
as necessary. Default is <code>FALSE</code>. This currently works best if
there is only one object being plotted in a given <code>Plot</code> call. However,
it is possible to pass a list of logicals to this, matching the
length of the <code>...</code> objects. Use <code>clearPlot</code> to clear the whole
plotting device. NOTE if <code>TRUE</code>: <em>Everything that was there,
including the legend and the end points of the colour palette, will
be removed and re-initiated</em>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_addto">addTo</code></td>
<td>
<p>Character vector, with same length as <code>...</code>.
This is for overplotting, when the overplot is not to occur on
the plot with the same name, such as plotting a
<code style="white-space: pre;">&#8288;SpatialPoints*&#8288;</code> object on a <code>RasterLayer</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_gp">gp</code></td>
<td>
<p>A <code>gpar</code> object, created by <code><a href="quickPlot.html#topic+gpar">gpar()</a></code>,
to change plotting parameters (see <span class="pkg">grid</span> package).</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_gptext">gpText</code></td>
<td>
<p>A <code>gpar</code> object for the title text.
Default <code>gpar(col = "black")</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_gpaxis">gpAxis</code></td>
<td>
<p>A <code>gpar</code> object for the axes.
Default <code>gpar(col = "black")</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_axes">axes</code></td>
<td>
<p>Logical or <code>"L"</code>, representing the left and bottom axes, over all plots.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_speedup">speedup</code></td>
<td>
<p>Numeric. The factor by which the number of pixels is divided
by to plot rasters. See Details.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_size">size</code></td>
<td>
<p>Numeric. The size, in points, for <code>SpatialPoints</code> symbols,
if using a scalable symbol.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_cols">cols</code></td>
<td>
<p>(also <code>col</code>) Character vector or list of character vectors of colours.
See details.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_col">col</code></td>
<td>
<p>(also <code>cols</code>) Alternative to <code>cols</code> to be consistent with <code>plot</code>.
<code>cols</code> takes precedence, if both are provided.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_zoomextent">zoomExtent</code></td>
<td>
<p>An <code>Extent</code> object. Supplying a single extent that is
smaller than the rasters will call a crop statement before
plotting. Defaults to <code>NULL</code>.
This occurs after any downsampling of rasters, so it may
produce very pixelated maps.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_visualsqueeze">visualSqueeze</code></td>
<td>
<p>Numeric. The proportion of the white space to be used
for plots. Default is 0.75.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_legend">legend</code></td>
<td>
<p>Logical indicating whether a legend should be drawn.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_legendrange">legendRange</code></td>
<td>
<p>Numeric vector giving values that, representing the lower
and upper bounds of a legend (i.e., <code>1:10</code> or
<code>c(1,10)</code> will give same result) that will override
the data bounds contained within the <code>grobToPlot</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_legendtext">legendText</code></td>
<td>
<p>Character vector of legend value labels.
Defaults to <code>NULL</code>, which results in a pretty numeric
representation.
If <code style="white-space: pre;">&#8288;Raster*&#8288;</code> has a Raster Attribute Table (<code>rat</code>;
see <span class="pkg">raster</span> package), this will be used by default.
Currently, only a single vector is accepted.
The length of this must match the length of the legend, so
this is mostly useful for discrete-valued rasters.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_pch">pch</code></td>
<td>
<p>see <code>?par</code>.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_title">title</code></td>
<td>
<p>Logical or character string. If logical, it
indicates whether to print the object name as the title
above the plot. If a character string, it will print this
above the plot. NOTE: the object name is used with <code>addTo</code>,
not the title. Default NULL, which means print the object
name as title, if no other already exists on the plot, in
which case, keep the previous title.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_na.color">na.color</code></td>
<td>
<p>Character string indicating the colour for <code>NA</code> values.
Default transparent.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_zero.color">zero.color</code></td>
<td>
<p>Character string indicating the colour for zero values,
when zero is the minimum value, otherwise, zero is
treated as any other colour. Default transparent.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_length">length</code></td>
<td>
<p>Numeric. Optional length, in inches, of the arrow head.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_arr">arr</code></td>
<td>
<p>A vector of length 2 indicating a desired arrangement of plot
areas indicating number of rows, number of columns.
Default NULL, meaning
let Plot function do it automatically.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_plotfn">plotFn</code></td>
<td>
<p>An optional function name to do the plotting internally, e.g.,
&quot;barplot&quot; to get a barplot() call. Default &quot;plot&quot;.</p>
</td></tr>
<tr><td><code id="Plot+2B2CsimList-method_+3A_verbose">verbose</code></td>
<td>
<p>Numeric or logical. If <code>TRUE</code> or <code style="white-space: pre;">&#8288;&gt;0&#8288;</code>, then messages will be
shown. If <code>FALSE</code> or <code>0</code>, most messages will be suppressed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code>quickPlot::Plot</code>.
This method strips out stuff from a <code>simList</code> class object that would make it otherwise not
reproducibly digestible between sessions, operating systems, or machines.
This will likely still not allow identical digest results across R versions.
</p>


<h3>Value</h3>

<p>invoked for side effect of plotting
</p>


<h3>See Also</h3>

<p><code>quickPlot::Plot</code>
</p>

<hr>
<h2 id='Plots'><code>Plot</code> wrapper intended for use in a SpaDES module</h2><span id='topic+Plots'></span>

<h3>Description</h3>

<p>This is a single function call that allows a user to change which format in which
the plots will occur.
Specifically, the two common formats would be to <code>"screen"</code> or to disk as an image file,
such as <code>"png"</code>.
<em>THIS CURRENTLY HAS BEEN TESTED WITH <code>ggplot2</code>, <code>RasterLayer</code>, and
<code>tmap</code> objects.</em>
The default (or change with e.g., <code style="white-space: pre;">&#8288;fn = "print", usePlot = FALSE&#8288;</code>) uses
<code>Plot</code> internally, so individual plots may be rearranged. When saved to
disk (e.g., via <code>type = 'png'</code>), then <code>Plot</code> will not be used and the single object
that is the result of this <code>Plots</code> call will be saved to disk.
This function requires at least 2 things: a plotting function and arguments passed
to that function (which could include <code>data</code>, but commonly would simply be named
arguments required by <code>fn</code>).
See below and examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Plots(
  data,
  fn,
  filename,
  types = quote(params(sim)[[currentModule(sim)]]$.plots),
  path = quote(figurePath(sim)),
  .plotInitialTime = quote(params(sim)[[currentModule(sim)]]$.plotInitialTime),
  ggsaveArgs = list(),
  usePlot = getOption("spades.PlotsUsePlot", FALSE),
  deviceArgs = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Plots_+3A_data">data</code></td>
<td>
<p>An (optional) arbitrary data object. If supplied, it will be passed as
the first argument to <code>Plot</code> function, and should contain all the data
required for the inner plotting. If passing a <code>RasterLayer</code>,
it may be a good idea to set <code>names(RasterLayer)</code> so that
multiple layers can be plotted without overlapping each other. When a custom <code>fn</code>
is used and all arguments for <code>fn</code> are supplied and named, then this can be omitted.
See examples.</p>
</td></tr>
<tr><td><code id="Plots_+3A_fn">fn</code></td>
<td>
<p>An arbitrary plotting function. If not provided, defaults to using <code>quickPlot::Plot</code></p>
</td></tr>
<tr><td><code id="Plots_+3A_filename">filename</code></td>
<td>
<p>A name that will be the base for the files that will be saved, i.e,
do not supply the file extension, as this will be determined based on <code>types</code>.
If a user provides this as an absolute path, it will override the <code>path</code>
argument.</p>
</td></tr>
<tr><td><code id="Plots_+3A_types">types</code></td>
<td>
<p>Character vector, zero or more of types. If used within a module, this
will be deduced from the <code>P(sim)$type</code> and can be omitted. See below.</p>
</td></tr>
<tr><td><code id="Plots_+3A_path">path</code></td>
<td>
<p>Currently a single path for the saved objects on disk. If <code>filename</code>
is supplied as an absolute path, <code>path</code> will be set to <code>dirname(filename)</code>,
overriding this argument value.</p>
</td></tr>
<tr><td><code id="Plots_+3A_.plotinitialtime">.plotInitialTime</code></td>
<td>
<p>A numeric. If <code>NA</code> then no visual on screen. Anything
else will have visuals plotted to screen device. This is here for backwards
compatibility. A developer should set in the module to the intended initial
plot time and leave it, i.e., <em>not</em> <code>NA</code>.</p>
</td></tr>
<tr><td><code id="Plots_+3A_ggsaveargs">ggsaveArgs</code></td>
<td>
<p>An optional list of arguments passed to <code>ggplot2::ggsave</code></p>
</td></tr>
<tr><td><code id="Plots_+3A_useplot">usePlot</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the default, then the plot will occur
with <code>quickPlot::Plot</code>, so it will be arranged with previously existing plots.</p>
</td></tr>
<tr><td><code id="Plots_+3A_deviceargs">deviceArgs</code></td>
<td>
<p>An optional list of arguments passed to one of <code>png</code>,
<code>pdf</code>, <code>tiff</code>, <code>bmp</code>, or <code>jgeg</code>.
This is useful when the plotting function is not creating a <code>ggplot</code> object,
e.g., plotting a <code>RasterLayer</code>.</p>
</td></tr>
<tr><td><code id="Plots_+3A_...">...</code></td>
<td>
<p>Anything needed by <code>fn</code>, all named.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code>type</code>
</p>

<ul>
<li> <p><code>"screen"</code> &ndash; Will plot to the current device, normally a plot window
</p>
</li>
<li> <p><code>"object"</code> &ndash; Will save the plot object, e.g., <code>ggplot</code> object
</p>
</li>
<li> <p><code>"raw"</code> &ndash; Will save the raw data prior to plotting, e.g.,
the data argument
</p>
</li>
<li> <p><code>"png"</code> &ndash; or any other type save-able with <code>ggsave</code>
</p>
</li></ul>

</li></ul>



<h3>Value</h3>

<p>Called for its side effect of plot creation.
</p>


<h3>Recording of files saved</h3>

<p>In cases where files are saved, and where <code>Plots</code> is used within a SpaDES module,
the file(s) that is/are saved will be appended to the <code>outputs</code> slot of the
<code>simList</code> of the module. This will, therefore, keep a record of figures saved
<em>within</em> the <code>simList</code>
</p>


<h3>Note</h3>

<p>THIS IS STILL EXPERIMENTAL and could change in the next release.
</p>
<p><code>Plots</code> now has experimental support for &quot;just a <code>Plot</code> call&quot;,
but with <code>types</code> specified.
See example.
The devices to save on disk will have some different behaviours to the screen representation,
since &quot;wiping&quot; an individual plot on a device doesn't exist for a file device.
</p>
<p>This offers up to 4 different actions for a given plot:
</p>

<ul>
<li><p> To screen device
</p>
</li>
<li><p> To disk as raw data (limited testing)
</p>
</li>
<li><p> To disk as a saved plot object  (limited testing)
</p>
</li>
<li><p> To disk as a &lsquo;<span class="file">.png</span>&rsquo; or other image file, e.g., &lsquo;<span class="file">.pdf</span>&rsquo;
</p>
</li></ul>

<p>To turn off plotting both to screen and disk, set both
<code>.plotInititalTime = NA</code> and <code>.plots = NA</code> or any other
value that will not trigger a TRUE with a <code>grepl</code> with the <code>types</code>
argument (e.g., <code>""</code> will omit all saving).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Note: if this is used inside a SpaDES module, do not define this
  #  function inside another function. Put it outside in a normal
  #  module script. Otherwise, it will cause a memory leak.
  if (requireNamespace("ggplot2")) {
    fn &lt;- function(d)
      ggplot2::ggplot(d, ggplot2::aes(a)) +
      ggplot2::geom_histogram()
    sim &lt;- simInit()
    sim$something &lt;- data.frame(a = sample(1:10, replace = TRUE))

    Plots(data = sim$something, fn = fn,
          types = c("png"),
          path = file.path("figures"),
          filename = tempfile(),
          .plotInitialTime = 1
          )

    # plot to active device and to png
    Plots(data = sim$something, fn = fn,
          types = c("png", "screen"),
          path = file.path("figures"),
          filename = tempfile(),
          .plotInitialTime = 1
          )

    # Can also be used like quickPlot::Plot, but with control over output type
    r &lt;- terra::rast(terra::ext(0,10,0,10), vals = sample(1:3, size = 100, replace = TRUE))
    Plots(r, types = c("screen", "png"), deviceArgs = list(width = 700, height = 500),
          usePlot = TRUE)

    # with ggplotify, Plots can also be used to plot/save
    # non-ggplot objects:


    if (require("ggplotify")) {
      if (!require("lattice")) stop("please install lattice")

      plotFile &lt;- tempfile()

      p1 &lt;- densityplot(~mpg|cyl, data=mtcars)
      Plots(data = p1, fn = as.ggplot, filename = plotFile,
            ggsaveArgs = list(width = 5, height = 4, dpi = 300, bg = "white", units = "in"),
            types = c("screen", "png"), .plotInitialTime = 1)
    }
  } # end ggplot
 # end of dontrun
</code></pre>

<hr>
<h2 id='priority'>Event priority</h2><span id='topic+priority'></span><span id='topic+.first'></span><span id='topic+.highest'></span><span id='topic+.last'></span><span id='topic+.lowest'></span><span id='topic+.normal'></span>

<h3>Description</h3>

<p>Preset event priorities: 1 = first (highest); 5 = normal; 10 = last (lowest).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.first()

.highest()

.last()

.lowest()

.normal()
</code></pre>


<h3>Value</h3>

<p>numeric of length 1.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='progressInterval'>Get and set simulation progress bar details</h2><span id='topic+progressInterval'></span><span id='topic+progressInterval+2CsimList-method'></span><span id='topic+progressInterval+3C-'></span><span id='topic+progressInterval+3C-+2CsimList-method'></span><span id='topic+progressType'></span><span id='topic+progressType+2CsimList-method'></span><span id='topic+progressType+3C-'></span><span id='topic+progressType+3C-+2CsimList-method'></span>

<h3>Description</h3>

<p>The progress bar can be set in two ways in SpaDES. First, by setting values
in the <code>.progress</code> list element in the params list element passed to <code><a href="#topic+simInit">simInit()</a></code>.
Second, at the <code><a href="#topic+spades">spades()</a></code> call itself, which can be simpler. See examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>progressInterval(sim)

## S4 method for signature 'simList'
progressInterval(sim)

progressInterval(sim) &lt;- value

## S4 replacement method for signature 'simList'
progressInterval(sim) &lt;- value

progressType(sim)

## S4 method for signature 'simList'
progressType(sim)

progressType(sim) &lt;- value

## S4 replacement method for signature 'simList'
progressType(sim) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="progressInterval_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="progressInterval_+3A_value">value</code></td>
<td>
<p>The parameter value to be set (in the corresponding <code>module</code> and <code>param</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Progress Bar:
Progress type can be one of  <code>"text"</code>, <code>"graphical"</code>, or <code>"shiny"</code>.
Progress interval can be a numeric.
These both can get set by passing a
<code>.progress = list(type = "graphical", interval = 1)</code> into the <code>simInit</code> call.
See examples.
</p>


<h3>Value</h3>

<p>for <code>progressInterval</code>, a numeric corresponding to the progress update interval;
for <code style="white-space: pre;">&#8288;progressInterval&lt;-&#8288;</code>, an updated <code>simList</code> object.
</p>


<h3>See Also</h3>

<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+times">times</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
requireNamespace("NLMR", quietly = TRUE)) {
opts &lt;- options("spades.moduleCodeChecks" = FALSE) # not necessary for example
mySim &lt;- simInit(
  times = list(start=0.0, end=100.0),
  params = list(.globals = list(stackName = "landscape"),
  .progress = list(type = "text", interval = 10),
  checkpoint = list(interval = 10, file = "chkpnt.RData")),
  modules = list("randomLandscapes"),
  paths = list(modulePath = getSampleModules(tempdir()))
)

# progress bar
progressType(mySim) # "text"
progressInterval(mySim) # 10

# parameters
params(mySim) # returns all parameters in all modules
              # including .global, .progress, checkpoint
globals(mySim) # returns only global parameters

# checkpoint
checkpointFile(mySim) # returns the name of the checkpoint file
                      # In this example, "chkpnt.RData"
checkpointInterval(mySim) # 10

options(opts) # reset
}
</code></pre>

<hr>
<h2 id='rasterCreate'>Simple wrapper to load any <code style="white-space: pre;">&#8288;Raster*&#8288;</code> object</h2><span id='topic+rasterCreate'></span><span id='topic+rasterCreate.default'></span>

<h3>Description</h3>

<p>This wraps either <code>raster::raster</code>, <code>raster::stack</code>, <code>raster::brick</code>, or <code>terra::rast</code>,
allowing a single function to be used to create a new object of the same class as a template.
This works for all <code style="white-space: pre;">&#8288;Raster*&#8288;</code> and <code>SpatRaster</code> class templates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rasterCreate(x, ...)

## Default S3 method:
rasterCreate(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rasterCreate_+3A_x">x</code></td>
<td>
<p>An object, notably a <code style="white-space: pre;">&#8288;Raster*&#8288;</code> object. All others will simply
be passed through with no effect.</p>
</td></tr>
<tr><td><code id="rasterCreate_+3A_...">...</code></td>
<td>
<p>Passed to <code>raster::raster</code>, <code>raster::stack</code>,
or <code>raster::brick</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new (empty) object of same class as the original.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>rasterCreate(default)</code>: Simply passes through argument with no effect
</p>
</li></ul>

<hr>
<h2 id='rasterToMemory'>Read raster to memory</h2><span id='topic+rasterToMemory'></span><span id='topic+rasterToMemory+2Clist-method'></span><span id='topic+rasterToMemory+2Ccharacter-method'></span><span id='topic+rasterToMemory+2CANY-method'></span><span id='topic+rasterToMemory+2CsimList-method'></span>

<h3>Description</h3>

<p>Wrapper to the <code>raster</code> function, that creates the raster object in
memory, even if it was read in from file. There is the default method which is
just a pass through, so this can be safely used on large complex objects,
recursively, e.g., a <code>simList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rasterToMemory(x, ...)

## S4 method for signature 'list'
rasterToMemory(x, ...)

## S4 method for signature 'character'
rasterToMemory(x, ...)

## S4 method for signature 'ANY'
rasterToMemory(x, ...)

## S4 method for signature 'simList'
rasterToMemory(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rasterToMemory_+3A_x">x</code></td>
<td>
<p>An object passed directly to the function raster (e.g., character string of a filename).</p>
</td></tr>
<tr><td><code id="rasterToMemory_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>raster::raster</code>, <code>raster::stack</code>, or <code>raster::brick</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A raster object whose values are stored in memory.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p><code>raster()</code>, <code><a href="terra.html#topic+rast">terra::rast()</a></code>.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+paddedFloatToChar'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>reproducible</dt><dd><p><code><a href="reproducible.html#topic+paddedFloatToChar">paddedFloatToChar</a></code></p>
</dd>
</dl>

<hr>
<h2 id='remoteFileSize'>Determine the size of a remotely hosted file</h2><span id='topic+remoteFileSize'></span>

<h3>Description</h3>

<p>Defunct. Will be removed by mid-2023.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remoteFileSize(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remoteFileSize_+3A_url">url</code></td>
<td>
<p>The url of the remote file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric indicating the size of the remote file in bytes.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>

<hr>
<h2 id='restartR'>Restart R programmatically</h2><span id='topic+restartR'></span>

<h3>Description</h3>

<p>This will attempt to restart the R session, reloading all packages, and
saving and reloading the <code>simList</code>.
Currently, this is not intended for general use: it has many specialized
pieces for using inside a <code>spades</code> call.
The main purpose for doing this is to clear memory leaks (possibly deep
in R <a href="https://github.com/r-lib/fastmap">https://github.com/r-lib/fastmap</a>) that are not fully diagnosed.
<em>This is still very experimental</em>.
This should only be used if there are RAM limitations being hit with long running simulations.
It has been tested to work Linux within Rstudio and at a terminal R session.
The way to initiate restarting of R is simply setting the <code>spades.restartRInterval</code> or
setting the equivalent parameter in the <code>restartR</code> core module via:
<code>simInit(..., params = list(.restartR = list(.restartRInterval = 1)), ...)</code>
greater than 0, which is the default,
e.g., <code>options("spades.restartRInterval" = 100)</code>.
This is only intended to restart a simulation in exactly the same place as it was
(i.e., cannot change machines), and because of the restart, the assignment of the <code>spades</code>
call will be either to <code>sim</code> or the user must make such an assignment manually,
e.g., <code>sim &lt;- SpaDES.core:::.pkgEnv$.sim</code>.
This is stated in a message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restartR(
  sim,
  reloadPkgs = TRUE,
  .First = NULL,
  .RDataFile = getOption("spades.restartR.RDataFilename"),
  restartDir = getOption("spades.restartR.restartDir", NULL)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restartR_+3A_sim">sim</code></td>
<td>
<p>Required. A <code>simList</code> to be retained through the restart</p>
</td></tr>
<tr><td><code id="restartR_+3A_reloadpkgs">reloadPkgs</code></td>
<td>
<p>Logical. If <code>TRUE</code>, it will attempt to reload all the packages
as they were in previous session, in the same order. If <code>FALSE</code>, it will
load no packages beyond normal R startup. Default <code>TRUE</code></p>
</td></tr>
<tr><td><code id="restartR_+3A_.first">.First</code></td>
<td>
<p>A function to save to &lsquo;<span class="file">~/.qs</span>&rsquo; which will
be loaded at restart from &lsquo;<span class="file">~/.qs</span>&rsquo; and run. Default is <code>NULL</code>,
meaning it will use the non-exported <code>SpaDES.core:::First</code>. If a
user wants to make a custom <code>First</code> file, it should built off that one.</p>
</td></tr>
<tr><td><code id="restartR_+3A_.rdatafile">.RDataFile</code></td>
<td>
<p>A filename for saving the <code>simList</code>.
Defaults to <code>getOption("spades.restartR.filename")</code>, and the directory will
be in <code>restartDir</code>. The simulation time will be mid-pended to this
name, as in: <code style="white-space: pre;">&#8288;basename(file), "_time",&#8288;</code>
<code style="white-space: pre;">&#8288;paddedFloatToChar(time(sim), padL = nchar(as.character(end(sim))))))&#8288;</code></p>
</td></tr>
<tr><td><code id="restartR_+3A_restartdir">restartDir</code></td>
<td>
<p>A character string indicating root directory to
save <code>simList</code> and other ancillary files during restart.
Defaults to <code>getOption("spades.restartR.restartDir", NULL)</code>.
If <code>NULL</code>, then it will try, in order, <code>outputPath(sim)</code>,
<code>modulePath(sim)</code>, <code>inputPath(sim)</code>, <code>cachePath(sim)</code>,
taking the first one that is not inside the <code>tempdir()</code>, which will
disappear during restart of R.
The actual directory for a given <code>spades</code> call that is restarting will be:
<code>file.path(restartDir, "restartR", paste0(sim$._startClockTime, "_", .rndString))</code>.
The random string is to prevent parallel processes that started at the same clock
time from colliding.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The process responds to several options. Though under most cases,
the default behaviour should suffice. These are of 3 types: <code>restartRInterval</code>
the arguments to <code>restartR</code> and the arguments to <code>saveSimList</code>, these latter two
using a dot to separate the function name and its argument. The defaults for
two key options are: <code style="white-space: pre;">&#8288;options("spades.restartR.restartDir" = NULL&#8288;</code>, meaning
use <code>file.path(restartDir, "restartR", paste0(sim$._startClockTime, "_", .rndString))</code>
and <code>options("spades.saveSimList.fileBackend" = 0)</code>, which means don't do anything
with raster-backed files.
See specific functions for defaults and argument meanings.
The only difference from the default function values is with <code>saveSimList</code> argument
<code>fileBackend = FALSE</code> during <code>restartR</code> by default, because it is assumed that
the file backends will still be intact after a restart, so no need to move them all to memory.
</p>


<h3>Value</h3>

<p>invoked for side effect of restarting the R session
</p>


<h3>Note</h3>

<p>Because of the restarting, the object name of the original assignment of the
<code>spades</code> call can not be preserved. The <code>spades</code> call will be
assigned to <code>sim</code> in the <code>.GlobalEnv</code>.
</p>
<p>Because this function is focused on restarting during a <code>spades</code> call,
it will remove all objects in the <code>.GlobalEnv</code>, emulating <code>q("no")</code>.
If the user wants to keep those objects, then they should be saved to disk
immediately before the <code>spades</code> call.
This can then be recovered immediately after the return from the <code>spades</code> call.
</p>
<p>To keep the saved <code>simList</code>, use <code>options("spades.restartR.clearFiles" = TRUE)</code>.
The default is to treat these files as temporary files and so will be removed.
</p>

<hr>
<h2 id='restartSpades'>Restart an interrupted simulation</h2><span id='topic+restartSpades'></span>

<h3>Description</h3>

<p>This is very experimental and has not been thoroughly tested. Use with caution.
This function will re-parse a single module (currently) into the <code>simList</code>
where its source code should reside, and then optionally restart a simulation
that stopped on an error, presumably after the developer has modified the
source code of the module that caused the break.
This will restart the simulation at the next event in the event queue
(i.e., returned by <code>events(sim)</code>). Because of this, this function will
not do anything if the event queue is empty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restartSpades(sim = NULL, module = NULL, numEvents = Inf, restart = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restartSpades_+3A_sim">sim</code></td>
<td>
<p>A <code>simList.</code> If not supplied (the default), this will take the <code>sim</code> from
<code>SpaDES.core:::.pkgEnv$.sim</code>, i.e., the one that was interrupted</p>
</td></tr>
<tr><td><code id="restartSpades_+3A_module">module</code></td>
<td>
<p>A character string length one naming the module that caused the error and
whose source code was fixed. This module will be re-parsed and placed into the <code>simList</code></p>
</td></tr>
<tr><td><code id="restartSpades_+3A_numevents">numEvents</code></td>
<td>
<p>Numeric. Default is Inf (i.e., all available). In the <code>simList</code>, if
<code>options('spades.recoveryMode')</code> is set to <code>TRUE</code> or a numeric, then
there will be a list in the <code>simList</code> called <code>.recoverableObjs</code>. These will be
replayed backwards in time to reproduce the initial state of the <code>simList</code> before
the event that is <code>numEvents</code> back from the first event in <code>events(sim)</code>.</p>
</td></tr>
<tr><td><code id="restartSpades_+3A_restart">restart</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the call to <code>spades</code> will be made, i.e.,
restarting the simulation. If <code>FALSE</code>, then it will return a new <code>simList</code>
with the module code parsed into the <code>simList</code></p>
</td></tr>
<tr><td><code id="restartSpades_+3A_...">...</code></td>
<td>
<p>Passed to <code>spades</code>, e.g., <code>debug</code>, <code>.plotInitialTime</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This will only parse the source code from the named module. It will not affect any
objects that are in the <code>mod</code> or <code>sim</code>.
</p>
<p>The random number seed will be reset to the state it was at the start of the
earliest event recovered, thereby returning to the exact stochastic simulation
trajectory.
</p>


<h3>Value</h3>

<p>A <code>simList</code> as if <code>spades</code> had been called on a <code>simList</code>.
</p>


<h3>Note</h3>

<p>This will only work reliably
<em>if the <code>simList</code> was not modified yet during the event which caused the error</em>.
The <code>simList</code> will be in the state it was at the time of the error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# options("spades.recoveryMode" = 1) # now the default
s &lt;- simInit()
s &lt;- spades(s) # if this is interrupted or fails
# the following line will not work if the previous line didn't fail
s &lt;- restartSpades(s) # don't need to specify `sim` if previous line fails
                     # will take from SpaDES.core:::.pkgEnv$.sim automatically

</code></pre>

<hr>
<h2 id='rndstr'>Generate random strings</h2><span id='topic+rndstr'></span><span id='topic+rndstr+2Cnumeric+2Cnumeric+2Clogical-method'></span><span id='topic+rndstr+2Cnumeric+2Cnumeric+2Cmissing-method'></span><span id='topic+rndstr+2Cnumeric+2Cmissing+2Clogical-method'></span><span id='topic+rndstr+2Cmissing+2Cnumeric+2Clogical-method'></span><span id='topic+rndstr+2Cnumeric+2Cmissing+2Cmissing-method'></span><span id='topic+rndstr+2Cmissing+2Cnumeric+2Cmissing-method'></span><span id='topic+rndstr+2Cmissing+2Cmissing+2Clogical-method'></span><span id='topic+rndstr+2Cmissing+2Cmissing+2Cmissing-method'></span>

<h3>Description</h3>

<p>Generate a vector of random alphanumeric strings each of an arbitrary length.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rndstr(n, len, characterFirst)

## S4 method for signature 'numeric,numeric,logical'
rndstr(n, len, characterFirst)

## S4 method for signature 'numeric,numeric,missing'
rndstr(n, len)

## S4 method for signature 'numeric,missing,logical'
rndstr(n, characterFirst)

## S4 method for signature 'missing,numeric,logical'
rndstr(len, characterFirst)

## S4 method for signature 'numeric,missing,missing'
rndstr(n)

## S4 method for signature 'missing,numeric,missing'
rndstr(len)

## S4 method for signature 'missing,missing,logical'
rndstr(characterFirst)

## S4 method for signature 'missing,missing,missing'
rndstr(n, len, characterFirst)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rndstr_+3A_n">n</code></td>
<td>
<p>Number of strings to generate (default 1).
Will attempt to coerce to integer value.</p>
</td></tr>
<tr><td><code id="rndstr_+3A_len">len</code></td>
<td>
<p>Length of strings to generate (default 8).
Will attempt to coerce to integer value.</p>
</td></tr>
<tr><td><code id="rndstr_+3A_characterfirst">characterFirst</code></td>
<td>
<p>Logical, if <code>TRUE</code>, then a letter will be the
first character of the string (useful if being used for object names).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of random strings.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(11)
rndstr()
rndstr(len = 10)
rndstr(characterFirst = FALSE)
rndstr(n = 5, len = 10)
rndstr(n = 5)
rndstr(n = 5, characterFirst = TRUE)
rndstr(len = 10, characterFirst = TRUE)
rndstr(n = 5, len = 10, characterFirst = TRUE)

</code></pre>

<hr>
<h2 id='saveFiles'>Save objects using <code>.saveObjects</code> in <code>params</code> slot of <code>simInit</code></h2><span id='topic+saveFiles'></span>

<h3>Description</h3>

<p>In the <code><a href="#topic+simInit">simInit()</a></code> call, a parameter called <code>.saveObjects</code> can be provided in
each module.
This must be a character string vector of all object names to save. These objects will
then be saved whenever a call to <code>saveFiles</code> is made.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveFiles(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveFiles_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The file names will be equal to the object name plus <code>time(sim)</code> is
appended at the end.
The files are saved as <code>.rds</code> files, meaning, only one object gets
saved per file.
</p>
<p>For objects saved using this function, the module developer must create save
events that schedule a call to <code>saveFiles</code>.
</p>
<p>If this function is used outside of a module, it will save all files in the
<code>outputs(sim)</code> that are scheduled to be saved at the current time in the <code>simList.</code>
</p>
<p>There are several ways to save objects using <code>SpaDES</code>.
</p>


<h3>Value</h3>

<p>(invisibly) the modified <code>sim</code> object.
invoked for side effect of saving the simulation to file.
</p>


<h3>Model-level saving</h3>

<p>Using the <code>outputs</code> slot in the <code><a href="#topic+simInit">simInit()</a></code> call.
See example in <code><a href="#topic+simInit">simInit()</a></code>.
This can be convenient because it gives overall control of many modules at a
time, and it gets automatically scheduled during the <code><a href="#topic+simInit">simInit()</a></code> call.
</p>


<h3>Module-level saving</h3>

<p>Using the <code>saveFiles</code> function inside a module.
This must be accompanied by a <code>.saveObjects</code> vector or list element in the
<code>params</code> slot in the <code><a href="#topic+simList">simList()</a></code>.
Usually a module developer will create this method for future users of their module.
</p>


<h3>Custom saving</h3>

<p>A module developer can save any object at any time inside their module, using
standard R functions for saving R objects (e.g., <code>save</code> or <code>saveRDS</code>).
This is the least modular approach, as it will happen whether a module user
wants it or not.
</p>


<h3>Note</h3>

<p>It is not possible to schedule separate saving events for each object
that is listed in the <code>.saveObjects</code>.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
requireNamespace("NLMR", quietly = TRUE)) {
## This will save the "caribou" object at the save interval of 1 unit of time
## in the outputPath location
  outputPath &lt;- file.path(tempdir(), "test_save")
  times &lt;- list(start = 0, end = 1, "month")
  parameters &lt;- list(
    .globals = list(stackName = "landscape"),
    caribouMovement = list(
      .saveObjects = "caribou",
      .saveInitialTime = 1, .saveInterval = 1,
      .plots = NA
    ),
    randomLandscapes = list(.plots = NA, nx = 20, ny = 20))

  modules &lt;- list("randomLandscapes", "caribouMovement")
  paths &lt;- list(
    modulePath = getSampleModules(tempdir()),
    outputPath = outputPath
  )
  opts &lt;- options("spades.moduleCodeChecks" = FALSE) # not necessary for example
  mySim &lt;- simInit(times = times, params = parameters, modules = modules,
                   paths = paths)

  # The caribou module has a saveFiles(sim) call, so it will save caribou
  spades(mySim)
  dir(outputPath)

  # remove the files
  file.remove(dir(outputPath, full.names = TRUE))

  ## save multiple outputs
  parameters &lt;- list(
    .globals = list(stackName = "landscape"),
    caribouMovement = list(
      .saveObjects = c("caribou", "habitatQuality"),
      .saveInitialTime = 1, .saveInterval = 1,
      .plots = NA
    ),
    randomLandscapes = list(.plots = NA, nx = 20, ny = 20))

  mySim &lt;- simInit(times = times, params = parameters, modules = modules,
                 paths = paths)

  spades(mySim)
  dir(outputPath)
  # remove the files
  file.remove(dir(outputPath, full.names = TRUE))

  options(opts) # clean up

}
</code></pre>

<hr>
<h2 id='saveSimList'>Save a whole <code>simList</code> object to disk</h2><span id='topic+saveSimList'></span><span id='topic+saveSim'></span>

<h3>Description</h3>

<p>Saving a <code>simList</code> may not work using the standard approaches
(e.g., <code>save</code>, <code>saveRDS</code>, and <code>qs::qsave</code>).
There are 2 primary reasons why this doesn't work as expected:
the <code>activeBindings</code> that are in place within modules
(these allow the <code>mod</code> and <code>Par</code> to exist), and file-backed objects,
such as <code>SpatRaster</code> and <code style="white-space: pre;">&#8288;Raster*&#8288;</code>.
Because of these, a user should use <code>saveSimList</code> and <code>loadSimList</code>.
These will save the object and recover the object using the <code>filename</code> supplied,
if there are no file-backed objects.
If there are file-backed objects, then it will save an archive
(default is <code>.tar.gz</code> using the <code>archive</code> package for non-Windows and <code><a href="utils.html#topic+zip">zip()</a></code>
if using Windows, as there is currently an unidentified bug in <code style="white-space: pre;">&#8288;archive*&#8288;</code> on Windows).
The user does not need to specify the filename any differently,
as the code will search based on the filename without the file extension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveSimList(
  sim,
  filename,
  projectPath = getwd(),
  outputs = TRUE,
  inputs = TRUE,
  cache = FALSE,
  envir,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveSimList_+3A_sim">sim</code></td>
<td>
<p>Either a <code>simList</code> or a character string of the name
of a <code>simList</code> that can be found in <code>envir</code>.
Using a character string will assign that object name to the saved
<code>simList</code>, so when it is recovered it will be given that name.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_filename">filename</code></td>
<td>
<p>Character string with the path for saving <code>simList</code> to or
reading the <code>simList</code> from. Currently, only <code>.rds</code> and <code>.qs</code> file types are supported.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_projectpath">projectPath</code></td>
<td>
<p>Should be the &quot;top level&quot; or project path for the <code>simList</code>.
Defaults to <code>getwd()</code>. All other paths will be made relative with respect to
this if nested within this.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_outputs">outputs</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all files identified in
<code>outputs(sim)</code> will be included in the zip.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_inputs">inputs</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all files identified in
<code>inputs(sim)</code> will be included in the zip.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_cache">cache</code></td>
<td>
<p>Logical. Not yet implemented. If <code>TRUE</code>, all files in <code>cachePath(sim)</code>
will be included in the archive.
Defaults to <code>FALSE</code> as this could be large, and may include many out of date elements.
See Details.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_envir">envir</code></td>
<td>
<p>If <code>sim</code> is a character string, then this must be provided.
It is the environment where the object named <code>sim</code> can be found.</p>
</td></tr>
<tr><td><code id="saveSimList_+3A_...">...</code></td>
<td>
<p>Additional arguments. See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There is a family of 2 functions that are mutually useful for saving and
loading <code>simList</code> objects and their associated files (e.g., file-backed
<code style="white-space: pre;">&#8288;Raster*&#8288;</code>, <code>inputs</code>, <code>outputs</code>, <code>cache</code>) <code><a href="#topic+saveSimList">saveSimList()</a></code>, <code><a href="#topic+loadSimList">loadSimList()</a></code>.
</p>
<p>Additional arguments may be passed via <code>...</code>, including:
</p>

<ul>
<li> <p><code>files</code>: logical indicating whether files should be included in the archive.
if <code>FALSE</code>, will override <code>cache</code>, <code>inputs</code>, <code>outputs</code>, setting them to <code>FALSE</code>.
</p>
</li>
<li> <p><code>symlinks</code>: a named list of paths corresponding to symlinks, which will be used to substitute
normalized absolute paths of files.
Names should correspond to the names in <code>paths()</code>;
values should be project-relative paths.
E.g., <code>list(cachePath = "cache", inputPath = "inputs", outputPath = "outputs")</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>Invoked for side effects of saving a <code>.qs</code> or <code>.rds</code> file,
or a <code>.tar.gz</code> (non-Windows) or <code>.zip</code> (Windows).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadSimList">loadSimList()</a></code>
</p>

<hr>
<h2 id='scheduleConditionalEvent'>Schedule a conditional simulation event</h2><span id='topic+scheduleConditionalEvent'></span>

<h3>Description</h3>

<p>Adds a new event to the simulation's conditional event queue,
updating the simulation object by creating or appending to
<code>sim$._conditionalEvents</code>.
<em>This is very experimental. Use with caution.</em>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scheduleConditionalEvent(
  sim,
  condition,
  moduleName,
  eventType,
  eventPriority = .normal(),
  minEventTime = start(sim),
  maxEventTime = end(sim)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scheduleConditionalEvent_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_condition">condition</code></td>
<td>
<p>A string, call or expression that will be assessed for <code>TRUE</code>
after each event in the regular event queue.
It can access objects in the <code>simList</code> by using functions of <code>sim</code>,
e.g., <code>"sim$age &gt; 1"</code></p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_modulename">moduleName</code></td>
<td>
<p>A character string specifying the module from which to
call the event. If missing, it will use
<code>currentModule(sim)</code></p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_eventtype">eventType</code></td>
<td>
<p>A character string specifying the type of event from
within the module.</p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_eventpriority">eventPriority</code></td>
<td>
<p>A numeric specifying the priority of the event.
Lower number means higher priority. As a best practice, it is
recommended that decimal values are conceptual
grouped by their integer values (e.g., 4.0, 4.25, 4.5 are conceptually
similar).
See <code><a href="#topic+priority">priority()</a></code>.</p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_mineventtime">minEventTime</code></td>
<td>
<p>A numeric specifying the time before which the event should not occur,
even if the condition is met. Defaults to <code>start(sim)</code></p>
</td></tr>
<tr><td><code id="scheduleConditionalEvent_+3A_maxeventtime">maxEventTime</code></td>
<td>
<p>A numeric specifying the time after which the event should not occur,
even if the condition is met. Defaults to <code>end(sim)</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This conditional event queue will be assessed at every single event in the normal event
queue. If there are no conditional events, then <code>spades</code> will proceed as normal.
As conditional event conditions are found to be true, then it will trigger a call to
<code>scheduleEvent(...)</code> with the current time passed to <code>eventTime</code> <em>and</em>
it will remove the conditional event from the conditional queue.
If the user would like the triggered conditional event to occur as the very next event,
then a possible strategy would be to set <code>eventPriority</code> of the conditional event
to very low or even negative to ensure it gets inserted at the top of the event queue.
</p>


<h3>Value</h3>

<p>Returns the modified <code>simList</code> object, i.e., <code>sim$._conditionalEvents</code>.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scheduleEvent">scheduleEvent()</a></code>, <code><a href="#topic+conditionalEvents">conditionalEvents()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  sim &lt;- simInit(times = list(start = 0, end = 2))
  condition &lt;- "sim$age &gt; 1" # provide as string
  condition &lt;- quote(sim$age &gt; 1) # provide as a call
  condition &lt;- expression(sim$age &gt; 1) # provide as an expression
  sim &lt;- scheduleConditionalEvent(sim, condition, "firemodule", "burn")
  conditionalEvents(sim)
  sim &lt;- spades(sim) # no changes to sim$age, i.e., it is absent
  events(sim) # nothing scheduled
  sim$age &lt;- 2 # change the value
  sim &lt;- spades(sim) # Run spades, the condition is now true, so event is
                     #  scheduled at current time
  events(sim)        # now scheduled in the normal event queue
</code></pre>

<hr>
<h2 id='scheduleEvent'>Schedule a simulation event</h2><span id='topic+scheduleEvent'></span>

<h3>Description</h3>

<p>Adds a new event to the simulation's event queue, updating the simulation object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scheduleEvent(
  sim,
  eventTime,
  moduleName,
  eventType,
  eventPriority = .pkgEnv$.normalVal,
  .skipChecks = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scheduleEvent_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td></tr>
<tr><td><code id="scheduleEvent_+3A_eventtime">eventTime</code></td>
<td>
<p>A numeric specifying the time of the next event.</p>
</td></tr>
<tr><td><code id="scheduleEvent_+3A_modulename">moduleName</code></td>
<td>
<p>A character string specifying the module from which to
call the event. If missing, it will use
<code>currentModule(sim)</code></p>
</td></tr>
<tr><td><code id="scheduleEvent_+3A_eventtype">eventType</code></td>
<td>
<p>A character string specifying the type of event from
within the module.</p>
</td></tr>
<tr><td><code id="scheduleEvent_+3A_eventpriority">eventPriority</code></td>
<td>
<p>A numeric specifying the priority of the event.
Lower number means higher priority. As a best practice, it is
recommended that decimal values are conceptual
grouped by their integer values (e.g., 4.0, 4.25, 4.5 are conceptually
similar).
See <code><a href="#topic+priority">priority()</a></code>.</p>
</td></tr>
<tr><td><code id="scheduleEvent_+3A_.skipchecks">.skipChecks</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then internal checks that arguments match
expected types are skipped. Should only be used if speed is critical.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Here, we implement a simulation in a more modular fashion so it's easier to add
submodules to the simulation. We use S4 classes and methods, and use <code>data.table</code>
instead of <code>data.frame</code> to implement the event queue (because it is much faster).
</p>


<h3>Value</h3>

<p>Returns the modified <code>simList</code> object.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+priority">priority()</a></code>, <code><a href="#topic+scheduleConditionalEvent">scheduleConditionalEvent()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> sim &lt;- simInit()
 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn") # default priority
 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn", .normal()) # default priority

 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn", .normal()-1) # higher priority
 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn", .normal()+1) # lower priority

 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn", .highest()) # highest priority
 sim &lt;- scheduleEvent(sim, time(sim) + 1.0, "fireSpread", "burn", .lowest()) # lowest priority
 events(sim) # shows all scheduled events, with eventTime and priority
</code></pre>

<hr>
<h2 id='setPaths'>Get and set default working directories</h2><span id='topic+setPaths'></span><span id='topic+.paths'></span><span id='topic+getPaths'></span><span id='topic+Paths'></span>

<h3>Description</h3>

<p>Wrapper functions to access the packages options for default working directories.
Note: there is an active binding made to <code>Paths</code>, so a user can use
<code>Paths$cachePath</code> for example instead of <code>getPaths()$cachePath</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.paths()

getPaths()

Paths

setPaths(
  cachePath,
  inputPath,
  modulePath,
  outputPath,
  rasterPath,
  scratchPath,
  terraPath,
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setPaths_+3A_cachepath">cachePath</code></td>
<td>
<p>The default local directory in which to cache simulation outputs.
If not specified, defaults to <code>getOption("reproducible.cachePath")</code>.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_inputpath">inputPath</code></td>
<td>
<p>The default local directory in which to look for simulation inputs
If not specified, defaults to <code>getOption("spades.inputPath")</code>.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_modulepath">modulePath</code></td>
<td>
<p>The default local directory where modules and data will be
downloaded and stored.
If not specified, defaults to <code>getOption("spades.modulePath")</code>.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_outputpath">outputPath</code></td>
<td>
<p>The default local directory in which to save simulation outputs.
If not specified, defaults to <code>getOption("spades.outputPath")</code>.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_rasterpath">rasterPath</code></td>
<td>
<p>The default local directory in which to save transient raster files.
If not specified, defaults to
<code>file.path(getOption("spades.scratchPath"), "raster")</code>.
<em>Important note:</em> this location may not be cleaned up automatically,
so be sure to monitor this directory and remove unnecessary temp files
that may contribute to excessive disk usage.
<em>This option will be deprecated in a future release.</em></p>
</td></tr>
<tr><td><code id="setPaths_+3A_scratchpath">scratchPath</code></td>
<td>
<p>The default local directory in which to save transient files.
If not specified, defaults to <code>getOption("spades.scratchPath")</code>.
<em>Important note:</em> this location may not be cleaned up automatically,
so be sure to monitor this directory and remove unnecessary temp files
that may contribute to excessive disk usage.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_terrapath">terraPath</code></td>
<td>
<p>The default local directory in which to save transient <code>terra</code> files.
If not specified, defaults to
<code>file.path(getOption("spades.scratchPath"), "terra")</code>.
<em>Important note:</em> this location may not be cleaned up automatically,
so be sure to monitor this directory and remove unnecessary temp files
that may contribute to excessive disk usage.</p>
</td></tr>
<tr><td><code id="setPaths_+3A_silent">silent</code></td>
<td>
<p>Logical. Should the messaging occur.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 7.
</p>


<h3>Value</h3>

<p><code>getPaths</code> returns a named list of the user's default working directories.
<code>setPaths</code> is invoked for the side effect of setting these directories.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
getPaths()                       ## returns the current default working paths

## set individual custom paths
setPaths(cachePath = file.path(tempdir(), "cache"))
setPaths(inputPath = file.path(tempdir(), "inputs"))
setPaths(modulePath = file.path(tempdir(), "modules"))
setPaths(outputPath = file.path(tempdir(), "outputs"))
setPaths(scratchPath = file.path(tempdir(), "scratch"))

# NOTE: on loading and attaching SpaDES.core,
# an active binding is made to "Paths"

getPaths()
Paths ## same as getPaths() above
setPaths(outputPath = tempdir())
Paths # shows change


</code></pre>

<hr>
<h2 id='show+2CsimList-method'>Show an Object</h2><span id='topic+show+2CsimList-method'></span>

<h3>Description</h3>

<p>Show an Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'simList'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CsimList-method_+3A_object">object</code></td>
<td>
<p><code>simList</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='simFile'>Generate simulation file name</h2><span id='topic+simFile'></span>

<h3>Description</h3>

<p>Assists with saving and retrieving simulations (e.g., with <code>saveSimList</code> and <code>loadSimList</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simFile(name, path, time = NULL, ext = "rds")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simFile_+3A_name">name</code></td>
<td>
<p>Object name (e.g., <code>"mySimOut"</code>)</p>
</td></tr>
<tr><td><code id="simFile_+3A_path">path</code></td>
<td>
<p>Directory location in where the file will be located (e.g., an <code>outputPath</code>).</p>
</td></tr>
<tr><td><code id="simFile_+3A_time">time</code></td>
<td>
<p>Optional simulation time to use as filename suffix. Default <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="simFile_+3A_ext">ext</code></td>
<td>
<p>The file extension to use (default <code>"rds"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string giving a file path for a simulation file
</p>

<hr>
<h2 id='simInit'>Initialize a new simulation</h2><span id='topic+simInit'></span><span id='topic+simInit+2Clist+2Clist+2Clist+2Clist+2Clist+2Cdata.frame+2Cdata.frame+2Ccharacter-method'></span><span id='topic+simInit+2CANY+2CANY+2CANY+2Ccharacter+2CANY+2CANY+2CANY+2CANY-method'></span><span id='topic+simInit+2CANY+2CANY+2Ccharacter+2CANY+2CANY+2CANY+2CANY+2CANY-method'></span><span id='topic+simInit+2CANY+2CANY+2CANY+2CANY+2CANY+2CANY+2CANY+2CANY-method'></span><span id='topic+simInitDefaults'></span>

<h3>Description</h3>

<p>Create a new simulation object, the <code>sim</code> object (a <code>simList</code>).
This object is implemented using an <code>environment</code> where all objects and functions are placed.
Since environments in <code>R</code> are pass by reference, &quot;putting&quot; objects in
the <code>sim</code> object does no actual copy.
The <code>simList</code> also stores all parameters, and other important simulation
information, such as times, paths, modules, and module load order.
See more details below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simInit(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan = NULL,
  ...
)

## S4 method for signature 
## 'list,list,list,list,list,data.frame,data.frame,character'
simInit(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan = NULL,
  ...
)

## S4 method for signature 'ANY,ANY,ANY,character,ANY,ANY,ANY,ANY'
simInit(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan = NULL,
  ...
)

## S4 method for signature 'ANY,ANY,character,ANY,ANY,ANY,ANY,ANY'
simInit(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan = NULL,
  ...
)

## S4 method for signature 'ANY,ANY,ANY,ANY,ANY,ANY,ANY,ANY'
simInit(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan = NULL,
  ...
)

simInitDefaults()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simInit_+3A_times">times</code></td>
<td>
<p>A named list of numeric simulation start and end times
(e.g., <code>times = list(start = 0.0, end = 10.0, timeunit = "year")</code>),
with the final optional element, <code>timeunit</code>, overriding the default
time unit used in the simulation which is the &quot;smallest time unit&quot; across all
modules. See examples.</p>
</td></tr>
<tr><td><code id="simInit_+3A_params">params</code></td>
<td>
<p>A list of lists of the form <code>list(moduleName=list(param1=value, param2=value))</code>.
See details.</p>
</td></tr>
<tr><td><code id="simInit_+3A_modules">modules</code></td>
<td>
<p>A named list of character strings specifying the names of modules to be loaded
for the simulation.
Note: the module name should correspond to the R source file from which the module is loaded.
Example: a module named &quot;caribou&quot; will be sourced form the file &lsquo;<span class="file">caribou.R</span>&rsquo;,
located at the specified <code>modulePath(simList)</code> (see below).</p>
</td></tr>
<tr><td><code id="simInit_+3A_objects">objects</code></td>
<td>
<p>(optional) A vector of object names (naming objects
that are in the calling environment of
the <code>simInit</code>, which is often the
<code>.GlobalEnv</code> unless used programmatically.
NOTE: this mechanism will
fail if object name is in a package dependency), or
a named list of data objects to be
passed into the <code>simList</code> (more reliable).
These objects will be accessible
from the <code>simList</code> as a normal list, e.g,. <code>mySim$obj</code>.</p>
</td></tr>
<tr><td><code id="simInit_+3A_paths">paths</code></td>
<td>
<p>An optional named list with up to 4 named elements,
<code>modulePath</code>, <code>inputPath</code>, <code>outputPath</code>, and <code>cachePath</code>.
See details. NOTE: Experimental feature now allows for multiple <code>modulePath</code>s
to be specified in a character vector. The modules will be searched for sequentially
in the first <code>modulePath</code>, then if it doesn't find it, in the second etc.</p>
</td></tr>
<tr><td><code id="simInit_+3A_inputs">inputs</code></td>
<td>
<p>A <code>data.frame</code>. Can specify from 1 to 6
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>interval</code> (numeric), <code>loadTime</code> (numeric).
See <code><a href="#topic+inputs">inputs()</a></code> and vignette(&quot;ii-modules&quot;) section about inputs.</p>
</td></tr>
<tr><td><code id="simInit_+3A_outputs">outputs</code></td>
<td>
<p>A <code>data.frame</code>. Can specify from 1 to 5
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>saveTime</code> (numeric) and <code>eventPriority</code> (numeric). If
<code>eventPriority</code> is not set, it defaults to <code>.last()</code>. If <code>eventPriority</code>
is set to a low value, e.g., 0, 1, 2 and <code>saveTime</code> is <code>start(sim)</code>,
it should give &quot;initial conditions&quot;.
</p>
<p>See <code><a href="#topic+outputs">outputs()</a></code> and
<code>vignette("ii-modules")</code> section about outputs.</p>
</td></tr>
<tr><td><code id="simInit_+3A_loadorder">loadOrder</code></td>
<td>
<p>An optional character vector of module names specifying the order in
which to load the modules. If not specified, the module
load order will be determined automatically.</p>
</td></tr>
<tr><td><code id="simInit_+3A_notolderthan">notOlderThan</code></td>
<td>
<p>A time, as in from <code>Sys.time()</code>. This is passed into
the <code>Cache</code> function that wraps <code>.inputObjects</code>.
If the module uses the <code>.useCache</code> parameter and it is
set to <code>TRUE</code> or <code>".inputObjects"</code>,
then the <code>.inputObjects</code> will be cached.
Setting <code>notOlderThan = Sys.time()</code> will cause the
cached versions of <code>.inputObjects</code> to be refreshed,
i.e., rerun.</p>
</td></tr>
<tr><td><code id="simInit_+3A_...">...</code></td>
<td>
<p>An alternative way to pass <code>objects</code>, i.e., they can just be named
arguments rather than in a <code>objects = list(...)</code>. It can also be any
<code>options</code> that begins with <code>spades</code>, <code>reproducible</code> or <code>Require</code>, i.e.,
those identified in <code>spadesOptions()</code>,
<code>reproducibleOptions()</code> or <code>RequireOptions()</code>.
These will be assigned to the equivalent option <em>during</em> the <code>simInit</code> and <code>spades</code>
calls only, i.e., they will revert after the <code>simInit</code> or <code>spades</code> calls
are complete. NOTE: these are not passed to the <code>simList</code> per se, i.e., they are
not be available in the <code>simList</code> during either
the <code>simInit</code> or <code>spades</code> calls via <code>sim$xxx</code>, though they will be returned to the <code>simList</code>
at the end of each of these calls (so that the next call to e.g., <code>spades</code> can
see them). For convenience, these can be supplied without their package prefix,
e.g., <code>lowMemory</code> can be specified instead of <code>spades.lowMemory</code>. In cases that
share option name (<code>reproducible.verbose</code> and <code>Require.verbose</code> both exist),
passing <code>verbose = FALSE</code> will set both. Obviously this may cause unexpected
problems if a module is also expecting a value.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Calling this <code>simInit</code> function does the following:</h4>


<table>
<tr>
 <td style="text-align: left;">
<strong>What</strong> </td><td style="text-align: left;"> <strong>Details</strong> </td><td style="text-align: left;"> <strong>Argument(s) to use</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
fills <code>simList</code> slots </td><td style="text-align: left;"> places the arguments <code>times</code>,
<code>params</code>, <code>modules</code>, <code>paths</code> into equivalently named
<code>simList</code> slots </td><td style="text-align: left;"> <code>times</code>,
<code>params</code>, <code>modules</code>, <code>paths</code></td>
</tr>
<tr>
 <td style="text-align: left;">
sources all module files </td><td style="text-align: left;"> places all function definitions in the
<code>simList</code>, specifically, into a sub-environment of the main
<code>simList</code> environment: e.g., <code style="white-space: pre;">&#8288;sim$&lt;moduleName&gt;$function1&#8288;</code>
(see section on <strong>Scoping</strong>) </td><td style="text-align: left;"> <code>modules</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
copies objects </td><td style="text-align: left;"> from the global environment to the
<code>simList</code> environment </td><td style="text-align: left;"> <code>objects</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
loads objects </td><td style="text-align: left;"> from disk into the <code>simList</code> </td><td style="text-align: left;"> <code>inputs</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
schedule object loading/copying </td><td style="text-align: left;"> Objects can be loaded into the
<code>simList</code> at any time during a simulation  </td><td style="text-align: left;"> <code>inputs</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
schedule object saving </td><td style="text-align: left;"> Objects can be saved to disk at any arbitrary
time during the simulation. If specified here, this will be in addition
to any saving due code inside a module (i.e., a module may manually
run <code>write.table(...)</code> </td><td style="text-align: left;"> <code>outputs</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
schedules "init" events </td><td style="text-align: left;"> from all modules (see <code><a href="#topic+events">events()</a></code>)
</td><td style="text-align: left;"> automatic  </td>
</tr>
<tr>
 <td style="text-align: left;">
assesses module dependencies </td><td style="text-align: left;"> via the inputs and outputs identified in their
metadata. This gives the order of the <code>.inputObjects</code> and <code>init</code>
events. This can be overridden by <code>loadOrder</code>. </td><td style="text-align: left;"> automatic </td>
</tr>
<tr>
 <td style="text-align: left;">
determines time unit </td><td style="text-align: left;"> takes time units of modules
and how they fit together </td><td style="text-align: left;"> <code>times</code> or automatic </td>
</tr>
<tr>
 <td style="text-align: left;">
runs <code>.inputObjects</code> functions </td><td style="text-align: left;"> from every module
<em>in the module order as determined above</em> </td><td style="text-align: left;"> automatic </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p><code>params</code> can only contain updates to any parameters that are defined in
the metadata of modules. Take the example of a module named, <code>Fire</code>, which
has a parameter named <code>.plotInitialTime</code>. In the metadata of that module,
it says <code>TRUE</code>. Here we can override that default with:
<code>list(Fire=list(.plotInitialTime=NA))</code>, effectively turning off plotting.
Since this is a list of lists, one can override the module defaults for multiple
parameters from multiple modules all at once, with say:
<code>list(Fire = list(.plotInitialTime = NA, .plotInterval = 2), caribouModule = list(N = 1000))</code>.
</p>
<p>The <code>params</code> list can contain a list (named <code>.globals</code>) of named objects
e.g., <code>.globals = list(climateURL = "https:\\something.com")</code> entry. Any and every
module that has a parameter with that name (in this case <code>climateURL</code>) will be
overridden with this value as passed.
</p>
<p><code>params</code> can be used to set the seed for a specific event in a module. This
is done using the normal <code>params</code> argument, specifying <code>.seed</code> as a list
where the elements are a numeric for the seed and the name is the event. Since
parameters must be specific to a module, this creates a module and event specific
seed e.g., <code>params = list(moduleName = list(.seed = list(init = 123)))</code> will
set the <code>init</code> event of module named <code>moduleName</code> to 123. The RN stream
will be reset to its state prior to the <code>set.seed</code> call after the event.
</p>
<p>We implement a discrete event simulation in a more modular fashion so it is
easier to add modules to the simulation. We use S4 classes and methods,
and fast lists to manage the event queue.
</p>
<p><code>paths</code> specifies the location of the module source files,
the data input files, and the saving output files. If no paths are specified
the defaults are as follows:
</p>

<ul>
<li> <p><code>cachePath</code>: <code>getOption("reproducible.cachePath")</code>;
</p>
</li>
<li> <p><code>inputPath</code>: <code>getOption("spades.modulePath")</code>;
</p>
</li>
<li> <p><code>modulePath</code>: <code>getOption("spades.inputPath")</code>;
</p>
</li>
<li> <p><code>inputPath</code>: <code>getOption("spades.outputPath")</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>simList</code> simulation object, pre-initialized from values
specified in the arguments supplied.
</p>


<h3>Parsing and Checking Code</h3>

<p>The <code>simInit</code> function will attempt to find usage of <code>sim$xxx</code> or <code>sim[['xxx']]</code>
on either side of the assignment (<code style="white-space: pre;">&#8288;&lt;-&#8288;</code>) operator.
It will compare these to the module metadata, specifically <code>inputObjects</code> for cases where
objects or &quot;gotten&quot; from the <code>simList</code> and <code>outputObjects</code> for cases where objects are
assigned to the <code>simList.</code>
</p>
<p>It will also attempt to find potential, common function name conflicts with things like
<code>scale</code> and <code>stack</code> (both in <span class="pkg">base</span> and <span class="pkg">raster</span>), and
<code>Plot</code> (in <span class="pkg">quickPlot</span> and some modules).
</p>
<p><em>This code checking is young and may get false positives and false negatives,
i.e., miss things</em>.
It also takes computational time, which may be undesirable in operational code.
To turn off checking (i.e., if there are too many false positives and negatives), set
<code>options(spades.moduleCodeChecks = FALSE)</code>.
</p>


<h3>Caching</h3>

<p>Using caching with <code>SpaDES</code> is vital when building re-usable and reproducible content.
Please see the vignette dedicated to this topic.
</p>


<h3>Note</h3>

<p>Since the objects in the <code>simList</code> are passed-by-reference, it is useful
to create a copy of the initialized <code>simList</code> object prior to running
the simulation (e.g., <code>mySimOut &lt;- spades(Copy(mySim))</code>).
This ensures you retain access to the original objects, which would otherwise
be overwritten/modified during the simulation.
</p>
<p>The user can opt to run a simpler <code>simInit</code> call without inputs, outputs, and times.
These can be added later with the accessor methods (See example).
These are not required for initializing the simulation via <code>simInit</code>.
All of <code>modules</code>, <code>paths</code>, <code>params</code>, and <code>objects</code> are needed
for successful initialization.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+spades">spades()</a></code>, <code><a href="#topic+defineModule">defineModule()</a></code> to get help on metadata elements,
<code><a href="#topic+times">times()</a></code>, <code><a href="#topic+params">params()</a></code>, <code><a href="#topic+objs">objs()</a></code>, <code><a href="#topic+paths">paths()</a></code>,
<code><a href="#topic+modules">modules()</a></code>, <code><a href="#topic+inputs">inputs()</a></code>, <code><a href="#topic+outputs">outputs()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Tests take several seconds
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
requireNamespace("NLMR", quietly = TRUE)) {
opts &lt;- options("spades.moduleCodeChecks" = FALSE, "spades.useRequire" = FALSE)
if (!interactive()) opts &lt;- append(opts, options("spades.plots" = NA,
                                                 "spades.debug" = FALSE))

mySim &lt;- simInit(
 times = list(start = 0.0, end = 2.0, timeunit = "year"),
 params = list(
   .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
 ),
 modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
 paths = list(modulePath = getSampleModules(tempdir()))
)
spades(mySim) # shows plotting

# Change more parameters, removing plotting
mySim &lt;- simInit(
 times = list(start = 0.0, end = 2.0, timeunit = "year"),
 params = list(
   .globals = list(stackName = "landscape", burnStats = "nPixelsBurned"),
   fireSpread = list(.plotInitialTime = NA)
 ),
 modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
 paths = list(modulePath = getSampleModules(tempdir()))
)
outSim &lt;- spades(mySim)

# A little more complicated with inputs and outputs
mapPath &lt;- system.file("maps", package = "quickPlot")
mySim &lt;- simInit(
  times = list(start = 0.0, end = 2.0, timeunit = "year"),
  params = list(
    .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
  ),
  modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
  paths = list(modulePath = getSampleModules(tempdir()),
               outputPath = tempdir()),
  inputs = data.frame(
    files = dir(file.path(mapPath), full.names = TRUE, pattern = "tif")[1:2],
    functions = "rast",
    package = "terra",
    loadTime = 1,
    stringsAsFactors = FALSE),
  outputs = data.frame(
    expand.grid(objectName = c("caribou","landscape"),
    saveTime = 1:2,
    stringsAsFactors = FALSE)))

 # Use accessors for inputs, outputs
 mySim2 &lt;- simInit(
   times = list(start = 0.0, end = 2.0, timeunit = "year"),
   modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
   params = list(
     .globals = list(stackName = "landscape", burnStats = "nPixelsBurned"),
     randomLandscapes = list(nx = 10, ny = 10)
     ),
   paths = list(
     modulePath = getSampleModules(tempdir()),
     outputPath = tempdir()
   )
 )

 # add by accessor is equivalent
 inputs(mySim2) &lt;- data.frame(
     files = dir(file.path(mapPath), full.names = TRUE, pattern = "tif")[1:2],
     functions = "rast",
     package = "terra",
     loadTime = 1,
     stringsAsFactors = FALSE)
 outputs(mySim2) &lt;- data.frame(
     expand.grid(objectName = c("caribou", "landscape"),
     saveTime = 1:2,
     stringsAsFactors = FALSE))
 all.equal(mySim, mySim2) # TRUE

 # Use accessors for times -- does not work as desired because times are
 #   adjusted to the input timeunit during simInit
 mySim2 &lt;- simInit(
   params = list(
     .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
   ),
   modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
   paths = list(modulePath = getSampleModules(tempdir()),
                outputPath = tempdir()),
   inputs = data.frame(
     files = dir(file.path(mapPath), full.names = TRUE, pattern = "tif")[1:2],
     functions = "rast",
     package = "terra",
     loadTime = 1,
     stringsAsFactors = FALSE),
   outputs = data.frame(
     expand.grid(objectName = c("caribou","landscape"),
     saveTime = 1:2,
     eventPriority = c(0,10), # eventPriority 0 may give "initial" conditions
     stringsAsFactors = FALSE))
 )

 # add times by accessor fails all.equal test because "year" was not
 #   declared during module loading, so month became the default
 times(mySim2) &lt;- list(current = 0, start = 0.0, end = 2.0, timeunit = "year")
 all.equal(mySim, mySim2) # fails because time units are all different, so
                          # several parameters that have time units in
                          # "months" because they were loaded that way
 params(mySim)$fireSpread$.plotInitialTime
 params(mySim2)$fireSpread$.plotInitialTime
 events(mySim) # load event is at time 1 year
 events(mySim2) # load event is at time 1 month, reported in years because of
                #   update to times above
options(opts)

}


</code></pre>

<hr>
<h2 id='simInitAndSpades'>Call <code>simInit</code> and <code>spades</code> together</h2><span id='topic+simInitAndSpades'></span>

<h3>Description</h3>

<p>These functions are convenience wrappers that may allow for more efficient caching.
Passes all arguments to <code>simInit()</code>, then passes the created <code>simList</code> to <code>spades()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simInitAndSpades(
  times,
  params,
  modules,
  objects,
  paths,
  inputs,
  outputs,
  loadOrder,
  notOlderThan,
  debug,
  progress,
  cache,
  .plots,
  .plotInitialTime,
  .saveInitialTime,
  events,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simInitAndSpades_+3A_times">times</code></td>
<td>
<p>A named list of numeric simulation start and end times
(e.g., <code>times = list(start = 0.0, end = 10.0, timeunit = "year")</code>),
with the final optional element, <code>timeunit</code>, overriding the default
time unit used in the simulation which is the &quot;smallest time unit&quot; across all
modules. See examples.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_params">params</code></td>
<td>
<p>A list of lists of the form <code>list(moduleName=list(param1=value, param2=value))</code>.
See details.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_modules">modules</code></td>
<td>
<p>A named list of character strings specifying the names of modules to be loaded
for the simulation.
Note: the module name should correspond to the R source file from which the module is loaded.
Example: a module named &quot;caribou&quot; will be sourced form the file &lsquo;<span class="file">caribou.R</span>&rsquo;,
located at the specified <code>modulePath(simList)</code> (see below).</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_objects">objects</code></td>
<td>
<p>(optional) A vector of object names (naming objects
that are in the calling environment of
the <code>simInit</code>, which is often the
<code>.GlobalEnv</code> unless used programmatically.
NOTE: this mechanism will
fail if object name is in a package dependency), or
a named list of data objects to be
passed into the <code>simList</code> (more reliable).
These objects will be accessible
from the <code>simList</code> as a normal list, e.g,. <code>mySim$obj</code>.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_paths">paths</code></td>
<td>
<p>An optional named list with up to 4 named elements,
<code>modulePath</code>, <code>inputPath</code>, <code>outputPath</code>, and <code>cachePath</code>.
See details. NOTE: Experimental feature now allows for multiple <code>modulePath</code>s
to be specified in a character vector. The modules will be searched for sequentially
in the first <code>modulePath</code>, then if it doesn't find it, in the second etc.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_inputs">inputs</code></td>
<td>
<p>A <code>data.frame</code>. Can specify from 1 to 6
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>interval</code> (numeric), <code>loadTime</code> (numeric).
See <code><a href="#topic+inputs">inputs()</a></code> and vignette(&quot;ii-modules&quot;) section about inputs.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_outputs">outputs</code></td>
<td>
<p>A <code>data.frame</code>. Can specify from 1 to 5
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>saveTime</code> (numeric) and <code>eventPriority</code> (numeric). If
<code>eventPriority</code> is not set, it defaults to <code>.last()</code>. If <code>eventPriority</code>
is set to a low value, e.g., 0, 1, 2 and <code>saveTime</code> is <code>start(sim)</code>,
it should give &quot;initial conditions&quot;.
</p>
<p>See <code><a href="#topic+outputs">outputs()</a></code> and
<code>vignette("ii-modules")</code> section about outputs.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_loadorder">loadOrder</code></td>
<td>
<p>An optional character vector of module names specifying the order in
which to load the modules. If not specified, the module
load order will be determined automatically.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_notolderthan">notOlderThan</code></td>
<td>
<p>A time, as in from <code>Sys.time()</code>. This is passed into
the <code>Cache</code> function that wraps <code>.inputObjects</code>.
If the module uses the <code>.useCache</code> parameter and it is
set to <code>TRUE</code> or <code>".inputObjects"</code>,
then the <code>.inputObjects</code> will be cached.
Setting <code>notOlderThan = Sys.time()</code> will cause the
cached versions of <code>.inputObjects</code> to be refreshed,
i.e., rerun.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_debug">debug</code></td>
<td>
<p>Optional tools for invoking debugging. Supplying a <code>list</code>
will invoke the more powerful <code>logging</code> package. See details.
Default is to use the value in <code>getOption("spades.debug")</code>.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_progress">progress</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code> show a graphical progress bar),
character (<code>"graphical"</code>, <code>"text"</code>) or numeric indicating
the number of update intervals to show in a graphical progress bar.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_cache">cache</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the <code>spades</code> call will be cached.
This means that if the call is made again with the same <code>simList</code>,
then <code>spades</code> will return the return value from the previous run
of that exact same <code>simList</code>. Default <code>FALSE</code>. See Details.
See also the vignette on caching for examples.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_.plots">.plots</code></td>
<td>
<p>Character. Sets the parameter of this name in all modules.
See <code><a href="#topic+Plots">Plots()</a></code> for possible values. The parameter is intended to slowly
take over from <code>.plotInitialTime</code> as a mechanism to turn on or off plotting.
For backwards compatibility, if <code>.plotInitialTime</code> is not set in this <code>spades</code> call,
but this <code>.plots</code> is used, two things will happen: setting this without <code>"screen"</code>
will turn off all plotting; setting this with <code>"screen"</code> will trigger
plotting for any modules that use this parameter but will have no effect on
other modules. To get plotting, therefore, it may be necessary to also set
<code>.plotInitialTime = start(sim)</code>.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_.plotinitialtime">.plotInitialTime</code></td>
<td>
<p>Numeric. Temporarily override the <code>.plotInitialTime</code>
parameter for all modules. See Details.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_.saveinitialtime">.saveInitialTime</code></td>
<td>
<p>Numeric. Temporarily override the <code>.plotInitialTime</code>
parameter for all modules. See Details.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_events">events</code></td>
<td>
<p>A character vector or a named list of character vectors. If specified,
the simulations will only do the events indicated here. If a named list, the names
must correspond to the modules and the character vectors can be specific events within
each of the named modules. With the <code>list</code> form, all unspecified modules
will run <em>all</em> their events, including internal spades modules, e.g., <code>save</code>,
that get invoked with the <code>outputs</code> argument in  <code>simInit</code>. See example.</p>
</td></tr>
<tr><td><code id="simInitAndSpades_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>simInit()</code> and <code>spades()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same as <code><a href="#topic+spades">spades()</a></code> (a <code>simList</code>) or
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simInit">simInit()</a></code>, <code><a href="#topic+spades">spades()</a></code>
</p>

<hr>
<h2 id='simList-class'>The <code>simList</code> class</h2><span id='topic+simList-class'></span><span id='topic+simList'></span><span id='topic+simList_-class'></span><span id='topic+simList_'></span>

<h3>Description</h3>

<p>Contains the minimum components of a <code>SpaDES</code> simulation.
Various slot accessor methods (i.e., get and set functions) are provided
(see 'Accessor Methods' below).
</p>


<h3>Details</h3>

<p>Based on code from chapter 7.8.3 of Matloff (2011): &quot;Discrete event simulation&quot;.
Here, we implement a discrete event simulation in a more modular fashion so
it's easier to add simulation components (i.e., &quot;simulation modules&quot;).
We use S4 classes and methods, and use <code><a href="data.table.html#topic+data.table">data.table()</a></code> instead of
<code><a href="base.html#topic+data.frame">data.frame()</a></code> to implement the event queue (because it is much
more efficient).
</p>


<h3>Slots</h3>


<dl>
<dt><code>modules</code></dt><dd><p>List of character names specifying which modules to load.</p>
</dd>
<dt><code>params</code></dt><dd><p>Named list of potentially other lists specifying simulation
parameters.</p>
</dd>
<dt><code>events</code></dt><dd><p>The list of scheduled events (i.e., event queue), which can
be converted to a sorted <code>data.table</code> with <code>events(sim)</code>.
See 'Event Lists' for more information.</p>
</dd>
<dt><code>current</code></dt><dd><p>The current event, as a <code>data.table</code>.
See 'Event Lists' for more information..</p>
</dd>
<dt><code>completed</code></dt><dd><p>An environment consisting of completed events, with
each object named a character representation of the order
of events. This was converted from a previous version which
was a list. This was changed because the list became
slow as number of events increased.
See 'Event Lists' for more information. It is kept
as an environment of individual events for speed. The <code>completed</code>
method converts it to a sorted <code>data.table</code>.</p>
</dd>
<dt><code>depends</code></dt><dd><p>A <code>.simDeps</code> list of <code><a href="#topic+.moduleDeps">.moduleDeps()</a></code> objects
containing module object dependency information.</p>
</dd>
<dt><code>simtimes</code></dt><dd><p>List of numerical values describing the simulation start
and end times; as well as the current simulation time.</p>
</dd>
<dt><code>inputs</code></dt><dd><p>a <code>data.frame</code> or <code>data.table</code> of files and
metadata</p>
</dd>
<dt><code>outputs</code></dt><dd><p>a <code>data.frame</code>  or <code>data.table</code> of files and
metadata</p>
</dd>
<dt><code>paths</code></dt><dd><p>Named list of paths. See <code>?.paths</code>. Partial matching is performed.</p>
</dd>
<dt><code>.xData</code></dt><dd><p>Environment referencing the objects used in the simulation.
Several &quot;shortcuts&quot; to accessing objects referenced by this
environment are provided, and can be used on the
<code>simList</code> object directly instead of specifying the
<code>.xData</code> slot: <code>$</code>, <code>[[</code>, <code>ls</code>,
<code>ls.str</code>, <code>objs</code>. See examples.</p>
</dd>
<dt><code>.envir</code></dt><dd><p>Deprecated. Please do not use any more.</p>
</dd>
</dl>


<h3>Accessor Methods</h3>

<p>Several slot (and sub-slot) accessor methods are provided for use, and
categorized into separate help pages:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-envir">simList-accessors-envir()</a></code> </td><td style="text-align: left;"> Simulation environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-events">simList-accessors-events()</a></code> </td><td style="text-align: left;"> Scheduled and completed events. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-inout">simList-accessors-inout()</a></code> </td><td style="text-align: left;"> Passing data in to / out of simulations. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-modules">simList-accessors-modules()</a></code> </td><td style="text-align: left;"> Modules loaded and used; module dependencies. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-objects">simList-accessors-objects()</a></code> </td><td style="text-align: left;"> Accessing objects used in the simulation. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-params">simList-accessors-params()</a></code> </td><td style="text-align: left;"> Global and module-specific parameters. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-paths">simList-accessors-paths()</a></code> </td><td style="text-align: left;"> File paths for modules, inputs, and outputs. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList-accessors-times">simList-accessors-times()</a></code> </td><td style="text-align: left;"> Simulation times. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Event Lists</h3>

<p>The main event list is a sorted <code>data.table</code> (keyed) on <code>eventTime</code>, and <code>eventPriority.</code>
The completed event list is an ordered list in the exact order that the events were executed.
Each event is represented by a <code><a href="data.table.html#topic+data.table">data.table()</a></code> row consisting of:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>eventTime</code> </td><td style="text-align: left;"> The time the event is to occur.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>moduleName</code> </td><td style="text-align: left;"> The module from which the event is taken.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eventType</code> </td><td style="text-align: left;"> A character string for the programmer-defined event type.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eventPriority</code> </td><td style="text-align: left;"> The priority given to the event. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Note</h3>

<p>The <code>simList</code> class extends the <code>environment</code>, by adding
several slots that provide information about the metadata for a discrete
event simulation. The environment slot, if accessed directly is <code>.xData</code>
and this is where input and output objects from modules are placed.
The <code><a href="#topic+simList_">simList_()</a></code> class is similar, but it extends the <code>list</code>
class. All other slots are the same.
Thus, <code>simList</code> is identical to <code>simList_</code>, except that the former
uses an environment for objects and the latter uses a list.
The class <code>simList_</code> is only used internally when saving/loading, because
saving/loading a list behaves more reliably than saving/loading an environment.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>

<hr>
<h2 id='spades'>Run a spatial discrete event simulation</h2><span id='topic+spades'></span><span id='topic+spades+2CsimList+2CANY+2CANY+2Cmissing-method'></span><span id='topic+spades+2CANY+2CANY+2CANY+2Clogical-method'></span>

<h3>Description</h3>

<p>Here, we implement a simulation in a more modular fashion so it's easier to add
submodules to the simulation. We use S4 classes and methods, and use <code>data.table</code>
instead of <code>data.frame</code> to implement the event queue (because it is much faster).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spades(
  sim,
  debug = getOption("spades.debug"),
  progress = NA,
  cache,
  .plotInitialTime = NULL,
  .saveInitialTime = NULL,
  notOlderThan = NULL,
  events = NULL,
  .plots = getOption("spades.plots", NULL),
  ...
)

## S4 method for signature 'simList,ANY,ANY,missing'
spades(
  sim,
  debug = getOption("spades.debug"),
  progress = NA,
  cache,
  .plotInitialTime = NULL,
  .saveInitialTime = NULL,
  notOlderThan = NULL,
  events = NULL,
  .plots = getOption("spades.plots", NULL),
  ...
)

## S4 method for signature 'ANY,ANY,ANY,logical'
spades(
  sim,
  debug = getOption("spades.debug"),
  progress = NA,
  cache,
  .plotInitialTime = NULL,
  .saveInitialTime = NULL,
  notOlderThan = NULL,
  events = NULL,
  .plots = getOption("spades.plots", NULL),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spades_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> simulation object, generally produced by <code>simInit</code>.</p>
</td></tr>
<tr><td><code id="spades_+3A_debug">debug</code></td>
<td>
<p>Optional tools for invoking debugging. Supplying a <code>list</code>
will invoke the more powerful <code>logging</code> package. See details.
Default is to use the value in <code>getOption("spades.debug")</code>.</p>
</td></tr>
<tr><td><code id="spades_+3A_progress">progress</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code> show a graphical progress bar),
character (<code>"graphical"</code>, <code>"text"</code>) or numeric indicating
the number of update intervals to show in a graphical progress bar.</p>
</td></tr>
<tr><td><code id="spades_+3A_cache">cache</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the <code>spades</code> call will be cached.
This means that if the call is made again with the same <code>simList</code>,
then <code>spades</code> will return the return value from the previous run
of that exact same <code>simList</code>. Default <code>FALSE</code>. See Details.
See also the vignette on caching for examples.</p>
</td></tr>
<tr><td><code id="spades_+3A_.plotinitialtime">.plotInitialTime</code></td>
<td>
<p>Numeric. Temporarily override the <code>.plotInitialTime</code>
parameter for all modules. See Details.</p>
</td></tr>
<tr><td><code id="spades_+3A_.saveinitialtime">.saveInitialTime</code></td>
<td>
<p>Numeric. Temporarily override the <code>.plotInitialTime</code>
parameter for all modules. See Details.</p>
</td></tr>
<tr><td><code id="spades_+3A_notolderthan">notOlderThan</code></td>
<td>
<p>Date or time. Passed to <code>reproducible::Cache</code> to update the cache.
Default is <code>NULL</code>, meaning don't update the cache.
If <code>Sys.time()</code> is provided, then it will force a recache,
i.e., remove old value and replace with new value.
Ignored if <code>cache</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="spades_+3A_events">events</code></td>
<td>
<p>A character vector or a named list of character vectors. If specified,
the simulations will only do the events indicated here. If a named list, the names
must correspond to the modules and the character vectors can be specific events within
each of the named modules. With the <code>list</code> form, all unspecified modules
will run <em>all</em> their events, including internal spades modules, e.g., <code>save</code>,
that get invoked with the <code>outputs</code> argument in  <code>simInit</code>. See example.</p>
</td></tr>
<tr><td><code id="spades_+3A_.plots">.plots</code></td>
<td>
<p>Character. Sets the parameter of this name in all modules.
See <code><a href="#topic+Plots">Plots()</a></code> for possible values. The parameter is intended to slowly
take over from <code>.plotInitialTime</code> as a mechanism to turn on or off plotting.
For backwards compatibility, if <code>.plotInitialTime</code> is not set in this <code>spades</code> call,
but this <code>.plots</code> is used, two things will happen: setting this without <code>"screen"</code>
will turn off all plotting; setting this with <code>"screen"</code> will trigger
plotting for any modules that use this parameter but will have no effect on
other modules. To get plotting, therefore, it may be necessary to also set
<code>.plotInitialTime = start(sim)</code>.</p>
</td></tr>
<tr><td><code id="spades_+3A_...">...</code></td>
<td>
<p>Any. Can be used to make a unique cache identity, such as &quot;replicate = 1&quot;.
This will be included in the <code>Cache</code> call, so will be unique
and thus <code>spades</code> will not use a cached copy as long as
anything passed in <code>...</code> is unique, i.e., not cached previously.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The is the workhorse function in the SpaDES package. It runs simulations by
implementing the rules outlined in the <code>simList</code>.
</p>
<p>This function gives simple access to two sets of module parameters:
<code>.plotInitialTime</code> and with <code>.plotInitialTime</code>. The primary use of
these arguments is to temporarily turn off plotting and saving. &quot;Temporary&quot;
means that the <code>simList</code> is not changed, so it can be used again with
the <code>simList</code> values reinstated. To turn off plotting and saving, use
<code>.plotInitialTime = NA</code> or <code>.saveInitialTime = NA</code>. NOTE: if a
module did not use <code>.plotInitialTime</code> or <code>.saveInitialTime</code>, then
these arguments will not do anything.
</p>


<h3>Value</h3>

<p>Invisibly returns the modified <code>simList</code> object.
</p>


<h3>Caching with SpaDES</h3>

<p>There are numerous ways in which Caching can be used within SpaDES. Please
see the vignette
<a href="https://spades-core.predictiveecology.org/articles/iii-cache.html">https://spades-core.predictiveecology.org/articles/iii-cache.html</a>
for many examples. Briefly, functions, events, modules, entire spades calls or
experiment calls (see <a href="https://github.com/PredictiveEcology/SpaDES.experiment">https://github.com/PredictiveEcology/SpaDES.experiment</a>)
can be cached and mixtures of all of these will work. For functions, simply
wrap the call with <code>Cache</code>, moving the original function name into
the first argument of Cache. For events or modules, set the module <code>parameters</code>,
<code>.useCache</code>, e.g.,
<code>simInit(..., parameters = list(myModule = list(.useCache = "init")))</code>.
This can be set to an event name, which will cache that event, or a logical,
which will cache <em>every</em> event in that module. Event and module caching
makes most sense when the event or module only runs once, such as an initialization
or data preparation event/module. Caching an entire simulation is actually just
a function call to <code>simInitAndSpades</code>, for example. So, simply writing
<code>Cache(simInitAndSpades, modules = ...)</code> will effectively cache a whole simulation.
Finally for experiments, it is just like a function call:
<code>Cache(simInitandExperiment, ...)</code>. The final way Caching can be done is in
<code>experiment</code> or <code>spades</code>, by setting the <code>cache</code> argument.
</p>
<p>If <code>cache</code> is TRUE, this allows for a seamless way to &quot;save&quot; results
of a simulation. The  user does not have to intentionally do any saving manually.
Instead, upon a call to <code>spades</code> in which the <code>simList</code> is identical,
the function will simply return the result that would have come if it had
been rerun. Use this with caution, as it will return exactly the result from
a previous run, even if there is stochasticity internally.
Caching is only based on the input <code>simList.</code>
See also the vignette on caching for examples.
</p>


<h3><code>debug</code></h3>

<p>The most powerful way to use debug is to invoke the <code>logging</code>
R package. To invoke this, <code>debug</code> must be a list with up to 3
named elements:
<code>console</code>, <code>file</code>, and <code>debug</code>. Each of these list elements
must be a list (including empty <code>list()</code> for defaults) with the
sub-list elements here:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>console</code> </td><td style="text-align: left;"> <code>level</code> </td><td style="text-align: left;"> The <code>level</code>, see below, of information shown</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>file</code> </td><td style="text-align: left;"> <code>append</code> </td><td style="text-align: left;"> Logical. If <code>TRUE</code>, the default, then
log entries are appended to file, if it exists</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <code>file</code> </td><td style="text-align: left;"> A filename. Defaults to <code>log.txt</code></td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <code>level</code> </td><td style="text-align: left;"> The <code>level</code>, see below, of information shown</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>debug</code> </td><td style="text-align: left;"> See possible values below</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>level</code> can be a number from 0 to 100 or a character string matching one
of the values in <code>logging::loglevels</code>. These are hierarchical levels of
information passed to the console. Set a lower number for more information and a
higher number for less information. Errors in code will be shown if <code>level</code>
is set to <code>"ERROR"</code> or <code>40</code> or above; warnings in code will be shown if
<code>level</code> is set to <code>"WARN"</code> or <code>30</code> or above;
normal messages in code will
be shown if <code>level</code> is set to <code>"INFO"</code> or <code>20</code> or above. For
consistency with base R messaging, if default level is used, then normal
messaging via <code>message</code> will be shown; this means that <code>suppressMessages</code>
will work to suppress messaging only when level is set to <code>"INFO"</code> or <code>20</code>.
Some functions in the SpaDES ecosystem may have information at the lower levels,
but currently, there are few to none.
</p>
<p><code>debug</code> is specified as a non-list argument to <code>spades</code> or as
<code>list(debug = ...)</code>, then it can be a logical, a quoted call, a character vector
or a numeric scalar (currently 1 or 2) or a list of any of these to get multiple
outputs. This will be run at the start of every event. The following options for debug
are available. Each of these can also be in a list to get multiple outputs:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>TRUE</code> </td><td style="text-align: left;"> <code>current(sim)</code> will be printed at the start of each event as
it runs</td>
</tr>
<tr>
 <td style="text-align: left;">
a function name (as character string) </td><td style="text-align: left;"> If a function, then it will be run on the
<code>simList</code>, e.g., "time" will run
<code>time(sim)</code> at each event.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>moduleName</code> (as character string) </td><td style="text-align: left;"> All calls to that module will be entered
interactively</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eventName</code> (as character string) </td><td style="text-align: left;"> All calls that have that event name (in any module)
will be entered interactively</td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">&#8288;c(&lt;moduleName&gt;, &lt;eventName&gt;)&#8288;</code>  </td><td style="text-align: left;"> Only the event in that specified module
will be entered into. </td>
</tr>
<tr>
 <td style="text-align: left;">
Any other R expression expressed as a character string or quoted call </td><td style="text-align: left;">
Will be evaluated with access to the <code>simList</code> as <code>sim</code>.
If this is more than one character string, then all will
be printed to the screen in their sequence. </td>
</tr>
<tr>
 <td style="text-align: left;">
A numeric scalar, currently 1 or 2 (maybe others) </td><td style="text-align: left;"> This will print out alternative forms of event
information that users may find useful </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If not specified in the function call, the package
option <code>spades.debug</code> is used.
</p>
<p>If <code>options("spades.browserOnError" = TRUE)</code> (experimental still) if
there is an error, it will attempt to open a browser
in the event where the error occurred. You can edit, and then press <code>c</code> to continue
or <code>Q</code> to quit, plus all other normal interactive browser tools.
<code>c</code> will trigger a reparse and events will continue as scheduled, starting
with the one just edited. There may be some unexpected consequences if the
<code>simList</code> objects had already been changed before the error occurred.
</p>


<h3>Note</h3>

<p>The debug option is primarily intended to facilitate building simulation
models by the user.
Will print additional outputs informing the user of updates to the values of
various <code>simList</code> slot components.
See <a href="https://github.com/PredictiveEcology/SpaDES/wiki/Debugging">https://github.com/PredictiveEcology/SpaDES/wiki/Debugging</a> for details.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>References</h3>

<p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm">https://nostarch.com/artofr.htm</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SpaDES.core-package">SpaDES.core-package()</a></code>,
<code><a href="#topic+simInit">simInit()</a></code>, and the caching vignette (very important for reproducibility):
<a href="https://spades-core.predictiveecology.org/articles/iii-cache.html">https://spades-core.predictiveecology.org/articles/iii-cache.html</a> which
uses <code><a href="reproducible.html#topic+Cache">reproducible::Cache()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
    requireNamespace("NLMR", quietly = TRUE)) {
  # some options are not necessary when not interactive
  opts &lt;- options("spades.moduleCodeChecks" = FALSE, "spades.useRequire" = FALSE)
  if (!interactive()) opts &lt;- append(opts, options("spades.plots" = NA,
                                                   "spades.debug" = FALSE))
  mySim &lt;- simInit(
   times = list(start = 0.0, end = 1.0, timeunit = "year"),
   params = list(
     randomLandscapes = list(nx = 10, ny = 10),
     .globals = list(stackName = "landscape", burnStats = "nPixelsBurned",
                     .plots = NA) # plotting off --&gt; not relevant for example
   ),
   modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
   paths = list(modulePath = getSampleModules(tempdir()))
  )
  spades(mySim)

  # Different debug options (overrides the package option 'spades.debug')
  spades(mySim, debug = TRUE) # Fastest
  spades(mySim, debug = "print(table(sim$landscape$Fires[]))")
  # To get a combination -- use list(debug = list(..., ...))
  spades(mySim, debug = list(debug = list(1, quote(as.data.frame(table(sim$landscape$Fires[]))))))

  # Can turn off plotting at spades call, and inspect the output simList instead
  out &lt;- spades(mySim, .plots = NA)
  completed(out) # shows completed events

  # use cache -- simInit should generally be rerun each time a spades call is made
  #   to guarantee that it is identical. Here, run spades call twice, first
  #   time to establish cache, second time to return cached result
  for (i in 1:2) {
   mySim &lt;- simInit(
     times = list(start = 0.0, end = 1.0, timeunit = "year"),
     params = list(
       randomLandscapes = list(nx = 10, ny = 10),
       .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
     ),
     modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
     paths = list(modulePath = getSampleModules(tempdir()))
   )
   print(system.time(out &lt;- spades(mySim, cache = TRUE, .plots = NA)))
  }

  # E.g., with only the init events
  outInitsOnly &lt;- spades(mySim, events = "init")

  # or more fine grained control
  outSomeEvents &lt;- spades(mySim, .plots = NA,
          events = list(randomLandscapes = c("init"),
                        fireSpread = c("init", "burn")))

  # with outputs, the save module gets invoked and must be explicitly limited to "init"
  mySim &lt;- simInit(
   times = list(start = 0.0, end = 1.0, timeunit = "year"),
   params = list(
     randomLandscapes = list(nx = 10, ny = 10),
     .globals = list(stackName = "landscape", burnStats = "nPixelsBurned")
   ),
   modules = list("randomLandscapes", "fireSpread", "caribouMovement"),
   outputs = data.frame(objectName = "landscape", saveTime = 0:2),
   paths = list(modulePath = getSampleModules(tempdir()))
  )
  # This will print a message saying that caribouMovement will run its events
  outSomeEvents &lt;- spades(mySim, .plots = NA,
          events = list(randomLandscapes = c("init"),
                        fireSpread = c("init", "burn"),
                        save = "init"))

  options(opts) # reset options
}


</code></pre>

<hr>
<h2 id='SpaDES.core-package'>Categorized overview of the <code>SpaDES.core</code> package</h2><span id='topic+SpaDES.core'></span><span id='topic+SpaDES.core-package'></span>

<h3>Description</h3>

<p>This package allows implementation a variety of simulation-type models,
with a focus on spatially explicit models.
The core simulation components are built upon a discrete event simulation
framework that facilitates modularity, and easily enables the user to
include additional functionality by running user-built simulation modules.
Included are numerous tools to visualize various spatial data formats,
as well as non-spatial data. Much work has been done to speed up the core
of the DES, with current benchmarking as low as 56 microseconds overhead for
each event (including scheduling, sorting event queue, spawning event etc.) or
38 microseconds if there is no sorting (i.e., no sorting occurs under simple conditions).
Under most event conditions, therefore, the DES itself will contribute
very minimally compared to the content of the events, which may often be
milliseconds to many seconds each event.
</p>
<p>Bug reports: <a href="https://github.com/PredictiveEcology/SpaDES.core/issues">https://github.com/PredictiveEcology/SpaDES.core/issues</a>
</p>
<p>Module repository: <a href="https://github.com/PredictiveEcology/SpaDES-modules">https://github.com/PredictiveEcology/SpaDES-modules</a>
</p>
<p>Wiki: <a href="https://github.com/PredictiveEcology/SpaDES/wiki">https://github.com/PredictiveEcology/SpaDES/wiki</a>
</p>


<h3>Details</h3>

<p><img src="../help/figures/SpaDES.png" width=100 alt="SpaDES logo" style="float: right;" />

</p>


<h3>1 Spatial discrete event simulation (<code>SpaDES</code>)</h3>

<p>A collection of top-level functions for doing spatial discrete event simulation.
</p>


<h4>1.1 Simulations</h4>

<p>There are two workhorse functions that initialize and run a simulation, and
third function for doing multiple spades runs:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simInit">simInit()</a></code> </td><td style="text-align: left;"> Initialize a new simulation</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+spades">spades()</a></code> </td><td style="text-align: left;"> Run a discrete event simulation</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>experiment</code> </td><td style="text-align: left;"> In <code>SpaDES.experiment</code> package.
Run multiple <code><a href="#topic+spades">spades()</a></code> calls</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>experiment2</code> </td><td style="text-align: left;"> In <code>SpaDES.experiment</code> package.
Run multiple <code><a href="#topic+spades">spades()</a></code> calls</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>1.2 Events</h4>

<p>Within a module, important simulation functions include:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+scheduleEvent">scheduleEvent()</a></code> </td><td style="text-align: left;"> Schedule a simulation event</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+scheduleConditionalEvent">scheduleConditionalEvent()</a></code> </td><td style="text-align: left;"> Schedule a conditional simulation event</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>removeEvent</code> </td><td style="text-align: left;"> Remove an event from the simulation queue (not yet implemented)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>2 The <code>simList</code> object class</h3>

<p>The principle exported object class is the <code>simList</code>.
All <code>SpaDES</code> simulations operate on this object class.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList">simList()</a></code> </td><td style="text-align: left;"> The <code>simList</code> class</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>3 <code>simList</code> methods</h3>

<p>Collections of commonly used functions to retrieve or set slots (and their elements)
of a <code><a href="#topic+simList">simList()</a></code> object are summarized further below.
</p>


<h4>3.1 Simulation parameters</h4>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+globals">globals()</a></code> </td><td style="text-align: left;"> List of global simulation parameters.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+params">params()</a></code> </td><td style="text-align: left;"> Nested list of all simulation parameter.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+P">P()</a></code> </td><td style="text-align: left;"> Namespaced version of <code><a href="#topic+params">params()</a></code>
(i.e., do not have to specify module name).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.2 loading from disk, saving to disk</h4>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+inputs">inputs()</a></code> </td><td style="text-align: left;"> List of loaded objects used in simulation. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+outputs">outputs()</a></code> </td><td style="text-align: left;"> List of objects to save during simulation. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.3 objects in the <code>simList</code></h4>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="base.html#topic+ls">ls()</a></code>, <code><a href="base.html#topic+objects">objects()</a></code> </td><td style="text-align: left;"> Names of objects referenced by the simulation environment.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="utils.html#topic+ls.str">ls.str()</a></code> </td><td style="text-align: left;"> List the structure of the <code>simList</code> objects.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+objs">objs()</a></code> </td><td style="text-align: left;"> List of objects referenced by the simulation environment.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.4 Simulation paths</h4>

<p>Accessor functions for the <code>paths</code> slot and its elements.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cachePath">cachePath()</a></code> </td><td style="text-align: left;"> Global simulation cache path.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+modulePath">modulePath()</a></code> </td><td style="text-align: left;"> Global simulation module path.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+inputPath">inputPath()</a></code> </td><td style="text-align: left;"> Global simulation input path.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+outputPath">outputPath()</a></code> </td><td style="text-align: left;"> Global simulation output path.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+rasterPath">rasterPath()</a></code> </td><td style="text-align: left;"> Global simulation temporary raster path.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+paths">paths()</a></code> </td><td style="text-align: left;"> Global simulation paths (cache, modules, inputs, outputs, rasters).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.5 Simulation times</h4>

<p>Accessor functions for the <code>simtimes</code> slot and its elements.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="stats.html#topic+time">time()</a></code> </td><td style="text-align: left;"> Current simulation time, in units of longest module.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+start">start()</a></code> </td><td style="text-align: left;"> Simulation start time, in units of longest module.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+end">end()</a></code> </td><td style="text-align: left;"> Simulation end time, in units of longest module.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+times">times()</a></code> </td><td style="text-align: left;"> List of all simulation times (current, start, end), in units of longest module..</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.6 Simulation event queues</h4>

<p>Accessor functions for the <code>events</code> and <code>completed</code> slots.
By default, the event lists are shown when the <code>simList</code> object is printed,
thus most users will not require direct use of these methods.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+events">events()</a></code> </td><td style="text-align: left;"> Scheduled simulation events (the event queue). (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+current">current()</a></code> </td><td style="text-align: left;"> Currently executing event. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+completed">completed()</a></code> </td><td style="text-align: left;"> Completed simulation events. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+elapsedTime">elapsedTime()</a></code> </td><td style="text-align: left;"> The amount of clock time that modules &amp; events use</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.7 Modules, dependencies, packages</h4>

<p>Accessor functions for the <code>depends</code>, <code>modules</code>, and <code>.loadOrder</code> slots.
These are included for advanced users.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+depends">depends()</a></code> </td><td style="text-align: left;"> List of simulation module dependencies. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+modules">modules()</a></code> </td><td style="text-align: left;"> List of simulation modules to be loaded. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+packages">packages()</a></code> </td><td style="text-align: left;"> Vector of required R libraries of all modules. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.8 <code>simList</code> environment</h4>

<p>The <code><a href="#topic+simList">simList()</a></code> has a slot called <code>.xData</code> which is an environment.
All objects in the <code>simList</code> are actually in this environment,
i.e., the <code>simList</code> is not a <code>list</code>.
In R, environments use pass-by-reference semantics, which means that copying
a <code>simList</code> object using normal R assignment operation (e.g., <code>sim2 &lt;- sim1</code>),
will not copy the objects contained within the <code>.xData</code> slot.
The two objects (<code>sim1</code> and <code>sim2</code>) will share identical objects
within that slot. Sometimes, this not desired, and a true copy is required.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+envir">envir()</a></code> </td><td style="text-align: left;"> Access the environment of the <code>simList</code> directly (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="data.table.html#topic+copy">copy()</a></code> </td><td style="text-align: left;"> Deep copy of a <code>simList.</code> (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.9 Checkpointing</h4>


<table>
<tr>
 <td style="text-align: left;">
Accessor method </td><td style="text-align: left;"> Module </td><td style="text-align: left;"> Description</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+checkpointFile">checkpointFile()</a></code> </td><td style="text-align: left;"> <code>checkpoint</code> </td><td style="text-align: left;"> Name of the checkpoint file. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+checkpointInterval">checkpointInterval()</a></code> </td><td style="text-align: left;"> <code>checkpoint</code> </td><td style="text-align: left;"> The simulation checkpoint interval. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>3.10 Progress Bar</h4>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+progressType">progressType()</a></code> </td><td style="text-align: left;"> <code>.progress</code> </td><td style="text-align: left;"> Type of graphical progress bar used. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+progressInterval">progressInterval()</a></code> </td><td style="text-align: left;"> <code>.progress</code> </td><td style="text-align: left;"> Interval for the progress bar. (advanced)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>4 Module operations</h3>



<h4>4.1 Creating, distributing, and downloading modules</h4>

<p>Modules are the basic unit of <code>SpaDES</code>.
These are generally created and stored locally, or are downloaded from remote
repositories, including our
<a href="https://github.com/PredictiveEcology/SpaDES-modules">SpaDES-modules</a>
repository on GitHub.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+checksums">checksums()</a></code> </td><td style="text-align: left;"> Verify (and optionally write) checksums for a module's data files.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+downloadModule">downloadModule()</a></code> </td><td style="text-align: left;"> Open all modules nested within a base directory.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+getModuleVersion">getModuleVersion()</a></code> </td><td style="text-align: left;"> Get the latest module version # from module repository.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+newModule">newModule()</a></code> </td><td style="text-align: left;"> Create new module from template.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+newModuleDocumentation">newModuleDocumentation()</a></code> </td><td style="text-align: left;"> Create empty documentation for a new module.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+openModules">openModules()</a></code> </td><td style="text-align: left;"> Open all modules nested within a base directory.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+moduleMetadata">moduleMetadata()</a></code> </td><td style="text-align: left;"> Shows the module metadata.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+zipModule">zipModule()</a></code> </td><td style="text-align: left;"> Zip a module and its associated files.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>4.2 Module metadata</h4>

<p>Each module requires several items to be defined.
These comprise the metadata for that module (including default parameter
specifications, inputs and outputs), and are currently written at the top of
the module's <code>.R</code> file.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+defineModule">defineModule()</a></code> </td><td style="text-align: left;"> Define the module metadata</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+defineParameter">defineParameter()</a></code> </td><td style="text-align: left;"> Specify a parameter's name, value and set a default</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+expectsInput">expectsInput()</a></code> </td><td style="text-align: left;"> Specify an input object's name, class, description, <code>sourceURL</code> and other specifications</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+createsOutput">createsOutput()</a></code> </td><td style="text-align: left;"> Specify an output object's name, class, description and other specifications</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>There are also accessors for many of the metadata entries:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+timeunit">timeunit()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+citation">citation()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+documentation">documentation()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+reqdPkgs">reqdPkgs()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+inputObjects">inputObjects()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+outputObjects">outputObjects()</a></code> </td><td style="text-align: left;"> Accesses metadata of same name</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>4.3 Module dependencies</h4>

<p>Once a set of modules have been chosen, the dependency information is automatically
calculated once <code>simInit</code> is run. There are several functions to assist with dependency
information:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+depsEdgeList">depsEdgeList()</a></code> </td><td style="text-align: left;"> Build edge list for module dependency graph</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+depsGraph">depsGraph()</a></code> </td><td style="text-align: left;"> Build a module dependency graph using <code>igraph</code></td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>5 Module functions</h3>

<p><em>A collection of functions that help with making modules can be found in
the suggested <code>SpaDES.tools</code> package, and are summarized below.</em>
</p>


<h4>5.1 Spatial spreading/distances methods</h4>

<p>Spatial contagion is a key phenomenon for spatially explicit simulation models.
Contagion can be modelled using discrete approaches or continuous approaches.
Several <code>SpaDES.tools</code> functions assist with these:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+adj">SpaDES.tools::adj()</a></code> </td><td style="text-align: left;"> An optimized (i.e., faster) version of <code><a href="terra.html#topic+adjacent">terra::adjacent()</a></code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+cir">SpaDES.tools::cir()</a></code> </td><td style="text-align: left;"> Identify pixels in a circle around a <code><a href="sp.html#topic+SpatialPoints-class">SpatialPoints*()</a></code> object</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+distanceFromEachPoint">directionFromEachPoint()</a></code> </td><td style="text-align: left;"> Fast calculation of direction and distance surfaces</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+distanceFromEachPoint">SpaDES.tools::distanceFromEachPoint()</a></code> </td><td style="text-align: left;"> Fast calculation of distance surfaces</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+rings">SpaDES.tools::rings()</a></code> </td><td style="text-align: left;"> Identify rings around focal cells (e.g., buffers and donuts)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+spokes">SpaDES.tools::spokes()</a></code> </td><td style="text-align: left;"> Identify outward radiating spokes from initial points</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+spread">SpaDES.tools::spread()</a></code> </td><td style="text-align: left;"> Contagious cellular automata</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+spread2">SpaDES.tools::spread2()</a></code> </td><td style="text-align: left;"> Contagious cellular automata, different algorithm, more robust</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+wrap">SpaDES.tools::wrap()</a></code> </td><td style="text-align: left;"> Create a torus from a grid</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.2 Spatial agent methods</h4>

<p>Agents have several methods and functions specific to them:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+crw">SpaDES.tools::crw()</a></code> </td><td style="text-align: left;"> Simple correlated random walk function</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+heading">SpaDES.tools::heading()</a></code> </td><td style="text-align: left;"> Determines the heading between <code style="white-space: pre;">&#8288;SpatialPoints*&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+makeLines">quickPlot::makeLines()</a></code> </td><td style="text-align: left;"> Makes <code>SpatialLines</code> object for, e.g., drawing arrows</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+crw">move()</a></code> </td><td style="text-align: left;"> A meta function that can currently only take "crw"</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+specnumperpatch-probs">specificNumPerPatch()</a></code> </td><td style="text-align: left;"> Initiate a specific number of agents per patch</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.3 GIS operations</h4>

<p>In addition to the vast amount of GIS operations available in R (mostly from
contributed packages such as <code>sf</code>, <code>terra</code>, (also <code>sp</code>, <code>raster</code>), <code>maps</code>, <code>maptools</code>
and many others), we provide the following GIS-related functions:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+equalExtent">equalExtent()</a></code> </td><td style="text-align: left;"> Assess whether a list of extents are all equal</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.4 'Map-reduce'&ndash;type operations</h4>

<p>These functions convert between reduced and mapped representations of the same data.
This allows compact representation of, e.g., rasters that have many individual pixels
that share identical information.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+rasterizeReduced">SpaDES.tools::rasterizeReduced()</a></code> </td><td style="text-align: left;"> Convert reduced representation to full raster.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.5 Colours in <code style="white-space: pre;">&#8288;Raster*&#8288;</code> objects</h4>

<p>We likely will not want the default colours for every map.
Here are several helper functions to add to, set and get colours of <code style="white-space: pre;">&#8288;Raster*&#8288;</code> objects:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+getSetColors">setColors()</a></code> </td><td style="text-align: left;"> Set colours for plotting <code style="white-space: pre;">&#8288;Raster*&#8288;</code> objects</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+getColors">getColors()</a></code> </td><td style="text-align: left;"> Get colours in a <code style="white-space: pre;">&#8288;Raster*&#8288;</code> objects</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+divergentColors">divergentColors()</a></code> </td><td style="text-align: left;"> Create a colour palette with diverging colours around a middle</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.6 Random Map Generation</h4>

<p>It is often useful to build dummy maps with which to build simulation models before all data are available.
These dummy maps can later be replaced with actual data maps.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+neutralLandscapeMap">SpaDES.tools::neutralLandscapeMap()</a></code> </td><td style="text-align: left;"> Creates a random map using Gaussian random fields</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+randomPolygons">SpaDES.tools::randomPolygons()</a></code> </td><td style="text-align: left;"> Creates a random polygon with specified number of classes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.7 Checking for the existence of objects</h4>

<p><code>SpaDES</code> modules will often require the existence of objects in the <code>simList</code>.
These are helpers for assessing this:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+checkObject">checkObject()</a></code> </td><td style="text-align: left;"> Check for a existence of an object within a <code>simList</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="reproducible.html#topic+checkPath">reproducible::checkPath()</a></code> </td><td style="text-align: left;"> Checks the specified filepath for formatting consistencies</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.8 SELES-type approach to simulation</h4>

<p>These functions are essentially skeletons and are not fully implemented.
They are intended to make translations from SELES (https://www.gowlland.ca/).
You must know how to use SELES for these to be useful:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+SELESagentLocation">agentLocation()</a></code> </td><td style="text-align: left;"> Agent location</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+initiateAgents">SpaDES.tools::initiateAgents()</a></code> </td><td style="text-align: left;"> Initiate agents into a <code>SpatialPointsDataFrame</code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+SELESnumAgents">numAgents()</a></code> </td><td style="text-align: left;"> Number of agents</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+SELESprobInit">probInit()</a></code> </td><td style="text-align: left;"> Probability of initiating an agent or event</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+SELEStransitions">transitions()</a></code> </td><td style="text-align: left;"> Transition probability</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>5.9 Miscellaneous</h4>

<p>Functions that may be useful within a <code>SpaDES</code> context:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="SpaDES.tools.html#topic+inRange">SpaDES.tools::inRange()</a></code> </td><td style="text-align: left;"> Test whether a number lies within range <code style="white-space: pre;">&#8288;[a,b]&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+layerNames">layerNames()</a></code> </td><td style="text-align: left;"> Get layer names for numerous object classes</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+numLayers">numLayers()</a></code> </td><td style="text-align: left;"> Return number of layers</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+paddedFloatToChar">paddedFloatToChar()</a></code> </td><td style="text-align: left;"> Wrapper for padding (e.g., zeros) floating numbers to character</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>6 Caching simulations and simulation components</h3>

<p><em>Simulation caching uses the <code>reproducible</code> package.</em>
</p>
<p>Caching can be done in a variety of ways, most of which are up to the module developer.
However, the one most common usage would be to cache a simulation run.
This might be useful if a simulation is very long, has been run once, and the
goal is just to retrieve final results.
This would be an alternative to manually saving the outputs.
</p>
<p>See example in <code><a href="#topic+spades">spades()</a></code>, achieved by using <code>cache = TRUE</code> argument.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="reproducible.html#topic+Cache">reproducible::Cache()</a></code> </td><td style="text-align: left;"> Caches a function, but often accessed as argument in <code><a href="#topic+spades">spades()</a></code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="reproducible.html#topic+viewCache">reproducible::showCache()</a></code> </td><td style="text-align: left;"> Shows information about the objects in the cache</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="reproducible.html#topic+viewCache">reproducible::clearCache()</a></code> </td><td style="text-align: left;"> Removes objects from the cache</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="reproducible.html#topic+viewCache">reproducible::keepCache()</a></code> </td><td style="text-align: left;"> Keeps only the objects described</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>A module developer can build caching into their module by creating cached versions of their
functions.
</p>


<h3>7 Plotting</h3>

<p><strong>Much of the underlying plotting functionality is provided by <span class="pkg">quickPlot</span>.</strong>
</p>
<p>There are several user-accessible plotting functions that are optimized for modularity
and speed of plotting:
</p>
<p>Commonly used:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+Plot">Plot()</a></code> </td><td style="text-align: left;"> The workhorse plotting function</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Simulation diagrams:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+eventDiagram">eventDiagram()</a></code> </td><td style="text-align: left;"> Gantt chart representing the events in a completed simulation.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+moduleDiagram">moduleDiagram()</a></code> </td><td style="text-align: left;"> Network diagram of simplified module (object) dependencies.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+objectDiagram">objectDiagram()</a></code> </td><td style="text-align: left;"> Sequence diagram of detailed object dependencies.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Other useful plotting functions:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+clearPlot">clearPlot()</a></code> </td><td style="text-align: left;"> Helpful for resolving many errors</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+clickValues">clickValues()</a></code> </td><td style="text-align: left;"> Extract values from a raster object at the mouse click location(s)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+clickExtent">clickExtent()</a></code> </td><td style="text-align: left;"> Zoom into a raster or polygon map that was plotted with <code><a href="quickPlot.html#topic+Plot">Plot()</a></code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+clickCoordinates">clickCoordinates()</a></code> </td><td style="text-align: left;"> Get the coordinates, in map units, under mouse click</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+dev">dev()</a></code> </td><td style="text-align: left;"> Specify which device to plot on, making a non-RStudio one as default</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+newPlot">newPlot()</a></code> </td><td style="text-align: left;"> Open a new default plotting device</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="quickPlot.html#topic+rePlot">rePlot()</a></code> </td><td style="text-align: left;"> Re-plots all elements of device for refreshing or moving plot</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>8 File operations</h3>

<p>In addition to R's file operations, we have added several here to aid in bulk
loading and saving of files for simulation purposes:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+loadFiles">loadFiles()</a></code> </td><td style="text-align: left;"> Load simulation objects according to a file list</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+rasterToMemory">rasterToMemory()</a></code> </td><td style="text-align: left;"> Read a raster from file to RAM</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+saveFiles">saveFiles()</a></code> </td><td style="text-align: left;"> Save simulation objects according to outputs and parameters</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>9 Sample modules included in package</h3>

<p>Several dummy modules are included for testing of functionality.
These can be found with <code>file.path(find.package("SpaDES.core"), "sampleModules")</code>.
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>randomLandscapes</code> </td><td style="text-align: left;"> Imports, updates, and plots several raster map layers</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>caribouMovement</code> </td><td style="text-align: left;"> A simple agent-based (a.k.a., individual-based) model</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>fireSpread</code> </td><td style="text-align: left;"> A simple model of a spatial spread process</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>10 Package options</h3>

<p><code>SpaDES</code> packages use the following <code><a href="base.html#topic+options">options()</a></code> to configure behaviour:
</p>

<ul>
<li> <p><code>spades.browserOnError</code>: If <code>TRUE</code>, the default, then any
error rerun the same event with <code>debugonce</code> called on it to allow editing
to be done. When that browser is continued (e.g., with 'c'), then it will save it
reparse it into the <code>simList</code> and rerun the edited version. This may allow a spades
call to be recovered on error, though in many cases that may not be the correct
behaviour. For example, if the <code>simList</code> gets updated inside that event in an iterative
manner, then each run through the event will cause that iteration to occur.
When this option is <code>TRUE</code>, then the event will be run at least 3 times: the
first time makes the error, the second time has <code>debugonce</code> and the third time
is after the error is addressed. <code>TRUE</code> is likely somewhat slower.
</p>
</li>
<li> <p><code>reproducible.cachePath</code>: The default local directory in which to
cache simulation outputs.
Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/cache&#8288;</code>).
</p>
</li>
<li> <p><code>spades.inputPath</code>: The default local directory in which to
look for simulation inputs.
Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/inputs&#8288;</code>).
</p>
</li>
<li> <p><code>spades.debug</code>: The default debugging value <code>debug</code>
argument in <code>spades()</code>. Default is <code>TRUE</code>.
</p>
</li>
<li> <p><code>spades.lowMemory</code>: If true, some functions will use more memory
efficient (but slower) algorithms. Default <code>FALSE</code>.
</p>
</li>
<li> <p><code>spades.moduleCodeChecks</code>: Should the various code checks be run
during <code>simInit</code>. These are passed to <code>codetools::checkUsage()</code>.
Default is given by the function, plus these :<code>list(suppressParamUnused = FALSE, suppressUndefined = TRUE, suppressPartialMatchArgs = FALSE, suppressNoLocalFun = TRUE, skipWith = TRUE)</code>.
</p>
</li>
<li> <p><code>spades.modulePath</code>: The default local directory where modules
and data will be downloaded and stored.
Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/modules&#8288;</code>).
</p>
</li>
<li> <p><code>spades.moduleRepo</code>: The default GitHub repository to use when
downloading modules via <code>downloadModule</code>.
Default <code>"PredictiveEcology/SpaDES-modules"</code>.
</p>
</li>
<li> <p><code>spades.nCompleted</code>: The maximum number of completed events to
retain in the <code>completed</code> event queue. Default <code>1000L</code>.
</p>
</li>
<li> <p><code>spades.outputPath</code>: The default local directory in which to
save simulation outputs.
Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/outputs&#8288;</code>).
</p>
</li>
<li> <p><code>spades.recoveryMode</code>: If this a numeric greater than 0 or TRUE, then the
discrete event simulator will take a snapshot of the objects in the <code>simList</code>
that might change (based on metadata <code>outputObjects</code> for that module), prior to
initiating every event. This will allow the
user to be able to recover in case of an error or manual interruption (e.g., <code>Esc</code>).
If this is numeric, a copy of that number of &quot;most recent events&quot; will be
maintained so that the user can recover and restart more than one event in the past,
i.e., redo some of the &quot;completed&quot; events.
Default is <code>TRUE</code>, i.e., it will keep the state of the <code>simList</code>
at the start of the current event. This can be recovered with <code>restartSpades</code>
and the differences can be seen in a hidden object in the stashed <code>simList.</code>
There is a message which describes how to find that.
</p>
</li>
<li> <p><code>spades.switchPkgNamespaces</code>: Should the search path be modified
to ensure a module's required packages are listed first?
Default <code>FALSE</code> to keep computational overhead down. If <code>TRUE</code>,
there should be no name conflicts among package objects,
but it is much slower, especially if the events are themselves fast.
</p>
</li>
<li> <p><code>spades.tolerance</code>: The default tolerance value used for floating
point number comparisons. Default <code>.Machine$double.eps^0.5</code>.
</p>
</li>
<li> <p><code>spades.useragent</code>: The default user agent to use for downloading
modules from GitHub.com. Default <code>"https://github.com/PredictiveEcology/SpaDES"</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Eliot J B McIntire <a href="mailto:eliot.mcintire@canada.ca">eliot.mcintire@canada.ca</a> (<a href="https://orcid.org/0000-0002-6914-8316">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Alex M Chubaty <a href="mailto:achubaty@for-cast.ca">achubaty@for-cast.ca</a> (<a href="https://orcid.org/0000-0001-7146-8135">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Yong Luo <a href="mailto:Yong.Luo@gov.bc.ca">Yong.Luo@gov.bc.ca</a> [contributor]
</p>
</li>
<li><p> Steve Cumming <a href="mailto:Steve.Cumming@sbf.ulaval.ca">Steve.Cumming@sbf.ulaval.ca</a> [contributor]
</p>
</li>
<li><p> Ceres Barros <a href="mailto:ceres.barros@ubc.ca">ceres.barros@ubc.ca</a> (<a href="https://orcid.org/0000-0003-4036-977X">ORCID</a>) [contributor]
</p>
</li>
<li><p> His Majesty the King in Right of Canada, as represented by the Minister of Natural Resources Canada [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+spadesOptions">spadesOptions()</a></code>
</p>

<hr>
<h2 id='spadesClasses'>Classes defined in SpaDES</h2><span id='topic+spadesClasses'></span>

<h3>Description</h3>

<p>These S4 classes are defined within <code>SpaDES</code>. &quot;dot&quot; classes are not exported and
are therefore intended for internal use only.
</p>


<h3>Simulation classes</h3>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+simList">simList()</a></code> </td><td style="text-align: left;"> The <code>simList</code> class</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+.moduleDeps">.moduleDeps()</a></code> </td><td style="text-align: left;"> Descriptor object for specifying <code>SpaDES</code> module dependencies</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+.simDeps">.simDeps()</a></code> </td><td style="text-align: left;"> Defines all simulation dependencies for all modules within a <code>SpaDES</code> simulation</td>
</tr>
<tr>
 <td style="text-align: left;">
--------------------------- </td><td style="text-align: left;"> ------------------------------------------------------------------------------------------ </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simInit">simInit()</a></code>
</p>

<hr>
<h2 id='spadesOptions'><code>SpaDES.core</code> options</h2><span id='topic+spadesOptions'></span>

<h3>Description</h3>

<p>These provide top-level, powerful settings for a comprehensive SpaDES workflow.
To see defaults, run <code>spadesOptions()</code>.
See Details below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spadesOptions()
</code></pre>


<h3>Details</h3>

<p>Below are options that can be set with <code>options("spades.xxx" = newValue)</code>,
where <code>xxx</code> is one of the values below, and <code>newValue</code> is a new value to
give the option. Sometimes these options can be placed in the user's <code>.Rprofile</code>
file so they persist between sessions.
</p>
<p>The following options are likely of interest to most users
</p>

<table>
<tr>
 <td style="text-align: left;">
<em>OPTION</em> </td><td style="text-align: center;"> <em>DEFAULT VALUE</em> </td><td style="text-align: left;"> <em>DESCRIPTION</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>spades.allowInitDuringSimInit</code> </td><td style="text-align: center;"> <code>FALSE</code>
</td><td style="text-align: left;"> New feature as of <code style="white-space: pre;">&#8288;SpaDES.core &gt; 1.1.1.9001&#8288;</code>; If set to <code>TRUE</code>,
<code>simInit</code> will evaluate the dependencies in the metadata objects and determine whether
there are modules whose <code>init</code> events can be run safely prior to
the <code>.inputObjects</code> of other modules, i.e., if a module's <code>expectsInput</code>
is not being supplied by any other module's <code>createsOutput</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.browserOnError</code> </td><td style="text-align: center;"> <code>FALSE</code> </td><td style="text-align: left;"> If <code>TRUE</code>, the default, then any
error rerun the same event with <code>debugonce</code> called on it to allow editing
to be done. When that browser is continued (e.g., with 'c'), then it will save it
re-parse it into the <code>simList</code> and rerun the edited version.
This may allow a <code>spades()</code> call to be recovered on error,
though in many cases that may not be the correct behaviour.
For example, if the <code>simList</code> gets updated inside that event in an iterative
manner, then each run through the event will cause that iteration to occur.
When this option is <code>TRUE</code>, then the event will be run at least 3 times: the
first time makes the error, the second time has <code>debugonce</code> and the third time
is after the error is addressed. <code>TRUE</code> is likely somewhat slower. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>reproducible.cachePath</code> </td><td style="text-align: center;"> <code>getOption('reproducible.cachePath')</code>
</td><td style="text-align: left;"> The default local directory in which to cache simulation outputs.
Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/cache&#8288;</code>).</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.debug</code> </td><td style="text-align: center;"> <code>TRUE</code>
</td><td style="text-align: left;">  The default debugging value <code>debug</code> argument in <code>spades()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.dotInputObjects</code> </td><td style="text-align: center;"> <code>TRUE</code>
</td><td style="text-align: left;">  This is used in <code>simInit</code>; if set to <code>TRUE</code> then the <code>.inputObjects</code>
function will be run; if <code>FALSE</code>, then it will be skipped.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.DTthreads</code> </td><td style="text-align: center;"> <code>1L</code>
</td><td style="text-align: left;">  The default number of <span class="pkg">data.table</span> threads to use.
See also <code>?data.table::setDTthreads</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.futureEvents</code> </td><td style="text-align: center;"> <code>FALSE</code>
</td><td style="text-align: left;">  If set to <code>TRUE</code>, the event simulator will attempt to spawn events
whose outputs are not needed (by other events in the <code>simList</code>) into a future.
In some cases, this will speed up simulations, by running some events in parallel.
Still VERY experimental. Use cautiously. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.logPath</code>
</td><td style="text-align: center;"> Defaults to a subdirectory (<code style="white-space: pre;">&#8288;logs/&#8288;</code>) of the simulation output directory.
</td><td style="text-align: left;"> The default local directory in which to look for simulation inputs.  </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.inputPath</code>
</td><td style="text-align: center;"> Default is a temporary directory (typically <code style="white-space: pre;">&#8288;/tmp/RtmpXXX/SpaDES/inputs&#8288;</code>)
</td><td style="text-align: left;"> The default local directory in which to look for simulation inputs.  </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.loadReqdPkgs</code>
</td><td style="text-align: center;"> Default is <code>TRUE</code> meaning that any <code>reqdPkgs</code> will be loaded via <code>Require</code>
or <code>require</code>. If <code>FALSE</code>, no package loading will occur. This will mean that
modules must prefix every function call from a package with that package name
with double colon (::).  </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.lowMemory</code> </td><td style="text-align: center;"> <code>FALSE</code>
</td><td style="text-align: left;"> If true, some functions will use more memory
efficient (but slower) algorithms. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.memoryUseInterval</code> </td><td style="text-align: center;"> <code>FALSE</code>
</td><td style="text-align: left;"> A numeric in seconds indicating how often sample the memory use. This will
be run in a separate "future" process so it can monitor the main process.
To access the resulting memory use table, use <code>memoryUse(sim)</code> after the simulation
has terminated. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.messagingNumCharsModule</code> </td><td style="text-align: center;"> <code>21</code>
</td><td style="text-align: left;"> The number of characters to use for the messaging preamble on each
line of the messaging during spades calls.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.moduleCodeChecks</code>
</td><td style="text-align: center;"> <code>list(suppressParamUnused = FALSE, suppressUndefined = TRUE, suppressPartialMatchArgs = FALSE, suppressNoLocalFun = TRUE, skipWith = TRUE)</code>
</td><td style="text-align: left;"> Should the various code checks be run
during <code>simInit</code>. These are passed to <code>codetools::checkUsage()</code>.
Default is given by the function, plus these: </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.moduleDocument</code> </td><td style="text-align: center;">  <code>TRUE</code>
</td><td style="text-align: left;">  When a module is an R package e.g., via <code>convertToPackage</code>,
it will, by default, rebuild documentation and reparse during <code>simInit</code>.
Since rebuilding documentation (from the <code>roxygen2</code> tags) can be time consuming,
a user may wish to prevent this from happening each <code>simInit</code> call. If so,
set this option to <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.modulePath</code> </td><td style="text-align: center;"> <code>file.path(tempdir(), "SpaDES", "modules")</code>)
</td><td style="text-align: left;"> The default local directory where modules and data will be downloaded and stored.
Default is a temporary directory  </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.moduleRepo</code> </td><td style="text-align: center;">  <code>"PredictiveEcology/SpaDES-modules"</code>
</td><td style="text-align: left;">  The default GitHub repository to use when
downloading modules via <code>downloadModule</code> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.nCompleted</code> </td><td style="text-align: center;"> <code>1000L</code> </td><td style="text-align: left;"> The maximum number of completed events to
retain in the <code>completed</code> event queue. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.outputPath</code>
</td><td style="text-align: center;"> <code>file.path(tempdir(), "SpaDES", "outputs")</code>
</td><td style="text-align: left;"> The default local directory in which to save simulation outputs.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.plots</code>
</td><td style="text-align: center;"> The value of this will passed to <code>.plots</code> within every module; it will thus
override all module parameter values for <code>.plots</code>. This can, e.g., be used
to turn off all plotting.
</td><td style="text-align: left;"> The default is NULL, meaning accept the module-level parameter</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.recoveryMode</code> </td><td style="text-align: center;"> <code>1L</code> </td><td style="text-align: left;">
If this is a numeric greater than 0 or TRUE, then the
discrete event simulator will take a snapshot of the objects in the <code>simList</code>
that might change (based on metadata <code>outputObjects</code> for that module), prior to
initiating every event. This will allow the
user to be able to recover in case of an error or manual interruption (e.g., <code>Esc</code>).
If this is numeric, a copy of that number of "most
recent events" will be maintained so that the user can recover and restart
more than one event in the past, i.e., redo some of the "completed" events.
Default is <code>TRUE</code>, i.e., it will keep the state of the <code>simList</code>
at the start of the current event. This can be recovered with <code>restartSpades</code>
and the differences can be seen in a hidden object in the stashed <code>simList</code>.
There is a message which describes how to find that. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.saveFileExtensions</code> </td><td style="text-align: center;"> <code>NULL</code> </td><td style="text-align: left;">
a <code>data.frame</code> with 3 columns, <code>exts</code>, <code>fun</code>, and <code>package</code> indicating which
file extension, and which function from which package will be used when
using the <code>outputs</code> mechanism for saving files during a <code>spades</code> call. e.g.,
<code style="white-space: pre;">&#8288;options(spades.saveFileExtensions = data.frame(exts = "shp", fun = "st_write", package = "sf")&#8288;</code>.
Then specify e.g.,
<code>simInit(outputs = data.frame(objectName = "caribou", fun = "st_write", package = "sf"))</code>
</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.scratchPath</code> </td><td style="text-align: center;"> <code>file.path(tempdir(), "SpaDES", "scratch")</code>)
</td><td style="text-align: left;"> The default local directory where transient files from modules and data will written.
This includes temporary <code>raster</code> and <code>terra</code> files, as well as SpaDES recovery mode files.
Default is a temporary directory. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.sessionInfo</code> </td><td style="text-align: center;"> <code>TRUE</code>)
</td><td style="text-align: left;"> Assigns the <code><a href="utils.html#topic+sessionInfo">utils::sessionInfo()</a></code> to the <code>simList</code> during <code>simInit</code> with
the name <code>sim$._sessionInfo</code>. This takes about 75 milliseconds, which may be
undesirable for some situations where speed is critical. If <code>FALSE</code>, then
this is not assigned to the <code>simList</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.switchPkgNamespaces</code> </td><td style="text-align: center;"> <code>FALSE</code> to keep computational
overhead down. </td><td style="text-align: left;"> Should the search path be modified
to ensure a module's required packages are listed first?
If <code>TRUE</code>, there should be no name conflicts among package objects,
but it is much slower, especially if the events are themselves fast. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.testMemoryLeaks</code> </td><td style="text-align: center;"> <code>TRUE</code>.
</td><td style="text-align: left;">  There is a very easy way to create a memory leak with R and SpaDES,
by adding formulas or functions to <code style="white-space: pre;">&#8288;sim$&#8288;</code> when the enclosing environment
of the formula or function contained a large object, most relevant here is
the <code>sim</code> object. SpaDES.core now tests for likely culprits for this
and suggests alternatives with a warning </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.tolerance</code> </td><td style="text-align: center;"> <code>.Machine$double.eps^0.5</code>.
</td><td style="text-align: left;">  The default tolerance value used for floating
point number comparisons. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.useragent</code> </td><td style="text-align: center;"> <code>"https://github.com/PredictiveEcology/SpaDES"</code>.
</td><td style="text-align: left;"> : The default user agent to use for downloading modules from GitHub. </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>spades.useRequire</code> </td><td style="text-align: center;"> <code>!tolower(Sys.getenv("SPADES_USE_REQUIRE")) %in% "false"</code>
</td><td style="text-align: left;"> : The default for that environment variable is unset, so this returns
<code>TRUE</code>. If this is <code>TRUE</code>, then during the <code>simInit</code> call, when packages are
identified as being required, these will be installed if missing, only if
<code>spades.useRequire</code> option is <code>TRUE</code>, otherwise, <code>simInit</code> will fail because
packages are not available.</td>
</tr>
<tr>
 <td style="text-align: left;">

</td>
</tr>

</table>



<h3>Value</h3>

<p>named list of the <em>default</em> package options.
</p>

<hr>
<h2 id='suppliedElsewhere'>Assess whether an object has or will be supplied from elsewhere</h2><span id='topic+suppliedElsewhere'></span>

<h3>Description</h3>

<p>When loading objects into a <code>simList</code>, especially during the
<code>simInit</code> call, and inside the <code>.inputObjects</code> functions of modules,
it is often useful to know if an object in question will or has been
by the user via the <code>inputs</code> or <code>objects</code> arguments, or by another
module's <code>.inputObjects</code> while preparing its expected inputs (via
<code>expectsInputs</code> in metadata), or if it will be supplied by another
module during its <code>"init"</code> event. In all these cases, it may not
be necessary for a given module to load any default value for its <code>expectsInputs</code>.
This function can be used as a check to determine whether the module needs
to proceed in getting and assigning its default value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>suppliedElsewhere(
  object,
  sim,
  where = c("sim", "user", "initEvent"),
  returnWhere = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="suppliedElsewhere_+3A_object">object</code></td>
<td>
<p>Character vector</p>
</td></tr>
<tr><td><code id="suppliedElsewhere_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> in which to evaluated whether the object is supplied elsewhere</p>
</td></tr>
<tr><td><code id="suppliedElsewhere_+3A_where">where</code></td>
<td>
<p>Character vector with one to three of <code>"sim"</code>, <code>"user"</code>, or <code>"initEvent"</code>.
Default is all three. Partial matching is used. See details.</p>
</td></tr>
<tr><td><code id="suppliedElsewhere_+3A_returnwhere">returnWhere</code></td>
<td>
<p>Logical, default <code>FALSE</code>, whether the vector of length
3 logical should be returned, or a logical of length one</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>where</code> indicates which of three places to search, either <code>"sim"</code> i.e.,
the <code>simList</code>, which would be equivalent to <code style="white-space: pre;">&#8288;is.null(sim\$objName)&#8288;</code>, or
<code>"user"</code> which would be supplied by the user in the <code>simInit</code> function
call via <code>outputs</code> or <code>inputs</code> (equivalent to
<code style="white-space: pre;">&#8288;(!('defaultColor' \%in\% sim$.userSuppliedObjNames))&#8288;</code>),
or <code>"initEvent"</code>, which would test whether a module that gets loaded <strong>before</strong>
the present one <strong>will</strong> create it as part of its outputs (i.e., as indicated by
<code>createsOutputs</code> in that module's metadata). There is a caveat to this test,
however; if that other event also has the object as an <code>expectsInput</code>, then
it would fail this test, as it <em>also</em> needs it as an input.
This final one (<code>"initEvent"</code>) does not explicitly test that the object will be created
in the &quot;init&quot; event, only that it is in the outputs of that module, and that it is a module
that is loaded prior to this one.
</p>


<h3>Value</h3>

<p>logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mySim &lt;- simInit()
suppliedElsewhere("test", mySim) # FALSE

# supplied in the simList
mySim$test &lt;- 1
suppliedElsewhere("test", mySim) # TRUE
test &lt;- 1

# supplied from user at simInit time -- note, this object would eventually get into the simList
#   but the user supplied values come *after* the module's .inputObjects, so
#   a basic is.null(sim$test) would return TRUE even though the user supplied test
mySim &lt;- simInit(objects = list("test" = test))
suppliedElsewhere("test", mySim) # TRUE


# Example with prepInputs
# Put chunks like this in your .inputObjects
if (!suppliedElsewhere("test", mySim))
  sim$test &lt;- Cache(prepInputs, "raster.tif", "downloadedArchive.zip",
                    destinationPath = dataPath(sim), studyArea = sim$studyArea,
                    rasterToMatch = sim$otherRasterTemplate, overwrite = TRUE)

</code></pre>

<hr>
<h2 id='times'>Time usage in <code>SpaDES</code></h2><span id='topic+times'></span><span id='topic+simList-accessors-times'></span><span id='topic+times+2CsimList-method'></span><span id='topic+times+3C-'></span><span id='topic+times+3C-+2CsimList-method'></span><span id='topic+time.simList'></span><span id='topic+time+3C-'></span><span id='topic+time+3C-+2CsimList-method'></span><span id='topic+end'></span><span id='topic+end.simList'></span><span id='topic+end+3C-'></span><span id='topic+end+3C-+2CsimList-method'></span><span id='topic+start'></span><span id='topic+start.simList'></span><span id='topic+start+3C-'></span><span id='topic+start+3C-+2CsimList-method'></span><span id='topic+timeunit'></span><span id='topic+timeunit+2CsimList-method'></span><span id='topic+timeunit+3C-'></span><span id='topic+timeunit+3C-+2CsimList-method'></span><span id='topic+timeunits'></span><span id='topic+timeunits+2CsimList-method'></span><span id='topic+elapsedTime'></span><span id='topic+elapsedTime.simList'></span>

<h3>Description</h3>

<p>Functions for the <code>simtimes</code> slot of a <code>simList</code> object
and its elements. To maintain modularity, the behaviour of these functions depends
on where they are used. In other words, different modules can have their own
timeunit. <code>SpaDES</code> converts these to seconds when running a simulation, but
shows the user time in the units of the model as shown with <code>timeunit(sim)</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>times(x, ...)

## S4 method for signature 'simList'
times(x)

times(x) &lt;- value

## S4 replacement method for signature 'simList'
times(x) &lt;- value

## S3 method for class 'simList'
time(x, unit, ...)

time(x) &lt;- value

## S4 replacement method for signature 'simList'
time(x) &lt;- value

end(x, ...)

## S3 method for class 'simList'
end(x, unit, ...)

end(x) &lt;- value

## S4 replacement method for signature 'simList'
end(x) &lt;- value

start(x, ...)

## S3 method for class 'simList'
start(x, unit = NULL, ...)

start(x) &lt;- value

## S4 replacement method for signature 'simList'
start(x) &lt;- value

timeunit(x)

## S4 method for signature 'simList'
timeunit(x)

timeunit(x) &lt;- value

## S4 replacement method for signature 'simList'
timeunit(x) &lt;- value

timeunits(x)

## S4 method for signature 'simList'
timeunits(x)

elapsedTime(x, ...)

## S3 method for class 'simList'
elapsedTime(x, byEvent = TRUE, units = "auto", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="times_+3A_x">x</code></td>
<td>
<p>A <code>simList</code></p>
</td></tr>
<tr><td><code id="times_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
<tr><td><code id="times_+3A_value">value</code></td>
<td>
<p>A time, given as a numeric, optionally with a unit attribute,
but this will be deduced from the model time units or module
time units (if used within a module).</p>
</td></tr>
<tr><td><code id="times_+3A_unit">unit</code></td>
<td>
<p>Character. One of the time units used in <code>SpaDES</code>.</p>
</td></tr>
<tr><td><code id="times_+3A_byevent">byEvent</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the elapsed time will be by module and event;
<code>FALSE</code> will report only by module. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="times_+3A_units">units</code></td>
<td>
<p>character string.  Units in which the results are
desired.  Can be abbreviated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>timeunit</code> will extract the current units of the time used in a
simulation (i.e., within a <code>spades</code> call).
If it is set within a <code>simInit</code>, e.g.,
<code>times=list(start=0, end=52, timeunit = "week")</code>, it will set the
units for that simulation.
By default, a <code>simInit</code> call will use the smallest unit contained within
the metadata for the modules being used. If there are parent modules, then the
parent module timeunit will be used even if one of its children is a smaller timeunit.
If all modules, including parents, are set to <code>NA</code>, <code>timeunit</code> defaults to seconds.
If parents are set to <code>NA</code>, then the set of modules defined by that parent module
will be given the smallest units of the children.
</p>
<p>Currently, available units are &quot;second&quot;, &quot;hours&quot;, day&quot;, &quot;week&quot;, &quot;month&quot;, and
&quot;year&quot; can be used in the metadata of a module.
</p>
<p>The user can also define a new unit. The unit name can be anything, but the
function definition must be of the form <code>dunitName</code>, e.g., <code>dyear</code>
or <code>dfortnight</code>.
The unit name is the part without the <code>d</code> and the function name definition
includes the <code>d</code>. This new function, e.g.,
<code>dfortnight &lt;- function(x) lubridate::duration(dday(14))</code>
can be placed anywhere in the search path or in a module.
</p>
<p><code>timeunits</code> will extract the current units of the time of all
modules used in a simulation.
This is different from <code>timeunit</code> because it is not necessarily
associated with a <code>spades</code> call.
</p>
<p>In many cases, the &quot;simpler&quot; use of each of these functions may be slower
computationally. For instance, it is much faster to use <code>time(sim, "year")</code>
than <code>time(sim)</code>. So as a module developer, it is advantageous to
write out the longer one, minimizing the looking up that R must do.
</p>


<h3>Value</h3>

<p>Returns or sets the value of the slot from the <code>simList</code> object.
</p>


<h3>Note</h3>

<p>These have default behaviour that is based on the calling frame timeunit.
When used inside a module, then the time is in the units of the module.
If used in an interactive mode, then the time will be in the units of the
simulation.
</p>
<p>Additional methods are provided to access the current, start, and end times
of the simulation:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>time</code> </td><td style="text-align: left;"> Current simulation time.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>start</code> </td><td style="text-align: left;"> Simulation start time.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>end</code> </td><td style="text-align: left;"> Simulation end time.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>timeunit</code> </td><td style="text-align: left;"> Simulation timeunit.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>timeunits</code> </td><td style="text-align: left;"> Module timeunits.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>times</code> </td><td style="text-align: left;"> List of all simulation times (current, start, end, timeunit).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Alex Chubaty and Eliot McIntire
</p>


<h3>See Also</h3>

<p><a href="#topic+SpaDES.core-package">SpaDES.core-package</a>, specifically the section 1.2.5 on Simulation times;
<code><a href="#topic+elapsedTime">elapsedTime()</a></code>,
</p>
<p>Other functions to access elements of a 'simList' object: 
<code><a href="#topic+.addDepends">.addDepends</a>()</code>,
<code><a href="#topic+checkpointFile">checkpointFile</a>()</code>,
<code><a href="#topic+envir">envir</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+globals">globals</a>()</code>,
<code><a href="#topic+inputs">inputs</a>()</code>,
<code><a href="#topic+modules">modules</a>()</code>,
<code><a href="#topic+objs">objs</a>()</code>,
<code><a href="#topic+packages">packages</a>()</code>,
<code><a href="#topic+params">params</a>()</code>,
<code><a href="#topic+paths">paths</a>()</code>,
<code><a href="#topic+progressInterval">progressInterval</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Elapsed Time
s1 &lt;- simInit()
s2 &lt;- spades(s1)
elapsedTime(s2)
elapsedTime(s2, units = "mins")
</code></pre>

<hr>
<h2 id='updateList'>Update elements of a named list with elements of a second named list</h2><span id='topic+updateList'></span>

<h3>Description</h3>

<p>Defunct. Use <code><a href="utils.html#topic+modifyList">utils::modifyList()</a></code> (which can not handle NULL) or
<code><a href="Require.html#topic+modifyList2">Require::modifyList2()</a></code> for case with &gt;2 lists and can handle NULL lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateList(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateList_+3A_x">x</code></td>
<td>
<p>a named list</p>
</td></tr>
<tr><td><code id="updateList_+3A_y">y</code></td>
<td>
<p>a named list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list, with elements sorted by name.
The values of matching elements in list <code>y</code>
replace the values in list <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='use_gha'>Use GitHub actions for automated module checking</h2><span id='topic+use_gha'></span>

<h3>Description</h3>

<p>See corresponding vignette for more information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_gha(name, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_gha_+3A_name">name</code></td>
<td>
<p>module name</p>
</td></tr>
<tr><td><code id="use_gha_+3A_path">path</code></td>
<td>
<p>module path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invoked for its side effect of creating new GitHub Actions workflow files.
</p>

<hr>
<h2 id='writeEventInfo'>Write simulation event info to file</h2><span id='topic+writeEventInfo'></span>

<h3>Description</h3>

<p>Useful for debugging.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeEventInfo(sim, file = "events.txt", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeEventInfo_+3A_sim">sim</code></td>
<td>
<p>A <code>simList</code> object.</p>
</td></tr>
<tr><td><code id="writeEventInfo_+3A_file">file</code></td>
<td>
<p>Character specifying the file name (default &lsquo;<span class="file">&quot;events.txt&quot;</span>&rsquo;).</p>
</td></tr>
<tr><td><code id="writeEventInfo_+3A_append">append</code></td>
<td>
<p>Logical indicating whether to append to the file (default <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing returned. Invoked for its side effect of writing to file.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='writeRNGInfo'>Write RNG state info to file</h2><span id='topic+writeRNGInfo'></span>

<h3>Description</h3>

<p>Useful for debugging and ensuring reproducibility.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeRNGInfo(file = "seed.txt", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeRNGInfo_+3A_file">file</code></td>
<td>
<p>Character specifying the filename (default <code>"seed.txt"</code>).</p>
</td></tr>
<tr><td><code id="writeRNGInfo_+3A_append">append</code></td>
<td>
<p>Logical indicating whether to append to the file (default <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing returned. Invoked for its side effect of writing to file.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>

<hr>
<h2 id='zipModule'>Create a zip archive of a module subdirectory</h2><span id='topic+zipModule'></span><span id='topic+zipModule+2Ccharacter+2Ccharacter+2Ccharacter-method'></span><span id='topic+zipModule+2Ccharacter+2Cmissing+2Ccharacter-method'></span><span id='topic+zipModule+2Ccharacter+2Cmissing+2Cmissing-method'></span><span id='topic+zipModule+2Ccharacter+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>The most common use of this would be from a &quot;modules&quot; directory, rather than
inside a given module.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zipModule(name, path, version, data = FALSE, ...)

## S4 method for signature 'character,character,character'
zipModule(name, path, version, data = FALSE, ...)

## S4 method for signature 'character,missing,character'
zipModule(name, path, version, data = FALSE, ...)

## S4 method for signature 'character,missing,missing'
zipModule(name, path, version, data = FALSE, ...)

## S4 method for signature 'character,character,missing'
zipModule(name, path, version, data = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zipModule_+3A_name">name</code></td>
<td>
<p>Character string giving the module name.</p>
</td></tr>
<tr><td><code id="zipModule_+3A_path">path</code></td>
<td>
<p>A file path to a directory containing the module subdirectory.</p>
</td></tr>
<tr><td><code id="zipModule_+3A_version">version</code></td>
<td>
<p>The module version.</p>
</td></tr>
<tr><td><code id="zipModule_+3A_data">data</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then the data subdirectory will be included in the zip.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="zipModule_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code><a href="utils.html#topic+zip">zip()</a></code>:
e.g., add <code>"-q"</code> using <code>flags="-q -r9X"</code>
(the default flags are <code>"-r9X"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned. Invoked for its side effect of zipping module files.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>

<hr>
<h2 id='zipSimList'>Zip a <code>simList</code> and various files</h2><span id='topic+zipSimList'></span><span id='topic+experiment'></span><span id='topic+experiment2'></span><span id='topic+POM'></span><span id='topic+simInitAndExperiment'></span><span id='topic+loadPackages'></span>

<h3>Description</h3>

<p><code>zipSimList</code> will save the <code>simList</code> and file-backed <code style="white-space: pre;">&#8288;Raster*&#8288;</code> objects, plus,
optionally, files identified in <code>outputs(sim)</code> and <code>inputs(sim)</code>.
This uses <code>Copy</code> under the hood, to not affect the original <code>simList</code>.
</p>
<p>These functions have been moved to other packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zipSimList(sim, zipfile, ..., outputs = TRUE, inputs = TRUE, cache = FALSE)

experiment(...)

experiment2(...)

POM(...)

simInitAndExperiment(...)

loadPackages(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zipSimList_+3A_sim">sim</code></td>
<td>
<p>Either a <code>simList</code> or a character string of the name
of a <code>simList</code> that can be found in <code>envir</code>.
Using a character string will assign that object name to the saved
<code>simList</code>, so when it is recovered it will be given that name.</p>
</td></tr>
<tr><td><code id="zipSimList_+3A_zipfile">zipfile</code></td>
<td>
<p>A character string indicating the filename for the zip file. Passed to <code>zip</code>.</p>
</td></tr>
<tr><td><code id="zipSimList_+3A_...">...</code></td>
<td>
<p>Unused.</p>
</td></tr>
<tr><td><code id="zipSimList_+3A_outputs">outputs</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all files identified in
<code>outputs(sim)</code> will be included in the zip.</p>
</td></tr>
<tr><td><code id="zipSimList_+3A_inputs">inputs</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all files identified in
<code>inputs(sim)</code> will be included in the zip.</p>
</td></tr>
<tr><td><code id="zipSimList_+3A_cache">cache</code></td>
<td>
<p>Logical. Not yet implemented. If <code>TRUE</code>, all files in <code>cachePath(sim)</code>
will be included in the archive.
Defaults to <code>FALSE</code> as this could be large, and may include many out of date elements.
See Details.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
