<!DOCTYPE html><html lang="en-US"><head><title>Help for package savvyr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {savvyr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#savvyr-package'><p>savvyr: Survival Analysis for AdVerse Events with VarYing Follow-Up Times</p></a></li>
<li><a href='#aalen_johansen'><p>Aalen Johansen Estimator</p></a></li>
<li><a href='#assert_ae_data'><p>Assertion of Adverse Event Data</p></a></li>
<li><a href='#generate_data'><p>Generate Example Data</p></a></li>
<li><a href='#inc_prop'><p>Computing the Incidence Proportion</p></a></li>
<li><a href='#one_minus_kaplan_meier'><p>One Minus Kaplan-Meier</p></a></li>
<li><a href='#prop_trans_inc_dens'><p>Computing the Probability Transform Incidence Density</p></a></li>
<li><a href='#prop_trans_inc_dens_ce'><p>Probability Transform Incidence Density Accounting for Competing Events</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Survival Analysis for AdVerse Events with VarYing Follow-Up
Times</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-06-06</td>
</tr>
<tr>
<td>Description:</td>
<td>The SAVVY (Survival Analysis for AdVerse Events with VarYing Follow-Up Times)
    project is a consortium of academic and pharmaceutical
    industry partners that aims to improve the analyses of adverse event (AE)
    data in clinical trials through the use of survival techniques appropriately
    dealing with varying follow-up times and competing events, see
    Stegherr, Schmoor, Beyersmann, et al. (2021) &lt;<a href="https://doi.org/10.1186%2Fs13063-021-05354-x">doi:10.1186/s13063-021-05354-x</a>&gt;.
    Although statistical methodologies have advanced,
    in AE analyses often the incidence proportion, the incidence density or a
    non-parametric Kaplan-Meier estimator are used, which either ignore censoring or
    competing events. This package contains functions to easily conduct the
    proposed improved AE analyses.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://openpharma.github.io/savvyr/">https://openpharma.github.io/savvyr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/openpharma/savvyr/issues">https://github.com/openpharma/savvyr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, etm, Rdpack</td>
</tr>
<tr>
<td>Suggests:</td>
<td>kableExtra, knitr, rmarkdown, testthat (&ge; 3.0)</td>
</tr>
<tr>
<td>Config/Needs/documentation:</td>
<td>roxytypes=github::openpharma/roxytypes,
roxylint=github::openpharma/roxylint</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-10 09:24:33 UTC; kuenzelt</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Kuenzel [aut, cre],
  Kaspar Rufibach [aut],
  Regina Stegherr [aut],
  Daniel Sabanés Bové [aut],
  F. Hoffmann-La Roche AG [cph, fnd],
  Universität Ulm [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Kuenzel &lt;thomas.kuenzel@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-10 09:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='savvyr-package'>savvyr: Survival Analysis for AdVerse Events with VarYing Follow-Up Times</h2><span id='topic+savvyr'></span><span id='topic+savvyr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>The SAVVY (Survival Analysis for AdVerse Events with VarYing Follow-Up Times) project is a consortium of academic and pharmaceutical industry partners that aims to improve the analyses of adverse event (AE) data in clinical trials through the use of survival techniques appropriately dealing with varying follow-up times and competing events, see Stegherr, Schmoor, Beyersmann, et al. (2021) <a href="https://doi.org/10.1186/s13063-021-05354-x">doi:10.1186/s13063-021-05354-x</a>. Although statistical methodologies have advanced, in AE analyses often the incidence proportion, the incidence density or a non-parametric Kaplan-Meier estimator are used, which either ignore censoring or competing events. This package contains functions to easily conduct the proposed improved AE analyses.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Thomas Kuenzel <a href="mailto:thomas.kuenzel@roche.com">thomas.kuenzel@roche.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Kaspar Rufibach <a href="mailto:kaspar.rufibach@roche.com">kaspar.rufibach@roche.com</a>
</p>
</li>
<li><p> Regina Stegherr <a href="mailto:regina.stegherr@uni-ulm.de">regina.stegherr@uni-ulm.de</a>
</p>
</li>
<li><p> Daniel Sabanés Bové <a href="mailto:daniel.sabanes_bove@roche.com">daniel.sabanes_bove@roche.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li>
<li><p> Universität Ulm [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://openpharma.github.io/savvyr/">https://openpharma.github.io/savvyr/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/openpharma/savvyr/issues">https://github.com/openpharma/savvyr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='aalen_johansen'>Aalen Johansen Estimator</h2><span id='topic+aalen_johansen'></span>

<h3>Description</h3>

<p>This function calculates the Aalen Johansen estimator of
adverse events  observed in <code style="white-space: pre;">&#8288;[0, tau]&#8288;</code>.
Please also refer to  Stegherr et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aalen_johansen(data, ce, tau)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aalen_johansen_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br /> with columns including
</p>

<ul>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft competing event.
</p>
</li></ul>
</td></tr>
<tr><td><code id="aalen_johansen_+3A_ce">ce</code></td>
<td>
<p>(<code>number</code>)<br /> code for competing event.</p>
</td></tr>
<tr><td><code id="aalen_johansen_+3A_tau">tau</code></td>
<td>
<p>(<code>number</code>)<br /> milestone at which Aalen-Johansen is computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>vector</code>)<br /> with the following entries:
</p>

<ul>
<li> <p><code>ae_prob</code>: Estimated probability of AE.
</p>
</li>
<li> <p><code>ae_prob_var</code>: Variance of that estimate.
</p>
</li>
<li> <p><code>ce_prob</code>: Estimated probability of competing events.
</p>
</li>
<li> <p><code>ce_prob_var</code>: Variance of competing events.
</p>
</li></ul>



<h3>References</h3>

<p>Stegherr R, Schmoor C, Lübbert M, Friede T, Beyersmann J (2021).
&ldquo;Estimating and comparing adverse event probabilities in the presence of varying follow-up times and competing events.&rdquo;
<em>Pharmaceutical Statistics</em>, <b>20</b>(6), 1125&ndash;1146.
<a href="https://doi.org/10.1002/pst.2130">doi:10.1002/pst.2130</a>, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/pst.2130">https://onlinelibrary.wiley.com/doi/abs/10.1002/pst.2130</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dat &lt;- generate_data(n = 5, cens = c(2, 5), haz_ae = 2, haz_death = 3, haz_soft = 5)
aalen_johansen(dat, ce = 2, tau = 4)
</code></pre>

<hr>
<h2 id='assert_ae_data'>Assertion of Adverse Event Data</h2><span id='topic+assert_ae_data'></span>

<h3>Description</h3>

<p>Custom assertion to check adverse event data sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_ae_data(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assert_ae_data_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> to be checked for <code>time_to_event</code> and <code>type_of_event</code> columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>

<hr>
<h2 id='generate_data'>Generate Example Data</h2><span id='topic+generate_data'></span>

<h3>Description</h3>

<p>This generates the dataset denoted by <code>S1</code> in Table 4 of
Stegherr et al. (2021),
i.e. we assume constant hazards for the adverse event (AE) hazard, the
hazard for the competing event of death, and the hazard for the &quot;soft&quot;
competing events. Censoring is uniform in the given range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_data(n, cens, haz_ae, haz_death, haz_soft)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_data_+3A_n">n</code></td>
<td>
<p>(<code>count</code>)<br /> number of patients.</p>
</td></tr>
<tr><td><code id="generate_data_+3A_cens">cens</code></td>
<td>
<p>(<code>numeric</code>)<br /> minimum and maximum censoring time.</p>
</td></tr>
<tr><td><code id="generate_data_+3A_haz_ae">haz_ae</code></td>
<td>
<p>(<code>number</code>)<br /> constant hazard for AE.</p>
</td></tr>
<tr><td><code id="generate_data_+3A_haz_death">haz_death</code></td>
<td>
<p>(<code>number</code>)<br /> constant hazard for death.</p>
</td></tr>
<tr><td><code id="generate_data_+3A_haz_soft">haz_soft</code></td>
<td>
<p>(<code>number</code>)<br /> constant hazard for soft competing event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>data.frame</code>)<br /> a <code>data.frame</code> with the following columns:
</p>

<ul>
<li> <p><code>id</code>: Patient ID.
</p>
</li>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft
competing event.
</p>
</li>
<li> <p><code>cens</code>: Censoring time.
</p>
</li></ul>



<h3>References</h3>

<p>Stegherr R, Schmoor C, Lübbert M, Friede T, Beyersmann J (2021).
&ldquo;Estimating and comparing adverse event probabilities in the presence of varying follow-up times and competing events.&rdquo;
<em>Pharmaceutical Statistics</em>, <b>20</b>(6), 1125&ndash;1146.
<a href="https://doi.org/10.1002/pst.2130">doi:10.1002/pst.2130</a>, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/pst.2130">https://onlinelibrary.wiley.com/doi/abs/10.1002/pst.2130</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
generate_data(n = 5, cens = c(2, 5), haz_ae = 2, haz_death = 3, haz_soft = 5)
</code></pre>

<hr>
<h2 id='inc_prop'>Computing the Incidence Proportion</h2><span id='topic+inc_prop'></span>

<h3>Description</h3>

<p>Computing the Incidence Proportion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inc_prop(data, tau)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inc_prop_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br /> with columns including:
</p>

<ul>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing
event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft
competing event.
</p>
</li></ul>
</td></tr>
<tr><td><code id="inc_prop_+3A_tau">tau</code></td>
<td>
<p>(<code>numeric</code>)<br /> milestone at which incidence proportion is computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>vector</code>)<br /> with the following entries:
</p>

<ul>
<li> <p><code>ae_prob</code>: Estimated probability of AE.
</p>
</li>
<li> <p><code>ae_prob_var</code>: Variance of that estimate.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dat &lt;- generate_data(
  n = 5,
  cens = c(2, 5),
  haz_ae = 2,
  haz_death = 3,
  haz_soft = 5
)

inc_prop(dat, tau = 4)

</code></pre>

<hr>
<h2 id='one_minus_kaplan_meier'>One Minus Kaplan-Meier</h2><span id='topic+one_minus_kaplan_meier'></span>

<h3>Description</h3>

<p>This function calculates the one minus Kaplan-Meier estimator of
adverse events (while censoring all competing events) observed in <code style="white-space: pre;">&#8288;[0, tau]&#8288;</code>.
Please also refer to formula (4) in Stegherr et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>one_minus_kaplan_meier(data, tau)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="one_minus_kaplan_meier_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br /> with columns including
</p>

<ul>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft competing event.
</p>
</li></ul>
</td></tr>
<tr><td><code id="one_minus_kaplan_meier_+3A_tau">tau</code></td>
<td>
<p>(<code>number</code>)<br /> milestone at which One Minus Kaplan-Meier is computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>vector</code>)<br /> with the following entries:
</p>

<ul>
<li> <p><code>ae_prob</code>: Estimated probability of AE.
</p>
</li>
<li> <p><code>ae_prob_var</code>: Variance of that estimate.
</p>
</li></ul>



<h3>References</h3>

<p>Stegherr R, Beyersmann J, Jehl V, Rufibach K, Leverkus F, Schmoor C, Friede T (2021).
&ldquo;Survival analysis for AdVerse events with VarYing follow-up times (SAVVY): Rationale and statistical concept of a meta-analytic study.&rdquo;
<em>Biometrical Journal</em>, <b>63</b>(3), 650-670.
<a href="https://doi.org/10.1002/bimj.201900347">doi:10.1002/bimj.201900347</a>, https://onlinelibrary.wiley.com/doi/pdf/10.1002/bimj.201900347, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/bimj.201900347">https://onlinelibrary.wiley.com/doi/abs/10.1002/bimj.201900347</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dat &lt;- generate_data(n = 5, cens = c(2, 5), haz_ae = 2, haz_death = 3, haz_soft = 5)
one_minus_kaplan_meier(dat, tau = 4)
</code></pre>

<hr>
<h2 id='prop_trans_inc_dens'>Computing the Probability Transform Incidence Density</h2><span id='topic+prop_trans_inc_dens'></span>

<h3>Description</h3>

<p>Computing the Probability Transform Incidence Density
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prop_trans_inc_dens(data, tau)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prop_trans_inc_dens_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br /> with columns including
</p>

<ul>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft competing event.
</p>
</li></ul>
</td></tr>
<tr><td><code id="prop_trans_inc_dens_+3A_tau">tau</code></td>
<td>
<p>(<code>number</code>)<br /> milestone at which Probability Transform Incidence Density is computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>vector</code>)<br /> with the following entries:
</p>

<ul>
<li> <p><code>ae_prob</code>: Estimated probability of AE.
</p>
</li>
<li> <p><code>ae_prob_var</code>: Variance of that estimate.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dat &lt;- generate_data(n = 5, cens = c(2, 5), haz_ae = 2, haz_death = 3, haz_soft = 5)
prop_trans_inc_dens(dat, tau = 4)
</code></pre>

<hr>
<h2 id='prop_trans_inc_dens_ce'>Probability Transform Incidence Density Accounting for Competing Events</h2><span id='topic+prop_trans_inc_dens_ce'></span>

<h3>Description</h3>

<p>This function calculates the incidence density of both adverse events and specified competing events
observed in <code style="white-space: pre;">&#8288;[0, tau]&#8288;</code> and then combines and transforms the incidence densities on a probability scale.
Please also refer to formulas (4) and (5) in Stegherr et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prop_trans_inc_dens_ce(data, ce, tau)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prop_trans_inc_dens_ce_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br /> with columns including
</p>

<ul>
<li> <p><code>time_to_event</code>: Time to the first AE, death or soft competing event.
</p>
</li>
<li> <p><code>type_of_event</code>: 0 for censored, 1 for AE, 2 for death, 3 for soft competing event.
</p>
</li></ul>
</td></tr>
<tr><td><code id="prop_trans_inc_dens_ce_+3A_ce">ce</code></td>
<td>
<p>(<code>number</code>)<br /> code for competing event.</p>
</td></tr>
<tr><td><code id="prop_trans_inc_dens_ce_+3A_tau">tau</code></td>
<td>
<p>(<code>number</code>)<br /> milestone at which Probability Transform Incidence Density is computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>vector</code>)<br /> with the following entries:
</p>

<ul>
<li> <p><code>ae_prob</code>: Estimated probability of AE.
</p>
</li>
<li> <p><code>ae_prob_var</code>: Variance of that estimate.
</p>
</li></ul>



<h3>References</h3>

<p>Stegherr R, Schmoor C, Beyersmann J, Rufibach K, Jehl V, Brückner A, Eisele L, Künzel T, Kupas K, Langer F, Leverkus F, Loos A, Norenberg C, Voss F, Friede T (2021).
&ldquo;Survival analysis for AdVerse events with VarYing follow-up times (SAVVY)—estimation of adverse event risks.&rdquo;
<em>Trials</em>, <b>22</b>(1), 420.
ISSN 1745-6215, <a href="https://doi.org/10.1186/s13063-021-05354-x">doi:10.1186/s13063-021-05354-x</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dat &lt;- generate_data(n = 5, cens = c(2, 5), haz_ae = 2, haz_death = 3, haz_soft = 5)
prop_trans_inc_dens_ce(dat, ce = 2, tau = 4)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
