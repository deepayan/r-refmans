<!DOCTYPE html><html lang="en"><head><title>Help for package SPORTSCausal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SPORTSCausal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SPORTSCausal-package'>
<p>Spillover Time Series Causal Inference</p></a></li>
<li><a href='#ad_cost'><p>Advertising cost: a real experimental data under spillover effect</p></a></li>
<li><a href='#sportscausal'><p>Time series causal inference of Randomized Controlled Trial (RCT) under spillover effect</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Spillover Time Series Causal Inference</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>CausalImpact, keras, stats, graphics, grDevices</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-03-13</td>
</tr>
<tr>
<td>Author:</td>
<td>Zihao Zheng and Feiyu Yue</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Feiyu Yue &lt;yuefyopals@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A time series causal inference model for Randomized Controlled Trial (RCT) under spillover effect. 'SPORTSCausal' (Spillover Time Series Causal Inference) separates treatment effect and spillover effect from given responses of experiment group and control group by predicting the response without treatment. It reports both effects by fitting the Bayesian Structural Time Series (BSTS) model based on 'CausalImpact', as described in Brodersen et al. (2015) &lt;<a href="https://doi.org/10.1214%2F14-AOAS788">doi:10.1214/14-AOAS788</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-03-28 08:33:14 UTC; zhengzihao</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-03-30 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='SPORTSCausal-package'>
Spillover Time Series Causal Inference
</h2><span id='topic+SPORTSCausal-package'></span><span id='topic+SPORTSCausal'></span>

<h3>Description</h3>

<p>A time series causal inference model for Randomized Controlled Trial (RCT) under spillover effect. 'SPORTSCausal' (Spillover Time Series Causal Inference) separates treatment effect and spillover effect from given responses of experiment group and control group by predicting the response without treatment. It reports both effects by fitting the Bayesian Structural Time Series (BSTS) model based on 'CausalImpact', as described in Brodersen et al. (2015) &lt;doi:10.1214/14-AOAS788&gt;. 
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> SPORTSCausal</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Spillover Time Series Causal Inference</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> CausalImpact,
keras,
stats,
graphics,
grDevices</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-03-13</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Zihao Zheng and Feiyu Yue</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Feiyu Yue &lt;yuefyopals@gmail.com&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> A time series causal inference model for Randomized Controlled Trial (RCT) under spillover effect. 'SPORTSCausal' (Spillover Time Series Causal Inference) separates treatment effect and spillover effect from given responses of experiment group and control group by predicting the response without treatment. It reports both effects by fitting the Bayesian Structural Time Series (BSTS) model based on 'CausalImpact', as described in Brodersen et al. (2015) &lt;doi:10.1214/14-AOAS788&gt;. </td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
SPORTSCausal-package    Spillover Time Series Causal Inference
ad_cost                 Advertising cost: a real experimental data
                        under spillover effect
sportscausal            Time series causal inference of Randomized
                        Controlled Trial (RCT) under spillover effect
</pre>


<h3>Author(s)</h3>

<p>Zihao Zheng and Feiyu Yue
</p>
<p>Maintainer: Feiyu Yue &lt;yuefyopals@gmail.com&gt;
</p>


<h3>References</h3>

<p>Brodersen et al. <em>Inferring causal impact using Bayesian structural time-series models</em>. Annals of Applied Statistics, 2015
</p>


<h3>See Also</h3>

<p><a href="http://google.github.io/CausalImpact/CausalImpact.html">http://google.github.io/CausalImpact/CausalImpact.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## For more detail of the package, try ?sportscausal and ?ad_cost
</code></pre>

<hr>
<h2 id='ad_cost'>Advertising cost: a real experimental data under spillover effect</h2><span id='topic+ad_cost'></span>

<h3>Description</h3>

<p>This dataset comes from an A/Btest, which is to evaluate how a newly-proposed algorithm will affect the cost of advertising. Assuming that the bidding environment of an advertising market is stable in a short period of time, there will be no net increase or decrease of cost. When a treatment is applied, the mutual interference between the experiment group and the control group can not be ignored. For example, the difference in cost between the experiment group and the control group might not only come from the increase of experiment group, caused by treatment effect, but also from the potential decrease in control group. That is the typical situation for spillover causal inference to be implemented.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("ad_cost")</code></pre>


<h3>Format</h3>

<p>A data frame with 49 observations on the following 3 variables.
</p>

<dl>
<dt><code>y.exp</code></dt><dd><p>A numeric vector of responses in experiment group.</p>
</dd>
<dt><code>y.con</code></dt><dd><p>A numeric vector of responses in control group.</p>
</dd>
<dt><code>time</code></dt><dd><p>A numeric vector indicating time period before/after the treatment, <code>time = 1</code> represents post treatment period.</p>
</dd>
</dl>



<h3>Details</h3>

<p>This data has been linearly transformed for confidential issue.</p>


<h3>Examples</h3>

<pre><code class='language-R'>### load data

data(ad_cost)

### define variables and visualize

y.exp = ad_cost$y.exp

y.con = ad_cost$y.con

plot(y.exp, col = "red", type = "l", 
     xlab = "time", ylab = "response")

lines(y.con, col = "blue")

### fit the model and return treatment/spillover effect

# notice that day-34 is the first day of treatment

fit = sportscausal(y.exp = y.exp, y.con = y.con,
                   pre.period = c(1:33), post.period = c(34:49), is.plot = FALSE)

fit$est.treatment

fit$est.spillover
</code></pre>

<hr>
<h2 id='sportscausal'>Time series causal inference of Randomized Controlled Trial (RCT) under spillover effect</h2><span id='topic+sportscausal'></span>

<h3>Description</h3>

<p>'SPORTSCausal' produces treatment effect and spillover effect estimation from responses of experiment group and control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sportscausal(y.exp, y.con, pre.period, post.period, is.plot = TRUE, 
  model.select = "AIC", max.p = 3, max.d = 3, max.q = 3, feature = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sportscausal_+3A_y.exp">y.exp</code></td>
<td>
<p>Response of experiment group, from pre-treatment to post-treatment</p>
</td></tr>
<tr><td><code id="sportscausal_+3A_y.con">y.con</code></td>
<td>
<p>Response of control group, from pre-treatment to post-treatment</p>
</td></tr>
<tr><td><code id="sportscausal_+3A_pre.period">pre.period</code></td>
<td>
<p>Time period before the treatment</p>
</td></tr>
<tr><td><code id="sportscausal_+3A_post.period">post.period</code></td>
<td>
<p>Time period during the treatment</p>
</td></tr>
<tr><td><code id="sportscausal_+3A_is.plot">is.plot</code></td>
<td>
<p>If <code>is.plot = TRUE</code>, by default, a pdf containing summary figures will be returned to the current working directory as <code>getwd()</code></p>
</td></tr>
<tr><td><code id="sportscausal_+3A_model.select">model.select</code></td>
<td>
<p>Model used to predict the time series without treatment. If <code>model.select = "AIC"</code>, by default, the ARIMA model using AIC selection would be applied. If <code>model.select = "CV"</code>, the ARIMA model using cross validation would be applied. If <code>model.select = "lstm"</code>, the Long Short-Term Memory model would be applied</p>
</td></tr>
<tr><td><code id="sportscausal_+3A_max.p">max.p</code></td>
<td>
<p>The max number of autoregressive terms in ARIMA model, by default <code>max.p = 3</code></p>
</td></tr>
<tr><td><code id="sportscausal_+3A_max.d">max.d</code></td>
<td>
<p>The max number of nonseasonal differences needed for stationarity in ARIMA model, by default <code>max.d = 3</code></p>
</td></tr>
<tr><td><code id="sportscausal_+3A_max.q">max.q</code></td>
<td>
<p>The max number of lagged forecast errors in the prediction equation in ARIMA model, by default <code>max.p = 3</code></p>
</td></tr>
<tr><td><code id="sportscausal_+3A_feature">feature</code></td>
<td>
<p>The covariate matrix associated with the response. By default, <code>feature = NULL</code> but can be non-null when <code>model.select = "lstm"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the presense of spillover effect, the response of control group could be interferenced by the treatment. In order to seprate the treatment effect and spillover effect, <code>sportscausal</code> uses ARIMA model or LSTM model to predict the response behavior without treatment. The point estimator and significance of both effect follow using Bayesian Structrual Time Series (BSTS) model.</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>est.treatment</code></td>
<td>
<p>Information of treatment effect estimation, containing point estimation, confidence interval and p-value</p>
</td></tr>
<tr><td><code>est.spillover</code></td>
<td>
<p>Information of spillover effect estimation, containing point estimation, confidence interval and p-value</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Zihao Zheng and Feiyu Yue</p>


<h3>References</h3>

<p>Brodersen et al. <em>Inferring causal impact using Bayesian structural time-series models</em>. Annals of Applied Statistics, 2015</p>


<h3>See Also</h3>

<p>See also <code>?ad_cost</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## simulate data
  
  set.seed(1)

  y0 = 100 + arima.sim(model = list(ar = 0.3), n = 125)

  y.con = y0 + rnorm(125)
  y.con[101:125] = y.con[101:125] - 10 ## -10 as spillover effect

  y.exp = y0 + rnorm(125)
  y.exp[101:125] = y.exp[101:125] + 10 ## 10 as treatment effect

  pre.period = c(1:100)
  post.period = c(101:125)

  ## visualize

  plot(y.exp, col = "red", type = "l", ylab = "response",
     ylim = c(80, 120))

  lines(y.con, col = "blue")

  abline(v = 101, col = "grey", lty = 2, lwd = 2)

  legend("topleft", legend = c("exp", "con"), col = c("red", "blue"),
       cex = 1, lty = 1)

  ## try SPORTSCausal with ARIMA + AIC

  fit.aic = sportscausal(y.exp = y.exp, y.con = y.con, 
            pre.period = pre.period, post.period = post.period, is.plot = FALSE)

  fit.aic$est.treatment
  fit.aic$est.spillover

  ## you can also try model.select = "CV" or "lstm"
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
