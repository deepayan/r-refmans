<!DOCTYPE html><html lang="en-GB"><head><title>Help for package shiny.destroy</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shiny.destroy}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#shiny.destroy-package'><p>shiny.destroy: Create Destroyable Modules in 'Shiny'</p></a></li>
<li><a href='#addDestroyers'><p>Add shiny.destroy Code to Module</p></a></li>
<li><a href='#destroyModule'><p>Destroy Shiny Module</p></a></li>
<li><a href='#isSpecifiedFunction'><p>Check if Function Call is relevant function</p></a></li>
<li><a href='#makeModuleUIDestroyable'><p>Create Destroyable Module</p></a></li>
<li><a href='#removeInput'><p>Remove Input from Shiny Session</p></a></li>
<li><a href='#removeOutput'><p>Remove Output from Shiny Session</p></a></li>
<li><a href='#runDestroyExample'><p>Run 'shiny.destroy' example</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Create Destroyable Modules in 'Shiny'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Enables the complete removal of various 'Shiny' components, such
    as inputs, outputs and modules. It also aids in the removal of observers that have been 
    created in dynamically created modules.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>purrr, rlang, shiny</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bslib, htmltools, knitr, rmarkdown, shinytest2, spelling,
testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-16 19:52:28 UTC; arbal</td>
</tr>
<tr>
<td>Author:</td>
<td>Ashley Baldry [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ashley Baldry &lt;arbaldry91@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-17 12:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='shiny.destroy-package'>shiny.destroy: Create Destroyable Modules in 'Shiny'</h2><span id='topic+shiny.destroy'></span><span id='topic+shiny.destroy-package'></span>

<h3>Description</h3>

<p>This package enables the complete removal of various 'Shiny' components, such as inputs, outputs and modules. It also aids in the removal of observers that have been created in dynamically created modules.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ashley Baldry <a href="mailto:arbaldry91@gmail.com">arbaldry91@gmail.com</a>
</p>

<hr>
<h2 id='addDestroyers'>Add shiny.destroy Code to Module</h2><span id='topic+addDestroyers'></span>

<h3>Description</h3>

<p>For a given 'moduleServer' call, add the code required for {shiny.destroy}
to work. This will involve creating the observer list to the user session,
and adds all observers within the list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDestroyers(module)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addDestroyers_+3A_module">module</code></td>
<td>
<p>The function call to 'moduleServer'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated version of 'module', where the {shiny.destroy}
code has been added.
</p>

<hr>
<h2 id='destroyModule'>Destroy Shiny Module</h2><span id='topic+destroyModule'></span>

<h3>Description</h3>

<p>Given the namespace of a shiny module, remove all references
to the inputs, outputs and observers that are called within
the module.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>destroyModule(id = NULL, session = getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="destroyModule_+3A_id">id</code></td>
<td>
<p>The module namespace ID. Use 'NULL' to destroy the module the call
is being executed in.</p>
</td></tr>
<tr><td><code id="destroyModule_+3A_session">session</code></td>
<td>
<p>The shiny session, by default it is 'shiny::getDefaultReactiveDomain()'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to remove the relevant module UI and server-side
observers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)

basicModuleUI &lt;- function(id) {
  ns &lt;- NS(id)
  actionButton(ns("click"), "Click Button")
}

basicModuleServer &lt;- function(id) {
  moduleServer(id, function(input, output, session) {
    rv &lt;- reactiveVal(0L)
    observeEvent(input$click, rv(rv() + 1L))
    rv
  })
}

destroyableModuleUI &lt;- makeModuleUIDestroyable(basicModuleUI)
destroyableModuleServer &lt;- makeModuleServerDestroyable(basicModuleServer)

ui &lt;- fluidPage(
  destroyableModuleUI(id = "test"),
  actionButton("destroy", "Destroy module"),
  textOutput("reactive_value")
)

server &lt;- function(input, output, session) {
  top_rv &lt;- reactiveVal()
  reactive_value &lt;- destroyableModuleServer("test")
  observeEvent(reactive_value(), top_rv(reactive_value()))

  output$reactive_value &lt;- renderText(top_rv())

  observeEvent(input$destroy, destroyModule("test"))
}

shinyApp(ui, server)

</code></pre>

<hr>
<h2 id='isSpecifiedFunction'>Check if Function Call is relevant function</h2><span id='topic+isSpecifiedFunction'></span>

<h3>Description</h3>

<p>A short description...
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isSpecifiedFunction(fn_call, fns)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="isSpecifiedFunction_+3A_fn_call">fn_call</code></td>
<td>
<p>A function call</p>
</td></tr>
<tr><td><code id="isSpecifiedFunction_+3A_fns">fns</code></td>
<td>
<p>A character vector of functions to compare the function call against</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value stating whether or not the function call is in the collection.
</p>

<hr>
<h2 id='makeModuleUIDestroyable'>Create Destroyable Module</h2><span id='topic+makeModuleUIDestroyable'></span><span id='topic+makeModuleServerDestroyable'></span>

<h3>Description</h3>

<p>Adding wrappers to a shiny module to enable an ease of dynamically
adding and removing modules within a shiny application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeModuleUIDestroyable(module_fn, wrapper = shiny::div)

makeModuleServerDestroyable(module_fn)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makeModuleUIDestroyable_+3A_module_fn">module_fn</code></td>
<td>
<p>The server-side part of the module</p>
</td></tr>
<tr><td><code id="makeModuleUIDestroyable_+3A_wrapper">wrapper</code></td>
<td>
<p>If the module is a 'shiny::tagList()', then an HTML tag
will be wrapped by an HTML tag so that a shiny.destroy attribute
can be attached</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated function call of 'module_fn'.
</p>
<p>For the UI, if the returned object from 'module_fn' is a 'shiny.tag'
then an additional attribute will be added to the top-level HTML tag
for {shiny.destroy} to reference when removing the UI. If the returned
object is a 'shiny.tag.list' then a wrapper tag will surround the module
with the attribute to destroy the module.
</p>
<p>For the server, each observer will be assigned to the '.shiny.destroy'
list within 'session$userData'. The returned object from the module
remains the same as before.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)

# UI
basicModuleUI &lt;- function(id) {
  ns &lt;- NS(id)
  actionButton("click", "Increase")
}

destroyableModuleUI &lt;- makeModuleUIDestroyable(basicModuleUI)

# Server-side
basicMoudleServer &lt;- function(id) {
  moduleServer(id, function(input, output, session) {
    rv &lt;- reactiveVal()
    observeEvent(input$click, rv(input$click))
  })
}

destroyableModuleServer &lt;- makeModuleServerDestroyable(basicMoudleServer)

# Shiny Application
ui &lt;- fluidPage(
  destroyableModuleUI(id = "test"),
  actionButton("destroy", "Destroy module"),
  textOutput("reactive_value")
)

server &lt;- function(input, output, session) {
  top_rv &lt;- reactiveVal()

  reactive_value &lt;- destroyableModuleServer("test")
  observeEvent(reactive_value(), top_rv(reactive_value()))

  output$reactive_value &lt;- renderText(top_rv())

  observeEvent(input$destroy, destroyModule("test"))
}

</code></pre>

<hr>
<h2 id='removeInput'>Remove Input from Shiny Session</h2><span id='topic+removeInput'></span>

<h3>Description</h3>

<p>The removal of the named input in a shiny session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeInput(
  id,
  selector = paste0("#", id),
  session = getDefaultReactiveDomain()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="removeInput_+3A_id">id</code></td>
<td>
<p>Input value name</p>
</td></tr>
<tr><td><code id="removeInput_+3A_selector">selector</code></td>
<td>
<p>The HTML selector to remove the UI for. By default it is the
tag where the ID matches the input, but might need to be adjusted for
different inputs.</p>
</td></tr>
<tr><td><code id="removeInput_+3A_session">session</code></td>
<td>
<p>The Shiny session to remove the input from</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the input is a standard shiny input e.g. 'numericInput', then to
remove the label as well as the input, set the selector to be
'paste0(&quot;:has(&gt; #&quot;, id, &quot;)&quot;)'
</p>


<h3>Value</h3>

<p>An invisible 'TRUE' value confirming that the input has been removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(shiny.destroy)

ui &lt;- fluidPage(
  numericInput("number", "Select number:", 5, 1, 10),
  p("Selected number:", textOutput("number_out", inline = TRUE)),
  actionButton("delete", "Remove input")
)

server &lt;- function(input, output, session) {
  output$number_out &lt;- renderText(input$number %||% "input unavailable")

  observeEvent(
    input$delete,
    removeInput("number", selector = ":has(&gt; #number)")
   )
}

shinyApp(ui, server)

</code></pre>

<hr>
<h2 id='removeOutput'>Remove Output from Shiny Session</h2><span id='topic+removeOutput'></span>

<h3>Description</h3>

<p>The removal of the named output in a shiny session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeOutput(
  id,
  selector = paste0("#", id),
  session = getDefaultReactiveDomain()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="removeOutput_+3A_id">id</code></td>
<td>
<p>Output value name</p>
</td></tr>
<tr><td><code id="removeOutput_+3A_selector">selector</code></td>
<td>
<p>The HTML selector to remove the UI for. By default it is the
tag where the ID matches the output, but might need to be adjusted for
different inputs.</p>
</td></tr>
<tr><td><code id="removeOutput_+3A_session">session</code></td>
<td>
<p>The Shiny session to remove the output from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible 'TRUE' value confirming that the output has been removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(shiny.destroy)

ui &lt;- fluidPage(
  numericInput("number", "Select number:", 5, 1, 10),
  p("Selected number:", textOutput("number_out", inline = TRUE)),
  actionButton("delete", "Remove output")
)

server &lt;- function(input, output, session) {
  output$number_out &lt;- renderText(input$number)

  observeEvent(
    input$delete,
    removeOutput("number_out")
   )
}

shinyApp(ui, server)

</code></pre>

<hr>
<h2 id='runDestroyExample'>Run 'shiny.destroy' example</h2><span id='topic+runDestroyExample'></span>

<h3>Description</h3>

<p>To see how the 'shiny.destroy' works, examples are provided within
the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runDestroyExample(example = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runDestroyExample_+3A_example">example</code></td>
<td>
<p>The name of the example to run, or <code>NA</code> (the default) to
list the available examples.</p>
</td></tr>
<tr><td><code id="runDestroyExample_+3A_...">...</code></td>
<td>
<p>Additional parameters sent to 'shiny::runExample'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following examples are available:
</p>

<dl>
<dt>01_boxes</dt><dd><p>A simple application where the &quot;create&quot; button will
load a simple box with a &quot;destroy&quot; button. This highlights the full
removal of the module when the button is pressed.</p>
</dd>
<dt>02_sleep</dt><dd><p>An application that has 2 side by side modules, one
using {shiny} to remove the UI and the other using {shiny.destroy}
to fully remove the boxes to display the incremental time gain from
removing the long-running observers.</p>
</dd>
</dl>



<h3>Value</h3>

<p>The shiny application displayed in the specified location.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
runDestroyExample("01_boxes")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
