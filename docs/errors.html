<!DOCTYPE html><html><head><title>Help for package errors</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {errors}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#errors-package'><p><span class="pkg">errors</span>: Uncertainty Propagation for R Vectors</p></a></li>
<li><a href='#as.data.frame.errors'><p>Coerce to a Data Frame</p></a></li>
<li><a href='#as.list.errors'><p>Coerce to a List</p></a></li>
<li><a href='#as.matrix.errors'><p>Coerce to a Matrix</p></a></li>
<li><a href='#c.errors'><p>Combine Values into a Vector or List</p></a></li>
<li><a href='#cbind.errors'><p>Combine <span class="rlang"><b>R</b></span> Objects by Rows or Columns</p></a></li>
<li><a href='#correl'><p>Handle Correlations Between <code>errors</code> Objects</p></a></li>
<li><a href='#datasets'><p>Datasets from the Guide to the Expression of Uncertainty in Measurement (GUM)</p></a></li>
<li><a href='#diff.errors'><p>Lagged Differences</p></a></li>
<li><a href='#drop_errors'><p>Drop Uncertainty</p></a></li>
<li><a href='#errors'><p>Handle Uncertainty on a Numeric Vector</p></a></li>
<li><a href='#Extract.errors'><p>Extract or Replace Parts of an Object</p></a></li>
<li><a href='#format.errors'><p>Encode <code>errors</code></p></a></li>
<li><a href='#geom_errors'><p>Errorbars for <code>errors</code> objects</p></a></li>
<li><a href='#groupGeneric.errors'><p>S3 Group Generic Functions</p></a></li>
<li><a href='#mean.errors'><p>Arithmetic Mean and Median Value</p></a></li>
<li><a href='#plot.errors'><p>Scatterplot with Error Bars</p></a></li>
<li><a href='#print.errors'><p>Print Values</p></a></li>
<li><a href='#rep.errors'><p>Replicate Elements of Vectors and Lists</p></a></li>
<li><a href='#t.errors'><p>Matrix Transpose</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Uncertainty Propagation for R Vectors</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Support for measurement errors in R vectors, matrices and arrays:
    automatic uncertainty propagation and reporting.
    Documentation about 'errors' is provided in the paper by Ucar, Pebesma &amp;
    Azcorra (2018, &lt;<a href="https://doi.org/10.32614%2FRJ-2018-075">doi:10.32614/RJ-2018-075</a>&gt;), included in this package as a
    vignette; see 'citation("errors")' for details.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://r-quantities.github.io/errors/">https://r-quantities.github.io/errors/</a>,
<a href="https://github.com/r-quantities/errors">https://github.com/r-quantities/errors</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-quantities/errors/issues">https://github.com/r-quantities/errors/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr (&ge; 1.0.0), vctrs (&ge; 0.5.0), pillar, ggplot2 (&ge;
3.4.0), testthat, vdiffr, knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-06 12:50:18 UTC; iucar</td>
</tr>
<tr>
<td>Author:</td>
<td>I単aki Ucar <a href="https://orcid.org/0000-0001-6403-5550"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cph, cre],
  Lionel Henry [ctb],
  RStudio [cph] (Copyright for code written by RStudio employees.)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>I単aki Ucar &lt;iucar@fedoraproject.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-06 13:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='errors-package'><span class="pkg">errors</span>: Uncertainty Propagation for R Vectors</h2><span id='topic+errors-package'></span>

<h3>Description</h3>

<p>Support for measurement errors in R vectors, matrices and arrays: automatic
uncertainty propagation and reporting.
</p>


<h3>Details</h3>

<p>Every measurement has an unknown error associated. Uncertainty is the
acknowledgement of that error: we are aware that our representation of reality
may differ from reality itself. This package provides support for measurement
errors in <span class="rlang"><b>R</b></span> vectors, matrices and arrays. Uncertainty metadata is associated
to quantity values (see <code><a href="#topic+errors">errors</a></code>), and this uncertainty is
automatically propagated when you operate with <code>errors</code> objects (see
<code><a href="#topic+groupGeneric.errors">groupGeneric.errors</a></code>), or with <code>errors</code> and numeric objects
(then numeric values are automatically coerced to <code>errors</code> objects with
no uncertainty).
</p>
<p>Correlations between measurements are also supported. In particular, any
operation (e.g., <code>z &lt;- x + y</code>) results in a correlation between output
and input variables (i.e., <code>z</code> is correlated to <code>x</code> and <code>y</code>,
even if there was no correlation between <code>x</code> and <code>y</code>). And in
general, the user can establish correlations between any pair of variables
(see <code><a href="#topic+correl">correl</a></code>).
</p>
<p>This package treats uncertainty as coming from Gaussian and linear sources
(note that, even for non-Gaussian non-linear sources, this is a reasonable
assumption for averages of many measurements), and propagates them using the
first-order Taylor series method for propagation of uncertainty. Although the
above assumptions are valid in a wide range of applications in science and
engineering, the practitioner should evaluate whether they apply for each
particular case.
</p>


<h3>Author(s)</h3>

<p>I単aki Ucar
</p>


<h3>References</h3>

<p>I単aki Ucar, Edzer Pebesma and Arturo Azcorra (2018).
Measurement Errors in <span class="rlang"><b>R</b></span>. <em>The R Journal</em>, 10(2), 549-557.
<a href="https://doi.org/10.32614/RJ-2018-075">doi:10.32614/RJ-2018-075</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+datasets">datasets</a></code> for a description of the datasets used in the
examples below.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simultaneous resistance and reactance measurements

# Obtain mean values and uncertainty from measured values
V   &lt;- mean(set_errors(GUM.H.2$V))
I   &lt;- mean(set_errors(GUM.H.2$I))
phi &lt;- mean(set_errors(GUM.H.2$phi))

# Set correlations between variables
correl(V, I)   &lt;- with(GUM.H.2, cor(V, I))
correl(V, phi) &lt;- with(GUM.H.2, cor(V, phi))
correl(I, phi) &lt;- with(GUM.H.2, cor(I, phi))

# Computation of resistance, reactance and impedance values
(R &lt;- (V / I) * cos(phi))
(X &lt;- (V / I) * sin(phi))
(Z &lt;- (V / I))

# Correlations between derived quantities
correl(R, X)
correl(R, Z)
correl(X, Z)

## Calibration of a thermometer

# Least-squares fit for a reference temperature of 20 degC
fit &lt;- lm(bk ~ I(tk - 20), data = GUM.H.3)

# Extract coefficients and set correlation using the covariance matrix
y1 &lt;- set_errors(coef(fit)[1], sqrt(vcov(fit)[1, 1]))
y2 &lt;- set_errors(coef(fit)[2], sqrt(vcov(fit)[2, 2]))
covar(y1, y2) &lt;- vcov(fit)[1, 2]

# Predicted correction for 30 degC
(b.30 &lt;- y1 + y2 * set_errors(30 - 20))

</code></pre>

<hr>
<h2 id='as.data.frame.errors'>Coerce to a Data Frame</h2><span id='topic+as.data.frame.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+as.data.frame">as.data.frame</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
as.data.frame(x, row.names = NULL, optional = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.data.frame.errors_+3A_x">x</code></td>
<td>
<p>any <span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="as.data.frame.errors_+3A_row.names">row.names</code></td>
<td>
<p><code>NULL</code> or a character vector giving the row
names for the data frame.  Missing values are not allowed.</p>
</td></tr>
<tr><td><code id="as.data.frame.errors_+3A_optional">optional</code></td>
<td>
<p>logical. If <code>TRUE</code>, setting row names and
converting column names (to syntactic names: see
<code><a href="base.html#topic+make.names">make.names</a></code>) is optional.  Note that all of <span class="rlang"><b>R</b></span>'s
<span class="pkg">base</span> package <code>as.data.frame()</code> methods use
<code>optional</code> only for column names treatment, basically with the
meaning of <code><a href="base.html#topic+data.frame">data.frame</a>(*, check.names = !optional)</code>.
See also the <code>make.names</code> argument of the <code>matrix</code> method.</p>
</td></tr>
<tr><td><code id="as.data.frame.errors_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:3, 0.1)
y &lt;- set_errors(4:6, 0.2)
(z &lt;- cbind(x, y))
as.data.frame(z)

</code></pre>

<hr>
<h2 id='as.list.errors'>Coerce to a List</h2><span id='topic+as.list.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+as.list">as.list</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.list.errors_+3A_x">x</code></td>
<td>
<p>object to be coerced or tested.</p>
</td></tr>
<tr><td><code id="as.list.errors_+3A_...">...</code></td>
<td>
<p>objects, possibly named.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:3, 0.1)
as.list(x)

</code></pre>

<hr>
<h2 id='as.matrix.errors'>Coerce to a Matrix</h2><span id='topic+as.matrix.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+as.matrix">as.matrix</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
as.matrix(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.matrix.errors_+3A_x">x</code></td>
<td>
<p>an <span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="as.matrix.errors_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>as.matrix(set_errors(1:3, 0.1))

</code></pre>

<hr>
<h2 id='c.errors'>Combine Values into a Vector or List</h2><span id='topic+c.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+c">c</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
c(..., recursive = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c.errors_+3A_...">...</code></td>
<td>
<p>objects to be concatenated.  All <code><a href="base.html#topic+NULL">NULL</a></code> entries
are dropped before method dispatch unless at the very beginning of the
argument list.</p>
</td></tr>
<tr><td><code id="c.errors_+3A_recursive">recursive</code></td>
<td>
<p>logical.  If <code>recursive = TRUE</code>, the function
recursively descends through lists (and pairlists) combining all
their elements into a vector.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>c(set_errors(1, 0.2), set_errors(7:9, 0.1), 3)

</code></pre>

<hr>
<h2 id='cbind.errors'>Combine <span class="rlang"><b>R</b></span> Objects by Rows or Columns</h2><span id='topic+cbind.errors'></span><span id='topic+rbind.errors'></span>

<h3>Description</h3>

<p>S3 methods for <code>errors</code> objects (see <code><a href="base.html#topic+cbind">cbind</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
cbind(..., deparse.level = 1)

## S3 method for class 'errors'
rbind(..., deparse.level = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cbind.errors_+3A_...">...</code></td>
<td>
<p>(generalized) vectors or matrices.  These can be given as named
arguments.  Other <span class="rlang"><b>R</b></span> objects may be coerced as appropriate, or S4
methods may be used: see sections &lsquo;Details&rsquo; and
&lsquo;Value&rsquo;.  (For the <code>"data.frame"</code> method of <code>cbind</code>
these can be further arguments to <code><a href="base.html#topic+data.frame">data.frame</a></code> such as
<code>stringsAsFactors</code>.)</p>
</td></tr>
<tr><td><code id="cbind.errors_+3A_deparse.level">deparse.level</code></td>
<td>
<p>integer controlling the construction of labels in
the case of non-matrix-like arguments (for the default method):<br />
<code>deparse.level = 0</code> constructs no labels;<br />
the default <code>deparse.level = 1</code> typically and
<code>deparse.level = 2</code> always construct labels from the argument
names, see the &lsquo;Value&rsquo; section below.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+c.errors">c.errors</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1, 0.1)
y &lt;- set_errors(1:3, 0.2)
(m &lt;- cbind(x, y)) # the '1' (= shorter vector) is recycled
(m &lt;- cbind(m, 8:10)[, c(1, 3, 2)]) # insert a column
cbind(y, diag(3)) # vector is subset -&gt; warning
cbind(0, rbind(x, y))

</code></pre>

<hr>
<h2 id='correl'>Handle Correlations Between <code>errors</code> Objects</h2><span id='topic+correl'></span><span id='topic+correl+3C-'></span><span id='topic+set_correl'></span><span id='topic+covar'></span><span id='topic+covar+3C-'></span><span id='topic+set_covar'></span>

<h3>Description</h3>

<p>Set or retrieve correlations or covariances between <code>errors</code> objects.
See the details section below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correl(x, y)

correl(x, y) &lt;- value

set_correl(x, y, value)

covar(x, y)

covar(x, y) &lt;- value

set_covar(x, y, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correl_+3A_x">x</code></td>
<td>
<p>an object of class <code>errors</code>.</p>
</td></tr>
<tr><td><code id="correl_+3A_y">y</code></td>
<td>
<p>an object of class <code>errors</code>.</p>
</td></tr>
<tr><td><code id="correl_+3A_value">value</code></td>
<td>
<p>a numeric vector of length 1 or the same length as <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The uncertainties associated to <code>errors</code> objects are supposed
to be independent by default. If there is some known correlation, it can be
defined using these methods, and it will be used for the propagation of the
uncertainty by the mathematical and arithmetic operations.
</p>
<p>The <code>correl</code> method sets or retrieves correlations, i.e., a value (or
vector of values) between <code>-1</code> and <code>1</code> (see base <code><a href="stats.html#topic+cor">cor</a></code>
on how to compute correlations). A covariance is just a correlation value
multiplied by the standard deviations (i.e., the standard uncertainty) of
both variables. It can be defined using the <code>covar</code> method (see base
<code><a href="stats.html#topic+cov">cov</a></code> on how to compute covariances). These methods are
equivalent; in fact, <code>correl</code> calls <code>covar</code> internally.
</p>
<p>Every <code>errors</code> object has a unique ID, and pairwise correlations are
stored in an internal hash table. All the functions or methods that modify
somehow the dimensions of <code>errors</code> objects (i.e., subsets, binds,
concatenations, summaries...) generate new objects with new IDs, and
correlations are not, and cannot be, propagated. Only mathematical and
arithmetic operations propagate correlations, where appropriate, following
the Taylor series method.
</p>


<h3>Value</h3>

<p><code>correl</code> and <code>covar</code> return a vector of correlations and
covariances respectively (or <code>NULL</code>).
<code>set_correl</code> and <code>set_covar</code>, which are pipe-friendly versions of
the setters, return the <code>x</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:5, 0.1)
y &lt;- set_errors(1:5, 0.1)

# Self-correlation is of course 1, and cannot be changed
correl(x, x)
## Not run: 
correl(x, x) &lt;- 0.5
## End(Not run)

# Cross-correlation can be set, but must be a value between -1 and 1
correl(x, y)
## Not run: 
correl(x, y) &lt;- 1.5
## End(Not run)
correl(x, y) &lt;- runif(length(x))
correl(x, y)
covar(x, y)

</code></pre>

<hr>
<h2 id='datasets'>Datasets from the Guide to the Expression of Uncertainty in Measurement (GUM)</h2><span id='topic+datasets'></span><span id='topic+GUM.H.2'></span><span id='topic+GUM.H.3'></span>

<h3>Description</h3>

<p>Datasets found in Annex H of the GUM (see reference below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GUM.H.2

GUM.H.3
</code></pre>


<h3>Format</h3>

<p><code>GUM.H.2</code>, from Section 2 of Annex H (Table H.2), provides
simultaneous resistance and reactance measurements. It is a data frame with 5
rows and 3 variables:
</p>

<dl>
<dt>V</dt><dd><p>Voltage amplitude, in Volts.</p>
</dd>
<dt>I</dt><dd><p>Current amplitude, in Amperes.</p>
</dd>
<dt>phi</dt><dd><p>Phase-shift angle of the voltage relative to the current, in radians.</p>
</dd>
</dl>

<p><code>GUM.H.3</code>, from Section 3 of Annex H (Table H.6), provides
thermometer readings and observed corrections to obtain a linear calibration
curve for some reference temperature. It is a data frame with 11 rows and
2 variables:
</p>

<dl>
<dt>tk</dt><dd><p>Thermometer reading, in Celsius degrees.</p>
</dd>
<dt>bk</dt><dd><p>Observed correction, in Celsius degrees.</p>
</dd>
</dl>

<p>An object of class <code>data.frame</code> with 11 rows and 2 columns.
</p>


<h3>Source</h3>

<p>BIPM, IEC, IFCC, ILAC, IUPAC, IUPAP, ISO, and OIML (2008).
Evaluation of Measurement Data &ndash; Guide to the Expression of Uncertainty in
Measurement, 1st edn. JCGM 100:2008.
<em>Joint Committee for Guides in Metrology.</em>
<a href="https://www.bipm.org/en/committees/jc/jcgm/publications">https://www.bipm.org/en/committees/jc/jcgm/publications</a>
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+errors-package">errors-package</a></code> for examples.
</p>

<hr>
<h2 id='diff.errors'>Lagged Differences</h2><span id='topic+diff.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+diff">diff</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
diff(x, lag = 1L, differences = 1L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diff.errors_+3A_x">x</code></td>
<td>
<p>a numeric vector or matrix containing the values to be
differenced.</p>
</td></tr>
<tr><td><code id="diff.errors_+3A_lag">lag</code></td>
<td>
<p>an integer indicating which lag to use.</p>
</td></tr>
<tr><td><code id="diff.errors_+3A_differences">differences</code></td>
<td>
<p>an integer indicating the order of the difference.</p>
</td></tr>
<tr><td><code id="diff.errors_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>diff(set_errors(1:10, 0.1), 2)
diff(set_errors(1:10, 0.1), 2, 2)
x &lt;- cumsum(cumsum(set_errors(1:10, 0.1)))
diff(x, lag = 2)
diff(x, differences = 2)

</code></pre>

<hr>
<h2 id='drop_errors'>Drop Uncertainty</h2><span id='topic+drop_errors'></span><span id='topic+drop_errors.data.frame'></span>

<h3>Description</h3>

<p>Drop Uncertainty
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_errors(x)

## S3 method for class 'data.frame'
drop_errors(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop_errors_+3A_x">x</code></td>
<td>
<p>an <code>errors</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the numeric without any <code>errors</code> attributes, while preserving other
attributes like dimensions or other classes.
</p>


<h3>Note</h3>

<p>Equivalent to <code>errors(x) &lt;- NULL</code> or <code>set_errors(x, NULL)</code>.
</p>

<hr>
<h2 id='errors'>Handle Uncertainty on a Numeric Vector</h2><span id='topic+errors'></span><span id='topic+errors_max'></span><span id='topic+errors_min'></span><span id='topic+errors+3C-'></span><span id='topic+set_errors'></span><span id='topic+as.errors'></span>

<h3>Description</h3>

<p>Set or retrieve uncertainty to/from numeric vectors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>errors(x)

errors_max(x)

errors_min(x)

errors(x) &lt;- value

set_errors(x, value = 0)

as.errors(x, value = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="errors_+3A_x">x</code></td>
<td>
<p>a numeric object, or object of class <code>errors</code>.</p>
</td></tr>
<tr><td><code id="errors_+3A_value">value</code></td>
<td>
<p>a numeric vector of length 1 or the same length as <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>`errors&lt;-`</code> sets the uncertainty values (and converts <code>x</code>
into an object of class <code>errors</code>). <code>set_errors</code> is a pipe-friendly
version of <code>`errors&lt;-`</code> and returns an object of class <code>errors</code>.
<code>as.errors</code> is an alias for <code>set_errors</code>.
</p>
<p>See <code><a href="#topic+correl">correl</a></code> on how to handle correlations between pairs of variables.
</p>


<h3>Value</h3>

<p><code>errors</code> returns a vector of uncertainty. <code>errors_max</code>
(<code>errors_min</code>) returns the values plus (minus) the uncertainty.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+groupGeneric.errors">groupGeneric.errors</a></code>, <code><a href="#topic+mean.errors">mean.errors</a></code>,
<code><a href="#topic+Extract.errors">Extract.errors</a></code>, <code><a href="base.html#topic+c">c</a></code>, <code><a href="base.html#topic+rep">rep</a></code>, <code><a href="#topic+cbind.errors">cbind.errors</a></code>,
<code><a href="#topic+format.errors">format.errors</a></code>, <code><a href="#topic+print.errors">print.errors</a></code>, <code><a href="#topic+plot.errors">plot.errors</a></code>,
<code><a href="#topic+as.data.frame.errors">as.data.frame.errors</a></code>, <code><a href="#topic+as.matrix.errors">as.matrix.errors</a></code>, <code><a href="base.html#topic+t">t</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = 1:3
class(x)
x
errors(x) &lt;- 0.1
class(x)
x

(x &lt;- set_errors(x, seq(0.1, 0.3, 0.1)))
errors_max(x)
errors_min(x)

</code></pre>

<hr>
<h2 id='Extract.errors'>Extract or Replace Parts of an Object</h2><span id='topic+Extract.errors'></span><span id='topic++5B.errors'></span><span id='topic++5B+5B.errors'></span><span id='topic++5B+3C-.errors'></span><span id='topic++5B+5B+3C-.errors'></span>

<h3>Description</h3>

<p>S3 operators to extract or replace parts of <code>errors</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
x[...]

## S3 method for class 'errors'
x[[...]]

## S3 replacement method for class 'errors'
x[...] &lt;- value

## S3 replacement method for class 'errors'
x[[...]] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract.errors_+3A_x">x</code></td>
<td>
<p>object from which to extract element(s) or in which to replace element(s).</p>
</td></tr>
<tr><td><code id="Extract.errors_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to base methods
(see <code><a href="base.html#topic+Extract">Extract</a></code>).</p>
</td></tr>
<tr><td><code id="Extract.errors_+3A_value">value</code></td>
<td>
<p>typically an array-like <span class="rlang"><b>R</b></span> object of a similar class as <code>x</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:3, 0.1)
y &lt;- set_errors(4:6, 0.2)
(z &lt;- rbind(x, y))
z[2, 2]
z[2, 2] &lt;- -1
errors(z[[1, 2]]) &lt;- 0.8
z[, 2]

</code></pre>

<hr>
<h2 id='format.errors'>Encode <code>errors</code></h2><span id='topic+format.errors'></span>

<h3>Description</h3>

<p>Format an <code>errors</code> object for pretty printing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
format(x, digits = NULL, scientific = FALSE,
  notation = getOption("errors.notation", "parenthesis"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.errors_+3A_x">x</code></td>
<td>
<p>an <code>errors</code> object.</p>
</td></tr>
<tr><td><code id="format.errors_+3A_digits">digits</code></td>
<td>
<p>how many significant digits are to be used for uncertainties.
The default, <code>NULL</code>, uses <code>getOption("errors.digits", 1)</code>.</p>
</td></tr>
<tr><td><code id="format.errors_+3A_scientific">scientific</code></td>
<td>
<p>logical specifying whether the elements should be
encoded in scientific format.</p>
</td></tr>
<tr><td><code id="format.errors_+3A_notation">notation</code></td>
<td>
<p>error notation; <code>"parenthesis"</code> and <code>"plus-minus"</code>
are supported through the <code>"errors.notation"</code> option.</p>
</td></tr>
<tr><td><code id="format.errors_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:3*100, 1:3*100 * 0.05)
format(x)
format(x, digits=2)
format(x, scientific=TRUE)
format(x, notation="plus-minus")

</code></pre>

<hr>
<h2 id='geom_errors'>Errorbars for <code>errors</code> objects</h2><span id='topic+geom_errors'></span>

<h3>Description</h3>

<p>Automatic errorbars for variables with uncertainty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_errors(mapping = NULL, data = NULL, stat = "identity",
  position = "identity", ..., na.rm = FALSE, orientation = NA,
  show.legend = NA, inherit.aes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_errors_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, either as a <code>ggproto</code> <code>Geom</code> subclass or as a string naming the
stat stripped of the <code>stat_</code> prefix (e.g. <code>"count"</code> rather than
<code>"stat_count"</code>)</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string naming the adjustment
(e.g. <code>"jitter"</code> to use <code>position_jitter</code>), or the result of a call to a
position adjustment function. Use the latter if you need to change the
settings of the adjustment.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_orientation">orientation</code></td>
<td>
<p>The orientation of the layer. The default (<code>NA</code>)
automatically determines the orientation from the aesthetic mapping. In the
rare event that this fails it can be given explicitly by setting <code>orientation</code>
to either <code>"x"</code> or <code>"y"</code>. See the <em>Orientation</em> section for more detail.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_errors_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
</table>


<h3>Aesthetics</h3>

<p><code>geom_errors()</code> understands the following aesthetics
(required aesthetics are in bold):
</p>

<ul>
<li> <p><strong><code>x</code> <em>or</em> <code>y</code></strong>
</p>
</li>
<li><p> alpha
</p>
</li>
<li><p> colour
</p>
</li>
<li><p> group
</p>
</li>
<li><p> linetype
</p>
</li>
<li><p> linewidth
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("ggplot2", quietly=TRUE)) {

iris.e &lt;- iris
iris.e[1:4] &lt;- lapply(iris.e[1:4], function(x) set_errors(x, x*0.02))

library(ggplot2)

ggplot(iris.e) + aes(Sepal.Length, Sepal.Width, color=Species) +
  geom_point() + geom_errors()

ggplot(iris.e) + aes(Sepal.Length, Sepal.Width, color=Species) +
  geom_point() + geom_errors(width=0.05, height=0.05, linewidth=0.2)

}
</code></pre>

<hr>
<h2 id='groupGeneric.errors'>S3 Group Generic Functions</h2><span id='topic+groupGeneric.errors'></span><span id='topic+Math.errors'></span><span id='topic+Ops.errors'></span><span id='topic+Summary.errors'></span>

<h3>Description</h3>

<p><code>Math</code>, <code>Ops</code> and <code>Summary</code> group generic methods for
<code>errors</code> objects with support for automatic uncertainty propagation (see
<code><a href="base.html#topic+groupGeneric">groupGeneric</a></code> for a comprehensive list of available methods).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
Math(x, ...)

## S3 method for class 'errors'
Ops(e1, e2)

## S3 method for class 'errors'
Summary(..., na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupGeneric.errors_+3A_x">x</code>, <code id="groupGeneric.errors_+3A_e1">e1</code>, <code id="groupGeneric.errors_+3A_e2">e2</code></td>
<td>
<p>objects.</p>
</td></tr>
<tr><td><code id="groupGeneric.errors_+3A_...">...</code></td>
<td>
<p>further arguments passed to methods.</p>
</td></tr>
<tr><td><code id="groupGeneric.errors_+3A_na.rm">na.rm</code></td>
<td>
<p>logical: should missing values be removed?</p>
</td></tr>
</table>


<h3>Details</h3>



<h4><code>Math</code></h4>

<p>The <code>sign</code> method returns a numeric value without uncertainty. <code>floor</code>,
<code>ceiling</code>, <code>trunc</code>, <code>round</code> and <code>signif</code> add the rounding
error to the original uncertainty. <code>lgamma</code>, <code>gamma</code>, <code>digamma</code> and
<code>trigamma</code> are not implemented. The rest of the methods propagate the
uncertainty as expected from the first-order Taylor series method.</p>



<h4><code>Ops</code></h4>

<p>Boolean operators drop the uncertainty (showing a warning once) and operate on the
numeric values. The rest of the operators propagate the uncertainty as expected from
the first-order Taylor series method. Any numeric operand is automatically
coerced to <code>errors</code> (showing a warning once) with no uncertainty.</p>



<h4><code>Summary</code></h4>

<p>The methods <code>all</code> and <code>any</code> are not supported for <code>errors</code>
objects and fail with an informative message. <code>min</code>, <code>max</code> (and
<code>range</code>) return the minimum or (and) maximum value minus/plus its uncertainty.
<code>sum</code> and <code>prod</code> propagate the uncertainty as expected from the first-order
Taylor series method.</p>



<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:3, 0.1)
exp(x)
log(x)
cumsum(x)
cumprod(x)

y &lt;- set_errors(4:6, 0.2)
x / sqrt(y) + y * sin(x)

# numeric values are automatically coerced to errors
x^2

# boolean operators drop uncertainty
y &gt; x

c(min(x), max(x))
range(x)
sum(y)
prod(y)

</code></pre>

<hr>
<h2 id='mean.errors'>Arithmetic Mean and Median Value</h2><span id='topic+mean.errors'></span><span id='topic+weighted.mean.errors'></span><span id='topic+median.errors'></span>

<h3>Description</h3>

<p>S3 methods for <code>errors</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
mean(x, trim = 0, na.rm = FALSE, ...)

## S3 method for class 'errors'
weighted.mean(x, ..., na.rm = FALSE)

## S3 method for class 'errors'
median(x, na.rm = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mean.errors_+3A_x">x</code></td>
<td>
<p>an <code>errors</code> object.</p>
</td></tr>
<tr><td><code id="mean.errors_+3A_trim">trim</code></td>
<td>
<p>the fraction (0 to 0.5) of observations to be
trimmed from each end of <code>x</code> before the mean is computed.
Values of trim outside that range are taken as the nearest endpoint.
</p>
</td></tr>
<tr><td><code id="mean.errors_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical evaluating to <code>TRUE</code> or <code>FALSE</code>
indicating whether <code>NA</code> values should be stripped before the
computation proceeds.</p>
</td></tr>
<tr><td><code id="mean.errors_+3A_...">...</code></td>
<td>
<p>further arguments passed to of from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>mean</code> and <code>weighted.mean</code> methods set the uncertainty as
the maximum of the standard deviation of the mean and the (weighted) mean of the uncertainty.
</p>
<p>The <code>median</code> method sets the uncertainty as <code>1.253 * errors(mean(x))</code>,
which is derived from the asymptotic variance formula of the median. Note that
this value is valid only if the sample is big enough.
</p>


<h3>Value</h3>

<p>An <code>errors</code> object.
</p>

<hr>
<h2 id='plot.errors'>Scatterplot with Error Bars</h2><span id='topic+plot.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects which automatically prints the error bars.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.errors_+3A_x">x</code>, <code id="plot.errors_+3A_y">y</code></td>
<td>
<p>the <code>x</code> and <code>y</code> arguments provide the x and y
coordinates for the plot.  Any reasonable way of defining the
coordinates is acceptable.  See the function <code><a href="grDevices.html#topic+xy.coords">xy.coords</a></code>
for details.  If supplied separately, they must be of the same length.</p>
</td></tr>
<tr><td><code id="plot.errors_+3A_...">...</code></td>
<td>
<p>additional arguments (see <code><a href="base.html#topic+plot">plot</a></code>).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>cars &lt;- as.matrix(cars)
cars &lt;- as.data.frame(set_errors(cars, cars * 0.05))
plot(cars$speed)
plot(cars)

</code></pre>

<hr>
<h2 id='print.errors'>Print Values</h2><span id='topic+print.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.errors_+3A_x">x</code></td>
<td>
<p>an <code>errors</code> object.</p>
</td></tr>
<tr><td><code id="print.errors_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- set_errors(1:10, 1:10 * 0.05)
print(x)
print(x[1:3])
print(x[1])
print(x[1], digits=2)
print(x[1], notation="plus-minus")

</code></pre>

<hr>
<h2 id='rep.errors'>Replicate Elements of Vectors and Lists</h2><span id='topic+rep.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+rep">rep</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
rep(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rep.errors_+3A_x">x</code></td>
<td>
<p>a vector (of any mode including a <code><a href="base.html#topic+list">list</a></code>) or a factor or (for
<code>rep</code> only) a <code>POSIXct</code> or <code>POSIXlt</code> or <code>Date</code>
object; or an S4 object containing such an object.</p>
</td></tr>
<tr><td><code id="rep.errors_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.
For the internal default method these can include:
</p>

<dl>
<dt><code>times</code></dt><dd><p>an integer-valued vector giving the
(non-negative) number of times to repeat each element if of
length <code>length(x)</code>, or to repeat the whole vector if of
length 1.  Negative or <code>NA</code> values are an error.  A
<code>double</code> vector is accepted, other inputs being coerced to
an integer or double vector.</p>
</dd>
<dt><code>length.out</code></dt><dd><p>non-negative integer.  The desired length of the
output vector.  Other inputs will be coerced to a double
vector and the first element taken.  Ignored if <code>NA</code> or invalid.</p>
</dd>
<dt><code>each</code></dt><dd><p>non-negative integer.  Each element of <code>x</code>
is repeated <code>each</code> times.  Other inputs will be coerced to
an integer or double vector and the first element taken.  Treated as
<code>1</code> if <code>NA</code> or invalid.</p>
</dd>
</dl>

</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>rep(set_errors(1, 0.1), 4)

</code></pre>

<hr>
<h2 id='t.errors'>Matrix Transpose</h2><span id='topic+t.errors'></span>

<h3>Description</h3>

<p>S3 method for <code>errors</code> objects (see <code><a href="base.html#topic+t">t</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'errors'
t(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="t.errors_+3A_x">x</code></td>
<td>
<p>a matrix or data frame, typically.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- matrix(1:30, 5, 6)
errors(a) &lt;- 1:30
t(a)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
