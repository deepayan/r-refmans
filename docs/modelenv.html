<!DOCTYPE html><html lang="en"><head><title>Help for package modelenv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {modelenv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#modelenv-package'><p>modelenv: Provide Tools to Register Models for Use in 'tidymodels'</p></a></li>
<li><a href='#check_spec_mode_engine_val'><p>Error handling for unknown mode</p></a></li>
<li><a href='#get_model_env'><p>Working with the modelenv model environment</p></a></li>
<li><a href='#is_unsupervised_fit'><p>Determine object is has class unsupervised_fit</p></a></li>
<li><a href='#is_unsupervised_spec'><p>Determine object is has class unsupervised_spec</p></a></li>
<li><a href='#new_unsupervised_fit'><p>Give object unsupervised fit class</p></a></li>
<li><a href='#new_unsupervised_spec'><p>Give object unsupervised specification class</p></a></li>
<li><a href='#set_dependency'><p>Register Dependency for Model</p></a></li>
<li><a href='#set_encoding'><p>Register Encoding Options for Model</p></a></li>
<li><a href='#set_fit'><p>Register Fit method for Model</p></a></li>
<li><a href='#set_model_arg'><p>Register Argument for Model</p></a></li>
<li><a href='#set_model_engine'><p>Register Engine for Model</p></a></li>
<li><a href='#set_model_mode'><p>Register Mode for Model</p></a></li>
<li><a href='#set_new_model'><p>Register New Model</p></a></li>
<li><a href='#set_pred'><p>Register Prediction Method for Model</p></a></li>
<li><a href='#stop_incompatible_mode'><p>Error handling for incompatible modes</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Provide Tools to Register Models for Use in 'tidymodels'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>An developer focused, low dependency package in 'tidymodels' that
    provides functions to register how models are to be used. Functions to
    register models are complimented with accessor functions to retrieve
    registered model information to aid in model fitting and error handling.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, glue, rlang (&ge; 1.1.0), tibble, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tidymodels/modelenv">https://github.com/tidymodels/modelenv</a>,
<a href="http://modelenv.tidymodels.org/">http://modelenv.tidymodels.org/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidymodels/modelenv/issues">https://github.com/tidymodels/modelenv/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-14 16:06:27 UTC; emilhvitfeldt</td>
</tr>
<tr>
<td>Author:</td>
<td>Emil Hvitfeldt <a href="https://orcid.org/0000-0002-0679-1945"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emil Hvitfeldt &lt;emil.hvitfeldt@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-14 16:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='modelenv-package'>modelenv: Provide Tools to Register Models for Use in 'tidymodels'</h2><span id='topic+modelenv'></span><span id='topic+modelenv-package'></span>

<h3>Description</h3>

<p>An developer focused, low dependency package in 'tidymodels' that provides functions to register how models are to be used. Functions to register models are complimented with accessor functions to retrieve registered model information to aid in model fitting and error handling.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Emil Hvitfeldt <a href="mailto:emil.hvitfeldt@posit.co">emil.hvitfeldt@posit.co</a> (<a href="https://orcid.org/0000-0002-0679-1945">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/tidymodels/modelenv">https://github.com/tidymodels/modelenv</a>
</p>
</li>
<li> <p><a href="http://modelenv.tidymodels.org/">http://modelenv.tidymodels.org/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/tidymodels/modelenv/issues">https://github.com/tidymodels/modelenv/issues</a>
</p>
</li></ul>


<hr>
<h2 id='check_spec_mode_engine_val'>Error handling for unknown mode</h2><span id='topic+check_spec_mode_engine_val'></span>

<h3>Description</h3>

<p>Checks that a given model, mode, engine combination have been registered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_spec_mode_engine_val(model, mode, eng, call = caller_env())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_spec_mode_engine_val_+3A_model">model</code></td>
<td>
<p>Character of specific model</p>
</td></tr>
<tr><td><code id="check_spec_mode_engine_val_+3A_mode">mode</code></td>
<td>
<p>Character of specific mode</p>
</td></tr>
<tr><td><code id="check_spec_mode_engine_val_+3A_eng">eng</code></td>
<td>
<p>Character of specific engine</p>
</td></tr>
<tr><td><code id="check_spec_mode_engine_val_+3A_call">call</code></td>
<td>
<p>The execution environment of a currently
running function, e.g. <code>caller_env()</code>. The function will be
mentioned in error messages as the source of the error. See the
<code>call</code> argument of <code><a href="rlang.html#topic+abort">abort()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rlang)
tmp &lt;- catch_cnd(check_spec_mode_engine_val("turtle", "partition", "vegan"))
</code></pre>

<hr>
<h2 id='get_model_env'>Working with the modelenv model environment</h2><span id='topic+get_model_env'></span><span id='topic+get_from_env'></span><span id='topic+set_env_val'></span>

<h3>Description</h3>

<p>These functions read and write to the environment where the package stores
information about model specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_model_env()

get_from_env(items)

set_env_val(name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_model_env_+3A_items">items</code></td>
<td>
<p>A character string of objects in the model environment.</p>
</td></tr>
<tr><td><code id="get_model_env_+3A_name">name</code></td>
<td>
<p>A single character value for a new symbol in the model
environment.</p>
</td></tr>
<tr><td><code id="get_model_env_+3A_value">value</code></td>
<td>
<p>A single value for a new value in the model environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modelenv environment
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Access the model data:
current_code &lt;- get_model_env()
ls(envir = current_code)

get_from_env("models")
get_from_env("modes")

get_from_env("example")
set_env_val("example", 4)
get_from_env("example")

</code></pre>

<hr>
<h2 id='is_unsupervised_fit'>Determine object is has class unsupervised_fit</h2><span id='topic+is_unsupervised_fit'></span>

<h3>Description</h3>

<p>Determine object is has class unsupervised_fit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_unsupervised_fit(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_unsupervised_fit_+3A_x">x</code></td>
<td>
<p>an model fit object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single logical indicating input has class <code>"unsupervised_fit"</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+new_unsupervised_fit">new_unsupervised_fit()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_fit &lt;- list(letters)

is_unsupervised_fit(model_fit)

model_fit &lt;- new_unsupervised_fit(model_fit)

is_unsupervised_fit(model_fit)
</code></pre>

<hr>
<h2 id='is_unsupervised_spec'>Determine object is has class unsupervised_spec</h2><span id='topic+is_unsupervised_spec'></span>

<h3>Description</h3>

<p>Determine object is has class unsupervised_spec
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_unsupervised_spec(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_unsupervised_spec_+3A_x">x</code></td>
<td>
<p>an model specification</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single logical indicating input has class <code>"unsupervised_spec"</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+new_unsupervised_spec">new_unsupervised_spec()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_spec &lt;- list(letters)

is_unsupervised_spec(model_spec)

model_spec &lt;- new_unsupervised_spec(model_spec)

is_unsupervised_spec(model_spec)
</code></pre>

<hr>
<h2 id='new_unsupervised_fit'>Give object unsupervised fit class</h2><span id='topic+new_unsupervised_fit'></span>

<h3>Description</h3>

<p>Give object unsupervised fit class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_unsupervised_fit(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_unsupervised_fit_+3A_x">x</code></td>
<td>
<p>an model fit object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x with added class <code>"unsupervised_fit"</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+is_unsupervised_fit">is_unsupervised_fit()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_fit &lt;- list(letters)
model_fit &lt;- new_unsupervised_fit(model_fit)
model_fit
</code></pre>

<hr>
<h2 id='new_unsupervised_spec'>Give object unsupervised specification class</h2><span id='topic+new_unsupervised_spec'></span>

<h3>Description</h3>

<p>Give object unsupervised specification class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_unsupervised_spec(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_unsupervised_spec_+3A_x">x</code></td>
<td>
<p>an model specification</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x with added class <code>"unsupervised_spec"</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+is_unsupervised_spec">is_unsupervised_spec()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_spec &lt;- list(letters)
model_spec &lt;- new_unsupervised_spec(model_spec)
model_spec
</code></pre>

<hr>
<h2 id='set_dependency'>Register Dependency for Model</h2><span id='topic+set_dependency'></span><span id='topic+get_dependency'></span>

<h3>Description</h3>

<p>This function is used to register a mode for a model, engine, and mode
combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_dependency(model, mode, eng, pkg)

get_dependency(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_dependency_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g.
<code>"k_means"</code>, etc).</p>
</td></tr>
<tr><td><code id="set_dependency_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
<tr><td><code id="set_dependency_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
<tr><td><code id="set_dependency_+3A_pkg">pkg</code></td>
<td>
<p>An options character string for a package name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function should for each package that needs to be added as a dependency.
The <code>mode</code> needs to be set explicitly, and dependencies needs to be specified
for each <code>model</code>, <code>mode</code> and <code>eng</code> combination.
</p>


<h3>Value</h3>

<p>A tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")
set_model_engine("shallow_learning_model", "partition", "stats")

set_dependency("shallow_learning_model", "partition", "stats", "base")
get_dependency("shallow_learning_model")
get_dependency("shallow_learning_model")$pkg

set_dependency("shallow_learning_model", "partition", "stats", "stats")
get_dependency("shallow_learning_model")
get_dependency("shallow_learning_model")$pkg

# Only unique packages are kept
set_dependency("shallow_learning_model", "partition", "stats", "stats")
get_dependency("shallow_learning_model")
get_dependency("shallow_learning_model")$pkg

</code></pre>

<hr>
<h2 id='set_encoding'>Register Encoding Options for Model</h2><span id='topic+set_encoding'></span><span id='topic+get_encoding'></span>

<h3>Description</h3>

<p>This function is used to register encoding information for a model, engine,
and mode combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_encoding(model, mode, eng, options)

get_encoding(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_encoding_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g.
<code>"k_means"</code>, etc).</p>
</td></tr>
<tr><td><code id="set_encoding_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
<tr><td><code id="set_encoding_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
<tr><td><code id="set_encoding_+3A_options">options</code></td>
<td>
<p>A list of options for engine-specific preprocessing encodings.
See Details below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list passed to <code>options</code> needs the following values:
</p>

<ul>
<li> <p><strong>predictor_indicators</strong> describes whether and how to create
indicator/dummy variables from factor predictors. There are three options:
<code>"none"</code> (do not expand factor predictors), <code>"traditional"</code> (apply the
standard <code>model.matrix()</code> encodings), and <code>"one_hot"</code> (create the complete
set including the baseline level for all factors).
</p>
</li>
<li> <p><strong>compute_intercept</strong> controls whether <code>model.matrix()</code> should include the
intercept in its formula. This affects more than the inclusion of an
intercept column. With an intercept, <code>model.matrix()</code> computes dummy
variables for all but one factor level. Without an intercept,
<code>model.matrix()</code> computes a full set of indicators for the first factor
variable, but an incomplete set for the remainder.
</p>
</li>
<li> <p><strong>remove_intercept</strong> removes the intercept column after <code>model.matrix()</code> is
finished. This can be useful if the model function (e.g. <code>lm()</code>)
automatically generates an intercept.
</p>
</li>
<li> <p><strong>allow_sparse_x</strong> specifies whether the model can accommodate a sparse
representation for predictors during fitting and tuning.
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")
set_model_engine("shallow_learning_model", "partition", "stats")

set_encoding(
  model = "shallow_learning_model",
  mode = "partition",
  eng = "stats",
  options = list(
    predictor_indicators = "traditional",
    compute_intercept = TRUE,
    remove_intercept = TRUE,
    allow_sparse_x = FALSE
  )
)

get_encoding("shallow_learning_model")
get_encoding("shallow_learning_model")$value

</code></pre>

<hr>
<h2 id='set_fit'>Register Fit method for Model</h2><span id='topic+set_fit'></span><span id='topic+get_fit'></span>

<h3>Description</h3>

<p>This function is used to register a fit method for a model, engine, and mode
combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_fit(model, mode, eng, value)

get_fit(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_fit_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g.
<code>"k_means"</code>, etc).</p>
</td></tr>
<tr><td><code id="set_fit_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
<tr><td><code id="set_fit_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
<tr><td><code id="set_fit_+3A_value">value</code></td>
<td>
<p>A list of values, described in the Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list passed to <code>value</code> needs the following values:
</p>

<ul>
<li> <p><strong>interface</strong> is a single character value that could be <code style="white-space: pre;">&#8288;“formula”&#8288;</code>,
<code style="white-space: pre;">&#8288;“data.frame”&#8288;</code>, or <code style="white-space: pre;">&#8288;“matrix”&#8288;</code>. This defines the type of interface used by
the underlying fit function (<code>stats::lm</code>, in this case). This helps the
translation of the data to be in an appropriate format for the that
function.
</p>
</li>
<li> <p><strong>protect</strong> is an optional list of function arguments that should not be
changeable by the user. In this case, we probably don’t want users to pass
data values to these arguments (until the <code>fit()</code> function is called).
</p>
</li>
<li> <p><strong>func</strong> is the package and name of the function that will be called. If
you are using a locally defined function, only <code>fun</code> is required.
</p>
</li>
<li> <p><strong>defaults</strong> is an optional list of arguments to the fit function that the
user can change, but whose defaults can be set here. This isn’t needed in
this case, but is described later in this document.
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")
set_model_engine("shallow_learning_model", "partition", "stats")

set_fit(
  model = "shallow_learning_model",
  mode = "partition",
  eng = "stats",
  value = list(
    interface = "formula",
    protect = c("formula", "data"),
    func = c(pkg = "stats", fun = "lm"),
    defaults = list()
  )
)

get_fit("shallow_learning_model")
get_fit("shallow_learning_model")$value

</code></pre>

<hr>
<h2 id='set_model_arg'>Register Argument for Model</h2><span id='topic+set_model_arg'></span><span id='topic+get_model_arg'></span>

<h3>Description</h3>

<p>This function is used to register argument information for a model and engine
combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_model_arg(model, eng, exposed, original, func, has_submodel)

get_model_arg(model, eng)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_model_arg_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g. <code>"k_means"</code>,
etc).</p>
</td></tr>
<tr><td><code id="set_model_arg_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
<tr><td><code id="set_model_arg_+3A_exposed">exposed</code></td>
<td>
<p>A single character string for the &quot;harmonized&quot; argument name
that the modeling function exposes.</p>
</td></tr>
<tr><td><code id="set_model_arg_+3A_original">original</code></td>
<td>
<p>A single character string for the argument name that
underlying model function uses.</p>
</td></tr>
<tr><td><code id="set_model_arg_+3A_func">func</code></td>
<td>
<p>A named character vector that describes how to call a function.
<code>func</code> should have elements <code>pkg</code> and <code>fun</code>. The former is optional but is
recommended and the latter is required. For example, <code>c(pkg = "stats", fun = "lm")</code> would be used to invoke the usual linear regression function. In
some cases, it is helpful to use <code>c(fun = "predict")</code> when using a
package's <code>predict</code> method.</p>
</td></tr>
<tr><td><code id="set_model_arg_+3A_has_submodel">has_submodel</code></td>
<td>
<p>A single logical for whether the argument can make
predictions on multiple submodels at once.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function needs to be called once for each argument that you are
exposing.
</p>


<h3>Value</h3>

<p>A tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")
set_model_engine("shallow_learning_model", "partition", "stats")

set_model_arg(
  model = "shallow_learning_model",
  eng = "stats",
  exposed = "method",
  original = "method",
  func = list(pkg = "stats", fun = "lm"),
  has_submodel = FALSE
)

get_model_arg("shallow_learning_model", "stats")
get_model_arg("shallow_learning_model", "stats")$func

</code></pre>

<hr>
<h2 id='set_model_engine'>Register Engine for Model</h2><span id='topic+set_model_engine'></span>

<h3>Description</h3>

<p>This function is used to register a mode for a model and mode combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_model_engine(model, mode, eng)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_model_engine_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g. &quot;k_means&quot;,
etc).</p>
</td></tr>
<tr><td><code id="set_model_engine_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
<tr><td><code id="set_model_engine_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will error if called multiple times with the same arguments. As
you should only have one unique model, mode, eng combination.
</p>


<h3>Value</h3>

<p>NULL invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")

get_from_env("shallow_learning_model")

set_model_engine("shallow_learning_model", "partition", "stats")

get_from_env("shallow_learning_model")

</code></pre>

<hr>
<h2 id='set_model_mode'>Register Mode for Model</h2><span id='topic+set_model_mode'></span>

<h3>Description</h3>

<p>This function is used to register a mode for a model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_model_mode(model, mode)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_model_mode_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g. &quot;k_means&quot;,
etc).</p>
</td></tr>
<tr><td><code id="set_model_mode_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be called multiple times without error. This becomes
valuable when multiple packages adds the same mode to a model. Having both
packages use <code>set_model_mode()</code> avoids having one package depend on the
other.
</p>


<h3>Value</h3>

<p>NULL invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")

get_from_env("shallow_learning_model_modes")

set_model_mode("shallow_learning_model", "partition")

get_from_env("shallow_learning_model_modes")

</code></pre>

<hr>
<h2 id='set_new_model'>Register New Model</h2><span id='topic+set_new_model'></span>

<h3>Description</h3>

<p>This function is used to register new types of models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_new_model(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_new_model_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g. &quot;k_means&quot;,
etc).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is available for users to add their own models or
engines (in a package or otherwise) so that they can be accessed using
packages that use modelenv.
</p>


<h3>Value</h3>

<p>NULL invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")

</code></pre>

<hr>
<h2 id='set_pred'>Register Prediction Method for Model</h2><span id='topic+set_pred'></span><span id='topic+get_pred_type'></span>

<h3>Description</h3>

<p>This function is used to register prediction method information for a model,
mode, and engine combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_pred(model, mode, eng, type, value)

get_pred_type(model, type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_pred_+3A_model">model</code></td>
<td>
<p>A single character string for the model type (e.g. <code>"k_means"</code>,
etc).</p>
</td></tr>
<tr><td><code id="set_pred_+3A_mode">mode</code></td>
<td>
<p>A single character string for the model mode (e.g. &quot;partition&quot;).</p>
</td></tr>
<tr><td><code id="set_pred_+3A_eng">eng</code></td>
<td>
<p>A single character string for the model engine.</p>
</td></tr>
<tr><td><code id="set_pred_+3A_type">type</code></td>
<td>
<p>A single character value for the type of prediction. Possible
values are: <code>cluster</code> and <code>raw</code>.</p>
</td></tr>
<tr><td><code id="set_pred_+3A_value">value</code></td>
<td>
<p>A list of values, described in the Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list passed to <code>value</code> needs the following values:
</p>

<ul>
<li> <p><strong>pre</strong> and <strong>post</strong> are optional functions that can preprocess the data
being fed to the prediction code and to postprocess the raw output of the
predictions. These won’t be needed for this example, but a section below
has examples of how these can be used when the model code is not easy to
use. If the data being predicted has a simple type requirement, you can
avoid using a <strong>pre</strong> function with the <strong>args</strong> below.
</p>
</li>
<li> <p><strong>func</strong> is the prediction function (in the same format as above). In many
cases, packages have a predict method for their model’s class but this is
typically not exported. In this case (and the example below), it is simple
enough to make a generic call to <code>predict()</code> with no associated package.
</p>
</li>
<li> <p><strong>args</strong> is a list of arguments to pass to the prediction function. These
will most likely be wrapped in <code>rlang::expr()</code> so that they are not
evaluated when defining the method. For mda, the code would be
<code>predict(object, newdata, type = "class")</code>. What is actually given to the
function is the model fit object, which includes a sub-object
called <code>fit()</code> that houses the mda model object. If the data need to be a
matrix or data frame, you could also use
<code>newdata = quote(as.data.frame(newdata))</code> or similar.
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_new_model("shallow_learning_model")
set_model_mode("shallow_learning_model", "partition")
set_model_engine("shallow_learning_model", "partition", "stats")

set_pred(
  model = "shallow_learning_model",
  eng = "stats",
  mode = "partition",
  type = "cluster",
  value = list(
    pre = NULL,
    post = NULL,
    func = c(fun = "predict"),
    args =
      list(
        object = rlang::expr(object$fit),
        newdata = rlang::expr(new_data),
        type = "response"
      )
  )
)

get_pred_type("shallow_learning_model", "cluster")
get_pred_type("shallow_learning_model", "cluster")$value

</code></pre>

<hr>
<h2 id='stop_incompatible_mode'>Error handling for incompatible modes</h2><span id='topic+stop_incompatible_mode'></span>

<h3>Description</h3>

<p>Error handling for incompatible modes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_incompatible_mode(spec_modes, eng = NULL, model = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stop_incompatible_mode_+3A_spec_modes">spec_modes</code></td>
<td>
<p>Character vector of modes</p>
</td></tr>
<tr><td><code id="stop_incompatible_mode_+3A_eng">eng</code></td>
<td>
<p>Character of specific engine</p>
</td></tr>
<tr><td><code id="stop_incompatible_mode_+3A_model">model</code></td>
<td>
<p>Character of specific model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rlang)
tmp &lt;- catch_cnd(stop_incompatible_mode("partition"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
