<!DOCTYPE html><html><head><title>Help for package mathjaxr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mathjaxr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mathjaxr-package'><p>Using MathJax in Rd Files</p></a></li>
<li><a href='#preview_rd'><p>Preview rendered version of an Rd file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.6-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-02-28</td>
</tr>
<tr>
<td>Title:</td>
<td>Using 'Mathjax' in Rd Files</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides 'MathJax' and macros to enable its use within Rd files for rendering equations in the HTML help files.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/wviechtb/mathjaxr">https://github.com/wviechtb/mathjaxr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/wviechtb/mathjaxr/issues">https://github.com/wviechtb/mathjaxr/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>js</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-28 12:11:26 UTC; wviechtb</td>
</tr>
<tr>
<td>Author:</td>
<td>Wolfgang Viechtbauer
    <a href="https://orcid.org/0000-0003-3463-4063"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Wolfgang Viechtbauer &lt;wvb@wvbauer.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-28 14:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mathjaxr-package'>Using MathJax in Rd Files</h2><span id='topic+mathjaxr-package'></span><span id='topic+mathjaxr'></span>

<h3>Description</h3>

<script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script>
<p>The <span class="pkg">mathjaxr</span> package allows for easy inclusion of <a href="https://www.mathjax.org/">MathJax</a> equations in Rd files. Package authors wanting to make use of the package and its functionality need to:
</p>

<ol>
<li><p> install the <span class="pkg">mathjaxr</span> package,
</p>
</li>
<li><p> add <code style="white-space: pre;">&#8288;mathjaxr&#8288;</code> to <code style="white-space: pre;">&#8288;Imports&#8288;</code> in the &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file of their package,
</p>
</li>
<li><p> add <code style="white-space: pre;">&#8288;mathjaxr&#8288;</code> to <code style="white-space: pre;">&#8288;RdMacros&#8288;</code> in the &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file of their package (or add <code style="white-space: pre;">&#8288;RdMacros: mathjaxr&#8288;</code> if the &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file does not yet contain a <code style="white-space: pre;">&#8288;RdMacros&#8288;</code> entry),
</p>
</li>
<li><p> add <code style="white-space: pre;">&#8288;import(mathjaxr)&#8288;</code> in the &lsquo;<span class="file">NAMESPACE</span>&rsquo; file of their package.
</p>
</li></ol>

<p>One can then enable the use of MathJax by calling the <code>\loadmathjax</code> macro (that is provided by the <span class="pkg">mathjaxr</span> package) within the <code style="white-space: pre;">&#8288;\description{}&#8288;</code> section of an Rd file (or within the <code style="white-space: pre;">&#8288;@description&#8288;</code> section when using <span class="pkg">roxygen2</span>).
</p>
<p>An inline equation can then be added with the <code>\mjeqn{latex}{ascii}</code> macro, with the LaTeX commands for the equation given between the first set of curly brackets (which will be rendered in the HTML and PDF help pages) and the plain-text version of the equation given between the second set of curly brackets (which will be shown in the plain text help). With the <code>\mjdeqn{latex}{ascii}</code> macro, one can add &lsquo;displayed equations&rsquo; (as in LaTeX's <code>displaymath</code> environment).
</p>
<p>Single argument versions of these macros, <code>\mjseqn{latexascii}</code> and <code>\mjsdeqn{latexascii}</code>, are also available. For the relatively rare case that one must specify different LaTeX commands for the PDF and HTML pages, there are also triple argument versions of these macros, namely <code>\mjteqn{pdflatex}{htmllatex}{ascii}</code> and <code>\mjtdeqn{pdflatex}{htmllatex}{ascii}</code>.
</p>


<h3>Details</h3>

<p>The Javascript code for MathJax is contained in this package. If a user viewing a help page has <span class="pkg">mathjaxr</span> installed, it will be retrieved from there, otherwise it will be retrieved from the CDN site <a href="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js">https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js</a>. To force use of the CDN site, the user can set the environment variable <span class="env">MATHJAXR_USECDN</span> to any non-blank value (e.g., <code>Sys.setenv(MATHJAXR_USECDN=TRUE)</code>). The URL for a diferent CDN can be specified via the environment variable <span class="env">MATHJAXR_CDN</span>.
</p>


<h3>Notes/Issues</h3>


<ul>
<li><p> Care must be taken when using the less-than and greater-than symbols in equations as these might get interpreted by the browser as HTML tags. See <a href="https://docs.mathjax.org/en/latest/input/tex/html.html">here</a> for further details. Adding space around these symbols should solve this problem (e.g., instead of writing <code>\mjseqn{i&lt;j}</code>, one should write <code>\mjseqn{i &lt; j}</code>). Do not use the <code>\lt</code> and <code>\gt</code> macros provided by MathJax as these will cause problems when rendering the PDF help pages.
</p>
</li>
<li><p> Curly braces/brackets in equations also cause problems. Using <code>\lbrace</code> and <code>\rbrace</code> (possibly in combination with <code>\left</code> and <code>\right</code> to make them sufficiently large) is a solution (e.g., <code>\mjeqn{\left\lbrace ... \right\rbrace}{\{...\}}</code> should render nicely in the PDF/HTML help pages and the plain-text version).
</p>
</li>
<li><p> Using the percent symbol (i.e., %) inside of equations is also problematic. The percent symbol needs to be &lsquo;escaped&rsquo; by using a backslash, but backslashes need to be escaped as well. For this to work, we need to use the correct number of backslashes, which works slightly differently for producing the PDF, HTML, and plain-text help pages. The equation <code>\mjteqn{100\\\%}{100\\\\\\\%}{100\%}</code> should be rendered correctly in all three help pages.
</p>
</li>
<li><p> While MathJax supports a large number of LaTeX commands, only the math-mode commands are implemented. See <a href="https://docs.mathjax.org/en/latest/input/tex/macros/index.html">here</a> for a list of the supported commands.
</p>
</li>
<li><p> When using R via an RStudio Server, MathJax equations in the help files are not automatically rendered (this is not a problem on RStudio Desktop). A solution to get the rendering to work in RStudio Server is to add &lsquo;&lsquo;<span class="samp">&#8288;server-add-header=X-Content-Type-Options:&#8288;</span>&rsquo;&rsquo; to &lsquo;<span class="file">/etc/rstudio/rserver.conf</span>&rsquo; (and then restarting the server). This of course requires admin rights on the machine running the server.
</p>
</li></ul>



<h3>Example</h3>

<p>The probability density function of a normal distribution is given by \[f(x) = \frac{1}{\sqrt{2\pi} \sigma} e^{-\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^2},\] where \(\mu\) denotes the mean of the distribution and \(\sigma\) its standard deviation.
</p>


<h3>Author(s)</h3>

<p>Wolfgang Viechtbauer <a href="mailto:wvb@wvbauer.com">wvb@wvbauer.com</a> <a href="https://www.wvbauer.com/">https://www.wvbauer.com/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+preview_rd">preview_rd</a></code>
</p>

<hr>
<h2 id='preview_rd'>Preview rendered version of an Rd file</h2><span id='topic+preview_rd'></span>

<h3>Description</h3>

<p>Function to preview the rendered version of an Rd file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preview_rd(Rdfile, view = TRUE, type = "html", verbose = FALSE, dark = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="preview_rd_+3A_rdfile">Rdfile</code></td>
<td>
<p>character string with the name of the Rd file to preview (either with or without the <code>.Rd</code> or <code>.rd</code> extension).</p>
</td></tr>
<tr><td><code id="preview_rd_+3A_view">view</code></td>
<td>
<p>logical indicating whether the rendered version of the help file should be displayed.</p>
</td></tr>
<tr><td><code id="preview_rd_+3A_type">type</code></td>
<td>
<p>character string indicating which version should be rendered (either <code>"html"</code>, <code>"txt"</code>/<code>"text"</code>, or <code>"pdf"</code>).</p>
</td></tr>
<tr><td><code id="preview_rd_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether diagnostic output will be shown.</p>
</td></tr>
<tr><td><code id="preview_rd_+3A_dark">dark</code></td>
<td>
<p>logical indicating whether the rendererd HTML page should use a dark mode.</p>
</td></tr>
<tr><td><code id="preview_rd_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is useful when writing a help file that contains MathJax equations. Instead of having to reinstall the package under development to check if the equations are being rendered correctly, one can just set the current working directory to the root of the package (or its <code>man</code> directory) and then use <code>preview_rd()</code> to preview the HTML, plain-text, or PDF version of an Rd file on the fly.
</p>
<p>For <code>type="html"</code>, the HTML page will be opened in the browser with the <code><a href="utils.html#topic+browseURL">browseURL</a></code> function. When making further changes to the Rd file, reopening the page each time with <code>preview_rd()</code> is inconvenient as this will usually open up a new tab in the browser. Setting <code>view=FALSE</code> prevents this. Reloading the page in the open tab should then reflect the updates. In RStudio, the generated HTML version will be displayed in the &lsquo;Viewer&rsquo; pane and the <code>view</code> argument is then irrelevant.
</p>
<p>Setting <code>dark=TRUE</code> (in combination with <code>type="html"</code>) renders the HTML page in dark mode. Unfortunately, this does not work in RStudio.
</p>
<p>For <code>type="txt"</code> (or <code>type="text"</code>), the plain-text version of the help file will be shown (using the <code><a href="base.html#topic+file.show">file.show</a></code> function and directly on the console in RStudio).
</p>
<p>For <code>type="pdf"</code>, the PDF is generated using <code>R CMD Rd2pdf</code> and should open up in the default PDF viewer.
</p>


<h3>Note</h3>

<p>Any links to local help pages used in the Rd file to preview will be shown in the rendered HTML or PDF help file, but are non-functional.
</p>
<p>Due to some limitations as to how MathJax can be loaded via the <span class="pkg">mathjaxr</span> package, MathJax must be loaded via the CDN when using the <code>preview_rd()</code> function. Hence, rendering of equations in HTML will only work in the preview with an active internet connection.
</p>


<h3>Author(s)</h3>

<p>Wolfgang Viechtbauer <a href="mailto:wvb@wvbauer.com">wvb@wvbauer.com</a> <a href="https://www.wvbauer.com/">https://www.wvbauer.com/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
setwd("/path/to/root/of/package")
preview_rd("someRdfile")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
