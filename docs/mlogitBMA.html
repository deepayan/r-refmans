<!DOCTYPE html><html lang="en"><head><title>Help for package mlogitBMA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mlogitBMA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mlogitBMA-package'>
<p>Bayesian Model Averaging for Multinomial Logit Models</p></a></li>
<li><a href='#bic.mlogit'>
<p>Bayesian Model Averaging for Multinomial Logit Models</p></a></li>
<li><a href='#estimate.mlogit'>
<p>Multinomial Logit Estimation</p></a></li>
<li><a href='#heating'>
<p>Heating Dataset</p></a></li>
<li><a href='#mlogit2logit'>
<p>Converting Multinomial Logit Data into Binary Logit Data</p></a></li>
<li><a href='#mlogitBMA-internal'>
<p>Internal Functions of mlogitBMA</p></a></li>
<li><a href='#mnl.spec'>
<p>Specification Object of a Multinomial Logit Model</p></a></li>
<li><a href='#summary.bic.mlogit'>
<p>Summary and Plotting Functions</p></a></li>
<li><a href='#summary.mnl'>
<p>Summary for Results of a Multinomial Logit Estimation</p></a></li>
<li><a href='#summary.mnl.spec'>
<p>Summary for a Specification Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Model Averaging for Multinomial Logit Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-9</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-10-16</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.9.0), BMA, abind, maxLik</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mlogit</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a modified function bic.glm of the BMA package that can be applied to multinomial logit (MNL) data. The data is converted to binary logit using the Begg &amp; Gray approximation. The package also contains functions for maximum likelihood estimation of MNL. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-17 03:12:36 UTC; hana</td>
</tr>
<tr>
<td>Author:</td>
<td>Hana Sevcikova [aut, cre],
  Adrian Raftery [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hana Sevcikova &lt;hanas@uw.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-17 16:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mlogitBMA-package'>
Bayesian Model Averaging for Multinomial Logit Models
</h2><span id='topic+mlogitBMA-package'></span><span id='topic+mlogitBMA'></span>

<h3>Description</h3>

<p>Provides a modified function <code><a href="BMA.html#topic+bic.glm">bic.glm</a></code> of the <span class="pkg">BMA</span> package that can be applied to multinomial logit (MNL) data. The data is converted to binary logit using the Begg &amp; Gray approximation. The package also contains functions for maximum likelihood estimation of MNL models.
</p>


<h3>Details</h3>

<p>The main function of the package is <code><a href="#topic+bic.mlogit">bic.mlogit</a></code> which runs the Bayesian Model Averaging on multinomial logit data. Results can be explored using <code><a href="#topic+summary.bic.mlogit">summary.bic.mlogit</a></code>, <code><a href="#topic+imageplot.mlogit">imageplot.mlogit</a></code>, or <code><a href="#topic+plot.bic.mlogit">plot.bic.mlogit</a></code> functions.
</p>
<p>An MNL estimation of a single model can be done using  <code><a href="#topic+estimate.mlogit">estimate.mlogit</a></code>. Use <code><a href="#topic+summary.mnl">summary.mnl</a></code> to view its results.
</p>


<h3>Author(s)</h3>

<p>Hana Sevcikova, Adrian Raftery
</p>
<p>Maintainer: Hana Sevcikova &lt;hanas@uw.edu&gt;
</p>


<h3>References</h3>

<p>Begg, C.B., Gray, R. (1984) Calculation of polychotomous logistic regression parameters using individualized regressions. Biometrika <b>71</b>, 11&ndash;18.
</p>
<p>Raftery, A.E. (1995) Bayesian model selection in social research (with Discussion). Sociological Methodology 1995 (Peter V. Marsden, ed.), 111&ndash;196, Cambridge, Mass.: Blackwells.
</p>
<p>Train, K.E. (2003) Discrete Choice Methods with Simulation. Cambridge University Press.
</p>
<p>Yeung, K.Y., Bumgarner, R.E., Raftery, A.E. (2005) Bayesian model averaging: development of an improved multi-class, gene selection and classification tool for microarray data. Bioinformatics <b>21</b> (10), 2394&ndash;2402.
</p>


<h3>See Also</h3>

<p><code><a href="BMA.html#topic+bic.glm">bic.glm</a></code>
</p>

<hr>
<h2 id='bic.mlogit'>
Bayesian Model Averaging for Multinomial Logit Models
</h2><span id='topic+bic.mlogit'></span>

<h3>Description</h3>

<p>Using the methodology of Bayesian Model Averaging in the <span class="pkg">BMA</span> package, the variable selection problem is applied to multinomial logit models in which coefficients can be estimated relative to a base alternative. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bic.mlogit(f, data, choices = NULL, base.choice = 1, 
           varying = NULL, sep = ".", approx=TRUE, 
           include.intercepts = TRUE, verbose = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bic.mlogit_+3A_f">f</code></td>
<td>
<p>Formula as described in Details of <code><a href="#topic+mnl.spec">mnl.spec</a></code>.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_data">data</code></td>
<td>
<p>Data frame containing the variables of the model. There should be one record for each individual. Alternative-specific variables occupy single column per alternative.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_choices">choices</code></td>
<td>
<p>Vector of names of alternatives. If it is not given, it is determined from the response column of the data frame. Values of this vector should match or be a subset of those in the response column. If it is a subset, <code>data</code> is reduced to contain only observations whose choice is contained in <code>choices</code>.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_base.choice">base.choice</code></td>
<td>
<p>Index of the base alternative within the vector <code>choices</code>.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_varying">varying</code></td>
<td>
<p>Indices of variables within <code>data</code> that are alternative-specific.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_sep">sep</code></td>
<td>
<p>Separator of variable name and alternative name in the &lsquo;varying&rsquo; variables.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_approx">approx</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the function uses approximate likelihoods as they come out of the Begg &amp; Gray approximation. If <code>FALSE</code>, the MNL maximum likelihood estimation is used in the last step of the model selection procedure. Note that this can significantly increase the run-time, see Details below.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_include.intercepts">include.intercepts</code></td>
<td>
<p>Logical controlling if alternative specific constants should always be included in the selected models. It only has an effect if the formula <code>f</code> contains the intercept, i.e. it does not contain &lsquo;-1&rsquo;. See Details below.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_verbose">verbose</code></td>
<td>
<p>Logical switching log messages on and off.</p>
</td></tr>
<tr><td><code id="bic.mlogit_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the <code><a href="BMA.html#topic+bic.glm">bic.glm</a></code> function of the <span class="pkg">BMA</span> package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function converts the given multinomial data into a combination of binary logistic data, as proposed in Yeung et al. (2005). It requires that the model can be specified as a set of equations of which one is considered as the base equation. If variables are included that vary over alternatives, they are normalized by subtracting the values corresponding to the base alternative. Details of the conversion algorithm are described in the vignette of this package, see <code>vignette('conversion')</code>.
</p>
<p>The function then applies the <code><a href="BMA.html#topic+bic.glm">bic.glm</a></code> function of the <span class="pkg">BMA</span> package on the converted data by using the Begg &amp; Gray (1984) approximation. In the last step of the variable selection procedure, if <code>approx</code> is <code>FALSE</code>, the maximum likelihood estimation (MLE) is applied to all selected models and the Bayesian Information Criterium (BIC) is recomputed using the log-likelihood of the full multinomial logistic regression model. Note that this step can be computationally very expensive. We suggest when using this option, set the <code>verbose</code> argument to <code>TRUE</code> to follow the computation progress. Note that one can use the <code><a href="#topic+estimate.mlogit">estimate.mlogit</a></code> function on the resulting object which performs the MLE on selected models only. 
</p>
<p>The <span class="pkg">BMA</span> functions always include the intercept which in the MNL settings corresponds to the alternative specific constant (asc) of the second alternative (relative to the base alternative). If <code>include.intercepts=TRUE</code> (default), asc for all the remaining alternatives are also always included in the selected models. If it is set to <code>FALSE</code>, the asc of the remaining alternatives (i.e. third and higher) are treated as ordinary variables, i.e candidates for selection as well as exclusion.
</p>


<h3>Value</h3>

<p>The function returns an object of class <code>bic.mlogit</code> containing the following components:  
</p>
<table role = "presentation">
<tr><td><code>bic.glm</code></td>
<td>
<p>Object of class <code><a href="BMA.html#topic+bic.glm">bic.glm</a></code> which results from applying BMA on the binary logistic data.</p>
</td></tr>
<tr><td><code>bin.logit</code></td>
<td>
<p>List with results from the <code><a href="#topic+mlogit2logit">mlogit2logit</a></code> function.</p>
</td></tr>
<tr><td><code>spec</code></td>
<td>
<p>Object of class <code><a href="#topic+mnl.spec">mnl.spec</a></code> containing the MNL specification of the full model.</p>
</td></tr>
<tr><td><code>bma.specifications</code></td>
<td>
<p>List of objects of class <code><a href="#topic+mnl.spec">mnl.spec</a></code> containing specifications for each selected model.</p>
</td></tr>
<tr><td><code>approx</code></td>
<td>
<p>Value of the <code>approx</code> argument.</p>
</td></tr> 
</table>


<h3>Author(s)</h3>

<p>Hana Sevcikova, Adrian Raftery
</p>


<h3>References</h3>

<p>Begg, C.B., Gray, R. (1984) Calculation of polychotomous logistic regression parameters using individualized regressions. Biometrika <b>71</b>, 11&ndash;18.
</p>
<p>Yeung, K.Y., Bumgarner, R.E., Raftery, A.E. (2005) Bayesian model averaging: development of an improved multi-class, gene selection and classification tool for microarray data. Bioinformatics <b>21</b> (10), 2394&ndash;2402.
</p>


<h3>See Also</h3>

<p><code><a href="BMA.html#topic+bic.glm">bic.glm</a></code>, <code><a href="#topic+summary.bic.mlogit">summary.bic.mlogit</a></code>, <code><a href="#topic+imageplot.mlogit">imageplot.mlogit</a></code>, <code><a href="#topic+estimate.mlogit">estimate.mlogit</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data('heating')
res &lt;- bic.mlogit(depvar ~ ic + oc + income + rooms, heating, choices=1:5, 
                  varying=3:12, verbose=TRUE, approx=FALSE, sep='')
summary(res)
imageplot.mlogit(res)
plot(res)

# use approximate BMA and estimate the models afterwards
res &lt;- bic.mlogit(depvar ~ ic + oc | income + rooms, heating, choices=1:5, 
                  varying=3:12, verbose=TRUE, approx=TRUE, sep='')
summary(res)
estimate.mlogit(res, heating)
</code></pre>

<hr>
<h2 id='estimate.mlogit'>
Multinomial Logit Estimation
</h2><span id='topic+estimate.mlogit'></span><span id='topic+estimate.mlogit.formula'></span><span id='topic+estimate.mlogit.mnl.spec'></span><span id='topic+estimate.mlogit.bic.mlogit'></span><span id='topic+estimate.mlogit.list'></span><span id='topic+mnl'></span>

<h3>Description</h3>

<p>Maximum likelihood estimation of coefficients of one or more multinomial logit models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'formula'
 estimate.mlogit(f, data, method = "BHHH", 
                 choices = NULL, base.choice = 1, 
                 varying = NULL, sep = ".", ...)
	
## S3 method for class 'mnl.spec'
 estimate.mlogit(object, data, method='BHHH', ...)

## S3 method for class 'bic.mlogit'
 estimate.mlogit(object, ...)

## S3 method for class 'list'
 estimate.mlogit(object, data, verbose=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate.mlogit_+3A_f">f</code></td>
<td>
<p>Formula as described in Details of <code><a href="#topic+mnl.spec">mnl.spec</a></code>.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_object">object</code></td>
<td>
<p>An object of class <code><a href="#topic+mnl.spec">mnl.spec</a></code> containing the model specification, or an object of class <code><a href="#topic+bic.mlogit">bic.mlogit</a></code>, or a list of objects of class <code><a href="#topic+mnl.spec">mnl.spec</a></code>.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_data">data</code></td>
<td>
<p>Data frame containing the variables of the model.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_method">method</code></td>
<td>
<p>Estimation method passed to the <code>maxLik</code> function of the <span class="pkg">maxLik</span> package. Available methods are &ldquo;Newton-Raphson&rdquo;, &ldquo;BFGS&rdquo;, &ldquo;BHHH&rdquo;, &ldquo;SANN&rdquo; or &ldquo;NM&rdquo;. </p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_choices">choices</code></td>
<td>
<p>Vector of names of alternatives. If it is not given, it is determined from the response column of the data frame. Values of this vector should match or be a subset of those in the response column. If it is a subset, <code>data</code> is reduced to contain only observations whose choice is contained in <code>choices</code>.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_base.choice">base.choice</code></td>
<td>
<p>Index of the base alternative within the vector <code>choices</code>. </p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_varying">varying</code></td>
<td>
<p>Indices of variables within <code>data</code> that are alternative-specific.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_sep">sep</code></td>
<td>
<p>Separator of variable name and alternative name in the &lsquo;varying&rsquo; variables.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_verbose">verbose</code></td>
<td>
<p>Logical switching log messages on and off.</p>
</td></tr>
<tr><td><code id="estimate.mlogit_+3A_...">...</code></td>
<td>
<p>Arguments passed to the underlying optimization routine in <span class="pkg">optim</span>. Note that arguments <code>data</code> and <code>method</code> can be also passed to <code>estimate.mlogit.bic.mlogit</code> and <code>estimate.mlogit.list</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data are expected to be in the &lsquo;wide&rsquo; format (using the terminology of the <code><a href="stats.html#topic+reshape">reshape</a></code> function). There should be one record for each individual. Alternative-specific variables occupy single column per alternative.
The given optimization routine is called for the multinomial data, starting from the coefficients being all zeros.
</p>
<p>Function <code>estimate.mlogit.bic.mlogit</code> invokes as many estimations as there are models selected in the <code><a href="#topic+bic.mlogit">bic.mlogit</a></code> object. Function <code>estimate.mlogit.list</code> invokes an estimation for each specification included in the <code>object</code> argument.
</p>


<h3>Value</h3>

<p>Functions <code>estimate.mlogit.formula</code> and <code>estimate.mlogit.mnl.spec</code> return an object of class <code>mnl</code>. Functions <code>estimate.mlogit.bic.mlogit</code> and <code>estimate.mlogit.list</code> return a list of such objects with each element corresponding to one specification. An object of class <code>mnl</code> contains the following components:
</p>
<table role = "presentation">
<tr><td><code>coefficients</code></td>
<td>
<p>The estimated coefficients.</p>
</td></tr>
<tr><td><code>logLik</code></td>
<td>
<p>Maximum log-likelihood.</p>
</td></tr>
<tr><td><code>logLik0</code></td>
<td>
<p>Null log-likelihood.</p>
</td></tr>
<tr><td><code>aic</code></td>
<td>
<p>Akaike Information Criterium.</p>
</td></tr>
<tr><td><code>bic</code></td>
<td>
<p>Bayesian Information Criterium.</p>
</td></tr>
<tr><td><code>iter</code></td>
<td>
<p>Number of iterations.</p>
</td></tr>
<tr><td><code>hessian</code></td>
<td>
<p>The Hessian at the maximum.</p>
</td></tr>
<tr><td><code>gradient</code></td>
<td>
<p>The last gradient value.</p>
</td></tr>
<tr><td><code>fitted.values</code></td>
<td>
<p>The MNL probabilities computed with the estimated parameters.</p>
</td></tr>
<tr><td><code>residuals</code></td>
<td>
<p>Difference between observed values and fitted values.</p>
</td></tr>
<tr><td><code>specification</code></td>
<td>
<p>The corresponding <code><a href="#topic+mnl.spec">mnl.spec</a></code> object.</p>
</td></tr>
<tr><td><code>convergence</code></td>
<td>
<p>Convergence statistics.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>Estimation method.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>Time needed for the estimation.</p>
</td></tr>
<tr><td><code>code</code></td>
<td>
<p>Code returned by the <code><a href="maxLik.html#topic+maxLik">maxLik</a></code> function.</p>
</td></tr>
<tr><td><code>message</code></td>
<td>
<p>Message describing the <code>code</code>.</p>
</td></tr>
<tr><td><code>last.step</code></td>
<td>
<p>List describing the last unsuccessful step if <code>code=3</code> (see <code><a href="maxLik.html#topic+maxLik">maxLik</a></code>).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>References</h3>

<p>Train, K.E. (2003) Discrete Choice Methods with Simulation. Cambridge University Press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.mnl">summary.mnl</a></code>, <code><a href="#topic+mnl.spec">mnl.spec</a></code>, <code><a href="stats.html#topic+reshape">reshape</a></code>, <code><a href="maxLik.html#topic+maxLik">maxLik</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(heating)
est &lt;- estimate.mlogit(depvar ~ ic + oc, heating, choices=1:5, 
                       varying=c(3:12, 20:24), sep='')
summary(est)
</code></pre>

<hr>
<h2 id='heating'>
Heating Dataset
</h2><span id='topic+heating'></span>

<h3>Description</h3>

<p>Kenneth Trains dataset containing data on choice of heating system in California houses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(heating)</code></pre>


<h3>Format</h3>

<p>A data frame with 900 observations on the following 19 variables.
</p>

<dl>
<dt><code>idcase</code></dt><dd><p>Observation number.</p>
</dd>
<dt><code>depvar</code></dt><dd><p>Identifies the chosen alternative (1-5).</p>
</dd>
<dt><code>ic1</code></dt><dd><p>Installation cost for a gas central system.</p>
</dd>
<dt><code>ic2</code></dt><dd><p>Installation cost for a gas room system.</p>
</dd>
<dt><code>ic3</code></dt><dd><p>Installation cost for a electric central system.</p>
</dd>
<dt><code>ic4</code></dt><dd><p>Installation cost for a electric room system.</p>
</dd>
<dt><code>ic5</code></dt><dd><p>Installation cost for a heat pump.</p>
</dd>
<dt><code>oc1</code></dt><dd><p>Annual operating cost for a gas central system.</p>
</dd>
<dt><code>oc2</code></dt><dd><p>Annual operating cost for a gas room system.</p>
</dd>
<dt><code>oc3</code></dt><dd><p>Annual operating cost for a electric central system.</p>
</dd>
<dt><code>oc4</code></dt><dd><p>Annual operating cost for a electric room system.</p>
</dd>
<dt><code>oc5</code></dt><dd><p>Annual operating cost for a heat pump.</p>
</dd>
<dt><code>income</code></dt><dd><p>Annual income of the household.</p>
</dd>
<dt><code>agehed</code></dt><dd><p>Age of the household head.</p>
</dd>
<dt><code>rooms</code></dt><dd><p>Number of rooms in the house.</p>
</dd>
<dt><code>ncost1</code></dt><dd><p>Identifies whether the house is in the northern coastal region.</p>
</dd>
<dt><code>scost1</code></dt><dd><p>Identifies whether the house is in the southern coastal region.</p>
</dd>
<dt><code>mountn</code></dt><dd><p>Identifies whether the house is in the mountain region.</p>
</dd>
<dt><code>valley</code></dt><dd><p>Identifies whether the house is in the central valley region.</p>
</dd>
</dl>



<h3>Details</h3>

<p>The observations consist of single-family houses in 
California that were newly built and had central air-conditioning. The choice is among heating systems. 
Five types of systems are considered to have been possible:
</p>
<p>(1) gas central, 
(2) gas room, 
(3) electric central, 
(4) electric room, 
(5) heat pump. 
</p>
<p>For these data, the costs were calculated as the amount the system would cost if it were installed in the house, given the characteristics of the house (such as size), the price of
gas and electricity in the house location, and the weather conditions in the area (which 
determine the necessary capacity of the system and the amount it will be run.) These cost 
are conditional on the house having central air-conditioning. (That is  why the installation
cost of gas central is lower than that for gas room: the central system can use the air-conditioning 
products that have been installed.)
</p>


<h3>Note</h3>

<p>This help file was created using Kenneth Trains description of the dataset, see Source.</p>


<h3>Source</h3>

<p>http://elsa.berkeley.edu/~train/distant.html
</p>


<h3>References</h3>

<p>Train, K.E. (2003) Discrete Choice Methods with Simulation. Cambridge University Press.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(heating)
head(heating)
</code></pre>

<hr>
<h2 id='mlogit2logit'>
Converting Multinomial Logit Data into Binary Logit Data
</h2><span id='topic+mlogit2logit'></span>

<h3>Description</h3>

<p>Converts multinomial logit data into a combination of several binary logit data sets, in order to analyze it via the Begg &amp; Gray approximation using a binary logistic regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlogit2logit(f, data, choices = NULL, base.choice = 1, 
             varying = NULL, sep = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mlogit2logit_+3A_f">f</code></td>
<td>
<p>Formula as described in Details of <code><a href="#topic+mnl.spec">mnl.spec</a></code>.</p>
</td></tr>
<tr><td><code id="mlogit2logit_+3A_data">data</code></td>
<td>
<p>Data frame containing the variables of the model.</p>
</td></tr>
<tr><td><code id="mlogit2logit_+3A_choices">choices</code></td>
<td>
<p>Vector of names of alternatives. If it is not given, it is determined from the response column of the data frame. Values of this vector should match or be a subset of those in the response column. If it is a subset, <code>data</code> is reduced to contain only observations whose choice is contained in <code>choices</code>.</p>
</td></tr>
<tr><td><code id="mlogit2logit_+3A_base.choice">base.choice</code></td>
<td>
<p>Index of the base alternative within the vector <code>choices</code>.</p>
</td></tr>
<tr><td><code id="mlogit2logit_+3A_varying">varying</code></td>
<td>
<p>Indices of variables within <code>data</code> that are alternative-specific.</p>
</td></tr>
<tr><td><code id="mlogit2logit_+3A_sep">sep</code></td>
<td>
<p>Separator of variable name and alternative name in the &lsquo;varying&rsquo; variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Details of the conversion algorithm are described in the vignette of this package, see <code>vignette('conversion')</code>.
</p>


<h3>Value</h3>

<p>List with components:
</p>
<table role = "presentation">
<tr><td><code>data</code></td>
<td>
<p>Converted data set.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>Formula to be used with the converted data set.</p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p>Number of observations in the original data set.</p>
</td></tr>
<tr><td><code>z.index</code></td>
<td>
<p>Index of all <code class="reqn">Z</code> columns within <code>data</code> (see vignette for details), i.e. columns that correspond to alternative specific constants.</p>
</td></tr>
<tr><td><code>z.names</code></td>
<td>
<p>Names of the <code class="reqn">Z</code> columns.</p>
</td></tr>
<tr><td><code>zcols</code></td>
<td>
<p>List in which each element corresponds to any of the <code>data</code> columns that involve <code class="reqn">Z</code>, which is either <code class="reqn">Z</code> itself or an interaction between a variable and <code class="reqn">Z</code>, (see vignette). The value of such element is a vector with the components &lsquo;name&rsquo;: either <code class="reqn">Z</code> itself, or name of the corresponding <code class="reqn">X</code> or <code class="reqn">U</code> variable with which <code class="reqn">Z</code> interacts; &lsquo;choice&rsquo;: which alternative it belongs to; &lsquo;intercept&rsquo;: logical determining if it is an alternative specific constant.</p>
</td></tr>
<tr><td><code>choices</code></td>
<td>
<p>Vector of names of the alternatives.</p>
</td></tr>
<tr><td><code>choice.main.intercept</code></td>
<td>
<p>Index of alternative within <code>choices</code> that corresponds to the main intercept of the binary logistic model.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is called from within the <code><a href="#topic+bic.mlogit">bic.mlogit</a></code> and thus usually will not need to be called explicitly. 
</p>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>References</h3>

<p>Begg, C.B., Gray, R. (1984) Calculation of polychotomous logistic regression parameters using individualized regressions. Biometrika <b>71</b>, 11&ndash;18.
</p>
<p>Yeung, K.Y., Bumgarner, R.E., Raftery, A.E. (2005) Bayesian model averaging: development of an improved multi-class, gene selection and classification tool for microarray data. Bioinformatics <b>21</b> (10), 2394&ndash;2402.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mnl.spec">mnl.spec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(heating)
bin.data &lt;- mlogit2logit(depvar ~ ic + oc, heating, choices=1:5, 
                         varying=3:12, sep='')
bin.glm &lt;- glm(bin.data$formula, 'binomial', data=bin.data$data)
summary(bin.glm)
</code></pre>

<hr>
<h2 id='mlogitBMA-internal'>
Internal Functions of mlogitBMA
</h2><span id='topic+bic.glm.bg'></span><span id='topic+bic.glm.bg.data.frame'></span><span id='topic+bic.glm.bg.formula'></span><span id='topic+bic.glm.bg.matrix'></span><span id='topic+do.estimate.mlogit'></span><span id='topic+do.mlogit2logit'></span><span id='topic+get.mnl.data'></span><span id='topic+mnl.loglikelihood'></span><span id='topic+mnl.probabilities'></span><span id='topic+mnl.spec.reduce'></span><span id='topic+mnl.utilities'></span><span id='topic+print.summary.mnl'></span>

<h3>Description</h3>

<p>These functions are not to be used directly by the user.
</p>

<hr>
<h2 id='mnl.spec'>
Specification Object of a Multinomial Logit Model 
</h2><span id='topic+mnl.spec'></span>

<h3>Description</h3>

<p>Using a formula and data, create a specification object of a multinomial logit model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mnl.spec(f, data, choices = NULL, base.choice = 1, 
         varying = NULL, sep = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mnl.spec_+3A_f">f</code></td>
<td>
<p>Formula (see Details below).</p>
</td></tr>
<tr><td><code id="mnl.spec_+3A_data">data</code></td>
<td>
<p>Data frame containing the variables in the model. It should be in the &lsquo;wide&rsquo; format (using the terminology of the <code><a href="stats.html#topic+reshape">reshape</a></code> function), i.e. there is one record for each individual and alternative-specific variables occupy single column per alternative.</p>
</td></tr>
<tr><td><code id="mnl.spec_+3A_choices">choices</code></td>
<td>
<p>Vector of names of alternatives. If it is not given, it is determined from the response column of the data frame. Values of this vector should match or be a subset of those in the response column.</p>
</td></tr>
<tr><td><code id="mnl.spec_+3A_base.choice">base.choice</code></td>
<td>
<p>Index of the base alternative within the vector <code>choices</code>.</p>
</td></tr>
<tr><td><code id="mnl.spec_+3A_varying">varying</code></td>
<td>
<p>Indices of variables within <code>data</code> that are alternative-specific.</p>
</td></tr>
<tr><td><code id="mnl.spec_+3A_sep">sep</code></td>
<td>
<p>Separator of variable name and alternative name in the &lsquo;varying&rsquo; variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula <code>f</code> is of the form <code>response ~ x1 + x2 | y1 + y2</code>. Coefficients for variables in the first part of the formula (i.e. before '|'), here <code>x1</code> and <code>x2</code>, are forced to be the same for all alternatives. Variables in the second part of the formula (i.e. after '|'), here <code>y1</code> and <code>y2</code>, have different coefficients for different alternatives. Either part of the formula can be omitted. Alternative specific constants (asc) are included automatically. To exclude asc, use -1 in the first part. The equation of the base alternative is always set to 0.
</p>


<h3>Value</h3>

<p>An object of class <code>mnl.spec</code> containing the following elements:
</p>
<table role = "presentation">
<tr><td><code>response</code></td>
<td>
<p>Name of the response variable.</p>
</td></tr>
<tr><td><code>choices</code></td>
<td>
<p>Vector of alternatives.</p>
</td></tr>
<tr><td><code>base.choice</code></td>
<td>
<p>Index of the base alternative within <code>choices</code>.</p>
</td></tr>
<tr><td><code>variable.used</code></td>
<td>
<p>Matrix of size number of choices x number of variables. Each value is logical determining if the variable is used in that choice equation.</p>
</td></tr>
<tr><td><code>same.coefs</code></td>
<td>
<p>Logical vector of size number of variables. It determines if that variable has the same coefficient for all alternatives.</p>
</td></tr>
<tr><td><code>full.var.names</code></td>
<td>
<p>Matrix of the same shape as <code>variable.used</code>. It contains names of variables in its alternative-specific form.</p>
</td></tr>
<tr><td><code>varying.names</code></td>
<td>
<p>Vector of variable names specified by the <code>varying</code> vector that are used in the specification.</p>
</td></tr>
<tr><td><code>intercepts</code></td>
<td>
<p>Logical vector of size number of choices determining in which equation asc is used.</p>
</td></tr>
<tr><td><code>sep</code></td>
<td>
<p>Separator of variable name and alternative name in the &lsquo;varying&rsquo; variables.</p>
</td></tr>
<tr><td><code>frequency</code></td>
<td>
<p>Table of frequencies for each choice in the <code>choices</code> vector computed from the data.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.mnl.spec">summary.mnl.spec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(heating)
spec &lt;- mnl.spec(depvar ~ ic + oc + income, heating, varying=3:12, sep='')
summary(spec)
spec &lt;- mnl.spec(depvar ~ oc-1 | ic, heating, varying=3:12, sep='')
summary(spec)
</code></pre>

<hr>
<h2 id='summary.bic.mlogit'>
Summary and Plotting Functions
</h2><span id='topic+summary.bic.mlogit'></span><span id='topic+plot.bic.mlogit'></span><span id='topic+imageplot.mlogit'></span>

<h3>Description</h3>

<p>Summarizes and plots results of the <code><a href="#topic+bic.mlogit">bic.mlogit</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bic.mlogit'
summary(object, ...)

## S3 method for class 'bic.mlogit'
plot(x, ...)

imageplot.mlogit (x , ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.bic.mlogit_+3A_object">object</code>, <code id="summary.bic.mlogit_+3A_x">x</code></td>
<td>
<p>Object of class <code><a href="#topic+bic.mlogit">bic.mlogit</a></code>.</p>
</td></tr>
<tr><td><code id="summary.bic.mlogit_+3A_...">...</code></td>
<td>
<p>Arguments passed to the underlying functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>summary</code> prints a summary of <code>object</code>, using the <span class="pkg">BMA</span> function <code><a href="BMA.html#topic+summary.bic.glm">summary.bic.glm</a></code>. It also prints a summary of the model specification, using <code><a href="#topic+summary.mnl.spec">summary.mnl.spec</a></code>.
</p>
<p><code>plot</code> produces a plot of the posterior distribution of the coefficients produced by model averaging. It uses the <span class="pkg">BMA</span> function <code><a href="BMA.html#topic+plot.bic.glm">plot.bic.glm</a></code>.
</p>
<p><code>imageplot.mlogit</code> creates an image of the selected models, using the <span class="pkg">BMA</span> function <code><a href="BMA.html#topic+imageplot.bma">imageplot.bma</a></code>.
</p>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bic.mlogit">bic.mlogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See example in bic.mlogit 
</code></pre>

<hr>
<h2 id='summary.mnl'>
Summary for Results of a Multinomial Logit Estimation
</h2><span id='topic+summary.mnl'></span>

<h3>Description</h3>

<p>Gives a summary for an object of class <code><a href="#topic+mnl">mnl</a></code> which contains results of a multinomial logit estimation. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mnl'
 summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.mnl_+3A_object">object</code></td>
<td>
<p>Object of class <code><a href="#topic+mnl">mnl</a></code></p>
</td></tr>
<tr><td><code id="summary.mnl_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>

<hr>
<h2 id='summary.mnl.spec'>
Summary for a Specification Object
</h2><span id='topic+summary.mnl.spec'></span>

<h3>Description</h3>

<p>Prints summary for a specification object of a multinomial logit model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mnl.spec'
 summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.mnl.spec_+3A_object">object</code></td>
<td>
<p>Object of class <code><a href="#topic+mnl.spec">mnl.spec</a></code>.</p>
</td></tr>
<tr><td><code id="summary.mnl.spec_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mnl.spec">mnl.spec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(heating)
spec &lt;- mnl.spec(depvar ~ ic | oc, heating, varying=3:12, sep='')
summary(spec)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
