<!DOCTYPE html><html lang="en"><head><title>Help for package easySimData</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {easySimData}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#configureTrial'><p>Convert calls into quantile functions</p></a></li>
<li><a href='#df'><p>Example data from <code>simdata</code> package</p></a></li>
<li><a href='#plot.easySimData'><p>Plot data generated by the <code>easySimData</code> package.</p></a></li>
<li><a href='#simulateTrialData'><p>Generate simulation endpoint data for an arm in a trial.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Wrapper of 'simdata' Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Han Zhang &lt;zhangh.ustc@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulating data according to marginal distributions and 
    pairwise correlation. This is a wrapper for the 'simdata' package to make it 
    easier to use. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, gridExtra, simdata, stringr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-12 01:32:19 UTC; zhangha3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Author:</td>
<td>person) [aut] ("aut", "cre"),
  Han Zhang [cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-16 16:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='configureTrial'>Convert calls into quantile functions</h2><span id='topic+configureTrial'></span>

<h3>Description</h3>

<p>Calls come from ... in <code>simulateTrialData</code>. For individual level data,
empirical quantile will be generated using <code>simdata::quantile_functions_from_data</code>.
For calls specifying common distribution families and their parameters in plain text,
quantile functions will be generated by quantile functions in <code>stats</code>, e.g.,
qnorm, qunif, etc. For calls of user-customized quantile functions, it returns
those directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>configureTrial(..., var_prefix)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="configureTrial_+3A_...">...</code></td>
<td>
<p>calls describing the marginal distributions of endpoints. See <code>...</code>
in <code>simulateTrialData</code>.</p>
</td></tr>
<tr><td><code id="configureTrial_+3A_var_prefix">var_prefix</code></td>
<td>
<p>prefix to name variables that users do not give to those.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of quantile functions.
</p>

<hr>
<h2 id='df'>Example data from <code>simdata</code> package</h2><span id='topic+df'></span>

<h3>Description</h3>

<p>A data frame containing the variables as follows:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(df)
</code></pre>


<h3>Format</h3>

<p>A data frame with 4709 rows and 7 variables:
</p>

<dl>
<dt>Gender</dt><dd><p>Gender</p>
</dd>
<dt>Age</dt><dd><p>Age</p>
</dd>
<dt>Race</dt><dd><p>Race</p>
</dd>
<dt>Weight</dt><dd><p>Weight</p>
</dd>
<dt>BMI</dt><dd><p>BMI</p>
</dd>
<dt>BPsys</dt><dd><p>BPsys</p>
</dd>
<dt>BPdia</dt><dd><p>BPdia</p>
</dd>
</dl>



<h3>Source</h3>

<p>simdata R package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(df)
df

</code></pre>

<hr>
<h2 id='plot.easySimData'>Plot data generated by the <code>easySimData</code> package.</h2><span id='topic+plot.easySimData'></span>

<h3>Description</h3>

<p>Plot data generated by the <code>easySimData</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'easySimData'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.easySimData_+3A_x">x</code></td>
<td>
<p>an object of class <code>easySimData</code> returned by <code>simulateTrialData</code>.</p>
</td></tr>
<tr><td><code id="plot.easySimData_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object returned by <code>gridExtra::grid.arrange</code>, a grid of plots
comparing the simulated marginal distribution with the ones specified by
users.
</p>

<hr>
<h2 id='simulateTrialData'>Generate simulation endpoint data for an arm in a trial.</h2><span id='topic+simulateTrialData'></span>

<h3>Description</h3>

<p>Parameters of marginal distribution of endpoints and their target correlation
are specified. This function returns endpoint data of one arm. To generate
data of multiple arms, one need to call this function for each of the arms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateTrialData(
  ...,
  cor_matrix,
  trial_size = 100,
  arm_label = NULL,
  var_prefix = "easySimData"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulateTrialData_+3A_...">...</code></td>
<td>
<p>calls describing the marginal distributions of endpoints. They
can be data frames, e.g., <code>df</code>, or valid R expressions evaluated to be data
frames, e.g., <code>data.frame(x = runif(10), y = 1)</code>, <code>df %&gt;% filter(x &lt; 1)</code>,
<code>myFunctionReturnDataFrame()</code>, or simply any quantile functions (see the
<code>dist</code> argument of <code>simdata::simdesign_norta</code>).</p>
</td></tr>
<tr><td><code id="simulateTrialData_+3A_cor_matrix">cor_matrix</code></td>
<td>
<p>a target correlation matrix. See the <code>cor_target_final</code>
argument of <code>simdata::simdesign_norta</code>.</p>
</td></tr>
<tr><td><code id="simulateTrialData_+3A_trial_size">trial_size</code></td>
<td>
<p>size of an arm.</p>
</td></tr>
<tr><td><code id="simulateTrialData_+3A_arm_label">arm_label</code></td>
<td>
<p>a character to name the arm. When specified, a column <code>arm</code>
will be added to the end of the simulated data frame. NULL by default.</p>
</td></tr>
<tr><td><code id="simulateTrialData_+3A_var_prefix">var_prefix</code></td>
<td>
<p>a character as the prefix of endpoints specified by common
distributions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of endpoints.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

library(dplyr)
data(df)
head(df)

cmat &lt;- matrix(.5, 10, 10)
diag(cmat) &lt;- 1.

## the first argument should always be x if a user-defined quantile function
## is supplied. This is required by the `simdata` package.
user_qfun &lt;- function(x, shape1 = .6, shape2 = 1.2){
  qbeta(x, shape1 = shape1, shape2 = shape2)
}

data &lt;- simulateTrialData(
  df[, c('Gender', 'Age')] %&gt;% dplyr::filter(Age &lt; 50), # an expression with
                                                        # its value a data frame
  df %&gt;% dplyr::select(-c(Gender, Age, Race)), # same as above
  norm(mean = 0.2,sd = 1.2), # distribution name. Note that it is not a valid
                             # R function but a symbol.
  binom(prob =.4, size=1  ), # spaces are ignore, order does not matter
  norm(mean =-0.4, sd=0.9),  # same distribution with different parameters
  user_qfun,                 # user-defined quantile

  cor_matrix = cmat,
  trial_size = 1000,
  arm_label = 'placebo'
)

## for diagnosis
plot(data)
cor(data %&gt;% dplyr::select(-matches('arm')))

## Note that user_qfun is simply the quantile function of a beta distribution,
## so a preferred way to use easySimData is as follow
data &lt;- simulateTrialData(
  df[, c('Gender', 'Age')] %&gt;% dplyr::filter(Age &lt; 50), # an expression with
                                                        # its value a data frame
  df %&gt;% dplyr::select(-c(Gender, Age, Race)), # same as above
  norm(mean = 0.2,sd = 1.2), # distribution name. Note that it is not a valid
                             # R function but a symbol.
  binom(prob =.4, size=1  ), # spaces are ignored, order does not matter
  norm(mean =-0.4, sd=0.9),  # same distribution with different parameters
  beta(shape1 = .5, shape2 = 1.2), # distribution name

  cor_matrix = cmat,
  trial_size = 1000,
  arm_label = 'placebo'
)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
