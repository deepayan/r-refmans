<!DOCTYPE html><html lang="en"><head><title>Help for package rimu</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rimu}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.mr'>
<p>Construct multiple-response objects</p></a></li>
<li><a href='#as.ms'>
<p>Construct scored or ranked multiple-response objects</p></a></li>
<li><a href='#as.vmr'>
<p>Tidyversatile multiple-response objects</p></a></li>
<li><a href='#birds'>
<p>Subset of the Great Backyard Bird survey</p></a></li>
<li><a href='#ethnicity'>
<p>Toy example using New Zealand level 1 ethnicity values</p></a></li>
<li><a href='#mr_count'>
<p>Utility functions for multiple-response objects</p></a></li>
<li><a href='#mr_flatten'>
<p>Flatten a multiple-response object into a factor</p></a></li>
<li><a href='#mr_inorder'>
<p>Reorder levels of multiple-response objects</p></a></li>
<li><a href='#mr_lump'>
<p>Collapse common or rare levels</p></a></li>
<li><a href='#mr_recode'>
<p>Relabel levels of multiple-response objects</p></a></li>
<li><a href='#mr_stack'>
<p>Pivot a multiple-response object to long form</p></a></li>
<li><a href='#mr_union'>
<p>Set operations on multiple-response objects</p></a></li>
<li><a href='#mrequal'>
<p>Check if a level or levels is present</p></a></li>
<li><a href='#ms_flatten'>
<p>Flatten a scored multiple-response object into a factor</p></a></li>
<li><a href='#mtable'>
<p>Tables involving multiple-response objects</p></a></li>
<li><a href='#nzbirds'>
<p>Toy example using New Zealand birds</p></a></li>
<li><a href='#plot.mr'>
<p>Plot multiple-response objects</p></a></li>
<li><a href='#rstudiosurvey'>
<p>Subset of RStudio 2019 Community Survey</p></a></li>
<li><a href='#usethnicity'>
<p>Data from Youth Risk Behaviour Survey</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Responses in Multiplex</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for manipulating, exploring, and visualising  multiple-response data, including scored or ranked responses. Conversions to and from factors, lists, strings, matrices; reordering, lumping, flattening; set operations; tables; frequency and co-occurrence plots.</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, UpSetR, ggplot2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, vctrs, pillar</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Lumley &lt;t.lumley@auckland.ac.nz&gt;</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-05 23:52:20 UTC; tlum005</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Lumley [aut, cre],
  Annie Cohen [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-06 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.mr'>
Construct multiple-response objects
</h2><span id='topic+as.mr'></span><span id='topic+as.mr.logical'></span><span id='topic+as.mr.data.frame'></span><span id='topic+as.mr.list'></span><span id='topic+as.mr.ms'></span><span id='topic+as.mr.factor'></span><span id='topic+as.mr.character'></span><span id='topic+as.mr.default'></span>

<h3>Description</h3>

<p>Constructs <code>mr</code> objects representing multiple-choice questions where more than one choice is allowed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.mr(x, ...)
## S3 method for class 'logical'
as.mr(x,name,...)
## S3 method for class 'list'
as.mr(x, sort.levels=TRUE,...,levels=NULL)
## S3 method for class 'factor'
as.mr(x, sort.levels=FALSE,...)
## S3 method for class 'data.frame'
as.mr(x, sort.levels=FALSE,...,na.rm=TRUE)
## S3 method for class 'character'
as.mr(x, sep=", ", sort.levels=TRUE,..., levels=NULL)
## Default S3 method:
as.mr(x, sort.levels=TRUE, levels=unique(x),...)
## S3 method for class 'ms'
as.mr(x,...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.mr_+3A_x">x</code></td>
<td>

<p>Object to be converted to class <code>mr</code>
</p>
</td></tr>
<tr><td><code id="as.mr_+3A_...">...</code></td>
<td>

<p>for compatibility; not used
</p>
</td></tr>
<tr><td><code id="as.mr_+3A_sort.levels">sort.levels</code></td>
<td>
<p>put the levels of the <code>mr</code> object in
increasing sort order. Defaults to <code>TRUE</code> except when there
already is a natural order</p>
</td></tr>
<tr><td><code id="as.mr_+3A_levels">levels</code></td>
<td>
<p>optional character vector of the permitted levels</p>
</td></tr>
<tr><td><code id="as.mr_+3A_name">name</code></td>
<td>
<p>level name (for a vector) or vector of level names to
replace the column names (for a matrix)</p>
</td></tr>
<tr><td><code id="as.mr_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>TRUE</code>, replace <code>NA</code> in the input by <code>FALSE</code></p>
</td></tr>
<tr><td><code id="as.mr_+3A_sep">sep</code></td>
<td>
<p>Regular expression for splitting the string</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The internal representation of <code>mr</code> objects is as a logical matrix
with the levels as column names.
</p>
<p>The method for logical <code>x</code> coerces a single vector to a one-column
matrix, and then applies the <code>name</code> argument as the column
name. Given a matrix, the <code>name</code> argument is optional and replaces
the existing column names
</p>
<p>The method for list <code>x</code> takes a list of character vectors that
represent the levels present for one observation. The method for strings splits the string at the supplied separator and then uses the list method.
</p>
<p>The method for factor <code>x</code> produces an <code>mr</code> object with the
factor levels as levels. Each observation will have only one value.
</p>
<p>The <code>data.frame</code> object works for logical or numeric columns of a
data frame. Zero or negative values are treated as 'not present',
positive values as 'present'. Optionally, <code>NA</code> values are coded as
'not present', which is useful when the data frame was created by
<code>reshape</code> or <code>dplyr::spread</code>.
</p>
<p>The method for <code>ms</code> objects simply drops the score/rank information
</p>


<h3>Value</h3>

<p>Object of class <code>mr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
nzbirds_list&lt;-list(c("kea","tui"), c("kea","ruru","kaki"), c("ruru"),
c("tui","ruru"), c("tui","kea","ruru"), c("tauhou","kea"))
nzbirds_list
as.mr(nzbirds_list)
as.mr(c("kea, tui","kea, ruru, kaki","ruru","tui, ruru"))

data(nzbirds)
nzbirds
as.mr(nzbirds)

data(ethnicity)
ethnicity
as.logical(ethnicity)
as.mr(as.logical(ethnicity))


</code></pre>

<hr>
<h2 id='as.ms'>
Construct scored or ranked multiple-response objects
</h2><span id='topic+as.ms'></span><span id='topic+as.ms.list'></span><span id='topic+as.ms.matrix'></span><span id='topic+as.ms.data.frame'></span><span id='topic+as.ms.mr'></span><span id='topic+as.ms.character'></span>

<h3>Description</h3>

<p>The internal representation is as a numeric matrix with 0 when a level is not present and the non-zero rank or score when it is present. The data.frame and matrix methods uses the numeric values of <code>x</code>, and by default set <code>NA</code> values to 'not present'.  The list method takes a list with a character vector for each observation and uses the position in the list as the rank/score. The character method splits the string at the separators to give a list and uses the list method.
The <code>mr</code> method uses a score of 1 whenever the level is present.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ms(x, ...)
## S3 method for class 'list'
as.ms(x,...,levels=NULL)
## S3 method for class 'data.frame'
as.ms(x,...,na.rm=TRUE)
## S3 method for class 'matrix'
as.ms(x,...,na.rm=TRUE)
## S3 method for class 'mr'
as.ms(x,...)
## S3 method for class 'character'
as.ms(x,sep=", ", ...,levels=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.ms_+3A_x">x</code></td>
<td>

<p>object to be converted
</p>
</td></tr>
<tr><td><code id="as.ms_+3A_...">...</code></td>
<td>

<p>for compatibility; not used.
</p>
</td></tr>
<tr><td><code id="as.ms_+3A_levels">levels</code></td>
<td>
<p>Optional character vector giving the permitted levels</p>
</td></tr>
<tr><td><code id="as.ms_+3A_na.rm">na.rm</code></td>
<td>
<p>Convert <code>NA</code> values to 'not present', ie, 0</p>
</td></tr>
<tr><td><code id="as.ms_+3A_sep">sep</code></td>
<td>
<p>Regular expression for splitting the character string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>ms</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
nzbirds_list&lt;-list(c("kea","tui"), c("kea","ruru","kaki"), c("ruru"),
c("tui","ruru"), c("tui","kea","ruru"), c("tauhou","kea"))
nzbirds_list
(msbirds&lt;-as.ms(nzbirds_list))

(bird_mat &lt;- unclass(msbirds))
as.ms(bird_mat)

</code></pre>

<hr>
<h2 id='as.vmr'>
Tidyversatile multiple-response objects
</h2><span id='topic+as.vmr'></span><span id='topic+new_vmr'></span>

<h3>Description</h3>

<p>The <code>vmr</code> class wraps the <code>mr</code> class using the <code>vctrs</code> package, for compatibility with tidyverse <code>tbl_df</code> objects (tibbles). 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.vmr(x, ...)
new_vmr(x, levels = unique(do.call(c, x))) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.vmr_+3A_x">x</code></td>
<td>

<p>For <code>as.vmr</code>, an <code>mr</code> object or anything coercible to one. For <code>new_vmr</code>, a list of character vectors
</p>
</td></tr>
<tr><td><code id="as.vmr_+3A_...">...</code></td>
<td>

<p>not used
</p>
</td></tr>
<tr><td><code id="as.vmr_+3A_levels">levels</code></td>
<td>
<p>the permitted levels for the object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These objects need the <code>vctrs</code> and <code>pillar</code> packages to work, and need the <code>tibble</code> package to be useful. 
</p>


<h3>Value</h3>

<p>An object of class <code>vmr</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as.mr">as.mr</a></code>
</p>
<p>The <code>internals</code> vignette for internal structure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("vctrs", quietly=TRUE)){
   data(nzbirds)
   nzbirds
   tidybirds&lt;-as.vmr(nzbirds, na.rm=TRUE)
   tidybirds
}

</code></pre>

<hr>
<h2 id='birds'>
Subset of the Great Backyard Bird survey
</h2><span id='topic+birds'></span>

<h3>Description</h3>

<p>Counts of observations for 12 bird species by US county and Canadian province in the Great Backyard Bird survey.  These birds were randomly sampled from the much larger number in the full data set. See the vignette for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("birds")</code></pre>


<h3>Format</h3>

<p>A data frame with 3046 observations on the following 13 variables.
</p>

<dl>
<dt>&lsquo;<span class="samp">&#8288;Phalaenoptilus nuttallii&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Fregata magnificens&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Melanerpes lewis&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Melospiza georgiana&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Rallus limicola&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Myioborus pictus&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Poecile gambeli&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Aythya collaris&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Xanthocephalus xanthocephalus&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Gracula religiosa&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Icterus parisorum&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Coccyzus erythropthalmus&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt><code>location</code></dt><dd><p>a character vector</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(birds)
birds&lt;-as.ms(birds[,1:12],na.rm=TRUE)
mtable(as.mr(birds))
</code></pre>

<hr>
<h2 id='ethnicity'>
Toy example using New Zealand level 1 ethnicity values</h2><span id='topic+ethnicity'></span>

<h3>Description</h3>

<p>The statistical standard for collecting ethnicity data requires that respondents can mark all that are applicable.  The level 1 values are &quot;Māori&quot;, &quot;Pacific Peoples&quot; (ie, Pacific Island ethnicities), &quot;Asian&quot;, &quot;European&quot;, and &quot;MELAA&quot; (Middle Eastern, Latin American, and African). This is artificial data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("ethnicity")</code></pre>


<h3>Format</h3>

<p>An object of class <code>mr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
ethnicity
</code></pre>

<hr>
<h2 id='mr_count'>
Utility functions for multiple-response objects
</h2><span id='topic+mr_count'></span><span id='topic+mr_na'></span><span id='topic+ms_na'></span><span id='topic+mr_drop'></span><span id='topic+ms_drop'></span>

<h3>Description</h3>

<p>These perform diverse useful tasks.  <code>mr_count</code>  counts the number of levels present for each individual. <code>mr_na</code> sets <code>NA</code> values to something else, <code>ms_na</code> sets them to 0 (ie, not present),
<code>mr_drop</code> and <code>ms_drop</code> drop some levels from the object. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_count(x, na.rm = TRUE)
mr_drop(x, levels,...)
ms_drop(x, levels)
mr_na(x, na=TRUE)
ms_na(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_count_+3A_x">x</code></td>
<td>

<p><code>mr</code>,  or <code>ms</code> object
</p>
</td></tr>
<tr><td><code id="mr_count_+3A_na.rm">na.rm</code></td>
<td>

<p>Remove <code>NA</code> first?
</p>
</td></tr>
<tr><td><code id="mr_count_+3A_levels">levels</code></td>
<td>
<p>character vector of levels to remove</p>
</td></tr>
<tr><td><code id="mr_count_+3A_na">na</code></td>
<td>
<p>Value (<code>TRUE/FALSE</code>) to set <code>NA</code> to</p>
</td></tr>
<tr><td><code id="mr_count_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector for <code>mr_count</code>, an object of class <code>mr</code>,  or <code>ms</code> for the other two functions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(usethnicity)
race&lt;-as.mr(strsplit(as.character(usethnicity$Q5),""))
mtable(race)
race&lt;-mr_drop(race,c(" ","F","G","H"))
mtable(race)

## to keep just specified levels use [
mtable(race[,c("A","D")])

## How many do people identify with
table(mr_count(race))

data(nzbirds)
seenbirds&lt;-as.mr(nzbirds&gt;0)
countbirds&lt;-mr_count(seenbirds)

## How many types of birds were seen
table(countbirds)

data(ethnicity)
ethnicity
mr_na(ethnicity, FALSE)

</code></pre>

<hr>
<h2 id='mr_flatten'>
Flatten a multiple-response object into a factor
</h2><span id='topic+mr_flatten'></span>

<h3>Description</h3>

<p>Convert a multiple-response object into a factor using a supplied ordering.  Each observation is assigned its first level in the ordering. That is, an observation that has <code>priorities[1]</code> as one of its levels is assigned that value. An observation that does not <code>priorities[1]</code> as one of its levels, but does have <code>priorities[2]</code> is assigned <code>priorities[2]</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_flatten(x, priorities, sort=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_flatten_+3A_x">x</code></td>
<td>

<p><code>mr</code>  object
</p>
</td></tr>
<tr><td><code id="mr_flatten_+3A_priorities">priorities</code></td>
<td>

<p>Character vector of levels.
</p>
</td></tr>
<tr><td><code id="mr_flatten_+3A_sort">sort</code></td>
<td>
<p>if <code>TRUE</code>, the levels of the output will be in the order of <code>priorities</code>, if <code>FALSE</code> they will be in the original order</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
ethnicity

## NZ 'prioritised ethnicity'
priority&lt;-c("Maori", "Pacific", "Asian", "European/Other")
eth &lt;- mr_na(mr_recode(ethnicity, `European/Other`="European", `European/Other` = "MELAA"), FALSE)

mr_flatten(eth, priority)
mr_flatten(eth, priority, sort=TRUE)

</code></pre>

<hr>
<h2 id='mr_inorder'>
Reorder levels of multiple-response objects
</h2><span id='topic+mr_inorder'></span><span id='topic+mr_infreq'></span><span id='topic+mr_inseq'></span><span id='topic+mr_reorder'></span><span id='topic+mean0'></span><span id='topic+ms_inorder'></span><span id='topic+ms_inseq'></span><span id='topic+ms_infreq'></span><span id='topic+ms_inscore'></span><span id='topic+ms_reorder'></span>

<h3>Description</h3>

<p><code>mr_inorder</code> and <code>ms_inorder</code> use the order in which the
levels first appear in the data (which is invariant to locale),<code>mr_inseq</code> and
<code>ms_inseq</code> sort alphabetically (for the current locale).  <code>mr_infreq</code> sorts by frequency, and <code>ms_inscore</code> applies a function to the values in each level &ndash; one such function is <code>mean0</code>, which takes the mean of non-zero values.  Finally, <code>ms_reorder</code> and <code>mr_reorder</code> use some function of a second variable computed on the observations where each level is present. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_inorder(x,...)
ms_inorder(x)
mr_inseq(x,...)
ms_inseq(x)
mr_infreq(x,na.rm=TRUE,...)
ms_infreq(x)
ms_inscore(x, fun=mean0)
mean0(y)
mr_reorder(x, v, fun=median,...)
ms_reorder(x, v, fun=median)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_inorder_+3A_x">x</code></td>
<td>

<p><code>mr</code>
</p>
</td></tr>
<tr><td><code id="mr_inorder_+3A_na.rm">na.rm</code></td>
<td>
<p>Remove <code>NA</code> values before computing frequencies (<code>NA</code>
sorts last)</p>
</td></tr>
<tr><td><code id="mr_inorder_+3A_v">v</code>, <code id="mr_inorder_+3A_fun">fun</code></td>
<td>
<p>Sort levels of <code>x</code> according to the values of
<code>fun(v)</code> for observations having each level</p>
</td></tr>
<tr><td><code id="mr_inorder_+3A_y">y</code></td>
<td>
<p>numeric vector</p>
</td></tr>
<tr><td><code id="mr_inorder_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>mr</code>
</p>


<h3>References</h3>

<p>These are based on the reordering functions for factors in the
<code>forcats</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
mr_infreq(ethnicity)
mr_inseq(ethnicity)

data(nzbirds)
mtable(nzbirds)
mtable(ms_inorder(nzbirds))
mtable(ms_inseq(nzbirds))
mtable(ms_inscore(nzbirds, mean0))

</code></pre>

<hr>
<h2 id='mr_lump'>
Collapse common or rare levels
</h2><span id='topic+mr_lump'></span>

<h3>Description</h3>

<p>Combine the least common or most common levels of a <code>mr</code> object into an &quot;other&quot; level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_lump(x, n, prop, other_level = "Other",
ties.method = c("min", "average", "first", "last", "random", "max"),...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_lump_+3A_x">x</code></td>
<td>

<p>Object of class <code>mr</code>
</p>
</td></tr>
<tr><td><code id="mr_lump_+3A_n">n</code></td>
<td>

<p>Positive integer to keep the most common <code>n</code> values, negative integer to keep the least common values.
</p>
</td></tr>
<tr><td><code id="mr_lump_+3A_prop">prop</code></td>
<td>

<p>Positive prop preserves values that appear at least prop of the time. Negative prop preserves values that appear at most -prop of the time.
</p>
</td></tr>
<tr><td><code id="mr_lump_+3A_other_level">other_level</code></td>
<td>

<p>Label for the lumped levels
</p>
</td></tr>
<tr><td><code id="mr_lump_+3A_ties.method">ties.method</code></td>
<td>

<p>How to handle ties. Passed to <code><a href="base.html#topic+rank">rank</a></code>
</p>
</td></tr>
<tr><td><code id="mr_lump_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>mr</code> 
</p>


<h3>References</h3>

<p>Based on <code>fct_lump</code> from the <code>forcats</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(ethnicity)
mtable(ethnicity)
mtable(mr_lump(ethnicity,2))
mtable(mr_lump(ethnicity,-2))

data(rstudiosurvey)
## Other software being used
other_software&lt;- as.mr(rstudiosurvey[[40]])
mtable(other_software)
## The top 20 responses
common&lt;-mr_lump(other_software, n=20)
mtable(common)
## 'None' isn't really another package
mtable(mr_drop(common,"None"))

## Packages with at least 20% use
mtable(mr_lump(other_software, prop=0.2))

</code></pre>

<hr>
<h2 id='mr_recode'>
Relabel levels of multiple-response objects
</h2><span id='topic+mr_recode'></span><span id='topic+ms_recode'></span>

<h3>Description</h3>

<p>Relabel some or all of the levels of a multiple-response object.  Two
levels that are recoded to the same value will be combined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_recode(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_recode_+3A_x">x</code></td>
<td>

<p>Object of class <code>mr</code> or <code>ms</code>
</p>
</td></tr>
<tr><td><code id="mr_recode_+3A_...">...</code></td>
<td>

<p>new names in the form <code>new_name="old name"</code>. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>New object of class  <code>mr</code>, <code>ms</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nzbirds)
nzbirds&lt;-as.mr(nzbirds)
nzbirds
## recode to English names
mr_recode(nzbirds,morepork="ruru",stilt="kaki",waxeye="tauhou")

data(usethnicity)
race&lt;-as.mr(usethnicity$Q5,"")
race&lt;-mr_drop(race,c(" ","F","G","H"))
race &lt;- mr_recode(race, AmIndian="A",Asian="B", Black="C", Pacific="D", White="E")
mtable(race)
</code></pre>

<hr>
<h2 id='mr_stack'>
Pivot a multiple-response object to long form
</h2><span id='topic+mr_stack'></span><span id='topic+ms_stack'></span>

<h3>Description</h3>

<p>Creates a data frame where every observation has as many rows as it has levels present, plus an id column to specify which rows go together.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_stack(x, ..., na.rm = FALSE)
ms_stack(x, ..., na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_stack_+3A_x">x</code></td>
<td>

<p>multiple response object
</p>
</td></tr>
<tr><td><code id="mr_stack_+3A_...">...</code></td>
<td>

<p>other multiple response objects
</p>
</td></tr>
<tr><td><code id="mr_stack_+3A_na.rm">na.rm</code></td>
<td>

<p>drop <code>NA</code> values?
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with columns <code>values</code> and <code>id</code>, plus a column <code>scores</code> if <code>x</code> is a  <code>ms</code> object. When more than one object is supplied, the result is an outer join of the two indindividual results, so it contains a row for every combination of an observed value from each object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
ethnicity
mr_stack(ethnicity)

data(nzbirds)
nzbirds
ms_stack(nzbirds)

## not actually a sensible use
d &lt;- mr_stack(ethnicity, nzbirds)
head(d)
with(d, table(ethnicity, nzbirds))
## equivalent, but more efficient
mtable(mr_na(ethnicity), mr_na(nzbirds))

</code></pre>

<hr>
<h2 id='mr_union'>
Set operations on multiple-response objects
</h2><span id='topic+mr_union'></span><span id='topic+mr_intersect'></span><span id='topic+mr_diff'></span>

<h3>Description</h3>

<p>These functions take union, intersection, and difference of two multiple-response objects.  An observation has a level in the union if it has that level in either input. It has the level in the intersection if it has the level in both inputs. It has the level in the difference if it has the level in <code>x</code> and not in <code>y</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mr_union(x, y,...)
mr_intersect(x, y,...)
mr_diff(x, y,...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mr_union_+3A_x">x</code>, <code id="mr_union_+3A_y">y</code></td>
<td>
<p>Objects of class <code>mr</code></p>
</td></tr>
<tr><td><code id="mr_union_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>mr</code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(usethnicity)
race&lt;-as.mr(usethnicity$Q5,"")
race&lt;-mr_drop(race,c(" ","F","G","H"))
race &lt;- mr_recode(race, AmIndian="A",Asian="B", Black="C", Pacific="D", White="E")
mtable(race)

hispanic&lt;-as.mr(usethnicity$Q4==1, "Hispanic")
ethnicity&lt;-mr_union(race, hispanic)
mtable(ethnicity)
ethnicity[101:120]


</code></pre>

<hr>
<h2 id='mrequal'>
Check if a level or levels is present
</h2><span id='topic++25has+25'></span><span id='topic++25hasonly+25'></span><span id='topic++25hasall+25'></span><span id='topic++25hasany+25'></span><span id='topic+mrequal'></span>

<h3>Description</h3>

<p>Returns vector of <code>TRUE</code> or <code>FALSE</code> according to whether <code>y</code> is onle of the levels present for that row or is the only level present for that row.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %has% y
x %hasonly% y
x %hasall% ys
x %hasany% ys

</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mrequal_+3A_x">x</code></td>
<td>

<p><code>mr</code>  object
</p>
</td></tr>
<tr><td><code id="mrequal_+3A_y">y</code></td>
<td>

<p>character vector specifying a level
</p>
</td></tr>
<tr><td><code id="mrequal_+3A_ys">ys</code></td>
<td>

<p>character vector specifying one or more levels
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)

ethnicity
ethnicity %has% "Maori"
ethnicity %hasonly% "Maori"

data(nzbirds)
as.mr(nzbirds) 
as.mr(nzbirds) 
</code></pre>

<hr>
<h2 id='ms_flatten'>
Flatten a scored multiple-response object into a factor
</h2><span id='topic+ms_flatten'></span>

<h3>Description</h3>

<p>Convert a multiple-response object into a named numeric vector using a supplied ordering. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_flatten(x, priorities, fun, start=0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ms_flatten_+3A_x">x</code></td>
<td>

<p><code>mr</code> object
</p>
</td></tr>
<tr><td><code id="ms_flatten_+3A_priorities">priorities</code></td>
<td>

<p>Character vector of levels.
</p>
</td></tr>
<tr><td><code id="ms_flatten_+3A_fun">fun</code></td>
<td>
<p>Function for reducing two values to one. </p>
</td></tr>
<tr><td><code id="ms_flatten_+3A_start">start</code></td>
<td>
<p>starting value for <code>fun</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each observation is initially assigned the value <code>start</code>.  Starting with the lowest-priority level, the current value is combined with the new value as <code>fun(new, current)</code>. Using <code>fun=function(x,y) x</code> would return the value for the highest-priority level present; using <code>fun=pmax</code> would return the highest score for any level present; using <code>fun="+"</code> would return the sum of the scores.  
</p>


<h3>Value</h3>

<p>A factor
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
ethnicity

## NZ 'prioritised ethnicity'
eth &lt;- mr_recode(ethnicity, `European/Other`="European", `European/Other` = "MELAA")
mr_flatten(ethnicity, c("Maori","Pacific","Asian","European/Other"))

data(nzbirds)
## hardest to see first
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),"+")
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),
  fun=function(x,y) x)
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),pmin,start=Inf)
</code></pre>

<hr>
<h2 id='mtable'>
Tables involving multiple-response objects
</h2><span id='topic+mtable'></span>

<h3>Description</h3>

<p>Creates one-way and two-way tables using every level of a multiple response object. Use <code>table(as.character(x))</code> to tabulate combinations of levels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mtable(x, y, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mtable_+3A_x">x</code></td>
<td>

<p><code>mr</code>  object or a factor
</p>
</td></tr>
<tr><td><code id="mtable_+3A_y">y</code></td>
<td>

<p><code>mr</code>  object or a factor
</p>
</td></tr>
<tr><td><code id="mtable_+3A_na.rm">na.rm</code></td>
<td>

<p>remove missing values?
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 1-d or 2-d array with names giving the levels
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ethnicity)
mtable(ethnicity)
table(as.character(ethnicity))

data(nzbirds)
nzbirds&lt;-as.mr(nzbirds)

## co-occurence table
mtable(nzbirds, nzbirds)

## table by a factor
v&lt;-rep(c("A","B"),3)
mtable(nzbirds,v)

data(nzbirds)
mtable(nzbirds&gt;0)

</code></pre>

<hr>
<h2 id='nzbirds'>
Toy example using New Zealand birds
</h2><span id='topic+nzbirds'></span>

<h3>Description</h3>

<p>A small artifical dataset that could be produced by asking people to name New Zealand birds. Each observation has scores from 1 (first bird named) to at most 4 (fourth bird named). 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("nzbirds")</code></pre>


<h3>Format</h3>

<p>A <code>ms</code> object with 6 observations on the following 5 variables.
</p>

<dl>
<dt><code>kea</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ruru</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>tui</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>tauhou</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>kaki</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(nzbirds)
nzbirds
as.mr(nzbirds)
</code></pre>

<hr>
<h2 id='plot.mr'>
Plot multiple-response objects
</h2><span id='topic+plot.mr'></span><span id='topic+image.mr'></span>

<h3>Description</h3>

<p>The plot method for <code>mr</code> objects is an UpSet plot, showing co-occurences of the various categories.  The <code>image</code> method is a heatmap of the variable plotted against itself with <code><a href="#topic+mtable">mtable</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mr'
plot(x, ...)
## S3 method for class 'mr'
image(x, type = c("overlap", "conditional", "association",  "raw"), ...) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.mr_+3A_x">x</code></td>
<td>

<p><code>mr</code> object
</p>
</td></tr>
<tr><td><code id="plot.mr_+3A_type">type</code></td>
<td>
<p><code>"overlap"</code> is a plot of counts, <code>"conditional"</code> is of column proportions, <code>"association"</code> has rows and columns scaled to give unit diagonals. <code>"raw"</code> just plots <code>as.logical(x)</code>.</p>
</td></tr>
<tr><td><code id="plot.mr_+3A_...">...</code></td>
<td>

<p>Not used
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for its side effect
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as.mr">as.mr</a></code>, <code><a href="#topic+mtable">mtable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rstudiosurvey)
other_software&lt;- as.mr(rstudiosurvey[[40]])
## only those with at least 20 responses
common&lt;-mr_lump(other_software, n=20)
common&lt;-mr_drop(common, "None")

## UpSet plot
plot(common)

## images

image(common, type="conditional")
image(common, type="association")
</code></pre>

<hr>
<h2 id='rstudiosurvey'>
Subset of RStudio 2019 Community Survey
</h2><span id='topic+rstudiosurvey'></span>

<h3>Description</h3>

<p>The 'rstudiosurvey' data set contains 1838 rows of responses from the 2019 RStudio Community Survey, where columns are the 51 questions and a column for the timestamp. The variable names are the full questions. Multiple responses are separated by a comma and space. Non-ASCII characters have been converted with the &quot;ASCII//TRANSLIT&quot; option of <code><a href="base.html#topic+iconv">iconv</a></code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("rstudiosurvey")</code></pre>


<h3>Format</h3>

<p>A data frame with 1838 observations on the following 52 variables.
</p>

<dl>
<dt><code>Timestamp</code></dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How would you rate your level of experience using R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Compared with other technical topics you've learned in school and on the job, on a scale of 1 to 5, how difficult do you expect learning R to be?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;From what you know about R, how long do you expect that it will take for you to learn enough to use R productively?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How do you think you would go about the process of learning R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which statement most closely reflects the primary reason why you are interested in learning R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;If you were to learn R, what would do you think you would use it for? (check all that apply)&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which analytical tools do you use today for the functions that you might learn R for? (please check all that apply)&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What do you think is the biggest obstacle you must overcome in trying to learn R? The choices below are only suggestions; if we haven't listed your obstacle, please choose "Other" and add your obstacle in the text. &#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What year did you first start learning R?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How did you learn R? If you used multiple methods, please select the one you used the most.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Compared with other technical topics you've learned in school and on the job, on a scale of 1 to 5, how difficult has it been for you to learn R?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Roughly how long did it take you to achieve proficiency in R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which statement most closely reflects the primary reason why you learned R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What do you think was the biggest obstacle you had to overcome in learning R? The choices below are only suggestions; if we haven't listed your obstacle, please choose "Other" and add your obstacle in the text. &#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How often do you use R today, either for professional or personal projects?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What applications do you use R for most? (check all that apply)&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Please rate how much you enjoy using R on a scale of 1 to 5, where 1 is you don't enjoy it at all, and 5 is that you enjoy it a great deal.&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How likely are you to recommend R to a colleague, friend, or family member?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which tools do you use with your R applications? (please check all that apply)&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Did you use tidyverse packages such as ggplot2 or dplyr to learn R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Do you use tidyverse packages when you use R now?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What do you like best about using R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What do you like least about using R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;When you have problems in R, where do you go for help?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How do you discover new packages or packages that are unfamiliar to you?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How do you share the results that you create in R? Check all that apply.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Looking ahead, how do you expect your use of R to change in 2020?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;To help us ensure that you are not a robot, please enter the number of characters in the word "analysis" in the text box below. Please type your answer as a word; for example if you want 3 to be your answer, type "three".&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Do you currently use R Markdown? Choose the statement that most closely matches your use.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What applications do you use R Markdown for? Check all that apply.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Looking forward, how do you expect your use of R Markdown to change in 2020?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How often do you currently use Shiny? Choose the statement that most closely matches your use.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Looking forward, how do you expect your use of Shiny to change in 2020?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Do you currently use Python? Choose the statement that most closely matches your use.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What applications do you use Python for most? (check all that apply)&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Please rate how much you enjoy using Python on a scale of 1 to 5, where 1 is you don't enjoy it at all, and 5 is that you enjoy it a great deal.&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How likely are you to recommend Python to a colleague, friend, or family member?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Looking forward, how do you expect your use of Python to change in 2020?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What computer tools and/or languages have you used besides R?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What was the FIRST computer language or tool that you learned?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What year were you born?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What gender do you identify with?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;I identify my ethnicity as (select all that apply):&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What is the highest degree or level of school you have completed? If currently enrolled, please use the highest degree received.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;In what country do you currently reside?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What industry do you work or participate in?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;What is your job title, if any?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which category best describes the work you do?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How many people in your organization or work group do you feel that you can ask for help or support when working with R?&#8288;</span>&rsquo;</dt><dd><p>a numeric vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;Which of the following events have you attended, if any? Check all that apply.&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
<dt>&lsquo;<span class="samp">&#8288;How did you hear about this survey?&#8288;</span>&rsquo;</dt><dd><p>a character vector</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://github.com/rstudio/r-community-survey/tree/master/2019">https://github.com/rstudio/r-community-survey/tree/master/2019</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rstudiosurvey)
names(rstudiosurvey)[40]
## Other software being used
other_software&lt;- as.mr(rstudiosurvey[[40]])
mtable(other_software)
## top 20 responses
common&lt;-mr_lump(other_software, n=20)
mtable(common)
## 'None' isn't really another package
common&lt;-mr_drop(common, "None")
mtable(common)

## UpSet plot
plot(common)

## Excel users filled in the survey later 
timestamp&lt;-as.Date(rstudiosurvey[[1]],format="%m/%d/%y")
boxplot(timestamp~I(common %has% "Excel"))



## names in order of popularity
t&lt;-mtable(common)
popular&lt;-colnames(t)[order(t,decreasing=TRUE)]
## most popular package for each user
cuml_users &lt;- mr_flatten(common, popular, sort=TRUE)
class(cuml_users)
table(cuml_users)

## two-way tables
## people who also use Stata or Julia are less happy with R than those who don't
names(rstudiosurvey)[18]
happy&lt;-factor(rstudiosurvey[[18]])
mtable(happy, common)
round(prop.table(mtable(happy,common),2),2)

## mr objects can be dataframe columns, or expanded to individual levels
df&lt;-data.frame(timestamp, happy, common)
dim(df)
head(df)
df_raw&lt;-data.frame(timestamp, happy, as.matrix(common))
dim(df_raw)
head(df_raw)




</code></pre>

<hr>
<h2 id='usethnicity'>
Data from Youth Risk Behaviour Survey
</h2><span id='topic+usethnicity'></span>

<h3>Description</h3>

<p>This data set contains variables on race and ethnic identification from the 2017 Youth Risk Behaviour Survey, together with two variables on smoking behaviour.  The YRBS is a multistage cluster-sampled survey, so valid inference about associations requires using survey design information. This subset is useful only for demonstration purposes. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("usethnicity")</code></pre>


<h3>Format</h3>

<p>A data frame with 14765 observations on the following 4 variables.
</p>

<dl>
<dt><code>Q4</code></dt><dd><p>1 is &quot;Hispanic or Latino</p>
</dd>
<dt><code>Q5</code></dt><dd><p>Character string with zero or more of: A. American Indian or Alaska Native, B. Asian, C. Black or African American, D. Native Hawaiian or Other Pacific Islander, E. White</p>
</dd>
<dt><code>QN30</code></dt><dd><p>1 is &quot;smoked cigarettes on one or more of the past 30 days&quot;</p>
</dd>
<dt><code>QN31</code></dt><dd><p>1 is &quot;smoked more than 10 cigarettes per day on the days they smoked during the past 30 days&quot;, those who did not smoke at all are <code>NA</code></p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/healthyyouth/data/yrbs/data.htm">https://www.cdc.gov/healthyyouth/data/yrbs/data.htm</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(usethnicity)
race&lt;-as.mr(strsplit(as.character(usethnicity$Q5),""))
race&lt;-mr_drop(race," ")
mtable(race)
hispanic&lt;-as.mr(usethnicity$Q4==1,"Hispanic")
ethnicity&lt;-mr_union(race,hispanic)
ethnicity[101:120]
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
