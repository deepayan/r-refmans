<!DOCTYPE html><html><head><title>Help for package formulaic</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {formulaic}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add.backtick'><p>Add backtick</p></a></li>
<li><a href='#create.formula'><p>Create Formula</p></a></li>
<li><a href='#reduce.existing.formula'><p>Reduce Existing Formula</p></a></li>
<li><a href='#snack.dat'><p>Simulated Marketing Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Dynamic Generation and Quality Checks of Formula Objects</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.8</td>
</tr>
<tr>
<td>Description:</td>
<td>Many statistical models and analyses in R are implemented through formula objects. The formulaic package creates a unified approach for programmatically and dynamically generating formula objects. Users may specify the outcome and inputs of a model directly, search for variables to include based upon naming patterns, incorporate interactions, and identify variables to exclude. A wide range of quality checks are implemented to identify issues such as misspecified variables, duplication, a lack of contrast in the inputs, and a large number of levels in categorical data.  Variables that do not meet these quality checks can be automatically excluded from the model.  These issues are documented and reported in a manner that provides greater accountability and useful information to guide an investigation of the data.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dachosen1.github.io/formulaic/index.html">https://dachosen1.github.io/formulaic/index.html</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dachosen1/formulaic/issues">https://github.com/dachosen1/formulaic/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 2.1.0), covr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-15 20:30:49 UTC; ander</td>
</tr>
<tr>
<td>Author:</td>
<td>David Shilane [aut],
  Anderson Nelson [aut, ctb, cre],
  Caffrey Lee [aut, ctb],
  Zichen Huang [aut, ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anderson Nelson &lt;an2908@columbia.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-15 21:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add.backtick'>Add backtick</h2><span id='topic+add.backtick'></span>

<h3>Description</h3>

<p>Function that add backticks to the input variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.backtick(x, include.backtick = "as.needed", dat = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add.backtick_+3A_x">x</code></td>
<td>
<p>Character value specifying the name of input parameters.</p>
</td></tr>
<tr><td><code id="add.backtick_+3A_include.backtick">include.backtick</code></td>
<td>
<p>specifies whether a backtick should be added. Parameter values should be either 'all' or 'as.needed'</p>
</td></tr>
<tr><td><code id="add.backtick_+3A_dat">dat</code></td>
<td>
<p>Data</p>
</td></tr>
</table>

<hr>
<h2 id='create.formula'>Create Formula</h2><span id='topic+create.formula'></span>

<h3>Description</h3>

<p>Create formula is a tool to automatically create a formula object from a provided variable and output names. Reduces the time required to manually input variables for modeling. Output can be used in linear regression, random forest, neural network etc. Create formula becomes useful when modeling data with multiple features. Reduces the time required for modeling and implementation :
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create.formula(
  outcome.name,
  input.names = NULL,
  input.patterns = NULL,
  dat = NULL,
  interactions = NULL,
  force.main.effects = TRUE,
  reduce = FALSE,
  max.input.categories = 20,
  max.outcome.categories.to.search = 4,
  order.as = "as.specified",
  include.backtick = "as.needed",
  format.as = "formula",
  variables.to.exclude = NULL,
  include.intercept = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create.formula_+3A_outcome.name">outcome.name</code></td>
<td>
<p>A character value specifying the name of the formula's outcome variable. In this version, only a single outcome may be ed. The first entry of outcome.name will be used to build the formula.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_input.names">input.names</code></td>
<td>
<p>The names of the variables with the full names delineated. User can specify '.' or 'all' to e all the column variables.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_input.patterns">input.patterns</code></td>
<td>
<p>es additional input variables. The user may enter patterns &ndash; e.g. to e every variable with a name that es the pattern. Multiple patterns may be ed as a character vector. However, each pattern may not contain spaces and is otherwise subject to the same limits on patterns as used in the grep function.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_dat">dat</code></td>
<td>
<p>User can specify a data.frame object that will be used to remove any variables that are not listed in names(dat. As default it is set as NULL. In this case, the formula is created simply from the outcome.name and input.names.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_interactions">interactions</code></td>
<td>
<p>A list of character vectors. Each character vector es the names of the variables that form a single interaction. Specifying interactions = list(c(&quot;x&quot;, &quot;y&quot;), c(&quot;x&quot;, &quot;z&quot;), c(&quot;y&quot;, &quot;z&quot;), c(&quot;x&quot;, &quot;y&quot;, &quot;z&quot;)) would lead to the interactions x*y + x*z + y*z + x*y*z.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_force.main.effects">force.main.effects</code></td>
<td>
<p>This is a logical value. When TRUE, the intent is that any term ed as an interaction (of multiple variables) must also be listed individually as a main effect.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_reduce">reduce</code></td>
<td>
<p>A logical value. When dat is not NULL and reduce is TRUE, additional quality checks are performed to examine the input variables. Any input variables that exhibit a lack of contrast will be excluded from the model. This search is global by default but may be conducted separately in subsets of the outcome variables by specifying max.outcome.categories.to.search. Additionally, any input variables that exhibit too many contrasts, as defined by max.input.categories, will also be excluded.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_max.input.categories">max.input.categories</code></td>
<td>
<p>Limits the maximum number of variables that will be employed in the formula. As default it is set at 20, but users can still change at his/her convenience.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_max.outcome.categories.to.search">max.outcome.categories.to.search</code></td>
<td>
<p>A numeric value. The create.formula function es a feature that identifies input variables exhibiting a lack of contrast. When reduce = TRUE, these variables are automatically excluded from the resulting formula. This search may be expanded to subsets of the outcome when the number of unique measured values of the outcome is no greater than max.outcome.categories.to.search. In this case, each subset of the outcome will be separately examined, and any inputs that exhibit a lack of contrast within at least one subset will be excluded.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_order.as">order.as</code></td>
<td>
<p>User can specify the order the input variables in the formula in a variety of ways for patterns: increasing for increasing alphabet order, decreasing for decreasing alphabet order, column.order for as they appear in data, and as.specified for maintaining the user's specified order.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_include.backtick">include.backtick</code></td>
<td>
<p>Add backticks if needed. As default it is set as 'as.needed', which add backticks when only it is needed. The other option is 'all'. The use of include.backtick = &quot;all&quot; is limited to cases in which the output is generated as a character variable. When the output is generated as a formula object, then R automatically removes all unnecessary backticks. That is, it is only compatible when format.as != formula.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_format.as">format.as</code></td>
<td>
<p>The data type of the output. If not set as &quot;formula&quot;, then a character vector will be returned.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_variables.to.exclude">variables.to.exclude</code></td>
<td>
<p>A character vector. Any variable specified in variables.to.exclude will be dropped from the formula, both in the individual inputs and in any associated interactions. This step supersedes the inclusion of any variables specified for inclusion in the other parameters.</p>
</td></tr>
<tr><td><code id="create.formula_+3A_include.intercept">include.intercept</code></td>
<td>
<p>A logical value. When FALSE, the intercept will be removed from the formula.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Return as the data type of the output.  If not set as &quot;formula&quot;, then a character vector will be returned.
The input.names and names of variables matching the input.patterns will be concatenated to form the full list of input variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> n &lt;- 10
 dd &lt;- data.table::data.table(w = rnorm(n= n), x = rnorm(n = n), pixel_1 = rnorm(n = n))
 dd[, pixel_2 := 0.3 * pixel_1 + rnorm(n)]
 dd[, y := 5 * x + 3 * pixel_1 + 2 * pixel_2 + rnorm(n)]

 create.formula(outcome.name = "y", input.names = "x", input.patterns = c("pi", "xel"), dat = dd)
</code></pre>

<hr>
<h2 id='reduce.existing.formula'>Reduce Existing Formula</h2><span id='topic+reduce.existing.formula'></span>

<h3>Description</h3>

<p>The reduce.existing.formula function was designed to perform quality checks and automatic removal of impractical variables can also be accessed when an existing formula has been previously constructed. This method uses natural language processing techniques to deconstruct the components of a formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce.existing.formula(
  the.initial.formula,
  dat,
  max.input.categories = 20,
  max.outcome.categories.to.search = 4,
  force.main.effects = TRUE,
  order.as = "as.specified",
  include.backtick = "as.needed",
  format.as = "formula",
  envir = .GlobalEnv
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduce.existing.formula_+3A_the.initial.formula">the.initial.formula</code></td>
<td>
<p>is an object of class &quot;formula&quot; or &quot;character&quot; that states the inputs and output in the form y ~ x1 + x2.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_dat">dat</code></td>
<td>
<p>Data frame, list or environment (or object coercible by as.data.frame to a data frame) containing the variables in the model.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_max.input.categories">max.input.categories</code></td>
<td>
<p>Limits the maximum number of variables that will be employed in the formula.As default it is set at 20, but users can still change at his/her convenience.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_max.outcome.categories.to.search">max.outcome.categories.to.search</code></td>
<td>
<p>A numeric value. The create.formula function es a feature that identifies input variables exhibiting a lack of contrast. When reduce = TRUE, these variables are automatically excluded from the resulting formula. This search may be expanded to subsets of the outcome when the number of unique measured values of the outcome is no greater than max.outcome.categories.to.search. In this case, each subset of the outcome will be separately examined, and any inputs builthat exhibit a lack of contrast within at least one subset will be excluded.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_force.main.effects">force.main.effects</code></td>
<td>
<p>This is a logical value.  When TRUE, the intent is that any term ed as an interaction (of multiple variables) must also be listed individually as a main effect.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_order.as">order.as</code></td>
<td>
<p>rearranges its first argument into ascending or descending order.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_include.backtick">include.backtick</code></td>
<td>
<p>Add backticks to make a appropriate variable</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_format.as">format.as</code></td>
<td>
<p>The data type of the output.  If not set as &quot;formula&quot;, then a character vector will be returned.</p>
</td></tr>
<tr><td><code id="reduce.existing.formula_+3A_envir">envir</code></td>
<td>
<p>The path to search. Global environment is default value</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data('snack.dat')
the.initial.formula &lt;- 'Income ~ .'

reduce.existing.formula(the.initial.formula = the.initial.formula,dat = snack.dat,
  max.input.categories = 30)$formula

</code></pre>

<hr>
<h2 id='snack.dat'>Simulated Marketing Data</h2><span id='topic+snack.dat'></span>

<h3>Description</h3>

<p>contains information from the (fictionalized) marketing survey’s data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snack.dat
</code></pre>


<h3>Format</h3>

<p>A data frame of 23000 rows and 23 columns
</p>

<dl>
<dt>User ID</dt><dd><p>Character values assigning a unique customer value</p>
</dd>
<dt>Age</dt><dd><p>Numeric values displaying the age of customer in years</p>
</dd>
<dt>Gender</dt><dd><p>Character value describing gender of the customer</p>
</dd>
<dt>Income</dt><dd><p>Numeric values displaying the income of the customer</p>
</dd>
<dt>Region</dt><dd><p>Numeric values describing the region of the customer</p>
</dd>
<dt>Persona</dt><dd><p>Character value describing the customer persona:&quot;Millennial Muncher&quot; &quot;Righteous Reviewer&quot; &quot;Mainstream Maynard&quot; &quot;Savvy Samantha&quot; &quot;Easygoing Edith&quot; &quot;Old School Oliver&quot;</p>
</dd>
<dt>Product</dt><dd><p>Character value describing product consumed by the customer</p>
</dd>
<dt>Awareness</dt><dd><p>Numeric values displaying the customer awareness level</p>
</dd>
<dt>BP_For_Me_0_10</dt><dd><p>Numeric value displaying brand perception survey result scale (0-10)</p>
</dd>
<dt>BP_Fits_Budget_0_10</dt><dd><p>Numeric value displaying brand perception survey results for budget scale (0-10)</p>
</dd>
<dt>BP_Tastes_Great_0_10</dt><dd><p>Numeric value displaying brand perception survey results for tastes scale (0-10)</p>
</dd>
<dt>BP_Good_To_Share_0_10</dt><dd><p>Numeric value displaying brand perception survey results for good to share scale (0-10)</p>
</dd>
<dt>BP_Like_Logo_0_10</dt><dd><p>Numeric value displaying brand perception survey results for like logo scale (0-10)</p>
</dd>
<dt>BP_Special_Occasions_0_10</dt><dd><p>Numeric value displaying brand perception survey results for special occasion scale (0-10)</p>
</dd>
<dt>BP_Everyday_Snack_0_10</dt><dd><p>Numeric value displaying brand perception survey results for everyday snack scale (0-10)</p>
</dd>
<dt>BP_Healthy_0_10</dt><dd><p>Numeric value displaying brand perception survey results for healthy scale (0-10)</p>
</dd>
<dt>BP_Delicious_0_10</dt><dd><p>Numeric value displaying brand perception survey results for delicious scale (0-10)</p>
</dd>
<dt>BP_Right_Amount_0_10</dt><dd><p>Numeric value displaying brand perception survey results for right amount scale (0-10)</p>
</dd>
<dt>BP_Relaxing_0_10</dt><dd><p>Numeric value displaying brand perception survey results for relaxing scale (0-10)</p>
</dd>
<dt>Consideration</dt><dd><p>Numeric displaying if the customer would consider this product 1: Yes, 0: No</p>
</dd>
<dt>Consumption</dt><dd><p>Numeric displaying if the customer would consume this product 1: Yes, 0: No</p>
</dd>
<dt>Satisfaction</dt><dd><p>Numeric displaying if the customer was satisfied by this product 1: Yes, 0: No</p>
</dd>
<dt>Advocacy</dt><dd><p>Numeric displaying if the customer would advocate for this product 1: Yes, 0: No</p>
</dd>
<dt>Age Group</dt><dd><p>Categorical variable that breaks the Users into 4 different groups</p>
</dd>
<dt>Income Group</dt><dd><p>Categorical variable that breaks the Users into 5 different levels</p>
</dd>
</dl>



<h3>Source</h3>

<p>&quot;Randomly generated data&quot;
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
