<!DOCTYPE html><html><head><title>Help for package diffobj</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {diffobj}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#[,Diff,numeric,missing,missing-method'><p>Subsetting Methods for Diff Objects</p></a></li>
<li><a href='#[&lt;-,PaletteOfStyles-method'><p>Extract/Replace a Style Class or Object from PaletteOfStyles</p></a></li>
<li><a href='#AlignThreshold-class'><p>Controls How Lines Within a Diff Hunk Are Aligned</p></a></li>
<li><a href='#any,Diff-method'><p>Determine if Diff Object Has Differences</p></a></li>
<li><a href='#as.character,DiffSummary-method'><p>Generate Character Representation of DiffSummary Object</p></a></li>
<li><a href='#as.character,MyersMbaSes-method'><p>Generate a character representation of Shortest Edit Sequence</p></a></li>
<li><a href='#auto_context'><p>Configure Automatic Context Calculation</p></a></li>
<li><a href='#console_lines'><p>Attempt to Compute Console Height in Text Lines</p></a></li>
<li><a href='#diff_myers'><p>Diff two character vectors</p></a></li>
<li><a href='#Diff-class'><p>Diff Result Object</p></a></li>
<li><a href='#diffChr'><p>Diff Character Vectors Element By Element</p></a></li>
<li><a href='#diffCsv'><p>Diff CSV Files</p></a></li>
<li><a href='#diffDeparse'><p>Diff Deparsed Objects</p></a></li>
<li><a href='#diffFile'><p>Diff Files</p></a></li>
<li><a href='#diffObj'><p>Diff Objects</p></a></li>
<li><a href='#diffobj_s4method_doc'><p>Dummy Doc File for S4 Methods with Existing Generics</p></a></li>
<li><a href='#diffobj_set_def_opts'><p>Set All diffobj Options to Defaults</p></a></li>
<li><a href='#diffobj-package'><p>Diffs for R Objects</p></a></li>
<li><a href='#diffPrint'><p>Diff <code>print</code>ed Objects</p></a></li>
<li><a href='#diffStr'><p>Diff Object Structures</p></a></li>
<li><a href='#dimnames,PaletteOfStyles-method'><p>Retrieve Dimnames for PaletteOfStyles Objects</p></a></li>
<li><a href='#finalizeHtml'><p>Finalizing Methods for HTML Output</p></a></li>
<li><a href='#gdo'><p>Shorthand Function for Accessing diffobj Options</p></a></li>
<li><a href='#guides'><p>Generic Methods to Implement Flexible Guide Line Computations</p></a></li>
<li><a href='#has_Rdiff'><p>Attempt to Detect Whether diff Utility is Available</p></a></li>
<li><a href='#make_blocking'><p>Create a Blocking Version of a Function</p></a></li>
<li><a href='#nchar_html'><p>Count Text Characters in HTML</p></a></li>
<li><a href='#Pager'><p>Objects for Specifying Pager Settings</p></a></li>
<li><a href='#pager_is_less'><p>Check Whether System Has less as Pager</p></a></li>
<li><a href='#PaletteOfStyles-class'><p>Class for Tracking Default Styles by Style Type</p></a></li>
<li><a href='#par_frame'><p>Get Parent Frame of S4 Call Stack</p></a></li>
<li><a href='#Rdiff_chr'><p>Run Rdiff Directly on R Objects</p></a></li>
<li><a href='#ses'><p>Shortest Edit Script</p></a></li>
<li><a href='#show,DiffSummary-method'><p>Display DiffSummary Objects</p></a></li>
<li><a href='#show,PaletteOfStyles-method'><p>Display a PaletteOfStyles</p></a></li>
<li><a href='#show,Style-method'><p>Show Method for Style Objects</p></a></li>
<li><a href='#strip_hz_control'><p>Replace Horizontal Spacing Control Characters</p></a></li>
<li><a href='#Style-class'><p>Customize Appearance of Diff</p></a></li>
<li><a href='#StyleFuns-class'><p>Functions Used for Styling Diff Components</p></a></li>
<li><a href='#StyleSummary-class'><p>Styling Information for Summaries</p></a></li>
<li><a href='#StyleText-class'><p>Character Tokens Used in Diffs</p></a></li>
<li><a href='#summary,Diff-method'><p>Summary Method for Diff Objects</p></a></li>
<li><a href='#summary,MyersMbaSes-method'><p>Summary Method for Shortest Edit Path</p></a></li>
<li><a href='#summary,PaletteOfStyles-method'><p>Display a Summarized Version of a PaletteOfStyles</p></a></li>
<li><a href='#tag_f'><p>Make Functions That Wrap Text in HTML Tags</p></a></li>
<li><a href='#trim'><p>Methods to Remove Unsemantic Text Prior to Diff</p></a></li>
<li><a href='#view_or_browse'><p>Invoke IDE Viewer If Available, browseURL If Not</p></a></li>
<li><a href='#webfiles'><p>Return Location of Default HTML Support Files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Diffs for R Objects</td>
</tr>
<tr>
<td>Description:</td>
<td>Generate a colorized diff of two R objects for an intuitive
    visualization of their differences.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.5</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/brodieG/diffobj">https://github.com/brodieG/diffobj</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/brodieG/diffobj/issues">https://github.com/brodieG/diffobj/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Collate:</td>
<td>'capt.R' 'options.R' 'pager.R' 'check.R' 'finalizer.R'
'misc.R' 'html.R' 'styles.R' 's4.R' 'core.R' 'diff.R' 'get.R'
'guides.R' 'hunks.R' 'layout.R' 'myerssimple.R' 'rdiff.R'
'rds.R' 'set.R' 'subset.R' 'summmary.R' 'system.R' 'text.R'
'tochar.R' 'trim.R' 'word.R'</td>
</tr>
<tr>
<td>Imports:</td>
<td>crayon (&ge; 1.3.2), tools, methods, utils, stats</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-05 01:16:56 UTC; bg</td>
</tr>
<tr>
<td>Author:</td>
<td>Brodie Gaslam [aut, cre],
  Michael B. Allen [ctb, cph] (Original C implementation of Myers Diff
    Algorithm)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brodie Gaslam &lt;brodie.gaslam@yahoo.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-05 07:10:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='+5B+2CDiff+2Cnumeric+2Cmissing+2Cmissing-method'>Subsetting Methods for Diff Objects</h2><span id='topic++5B+2CDiff+2Cnumeric+2Cmissing+2Cmissing-method'></span><span id='topic+head+2CDiff-method'></span><span id='topic+tail+2CDiff-method'></span>

<h3>Description</h3>

<p>Methods to subset the character representation of the diff output.  The
subsetting bears no link to the line numbers in the diffs, only to the actual
displayed diff.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Diff,numeric,missing,missing'
x[i]

## S4 method for signature 'Diff'
head(x, n, ...)

## S4 method for signature 'Diff'
tail(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B2CDiff+2B2Cnumeric+2B2Cmissing+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p><code>Diff</code> object</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CDiff+2B2Cnumeric+2B2Cmissing+2B2Cmissing-method_+3A_i">i</code></td>
<td>
<p>subsetting index, must be numeric</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CDiff+2B2Cnumeric+2B2Cmissing+2B2Cmissing-method_+3A_n">n</code></td>
<td>
<p>integer(1L), the size for the resulting object</p>
</td></tr>
<tr><td><code id="+2B5B+2B2CDiff+2B2Cnumeric+2B2Cmissing+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>unused, for compatibility with generics</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>[</code> only supports numeric indices, and returns without error if you
specify out of bound indices.  If you apply multiple subsetting methods they
will be applied in the following order irrespective of what order you
actually specify them in: <code>[</code>, then <code>head</code>, then <code>tail</code>.
If you use the same subsetting method multiple times on the same object,
the last call will define the outcome.
</p>
<p>These methods are implemented by storing the chosen indices in the
<code>Diff</code> object and using them to subset the <code>as.character</code> output.
This mechanism explains the seemingly odd behavior documented above.
</p>


<h3>Value</h3>

<p><code>Diff</code> object with subsetting indices recorded for use by
<code>show</code>
## 'pager=&quot;off&quot;' for CRAN compliance; you may omit in normal use
diff &lt;- diffChr(letters, LETTERS, format=&quot;raw&quot;, pager=&quot;off&quot;)
diff[5:15]
head(diff, 5)
tail(diff, 5)
head(head(diff, 5), 8)  ## note not 'typical' behavior
</p>

<hr>
<h2 id='+5B+26lt+3B-+2CPaletteOfStyles-method'>Extract/Replace a Style Class or Object from PaletteOfStyles</h2><span id='topic++5B+3C-+2CPaletteOfStyles-method'></span><span id='topic++5B+2CPaletteOfStyles+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+5B+2CPaletteOfStyles-method'></span>

<h3>Description</h3>

<p>Extract/Replace a Style Class or Object from PaletteOfStyles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 replacement method for signature 'PaletteOfStyles'
x[i, j, ...] &lt;- value

## S4 method for signature 'PaletteOfStyles,ANY,ANY,ANY'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'PaletteOfStyles'
x[[i, j, ..., exact = TRUE]]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object</p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_i">i</code></td>
<td>
<p>numeric, or character corresponding to a valid style <code>format</code></p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_j">j</code></td>
<td>
<p>numeric, or character corresponding to a valid style
<code>brightness</code></p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_...">...</code></td>
<td>
<p>pass a numeric or character corresponding to a valid
<code>color.mode</code></p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_value">value</code></td>
<td>
<p>a <em>list</em> of <code><a href="#topic+Style">Style</a></code> class or
<code><a href="#topic+Style">Style</a></code> objects</p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_drop">drop</code></td>
<td>
<p>TRUE or FALSE, whether to drop dimensions, defaults to FALSE,
which is different than generic</p>
</td></tr>
<tr><td><code id="+2B5B+2B26lt+2B3B-+2B2CPaletteOfStyles-method_+3A_exact">exact</code></td>
<td>
<p>passed on to generic</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+Style">Style</a></code> <code>ClassRepresentation</code> object or
<code><a href="#topic+Style">Style</a></code> object for <code>[[</code>, and a list of the same for
<code>[</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for explanations of <code>format</code>,
<code>brightness</code>, and <code>color.mode</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pal &lt;- PaletteOfStyles()
pal[["ansi256", "light", "rgb"]]
pal["ansi256", "light", ]
pal["ansi256", "light", "rgb"] &lt;- list(StyleAnsi8NeutralRgb())
</code></pre>

<hr>
<h2 id='AlignThreshold-class'>Controls How Lines Within a Diff Hunk Are Aligned</h2><span id='topic+AlignThreshold-class'></span><span id='topic+AlignThreshold'></span>

<h3>Description</h3>

<p>Controls How Lines Within a Diff Hunk Are Aligned
</p>


<h3>Slots</h3>


<dl>
<dt><code>threshold</code></dt><dd><p>numeric(1L) between 0 and 1, what proportion of words
in the lines must match in order to align them.  Set to 1 to effectively
turn aligning off.  Defaults to 0.25.</p>
</dd>
<dt><code>min.chars</code></dt><dd><p>integer(1L) positive, minimum number of characters that must
match across lines in order to align them.  This requirement is in addition
to <code>threshold</code> and helps minimize spurious alignments.  Defaults to
3.</p>
</dd>
<dt><code>count.alnum.only</code></dt><dd><p>logical(1L) modifier for <code>min.chars</code>, whether to
count alpha numeric characters only.  Helps reduce spurious alignment
caused by meta character sequences such as &ldquo;[[1]]&rdquo; that would
otherwise meet the <code>min.chars</code> limit</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>a1 &lt;- AlignThreshold(threshold=0)
a2 &lt;- AlignThreshold(threshold=1)
a3 &lt;- AlignThreshold(threshold=0, min.chars=2)
## Note how "e f g" is aligned
diffChr(c("a b c e", "d e f g"), "D e f g", align=a1, pager="off")
## But now it is not
diffChr(c("a b c e", "d e f g"), "D e f g", align=a2, pager="off")
## "e f" are not enough chars to align
diffChr(c("a b c", "d e f"), "D e f", align=a1, pager="off")
## Override with min.chars, so now they align
diffChr(c("a b c", "d e f"), "D e f", align=a3, pager="off")
</code></pre>

<hr>
<h2 id='any+2CDiff-method'>Determine if Diff Object Has Differences</h2><span id='topic+any+2CDiff-method'></span>

<h3>Description</h3>

<p>Determine if Diff Object Has Differences
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Diff'
any(x, ..., na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="any+2B2CDiff-method_+3A_x">x</code></td>
<td>
<p>a <code>Diff</code> object</p>
</td></tr>
<tr><td><code id="any+2B2CDiff-method_+3A_...">...</code></td>
<td>
<p>unused, for compatibility with generic</p>
</td></tr>
<tr><td><code id="any+2B2CDiff-method_+3A_na.rm">na.rm</code></td>
<td>
<p>unused, for compatibility with generic</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if there are differences, FALSE if not, FALSE with warning if
there are no differences but objects are not <code><a href="Matrix.html#topic+all.equal">all.equal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>any(diffChr(letters, letters))
any(diffChr(letters, letters[-c(1, 5, 8)]))
</code></pre>

<hr>
<h2 id='as.character+2CDiffSummary-method'>Generate Character Representation of DiffSummary Object</h2><span id='topic+as.character+2CDiffSummary-method'></span>

<h3>Description</h3>

<p>Generate Character Representation of DiffSummary Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DiffSummary'
as.character(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.character+2B2CDiffSummary-method_+3A_x">x</code></td>
<td>
<p>a <code>DiffSummary</code> object</p>
</td></tr>
<tr><td><code id="as.character+2B2CDiffSummary-method_+3A_...">...</code></td>
<td>
<p>not used, for compatibility with generic</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the summary as a character vector intended to be <code>cat</code>ed to
terminal
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as.character(
  summary(diffChr(letters, letters[-c(5, 15)], format="raw", pager="off"))
)
</code></pre>

<hr>
<h2 id='as.character+2CMyersMbaSes-method'>Generate a character representation of Shortest Edit Sequence</h2><span id='topic+as.character+2CMyersMbaSes-method'></span>

<h3>Description</h3>

<p>Generate a character representation of Shortest Edit Sequence
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MyersMbaSes'
as.character(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.character+2B2CMyersMbaSes-method_+3A_x">x</code></td>
<td>
<p>S4 object of class <code>MyersMbaSes</code></p>
</td></tr>
<tr><td><code id="as.character+2B2CMyersMbaSes-method_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ses">ses</a></code>
</p>

<hr>
<h2 id='auto_context'>Configure Automatic Context Calculation</h2><span id='topic+auto_context'></span>

<h3>Description</h3>

<p>Helper functions to help define parameters for selecting an appropriate
<code>context</code> value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_context(
  min = getOption("diffobj.context.auto.min"),
  max = getOption("diffobj.context.auto.max")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="auto_context_+3A_min">min</code></td>
<td>
<p>integer(1L), positive, set to zero to allow any context</p>
</td></tr>
<tr><td><code id="auto_context_+3A_max">max</code></td>
<td>
<p>integer(1L), set to negative to allow any context</p>
</td></tr>
</table>


<h3>Value</h3>

<p>S4 object containing configuration parameters, for use as the
<code>context</code> or parameter value in <code><a href="#topic+diffPrint">diff*</a></code>
methods
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
diffChr(letters, letters[-13], context=auto_context(0, 3), pager="off")
diffChr(letters, letters[-13], context=auto_context(0, 10), pager="off")
diffChr(
  letters, letters[-13], context=auto_context(0, 10), line.limit=3L,
  pager="off"
)
</code></pre>

<hr>
<h2 id='console_lines'>Attempt to Compute Console Height in Text Lines</h2><span id='topic+console_lines'></span>

<h3>Description</h3>

<p>Returns the value of the <code>LINES</code> system variable if it is reasonable,
48 otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>console_lines()
</code></pre>


<h3>Value</h3>

<p>integer(1L)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>console_lines()
</code></pre>

<hr>
<h2 id='diff_myers'>Diff two character vectors</h2><span id='topic+diff_myers'></span>

<h3>Description</h3>

<p>Implementation of Myer's Diff algorithm with linear space refinement
originally implemented by Mike B. Allen as part of
<a href="http://www.ioplex.com/~miallen/libmba/">libmba</a>
version 0.9.1.  This implementation is a heavily modified version of the
original C code and is not compatible with the <code>libmba</code> library.
The C code is simplified by using fixed size arrays instead of variable
ones for tracking the longest reaching paths and for recording the shortest
edit scripts.  Additionally all error handling and memory allocation calls
have been moved to the internal R functions designed to handle those things.
A failover result is provided in the case where max diffs allowed is
exceeded.  Ability to provide custom comparison functions is removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diff_myers(a, b, max.diffs = -1L, warn = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diff_myers_+3A_a">a</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="diff_myers_+3A_b">b</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="diff_myers_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L) how many differences before giving up; set to
-1 to allow as many as there are up to the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diff_myers_+3A_warn">warn</code></td>
<td>
<p>TRUE or FALSE, whether to warn if we hit 'max.diffs'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The result format indicates operations required to convert <code>a</code> into
<code>b</code> in a precursor format to the GNU diff shortest edit script.  The
operations are &ldquo;Match&rdquo; (do nothing), &ldquo;Insert&rdquo; (insert one or
more values of <code>b</code> into <code>a</code>), and &ldquo;Delete&rdquo; (remove one or
more values from <code>a</code>).  The <code>length</code> slot dictates how
many values to advance along, insert into, or delete from <code>a</code>.  The
<code>offset</code> slot changes meaning depending on the operation.  For
&ldquo;Match&rdquo; and &ldquo;Delete&rdquo;, it is the starting index of that
operation in <code>a</code>.  For &ldquo;Insert&rdquo;, it is the starting index in
<code>b</code> of the values to insert into <code>a</code>; the index in <code>a</code> to
insert at is implicit in previous operations.
</p>


<h3>Value</h3>

<p>MyersMbaSes object
</p>

<hr>
<h2 id='Diff-class'>Diff Result Object</h2><span id='topic+Diff-class'></span>

<h3>Description</h3>

<p>Return value for the <code><a href="#topic+diffPrint">diff*</a></code> methods.  Has
<code>show</code>, <code>as.character</code>, <code>summmary</code>, <code>[</code>, <code>head</code>,
<code>tail</code>, and <code>any</code> methods.
</p>

<hr>
<h2 id='diffChr'>Diff Character Vectors Element By Element</h2><span id='topic+diffChr'></span><span id='topic+diffChr+2CANY-method'></span>

<h3>Description</h3>

<p>Will perform the diff on the actual string values of the character vectors
instead of capturing the printed screen output. Each vector element is
treated as a line of text.  NA elements are treated as the string
&ldquo;NA&rdquo;.  Non character inputs are coerced to character and attributes
are dropped with <code><a href="base.html#topic+c">c</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffChr(target, current, ...)

## S4 method for signature 'ANY'
diffChr(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffChr_+3A_target">target</code></td>
<td>
<p>the reference object</p>
</td></tr>
<tr><td><code id="diffChr_+3A_current">current</code></td>
<td>
<p>the object being compared to <code>target</code></p>
</td></tr>
<tr><td><code id="diffChr_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffChr_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffChr_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffChr_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffChr_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffChr_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffChr_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffChr_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffChr_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffChr_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> functions,
<code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffDeparse">diffDeparse</a></code> to compare deparsed objects,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
diffChr(LETTERS[1:5], LETTERS[2:6], pager="off")
</code></pre>

<hr>
<h2 id='diffCsv'>Diff CSV Files</h2><span id='topic+diffCsv'></span><span id='topic+diffCsv+2CANY-method'></span>

<h3>Description</h3>

<p>Reads CSV files with <code><a href="utils.html#topic+read.csv">read.csv</a></code> and passes the resulting data
frames onto <code><a href="#topic+diffPrint">diffPrint</a></code>.  <code>extra</code> values are passed as
arguments are passed to both <code>read.csv</code> and <code>print</code>.  To the
extent you wish to use different <code>extra</code> arguments for each of those
functions you will need to <code>read.csv</code> the files and pass them to
<code>diffPrint</code> yourself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffCsv(target, current, ...)

## S4 method for signature 'ANY'
diffCsv(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffCsv_+3A_target">target</code></td>
<td>
<p>character(1L) or file connection with read capability;
if character should point to a CSV file</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_current">current</code></td>
<td>
<p>like <code>target</code></p>
</td></tr>
<tr><td><code id="diffCsv_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffCsv_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffCsv_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffCsv_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffCsv_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> functions,
<code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>iris.2 &lt;- iris
iris.2$Sepal.Length[5] &lt;- 99
f1 &lt;- tempfile()
f2 &lt;- tempfile()
write.csv(iris, f1, row.names=FALSE)
write.csv(iris.2, f2, row.names=FALSE)
## `pager="off"` for CRAN compliance; you may omit in normal use
diffCsv(f1, f2, pager="off")
unlink(c(f1, f2))
</code></pre>

<hr>
<h2 id='diffDeparse'>Diff Deparsed Objects</h2><span id='topic+diffDeparse'></span><span id='topic+diffDeparse+2CANY-method'></span>

<h3>Description</h3>

<p>Perform diff on the character vectors produced by <code><a href="base.html#topic+deparse">deparse</a></code>ing
the objects.  Each element counts as a line.  If an element contains newlines
it will be split into elements new lines by the newlines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffDeparse(target, current, ...)

## S4 method for signature 'ANY'
diffDeparse(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffDeparse_+3A_target">target</code></td>
<td>
<p>the reference object</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_current">current</code></td>
<td>
<p>the object being compared to <code>target</code></p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffDeparse_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffDeparse_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> functions,
<code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
diffDeparse(matrix(1:9, 3), 1:9, pager="off")
</code></pre>

<hr>
<h2 id='diffFile'>Diff Files</h2><span id='topic+diffFile'></span><span id='topic+diffFile+2CANY-method'></span>

<h3>Description</h3>

<p>Reads text files with <code><a href="base.html#topic+readLines">readLines</a></code> and performs a diff on the
resulting character vectors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffFile(target, current, ...)

## S4 method for signature 'ANY'
diffFile(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffFile_+3A_target">target</code></td>
<td>
<p>character(1L) or file connection with read capability; if
character should point to a text file</p>
</td></tr>
<tr><td><code id="diffFile_+3A_current">current</code></td>
<td>
<p>like <code>target</code></p>
</td></tr>
<tr><td><code id="diffFile_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffFile_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffFile_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffFile_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffFile_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffFile_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffFile_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffFile_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffFile_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffFile_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> functions,
<code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
url.base &lt;- "https://raw.githubusercontent.com/wch/r-source"
f1 &lt;- file.path(url.base, "29f013d1570e1df5dc047fb7ee304ff57c99ea68/README")
f2 &lt;- file.path(url.base, "daf0b5f6c728bd3dbcd0a3c976a7be9beee731d9/README")
diffFile(f1, f2)

## End(Not run)
</code></pre>

<hr>
<h2 id='diffObj'>Diff Objects</h2><span id='topic+diffObj'></span>

<h3>Description</h3>

<p>Compare either the <code>print</code>ed or <code>str</code> screen representation of
R objects depending on which is estimated to produce the most useful
diff.  The selection process tries to minimize screen lines while maximizing
differences shown subject to display constraints.  The decision algorithm is
likely to evolve over time, so do not rely on this function making
a particular selection under specific circumstances.  Instead, use
<code><a href="#topic+diffPrint">diffPrint</a></code> or <code><a href="#topic+diffStr">diffStr</a></code> if you require one or the
other output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffObj(target, current, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffObj_+3A_target">target</code></td>
<td>
<p>the reference object</p>
</td></tr>
<tr><td><code id="diffObj_+3A_current">current</code></td>
<td>
<p>the object being compared to <code>target</code></p>
</td></tr>
<tr><td><code id="diffObj_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> methods,
<code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly
<code><a href="#topic+diffDeparse">diffDeparse</a></code> to compare deparsed objects,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
diffObj(letters, c(letters[1:10], LETTERS[11:26]), pager="off")
with(mtcars, diffObj(lm(mpg ~ hp)$qr, lm(mpg ~ disp)$qr, pager="off"))
</code></pre>

<hr>
<h2 id='diffobj_s4method_doc'>Dummy Doc File for S4 Methods with Existing Generics</h2><span id='topic+diffobj_s4method_doc'></span><span id='topic+show+2CMyersMbaSes-method'></span><span id='topic+as.character+2CDiff-method'></span>

<h3>Description</h3>

<p>Dummy Doc File for S4 Methods with Existing Generics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MyersMbaSes'
show(object)

## S4 method for signature 'Diff'
as.character(x, ...)
</code></pre>

<hr>
<h2 id='diffobj_set_def_opts'>Set All diffobj Options to Defaults</h2><span id='topic+diffobj_set_def_opts'></span>

<h3>Description</h3>

<p>Used primarily for testing to ensure all options are set to default values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffobj_set_def_opts()
</code></pre>


<h3>Value</h3>

<p>list for use with <code>options</code> that contains values of
<code>diffob</code> options before they were forced to defaults
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  diffobj_set_def_opts()

## End(Not run)
</code></pre>

<hr>
<h2 id='diffobj-package'>Diffs for R Objects</h2><span id='topic+diffobj-package'></span>

<h3>Description</h3>

<p>Generate a colorized diff of two R objects for an intuitive visualization of
their differences.  See 'vignette(package=&quot;diffobj&quot;, &quot;diffobj&quot;)' for details.
</p>

<hr>
<h2 id='diffPrint'>Diff <code>print</code>ed Objects</h2><span id='topic+diffPrint'></span><span id='topic+diffPrint+2CANY-method'></span>

<h3>Description</h3>

<p>Runs the diff between the <code>print</code> or <code>show</code> output produced by
<code>target</code> and <code>current</code>.  Given the extensive parameter list, this
documentation page is intended as a reference for all the <code>diff*</code>
methods.  For a high level introduction see <code>vignette("diffobj")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffPrint(target, current, ...)

## S4 method for signature 'ANY'
diffPrint(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffPrint_+3A_target">target</code></td>
<td>
<p>the reference object</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_current">current</code></td>
<td>
<p>the object being compared to <code>target</code></p>
</td></tr>
<tr><td><code id="diffPrint_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffPrint_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffPrint_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffPrint_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffPrint_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Almost all aspects of how the diffs are computed and displayed are
controllable through the <code>diff*</code> methods parameters.  This results in a
lengthy parameter list, but in practice you should rarely need to adjust
anything past the <code>color.mode</code> parameter.  Default values are specified
as options so that users may configure diffs in a persistent manner.
<code><a href="#topic+gdo">gdo</a></code> is a shorthand function to access <code>diffobj</code> options.
</p>
<p>Parameter order after <code>color.mode</code> is not guaranteed.  Future versions
of <code>diffobj</code> may add parameters and re-order existing parameters past
<code>color.mode</code>.
</p>
<p>This and other <code>diff*</code> functions are S4 generics that dispatch on the
<code>target</code> and <code>current</code> parameters.  Methods with signature
<code>c("ANY", "ANY")</code> are defined and act as the default methods.  You can
use this to set up methods to pre-process or set specific parameters for
selected classes that can then <code>callNextMethod</code> for the actual diff.
Note that while the generics include <code>...</code> as an argument, none of the
methods do.
</p>
<p>Strings are re-encoded to UTF-8 with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> prior to
comparison to avoid encoding-only differences.
</p>
<p>The text representation of 'target' and 'current' should each have no more
than ~INT_MAX/4 lines.
</p>


<h3>Value</h3>

<p>a <code>Diff</code> object; this object has a <code>show</code>
method that will display the diff to screen or pager, as well as
<code>summary</code>, <code>any</code>, and <code>as.character</code> methods.
If you store the return value instead of displaying it to screen, and
display it later, it is possible for the display to be thrown off if
there are environment changes (e.g. display width changes) in between
the time you compute the diff and the time you display it.
</p>


<h3>Matrices and Data Frames</h3>

<p>While <code>diffPrint</code> attempts to handle the default R behavior that wraps
wide tables, the results are often sub-optimal.  A better approach is to set
the <code>disp.width</code> parameter to a large enough value such that wrapping is
not necessary, and a browser-based <code>pager</code>.  In the future we will add
the capability to specify different capture widths and wrap widths so that
this is an option for terminal output (see
<a href="https://github.com/brodieG/diffobj/issues/109">issue 109</a>).
</p>
<p>One thing to keep in mind is that <code>diffPrint</code> is not designed to work
with very large data frames.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly,
<code><a href="#topic+diffDeparse">diffDeparse</a></code> to compare deparsed objects, <code><a href="#topic+ses">ses</a></code>
for a minimal and fast diff @param target the reference object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
diffPrint(letters, letters[-5], pager="off")
</code></pre>

<hr>
<h2 id='diffStr'>Diff Object Structures</h2><span id='topic+diffStr'></span><span id='topic+diffStr+2CANY-method'></span>

<h3>Description</h3>

<p>Compares the <code>str</code> output of <code>target</code> and <code>current</code>.  If
the <code>max.level</code> parameter to <code>str</code> is left unspecified, will
attempt to find the largest <code>max.level</code> that fits within
<code>line.limit</code> and shows at least one difference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffStr(target, current, ...)

## S4 method for signature 'ANY'
diffStr(
  target,
  current,
  mode = gdo("mode"),
  context = gdo("context"),
  format = gdo("format"),
  brightness = gdo("brightness"),
  color.mode = gdo("color.mode"),
  word.diff = gdo("word.diff"),
  pager = gdo("pager"),
  guides = gdo("guides"),
  trim = gdo("trim"),
  rds = gdo("rds"),
  unwrap.atomic = gdo("unwrap.atomic"),
  max.diffs = gdo("max.diffs"),
  disp.width = gdo("disp.width"),
  ignore.white.space = gdo("ignore.white.space"),
  convert.hz.white.space = gdo("convert.hz.white.space"),
  tab.stops = gdo("tab.stops"),
  line.limit = gdo("line.limit"),
  hunk.limit = gdo("hunk.limit"),
  align = gdo("align"),
  style = gdo("style"),
  palette.of.styles = gdo("palette"),
  frame = par_frame(),
  interactive = gdo("interactive"),
  term.colors = gdo("term.colors"),
  tar.banner = NULL,
  cur.banner = NULL,
  strip.sgr = gdo("strip.sgr"),
  sgr.supported = gdo("sgr.supported"),
  extra = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffStr_+3A_target">target</code></td>
<td>
<p>the reference object</p>
</td></tr>
<tr><td><code id="diffStr_+3A_current">current</code></td>
<td>
<p>the object being compared to <code>target</code></p>
</td></tr>
<tr><td><code id="diffStr_+3A_...">...</code></td>
<td>
<p>unused, for compatibility of methods with generics</p>
</td></tr>
<tr><td><code id="diffStr_+3A_mode">mode</code></td>
<td>
<p>character(1L), one of:
</p>

<ul>
<li> <p>&ldquo;unified&rdquo;: diff mode used by <code>git diff</code>
</p>
</li>
<li> <p>&ldquo;sidebyside&rdquo;: line up the differences side by side
</p>
</li>
<li> <p>&ldquo;context&rdquo;: show the target and current hunks in their
entirety; this mode takes up a lot of screen space but makes it easier
to see what the objects actually look like
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: default mode; pick one of the above, will favor
&ldquo;sidebyside&rdquo; unless <code>getOption("width")</code> is less than 80,
or in <code>diffPrint</code> and objects are dimensioned and do not fit side
by side, or in <code>diffChr</code>, <code>diffDeparse</code>, <code>diffFile</code> and
output does not fit in side by side without wrapping
</p>
</li></ul>
</td></tr>
<tr><td><code id="diffStr_+3A_context">context</code></td>
<td>
<p>integer(1L) how many lines of context are shown on either side
of differences (defaults to 2).  Set to <code>-1L</code> to allow as many as
there are.  Set to &ldquo;auto&rdquo;  to display as many as 10 lines or as few
as 1 depending on whether total screen lines fit within the number of lines
specified in <code>line.limit</code>.  Alternatively pass the return value of
<code><a href="#topic+auto_context">auto_context</a></code> to fine tune the parameters of the auto context
calculation.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_format">format</code></td>
<td>
<p>character(1L), controls the diff output format, one of:
</p>

<ul>
<li> <p>&ldquo;auto&rdquo;: to select output format based on terminal
capabilities; will attempt to use one of the ANSI formats if they
appear to be supported, and if not or if you are in the Rstudio console
it will attempt to use HTML and browser output if in interactive mode.
</p>
</li>
<li> <p>&ldquo;raw&rdquo;: plain text
</p>
</li>
<li> <p>&ldquo;ansi8&rdquo;: color and format diffs using basic ANSI escape
sequences
</p>
</li>
<li> <p>&ldquo;ansi256&rdquo;: like &ldquo;ansi8&rdquo;, except using the full range
of ANSI formatting options
</p>
</li>
<li> <p>&ldquo;html&rdquo;: color and format using HTML markup; the resulting
string is processed with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> when output as a full
web page (see docs for <code>html.output</code> under <code><a href="#topic+Style">Style</a></code>).
</p>
</li></ul>

<p>Defaults to &ldquo;auto&rdquo;.  See <code>palette.of.styles</code> for details
on customization, <code><a href="crayon.html#topic+style">style</a></code> for full control of output format.
See 'pager' parameter for more discussion of Rstudio behavior.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_brightness">brightness</code></td>
<td>
<p>character, one of &ldquo;light&rdquo;, &ldquo;dark&rdquo;,
&ldquo;neutral&rdquo;, useful for adjusting color scheme to light or dark
terminals.  &ldquo;neutral&rdquo; by default.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
for details and limitations.  Advanced: you may specify brightness as a
function of <code>format</code>.  For example, if you typically wish to use a
&ldquo;dark&rdquo; color scheme, except for when in &ldquo;html&rdquo; format when
you prefer the &ldquo;light&rdquo; scheme, you may use
<code>c("dark", html="light")</code> as the value for this parameter.  This is
particularly useful if <code>format</code> is set to &ldquo;auto&rdquo; or if you
want to specify a default value for this parameter via options.  Any names
you use should correspond to a <code>format</code>.  You must have one unnamed
value which will be used as the default for all <code>format</code>s that are
not explicitly specified.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_color.mode">color.mode</code></td>
<td>
<p>character, one of &ldquo;rgb&rdquo; or &ldquo;yb&rdquo;.
Defaults to &ldquo;yb&rdquo;.  &ldquo;yb&rdquo; stands for &ldquo;Yellow-Blue&rdquo; for
color schemes that rely primarily on those colors to style diffs.
Those colors can be easily distinguished by individuals with
limited red-green color sensitivity.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for
details and limitations.  Also offers the same advanced usage as the
<code>brightness</code> parameter.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_word.diff">word.diff</code></td>
<td>
<p>TRUE (default) or FALSE, whether to run a secondary word
diff on the in-hunk differences.  For atomic vectors setting this to
FALSE could make the diff <em>slower</em> (see the <code>unwrap.atomic</code>
parameter).  For other uses, particularly with <code><a href="#topic+diffChr">diffChr</a></code>
setting this to FALSE can substantially improve performance.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_pager">pager</code></td>
<td>
<p>one of &ldquo;auto&rdquo; (default), &ldquo;on&rdquo;,
&ldquo;off&rdquo;, a <code><a href="#topic+Pager">Pager</a></code> object, or a list; controls whether and
how a pager is used to display the diff output.  If you require a
particular pager behavior you must use a <code><a href="#topic+Pager">Pager</a></code>
object, or &ldquo;off&rdquo; to turn off the pager.  All other settings will
interact with other parameters such as <code>format</code>, <code>style</code>, as well
as with your system capabilities in order to select the pager expected to
be most useful.
</p>
<p>&ldquo;auto&rdquo; and &ldquo;on&rdquo; are the same, except that in non-interactive
mode &ldquo;auto&rdquo; is equivalent to &ldquo;off&rdquo;.  &ldquo;off&rdquo; will always
send output to the console.  If &ldquo;on&rdquo;, whether the output
actually gets routed to the pager depends on the pager <code>threshold</code>
setting (see <code><a href="#topic+Pager">Pager</a></code>).  The default behavior is to use the
pager associated with the <code>Style</code> object.  The <code>Style</code> object is
itself is determined by the <code>format</code> or <code>style</code> parameters.
</p>
<p>Depending on your system configuration different styles and corresponding
pagers will get selected, unless you specify a <code>Pager</code> object
directly.  On a system with a system pager that supports ANSI CSI SGR
colors, the pager will only trigger if the output is taller than one
window.  If the system pager is not known to support ANSI colors then the
output will be sent as HTML to the IDE viewer if available or to the web
browser if not.  Even though Rstudio now supports ANSI CSI SGR at the
console output is still formatted as HTML and sent to the IDE viewer.
Partly this is for continuity of behavior, but also because the default
Rstudio pager does not support ANSI CSI SGR, at least as of this writing.
</p>
<p>If <code>pager</code> is a list, then the same as with &ldquo;on&rdquo;, except that
the <code>Pager</code> object associated with the selected <code>Style</code> object is
re-instantiated with the union of the list elements and the existing
settings of that <code>Pager</code>.  The list should contain named elements that
correspond to the <code><a href="#topic+Pager">Pager</a></code> instantiation parameters.  The names
must be specified in full as partial parameter matching will not be carried
out because the pager is re-instantiated with <code><a href="methods.html#topic+new">new</a></code>.
</p>
<p>See <code><a href="#topic+Pager">Pager</a></code>, <code><a href="#topic+Style">Style</a></code>, and
<code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more details and for instructions on how
to modify the default behavior.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_guides">guides</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Guides
are additional context lines that are not strictly part of a hunk, but
provide important contextual data (e.g. column headers).  If TRUE, the
context lines are shown in addition to the normal diff output, typically
in a different color to indicate they are not part of the hunk.  If a
function, the function should accept as the first argument the object
being diffed, and the second the character representation of the object.
The function should return the indices of the elements of the
character representation that should be treated as guides.  See
<code><a href="#topic+guides">guides</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_trim">trim</code></td>
<td>
<p>TRUE (default), FALSE, or a function that accepts at least two
arguments and requires no more than two arguments.  Function should compute
for each line in captured output what portion of those lines should be
diffed.  By default, this is used to remove row meta data differences
(e.g. <code>[1,]</code>) so they alone do not show up as differences in the
diff.  See <code><a href="#topic+trim">trim</a></code> for more details.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_rds">rds</code></td>
<td>
<p>TRUE (default) or FALSE, if TRUE will check whether
<code>target</code> and/or <code>current</code> point to a file that can be read with
<code><a href="base.html#topic+readRDS">readRDS</a></code> and if so, loads the R object contained in the file
and carries out the diff on the object instead of the original argument.
Currently there is no mechanism for specifying additional arguments to
<code>readRDS</code></p>
</td></tr>
<tr><td><code id="diffStr_+3A_unwrap.atomic">unwrap.atomic</code></td>
<td>
<p>TRUE (default) or FALSE.  Relevant primarily for
<code>diffPrint</code>, if TRUE, and <code>word.diff</code> is also TRUE, and both
<code>target</code> and <code>current</code> are <em>unnamed</em> one-dimension atomics ,
the vectors are unwrapped and diffed element by element, and then
re-wrapped.  Since <code>diffPrint</code> is fundamentally a line diff, the
re-wrapped lines are lined up in a manner that is as consistent as possible
with the unwrapped diff.  Lines that contain the location of the word
differences will be paired up.  Since the vectors may well be wrapped with
different periodicities this will result in lines that are paired up that
look like they should not be paired up, though the locations of the
differences should be.  If is entirely possible that setting this parameter
to FALSE will result in a slower diff.  This happens if two vectors are
actually fairly similar, but their line representations are not.  For
example, in comparing <code>1:100</code> to <code>c(100, 1:99)</code>, there is really
only one difference at the &ldquo;word&rdquo; level, but every screen line is
different.  <code>diffChr</code> will also do the unwrapping if it is given a
character vector that contains output that looks like the atomic vectors
described above.  This is a bug, but as the functionality could be useful
when diffing e.g. <code>capture.output</code> data, we now declare it a feature.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="diffStr_+3A_disp.width">disp.width</code></td>
<td>
<p>integer(1L) number of display columns to take up; note that
in &ldquo;sidebyside&rdquo; <code>mode</code> the effective display width is half this
number (set to 0L to use default widths which are <code>getOption("width")</code>
for normal styles and <code>80L</code> for HTML styles.  Future versions of
<code>diffobj</code> may change this to larger values for two dimensional objects
for better diffs (see details).</p>
</td></tr>
<tr><td><code id="diffStr_+3A_ignore.white.space">ignore.white.space</code></td>
<td>
<p>TRUE or FALSE, whether to consider differences in
horizontal whitespace (i.e. spaces and tabs) as differences (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="diffStr_+3A_convert.hz.white.space">convert.hz.white.space</code></td>
<td>
<p>TRUE or FALSE, whether modify input strings
that contain tabs and carriage returns in such a way that they display as
they would <b>with</b> those characters, but without using those
characters (defaults to TRUE).  The conversion assumes that tab stops are
spaced evenly eight characters apart on the terminal.  If this is not the
case you may specify the tab stops explicitly with <code>tab.stops</code>.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_tab.stops">tab.stops</code></td>
<td>
<p>integer, what tab stops to use when converting hard tabs to
spaces.  If not integer will be coerced to integer (defaults to 8L).  You
may specify more than one tab stop.  If display width exceeds that
addressable by your tab stops the last tab stop will be repeated.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_line.limit">line.limit</code></td>
<td>
<p>integer(2L) or integer(1L), if length 1 how many lines of
output to show, where <code>-1</code> means no limit.  If length 2, the first
value indicates the threshold of screen lines to begin truncating output,
and the second the number of lines to truncate to, which should be fewer
than the threshold.  Note that this parameter is implemented on a
best-efforts basis and should not be relied on to produce the exact
number of lines requested.  In particular do not expect it to work well for
for values small enough that the banner portion of the diff would have to
be trimmed.  If you want a specific number of lines use <code>[</code> or
<code>head</code> / <code>tail</code>.  One advantage of <code>line.limit</code> over these
other options is that you can combine it with <code>context="auto"</code> and
auto <code>max.level</code> selection (the latter for <code>diffStr</code>), which
allows the diff to dynamically adjust to make best use of the available
display lines.  <code>[</code>, <code>head</code>, and <code>tail</code> just subset the text
of the output.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_hunk.limit">hunk.limit</code></td>
<td>
<p>integer(2L) or integer (1L), how many diff hunks to show.
Behaves similarly to <code>line.limit</code>.  How many hunks are in a
particular diff is a function of how many differences, and also how much
<code>context</code> is used since context can cause two hunks to bleed into
each other and become one.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_align">align</code></td>
<td>
<p>numeric(1L) between 0 and 1, proportion of
words in a line of <code>target</code> that must be matched in a line of
<code>current</code> in the same hunk for those lines to be paired up when
displayed (defaults to 0.25), or an <code><a href="#topic+AlignThreshold">AlignThreshold</a></code> object.
Set to <code>1</code> to turn off alignment which will cause all lines in a hunk
from <code>target</code> to show up first, followed by all lines from
<code>current</code>.  Note that in order to be aligned lines must meet the
threshold and have at least 3 matching alphanumeric characters (see
<code><a href="#topic+AlignThreshold">AlignThreshold</a></code> for details).</p>
</td></tr>
<tr><td><code id="diffStr_+3A_style">style</code></td>
<td>
<p>&ldquo;auto&rdquo;, a <code><a href="#topic+Style">Style</a></code> object, or a list.
&ldquo;auto&rdquo; by default.  If a <code>Style</code> object, will override the
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
The <code>Style</code> object provides full control of diff output styling.
If a list, then the same as &ldquo;auto&rdquo;, except that if the auto-selected
<code>Style</code> requires instantiation (see <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>),
then the list contents will be used as arguments when instantiating the
style object.  See <code><a href="#topic+Style">Style</a></code> for more details, in particular the
examples.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_palette.of.styles">palette.of.styles</code></td>
<td>
<p><code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object; advanced
usage, contains all the <code><a href="#topic+Style">Style</a></code> objects or
&ldquo;classRepresentation&rdquo; objects extending <code><a href="#topic+Style">Style</a></code> that are
selected by specifying the <code>format</code>, <code>brightness</code>, and
<code>color.mode</code> parameters.  See <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> for more
details.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_frame">frame</code></td>
<td>
<p>an environment to use as the evaluation frame for the
<code>print/show/str</code>, calls and for <code>diffObj</code>, the evaluation frame
for the <code>diffPrint</code> / <code>diffStr</code> calls.  Defaults to the return
value of <code><a href="#topic+par_frame">par_frame</a></code>.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_interactive">interactive</code></td>
<td>
<p>TRUE or FALSE whether the function is being run in
interactive mode, defaults to the return value of
<code><a href="base.html#topic+interactive">interactive</a></code>.  If in interactive mode, pager will be used if
<code>pager</code> is &ldquo;auto&rdquo;, and if ANSI styles are not supported and
<code>style</code> is &ldquo;auto&rdquo;, output will be send to viewer/browser as
HTML.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_term.colors">term.colors</code></td>
<td>
<p>integer(1L) how many ANSI colors are supported by the
terminal.  This variable is provided for when
<code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> does not properly detect how
many ANSI colors are supported by your terminal. Defaults to return value
of <code><a href="crayon.html#topic+num_colors">crayon::num_colors</a></code> and should be 8 or 256 to
allow ANSI colors, or any other number to disallow them.  This only
impacts output format selection when <code>style</code> and <code>format</code> are
both set to &ldquo;auto&rdquo;.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_tar.banner">tar.banner</code></td>
<td>
<p>character(1L), language, or NULL, used to generate the
text to display ahead of the diff section representing the target output.
If NULL will use the deparsed <code>target</code> expression, if language, will
use the language as it would the <code>target</code> expression, if
character(1L), will use the string with no modifications.  The language
mode is provided because <code>diffStr</code> modifies the expression prior to
display (e.g. by wrapping it in a call to <code>str</code>).  Note that it is
possible in some cases that the substituted value of <code>target</code> actually
is character(1L), but if you provide a character(1L) value here it will be
assumed you intend to use that value literally.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_cur.banner">cur.banner</code></td>
<td>
<p>character(1L) like <code>tar.banner</code>, but for
<code>current</code></p>
</td></tr>
<tr><td><code id="diffStr_+3A_strip.sgr">strip.sgr</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to strip ANSI CSI
SGR sequences prior to comparison and for display of diff.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
FALSE otherwise.  The default behavior is to avoid confusing diffs where
the original SGR and the SGR added by the diff are mixed together.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>TRUE, FALSE, or NULL (default), whether to assume the
standard output device supports ANSI CSI SGR sequences.  If TRUE, strings
will be manipulated accounting for the SGR sequences.  If NULL,
resolves to TRUE if 'style' resolves to an ANSI formatted diff, and
to 'crayon::has_color()' otherwise.  This only controls how the strings are
manipulated, not whether SGR is added to format the diff, which is
controlled by the 'style' parameter.  This parameter is exposed for the
rare cases where you might wish to control string manipulation behavior
directly.</p>
</td></tr>
<tr><td><code id="diffStr_+3A_extra">extra</code></td>
<td>
<p>list additional arguments to pass on to the functions used to
create text representation of the objects to diff (e.g. <code>print</code>,
<code>str</code>, etc.)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Due to the seemingly inconsistent nature of <code>max.level</code> when used with
objects with nested attributes, and also due to the relative slowness of
<code>str</code>, this function simulates the effect of <code>max.level</code> by hiding
nested lines instead of repeatedly calling <code>str</code> with varying values of
<code>max.level</code>.
</p>


<h3>Value</h3>

<p>a <code>Diff</code> object; see <code><a href="#topic+diffPrint">diffPrint</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diffPrint">diffPrint</a></code> for details on the <code>diff*</code> functions,
<code><a href="#topic+diffObj">diffObj</a></code>, <code><a href="#topic+diffStr">diffStr</a></code>,
<code><a href="#topic+diffChr">diffChr</a></code> to compare character vectors directly,
<code><a href="#topic+diffDeparse">diffDeparse</a></code> to compare deparsed objects,
<code><a href="#topic+ses">ses</a></code> for a minimal and fast diff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `pager="off"` for CRAN compliance; you may omit in normal use
with(mtcars, diffStr(lm(mpg ~ hp)$qr, lm(mpg ~ disp)$qr, pager="off"))
</code></pre>

<hr>
<h2 id='dimnames+2CPaletteOfStyles-method'>Retrieve Dimnames for PaletteOfStyles Objects</h2><span id='topic+dimnames+2CPaletteOfStyles-method'></span>

<h3>Description</h3>

<p>Retrieve Dimnames for PaletteOfStyles Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'PaletteOfStyles'
dimnames(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimnames+2B2CPaletteOfStyles-method_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list the dimension names
dimnames(PaletteOfStyles())
</p>

<hr>
<h2 id='finalizeHtml'>Finalizing Methods for HTML Output</h2><span id='topic+finalizeHtml'></span><span id='topic+finalizeHtml+2CANY-method'></span><span id='topic+finalizeHtml+2CDiff-method'></span><span id='topic+finalizeHtml+2CDiffSummary-method'></span>

<h3>Description</h3>

<p>Used as the <code>finalizer</code> slot to <code><a href="#topic+StyleHtml">StyleHtml</a></code> objects to wrap
character output prior to output to device.  Used primarily by styles that
output to HTML to properly configure HTML page structure, including injecting
JS, CSS, etc..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>finalizeHtml(x, ...)

## S4 method for signature 'ANY'
finalizeHtml(x, x.chr, js, ...)

## S4 method for signature 'Diff'
finalizeHtml(x, x.chr, ...)

## S4 method for signature 'DiffSummary'
finalizeHtml(x, x.chr, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="finalizeHtml_+3A_x">x</code></td>
<td>
<p>object to finalize</p>
</td></tr>
<tr><td><code id="finalizeHtml_+3A_...">...</code></td>
<td>
<p>arguments to pass on to methods</p>
</td></tr>
<tr><td><code id="finalizeHtml_+3A_x.chr">x.chr</code></td>
<td>
<p>character text representation of <code>x</code>, typically generated
with the <code>as.character</code> method for <code>x</code></p>
</td></tr>
<tr><td><code id="finalizeHtml_+3A_js">js</code></td>
<td>
<p>character javascript code to append to HTML representation</p>
</td></tr>
</table>

<hr>
<h2 id='gdo'>Shorthand Function for Accessing diffobj Options</h2><span id='topic+gdo'></span>

<h3>Description</h3>

<p><code>gdo(x)</code> is equivalent to <code>getOption(sprintf("diffobj.%s", x))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gdo(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gdo_+3A_x">x</code></td>
<td>
<p>character(1L) name off <code>diffobj</code> option to retrieve, without
the &ldquo;diffobj.&rdquo; prefix</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>gdo("format")
</code></pre>

<hr>
<h2 id='guides'>Generic Methods to Implement Flexible Guide Line Computations</h2><span id='topic+guides'></span><span id='topic+guidesPrint+2C'></span><span id='topic+guidesStr+2C'></span><span id='topic+guidesChr+2C'></span><span id='topic+guidesDeparse'></span><span id='topic+guidesPrint'></span><span id='topic+guidesPrint+2CANY+2Ccharacter-method'></span><span id='topic+guidesStr'></span><span id='topic+guidesStr+2CANY+2Ccharacter-method'></span><span id='topic+guidesChr'></span><span id='topic+guidesChr+2CANY+2Ccharacter-method'></span><span id='topic+guidesDeparse+2CANY+2Ccharacter-method'></span><span id='topic+guidesFile'></span><span id='topic+guidesFile+2CANY+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Guides are context lines that would normally be omitted from the
diff because they are too far from any differences, but provide particularly
useful contextual information.  Column headers are a common example.
Modifying guide finding is an advanced feature intended for package
developers that want special treatment for the display output of their
objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guidesPrint(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
guidesPrint(obj, obj.as.chr)

guidesStr(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
guidesStr(obj, obj.as.chr)

guidesChr(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
guidesChr(obj, obj.as.chr)

guidesDeparse(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
guidesDeparse(obj, obj.as.chr)

guidesFile(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
guidesFile(obj, obj.as.chr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="guides_+3A_obj">obj</code></td>
<td>
<p>an R object</p>
</td></tr>
<tr><td><code id="guides_+3A_obj.as.chr">obj.as.chr</code></td>
<td>
<p>the character representation of <code>obj</code> that is used
for computing the diffs</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>Diff</code> detects these important context lines by looking for patterns in
the text of the diff, and then displays these lines in addition to the
normal diff output.  Guides are marked by a tilde in the gutter, and
are typically styled differently than normal context lines, by default in
grey.  Guides may be far from the diff hunk they are juxtaposed to.  We
eschew the device of putting the guides in the hunk header as <code>git diff</code>
does because often the column alignment of the guide line is meaningful.
</p>
<p>Guides are detected by the <code>guides*</code> methods documented here.
Each of the <code>diff*</code> methods (e.g. <code><a href="#topic+diffPrint">diffPrint</a></code>) has a
corresponding <code>guides*</code> method (e.g.
<code><a href="#topic+guidesPrint">guidesPrint</a></code>), with the exception of <code><a href="#topic+diffCsv">diffCsv</a></code>
since that method uses <code>diffPrint</code> internally.  The <code>guides*</code>
methods expect an R object as the first parameter and the captured display
representation of the object in a character vector as the second.  The
function should then identify which elements in the character representation
should be treated as guides, and should return the numeric indices for them.
</p>
<p>The original object is passed as the first argument so that the generic can
dispatch on it, and so the methods may adjust their guide finding behavior
to data that is easily retrievable from the object, but less so from the
character representation thereof.
</p>
<p>The default method for <code>guidesPrint</code> has special handling for 2D
objects (e.g. data frames, matrices), arrays, time series, tables, lists, and
S4 objects that use the default <code>show</code> method.  Guide finding is on a
best efforts basis and may fail if your objects contain &ldquo;pathological&rdquo;
display representations.  Since the diff will still work with failed
<code>guides</code> finding we consider this an acceptable compromise.  Guide
finding is more likely to fail with nested recursive structures.  A known
issue is that list-like S3 objects without print methods [reset the tag
buffers](https://bugs.r-project.org/bugzilla/show_bug.cgi?id=17610) so the
guides become less useful for them.
</p>
<p><code>guidesStr</code> highlights top level objects.  The default methods for the
other <code>guide*</code> generics do not do anything and exist only as a mechanism
for providing custom guide line methods.
</p>
<p>If you dislike the default handling you can also define your own methods for
matrices, arrays, etc., or alternatively you can pass a guide finding
function directly via the <code>guides</code> parameter to the <code>diff*</code>
methods.
</p>
<p>If you have classed objects with special patterns you can define your own
methods for them (see examples), though if your objects are S3 you will need
to use <code><a href="methods.html#topic+setOldClass">setOldClass</a></code> as the <code>guides*</code> generics are S4.
</p>


<h3>Value</h3>

<p>integer containing values in <code>seq_along(obj.as.chr)</code>
</p>


<h3>Note</h3>

<p>The mechanism for identifying guides will almost certainly change in
the future to allow for better handling of nested guides, so if you do
implement custom guideline methods do so with the understanding that they
will likely be deprecated in one of the future releases.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Roundabout way of suppressing guides for matrices
setMethod("guidesPrint", c("matrix", "character"),
  function(obj, obj.as.chr) integer(0L)
)
## Special guides for "zulu" S3 objects that match lines
## starting in "zulu###" where ### is a nuber
setOldClass("zulu")
setMethod("guidesPrint", c("zulu", "character"),
  function(obj, obj.as.chr) {
    if(length(obj) &gt; 20) grep("^zulu[0-9]*", obj.as.chr)
    else integer(0L)
} )
</code></pre>

<hr>
<h2 id='has_Rdiff'>Attempt to Detect Whether diff Utility is Available</h2><span id='topic+has_Rdiff'></span>

<h3>Description</h3>

<p>Checks whether <code><a href="tools.html#topic+Rdiff">tools::Rdiff</a></code> issues a warning when
running with <code>useDiff=TRUE</code> and if it does assumes this is because the
diff utility is not available.  Intended primarily for testing purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_Rdiff(test.with = tools::Rdiff)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="has_Rdiff_+3A_test.with">test.with</code></td>
<td>
<p>function to test for diff presence with, typically Rdiff</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>has_Rdiff()
</code></pre>

<hr>
<h2 id='make_blocking'>Create a Blocking Version of a Function</h2><span id='topic+make_blocking'></span>

<h3>Description</h3>

<p>Wraps <code>fun</code> in a function that runs <code>fun</code> and then issues a
<code>readline</code> prompt to prevent further R code evaluation until user
presses a key.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_blocking(fun, msg = "Press ENTER to continue...", invisible.res = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_blocking_+3A_fun">fun</code></td>
<td>
<p>a function</p>
</td></tr>
<tr><td><code id="make_blocking_+3A_msg">msg</code></td>
<td>
<p>character(1L) a message to use as the <code>readline</code> prompt</p>
</td></tr>
<tr><td><code id="make_blocking_+3A_invisible.res">invisible.res</code></td>
<td>
<p>whether to return the result of <code>fun</code> invisibly</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>fun</code>, wrapped in a function that does the blocking.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_blocking(sum, invisible.res=FALSE)(1:10)
</code></pre>

<hr>
<h2 id='nchar_html'>Count Text Characters in HTML</h2><span id='topic+nchar_html'></span>

<h3>Description</h3>

<p>Very simple implementation that will fail if there are any &ldquo;&gt;&rdquo; in the
HTML that are not closing tags, and assumes that HTML entities are all one
character wide.  Also, spaces are counted as one width each because the
HTML output is intended to be displayed inside <code>&lt;PRE&gt;</code> tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nchar_html(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nchar_html_+3A_x">x</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="nchar_html_+3A_...">...</code></td>
<td>
<p>unused for compatibility with internal use</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer(length(x)) with number of characters of each element
</p>


<h3>Examples</h3>

<pre><code class='language-R'>nchar_html("&lt;a href='http:www.domain.com'&gt;hello&lt;/a&gt;")
</code></pre>

<hr>
<h2 id='Pager'>Objects for Specifying Pager Settings</h2><span id='topic+Pager'></span><span id='topic+PagerOff+2C'></span><span id='topic+PagerSystem+2C'></span><span id='topic+PagerSystemLess+2C'></span><span id='topic+PagerBrowser'></span><span id='topic+PagerOff-class'></span><span id='topic+PagerOff'></span><span id='topic+PagerSystem-class'></span><span id='topic+PagerSystem'></span><span id='topic+PagerSystemLess-class'></span><span id='topic+PagerSystemLess'></span>

<h3>Description</h3>

<p>Initializers for pager configuration objects that modify pager behavior.
These objects can be used as the <code>pager</code> argument to the
<code><a href="#topic+diffPrint">diff*</a></code> methods, or as the <code>pager</code> slot for
<code><a href="#topic+Style">Style</a></code> objects.  In this documentation we use the &ldquo;pager&rdquo;
term loosely and intend it to refer to any device other than the terminal
that can be used to render output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Pager(
  pager = function(x) writeLines(readLines(x)),
  file.ext = "",
  threshold = 0L,
  ansi = FALSE,
  file.path = NA_character_,
  make.blocking = FALSE
)

PagerOff(...)

PagerSystem(pager = file.show, threshold = -1L, file.ext = "", ...)

PagerSystemLess(
  pager = file.show,
  threshold = -1L,
  flags = "R",
  file.ext = "",
  ansi = TRUE,
  ...
)

PagerBrowser(
  pager = view_or_browse,
  threshold = 0L,
  file.ext = "html",
  make.blocking = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Pager_+3A_pager">pager</code></td>
<td>
<p>a function that accepts at least one parameter and does not
require a parameter other than the first parameter.  This function will be
called with a file path passed as the first argument.  The referenced file
will contain the text of the diff.  By default this is a temporary file that
will be deleted as soon as the pager function completes evaluation.
<code>PagerSystem</code> and <code>PagerSystemLess</code> use <code><a href="base.html#topic+file.show">file.show</a></code>
by default, and <code>PagerBrowser</code> uses
<code><a href="#topic+view_or_browse">view_or_browse</a></code> for HTML output.  For asynchronous pagers such
as <code>view_or_browse</code> it is important to make the pager function
blocking by setting the <code>make.blocking</code> parameter to TRUE, or to
specify a pager file path explicitly with <code>file.path</code>.</p>
</td></tr>
<tr><td><code id="Pager_+3A_file.ext">file.ext</code></td>
<td>
<p>character(1L) an extension to append to file path passed to
<code>pager</code>, <em>without</em> the period.  For example, <code>PagerBrowser</code>
uses &ldquo;html&rdquo; to cause <code><a href="utils.html#topic+browseURL">browseURL</a></code> to launch the web
browser.  This parameter will be overridden if <code>file.path</code> is used.</p>
</td></tr>
<tr><td><code id="Pager_+3A_threshold">threshold</code></td>
<td>
<p>integer(1L) number of lines of output that triggers the use
of the pager; negative values lead to using
<code><a href="#topic+console_lines">console_lines</a> + 1</code>, and zero leads to always using the pager
irrespective of how many lines the output has.</p>
</td></tr>
<tr><td><code id="Pager_+3A_ansi">ansi</code></td>
<td>
<p>TRUE or FALSE, whether the pager supports ANSI CSI SGR sequences.</p>
</td></tr>
<tr><td><code id="Pager_+3A_file.path">file.path</code></td>
<td>
<p>character(1L), if not NA the diff will be written to this
location, ignoring the value of <code>file.ext</code>.  If NA_character_
(default), a temporary file is used and removed after the pager function
completes evaluation.  If not NA, the file is preserved.  Beware that the
file will be overwritten if it already exists.</p>
</td></tr>
<tr><td><code id="Pager_+3A_make.blocking">make.blocking</code></td>
<td>
<p>TRUE, FALSE, or NA. Whether to wrap <code>pager</code> with
<code><a href="#topic+make_blocking">make_blocking</a></code> prior to calling it.  This suspends R code
execution until there is user input so that temporary diff files are not
deleted before the pager has a chance to read them.  This typically
defaults to FALSE, except for <code>PagerBrowser</code> where it defaults to NA,
which resolves to <code>is.na(file.path)</code> (i.e. it is TRUE if the diff is
being written to a temporary file, and FALSE otherwise).</p>
</td></tr>
<tr><td><code id="Pager_+3A_...">...</code></td>
<td>
<p>additional arguments to pass on to <code>new</code> that are passed on
to parent classes.</p>
</td></tr>
<tr><td><code id="Pager_+3A_flags">flags</code></td>
<td>
<p>character(1L), only for <code>PagerSystemLess</code>, what flags to
set with the <code>LESS</code> system environment variable.  By default the
&ldquo;R&rdquo; flag is set to ensure ANSI escape sequences are interpreted if
it appears your terminal supports ANSI escape sequences.  If you want to
leave the output on the screen after you exit the pager you can use
&ldquo;RX&rdquo;.  You should only provide the flag letters (e.g. &ldquo;&quot;RX&quot;&rdquo;,
not <code>"-RX"</code>).  The system variable is only modified for the duration
of the evaluation and is reset / unset afterwards. <em>Note:</em> you must
specify this slot via the constructor as in the example.  If you set the
slot directly it will not have any effect.</p>
</td></tr>
</table>


<h3>Default Output Behavior</h3>

<p><code><a href="#topic+diffPrint">diff*</a></code> methods use &ldquo;pagers&rdquo; to help
manage large outputs and also to provide an alternative colored diff when the
terminal does not support them directly.
</p>
<p>For OS X and *nix systems where <code>less</code> is the pager and the
terminal supports ANSI escape sequences, output is colored with ANSI escape
sequences.  If the output exceeds one screen height in size (as estimated by
<code><a href="#topic+console_lines">console_lines</a></code>) it is sent to the pager.
</p>
<p>If the terminal does not support ANSI escape sequences, or if the system
pager is not <code>less</code> as detected by <code><a href="#topic+pager_is_less">pager_is_less</a></code>, then the
output is rendered in HTML and sent to the IDE viewer
(<code>getOption("viewer")</code>) if defined, or to the browser with
<code><a href="utils.html#topic+browseURL">browseURL</a></code> if not.  This behavior may seem sub-optimal for
systems that have ANSI aware terminals and ANSI aware pagers other than
<code>less</code>, but these should be rare and it is possible to configure
<code>diffobj</code> to produce the correct output for them (see examples).
</p>


<h3>Pagers and Styles</h3>

<p>There is a close relationship between pagers and <code><a href="#topic+Style">Style</a></code>.  The
<code>Style</code> objects control whether the output is raw text, formatted
with ANSI escape sequences, or marked up with HTML.  In order for these
different types of outputs to render properly, they need to be sent to the
right device.  For this reason <code><a href="#topic+Style">Style</a></code> objects come with a
<code>Pager</code> configuration object pre-assigned so the output can render
correctly.  The exact <code>Pager</code> configuration object depends on the
<code><a href="#topic+Style">Style</a></code> as well as the system configuration.
</p>
<p>In any call to the <code><a href="#topic+diffPrint">diff*</a></code> methods you can always
specify both the <code><a href="#topic+Style">Style</a></code> and <code>Pager</code> configuration object
directly for full control of output formatting and rendering.  We have tried
to set-up sensible defaults for most likely use cases, but given the complex
interactions involved it is possible you may need to configure things
explicitly.  Should you need to define explicit configurations you can save
them as option values with
<code>options(diffobj.pager=..., diffobj.style=...)</code> so that you do not need
to specify them each time you use <code>diffobj</code>.
</p>


<h3>Pager Configuration Objects</h3>

<p>The <code>Pager</code> configuration objects allow you to specify what device to
use as the pager and under what circumstances the pager should be used.
Several pre-defined pager configuration objects are available via
constructor functions:
</p>

<ul>
<li> <p><code>Pager</code>: Generic pager just outputs directly to terminal; not
useful unless the default parameters are modified.
</p>
</li>
<li> <p><code>PagerOff</code>: Turn off pager
</p>
</li>
<li> <p><code>PagerSystem</code>: Use the system pager as invoked by
<code><a href="base.html#topic+file.show">file.show</a></code>
</p>
</li>
<li> <p><code>PagerSystemLess</code>: Like <code>PagerSystem</code>, but provides
additional configuration options if the system pager is <code>less</code>.
Note this object does not change the system pager; it only allows you to
configure it via the <code>$LESS</code> environment variable which will have
no effect unless the system pager is set to be <code>less</code>.
</p>
</li>
<li> <p><code>PagerBrowser</code>: Use <code>getOption("viewer")</code> if defined, or
<code><a href="utils.html#topic+browseURL">browseURL</a></code> if not
</p>
</li></ul>

<p>The default configuration for <code>PagerSystem</code> and <code>PagerSystemLess</code>
leads to output being sent to the pager if it exceeds the estimated window
size, whereas <code>PagerBrowser</code> always sends output to the pager.  This
behavior can be configured via the <code>threshold</code> parameter.
</p>
<p><code>PagerSystemLess</code>'s primary role is to correctly configure the
<code>$LESS</code> system variable so that <code>less</code> renders the ANSI escape
sequences as intended.  On OS X <code>more</code> is a faux-alias to <code>less</code>,
except it does not appear to read the <code>$LESS</code> system variable.
Should you configure your system pager to be the <code>more</code> version of
<code>less</code>, <code><a href="#topic+pager_is_less">pager_is_less</a></code> will be tricked into thinking you
are using a &ldquo;normal&rdquo; version of <code>less</code> and you will likely end up
seeing gibberish in the pager.  If this is your use case you will need to
set-up a custom pager configuration object that sets the correct system
variables.
</p>


<h3>Custom Pager Configurations</h3>

<p>In most cases the simplest way to generate new pager configurations is to use
a list specification in the <code><a href="#topic+diffPrint">diff*</a></code> call.
Alternatively you can start with an existing <code>Pager</code> object and change
the defaults.  Both these cases are covered in the examples.
</p>
<p>You can change what system pager is used by <code>PagerSystem</code> by changing it
with <code>options(pager=...)</code> or by changing the <code>$PAGER</code> environment
variable.  You can also explicitly set a function to act as the pager when
you instantiate the <code>Pager</code> configuration object (see examples).
</p>
<p>If you wish to define your own pager object you should do so by extending the
any of the <code>Pager</code> classes.  If the function you use to handle the
actual paging is non-blocking (i.e. allows R code evaluation to continue
after it is spawned, you should set the <code>make.blocking</code> parameter to
TRUE to pause execution prior to deleting the temporary file that contains
the diff.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Style">Style</a></code>, <code><a href="#topic+pager_is_less">pager_is_less</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## We `dontrun` these examples as they involve pagers that should only be run
## in interactive mode
## Not run: 
## Specify Pager parameters via list; this lets the `diff*` functions pick
## their preferred pager based on format and other output parameters, but
## allows you to modify the pager behavior.

f &lt;- tempfile()
diffChr(1:200, 180:300, format='html', pager=list(file.path=f))
head(readLines(f))  # html output
unlink(f)

## Assuming system pager is `less` and terminal supports ANSI ESC sequences
## Equivalent to running `less -RFX`

diffChr(1:200, 180:300, pager=PagerSystemLess(flags="RFX"))

## If the auto-selected pager would be the system pager, we could
## equivalently use:

diffChr(1:200, 180:300, pager=list(flags="RFX"))

## System pager is not less, but it supports ANSI escape sequences

diffChr(1:200, 180:300, pager=PagerSystem(ansi=TRUE))

## Use a custom pager, in this case we make up a trivial one and configure it
## always page (`threshold=0L`)

page.fun &lt;- function(x) cat(paste0("| ", readLines(x)), sep="\n")
page.conf &lt;- PagerSystem(pager=page.fun, threshold=0L)
diffChr(1:200, 180:300, pager=page.conf, disp.width=getOption("width") - 2)

## Set-up the custom pager as the default pager

options(diffobj.pager=page.conf)
diffChr(1:200, 180:300)

## A blocking pager (this is effectively very similar to what `PagerBrowser`
## does); need to block b/c otherwise temp file with diff could be deleted
## before the device has a chance to read it since `browseURL` is not
## blocking itself.  On OS X we need to specify the extension so the correct
## program opens it (in this case `TextEdit`):

page.conf &lt;- Pager(pager=browseURL, file.ext="txt", make.blocking=TRUE)
diffChr(1:200, 180:300, pager=page.conf, format='raw')

## An alternative to a blocking pager is to disable the
## auto-file deletion; here we also specify a file location
## explicitly so we can recover the diff text.

f &lt;- paste0(tempfile(), ".html")  # must specify .html
diffChr(1:5, 2:6, format='html', pager=list(file.path=f))
tail(readLines(f))
unlink(f)

## End(Not run)
</code></pre>

<hr>
<h2 id='pager_is_less'>Check Whether System Has less as Pager</h2><span id='topic+pager_is_less'></span>

<h3>Description</h3>

<p>If <code>getOption(pager)</code> is set to the default value, checks whether
<code>Sys.getenv("PAGER")</code> appears to be <code>less</code> by trying to run the
pager with the &ldquo;version&rdquo; and parsing the output.  If
<code>getOption(pager)</code> is not the default value, then checks whether it
points to the <code>less</code> program by the same mechanism.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pager_is_less()
</code></pre>


<h3>Details</h3>

<p>Some systems may have <code>less</code> pagers installed that do not respond to the
<code>$LESS</code> environment variable.  For example, <code>more</code> on at least some
versions of OS X is <code>less</code>, but does not actually respond to
<code>$LESS</code>.  If such as pager is the system pager you will likely end up
seeing gibberish in the pager.  If this is your use case you will need to
set-up a custom pager configuration object that sets the correct system
variables (see <code><a href="#topic+Pager">Pager</a></code>).
</p>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Pager">Pager</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pager_is_less()
</code></pre>

<hr>
<h2 id='PaletteOfStyles-class'>Class for Tracking Default Styles by Style Type</h2><span id='topic+PaletteOfStyles-class'></span><span id='topic+PaletteOfStyles'></span>

<h3>Description</h3>

<p>Provides a mechanism for specifying a style based on the style properties
along dimensions of format, brightness, and color.  This allows a user to
request a style that meets a certain description (e.g. a &ldquo;light&rdquo;
scheme in &ldquo;ansi256&rdquo; format), without having to provide a specific
<code><a href="#topic+Style">Style</a></code> object.
</p>


<h3>An Array of Styles</h3>

<p>A <code>PaletteOfStyles</code> object is an &ldquo;array&rdquo; containing either
&ldquo;classRepresentation&rdquo; objects that extend <code>StyleHtml</code> or are
instances of objects that inherit from <code>StyleHtml</code>.  The <code>diff*</code>
methods then pick an object/class from this array based on the values of
the <code>format</code>, <code>brightness</code>, and <code>color.mode</code> parameters.
</p>
<p>For the most part the distinction between actual <code>Style</code> objects vs
&ldquo;classRepresentation&rdquo; ones is academic, except that with the latter
you can control the instantiation by providing a parameter list as the
<code>style</code> argument to the <code>diff*</code> methods. This is not an option with
already instantiated objects.  See examples.
</p>


<h3>Dimensions</h3>

<p>There are three general orthogonal dimensions of styles that can be used when
rendering diffs: the type of format, the &ldquo;brightness&rdquo; of the output,
and whether the colors used are distinguishable if you assume reds and greens
are not distinguishable.  Defaults for the intersections each of these
dimensions are encoded as a three dimensional list.  This list is just an
atomic vector of type &ldquo;list&rdquo; with a length 3 <code>dim</code> attribute.
</p>
<p>The array/list dimensions are:
</p>

<ul>
<li> <p><code>format</code>: the format type, one of &ldquo;raw&rdquo;,
&ldquo;ansi8&rdquo;, &ldquo;ansi256&rdquo;, or &ldquo;html&rdquo;
</p>
</li>
<li> <p><code>brightness</code>: whether the colors are bright or not, which
allows user to chose a scheme that is compatible with their console,
one of: &ldquo;light&rdquo;, &ldquo;dark&rdquo;, &ldquo;normal&rdquo;
</p>
</li>
<li> <p><code>color.mode</code>: &ldquo;rgb&rdquo; for full color or &ldquo;yb&rdquo; for
dichromats (yb stands for Yellow Blue).
</p>
</li></ul>

<p>Each of these dimensions can be specified directly via the corresponding
parameters to the <code>diff*</code> methods.
</p>


<h3>Methods</h3>

<p><code>PaletteOfStyles</code> objects have The following methods implemented:
</p>

<ul>
<li> <p><code>[</code>, <code>[&lt;-</code>, <code>[[</code>
</p>
</li>
<li><p> show
</p>
</li>
<li><p> summary
</p>
</li>
<li><p> dimnames
</p>
</li></ul>



<h3>Structural Details</h3>

<p>The array/list is stored in the <code>data</code> slot of
<code>PaletteOfStyles</code> objects.  Subsetting methods are provided so you
may operate directly on the S4 object as you would on a regular array.
</p>
<p>The array/list must be fully populated with objects that are or inherit
<code>Style</code>, or are &ldquo;classRepresentation&rdquo; objects (i.e. those of
the type returned by <code><a href="methods.html#topic+getClassDef">getClassDef</a></code>) that extend <code>Style</code>.
By default the array is populated only with &ldquo;classRepresentation&rdquo;
objects as that allows the list form of the <code>style</code> parameter to the
<code>diff*</code> methods.  If there is a particular combination of coordinates
that does not have a corresponding defined style a reasonable substitution
must be provided.  For example, this package only defines &ldquo;light&rdquo;
HTML styles, so it simply uses that style for all the possible
<code>brightness</code> values.
</p>
<p>There is no explicit check that the objects in the list comply with the
descriptions implied by their coordinates, although the default object
provided by the package does comply for the most part.  One check that is
carried out is that any element that has a &ldquo;html&rdquo; value in the
<code>format</code> dimension extends <code>StyleHtml</code>.
</p>
<p>While the list may only have the three dimensions described, you can add
values to the dimensions provided the values described above are the first
ones in each of their corresponding dimensions.  For example, if you wanted
to allow for styles that would render in <code>grid</code> graphics, you could
generate a default list with a &ldquo;&quot;grid&quot;&rdquo; value appended to the values
of the <code>format</code> dimension.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Look at all "ansi256" styles (assumes compatible terminal)
PaletteOfStyles()["ansi256",,]

## End(Not run)
## Generate the default style object palette, and replace
## the ansi256 / light / rgb style with our modified one
## which for illustrative purposes is the raw style
my.pal &lt;- PaletteOfStyles()
my.style &lt;- StyleRaw()   # See `?Style` for custom styles
my.style@funs@word.delete &lt;- function(x) sprintf("--%s--", x)
my.pal["ansi256", "light", "rgb"] &lt;- list(my.style) # note `list()`
## Output has no format now for format/color.mode/brightness
## we modified ...
## `pager="off"` for CRAN compliance; you may omit in normal use
diffPrint(
   1:3, 2:5, format="ansi256", color.mode="rgb", brightness="light",
   palette.of.styles=my.pal, pager="off", disp.width=80
)
## If so desired, set our new style palette as the default
## one; could also pass directly as argument to `diff*` funs
## Not run: 
options(diffobj.palette=defs)

## End(Not run)
</code></pre>

<hr>
<h2 id='par_frame'>Get Parent Frame of S4 Call Stack</h2><span id='topic+par_frame'></span>

<h3>Description</h3>

<p>Implementation of the <code>function(x=parent.frame()) ...</code> pattern for the
<code><a href="#topic+diffPrint">diff*</a></code> methods since the normal pattern does not
work with S4 methods.  Works by looking through the call stack and
identifying what call likely initiated the S4 dispatch.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>par_frame()
</code></pre>


<h3>Details</h3>

<p>The function is not exported and intended only for use as the default value
for the <code>frame</code> argument for the <code><a href="#topic+diffPrint">diff*</a></code>
methods.
</p>
<p>Matching is done purely by looking for the last repeated call followed
by <code>.local(target, current, ...)</code> that is not a call to <code>eval</code>.
This pattern seems to match the correct call most of the time.
Since methods can be renamed by the user we make no attempt to verify method
names.  This method could potentially be tricked if you implement custom
<code><a href="#topic+diffPrint">diff*</a></code> methods that somehow
issue two identical sequential calls before calling <code>callNextMethod</code>.
Failure in this case means the wrong <code>frame</code> will be returned.
</p>


<h3>Value</h3>

<p>an environment
</p>

<hr>
<h2 id='Rdiff_chr'>Run Rdiff Directly on R Objects</h2><span id='topic+Rdiff_chr'></span><span id='topic+Rdiff_obj'></span>

<h3>Description</h3>

<p>These functions are here for reference and testing purposes.  They are
wrappers to <code>tools::Rdiff</code> and rely on an existing system diff utility.
You should be using <code><a href="#topic+ses">ses</a></code> or <code><a href="#topic+diffChr">diffChr</a></code> instead of
<code>Rdiff_chr</code> and <code><a href="#topic+diffPrint">diffPrint</a></code> instead of <code>Rdiff_obj</code>.
See limitations in note.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rdiff_chr(from, to, silent = FALSE, minimal = FALSE, nullPointers = TRUE)

Rdiff_obj(from, to, silent = FALSE, minimal = FALSE, nullPointers = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Rdiff_chr_+3A_from">from</code></td>
<td>
<p>character or object coercible to character for <code>Rdiff_chr</code>,
any R object with <code>Rdiff_obj</code>, or a file pointing to an RDS object</p>
</td></tr>
<tr><td><code id="Rdiff_chr_+3A_to">to</code></td>
<td>
<p>character same as <code>from</code></p>
</td></tr>
<tr><td><code id="Rdiff_chr_+3A_silent">silent</code></td>
<td>
<p>TRUE or FALSE, whether to display output to screen</p>
</td></tr>
<tr><td><code id="Rdiff_chr_+3A_minimal">minimal</code></td>
<td>
<p>TRUE or FALSE, whether to exclude the lines that show the
actual differences or only the actual edit script commands</p>
</td></tr>
<tr><td><code id="Rdiff_chr_+3A_nullpointers">nullPointers</code></td>
<td>
<p>passed to <code>tools::Rdiff</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>Rdiff_chr</code> runs diffs on character vectors or objects coerced to
character vectors, where each value in the vectors is treated as a line in a
file.  <code>Rdiff_chr</code> always runs with the <code>useDiff</code> and <code>Log</code>
parameters set to <code>TRUE</code>.
</p>
<p><code>Rdiff_obj</code> runs diffs on the <code>print</code>ed representation of
the provided objects.  For each of <code>from</code>, <code>to</code>, will check if they
are 1 length character vectors referencing an RDS file, and will use the
contents of that RDS file as the object to compare.
</p>


<h3>Value</h3>

<p>the Rdiff output, invisibly if <code>silent</code> is FALSE
Rdiff_chr(letters[1:5], LETTERS[1:5])
Rdiff_obj(letters[1:5], LETTERS[1:5])
</p>


<h3>Note</h3>

<p>These functions will try to use the system <code>diff</code> utility. This
will fail in systems that do not have that utility available (e.g. windows
installation without Rtools).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ses">ses</a></code>, <code><a href="#topic+diffPrint">diff*</a></code>
</p>

<hr>
<h2 id='ses'>Shortest Edit Script</h2><span id='topic+ses'></span><span id='topic+ses_dat'></span>

<h3>Description</h3>

<p>Computes shortest edit script to convert <code>a</code> into <code>b</code> by removing
elements from <code>a</code> and adding elements from <code>b</code>.  Intended primarily
for debugging or for other applications that understand that particular
format.  See <a href="http://www.gnu.org/software/diffutils/manual/diffutils.html#Detailed-Normal">GNU diff docs</a>
for how to interpret the symbols.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ses(a, b, max.diffs = gdo("max.diffs"), warn = gdo("warn"))

ses_dat(a, b, extra = TRUE, max.diffs = gdo("max.diffs"), warn = gdo("warn"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ses_+3A_a">a</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="ses_+3A_b">b</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="ses_+3A_max.diffs">max.diffs</code></td>
<td>
<p>integer(1L), number of <em>differences</em> (default 50000L)
after which we abandon the <code>O(n^2)</code> diff algorithm in favor of a naive
<code>O(n)</code> one. Set to <code>-1L</code> to stick to the original algorithm up to
the maximum allowed (~INT_MAX/4).</p>
</td></tr>
<tr><td><code id="ses_+3A_warn">warn</code></td>
<td>
<p>TRUE (default) or FALSE whether to warn if we hit
<code>max.diffs</code>.</p>
</td></tr>
<tr><td><code id="ses_+3A_extra">extra</code></td>
<td>
<p>TRUE (default) or FALSE, whether to also return the indices in
<code>a</code> and <code>b</code> the diff values are taken from.  Set to FALSE for a
small performance gain.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ses</code> will be much faster than any of the
<code><a href="#topic+diffPrint">diff*</a></code> methods, particularly for large inputs with
limited numbers of differences.
</p>
<p>NAs are treated as the string &ldquo;NA&rdquo;.  Non-character inputs are coerced
to character.
</p>
<p><code>ses_dat</code> provides a semi-processed &ldquo;machine-readable&rdquo; version of
precursor data to <code>ses</code> that may be useful for those desiring to use the
raw diff data and not the printed output of <code>diffobj</code>, but do not wish
to manually parse the <code>ses</code> output.  Whether it is faster than
<code>ses</code> or not depends on the ratio of matching to non-matching values as
<code>ses_dat</code> includes matching values whereas <code>ses</code> does not.  See
examples.
</p>


<h3>Value</h3>

<p>character shortest edit script, or a machine readable version of it
as a <code>data.frame</code> with columns <code>op</code> (factor, values
&ldquo;Match&rdquo;, &ldquo;Insert&rdquo;, or &ldquo;Delete&rdquo;), <code>val</code> character
corresponding to the value taken from either <code>a</code> or <code>b</code>,
and if <code>extra</code> is TRUE, integer columns <code>id.a</code> and <code>id.b</code>
corresponding to the indices in <code>a</code> or <code>b</code> that <code>val</code> was
taken from.  See Details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- letters[1:6]
b &lt;- c('b', 'CC', 'DD', 'd', 'f')
ses(a, b)
(dat &lt;- ses_dat(a, b))

## use `ses_dat` output to construct a minimal diff
## color with ANSI CSI SGR
diff &lt;- dat[['val']]
del &lt;- dat[['op']] == 'Delete'
ins &lt;- dat[['op']] == 'Insert'
if(any(del))
  diff[del] &lt;- paste0("\033[33m- ", diff[del], "\033[m")
if(any(ins))
  diff[ins] &lt;- paste0("\033[34m+ ", diff[ins], "\033[m")
if(any(!ins &amp; !del))
  diff[!ins &amp; !del] &lt;- paste0("  ", diff[!ins &amp; !del])
writeLines(diff)

## We can recover `a` and `b` from the data
identical(subset(dat, op != 'Insert', val)[[1]], a)
identical(subset(dat, op != 'Delete', val)[[1]], b)
</code></pre>

<hr>
<h2 id='show+2CDiffSummary-method'>Display DiffSummary Objects</h2><span id='topic+show+2CDiffSummary-method'></span>

<h3>Description</h3>

<p>Display DiffSummary Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DiffSummary'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CDiffSummary-method_+3A_object">object</code></td>
<td>
<p>a <code>DiffSummary</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, invisbly
show(
summary(diffChr(letters, letters[-c(5, 15)], format=&quot;raw&quot;, pager=&quot;off&quot;))
)
</p>

<hr>
<h2 id='show+2CPaletteOfStyles-method'>Display a PaletteOfStyles</h2><span id='topic+show+2CPaletteOfStyles-method'></span>

<h3>Description</h3>

<p>Display a PaletteOfStyles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'PaletteOfStyles'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CPaletteOfStyles-method_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, invisibly
</p>

<hr>
<h2 id='show+2CStyle-method'>Show Method for Style Objects</h2><span id='topic+show+2CStyle-method'></span><span id='topic+show+2CStyleHtml-method'></span>

<h3>Description</h3>

<p>Display a small sample diff with the Style object styles applied.  For
ANSI light and dark styles, will also temporarily set the background and
foreground colors to ensure they are compatible with the style, even though
this is not done in normal output (i.e. if you intend on using a
&ldquo;light&rdquo; style, you should set your terminal background color to be
light or expect sub-optimal rendering).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Style'
show(object)

## S4 method for signature 'StyleHtml'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CStyle-method_+3A_object">object</code></td>
<td>
<p>a <code>Style</code> S4 object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show(StyleAnsi256LightYb())  # assumes ANSI colors supported
</code></pre>

<hr>
<h2 id='strip_hz_control'>Replace Horizontal Spacing Control Characters</h2><span id='topic+strip_hz_control'></span>

<h3>Description</h3>

<p>Removes tabs, newlines, and manipulates the text so that
it looks the same as it did with those horizontal control
characters embedded.  Currently carriage returns are also processed, but
in the future they no longer will be.  This function is used when the
<code>convert.hz.white.space</code> parameter to the
<code><a href="#topic+diffPrint">diff*</a></code> methods is active.  The term &ldquo;strip&rdquo;
is a misnomer that remains for legacy reasons and lazyness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strip_hz_control(txt, stops = 8L, sgr.supported)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="strip_hz_control_+3A_txt">txt</code></td>
<td>
<p>character to covert</p>
</td></tr>
<tr><td><code id="strip_hz_control_+3A_stops">stops</code></td>
<td>
<p>integer, what tab stops to use</p>
</td></tr>
<tr><td><code id="strip_hz_control_+3A_sgr.supported">sgr.supported</code></td>
<td>
<p>logical whether the current display device supports
ANSI CSI SGR.  See <code><a href="#topic+diffPrint">diff*</a></code>'s <code>sgr.supported</code>
parameter.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an internal function with exposed documentation because it is
referenced in an external function's documentation.
</p>


<h3>Value</h3>

<p>character, 'txt' with horizontal control sequences
replaced.
</p>

<hr>
<h2 id='Style-class'>Customize Appearance of Diff</h2><span id='topic+Style-class'></span><span id='topic+Style'></span><span id='topic+StyleRaw-class'></span><span id='topic+StyleRaw'></span><span id='topic+StyleAnsi-class'></span><span id='topic+StyleAnsi'></span><span id='topic+StyleAnsi8NeutralRgb-class'></span><span id='topic+StyleAnsi8NeutralRgb'></span><span id='topic+StyleAnsi8NeutralYb-class'></span><span id='topic+StyleAnsi8NeutralYb'></span><span id='topic+StyleAnsi256LightRgb-class'></span><span id='topic+StyleAnsi256LightRgb'></span><span id='topic+StyleAnsi256LightYb-class'></span><span id='topic+StyleAnsi256LightYb'></span><span id='topic+StyleAnsi256DarkRgb-class'></span><span id='topic+StyleAnsi256DarkRgb'></span><span id='topic+StyleAnsi256DarkYb-class'></span><span id='topic+StyleAnsi256DarkYb'></span><span id='topic+StyleHtml-class'></span><span id='topic+StyleHtml'></span><span id='topic+StyleHtmlLightRgb-class'></span><span id='topic+StyleHtmlLightRgb'></span><span id='topic+StyleHtmlLightYb-class'></span><span id='topic+StyleHtmlLightYb'></span>

<h3>Description</h3>

<p>S4 objects that expose the formatting controls for <code>Diff</code>
objects.  Many predefined formats are defined as classes that extend the
base <code>Style</code> class.  You may fine tune styles by either extending
the pre-defined classes, or modifying an instance thereof.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="Style-class_+3A_funs">funs</code></td>
<td>
<p>a <code><a href="#topic+StyleFuns">StyleFuns</a></code> object that contains all the functions
represented above</p>
</td></tr>
<tr><td><code id="Style-class_+3A_text">text</code></td>
<td>
<p>a <code><a href="#topic+StyleText">StyleText</a></code> object that contains the non-content
text used by the diff (e.g. <code>gutter.insert.txt</code>)</p>
</td></tr>
<tr><td><code id="Style-class_+3A_summary">summary</code></td>
<td>
<p>a <code><a href="#topic+StyleSummary">StyleSummary</a></code> object that contains formatting
functions and other meta data for rendering summaries</p>
</td></tr>
<tr><td><code id="Style-class_+3A_pad">pad</code></td>
<td>
<p>TRUE or FALSE, whether text should be right padded</p>
</td></tr>
<tr><td><code id="Style-class_+3A_pager">pager</code></td>
<td>
<p>what type of <code><a href="#topic+Pager">Pager</a></code> to use</p>
</td></tr>
<tr><td><code id="Style-class_+3A_nchar.fun">nchar.fun</code></td>
<td>
<p>function to use to count characters; intended mostly for
internal use (used only for gutters as of version 0.2.0).</p>
</td></tr>
<tr><td><code id="Style-class_+3A_wrap">wrap</code></td>
<td>
<p>TRUE or FALSE, whether text should be hard wrapped at
<code>disp.width</code></p>
</td></tr>
<tr><td><code id="Style-class_+3A_na.sub">na.sub</code></td>
<td>
<p>what character value to substitute for NA elements; NA elements
are generated when lining up side by side diffs by adding padding rows; by
default the text styles replace these with a blank character string, and
the HTML styles leave them as NA for the HTML formatting functions to deal
with</p>
</td></tr>
<tr><td><code id="Style-class_+3A_blank">blank</code></td>
<td>
<p>sub what character value to replace blanks with; needed in
particular for HTML rendering (uses <code>"&amp;nbsp;"</code>) to prevent lines from
collapsing</p>
</td></tr>
<tr><td><code id="Style-class_+3A_disp.width">disp.width</code></td>
<td>
<p>how many columns the text representation of the objects to
diff is allowed to take up before it is hard wrapped (assuming <code>wrap</code>
is TRUE).  See param <code>disp.width</code> for <code><a href="#topic+diffPrint">diffPrint</a></code>.</p>
</td></tr>
<tr><td><code id="Style-class_+3A_finalizer">finalizer</code></td>
<td>
<p>function that accepts at least two parameters and requires
no more than two parameters, will receive as the first parameter the
the object to render (either a <code>Diff</code> or a <code>DiffSummary</code>
object), and the text representation of that object as the second
argument.  This allows final modifications to the character output so that
it is displayed correctly by the pager.  For example, <code>StyleHtml</code>
objects use it to generate HTML headers if the <code>Diff</code> is destined to
be displayed in a browser.  The object themselves are passed along to
provide information about the paging device and other contextual data to
the function.</p>
</td></tr>
<tr><td><code id="Style-class_+3A_html.output">html.output</code></td>
<td>
<p>(<code>StyleHtml</code> objects only) one of:
</p>

<ul>
<li> <p>&ldquo;page&rdquo;: Include all HTML/CSS/JS required to create a
stand-alone web page with the diff; in this mode the diff string will
be re-encoded with <code><a href="base.html#topic+enc2utf8">enc2utf8</a></code> and the HTML page encoding
will be declared as UTF-8.
</p>
</li>
<li> <p>&ldquo;diff.w.style&rdquo;: The CSS and HTML, but without any of the
outer tags that would make it a proper HTML page (i.e. no
<code>&lt;html&gt;/&lt;head&gt;</code> tags or the like) and without the JS; note that
technically this is illegal HTML since we have <code>&lt;style&gt;</code> tags
floating outside of <code>&lt;head&gt;</code> tags, but it seems to work in most
browsers.
</p>
</li>
<li> <p>&ldquo;diff.only&rdquo;: Like &ldquo;diff.w.style&rdquo;, but without the CSS
</p>
</li>
<li> <p>&ldquo;auto&rdquo;: Pick one of the above based on <code>Pager</code>, will
chose &ldquo;page&rdquo; if the pager is of type <code>PagerBrowser</code> (as in
that case the output is destined to be displayed in a browser like
device), or &ldquo;diff.only&rdquo; if it is not.
</p>
</li></ul>
</td></tr>
<tr><td><code id="Style-class_+3A_escape.html.entities">escape.html.entities</code></td>
<td>
<p>(<code>StyleHtml</code> objects only) TRUE (default)
or FALSE, whether to escape HTML entities in the input</p>
</td></tr>
<tr><td><code id="Style-class_+3A_scale">scale</code></td>
<td>
<p>(<code>StyleHtml</code> objects only) TRUE (default) or FALSE,
whether to scale HTML output to fit to the viewport</p>
</td></tr>
<tr><td><code id="Style-class_+3A_css">css</code></td>
<td>
<p>(<code>StyleHtml</code> objects only) path to file containing CSS styles
to style HTML output with</p>
</td></tr>
<tr><td><code id="Style-class_+3A_js">js</code></td>
<td>
<p>(<code>StyleHtml</code> objects only) path to file containing Javascript
used for scaling output to viewports.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Style S4 object
</p>


<h3>Pre-defined Classes</h3>

<p>Pre-defined classes are used to populate the <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>
object, which in turn allows the <code>diff*</code> methods to pick the
appropriate <code>Style</code> for each combination of the <code>format</code>,
<code>color.mode</code>, and <code>brightness</code> parameters when the <code>style</code>
parameter is set to &ldquo;auto&rdquo;.  The following classes are pre-defined:
</p>

<ul>
<li> <p><code>StyleRaw</code>: No styles applied
</p>
</li>
<li> <p><code>StyleAnsi8NeutralRgb</code>
</p>
</li>
<li> <p><code>StyleAnsi8NeutralYb</code>
</p>
</li>
<li> <p><code>StyleAnsi256LightRgb</code>
</p>
</li>
<li> <p><code>StyleAnsi256LightYb</code>
</p>
</li>
<li> <p><code>StyleAnsi256DarkRgb</code>
</p>
</li>
<li> <p><code>StyleAnsi256DarkYb</code>
</p>
</li>
<li> <p><code>StyleHtmlLightRgb</code>
</p>
</li>
<li> <p><code>StyleHtmlLightYb</code>
</p>
</li></ul>

<p>Each of these classes has an associated constructor function with the
same name (see examples).  Objects instantiated from these classes
may also be used directly as the value for the <code>style</code> parameter to the
<code>diff*</code> methods. This will override the automatic selection process
that uses <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code>.  If you wish to tweak an
auto-selected style rather than explicitly specify one, pass a parameter
list instead of a <code>Style</code> objects as the <code>style</code> parameter to the
<code>diff*</code> methods (see examples).
</p>
<p>There are predefined classes for most combinations of
<code>format/color.mode/brightness</code>, but not all.  For example, there are
only &ldquo;light&rdquo; <code>brightness</code> defined for the &ldquo;html&rdquo;
<code>format</code>, and those classes are re-used for all possible
<code>brightness</code> values, and the 8 color ANSI neutral classes are used
for the 256 color neutral selections as well.
</p>
<p>To get a preview of what a style looks like just instantiate
an object; the <code>show</code> method will output a trivial diff to screen with
styles applied.  Note that for ANSI styles of the dark and light variety
the show method colors the terminal background and foregrounds in compatible
colors.  In normal usage the terminal background and foreground colors are
left untouched so you should not expect light styles to look good on dark
background and vice versa even if they render correctly when showing the
style object.
</p>


<h3>Style Structure</h3>

<p>Most of the customization is done by specifying functions that operate on
character vectors and return a modified character vector of the same length.
The intended use case is to pass <code>crayon</code> functions such as
<code>crayon::red</code>, although you may pass any function of your liking
that behaves as described.  Formatting functions are expected to return their
inputs formatted in such a way that their <em>display</em> width is unchanged.
If your formatting functions change display width output may not render
properly, particularly when using <code>mode="sidebyside"</code>.
</p>
<p>The visual representation of the diff has many nested components.  The
functions you specify here will be applied starting with the innermost ones.
A schematic of the various component that represent an inserted line follows
(note &ldquo;insert&rdquo; abbreviated to &ldquo;ins&rdquo;, and &ldquo;gutter&rdquo;
abbreviated to &ldquo;gtr&rdquo;):
</p>
<pre>+- line ---------------------------------------------------+
|+- line.ins ---------------------------------------------+|
||+- gtr ------------------------++- text ---------------+||
|||+- gtr.ins ---++- gtr.pad ---+||+- text.ins ---------+|||
||||             ||             ||||      +- word.ins -+||||
|||| gtr.ins.txt || gtr.pad.txt |||| DIFF | TEXT HERE  |||||
||||             ||             ||||      +------------+||||
|||+-------------++-------------+||+--------------------+|||
||+------------------------------++----------------------+||
|+--------------------------------------------------------+|
+----------------------------------------------------------+
</pre>
<p>A similar model applies to deleted and matching lines.  The boxes represent
functions.  <code>gutter.insert.txt</code> represents the text to use in the gutter
and is not a function. <code>DIFF TEXT HERE</code> is text from the objects being
diffed, with the portion that has different words inside the
<code>word.insert</code>.  <code>gutter.pad</code> and <code>gutter.pad.txt</code> are used to
separate the gutter from the text and usually end up resolving to a space.
</p>
<p>Most of the functions defined here default to <code><a href="base.html#topic+identity">identity</a></code>, but
you are given the flexibility to fully format the diff.  See
<code><a href="#topic+StyleFuns">StyleFuns</a></code> and <code><a href="#topic+StyleText">StyleText</a></code> for a full listing of
the adjustable elements.
</p>
<p>In side-by-side mode there are two &ldquo;lines&rdquo; per screen line, each with
the structure described here.
</p>
<p>The structure described here may change in the future.
</p>


<h3>HTML Styles</h3>

<p>If you use a <code>Style</code> that inherits from <code>StyleHtml</code> the
diff will be wrapped in HTML tags, styled with CSS, and output to
<code>getOption("viewer")</code> if your IDE supports it (e.g. Rstudio), or
directly to the browser otherwise, assuming that the default
<code><a href="#topic+Pager">Pager</a></code> or a correctly configured pager that inherits from
<code><a href="#topic+PagerBrowser">PagerBrowser</a></code> is in effect.  Otherwise, the raw HTML will be
output to your terminal.
</p>
<p>By default HTML output sent to the viewer/browser is a full stand-alone
webpage with CSS styles to format and color the diff, and JS code to
handle scaling.  The CSS and JS is read from the
<a href="#topic+webfiles">default files</a> and injected into the HTML to simplify
packaging of the output.  You can customize the CSS and JS by using the
<code>css</code> and <code>js</code> arguments respectively, but read the rest of this
documentation section if you plan on doing so.
</p>
<p>Should you want to capture the HTML output for use elsewhere, you can do
so by using <code>as.character</code> on the return value of the <code>diff*</code>
methods.  If you want the raw HTML without any of the headers, CSS, and
JS use <code>html.ouput="diff.only"</code> when you instantiate the
<code>StyleHtml</code> object (see examples), or disable the <code><a href="#topic+Pager">Pager</a></code>.
Another option is <code>html.output="diff.w.style"</code> which will add
<code>&lt;style&gt;</code> tags with the CSS, but without wrapping those in <code>&lt;head&gt;</code>
tags. This last option results in illegal HTML with a <code>&lt;style&gt;</code> block
outside of the <code>&lt;head&gt;</code> block, but appears to work and is useful if you
want to embed HTML someplace but do not have access to the headers.
</p>
<p>If you wish to modify the CSS styles you should do so cautiously.  The
HTML and CSS work well together out of the box, but may not take to kindly
to modifications.  The safest changes you can make are to the colors of the
scheme.  You also probably should not modify the functions in the
<code>@funs</code> slot of the <code>StyleHtml</code> object.  If you want to provide
your own custom styles make a copy of the file at the location returned by
<code>diffobj_css()</code>, modify it to your liking, and pass the location of your
modified sheet back via the <code>css</code> argument (see examples).
</p>
<p>The javascript controls the scaling of the output such that its width fits
in the viewport.  If you wish to turn of this behavior you can do so via the
<code>scale</code> argument.  You may need to modify the javascript if you modify
the <code>@funs</code> functions, but otherwise you are probably best off leaving
the javascript untouched.  You can provide the location of a modified
javascript file via the <code>js</code> argument.
</p>
<p>Both the CSS and JS files can be specified via options,
&ldquo;diffobj.html.css&rdquo;, and &ldquo;diffobj.html.js&rdquo; respectively.
</p>
<p>If you define your own custom <code>StyleHtml</code> object you may want to modify
the slot <code>@funs@container</code>.  This slot contains a function that is
applied to the entire diff output.  For example, <code>StyleHtmlLightRgb</code>
uses <code>@funs@container &lt;- cont_f("light", "rgb")</code>.  <code>cont_f</code> returns
a function that accepts a character vector as an argument and returns
that value wrapped in a <code>DIV</code> block with class
&ldquo;&quot;diffobj-container light rgb&quot;&rdquo;.  This allows the CSS style sheet to
target the <code>Diff</code> elements with the correct styles.
</p>


<h3>Modifying Style Parameters Directly</h3>

<p>Often you will want to specify some of the style parameters (e.g.
<code>scale</code> for html styles) while still relying on the default style
selection to pick the specific style.  You can do so by passing a list to the
<code>style</code> parameter of the <code><a href="#topic+diffPrint">diff*</a></code> methods.
See examples.
</p>


<h3>New Classes</h3>

<p>You can in theory create entirely new classes that extent <code>Style</code>.  For
example you could generate a class that renders the diff in <code>grid</code>
graphics.  Note however that we have not tested such extensions and it is
possible there is some embedded code that will misbehave with such a new
class.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Create a new style based on existing style by changing
## gutter symbols and guide color; see `?StyleFuns` and
## `?StyleText` for a full list of adjustable elements
my.style &lt;- StyleAnsi8NeutralYb()
my.style   ## `show` method gives you a preview of the style
my.style@text@gutter.insert &lt;- "+++"
my.style@text@gutter.delete &lt;- "---"
my.style@funs@text.guide &lt;- crayon::green
my.style   ## Notice gutters and guide color

## Provide a custom style sheet; here we assume there is a style sheet at
## `HOME/web/mycss.css`
my.css &lt;- file.path(path.expand("~"), "web", "mycss.css")
diffPrint(1:5, 2:6, style=StyleHtmlLightYb(css=my.css))

## Turn of scaling; notice how we pass a list to `style`
## and we do not need to specify a specific style
diffPrint(letters, letters[-5], format="html", style=list(scale=FALSE))

## Alternatively we can do the same by specifying a style, but we must
## give an exact html style instead of relying on preferences to pick
## one for us
my.style &lt;- StyleHtmlLightYb(scale=FALSE)
diffPrint(letters, letters[-5], style=my.style)

## End(Not run)
## Return only the raw HTML without any of the headers
as.character(
  diffPrint(1:5, 2:6, format="html", style=list(html.output="diff.only"))
)
</code></pre>

<hr>
<h2 id='StyleFuns-class'>Functions Used for Styling Diff Components</h2><span id='topic+StyleFuns-class'></span><span id='topic+StyleFuns'></span>

<h3>Description</h3>

<p>Except for <code>container</code> every function specified here should be
vectorized and apply formatting to each element in a character vectors.  The
functions must accept at least one argument and require no more than one
argument.  The text to be formatted will be passed as a character vector
as the first argument to each function.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="StyleFuns-class_+3A_container">container</code></td>
<td>
<p>function used primarily by HTML styles to generate an
outermost <code>DIV</code> that allows for CSS targeting of its contents
(see <code><a href="#topic+cont_f">cont_f</a></code> for a function generator appropriate for use
here)</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_line">line</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_line.insert">line.insert</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_line.delete">line.delete</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_line.match">line.match</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_line.guide">line.guide</code></td>
<td>
<p>function formats guide lines (see <code><a href="#topic+guides">guides</a></code>)</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_text">text</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_text.insert">text.insert</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_text.delete">text.delete</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_text.match">text.match</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_text.guide">text.guide</code></td>
<td>
<p>function formats guide lines (see <code><a href="#topic+guides">guides</a></code>)</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter">gutter</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter.insert">gutter.insert</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter.delete">gutter.delete</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter.match">gutter.match</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter.guide">gutter.guide</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_gutter.pad">gutter.pad</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_header">header</code></td>
<td>
<p>function to format each hunk header with</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_banner">banner</code></td>
<td>
<p>function to format entire banner</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_banner.insert">banner.insert</code></td>
<td>
<p>function to format insertion banner</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_banner.delete">banner.delete</code></td>
<td>
<p>function to format deletion banner</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_meta">meta</code></td>
<td>
<p>function format meta information lines</p>
</td></tr>
<tr><td><code id="StyleFuns-class_+3A_context.sep">context.sep</code></td>
<td>
<p>function to format the separator used to visually
distinguish the A and B hunks in &ldquo;context&rdquo; <code>mode</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are applied in post processing steps.  The <code>diff*</code>
methods do not do any of the formatting.  Instead, the formatting is done
only if the user requests to <code>show</code> the object.  Internally, <code>show</code>
first converts the object to a character vector using <code>as.character</code>,
which applies every formatting function defined here except for
<code>container</code>.  Then <code>show</code> applies <code>container</code> before
forwarding the result to the screen or pager.
</p>


<h3>Value</h3>

<p>a StyleFuns S4 object
</p>


<h3>Note</h3>

<p>the slots are set to class &ldquo;ANY&rdquo; to allow classed functions
such as those defined in the <code>crayon</code> package.  Despite this seemingly
permissive slot definition, only functions are allowed in the slots by
the validation functions.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Style">Style</a></code>
</p>

<hr>
<h2 id='StyleSummary-class'>Styling Information for Summaries</h2><span id='topic+StyleSummary-class'></span><span id='topic+StyleSummary'></span><span id='topic+StyleSummaryHtml-class'></span><span id='topic+StyleSummaryHtml'></span>

<h3>Description</h3>

<p>Styling Information for Summaries
</p>


<h3>Slots</h3>


<dl>
<dt><code>container</code></dt><dd><p>function applied to entire summary</p>
</dd>
<dt><code>body</code></dt><dd><p>function applied to everything except the actual map portion of
the summary</p>
</dd>
<dt><code>detail</code></dt><dd><p>function applied to section showing how many deletions /
insertions, etc. occurred</p>
</dd>
<dt><code>map</code></dt><dd><p>function applied to the map portion of the summary</p>
</dd>
</dl>

<hr>
<h2 id='StyleText-class'>Character Tokens Used in Diffs</h2><span id='topic+StyleText-class'></span><span id='topic+StyleText'></span>

<h3>Description</h3>

<p>Various character tokens are used throughout diffs to provide visual cues.
For example, gutters will contain characters that denote deletions and
insertions (<code>&lt;</code> and <code>&gt;</code> by default).
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="StyleText-class_+3A_gutter.insert">gutter.insert</code></td>
<td>
<p>character(1L) text to use as visual cue to indicate
whether a diff line is an insertion, defaults to &ldquo;&gt; &rdquo;</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.insert.ctd">gutter.insert.ctd</code></td>
<td>
<p>character(1L) if a diff line is wrapped, the
visual cue shifts to this character to indicate wrapping occured</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.delete">gutter.delete</code></td>
<td>
<p>character(1L) see <code>gutter.insert</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.delete.ctd">gutter.delete.ctd</code></td>
<td>
<p>character(1L) see <code>gutter.insert.ctd</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.match">gutter.match</code></td>
<td>
<p>character(1L) see <code>gutter.insert</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.match.ctd">gutter.match.ctd</code></td>
<td>
<p>character(1L) see <code>gutter.insert.ctd</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.guide">gutter.guide</code></td>
<td>
<p>character(1L) see <code>gutter.insert</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.guide.ctd">gutter.guide.ctd</code></td>
<td>
<p>character(1L) see <code>gutter.insert.ctd</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.fill">gutter.fill</code></td>
<td>
<p>character(1L) see <code>gutter.insert</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.fill.ctd">gutter.fill.ctd</code></td>
<td>
<p>character(1L) see <code>gutter.insert.ctd</code> above</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_gutter.pad">gutter.pad</code></td>
<td>
<p>character(1L) separator between gutter characters and the
rest of a line in a diff</p>
</td></tr>
<tr><td><code id="StyleText-class_+3A_pad.col">pad.col</code></td>
<td>
<p>character(1L) separator between columns in side by side mode</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a StyleText S4 object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Style">Style</a></code>
</p>

<hr>
<h2 id='summary+2CDiff-method'>Summary Method for Diff Objects</h2><span id='topic+summary+2CDiff-method'></span>

<h3>Description</h3>

<p>Provides high level count of insertions, deletions, and matches, as well as a
&ldquo;map&rdquo; of where the differences are.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Diff'
summary(
  object,
  scale.threshold = 0.1,
  max.lines = 50L,
  width = getOption("width"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CDiff-method_+3A_object">object</code></td>
<td>
<p>at <code>Diff</code> object</p>
</td></tr>
<tr><td><code id="summary+2B2CDiff-method_+3A_scale.threshold">scale.threshold</code></td>
<td>
<p>numeric(1L) between 0 and 1, how much distortion to
allow when creating the summary map, where 0 is none and 1 is as much as
needed to fit under <code>max.lines</code>, defaults to 0.1</p>
</td></tr>
<tr><td><code id="summary+2B2CDiff-method_+3A_max.lines">max.lines</code></td>
<td>
<p>integer(1L) how many lines to allow for the summary map,
defaults to 50</p>
</td></tr>
<tr><td><code id="summary+2B2CDiff-method_+3A_width">width</code></td>
<td>
<p>integer(1L) how many columns wide the output should be, defaults
to <code>getOption("width")</code></p>
</td></tr>
<tr><td><code id="summary+2B2CDiff-method_+3A_...">...</code></td>
<td>
<p>unused, for compatibility with generic</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sequences of single operations (e.g. &quot;DDDDD&quot;) are compressed provided that
compressing them does not distort the relative size of the sequence relative
to the longest such sequence in the map by more than <code>scale.threshold</code>.
Since length 1 sequences cannot be further compressed <code>scale.threshold</code>
does not apply to them.
</p>


<h3>Value</h3>

<p>a <code>DiffSummary</code> object
## 'pager=&quot;off&quot;' for CRAN compliance; you may omit in normal use
summary(diffChr(letters, letters[-c(5, 15)], format=&quot;raw&quot;, pager=&quot;off&quot;))
</p>

<hr>
<h2 id='summary+2CMyersMbaSes-method'>Summary Method for Shortest Edit Path</h2><span id='topic+summary+2CMyersMbaSes-method'></span>

<h3>Description</h3>

<p>Displays the data required to generate the shortest edit path for comparison
between two strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MyersMbaSes'
summary(object, with.match = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CMyersMbaSes-method_+3A_object">object</code></td>
<td>
<p>the <code>diff_myers</code> object to display</p>
</td></tr>
<tr><td><code id="summary+2B2CMyersMbaSes-method_+3A_with.match">with.match</code></td>
<td>
<p>logical(1L) whether to show what text the edit command
refers to</p>
</td></tr>
<tr><td><code id="summary+2B2CMyersMbaSes-method_+3A_...">...</code></td>
<td>
<p>forwarded to the data frame print method used to actually display
the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>whatever the data frame print method returns
</p>

<hr>
<h2 id='summary+2CPaletteOfStyles-method'>Display a Summarized Version of a PaletteOfStyles</h2><span id='topic+summary+2CPaletteOfStyles-method'></span>

<h3>Description</h3>

<p>Display a Summarized Version of a PaletteOfStyles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'PaletteOfStyles'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CPaletteOfStyles-method_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+PaletteOfStyles">PaletteOfStyles</a></code> object</p>
</td></tr>
<tr><td><code id="summary+2B2CPaletteOfStyles-method_+3A_...">...</code></td>
<td>
<p>unused, for compatibility with generic</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character representation showing classes and/or objects in
PaletteOfStyles
summary(PaletteOfStyles())
</p>

<hr>
<h2 id='tag_f'>Make Functions That Wrap Text in HTML Tags</h2><span id='topic+tag_f'></span><span id='topic+div_f+2C'></span><span id='topic+span_f+2C'></span><span id='topic+cont_f'></span><span id='topic+div_f'></span><span id='topic+span_f'></span>

<h3>Description</h3>

<p>Helper functions to generate functions to use as slots for the
<code>StyleHtml@funs</code> classes.  These are functions that return
<em>functions</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_f(tag, class = character(), style = character())

div_f(class = character(), style = character())

span_f(class = character(), style = character())

cont_f(class = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_f_+3A_tag">tag</code></td>
<td>
<p>character(1L) a name of an HTML tag</p>
</td></tr>
<tr><td><code id="tag_f_+3A_class">class</code></td>
<td>
<p>character the CSS class(es)</p>
</td></tr>
<tr><td><code id="tag_f_+3A_style">style</code></td>
<td>
<p>named character inline styles, where the name is the CSS
property and the value the value.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tag_f</code> and related functions (<code>div_f</code>, <code>span_f</code>) produce
functions that are  vectorized and will apply opening and closing tags to
each element of a character vector.  <code>container_f</code> on the other hand
produces a function will collapse a character vector into length 1, and only
then applies the tags.  Additionally, <code>container_f</code> already comes with
the &ldquo;diffobj-container&rdquo; class specified.
</p>


<h3>Value</h3>

<p>a function that accepts a character parameter.  If applied, each
element in the character vector will be wrapped in the div tags
</p>


<h3>Note</h3>

<p>inputs are assumed to be valid class names or CSS styles.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Assuming class 'ex1' has CSS styles defined elsewhere
tag_f("div", "ex1")(LETTERS[1:5])
## Use convenience function, and add some inline styles
div_f("ex2", c(color="green", `font-family`="arial"))(LETTERS[1:5])
## Notice how this is a div with pre-specifed class,
## and only one div is created around the entire data
cont_f()(LETTERS[1:5])
</code></pre>

<hr>
<h2 id='trim'>Methods to Remove Unsemantic Text Prior to Diff</h2><span id='topic+trim'></span><span id='topic+trimPrint+2C'></span><span id='topic+trimStr+2C'></span><span id='topic+trimChr+2C'></span><span id='topic+trimDeparse+2C'></span><span id='topic+trimFile'></span><span id='topic+trimPrint'></span><span id='topic+trimPrint+2CANY+2Ccharacter-method'></span><span id='topic+trimStr'></span><span id='topic+trimStr+2CANY+2Ccharacter-method'></span><span id='topic+trimChr'></span><span id='topic+trimChr+2CANY+2Ccharacter-method'></span><span id='topic+trimDeparse'></span><span id='topic+trimDeparse+2CANY+2Ccharacter-method'></span><span id='topic+trimFile+2CANY+2Ccharacter-method'></span>

<h3>Description</h3>

<p><code><a href="#topic+diffPrint">diff*</a></code> methods, in particular <code>diffPrint</code>,
modify the text representation of an object prior to running the diff to
reduce the incidence of spurious mismatches caused by unsemantic differences.
For example, we look to remove matrix row indices and atomic vector indices
(i.e. the &lsquo;<span class="samp">&#8288;[1,]&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;[1]&#8288;</span>&rsquo; strings at the beginning of each display
line).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimPrint(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
trimPrint(obj, obj.as.chr)

trimStr(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
trimStr(obj, obj.as.chr)

trimChr(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
trimChr(obj, obj.as.chr)

trimDeparse(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
trimDeparse(obj, obj.as.chr)

trimFile(obj, obj.as.chr)

## S4 method for signature 'ANY,character'
trimFile(obj, obj.as.chr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trim_+3A_obj">obj</code></td>
<td>
<p>the object</p>
</td></tr>
<tr><td><code id="trim_+3A_obj.as.chr">obj.as.chr</code></td>
<td>
<p>character the <code>print</code>ed representation of the object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Consider: </p>
<pre>
&gt; matrix(10:12)
     [,1]
[1,]   10
[2,]   11
[3,]   12
&gt; matrix(11:12)
     [,1]
[1,]   11
[2,]   12
</pre>
<p>In this case, the line by line diff would find all rows of the matrix to
be mismatched because where the data matches (rows containing
11 and 12) the indices do not.  By trimming out the row indices before
the diff, the diff can recognize that row 2 and 3  from the first matrix
should be matched to row 1 and 2 of the second.
</p>
<p>These methods follow a similar interface as the <code><a href="#topic+guides">guide*</a></code>
methods, with one available for each <code>diff*</code> method except for
<code>diffCsv</code> since that one uses <code>diffPrint</code> internally.  The
unsemantic differences are added back after the diff for display purposes,
and are colored in grey to indicate they are ignored in the diff.
</p>
<p>Currently only <code>trimPrint</code> and <code>trimStr</code> do anything meaningful.
<code>trimPrint</code> removes row index headers provided that they are of the
default un-named variety.  If you add row names, or if numeric row indices
are not ascending from 1, they will not be stripped as those have meaning.
<code>trimStr</code> removes the &lsquo;<span class="samp">&#8288;..$&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;..-&#8288;</span>&rsquo;, and &lsquo;<span class="samp">&#8288;..@&#8288;</span>&rsquo; tokens
to minimize spurious matches.
</p>
<p>You can modify how text is trimmed by providing your own functions to the
<code>trim</code> argument of the <code>diff*</code> methods, or by defining
<code>trim*</code> methods for your objects.  Note that the return value for these
functions is the start and end columns of the text that should be
<em>kept</em> and used in the diff.
</p>
<p>As with guides, trimming is on a best efforts basis and may fail with
&ldquo;pathological&rdquo; display representations.  Since the diff still works
even with failed trimming this is considered an acceptable compromise.
Trimming is more likely to fail with nested recursive structures.
</p>


<h3>Value</h3>

<p>a <code>length(obj.as.chr)</code> row and 2 column integer matrix with the
start (first column) and end (second column) character positions of the sub
string to run diffs on.
</p>


<h3>Note</h3>

<p><code>obj.as.chr</code> will be as processed by
<code><a href="#topic+strip_hz_control">strip_hz_control</a></code> and as such will not be identical to the
captured output if it contains tabs, newlines, or carriage returns.
</p>

<hr>
<h2 id='view_or_browse'>Invoke IDE Viewer If Available, browseURL If Not</h2><span id='topic+view_or_browse'></span>

<h3>Description</h3>

<p>Use <code>getOption("viewer")</code> to view HTML output if it is available as
per <a href="https://support.rstudio.com/hc/en-us/articles/202133558-Extending-RStudio-with-the-Viewer-Pane">RStudio</a>. Fallback to <code><a href="utils.html#topic+browseURL">browseURL</a></code>
if not available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_or_browse(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_or_browse_+3A_url">url</code></td>
<td>
<p>character(1L) a location containing a file to display</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the return vaue of <code>getOption("viewer")</code> if it is a function, or
of <code><a href="utils.html#topic+browseURL">browseURL</a></code> if the viewer is not available
</p>

<hr>
<h2 id='webfiles'>Return Location of Default HTML Support Files</h2><span id='topic+webfiles'></span><span id='topic+diffobj_js'></span><span id='topic+diffobj_css'></span>

<h3>Description</h3>

<p>File location for default CSS and JS files.  Note that these files are read
and injected into the output HTML rather than referenced to simplify serving.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffobj_css()

diffobj_js()
</code></pre>


<h3>Value</h3>

<p>path to the default CSS or JS file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>diffobj_css()
diffobj_js()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
