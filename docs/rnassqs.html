<!DOCTYPE html><html><head><title>Help for package rnassqs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rnassqs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#nassqs'><p>Get data and return a data frame</p></a></li>
<li><a href='#nassqs_acres'><p>Get NASS Area given a set of parameters.</p></a></li>
<li><a href='#nassqs_auth'><p>Get/Set the environmental variable NASSQS_TOKEN to the API key</p></a></li>
<li><a href='#nassqs_check'><p>Check the response.</p></a></li>
<li><a href='#nassqs_fields'><p>Deprecated: Return list of NASS QS parameters.</p></a></li>
<li><a href='#nassqs_GET'><p>Issue a GET request to the NASS 'Quick Stats' API</p></a></li>
<li><a href='#nassqs_param_values'><p>Get all values for a specific parameter.</p></a></li>
<li><a href='#nassqs_params'><p>Return list of NASS QS parameters.</p></a></li>
<li><a href='#nassqs_parse'><p>Parse a response object from <code>nassqs_GET()</code>.</p></a></li>
<li><a href='#nassqs_record_count'><p>Get a count of number of records for given parameters.</p></a></li>
<li><a href='#nassqs_yields'><p>Get yield records for a specified crop.</p></a></li>
<li><a href='#rnassqs-package'><p>rnassqs-package: Access the NASS 'Quick Stats' API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Access Data from the NASS 'Quick Stats' API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicholas Potter &lt;econpotter@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Interface to access data via the United States Department of 
  Agriculture's National Agricultural Statistical Service (NASS) 'Quick Stats' 
  web API <a href="https://quickstats.nass.usda.gov/api">https://quickstats.nass.usda.gov/api</a>. Convenience functions 
  facilitate building queries based on available parameters and valid parameter 
  values. This product uses the NASS API but is not endorsed or certified by NASS.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/rnassqs/">https://docs.ropensci.org/rnassqs/</a> (website)
<a href="https://github.com/ropensci/rnassqs/">https://github.com/ropensci/rnassqs/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/rnassqs/issues">https://github.com/ropensci/rnassqs/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, jsonlite, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>here, httptest, knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Collate:</td>
<td>'auth.R' 'helpers.R' 'nassqs.R' 'params.R' 'request.R'
'wrappers.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-11 04:30:23 UTC; potterzot</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicholas Potter [aut, cre],
  Robert Dinterman [ctb],
  Jonathan Adams [ctb],
  Joseph Stachelek [ctb],
  Julia Piaskowski [ctb],
  Adam Sparks [rev],
  Neal Richardson [ctb, rev]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-11 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='nassqs'>Get data and return a data frame</h2><span id='topic+nassqs'></span>

<h3>Description</h3>

<p>The primary function in the <code>rnassqs</code> package, <code>nassqs</code> makes a HTTP GET
request to the USDA-NASS Quick Stats API and returns the data parsed as a
data.frame, plain text, or list. Various other functions make use of <code>nassqs</code>
to make specific queries. For a data request the Quick Stats API returns
JSON that when parsed to a data.frame contains 39 columns and a varying
number of rows depending on the query. Unfortunately there is not a way to
restrict the number of columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs(
  ...,
  agg_level_desc = NULL,
  asd_code = NULL,
  asd_desc = NULL,
  begin_code = NULL,
  class_desc = NULL,
  commodity_desc = NULL,
  congr_district_code = NULL,
  country_code = NULL,
  country_name = NULL,
  county_ansi = NULL,
  county_code = NULL,
  county_name = NULL,
  domaincat_desc = NULL,
  domain_desc = NULL,
  end_code = NULL,
  freq_desc = NULL,
  group_desc = NULL,
  load_time = NULL,
  location_desc = NULL,
  prodn_practice_desc = NULL,
  reference_period_desc = NULL,
  region_desc = NULL,
  sector_desc = NULL,
  short_desc = NULL,
  source_desc = NULL,
  state_alpha = NULL,
  state_ansi = NULL,
  state_fips_code = NULL,
  state_name = NULL,
  statisticcat_desc = NULL,
  unit_desc = NULL,
  util_practice_desc = NULL,
  watershed_code = NULL,
  watershed_desc = NULL,
  week_ending = NULL,
  year = NULL,
  zip_5 = NULL,
  as_numeric = TRUE,
  progress_bar = TRUE,
  format = "csv",
  as = "data.frame"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_+3A_...">...</code></td>
<td>
<p>either a named list of parameters or a series of additional
parameters that include operations, e.g. <code>year__GE = 2010</code> for all
records in 2010 and later. See <code>details</code> for information on available
operators.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_agg_level_desc">agg_level_desc</code></td>
<td>
<p>Geographic level (&quot;AGRICULTURAL DISTRICT&quot;, &quot;COUNTY&quot;,
&quot;INTERNATIONAL&quot;, &quot;NATIONAL&quot;, &quot;REGION : MULTI-STATE&quot;, &quot;REGION : SUB-STATE&quot;,
&quot;STATE&quot;, &quot;WATERSHED&quot;, or &quot;ZIP CODE&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_asd_code">asd_code</code></td>
<td>
<p>Agriculture statistical district code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_asd_desc">asd_desc</code></td>
<td>
<p>Agriculture statistical district name / description.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_begin_code">begin_code</code></td>
<td>
<p>Week number indicating when the data series begins.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_class_desc">class_desc</code></td>
<td>
<p>Commodity class.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_commodity_desc">commodity_desc</code></td>
<td>
<p>Commodity, the primary subject of interest (e.g.,
&quot;CORN&quot;, &quot;CATTLE&quot;, &quot;LABOR&quot;, &quot;TRACTORS&quot;, &quot;OPERATORS&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_congr_district_code">congr_district_code</code></td>
<td>
<p>Congressional District codes.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_country_code">country_code</code></td>
<td>
<p>Country code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_country_name">country_name</code></td>
<td>
<p>Country name.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_county_ansi">county_ansi</code></td>
<td>
<p>County ANSI code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_county_code">county_code</code></td>
<td>
<p>County FIPS code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_county_name">county_name</code></td>
<td>
<p>County name.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_domaincat_desc">domaincat_desc</code></td>
<td>
<p>Domain category within a domain (e.g.,
under domain_desc = &quot;SALES&quot;, domain categories include $1,000 TO $9,999,
$10,000 TO $19,999, etc).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_domain_desc">domain_desc</code></td>
<td>
<p>Domain, a characteristic of operations that produce a
particular commodity (e.g., &quot;ECONOMIC CLASS&quot;, &quot;AREA OPERATED&quot;, &quot;NAICS
CLASSIFICATION&quot;, &quot;SALES&quot;). For chemical usage data, the domain describes
the type of chemical applied to the commodity. The domain_desc: = &quot;TOTAL&quot;
will have no further breakouts; i.e., the data value pertains completely
to the short_desc.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_end_code">end_code</code></td>
<td>
<p>= Week number that the data series ends.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_freq_desc">freq_desc</code></td>
<td>
<p>Time period type covered by the data (&quot;ANNUAL&quot;, &quot;SEASON&quot;,
&quot;MONTHLY&quot;, &quot;WEEKLY&quot;, &quot;POINT IN TIME&quot;). &quot;MONTHLY&quot; often covers more than one
month. &quot;POINT IN TIME&quot; is for a particular day.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_group_desc">group_desc</code></td>
<td>
<p>Commodity group within a sector (e.g., under sector_desc =
&quot;CROPS&quot;, the groups are &quot;FIELD CROPS&quot;, &quot;FRUIT &amp; TREE NUTS&quot;, &quot;HORTICULTURE&quot;,
and &quot;VEGETABLES&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_load_time">load_time</code></td>
<td>
<p>Date and time of the data load, e.g. &quot;2015-02-17 16:05:20&quot;.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_location_desc">location_desc</code></td>
<td>
<p>Location code, e.g. 5-digit fips code for counties.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_prodn_practice_desc">prodn_practice_desc</code></td>
<td>
<p>Production practice, (e.g. &quot;UNDER PROTECTION&quot;,
&quot;OWNED, RIGHTS, LEASED&quot;, &quot;ORGANIC, TRANSITIONING&quot;, &quot;HIRED MANAGER&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_reference_period_desc">reference_period_desc</code></td>
<td>
<p>Reference period of the data (e.g. &quot;JUN&quot;,
&quot;MID SEP&quot;, &quot;WEEK #32&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_region_desc">region_desc</code></td>
<td>
<p>Region name (e.g. &quot;TEXAS&quot;, &quot;WA &amp; OR&quot;, &quot;WEST COAST&quot;,
&quot;UMATILLA&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_sector_desc">sector_desc</code></td>
<td>
<p>Sector, the five high level, broad categories useful to
narrow down choices. (&quot;ANIMALS &amp; PRODUCTS&quot;, &quot;CROPS&quot;, &quot;DEMOGRAPHICS&quot;,
&quot;ECONOMICS&quot;, or &quot;ENVIRONMENTAL&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_short_desc">short_desc</code></td>
<td>
<p>A concatenation of six columns: <code>commodity_desc</code>,
<code>class_desc</code>, <code>prodn_practice_desc</code>, <code>util_practice_desc</code>,
<code>statisticcat_desc</code>, and <code>unit_desc</code>.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_source_desc">source_desc</code></td>
<td>
<p>Source of data (&quot;CENSUS&quot; or &quot;SURVEY&quot;). Census program
includes the Census of Ag as well as follow up projects. Survey program
includes national, state, and county surveys.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_state_alpha">state_alpha</code></td>
<td>
<p>2-character state abbreviation, e.g. &quot;NM&quot;.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_state_ansi">state_ansi</code></td>
<td>
<p>State ANSI code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_state_fips_code">state_fips_code</code></td>
<td>
<p>State FIPS code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_state_name">state_name</code></td>
<td>
<p>Full name of the state, e.g. &quot;ALABAMA&quot;.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_statisticcat_desc">statisticcat_desc</code></td>
<td>
<p>Statistical category of the data (e.g.,
&quot;AREA HARVESTED&quot;, &quot;PRICE RECEIVED&quot;, &quot;INVENTORY&quot;, &quot;SALES&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_unit_desc">unit_desc</code></td>
<td>
<p>The units of the data (e.g. &quot;TONS / ACRE&quot;, &quot;TREES&quot;,
&quot;OPERATIONS&quot;, &quot;NUMBER&quot;, &quot;LB / ACRE&quot;, &quot;BU / PLANTED ACRE&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_util_practice_desc">util_practice_desc</code></td>
<td>
<p>Utilization practice (e.g. &quot;WIND&quot;, &quot;SUGAR&quot;, &quot;SILAGE&quot;,
&quot;ONCE REFINED&quot;, &quot;FEED&quot;, &quot;ANIMAL FEED&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_watershed_code">watershed_code</code></td>
<td>
<p>Watershed code as 8-digit HUC (e.g. &quot;13020100&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_watershed_desc">watershed_desc</code></td>
<td>
<p>Watershed/HUC name (e.g. &quot;UPPER COLORADO&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_week_ending">week_ending</code></td>
<td>
<p>Date of ending week (e.g. &quot;1975-11-22&quot;).</p>
</td></tr>
<tr><td><code id="nassqs_+3A_year">year</code></td>
<td>
<p>Year of the data. Conditional values are possible by appending an
operation to the parameter, e.g. &quot;year__GE = 2020&quot; will return all records
with year &gt;= 2020. See <code>details</code> for more on operations.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_zip_5">zip_5</code></td>
<td>
<p>5-digit zip code.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_as_numeric">as_numeric</code></td>
<td>
<p>Whether to convert data to numeric format. Conversion will
replace missing notation such as &quot;(D)&quot; or &quot;(Z)&quot; with NA, but removes the
need to convert to numeric format after querying.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_progress_bar">progress_bar</code></td>
<td>
<p>Whether or not to display the progress bar.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_format">format</code></td>
<td>
<p>The format to return the query in. Only useful if as = &quot;text&quot;.</p>
</td></tr>
<tr><td><code id="nassqs_+3A_as">as</code></td>
<td>
<p>whether to return a data.frame, list, or text string. See
<code><a href="#topic+nassqs_parse">nassqs_parse()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>nassqs()</code> accepts all parameters that are accepted by the USDA-NASS Quick
Stats. These parameters are listed in <code><a href="#topic+nassqs_params">nassqs_params()</a></code>, and are used to form
the data query.
</p>
<p>Parameters can be modified by operations, which are appended to the parameter
name. For example, &quot;year__GE = 2020&quot; will fetch data in 2020 and after.
Operations can take the following form:
</p>

<ul>
<li><p> __LE: less than or equal (&lt;=)
</p>
</li>
<li><p> __LT: less than (&lt;)
</p>
</li>
<li><p> __GT: greater than (&gt;)
</p>
</li>
<li><p> __GE: = &gt;=
</p>
</li>
<li><p> __LIKE = like
</p>
</li>
<li><p> __NOT_LIKE = not like
</p>
</li>
<li><p> __NE = not equal
</p>
</li></ul>



<h3>Value</h3>

<p>a data frame, list, or text string of requested data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+nassqs_GET">nassqs_GET()</a></code>, <code><a href="#topic+nassqs_parse">nassqs_parse()</a></code>, <code><a href="#topic+nassqs_yields">nassqs_yields()</a></code>, <code><a href="#topic+nassqs_acres">nassqs_acres()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Get corn yields in Virginia in 2012
  params &lt;- list(commodity_desc = "CORN",
                 year = 2012,
                 agg_level_desc = "COUNTY",
                 state_alpha = "VA",
                 statisticcat_desc = "YIELD")
  yields &lt;- nassqs(params)
  head(yields)

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_acres'>Get NASS Area given a set of parameters.</h2><span id='topic+nassqs_acres'></span>

<h3>Description</h3>

<p>Get NASS Area given a set of parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_acres(
  ...,
  area = c("AREA", "AREA PLANTED", "AREA BEARING", "AREA BEARING &amp; NON-BEARING",
    "AREA GROWN", "AREA HARVESTED", "AREA IRRIGATED", "AREA NON-BEARING", "AREA PLANTED",
    "AREA PLANTED, NET")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_acres_+3A_...">...</code></td>
<td>
<p>either a named list of parameters or a series of parameters to
form the query</p>
</td></tr>
<tr><td><code id="nassqs_acres_+3A_area">area</code></td>
<td>
<p>the type of area to return. Default is all types.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of acres data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Get Area bearing for Apples in Washington, 2012.
  params &lt;- list(
    commodity_desc = "APPLES",
    year = "2012",
    state_name = "WASHINGTON",
    agg_level_desc = "STATE"
  )
  area &lt;- nassqs_acres(params, area = "AREA BEARING")
  head(area)

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_auth'>Get/Set the environmental variable NASSQS_TOKEN to the API key</h2><span id='topic+nassqs_auth'></span>

<h3>Description</h3>

<p>If the API key is provided, sets the environmental variable. You can set
your API key in four ways:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_auth(key)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_auth_+3A_key">key</code></td>
<td>
<p>the API key (obtained from <a href="https://quickstats.nass.usda.gov/api">https://quickstats.nass.usda.gov/api</a>)</p>
</td></tr>
</table>


<h3>Details</h3>


<ol>
<li><p> directly or as a variable from your <code>R</code>
program: <code style="white-space: pre;">&#8288;nassqs_auth(key = "&lt;your api key&gt;"&#8288;</code>
</p>
</li>
<li><p> by setting <code>NASSQS_TOKEN</code> in your <code>R</code> environment file (you'll never have
to enter it again).
</p>
</li>
<li><p> by entering it into the console when asked (it will be stored for the
rest of the session.)
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'># Set the API key
nassqs_auth(key = "&lt;your api key&gt;")
Sys.getenv("NASSQS_TOKEN")
</code></pre>

<hr>
<h2 id='nassqs_check'>Check the response.</h2><span id='topic+nassqs_check'></span>

<h3>Description</h3>

<p>Check that the response is valid, i.e. that it doesn't exceed 50,000 records
and that all the parameter values are valid. This is used to ensure that
the query is valid before querying to reduce wait times before receiving an
error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_check(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_check_+3A_response">response</code></td>
<td>
<p>a <code><a href="httr.html#topic+GET">httr::GET()</a></code> request result returned from the API.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing if check is passed, or an informative error if not passed.
</p>

<hr>
<h2 id='nassqs_fields'>Deprecated: Return list of NASS QS parameters.</h2><span id='topic+nassqs_fields'></span>

<h3>Description</h3>

<p>Deprecated. Use <code><a href="#topic+nassqs_params">nassqs_params()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_fields(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_fields_+3A_...">...</code></td>
<td>
<p>a parameter, series of parameters, or a list of parameters that
you would like a description of. If missing, a list of all available
parameters is returned.</p>
</td></tr>
</table>

<hr>
<h2 id='nassqs_GET'>Issue a GET request to the NASS 'Quick Stats' API</h2><span id='topic+nassqs_GET'></span>

<h3>Description</h3>

<p>This is the workhorse of the package that provides the core request
functionality to the NASS 'Quick Stats' API:
<a href="https://quickstats.nass.usda.gov/api">https://quickstats.nass.usda.gov/api</a>.
In most cases <code><a href="#topic+nassqs">nassqs()</a></code> or other high-level functions should be used.
<code>nassqs_GET()</code> uses <code><a href="httr.html#topic+GET">httr::GET()</a></code> to make a HTTP GET request, which returns a
request object which must then be parsed to a data.frame, list, or other <code>R</code>
object. Higher-level functions will do that parsing automatically. However,
if you need access to the request object directly, <code>nassqs_GET()</code> provides
that.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_GET(
  ...,
  api_path = c("api_GET", "get_param_values", "get_counts"),
  progress_bar = TRUE,
  format = c("csv", "json", "xml")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_GET_+3A_...">...</code></td>
<td>
<p>either a named list of parameters or a series of parameters to
use in the query</p>
</td></tr>
<tr><td><code id="nassqs_GET_+3A_api_path">api_path</code></td>
<td>
<p>the API path that determines the type of request being made.</p>
</td></tr>
<tr><td><code id="nassqs_GET_+3A_progress_bar">progress_bar</code></td>
<td>
<p>whether to display the project bar or not.</p>
</td></tr>
<tr><td><code id="nassqs_GET_+3A_format">format</code></td>
<td>
<p>The format to return the query in. Only useful if as = &quot;text&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="httr.html#topic+GET">httr::GET()</a></code> response object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Yields for corn in 2012 in Washington
  params &lt;- list(commodity_desc = "CORN",
                 year = 2012,
                 agg_level_desc = "STATE",
                 state_alpha = "WA",
                 statisticcat_desc = "YIELD")

  # Returns a request object that must be parsed either manually or
  # by using nassqs_parse()
  response &lt;- nassqs_GET(params)
  yields &lt;- nassqs_parse(response)
  head(yields)

  # Get the number of records that would be returned for a given request
  # Equivalent to 'nassqs_record_count(params)'
  response &lt;- nassqs_GET(params, api_path = "get_counts")
  records &lt;- nassqs_parse(response)
  records

  # Get the list of allowable values for the parameters 'statisticcat_desc'
  # Equivalent to 'nassqs_param_values("statisticcat_desc")'
  req &lt;- nassqs_GET(list(param = "statisticcat_desc"),
                    api_path = "get_param_values")
  statisticcat_desc_values &lt;- nassqs_parse(req, as = "list")
  head(statisticcat_desc_values)

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_param_values'>Get all values for a specific parameter.</h2><span id='topic+nassqs_param_values'></span>

<h3>Description</h3>

<p>Returns a list of all possible values for a given parameter. Including
additional parameters will restrict the list of valid values to those for
data meeting the additional parameter restrictions. However, this is only
possible by requesting the entire dataset and then filtering for unique
values. It is recommended to make the query as small as possible if
including additional parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_param_values(param, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_param_values_+3A_param">param</code></td>
<td>
<p>the name of a NASS quickstats parameter</p>
</td></tr>
<tr><td><code id="nassqs_param_values_+3A_...">...</code></td>
<td>
<p>additional parameters for which to filter the valid responses.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing all valid values for that parameter
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # See all values available for the statisticcat_desc field. Values may not
  # be available in the context of other parameters you set, for example
  # a given state may not have any 'YIELD' in blueberries if they don't grow
  # blueberries in that state.
  # Requires an API key:
  
  nassqs_param_values("source_desc")

  # Valid values for a parameter given a specific set of additional
  # parameters
  nassqs_param_values("commodity_desc", state_fips_code = "53", 
                      county_code = "077", year = 2017, 
                      group_desc = "EXPENSES")

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_params'>Return list of NASS QS parameters.</h2><span id='topic+nassqs_params'></span>

<h3>Description</h3>

<p>Contains a simple hard-coded list of all available parameters. If no
parameter name is provided, returns a list of all parameters. More
information can be found in the API documentation on parameters found at
<a href="https://quickstats.nass.usda.gov/api#param_define">https://quickstats.nass.usda.gov/api#param_define</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_params(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_params_+3A_...">...</code></td>
<td>
<p>a parameter, series of parameters, or a list of parameters that
you would like a description of. If missing, a list of all available
parameters is returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of all available parameters or a description of a subset
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get a list of all available parameters
nassqs_params()

# Get information about specific parameters
nassqs_params("source_desc", "group_desc")
</code></pre>

<hr>
<h2 id='nassqs_parse'>Parse a response object from <code>nassqs_GET()</code>.</h2><span id='topic+nassqs_parse'></span>

<h3>Description</h3>

<p>Returns a data frame, list, or text string. If a data.frame, all columns
except <code>year</code> strings because the 'Quick Stats' data returns suppressed data
as '(D)', '(Z)', or other character indicators which mean different things.
Converting the value to a numerical results in NA, which loses that
information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_parse(req, as_numeric = TRUE, as = c("data.frame", "list", "text"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_parse_+3A_req">req</code></td>
<td>
<p>the GET response from <code><a href="#topic+nassqs_GET">nassqs_GET()</a></code></p>
</td></tr>
<tr><td><code id="nassqs_parse_+3A_as_numeric">as_numeric</code></td>
<td>
<p>whether to convert values to numeric format.</p>
</td></tr>
<tr><td><code id="nassqs_parse_+3A_as">as</code></td>
<td>
<p>whether to return a data.frame, list, or text string</p>
</td></tr>
<tr><td><code id="nassqs_parse_+3A_...">...</code></td>
<td>
<p>additional parameters passed to <code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> or
<code><a href="utils.html#topic+read.table">utils::read.csv()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame, list, or text string of the content from the response.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Set parameters and make the request
  params &lt;- list(commodity_desc = "CORN",
                 year = 2012,
                 agg_level_desc = "STATE",
                 state_alpha = "WA",
                 statisticcat_desc = "YIELD")
  response &lt;- nassqs_GET(params)

  # Parse the response to a data frame
  corn &lt;- nassqs_parse(response, as = "data.frame")
  head(corn)

  # Parse the response into a raw character string.
  corn_text&lt;- nassqs_parse(response, as = "text")
  head(corn_text)

  # Get a list of parameter values and parse as a list
  response &lt;- nassqs_GET(list(param = "statisticcat_desc"),
                    api_path = "get_param_values")
  statisticcat_desc_values &lt;- nassqs_parse(response, as = "list")
  head(statisticcat_desc_values)

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_record_count'>Get a count of number of records for given parameters.</h2><span id='topic+nassqs_record_count'></span>

<h3>Description</h3>

<p>Returns the number of records that fit a set of parameters. Useful if your
current parameter set returns more than the 50,000 record limit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_record_count(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_record_count_+3A_...">...</code></td>
<td>
<p>either a named list of parameters or a series of parameters to
form the query</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer that is the number of records that are returned from the
API in response to the query
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Check the number of records returned for corn in 1995, Washington state
  params &lt;- list(
    commodity_desc = "CORN",
    year = "2005",
    agg_level_desc = "STATE",
    state_name = "WASHINGTON"
  )
  
  records &lt;- nassqs_record_count(params) 
  records  # returns 17

## End(Not run)
</code></pre>

<hr>
<h2 id='nassqs_yields'>Get yield records for a specified crop.</h2><span id='topic+nassqs_yields'></span>

<h3>Description</h3>

<p>Returns yields for other specified parameters. This function is intended to
simplify common requests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nassqs_yields(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nassqs_yields_+3A_...">...</code></td>
<td>
<p>either a named list of parameters or a series of parameters to
form the query</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of yields data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Get yields for wheat in 2012, all geographies
  params &lt;- list(
    commodity_desc = "WHEAT", 
    year = "2012", 
    agg_level_desc = "STATE",
    state_alpha = "WA")
    
  yields &lt;- nassqs_yields(params)
  head(yields)

## End(Not run)
</code></pre>

<hr>
<h2 id='rnassqs-package'>rnassqs-package: Access the NASS 'Quick Stats' API</h2><span id='topic+rnassqs-package'></span><span id='topic+rnassqs'></span>

<h3>Description</h3>

<p>rnassqs is a wrapper for the United States Department of Agriculture's
National Agricultural Statistical Service (NASS) 'Quick Stats' API to enable
getting NASS 'Quick Stats' data directly from <span class="rlang"><b>R</b></span>.  Based on the httr API
package guide.
</p>


<h3>Details</h3>

<p>The functions in this package facilitate getting data from NASS 'Quick Stats'.
It handles the API key checking and storage, authorization, and fetching of
data.
</p>


<h3>Author(s)</h3>

<p>Nicholas Potter
</p>


<h3>References</h3>

<p><a href="https://quickstats.nass.usda.gov">https://quickstats.nass.usda.gov</a>
</p>


<h3>See Also</h3>

<p><a href="https://quickstats.nass.usda.gov/api">https://quickstats.nass.usda.gov/api</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
