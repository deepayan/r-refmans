<!DOCTYPE html><html lang="en"><head><title>Help for package LiftTest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {LiftTest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gen.simu.data'><p>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</p></a></li>
<li><a href='#get.asymp.power'><p>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</p></a></li>
<li><a href='#get.min.size'><p>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</p></a></li>
<li><a href='#proportion.test'><p>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A Bootstrap Proportion Test for Brand Lift Testing</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A bootstrap proportion test for Brand Lift Testing to quantify the effectiveness of online advertising. Methods of the bootstrap proportion test are presented in
    Liu, Yu, Mao, Wu, Dyer (2023) &lt;<a href="https://doi.org/10.1145%2F3583780.3615021">doi:10.1145/3583780.3615021</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-09 15:10:50 UTC; wanjun</td>
</tr>
<tr>
<td>Author:</td>
<td>Wanjun Liu [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Wanjun Liu &lt;waliu@linkedin.com&gt;</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-10 14:13:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='gen.simu.data'>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</h2><span id='topic+gen.simu.data'></span>

<h3>Description</h3>

<p>This function generates binomial random samples for the control group
(with sample size <code class="reqn">n_1</code> and success probability <code class="reqn">p_1</code>) and the treatment
group (with sample size <code class="reqn">n_2</code> and success probability <code class="reqn">p_2</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gen.simu.data(n1, n2, p1, p2, summary=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gen.simu.data_+3A_n1">n1</code></td>
<td>
<p>sample size of the control group</p>
</td></tr>
<tr><td><code id="gen.simu.data_+3A_n2">n2</code></td>
<td>
<p>sample size of the treatment group</p>
</td></tr>
<tr><td><code id="gen.simu.data_+3A_p1">p1</code></td>
<td>
<p>success probability of the control group</p>
</td></tr>
<tr><td><code id="gen.simu.data_+3A_p2">p2</code></td>
<td>
<p>success probability of the treatment group</p>
</td></tr>
<tr><td><code id="gen.simu.data_+3A_summary">summary</code></td>
<td>
<p>boolean variable. if TRUE it returns 2x2 contingency table; if FALSE it returns raw binomial random samples.
By default, summary=TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The a 2x2 contingency table is of the following form</p>

<table>
<tr>
 <td style="text-align: left;">
   col1 </td><td style="text-align: left;"> col 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
   control sample size </td><td style="text-align: left;"> control positive response count </td>
</tr>
<tr>
 <td style="text-align: left;">
   treatment sample size </td><td style="text-align: left;"> treatment positive response count </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>A list of simulated data for the control group and the treatment group if <em>summary=FALSE</em> or
a 2x2 contingency table if <em>summary=TRUE</em>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n1 &lt;- 100; n2 &lt;- 100; p1 &lt;- 0.1; p2 &lt;- 0.2
set.seed(1)
sim.data &lt;- gen.simu.data(n1, n2, p1, p2)
sim.data
</code></pre>

<hr>
<h2 id='get.asymp.power'>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</h2><span id='topic+get.asymp.power'></span>

<h3>Description</h3>

<p>This function generates the asymptotic power of the proposed
bootstrap test. Two methods are provided: the asymptotic power based on
the relative lift and the asymptotic power the absolute lift.
For more details, please refer to the paper Liu et al., (2023).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.asymp.power(n1, n2, p1, p2, method='relative', alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.asymp.power_+3A_n1">n1</code></td>
<td>
<p>sample size of the control group</p>
</td></tr>
<tr><td><code id="get.asymp.power_+3A_n2">n2</code></td>
<td>
<p>sample size of the treatment group</p>
</td></tr>
<tr><td><code id="get.asymp.power_+3A_p1">p1</code></td>
<td>
<p>success probability of the control group</p>
</td></tr>
<tr><td><code id="get.asymp.power_+3A_p2">p2</code></td>
<td>
<p>success probability of the treatment group</p>
</td></tr>
<tr><td><code id="get.asymp.power_+3A_method">method</code></td>
<td>
<p>two methods are provided: method =
c(<code class="reqn">\texttt{`relative'}, \texttt{`absolute'}</code>).
<code class="reqn">\texttt{`relative'}</code> means min sample size based on the relative lift.
<code class="reqn">\texttt{`absolute'}</code> means min sample size based on the absolute lift.</p>
</td></tr>
<tr><td><code id="get.asymp.power_+3A_alpha">alpha</code></td>
<td>
<p>significance level. By default alpha = 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Let <code class="reqn">N = n_1 + n_2</code> and <code class="reqn">\kappa = n_1/N</code>. We define
</p>
<p style="text-align: center;"><code class="reqn">
     \sigma_{a,n} = \sqrt{n_1^{-1}p_1(1-p_1) + n_2^{-1}p_2(1-p_2)},
 </code>
</p>

<p style="text-align: center;"><code class="reqn">
     \bar\sigma_{a,n} = \sqrt{(n_1^{-1} +  n_2^{-1})\bar p(1-\bar p)}.
 </code>
</p>

<p>where <code class="reqn">\bar p = \kappa p_1 + (1-\kappa) p_2</code>. <code class="reqn">\sigma_{a,n}</code>
is the standard deviation of the absolute lift and
<code class="reqn">\bar\sigma_{a,n}</code> can be viewed as the standard deviation of
the combined sample of the control and treatment groups.
Let <code class="reqn">\delta_a = p_2 - p_1</code> be the absolute lift.
The asymptotic power function based on the absolute lift is given by
</p>
<p style="text-align: center;"><code class="reqn">
    \beta_{Absolute}(\delta_a) \approx \Phi\left( -cz_{\alpha/2} + 
    \frac{\delta_a}{\sigma_{a,n}} \right) + \Phi\left( -cz_{\alpha/2} - 
    \frac{\delta_a}{\sigma_{a,n}} \right).
</code>
</p>

<p>The asymptotic power function based on the relative lift is given by
</p>
<p style="text-align: center;"><code class="reqn">
    \beta_{Relative}(\delta_a) \approx \Phi 
    \left( -cz_{\alpha/2} \frac{p_0}{\bar p} + 
    \frac{\delta_a}{\sigma_{a,n}} \right) + 
    \Phi \left( -cz_{\alpha/2} \frac{p_0}{\bar p} - 
    \frac{\delta_a}{\sigma_{a,n}} \right),
</code>
</p>

<p>where <code class="reqn">\Phi(\cdot)</code> is the CDF of the standard normal distribution <code class="reqn">N(0,1)</code>,
<code class="reqn">z_{\alpha/2}</code> is the upper <code class="reqn">(1-\alpha/2)</code> quantile of <code class="reqn">N(0,1)</code>,
and <code class="reqn">c = {\bar\sigma_{a,n}}/\sigma_{a,n}</code>.
</p>


<h3>Value</h3>

<p>Return the asymptotic power
</p>


<h3>References</h3>

<p>Wanjun Liu, Xiufan Yu, Jialiang Mao, Xiaoxu Wu, and Justin Dyer. 2023.
Quantifying the Effectiveness of Advertising: A Bootstrap Proportion Test
for Brand Lift Testing. <em>In Proceedings of the 32nd ACM International Conference
on Information and Knowledge Management (CIKM ’23)</em>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n1 &lt;- 100; n2 &lt;- 100; p1 &lt;- 0.1; p2 &lt;- 0.2
get.asymp.power(n1, n2, p1, p2, method='relative')
</code></pre>

<hr>
<h2 id='get.min.size'>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</h2><span id='topic+get.min.size'></span>

<h3>Description</h3>

<p>This function generates the minimum sample size required
to obtain a statistically significant result for a given power.
For more details, please refer to the paper Liu et al., (2023).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.min.size(p1, p2, p_treat, method='relative', power=0.8, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.min.size_+3A_p1">p1</code></td>
<td>
<p>success probability of the control group</p>
</td></tr>
<tr><td><code id="get.min.size_+3A_p2">p2</code></td>
<td>
<p>success probability of the treatment group</p>
</td></tr>
<tr><td><code id="get.min.size_+3A_p_treat">p_treat</code></td>
<td>
<p>the percentage of the treatment group</p>
</td></tr>
<tr><td><code id="get.min.size_+3A_method">method</code></td>
<td>
<p>two methods are provided: method =
c(<code class="reqn">\texttt{`relative'}</code>, <code class="reqn">\texttt{`absolute'}</code>).
<code class="reqn">\texttt{`relative'}</code> means min sample size based on the relative lift.
<code class="reqn">\texttt{`absolute'}</code> means min sample size based on the absolute lift.</p>
</td></tr>
<tr><td><code id="get.min.size_+3A_power">power</code></td>
<td>
<p>the power you want to achieve. Industry
standard is power = 0.8, which is also the default value</p>
</td></tr>
<tr><td><code id="get.min.size_+3A_alpha">alpha</code></td>
<td>
<p>significance level. By default alpha = 0.05</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The minimum required sample size is approximated by the asymptotic
power function.
Let <code class="reqn">N = n_1 + n_2</code> and <code class="reqn">\kappa = n_1/N</code>. We define
</p>
<p style="text-align: center;"><code class="reqn">
     \sigma_{a,n} = \sqrt{n_1^{-1}p_1(1-p_1) + n_2^{-1}p_2(1-p_2)},
 </code>
</p>

<p style="text-align: center;"><code class="reqn">
     \bar\sigma_{a,n} = \sqrt{(n_1^{-1} +  n_2^{-1})\bar p(1-\bar p)}.
 </code>
</p>

<p>where <code class="reqn">\bar p = \kappa p_1 + (1-\kappa) p_2</code>. <code class="reqn">\sigma_{a,n}</code>
is the standard deviation of the absolute lift and
<code class="reqn">\bar\sigma_{a,n}</code> can be viewed as the standard deviation of
the combined sample of the control and treatment groups.
Let <code class="reqn">\delta_a = p_2 - p_1</code> be the absolute lift.
The asymptotic power function based on the absolute lift is given by
</p>
<p style="text-align: center;"><code class="reqn">
    \beta_{Absolute}(\delta_a) \approx \Phi\left( -cz_{\alpha/2} + 
    \frac{\delta_a}{\sigma_{a,n}} \right) + \Phi\left( -cz_{\alpha/2} - 
    \frac{\delta_a}{\sigma_{a,n}} \right).
</code>
</p>

<p>The asymptotic power function based on the relative lift is given by
</p>
<p style="text-align: center;"><code class="reqn">
    \beta_{Relative}(\delta_a) \approx \Phi 
    \left( -cz_{\alpha/2} \frac{p_0}{\bar p} + 
    \frac{\delta_a}{\sigma_{a,n}} \right) + 
    \Phi \left( -cz_{\alpha/2} \frac{p_0}{\bar p} - 
    \frac{\delta_a}{\sigma_{a,n}} \right),
</code>
</p>

<p>where <code class="reqn">\Phi(\cdot)</code> is the CDF of the standard normal distribution <code class="reqn">N(0,1)</code>,
<code class="reqn">z_{\alpha/2}</code> is the upper <code class="reqn">(1-\alpha/2)</code> quantile of <code class="reqn">N(0,1)</code>,
and <code class="reqn">c = {\bar\sigma_{a,n}}/\sigma_{a,n}</code>.
</p>
<p>Given a power (say power=0.80), it is difficult to get a closed form of the
minimum sample size. Note that when <code class="reqn">\delta_a &gt; 0</code>, the first term of
the power function dominates the second term, so we can ignore the second
term and derive the closed form for the minimum sample size. Similarly,
when <code class="reqn">\delta_a &lt; 0</code>, the second term of the power function dominates
the first term, so we can ignore the first term. In particular, the closed
form for the minimum sample size is given by
</p>
<p style="text-align: center;"><code class="reqn">
    N_{Relative} = \left( \frac{p_1(1-p_1)}{\kappa} + \frac{p_2(1-p_2)}{(1-\kappa)} \right) \left( \Phi^{-1}(\beta)p_1/\bar p + cz_{\alpha/2} \right)^2 / \delta_a^2,
</code>
</p>

<p style="text-align: center;"><code class="reqn">
    N_{Absolute} = \left( \frac{p_1(1-p_1)}{\kappa} + \frac{p_2(1-p_2)}{(1-\kappa)} \right) \left( \Phi^{-1}(\beta) + cz_{\alpha/2} \right)^2 / \delta_a^2.
</code>
</p>



<h3>Value</h3>

<p>Return the required minimum sample size. This is the
total sample size of control group + treatment group
</p>


<h3>References</h3>

<p>Wanjun Liu, Xiufan Yu, Jialiang Mao, Xiaoxu Wu, and Justin Dyer. 2023.
Quantifying the Effectiveness of Advertising: A Bootstrap Proportion Test
for Brand Lift Testing. <em>In Proceedings of the 32nd ACM International Conference
on Information and Knowledge Management (CIKM ’23)</em>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p1 &lt;- 0.1; p2 &lt;- 0.2
get.min.size(p1, p2, p_treat=0.5, method='relative', power=0.8, alpha=0.05)
</code></pre>

<hr>
<h2 id='proportion.test'>A Bootstrap Proportion Test for Brand Lift Testing (Liu et al., 2023)</h2><span id='topic+proportion.test'></span>

<h3>Description</h3>

<p>This function implements several proportion tests that can be applied
to Brand Lift Testing, including
</p>

<ol>
<li> <p><code class="reqn">\mathbf{clt}</code>: Absolute lift based Z-test and relative lift based Z-test. The limiting
distribution of Z-statistics are derived from the central limit theorem.
</p>
</li>
<li> <p><code class="reqn">\mathbf{bootstrap}</code>: Absolute lift based bootstrap test (BS-A) and relative lift based
bootstrap test (BS-R), see Liu et al., (2023).
</p>
</li>
<li> <p><code class="reqn">\mathbf{bootstrapmean}</code>: Absolute lift based bootstrap mean test and relative lift
based bootstrap mean test. (Efron and Tibshirani 1994).
</p>
</li>
<li> <p><code class="reqn">\mathbf{permutation}</code>: Absolute lift based permutation test and relative lift based
permutation test. (Efron and Tibshirani 1994).
</p>
</li></ol>

<p>Learn more about the proportion tests in the section Details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proportion.test(data, method, B)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="proportion.test_+3A_data">data</code></td>
<td>
<p>A 2x2 matrix with first column being (control sample size, treatment sample size)
and the 2nd column being (control positive response count, treatment positive response count).</p>
</td></tr>
<tr><td><code id="proportion.test_+3A_method">method</code></td>
<td>
<p>The method should be one of (&quot;clt&quot;, &quot;bootstrap&quot;,
&quot;bootstrapmean&quot;, &quot;permutation&quot;)</p>
</td></tr>
<tr><td><code id="proportion.test_+3A_b">B</code></td>
<td>
<p>Number of replications for bootstrap test or permutation test.
Only required for methods &quot;bootstrap&quot;, &quot;bootstrapmean&quot;, &quot;permutation&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code class="reqn">\mathbf{clt}</code>: the classic Z-test based on normal approximation. The absolute
lift based Z-test is defined as
</p>
<p style="text-align: center;"><code class="reqn">
Z = \frac{\hat p_1 - \hat p_0}{\sqrt{{s_0^2}/{n_0} + {s_1^2}/{n_1}}},
</code>
</p>

<p>and he relative lift based Z-test is defined as
</p>
<p style="text-align: center;"><code class="reqn">
Z_r = \frac{\hat p_1 / \hat p_0 - 1}{\sqrt{s_1^2/(n_1\hat p_0^2) + 
\hat p_1^2s_0^2/(n_0 \hat p_0^4)}},
</code>
</p>

<p>where <code class="reqn">s_0^2 = \hat p_0(1-\hat p_0)</code> and <code class="reqn">s_1^2 = \hat p_1(1-\hat p_1)</code>.
</p>
<p><code class="reqn">\mathbf{bootstrap}</code>: the bootstrap proportion tests proposed in Liu et al., (2023),
see Algorithm 1 in their paper. There are two bootstrap tests: the absolute lift
based bootstrap test BS-A and the relative lift based bootstrap test BS-R. Note that
this type of bootstrap test is testing whether the distribution of the control group is
the same as the distribution of the treatment group. In the binomial distribution case,
it is equivalent to test whether the mean of the control group is
the same as the mean of the treatment group.
</p>
<p><code class="reqn">\mathbf{bootstrapmean}</code> the bootstrap test to test whether the mean of the
control group is the same as the mean of the treatment group. See Algorithm 16.2
of Efron and Tibshirani (1994).
</p>
<p><code class="reqn">\mathbf{permutation}</code> the permutation test to test whether the distribution of the
control group is the same as the distribution of the treatment group.
See Algorithm 15.1 of Efron and Tibshirani (1994).
</p>


<h3>Value</h3>

<p>A list of absolute lift, relative lift, standardized absolute lift and their corresponding
p-values. Standardized absolute lift equals absolute lift divided by its standard deviation.
Only absolute lift and relative lift are available for method clt.
</p>


<h3>References</h3>

<p>Wanjun Liu, Xiufan Yu, Jialiang Mao, Xiaoxu Wu, and Justin Dyer. 2023.
Quantifying the Effectiveness of Advertising: A Bootstrap Proportion Test
for Brand Lift Testing. <em>In Proceedings of the 32nd ACM International Conference
on Information and Knowledge Management (CIKM ’23)</em>
</p>
<p>Efron, Bradley, and Robert J. Tibshirani.
<em>An introduction to the bootstrap</em>. CRC press, 1994.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n1 &lt;- 100; n2 &lt;- 100; p1 &lt;- 0.1; p2 &lt;- 0.2
set.seed(1)
sim.data &lt;- gen.simu.data(n1, n2, p1, p2, summary = TRUE)
result &lt;- proportion.test(sim.data, method = "bootstrap", B = 1000)
relative.lift &lt;- result$lift$relative
relative.lift.pval &lt;- result$pvalue$relative
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
