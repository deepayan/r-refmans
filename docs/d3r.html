<!DOCTYPE html><html><head><title>Help for package d3r</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {d3r}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#change_to_name'><p>Change Column Name in Children to &quot;name&quot;</p></a></li>
<li><a href='#d3_dep_jetpack'><p>'d3.js' Dependency for Version 4 Jetpack</p></a></li>
<li><a href='#d3_dep_v3'><p>'d3.js' Dependency for Version 3</p></a></li>
<li><a href='#d3_dep_v4'><p>'d3.js' Dependency for Version 4</p></a></li>
<li><a href='#d3_dep_v5'><p>'d3.js' Dependency for Version 5</p></a></li>
<li><a href='#d3_dep_v6'><p>'d3.js' Dependency for Version 6</p></a></li>
<li><a href='#d3_dep_v7'><p>'d3.js' Dependency for Version 7</p></a></li>
<li><a href='#d3_igraph'><p>Convert 'igraph' to 'd3.js'</p></a></li>
<li><a href='#d3_json'><p>Create 'JSON' that 'd3.js' Expects</p></a></li>
<li><a href='#d3_nest'><p>Convert a <code>data.frame</code> to a 'd3.js' Hierarchy</p></a></li>
<li><a href='#d3_party'><p>Convert partykit to d3.js hierarchy</p></a></li>
<li><a href='#d3_table'><p>Converts Table to 'd3' Nodes and Links</p></a></li>
<li><a href='#d3_v8'><p>Create V8 Context with D3</p></a></li>
<li><a href='#promote_na'><p>Apply 'promote_na' to All Rows</p></a></li>
<li><a href='#promote_na_one'><p>Promote NA to Top Level</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'d3.js' Utilities for R</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-10-01</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kent Russell &lt;kent.russell@timelyportfolio.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/timelyportfolio/d3r">https://github.com/timelyportfolio/d3r</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/timelyportfolio/d3r/issues">https://github.com/timelyportfolio/d3r/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a suite of functions to help ease the use of 'd3.js' in R.
              These helpers include 'htmltools::htmlDependency' functions, hierarchy
              builders, and conversion tools for 'partykit', 'igraph,' 'table',
              and 'data.frame' R objects into the 'JSON' that 'd3.js' expects.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, htmltools, tidyr (&ge; 0.8.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>httr, jsonlite, listviewer, purrr, testthat</td>
</tr>
<tr>
<td>Enhances:</td>
<td>igraph, partykit, rpart, treemap, V8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-02 01:58:41 UTC; kentr</td>
</tr>
<tr>
<td>Author:</td>
<td>Mike Bostock [aut, cph] (d3.js library in htmlwidgets/lib,
    http://d3js.org),
  Kent Russell [aut, cre, cph] (R interface),
  Gregor Aisch [aut, cph] (d3-jetpack creator,
    https://github.com/gka/d3-jetpack),
  Adam Pearce [aut] (core contributor to d3-jetpack),
  Ben Ortiz [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-02 14:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='change_to_name'>Change Column Name in Children to &quot;name&quot;</h2><span id='topic+change_to_name'></span>

<h3>Description</h3>

<p>Change Column Name in Children to &quot;name&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change_to_name(x, column = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="change_to_name_+3A_x">x</code></td>
<td>
<p><code>data.frame</code> or <code>data.frame</code> derivative, such
as <code>tibble</code></p>
</td></tr>
<tr><td><code id="change_to_name_+3A_column">column</code></td>
<td>
<p>column to convert</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code>
</p>

<hr>
<h2 id='d3_dep_jetpack'>'d3.js' Dependency for Version 4 Jetpack</h2><span id='topic+d3_dep_jetpack'></span>

<h3>Description</h3>

<p>d3-jetpack is a set of nifty convenience wrappers that speed up
your daily work with d3.js. Must be included after <code>d3_dep_v4()</code>.
Learn more by reading <a href="https://github.com/gka/d3-jetpack">d3-jetpack</a>
or by watching this <a href="https://www.youtube.com/watch?v=_5ky0AYq_Dg&amp;t=4s">YouTube</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_jetpack(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_jetpack_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_v3">d3_dep_v3</a>()</code>,
<code><a href="#topic+d3_dep_v4">d3_dep_v4</a>()</code>,
<code><a href="#topic+d3_dep_v5">d3_dep_v5</a>()</code>,
<code><a href="#topic+d3_dep_v6">d3_dep_v6</a>()</code>,
<code><a href="#topic+d3_dep_v7">d3_dep_v7</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

library(d3r)
library(htmltools)

tl &lt;- tagList(tags$script(HTML(sprintf(
"
var x = 5;

var svg = d3.select('body')
    .append('svg');

svg.append('rect')
    .at({
        x: 100,
        y: 100,
        width: 100,
        height: 100
    })
    .st({
        fill: 'blue',
        stroke: 'purple'
    });
"
))), d3_dep_v4(), d3_dep_jetpack())
browsable(tl)



tl &lt;- tagList(tags$script(HTML(sprintf(
 "
 var svg = d3.select('body')
     .append('svg');

 test_data = [{x: 250, y: 250}, {x: 300, y: 300}, {x: 300, y: 100}];

 svg.appendMany(test_data, 'circle')
     .at({
         cx: function(d){return d.x},
         cy: function(d){return d.y},
         r: 50
     })
     .st({
         fill: 'purple',
         stroke: 'blue'
     });
 "
))), d3_dep_v4(), d3_dep_jetpack())

browsable(tl)


## End(Not run)
</code></pre>

<hr>
<h2 id='d3_dep_v3'>'d3.js' Dependency for Version 3</h2><span id='topic+d3_dep_v3'></span>

<h3>Description</h3>

<p>'d3.js' Dependency for Version 3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_v3(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_v3_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+d3_dep_v7">d3_dep_v7</a></code>, <code><a href="#topic+d3_dep_v6">d3_dep_v6</a></code>, <code><a href="#topic+d3_dep_v5">d3_dep_v5</a></code>, <code><a href="#topic+d3_dep_v4">d3_dep_v4</a></code>,
and <code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a></code>.
</p>
<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a>()</code>,
<code><a href="#topic+d3_dep_v4">d3_dep_v4</a>()</code>,
<code><a href="#topic+d3_dep_v5">d3_dep_v5</a>()</code>,
<code><a href="#topic+d3_dep_v6">d3_dep_v6</a>()</code>,
<code><a href="#topic+d3_dep_v7">d3_dep_v7</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
library(htmltools)

tagList(d3_dep_v3())
</code></pre>

<hr>
<h2 id='d3_dep_v4'>'d3.js' Dependency for Version 4</h2><span id='topic+d3_dep_v4'></span>

<h3>Description</h3>

<p>'d3.js' Dependency for Version 4
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_v4(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_v4_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+d3_dep_v7">d3_dep_v7</a></code>, <code><a href="#topic+d3_dep_v6">d3_dep_v6</a></code>, <code><a href="#topic+d3_dep_v5">d3_dep_v5</a></code>, <code><a href="#topic+d3_dep_v3">d3_dep_v3</a></code>,
and <code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a></code>.
</p>
<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a>()</code>,
<code><a href="#topic+d3_dep_v3">d3_dep_v3</a>()</code>,
<code><a href="#topic+d3_dep_v5">d3_dep_v5</a>()</code>,
<code><a href="#topic+d3_dep_v6">d3_dep_v6</a>()</code>,
<code><a href="#topic+d3_dep_v7">d3_dep_v7</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
library(htmltools)

tagList(d3_dep_v4())
</code></pre>

<hr>
<h2 id='d3_dep_v5'>'d3.js' Dependency for Version 5</h2><span id='topic+d3_dep_v5'></span>

<h3>Description</h3>

<p>'d3.js' Dependency for Version 5
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_v5(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_v5_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+d3_dep_v7">d3_dep_v7</a></code>, <code><a href="#topic+d3_dep_v6">d3_dep_v6</a></code>, <code><a href="#topic+d3_dep_v4">d3_dep_v4</a></code>, <code><a href="#topic+d3_dep_v3">d3_dep_v3</a></code>,
and <code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a></code>.
</p>
<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a>()</code>,
<code><a href="#topic+d3_dep_v3">d3_dep_v3</a>()</code>,
<code><a href="#topic+d3_dep_v4">d3_dep_v4</a>()</code>,
<code><a href="#topic+d3_dep_v6">d3_dep_v6</a>()</code>,
<code><a href="#topic+d3_dep_v7">d3_dep_v7</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
library(htmltools)

tagList(d3_dep_v5())
</code></pre>

<hr>
<h2 id='d3_dep_v6'>'d3.js' Dependency for Version 6</h2><span id='topic+d3_dep_v6'></span>

<h3>Description</h3>

<p>'d3.js' Dependency for Version 6
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_v6(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_v6_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+d3_dep_v7">d3_dep_v7</a></code>, <code><a href="#topic+d3_dep_v5">d3_dep_v5</a></code>, <code><a href="#topic+d3_dep_v4">d3_dep_v4</a></code>, <code><a href="#topic+d3_dep_v3">d3_dep_v3</a></code>,
and <code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a></code>.
</p>
<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a>()</code>,
<code><a href="#topic+d3_dep_v3">d3_dep_v3</a>()</code>,
<code><a href="#topic+d3_dep_v4">d3_dep_v4</a>()</code>,
<code><a href="#topic+d3_dep_v5">d3_dep_v5</a>()</code>,
<code><a href="#topic+d3_dep_v7">d3_dep_v7</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
library(htmltools)

tagList(d3_dep_v6())
</code></pre>

<hr>
<h2 id='d3_dep_v7'>'d3.js' Dependency for Version 7</h2><span id='topic+d3_dep_v7'></span>

<h3>Description</h3>

<p>'d3.js' Dependency for Version 7
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_dep_v7(offline = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_dep_v7_+3A_offline">offline</code></td>
<td>
<p><code>logical</code> to specify whether to use
a local copy of d3.js (<code>TRUE</code>) or use cdn (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+d3_dep_v6">d3_dep_v6</a></code>, <code><a href="#topic+d3_dep_v5">d3_dep_v5</a></code>, <code><a href="#topic+d3_dep_v4">d3_dep_v4</a></code>, <code><a href="#topic+d3_dep_v3">d3_dep_v3</a></code>,
and <code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a></code>.
</p>
<p>Other 'd3' dependency functions: 
<code><a href="#topic+d3_dep_jetpack">d3_dep_jetpack</a>()</code>,
<code><a href="#topic+d3_dep_v3">d3_dep_v3</a>()</code>,
<code><a href="#topic+d3_dep_v4">d3_dep_v4</a>()</code>,
<code><a href="#topic+d3_dep_v5">d3_dep_v5</a>()</code>,
<code><a href="#topic+d3_dep_v6">d3_dep_v6</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
library(htmltools)

tagList(d3_dep_v7())
</code></pre>

<hr>
<h2 id='d3_igraph'>Convert 'igraph' to 'd3.js'</h2><span id='topic+d3_igraph'></span>

<h3>Description</h3>

<p>Convert 'igraph' to 'd3.js'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_igraph(igrf = NULL, json = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_igraph_+3A_igrf">igrf</code></td>
<td>
<p><code>igraph</code></p>
</td></tr>
<tr><td><code id="d3_igraph_+3A_json">json</code></td>
<td>
<p><code>logical</code> to return as <code>JSON</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(igraph)
library(igraphdata)
library(d3r)

# with random graph
d3r::d3_igraph(igraph::sample_pa(100))

# check case where vertices 0 cols
d3_igraph(igraph::watts.strogatz.game(1, 50, 4, 0.05))

# with karate from igraphdata
#  notice graph attributes are added
data("karate",package="igraphdata")
(karate_d3 &lt;- d3r::d3_igraph(karate))

listviewer::jsonedit(karate_d3)

data("kite",package="igraphdata")
listviewer::jsonedit(d3_igraph(kite))

## End(Not run)
</code></pre>

<hr>
<h2 id='d3_json'>Create 'JSON' that 'd3.js' Expects</h2><span id='topic+d3_json'></span>

<h3>Description</h3>

<p>Create 'JSON' that 'd3.js' Expects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_json(x = NULL, strip = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_json_+3A_x">x</code></td>
<td>
<p>data, usually in the form of <code>data.frame</code> or <code>list</code></p>
</td></tr>
<tr><td><code id="d3_json_+3A_strip">strip</code></td>
<td>
<p><code>logical</code> to remove outer array.  Use <code>strip=TRUE</code>
for hierarchies from <code>d3_nest</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>string</code> of 'JSON' data
</p>

<hr>
<h2 id='d3_nest'>Convert a <code>data.frame</code> to a 'd3.js' Hierarchy</h2><span id='topic+d3_nest'></span>

<h3>Description</h3>

<p>Convert a <code>data.frame</code> to a 'd3.js' Hierarchy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_nest(data = NULL, value_cols = character(), root = "root", json = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_nest_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> or <code>data.frame</code> derivative, such
as <code>tibble</code></p>
</td></tr>
<tr><td><code id="d3_nest_+3A_value_cols">value_cols</code></td>
<td>
<p><code>character</code> vector with the names of the
columns to use as data</p>
</td></tr>
<tr><td><code id="d3_nest_+3A_root">root</code></td>
<td>
<p><code>character</code> name of the root level of the hierarchy</p>
</td></tr>
<tr><td><code id="d3_nest_+3A_json">json</code></td>
<td>
<p><code>logical</code> to return as <code>JSON</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>nested <code>data.frame</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># convert Titanic to a nested d3 hierarchy

# devtools::install_github("timelyportfolio/d3r")
library(d3r)
library(dplyr)

titanic_df &lt;- data.frame(Titanic)
tit_tb &lt;- titanic_df %&gt;%
  select(Class,Age,Survived,Sex,Freq) %&gt;%
  d3_nest(value_cols="Freq", root="titanic")

tit_tb

# see as tibble
titanic_df %&gt;%
  select(Class,Age,Survived,Sex,Freq) %&gt;%
  d3_nest(value_cols="Freq", root="titanic", json=FALSE)

# see the structure with listviewer
tit_tb %&gt;%
  listviewer::jsonedit()
## Not run: 
  library(treemap)
  library(d3r)
  library(dplyr)
  library(tidyr)

  treemap::random.hierarchical.data() %&gt;%
    d3_nest(value_cols = "x")

  # use example from ?treemap
  data(GNI2014)
  treemap(
    GNI2014,
    index=c("continent", "iso3"),
    vSize="population",
    vColor="GNI",
    type="value",
    draw=FALSE
  ) %&gt;%
    {.$tm} %&gt;%
    select(continent,iso3,color,vSize) %&gt;%
    d3_nest(value_cols = c("color", "vSize"))

## End(Not run)
</code></pre>

<hr>
<h2 id='d3_party'>Convert partykit to d3.js hierarchy</h2><span id='topic+d3_party'></span>

<h3>Description</h3>

<p>This thing is not even close to being done, so please help
with ideas and contributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_party(tree = NULL, json = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_party_+3A_tree">tree</code></td>
<td>
<p><code>partykit</code> object to be converted</p>
</td></tr>
<tr><td><code id="d3_party_+3A_json">json</code></td>
<td>
<p><code>logical</code> to return <code>list</code> or <code>json</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> or <code>json</code> depending on <code>json</code> arg
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

  library(d3r)
  # from ?rpart
  data("kyphosis", package="rpart")
  d3_party(
    rpart::rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
  )

  # if you want the list instead of json
  d3_party(
    rpart::rpart(Kyphosis ~ Age + Number + Start, data = kyphosis),
    json = FALSE
  )

  # with ctree instead of rpart
  #  using example from ?ctree
  d3_party(partykit::ctree(Species ~ .,data = iris))


  #devtools::install_github("timelyportfolio/d3treeR")

  library(d3treeR)

  d3tree2(
    d3_party(
      rpart::rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
    ),
    celltext = "rule",
    valueField = "n"
  )


## End(Not run)
</code></pre>

<hr>
<h2 id='d3_table'>Converts Table to 'd3' Nodes and Links</h2><span id='topic+d3_table'></span>

<h3>Description</h3>

<p>Converts Table to 'd3' Nodes and Links
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_table(tB = NULL, vars = NULL, agg = "Freq")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_table_+3A_tb">tB</code></td>
<td>
<p><code>table</code> to convert</p>
</td></tr>
<tr><td><code id="d3_table_+3A_vars">vars</code></td>
<td>
<p><code>character</code> vector of column names</p>
</td></tr>
<tr><td><code id="d3_table_+3A_agg">agg</code></td>
<td>
<p><code>character</code> column name of aggregated value</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> of two <code>data.frames</code> - one for nodes and
one for links of the network.  This structure is helpful
when working with <code>networkD3</code> and <code>visNetwork</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(d3r)
d3_table(Titanic, c("Class","Sex"))

</code></pre>

<hr>
<h2 id='d3_v8'>Create V8 Context with D3</h2><span id='topic+d3_v8'></span>

<h3>Description</h3>

<p>Create V8 Context with D3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d3_v8(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d3_v8_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>v8()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>v8</code> context with d3.js loaded and available as d3
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# to do this all in R, please see ggraph
# https://github.com/thomasp85/ggraph
# by Thomas Lin Pedersen
library(d3r)

# make a simple data.frame of US state data
states &lt;- data.frame(
  region = as.character(state.region),
  state = as.character(state.abb),
  population = state.x77[,"Population"],
  stringsAsFactors = FALSE
)

# use d3_nest to get the data.frame in a d3 hierarchy
state_hier &lt;- d3_nest(
  states,
  value_cols = "population"
)

# use d3_v8 to do something useful with d3 and, our state data
ctx &lt;- d3_v8()
ctx$eval(sprintf(
  " var states = %s",
  state_hier
))
ctx$eval(
"
// we assigned the variable states above
//  so now make it a real d3 hierarchy
var root = d3.hierarchy(states);

// sum on population
root.sum(function(d) {return d.population ? d.population : 0});


// use d3 to circle pack or state hierarchy
d3.pack()(root);

// get something we can convert into a data.frame in R
var states_packed = [];
root.each(function(d) {
  states_packed.push({
    name: d.data.name,
    radius: d.r,
    x: d.x,
    y: d.y
  });
});
"
)

# now get states_packed from our context
#  to plot in R
states_packed &lt;- ctx$get("states_packed")
opar &lt;- par(no.readonly=TRUE)
# make it square
par(pty="s")
symbols(
  states_packed$x,
  states_packed$y,
  states_packed$radius,
  inches=FALSE,
  asp=1
)
text(y~x, data=states_packed, labels=states_packed$name)
# return to original par before we made it square
par(opar)

# d3.quadtree example

library(d3r)

x = runif(100)
y = runif(100)

ctx &lt;- d3_v8()
# assign pts as array of pts in V8
ctx$assign("pts", matrix(c(x,y),ncol=2,byrow=TRUE))
# use d3.quadtree() to plot rects
ctx$eval(
  "
  var d3q = d3.quadtree()
  .addAll(pts);
  // nodes function from https://bl.ocks.org/mbostock/4343214
  function nodes(quadtree) {
  var nodes = [];
  quadtree.visit(function(node, x0, y0, x1, y1) {
  nodes.push({x0:x0, y0:y0, x1: x1, y1: y1})
  });
  return nodes;
  }
  "
)

nodes &lt;- ctx$get("nodes(d3q)", simplifyVector = FALSE)
# draw points
opar &lt;- par(no.readonly=TRUE)
# make it square
par(pty="s")
plot(y~x)
# draw quadtree rects
rect(
  lapply(nodes,function(x){x$x0}),
  lapply(nodes,function(x){x$y0}),
  lapply(nodes,function(x){x$x1}),
  lapply(nodes,function(x){x$y1})
)
par(opar)

## End(Not run)
</code></pre>

<hr>
<h2 id='promote_na'>Apply 'promote_na' to All Rows</h2><span id='topic+promote_na'></span>

<h3>Description</h3>

<p>Apply 'promote_na' to All Rows
</p>


<h3>Usage</h3>

<pre><code class='language-R'>promote_na(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="promote_na_+3A_x">x</code></td>
<td>
<p><code>data.frame</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code>
</p>

<hr>
<h2 id='promote_na_one'>Promote NA to Top Level</h2><span id='topic+promote_na_one'></span>

<h3>Description</h3>

<p>Promote NA to Top Level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>promote_na_one(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="promote_na_one_+3A_x">x</code></td>
<td>
<p><code>data.frame</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
