<!DOCTYPE html><html lang="en"><head><title>Help for package prettyglm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {prettyglm}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#actual_expected_bucketed'><p>actual_expected_bucketed</p></a></li>
<li><a href='#bank_data'><p>Bank marketing campaigns data set analysis</p></a></li>
<li><a href='#clean_coefficients'><p>clean_coefficients</p></a></li>
<li><a href='#cut3'><p>cut3</p></a></li>
<li><a href='#one_way_ave'><p>one_way_ave</p></a></li>
<li><a href='#predict_outcome'><p>predict_outcome</p></a></li>
<li><a href='#pretty_coefficients'><p>pretty_coefficients</p></a></li>
<li><a href='#pretty_relativities'><p>pretty_relativities</p></a></li>
<li><a href='#splineit'><p>splineit</p></a></li>
<li><a href='#titanic'><p>Titanic Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Pretty Summaries of Generalized Linear Model Coefficients</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jared Fowler &lt;jared.fowler8@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>One of the main advantages of using Generalised Linear Models
    is their interpretability.  The goal of 'prettyglm' is to provide a
    set of functions which easily create beautiful coefficient summaries
    which can readily be shared and explained. 'prettyglm' helps users
    create coefficient summaries which include categorical base levels,
    variable importance and type III p.values. 'prettyglm' also creates
    beautiful relativity plots for categorical, continuous and splined
    coefficients.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jared-fowler.github.io/prettyglm/">https://jared-fowler.github.io/prettyglm/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, car, dplyr, forcats, kableExtra, knitr, methods,
plotly, RColorBrewer, stringr, tibble, tidycat, tidyr,
tidyselect, vip</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-06 00:14:11 UTC; Jared</td>
</tr>
<tr>
<td>Author:</td>
<td>Jared Fowler [cre, aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-06 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='actual_expected_bucketed'>actual_expected_bucketed</h2><span id='topic+actual_expected_bucketed'></span>

<h3>Description</h3>

<p>Provides a rank plot of the actual and predicted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>actual_expected_bucketed(
  target_variable,
  model_object,
  data_set = NULL,
  number_of_buckets = 25,
  ylab = "Target",
  width = 800,
  height = 500,
  first_colour = "black",
  second_colour = "#cc4678",
  facetby = NULL,
  prediction_type = "response",
  predict_function = NULL,
  return_data = F
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="actual_expected_bucketed_+3A_target_variable">target_variable</code></td>
<td>
<p>String of target variable name.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_model_object">model_object</code></td>
<td>
<p>GLM model object.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_data_set">data_set</code></td>
<td>
<p>Data to score the model on. This can be training or test data, as long as the data is in a form where the model object can make predictions. Currently developing ability to provide custom prediction functions, currently implementation defaults to 'stats::predict'</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_number_of_buckets">number_of_buckets</code></td>
<td>
<p>number of buckets for percentile</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_ylab">ylab</code></td>
<td>
<p>Y-axis label.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_width">width</code></td>
<td>
<p>plotly plot width in pixels.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_height">height</code></td>
<td>
<p>plotly plot height in pixels.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_first_colour">first_colour</code></td>
<td>
<p>First colour to plot, usually the colour of actual.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_second_colour">second_colour</code></td>
<td>
<p>Second colour to plot, usually the colour of predicted.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_facetby">facetby</code></td>
<td>
<p>variable user wants to facet by.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_prediction_type">prediction_type</code></td>
<td>
<p>Prediction type to be pasted to predict.glm if predict_function is NULL. Defaults to &quot;response&quot;.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_predict_function">predict_function</code></td>
<td>
<p>prediction function to use. Still in development.</p>
</td></tr>
<tr><td><code id="actual_expected_bucketed_+3A_return_data">return_data</code></td>
<td>
<p>Logical to return cleaned data set instead of plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot
Plotly plot by defualt.
ggplot if plotlyplot = F.
Tibble if return_data = T.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
library(prettyglm)

data('titanic')

columns_to_factor &lt;- c('Pclass',
                       'Sex',
                       'Cabin',
                       'Embarked',
                       'Cabintype',
                       'Survived')
meanage &lt;- base::mean(titanic$Age, na.rm=TRUE)

titanic  &lt;- titanic  %&gt;%
  dplyr::mutate_at(columns_to_factor, list(~factor(.))) %&gt;%
  dplyr::mutate(Age =base::ifelse(is.na(Age)==TRUE,meanage,Age)) %&gt;%
  dplyr::mutate(Age_0_25 = prettyglm::splineit(Age,0,25),
                Age_25_50 = prettyglm::splineit(Age,25,50),
                Age_50_120 = prettyglm::splineit(Age,50,120)) %&gt;%
  dplyr::mutate(Fare_0_250 = prettyglm::splineit(Fare,0,250),
                Fare_250_600 = prettyglm::splineit(Fare,250,600))

survival_model &lt;- stats::glm(Survived ~
                               Sex:Age +
                               Fare +
                               Embarked +
                               SibSp +
                               Parch +
                               Cabintype,
                             data = titanic,
                             family = binomial(link = 'logit'))

prettyglm::actual_expected_bucketed(target_variable = 'Survived',
                                    model_object = survival_model,
                                    data_set = titanic)

</code></pre>

<hr>
<h2 id='bank_data'>Bank marketing campaigns data set analysis</h2><span id='topic+bank_data'></span>

<h3>Description</h3>

<p>It is a dataset that describing Portugal bank marketing campaigns results.
Conducted campaigns were based mostly on direct phone calls, offering bank client to place a term deposit.
If after all marking efforts client had agreed to place deposit - target variable marked 'yes', otherwise 'no'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(bank)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>"data.frame"</code>
</p>

<dl>
<dt>job</dt><dd><p>Type of job</p>
</dd>
<dt>marital</dt><dd><p>marital status</p>
</dd>
<dt>education</dt><dd><p>education</p>
</dd>
<dt>default</dt><dd><p>has credit in default?</p>
</dd>
<dt>housing</dt><dd><p>has housing loan?</p>
</dd>
<dt>loan</dt><dd><p>has personal loan?</p>
</dd>
<dt>age</dt><dd><p>age</p>
</dd>
<dt>y</dt><dd><p>has the client subscribed a term deposit? (binary: &quot;yes&quot;,&quot;no&quot;)</p>
</dd>
</dl>



<h3>Details</h3>

<p>Sourse of the data
https://archive.ics.uci.edu/ml/datasets/bank+marketing
</p>


<h3>References</h3>

<p>This dataset is public available for research. The details are described in S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. Decision Support Systems, Elsevier, 62:22-31, June 2014
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(bank)
head(bank_data)
</code></pre>

<hr>
<h2 id='clean_coefficients'>clean_coefficients</h2><span id='topic+clean_coefficients'></span>

<h3>Description</h3>

<p>Processing to split out base levels and add variable importance to each term. Inspired by 'tidycat::tidy_categorical()', modified for use in prettyglm..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_coefficients(
  d = NULL,
  m = NULL,
  vimethod = "model",
  spline_seperator = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_coefficients_+3A_d">d</code></td>
<td>
<p>Data frame <code><a href="tibble.html#topic+tibble">tibble</a></code> output from <code><a href="broom.html#topic+tidy.lm">tidy.lm</a></code>; with one row for each term in the regression, including column 'term'</p>
</td></tr>
<tr><td><code id="clean_coefficients_+3A_m">m</code></td>
<td>
<p>Model object <code><a href="stats.html#topic+glm">glm</a></code></p>
</td></tr>
<tr><td><code id="clean_coefficients_+3A_vimethod">vimethod</code></td>
<td>
<p>Variable importance method. Still in development</p>
</td></tr>
<tr><td><code id="clean_coefficients_+3A_spline_seperator">spline_seperator</code></td>
<td>
<p>Sting of the spline separator. For example AGE_0_25 would be &quot;_&quot;</p>
</td></tr>
<tr><td><code id="clean_coefficients_+3A_...">...</code></td>
<td>
<p>Any additional parameters to be past to  <code><a href="vip.html#topic+vi">vi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Expanded <code><a href="tibble.html#topic+tibble">tibble</a></code> from the version passed to 'd' including additional columns:
</p>
<table role = "presentation">
<tr><td><code>variable</code></td>
<td>
<p>The name of the variable that the regression term belongs to.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>The level of the categorical variable that the regression term belongs to. Will be an the term name for numeric variables.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jared Fowler, Guy J. Abel
</p>


<h3>See Also</h3>

<p><code><a href="broom.html#topic+tidy.lm">tidy.lm</a></code>
</p>

<hr>
<h2 id='cut3'>cut3</h2><span id='topic+cut3'></span>

<h3>Description</h3>

<p>Hmisc::cut2 bones repackaged to remove errors with importing Hmisc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cut3(
  x,
  cuts,
  m = 150,
  g,
  digits,
  minmax = TRUE,
  oneval = TRUE,
  onlycuts = FALSE,
  formatfun = format,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cut3_+3A_x">x</code></td>
<td>
<p>numeric vector to classify into intervals.</p>
</td></tr>
<tr><td><code id="cut3_+3A_cuts">cuts</code></td>
<td>
<p>cut points.</p>
</td></tr>
<tr><td><code id="cut3_+3A_m">m</code></td>
<td>
<p>desired minimum number of observations in a group. The algorithm does not guarantee that all groups will have at least m observations.</p>
</td></tr>
<tr><td><code id="cut3_+3A_g">g</code></td>
<td>
<p>number of quantile groups</p>
</td></tr>
<tr><td><code id="cut3_+3A_digits">digits</code></td>
<td>
<p>number of significant digits to use in constructing levels.</p>
</td></tr>
<tr><td><code id="cut3_+3A_minmax">minmax</code></td>
<td>
<p>if cuts is specified but min(x)&lt;min(cuts) or max(x)&gt;max(cuts), augments cuts to include min and max x</p>
</td></tr>
<tr><td><code id="cut3_+3A_oneval">oneval</code></td>
<td>
<p>if an interval contains only one unique value, the interval will be labeled with the formatted version of that value instead of the interval endpoints, unless oneval=FALSE</p>
</td></tr>
<tr><td><code id="cut3_+3A_onlycuts">onlycuts</code></td>
<td>
<p>set to TRUE to only return the vector of computed cuts. This consists of the interior values plus outer ranges.</p>
</td></tr>
<tr><td><code id="cut3_+3A_formatfun">formatfun</code></td>
<td>
<p>format function</p>
</td></tr>
<tr><td><code id="cut3_+3A_...">...</code></td>
<td>
<p>additional arguments passed to formatfun</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of cut
</p>

<hr>
<h2 id='one_way_ave'>one_way_ave</h2><span id='topic+one_way_ave'></span>

<h3>Description</h3>

<p>Creates a pretty html plot of one way actual vs expected by specified predictor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>one_way_ave(
  feature_to_plot,
  model_object,
  target_variable,
  data_set,
  plot_type = "predictions",
  plot_factor_as_numeric = FALSE,
  ordering = NULL,
  width = 800,
  height = 500,
  number_of_buckets = 30,
  first_colour = "black",
  second_colour = "#cc4678",
  facetby = NULL,
  prediction_type = "response",
  predict_function = NULL,
  upper_percentile_to_cut = 0.01,
  lower_percentile_to_cut = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="one_way_ave_+3A_feature_to_plot">feature_to_plot</code></td>
<td>
<p>A string of the variable to plot.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_model_object">model_object</code></td>
<td>
<p>Model object to create coefficient table for. Must be of type: <a href="stats.html#topic+glm">glm</a>, <a href="stats.html#topic+lm">lm</a></p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_target_variable">target_variable</code></td>
<td>
<p>String of target variable name in dataset.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_data_set">data_set</code></td>
<td>
<p>Data set to calculate the actual vs expected for. If no input default is to try and extract training data from model object.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_plot_type">plot_type</code></td>
<td>
<p>one of &quot;Residual&quot;, &quot;predictions&quot; or &quot;actuals&quot; defaults to &quot;predictions&quot;</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_plot_factor_as_numeric">plot_factor_as_numeric</code></td>
<td>
<p>Set to TRUE to return <a href="base.html#topic+data.frame">data.frame</a> instead of creating <a href="knitr.html#topic+kable">kable</a>.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_ordering">ordering</code></td>
<td>
<p>Option to change the ordering of categories on the x axis, only for discrete categories. Default to the ordering of the factor. Other options are: 'alphabetical', 'Number of records', 'Average Value'</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_width">width</code></td>
<td>
<p>Width of plot</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_height">height</code></td>
<td>
<p>Height of plot</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_number_of_buckets">number_of_buckets</code></td>
<td>
<p>Number of buckets for continuous variable plots</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_first_colour">first_colour</code></td>
<td>
<p>First colour to plot, usually the colour of actual.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_second_colour">second_colour</code></td>
<td>
<p>Second colour to plot, usually the colour of predicted.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_facetby">facetby</code></td>
<td>
<p>Variable to facet the actual vs expect plots by.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_prediction_type">prediction_type</code></td>
<td>
<p>Prediction type to be pasted to predict.glm if predict_function is NULL. Defaults to &quot;response&quot;.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_predict_function">predict_function</code></td>
<td>
<p>A custom prediction function can be provided here.It must return a <a href="base.html#topic+data.frame">data.frame</a> with an &quot;Actual_Values&quot; column, and a &quot;Predicted_Values&quot; column.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_upper_percentile_to_cut">upper_percentile_to_cut</code></td>
<td>
<p>For continuous variables this is what percentile to exclude from the upper end of the distribution. Defaults to 0.01, so the maximum percentile of the variable in the plot will be 0.99. Cutting off some of the distribution can help the views if outlier's are present in the data.</p>
</td></tr>
<tr><td><code id="one_way_ave_+3A_lower_percentile_to_cut">lower_percentile_to_cut</code></td>
<td>
<p>For continuous variables this is what percentile to exclude from the lower end of the distribution. Defaults to 0.01, so the minimum percentile of the variable in the plot will be 0.01. Cutting off some of the distribution can help the views if outlier's are present in the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plotly plot of one way actual vs expected.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(prettyglm)
data('titanic')
columns_to_factor &lt;- c('Pclass',
                       'Sex',
                       'Cabin',
                       'Embarked',
                       'Cabintype',
                       'Survived')
meanage &lt;- base::mean(titanic$Age, na.rm=TRUE)

titanic  &lt;- titanic  %&gt;%
  dplyr::mutate_at(columns_to_factor, list(~factor(.))) %&gt;%
  dplyr::mutate(Age =base::ifelse(is.na(Age)==TRUE,meanage,Age)) %&gt;%
  dplyr::mutate(Age_0_25 = prettyglm::splineit(Age,0,25),
                Age_25_50 = prettyglm::splineit(Age,25,50),
                Age_50_120 = prettyglm::splineit(Age,50,120)) %&gt;%
  dplyr::mutate(Fare_0_250 = prettyglm::splineit(Fare,0,250),
                Fare_250_600 = prettyglm::splineit(Fare,250,600))

survival_model &lt;- stats::glm(Survived ~
                               Sex:Age +
                               Fare +
                               Embarked +
                               SibSp +
                               Parch +
                               Cabintype,
                             data = titanic,
                             family = binomial(link = 'logit'))

# Continuous Variable Example
one_way_ave(feature_to_plot = 'Age',
            model_object = survival_model,
            target_variable = 'Survived',
            data_set = titanic,
            number_of_buckets = 20,
            upper_percentile_to_cut = 0.1,
            lower_percentile_to_cut = 0.1)

# Discrete Variable Example
one_way_ave(feature_to_plot = 'Pclass',
            model_object = survival_model,
            target_variable = 'Survived',
            data_set = titanic)

# Custom Predict Function and facet
a_custom_predict_function &lt;- function(target, model_object, dataset){
  dataset &lt;- base::as.data.frame(dataset)
  Actual_Values &lt;- dplyr::pull(dplyr::select(dataset, tidyselect::all_of(c(target))))
  if(class(Actual_Values) == 'factor'){
    Actual_Values &lt;- base::as.numeric(as.character(Actual_Values))
  }
  Predicted_Values &lt;- base::as.numeric(stats::predict(model_object, dataset, type='response'))

  to_return &lt;-  base::data.frame(Actual_Values = Actual_Values,
                                 Predicted_Values = Predicted_Values)

  to_return &lt;- to_return %&gt;%
    dplyr::mutate(Predicted_Values = base::ifelse(Predicted_Values &gt; 0.3,0.3,Predicted_Values))
  return(to_return)
}

one_way_ave(feature_to_plot = 'Age',
            model_object = survival_model,
            target_variable = 'Survived',
            data_set = titanic,
            number_of_buckets = 20,
            upper_percentile_to_cut = 0.1,
            lower_percentile_to_cut = 0.1,
            predict_function = a_custom_predict_function,
            facetby = 'Pclass')


</code></pre>

<hr>
<h2 id='predict_outcome'>predict_outcome</h2><span id='topic+predict_outcome'></span>

<h3>Description</h3>

<p>Processing to predict response for various actual vs expected plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_outcome(
  target,
  model_object,
  dataset,
  prediction_type = NULL,
  weights = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_outcome_+3A_target">target</code></td>
<td>
<p>String of target variable name.</p>
</td></tr>
<tr><td><code id="predict_outcome_+3A_model_object">model_object</code></td>
<td>
<p>Model object. prettyglm currently supports</p>
</td></tr>
<tr><td><code id="predict_outcome_+3A_dataset">dataset</code></td>
<td>
<p>This is used to plot the number in each class as a barchart if plotly is TRUE.</p>
</td></tr>
<tr><td><code id="predict_outcome_+3A_prediction_type">prediction_type</code></td>
<td>
<p>type of prediction to be passed to the model object. For ...GLM defaults to ....</p>
</td></tr>
<tr><td><code id="predict_outcome_+3A_weights">weights</code></td>
<td>
<p>weightings to be provided to predictions if required.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>dataframe</code></td>
<td>
<p>Returns a dataframe of Actual and Predicted Values</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jared Fowler
</p>


<h3>See Also</h3>

<p><code><a href="broom.html#topic+tidy.lm">tidy.lm</a></code>
</p>

<hr>
<h2 id='pretty_coefficients'>pretty_coefficients</h2><span id='topic+pretty_coefficients'></span>

<h3>Description</h3>

<p>Creates a pretty kable of model coefficients including coefficient base levels, type III P.values, and variable importance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_coefficients(
  model_object,
  relativity_transform = NULL,
  relativity_label = "relativity",
  type_iii = NULL,
  conf.int = FALSE,
  vimethod = "model",
  spline_seperator = NULL,
  significance_level = 0.05,
  return_data = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_coefficients_+3A_model_object">model_object</code></td>
<td>
<p>Model object to create coefficient table for. Must be of type: <code><a href="stats.html#topic+glm">glm</a></code>, <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_relativity_transform">relativity_transform</code></td>
<td>
<p>String of the function to be applied to the model estimate to calculate the relativity, for example: 'exp(estimate)-1'. Default is for relativity to be excluded from output.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_relativity_label">relativity_label</code></td>
<td>
<p>String of label to give to relativity column if you want to change the title to your use case.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_type_iii">type_iii</code></td>
<td>
<p>Type III statistical test to perform. Default is none. Options are 'Wald' or 'LR'. Warning 'LR' can be computationally expensive. Test performed via <code><a href="car.html#topic+Anova">Anova</a></code></p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_conf.int">conf.int</code></td>
<td>
<p>Set to TRUE to include confidence intervals in summary table. Warning, can be computationally expensive.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_vimethod">vimethod</code></td>
<td>
<p>Variable importance method to pass to method of <code><a href="vip.html#topic+vi">vi</a></code>. Defaults to &quot;model&quot;. Currently supports &quot;permute&quot; and &quot;firm&quot;, pass any additional arguments to <code><a href="vip.html#topic+vi">vi</a></code> in ...</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_spline_seperator">spline_seperator</code></td>
<td>
<p>Separator to look for to identity a spline. If this input is not null, it is assumed any features with this separator are spline columns. For example an age spline from 0 to 25 you could use: AGE_0_25 and &quot;_&quot;.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_significance_level">significance_level</code></td>
<td>
<p>Significance level to P-values by in kable. Defaults to 0.05.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_return_data">return_data</code></td>
<td>
<p>Set to TRUE to return <code><a href="base.html#topic+data.frame">data.frame</a></code> instead of creating <code><a href="knitr.html#topic+kable">kable</a></code>.</p>
</td></tr>
<tr><td><code id="pretty_coefficients_+3A_...">...</code></td>
<td>
<p>Any additional parameters to be past to  <code><a href="vip.html#topic+vi">vi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="knitr.html#topic+kable">kable</a></code> if return_data = FALSE. <code><a href="base.html#topic+data.frame">data.frame</a></code> if return_data = TRUE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
library(prettyglm)
data('titanic')
columns_to_factor &lt;- c('Pclass',
                       'Sex',
                       'Cabin',
                       'Embarked',
                       'Cabintype',
                       'Survived')
meanage &lt;- base::mean(titanic$Age, na.rm=TRUE)

titanic  &lt;- titanic  %&gt;%
 dplyr::mutate_at(columns_to_factor, list(~factor(.))) %&gt;%
 dplyr::mutate(Age =base::ifelse(is.na(Age)==TRUE,meanage,Age)) %&gt;%
 dplyr::mutate(Age_0_25 = prettyglm::splineit(Age,0,25),
               Age_25_50 = prettyglm::splineit(Age,25,50),
               Age_50_120 = prettyglm::splineit(Age,50,120)) %&gt;%
 dplyr::mutate(Fare_0_250 = prettyglm::splineit(Fare,0,250),
               Fare_250_600 = prettyglm::splineit(Fare,250,600))

# A simple example
survival_model &lt;- stats::glm(Survived ~
                              Pclass +
                              Sex +
                              Age +
                              Fare +
                              Embarked +
                              SibSp +
                              Parch +
                              Cabintype,
                             data = titanic,
                             family = binomial(link = 'logit'))
pretty_coefficients(survival_model)

# A more complicated example with a spline and different importance method
survival_model3 &lt;- stats::glm(Survived ~
                                        Pclass +
                                        Age_0_25 +
                                        Age_25_50 +
                                        Age_50_120 +
                                        Sex:Fare_0_250 +
                                        Sex:Fare_250_600 +
                                        Embarked +
                                        SibSp +
                                        Parch +
                                        Cabintype,
                              data = titanic,
                              family = binomial(link = 'logit'))
pretty_coefficients(survival_model3,
                    relativity_transform = 'exp(estimate)-1',
                    spline_seperator = '_',
                    vimethod = 'permute',
                    target = 'Survived',
                    metric = "roc_auc",
                    event_level = 'second',
                    pred_wrapper = predict.glm,
                    smaller_is_better = FALSE,
                    train = survival_model3$data, # need to supply training data for vip importance
                    reference_class = 0)


</code></pre>

<hr>
<h2 id='pretty_relativities'>pretty_relativities</h2><span id='topic+pretty_relativities'></span>

<h3>Description</h3>

<p>Creates a pretty html plot of model relativities including base Levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_relativities(
  feature_to_plot,
  model_object,
  plot_approx_ci = TRUE,
  relativity_transform = "exp(estimate)-1",
  relativity_label = "Relativity",
  ordering = NULL,
  plot_factor_as_numeric = FALSE,
  width = 800,
  height = 500,
  iteractionplottype = NULL,
  facetorcolourby = NULL,
  upper_percentile_to_cut = 0.01,
  lower_percentile_to_cut = 0,
  spline_seperator = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_relativities_+3A_feature_to_plot">feature_to_plot</code></td>
<td>
<p>A string of the variable to plot.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_model_object">model_object</code></td>
<td>
<p>Model object to create coefficient table for. Must be of type: <a href="stats.html#topic+glm">glm</a>, <a href="stats.html#topic+lm">lm</a></p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_plot_approx_ci">plot_approx_ci</code></td>
<td>
<p>Set to TRUE to include confidence intervals in summary table. Warning, can be computationally expensive.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_relativity_transform">relativity_transform</code></td>
<td>
<p>String of the function to be applied to the model estimate to calculate the relativity, for example: 'exp(estimate)'. Default is for relativity to be 'exp(estimate)-1'.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_relativity_label">relativity_label</code></td>
<td>
<p>String of label to give to relativity column if you want to change the title to your use case, some users may prefer to refer to this as odds ratio.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_ordering">ordering</code></td>
<td>
<p>Option to change the ordering of categories on the x axis, only for discrete categories. Default to the ordering of the fitted factor. Other options are: 'alphabetical', 'Number of records', 'Average Value'</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_plot_factor_as_numeric">plot_factor_as_numeric</code></td>
<td>
<p>Set to TRUE to return <a href="base.html#topic+data.frame">data.frame</a> instead of creating <a href="knitr.html#topic+kable">kable</a>.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_width">width</code></td>
<td>
<p>Width of plot</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_height">height</code></td>
<td>
<p>Height of plot</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_iteractionplottype">iteractionplottype</code></td>
<td>
<p>If plotting the relativity for an interaction variable you can &quot;facet&quot; or &quot;colour&quot; by one of the interaction variables. Defaults to null.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_facetorcolourby">facetorcolourby</code></td>
<td>
<p>If iteractionplottype is not Null, then this is the variable in the interaction you want to colour or facet by.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_upper_percentile_to_cut">upper_percentile_to_cut</code></td>
<td>
<p>For continuous variables this is what percentile to exclude from the upper end of the distribution. Defaults to 0.01, so the maximum percentile of the variable in the plot will be 0.99. Cutting off some of the distribution can help the views if outlier's are present in the data.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_lower_percentile_to_cut">lower_percentile_to_cut</code></td>
<td>
<p>For continuous variables this is what percentile to exclude from the lower end of the distribution. Defaults to 0.01, so the mimimum percentile of the variable in the plot will be 0.01. Cutting off some of the distribution can help the views if outlier's are present in the data.</p>
</td></tr>
<tr><td><code id="pretty_relativities_+3A_spline_seperator">spline_seperator</code></td>
<td>
<p>string of the spline separator. For example AGE_0_25 would be &quot;_&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plotly plot of fitted relativities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(prettyglm)
data('titanic')

columns_to_factor &lt;- c('Pclass',
                       'Sex',
                       'Cabin',
                       'Embarked',
                       'Cabintype',
                       'Survived')
meanage &lt;- base::mean(titanic$Age, na.rm=TRUE)

titanic  &lt;- titanic  %&gt;%
  dplyr::mutate_at(columns_to_factor, list(~factor(.))) %&gt;%
  dplyr::mutate(Age =base::ifelse(is.na(Age)==TRUE,meanage,Age)) %&gt;%
  dplyr::mutate(Age_0_25 = prettyglm::splineit(Age,0,25),
                Age_25_50 = prettyglm::splineit(Age,25,50),
                Age_50_120 = prettyglm::splineit(Age,50,120)) %&gt;%
  dplyr::mutate(Fare_0_250 = prettyglm::splineit(Fare,0,250),
                Fare_250_600 = prettyglm::splineit(Fare,250,600))

survival_model3 &lt;- stats::glm(Survived ~
                                Pclass:Embarked +
                                Age_0_25  +
                                Age_25_50 +
                                Age_50_120  +
                                Sex:Fare_0_250 +
                                Sex:Fare_250_600 +
                                SibSp +
                                Parch +
                                Cabintype,
                              data = titanic,
                              family = binomial(link = 'logit'))

# categorical factor
pretty_relativities(feature_to_plot = 'Cabintype',
                    model_object = survival_model3)

# continuous factor
pretty_relativities(feature_to_plot = 'Parch',
                    model_object = survival_model3)

# splined continuous factor
pretty_relativities(feature_to_plot = 'Age',
                    model_object = survival_model3,
                    spline_seperator = '_',
                    upper_percentile_to_cut = 0.01,
                    lower_percentile_to_cut = 0.01)

# factor factor interaction
pretty_relativities(feature_to_plot = 'Pclass:Embarked',
                    model_object = survival_model3,
                    iteractionplottype = 'colour',
                    facetorcolourby = 'Pclass')

# Continuous spline and categorical by colour
pretty_relativities(feature_to_plot = 'Sex:Fare',
                    model_object = survival_model3,
                    spline_seperator = '_')

# Continuous spline and categorical by facet
pretty_relativities(feature_to_plot = 'Sex:Fare',
                    model_object = survival_model3,
                    spline_seperator = '_',
                    iteractionplottype = 'facet')
</code></pre>

<hr>
<h2 id='splineit'>splineit</h2><span id='topic+splineit'></span>

<h3>Description</h3>

<p>Splines a continuous variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splineit(var, min, max)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="splineit_+3A_var">var</code></td>
<td>
<p>Continuous vector to spline.</p>
</td></tr>
<tr><td><code id="splineit_+3A_min">min</code></td>
<td>
<p>Min of spline.</p>
</td></tr>
<tr><td><code id="splineit_+3A_max">max</code></td>
<td>
<p>Max of spline.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Splined Column
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(prettyglm)
data('titanic')

columns_to_factor &lt;- c('Pclass',
                      'Sex',
                      'Cabin',
                      'Embarked',
                      'Cabintype',
                      'Survived')
meanage &lt;- base::mean(titanic$Age, na.rm=TRUE)

titanic  &lt;- titanic  %&gt;%
 dplyr::mutate_at(columns_to_factor, list(~factor(.))) %&gt;%
 dplyr::mutate(Age =base::ifelse(is.na(Age)==TRUE,meanage,Age)) %&gt;%
 dplyr::mutate(Age_0_25 = prettyglm::splineit(Age,0,25),
               Age_25_50 = prettyglm::splineit(Age,25,50),
               Age_50_120 = prettyglm::splineit(Age,50,120)) %&gt;%
 dplyr::mutate(Fare_0_250 = prettyglm::splineit(Fare,0,250),
               Fare_250_600 = prettyglm::splineit(Fare,250,600))

</code></pre>

<hr>
<h2 id='titanic'>Titanic Data</h2><span id='topic+titanic'></span>

<h3>Description</h3>

<p>The sinking of the Titanic is one of the most infamous shipwrecks in history.
On April 15, 1912, during her maiden voyage, the widely considered “unsinkable” RMS Titanic sank after colliding with an iceberg. Unfortunately, there weren’t enough lifeboats for everyone onboard, resulting in the death of 1502 out of 2224 passengers and crew.
While there was some element of luck involved in surviving, it seems some groups of people were more likely to survive than others.
In this challenge, we ask you to build a predictive model that answers the question: “what sorts of people were more likely to survive?” using passenger data (ie name, age, gender, socio-economic class, etc).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(titanic)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>"data.frame"</code>
</p>

<dl>
<dt>survival</dt><dd><p>Survival</p>
</dd>
<dt>pclass</dt><dd><p>Ticket class</p>
</dd>
<dt>sex</dt><dd><p>Sex</p>
</dd>
<dt>Age</dt><dd><p>Age in years</p>
</dd>
<dt>sibsp</dt><dd><p>number of siblings / spouses</p>
</dd>
<dt>parch</dt><dd><p>number of parents / children</p>
</dd>
<dt>ticket</dt><dd><p>Ticket number</p>
</dd>
<dt>fare</dt><dd><p>Passenger fare</p>
</dd>
<dt>cabin</dt><dd><p>Cabin Number</p>
</dd>
<dt>cabintype</dt><dd><p>Type of cabin</p>
</dd>
<dt>embarked</dt><dd><p>Port of Embarkation</p>
</dd>
</dl>



<h3>References</h3>

<p>This data set sourced from https://www.kaggle.com/c/titanic/data?select=train.csv
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(titanic)
head(titanic)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
