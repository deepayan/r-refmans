<!DOCTYPE html><html><head><title>Help for package atlas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {atlas}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#atlas.connect'><p>Connects to ATLAS instance</p></a></li>
<li><a href='#atlas.contains'><p>Returns the statistics information</p></a></li>
<li><a href='#atlas.csv'><p>Queries ATLAS with a CSV() command and imports the contents of the csv into a data frame</p></a></li>
<li><a href='#atlas.dump'><p>Dumps patient from ATLAS to a file on disk</p></a></li>
<li><a href='#atlas.query'><p>Queries ATLAS and returns a list of patient IDs</p></a></li>
<li><a href='#atlas.status'><p>Returns the status of the ATLAS</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Stanford 'ATLAS' Search Engine API</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Vladimir Polony</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Vladimir Polony &lt;podalv@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Stanford 'ATLAS' (Advanced Temporal Search Engine) is a powerful tool that allows constructing
             cohorts of patients extremely quickly and efficiently. This package is designed to interface directly
             with an instance of 'ATLAS' search engine and facilitates API queries and data dumps. Prerequisite
             is a good knowledge of the temporal language to be able to efficiently construct a query.
             More information available at <a href="https://shahlab.stanford.edu/start">https://shahlab.stanford.edu/start</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://shahlab.stanford.edu/start">https://shahlab.stanford.edu/start</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, testthat</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1.9000</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-08-10 16:53:15 UTC; podalv</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-08-10 17:20:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='atlas.connect'>Connects to ATLAS instance</h2><span id='topic+atlas.connect'></span>

<h3>Description</h3>

<p>Attempts to connect to ATLAS instance using URL:PORT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.connect(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.connect_+3A_url">url</code></td>
<td>
<p>url address of a running ATLAS instance, usually containing port information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing connection information used for all other accessory functions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.connect("http://localhost:8080")

</code></pre>

<hr>
<h2 id='atlas.contains'>Returns the statistics information</h2><span id='topic+atlas.contains'></span>

<h3>Description</h3>

<p>Returns the statistics information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.contains(connection, patient_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.contains_+3A_connection">connection</code></td>
<td>
<p>connection object returned from connect(url) function</p>
</td></tr>
<tr><td><code id="atlas.contains_+3A_patient_id">patient_id</code></td>
<td>
<p>numerical id of the patient</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.contains(atlas.connect('http://localhost:8080'), 123)


</code></pre>

<hr>
<h2 id='atlas.csv'>Queries ATLAS with a CSV() command and imports the contents of the csv into a data frame</h2><span id='topic+atlas.csv'></span>

<h3>Description</h3>

<p>Queries ATLAS with a CSV() command and imports the contents of the csv into a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.csv(connection, query, file_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.csv_+3A_connection">connection</code></td>
<td>
<p>connection object returned from connect(url) function</p>
</td></tr>
<tr><td><code id="atlas.csv_+3A_query">query</code></td>
<td>
<p>ATLAS CSV query</p>
</td></tr>
<tr><td><code id="atlas.csv_+3A_file_name">file_name</code></td>
<td>
<p>if specified, stores the csv into the file_name, otherwise the temporary
file used to download the data will be deleted after the data.frame is generated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing CSV file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.csv(atlas.connect('http://localhost:8080'), 'CSV(ICD9=250.50, CPT, LABS, ICD9)')
atlas.csv(atlas.connect('http://localhost:8080'), 'CSV(ICD9=250.50, CPT, LABS, ICD9)',
          '/output.csv')

</code></pre>

<hr>
<h2 id='atlas.dump'>Dumps patient from ATLAS to a file on disk</h2><span id='topic+atlas.dump'></span>

<h3>Description</h3>

<p>Dumps patient from ATLAS to a file on disk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.dump(connection, patient_id, path, selection_query = NULL,
  contains_start = FALSE, contains_end = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.dump_+3A_connection">connection</code></td>
<td>
<p>connection object returned from connect(url) function</p>
</td></tr>
<tr><td><code id="atlas.dump_+3A_patient_id">patient_id</code></td>
<td>
<p>numerical id of the patient</p>
</td></tr>
<tr><td><code id="atlas.dump_+3A_path">path</code></td>
<td>
<p>path where to store the generated files</p>
</td></tr>
<tr><td><code id="atlas.dump_+3A_selection_query">selection_query</code></td>
<td>
<p>returns only the part of patient's data that intersects with the result of the selection_query</p>
</td></tr>
<tr><td><code id="atlas.dump_+3A_contains_start">contains_start</code></td>
<td>
<p>the dumped time interval's start has to be intersecting the selection_query</p>
</td></tr>
<tr><td><code id="atlas.dump_+3A_contains_end">contains_end</code></td>
<td>
<p>the dumped time interval's end has to be intersecting the selection_query</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing patient IDs and time intervals (optional)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.dump(atlas.connect('http://localhost:8080'), 123, '/path/to/dump/files/')
atlas.dump(atlas.connect('http://localhost:8080'), 123, '/path/', 'ICD9=250.50', TRUE, TRUE)


</code></pre>

<hr>
<h2 id='atlas.query'>Queries ATLAS and returns a list of patient IDs</h2><span id='topic+atlas.query'></span>

<h3>Description</h3>

<p>Queries ATLAS and returns a list of patient IDs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.query(connection, query, output_time = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.query_+3A_connection">connection</code></td>
<td>
<p>connection object returned from connect(url) function</p>
</td></tr>
<tr><td><code id="atlas.query_+3A_query">query</code></td>
<td>
<p>ATLAS query</p>
</td></tr>
<tr><td><code id="atlas.query_+3A_output_time">output_time</code></td>
<td>
<p>equivalent to wrapping the query in OUTPUT() command. Togerther with patient IDs outputs each
time interval in patient's timeline when the query was evaluated as true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing patient IDs and time intervals (optional)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.query(atlas.connect('http://localhost:8080'), 'ICD9=250.50')
atlas.query(atlas.connect('http://localhost:8080'), 'ICD9=250.50', TRUE)


</code></pre>

<hr>
<h2 id='atlas.status'>Returns the status of the ATLAS</h2><span id='topic+atlas.status'></span>

<h3>Description</h3>

<p>Returns the status of the ATLAS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atlas.status(connection)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atlas.status_+3A_connection">connection</code></td>
<td>
<p>connection object returned from connect(url) function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing patient IDs and time intervals (optional)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>atlas.status(atlas.connect('http://localhost:8080'))


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
