<!DOCTYPE html><html><head><title>Help for package ugatsdb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ugatsdb}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.IDvars'><p>Global Identifier Macros</p></a></li>
<li><a href='#datasets'><p>Retrieve Datasets Table</p></a></li>
<li><a href='#datasources'><p>Retrieve Data Sources Table</p></a></li>
<li><a href='#expand_date'><p>Generate Temporal Identifiers from a Date Column</p></a></li>
<li><a href='#get_data'><p>Retrieve Data from the Database</p></a></li>
<li><a href='#long2wide'><p>Reshape Long API Data to Column-Based Format</p></a></li>
<li><a href='#make_date'><p>Coerce Vectors to Dates</p></a></li>
<li><a href='#series'><p>Retrieve Series Table</p></a></li>
<li><a href='#transpose_wide'><p>Transpose a Wide Dataset to a Row-Based Format</p></a></li>
<li><a href='#ugatsdb_reconnect'><p>Reconnect to Database</p></a></li>
<li><a href='#ugatsdb-package'><p>Uganda Time Series Database API</p></a></li>
<li><a href='#wide2excel'><p>Export Wide Data to Excel</p></a></li>
<li><a href='#wide2long'><p>Reshape Column-Based Data to Long Format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Uganda Time Series Database API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-11-20</td>
</tr>
<tr>
<td>Description:</td>
<td>An R API providing easy access to a relational database with macroeconomic, 
             financial and development related time series data for Uganda. 
             Overall more than 5000 series at varying frequency (daily, monthly, 
             quarterly, annual in fiscal or calendar years) can be accessed through 
             the API. The data is provided by the Bank of Uganda, 
             the Ugandan Ministry of Finance, Planning and Economic Development,
             the IMF and the World Bank. The database is being updated once a month. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://mepd.finance.go.ug/apps.html">https://mepd.finance.go.ug/apps.html</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>DBI, RMySQL, data.table, collapse, writexl</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magrittr, xts, dygraphs</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-20 23:28:02 UTC; sebastiankrantz</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastian Krantz [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Krantz &lt;sebastian.krantz@graduateinstitute.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-24 00:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.IDvars'>Global Identifier Macros</h2><span id='topic+.IDvars'></span><span id='topic+.Tvars'></span>

<h3>Description</h3>

<p>The macro <code>.IDvars</code> contains the string <code>c("DSID", "Series")</code> denoting
variables that uniquely identify series in the database.
<em>Note</em> that the series code contained in &quot;Series&quot; alone is not sufficient to uniquely identify a series as some
series are recorded with the same code in multiple datasets (mostly either the same data aggregated at a different frequency, or a different collection of indicators).
For example goods exports with the series code &quot;EX_G&quot; are recorded in the datasets &quot;BOU_MMI&quot;, &quot;BOU_MMI_A&quot; (annual data), and &quot;BOU_MMI_FY&quot; (fiscal year data).
</p>
<p>The macro <code>.Tvars</code> contains the string
<code>c("Date", "Year", "Quarter", "FY", "QFY", "Month", "Day")</code> denoting temporal identifiers generated by <code><a href="#topic+expand_date">expand_date</a></code>.
The &quot;Date&quot; variable is sufficient to uniquely identify a point in time in the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.IDvars
.Tvars
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>.IDvars
.Tvars


</code></pre>

<hr>
<h2 id='datasets'>Retrieve Datasets Table</h2><span id='topic+datasets'></span>

<h3>Description</h3>

<p>This function pulls and return a table called 'DATASET' from the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datasets(ordered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datasets_+3A_ordered">ordered</code></td>
<td>
<p>logical. <code>TRUE</code> orders the result in the order data was entered into the database, while <code>FALSE</code> returns the result in a random order, to the benefit of faster query execution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'DATASET' table gives information about the different datasets read into the database from various sources. It provides a unique id for each dataset, the frequency of data, the minimum and maximum time coverage, when the dataset was last updated, a description, the source (matching the 'Source' column in the 'DATASOURCE' table), and an (optional) url providing direct access to the raw data.
</p>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with information about the available datasets in the database.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+datasources">datasources</a></code>, <code><a href="#topic+series">series</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
datasets()

</code></pre>

<hr>
<h2 id='datasources'>Retrieve Data Sources Table</h2><span id='topic+datasources'></span>

<h3>Description</h3>

<p>This function pulls and returns a table called 'DATASOURCE' from the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datasources(ordered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datasources_+3A_ordered">ordered</code></td>
<td>
<p>logical. <code>TRUE</code> orders the result in the order data was entered into the database, while <code>FALSE</code> returns the result in a random order, to the benefit of faster query execution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'DATASOURCE' table gives information about the various sources / providers of data in this database, including the source website, the number of datasets available from the source, a description of the source and the way data is accessed from the source.
</p>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with information about the sources of data in the database.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+datasets">datasets</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
datasources()

</code></pre>

<hr>
<h2 id='expand_date'>Generate Temporal Identifiers from a Date Column</h2><span id='topic+expand_date'></span>

<h3>Description</h3>

<p>This function expands a date column and generates additional temporal identifiers from it (such as the year, month, quarter, fiscal year etc.).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_date(
  x,
  gen = c("Year", "Quarter", "FY", "QFY", "Month"),
  origin = "1899-12-30",
  keep.date = TRUE,
  remove.missing.date = TRUE,
  sort = TRUE,
  as.factor = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_date_+3A_x">x</code></td>
<td>
<p>either a vector of class 'Date', or coercible to date using <code><a href="base.html#topic+as.Date">as.Date</a></code>, or a data frame / list with a date variable in the first column.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_gen">gen</code></td>
<td>
<p>character. A vector of identifiers to generate from <code>x</code>. The possible identifiers are found in <code><a href="#topic+.Tvars">.Tvars</a></code>. The default setting is to generate all identifiers apart from &quot;Day&quot;.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_origin">origin</code></td>
<td>
<p>character / Date. Passed to <code><a href="base.html#topic+as.Date">as.Date</a></code>: for converting numeric <code>x</code> to date.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_keep.date">keep.date</code></td>
<td>
<p>logical. <code>TRUE</code> will keep the date variable in the first column of the resulting dataset, <code>FALSE</code> will remove the date variable in favor of the generated identifiers.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_remove.missing.date">remove.missing.date</code></td>
<td>
<p>logical. <code>TRUE</code> will remove missing values in <code>x</code>. If <code>x</code> is a dataset, the corresponding rows will be removed.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_sort">sort</code></td>
<td>
<p>logical. <code>TRUE</code> will sort the data by the date column.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_as.factor">as.factor</code></td>
<td>
<p><code>TRUE</code> will generate quarters, fiscal years and months ('Quarter', 'FY', 'QFY', 'Month') as factor variables. It is also possible to use <code>as.factor = "ordered"</code> to generate ordered factors.
<code>FALSE</code> will generate fiscal years as character and quarters and months as integer variables.</p>
</td></tr>
<tr><td><code id="expand_date_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> containing the computed identifiers as columns. See Examples.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_date">make_date</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'># First a basic example
x &lt;- seq.Date(as.Date("1999-01-01"), as.Date("2000-01-01"), by = "month")
expand_date(x)
expand_date(x, gen = c("Year", "Month"), keep.date = FALSE)

# Now using the API
expand_date(get_data("BOU_CPI")) # Getting Monthly CPI data from the Bank of Uganda

# Same thing
get_data("BOU_CPI", expand.date = TRUE)


</code></pre>

<hr>
<h2 id='get_data'>Retrieve Data from the Database</h2><span id='topic+get_data'></span>

<h3>Description</h3>

<p>This is the main function of the package to retrieve data from the database. It constructs an SQL query which is sent to the database and returns the data as a <code><a href="data.table.html#topic+data.table">data.table</a></code> in R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data(
  dsid = NULL,
  series = NULL,
  from = NULL,
  to = NULL,
  labels = TRUE,
  wide = TRUE,
  expand.date = FALSE,
  ordered = TRUE,
  return.query = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_data_+3A_dsid">dsid</code></td>
<td>
<p>character. (Optional) id's of datasets matching the 'DSID' column of the 'DATASET' table (retrieved using <code><a href="#topic+datasets">datasets()</a></code>). If none of the following arguments are used, all series from those datasets will be returned.</p>
</td></tr>
<tr><td><code id="get_data_+3A_series">series</code></td>
<td>
<p>character. (Optional) codes of series matching the 'Series' column of the 'Series' table (retrieved using <code><a href="#topic+series">series()</a></code>).</p>
</td></tr>
<tr><td><code id="get_data_+3A_from">from</code></td>
<td>
<p>set the start time of the data retrieved by either supplying a start date, a date-string of the form <code>"YYYY-MM-DD"</code> or <code>"YYYY-MM"</code>,
year-quarters of the form <code>"YYYYQN"</code> or <code>"YYYY-QN"</code>, a numeric year <code>YYYY</code> (numeric or character), or a fiscal year of the form <code>"YYYY/YY"</code>. These expressions are converted to a regular date by <code><a href="#topic+make_date">make_date</a></code>.</p>
</td></tr>
<tr><td><code id="get_data_+3A_to">to</code></td>
<td>
<p>same as <code>from</code>: to set the time period until which data is retrieved. For expressions that are not full &quot;YYYY-MM-DD&quot; dates, the last day of the period is chosen.</p>
</td></tr>
<tr><td><code id="get_data_+3A_labels">labels</code></td>
<td>
<p>logical. <code>TRUE</code> will also return labels (series descriptions) along with the series codes.</p>
</td></tr>
<tr><td><code id="get_data_+3A_wide">wide</code></td>
<td>
<p>logical. <code>TRUE</code> calls <code><a href="#topic+long2wide">long2wide</a></code> on the result. <code>FALSE</code> returns the data in a long format without missing values (suitable for <code>ggplot2</code>).</p>
</td></tr>
<tr><td><code id="get_data_+3A_expand.date">expand.date</code></td>
<td>
<p>logical. <code>TRUE</code> will call <code><a href="#topic+expand_date">expand_date</a></code> on the result.</p>
</td></tr>
<tr><td><code id="get_data_+3A_ordered">ordered</code></td>
<td>
<p>logical. <code>TRUE</code> orders the result by 'Date' and, if <code>labels = TRUE</code>, by series, maintaining the column-order of series in the dataset(s).
<code>FALSE</code> returns the result in a random order, to the benefit of faster query execution.</p>
</td></tr>
<tr><td><code id="get_data_+3A_return.query">return.query</code></td>
<td>
<p>logical. <code>TRUE</code> will not query the database but instead return the constructed SQL query as a character string.</p>
</td></tr>
<tr><td><code id="get_data_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="#topic+long2wide">long2wide</a></code> (if <code>wide = TRUE</code>) or <code><a href="#topic+expand_date">expand_date</a></code> (if <code>expand.date = TRUE</code>), no conflicts between these two.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>labels = FALSE</code>, the 'SERIES' table is not joined to the 'DATA' table, and <code>ordered = TRUE</code> will order datasets and series retrieved in alphabetic order.
If <code>labels = TRUE</code> data is ordered by series and date within each dataset, preserving the order of columns in the dataset. If multiple datasets are received they are ordered alphabetically according to the 'DSID' column.
</p>
<p>It is possible query multiple series from multiple datasets e.g. <code>get_data(c("DSID1", "DSID2"), c("SERFROM1", "SERFROM2"))</code> etc., but care needs to be taken that the series queried do not occur in both datasets (see <code><a href="#topic+.IDvars">.IDvars</a></code>, and check using <code><a href="#topic+series">series(c(&quot;DSID1&quot;, &quot;DSID2&quot;))</a></code>).
Series from datasets at different frequencies can be queried, but, if <code>wide = TRUE</code>, this will result in missing values for all but the first observations per period in the lower frequency series.
</p>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with the result of the query.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+long2wide">long2wide</a></code>, <code><a href="#topic+expand_date">expand_date</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Return monthly macroeconomic indicators from the year 2000 onwards
get_data("BOU_MMI", from = 2000, wide = FALSE)

# Return wide format with date expanded
get_data("BOU_MMI", from = 2000, expand.date = TRUE)

# Same thing in multiple steps (with additional customization options):
library(magrittr) # Pipe %&gt;% operators
get_data("BOU_MMI", from = 2000, wide = FALSE) %&gt;% long2wide %&gt;% expand_date

# Getting a single series
get_data("BOU_MMI", "M2", 2000)

# Getting High-Frequency activity indicators from BoU and Revenue &amp; Expense from MoFPED
get_data(c("BOU_MMI", "MOF_TOT", "WB_WDI"), c("CIEA", "BTI", "REV_GRA", "EXP_LEN"))

# Getting daily interest rates and plotting
library(xts)   # Time series class
get_data("BOU_I", from = 2018, wide = FALSE) %&gt;%
   long2wide(names_from = "Label") %&gt;%
   as.xts %&gt;%
   plot(legend.loc = "topleft")

</code></pre>

<hr>
<h2 id='long2wide'>Reshape Long API Data to Column-Based Format</h2><span id='topic+long2wide'></span>

<h3>Description</h3>

<p>This function automatically reshapes long (stacked) raw data from the API (<code><a href="#topic+get_data">get_data(..., wide = FALSE)</a></code>) to a wide format where each variable has its own column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long2wide(
  data,
  id_cols = intersect(.Tvars, names(data)),
  names_from = "Series",
  values_from = "Value",
  labels_from = if (any(names(data) == "Label")) "Label" else NULL,
  expand.date = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="long2wide_+3A_data">data</code></td>
<td>
<p>raw data from the API: A long format data frame where all values are stacked in a value column.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_id_cols">id_cols</code></td>
<td>
<p>character. Temporal identifiers of the data. By default all variables in <code><a href="#topic+.Tvars">.Tvars</a></code> are selected.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_names_from">names_from</code></td>
<td>
<p>character. The column containing the series codes. These will become the names of the new columns in the wider data format.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_values_from">values_from</code></td>
<td>
<p>character. The column containing the data values.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_labels_from">labels_from</code></td>
<td>
<p>character. The column containing the labels describing the series.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_expand.date">expand.date</code></td>
<td>
<p>logical. <code>TRUE</code> will call <code><a href="#topic+expand_date">expand_date</a></code> on the data after reshaping.</p>
</td></tr>
<tr><td><code id="long2wide_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="data.table.html#topic+dcast">dcast</a></code> or <code><a href="#topic+expand_date">expand_date</a></code>, no conflicts between these two.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with the reshaped data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wide2long">wide2long</a></code>, <code><a href="#topic+wide2excel">wide2excel</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Return monthly macroeconomic indicators from the year 2000 onwards
long2wide(get_data("BOU_MMI", from = 2000, wide = FALSE))

</code></pre>

<hr>
<h2 id='make_date'>Coerce Vectors to Dates</h2><span id='topic+make_date'></span>

<h3>Description</h3>

<p>This function coerces date strings i.e. <code>"YYYY-MM-DD"</code> or <code>"YYYY-MM"</code>, years e.g. <code>2015</code> (numeric or character),
year-quarters e.g. <code>"2015Q1"</code> or <code>"2015-Q1"</code>, year-months e.g. <code>"2015M01"</code> or <code>"2015-M01"</code>, fiscal years e.g. <code>"1997/98"</code> or numeric values representing dates (e.g. previously imported Excel date) to a regular R date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_date(x, end = FALSE, origin = "1899-12-30")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_date_+3A_x">x</code></td>
<td>
<p>a character date string <code>"YYYY-MM-DD"</code> or <code>"YYYY-MM"</code>, year-quarter <code>"YYYYQN"</code> or <code>"YYYY-QN"</code>, , year-month <code>"YYYYMNN"</code> or <code>"YYYY-MNN"</code>, fiscal year <code>"YYYY/YY"</code> or calendar year <code>YYYY</code> (numeric or character), or a numeric value corresponding to a date that can be passed to <code><a href="base.html#topic+as.Date.numeric">as.Date.numeric</a></code>.</p>
</td></tr>
<tr><td><code id="make_date_+3A_end">end</code></td>
<td>
<p>logical. <code>TRUE</code> replaces missing time information with a period end-date which is the last day of the period. <code>FALSE</code> replaces missing month and day information with <code>"-01"</code>,
so the year date is the 1st of January, the fiscal year date the 1st of July, and for months / quarters the 1st day of the month / quarter.</p>
</td></tr>
<tr><td><code id="make_date_+3A_origin">origin</code></td>
<td>
<p>a date or date-string that can be used as reference for converting numeric values to dates. The default corresponds to dates generated in Excel for Windows. See <code><a href="base.html#topic+as.Date.numeric">as.Date.numeric</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+Date">Date</a></code> vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expand_date">expand_date</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_date("2011-05")
make_date(2011)
make_date("2011/12")
make_date("2011/12", end = TRUE)
make_date("2011Q1")
make_date("2011Q1", end = TRUE)

</code></pre>

<hr>
<h2 id='series'>Retrieve Series Table</h2><span id='topic+series'></span>

<h3>Description</h3>

<p>This function pulls and returns a table called 'SERIES' from the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>series(dsid = NULL, dataset.info = TRUE, ordered = TRUE, return.query = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="series_+3A_dsid">dsid</code></td>
<td>
<p>character. (Optional) id's of datasets matching the 'DSID' column of the 'DATASET' table (retrieved using <code><a href="#topic+datasets">datasets()</a></code>) for which series information is to be returned.</p>
</td></tr>
<tr><td><code id="series_+3A_dataset.info">dataset.info</code></td>
<td>
<p>logical. <code>TRUE</code> returns additional information from the 'DATASET' table about the
datasets in which the series are recorded. <code>FALSE</code> only returns the raw 'SERIES' table.</p>
</td></tr>
<tr><td><code id="series_+3A_ordered">ordered</code></td>
<td>
<p>logical. <code>TRUE</code> orders the result in the order data was entered into the database, while <code>FALSE</code> returns the result in a random order, to the benefit of faster query execution.</p>
</td></tr>
<tr><td><code id="series_+3A_return.query">return.query</code></td>
<td>
<p>logical. <code>TRUE</code> will not query the database but instead return the constructed SQL query as a character string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'SERIES' table gives information about all of the time series in the database. Each series is given a code which is however not unique across datasets (see <code><a href="#topic+.IDvars">.IDvars</a></code>).
Each series also has a label describing the series. Further information recorded are the minimum and maximum time coverage, and (optionally) a separate series source and url.
By default <code>dataset.info = TRUE</code> and the frequency of the data, the date when the dataset containing the series was last updated, the dataset and data source are added to the
'SERIES' table from the 'DATASET' table.
</p>
<p>If <code>dataset.info = FALSE</code>, the 'DATASET' table is not joined to the 'SERIES' table, and <code>ordered = TRUE</code> only orders the series within each dataset to maintain the column order of series in the source data.
In that case the datasets are returned in alphabetic order of 'DSID', not the order in which they were entered into the 'DATASET' table.
</p>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with information about the available time series in the database.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+datasets">datasets</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# By default returns all series with additional information
series()

# Raw series table
series(dataset.info = FALSE)

# Only series in the Monthly Macroeconomic Indicators of the BoU
series("BOU_MMI")

</code></pre>

<hr>
<h2 id='transpose_wide'>Transpose a Wide Dataset to a Row-Based Format</h2><span id='topic+transpose_wide'></span>

<h3>Description</h3>

<p>This function is called by <code><a href="#topic+wide2excel">wide2excel</a></code> with option <code>transpose = TRUE</code> to generate a row-based tabular data format from a wide data frame in R that is suitable for exporting to Excel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transpose_wide(data, date.format = "%d/%m/%Y")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transpose_wide_+3A_data">data</code></td>
<td>
<p>a wide format data frame where each column is a variable and the first variable uniquely identifies the data.</p>
</td></tr>
<tr><td><code id="transpose_wide_+3A_date.format">date.format</code></td>
<td>
<p>a format for date columns which is passed to <code><a href="base.html#topic+format.Date">format.Date</a></code>. When transposing wide, dates are converted to character. The default R YYYY-MM-DD format for dates is often not recognized by Excel. By default dates are transformed to DD/MM/YYYY format which Excel (UK English) recognizes. Putting <code>FALSE</code> here does not transform dates into another format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A transposed data frame or <code><a href="data.table.html#topic+data.table">data.table</a></code> (the class of the input is preserved).
</p>


<h3>See Also</h3>

<p><code><a href="data.table.html#topic+transpose">transpose</a></code>, <code><a href="#topic+long2wide">long2wide</a></code>, <code><a href="#topic+wide2excel">wide2excel</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
transpose_wide(get_data("BOU_CPI"))

</code></pre>

<hr>
<h2 id='ugatsdb_reconnect'>Reconnect to Database</h2><span id='topic+ugatsdb_reconnect'></span>

<h3>Description</h3>

<p>This function terminates an existing connection to the database server and attempts to reconnect to it.
It is now somewhat redundant by the safe query mechanism introduced in v0.2.1 of the package, where each query is evaluated inside
<code><a href="base.html#topic+tryCatch">tryCatch</a></code> and the database connection is renewed if the query fails. This function can still be used to manually
renew the database connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ugatsdb_reconnect()
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ugatsdb_reconnect()

</code></pre>

<hr>
<h2 id='ugatsdb-package'>Uganda Time Series Database API</h2><span id='topic+ugatsdb-package'></span><span id='topic+ugatsdb'></span>

<h3>Description</h3>

<p>An R API providing easy access to a relational database with macroeconomic,
financial and development related time series data for Uganda.
Overall more than 5000 series at varying frequency (daily, monthly,
quarterly, annual in fiscal or calendar years) can be accessed through
the API. The data is provided by the Bank of Uganda,
the Ugandan Ministry of Finance, Planning and Economic Development,
the IMF and the World Bank. The database is being updated once a month.
</p>


<h3>Functions</h3>

<p>Functions to retrieve tables identifying the data
</p>
<p><code><a href="#topic+datasources">datasources()</a></code><br />
<code><a href="#topic+datasets">datasets()</a></code><br />
<code><a href="#topic+series">series()</a></code><br />

</p>
<p>Function to retrieve the data from the database
</p>
<p><code><a href="#topic+get_data">get_data()</a></code>
</p>
<p>Functions to reshape data and add temporal identifiers
</p>
<p><code><a href="#topic+long2wide">long2wide()</a></code><br />
<code><a href="#topic+wide2long">wide2long()</a></code><br />
<code><a href="#topic+expand_date">expand_date()</a></code>
</p>
<p>Function to export wide format data to Excel
</p>
<p><code><a href="#topic+wide2excel">wide2excel()</a></code><br />
</p>
<p>Helper functions (useful esp. for common Excel formats)
</p>
<p><code><a href="#topic+make_date">make_date()</a></code><br />
<code><a href="#topic+transpose_wide">transpose_wide()</a></code><br />
</p>
<p>Global Macros with core ID variables in the database
</p>
<p><code><a href="#topic+.IDvars">.IDvars</a></code><br />
<code><a href="#topic+.Tvars">.Tvars</a></code>
</p>
<p>Function to renew database connection without reloading the package
</p>
<p><code><a href="#topic+ugatsdb_reconnect">ugatsdb_reconnect()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ugatsdb)
library(magrittr) # Pipe %&gt;% operators
library(xts)      # Time series class and pretty plots

# Plotting daily IFEM Buying and Selling Rates from the Bank of Uganda
get_data("BOU_E", c("E_IFEM_B", "E_IFEM_S"), from = 2020) %&gt;%
  as.xts %&gt;% plot

library(dygraphs)

# Same generating a dynamic chart
get_data("BOU_E", c("E_IFEM_B", "E_IFEM_S"), from = 2020) %&gt;%
  as.xts %&gt;% dygraph

# Static plot but with legend showing variable labels
get_data("BOU_E", c("E_IFEM_B", "E_IFEM_S"), from = 2020, wide = FALSE) %&gt;%
  long2wide(names_from = "Label") %&gt;% as.xts %&gt;%
  plot(legend.loc = "topleft")

</code></pre>

<hr>
<h2 id='wide2excel'>Export Wide Data to Excel</h2><span id='topic+wide2excel'></span>

<h3>Description</h3>

<p>This function exports a wide format dataset to a column- (default) or row-oriented Excel format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wide2excel(data, ..., transpose = FALSE, transpose.date.format = "%d/%m/%Y")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wide2excel_+3A_data">data</code></td>
<td>
<p>a wide dataset from <code><a href="#topic+get_data">get_data</a></code> or reshaped to a wide format with <code><a href="#topic+long2wide">long2wide</a></code>.</p>
</td></tr>
<tr><td><code id="wide2excel_+3A_...">...</code></td>
<td>
<p>further arguments to <code><a href="writexl.html#topic+write_xlsx">write_xlsx</a></code>. As a minimum a path needs to be supplied that ends with the name of the Excel file. See Examples.</p>
</td></tr>
<tr><td><code id="wide2excel_+3A_transpose">transpose</code></td>
<td>
<p>logical. If <code>TRUE</code>, the result is returned in a row-oriented Excel format. The default is column oriented (same as the dataset in R).</p>
</td></tr>
<tr><td><code id="wide2excel_+3A_transpose.date.format">transpose.date.format</code></td>
<td>
<p>argument passed to <code><a href="#topic+transpose_wide">transpose_wide</a></code>, setting the format of date columns when data is transposed.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+transpose_wide">transpose_wide</a></code>, <code><a href="writexl.html#topic+write_xlsx">write_xlsx</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Getting macroeconomic indicators from Bank of Uganda in fiscal years
data &lt;- get_data("BOU_MMI_FY", from = "2000/01")

# Saving to different Excel formats
wide2excel(data, "BOU_MMI_FY.xlsx")
wide2excel(data, "BOU_MMI_FY.xlsx", transpose = TRUE)

# Saving to alternative path
wide2excel(data, "C:/Users/.../BOU_MMI_FY.xlsx")

## End(Not run)

</code></pre>

<hr>
<h2 id='wide2long'>Reshape Column-Based Data to Long Format</h2><span id='topic+wide2long'></span>

<h3>Description</h3>

<p>This function automatically reshapes wide (column-based) data into a long format akin to the format of the raw data coming from the database (<code><a href="#topic+get_data">get_data(..., wide = FALSE)</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wide2long(
  data,
  id_cols = intersect(.Tvars, names(data)),
  to_value = setdiff(names(data), id_cols),
  variable_name = "Series",
  value_name = "Value",
  label_name = "Label",
  na.rm = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wide2long_+3A_data">data</code></td>
<td>
<p>a wide format data frame where all series have their own column.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_id_cols">id_cols</code></td>
<td>
<p>character. Temporal identifiers of the data. By default all variables in <code><a href="#topic+.Tvars">.Tvars</a></code> are selected.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_to_value">to_value</code></td>
<td>
<p>character. The names of all series to be stacked into the long format data frame.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_variable_name">variable_name</code></td>
<td>
<p>character. The name of the variable to store the names of the series.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_value_name">value_name</code></td>
<td>
<p>character. The name of the variable to store the data values.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_label_name">label_name</code></td>
<td>
<p>character. The name of the variable to store the series labels.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_na.rm">na.rm</code></td>
<td>
<p>logical. <code>TRUE</code> will remove all missing values from the long data frame.</p>
</td></tr>
<tr><td><code id="wide2long_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="data.table.html#topic+melt">melt</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with the reshaped data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+long2wide">long2wide</a></code>, <code><a href="#topic+ugatsdb">ugatsdb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Return monthly macroeconomic indicators from the year 2000 onwards
data &lt;- get_data("BOU_MMI", from = 2000)
wide2long(data)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
