<!DOCTYPE html><html><head><title>Help for package opencage</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {opencage}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#opencage'><p>opencage: Geocode with the OpenCage API.</p></a></li>
<li><a href='#countrycodes'><p>Country codes</p></a></li>
<li><a href='#oc_api_ok'><p>Is the OpenCage API available?</p></a></li>
<li><a href='#oc_bbox'><p>List of bounding boxes for OpenCage queries</p></a></li>
<li><a href='#oc_clear_cache'><p>Clear the opencage cache</p></a></li>
<li><a href='#oc_config'><p>Configure settings</p></a></li>
<li><a href='#oc_forward'><p>Forward geocoding</p></a></li>
<li><a href='#oc_forward_df'><p>Forward geocoding with data frames</p></a></li>
<li><a href='#oc_key_present'><p>Is an OpenCage API key present?</p></a></li>
<li><a href='#oc_points'><p>List of points for OpenCage queries</p></a></li>
<li><a href='#oc_reverse'><p>Reverse geocoding</p></a></li>
<li><a href='#oc_reverse_df'><p>Reverse geocoding with data frames</p></a></li>
<li><a href='#opencage_forward'><p>Forward geocoding</p></a></li>
<li><a href='#opencage_key'><p>Retrieve Opencage API key</p></a></li>
<li><a href='#opencage_reverse'><p>Reverse geocoding</p></a></li>
<li><a href='#opencage-deprecated'><p>Deprecated functions in opencage</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Geocode with the OpenCage API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Geocode with the OpenCage API, either from place name to longitude 
    and latitude (forward geocoding) or from longitude and latitude to the name 
    and address of a location (reverse geocoding), see 
    <a href="https://opencagedata.com/">https://opencagedata.com/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/opencage/">https://docs.ropensci.org/opencage/</a>,
<a href="https://github.com/ropensci/opencage">https://github.com/ropensci/opencage</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/opencage/issues">https://github.com/ropensci/opencage/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>crul (&ge; 0.5.2), dplyr (&ge; 0.7.4), lifecycle, jsonlite (&ge;
1.5), memoise (&ge; 1.1.0), progress (&ge; 1.1.2), purrr (&ge;
0.2.4), ratelimitr (&ge; 0.4.0), rlang, tibble (&ge; 1.4.2), tidyr
(&ge; 0.8.0), withr (&ge; 2.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.19), mockery, rmarkdown (&ge; 1.8), sf (&ge; 0.9),
testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1.9000</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-19 20:33:14 UTC; Daniel</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Possenriede
    <a href="https://orcid.org/0000-0002-6738-9845"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Jesse Sadler <a href="https://orcid.org/0000-0001-6081-9681"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Maëlle Salmon <a href="https://orcid.org/0000-0002-2815-0399"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Noam Ross [ctb],
  Jake Russ [ctb],
  Julia Silge [rev] (Julia Silge reviewed the package for rOpenSci, see
    https://github.com/ropensci/onboarding/issues/36.)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Possenriede &lt;possenriede+r@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-20 01:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='opencage'>opencage: Geocode with the OpenCage API.</h2><span id='topic+opencage'></span><span id='topic+opencage-package'></span>

<h3>Description</h3>

<p>Geocode with the OpenCage API, either from place name to longitude and
latitude (forward geocoding) or from longitude and latitude to the name and
address of a location (reverse geocoding), see <a href="https://opencagedata.com/">https://opencagedata.com/</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Daniel Possenriede <a href="mailto:possenriede+r@gmail.com">possenriede+r@gmail.com</a> (<a href="https://orcid.org/0000-0002-6738-9845">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Jesse Sadler (<a href="https://orcid.org/0000-0001-6081-9681">ORCID</a>)
</p>
</li>
<li><p> Maëlle Salmon (<a href="https://orcid.org/0000-0002-2815-0399">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Noam Ross [contributor]
</p>
</li>
<li><p> Jake Russ [contributor]
</p>
</li>
<li><p> Julia Silge (Julia Silge reviewed the package for rOpenSci, see https://github.com/ropensci/onboarding/issues/36.) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/opencage/">https://docs.ropensci.org/opencage/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/opencage">https://github.com/ropensci/opencage</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/opencage/issues">https://github.com/ropensci/opencage/issues</a>
</p>
</li></ul>


<hr>
<h2 id='countrycodes'>Country codes</h2><span id='topic+countrycodes'></span>

<h3>Description</h3>

<p>Country codes
</p>


<h3>Format</h3>

<p>All possible ISO 3166-1 Alpha 2 standard country codes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("countrycodes")
</code></pre>

<hr>
<h2 id='oc_api_ok'>Is the OpenCage API available?</h2><span id='topic+oc_api_ok'></span>

<h3>Description</h3>

<p>Checks whether the OpenCage API can be reached.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_api_ok(url = "https://api.opencagedata.com")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_api_ok_+3A_url">url</code></td>
<td>
<p>The URL of the OpenCage API, <a href="https://api.opencagedata.com">https://api.opencagedata.com</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single logical value, <code>TRUE</code> or <code>FALSE</code>.
</p>

<hr>
<h2 id='oc_bbox'>List of bounding boxes for OpenCage queries</h2><span id='topic+oc_bbox'></span><span id='topic+oc_bbox.numeric'></span><span id='topic+oc_bbox.data.frame'></span><span id='topic+oc_bbox.bbox'></span>

<h3>Description</h3>

<p>Create a list of bounding boxes for OpenCage queries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_bbox(...)

## S3 method for class 'numeric'
oc_bbox(xmin, ymin, xmax, ymax, ...)

## S3 method for class 'data.frame'
oc_bbox(data, xmin, ymin, xmax, ymax, ...)

## S3 method for class 'bbox'
oc_bbox(bbox, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_bbox_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_xmin">xmin</code></td>
<td>
<p>Minimum longitude (also known as <code>min_lon</code>, <code>southwest_lng</code>,
<code>west</code>, or <code>left</code>).</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_ymin">ymin</code></td>
<td>
<p>Minimum latitude (also known as <code>min_lat</code>, <code>southwest_lat</code>,
<code>south</code>, or <code>bottom</code>).</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_xmax">xmax</code></td>
<td>
<p>Maximum longitude (also known as <code>max_lon</code>, <code>northeast_lng</code>,
<code>east</code>, or <code>right</code>).</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_ymax">ymax</code></td>
<td>
<p>Maximum latitude (also known as <code>max_lat</code>, <code>northeast_lat</code>,
<code>north</code>, or <code>top</code>).</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> containing at least 4 columns with <code>xmin</code>, <code>ymin</code>,
<code>xmax</code>, and <code>ymax</code> values, respectively.</p>
</td></tr>
<tr><td><code id="oc_bbox_+3A_bbox">bbox</code></td>
<td>
<p>A <code>bbox</code> object, see <code>sf::st_bbox</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of bounding boxes, each of class <code>bbox</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>oc_bbox(-5.63160, 51.280430, 0.278970, 51.683979)

xdf &lt;-
  data.frame(
    place = c("Hamburg", "Hamburg"),
    northeast_lat = c(54.0276817, 42.7397729),
    northeast_lng = c(10.3252805, -78.812825),
    southwest_lat = c(53.3951118, 42.7091669),
    southwest_lng = c(8.1053284, -78.860521)
  )
oc_bbox(
  xdf,
  southwest_lng,
  southwest_lat,
  northeast_lng,
  northeast_lat
)

# create bbox list column with dplyr
library(dplyr)
xdf %&gt;%
  mutate(
    bbox =
      oc_bbox(
        southwest_lng,
        southwest_lat,
        northeast_lng,
        northeast_lat
      )
  )

# create bbox list from a simple features bbox
if (requireNamespace("sf", quietly = TRUE)) {
  library(sf)
  bbox &lt;- st_bbox(c(xmin = 16.1, xmax = 16.6, ymax = 48.6, ymin = 47.9),
    crs = 4326
  )
  oc_bbox(bbox)
}

</code></pre>

<hr>
<h2 id='oc_clear_cache'>Clear the opencage cache</h2><span id='topic+oc_clear_cache'></span>

<h3>Description</h3>

<p>Forget past results and reset the <span class="pkg">opencage</span> cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_clear_cache()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>

system.time(oc_reverse(latitude = 10, longitude = 10))
system.time(oc_reverse(latitude = 10, longitude = 10))
oc_clear_cache()
system.time(oc_reverse(latitude = 10, longitude = 10))

</code></pre>

<hr>
<h2 id='oc_config'>Configure settings</h2><span id='topic+oc_config'></span>

<h3>Description</h3>

<p>Configure session settings for <span class="pkg">opencage</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_config(
  key = Sys.getenv("OPENCAGE_KEY"),
  rate_sec = getOption("oc_rate_sec", default = 1L),
  no_record = getOption("oc_no_record", default = TRUE),
  show_key = getOption("oc_show_key", default = FALSE),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_config_+3A_key">key</code></td>
<td>
<p>Your OpenCage API key as a character vector of length one. Do not
pass the key directly as a parameter, though. See details.</p>
</td></tr>
<tr><td><code id="oc_config_+3A_rate_sec">rate_sec</code></td>
<td>
<p>Numeric vector of length one. Sets the maximum number of
requests sent to the OpenCage API per second. Defaults to the value set in
the <code>oc_rate_sec</code> option, or, in case that does not exist, to 1L.</p>
</td></tr>
<tr><td><code id="oc_config_+3A_no_record">no_record</code></td>
<td>
<p>Logical vector of length one. When <code>TRUE</code>, OpenCage will not
create log entries of the queries and will not cache the geocoding
requests. Defaults to the value set in the <code>oc_no_record</code> option, or, in
case that does not exist, to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="oc_config_+3A_show_key">show_key</code></td>
<td>
<p>Logical vector of length one. This is only relevant when
debugging <code>oc_forward()</code> or <code>oc_reverse()</code> calls with the <code>return = "url_only"</code> argument. When <code>TRUE</code>, the result will show your OpenCage API
key in the URL as stored in the <code>OPENCAGE_KEY</code> environment variable. When
not <code>TRUE</code>, the API key will be replaced with the string <code>OPENCAGE_KEY</code>.
<code>show_key</code> defaults to the value set in the <code>oc_show_key</code> option, or, in
case that does not exist, to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="oc_config_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Set your OpenCage API key</h3>

<p><span class="pkg">opencage</span> will conveniently retrieve your API key if it is saved in the
environment variable <code>"OPENCAGE_KEY"</code>. <code><a href="#topic+oc_config">oc_config()</a></code> will help to set that
environment variable. Do not pass the key directly as a parameter to the
function, though, as you risk exposing it via your script or your history.
There are three safer ways to set your API key instead:
</p>

<ol>
<li><p> Save your API key as an environment variable in
<code><a href="base.html#topic+Startup">.Renviron</a></code> as described in <a href="https://rstats.wtf/r-startup.html#renviron">What They Forgot to Teach You About R</a> or <a href="https://csgillespie.github.io/efficientR/set-up.html#renviron">Efficient R Programming</a>.
From there it will be fetched by all functions that call the OpenCage API.
You do not even have to call <code>oc_config()</code> to set your key; you can start
geocoding right away. If you have the <span class="pkg">usethis</span> package installed, you
can edit your <code><a href="base.html#topic+Startup">.Renviron</a></code> with <code>usethis::edit_r_environ()</code>.
We strongly recommend storing your API key in the user-level .Renviron, as
opposed to the project-level. This makes it less likely you will share
sensitive information by mistake.
</p>
</li>
<li><p> If you use a package like <span class="pkg">keyring</span> to store your credentials, you can
safely pass your key in a script with a function call like this
<code>oc_config(key = keyring::key_get("opencage"))</code>.
</p>
</li>
<li><p> If you call <code>oc_config()</code> in an <code><a href="base.html#topic+interactive">base::interactive()</a></code> session and the
<code>OPENCAGE_KEY</code> environment variable is not set, it will prompt you to enter
the key in the console.
</p>
</li></ol>



<h3>Set your OpenCage API rate limit</h3>

<p>The rate limit allowed by the API depends on the OpenCage plan you purchased
and ranges from 1 request/sec for the &quot;Free Trial&quot; plan to 15 requests/sec
for the &quot;Medium&quot; or &quot;Large&quot; plans, see <a href="https://opencagedata.com/pricing">https://opencagedata.com/pricing</a> for
details and up-to-date information. You can set the rate limit persistently
across sessions by setting an <code>oc_rate_sec</code> <a href="base.html#topic+options">option</a> in your
<code><a href="base.html#topic+Startup">.Rprofile</a></code>. If you have the <span class="pkg">usethis</span> package
installed, you can edit your <code><a href="base.html#topic+Startup">.Rprofile</a></code> with
<code>usethis::edit_r_profile()</code>.
</p>


<h3>Prevent query logging and caching</h3>

<p>By default, OpenCage will store your queries in its server logs and will
cache the forward geocoding requests on their side. They do this in order to
speed up response times and to be able to debug errors and improve their
service. Logs are automatically deleted after six months according to
OpenCage's <a href="https://opencagedata.com/gdpr">page on data protection and GDPR</a>.
</p>
<p>If you set <code>no_record</code> to <code>TRUE</code>, the query contents are not logged nor
cached. OpenCage still records that you made a request, but not the specific
query you made. <code>oc_config(no_record = TRUE)</code> sets the <code>oc_no_record</code>
<a href="base.html#topic+options">option</a> for the active R session, so it will be used for all
subsequent OpenCage queries. You can set the <code>oc_no_record</code>
<a href="base.html#topic+options">option</a> persistently across sessions in your
<code><a href="base.html#topic+Startup">.Rprofile</a></code>.
</p>
<p>For increased privacy <span class="pkg">opencage</span> sets <code>no_record</code> to <code>TRUE</code>, by default.
Please note, however, that <span class="pkg">opencage</span> always caches the data it receives
from the OpenCage API locally, but only for as long as your R session is
alive.
</p>
<p>For more information on OpenCage's policies on privacy and data protection
see <a href="https://opencagedata.com/faq#legal">their FAQs</a>, their <a href="https://opencagedata.com/gdpr">GDPR page</a>, and, for the <code>no_record</code> parameter, see
the relevant <a href="https://blog.opencagedata.com/post/145602604628/more-privacy-with-norecord-parameter">blog post</a>.
</p>

<hr>
<h2 id='oc_forward'>Forward geocoding</h2><span id='topic+oc_forward'></span>

<h3>Description</h3>

<p>Forward geocoding from a character vector of location names to latitude and
longitude tuples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_forward(
  placename,
  return = c("df_list", "json_list", "geojson_list", "url_only"),
  bounds = NULL,
  proximity = NULL,
  countrycode = NULL,
  language = NULL,
  limit = 10L,
  min_confidence = NULL,
  no_annotations = TRUE,
  roadinfo = FALSE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  add_request = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_forward_+3A_placename">placename</code></td>
<td>
<p>A character vector with the location names or addresses to
be geocoded.
</p>
<p>If the locations are addresses, see <a href="https://github.com/OpenCageData/opencagedata-misc-docs/blob/master/query-formatting.md">OpenCage's instructions</a>
on how to format addresses for best forward geocoding results.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_return">return</code></td>
<td>
<p>A character vector of length one indicating the return value of
the function, either a list of tibbles (<code>df_list</code>, the default), a JSON
list (<code>json_list</code>), a GeoJSON list (<code>geojson_list</code>), or the URL with which
the API would be called (<code>url_only</code>).</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_bounds">bounds</code></td>
<td>
<p>A list of bounding boxes of length one or <code>length(placename)</code>.
Bounding boxes are named numeric vectors, each with four coordinates
forming the south-west and north-east corners of the bounding box:
<code>list(c(xmin, ymin, xmax, ymax))</code>. <code>bounds</code> restricts the possible results
to the supplied region. It can be specified with the <code><a href="#topic+oc_bbox">oc_bbox()</a></code> helper.
For example: <code>bounds = oc_bbox(-0.563160, 51.280430, 0.278970, 51.683979)</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_proximity">proximity</code></td>
<td>
<p>A list of points of length one or <code>length(placename)</code>. A
point is a named numeric vector of a latitude, longitude coordinate pair in
decimal format. <code>proximity</code> provides OpenCage with a hint to bias results
in favour of those closer to the specified location. It can be specified
with the <code><a href="#topic+oc_points">oc_points()</a></code> helper. For example: <code>proximity = oc_points(51.9526, 7.6324)</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_countrycode">countrycode</code></td>
<td>
<p>A two letter code as defined by the <a href="https://www.iso.org/obp/ui/#search/code">ISO 3166-1 Alpha 2</a> standard that restricts the
results to the given country or countries. E.g. &quot;AR&quot; for Argentina, &quot;FR&quot;
for France, &quot;NZ&quot; for the New Zealand. Multiple countrycodes per <code>placename</code>
must be wrapped in a list. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_language">language</code></td>
<td>
<p>An <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tag</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_limit">limit</code></td>
<td>
<p>Numeric vector of integer values to determine the maximum number
of results returned for each <code>placename</code>. Integer values between 1 and 100
are allowed. Default is 10.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values between 0 and 10
indicating the precision of the returned result as defined by its
geographical extent, (i.e. by the extent of the result's bounding box). See
the <a href="https://opencagedata.com/api#confidence">API documentation</a> for
details. Only results with at least the requested confidence will be
returned. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector indicating whether additional
information about the result location should be returned. <code>TRUE</code> by
default, which means that the results will not contain annotations.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_roadinfo">roadinfo</code></td>
<td>
<p>Logical vector indicating whether the geocoder should attempt
to match the nearest road (rather than an address) and provide additional
road and driving information. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> the results
will not be deduplicated.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> addresses in the
<code>formatted</code> field of the results are abbreviated (e.g. &quot;Main St.&quot; instead
of &quot;Main Street&quot;).</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_add_request">add_request</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>) indicating whether the
request is returned again with the results. If the <code>return</code> value is a
<code>df_list</code>, the query text is added as a column to the results. <code>json_list</code>
results will contain all request parameters, including the API key used!
This is currently ignored by OpenCage if return value is <code>geojson_list</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on the <code>return</code> argument, <code>oc_forward</code> returns a list with
either
</p>

<ul>
<li><p> the results as tibbles (<code>"df_list"</code>, the default),
</p>
</li>
<li><p> the results as JSON specified as a list (<code>"json_list"</code>),
</p>
</li>
<li><p> the results as GeoJSON specified as a list (<code>"geojson_list"</code>),
or
</p>
</li>
<li><p> the URL of the OpenCage API call for debugging purposes
(<code>"url_only"</code>).
</p>
</li></ul>

<p>When the results are returned as (a list of) tibbles, the column names
coming from the OpenCage API are prefixed with <code>"oc_"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+oc_forward_df">oc_forward_df()</a></code> for inputs as a data frame, or <code><a href="#topic+oc_reverse">oc_reverse()</a></code> and
<code><a href="#topic+oc_reverse_df">oc_reverse_df()</a></code> for reverse geocoding. For more information about the API
and the various parameters, see the <a href="https://opencagedata.com/api">OpenCage API documentation</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Geocode a single location, an address in this case
oc_forward(placename = "Triererstr 15, 99432, Weimar, Deutschland")

# Geocode multiple locations
locations &lt;- c("Nantes", "Hamburg", "Los Angeles")
oc_forward(placename = locations)

# Use bounding box to help return accurate results
# for each placename
bounds &lt;- oc_bbox(xmin = c(-2, 9, -119),
                  ymin = c(47, 53, 34),
                  xmax = c(0, 10, -117),
                  ymax = c(48, 54, 35))
oc_forward(placename = locations, bounds = bounds)

# Another way to help specify the desired results
# is with country codes.
oc_forward(placename = locations,
           countrycode = c("ca", "us", "co"))

# With multiple countrycodes per placename
oc_forward(placename = locations,
           countrycode = list(c("fr", "ca") , c("de", "us"), c("us", "co"))
           )

# Return results in a preferred language if possible
oc_forward(placename = c("Brugge", "Mechelen", "Antwerp"),
           language = "fr")

# Limit the number of results per placename and return json_list
oc_forward(placename = locations,
           bounds = bounds,
           limit = 1,
           return = "json_list")

</code></pre>

<hr>
<h2 id='oc_forward_df'>Forward geocoding with data frames</h2><span id='topic+oc_forward_df'></span><span id='topic+oc_forward_df.data.frame'></span><span id='topic+oc_forward_df.character'></span>

<h3>Description</h3>

<p>Forward geocoding from a column or vector of location names to latitude and
longitude tuples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_forward_df(...)

## S3 method for class 'data.frame'
oc_forward_df(
  data,
  placename,
  bind_cols = TRUE,
  output = c("short", "all"),
  bounds = NULL,
  proximity = NULL,
  countrycode = NULL,
  language = NULL,
  limit = 1L,
  min_confidence = NULL,
  no_annotations = TRUE,
  roadinfo = FALSE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  ...
)

## S3 method for class 'character'
oc_forward_df(
  placename,
  output = c("short", "all"),
  bounds = NULL,
  proximity = NULL,
  countrycode = NULL,
  language = NULL,
  limit = 1L,
  min_confidence = NULL,
  no_annotations = TRUE,
  roadinfo = FALSE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_forward_df_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_data">data</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_placename">placename</code></td>
<td>
<p>An unquoted variable name of a character column or vector
with the location names or addresses to be geocoded.
</p>
<p>If the locations are addresses, see <a href="https://github.com/OpenCageData/opencagedata-misc-docs/blob/master/query-formatting.md">OpenCage's instructions</a>
on how to format addresses for best forward geocoding results.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_bind_cols">bind_cols</code></td>
<td>
<p>When <code>bind_col = TRUE</code>, the default, the results are column
bound to <code>data</code>. When <code>FALSE</code>, the results are returned as a new tibble.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_output">output</code></td>
<td>
<p>A character vector of length one indicating whether only
latitude, longitude, and formatted address variables (<code>"short"</code>, the
default), or all variables (<code>"all"</code>) variables should be returned.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_bounds">bounds</code></td>
<td>
<p>A list of length one, or an unquoted variable name of a list
column of bounding boxes. Bounding boxes are named numeric vectors, each
with 4 coordinates forming the south-west and north-east corners of the
bounding box: <code>list(c(xmin, ymin, xmax, ymax))</code>. <code>bounds</code> restricts the
possible results to the supplied region. It can be specified with the
<code><a href="#topic+oc_bbox">oc_bbox()</a></code> helper. For example: <code>bounds = oc_bbox(-0.563160, 51.280430, 0.278970, 51.683979)</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_proximity">proximity</code></td>
<td>
<p>A list of length one, or an unquoted variable name of a list
column of points. Points are named numeric vectors with latitude, longitude
coordinate pairs in decimal format. <code>proximity</code> provides OpenCage with a
hint to bias results in favour of those closer to the specified location.
It can be specified with the <code><a href="#topic+oc_points">oc_points()</a></code> helper. For example: <code>proximity = oc_points(41.40139, 2.12870)</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_countrycode">countrycode</code></td>
<td>
<p>Character vector, or an unquoted variable name of such a
vector, of two-letter codes as defined by the <a href="https://www.iso.org/obp/ui/#search/code">ISO 3166-1 Alpha 2</a> standard that restricts the
results to the given country or countries. E.g. &quot;AR&quot; for Argentina, &quot;FR&quot;
for France, &quot;NZ&quot; for the New Zealand. Multiple countrycodes per <code>placename</code>
must be wrapped in a list. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_language">language</code></td>
<td>
<p>Character vector, or an unquoted variable name of such a
vector, of <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tags</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_limit">limit</code></td>
<td>
<p>Numeric vector of integer values, or an unquoted variable name
of such a vector, to determine the maximum number of results returned for
each <code>placename</code>. Integer values between 1 and 100 are allowed. Default is
1.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values, or an unquoted
variable name of such a vector, between 0 and 10 indicating the precision
of the returned result as defined by its geographical extent, (i.e. by the
extent of the result's bounding box). See the <a href="https://opencagedata.com/api#confidence">API documentation</a> for details. Only
results with at least the requested confidence will be returned. Default is
<code>NULL</code>).</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector, indicating whether additional information about the result location
should be returned. <code>TRUE</code> by default, which means that the results will
not contain annotations.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_roadinfo">roadinfo</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector, indicating whether the geocoder should attempt to match the nearest
road (rather than an address) and provide additional road and driving
information. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector. Default is <code>FALSE</code>. When <code>TRUE</code> the results will not be
deduplicated.</p>
</td></tr>
<tr><td><code id="oc_forward_df_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a vector.
Default is <code>FALSE</code>. When <code>TRUE</code> addresses in the <code>oc_formatted</code> variable of
the results are abbreviated (e.g. &quot;Main St.&quot; instead of &quot;Main Street&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble. Column names coming from the OpenCage API are prefixed with
<code>"oc_"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+oc_forward">oc_forward()</a></code> for inputs as vectors, or <code><a href="#topic+oc_reverse">oc_reverse()</a></code> and
<code><a href="#topic+oc_reverse_df">oc_reverse_df()</a></code> for reverse geocoding. For more information about the API
and the various parameters, see the <a href="https://opencagedata.com/api">OpenCage API documentation</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

library(tibble)
df &lt;- tibble(id = 1:3,
             locations = c("Nantes", "Hamburg", "Los Angeles"))

# Return lat, lng, and formatted address
oc_forward_df(df, placename = locations)

# Return more detailed information about the locations
oc_forward_df(df, placename = locations, output = "all")

# Do not column bind results to input data frame
oc_forward_df(df, placename = locations, bind_cols = FALSE)

# Add more results by changing the limit from the default of 1.
oc_forward_df(df, placename = locations, limit = 5)

# Restrict results to a given bounding box
oc_forward_df(df, placename = locations,
              bounds = oc_bbox(-5, 45, 15, 55))

# oc_forward_df accepts unquoted column names for all
# arguments except bind_cols and output.
# This makes it possible to build up more detailed queries
# through the data frame passed to the data argument.

df2 &lt;- add_column(df,
  bounds = oc_bbox(xmin = c(-2, 9, -119),
                   ymin = c(47, 53, 34),
                   xmax = c(0, 10, -117),
                   ymax = c(48, 54, 35)),
  limit = 1:3,
  countrycode = c("ca", "us", "co"),
  language = c("fr", "de", "en"))

# Use the bounds column to help return accurate results and
# language column to specify preferred language of results
oc_forward_df(df2, placename = locations,
              bounds = bounds,
              language = language)

# Different limit of results for each placename
oc_forward_df(df2, placename = locations,
              limit = limit)

# Specify the desired results by the countrycode column
oc_forward_df(df2, placename = locations,
              countrycode = countrycode)

</code></pre>

<hr>
<h2 id='oc_key_present'>Is an OpenCage API key present?</h2><span id='topic+oc_key_present'></span>

<h3>Description</h3>

<p>Checks whether a potential OpenCage API key, i.e. a 32 character long,
alphanumeric string, is stored in the environment variable <code>OPENCAGE_KEY</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_key_present()
</code></pre>


<h3>Value</h3>

<p>A single logical value, <code>TRUE</code> or <code>FALSE</code>.
</p>

<hr>
<h2 id='oc_points'>List of points for OpenCage queries</h2><span id='topic+oc_points'></span><span id='topic+oc_points.numeric'></span><span id='topic+oc_points.data.frame'></span>

<h3>Description</h3>

<p>Create a list of points (latitude/longitude coordinate pairs) for OpenCage
queries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_points(...)

## S3 method for class 'numeric'
oc_points(latitude, longitude, ...)

## S3 method for class 'data.frame'
oc_points(data, latitude, longitude, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_points_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="oc_points_+3A_latitude">latitude</code>, <code id="oc_points_+3A_longitude">longitude</code></td>
<td>
<p>Numeric vectors of latitude and longitude values.</p>
</td></tr>
<tr><td><code id="oc_points_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> containing at least 2 columns with <code>latitude</code> and
<code>longitude</code> values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of points. Each point is a named vector of length 2 containing
a latitude/longitude coordinate pair.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>oc_points(-21.01404, 55.26077)

xdf &lt;-
  data.frame(
    place = c("Hamburg", "Los Angeles"),
    lat = c(53.5503, 34.0536),
    lon = c(10.0006, -118.2427)
  )
oc_points(
  data = xdf,
  latitude = lat,
  longitude = lon
)

# create a list column with points with dplyr
library(dplyr)
xdf %&gt;%
  mutate(
    points =
      oc_points(
        lat,
        lon
      )
  )

</code></pre>

<hr>
<h2 id='oc_reverse'>Reverse geocoding</h2><span id='topic+oc_reverse'></span>

<h3>Description</h3>

<p>Reverse geocoding from numeric vectors of latitude and longitude pairs to
the names and addresses of a location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_reverse(
  latitude,
  longitude,
  return = c("df_list", "json_list", "geojson_list", "url_only"),
  language = NULL,
  min_confidence = NULL,
  no_annotations = TRUE,
  roadinfo = FALSE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  add_request = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_reverse_+3A_latitude">latitude</code>, <code id="oc_reverse_+3A_longitude">longitude</code></td>
<td>
<p>Numeric vectors of latitude and longitude values.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_return">return</code></td>
<td>
<p>A character vector of length one indicating the return value of
the function, either a list of tibbles (<code>df_list</code>, the default), a JSON
list (<code>json_list</code>), a GeoJSON list (<code>geojson_list</code>), or the URL with which
the API would be called (<code>url_only</code>).</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_language">language</code></td>
<td>
<p>An <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tag</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values between 0 and 10
indicating the precision of the returned result as defined by its
geographical extent, (i.e. by the extent of the result's bounding box). See
the <a href="https://opencagedata.com/api#confidence">API documentation</a> for
details. Only results with at least the requested confidence will be
returned. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector indicating whether additional
information about the result location should be returned. <code>TRUE</code> by
default, which means that the results will not contain annotations.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_roadinfo">roadinfo</code></td>
<td>
<p>Logical vector indicating whether the geocoder should attempt
to match the nearest road (rather than an address) and provide additional
road and driving information. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> the results
will not be deduplicated.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> addresses in the
<code>formatted</code> field of the results are abbreviated (e.g. &quot;Main St.&quot; instead
of &quot;Main Street&quot;).</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_add_request">add_request</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>) indicating whether the
request is returned again with the results. If the <code>return</code> value is a
<code>df_list</code>, the query text is added as a column to the results. <code>json_list</code>
results will contain all request parameters, including the API key used!
This is currently ignored by OpenCage if return value is <code>geojson_list</code>.</p>
</td></tr>
<tr><td><code id="oc_reverse_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on the <code>return</code> argument, <code>oc_reverse</code> returns a list with
either
</p>

<ul>
<li><p> the results as tibbles (<code>"df_list"</code>, the default),
</p>
</li>
<li><p> the results as JSON specified as a list (<code>"json_list"</code>),
</p>
</li>
<li><p> the results as GeoJSON specified as a list (<code>"geojson_list"</code>),
or
</p>
</li>
<li><p> the URL of the OpenCage API call for debugging purposes
(<code>"url_only"</code>).
</p>
</li></ul>

<p>When the results are returned as (a list of) tibbles, the column names
coming from the OpenCage API are prefixed with <code>"oc_"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+oc_reverse_df">oc_reverse_df()</a></code> for inputs as a data frame, or <code><a href="#topic+oc_forward">oc_forward()</a></code> and
<code><a href="#topic+oc_forward">oc_forward()</a></code> for forward geocoding. For more information about the API
and the various parameters, see the <a href="https://opencagedata.com/api">OpenCage API documentation</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Reverse geocode a single location
oc_reverse(latitude = -36.85007, longitude = 174.7706)

# Reverse geocode multiple locations
lat &lt;- c(47.21864, 53.55034, 34.05369)
lng &lt;- c(-1.554136, 10.000654, -118.242767)

oc_reverse(latitude = lat, longitude = lng)

# Return results in a preferred language if possible
oc_reverse(latitude = lat, longitude = lng,
           language = "fr")

# Return results as a json list
oc_reverse(latitude = lat, longitude = lng,
           return = "json_list")

</code></pre>

<hr>
<h2 id='oc_reverse_df'>Reverse geocoding with data frames</h2><span id='topic+oc_reverse_df'></span><span id='topic+oc_reverse_df.data.frame'></span><span id='topic+oc_reverse_df.numeric'></span>

<h3>Description</h3>

<p>Reverse geocoding from latitude and longitude pairs to the names and
addresses of a location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oc_reverse_df(...)

## S3 method for class 'data.frame'
oc_reverse_df(
  data,
  latitude,
  longitude,
  bind_cols = TRUE,
  output = c("short", "all"),
  language = NULL,
  min_confidence = NULL,
  roadinfo = FALSE,
  no_annotations = TRUE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  ...
)

## S3 method for class 'numeric'
oc_reverse_df(
  latitude,
  longitude,
  output = c("short", "all"),
  language = NULL,
  min_confidence = NULL,
  no_annotations = TRUE,
  no_dedupe = FALSE,
  abbrv = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oc_reverse_df_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_data">data</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_latitude">latitude</code>, <code id="oc_reverse_df_+3A_longitude">longitude</code></td>
<td>
<p>Unquoted variable names of numeric columns or
vectors of latitude and longitude values.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_bind_cols">bind_cols</code></td>
<td>
<p>When <code>bind_col = TRUE</code>, the default, the results are column
bound to <code>data</code>. When <code>FALSE</code>, the results are returned as a new tibble.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_output">output</code></td>
<td>
<p>A character vector of length one indicating whether only the
formatted address (<code>"short"</code>, the default) or all variables (<code>"all"</code>)
variables should be returned.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_language">language</code></td>
<td>
<p>Character vector, or an unquoted variable name of such a
vector, of <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tags</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values, or an unquoted
variable name of such a vector, between 0 and 10 indicating the precision
of the returned result as defined by its geographical extent, (i.e. by the
extent of the result's bounding box). See the <a href="https://opencagedata.com/api#confidence">API documentation</a> for details. Only
results with at least the requested confidence will be returned. Default is
<code>NULL</code>).</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_roadinfo">roadinfo</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector, indicating whether the geocoder should attempt to match the nearest
road (rather than an address) and provide additional road and driving
information. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector, indicating whether additional information about the result location
should be returned. <code>TRUE</code> by default, which means that the results will
not contain annotations.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a
vector. Default is <code>FALSE</code>. When <code>TRUE</code> the results will not be
deduplicated.</p>
</td></tr>
<tr><td><code id="oc_reverse_df_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector, or an unquoted variable name of such a vector.
Default is <code>FALSE</code>. When <code>TRUE</code> addresses in the <code>oc_formatted</code> variable of
the results are abbreviated (e.g. &quot;Main St.&quot; instead of &quot;Main Street&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble. Column names coming from the OpenCage API are prefixed with
<code>"oc_"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+oc_reverse">oc_reverse()</a></code> for inputs as vectors, or <code><a href="#topic+oc_forward">oc_forward()</a></code> and
<code><a href="#topic+oc_forward">oc_forward()</a></code> for forward geocoding. For more information about the API
and the various parameters, see the <a href="https://opencagedata.com/api">OpenCage API documentation</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

library(tibble)
df &lt;- tibble(id = 1:4,
             lat = c(-36.85007, 47.21864, 53.55034, 34.05369),
             lng = c(174.7706, -1.554136, 10.000654, -118.242767))

# Return formatted address of lat/lng values
oc_reverse_df(df, latitude = lat, longitude = lng)

# Return more detailed information about the locations
oc_reverse_df(df, latitude = lat, longitude = lng,
              output = "all")

# Return results in a preferred language if possible
oc_reverse_df(df, latitude = lat, longitude = lng,
              language = "fr")

# oc_reverse_df accepts unquoted column names for all
# arguments except bind_cols and output.
# This makes it possible to build up more detailed queries
# through the data frame passed to the data argument.

df2 &lt;- add_column(df,
                  language = c("en", "fr", "de", "en"),
                  confidence = c(8, 10, 10, 10))

# Use language column to specify preferred language of results
# and confidence column to allow different confidence levels
oc_reverse_df(df2, latitude = lat, longitude = lng,
              language = language,
              min_confidence = confidence)

</code></pre>

<hr>
<h2 id='opencage_forward'>Forward geocoding</h2><span id='topic+opencage_forward'></span>

<h3>Description</h3>

<p><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='Soft-deprecated lifecycle' />
</p>
<p>Soft deprecated: use <code>oc_forward</code> or <code>oc_forward_df</code> for forward geocoding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>opencage_forward(
  placename,
  key = opencage_key(),
  bounds = NULL,
  countrycode = NULL,
  language = NULL,
  limit = 10L,
  min_confidence = NULL,
  no_annotations = FALSE,
  no_dedupe = FALSE,
  no_record = FALSE,
  abbrv = FALSE,
  add_request = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="opencage_forward_+3A_placename">placename</code></td>
<td>
<p>A character vector with the location names or addresses to
be geocoded.
</p>
<p>If the locations are addresses, see <a href="https://github.com/OpenCageData/opencagedata-misc-docs/blob/master/query-formatting.md">OpenCage's instructions</a>
on how to format addresses for best forward geocoding results.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_key">key</code></td>
<td>
<p>Your OpenCage API key as a character vector of length one. By
default, <code><a href="#topic+opencage_key">opencage_key()</a></code> will attempt to retrieve the key from the
environment variable <code>OPENCAGE_KEY</code>.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_bounds">bounds</code></td>
<td>
<p>A list of bounding boxes of length one or <code>length(placename)</code>.
Bounding boxes are named numeric vectors, each with four coordinates
forming the south-west and north-east corners of the bounding box:
<code>list(c(xmin, ymin, xmax, ymax))</code>. <code>bounds</code> restricts the possible results
to the supplied region. It can be specified with the <code><a href="#topic+oc_bbox">oc_bbox()</a></code> helper.
For example: <code>bounds = oc_bbox(-0.563160, 51.280430, 0.278970, 51.683979)</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_countrycode">countrycode</code></td>
<td>
<p>A two letter code as defined by the <a href="https://www.iso.org/obp/ui/#search/code">ISO 3166-1 Alpha 2</a> standard that restricts the
results to the given country or countries. E.g. &quot;AR&quot; for Argentina, &quot;FR&quot;
for France, &quot;NZ&quot; for the New Zealand. Multiple countrycodes per <code>placename</code>
must be wrapped in a list. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_language">language</code></td>
<td>
<p>An <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tag</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_limit">limit</code></td>
<td>
<p>Numeric vector of integer values to determine the maximum number
of results returned for each <code>placename</code>. Integer values between 1 and 100
are allowed. Default is 10.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values between 0 and 10
indicating the precision of the returned result as defined by its
geographical extent, (i.e. by the extent of the result's bounding box). See
the <a href="https://opencagedata.com/api#confidence">API documentation</a> for
details. Only results with at least the requested confidence will be
returned. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector indicating whether additional
information about the result location should be returned. <code>TRUE</code> by
default, which means that the results will not contain annotations.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> the results
will not be deduplicated.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_no_record">no_record</code></td>
<td>
<p>Logical vector of length one (default <code>FALSE</code>), when <code>TRUE</code>
no log entry of the query is created, and the geocoding request is not
cached by OpenCage.</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> addresses in the
<code>formatted</code> field of the results are abbreviated (e.g. &quot;Main St.&quot; instead
of &quot;Main Street&quot;).</p>
</td></tr>
<tr><td><code id="opencage_forward_+3A_add_request">add_request</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>) indicating whether the
request is returned again with the results. If the <code>return</code> value is a
<code>df_list</code>, the query text is added as a column to the results. <code>json_list</code>
results will contain all request parameters, including the API key used!
This is currently ignored by OpenCage if return value is <code>geojson_list</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with
</p>

<ul>
<li><p> results as a tibble with one line per result,
</p>
</li>
<li><p> the number of results as an integer,
</p>
</li>
<li><p> the timestamp as a POSIXct object,
</p>
</li>
<li><p> rate_info tibble/data.frame with the maximal number of API calls  per
day for the used key, the number of remaining calls for the day and the time
at which the number of remaining calls will be reset.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
opencage_forward(placename = "Sarzeau")
opencage_forward(placename = "Islington, London")
opencage_forward(placename = "Triererstr 15,
                              Weimar 99423,
                              Deutschland")

</code></pre>

<hr>
<h2 id='opencage_key'>Retrieve Opencage API key</h2><span id='topic+opencage_key'></span>

<h3>Description</h3>

<p><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='Soft-deprecated lifecycle' />
</p>
<p>Soft-deprecated and will be removed from the package together with
<code>opencage_forward()</code> and <code>opencage_reverse()</code>.
</p>
<p>Retrieves the OpenCage API Key from the environment variable <code>OPENCAGE_KEY</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>opencage_key(quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="opencage_key_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length one indicating whether the key is
returned quietly or whether a message is printed.</p>
</td></tr>
</table>

<hr>
<h2 id='opencage_reverse'>Reverse geocoding</h2><span id='topic+opencage_reverse'></span>

<h3>Description</h3>

<p><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='Soft-deprecated lifecycle' />
</p>
<p>Soft deprecated: use <code>oc_reverse</code> or <code>oc_reverse_df</code> for reverse geocoding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>opencage_reverse(
  latitude,
  longitude,
  key = opencage_key(),
  bounds = NULL,
  countrycode = NULL,
  language = NULL,
  limit = 10,
  min_confidence = NULL,
  no_annotations = FALSE,
  no_dedupe = FALSE,
  no_record = FALSE,
  abbrv = FALSE,
  add_request = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="opencage_reverse_+3A_latitude">latitude</code></td>
<td>
<p>Numeric vectors of latitude and longitude values.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_longitude">longitude</code></td>
<td>
<p>Numeric vectors of latitude and longitude values.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_key">key</code></td>
<td>
<p>Your OpenCage API key as a character vector of length one. By
default, <code><a href="#topic+opencage_key">opencage_key()</a></code> will attempt to retrieve the key from the
environment variable <code>OPENCAGE_KEY</code>.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_bounds">bounds</code></td>
<td>
<p>Bounding box, ignored for reverse geocoding.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_countrycode">countrycode</code></td>
<td>
<p>Country code, ignored for reverse geocoding.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_language">language</code></td>
<td>
<p>An <a href="https://en.wikipedia.org/wiki/IETF_language_tag">IETF BCP 47 language tag</a> (such as &quot;es&quot; for
Spanish or &quot;pt-BR&quot; for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the &quot;native&quot;
tag, in which case OpenCage will attempt to return the response in the
&quot;official&quot; language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_limit">limit</code></td>
<td>
<p>How many results should be returned (1-100), ignored for reverse
geocoding.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_min_confidence">min_confidence</code></td>
<td>
<p>Numeric vector of integer values between 0 and 10
indicating the precision of the returned result as defined by its
geographical extent, (i.e. by the extent of the result's bounding box). See
the <a href="https://opencagedata.com/api#confidence">API documentation</a> for
details. Only results with at least the requested confidence will be
returned. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_no_annotations">no_annotations</code></td>
<td>
<p>Logical vector indicating whether additional
information about the result location should be returned. <code>TRUE</code> by
default, which means that the results will not contain annotations.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_no_dedupe">no_dedupe</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> the results
will not be deduplicated.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_no_record">no_record</code></td>
<td>
<p>Logical vector of length one (default <code>FALSE</code>), when <code>TRUE</code>
no log entry of the query is created, and the geocoding request is not
cached by OpenCage.</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_abbrv">abbrv</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>), when <code>TRUE</code> addresses in the
<code>formatted</code> field of the results are abbreviated (e.g. &quot;Main St.&quot; instead
of &quot;Main Street&quot;).</p>
</td></tr>
<tr><td><code id="opencage_reverse_+3A_add_request">add_request</code></td>
<td>
<p>Logical vector (default <code>FALSE</code>) indicating whether the
request is returned again with the results. If the <code>return</code> value is a
<code>df_list</code>, the query text is added as a column to the results. <code>json_list</code>
results will contain all request parameters, including the API key used!
This is currently ignored by OpenCage if return value is <code>geojson_list</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with
</p>

<ul>
<li><p> results as a tibble with one line per result,
</p>
</li>
<li><p> the number of results as an integer,
</p>
</li>
<li><p> the timestamp as a POSIXct object,
</p>
</li>
<li><p> rate_info tibble/data.frame with the maximal number of API calls  per
day for the used key, the number of remaining calls for the day and the time
at which the number of remaining calls will be reset.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>

opencage_reverse(
  latitude = 0, longitude = 0,
  limit = 2
)

</code></pre>

<hr>
<h2 id='opencage-deprecated'>Deprecated functions in opencage</h2><span id='topic+opencage-deprecated'></span>

<h3>Description</h3>

<p>These functions still work but will be removed (defunct) in the next version.
</p>


<h3>Details</h3>


<ul>
<li> <p><code><a href="#topic+opencage_forward">opencage_forward()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+opencage_reverse">opencage_reverse()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+opencage_key">opencage_key()</a></code>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
