<!DOCTYPE html><html><head><title>Help for package planscorer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {planscorer}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#key'><p>Check or Get PlanScore API Key</p></a></li>
<li><a href='#ps_ingest'><p>Ingest PlanScore Output</p></a></li>
<li><a href='#ps_model_versions'><p>List Model Versions</p></a></li>
<li><a href='#ps_save'><p>Save PlanScore Output</p></a></li>
<li><a href='#ps_set_key'><p>Add Entry to Renviron</p></a></li>
<li><a href='#ps_supported_states'><p>List Currently Supported States</p></a></li>
<li><a href='#upload'><p>Upload to PlanScore</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Score Redistricting Plans with 'PlanScore'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides access to the 'PlanScore' Application Programming Interface 
    (<a href="https://github.com/PlanScore/PlanScore/blob/main/API.md">https://github.com/PlanScore/PlanScore/blob/main/API.md</a>) for scoring redistricting
    plans. Allows for upload of plans from block assignment files and shape files. 
    For shapes in memory, such as from 'sf' or 'redist', it processes them to save
    and upload. Includes tools for tidying responses and saving output from the 
    website.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, curl, dplyr, fs, httr2, jsonlite, purrr, readr, rlang,
sf, stringr, tibble, tidyr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://christophertkenny.com/planscorer/">http://christophertkenny.com/planscorer/</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>httptest2, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-22 19:26:01 UTC; chris</td>
</tr>
<tr>
<td>Author:</td>
<td>Christopher T. Kenny
    <a href="https://orcid.org/0000-0002-9386-6860"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, trl,
    cre] (R port),
  Michal Migurski [aut] (python original,
    https://github.com/PlanScore/PlanScore-CLI),
  Cory McCartan [art]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher T. Kenny &lt;christopherkenny@fas.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-23 19:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='key'>Check or Get PlanScore API Key</h2><span id='topic+key'></span><span id='topic+ps_has_key'></span><span id='topic+ps_get_key'></span>

<h3>Description</h3>

<p>Check or Get PlanScore API Key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_has_key()

ps_get_key()
</code></pre>


<h3>Value</h3>

<p>logical if <code>has</code>, key invisibly if <code>get</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ps_has_key()
</code></pre>

<hr>
<h2 id='ps_ingest'>Ingest PlanScore Output</h2><span id='topic+ps_ingest'></span>

<h3>Description</h3>

<p>Ingest PlanScore Output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_ingest(link)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ps_ingest_+3A_link">link</code></td>
<td>
<p>index url output from <code>ps_upload()</code> functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>tibble</code> with district and plan level data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>url &lt;- 'https://planscore.s3.amazonaws.com/uploads/20221127T213653.168557156Z/index.json'
ps_ingest(url)
</code></pre>

<hr>
<h2 id='ps_model_versions'>List Model Versions</h2><span id='topic+ps_model_versions'></span>

<h3>Description</h3>

<p>List Model Versions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_model_versions()
</code></pre>


<h3>Value</h3>

<p>tibble of model versions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ps_model_versions()
</code></pre>

<hr>
<h2 id='ps_save'>Save PlanScore Output</h2><span id='topic+ps_save'></span>

<h3>Description</h3>

<p>Save PlanScore Output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_save(link, path, json = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ps_save_+3A_link">link</code></td>
<td>
<p>index url output from <code>ps_upload()</code> functions</p>
</td></tr>
<tr><td><code id="ps_save_+3A_path">path</code></td>
<td>
<p>path to save copy of data in, likely ending in <code>.json</code> if <code>json = TRUE</code>
or <code>.tsv</code> if <code>json = FALSE</code>.</p>
</td></tr>
<tr><td><code id="ps_save_+3A_json">json</code></td>
<td>
<p>should the file be saved as <code>.json</code> (<code>TRUE</code>) or <code>.tsv</code> (<code>FALSE</code>).
<code>json = TRUE</code> is slower but contains more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>path to <code>json</code> file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>url &lt;- 'https://planscore.s3.amazonaws.com/uploads/20221127T213653.168557156Z/index.json'
tf &lt;- tempfile(fileext = '.json')
ps_save(url, tf)
</code></pre>

<hr>
<h2 id='ps_set_key'>Add Entry to Renviron</h2><span id='topic+ps_set_key'></span>

<h3>Description</h3>

<p>Adds PlanScore API key to .Renviron.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_set_key(key, overwrite = FALSE, install = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ps_set_key_+3A_key">key</code></td>
<td>
<p>Character. API key to add to add.</p>
</td></tr>
<tr><td><code id="ps_set_key_+3A_overwrite">overwrite</code></td>
<td>
<p>Defaults to FALSE. Boolean. Should existing <code>PLANSCORE_KEY</code> in Renviron be overwritten?</p>
</td></tr>
<tr><td><code id="ps_set_key_+3A_install">install</code></td>
<td>
<p>Defaults to FALSE. Boolean. Should this be added '~/.Renviron' file?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>key, invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_planscore_key('1234')

## End(Not run)

</code></pre>

<hr>
<h2 id='ps_supported_states'>List Currently Supported States</h2><span id='topic+ps_supported_states'></span>

<h3>Description</h3>

<p>List Currently Supported States
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_supported_states()
</code></pre>


<h3>Value</h3>

<p>tibble of supported states
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ps_supported_states()
</code></pre>

<hr>
<h2 id='upload'>Upload to PlanScore</h2><span id='topic+upload'></span><span id='topic+ps_upload_file'></span><span id='topic+ps_upload_redist'></span><span id='topic+ps_upload_shp'></span>

<h3>Description</h3>

<p>Upload to PlanScore
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps_upload_file(
  file,
  description = NULL,
  incumbents = NULL,
  model_version = NULL,
  library_metadata = NULL,
  temporary = TRUE
)

ps_upload_redist(map, plans, draw, ...)

ps_upload_shp(shp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="upload_+3A_file">file</code></td>
<td>
<p>file to upload, one of a geojson, block assignment file, or zipped shape file</p>
</td></tr>
<tr><td><code id="upload_+3A_description">description</code></td>
<td>
<p>text for plan description</p>
</td></tr>
<tr><td><code id="upload_+3A_incumbents">incumbents</code></td>
<td>
<p>Incumbent party, one of <code>'D'</code> (Democrat), <code>'R'</code> (Republican),
or <code>'O'</code> (Open) for each district. Assumes <code>'O'</code> if none is provided.#'</p>
</td></tr>
<tr><td><code id="upload_+3A_model_version">model_version</code></td>
<td>
<p>character model version to use. Available options are listed by <code><a href="#topic+ps_model_versions">ps_model_versions()</a></code>.</p>
</td></tr>
<tr><td><code id="upload_+3A_library_metadata">library_metadata</code></td>
<td>
<p>Any additional data to be passed through for possible later use.
For advanced use: Should likely be left <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="upload_+3A_temporary">temporary</code></td>
<td>
<p>Should a temporary PlanScore upload be used? Default is TRUE.</p>
</td></tr>
<tr><td><code id="upload_+3A_map">map</code></td>
<td>
<p>a <code>redist_map</code> object</p>
</td></tr>
<tr><td><code id="upload_+3A_plans">plans</code></td>
<td>
<p>a <code>redist_plans</code> object</p>
</td></tr>
<tr><td><code id="upload_+3A_draw">draw</code></td>
<td>
<p>the draw to use from <code>plans</code></p>
</td></tr>
<tr><td><code id="upload_+3A_...">...</code></td>
<td>
<p>arguments to pass on to <code>ps_upload_file()</code></p>
</td></tr>
<tr><td><code id="upload_+3A_shp">shp</code></td>
<td>
<p>an <code>sf</code> shape to upload, where each entry is a district</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of links to index and plan, on success
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Requires API Key
file &lt;- system.file('extdata/null-plan-incumbency.geojson', package = 'planscorer')
ps_upload_file(file)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
