<!DOCTYPE html><html><head><title>Help for package naflex</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {naflex}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#na_check'><p>Check missing values conditions</p></a></li>
<li><a href='#na_check_prop'><p>Check missing values conditions (single condition)</p></a></li>
<li><a href='#na_omit_if'><p>Conditionally omit missing values</p></a></li>
<li><a href='#na_omit_if_prop'><p>Conditionally omit missing values (single condition)</p></a></li>
<li><a href='#na_prop'><p>Calculate missing value properties</p></a></li>
<li><a href='#naflex'><p>naflex: Flexible Options for Handling Missing Values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Flexible Options for Handling Missing Values</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>For use in summary functions to omit missing values 
    conditionally using specified checks.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dannyparsons/naflex">https://github.com/dannyparsons/naflex</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dannyparsons/naflex/issues">https://github.com/dannyparsons/naflex/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, magrittr, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-25 11:14:55 UTC; Danny</td>
</tr>
<tr>
<td>Author:</td>
<td>Danny Parsons <a href="https://orcid.org/0000-0002-8333-9880"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Shadrack Kibet [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Danny Parsons &lt;danny@idems.international&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-26 19:32:45 UTC</td>
</tr>
</table>
<hr>
<h2 id='na_check'>Check missing values conditions</h2><span id='topic+na_check'></span>

<h3>Description</h3>

<p><code>na_check</code> checks conditions on missing values in a vector. If all the
checks pass it returns <code>TRUE</code>, otherwise <code>FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_check(
  x,
  prop = NULL,
  n = NULL,
  consec = NULL,
  n_non = NULL,
  prop_strict = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na_check_+3A_x">x</code></td>
<td>
<p>Vector to check the missing values properties of.</p>
</td></tr>
<tr><td><code id="na_check_+3A_prop">prop</code></td>
<td>
<p>The maximum proportion (0 to 1) of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_+3A_n">n</code></td>
<td>
<p>The maximum number of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_+3A_consec">consec</code></td>
<td>
<p>The maximum number of consecutive missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_+3A_n_non">n_non</code></td>
<td>
<p>The minimum number of <strong>non-missing</strong> values required.</p>
</td></tr>
<tr><td><code id="na_check_+3A_prop_strict">prop_strict</code></td>
<td>
<p>A logical (default <code>FALSE</code>) indicating if the
proportion of missing values must be <strong>strictly</strong> less than
<code>prop</code> (<code>prop_strict = TRUE</code>) or only less than <code>prop</code>
(<code>prop_strict = FALSE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are four type of checks available:
</p>

<ul>
<li><p> a maximum proportion of missing values allowed (<code>prop</code>)
</p>
</li>
<li><p> a maximum number of missing values allowed (<code>n</code>)
</p>
</li>
<li><p> a maximum number of consecutive missing values allowed (<code>consec</code>),
and
</p>
</li>
<li><p> a minimum number of non-missing values required (<code>n_non</code>).
</p>
</li></ul>

<p>Any number of checks may be specified, including none. If multiple checks are
specified, they must all pass in order to return <code>TRUE</code>.
If no checks are specified then <code>TRUE</code> is returned, since
this is considered as &quot;all&quot; checks passing.
</p>


<h3>Value</h3>

<p><code>TRUE</code> if all specified checks pass, and <code>FALSE</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1:3, NA, NA, NA, 4, NA, NA, 3)
# check if no more than 50% of values are missing
na_check(x, prop = 0.5)
# check if no more than 50% of values are missing
# and if there are no more than 2 consecutive missing values.
na_check(x, prop = 0.5, consec = 2)
</code></pre>

<hr>
<h2 id='na_check_prop'>Check missing values conditions (single condition)</h2><span id='topic+na_check_prop'></span><span id='topic+na_check_n'></span><span id='topic+na_check_consec'></span><span id='topic+na_check_non_na'></span>

<h3>Description</h3>

<p>These set of functions check a condition on missing values in a vector
<code>x</code>. They return <code>TRUE</code> if check passes, and <code>FALSE</code>
otherwise. They are special cases of <code><a href="#topic+na_check">na_check</a></code>, which is the
general case for specifying multiple checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_check_prop(x, prop = NULL, strict = FALSE)

na_check_n(x, n = NULL)

na_check_consec(x, consec = NULL)

na_check_non_na(x, n_non = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na_check_prop_+3A_x">x</code></td>
<td>
<p>Vector to check the missing values properties of.</p>
</td></tr>
<tr><td><code id="na_check_prop_+3A_prop">prop</code></td>
<td>
<p>The maximum proportion (0 to 1) of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_prop_+3A_strict">strict</code></td>
<td>
<p>A logical (default <code>FALSE</code>) indicating if the proportion
of missing values must be <strong>strictly</strong> less than <code>prop</code>
(<code>strict = TRUE</code>) or only less than <code>prop</code> (<code>strict =
FALSE</code>).</p>
</td></tr>
<tr><td><code id="na_check_prop_+3A_n">n</code></td>
<td>
<p>The maximum number of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_prop_+3A_consec">consec</code></td>
<td>
<p>The maximum number of consecutive missing values allowed.</p>
</td></tr>
<tr><td><code id="na_check_prop_+3A_n_non">n_non</code></td>
<td>
<p>The minimum number of <strong>non-missing</strong> values required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions replicate the functionality of
<code><a href="#topic+na_check">na_check</a></code> as individual functions for single checks.
</p>
<p>For example, <code>na_check_n(x, 5)</code> is equivalent to
<code>na_check(x, n = 5)</code>.
</p>
<p>This more restricted form may be desirable when only a single check is
required.
</p>


<h3>Value</h3>

<p>These functions return <code>TRUE</code> if the check passes, and
<code>FALSE</code> otherwise.
</p>
<p>They are convenient wrapper functions for:
</p>

<ul>
<li> <p><code>na_prop(x) &lt;= prop</code> or <code>na_prop(x) &lt; prop</code>
(if <code>strict = TRUE</code>)
</p>
</li>
<li> <p><code>na_n(x) &lt;= n</code>
</p>
</li>
<li> <p><code>na_consec(x) &lt;= consec</code>
</p>
</li>
<li> <p><code>na_non_na(x) &gt;= n_non</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>na_check_prop(c(1, 2, NA, 4), 0.6)

na_check_prop(c(1, 2, NA, 4), 0.4)

na_check_prop(c(1:10, NA), 0.1)

na_check_prop(c(1:9, NA), 0.1, strict = TRUE)

na_check_n(c(1, 2, NA, 4, NA, NA, 7), 5)

na_check_n(c(1:9, NA, NA, NA), 2)

na_check_consec(c(1, NA, NA, NA, 2, NA, NA, 7), 4)

na_check_consec(c(rep(NA, 5), 1:2, rep(NA, 6)), 5)

na_check_non_na(c(1, 2, NA, 4, NA, NA, 7), 5)

na_check_non_na(c(1:9, NA, NA, NA), 2)
</code></pre>

<hr>
<h2 id='na_omit_if'>Conditionally omit missing values</h2><span id='topic+na_omit_if'></span>

<h3>Description</h3>

<p><code>na_omit_if</code> removes missing values from <code>x</code> if the specified
checks are satisfied, and returns <code>x</code> unmodified otherwise. When used
within summary functions, <code>na_omit_if</code> provides greater flexibility than
the <code>na.rm</code> option e.g. <code>sum(na_omit_if(x, prop = 0.05))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_omit_if(
  x,
  prop = NULL,
  n = NULL,
  consec = NULL,
  n_non = NULL,
  prop_strict = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na_omit_if_+3A_x">x</code></td>
<td>
<p>Vector to omit missing values in if checks pass.</p>
</td></tr>
<tr><td><code id="na_omit_if_+3A_prop">prop</code></td>
<td>
<p>The maximum proportion (0 to 1) of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_+3A_n">n</code></td>
<td>
<p>The maximum number of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_+3A_consec">consec</code></td>
<td>
<p>The maximum number of consecutive missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_+3A_n_non">n_non</code></td>
<td>
<p>The minimum number of <strong>non-missing</strong> values required.</p>
</td></tr>
<tr><td><code id="na_omit_if_+3A_prop_strict">prop_strict</code></td>
<td>
<p>A logical (default <code>FALSE</code>) indicating if the
proportion of missing values must be <strong>strictly</strong> less than
<code>prop</code> (<code>prop_strict = TRUE</code>) or only less than <code>prop</code>
(<code>prop_strict = FALSE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are four type of checks available:
</p>

<ul>
<li><p> a maximum proportion of missing values allowed (<code>prop</code>)
</p>
</li>
<li><p> a maximum number of missing values allowed (<code>n</code>)
</p>
</li>
<li><p> a maximum number of consecutive missing values allowed (<code>consec</code>),
and
</p>
</li>
<li><p> a minimum number of non-missing values required (<code>n_non</code>).
</p>
</li></ul>

<p>Any number of checks may be specified, including none. If multiple checks are
specified, they must all pass in order for missing values to be
omitted. If no checks are specified then missing values are omitted, since
this is considered as &quot;all&quot; checks passing.
</p>


<h3>Value</h3>

<p>A vector of the same type as <code>x</code>. Either <code>x</code> with missing
values removed if all checks pass, or <code>x</code> unmodified if any checks
fail.
</p>
<p>For consistency with <code><a href="stats.html#topic+na.omit">na.omit</a></code>, if missing
values are removed, the indices of the removed values form an
<code>na.action</code> attribute of class <code>omit</code> in the result.
</p>
<p>If missing values are not removed (because the checks failed or there were
no missing values in <code>x</code>) then no <code>na.action</code> attribute is added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1, 3, NA, NA, NA, 4, 2, NA, 4, 6)

sum(na_omit_if(x, prop = 0.45, n = 10, consec = 5))
sum(na_omit_if(x, prop = 0.45))

require(magrittr)
sum(x %&gt;% na_omit_if(prop = 0.45))

# WMO specification for calculating monthly values from daily data
daily_rain &lt;- rnorm(30)
daily_rain[c(3, 5, 6, 7, 8, 9, 24, 28)] &lt;- NA
sum(daily_rain %&gt;% na_omit_if(n = 10, consec = 4))
</code></pre>

<hr>
<h2 id='na_omit_if_prop'>Conditionally omit missing values (single condition)</h2><span id='topic+na_omit_if_prop'></span><span id='topic+na_omit_if_n'></span><span id='topic+na_omit_if_consec'></span><span id='topic+na_omit_if_non_na'></span>

<h3>Description</h3>

<p>These set of functions remove missing values from <code>x</code> if the single,
specified check is satisfied, and returns <code>x</code> unmodified otherwise. They
are special cases of <code><a href="#topic+na_omit_if">na_omit_if</a></code>, which is the general case for
specifying multiple checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_omit_if_prop(x, prop = NULL, strict = FALSE)

na_omit_if_n(x, n = NULL)

na_omit_if_consec(x, consec = NULL)

na_omit_if_non_na(x, n_non = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na_omit_if_prop_+3A_x">x</code></td>
<td>
<p>Vector to omit missing values in if checks pass.</p>
</td></tr>
<tr><td><code id="na_omit_if_prop_+3A_prop">prop</code></td>
<td>
<p>The maximum proportion (0 to 1) of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_prop_+3A_strict">strict</code></td>
<td>
<p>A logical (default <code>FALSE</code>) indicating if the proportion
of missing values must be <strong>strictly</strong> less than <code>prop</code>
(<code>strict = TRUE</code>) or only less than <code>prop</code> (<code>strict =
FALSE</code>).</p>
</td></tr>
<tr><td><code id="na_omit_if_prop_+3A_n">n</code></td>
<td>
<p>The maximum number of missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_prop_+3A_consec">consec</code></td>
<td>
<p>The maximum number of consecutive missing values allowed.</p>
</td></tr>
<tr><td><code id="na_omit_if_prop_+3A_n_non">n_non</code></td>
<td>
<p>The minimum number of <strong>non-missing</strong> values required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions replicate the functionality of
<code><a href="#topic+na_omit_if">na_omit_if</a></code> as individual functions for single checks.
</p>
<p>For example, <code>na_omit_if_consec(x, 4)</code> is equivalent to
<code>na_omit_if(x, consec = 4)</code>.
</p>
<p>This more restricted form may be desirable when only a single check is
required.
</p>


<h3>Value</h3>

<p>A vector of the same type as <code>x</code>. Either <code>x</code> with missing
values removed if all checks pass, or <code>x</code> unmodified if any checks
fail.
</p>
<p>For consistency with <code><a href="stats.html#topic+na.omit">na.omit</a></code>, if missing
values are removed, the indices of the removed values form an
<code>na.action</code> attribute of class <code>omit</code> in the result.
</p>
<p>If missing values are not removed (because the checks failed or there were
no missing values in <code>x</code>) then no <code>na.action</code> attribute is added.
</p>

<hr>
<h2 id='na_prop'>Calculate missing value properties</h2><span id='topic+na_prop'></span><span id='topic+na_n'></span><span id='topic+na_consec'></span><span id='topic+na_non_na'></span>

<h3>Description</h3>

<p>A set of functions for calculating missing values properties of a vector.
</p>

<ul>
<li> <p><code><a href="#topic+na_prop">na_prop</a></code>: The proportion of missing values
</p>
</li>
<li> <p><code><a href="#topic+na_n">na_n</a></code>: The number of missing values
</p>
</li>
<li> <p><code><a href="#topic+na_consec">na_consec</a></code>: The maximum number of consecutive missing
values
</p>
</li>
<li> <p><code><a href="#topic+na_non_na">na_non_na</a></code>: The number of non-missing values
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>na_prop(x)

na_n(x)

na_consec(x)

na_non_na(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na_prop_+3A_x">x</code></td>
<td>
<p>A vector to calculate the missing values property of.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are used by <code><a href="#topic+na_omit_if">na_omit_if</a></code> to omit missing values
conditionally on the value of these properties. They are also useful
summaries in their own right.
</p>


<h3>Value</h3>

<p>Each function returns a number: a proportion (0 to 1) or a count.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>na_prop(c(1, 2, NA, 4))

na_prop(c(1:9, NA))

na_n(c(1, 2, NA, 4, NA, NA, 7))

na_n(c(1:9, NA, NA))

na_consec(c(1, NA, NA, NA, 2, NA, NA, 7))

na_consec(c(rep(NA, 5), 1:2, rep(NA, 6)))

na_non_na(c(1, 2, NA, 4, NA, NA, 7))

na_non_na(c(1:9, NA, NA))
</code></pre>

<hr>
<h2 id='naflex'>naflex: Flexible Options for Handling Missing Values</h2><span id='topic+naflex'></span>

<h3>Description</h3>

<p>The <code>naflex</code> package provides additional flexibility for handling
missing values in summary functions beyond the two extreme options
(<code>na.rm = TRUE/FALSE</code>) available in base R.
</p>


<h3>Details</h3>

<p>Most summary functions in R e.g. <code>mean</code> provide the option for the two
extremes:
</p>

<ul>
<li><p> calculate the summary ignoring all missing values, <code>na.rm = TRUE</code>,
or
</p>
</li>
<li><p> require no missing values for the summary to be calculated,
<code>na.rm = FALSE</code>
</p>
</li></ul>

<p>In many applications something in between these two extremes is often
appropriate. For example, you may wish to give a summary statistic if less
than 5% of values are missing.
</p>
<p><code>naflex</code> provides helper functions to facilitate this flexibility for
dealing with missing values, particularly within summary functions.
</p>
<p>In particular <code>naflex</code> provides four types of missing value checks:
</p>

<ul>
<li><p> a maximum proportion of missing values allowed
</p>
</li>
<li><p> a maximum number of missing values allowed
</p>
</li>
<li><p> a maximum number of consecutive missing values allowed, and
</p>
</li>
<li><p> a minimum number of non-missing values required.
</p>
</li></ul>

<p>These checks can be used individually or in combination with each other
within summary functions.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
