<!DOCTYPE html><html><head><title>Help for package safestats</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {safestats}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#checkAndReturnsEsMinParameterSide'><p>Checks consistency between the sided of the hypothesis and the  minimal clinically relevant effect size</p>
or safe test defining parameter. Throws an error if the one-sided hypothesis is incongruent with the</a></li>
<li><a href='#checkAndReturnsNPlan'><p>Check consistency between nPlan and the testType for one and two-sample z and t-tests</p></a></li>
<li><a href='#checkDoubleArgumentsDesignObject'><p>Helper function to check whether arguments are specified in a function at a higher level and already</p>
provided in the design object.</a></li>
<li><a href='#computeBetaBatchSafeZ'><p>Helper function: Computes the type II error based on the minimal clinically relevant effect size and sample size.</p></a></li>
<li><a href='#computeBetaSafeT'><p>Helper function: Computes the type II error of the safeTTest based on the minimal clinically relevant</p>
standardised mean difference and nPlan.</a></li>
<li><a href='#computeBetaSafeZ'><p>Helper function: Computes the type II error based on the minimal clinically relevant mean difference and nPlan</p></a></li>
<li><a href='#computeBootObj'><p>Computes the bootObj for sequential sampling procedures regarding nPlan, beta, the implied target</p></a></li>
<li><a href='#computeConfidenceBoundForLogOddsTwoProportions'><p>Estimate an upper or lower bound for a safe confidence sequence on the</p>
logarithm of the odds ratio for two proportions.</a></li>
<li><a href='#computeConfidenceBoundsForDifferenceTwoProportions'><p>Estimate Lower and Upper Bounds on the Confidence Sequence (Interval)</p>
for the Difference Divergence Measure for Two Proportions</a></li>
<li><a href='#computeConfidenceIntervalT'><p>Helper function: Computes the safe confidence sequence for the mean in a t-test</p></a></li>
<li><a href='#computeConfidenceIntervalZ'><p>Helper function: Computes the safe confidence sequence for a z-test</p></a></li>
<li><a href='#computeEsMinSafeT'><p>Helper function: Computes the minimal clinically relevant standardised mean difference for the safe t-test</p>
nPlan and beta.</a></li>
<li><a href='#computeLogrankBetaFrom'><p>Helper function: Computes the type II error under optional stopping based on the minimal clinically relevant hazard</p>
ratio and the maximum number of nEvents.</a></li>
<li><a href='#computeLogrankNEvents'><p>Helper function: Computes the planned sample size based on the minimal clinical relevant hazard ratio,</p>
alpha and beta under optional stopping.</a></li>
<li><a href='#computeLogrankZ'><p>Helper function to computes the logrank statistic for 'Surv' objects of type</p>
&quot;right&quot; and &quot;counting&quot; with the hypergeometric variance.</a></li>
<li><a href='#computeMinEsBatchSafeZ'><p>Computes the smallest mean difference that is detectable with chance 1-beta, for the provided</p>
sample size</a></li>
<li><a href='#computeNEff'><p>Help function to compute the effective sample size based on a length 2 vector of samples</p></a></li>
<li><a href='#computeNPlanBatchSafeT'><p>Helper function: Computes the planned sample size for the safe t-test based on the minimal clinically</p>
relevant standardised effect size, alpha and beta.</a></li>
<li><a href='#computeNPlanBatchSafeZ'><p>Helper function: Computes the planned sample size based on the minimal clinical relevant mean</p>
difference, alpha and beta.</a></li>
<li><a href='#computeNPlanSafeT'><p>Helper function: Computes the planned sample size of the safe t-test based on the</p>
minimal clinical relevant standardised mean difference.</a></li>
<li><a href='#computeNPlanSafeZ'><p>Helper function: Computes the planned sample size based on the minimal clinical relevant mean</p>
difference, alpha and beta</a></li>
<li><a href='#computeStatsForLogrank'><p>Computes the sufficient statistics needed to compute 'logrankSingleZ'</p></a></li>
<li><a href='#defineTTestN'><p>Computes a Sequence of (Effective) Sample Sizes</p></a></li>
<li><a href='#designFreqT'><p>Design a Frequentist T-Test</p></a></li>
<li><a href='#designFreqZ'><p>Design a Frequentist Z-Test</p></a></li>
<li><a href='#designPilotSafeT'><p>Designs a Safe T-Test Based on Planned Samples nPlan</p></a></li>
<li><a href='#designPilotSafeZ'><p>Designs a Safe Z-Test Based on Planned Samples nPlan</p></a></li>
<li><a href='#designSafeLogrank'><p>Designs a Safe Logrank Test Experiment</p></a></li>
<li><a href='#designSafeT'><p>Designs a Safe Experiment to Test Means with a T Test</p></a></li>
<li><a href='#designSafeTwoProportions'><p>Designs a Safe Experiment to Test Two Proportions in Stream Data</p></a></li>
<li><a href='#designSafeZ'><p>Designs a Safe Z Experiment</p></a></li>
<li><a href='#extractNameFromArgs'><p>Helper function: Get all names as entered by the user</p></a></li>
<li><a href='#generateNormalData'><p>Generates Normally Distributed Data Depending on the Design</p></a></li>
<li><a href='#generateSurvData'><p>Generate Survival Data which Can Be Analysed With the 'survival' Package</p></a></li>
<li><a href='#getArgs'><p>Helper function: Get all arguments as entered by the user</p></a></li>
<li><a href='#getNameAlternative'><p>Gets the Label of the Alternative Hypothesis</p></a></li>
<li><a href='#getNameTestType'><p>Gets the Label of the Test</p></a></li>
<li><a href='#isTryError'><p>Checks Whether a Vector of Object Inherits from the Class 'try-error'</p></a></li>
<li><a href='#logrankSingleEExact'><p>Helper function computes single component of the exact logrank e-value</p></a></li>
<li><a href='#logrankSingleZ'><p>Helper function computes single component of the logrank statistic</p></a></li>
<li><a href='#plot.safe2x2Sim'><p>Plots Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions</p></a></li>
<li><a href='#plot.safeTSim'><p>Plots a 'safeTSim' Object</p></a></li>
<li><a href='#plotConfidenceSequenceTwoProportions'><p>Plot bounds of a safe confidence sequence of the difference or log odds ratio for two proportions</p>
against the number of data blocks in two data streams ya and yb.</a></li>
<li><a href='#plotHistogramDistributionStoppingTimes'><p>Plots the Histogram of Stopping Times</p></a></li>
<li><a href='#plotSafeTDesignSampleSizeProfile'><p>Plots the Sample Sizes Necessary for a Tolerable Alpha and Beta as a Function of deltaMin</p></a></li>
<li><a href='#print.safe2x2Sim'><p>Prints Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions</p></a></li>
<li><a href='#print.safeDesign'><p>Print Method for Safe Tests</p></a></li>
<li><a href='#print.safeTest'><p>Print Method for Safe Tests</p></a></li>
<li><a href='#print.safeTSim'><p>Prints a safeTSim Object</p></a></li>
<li><a href='#replicateTTests'><p>Simulate Early Stopping Experiments</p></a></li>
<li><a href='#returnOne'><p>Auxiliary function for sampling of the logrank simulations to return the integer 1 event per time.</p></a></li>
<li><a href='#rLogrank'><p>Randomly samples from a logrank distribution</p></a></li>
<li><a href='#safeLogrankTest'><p>Safe Logrank Test</p></a></li>
<li><a href='#safeTTest'><p>Safe Student's T-Test.</p></a></li>
<li><a href='#safeTTestStat'><p>Computes E-Values Based on the T-Statistic</p></a></li>
<li><a href='#safeTTestStatAlpha'><p>safeTTestStat() Subtracted with 1/alpha.</p></a></li>
<li><a href='#safeTTestStatTDensity'><p>safeTTestStat() based on t-densities</p></a></li>
<li><a href='#safeTwoProportionsTest'><p>Perform a Safe Test for Two Proportions with Stream Data</p></a></li>
<li><a href='#safeZ10Inverse'><p>Computes the Inverse of the Two-Sided Safe Z-Test</p></a></li>
<li><a href='#safeZTest'><p>Safe Z-Test</p></a></li>
<li><a href='#safeZTestStat'><p>Computes E-Values Based on the Z-Statistic</p></a></li>
<li><a href='#sampleLogrankStoppingTimes'><p>Simulate stopping times for the exact safe logrank test</p></a></li>
<li><a href='#sampleStoppingTimesSafeT'><p>Simulate stopping times for the safe z-test</p></a></li>
<li><a href='#sampleStoppingTimesSafeZ'><p>Simulate stopping times for the safe z-test</p></a></li>
<li><a href='#selectivelyContinueTTestCombineData'><p>Selectively Continue Experiments that Did Not Lead to a Null Rejection for a (Safe) T-Test</p></a></li>
<li><a href='#setSafeStatsPlotOptionsAndReturnOldOnes'><p>Sets 'safestats' Plot Options and Returns the Current Plot Options.</p></a></li>
<li><a href='#simulate.safeDesign'><p>Simulate Early Stopping Experiments for the T Test</p></a></li>
<li><a href='#simulateCoverageDifferenceTwoProportions'><p>Simulate the coverage of a safe confidence sequence for differences between proportions</p>
for a given distribution and safe design.</a></li>
<li><a href='#simulateIncorrectStoppingTimesFisher'><p>Simulate incorrect optional stopping with fisher's exact test's p-value as the</p>
stopping rule.</a></li>
<li><a href='#simulateOptionalStoppingScenarioTwoProportions'><p>Simulate an optional stopping scenario according to a safe design for two proportions</p></a></li>
<li><a href='#simulateTwoProportions'><p>Compare Different Hyperparameter Settings for Safe Tests of Two Proportions.</p></a></li>
<li><a href='#tryOrFailWithNA'><p>Tries to Evaluate an Expression and Fails with <code>NA</code></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Safe Anytime-Valid Inference</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alexander Ly &lt;a.ly@jasp-stats.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to design and apply tests that are anytime valid. The
  functions can be used to design hypothesis tests in the prospective/randomised
  control trial setting or in the observational/retrospective setting. The
  resulting tests remain valid under both optional stopping and optional
  continuation. The current version includes safe t-tests and safe tests of
  two proportions. For details on the theory of safe tests, see
  Grunwald, de Heide and Koolen (2019) "Safe Testing" &lt;<a href="https://doi.org/10.48550/arXiv.1906.07801">doi:10.48550/arXiv.1906.07801</a>&gt;, 
  for details on safe logrank tests see ter Schure, Perez-Ortiz, Ly and Grunwald
  (2020) "The Safe Logrank Test: Error Control under Continuous Monitoring with 
  Unlimited Horizon" &lt;<a href="https://doi.org/10.48550/arXiv.2011.06931">doi:10.48550/arXiv.2011.06931</a>&gt; and Turner, Ly and Grunwald (2021)
  "Safe Tests and Always-Valid Confidence Intervals for contingency tables and 
  beyond" &lt;<a href="https://doi.org/10.48550/arXiv.2106.02693">doi:10.48550/arXiv.2106.02693</a>&gt; for details on safe contingency table tests.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats (&ge; 3.6), hypergeo (&ge; 1.2-13), survival (&ge; 3.2-13),
BiasedUrn (&ge; 1.07), boot (&ge; 1.3-28), dplyr (&ge; 1.0.6), purrr
(&ge; 0.3.5), rlang (&ge; 1.0.6)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, rmarkdown, graphics</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-24 14:19:09 UTC; AlexLy</td>
</tr>
<tr>
<td>Author:</td>
<td>Rosanne Turner [aut],
  Alexander Ly [cre, aut],
  Muriel Felipe Perez-Ortiz [ctb],
  Judith ter Schure [ctb],
  Peter Grunwald [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-24 14:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='checkAndReturnsEsMinParameterSide'>Checks consistency between the sided of the hypothesis and the  minimal clinically relevant effect size
or safe test defining parameter. Throws an error if the one-sided hypothesis is incongruent with the</h2><span id='topic+checkAndReturnsEsMinParameterSide'></span>

<h3>Description</h3>

<p>Checks consistency between the sided of the hypothesis and the  minimal clinically relevant effect size
or safe test defining parameter. Throws an error if the one-sided hypothesis is incongruent with the
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkAndReturnsEsMinParameterSide(
  paramToCheck,
  alternative = c("twoSided", "greater", "less"),
  esMinName = c("noName", "meanDiffMin", "phiS", "deltaMin", "deltaS", "hrMin", "thetaS",
    "deltaTrue"),
  paramDomain = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkAndReturnsEsMinParameterSide_+3A_paramtocheck">paramToCheck</code></td>
<td>
<p>numeric. Either a named safe test defining parameter such as phiS, or thetaS, or a
minimal clinically relevant effect size called with a non-null esMinName name</p>
</td></tr>
<tr><td><code id="checkAndReturnsEsMinParameterSide_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="checkAndReturnsEsMinParameterSide_+3A_esminname">esMinName</code></td>
<td>
<p>provides the name of the effect size. Either &quot;meanDiffMin&quot; for the z-test, &quot;deltaMin&quot; for
the t-test, or &quot;hrMin&quot; for the logrank test</p>
</td></tr>
<tr><td><code id="checkAndReturnsEsMinParameterSide_+3A_paramdomain">paramDomain</code></td>
<td>
<p>Domain of the paramToCheck, typically, positiveNumbers. Default <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>paramToCheck after checking, perhaps with a change in sign
</p>

<hr>
<h2 id='checkAndReturnsNPlan'>Check consistency between nPlan and the testType for one and two-sample z and t-tests</h2><span id='topic+checkAndReturnsNPlan'></span>

<h3>Description</h3>

<p>Check consistency between nPlan and the testType for one and two-sample z and t-tests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkAndReturnsNPlan(
  nPlan,
  ratio = 1,
  testType = c("oneSample", "paired", "twoSample")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkAndReturnsNPlan_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="checkAndReturnsNPlan_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="checkAndReturnsNPlan_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nPlan a vector of sample sizes of length 1 or 2
</p>

<hr>
<h2 id='checkDoubleArgumentsDesignObject'>Helper function to check whether arguments are specified in a function at a higher level and already
provided in the design object.</h2><span id='topic+checkDoubleArgumentsDesignObject'></span>

<h3>Description</h3>

<p>Helper function to check whether arguments are specified in a function at a higher level and already
provided in the design object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDoubleArgumentsDesignObject(designObj, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkDoubleArgumentsDesignObject_+3A_designobj">designObj</code></td>
<td>
<p>an object of class &quot;safeDesign&quot;.</p>
</td></tr>
<tr><td><code id="checkDoubleArgumentsDesignObject_+3A_...">...</code></td>
<td>
<p>arguments that need checking.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns nothing only used for its side-effects to produces warnings if needed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designObj &lt;- designSafeZ(0.4)

checkDoubleArgumentsDesignObject(designObj, "alpha"=NULL, alternative=NULL)
# Throws a warning
checkDoubleArgumentsDesignObject(designObj, "alpha"=0.4, alternative="d")
</code></pre>

<hr>
<h2 id='computeBetaBatchSafeZ'>Helper function: Computes the type II error based on the minimal clinically relevant effect size and sample size.</h2><span id='topic+computeBetaBatchSafeZ'></span>

<h3>Description</h3>

<p>Helper function: Computes the type II error based on the minimal clinically relevant effect size and sample size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeBetaBatchSafeZ(
  meanDiffMin,
  nPlan,
  alpha = 0.05,
  sigma = 1,
  kappa = sigma,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  parameter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeBetaBatchSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaBatchSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric that represents the type II error
</p>

<hr>
<h2 id='computeBetaSafeT'>Helper function: Computes the type II error of the safeTTest based on the minimal clinically relevant
standardised mean difference and nPlan.</h2><span id='topic+computeBetaSafeT'></span>

<h3>Description</h3>

<p>Helper function: Computes the type II error of the safeTTest based on the minimal clinically relevant
standardised mean difference and nPlan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeBetaSafeT(
  deltaMin,
  nPlan,
  alpha = 0.05,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  seed = NULL,
  parameter = NULL,
  pb = TRUE,
  nSim = 1000L,
  nBoot = 1000L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeBetaSafeT_+3A_deltamin">deltaMin</code></td>
<td>
<p>numeric that defines the minimal relevant standardised effect size, the smallest effect size that
we would the experiment to be able to detect.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_nplan">nPlan</code></td>
<td>
<p>vector of max length 2 representing the planned sample sizes.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="computeBetaSafeT_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least beta and an adapted bootObject of class
<code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeBetaSafeT(deltaMin=0.7, 27, nSim=10)
</code></pre>

<hr>
<h2 id='computeBetaSafeZ'>Helper function: Computes the type II error based on the minimal clinically relevant mean difference and nPlan</h2><span id='topic+computeBetaSafeZ'></span>

<h3>Description</h3>

<p>Helper function: Computes the type II error based on the minimal clinically relevant mean difference and nPlan
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeBetaSafeZ(
  meanDiffMin,
  nPlan,
  alpha = 0.05,
  alternative = c("twoSided", "greater", "less"),
  sigma = 1,
  kappa = sigma,
  testType = c("oneSample", "paired", "twoSample"),
  parameter = NULL,
  pb = TRUE,
  nSim = 1000L,
  nBoot = 1000L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeBetaSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="computeBetaSafeZ_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least beta and an adapted bootObject of class  <code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeBetaSafeZ(meanDiffMin=0.7, 20, nSim=10)
</code></pre>

<hr>
<h2 id='computeBootObj'>Computes the bootObj for sequential sampling procedures regarding nPlan, beta, the implied target</h2><span id='topic+computeBootObj'></span>

<h3>Description</h3>

<p>Computes the bootObj for sequential sampling procedures regarding nPlan, beta, the implied target
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeBootObj(
  values,
  beta = NULL,
  nPlan = NULL,
  nBoot = 1000L,
  alpha = NULL,
  objType = c("nPlan", "nMean", "beta", "betaFromEValues", "logImpliedTarget",
    "expectedStopTime")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeBootObj_+3A_values">values</code></td>
<td>
<p>numeric vector. If objType equals &quot;nPlan&quot; or &quot;beta&quot; then values should be stopping times,
if objType equals &quot;logImpliedTarget&quot; then values should be eValues.</p>
</td></tr>
<tr><td><code id="computeBootObj_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeBootObj_+3A_nplan">nPlan</code></td>
<td>
<p>integer &gt; 0 representing the number of planned samples (for the first group).</p>
</td></tr>
<tr><td><code id="computeBootObj_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the planned sample size(s) of the safe test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="computeBootObj_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeBootObj_+3A_objtype">objType</code></td>
<td>
<p>character string either &quot;nPlan&quot;, &quot;nMean&quot;, &quot;beta&quot;, &quot;betaFromEValues&quot;, &quot;expectedStopTime&quot; or &quot;logImpliedTarget&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>bootObj
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeBootObj(1:100, objType="nPlan", beta=0.3)
</code></pre>

<hr>
<h2 id='computeConfidenceBoundForLogOddsTwoProportions'>Estimate an upper or lower bound for a safe confidence sequence on the
logarithm of the odds ratio for two proportions.</h2><span id='topic+computeConfidenceBoundForLogOddsTwoProportions'></span>

<h3>Description</h3>

<p>Estimate an upper or lower bound for a safe confidence sequence on the
logarithm of the odds ratio for two proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConfidenceBoundForLogOddsTwoProportions(
  ya,
  yb,
  safeDesign,
  bound = c("lower", "upper"),
  deltaStart,
  deltaStop,
  precision
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_ya">ya</code></td>
<td>
<p>positive observations/ events per data block in group a: a numeric with integer values
between (and including) 0 and <code>na</code>, the number of observations in group a per block.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_yb">yb</code></td>
<td>
<p>positive observations/ events per data block in group b: a numeric with integer values
between (and including) 0 and <code>nb</code>, the number of observations in group b per block.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_safedesign">safeDesign</code></td>
<td>
<p>a 'safeDesign' object obtained through
<code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a></code></p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_bound">bound</code></td>
<td>
<p>type of bound to calculate; &quot;lower&quot; to get a lower bound on positive delta,
&quot;upper&quot; to get an upper bound on negative delta.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_deltastart">deltaStart</code></td>
<td>
<p>starting value of the grid to search over for the bound on the confidence
sequence (in practice: the interval). Numeric &gt;0 when searching for a lower bound, numeric &lt; 0
when searching for an upper bound.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_deltastop">deltaStop</code></td>
<td>
<p>end value of the grid to search over for the bound on the confidence
sequence (in practice: the interval). Numeric &gt;0 when searching for a lower bound, numeric &lt; 0
when searching for an upper bound.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundForLogOddsTwoProportions_+3A_precision">precision</code></td>
<td>
<p>precision of the grid between deltaStart and deltaStop.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric: the established lower- or upper bound on the logarithm of the odds
ratio between the groups
</p>


<h3>Examples</h3>

<pre><code class='language-R'>balancedSafeDesign &lt;- designSafeTwoProportions(na = 1,
                                               nb = 1,
                                               nBlocksPlan = 10,
                                               alpha = 0.05)
#hypothesize OR &lt; 1 (i.e., log OR &lt; 0)
ya &lt;- c(1,1,1,1,1,1,1,1,0,1)
yb &lt;- c(0,0,0,0,1,0,0,0,0,0)
#one-sided CI for OR-, establish upper bound on log odds ratio
computeConfidenceBoundForLogOddsTwoProportions(ya = ya,
                                           yb = yb,
                                           safeDesign = balancedSafeDesign,
                                           bound = "upper",
                                           deltaStart = -0.01,
                                           deltaStop = -4,
                                           precision = 20)

</code></pre>

<hr>
<h2 id='computeConfidenceBoundsForDifferenceTwoProportions'>Estimate Lower and Upper Bounds on the Confidence Sequence (Interval)
for the Difference Divergence Measure for Two Proportions</h2><span id='topic+computeConfidenceBoundsForDifferenceTwoProportions'></span>

<h3>Description</h3>

<p>Estimate Lower and Upper Bounds on the Confidence Sequence (Interval)
for the Difference Divergence Measure for Two Proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConfidenceBoundsForDifferenceTwoProportions(
  ya,
  yb,
  precision,
  safeDesign
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeConfidenceBoundsForDifferenceTwoProportions_+3A_ya">ya</code></td>
<td>
<p>positive observations/ events per data block in group a: a numeric with integer values
between (and including) 0 and <code>na</code>, the number of observations in group a per block.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundsForDifferenceTwoProportions_+3A_yb">yb</code></td>
<td>
<p>positive observations/ events per data block in group b: a numeric with integer values
between (and including) 0 and <code>nb</code>, the number of observations in group b per block.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundsForDifferenceTwoProportions_+3A_precision">precision</code></td>
<td>
<p>precision of the grid of differences to search over for the lower and upper bounds.</p>
</td></tr>
<tr><td><code id="computeConfidenceBoundsForDifferenceTwoProportions_+3A_safedesign">safeDesign</code></td>
<td>
<p>a 'safeDesign' object obtained through
<code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with found lower and upper bound.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>balancedSafeDesign &lt;- designSafeTwoProportions(na = 1,
                                               nb = 1,
                                               nBlocksPlan = 10,
                                               alpha = 0.05)
ya &lt;- c(1,1,1,1,1,1,1,1,0,1)
yb &lt;- c(0,0,0,0,1,0,0,0,0,0)
computeConfidenceBoundsForDifferenceTwoProportions(ya = ya,
                                               yb = yb,
                                               precision = 20,
                                               safeDesign = balancedSafeDesign)

</code></pre>

<hr>
<h2 id='computeConfidenceIntervalT'>Helper function: Computes the safe confidence sequence for the mean in a t-test</h2><span id='topic+computeConfidenceIntervalT'></span>

<h3>Description</h3>

<p>Helper function: Computes the safe confidence sequence for the mean in a t-test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConfidenceIntervalT(
  meanObs,
  sdObs,
  nEff,
  nu,
  deltaS,
  ciValue = 0.95,
  g = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeConfidenceIntervalT_+3A_meanobs">meanObs</code></td>
<td>
<p>numeric, the observed mean. For two sample tests this is difference of the means.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_sdobs">sdObs</code></td>
<td>
<p>numeric, the observed standard deviation. For a two-sample test this is the root
of the pooled variance.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_neff">nEff</code></td>
<td>
<p>numeric &gt; 0, the effective sample size. For one sample test this is just n.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_nu">nu</code></td>
<td>
<p>numeric &gt; 0, the degrees of freedom.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_deltas">deltaS</code></td>
<td>
<p>numeric &gt; 0, the safe test defining parameter.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_civalue">ciValue</code></td>
<td>
<p>numeric is the ciValue-level of the confidence sequence. Default ciValue=0.95.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalT_+3A_g">g</code></td>
<td>
<p>numeric &gt; 0, used as the variance of the normal prior on the population delta
Default is <code>NULL</code> in which case g=delta^2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector that contains the upper and lower bound of the safe confidence sequence
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeConfidenceIntervalT(meanObs=0.3, sdObs=2, nEff=12, nu=11, deltaS=0.4)
</code></pre>

<hr>
<h2 id='computeConfidenceIntervalZ'>Helper function: Computes the safe confidence sequence for a z-test</h2><span id='topic+computeConfidenceIntervalZ'></span>

<h3>Description</h3>

<p>Helper function: Computes the safe confidence sequence for a z-test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConfidenceIntervalZ(
  nEff,
  meanObs,
  phiS,
  sigma = 1,
  ciValue = 0.95,
  alternative = "twoSided",
  a = NULL,
  g = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeConfidenceIntervalZ_+3A_neff">nEff</code></td>
<td>
<p>numeric &gt; 0, the effective sample size.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_meanobs">meanObs</code></td>
<td>
<p>numeric, the observed mean. For two sample tests this is difference of the means.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_phis">phiS</code></td>
<td>
<p>numeric &gt; 0, the safe test defining parameter.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_civalue">ciValue</code></td>
<td>
<p>numeric is the ciValue-level of the confidence sequence. Default ciValue=0.95.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_a">a</code></td>
<td>
<p>numeric, the centre of the normal prior on population mean (of the normal data). Default
is <code>NULL</code>, which implies the default choice of setting the centre equal to the null hypothesis.</p>
</td></tr>
<tr><td><code id="computeConfidenceIntervalZ_+3A_g">g</code></td>
<td>
<p>numeric &gt; 0, used to define g sigma^2 as the variance of the normal prior on the population
(of the normal data). Default is <code>NULL</code> in which case g=phiS^2/sigma^2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector that contains the upper and lower bound of the safe confidence sequence
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeConfidenceIntervalZ(nEff=15, meanObs=0.3, phiS=0.2)
</code></pre>

<hr>
<h2 id='computeEsMinSafeT'>Helper function: Computes the minimal clinically relevant standardised mean difference for the safe t-test
nPlan and beta.</h2><span id='topic+computeEsMinSafeT'></span>

<h3>Description</h3>

<p>Helper function: Computes the minimal clinically relevant standardised mean difference for the safe t-test
nPlan and beta.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeEsMinSafeT(
  nPlan,
  alpha = 0.05,
  beta = 0.2,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  lowN = 3,
  highN = 1e+06,
  ratio = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeEsMinSafeT_+3A_nplan">nPlan</code></td>
<td>
<p>vector of max length 2 representing the planned sample sizes.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_highn">highN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default highN is set 1e6.</p>
</td></tr>
<tr><td><code id="computeEsMinSafeT_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nPlan and the phiS the parameter that defines the safe test
</p>

<hr>
<h2 id='computeLogrankBetaFrom'>Helper function: Computes the type II error under optional stopping based on the minimal clinically relevant hazard
ratio and the maximum number of nEvents.</h2><span id='topic+computeLogrankBetaFrom'></span>

<h3>Description</h3>

<p>Helper function: Computes the type II error under optional stopping based on the minimal clinically relevant hazard
ratio and the maximum number of nEvents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeLogrankBetaFrom(
  hrMin,
  nEvents,
  m0 = 50000L,
  m1 = 50000L,
  alpha = 0.05,
  alternative = c("twoSided", "greater", "less"),
  nSim = 1000L,
  nBoot = 10000L,
  groupSizePerTimeFunction = returnOne,
  parameter = NULL,
  pb = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeLogrankBetaFrom_+3A_hrmin">hrMin</code></td>
<td>
<p>numeric that defines the minimal relevant hazard ratio, the smallest hazard ratio that we want to
detect.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_nevents">nEvents</code></td>
<td>
<p>numeric &gt; 0, targetted number of events.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_m0">m0</code></td>
<td>
<p>Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_m1">m1</code></td>
<td>
<p>Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, which must be one of
&quot;twoSided&quot; (default),&quot;greater&quot; or &quot;less&quot;. The alternative is pitted against the null hypothesis of equality
of the survival distributions. More specifically, let lambda1 be the hazard rate of group 1 (i.e., placebo), and
lambda2 the hazard ratio of group 2 (i.e., treatment), then the null hypothesis states that the hazard ratio
theta = lambda2/lambda1 = 1. If alternative = &quot;less&quot;, the null hypothesis is compared to theta &lt; 1, thus,
lambda2 &lt; lambda1, that is, the hazard of group 2 (i.e., treatment) is less than that of group 1 (i.e., placebo),
hence, the treatment is beneficial. If alternative = &quot;greater&quot;, then the null hypothesis is compared to theta &gt; 1,
thus, lambda2 &gt; lambda1, hence, harm.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of the approximation of
power or nEvents for the exact safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_groupsizepertimefunction">groupSizePerTimeFunction</code></td>
<td>
<p>A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if <code>rpois(1, 7)</code> leads to a random number of events at each time
step.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_parameter">parameter</code></td>
<td>
<p>Numeric &gt; 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.</p>
</td></tr>
<tr><td><code id="computeLogrankBetaFrom_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least beta and an adapted bootObject of class  <code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Author(s)</h3>

<p>Muriel Felipe Perez-Ortiz and Alexander Ly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeLogrankBetaFrom(hrMin=0.7, 300, nSim=10)
</code></pre>

<hr>
<h2 id='computeLogrankNEvents'>Helper function: Computes the planned sample size based on the minimal clinical relevant hazard ratio,
alpha and beta under optional stopping.</h2><span id='topic+computeLogrankNEvents'></span>

<h3>Description</h3>

<p>Helper function: Computes the planned sample size based on the minimal clinical relevant hazard ratio,
alpha and beta under optional stopping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeLogrankNEvents(
  hrMin,
  beta,
  m0 = 50000,
  m1 = 50000,
  alpha = 0.05,
  alternative = c("twoSided", "greater", "less"),
  nSim = 1000L,
  nBoot = 1000L,
  groupSizePerTimeFunction = returnOne,
  nMax = Inf,
  parameter = NULL,
  digits = getOption("digits"),
  pb = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeLogrankNEvents_+3A_hrmin">hrMin</code></td>
<td>
<p>numeric that defines the minimal relevant hazard ratio, the smallest hazard ratio that we want to
detect.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_m0">m0</code></td>
<td>
<p>Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_m1">m1</code></td>
<td>
<p>Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, which must be one of
&quot;twoSided&quot; (default),&quot;greater&quot; or &quot;less&quot;. The alternative is pitted against the null hypothesis of equality
of the survival distributions. More specifically, let lambda1 be the hazard rate of group 1 (i.e., placebo), and
lambda2 the hazard ratio of group 2 (i.e., treatment), then the null hypothesis states that the hazard ratio
theta = lambda2/lambda1 = 1. If alternative = &quot;less&quot;, the null hypothesis is compared to theta &lt; 1, thus,
lambda2 &lt; lambda1, that is, the hazard of group 2 (i.e., treatment) is less than that of group 1 (i.e., placebo),
hence, the treatment is beneficial. If alternative = &quot;greater&quot;, then the null hypothesis is compared to theta &gt; 1,
thus, lambda2 &gt; lambda1, hence, harm.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of the approximation of
power or nEvents for the exact safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_groupsizepertimefunction">groupSizePerTimeFunction</code></td>
<td>
<p>A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if <code>rpois(1, 7)</code> leads to a random number of events at each time
step.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_nmax">nMax</code></td>
<td>
<p>An integer. Once nEvents hits nMax the experiment terminates, if it didn't stop due to threshold
crossing crossing already. Default set to Inf.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_parameter">parameter</code></td>
<td>
<p>Numeric &gt; 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_digits">digits</code></td>
<td>
<p>number of significant digits to be used.</p>
</td></tr>
<tr><td><code id="computeLogrankNEvents_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nEvents and an adapted bootObject of class  <code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Author(s)</h3>

<p>Muriel Felipe Perez-Ortiz and Alexander Ly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeLogrankNEvents(0.7, 0.2, nSim=10)
</code></pre>

<hr>
<h2 id='computeLogrankZ'>Helper function to computes the logrank statistic for 'Surv' objects of type
&quot;right&quot; and &quot;counting&quot; with the hypergeometric variance.</h2><span id='topic+computeLogrankZ'></span>

<h3>Description</h3>

<p>This function was created to complement <code><a href="survival.html#topic+survdiff">survdiff</a></code> from the
'survival' package, which is restricted to 'Surv' objects of type &quot;right&quot;. Most likely
<code><a href="survival.html#topic+survdiff">survdiff</a></code> is much faster
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeLogrankZ(
  survObj,
  group,
  computeZ = TRUE,
  computeExactE = FALSE,
  theta0 = 1,
  thetaS = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeLogrankZ_+3A_survobj">survObj</code></td>
<td>
<p>a Surv object that is either of type</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_group">group</code></td>
<td>
<p>a grouping factor with 2 levels</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_computez">computeZ</code></td>
<td>
<p>logical. If <code>TRUE</code> computes the logrank z-statistic.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_computeexacte">computeExactE</code></td>
<td>
<p>logical. If <code>TRUE</code> computes one-sided exact logrank e-value.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_theta0">theta0</code></td>
<td>
<p>numeric &gt; 0 used only for the e-value, i.e., if computeExactE is <code>TRUE</code>.
Default is 1.</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_thetas">thetaS</code></td>
<td>
<p>numeric &gt; 0 used only for the e-value, i.e., if computeExactE is <code>TRUE</code>.
Default is NULL.</p>
</td></tr>
<tr><td><code id="computeLogrankZ_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing at least the following components:
</p>

<dl>
<dt>nEvents</dt><dd><p>the number of events.</p>
</dd>
<dt>z</dt><dd><p>the observed logrank statistic.</p>
</dd>
<dt>oMinEVector</dt><dd><p>vector of observed minus expected.</p>
</dd>
<dt>varVector</dt><dd><p>vector of hypergeometric variances.</p>
</dd>
<dt>stopTimeVector</dt><dd><p>vector at which the events occurred.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- generateSurvData(nP = 5,
                         nT = 5,
                         lambdaP = 0.03943723,
                         lambdaT = 0.5*0.03943723,
                         endTime = 40,
                         seed = 2006)

survObj &lt;- survival::Surv(data$time, data$status)

survObj &lt;- survival::Surv(data$time, data$status)

result &lt;- computeLogrankZ(survObj, data$group)
result$z
sqrt(survival::survdiff(survObj~data$group)$chisq)
</code></pre>

<hr>
<h2 id='computeMinEsBatchSafeZ'>Computes the smallest mean difference that is detectable with chance 1-beta, for the provided
sample size</h2><span id='topic+computeMinEsBatchSafeZ'></span>

<h3>Description</h3>

<p>Computes the smallest mean difference that is detectable with chance 1-beta, for the provided
sample size
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeMinEsBatchSafeZ(
  nPlan,
  alpha = 0.05,
  beta = 0.2,
  sigma = 1,
  kappa = sigma,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  parameter = NULL,
  maxIter = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeMinEsBatchSafeZ_+3A_maxiter">maxIter</code></td>
<td>
<p>maximum number of iterations in the optimisation process for two-sided designs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric &gt; 0 that represents the minimal detectable mean difference
</p>

<hr>
<h2 id='computeNEff'>Help function to compute the effective sample size based on a length 2 vector of samples</h2><span id='topic+computeNEff'></span>

<h3>Description</h3>

<p>Help function to compute the effective sample size based on a length 2 vector of samples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeNEff(n, testType = c("oneSample", "paired", "twoSample"), silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeNEff_+3A_n">n</code></td>
<td>
<p>vector of length at most 2 representing the sample sizes of the first and second group</p>
</td></tr>
<tr><td><code id="computeNEff_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeNEff_+3A_silent">silent</code></td>
<td>
<p>logical, if true, then turn off warnings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric that represents the effective sample size.
</p>

<hr>
<h2 id='computeNPlanBatchSafeT'>Helper function: Computes the planned sample size for the safe t-test based on the minimal clinically
relevant standardised effect size, alpha and beta.</h2><span id='topic+computeNPlanBatchSafeT'></span>

<h3>Description</h3>

<p>Helper function: Computes the planned sample size for the safe t-test based on the minimal clinically
relevant standardised effect size, alpha and beta.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeNPlanBatchSafeT(
  deltaMin,
  alpha = 0.05,
  beta = 0.2,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  lowN = 3,
  highN = 1e+06,
  ratio = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeNPlanBatchSafeT_+3A_deltamin">deltaMin</code></td>
<td>
<p>numeric that defines the minimal relevant standardised effect size, the smallest effect size that
we would the experiment to be able to detect.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_highn">highN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default highN is set 1e6.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeT_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nPlan and the phiS the parameter that defines the safe test
</p>

<hr>
<h2 id='computeNPlanBatchSafeZ'>Helper function: Computes the planned sample size based on the minimal clinical relevant mean
difference, alpha and beta.</h2><span id='topic+computeNPlanBatchSafeZ'></span>

<h3>Description</h3>

<p>Helper function: Computes the planned sample size based on the minimal clinical relevant mean
difference, alpha and beta.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeNPlanBatchSafeZ(
  meanDiffMin,
  alpha = 0.05,
  beta = 0.2,
  sigma = 1,
  kappa = sigma,
  alternative = c("twoSided", "greater", "less"),
  testType = c("oneSample", "paired", "twoSample"),
  tol = 1e-05,
  highN = 1e+06,
  ratio = 1,
  parameter = NULL,
  grow = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_highn">highN</code></td>
<td>
<p>integer that defines the largest n of our search space for n. This might be the
largest n that we are able to fund.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeNPlanBatchSafeZ_+3A_grow">grow</code></td>
<td>
<p>logical, default set to <code>TRUE</code> so the grow safe test is used in the design.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nPlan and the phiS, that is, the parameter that defines
the safe test.
</p>

<hr>
<h2 id='computeNPlanSafeT'>Helper function: Computes the planned sample size of the safe t-test based on the
minimal clinical relevant standardised mean difference.</h2><span id='topic+computeNPlanSafeT'></span>

<h3>Description</h3>

<p>Helper function: Computes the planned sample size of the safe t-test based on the
minimal clinical relevant standardised mean difference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeNPlanSafeT(
  deltaMin,
  beta = 0.2,
  alpha = 0.05,
  alternative = c("twoSided", "less", "greater"),
  testType = c("oneSample", "paired", "twoSample"),
  lowN = 3,
  highN = 1e+06,
  ratio = 1,
  nSim = 1000L,
  nBoot = 1000L,
  parameter = NULL,
  pb = TRUE,
  nMax = 1e+06,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeNPlanSafeT_+3A_deltamin">deltaMin</code></td>
<td>
<p>numeric that defines the minimal relevant standardised effect size, the smallest effect size that
we would the experiment to be able to detect.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_highn">highN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default highN is set 1e6.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_nmax">nMax</code></td>
<td>
<p>integer &gt; 0, maximum sample size of the (first) sample in each sample path.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeT_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nPlan and an adapted bootObject of class  <code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeNPlanSafeT(0.7, 0.2, nSim=10)
</code></pre>

<hr>
<h2 id='computeNPlanSafeZ'>Helper function: Computes the planned sample size based on the minimal clinical relevant mean
difference, alpha and beta</h2><span id='topic+computeNPlanSafeZ'></span>

<h3>Description</h3>

<p>Helper function: Computes the planned sample size based on the minimal clinical relevant mean
difference, alpha and beta
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeNPlanSafeZ(
  meanDiffMin,
  beta = 0.2,
  alpha = 0.05,
  alternative = c("twoSided", "less", "greater"),
  testType = c("oneSample", "paired", "twoSample"),
  sigma = 1,
  kappa = sigma,
  ratio = 1,
  nSim = 1000L,
  nBoot = 1000L,
  parameter = NULL,
  pb = TRUE,
  nMax = 1e+08
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeNPlanSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="computeNPlanSafeZ_+3A_nmax">nMax</code></td>
<td>
<p>integer &gt; 0, maximum sample size of the (first) sample in each sample path.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list which contains at least nPlan and an adapted bootObject of class  <code><a href="boot.html#topic+boot">boot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeNPlanSafeZ(0.7, 0.2, nSim=10)
</code></pre>

<hr>
<h2 id='computeStatsForLogrank'>Computes the sufficient statistics needed to compute 'logrankSingleZ'</h2><span id='topic+computeStatsForLogrank'></span>

<h3>Description</h3>

<p>Computes the sufficient statistics needed to compute 'logrankSingleZ'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeStatsForLogrank(
  survDataFrame,
  y0Index,
  y1Index,
  timeNow,
  timeBefore,
  survType = "right",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeStatsForLogrank_+3A_survdataframe">survDataFrame</code></td>
<td>
<p>a 'Surv' object converted to a matrix, then to a data.frame</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_y0index">y0Index</code></td>
<td>
<p>vector of integers corresponding to the control group</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_y1index">y1Index</code></td>
<td>
<p>vector of integers corresponding to the treatment group</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_timenow">timeNow</code></td>
<td>
<p>numeric, current time</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_timebefore">timeBefore</code></td>
<td>
<p>numeric, previous time</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_survtype">survType</code></td>
<td>
<p>character, either &quot;right&quot; or &quot;counting&quot; (left truncated, right censored)</p>
</td></tr>
<tr><td><code id="computeStatsForLogrank_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing at least the following components:
</p>

<dl>
<dt>obs0</dt><dd><p>number of observations in the control group.</p>
</dd>
<dt>obs1</dt><dd><p>number of observations in the treatment group.</p>
</dd>
<dt>y0</dt><dd><p>total number of participants in the control group.</p>
</dd>
<dt>y1</dt><dd><p>total number of participants in the treatment group.</p>
</dd></dl>
<p>#'

</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data &lt;- generateSurvData(nP = 5,
                         nT = 5,
                         lambdaP = 0.03943723,
                         lambdaT = 0.5*0.03943723,
                         endTime = 40,
                         seed = 2006)

survObj &lt;- survival::Surv(data$time, data$status)

survDataFrame &lt;- as.data.frame(as.matrix(survObj))
y0Index &lt;- which(data$group=="P")
y1Index &lt;- which(data$group=="T")

timeNow &lt;- 4
timeBefore &lt;- 0

computeStatsForLogrank(survDataFrame, y0Index, y1Index, timeNow, timeBefore)

timeNow &lt;- 13
timeBefore &lt;- 4

computeStatsForLogrank(survDataFrame, y0Index, y1Index, timeNow, timeBefore)
</code></pre>

<hr>
<h2 id='defineTTestN'>Computes a Sequence of (Effective) Sample Sizes</h2><span id='topic+defineTTestN'></span>

<h3>Description</h3>

<p>Helper function that outputs the sample sizes, effective sample sizes and the degrees of
freedom depending on the type of t-test. Also used for z-tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineTTestN(
  lowN = 3,
  highN = 100,
  ratio = 1,
  testType = c("oneSample", "paired", "twoSample")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineTTestN_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="defineTTestN_+3A_highn">highN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default highN is set 1e6.</p>
</td></tr>
<tr><td><code id="defineTTestN_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="defineTTestN_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the sample sizes and degrees of freedom.
</p>

<hr>
<h2 id='designFreqT'>Design a Frequentist T-Test</h2><span id='topic+designFreqT'></span>

<h3>Description</h3>

<p>Computes the number of samples necessary to reach a tolerable type I and type II error for the frequentist t-test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designFreqT(
  deltaMin,
  alpha = 0.05,
  beta = 0.2,
  alternative = c("twoSided", "greater", "less"),
  h0 = 0,
  testType = c("oneSample", "paired", "twoSample"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designFreqT_+3A_deltamin">deltaMin</code></td>
<td>
<p>numeric that defines the minimal relevant standardised effect size, the smallest effect size that
we would the experiment to be able to detect.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_h0">h0</code></td>
<td>
<p>a number indicating the hypothesised true value of the mean under the null. For the moment h0=0.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="designFreqT_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods, but mainly to perform do.calls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'freqTDesign'. An object of class 'freqTDesign' is a list containing at least the
following components:
</p>

<dl>
<dt>nPlan</dt><dd><p>the planned sample size(s).</p>
</dd>
<dt>esMin</dt><dd><p>the minimal clinically relevant standardised effect size provided by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>lowN</dt><dd><p>the smallest n of the search space for n provided by the user.</p>
</dd>
<dt>highN</dt><dd><p>the largest n of the search space for n provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>designFreqT(0.5)
</code></pre>

<hr>
<h2 id='designFreqZ'>Design a Frequentist Z-Test</h2><span id='topic+designFreqZ'></span>

<h3>Description</h3>

<p>Computes the number of samples necessary to reach a tolerable type I and type II error for the
frequentist z-test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designFreqZ(
  meanDiffMin,
  alternative = c("twoSided", "greater", "less"),
  alpha = 0.05,
  beta = 0.2,
  testType = c("oneSample", "paired", "twoSample"),
  ratio = 1,
  sigma = 1,
  h0 = 0,
  kappa = sigma,
  lowN = 3L,
  highN = 100L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designFreqZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_h0">h0</code></td>
<td>
<p>numeric, represents the null hypothesis, default h0=0.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_lown">lowN</code></td>
<td>
<p>integer that defines the smallest n of our search space for n.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_highn">highN</code></td>
<td>
<p>integer that defines the largest n of our search space for n. This might be the
largest n that we are able to fund.</p>
</td></tr>
<tr><td><code id="designFreqZ_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a 'freqZDesign' object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>freqDesign &lt;- designFreqZ(meanDiffMin = 0.5, highN = 100)
freqDesign$nPlan
freqDesign2 &lt;- designFreqZ(meanDiffMin = 0.2, lowN = 32, highN = 200)
freqDesign2$nPlan
</code></pre>

<hr>
<h2 id='designPilotSafeT'>Designs a Safe T-Test Based on Planned Samples nPlan</h2><span id='topic+designPilotSafeT'></span>

<h3>Description</h3>

<p>Designs a safe experiment for a prespecified tolerable type I error based on planned sample
size(s), which are fixed ahead of time. Outputs a list that includes the deltaS, i.e., the
safe test defining parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designPilotSafeT(
  nPlan = 50,
  alpha = 0.05,
  alternative = c("twoSided", "greater", "less"),
  h0 = 0,
  lowParam = 0.01,
  highParam = 1.2,
  tol = 0.01,
  inverseMethod = TRUE,
  logging = FALSE,
  paired = FALSE,
  maxIter = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designPilotSafeT_+3A_nplan">nPlan</code></td>
<td>
<p>the planned sample size(s).</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_h0">h0</code></td>
<td>
<p>a number indicating the hypothesised true value of the mean under the null. For the moment h0=0.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_lowparam">lowParam</code></td>
<td>
<p>numeric defining the smallest delta of the search space for the test-defining deltaS
for scenario 3. Currently not yet in use.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_highparam">highParam</code></td>
<td>
<p>numeric defining the largest delta of the search space for the test-defining deltaS
for scenario 3. Currently not yet in use.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_inversemethod">inverseMethod</code></td>
<td>
<p>logical, always <code>TRUE</code> for the moment.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_logging">logging</code></td>
<td>
<p>logical, if <code>TRUE</code>, then add invSToTThresh to output.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_paired">paired</code></td>
<td>
<p>logical, if <code>TRUE</code> then paired t-test.</p>
</td></tr>
<tr><td><code id="designPilotSafeT_+3A_maxiter">maxIter</code></td>
<td>
<p>numeric &gt; 0, the maximum number of iterations of adjustment to the candidate set from
lowParam to highParam, if the minimum is not found.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'safeDesign'. An object of class 'safeDesign' is a list containing at least the
following components:
</p>

<dl>
<dt>nPlan</dt><dd><p>the planned sample size(s).</p>
</dd>
<dt>parameter</dt><dd><p>the safe test defining parameter. Here deltaS.</p>
</dd>
<dt>esMin</dt><dd><p>the minimal clinically relevant standardised effect size provided by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>paired</dt><dd><p>logical, <code>TRUE</code> if &quot;paired&quot;, <code>FALSE</code> otherwise.</p>
</dd>
<dt>h0</dt><dd><p>the specified hypothesised value of the mean or mean difference depending on
whether it was a one-sample or a two-sample test.</p>
</dd>
<dt>ratio</dt><dd><p>default is 1. Different from 1, whenever testType equals &quot;twoSample&quot;, then it defines
ratio between the planned randomisation of condition 2 over condition 1.</p>
</dd>
<dt>lowN</dt><dd><p>the smallest n of the search space for n provided by the user.</p>
</dd>
<dt>highN</dt><dd><p>the largest n of the search space for n provided by the user.</p>
</dd>
<dt>lowParam</dt><dd><p>the smallest delta of the search space for delta provided by the user.</p>
</dd>
<dt>highParam</dt><dd><p>the largest delta of the search space for delta provided by the user.</p>
</dd>
<dt>tol</dt><dd><p>the step size between lowParam and highParam provided by the user.</p>
</dd>
<dt>pilot</dt><dd><p><code>FALSE</code> (default) specified by the user to indicate that the design is not a pilot study.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>designPilotSafeT(nPlan=30)
</code></pre>

<hr>
<h2 id='designPilotSafeZ'>Designs a Safe Z-Test Based on Planned Samples nPlan</h2><span id='topic+designPilotSafeZ'></span>

<h3>Description</h3>

<p>Designs a safe experiment for a prespecified tolerable type I error based on planned sample size(s),
which are fixed ahead of time. Outputs a list that includes phiS, i.e., the safe test defining parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designPilotSafeZ(
  nPlan,
  alternative = c("twoSided", "greater", "less"),
  alpha = 0.05,
  sigma = 1,
  h0 = 0,
  kappa = sigma,
  tol = 1e-05,
  paired = FALSE,
  parameter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designPilotSafeZ_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_h0">h0</code></td>
<td>
<p>numeric, represents the null hypothesis, default h0=0.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_paired">paired</code></td>
<td>
<p>logical, if <code>TRUE</code> then paired z-test.</p>
</td></tr>
<tr><td><code id="designPilotSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a 'safeDesign' object
</p>

<dl>
<dt>nPlan</dt><dd><p>the sample size(s) to plan for. Provided by the user.</p>
</dd>
<dt>parameter</dt><dd><p>the safe test defining parameter. Here phiS.</p>
</dd>
<dt>esMin</dt><dd><p><code>NULL</code> no minimally clinically relevant effect size provided.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p><code>NULL</code>, no tolerable type II error specified.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; effectively provided by the user.</p>
</dd>
<dt>paired</dt><dd><p>logical, <code>TRUE</code> if &quot;paired&quot;, <code>FALSE</code> otherwise.</p>
</dd>
<dt>sigma</dt><dd><p>the assumed population standard deviation used for the test provided by the user.</p>
</dd>
<dt>kappa</dt><dd><p>the true population standard deviation, typically, sigma=kappa.</p>
</dd>
<dt>ratio</dt><dd><p>default is 1. Different from 1, whenever testType equals &quot;twoSample&quot;, then it defines
ratio between the planned randomisation of condition 2 over condition 1.</p>
</dd>
<dt>tol</dt><dd><p>the step size between parameter values in the candidate space.</p>
</dd>
<dt>pilot</dt><dd><p>logical, specifying whether it's a pilot design.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>designPilotSafeZ(nPlan=30, alpha = 0.05)
</code></pre>

<hr>
<h2 id='designSafeLogrank'>Designs a Safe Logrank Test Experiment</h2><span id='topic+designSafeLogrank'></span>

<h3>Description</h3>

<p>A designed experiment requires (1) an anticipated number of events nEvents, or even better nPlan, the number of
participants to be recruited in the study, and (2) the parameter of the safe test, i.e., thetaS. Provided with a
clinically relevant minimal hazard ratio hrMin, this function outputs thetaS = hrMin as the safe test defining
parameter in accordance to the GROW criterion. If a tolerable type II error beta is provided then nEvents can be
sampled. The sampled nEvents is then the smallest nEvents for which hrMin is found with power of at least 1 - beta
under optional stopping. If exact equal <code>FALSE</code>, then the computations exploit the local asymptotic normal
approximation to sampling distribution of the logrank test derived by Schoenfeld (1981).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designSafeLogrank(
  hrMin = NULL,
  beta = NULL,
  nEvents = NULL,
  h0 = 1,
  alternative = c("twoSided", "greater", "less"),
  alpha = 0.05,
  ratio = 1,
  exact = TRUE,
  tol = 1e-05,
  m0 = 50000L,
  m1 = 50000L,
  nSim = 1000L,
  nBoot = 10000L,
  parameter = NULL,
  groupSizePerTimeFunction = returnOne,
  pb = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designSafeLogrank_+3A_hrmin">hrMin</code></td>
<td>
<p>numeric that defines the minimal relevant hazard ratio, the smallest hazard ratio that we want to
detect.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_nevents">nEvents</code></td>
<td>
<p>numeric &gt; 0, targetted number of events.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_h0">h0</code></td>
<td>
<p>numeric &gt; 0, represents the null hypothesis, default h0=1.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, which must be one of
&quot;twoSided&quot; (default),&quot;greater&quot; or &quot;less&quot;. The alternative is pitted against the null hypothesis of equality
of the survival distributions. More specifically, let lambda1 be the hazard rate of group 1 (i.e., placebo), and
lambda2 the hazard ratio of group 2 (i.e., treatment), then the null hypothesis states that the hazard ratio
theta = lambda2/lambda1 = 1. If alternative = &quot;less&quot;, the null hypothesis is compared to theta &lt; 1, thus,
lambda2 &lt; lambda1, that is, the hazard of group 2 (i.e., treatment) is less than that of group 1 (i.e., placebo),
hence, the treatment is beneficial. If alternative = &quot;greater&quot;, then the null hypothesis is compared to theta &gt; 1,
thus, lambda2 &gt; lambda1, hence, harm.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 (Treatment) over condition 1 (Placebo),
thus, m1/m0. Note that m1 and m0 are not used to specify ratio. Ratio is only used when <code>zApprox=TRUE</code>, which
ignores m1 and m0.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_exact">exact</code></td>
<td>
<p>a logical indicating whether the design should be based on the exact safe logrank test based on the
hypergeometric likelihood. Default is <code>TRUE</code>, if <code>FALSE</code> then the design is based on a  safe z-test.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_m0">m0</code></td>
<td>
<p>Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_m1">m1</code></td>
<td>
<p>Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of the approximation of
power or nEvents for the exact safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_parameter">parameter</code></td>
<td>
<p>Numeric &gt; 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_groupsizepertimefunction">groupSizePerTimeFunction</code></td>
<td>
<p>A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if <code>rpois(1, 7)</code> leads to a random number of events at each time
step.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="designSafeLogrank_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a safeDesign object that includes:
</p>

<dl>
<dt>nEvents</dt><dd><p>the anticipated number of events, either (1) specified by the user, or
(2) computed based on beta and thetaMin.</p>
</dd>
<dt>parameter</dt><dd><p>the parameter that defines the safe test. Here log(thetaS).</p>
</dd>
<dt>esMin</dt><dd><p>the minimally clinically relevant hazard ratio specified by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>&quot;logrank&quot;.</p>
</dd>
<dt>ratio</dt><dd><p>default is 1. It defines the ratio between the planned randomisation of
condition 2 over condition 1.</p>
</dd>
<dt>pilot</dt><dd><p><code>FALSE</code> to indicate that the design is not a pilot study.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>References</h3>

<p>Schoenfeld, D. (1981). The asymptotic properties of nonparametric tests
for comparing survival distributions. Biometrika, 68(1), 316-319.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designSafeLogrank(hrMin=0.7)
designSafeLogrank(hrMin=0.7, zApprox=TRUE)
designSafeLogrank(hrMin=0.7, beta=0.3, nSim=10)
designSafeLogrank(hrMin=0.7, nEvents=190, nSim=10)
</code></pre>

<hr>
<h2 id='designSafeT'>Designs a Safe Experiment to Test Means with a T Test</h2><span id='topic+designSafeT'></span>

<h3>Description</h3>

<p>A designed experiment requires (1) a sample size nPlan to plan for, and (2) the parameter of the safe test, i.e.,
deltaS. If nPlan is provided, then only the safe test defining parameter deltaS needs to determined. That resulting
deltaS leads to an (approximately) most powerful safe test. Typically, nPlan is unknown and the user has to specify
(i) a tolerable type II error beta, and (ii) a clinically relevant minimal population standardised effect size
deltaMin. The procedure finds the smallest nPlan for which deltaMin is found with power of at least 1 - beta.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designSafeT(
  deltaMin = NULL,
  beta = NULL,
  nPlan = NULL,
  alpha = 0.05,
  h0 = 0,
  alternative = c("twoSided", "greater", "less"),
  lowN = 3L,
  highN = 1000000L,
  lowParam = 0.01,
  highParam = 1.5,
  tol = 0.01,
  testType = c("oneSample", "paired", "twoSample"),
  ratio = 1,
  nSim = 1000L,
  nBoot = 1000L,
  parameter = NULL,
  pb = TRUE,
  seed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designSafeT_+3A_deltamin">deltaMin</code></td>
<td>
<p>numeric that defines the minimal relevant standardised effect size, the smallest effect size that
we would the experiment to be able to detect.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_nplan">nPlan</code></td>
<td>
<p>vector of max length 2 representing the planned sample sizes.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_h0">h0</code></td>
<td>
<p>a number indicating the hypothesised true value of the mean under the null. For the moment h0=0.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_highn">highN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default highN is set 1e6.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_lowparam">lowParam</code></td>
<td>
<p>numeric defining the smallest delta of the search space for the test-defining deltaS
for scenario 3. Currently not yet in use.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_highparam">highParam</code></td>
<td>
<p>numeric defining the largest delta of the search space for the test-defining deltaS
for scenario 3. Currently not yet in use.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
<tr><td><code id="designSafeT_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods, but mainly to perform do.calls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'safeDesign'. An object of class 'safeDesign' is a list containing at least the
following components:
</p>

<dl>
<dt>nPlan</dt><dd><p>the planned sample size(s).</p>
</dd>
<dt>parameter</dt><dd><p>the safe test defining parameter. Here deltaS.</p>
</dd>
<dt>esMin</dt><dd><p>the minimal clinically relevant standardised effect size provided by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>paired</dt><dd><p>logical, <code>TRUE</code> if &quot;paired&quot;, <code>FALSE</code> otherwise.</p>
</dd>
<dt>h0</dt><dd><p>the specified hypothesised value of the mean or mean difference depending on
whether it was a one-sample or a two-sample test.</p>
</dd>
<dt>ratio</dt><dd><p>default is 1. Different from 1, whenever testType equals &quot;twoSample&quot;, then it defines
ratio between the planned randomisation of condition 2 over condition 1.</p>
</dd>
<dt>lowN</dt><dd><p>the smallest n of the search space for n provided by the user.</p>
</dd>
<dt>highN</dt><dd><p>the largest n of the search space for n provided by the user.</p>
</dd>
<dt>lowParam</dt><dd><p>the smallest delta of the search space for delta provided by the user.</p>
</dd>
<dt>highParam</dt><dd><p>the largest delta of the search space for delta provided by the user.</p>
</dd>
<dt>tol</dt><dd><p>the step size between lowParam and highParam provided by the user.</p>
</dd>
<dt>pilot</dt><dd><p><code>FALSE</code> (default) specified by the user to indicate that the design is not a pilot study.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>designObj &lt;- designSafeT(deltaMin=0.8, alpha=0.03, alternative="greater")
designObj

# "Scenario 1.a": Minimal clinically relevant standarised mean difference and tolerable type
# II error also known. Goal: find nPlan.
designObj &lt;- designSafeT(deltaMin=0.8, alpha=0.03, beta=0.4, nSim=10, alternative="greater")
designObj

# "Scenario 2": Minimal clinically relevant standarised mean difference and nPlan known.
# Goal: find the power, hence, the type II error of the procedure under optional stopping.

designObj &lt;- designSafeT(deltaMin=0.8, alpha=0.03, nPlan=16, nSim=10, alternative="greater")
designObj
</code></pre>

<hr>
<h2 id='designSafeTwoProportions'>Designs a Safe Experiment to Test Two Proportions in Stream Data</h2><span id='topic+designSafeTwoProportions'></span>

<h3>Description</h3>

<p>The design requires the number of observations one expects to collect in each group in each data block.
I.e., when one expects balanced data, one could choose <code>na = nb = 1</code> and would be allowed to analyse
the data stream each time a new observation in both groups has come in. The best results in terms of power
are achieved when the data blocks are chosen as small as possible, as this allows for analysing and updating
the safe test as often as possible, to fit the data best.
Further, the design requires two out of the following three parameters to be known:
</p>

<ul>
<li><p> the power one aims to achieve (<code>1 - beta</code>),
</p>
</li>
<li><p> the minimal relevant difference between the groups (<code>delta</code>)
</p>
</li>
<li><p> the number of blocks planned (<code>nBlocksPlan</code>),
</p>
</li></ul>

<p>where the unknown out of the three will be estimated. In the case of an exploratory &quot;pilot&quot; analysis,
one can also only provide the number of blocks planned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designSafeTwoProportions(
  na,
  nb,
  nBlocksPlan = NULL,
  beta = NULL,
  delta = NULL,
  alternativeRestriction = c("none", "difference", "logOddsRatio"),
  alpha = 0.05,
  pilot = "FALSE",
  hyperParameterValues = NULL,
  previousSafeTestResult = NULL,
  M = 1000,
  simThetaAMin = NULL,
  simThetaAMax = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designSafeTwoProportions_+3A_na">na</code></td>
<td>
<p>number of observations in group a per data block</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_nb">nb</code></td>
<td>
<p>number of observations in group b per data block</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_nblocksplan">nBlocksPlan</code></td>
<td>
<p>planned number of data blocks collected</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;nBlocksPlan&quot;
and &quot;delta&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_delta">delta</code></td>
<td>
<p>a priori minimal relevant divergence between group means b and a, either a numeric between -1 and 1 for
no alternative restriction or a restriction on difference, or a real for a restriction on the log odds ratio.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_alternativerestriction">alternativeRestriction</code></td>
<td>
<p>a character string specifying an optional restriction on the alternative hypothesis; must be one of &quot;none&quot; (default),
&quot;difference&quot; (difference group mean b minus group b) or &quot;logOddsRatio&quot; (the log odds ratio between group means b and a).</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_pilot">pilot</code></td>
<td>
<p>logical, specifying whether it's a pilot design.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_hyperparametervalues">hyperParameterValues</code></td>
<td>
<p>named list containing numeric values for hyperparameters betaA1, betaA2, betaB1 and betaB2, with betaA1 and betaB1 specifying the parameter
equivalent to <code>shape1</code> in <code>stats::dbeta</code> for groups A and B, respectively, and betaA2 and betaB2 equivalent to <code>shape2</code>. By default
chosen to optimize evidence collected over subsequent experiments (REGRET). Pass in the following format:
<code>list(betaA1 = numeric1, betaA2 = numeric2, betaB1 = numeric3, betaB2 = numeric4)</code>.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_previoussafetestresult">previousSafeTestResult</code></td>
<td>
<p>optionally, a previous safe test result can be provided. The posterior
of the hyperparameters of this test is then used for the hyperparameter settings. Default NULL.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_m">M</code></td>
<td>
<p>number of simulations used to estimate power or nBlocksPlan. Default <code>1000</code>.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_simthetaamin">simThetaAMin</code></td>
<td>
<p>minimal event rate in control group to simulate nPlan or power for.
Can be specified when specifically interested in planning studies for specific event rates.
Default <code>NULL</code>, then the entire parameter space (possibly restricted by delta) is used for simulation.</p>
</td></tr>
<tr><td><code id="designSafeTwoProportions_+3A_simthetaamax">simThetaAMax</code></td>
<td>
<p>maximal event rate in control group to simulate nPlan or power for. Default <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a 'safeDesign' object that includes:
</p>

<dl>
<dt>nPlan</dt><dd><p>the sample size(s) to plan for. Computed based on beta and meanDiffMin, or provided by the user
if known.</p>
</dd>
<dt>parameter</dt><dd><p>the safe test defining parameter: here the hyperparameters.</p>
</dd>
<dt>esMin</dt><dd><p>the minimally clinically relevant effect size provided by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error specified by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; based on the <code>alternativeRestriction</code> provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>here 2x2</p>
</dd>
<dt>pilot</dt><dd><p>logical, specifying whether it's a pilot design.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#plan for an experiment to detect minimal difference of 0.6 with a balanced design
set.seed(3152021)
designSafeTwoProportions(na = 1,
                         nb = 1,
                         alpha = 0.1,
                         beta = 0.20,
                         delta = 0.6,
                         alternativeRestriction = "none",
                         M = 75)

#safe analysis of a pilot: number of samples already known
designSafeTwoProportions(na = 1,
                          nb = 1,
                          nBlocksPlan = 20,
                          pilot = TRUE)

#specify own hyperparameters
hyperParameterValues &lt;- list(betaA1 = 10, betaA2 = 1, betaB1 = 1, betaB2 = 10)
designSafeTwoProportions(na = 1,
                         nb = 1,
                         alpha = 0.1,
                         beta = 0.20,
                         delta = 0.6,
                         hyperParameterValues = hyperParameterValues,
                         alternativeRestriction = "none",
                         M = 75)

#restrict range of proportions for estimating nPlan in the control group
designSafeTwoProportions(na = 1,
                         nb = 1,
                         beta = 0.20,
                         delta = 0.3,
                         alternativeRestriction = "none",
                         M = 75,
                         simThetaAMin = 0.1, simThetaAMax = 0.2)

</code></pre>

<hr>
<h2 id='designSafeZ'>Designs a Safe Z Experiment</h2><span id='topic+designSafeZ'></span>

<h3>Description</h3>

<p>A designed experiment requires (1) a sample size nPlan to plan for, and (2) the parameter of the safe test, i.e.,
phiS. Provided with a clinically relevant minimal mean difference meanDiffMin, this function outputs
phiS = meanDiffMin as the safe test defining parameter in accordance to the GROW criterion.
If a tolerable type II error, i.e., beta, is provided then nPlan can be sampled. The sampled nPlan is then
the smallest nPlan for which meanDiffMin can be found with power at least 1 - beta under optional stopping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>designSafeZ(
  meanDiffMin = NULL,
  beta = NULL,
  nPlan = NULL,
  alpha = 0.05,
  h0 = 0,
  alternative = c("twoSided", "greater", "less"),
  sigma = 1,
  kappa = sigma,
  tol = 1e-05,
  testType = c("oneSample", "paired", "twoSample"),
  ratio = 1,
  parameter = NULL,
  nSim = 1000L,
  nBoot = 1000L,
  pb = TRUE,
  grow = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="designSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both &quot;n&quot;
and &quot;phiS&quot;. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_nplan">nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_h0">h0</code></td>
<td>
<p>numeric, represents the null hypothesis, default h0=0.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_tol">tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_grow">grow</code></td>
<td>
<p>logical, default set to <code>TRUE</code> so the grow safe test is used in the design.</p>
</td></tr>
<tr><td><code id="designSafeZ_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a safeDesign object that includes:
</p>

<dl>
<dt>nPlan</dt><dd><p>the sample size(s) to plan for. Computed based on beta and meanDiffMin, or provided by the user
if known.</p>
</dd>
<dt>parameter</dt><dd><p>the safe test defining parameter. Here phiS.</p>
</dd>
<dt>esMin</dt><dd><p>the minimally clinically relevant effect size provided by the user.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error specified by the user.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; effectively provided by the user.</p>
</dd>
<dt>paired</dt><dd><p>logical, <code>TRUE</code> if &quot;paired&quot;, <code>FALSE</code> otherwise.</p>
</dd>
<dt>sigma</dt><dd><p>the assumed population standard deviation used for the test provided by the user.</p>
</dd>
<dt>kappa</dt><dd><p>the true population standard deviation, typically, sigma=kappa.</p>
</dd>
<dt>ratio</dt><dd><p>default is 1. Different from 1, whenever testType equals &quot;twoSample&quot;, then it defines
ratio between the planned randomisation of condition 2 over condition 1.</p>
</dd>
<dt>tol</dt><dd><p>the step size between parameter values in the candidate space.</p>
</dd>
<dt>pilot</dt><dd><p>logical, specifying whether it's a pilot design.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>References</h3>

<p>Grunwald, de Heide and Koolen (2019) &quot;Safe Testing&quot; &lt;arXiv:1906.07801&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designObj &lt;- designSafeZ(meanDiffMin=0.8, alpha=0.08, beta=0.01, alternative="greater")

#nPlan known:
designObj &lt;- designSafeZ(nPlan = 100, alpha=0.05)

</code></pre>

<hr>
<h2 id='extractNameFromArgs'>Helper function: Get all names as entered by the user</h2><span id='topic+extractNameFromArgs'></span>

<h3>Description</h3>

<p>Helper function: Get all names as entered by the user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractNameFromArgs(list, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractNameFromArgs_+3A_list">list</code></td>
<td>
<p>list from which the element needs retrieving</p>
</td></tr>
<tr><td><code id="extractNameFromArgs_+3A_name">name</code></td>
<td>
<p>character string, name of the item that need retrieving</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a character string
</p>

<hr>
<h2 id='generateNormalData'>Generates Normally Distributed Data Depending on the Design</h2><span id='topic+generateNormalData'></span>

<h3>Description</h3>

<p>The designs supported are &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateNormalData(
  nPlan,
  nSim = 1000L,
  deltaTrue = NULL,
  muGlobal = 0,
  sigmaTrue = 1,
  paired = FALSE,
  seed = NULL,
  muTrue = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateNormalData_+3A_nplan">nPlan</code></td>
<td>
<p>vector of max length 2 representing the planned sample sizes.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_nsim">nSim</code></td>
<td>
<p>the number of replications, that is, experiments with max samples nPlan.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, the value of the true standardised effect size (test-relevant parameter).</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_muglobal">muGlobal</code></td>
<td>
<p>numeric, the true global mean of a paired or two-sample t-test. Its value should not
matter for the test. This parameter is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_sigmatrue">sigmaTrue</code></td>
<td>
<p>numeric &gt; 0,the true standard deviation of the data. Its value should not  matter
for the test.This parameter treated is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_paired">paired</code></td>
<td>
<p>logical, if <code>TRUE</code> then paired t-test.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_seed">seed</code></td>
<td>
<p>To set the seed for the simulated data.</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_mutrue">muTrue</code></td>
<td>
<p>numeric representing the true mean for simulations with a z-test.
Default <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of two data matrices contains at least the following components:
</p>

<dl>
<dt>dataGroup1</dt><dd><p>a matrix of data dimension nSim by <code>nPlan[1]</code>.</p>
</dd>
<dt>dataGroup2</dt><dd><p>a matrix of data dimension nSim by <code>nPlan[2]</code>.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>generateNormalData(20, 15, deltaTrue=0.3)
</code></pre>

<hr>
<h2 id='generateSurvData'>Generate Survival Data which Can Be Analysed With the 'survival' Package</h2><span id='topic+generateSurvData'></span>

<h3>Description</h3>

<p>Generate Survival Data which Can Be Analysed With the 'survival' Package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateSurvData(
  nP,
  nT,
  alpha = 1,
  lambdaP,
  lambdaT,
  seed = NULL,
  nDigits = 0,
  startTime = 1,
  endTime = 180,
  orderTime = TRUE,
  competeRatio = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateSurvData_+3A_np">nP</code></td>
<td>
<p>integer &gt; 0 representing the number of of patients in the placebo group.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_nt">nT</code></td>
<td>
<p>integer &gt; 0 representing the number of of patients in the treatment group.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_alpha">alpha</code></td>
<td>
<p>numeric &gt; 0, representing the shape parameter of the Weibull distribution.
If alpha=1, then data are generated from the exponential, i.e., constant hazard. For alpha &gt; 1
the hazard increases, if alpha &lt; 1, the hazard decreases.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_lambdap">lambdaP</code></td>
<td>
<p>The (relative) hazard of the placebo group.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_lambdat">lambdaT</code></td>
<td>
<p>The (relative) hazard of the treatment group.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_seed">seed</code></td>
<td>
<p>A seed number.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_ndigits">nDigits</code></td>
<td>
<p>numeric, the number of digits to round of the random time to</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_starttime">startTime</code></td>
<td>
<p>numeric, adds this to the random times. Default 1, so the startTime is not 0, which
is the start time of <code><a href="stats.html#topic+rweibull">rweibull</a></code>.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_endtime">endTime</code></td>
<td>
<p>The endtime of the experiment.</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_ordertime">orderTime</code></td>
<td>
<p>logical, if <code>TRUE</code> then put the data set in increasing order</p>
</td></tr>
<tr><td><code id="generateSurvData_+3A_competeratio">competeRatio</code></td>
<td>
<p>The ratio of the data that is due to competing risk.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data set with time, status and group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>generateSurvData(800, 800, alpha=1, lambdaP=0.008, lambdaT=0.008/2)
</code></pre>

<hr>
<h2 id='getArgs'>Helper function: Get all arguments as entered by the user</h2><span id='topic+getArgs'></span>

<h3>Description</h3>

<p>Helper function: Get all arguments as entered by the user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getArgs()
</code></pre>


<h3>Value</h3>

<p>a list of variable names of class &quot;call&quot; that can be changed into names
</p>

<hr>
<h2 id='getNameAlternative'>Gets the Label of the Alternative Hypothesis</h2><span id='topic+getNameAlternative'></span>

<h3>Description</h3>

<p>Helper function that outputs the alternative hypothesis of the analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getNameAlternative(
  alternative = c("twoSided", "greater", "less"),
  testType,
  h0 = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getNameAlternative_+3A_alternative">alternative</code></td>
<td>
<p>A character string. &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="getNameAlternative_+3A_testtype">testType</code></td>
<td>
<p>A character string either &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;, &quot;gLogrank&quot;, or &quot;eLogrank&quot;.</p>
</td></tr>
<tr><td><code id="getNameAlternative_+3A_h0">h0</code></td>
<td>
<p>the value of the null hypothesis</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character string with the name of the analysis.
</p>

<hr>
<h2 id='getNameTestType'>Gets the Label of the Test</h2><span id='topic+getNameTestType'></span>

<h3>Description</h3>

<p>Helper function that outputs the name of the analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getNameTestType(testType, parameterName)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getNameTestType_+3A_testtype">testType</code></td>
<td>
<p>A character string. For the t-tests: &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="getNameTestType_+3A_parametername">parameterName</code></td>
<td>
<p>The name of the parameter to identify test performed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character string with the name of the analysis.
</p>

<hr>
<h2 id='isTryError'>Checks Whether a Vector of Object Inherits from the Class 'try-error'</h2><span id='topic+isTryError'></span>

<h3>Description</h3>

<p>Checks whether any of the provided objects contains a try error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isTryError(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isTryError_+3A_...">...</code></td>
<td>
<p>objects that need testing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if there's some object that's a try-error, <code>FALSE</code> when all objects are
not try-errors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 1
y &lt;- "a"
z &lt;- try(integrate(exp, -Inf, Inf))
isTryError(x, y)
isTryError(x, y, z)
</code></pre>

<hr>
<h2 id='logrankSingleEExact'>Helper function computes single component of the exact logrank e-value</h2><span id='topic+logrankSingleEExact'></span>

<h3>Description</h3>

<p>Helper function computes single component of the exact logrank e-value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logrankSingleEExact(obs0, obs1, y0, y1, thetaS, theta0 = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logrankSingleEExact_+3A_obs0">obs0</code></td>
<td>
<p>integer, number of observations in the control group.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_obs1">obs1</code></td>
<td>
<p>integer, number of observations in the treatment group.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_y0">y0</code></td>
<td>
<p>integer, total number of participants in the control group.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_y1">y1</code></td>
<td>
<p>integer, total number of participants in the treatment group.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_thetas">thetaS</code></td>
<td>
<p>numeric &gt; 0 represents the safe test defining (GROW) alternative
hypothesis obtained from <code>designSafeLogrank()</code>.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_theta0">theta0</code></td>
<td>
<p>numeric &gt; 0 represents the null hypothesis. Default theta0=1.</p>
</td></tr>
<tr><td><code id="logrankSingleEExact_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing at least the following components:
</p>

<dl>
<dt>logP0</dt><dd><p>Log likelihood of Fisher's hypergeometric at the null</p>
</dd>
<dt>logEValueLess</dt><dd><p>Log likelihood of Fisher's hypergeometric at the alternative</p>
</dd>
<dt>logEValueGreater</dt><dd><p>Log likelihood of Fisher's hypergeometric at 1/alternative</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#'
y0Vector &lt;- c(5, 4, 3, 3, 2, 1)
y1Vector &lt;- c(5, 5, 4, 2, 2, 0)
obs0Vector &lt;- c(1, 1, 0, 1, 0, 1)
obs1Vector &lt;- c(0, 0, 1, 0, 1, 0)

logEValueGreater &lt;- logEValueLess &lt;- vector("numeric", length(y0Vector))

for (i in seq_along(y0Vector)) {
  tempResult &lt;- logrankSingleEExact(obs0=obs0Vector[i], obs1=obs1Vector[i],
                                    y0=y0Vector[i], y1=y1Vector[i],
                                    thetaS=0.7, theta0=1)
  logEValueLess[i] &lt;- tempResult[["logEValueLess"]]
  logEValueGreater[i] &lt;- tempResult[["logEValueGreater"]]
}

eValueLess &lt;- exp(sum(logEValueLess))
eValueLess #1.116161
eValueGreater &lt;- exp(sum(logEValueGreater))
eValueGreater # 0.7665818
eValue &lt;- 1/2*eValueLess + 1/2*eValueGreater
eValue # 0.9413714

</code></pre>

<hr>
<h2 id='logrankSingleZ'>Helper function computes single component of the logrank statistic</h2><span id='topic+logrankSingleZ'></span>

<h3>Description</h3>

<p>Helper function computes single component of the logrank statistic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logrankSingleZ(obs0, obs1, y0, y1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logrankSingleZ_+3A_obs0">obs0</code></td>
<td>
<p>integer, number of observations in the control group</p>
</td></tr>
<tr><td><code id="logrankSingleZ_+3A_obs1">obs1</code></td>
<td>
<p>integer, number of observations in the treatment group</p>
</td></tr>
<tr><td><code id="logrankSingleZ_+3A_y0">y0</code></td>
<td>
<p>integer, total number of participants in the control group</p>
</td></tr>
<tr><td><code id="logrankSingleZ_+3A_y1">y1</code></td>
<td>
<p>integer, total number of participants in the treatment group</p>
</td></tr>
<tr><td><code id="logrankSingleZ_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing at least the following components:
</p>

<dl>
<dt>oMinE</dt><dd><p>observed minus expected.</p>
</dd>
<dt>v</dt><dd><p>hypergeometric variance.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>y0Vector &lt;- c(6, 4, 4, 1, 0)
y1Vector &lt;- c(6, 6, 5, 2, 2)
obs0Vector &lt;- c(1, 0, 2, 1, 0)
obs1Vector &lt;- c(0, 1, 1, 0, 1)

varVector &lt;- oMinEVector &lt;-y0Vector

for (i in seq_along(y0Vector)) {
  tempResult &lt;- logrankSingleZ(obs0=obs0Vector[i], obs1=obs1Vector[i],
                              y0=y0Vector[i], y1=y1Vector[i])
  oMinEVector[i] &lt;- tempResult[["oMinE"]]
  varVector[i] &lt;- tempResult[["v"]]
}

sum(oMinEVector)/sqrt(sum(varVector))

</code></pre>

<hr>
<h2 id='plot.safe2x2Sim'>Plots Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions</h2><span id='topic+plot.safe2x2Sim'></span>

<h3>Description</h3>

<p>Plots Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safe2x2Sim'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.safe2x2Sim_+3A_x">x</code></td>
<td>
<p>a result object obtained through <code><a href="#topic+simulateTwoProportions">simulateTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="plot.safe2x2Sim_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plot data, mainly called for side effects, the plot of simulation results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>priorList1 &lt;- list(betaA1 = 10, betaA2 = 1, betaB1 = 1, betaB2 = 10)
priorList2 &lt;- list(betaA1 = 0.18, betaA2 = 0.18, betaB1 = 0.18, betaB2 = 0.18)
priorList3 &lt;- list(betaA1 = 1, betaA2 = 1, betaB1 = 1, betaB2 = 1)

simResult &lt;- simulateTwoProportions(
  hyperparameterList = list(priorList1, priorList2, priorList3),
  alternativeRestriction = "none",
  alpha = 0.1, beta = 0.2, na = 1, nb = 1,
  deltamax = -0.4, deltamin = -0.9, deltaGridSize = 3,
  M = 10
  )

plot(simResult)

</code></pre>

<hr>
<h2 id='plot.safeTSim'>Plots a 'safeTSim' Object</h2><span id='topic+plot.safeTSim'></span>

<h3>Description</h3>

<p>Plots a 'safeTSim' Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safeTSim'
plot(x, y = NULL, showOnlyNRejected = FALSE, nBin = 25, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.safeTSim_+3A_x">x</code></td>
<td>
<p>a 'safeDesign' object acquired from <code><a href="#topic+designSafeT">designSafeT</a>()</code>.</p>
</td></tr>
<tr><td><code id="plot.safeTSim_+3A_y">y</code></td>
<td>
<p><code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot.safeTSim_+3A_showonlynrejected">showOnlyNRejected</code></td>
<td>
<p>logical, when <code>TRUE</code> discards the cases that did not reject.</p>
</td></tr>
<tr><td><code id="plot.safeTSim_+3A_nbin">nBin</code></td>
<td>
<p>numeric &gt; 0, the minimum number of bins in the histogram.</p>
</td></tr>
<tr><td><code id="plot.safeTSim_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a histogram object, and called for its side-effect to plot the histogram.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Design safe test
alpha &lt;- 0.05
beta &lt;- 0.20
designObj &lt;- designSafeT(1, alpha=alpha, beta=beta)

# Design frequentist test
freqObj &lt;- designFreqT(1, alpha=alpha, beta=beta)

# Simulate under the alternative with deltaTrue=deltaMin
simResults &lt;- simulate(designObj, nSim=100)

plot(simResults)

plot(simResults, showOnlyNRejected=TRUE)
</code></pre>

<hr>
<h2 id='plotConfidenceSequenceTwoProportions'>Plot bounds of a safe confidence sequence of the difference or log odds ratio for two proportions
against the number of data blocks in two data streams ya and yb.</h2><span id='topic+plotConfidenceSequenceTwoProportions'></span>

<h3>Description</h3>

<p>Plot bounds of a safe confidence sequence of the difference or log odds ratio for two proportions
against the number of data blocks in two data streams ya and yb.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotConfidenceSequenceTwoProportions(
  ya,
  yb,
  safeDesign,
  differenceMeasure = c("difference", "odds"),
  precision = 100,
  deltaStart = 0.001,
  deltaStop = 3,
  trueDifference = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_ya">ya</code></td>
<td>
<p>positive observations/ events per data block in group a: a numeric with integer values
between (and including) 0 and <code>na</code>, the number of observations in group a per block.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_yb">yb</code></td>
<td>
<p>positive observations/ events per data block in group b: a numeric with integer values
between (and including) 0 and <code>nb</code>, the number of observations in group b per block.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_safedesign">safeDesign</code></td>
<td>
<p>a safe test design for two proportions retrieved through <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_differencemeasure">differenceMeasure</code></td>
<td>
<p>the difference measure to construct the confidence interval for:
one of &quot;difference&quot; and &quot;odds&quot;.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_precision">precision</code></td>
<td>
<p>precision of the grid to search over for the confidence sequence bounds.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_deltastart">deltaStart</code></td>
<td>
<p>for the odds difference measure: the (absolute value of the) smallest
log odds ratio to assess for in- or exclusion in the confidence sequence. Default 0.001.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_deltastop">deltaStop</code></td>
<td>
<p>for the odds difference measure: the (absolute value of the) highest
log odds ratio to assess for in- or exclusion in the confidence sequence. Default 3.</p>
</td></tr>
<tr><td><code id="plotConfidenceSequenceTwoProportions_+3A_truedifference">trueDifference</code></td>
<td>
<p>true difference or log odds ratio in groups A and B: added to the plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value; called for its side effects, a plot of the confidence sequence.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(39413)
ya &lt;- rbinom(n = 30, size = 1, prob = 0.1)
yb &lt;- rbinom(n = 30, size = 1, prob = 0.8)
balancedSafeDesign &lt;- designSafeTwoProportions(na = 1,
                                               nb = 1,
                                               nBlocksPlan = 30)
plotConfidenceSequenceTwoProportions(ya = ya,
                                     yb = yb,
                                     safeDesign = balancedSafeDesign,
                                     differenceMeasure = "difference",
                                     precision = 15,
                                     trueDifference = 0.7)

#log odds ratio difference measure
plotConfidenceSequenceTwoProportions(ya = ya,
                                     yb = yb,
                                     safeDesign = balancedSafeDesign,
                                     differenceMeasure = "odds",
                                     precision = 15,
                                     deltaStop = 5,
                                     trueDifference = log(36))

#switch ya and yb: observe negative log odds ratio in the data, plot mirrored in x-axis
plotConfidenceSequenceTwoProportions(ya = yb,
                                     yb = ya,
                                     safeDesign = balancedSafeDesign,
                                     differenceMeasure = "odds",
                                     precision = 15,
                                     deltaStop = 5,
                                     trueDifference = -log(36))

</code></pre>

<hr>
<h2 id='plotHistogramDistributionStoppingTimes'>Plots the Histogram of Stopping Times</h2><span id='topic+plotHistogramDistributionStoppingTimes'></span>

<h3>Description</h3>

<p>Helper function to display the histogram of stopping times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotHistogramDistributionStoppingTimes(
  safeSim,
  nPlan,
  deltaTrue,
  showOnlyNRejected = FALSE,
  nBin = 25L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_safesim">safeSim</code></td>
<td>
<p>A safeSim object, returned from <code><a href="#topic+replicateTTests">replicateTTests</a></code>.</p>
</td></tr>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_nplan">nPlan</code></td>
<td>
<p>numeric &gt; 0, the planned sample size(s).</p>
</td></tr>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, that represents the true underlying standardised effect size delta.</p>
</td></tr>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_showonlynrejected">showOnlyNRejected</code></td>
<td>
<p>logical, when <code>TRUE</code> discards the cases that did not reject.</p>
</td></tr>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_nbin">nBin</code></td>
<td>
<p>numeric &gt; 0, the minimum number of bins in the histogram.</p>
</td></tr>
<tr><td><code id="plotHistogramDistributionStoppingTimes_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a histogram object, and called for its side-effect to plot the histogram.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Design safe test
alpha &lt;- 0.05
beta &lt;- 0.20
designObj &lt;- designSafeT(1, alpha=alpha, beta=beta)

# Design frequentist test
freqObj &lt;- designFreqT(1, alpha=alpha, beta=beta)

# Simulate under the alternative with deltaTrue=deltaMin
simResults &lt;- replicateTTests(nPlan=designObj$nPlan, deltaTrue=1, parameter=designObj$parameter,
nPlanFreq=freqObj$nPlan)

plotHistogramDistributionStoppingTimes(
  simResults$safeSim, nPlan = simResults$nPlan,
  deltaTrue = simResults$deltaTrue)
</code></pre>

<hr>
<h2 id='plotSafeTDesignSampleSizeProfile'>Plots the Sample Sizes Necessary for a Tolerable Alpha and Beta as a Function of deltaMin</h2><span id='topic+plotSafeTDesignSampleSizeProfile'></span>

<h3>Description</h3>

<p>For given tolerable alpha and beta, (1) the planned sample sizes to using a safe test, (2) the
frequentist test, and (3) the average sample size necessary due to optional stopping are plotted
as a  function of the minimal clinically relevant standardised effect size deltaMin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSafeTDesignSampleSizeProfile(
  alpha = 0.05,
  beta = 0.2,
  nMax = 100,
  lowDeltaMin = 0.1,
  highDeltaMin = 1,
  stepDeltaMin = 0.1,
  testType = c("oneSample", "paired", "twoSample"),
  alternative = c("twoSided", "greater", "less"),
  ratio = 1,
  nSim = 1000L,
  nBoot = 1000L,
  seed = NULL,
  pb = TRUE,
  freqPlot = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_nmax">nMax</code></td>
<td>
<p>numeric, the maximum number of samples one has budget for to collect data.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_lowdeltamin">lowDeltaMin</code></td>
<td>
<p>numeric, lowest value for deltaMin of interest</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_highdeltamin">highDeltaMin</code></td>
<td>
<p>numeric, largest value for deltaMin of interest</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_stepdeltamin">stepDeltaMin</code></td>
<td>
<p>numeric, step size between lowDeltaMin and highDeltaMin</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_nboot">nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_freqplot">freqPlot</code></td>
<td>
<p>logical, if <code>TRUE</code> plot frequentist sample size profiles.</p>
</td></tr>
<tr><td><code id="plotSafeTDesignSampleSizeProfile_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods, but mainly to perform do.calls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list that contains the planned sample size needed for the frequentist and safe tests as a function
of the minimal clinically relevant effect sizes. The returned list contains at least the following components:
</p>

<dl>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>maxN</dt><dd><p>the largest number of samples provided by the user.</p>
</dd>
<dt>deltaDomain</dt><dd><p>vector of the domain of deltaMin.</p>
</dd>
<dt>allN1PlanFreq</dt><dd><p>vector of the planned sample sizes needed for the frequentist test corresponding to
alpha and beta.</p>
</dd>
<dt>allN1PlanSafe</dt><dd><p>vector of the planned sample sizes needed for the safe test corresponding to alpha
and beta.</p>
</dd>
<dt>allDeltaS</dt><dd><p>vector of safe test defining deltaS.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>plotSafeTDesignSampleSizeProfile(nSim=1e2L)
</code></pre>

<hr>
<h2 id='print.safe2x2Sim'>Prints Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions</h2><span id='topic+print.safe2x2Sim'></span>

<h3>Description</h3>

<p>Prints Results of Simulations for Comparing Hyperparameters for Safe Tests of Two Proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safe2x2Sim'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.safe2x2Sim_+3A_x">x</code></td>
<td>
<p>a result object obtained through <code><a href="#topic+simulateTwoProportions">simulateTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="print.safe2x2Sim_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The data frame with simulation results, called for side effects to pretty print the simulation results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>priorList1 &lt;- list(betaA1 = 10, betaA2 = 1, betaB1 = 1, betaB2 = 10)
priorList2 &lt;- list(betaA1 = 0.18, betaA2 = 0.18, betaB1 = 0.18, betaB2 = 0.18)
priorList3 &lt;- list(betaA1 = 1, betaA2 = 1, betaB1 = 1, betaB2 = 1)

simResult &lt;- simulateTwoProportions(
  hyperparameterList = list(priorList1, priorList2, priorList3),
  alternativeRestriction = "none",
  alpha = 0.1, beta = 0.2, na = 1, nb = 1,
  deltamax = -0.4, deltamin = -0.9, deltaGridSize = 3,
  M = 10
  )
</code></pre>

<hr>
<h2 id='print.safeDesign'>Print Method for Safe Tests</h2><span id='topic+print.safeDesign'></span>

<h3>Description</h3>

<p>Printing objects of class 'safeTest' modelled after <code><a href="stats.html#topic+print.power.htest">print.power.htest</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safeDesign'
print(x, digits = getOption("digits"), prefix = "\t", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.safeDesign_+3A_x">x</code></td>
<td>
<p>a safeTest object.</p>
</td></tr>
<tr><td><code id="print.safeDesign_+3A_digits">digits</code></td>
<td>
<p>number of significant digits to be used.</p>
</td></tr>
<tr><td><code id="print.safeDesign_+3A_prefix">prefix</code></td>
<td>
<p>string, passed to strwrap for displaying the method components.</p>
</td></tr>
<tr><td><code id="print.safeDesign_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No returned value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designSafeZ(meanDiffMin=0.5)
designSafeT(deltaMin=0.5)
designSafeLogrank(hrMin=0.7)
</code></pre>

<hr>
<h2 id='print.safeTest'>Print Method for Safe Tests</h2><span id='topic+print.safeTest'></span>

<h3>Description</h3>

<p>Printing objects of class 'safeTest' modelled after <code><a href="stats.html#topic+print.htest">print.htest</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safeTest'
print(x, digits = getOption("digits"), prefix = "\t", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.safeTest_+3A_x">x</code></td>
<td>
<p>a safeTest object.</p>
</td></tr>
<tr><td><code id="print.safeTest_+3A_digits">digits</code></td>
<td>
<p>number of significant digits to be used.</p>
</td></tr>
<tr><td><code id="print.safeTest_+3A_prefix">prefix</code></td>
<td>
<p>string, passed to strwrap for displaying the method components.</p>
</td></tr>
<tr><td><code id="print.safeTest_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No returned value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeTTest(rnorm(19), pilot=TRUE)
safeZTest(rnorm(19), pilot=TRUE)
</code></pre>

<hr>
<h2 id='print.safeTSim'>Prints a safeTSim Object</h2><span id='topic+print.safeTSim'></span>

<h3>Description</h3>

<p>Prints a safeTSim Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safeTSim'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.safeTSim_+3A_x">x</code></td>
<td>
<p>a 'safeTSim' object.</p>
</td></tr>
<tr><td><code id="print.safeTSim_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No returned value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designObj &lt;- designSafeT(1, beta=0.2, nSim=10)

# Data under deltaTrue=deltaMin
simObj &lt;- simulate(designObj, nSim=10)
print(simObj)
</code></pre>

<hr>
<h2 id='replicateTTests'>Simulate Early Stopping Experiments</h2><span id='topic+replicateTTests'></span>

<h3>Description</h3>

<p>Simulate multiple data sets to show the effects of optional testing for safe (and frequentist) tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replicateTTests(
  nPlan,
  deltaTrue,
  muGlobal = 0,
  sigmaTrue = 1,
  paired = FALSE,
  alternative = c("twoSided", "greater", "less"),
  lowN = 3,
  nSim = 1000L,
  alpha = 0.05,
  beta = 0.2,
  safeOptioStop = TRUE,
  parameter = NULL,
  freqOptioStop = FALSE,
  nPlanFreq = NULL,
  logging = TRUE,
  seed = NULL,
  pb = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replicateTTests_+3A_nplan">nPlan</code></td>
<td>
<p>vector of max length 2 representing the planned sample sizes.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, the value of the true standardised effect size (test-relevant parameter).</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_muglobal">muGlobal</code></td>
<td>
<p>numeric, the true global mean of a paired or two-sample t-test. Its value should not
matter for the test. This parameter is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_sigmatrue">sigmaTrue</code></td>
<td>
<p>numeric &gt; 0,the true standard deviation of the data. Its value should not  matter
for the test.This parameter treated is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_paired">paired</code></td>
<td>
<p>logical, if <code>TRUE</code> then paired t-test.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_lown">lowN</code></td>
<td>
<p>integer that defines the smallest n of our search space for n.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_nsim">nSim</code></td>
<td>
<p>the number of replications, that is, experiments with max samples nPlan.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both
the sample sizes and deltaS, which defines the test. Note that 1-beta defines the power.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_safeoptiostop">safeOptioStop</code></td>
<td>
<p>logical, <code>TRUE</code> implies that optional stopping simulation is performed for
the safe test.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_parameter">parameter</code></td>
<td>
<p>numeric, the safe test defining parameter, i.e., deltaS (use designSafeT to find this).</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_freqoptiostop">freqOptioStop</code></td>
<td>
<p>logical, <code>TRUE</code> implies that optional stopping simulation is performed for
the frequentist test.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_nplanfreq">nPlanFreq</code></td>
<td>
<p>the frequentist sample size(s) to plan for. Acquired from <code><a href="#topic+designFreqT">designFreqT</a>()</code>.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_logging">logging</code></td>
<td>
<p>logical, if <code>TRUE</code>, then return the simulated data.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_seed">seed</code></td>
<td>
<p>To set the seed for the simulated data.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="replicateTTests_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;safeTSim&quot;. An object of class &quot;safeTSim&quot; is a list containing at
least the following components:
</p>

<dl>
<dt>nPlan</dt><dd><p>the planned sample size(s).</p>
</dd>
<dt>deltaTrue</dt><dd><p>the value of the true standardised effect size (test-relevant parameter) provided by
the user.</p>
</dd>
<dt>muGlobal</dt><dd><p>the true global mean of a paired or two-sample t-test (nuisance parameter) provided by
the user.</p>
</dd>
<dt>paired</dt><dd><p>if <code>TRUE</code> then paired t-test.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>lowN</dt><dd><p>the smallest number of samples (first group) at which monitoring of the tests begins.</p>
</dd>
<dt>nSim</dt><dd><p>the number of replications of the experiment.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>parameter</dt><dd><p>the parameter (point prior) used in the safe test derived from the design.
Acquired from <code><a href="#topic+designSafeT">designSafeT</a>()</code>.</p>
</dd>
<dt>nPlanFreq</dt><dd><p>the frequentist planned sample size(s). Acquired from <code><a href="#topic+designFreqT">designFreqT</a></code>()</p>
</dd>
<dt>safeSim</dt><dd><p>list with the simulation results of the safe test under optional stopping.</p>
</dd>
<dt>freqSim</dt><dd><p>list with the simulation results of the frequentist test under optional stopping.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
# Design safe test
alpha &lt;- 0.05
beta &lt;- 0.20
designObj &lt;- designSafeT(1, alpha=alpha, beta=beta)

# Design frequentist test
freqObj &lt;- designFreqT(1, alpha=alpha, beta=beta)

# Simulate under the alternative with deltaTrue=deltaMin
simResults &lt;- replicateTTests(nPlan=designObj$nPlan, deltaTrue=1, parameter=designObj$parameter,
                              nPlanFreq=freqObj$nPlan, beta=beta, nSim=250)

# Should be about 1-beta
simResults$safeSim$powerAtN1Plan

# This is higher due to optional stopping
simResults$safeSim$powerOptioStop

# Optional stopping allows us to do better than n1PlanFreq once in a while
simResults$safeSim$probLeqN1PlanFreq
graphics::hist(simResults$safeSim$allN, main="Histogram of stopping times", xlab="n1",
               breaks=seq.int(designObj$nPlan[1]))

# Simulate under the alternative with deltaTrue &gt; deltaMin
simResults &lt;- replicateTTests(nPlan=designObj$nPlan, deltaTrue=1.5, parameter=designObj$parameter,
                              nPlanFreq=freqObj$nPlan, beta=beta, nSim=250)

# Should be larger than 1-beta
simResults$safeSim$powerAtN1Plan

# This is even higher due to optional stopping
simResults$safeSim$powerOptioStop

# Optional stopping allows us to do better than n1PlanFreq once in a while
simResults$safeSim$probLeqN1PlanFreq
graphics::hist(simResults$safeSim$allN, main="Histogram of stopping times", xlab="n1",
               breaks=seq.int(designObj$nPlan[1]))

# Under the null deltaTrue=0
simResults &lt;- replicateTTests(nPlan=designObj$nPlan, deltaTrue=0, parameter=designObj$parameter,
                              nPlanFreq=freqObj$nPlan, freqOptioStop=TRUE, beta=beta, nSim=250)

# Should be lower than alpha, because if the null is true, P(S &gt; 1/alpha) &lt; alpha for all n
simResults$safeSim$powerAtN1Plan

# This is a bit higher due to optional stopping, but if the null is true,
# then still P(S &gt; 1/alpha) &lt; alpha for all n
simResults$safeSim$powerOptioStop

# Should be lowr than alpha, as the experiment is performed as was planned
simResults$freqSim$powerAtN1Plan

# This is larger than alpha, due to optional stopping.
simResults$freqSim$powerOptioStop
simResults$freqSim$powerOptioStop &gt; alpha
</code></pre>

<hr>
<h2 id='returnOne'>Auxiliary function for sampling of the logrank simulations to return the integer 1 event per time.</h2><span id='topic+returnOne'></span>

<h3>Description</h3>

<p>Auxiliary function for sampling of the logrank simulations to return the integer 1 event per time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>returnOne()
</code></pre>


<h3>Value</h3>

<p>1
</p>


<h3>Examples</h3>

<pre><code class='language-R'>returnOne()
</code></pre>

<hr>
<h2 id='rLogrank'>Randomly samples from a logrank distribution</h2><span id='topic+rLogrank'></span>

<h3>Description</h3>

<p>Draws a number of occurrences in group 1 (treatment) out of
obsTotal number of occurrences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rLogrank(n = 1, y0, y1, obsTotal, theta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rLogrank_+3A_n">n</code></td>
<td>
<p>integer, number of observations to be sampled.</p>
</td></tr>
<tr><td><code id="rLogrank_+3A_y0">y0</code></td>
<td>
<p>Size of the risk set of group 0 (Placebo).</p>
</td></tr>
<tr><td><code id="rLogrank_+3A_y1">y1</code></td>
<td>
<p>Size of the risk set of group 1 (Treatment).</p>
</td></tr>
<tr><td><code id="rLogrank_+3A_obstotal">obsTotal</code></td>
<td>
<p>Total number of observations.</p>
</td></tr>
<tr><td><code id="rLogrank_+3A_theta">theta</code></td>
<td>
<p>Odds of group 1 over group 0 (treatment over placebo).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer representing the number of occurrences in group 1 out of
obsTotal number of occurrences.
</p>


<h3>Author(s)</h3>

<p>Muriel Felipe Perez-Ortiz and Alexander Ly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rLogrank(y0=360, y1=89, obsTotal=12, theta=3.14)

</code></pre>

<hr>
<h2 id='safeLogrankTest'>Safe Logrank Test</h2><span id='topic+safeLogrankTest'></span><span id='topic+safeLogrankTestStat'></span>

<h3>Description</h3>

<p>A safe test to test whether there is a difference between two survival curves. This function
builds on the Mantel-Cox version of the logrank test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeLogrankTest(
  formula,
  designObj = NULL,
  ciValue = NULL,
  data = NULL,
  survTime = NULL,
  group = NULL,
  pilot = FALSE,
  exact = TRUE,
  computeZ = TRUE,
  ...
)

safeLogrankTestStat(
  z,
  nEvents,
  designObj,
  ciValue = NULL,
  dataNull = 1,
  sigma = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeLogrankTest_+3A_formula">formula</code></td>
<td>
<p>a formula expression as for other survival models, of the form Surv(time, status) ~ groupingVariable,
see <code><a href="survival.html#topic+Surv">Surv</a></code> for more details.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_designobj">designObj</code></td>
<td>
<p>a safe logrank design obtained from <code><a href="#topic+designSafeLogrank">designSafeLogrank</a></code>.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_civalue">ciValue</code></td>
<td>
<p>numeric, represents the ciValue-level of the confidence sequence. Default ciValue=NULL, and
ciValue = 1 - alpha, where alpha is taken from the design object.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_data">data</code></td>
<td>
<p>an optional data frame in which to interpret the variables occurring in survTime and group.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_survtime">survTime</code></td>
<td>
<p>an optional survival time object of class 'Surv' created with <code><a href="survival.html#topic+Surv">Surv</a></code>, or
a name of a column in the data set of class 'Surv'. Does not need specifying if a formula is provided, therefore
set to <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_group">group</code></td>
<td>
<p>an optional factor, a grouping variable. Currently, only two levels allowed. Does not need specifying
if a formula is provided, therefore set to <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_pilot">pilot</code></td>
<td>
<p>a logical indicating whether a pilot study is run. If <code>TRUE</code>, it is assumed that the number of
samples is exactly as planned. The default null h0=1 is used, alpha=0.05, and alternative=&quot;twoSided&quot; is used.
To change these default values, please use <code><a href="#topic+designSafeLogrank">designSafeLogrank</a></code>.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_exact">exact</code></td>
<td>
<p>a logical indicating whether the exact safe logrank test needs to be performed based on
the hypergeometric likelihood. Default is <code>TRUE</code>, if <code>FALSE</code> then the safe z-test (for Gaussian data)
applied to the logrank z-statistic is used instead.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_computez">computeZ</code></td>
<td>
<p>logical. If <code>TRUE</code> computes the logrank z-statistic.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_z">z</code></td>
<td>
<p>numeric representing the observed logrank z statistic.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_nevents">nEvents</code></td>
<td>
<p>numeric &gt; 0, observed number of events.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_datanull">dataNull</code></td>
<td>
<p>numeric &gt; 0, the null hypothesis corresponding to the z statistics.
By default dataNull = 1 representing equality of the hazard ratio.</p>
</td></tr>
<tr><td><code id="safeLogrankTest_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0, scaling in the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'safeTest'. An object of class 'safeTest' is a list containing at least the
following components:
</p>

<dl>
<dt>statistic</dt><dd><p>the value of the summary, i.e., z-statistic or the e-value.</p>
</dd>
<dt>nEvents</dt><dd><p>The number of observed events.</p>
</dd>
<dt>eValue</dt><dd><p>the e-value of the safe test.</p>
</dd>
<dt>confSeq</dt><dd><p>An anytime-valid confidence sequence.</p>
</dd>
<dt>estimate</dt><dd><p>To be implemented: An estimate of the hazard ratio.</p>
</dd>
<dt>testType</dt><dd><p>&quot;logrank&quot;.</p>
</dd>
<dt>dataName</dt><dd><p>a character string giving the name(s) of the data.</p>
</dd>
<dt>designObj</dt><dd><p>an object of class &quot;safeDesign&quot; obtained from <code><a href="#topic+designSafeLogrank">designSafeLogrank</a></code>.</p>
</dd>
<dt>sumStats</dt><dd><p>a list containing.the time of events, the progression of the risk sets and events.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Functions</h3>


<ul>
<li> <p><code>safeLogrankTestStat()</code>: Safe Logrank Test based on Summary Statistic Z
All provided data (i.e., z-scores) are assumed to be centred on a hazard ratio = 1, thus, log(hr) = 0 ,
and the proper (e.g., hypergeometric) scaling is applied to the data, so sigma = 1. The null hypothesis
in the design object pertains to the population and is allowed to differ from log(theta) = 0.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Example taken from survival::survdiff

designObj &lt;- designSafeLogrank(hrMin=1/2)

ovData &lt;- survival::ovarian
ovData$survTime &lt;- survival::Surv(ovData$futime, ovData$fustat)

safeLogrankTest(formula=survTime~ rx, data=ovData, designObj=designObj)

safeLogrankTest(survTime=survTime, group=rx, data=ovData, designObj=designObj)

# Examples taken from coin::logrank_test
## Example data (Callaert, 2003, Tab. 1)
#'
callaert &lt;- data.frame(
  time = c(1, 1, 5, 6, 6, 6, 6, 2, 2, 2, 3, 4, 4, 5, 5),
  group = factor(rep(0:1, c(7, 8)))
)

designObj &lt;- designSafeLogrank(hrMin=1/2)

safeLogrankTest(survival::Surv(callaert$time)~callaert$group,
                designObj = designObj)

safeLogrankTest(survTime=survival::Surv(callaert$time),
                group=callaert$group, designObj = designObj)

result &lt;- safeLogrankTest(survTime=survival::Surv(callaert$time),
                group=callaert$group, designObj = designObj)

result

##  Sequentially
# Greater
eValueGreater &lt;- exp(cumsum(result$sumStats$logEValueGreater))
# Less
eValueLess &lt;- exp(cumsum(result$sumStats$logEValueLess))

# twoSided
eValueTwoSided &lt;- 1/2*eValueGreater+1/2*eValueLess

eValueTwoSided
result$eValue

###### Example switching between safe exact and safe Gaussian logrank test

designObj &lt;- designSafeLogrank(0.8, alternative="less")

dat &lt;- safestats::generateSurvData(300, 300, 2, 0.0065, 0.0065*0.8, seed=1)
survTime &lt;- survival::Surv(dat$time, dat$status)

resultE &lt;- safeLogrankTest(survTime ~ dat$group,
                           designObj = designObj)

resultG &lt;- safeLogrankTest(survTime ~ dat$group,
                           designObj = designObj, exact=FALSE)

resultE
resultG

###### Example switching between safe exact and safe Gaussian logrank test other side

designObj &lt;- designSafeLogrank(1/0.8, alternative="greater")

resultE &lt;- safeLogrankTest(survTime ~ dat$group,
                           designObj = designObj)

resultG &lt;- safeLogrankTest(survTime ~ dat$group,
                           designObj = designObj, exact=FALSE)

if (log(resultE$eValue) &gt;= 0 &amp;&amp; log(resultG$eValue) &gt;= 0 )
  stop("one-sided wrong")

</code></pre>

<hr>
<h2 id='safeTTest'>Safe Student's T-Test.</h2><span id='topic+safeTTest'></span><span id='topic+safe.t.test'></span>

<h3>Description</h3>

<p>A safe t-test adapted from  <code><a href="stats.html#topic+t.test">t.test</a>()</code> to perform one and two sample t-tests on vectors of data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeTTest(
  x,
  y = NULL,
  designObj = NULL,
  paired = FALSE,
  varEqual = TRUE,
  pilot = FALSE,
  alpha = NULL,
  alternative = NULL,
  ciValue = NULL,
  na.rm = FALSE,
  ...
)

safe.t.test(
  x,
  y = NULL,
  designObj = NULL,
  paired = FALSE,
  var.equal = TRUE,
  pilot = FALSE,
  alpha = NULL,
  alternative = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeTTest_+3A_x">x</code></td>
<td>
<p>a (non-empty) numeric vector of data values.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_y">y</code></td>
<td>
<p>an optional (non-empty) numeric vector of data values.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_designobj">designObj</code></td>
<td>
<p>an object obtained from <code><a href="#topic+designSafeT">designSafeT</a>()</code>, or <code>NULL</code>, when pilot
equals  <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_paired">paired</code></td>
<td>
<p>a logical indicating whether you want a paired t-test.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_varequal">varEqual</code></td>
<td>
<p>a logical variable indicating whether to treat the two variances as being equal. For
the moment, this is always <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_pilot">pilot</code></td>
<td>
<p>a logical indicating whether a pilot study is run. If <code>TRUE</code>, it is assumed that
the number of samples is exactly as planned.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_alpha">alpha</code></td>
<td>
<p>numeric &gt; 0 only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>, then
the alpha of the design object is used instead in constructing the decision rule S &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_alternative">alternative</code></td>
<td>
<p>a character only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>,
then the alternative specified by the design object is used instead.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_civalue">ciValue</code></td>
<td>
<p>numeric is the ciValue-level of the confidence sequence. Default ciValue=NULL,
and ciValue = 1 - alpha</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical value indicating whether <code>NA</code> values should be stripped before
the computation proceeds.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
<tr><td><code id="safeTTest_+3A_var.equal">var.equal</code></td>
<td>
<p>a logical variable indicating whether to treat the two variances as being equal. For the moment,
this is always <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;safeTest&quot;. An object of class &quot;safeTest&quot; is a list containing at least the
following components:
</p>

<dl>
<dt>statistic</dt><dd><p>the value of the t-statistic.</p>
</dd>
<dt>n</dt><dd><p>The realised sample size(s).</p>
</dd>
<dt>eValue</dt><dd><p>the realised e-value from the safe test.</p>
</dd>
<dt>confSeq</dt><dd><p>A safe confidence interval for the mean appropriate to the specific alternative
hypothesis.</p>
</dd>
<dt>estimate</dt><dd><p>the estimated mean or difference in means or mean difference depending on whether it a one-
sample test or a two-sample test was conducted.</p>
</dd>
<dt>stderr</dt><dd><p>the standard error of the mean (difference), used as denominator in the t-statistic formula.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>dataName</dt><dd><p>a character string giving the name(s) of the data.</p>
</dd>
<dt>designObj</dt><dd><p>an object of class &quot;safeTDesign&quot; obtained from <code><a href="#topic+designSafeT">designSafeT</a>()</code>.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>designObj &lt;- designSafeT(deltaMin=0.6, alpha=0.008, alternative="greater",
                         testType="twoSample", ratio=1.2)

set.seed(1)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
safeTTest(x, y, designObj=designObj)      #0.2959334

safeTTest(1:10, y = c(7:20), pilot=TRUE)      # s = 658.69 &gt; 1/alpha
designObj &lt;- designSafeT(deltaMin=0.6, alpha=0.008, alternative="greater",
                         testType="twoSample", ratio=1.2)

set.seed(1)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
safe.t.test(x, y, alternative="greater", designObj=designObj)      #0.2959334

safe.t.test(1:10, y = c(7:20), pilot=TRUE)      # s = 658.69 &gt; 1/alpha
</code></pre>

<hr>
<h2 id='safeTTestStat'>Computes E-Values Based on the T-Statistic</h2><span id='topic+safeTTestStat'></span>

<h3>Description</h3>

<p>A summary stats version of <code><a href="#topic+safeTTest">safeTTest</a>()</code> with the data replaced by t, n1 and n2, and the
design object by deltaS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeTTestStat(
  t,
  parameter,
  n1,
  n2 = NULL,
  alternative = c("twoSided", "less", "greater"),
  tDensity = FALSE,
  paired = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeTTestStat_+3A_t">t</code></td>
<td>
<p>numeric that represents the observed t-statistic.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_parameter">parameter</code></td>
<td>
<p>numeric this defines the safe test S, i.e., a likelihood ratio of t distributions with in
the denominator the likelihood with delta = 0 and in the numerator an average likelihood defined by
1/2 time the likelihood at the non-centrality parameter sqrt(nEff)*parameter and 1/2 times the likelihood at
the non-centrality parameter -sqrt(nEff)*parameter.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_n1">n1</code></td>
<td>
<p>integer that represents the size in a one-sample t-test, (n2=<code>NULL</code>). When n2 is not <code>NULL</code>,
this specifies the size of the first sample for a two-sample test.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_n2">n2</code></td>
<td>
<p>an optional integer that specifies the size of the second sample. If it's left unspecified, thus,
<code>NULL</code> it implies that the t-statistic is based on one-sample.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_alternative">alternative</code></td>
<td>
<p>a character only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>,
then the alternative specified by the design object is used instead.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_tdensity">tDensity</code></td>
<td>
<p>Uses the the representation of the safe t-test as the likelihood ratio of t densities.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_paired">paired</code></td>
<td>
<p>a logical indicating whether you want a paired t-test.</p>
</td></tr>
<tr><td><code id="safeTTestStat_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric that represent the e10, that is, the e-value in favour of the alternative over the null
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeTTestStat(t=1, n1=100, 0.4)
safeTTestStat(t=3, n1=100, parameter=0.3)
</code></pre>

<hr>
<h2 id='safeTTestStatAlpha'>safeTTestStat() Subtracted with 1/alpha.</h2><span id='topic+safeTTestStatAlpha'></span>

<h3>Description</h3>

<p>This is basically just <code><a href="#topic+safeTTestStat">safeTTestStat</a>()</code> - 1/alpha. This function is used for root finding for
pilot designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeTTestStatAlpha(
  t,
  parameter,
  n1,
  n2 = NULL,
  alpha,
  alternative = c("twoSided", "greater", "less"),
  tDensity = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeTTestStatAlpha_+3A_t">t</code></td>
<td>
<p>numeric that represents the observed t-statistic.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_parameter">parameter</code></td>
<td>
<p>numeric this defines the safe test S, i.e., a likelihood ratio of t distributions with in
the denominator the likelihood with delta = 0 and in the numerator an average likelihood defined by
1/2 time the likelihood at the non-centrality parameter sqrt(nEff)*parameter and 1/2 times the likelihood at
the non-centrality parameter -sqrt(nEff)*parameter.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_n1">n1</code></td>
<td>
<p>integer that represents the size in a one-sample t-test, (n2=<code>NULL</code>). When n2 is not <code>NULL</code>,
this specifies the size of the first sample for a two-sample test.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_n2">n2</code></td>
<td>
<p>an optional integer that specifies the size of the second sample. If it's left unspecified, thus,
<code>NULL</code> it implies that the t-statistic is based on one-sample.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_alpha">alpha</code></td>
<td>
<p>numeric &gt; 0 only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>, then
the alpha of the design object is used instead in constructing the decision rule S &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_alternative">alternative</code></td>
<td>
<p>a character only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>,
then the alternative specified by the design object is used instead.</p>
</td></tr>
<tr><td><code id="safeTTestStatAlpha_+3A_tdensity">tDensity</code></td>
<td>
<p>Uses the the representation of the safe t-test as the likelihood ratio of t densities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric that represent the e10 - 1/alpha, that is, the e-value in favour of the
alternative over the null - 1/alpha.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeTTestStat(t=1, n1=100, 0.4)
safeTTestStat(t=3, n1=100, parameter=0.3)
</code></pre>

<hr>
<h2 id='safeTTestStatTDensity'>safeTTestStat() based on t-densities</h2><span id='topic+safeTTestStatTDensity'></span>

<h3>Description</h3>

<p>This is basically just <code><a href="#topic+safeTTestStat">safeTTestStat</a>()</code> - 1/alpha. This function is used for root finding for
pilot designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeTTestStatTDensity(
  t,
  parameter,
  nu,
  nEff,
  alternative = c("twoSided", "less", "greater"),
  paired = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeTTestStatTDensity_+3A_t">t</code></td>
<td>
<p>numeric that represents the observed t-statistic.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_parameter">parameter</code></td>
<td>
<p>numeric this defines the safe test S, i.e., a likelihood ratio of t distributions with in
the denominator the likelihood with delta = 0 and in the numerator an average likelihood defined by
1/2 time the likelihood at the non-centrality parameter sqrt(nEff)*parameter and 1/2 times the likelihood at
the non-centrality parameter -sqrt(nEff)*parameter.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_nu">nu</code></td>
<td>
<p>numeric &gt; 0 representing the degrees of freedom.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_neff">nEff</code></td>
<td>
<p>numeric &gt; 0 representing the effective sample size in a two-sample problem. For one-sample
problems this is equal to the sample size.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_alternative">alternative</code></td>
<td>
<p>a character only used if pilot equals <code>TRUE</code>. If pilot equals <code>FALSE</code>,
then the alternative specified by the design object is used instead.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_paired">paired</code></td>
<td>
<p>a logical indicating whether you want a paired t-test.</p>
</td></tr>
<tr><td><code id="safeTTestStatTDensity_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric that represent the e10, that is, the e-value in favour of the
alternative over the null.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeTTestStat(t=1, n1=100, 0.4)
safeTTestStat(t=3, n1=100, parameter=0.3)
</code></pre>

<hr>
<h2 id='safeTwoProportionsTest'>Perform a Safe Test for Two Proportions with Stream Data</h2><span id='topic+safeTwoProportionsTest'></span><span id='topic+safe.prop.test'></span>

<h3>Description</h3>

<p>Perform a safe test for two proportions (a 2x2 contingency table test) with a
result object retrieved through the design function for planning an experiment to compare
two proportions in this package, <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeTwoProportionsTest(
  ya,
  yb,
  designObj = NULL,
  wantConfidenceSequence = FALSE,
  ciValue = NULL,
  confidenceBoundGridPrecision = 20,
  logOddsConfidenceSearchBounds = c(0.01, 5),
  pilot = FALSE
)

safe.prop.test(
  ya,
  yb,
  designObj = NULL,
  wantConfidenceSequence = FALSE,
  ciValue = NULL,
  confidenceBoundGridPrecision = 20,
  logOddsConfidenceSearchBounds = c(0.01, 5),
  pilot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeTwoProportionsTest_+3A_ya">ya</code></td>
<td>
<p>positive observations/ events per data block in group a: a numeric with integer values
between (and including) 0 and <code>na</code>, the number of observations in group a per block.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_yb">yb</code></td>
<td>
<p>positive observations/ events per data block in group b: a numeric with integer values
between (and including) 0 and <code>nb</code>, the number of observations in group b per block.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_designobj">designObj</code></td>
<td>
<p>a safe test design for two proportions retrieved through <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_wantconfidencesequence">wantConfidenceSequence</code></td>
<td>
<p>logical that can be set to true when the user wants a safe confidence
sequence to be estimated.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_civalue">ciValue</code></td>
<td>
<p>coverage of the safe confidence sequence; default <code>NULL</code>, if NULL
calculated as <code>1 - designObj[["alpha"]]</code>.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_confidenceboundgridprecision">confidenceBoundGridPrecision</code></td>
<td>
<p>integer specifying the grid precision used to search for the confidence
bounds. Default 20.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_logoddsconfidencesearchbounds">logOddsConfidenceSearchBounds</code></td>
<td>
<p>vector of to positive doubles specifying the upper and lower bound of the grid
to search over for finding the confidence bound for the logOddsRatio restriction. Default <code>(0.01, 5)</code>.</p>
</td></tr>
<tr><td><code id="safeTwoProportionsTest_+3A_pilot">pilot</code></td>
<td>
<p>logical that can be set to true when performing an exploratory analysis
without a <code>designObj</code>; only allows for <code>na = nb = 1</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'safeTest'. An object of class 'safeTest' is a list containing at least the
following components:
</p>

<dl>
<dt>n</dt><dd><p>The realised sample size(s).</p>
</dd>
<dt>eValue</dt><dd><p>the e-value of the safe test.</p>
</dd>
<dt>dataName</dt><dd><p>a character string giving the name(s) of the data.</p>
</dd>
<dt>designObj</dt><dd><p>an object of class &quot;safeDesign&quot; described in <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#balanced design
yb &lt;- c(1,0,1,1,1,0,1)
ya &lt;- c(1,0,1,0,0,0,1)
safeDesign &lt;- designSafeTwoProportions(na = 1,
                                       nb = 1,
                                       beta = 0.20,
                                       delta = 0.6,
                                       alternativeRestriction = "none",
                                       M = 1e1)
safeTwoProportionsTest(ya = ya, yb = yb, designObj = safeDesign)

#pilot
safeTwoProportionsTest(ya = ya, yb = yb, pilot = TRUE)

#unbalanced design
yb &lt;- c(1,0,1,1,1,0,1)
ya &lt;- c(2,2,1,2,0,2,2)
safeDesign &lt;- designSafeTwoProportions(na = 2,
                                       nb = 1,
                                       beta = 0.20,
                                       delta = 0.6,
                                       alternativeRestriction = "none",
                                       M = 1e1)
safeTwoProportionsTest(ya = ya, yb = yb, designObj = safeDesign)

</code></pre>

<hr>
<h2 id='safeZ10Inverse'>Computes the Inverse of the Two-Sided Safe Z-Test</h2><span id='topic+safeZ10Inverse'></span>

<h3>Description</h3>

<p>This helper function is used in <code><a href="#topic+designSafeZ">designSafeZ</a>()</code> to find parameter. The function is the (two-sided)
inverse of 'safeZTestStat'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeZ10Inverse(parameter, nEff, sigma = 1, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeZ10Inverse_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="safeZ10Inverse_+3A_neff">nEff</code></td>
<td>
<p>numeric &gt; 0, the effective sample size.</p>
</td></tr>
<tr><td><code id="safeZ10Inverse_+3A_sigma">sigma</code></td>
<td>
<p>numeric, the assumed known standard deviation, default 1.</p>
</td></tr>
<tr><td><code id="safeZ10Inverse_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A number that represents a z-value. The function's domain is the positive real line and the range
is the real line, i.e., the outcome space of the z-statistic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeZ10Inverse(0.4, n=13)
</code></pre>

<hr>
<h2 id='safeZTest'>Safe Z-Test</h2><span id='topic+safeZTest'></span><span id='topic+safe.z.test'></span>

<h3>Description</h3>

<p>Safe one and two sample z-tests on vectors of data. The function is modelled after <code><a href="stats.html#topic+t.test">t.test</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeZTest(
  x,
  y = NULL,
  paired = FALSE,
  designObj = NULL,
  pilot = FALSE,
  ciValue = NULL,
  tol = 1e-05,
  na.rm = FALSE,
  ...
)

safe.z.test(
  x,
  y = NULL,
  paired = FALSE,
  designObj = NULL,
  pilot = FALSE,
  tol = 1e-05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeZTest_+3A_x">x</code></td>
<td>
<p>a (non-empty) numeric vector of data values.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_y">y</code></td>
<td>
<p>an optional (non-empty) numeric vector of data values.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_paired">paired</code></td>
<td>
<p>a logical indicating whether you want the paired z-test.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_designobj">designObj</code></td>
<td>
<p>an object obtained from <code><a href="#topic+designSafeZ">designSafeZ</a>()</code>, or <code>NULL</code>, when pilot is set to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_pilot">pilot</code></td>
<td>
<p>a logical indicating whether a pilot study is run. If <code>TRUE</code>, it is assumed that the number of
samples is exactly as planned. The default null h0=1 is used, alpha=0.05, and alternative=&quot;twoSided&quot; is used.
To change these default values, please use <code><a href="#topic+designSafeZ">designSafeZ</a>()</code>.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_civalue">ciValue</code></td>
<td>
<p>numeric is the ciValue-level of the confidence sequence. Default ciValue=NULL, and ciValue = 1 - alpha</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_tol">tol</code></td>
<td>
<p>numeric &gt; 0, only used if pilot equals <code>TRUE</code>, as it then specifies the mesh used to find the test
defining parameter to construct a pilot design object.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical value indicating whether <code>NA</code> values should be stripped before
the computation proceeds.</p>
</td></tr>
<tr><td><code id="safeZTest_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'safeTest'. An object of class 'safeTest' is a list containing at least the
following components:
</p>

<dl>
<dt>statistic</dt><dd><p>the value of the test statistic. Here the z-statistic.</p>
</dd>
<dt>n</dt><dd><p>The realised sample size(s).</p>
</dd>
<dt>eValue</dt><dd><p>the e-value of the safe test.</p>
</dd>
<dt>confInt</dt><dd><p>To be implemented: a safe confidence interval for the mean appropriate to the specific alternative
hypothesis.</p>
</dd>
<dt>estimate</dt><dd><p>the estimated mean or difference in means or mean difference depending on whether it was a one-
sample test or a two-sample test.</p>
</dd>
<dt>h0</dt><dd><p>the specified hypothesised value of the mean or mean difference depending on whether it was a one-sample
or a two-sample test.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; effectively provided by the user.</p>
</dd>
<dt>dataName</dt><dd><p>a character string giving the name(s) of the data.</p>
</dd>
<dt>designObj</dt><dd><p>an object of class &quot;safeDesign&quot; described in <code><a href="#topic+designSafeZ">designSafeZ</a>()</code>.</p>
</dd>
<dt>call</dt><dd><p>the expression with which this function is called.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
designObj &lt;- designSafeZ(meanDiffMin=0.6, alpha=0.008,
                         alternative="greater", testType="twoSample",
                         ratio=1.2)

set.seed(1)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
safeZTest(x, y, designObj=designObj)      #

safeZTest(1:10, y = c(7:20), pilot=TRUE, alternative="less")      # s = 7.7543e+20 &gt; 1/alpha
</code></pre>

<hr>
<h2 id='safeZTestStat'>Computes E-Values Based on the Z-Statistic</h2><span id='topic+safeZTestStat'></span>

<h3>Description</h3>

<p>Computes e-values using the z-statistic and the sample sizes only based on the test defining parameter phiS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeZTestStat(
  z,
  phiS,
  n1,
  n2 = NULL,
  alternative = c("twoSided", "less", "greater"),
  paired = FALSE,
  sigma = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeZTestStat_+3A_z">z</code></td>
<td>
<p>numeric that represents the observed z-statistic.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_phis">phiS</code></td>
<td>
<p>numeric this defines the safe test S, i.e., a likelihood ratio of z distributions with in the
denominator the likelihood with mean difference 0 and in the numerator an average likelihood defined by
the likelihood at the parameter value. For the two sided case 1/2 at the parameter value and 1/2 at minus the
parameter value.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_n1">n1</code></td>
<td>
<p>integer that represents the size in a one-sample z-test, (n2=<code>NULL</code>). When n2 is not
<code>NULL</code>, this specifies the size of the first sample for a two-sample test.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_n2">n2</code></td>
<td>
<p>an optional integer that specifies the size of the second sample. If it's left unspecified, thus,
<code>NULL</code> it implies that the z-statistic is based on one-sample.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_paired">paired</code></td>
<td>
<p>a logical, if <code>TRUE</code> ignores n2, and indicates that a paired z-test is performed.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_sigma">sigma</code></td>
<td>
<p>numeric, the assumed known standard deviation, default 1.</p>
</td></tr>
<tr><td><code id="safeZTestStat_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an e-value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safeZTestStat(z=1, n1=100, phiS=0.4)
safeZTestStat(z=3, n1=100, phiS=0.3)
</code></pre>

<hr>
<h2 id='sampleLogrankStoppingTimes'>Simulate stopping times for the exact safe logrank test</h2><span id='topic+sampleLogrankStoppingTimes'></span>

<h3>Description</h3>

<p>Simulate stopping times for the exact safe logrank test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleLogrankStoppingTimes(
  hazardRatio,
  alpha = 0.05,
  alternative = c("twoSided", "less", "greater"),
  m0 = 50000L,
  m1 = 50000L,
  nSim = 1000L,
  groupSizePerTimeFunction = returnOne,
  parameter = NULL,
  nMax = Inf,
  pb = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_hazardratio">hazardRatio</code></td>
<td>
<p>numeric that defines the data generating hazard ratio with which data are sampled.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, which must be one of
&quot;twoSided&quot; (default),&quot;greater&quot; or &quot;less&quot;. The alternative is pitted against the null hypothesis of equality
of the survival distributions. More specifically, let lambda1 be the hazard rate of group 1 (i.e., placebo), and
lambda2 the hazard ratio of group 2 (i.e., treatment), then the null hypothesis states that the hazard ratio
theta = lambda2/lambda1 = 1. If alternative = &quot;less&quot;, the null hypothesis is compared to theta &lt; 1, thus,
lambda2 &lt; lambda1, that is, the hazard of group 2 (i.e., treatment) is less than that of group 1 (i.e., placebo),
hence, the treatment is beneficial. If alternative = &quot;greater&quot;, then the null hypothesis is compared to theta &gt; 1,
thus, lambda2 &gt; lambda1, hence, harm.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_m0">m0</code></td>
<td>
<p>Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_m1">m1</code></td>
<td>
<p>Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_groupsizepertimefunction">groupSizePerTimeFunction</code></td>
<td>
<p>A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if <code>rpois(1, 7)</code> leads to a random number of events at each time
step.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_parameter">parameter</code></td>
<td>
<p>Numeric &gt; 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_nmax">nMax</code></td>
<td>
<p>An integer. Once nEvents hits nMax the experiment terminates, if it didn't stop due to threshold
crossing crossing already. Default set to Inf.</p>
</td></tr>
<tr><td><code id="sampleLogrankStoppingTimes_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with stoppingTimes and breakVector. Entries of breakVector are 0, 1. A 1 represents stopping
due to exceeding nMax, and 0 due to 1/alpha threshold crossing, or running out of participants, which implies
that the corresponding stopping time is Inf.
</p>


<h3>Author(s)</h3>

<p>Muriel Felipe Perez-Ortiz and Alexander Ly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampleLogrankStoppingTimes(0.7, nSim=10)
</code></pre>

<hr>
<h2 id='sampleStoppingTimesSafeT'>Simulate stopping times for the safe z-test</h2><span id='topic+sampleStoppingTimesSafeT'></span>

<h3>Description</h3>

<p>Simulate stopping times for the safe z-test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleStoppingTimesSafeT(
  deltaTrue,
  alpha = 0.05,
  alternative = c("twoSided", "less", "greater"),
  testType = c("oneSample", "paired", "twoSample"),
  nSim = 1000L,
  nMax = 1000,
  ratio = 1,
  lowN = 3L,
  parameter = NULL,
  seed = NULL,
  wantEValuesAtNMax = FALSE,
  pb = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, the value of the true standardised effect size (test-relevant parameter).
This argument is used by 'designSafeT()' with 'deltaTrue &lt;- deltaMin'</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_nmax">nMax</code></td>
<td>
<p>integer &gt; 0, maximum sample size of the (first) sample in each sample path.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_lown">lowN</code></td>
<td>
<p>integer minimal sample size of the (first) sample when computing the power due to
optional stopping. Default lowN is set 1.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_wantevaluesatnmax">wantEValuesAtNMax</code></td>
<td>
<p>logical. If <code>TRUE</code> then compute eValues at nMax. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeT_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with stoppingTimes and breakVector. Entries of breakVector are 0, 1. A 1 represents stopping
due to exceeding nMax, and 0 due to 1/alpha threshold crossing, which implies that in corresponding stopping
time is Inf.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampleStoppingTimesSafeT(0.7, nSim=10)
</code></pre>

<hr>
<h2 id='sampleStoppingTimesSafeZ'>Simulate stopping times for the safe z-test</h2><span id='topic+sampleStoppingTimesSafeZ'></span>

<h3>Description</h3>

<p>Simulate stopping times for the safe z-test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleStoppingTimesSafeZ(
  meanDiffMin,
  alpha = 0.05,
  alternative = c("twoSided", "less", "greater"),
  sigma = 1,
  kappa = sigma,
  nSim = 1000L,
  nMax = 1000,
  ratio = 1,
  testType = c("oneSample", "paired", "twoSample"),
  parameter = NULL,
  wantEValuesAtNMax = FALSE,
  pb = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_meandiffmin">meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_sigma">sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_kappa">kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_nsim">nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_nmax">nMax</code></td>
<td>
<p>integer &gt; 0, maximum sample size of the (first) sample in each sample path.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_ratio">ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to &quot;twoSample&quot;, or if nPlan is of length(1) then ratio=1.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_testtype">testType</code></td>
<td>
<p>either one of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot;.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_parameter">parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_wantevaluesatnmax">wantEValuesAtNMax</code></td>
<td>
<p>logical. If <code>TRUE</code> then compute eValues at nMax. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sampleStoppingTimesSafeZ_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with stoppingTimes and breakVector. Entries of breakVector are 0, 1. A 1 represents stopping
due to exceeding nMax, and 0 due to 1/alpha threshold crossing, which implies that in corresponding stopping
time is Inf.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampleStoppingTimesSafeZ(0.7, nSim=10)
</code></pre>

<hr>
<h2 id='selectivelyContinueTTestCombineData'>Selectively Continue Experiments that Did Not Lead to a Null Rejection for a (Safe) T-Test</h2><span id='topic+selectivelyContinueTTestCombineData'></span>

<h3>Description</h3>

<p>Helper function used in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectivelyContinueTTestCombineData(
  oldValues,
  valuesType = c("eValues", "pValues"),
  designObj = NULL,
  alternative = c("twoSided", "greater", "less"),
  oldData,
  deltaTrue,
  alpha = NULL,
  n1Extra = NULL,
  n2Extra = NULL,
  seed = NULL,
  paired = FALSE,
  muGlobal = 0,
  sigmaTrue = 1,
  moreMainText = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_oldvalues">oldValues</code></td>
<td>
<p>vector of e-values or p-values.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_valuestype">valuesType</code></td>
<td>
<p>character string either &quot;eValues&quot; or &quot;pValues&quot;.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_designobj">designObj</code></td>
<td>
<p>a safeDesign object obtained from <code><a href="#topic+designSafeT">designSafeT</a></code>, or <code>NULL</code>
if valuesType equal &quot;pValues&quot;.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of &quot;twoSided&quot; (default),
&quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_olddata">oldData</code></td>
<td>
<p>a list of matrices with names &quot;dataGroup1&quot; and &quot;dataGroup2&quot;.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, the value of the true standardised effect size (test-relevant parameter).</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent of n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_n1extra">n1Extra</code></td>
<td>
<p>integer, that defines the additional number of samples of the first group. If
<code>NULL</code> and valuesType equals &quot;eValues&quot;, then n1Extra equals <code>designObj$nPlan[1]</code>.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_n2extra">n2Extra</code></td>
<td>
<p>optional integer, that defines the additional number of samples of the second group.
If <code>NULL</code>, and valuesType equals &quot;eValues&quot;, then n2Extra equals <code>designObj$nPlan[2]</code>.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_seed">seed</code></td>
<td>
<p>To set the seed for the simulated data.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_paired">paired</code></td>
<td>
<p>logical, if <code>TRUE</code> then paired t-test.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_muglobal">muGlobal</code></td>
<td>
<p>numeric, the true global mean of a paired or two-sample t-test. Its value should not
matter for the test. This parameter is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_sigmatrue">sigmaTrue</code></td>
<td>
<p>numeric &gt; 0,the true standard deviation of the data. Its value should not  matter
for the test.This parameter treated is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="selectivelyContinueTTestCombineData_+3A_moremaintext">moreMainText</code></td>
<td>
<p>character, additional remarks in the title of the histogram.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list that includes the continued s or p-values based on the combined data, and a list of the
combined data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alpha &lt;- 0.05
mIter &lt;- 1000L

designObj &lt;- designSafeT(deltaMin=1, alpha=alpha, beta=0.2, nSim=100)
oldData &lt;- generateNormalData(nPlan=designObj$nPlan, deltaTrue=0, nSim=mIter, seed=1)

eValues &lt;- vector("numeric", length=mIter)

for (i in seq_along(eValues)) {
  eValues[i] &lt;- safeTTest(x=oldData$dataGroup1[i, ], designObj=designObj)$eValue
}

# First run: 8 false null rejections
sum(eValues &gt; 1/alpha)

continuedSafe &lt;- selectivelyContinueTTestCombineData(
  oldValues=eValues, designObj=designObj, oldData=oldData,
  deltaTrue=0, seed=2)

# Second run: 1 false null rejections
sum(continuedSafe$newValues &gt; 1/alpha)

# Third run: 0 false null rejections
eValues &lt;- continuedSafe$newValues
oldData &lt;- continuedSafe$combinedData
continuedSafe &lt;- selectivelyContinueTTestCombineData(
  oldValues=eValues, designObj=designObj, oldData=oldData,
  deltaTrue=0, seed=3)
sum(continuedSafe$newValues &gt; 1/alpha)
</code></pre>

<hr>
<h2 id='setSafeStatsPlotOptionsAndReturnOldOnes'>Sets 'safestats' Plot Options and Returns the Current Plot Options.</h2><span id='topic+setSafeStatsPlotOptionsAndReturnOldOnes'></span>

<h3>Description</h3>

<p>Sets 'safestats' Plot Options and Returns the Current Plot Options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setSafeStatsPlotOptionsAndReturnOldOnes(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setSafeStatsPlotOptionsAndReturnOldOnes_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the user specified plot options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>oldPar &lt;- setSafeStatsPlotOptionsAndReturnOldOnes()
graphics::plot(1:10, 1:10)
setPar &lt;- graphics::par(oldPar)
</code></pre>

<hr>
<h2 id='simulate.safeDesign'>Simulate Early Stopping Experiments for the T Test</h2><span id='topic+simulate.safeDesign'></span>

<h3>Description</h3>

<p>Applied to a 'safeDesign' object this function empirically shows the performance of safe experiments under
optional stopping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'safeDesign'
simulate(
  object,
  nsim = nSim,
  seed = NULL,
  deltaTrue = NULL,
  muGlobal = 0,
  sigmaTrue = 1,
  lowN = 3,
  safeOptioStop = TRUE,
  freqOptioStop = FALSE,
  nPlanFreq = NULL,
  logging = TRUE,
  pb = TRUE,
  nSim = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate.safeDesign_+3A_object">object</code></td>
<td>
<p>A safeDesign obtained obtained from <code><a href="#topic+designSafeT">designSafeT</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_nsim">nsim</code></td>
<td>
<p>integer, formally the number of iterations, but by default nsim=nSim</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_seed">seed</code></td>
<td>
<p>integer, seed number.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_deltatrue">deltaTrue</code></td>
<td>
<p>numeric, if NULL, then the minimally clinically relevant standardised effect size is used
as the true data generating effect size deltaTrue.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_muglobal">muGlobal</code></td>
<td>
<p>numeric, the true global mean of a paired or two-sample t-test. Its value should not
matter for the test. This parameter is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_sigmatrue">sigmaTrue</code></td>
<td>
<p>numeric &gt; 0,the true standard deviation of the data. Its value should not  matter
for the test.This parameter treated is treated as a nuisance.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_lown">lowN</code></td>
<td>
<p>integer that defines the smallest n of our search space for n.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_safeoptiostop">safeOptioStop</code></td>
<td>
<p>logical, <code>TRUE</code> implies that optional stopping simulation is performed for
the safe test.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_freqoptiostop">freqOptioStop</code></td>
<td>
<p>logical, <code>TRUE</code> implies that optional stopping simulation is performed for
the frequentist test.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_nplanfreq">nPlanFreq</code></td>
<td>
<p>the frequentist sample size(s) to plan for. Acquired from <code><a href="#topic+designFreqT">designFreqT</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_logging">logging</code></td>
<td>
<p>logical, if <code>TRUE</code>, then return the simulated data.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_pb">pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_nsim">nSim</code></td>
<td>
<p>integer, number of iterations.</p>
</td></tr>
<tr><td><code id="simulate.safeDesign_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;safeTSim&quot;. An object of class &quot;safeTSim&quot; is a list containing at
least the following components:
</p>

<dl>
<dt>nPlan</dt><dd><p>the planned sample size(s).</p>
</dd>
<dt>deltaTrue</dt><dd><p>the value of the true standardised effect size (test-relevant parameter) provided by
the user.</p>
</dd>
<dt>muGlobal</dt><dd><p>the true global mean of a paired or two-sample t-test (nuisance parameter) provided by
the user.</p>
</dd>
<dt>paired</dt><dd><p>if <code>TRUE</code> then paired t-test.</p>
</dd>
<dt>alternative</dt><dd><p>any of &quot;twoSided&quot;, &quot;greater&quot;, &quot;less&quot; provided by the user.</p>
</dd>
<dt>lowN</dt><dd><p>the smallest number of samples (first group) at which monitoring of the tests begins.</p>
</dd>
<dt>nSim</dt><dd><p>the number of replications of the experiment.</p>
</dd>
<dt>alpha</dt><dd><p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt><dd><p>the tolerable type II error provided by the user.</p>
</dd>
<dt>testType</dt><dd><p>any of &quot;oneSample&quot;, &quot;paired&quot;, &quot;twoSample&quot; provided by the user.</p>
</dd>
<dt>parameter</dt><dd><p>the parameter (point prior) used in the safe test derived from the design.
Acquired from <code><a href="#topic+designSafeT">designSafeT</a>()</code>.</p>
</dd>
<dt>nPlanFreq</dt><dd><p>the frequentist planned sample size(s). Acquired from <code><a href="#topic+designFreqT">designFreqT</a></code>()</p>
</dd>
<dt>safeSim</dt><dd><p>list with the simulation results of the safe test under optional stopping.</p>
</dd>
<dt>freqSim</dt><dd><p>list with the simulation results of the frequentist test under optional stopping.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># Design safe test
alpha &lt;- 0.05
beta &lt;- 0.20
deltaMin &lt;- 1
designObj &lt;- designSafeT(deltaMin, alpha=alpha, beta=beta, nSim=100)

# Design frequentist test
freqObj &lt;- designFreqT(deltaMin, alpha=alpha, beta=beta)

# Simulate based on deltaTrue=deltaMin
simResultsDeltaTrueIsDeltaMin &lt;- simulate(object=designObj, nSim=100)

# Simulate based on deltaTrue &gt; deltaMin
simResultsDeltaTrueIsLargerThanDeltaMin &lt;- simulate(
  object=designObj, nSim=100, deltaTrue=2)

# Simulate under the null deltaTrue = 0
simResultsDeltaTrueIsNull &lt;- simulate(
  object=designObj, nSim=100, deltaTrue=0)

simulate(object=designObj, deltraTrue=0, nSim=100, freqOptioStop=TRUE,
         nPlanFreq=freqObj$nPlan)
</code></pre>

<hr>
<h2 id='simulateCoverageDifferenceTwoProportions'>Simulate the coverage of a safe confidence sequence for differences between proportions
for a given distribution and safe design.</h2><span id='topic+simulateCoverageDifferenceTwoProportions'></span>

<h3>Description</h3>

<p>Simulate the coverage of a safe confidence sequence for differences between proportions
for a given distribution and safe design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateCoverageDifferenceTwoProportions(
  successProbabilityA,
  trueDelta,
  safeDesign,
  precision = 100,
  M = 1000,
  numberForSeed = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_successprobabilitya">successProbabilityA</code></td>
<td>
<p>probability of observing a success in group A.</p>
</td></tr>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_truedelta">trueDelta</code></td>
<td>
<p>difference in probability between group A and B.</p>
</td></tr>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_safedesign">safeDesign</code></td>
<td>
<p>a safe test design for two proportions retrieved through <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_precision">precision</code></td>
<td>
<p>precision of the grid to search over for the confidence sequence bounds. Default 100.</p>
</td></tr>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_m">M</code></td>
<td>
<p>number of simulations to carry out. Default 1000.</p>
</td></tr>
<tr><td><code id="simulateCoverageDifferenceTwoProportions_+3A_numberforseed">numberForSeed</code></td>
<td>
<p>number for seed to set, default NA.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the proportion of simulations where the trueDelta was included in the confidence sequence.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>balancedSafeDesign &lt;- designSafeTwoProportions(na = 1,
                                               nb = 1,
                                               nBlocksPlan = 20)
simulateCoverageDifferenceTwoProportions(successProbabilityA = 0.2,
                                         trueDelta = 0,
                                         safeDesign = balancedSafeDesign,
                                         M = 100,
                                         precision = 20,
                                         numberForSeed = 1082021)
</code></pre>

<hr>
<h2 id='simulateIncorrectStoppingTimesFisher'>Simulate incorrect optional stopping with fisher's exact test's p-value as the
stopping rule.</h2><span id='topic+simulateIncorrectStoppingTimesFisher'></span>

<h3>Description</h3>

<p>Simulate incorrect optional stopping with fisher's exact test's p-value as the
stopping rule.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateIncorrectStoppingTimesFisher(
  thetaA,
  thetaB,
  alpha,
  na,
  nb,
  maxSimStoptime = 10000,
  M = 1000,
  numberForSeed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_thetaa">thetaA</code></td>
<td>
<p>Bernoulli distribution parameter in group A</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_thetab">thetaB</code></td>
<td>
<p>Bernoulli distribution parameter in group B</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_na">na</code></td>
<td>
<p>number of observations in group a per data block</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_nb">nb</code></td>
<td>
<p>number of observations in group b per data block</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_maxsimstoptime">maxSimStoptime</code></td>
<td>
<p>maximal number of blocks to sample in each experiment</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_m">M</code></td>
<td>
<p>Number of simulations to carry out, default 1e3.</p>
</td></tr>
<tr><td><code id="simulateIncorrectStoppingTimesFisher_+3A_numberforseed">numberForSeed</code></td>
<td>
<p>number for seed to set, default NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with stopping times and rejection decisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simulateIncorrectStoppingTimesFisher(thetaA = 0.3,
                                     thetaB = 0.3,
                                     alpha = 0.05,
                                     na = 1,
                                     nb = 1,
                                     M = 10,
                                     maxSimStoptime = 100,
                                     numberForSeed = 251)
</code></pre>

<hr>
<h2 id='simulateOptionalStoppingScenarioTwoProportions'>Simulate an optional stopping scenario according to a safe design for two proportions</h2><span id='topic+simulateOptionalStoppingScenarioTwoProportions'></span>

<h3>Description</h3>

<p>Simulate an optional stopping scenario according to a safe design for two proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateOptionalStoppingScenarioTwoProportions(safeDesign, M, thetaA, thetaB)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateOptionalStoppingScenarioTwoProportions_+3A_safedesign">safeDesign</code></td>
<td>
<p>a 'safeDesign' object obtained through <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulateOptionalStoppingScenarioTwoProportions_+3A_m">M</code></td>
<td>
<p>integer, the number of data streams to sample.</p>
</td></tr>
<tr><td><code id="simulateOptionalStoppingScenarioTwoProportions_+3A_thetaa">thetaA</code></td>
<td>
<p>Bernoulli distribution parameter in group A</p>
</td></tr>
<tr><td><code id="simulateOptionalStoppingScenarioTwoProportions_+3A_thetab">thetaB</code></td>
<td>
<p>Bernoulli distribution parameter in group B</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with the simulation results of the safe test under optional stopping with the following
components:
</p>

<dl>
<dt>powerOptioStop</dt><dd><p>Proportion of sequences where H0 was rejected</p>
</dd>
<dt>nMean</dt><dd><p>Mean stopping time</p>
</dd>
<dt>probLessNDesign</dt><dd><p>Proportion of experiments stopped before nBlocksPlan was reached</p>
</dd>
<dt>lowN</dt><dd><p>Minimum stopping time</p>
</dd>
<dt>eValues</dt><dd><p>All achieved E values</p>
</dd>
<dt>allN</dt><dd><p>All stopping times</p>
</dd>
<dt>allSafeDecisions</dt><dd><p>Decisions on rejecting H0 for each M</p>
</dd>
<dt>allRejectedN</dt><dd><p>Stopping times of experiments where H0 was rejected</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>balancedSafeDesign &lt;- designSafeTwoProportions(na = 1,
                                               nb = 1,
                                               nBlocksPlan = 30)
optionalStoppingSimulationResult &lt;- simulateOptionalStoppingScenarioTwoProportions(
  safeDesign = balancedSafeDesign,
  M = 1e2,
  thetaA = 0.2,
  thetaB = 0.5
)
</code></pre>

<hr>
<h2 id='simulateTwoProportions'>Compare Different Hyperparameter Settings for Safe Tests of Two Proportions.</h2><span id='topic+simulateTwoProportions'></span>

<h3>Description</h3>

<p>Simulates for a range of divergence parameter values (differences or log odds ratios) the worst-case stopping times
(i.e., number of data blocks collected) and expected stopping times needed to achieve the desired power for each hyperparameter setting provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateTwoProportions(
  hyperparameterList,
  alternativeRestriction = c("none", "difference", "logOddsRatio"),
  deltaDesign = NULL,
  alpha,
  beta,
  na,
  nb,
  deltamax = 0.9,
  deltamin = 0.1,
  deltaGridSize = 8,
  M = 100,
  maxSimStoptime = 10000,
  thetaAgridSize = 8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateTwoProportions_+3A_hyperparameterlist">hyperparameterList</code></td>
<td>
<p>list object, its components hyperparameter lists with a format as described in <code><a href="#topic+designSafeTwoProportions">designSafeTwoProportions</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_alternativerestriction">alternativeRestriction</code></td>
<td>
<p>a character string specifying an optional restriction on the alternative hypothesis; must be one of &quot;none&quot; (default),
&quot;difference&quot; (difference group mean b minus group b) or &quot;logOddsRatio&quot; (the log odds ratio between group means b and a).</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_deltadesign">deltaDesign</code></td>
<td>
<p>optional; when using a restricted alternative, the value of the divergence measure used.
Either a numeric between -1 and 1 for a restriction on difference, or a real for a restriction on the log odds ratio.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_alpha">alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control &ndash;independent on n&ndash; that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_beta">beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control in the study. Necessary to calculate the
worst case stopping time.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_na">na</code></td>
<td>
<p>number of observations in group a per data block</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_nb">nb</code></td>
<td>
<p>number of observations in group b per data block</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_deltamax">deltamax</code></td>
<td>
<p>maximal effect size to calculate power for; between -1 and 1 for designs without restriction or a restriction on difference;
real number for a restriction on the log odds ratio. Default <code>0.9</code>.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_deltamin">deltamin</code></td>
<td>
<p>minimal effect size to calculate power for; between -1 and 1 for designs without restriction or a restriction on difference;
real number for a restriction on the log odds ratio. Default <code>0.1</code>.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_deltagridsize">deltaGridSize</code></td>
<td>
<p>numeric, positive integer: size of grid of delta values worst case and expected sample sizes are simulated for.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_m">M</code></td>
<td>
<p>number of simulations used to estimate sample sizes. Default <code>100</code>.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_maxsimstoptime">maxSimStoptime</code></td>
<td>
<p>maximal stream length in simulations; when the e value does not reach the rejection threshold before the end of the stream,
the maximal stream length is returned as the stopping time. Default <code>1e4</code>.</p>
</td></tr>
<tr><td><code id="simulateTwoProportions_+3A_thetaagridsize">thetaAgridSize</code></td>
<td>
<p>numeric, positive integer: size of the grid of probability distributions examined for each delta value to find the
worst case sample size over.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;safe2x2Sim&quot;. An object of class &quot;safe2x2Sim&quot; is a list containing at least the
following components:
</p>

<dl>
<dt>simData</dt><dd><p>A data frame containing simulation results with worst case and expected stopping times for each
hyperparameter setting, for the specified or default range of effect sizes.</p>
</dd>
<dt>alpha</dt><dd><p>the significance threshold used in the simulations</p>
</dd>
<dt>beta</dt><dd><p>the type-II error control used in the simulations</p>
</dd>
<dt>deltaDesign</dt><dd><p>the value of restriction on the alternative hypothesis parameter space used for the E variables in the simulations</p>
</dd>
<dt>restriction</dt><dd><p>the type of restriction used for the E variables in the simulation</p>
</dd>
<dt>hyperparameters</dt><dd><p>list of the hyperparameters tested in the simulation</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>priorList1 &lt;- list(betaA1 = 10, betaA2 = 1, betaB1 = 1, betaB2 = 10)
priorList2 &lt;- list(betaA1 = 0.18, betaA2 = 0.18, betaB1 = 0.18, betaB2 = 0.18)
priorList3 &lt;- list(betaA1 = 1, betaA2 = 1, betaB1 = 1, betaB2 = 1)

simResult &lt;- simulateTwoProportions(
  hyperparameterList = list(priorList1, priorList2, priorList3),
  alternativeRestriction = "none",
  alpha = 0.1, beta = 0.2, na = 1, nb = 1,
  deltamax = -0.4, deltamin = -0.9, deltaGridSize = 3,
  M = 10
  )

print(simResult)
plot(simResult)
</code></pre>

<hr>
<h2 id='tryOrFailWithNA'>Tries to Evaluate an Expression and Fails with <code>NA</code></h2><span id='topic+tryOrFailWithNA'></span>

<h3>Description</h3>

<p>The evaluation fails with <code>NA</code> by default, but it is also able to fail with other values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tryOrFailWithNA(expr, value = NA_real_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tryOrFailWithNA_+3A_expr">expr</code></td>
<td>
<p>Expression to be evaluated.</p>
</td></tr>
<tr><td><code id="tryOrFailWithNA_+3A_value">value</code></td>
<td>
<p>Return value if there is an error, default is <code>NA_real_</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the evaluation of the expression, or <code>value</code> if it doesn't work out.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
