<!DOCTYPE html><html><head><title>Help for package maraca</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {maraca}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#component_plot'><p>Function to create a plot showing the components used in</p>
calculating win odds (wins and ties) separately for each
outcome for a hierarchical endpoint.</a></li>
<li><a href='#component_plot.hce'><p>Generic function to create a plot showing the components used in</p>
calculating win odds (wins and ties) separately for each
outcome directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</a></li>
<li><a href='#component_plot.maraca'><p>Generic function to create a plot showing the components used in</p>
calculating win odds (wins and ties) separately for each
outcome directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</a></li>
<li><a href='#cumulative_plot'><p>Function to create a plot showing the components used in</p>
calculating win odds (wins and ties) cumulated for all
outcomes for a hierarchical endpoint.</a></li>
<li><a href='#cumulative_plot.hce'><p>Generic function to create a plot showing the components used in</p>
calculating win odds (wins and ties) cumulated for all
outcomes directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</a></li>
<li><a href='#cumulative_plot.maraca'><p>Generic function to create a plot showing the components used in</p>
calculating win odds (wins and ties) cumulated for all
outcomes directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</a></li>
<li><a href='#hce_scenario_a'><p>Example HCE scenario A.</p></a></li>
<li><a href='#hce_scenario_b'><p>Example HCE scenario B.</p></a></li>
<li><a href='#hce_scenario_c'><p>Example HCE scenario C.</p></a></li>
<li><a href='#hce_scenario_d'><p>Example HCE scenario D.</p></a></li>
<li><a href='#hce_scenario_kccq3'><p>Example HCE scenario KCCQ3.</p></a></li>
<li><a href='#maraca'><p>maraca package.</p></a></li>
<li><a href='#plot_maraca'><p>Creates and returns the plot of the maraca data.</p></a></li>
<li><a href='#plot.hce'><p>Generic function to plot the hce object using plot().</p></a></li>
<li><a href='#plot.maraca'><p>Generic function to plot the maraca object using plot().</p></a></li>
<li><a href='#validate_maraca_plot'><p>Generic function to generate validation data for the maraca plot object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.7</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>The Maraca Plot: Visualization of Hierarchical Composite
Endpoints in Clinical Trials</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Library that supports visual interpretation of hierarchical composite
    endpoints (HCEs). HCEs are complex constructs used as primary endpoints in
    clinical trials, combining outcomes of different types into ordinal endpoints,
    in which each patient contributes the most clinically important event (one and
    only one) to the analysis. See Karpefors M et al. (2022)
    &lt;<a href="https://doi.org/10.1177%2F17407745221134949">doi:10.1177/17407745221134949</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/AstraZeneca/maraca">https://github.com/AstraZeneca/maraca</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/AstraZeneca/maraca/issues">https://github.com/AstraZeneca/maraca/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), hce (&ge; 0.5), ggplot2 (&ge; 3.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0), tidyr (&ge; 1.2), checkmate (&ge; 2.1),
patchwork(&ge; 1.0.0), lifecycle</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.39), here (&ge; 1.0.1), lintr (&ge; 3.0.0), withr (&ge;
2.5.0), testthat (&ge; 3.1), rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-18 10:55:37 UTC; hidden</td>
</tr>
<tr>
<td>Author:</td>
<td>Martin Karpefors <a href="https://orcid.org/0000-0003-3136-9882"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Samvel B. Gasparyan
    <a href="https://orcid.org/0000-0002-4797-2208"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Stefano Borini [ctb],
  Monika Huhn <a href="https://orcid.org/0009-0000-7865-6008"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Monika Huhn &lt;monika.huhn@astrazeneca.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-18 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='component_plot'>Function to create a plot showing the components used in
calculating win odds (wins and ties) separately for each
outcome for a hierarchical endpoint.</h2><span id='topic+component_plot'></span>

<h3>Description</h3>

<p>Implemented for objects of type 'maraca' and 'hce'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>component_plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="component_plot_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'maraca' or 'hce'.</p>
</td></tr>
<tr><td><code id="component_plot_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to the
object-specific functions</p>
</td></tr>
</table>

<hr>
<h2 id='component_plot.hce'>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) separately for each
outcome directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</h2><span id='topic+component_plot.hce'></span>

<h3>Description</h3>

<p>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) separately for each
outcome directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
component_plot(
  x,
  step_outcomes = NULL,
  last_outcome = "C",
  arm_levels = c(active = "A", control = "P"),
  fixed_followup_days = NULL,
  theme = "maraca",
  lowerBetter = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="component_plot.hce_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'hce'.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_step_outcomes">step_outcomes</code></td>
<td>
<p>A vector of strings containing the outcome labels
for all outcomes displayed as part of the step function
on the left side of the plot.
The order is kept for the plot.
By default (when set to NULL) this is automatically
updated by taking the non-continuous outcomes from
the GROUP variable in alphabetical order.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_last_outcome">last_outcome</code></td>
<td>
<p>A single string containing the last outcome label
displayed on the right side of the plot.
Default value &quot;C&quot;.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_arm_levels">arm_levels</code></td>
<td>
<p>A named vector of exactly two strings, mapping the
values used for the active and control arms to the values
used in the data. The names must be &quot;active&quot; and &quot;control&quot;
in this order. Note that this parameter only need to
be specified if you have labels different from
&quot;active&quot; and &quot;control&quot;.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_fixed_followup_days">fixed_followup_days</code></td>
<td>
<p>Not needed if HCE object contains information
on fixed follow-up days in the study
(column PADY or TTEfixed,
depending on hce version).
Otherwise, this argument must be specified.
Note: If argument is specified and HCE object
contains PADY or TTEfixed column, then
fixed_followup_days argument is used.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Plotting win odds&quot;.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_lowerbetter">lowerBetter</code></td>
<td>
<p>Flag for the final outcome variable, indicating if
lower values are considered better/advantageous.
This flag is need to make sure the win odds are
calculated correctly.
Default value is FALSE, meaning higher values
are considered advantageous.</p>
</td></tr>
<tr><td><code id="component_plot.hce_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Component plot as a ggplot2 object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rates_A &lt;- c(1.72, 1.74, 0.58, 1.5, 1)
Rates_P &lt;- c(2.47, 2.24, 2.9, 4, 6)
hce_dat &lt;- hce::simHCE(n = 2500, TTE_A = Rates_A, TTE_P = Rates_P,
             CM_A = -3, CM_P = -6, CSD_A = 16, CSD_P = 15, fixedfy = 3,
             seed = 31337)

component_plot(hce_dat)
</code></pre>

<hr>
<h2 id='component_plot.maraca'>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) separately for each
outcome directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</h2><span id='topic+component_plot.maraca'></span>

<h3>Description</h3>

<p>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) separately for each
outcome directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'maraca'
component_plot(x, theme = "maraca", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="component_plot.maraca_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'maraca'.</p>
</td></tr>
<tr><td><code id="component_plot.maraca_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Plotting win odds&quot;.</p>
</td></tr>
<tr><td><code id="component_plot.maraca_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Component plot as a ggplot2 object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(hce_scenario_a)

maraca_dat &lt;- maraca(data = hce_scenario_a,
                     step_outcomes = c("Outcome I", "Outcome II",
                                      "Outcome III", "Outcome IV"),
                     last_outcome = "Continuous outcome",
                     fixed_followup_days = 3 * 365,
                     column_names = c(outcome = "GROUP",
                                      arm = "TRTP",
                                      value = "AVAL0"),
                     arm_levels = c(active = "Active",
                                    control = "Control"),
                     compute_win_odds = TRUE
                     )

component_plot(maraca_dat)

</code></pre>

<hr>
<h2 id='cumulative_plot'>Function to create a plot showing the components used in
calculating win odds (wins and ties) cumulated for all
outcomes for a hierarchical endpoint.</h2><span id='topic+cumulative_plot'></span>

<h3>Description</h3>

<p>Implemented for objects of type 'maraca' and 'hce'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cumulative_plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cumulative_plot_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'maraca' or 'hce'.</p>
</td></tr>
<tr><td><code id="cumulative_plot_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to the
object-specific functions</p>
</td></tr>
</table>

<hr>
<h2 id='cumulative_plot.hce'>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) cumulated for all
outcomes directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</h2><span id='topic+cumulative_plot.hce'></span>

<h3>Description</h3>

<p>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) cumulated for all
outcomes directly from an hce object.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
cumulative_plot(
  x,
  step_outcomes = NULL,
  last_outcome = "C",
  arm_levels = c(active = "A", control = "P"),
  fixed_followup_days = NULL,
  theme = "maraca",
  include = c("win odds", "win ratio"),
  reverse = FALSE,
  lowerBetter = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cumulative_plot.hce_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'hce'.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_step_outcomes">step_outcomes</code></td>
<td>
<p>A vector of strings containing the outcome labels
for all outcomes displayed as part of the step function
on the left side of the plot.
The order is kept for the plot.
By default (when set to NULL) this is automatically
updated by taking the non-continuous outcomes from
the GROUP variable in alphabetical order.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_last_outcome">last_outcome</code></td>
<td>
<p>A single string containing the last outcome label
displayed on the right side of the plot.
Default value &quot;C&quot;.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_arm_levels">arm_levels</code></td>
<td>
<p>A named vector of exactly two strings, mapping the
values used for the active and control arms to the values
used in the data. The names must be &quot;active&quot; and &quot;control&quot;
in this order. Note that this parameter only need to
be specified if you have labels different from
&quot;active&quot; and &quot;control&quot;.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_fixed_followup_days">fixed_followup_days</code></td>
<td>
<p>Not needed if HCE object contains information
on fixed follow-up days in the study
(column PADY or TTEfixed,
depending on hce version).
Otherwise, this argument must be specified.
Note: If argument is specified and HCE object
contains PADY or TTEfixed column, then
fixed_followup_days argument is used.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Plotting win odds&quot;.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_include">include</code></td>
<td>
<p>Vector or single string indicating which statistics to
include in the right hand side plot. Acceptable values are
&quot;win odds&quot; and/or &quot;win ratio&quot;. Default is c(&quot;win odds&quot;, &quot;win ratio&quot;).</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_reverse">reverse</code></td>
<td>
<p>Flag indicating if the cumulated outcomes should be
displayed in order from top to bottom (FALSE, the default)
or in reverse (TRUE).</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_lowerbetter">lowerBetter</code></td>
<td>
<p>Flag for the final outcome variable, indicating if
lower values are considered better/advantageous.
This flag is need to make sure the win odds are
calculated correctly.
Default value is FALSE, meaning higher values
are considered advantageous.</p>
</td></tr>
<tr><td><code id="cumulative_plot.hce_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Cumulative plot as a patchwork list. Individual plots can
be accessed like list items (plot[[1]] and plot[[2]]).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rates_A &lt;- c(1.72, 1.74, 0.58, 1.5, 1)
Rates_P &lt;- c(2.47, 2.24, 2.9, 4, 6)
hce_dat &lt;- hce::simHCE(n = 2500, TTE_A = Rates_A, TTE_P = Rates_P,
             CM_A = -3, CM_P = -6, CSD_A = 16, CSD_P = 15, fixedfy = 3,
             seed = 31337)

cumulative_plot(hce_dat)
</code></pre>

<hr>
<h2 id='cumulative_plot.maraca'>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) cumulated for all
outcomes directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.</h2><span id='topic+cumulative_plot.maraca'></span>

<h3>Description</h3>

<p>Generic function to create a plot showing the components used in
calculating win odds (wins and ties) cumulated for all
outcomes directly from a maraca object.
Note that for this plot, when creating the maraca object using the maraca()
function, the argument &quot;compute_win_odds&quot; has to be set to TRUE.
Check the vignette &quot;Maraca Plots - Plotting win odds&quot; for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'maraca'
cumulative_plot(
  x,
  theme = "maraca",
  include = c("win odds", "win ratio"),
  reverse = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cumulative_plot.maraca_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'maraca'.</p>
</td></tr>
<tr><td><code id="cumulative_plot.maraca_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Plotting win odds&quot;.</p>
</td></tr>
<tr><td><code id="cumulative_plot.maraca_+3A_include">include</code></td>
<td>
<p>Vector or single string indicating which statistics to
include in the right hand side plot. Acceptable values are
&quot;win odds&quot; and/or &quot;win ratio&quot;. Default is c(&quot;win odds&quot;, &quot;win ratio&quot;).</p>
</td></tr>
<tr><td><code id="cumulative_plot.maraca_+3A_reverse">reverse</code></td>
<td>
<p>Flag indicating if the cumulated outcomes should be
displayed in order from top to bottom (FALSE, the default)
or in reverse (TRUE).</p>
</td></tr>
<tr><td><code id="cumulative_plot.maraca_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Cumulative plot as a patchwork list. Individual plots can
be accessed like list items (plot[[1]] and plot[[2]]).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(hce_scenario_a)

maraca_dat &lt;- maraca(data = hce_scenario_a,
                     step_outcomes = c("Outcome I", "Outcome II",
                                      "Outcome III", "Outcome IV"),
                     last_outcome = "Continuous outcome",
                     fixed_followup_days = 3 * 365,
                     column_names = c(outcome = "GROUP",
                                      arm = "TRTP",
                                      value = "AVAL0"),
                     arm_levels = c(active = "Active",
                                    control = "Control"),
                     compute_win_odds = TRUE
                     )

cumulative_plot(maraca_dat)

</code></pre>

<hr>
<h2 id='hce_scenario_a'>Example HCE scenario A.</h2><span id='topic+hce_scenario_a'></span>

<h3>Description</h3>

<p>This is example data frame containing the example for scenario A.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(hce_scenario_a)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows.
</p>

<dl>
<dt>SUBJID</dt><dd><p>The patient identifier</p>
</dd>
<dt>GROUP</dt><dd><p>Which type of outcome the row belongs to</p>
</dd>
<dt>GROUPN</dt><dd><p>Not required for computation.
The group as an arbitrary numerical value</p>
</dd>
<dt>AVAL0</dt><dd><p>Contains both the time-to-event data for hard outcomes
and the continuous data for the continuous outcome</p>
</dd>
<dt>AVAL</dt><dd><p>Not required for computation. Create an ordered sequence
of values where the AVAL0 value associated with the patient
is offset by GROUPN</p>
</dd>
<dt>TRTP</dt><dd><p>Treatment group</p>
</dd>
</dl>


<hr>
<h2 id='hce_scenario_b'>Example HCE scenario B.</h2><span id='topic+hce_scenario_b'></span>

<h3>Description</h3>

<p>This is example data frame containing the example for scenario B.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(hce_scenario_b)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows.
</p>

<dl>
<dt>SUBJID</dt><dd><p>The patient identifier</p>
</dd>
<dt>GROUP</dt><dd><p>Which type of outcome the row belongs to</p>
</dd>
<dt>GROUPN</dt><dd><p>Not required for computation.
The group as an arbitrary numerical value</p>
</dd>
<dt>AVAL0</dt><dd><p>Contains both the time-to-event data for hard outcomes
and the continuous data for the continuous outcome</p>
</dd>
<dt>AVAL</dt><dd><p>Not required for computation. Create an ordered sequence
of values where the AVAL0 value associated with the patient
is offset by GROUPN</p>
</dd>
<dt>TRTP</dt><dd><p>Treatment group</p>
</dd>
</dl>


<hr>
<h2 id='hce_scenario_c'>Example HCE scenario C.</h2><span id='topic+hce_scenario_c'></span>

<h3>Description</h3>

<p>This is example data frame containing the example for scenario C.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(hce_scenario_c)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows.
</p>

<dl>
<dt>SUBJID</dt><dd><p>The patient identifier</p>
</dd>
<dt>GROUP</dt><dd><p>Which type of outcome the row belongs to</p>
</dd>
<dt>GROUPN</dt><dd><p>Not required for computation.
The group as an arbitrary numerical value</p>
</dd>
<dt>AVAL0</dt><dd><p>Contains both the time-to-event data for hard outcomes
and the continuous data for the continuous outcome</p>
</dd>
<dt>AVAL</dt><dd><p>Not required for computation. Create an ordered sequence
of values where the AVAL0 value associated with the patient
is offset by GROUPN</p>
</dd>
<dt>TRTP</dt><dd><p>Treatment group</p>
</dd>
</dl>


<hr>
<h2 id='hce_scenario_d'>Example HCE scenario D.</h2><span id='topic+hce_scenario_d'></span>

<h3>Description</h3>

<p>This is example data frame containing the example for scenario D.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(hce_scenario_d)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows.
</p>

<dl>
<dt>SUBJID</dt><dd><p>The patient identifier</p>
</dd>
<dt>GROUP</dt><dd><p>Which type of outcome the row belongs to</p>
</dd>
<dt>GROUPN</dt><dd><p>Not required for computation.
The group as an arbitrary numerical value</p>
</dd>
<dt>AVAL0</dt><dd><p>Contains both the time-to-event data for hard outcomes
and the continuous data for the continuous outcome</p>
</dd>
<dt>AVAL</dt><dd><p>Not required for computation. Create an ordered sequence
of values where the AVAL0 value associated with the patient
is offset by GROUPN</p>
</dd>
<dt>TRTP</dt><dd><p>Treatment group</p>
</dd>
</dl>


<hr>
<h2 id='hce_scenario_kccq3'>Example HCE scenario KCCQ3.</h2><span id='topic+hce_scenario_kccq3'></span>

<h3>Description</h3>

<p>This is example data frame containing the example for scenario KCCQ3.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(hce_scenario_kccq3)
</code></pre>


<h3>Format</h3>

<p>A data frame with 5000 rows.
</p>

<dl>
<dt>SUBJID</dt><dd><p>The patient identifier</p>
</dd>
<dt>GROUP</dt><dd><p>Which type of outcome the row belongs to</p>
</dd>
<dt>GROUPN</dt><dd><p>Not required for computation.
The group as an arbitrary numerical value</p>
</dd>
<dt>AVAL0</dt><dd><p>Contains both the time-to-event data for hard outcomes
and the continuous data for the continuous outcome</p>
</dd>
<dt>AVAL</dt><dd><p>Not required for computation. Create an ordered sequence
of values where the AVAL0 value associated with the patient
is offset by GROUPN</p>
</dd>
<dt>TRTP</dt><dd><p>Treatment group</p>
</dd>
<dt>HFHT</dt><dd><p>Not needed</p>
</dd>
<dt>SEED</dt><dd><p>Not needed</p>
</dd>
</dl>


<hr>
<h2 id='maraca'>maraca package.</h2><span id='topic+maraca'></span><span id='topic+maraca-package'></span><span id='topic+print.maraca'></span>

<h3>Description</h3>

<p>Creates the maraca analysis object as an S3 object of
class 'maraca'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maraca(
  data,
  step_outcomes,
  last_outcome,
  arm_levels = c(active = "active", control = "control"),
  column_names = c(outcome = "outcome", arm = "arm", value = "value"),
  fixed_followup_days = NULL,
  compute_win_odds = FALSE,
  step_types = "tte",
  last_type = "continuous",
  lowerBetter = FALSE,
  tte_outcomes = lifecycle::deprecated(),
  continuous_outcome = lifecycle::deprecated()
)

## S3 method for class 'maraca'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maraca_+3A_data">data</code></td>
<td>
<p>A data frame with columns for the following information:
- outcome column, containing the time-to-event and continuous
labels
- arm column, containing the arm a given row belongs to.
- value column, containing the values.</p>
</td></tr>
<tr><td><code id="maraca_+3A_step_outcomes">step_outcomes</code></td>
<td>
<p>A vector of strings containing the outcome labels
for all outcomes displayed as part of the step function
on the left side of the plot.
The order is kept for the plot.</p>
</td></tr>
<tr><td><code id="maraca_+3A_last_outcome">last_outcome</code></td>
<td>
<p>A single string containing the last outcome label
displayed on the right side of the plot.</p>
</td></tr>
<tr><td><code id="maraca_+3A_arm_levels">arm_levels</code></td>
<td>
<p>A named vector of exactly two strings, mapping the
values used for the active and control arms to the values
used in the data. The names must be &quot;active&quot; and &quot;control&quot;
in this order. Note that this parameter only need to
be specified if you have labels different from
&quot;active&quot; and &quot;control&quot;.</p>
</td></tr>
<tr><td><code id="maraca_+3A_column_names">column_names</code></td>
<td>
<p>A named vector to map the
outcome, arm, value to the associated column names
in the data. The vector names must match in order &quot;outcome&quot;, &quot;arm&quot;,
and &quot;value&quot;. Note that this parameter only need to be
specified if you have column names different from the ones above.</p>
</td></tr>
<tr><td><code id="maraca_+3A_fixed_followup_days">fixed_followup_days</code></td>
<td>
<p>A mandatory specification of the fixed follow-up
days in the study. Can be a single integer value
for all tte-outcomes or a vector with one
integer value per tte-outcome.</p>
</td></tr>
<tr><td><code id="maraca_+3A_compute_win_odds">compute_win_odds</code></td>
<td>
<p>If TRUE compute the win odds, otherwise (default)
don't compute them.</p>
</td></tr>
<tr><td><code id="maraca_+3A_step_types">step_types</code></td>
<td>
<p>The type of each outcome in the step_outcomes vector.
Can be a single string (if all outcomes of same type) or
a vector of same length as step_outcomes. Possible values
in the vector are &quot;tte&quot; (default) or &quot;binary&quot;.</p>
</td></tr>
<tr><td><code id="maraca_+3A_last_type">last_type</code></td>
<td>
<p>A single string giving the type of the last outcome.
Possible values are &quot;continuous&quot; (default), &quot;binary&quot; or
&quot;multinomial&quot;.</p>
</td></tr>
<tr><td><code id="maraca_+3A_lowerbetter">lowerBetter</code></td>
<td>
<p>Flag for the final outcome variable, indicating if
lower values are considered better/advantageous.
This flag is need to make sure the win odds are
calculated correctly.
Default value is FALSE, meaning higher values
are considered advantageous.</p>
</td></tr>
<tr><td><code id="maraca_+3A_tte_outcomes">tte_outcomes</code></td>
<td>
<p>Deprecated and substituted by the more general
'step_outcomes'. A vector of strings containing the
time-to-event outcome labels. The order is kept for the
plot.</p>
</td></tr>
<tr><td><code id="maraca_+3A_continuous_outcome">continuous_outcome</code></td>
<td>
<p>Deprecated and substituted by the more general
'last_outcome'. A single string containing the
continuous outcome label.</p>
</td></tr>
<tr><td><code id="maraca_+3A_x">x</code></td>
<td>
<p>an object of class maraca</p>
</td></tr>
<tr><td><code id="maraca_+3A_...">...</code></td>
<td>
<p>further arguments passed to or
from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class 'maraca'. The object information must be
considered private.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hce_scenario_a)
hce_test &lt;- maraca(
  data = hce_scenario_a,
  step_outcomes = c("Outcome I", "Outcome II", "Outcome III", "Outcome IV"),
  last_outcome = "Continuous outcome",
  fixed_followup_days = 3 * 365,
  column_names = c(outcome = "GROUP", arm = "TRTP", value = "AVAL0"),
  arm_levels = c(active = "Active", control = "Control"),
  compute_win_odds = TRUE
)
</code></pre>

<hr>
<h2 id='plot_maraca'>Creates and returns the plot of the maraca data.</h2><span id='topic+plot_maraca'></span>

<h3>Description</h3>

<p>Creates and returns the plot of the maraca data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_maraca(
  obj,
  continuous_grid_spacing_x = NULL,
  trans = c("identity", "log", "log10", "sqrt", "reverse")[1],
  density_plot_type = c("default", "violin", "box", "scatter")[1],
  vline_type = NULL,
  theme = "maraca"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_maraca_+3A_obj">obj</code></td>
<td>
<p>an object of S3 class 'maraca'</p>
</td></tr>
<tr><td><code id="plot_maraca_+3A_continuous_grid_spacing_x">continuous_grid_spacing_x</code></td>
<td>
<p>The spacing of the x grid to use for the
continuous section of the plot.</p>
</td></tr>
<tr><td><code id="plot_maraca_+3A_trans">trans</code></td>
<td>
<p>the transformation to apply to the x-axis scale for the last
outcome. Possible values are &quot;identity&quot;, &quot;log&quot; (only for continuous
endpoint), &quot;log10&quot; (only for continuous endpoint), &quot;sqrt&quot; (only for
continuous endpoint) and &quot;reverse&quot;. The default value is &quot;identity&quot;.</p>
</td></tr>
<tr><td><code id="plot_maraca_+3A_density_plot_type">density_plot_type</code></td>
<td>
<p>which type of plot to display in the continuous
part of the plot. Options are &quot;default&quot;, &quot;violin&quot;, &quot;box&quot;, &quot;scatter&quot;.</p>
</td></tr>
<tr><td><code id="plot_maraca_+3A_vline_type">vline_type</code></td>
<td>
<p>what the vertical dashed line should represent. Accepts
&quot;median&quot; (only for continuous last endpoint), &quot;mean&quot;, &quot;none&quot; and
NULL (default). By default (vline_type = NULL), vline_type will be
set to &quot;median&quot; for a continuous last endpoint and to &quot;mean&quot; for
a binary last endpoint.</p>
</td></tr>
<tr><td><code id="plot_maraca_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;maraca_old&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Themes and Styling&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot2 object of the data. This function
will not render the plot immediately. You have to print() the returned
object for it to be displayed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hce_scenario_a)
hce_test &lt;- maraca(
  data = hce_scenario_a,
  step_outcomes = c("Outcome I", "Outcome II", "Outcome III", "Outcome IV"),
  last_outcome = "Continuous outcome",
  fixed_followup_days = 3 * 365,
  column_names = c(outcome = "GROUP", arm = "TRTP", value = "AVAL0"),
  arm_levels = c(active = "Active", control = "Control"),
  compute_win_odds = TRUE
)
plot &lt;- plot_maraca(hce_test)
</code></pre>

<hr>
<h2 id='plot.hce'>Generic function to plot the hce object using plot().</h2><span id='topic+plot.hce'></span>

<h3>Description</h3>

<p>Generic function to plot the hce object using plot().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
plot(
  x,
  step_outcomes = NULL,
  last_outcome = "C",
  arm_levels = c(active = "A", control = "P"),
  continuous_grid_spacing_x = 10,
  trans = c("identity", "log", "log10", "sqrt", "reverse")[1],
  density_plot_type = c("default", "violin", "box", "scatter")[1],
  vline_type = NULL,
  fixed_followup_days = NULL,
  compute_win_odds = FALSE,
  step_types = "tte",
  last_type = "continuous",
  theme = "maraca",
  lowerBetter = FALSE,
  tte_outcomes = lifecycle::deprecated(),
  continuous_outcome = lifecycle::deprecated(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.hce_+3A_x">x</code></td>
<td>
<p>an object of S3 class 'hce'.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_step_outcomes">step_outcomes</code></td>
<td>
<p>A vector of strings containing the outcome labels
for all outcomes displayed as part of the step function
on the left side of the plot.
The order is kept for the plot.
By default (when set to NULL) this is automatically
updated by taking the non-continuous outcomes from
the GROUP variable in alphabetical order.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_last_outcome">last_outcome</code></td>
<td>
<p>A single string containing the last outcome label
displayed on the right side of the plot.
Default value &quot;C&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_arm_levels">arm_levels</code></td>
<td>
<p>A named vector of exactly two strings, mapping the
values used for the active and control arms to the values
used in the data. The names must be &quot;active&quot; and &quot;control&quot;
in this order. Note that this parameter only need to
be specified if you have labels different from
&quot;active&quot; and &quot;control&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_continuous_grid_spacing_x">continuous_grid_spacing_x</code></td>
<td>
<p>The spacing of the x grid to use for the
continuous section of the plot.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_trans">trans</code></td>
<td>
<p>the transformation to apply to the x-axis scale for the last
outcome. Possible values are &quot;identity&quot;, &quot;log&quot; (only for continuous
endpoint), &quot;log10&quot; (only for continuous endpoint), &quot;sqrt&quot; (only for
continuous endpoint) and &quot;reverse&quot;. The default value is &quot;identity&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_density_plot_type">density_plot_type</code></td>
<td>
<p>The type of plot to use to represent the density.
Accepts &quot;default&quot;, &quot;violin&quot;, &quot;box&quot; and &quot;scatter&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_vline_type">vline_type</code></td>
<td>
<p>what the vertical dashed line should represent. Accepts
&quot;median&quot; (only for continuous last endpoint), &quot;mean&quot;, &quot;none&quot; and
NULL (default). By default (vline_type = NULL), vline_type will be
set to &quot;median&quot; for a continuous last endpoint and to &quot;mean&quot; for
a binary last endpoint.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_fixed_followup_days">fixed_followup_days</code></td>
<td>
<p>Not needed if HCE object contains information
on fixed follow-up days in the study
(column PADY or TTEfixed,
depending on hce version).
Otherwise, this argument must be specified
to give the fixed follow-up days in the study.
Can be a single integer value
for all tte-outcomes or a vector with one
integer value per tte-outcome.
Note: If argument is specified and HCE object
also contains PADY or TTEfixed column, then
fixed_followup_days argument is used.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_compute_win_odds">compute_win_odds</code></td>
<td>
<p>If TRUE compute the win odds, otherwise (default)
don't compute them.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_step_types">step_types</code></td>
<td>
<p>The type of each outcome in the step_outcomes vector.
Can be a single string (if all outcomes of same type) or
a vector of same length as step_outcomes. Possible values
in the vector are &quot;tte&quot; (default) or &quot;binary&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_last_type">last_type</code></td>
<td>
<p>A single string giving the type of the last outcome.
Possible values are &quot;continuous&quot; (default), &quot;binary&quot; or
&quot;multinomial&quot;.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;maraca_old&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Themes and Styling&quot;.
[companion vignette for package users](themes.html)</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_lowerbetter">lowerBetter</code></td>
<td>
<p>Flag for the final outcome variable, indicating if
lower values are considered better/advantageous.
This flag is need to make sure the win odds are
calculated correctly.
Default value is FALSE, meaning higher values
are considered advantageous.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_tte_outcomes">tte_outcomes</code></td>
<td>
<p>Deprecated and substituted by the more general
'step_outcomes'. A vector of strings containing the
time-to-event outcome labels. The order is kept for the
plot.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_continuous_outcome">continuous_outcome</code></td>
<td>
<p>Deprecated and substituted by the more general
'last_outcome'. A single string containing the
continuous outcome label.</p>
</td></tr>
<tr><td><code id="plot.hce_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ggplot2 plot of the hce object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rates_A &lt;- c(1.72, 1.74, 0.58, 1.5, 1)
Rates_P &lt;- c(2.47, 2.24, 2.9, 4, 6)
hce_dat &lt;- hce::simHCE(n = 2500, TTE_A = Rates_A, TTE_P = Rates_P,
             CM_A = -3, CM_P = -6, CSD_A = 16, CSD_P = 15, fixedfy = 3,
             seed = 31337)
plot(hce_dat)
plot(hce_dat, fixed_followup_days = 3 * 365)

</code></pre>

<hr>
<h2 id='plot.maraca'>Generic function to plot the maraca object using plot().</h2><span id='topic+plot.maraca'></span>

<h3>Description</h3>

<p>Generic function to plot the maraca object using plot().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'maraca'
plot(
  x,
  continuous_grid_spacing_x = 10,
  trans = c("identity", "log", "log10", "sqrt", "reverse")[1],
  density_plot_type = c("default", "violin", "box", "scatter")[1],
  vline_type = NULL,
  theme = "maraca",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.maraca_+3A_x">x</code></td>
<td>
<p>An object of S3 class 'maraca'.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_continuous_grid_spacing_x">continuous_grid_spacing_x</code></td>
<td>
<p>The spacing of the x grid to use for the
continuous section of the plot.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_trans">trans</code></td>
<td>
<p>the transformation to apply to the x-axis scale for the last
outcome. Possible values are &quot;identity&quot;, &quot;log&quot; (only for continuous
endpoint), &quot;log10&quot; (only for continuous endpoint), &quot;sqrt&quot; (only for
continuous endpoint) and &quot;reverse&quot;. The default value is &quot;identity&quot;.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_density_plot_type">density_plot_type</code></td>
<td>
<p>The type of plot to use to represent the density.
Accepts &quot;default&quot;, &quot;violin&quot;, &quot;box&quot; and &quot;scatter&quot;.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_vline_type">vline_type</code></td>
<td>
<p>what the vertical dashed line should represent. Accepts
&quot;median&quot; (only for continuous last endpoint), &quot;mean&quot;, &quot;none&quot; and
NULL (default). By default (vline_type = NULL), vline_type will be
set to &quot;median&quot; for a continuous last endpoint and to &quot;mean&quot; for
a binary last endpoint.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_theme">theme</code></td>
<td>
<p>Choose theme to style the plot. The default theme is &quot;maraca&quot;.
Options are &quot;maraca&quot;, &quot;maraca_old&quot;, &quot;color1&quot;, &quot;color2&quot; and none&quot;.
For more details, check the vignette called
&quot;Maraca Plots - Themes and Styling&quot;.</p>
</td></tr>
<tr><td><code id="plot.maraca_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ggplot2 plot of the maraca object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hce_scenario_a)
hce_test &lt;- maraca(
  data = hce_scenario_a,
  step_outcomes = c("Outcome I", "Outcome II", "Outcome III", "Outcome IV"),
  last_outcome = "Continuous outcome",
  fixed_followup_days = 3 * 365,
  column_names = c(outcome = "GROUP", arm = "TRTP", value = "AVAL0"),
  arm_levels = c(active = "Active", control = "Control"),
  compute_win_odds = TRUE
)
plot(hce_test)

</code></pre>

<hr>
<h2 id='validate_maraca_plot'>Generic function to generate validation data for the maraca plot object.</h2><span id='topic+validate_maraca_plot'></span>

<h3>Description</h3>

<p>This will produce the 4 validation datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_maraca_plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_maraca_plot_+3A_x">x</code></td>
<td>
<p>An object of S3 class 'maracaPlot'.</p>
</td></tr>
<tr><td><code id="validate_maraca_plot_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Creates a list of datasets for validation purposes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hce_scenario_a)
hce_test &lt;- maraca(
  data = hce_scenario_a,
  step_outcomes = c("Outcome I", "Outcome II", "Outcome III", "Outcome IV"),
  last_outcome = "Continuous outcome",
  fixed_followup_days = 3 * 365,
  column_names = c(outcome = "GROUP", arm = "TRTP", value = "AVAL0"),
  arm_levels = c(active = "Active", control = "Control"),
  compute_win_odds = TRUE
)
p &lt;- plot(hce_test)
validate_maraca_plot(p)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
