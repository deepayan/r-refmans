<!DOCTYPE html><html><head><title>Help for package SWTools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SWTools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SWTools'><p>SWTools: Helper Tools for Australian Hydrologists</p></a></li>
<li><a href='#AQWPDownload'><p>Function to download data from https://water.data.sa.gov.au</p></a></li>
<li><a href='#AQWPLoad'><p>Function to load in an Aquarius json file, downloaded from https://water.data.sa.gov.au, possibly using AWQPDownload()</p></a></li>
<li><a href='#read_res.csv'><p>Function to import a Source .res.csv File</p>
Returns data (as a Data Frame,  Zoo, or tibble) as a time Series with all Results
Read Source .res.csv file into a data table or zoo time series</a></li>
<li><a href='#SILOCheckConsistency'><p>Check for homogeneity between SILO rainfall station data</p></a></li>
<li><a href='#SILOCorrectSite'><p>Correct a slope change in a rainfall data set based on another site</p></a></li>
<li><a href='#SILOCumulativeDeviation'><p>Plot the cumulative deviation from the mean for each silo station on one plot</p></a></li>
<li><a href='#SILODoubleMass'><p>Plot double mass curves of each rainfall site against each other</p></a></li>
<li><a href='#SILODownload'><p>Download SILO data</p></a></li>
<li><a href='#SILOImport'><p>Import a SILO file</p></a></li>
<li><a href='#SILOLoad'><p>Import multiple SILO files</p></a></li>
<li><a href='#SILOMap'><p>Plot a map of the SILO station locations</p></a></li>
<li><a href='#SILOMonthlyRainfall'><p>Plot a boxplot of monthly rainfall with mean monthly evaporation</p></a></li>
<li><a href='#SILOMortonQualityCodes'><p>Plot the quality codes of the input data for Morton's Evap calculations</p></a></li>
<li><a href='#SILOQualityCodes'><p>Plot the quality codes of the SILO rainfall data</p></a></li>
<li><a href='#SILOReport'><p>Write SILO data report to word document. The report includes output from SILOSiteSummary(), SILOQualityCodes(),</p>
SILOMortonQualityCodes(). SILOMap(), SILOMonthlyRainfall(), SILOCumulativeDeviation() and SILODoubleMass().</a></li>
<li><a href='#SILOSitesfromPolygon'><p>Find SILO sites within a polygon</p></a></li>
<li><a href='#SILOSiteSummary'><p>Produce a table summarising  SILO sites</p></a></li>
<li><a href='#SILOThiessenShp'><p>Function to generate Thiessen polygons from SILO sites</p></a></li>
<li><a href='#SILOWriteforSource'><p>Write a SILO time series to a csv file in the format expected by eWater Source</p></a></li>
<li><a href='#SILOWriteFunctionsforSource'><p>Function to bulk create functions for SILO data in Source.</p></a></li>
<li><a href='#VeneerGetInputSets'><p>Get vector of InputSets</p></a></li>
<li><a href='#VeneerGetNodesbyType'><p>Get a vector of node names for a given type</p></a></li>
<li><a href='#VeneerGetPiecewise'><p>Get data from a Source piecewise table using Veneer</p></a></li>
<li><a href='#VeneerGetTS'><p>Get a time series result from Source using Veneer</p></a></li>
<li><a href='#VeneerGetTSbyNode'><p>Get all time series recorded in Source for a given node</p></a></li>
<li><a href='#VeneerGetTSbyVariable'><p>Get all time series recorded in Source of a given variable type</p></a></li>
<li><a href='#VeneerGetTSVariables'><p>Get a vector of the type of time series variables recorded</p></a></li>
<li><a href='#VeneerlatestRunNumber'><p>Get the number of the latest run</p></a></li>
<li><a href='#VeneerRunSource'><p>Run Source using Veneer</p></a></li>
<li><a href='#VeneerSetFunction'><p>Update a function value or expression. Function must exist before being updated.</p></a></li>
<li><a href='#VeneerSetPiecewise'><p>Change a Source piecewise table using Veneer</p></a></li>
<li><a href='#WritepwtoIS'><p>Write an input set line for a piecewise lookup table from a csv file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Helper Tools for Australian Hydrologists</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Matt Gibbs [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matt Gibbs &lt;gibbs.ms@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/matt-s-gibbs/SWTools">https://github.com/matt-s-gibbs/SWTools</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/matt-s-gibbs/swtools/issues">https://github.com/matt-s-gibbs/swtools/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to speed up work flow for hydrological analysis. 
    Focused on Australian climate data (SILO climate data), hydrological models (eWater Source) and in particular South Australia (<a href="https://water.data.sa.gov.au">https://water.data.sa.gov.au</a> hydrological data).</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, zoo, dplyr, tidyr, readr, tibble, forcats, stringr,
rlang, rmarkdown, reshape2, ggplot2, ggmap, magrittr, hydroTSM,
jsonlite, sf, sp, lubridate, segmented</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-02 08:18:31 UTC; gib417</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-02 09:30:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='SWTools'>SWTools: Helper Tools for Australian Hydrologists</h2><span id='topic+SWTools'></span><span id='topic+SWTools-package'></span>

<h3>Description</h3>

<p>Functions to speed up workflow for hydrological analysis. 
Focused on Australian climate data (SILO climate data), hydrological models (eWater Source) and South Australian hydrological data 
(from <a href="https://water.data.sa.gov.au">Water Data SA</a>).
</p>


<h3>SILO functions</h3>

<p>SILO is a database of Australian climate data from 1889 to the present. It provides daily meteorological datasets for a range of climate variables 
in ready-to-use formats suitable for biophysical modelling, research and climate applications <a href="https://www.longpaddock.qld.gov.au/silo/">SILO Website</a>.
</p>
<p>These functions allow SILO data to be downloaded from the <a href="https://www.longpaddock.qld.gov.au/silo/">SILO Website</a>, imported into R, 
calculate some basic statistics and undertake some quality assurance tests to easily visualise how much data has been interpolated, and to compare nearby sites to identify potential data issues.
<code><a href="#topic+SILODownload">SILODownload</a></code>,<code><a href="#topic+SILOLoad">SILOLoad</a></code> and <code><a href="#topic+SILOReport">SILOReport</a></code> functions allow a vector of SILO sites to be downloaded and summarised in a Microsoft Word report.
</p>


<h3>Source and Veneer functions</h3>

<p><a href="https://ewater.org.au/products/ewater-source/">eWater Source</a> is the Australia's national hydrological modelling platform, and is increasing in use around the world.
Functions are included to write SILO climate data to the format expected for Source <code><a href="#topic+SILOWriteforSource">SILOWriteforSource</a></code>,
and reading in model outputs, <code><a href="#topic+read_res.csv">read_res.csv</a></code>.
</p>
<p><a href="https://www.flowmatters.com.au/articles/introducing_veneer.html">Veneer</a> is a RESTful API for interacting with Source models.
Functions are included that are wrappers for Veneer, to build URLs to get or set data in the Source model, and process the json object returned.
</p>


<h3>Aquarius functions</h3>

<p>South Australia's hydrological data is hosted on <a href="https://water.data.sa.gov.au">Water Data SA</a>. 
The <a href="https://water.data.sa.gov.au/Data/Export">Export link</a> creates URLs that enable multiple datasets to be downloaded.
<code><a href="#topic+AQWPDownload">AQWPDownload</a></code> builds these URLs to download data in json format, and <code><a href="#topic+AQWPLoad">AQWPLoad</a></code> loads this json file into the R interface.
</p>

<hr>
<h2 id='AQWPDownload'>Function to download data from https://water.data.sa.gov.au</h2><span id='topic+AQWPDownload'></span>

<h3>Description</h3>

<p>For most inputs, valid options will be returned if an unexpected input is provided. 
The exception are <strong>Location</strong> and <strong>Dataset</strong>, if the location, or dataset for that location, don't exist no data will be returned.
Browse the Export tab on https://water.data.sa.gov.au to find <strong>Location</strong> and <strong>Dataset</strong> that exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AQWPDownload(
  Location,
  Dataset,
  Unit,
  file = "AQWP.json",
  Interval = "Daily",
  Calculation = "Aggregate",
  Calendar = "CALENDARYEAR",
  Step = 1,
  DateRange = "EntirePeriodOfRecord",
  StartTime = NULL,
  EndTime = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AQWPDownload_+3A_location">Location</code></td>
<td>
<p>A string or vector of strings, with site numbers, e.g. &quot;A4261001&quot;</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_dataset">Dataset</code></td>
<td>
<p>A string or vector of strings, with dataset names, as expected by AWQP, e.g. &quot;Tide Height.Best Available&ndash;Continuous&quot;</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_unit">Unit</code></td>
<td>
<p>A string or vector of strings, with units, e.g. &quot;Metres&quot; or &quot;mg/L&quot;. If only 1 is string is provided it will be used for each site in Location</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_file">file</code></td>
<td>
<p>Location and name of json file to download. Defaults to &quot;AQWP.json&quot;.</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_interval">Interval</code></td>
<td>
<p>Interval of output, e.g. &quot;PointsAsRecorded&quot;, or &quot;Daily&quot;</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_calculation">Calculation</code></td>
<td>
<p>For larger intervals, what calculation to do, e.g. &quot;Aggregate&quot; (average) or &quot;Maximum&quot;</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_calendar">Calendar</code></td>
<td>
<p>When to start the periods, e.g. &quot;WATERDAY9AM&quot;</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_step">Step</code></td>
<td>
<p>How many intervals e.g. 15 with Interval=&quot;Minutely&quot; returns 15 minute data.</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_daterange">DateRange</code></td>
<td>
<p>Period of data to return, e.g. &quot;EntirePeriodOfRecord&quot; or &quot;Custom&quot;. &quot;Years1&quot; seems to not work on AWQP.</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_starttime">StartTime</code></td>
<td>
<p>Start Date and Time if DateRange=&quot;Custom&quot;, in a format that as.POSIXct will convert, e.g 2000-01-01 00:00</p>
</td></tr>
<tr><td><code id="AQWPDownload_+3A_endtime">EndTime</code></td>
<td>
<p>End Date and Time if DateRange=&quot;Custom&quot;, in a format that as.POSIXct will convert, e.g 2001-01-02 00:00</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The lnk created to download the data, which is useful for debugging. The data is saved to &quot;file&quot;, that can then be read in with AQWPLoad()
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Location=c("A4260633","A4261209","A4260572")
Dataset=rep("Tide Height.Best Available--Continuous",3)
Unit=rep("Metres",3)
S="2020-01-01 00:00"
E="2020-01-02 00:00"
AQWPDownload(Location,Dataset,Unit,DateRange="Custom",
StartTime=S,EndTime=E,file=tempfile("AQWP",fileext=".json"))

## End(Not run)

</code></pre>

<hr>
<h2 id='AQWPLoad'>Function to load in an Aquarius json file, downloaded from https://water.data.sa.gov.au, possibly using AWQPDownload()</h2><span id='topic+AQWPLoad'></span>

<h3>Description</h3>

<p>Function to load in an Aquarius json file, downloaded from https://water.data.sa.gov.au, possibly using AWQPDownload()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AQWPLoad(filename, qual_codes = TRUE, long_format = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AQWPLoad_+3A_filename">filename</code></td>
<td>
<p>A file downloaded from the Export Data tab on https://water.data.sa.gov.au, or using AQWPDownload()</p>
</td></tr>
<tr><td><code id="AQWPLoad_+3A_qual_codes">qual_codes</code></td>
<td>
<p>TRUE/FALSE to return quality codes. Defaults to true</p>
</td></tr>
<tr><td><code id="AQWPLoad_+3A_long_format">long_format</code></td>
<td>
<p>TRUE/FALSE to return data in long format, rather than wide (e.g. a spreadsheet). Long is useful for plotting with ggplot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the data in the file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
AQWPLoad("AQWP.json")

## End(Not run)

</code></pre>

<hr>
<h2 id='read_res.csv'>Function to import a Source .res.csv File
Returns data (as a Data Frame,  Zoo, or tibble) as a time Series with all Results
Read Source .res.csv file into a data table or zoo time series</h2><span id='topic+read_res.csv'></span>

<h3>Description</h3>

<p>Function to import a Source .res.csv File
Returns data (as a Data Frame,  Zoo, or tibble) as a time Series with all Results
Read Source .res.csv file into a data table or zoo time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_res.csv(resFile, returnType = "df")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_res.csv_+3A_resfile">resFile</code></td>
<td>
<p>A character string representing the full file path of the .res.csv file</p>
</td></tr>
<tr><td><code id="read_res.csv_+3A_returntype">returnType</code></td>
<td>
<p>A character string to set the return type: &quot;z&quot;, &quot;t&quot;, &quot;df&quot;. If not matching &quot;t&quot; (tibble) or &quot;z&quot; (zoo), data frame returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data in the format selected with all data read in from the Source .res.csv file
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X = read_res.csv("./SWTools/extdata/Scenario1.res.csv",returnType="t")

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOCheckConsistency'>Check for homogeneity between SILO rainfall station data</h2><span id='topic+SILOCheckConsistency'></span>

<h3>Description</h3>

<p>Compute tests on rainfall double mass curves and cumulative deviation in annual rainfall totals to test for consistency between a rainfall station and the average of another group of stations.
Non-homogeneity can occur for a number of reasons, such as interception from vegetation or buildings over time, moving of a station location, or due to interpolation of missing data or station closure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOCheckConsistency(X, folder = NA, pvallim = 0.05, changelim = 0.025)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOCheckConsistency_+3A_x">X</code></td>
<td>
<p>A list of SILO station data, in the format created by <code><a href="#topic+SILOLoad">SILOLoad</a></code></p>
</td></tr>
<tr><td><code id="SILOCheckConsistency_+3A_folder">folder</code></td>
<td>
<p>Path to folder to save resulting images to. Will be created if it doesn't exist</p>
</td></tr>
<tr><td><code id="SILOCheckConsistency_+3A_pvallim">pvallim</code></td>
<td>
<p>p value limit of the break point detection to display the double mass break point. Defaults to p=0.05</p>
</td></tr>
<tr><td><code id="SILOCheckConsistency_+3A_changelim">changelim</code></td>
<td>
<p>significant slope limit display the double mass break point. Defaults to a slope change of 0.025</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Two tests are calculated by <code>SILOCheckConsistency</code>, which are outlined in [Annex 4](https://www.fao.org/3/x0490e/x0490e0l.htm#annex
</p>
<p>The first considers the residual errors in annual rainfall at a station, compared to the straight line (intercept=0) regression with the average annual rainfall from the other sites in <code>X</code>. 
The residuals should follow a normal distribution with mean zero and standard deviation s_y,x. The annual rainfall data is plotted to visually assess the homoscedasticity requirement (constant variance).
Ellipses for 80% and 95% confidence in rejecting the homogeneity hypothesis are plotted on the cumulative residuals figure. 
</p>
<p>The second test tests for a break point in the plot of cumulative annual rainfall, commonly referred to as a double-mass analysis. 
This analysis is outlined in Allen et al. (1998) and also Chang and Lee (1974). A bootstraped estimate of any breakpoint in the double-mass plot, indicating a change in the relationship between rainfall at the station and the average of all other stations,
is assessed using the method of Muggeo (2003), as provided in <a href="segmented.html#topic+segmented">segmented</a>.
</p>


<h3>Value</h3>

<p>If folder is not specified (or <code>NA</code>) the plots are shown in the R environment. If folder is specified, a figure for each station in <code>X</code> is saved to <code>folder</code>. There are 4 panels on the figure:
</p>

<ul>
<li><p> Annual rainfall for a given station, against the average across all stations in X (except the station presented).
</p>
</li>
<li><p> Cumulative residuals of the annual rainfall from the straight line regression shown in the first panel. Assuming the residuals are are independent random variables, this figure include ellipses representing 80th and 95th percentile that the hypothesis that there is no change in slope can be rejected.
</p>
</li>
<li><p> double mass curve, plotting the cumulative annual rainfall for the station against the station average. If a breakpoint is identified, this is displayed on the plot.The colours represent the median quality code for each year, with the same colour palette as <code><a href="#topic+SILOQualityCodes">SILOQualityCodes</a></code>
</p>
</li>
<li><p> Residuals of the cumulative rainfall from the straight line fitted to the double mass curve.
</p>
</li></ul>



<h3>References</h3>

<p>Chang, M., and Lee, R. (1974) Objective double-mass analysis, Water Resour. Res., 10( 6), 1123-1126, doi:10.1029/WR010i006p01123.
</p>
<p>Allan, R., Pereira, L. and Smith, M. (1998) Crop evapotranspiration-Guidelines for computing crop water requirements-FAO Irrigation and drainage paper 56. 
</p>
<p>Muggeo, V.M.R. (2003) Estimating regression models with unknown break-points. Statistics in Medicine 22, 3055-3071.
</p>


<h3>See Also</h3>

<p><a href="#topic+SILOLoad">SILOLoad</a>, <a href="#topic+SILOSiteSummary">SILOSiteSummary</a>, <a href="#topic+SILOQualityCodes">SILOQualityCodes</a>,<a href="#topic+SILOCorrectSite">SILOCorrectSite</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
SILOCheckConsistency(X,tempdir())

## End(Not run)
</code></pre>

<hr>
<h2 id='SILOCorrectSite'>Correct a slope change in a rainfall data set based on another site</h2><span id='topic+SILOCorrectSite'></span>

<h3>Description</h3>

<p>If the break point of a non-homogenous rainfall station has been identified (potentially using <a href="#topic+SILOCheckConsistency">SILOCheckConsistency</a>), correct the data on one side of the breakpoint
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOCorrectSite(
  X,
  s_correct,
  s_reference,
  year_break,
  year_start = NULL,
  year_end = NULL,
  after = TRUE,
  plot = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOCorrectSite_+3A_x">X</code></td>
<td>
<p>A list of SILO station data, in the format created by <code><a href="#topic+SILOLoad">SILOLoad</a></code></p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_s_correct">s_correct</code></td>
<td>
<p>Station number that exists in <code>X</code> to correct</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_s_reference">s_reference</code></td>
<td>
<p>Station number that exists in <code>X</code> to used for the correction</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_year_break">year_break</code></td>
<td>
<p>year in the time series that the break points exists</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_year_start">year_start</code></td>
<td>
<p>first year of data (before <code>year_break</code>) to to develop the first linear regression between <code>s_correct</code> and <code>s_reference</code>. Defaults to the start of the dataset</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_year_end">year_end</code></td>
<td>
<p>last year of data (after <code>year_break</code>) to to develop the second linear regression between <code>s_correct</code> and <code>s_reference</code>. Defaults to the end of the dataset</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_after">after</code></td>
<td>
<p>TRUE/FALSE value, indicating if the homogeneous data to develop the relationship to correct the non-homogeneous data is after the breakpoint (<code>TRUE</code>) or before (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="SILOCorrectSite_+3A_plot">plot</code></td>
<td>
<p>if specified, the file (including path if necessary) to save a scatter plot of the annual rainfall totals, including regression equations used to correct the non-homogeneous data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method of cumulative residuals outlined in [Annex 4](https://www.fao.org/3/x0490e/x0490e0l.htm#annex
That is, two linear regressions between the annual rainfall totals are calculated <code>P_s_correct~P_s_reference</code> over the periods year_start:year_break and year_break:year_end
For the period to correct (after the breakpoint if <code>after=TRUE</code>) an annual scaling factor is calculated from the ratio of the predicted rainfall total from the two regression equations, based on the rainfall total for each year at the reference site.
This scaling factor is then applied to the daily rainfall data for that year.
</p>


<h3>Value</h3>

<p>A list with the same structure as <code>X</code>, with the element for <code>s_correct</code> updated with the corrections on one side of the breakpoint year.
</p>


<h3>References</h3>

<p>Chang, M., and Lee, R. (1974) Objective double-mass analysis, Water Resour. Res., 10( 6), 1123â€“ 1126, doi:10.1029/WR010i006p01123.
</p>


<h3>See Also</h3>

<p><a href="#topic+SILOLoad">SILOLoad</a>, <a href="#topic+SILOSiteSummary">SILOSiteSummary</a>, <a href="#topic+SILOQualityCodes">SILOQualityCodes</a>,<a href="#topic+SILOCorrectSite">SILOCorrectSite</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
stations&lt;-c("23313","23302","23300","23317","23725","23705")
SILODownload(stations)
X&lt;-SILOLoad(stations,startdate="1891-01-01",enddate="2020-12-31")
X&lt;-SILOCorrectSite(X,"23313","23705",1970,after=FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOCumulativeDeviation'>Plot the cumulative deviation from the mean for each silo station on one plot</h2><span id='topic+SILOCumulativeDeviation'></span>

<h3>Description</h3>

<p>Plot the cumulative deviation from the mean for each silo station on one plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOCumulativeDeviation(SILO, filename = NULL, cols = pkg.env$cols)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOCumulativeDeviation_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOCumulativeDeviation_+3A_filename">filename</code></td>
<td>
<p>optional, filename to write the plot to, including extension (e.g. .png). Filename can include full path or sub folders.</p>
</td></tr>
<tr><td><code id="SILOCumulativeDeviation_+3A_cols">cols</code></td>
<td>
<p>optional, a vector of colours to use for the plotting</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot  plot of the cumulative deviation from the mean.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOCumulativeDeviation(X)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILODoubleMass'>Plot double mass curves of each rainfall site against each other</h2><span id='topic+SILODoubleMass'></span>

<h3>Description</h3>

<p>Plot double mass curves of each rainfall site against each other
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILODoubleMass(SILO, filename = NULL, plotsperpage = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILODoubleMass_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILODoubleMass_+3A_filename">filename</code></td>
<td>
<p>optional, filename to write the plot to, including extension. Filename can include full path or sub folders.</p>
</td></tr>
<tr><td><code id="SILODoubleMass_+3A_plotsperpage">plotsperpage</code></td>
<td>
<p>optional, number of plots to output per element of the list returned. Defaults to 4</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of ggplot objects that plot of the double mass curves of each station in the SILO list against each other. The double mass plot is on the bottom diagonal, and the slope of the line for each case in the upper diagonal. Each list element contains plotsperpage (default to 4) double mass plots, to allow them to be plotted on multiple pages
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILODoubleMass(X)

## End(Not run)
</code></pre>

<hr>
<h2 id='SILODownload'>Download SILO data</h2><span id='topic+SILODownload'></span>

<h3>Description</h3>

<p>Download SILO data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILODownload(
  SiteList,
  username = "noemail@net.com",
  password = "gui",
  path = getwd(),
  startdate = "18890101",
  enddate = NULL,
  ssl = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILODownload_+3A_sitelist">SiteList</code></td>
<td>
<p>A station number or vector of station numbers, as a string (e.g. &quot;24001&quot;)</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_username">username</code></td>
<td>
<p>SILO user name. Defaults to credentials used by https://www.longpaddock.qld.gov.au/silo/point-data/</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_password">password</code></td>
<td>
<p>SILO password</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_path">path</code></td>
<td>
<p>Where to save the output. Will default to getwd() if not specified</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_startdate">startdate</code></td>
<td>
<p>First day of data, in the format &quot;YYYYMMDD&quot;. Will default to the first day of the record &quot;18890101&quot; if not specified</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_enddate">enddate</code></td>
<td>
<p>Last day of data, in the format &quot;YYYYMMDD&quot;. Will default to yesterday if not specified</p>
</td></tr>
<tr><td><code id="SILODownload_+3A_ssl">ssl</code></td>
<td>
<p>if true set ssl_cipher_list to &quot;RC4-SHA&quot; for file download. Seems to be necessary on some machines. default to FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A file for each station will be saved to path, named station number.txt. Nothing is returned to the R environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
SILODownload(c("24001","24002","24003"),
path=tempdir(),
startdate="20180101",enddate="20200101")

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOImport'>Import a SILO file</h2><span id='topic+SILOImport'></span>

<h3>Description</h3>

<p>Import a SILO file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOImport(station, path, startdate, enddate)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOImport_+3A_station">station</code></td>
<td>
<p>Station number (e.g. &quot;24001&quot;) to import. The function expects the file to be called &quot;24001.txt&quot;.</p>
</td></tr>
<tr><td><code id="SILOImport_+3A_path">path</code></td>
<td>
<p>Location where the file is located. Use &quot;/&quot; or &quot;\\&quot; for folders. Defaults to getwd() if not specified.</p>
</td></tr>
<tr><td><code id="SILOImport_+3A_startdate">startdate</code></td>
<td>
<p>Start date of data to load, in format &quot;YYYY-MM-DD&quot;. Defaults to start of the file if not provided</p>
</td></tr>
<tr><td><code id="SILOImport_+3A_enddate">enddate</code></td>
<td>
<p>End date of data to load, in format &quot;YYYY-MM-DD&quot;. Defaults to end of the file if not provided</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of data from the file, with members: 
</p>

<dl>
<dt>tsd</dt><dd><p>the raw data as a daily zoo object</p>
</dd> 
<dt>Site</dt><dd><p>the name of the site</p>
</dd>
<dt>Station</dt><dd><p>the station number</p>
</dd>
<dt>Lon</dt><dd><p>Longitude</p>
</dd>
<dt>Lat</dt><dd><p>Latitude</p>
</dd>
<dt>start</dt><dd><p>the first date with good quality rainfall data</p>
</dd>
<dt>end</dt><dd><p>the last date with good quality rainfall data</p>
</dd>
<dt>goodpct</dt><dd><p>the percentage of good quality coded rainfall data between start and end</p>
</dd>
</dl>


<hr>
<h2 id='SILOLoad'>Import multiple SILO files</h2><span id='topic+SILOLoad'></span>

<h3>Description</h3>

<p>Import multiple SILO files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOLoad(sites, path = getwd(), startdate, enddate)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOLoad_+3A_sites">sites</code></td>
<td>
<p>a vector of Station numbers (e.g. c(&quot;24001&quot;,&quot;24002&quot;,&quot;24003&quot;)) to import. The function expects the file to be called &quot;24001.txt&quot;.</p>
</td></tr>
<tr><td><code id="SILOLoad_+3A_path">path</code></td>
<td>
<p>Location where the file is located. Use &quot;/&quot; or &quot;\\&quot; for folders. Defaults to getwd() if not specified.</p>
</td></tr>
<tr><td><code id="SILOLoad_+3A_startdate">startdate</code></td>
<td>
<p>Start date of data to load, in format &quot;YYYY-MM-DD&quot;. Defaults to start of the file if not provided</p>
</td></tr>
<tr><td><code id="SILOLoad_+3A_enddate">enddate</code></td>
<td>
<p>End date of data to load, in format &quot;YYYY-MM-DD&quot;. Defaults to end of the file if not provided</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of data from the file, with members: 
</p>

<dl>
<dt>tsd</dt><dd><p>the raw data as a daily zoo object</p>
</dd> 
<dt>Site</dt><dd><p>the name of the site</p>
</dd>
<dt>Station</dt><dd><p>the station number</p>
</dd>
<dt>Lon</dt><dd><p>Longitude</p>
</dd>
<dt>Lat</dt><dd><p>Latitude</p>
</dd>
<dt>start</dt><dd><p>the first date with good quality rainfall data</p>
</dd>
<dt>end</dt><dd><p>the last date with good quality rainfall data</p>
</dd>
<dt>goodpct</dt><dd><p>the percentage of good quality coded rainfall data between start and end</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")

## End(Not run)
</code></pre>

<hr>
<h2 id='SILOMap'>Plot a map of the SILO station locations</h2><span id='topic+SILOMap'></span>

<h3>Description</h3>

<p>Plot a map of the SILO station locations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOMap(SILO, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOMap_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOMap_+3A_filename">filename</code></td>
<td>
<p>optional, filename to write the plot to, including extension. Filename can include full path or sub folders.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a google map of the SILO station locations
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOMap(X)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOMonthlyRainfall'>Plot a boxplot of monthly rainfall with mean monthly evaporation</h2><span id='topic+SILOMonthlyRainfall'></span>

<h3>Description</h3>

<p>Plot a boxplot of monthly rainfall with mean monthly evaporation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOMonthlyRainfall(
  SILO,
  evapcol = "Mwet",
  filename = NULL,
  cols = pkg.env$cols
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOMonthlyRainfall_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOMonthlyRainfall_+3A_evapcol">evapcol</code></td>
<td>
<p>name of an evaporation column to plot, defaults to &quot;MWet&quot;.</p>
</td></tr>
<tr><td><code id="SILOMonthlyRainfall_+3A_filename">filename</code></td>
<td>
<p>optional, filename to write the plot to, including extension. Filename can include full path or sub folders.</p>
</td></tr>
<tr><td><code id="SILOMonthlyRainfall_+3A_cols">cols</code></td>
<td>
<p>optional, a vector of colours to use for the plotting</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot of the monthly rainfall and evaporation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOMonthlyRainfall(X,"Span",cols=c("black","red","#124734"))

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOMortonQualityCodes'>Plot the quality codes of the input data for Morton's Evap calculations</h2><span id='topic+SILOMortonQualityCodes'></span>

<h3>Description</h3>

<p>Produces a tile plot displaying the quality codes for variables that are input to the 
calculation of Morton's evaporation equations, being maximum and minimum temperature, solar radiation and vapor pressure (derived from wet bulb temperature).
Evaporation is also plotted, if the site has pan observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOMortonQualityCodes(SILO, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOMortonQualityCodes_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOMortonQualityCodes_+3A_filename">filename</code></td>
<td>
<p>optional, filename to write a plot of the rainfall quality codes to, including extension (e.g. png). Filename can include full path or sub folders.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot geom_tile plot of the rainfall quality codes
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOMortonQualityCodes(X)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOQualityCodes'>Plot the quality codes of the SILO rainfall data</h2><span id='topic+SILOQualityCodes'></span>

<h3>Description</h3>

<p>Plot the quality codes of the SILO rainfall data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOQualityCodes(SILO, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOQualityCodes_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOQualityCodes_+3A_filename">filename</code></td>
<td>
<p>optional, filename to save a plot of the rainfall quality codes to, including extension (e.g. .png). Filename can include full path or sub folders.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot geom_tile plot of the rainfall quality codes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOQualityCodes(X)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOReport'>Write SILO data report to word document. The report includes output from SILOSiteSummary(), SILOQualityCodes(), 
SILOMortonQualityCodes(). SILOMap(), SILOMonthlyRainfall(), SILOCumulativeDeviation() and SILODoubleMass().</h2><span id='topic+SILOReport'></span>

<h3>Description</h3>

<p>Write SILO data report to word document. The report includes output from SILOSiteSummary(), SILOQualityCodes(), 
SILOMortonQualityCodes(). SILOMap(), SILOMonthlyRainfall(), SILOCumulativeDeviation() and SILODoubleMass().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOReport(SILO, filename, path = getwd(), cols = pkg.env$cols)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOReport_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOReport_+3A_filename">filename</code></td>
<td>
<p>filename to write the report to.</p>
</td></tr>
<tr><td><code id="SILOReport_+3A_path">path</code></td>
<td>
<p>Optional. Folder to save the report to, defaults to current working directory</p>
</td></tr>
<tr><td><code id="SILOReport_+3A_cols">cols</code></td>
<td>
<p>Optional. vector of colours to use for the monthly rainfall and cumulative deviation plots. Must be at least as long as the number of sites in the SILO list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the environment. A word document report is written to &quot;filename&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
SILOReport(X,"MyReport.docx") #requires pandoc installed

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOSitesfromPolygon'>Find SILO sites within a polygon</h2><span id='topic+SILOSitesfromPolygon'></span>

<h3>Description</h3>

<p>Find SILO sites within a polygon
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOSitesfromPolygon(shpFile, ssl = FALSE, buffer = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOSitesfromPolygon_+3A_shpfile">shpFile</code></td>
<td>
<p>location to a shapefile to search within for SILO sites</p>
</td></tr>
<tr><td><code id="SILOSitesfromPolygon_+3A_ssl">ssl</code></td>
<td>
<p>See SILODownload, if true if true sets ssl_cipher_list=&quot;RC4-SHA&quot; for httr::GET()</p>
</td></tr>
<tr><td><code id="SILOSitesfromPolygon_+3A_buffer">buffer</code></td>
<td>
<p>distance in km to buffer the shapefile to look for sites outside the catchment
</p>
<p>The buffer distance is approximate for a couple of reasons: the shapefile is projected to match SILO site coordinates,
WGS84 and sf::st_buffer does not correctly buffer longitude/latitude data. sdaf
Also the input distance in km is converted to degrees using the conversion at the equator of 0.008.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a table of site information including site numbers found within the polygon
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Sites=SILOSitesfromPolygon("path/to/shapefile.shp")
SILODownload(Sites$Number,
path=tempdir(),
startdate="20180101",enddate="20200101")
X&lt;-SILOLoad(Sites$Number,path=tempdir())

## End(Not run)
</code></pre>

<hr>
<h2 id='SILOSiteSummary'>Produce a table summarising  SILO sites</h2><span id='topic+SILOSiteSummary'></span>

<h3>Description</h3>

<p>Produce a table summarising  SILO sites
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOSiteSummary(SILO)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOSiteSummary_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe with the following columns
</p>

<dl>
<dt>Site</dt><dd><p>site name</p>
</dd>
<dt>Station</dt><dd><p>station number</p>
</dd>
<dt>StartDate</dt><dd><p>date of the first good quality rainfall data</p>
</dd>
<dt>EndDate</dt><dd><p>date of the last good quality rainfall data</p>
</dd>
<dt>PctMissing</dt><dd><p>percentage of days that do not have good quality code between StartDate and EndDate</p>
</dd>
<dt>AnnualRainfall</dt><dd><p>Mean annual rainfall in mm</p>
</dd>
<dt>Latitute</dt><dd><p>Latitude</p>
</dd>
<dt>Longitude</dt><dd><p>Longitude</p>
</dd>
<dt>Elevation</dt><dd><p>Elevation</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
d&lt;-SILOSiteSummary(X)

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOThiessenShp'>Function to generate Thiessen polygons from SILO sites</h2><span id='topic+SILOThiessenShp'></span>

<h3>Description</h3>

<p>Function to generate Thiessen polygons from SILO sites
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOThiessenShp(SILOdata, path, shpname, boundary = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOThiessenShp_+3A_silodata">SILOdata</code></td>
<td>
<p>- data loaded from SILO based on site list</p>
</td></tr>
<tr><td><code id="SILOThiessenShp_+3A_path">path</code></td>
<td>
<p>- file path to save Thiessen polygon shapefile</p>
</td></tr>
<tr><td><code id="SILOThiessenShp_+3A_shpname">shpname</code></td>
<td>
<p>- filename to save ESRI shapefile (no extension)</p>
</td></tr>
<tr><td><code id="SILOThiessenShp_+3A_boundary">boundary</code></td>
<td>
<p>- optional either a filename(including path) of a boundary, e.g. catchment boundary, to apply, or the boundary as a sfc_MULTIPOLYGON object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A simple feature geometry (sf::sfc object) of the polgyons created. Shape file saved to path \ shpname
</p>
<p>If boundary is specified weights are written to the attribute table of the polygon return, which can be extracted with
<code>st_drop_geometry(returnedfeature[c("Station","weights")])</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
p&lt;-SILOThiessenShp(X,tempdir(),"Theissens")
a&lt;-SILOSiteSummary(X)
ggplot(p)+geom_sf(aes(fill=AnnualRainfall))+
geom_point(data=a,aes(Longitude,Latitude))+
geom_text(data=a,aes(Longitude,Latitude,label=Site),nudge_y = 0.02)

## End(Not run)
</code></pre>

<hr>
<h2 id='SILOWriteforSource'>Write a SILO time series to a csv file in the format expected by eWater Source</h2><span id='topic+SILOWriteforSource'></span>

<h3>Description</h3>

<p>Write a SILO time series to a csv file in the format expected by eWater Source
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOWriteforSource(SILO, col, filename, scalefactor = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOWriteforSource_+3A_silo">SILO</code></td>
<td>
<p>a list of sites with SILO data, as created by SILOLoad()</p>
</td></tr>
<tr><td><code id="SILOWriteforSource_+3A_col">col</code></td>
<td>
<p>Name of a column in a silo file to write out, e.g. Rain</p>
</td></tr>
<tr><td><code id="SILOWriteforSource_+3A_filename">filename</code></td>
<td>
<p>file to write to.</p>
</td></tr>
<tr><td><code id="SILOWriteforSource_+3A_scalefactor">scalefactor</code></td>
<td>
<p>factor to scale the data by. Defaults to 1. Useful for Pan evap or rainfall scaling. Could also be a vector, with a value for each station in SILO</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment. SILO data is written to &quot;filename&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
X&lt;-SILOLoad(c("24001","24002","24003"),path="./SWTools/extdata")
SILOWriteforSource(X,"Rain",tempfile("Rainfall",fileext=".csv"))

## End(Not run)

</code></pre>

<hr>
<h2 id='SILOWriteFunctionsforSource'>Function to bulk create functions for SILO data in Source.</h2><span id='topic+SILOWriteFunctionsforSource'></span>

<h3>Description</h3>

<p>Function to bulk create functions for SILO data in Source.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SILOWriteFunctionsforSource(
  X,
  boundary,
  shpColumn,
  functionsfile,
  RRfile,
  RainfallDatasourcesFolder,
  PETDatasourcesFolder,
  RainfallDatafile,
  PETDatafile,
  fus
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_x">X</code></td>
<td>
<p>List of SILO station data, loaded into R using SILOLoad.</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_boundary">boundary</code></td>
<td>
<p>path to a subcatchment shapefile containing the subcatchments in the Source catchment model</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_shpcolumn">shpColumn</code></td>
<td>
<p>column in the shapefile attribute table that corresponds to the catchment numbering.</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_functionsfile">functionsfile</code></td>
<td>
<p>filename to create with functions to import into Source</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_rrfile">RRfile</code></td>
<td>
<p>filename to create to be imported into the Source Rainfall Runoff feature table</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_rainfalldatasourcesfolder">RainfallDatasourcesFolder</code></td>
<td>
<p>Name to use when creating a folder in the Source function editor for the rainfall functions and time series variables</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_petdatasourcesfolder">PETDatasourcesFolder</code></td>
<td>
<p>Name to use when creating a folder in the Source function editor for the PET functions and time series variables</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_rainfalldatafile">RainfallDatafile</code></td>
<td>
<p>Filename of data source loaded in Source for rainfall, in formatting used by Source (e.g. for a file called Rain.csv from a relative folder called TimeseriesData is TimeSeriesData_Rain_csv).</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_petdatafile">PETDatafile</code></td>
<td>
<p>Filename of data source loaded in Source for PET, in formatting used by Source</p>
</td></tr>
<tr><td><code id="SILOWriteFunctionsforSource_+3A_fus">fus</code></td>
<td>
<p>character vector of function unit names in the model.
</p>
<p>It is assumed that the Source rainfall-runoff scenario was created using the Geographic wizard, using the 'draw network' method (as opposed to DEM based)
This allows a raster to be loaded into Source, with an integer in each cell representing the different subcatchments. 
<code>boundary</code> should be the path to a polygon shapefile with these catchment boundaries, and an attribute column that represent the catchment numbers. 
Typically this shapefile will be used to generate the raster that Source requires.
</p>
<p>This function will create two files:
</p>

<ul>
<li> <p><code>functionsfile</code> one to be imported into Source using the Function Import/Export plugin. 
The functions in the file that will be imported are a time series function for each SILO site in <code>X</code> and a function
weighting these SILO sites using Thiessen polygon areas for each subcatchment in <code>boundary</code>
</p>
</li>
<li> <p><code>RRFile</code> This file points each subcatchment and functional unit to the relevant function created for 
rainfall and PET, to be Imported in the Rainfall Runoff feature table (Edit-Rainfall Runoff Models and Import button)
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment. Files <code>functionsfile</code> and <code>RRfile</code> are created.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
X&lt;-SILOLoad(sites)
shpColumn&lt;-"OBJECTID"
functionsfile&lt;-"functions.csv"
RRfile&lt;-"RRFile.csv"
RainfallDatasourcesFolder&lt;-"Rainfall"
PETDatasourcesFolder&lt;-"PET"
RainfallDatafile&lt;-"TimeSeriesData_Rain_csv"
PETDatafile&lt;-"TimeSeriesData_MWet_csv"
fus&lt;-c("regolith","igneous","carbonate","sedimentary")
SILOWriteFunctionsforSource(X,boundary,shpColumn,functionsfile,RRfile,
                            RainfallDatasourcesFolder,PETDatasourcesFolder,
                          RainfallDatafile,PETDatafile,fus)

## End(Not run)
</code></pre>

<hr>
<h2 id='VeneerGetInputSets'>Get vector of InputSets</h2><span id='topic+VeneerGetInputSets'></span>

<h3>Description</h3>

<p>Get vector of InputSets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetInputSets(baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetInputSets_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector containing info on Input Sets in the model
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetInputSets()

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerGetNodesbyType'>Get a vector of node names for a given type</h2><span id='topic+VeneerGetNodesbyType'></span>

<h3>Description</h3>

<p>Get a vector of node names for a given type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetNodesbyType(NodeType, baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetNodesbyType_+3A_nodetype">NodeType</code></td>
<td>
<p>The node to return the names of. The icon in /network is searched for this name</p>
</td></tr>
<tr><td><code id="VeneerGetNodesbyType_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of node names matching the specified node type
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetNodesbyType("Weir")

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerGetPiecewise'>Get data from a Source piecewise table using Veneer</h2><span id='topic+VeneerGetPiecewise'></span>

<h3>Description</h3>

<p>Get data from a Source piecewise table using Veneer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetPiecewise(pw_table, baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetPiecewise_+3A_pw_table">pw_table</code></td>
<td>
<p>The name of the piecewise linear variable, without the $</p>
</td></tr>
<tr><td><code id="VeneerGetPiecewise_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix with the data from the piecewise table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetPiecewise(data,"pw_table")

## End(Not run)
 
 
</code></pre>

<hr>
<h2 id='VeneerGetTS'>Get a time series result from Source using Veneer</h2><span id='topic+VeneerGetTS'></span>

<h3>Description</h3>

<p>Get a time series result from Source using Veneer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetTS(TSURL, baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetTS_+3A_tsurl">TSURL</code></td>
<td>
<p>the URL of the time series to retrieve</p>
</td></tr>
<tr><td><code id="VeneerGetTS_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a zoo time series of the data
</p>
<p>The URL of the time series must be specified, by interrogation using a browser or other analysis. 
By default Source returns SI units. Some conversion is undertaken:
* Flow converted to ML/d
* Volume converted to ML
* Area converted to ha
</p>
<p>Spaces are OK, like in the example below (dont need to insert 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetTS("/runs/latest/location/EndofSystem/element/Downstream Flow/variable/Flow")

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerGetTSbyNode'>Get all time series recorded in Source for a given node</h2><span id='topic+VeneerGetTSbyNode'></span>

<h3>Description</h3>

<p>Get all time series recorded in Source for a given node
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetTSbyNode(Node, run = "latest", baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetTSbyNode_+3A_node">Node</code></td>
<td>
<p>Name of node to retrieve Time Series for</p>
</td></tr>
<tr><td><code id="VeneerGetTSbyNode_+3A_run">run</code></td>
<td>
<p>Which run to retrieve from. Defaults to the latest</p>
</td></tr>
<tr><td><code id="VeneerGetTSbyNode_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a zoo time series, with each variable as a column
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetTSbyNode("Storage 1")

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerGetTSbyVariable'>Get all time series recorded in Source of a given variable type</h2><span id='topic+VeneerGetTSbyVariable'></span>

<h3>Description</h3>

<p>Get all time series recorded in Source of a given variable type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetTSbyVariable(
  variable = "Flow",
  run = "latest",
  baseURL = "http://localhost:9876"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetTSbyVariable_+3A_variable">variable</code></td>
<td>
<p>Which variable to retrieve. Defaults to Flow.</p>
</td></tr>
<tr><td><code id="VeneerGetTSbyVariable_+3A_run">run</code></td>
<td>
<p>Which run to retrieve from. Defaults to the latest</p>
</td></tr>
<tr><td><code id="VeneerGetTSbyVariable_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a zoo time series, with each output as a column
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerGetTSbyVariable() #returns all flow outputs recorded in the latest run
VeneerGetTSbyVariable("Water Surface Elevation",1) 

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerGetTSVariables'>Get a vector of the type of time series variables recorded</h2><span id='topic+VeneerGetTSVariables'></span>

<h3>Description</h3>

<p>Get a vector of the type of time series variables recorded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerGetTSVariables(run = "latest", baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerGetTSVariables_+3A_run">run</code></td>
<td>
<p>Which run to retrieve from. Defaults to the latest</p>
</td></tr>
<tr><td><code id="VeneerGetTSVariables_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of variable types (e.g. Downstream flow, Downstream Flow Concentration, water surface elevation)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 VeneerGetTSVariables()

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerlatestRunNumber'>Get the number of the latest run</h2><span id='topic+VeneerlatestRunNumber'></span>

<h3>Description</h3>

<p>Get the number of the latest run
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerlatestRunNumber(baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerlatestRunNumber_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer of the latest run number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerlatestRunNumber()

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerRunSource'>Run Source using Veneer</h2><span id='topic+VeneerRunSource'></span>

<h3>Description</h3>

<p>Run Source using Veneer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerRunSource(
  StartDate = NULL,
  EndDate = NULL,
  InputSet = NULL,
  baseURL = "http://localhost:9876"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerRunSource_+3A_startdate">StartDate</code></td>
<td>
<p>Optional. Start date for simulation. Must be dd/mm/yyyy</p>
</td></tr>
<tr><td><code id="VeneerRunSource_+3A_enddate">EndDate</code></td>
<td>
<p>Optional. End date for simulation. Must be dd/mm/yyyy</p>
</td></tr>
<tr><td><code id="VeneerRunSource_+3A_inputset">InputSet</code></td>
<td>
<p>Optional. Input set to use</p>
</td></tr>
<tr><td><code id="VeneerRunSource_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment.
</p>
<p>If not set, the configuration parameters (StartDate, EndDate, InputSet), was is specified
in the Source configuration in the GUI will be used.
</p>
<p>The console will show any errors returned by Veneer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
VeneerRunSource()
VeneerRunSource("01/07/2017","01/02/2018","NoDams")

## End(Not run)

</code></pre>

<hr>
<h2 id='VeneerSetFunction'>Update a function value or expression. Function must exist before being updated.</h2><span id='topic+VeneerSetFunction'></span>

<h3>Description</h3>

<p>Update a function value or expression. Function must exist before being updated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerSetFunction(Name, Expression, baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerSetFunction_+3A_name">Name</code></td>
<td>
<p>Name of the function without the &quot;$&quot;, e.g. f_ScaleFactor</p>
</td></tr>
<tr><td><code id="VeneerSetFunction_+3A_expression">Expression</code></td>
<td>
<p>Expression to change it to, e.g. 1.2</p>
</td></tr>
<tr><td><code id="VeneerSetFunction_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 VeneerSetFunction("f_ScaleFactor",1.2)
 VeneerSetFunction("f_TargetLevel","if($m_Flow&lt;1000,3.2,3.5)")
 
## End(Not run)
 
</code></pre>

<hr>
<h2 id='VeneerSetPiecewise'>Change a Source piecewise table using Veneer</h2><span id='topic+VeneerSetPiecewise'></span>

<h3>Description</h3>

<p>Change a Source piecewise table using Veneer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VeneerSetPiecewise(data, pw_table, baseURL = "http://localhost:9876")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VeneerSetPiecewise_+3A_data">data</code></td>
<td>
<p>A 2 column data.frame or matrix with the data to load into the piecewise table.</p>
</td></tr>
<tr><td><code id="VeneerSetPiecewise_+3A_pw_table">pw_table</code></td>
<td>
<p>The name of the piecewise linear variable, without the &quot;$&quot;.</p>
</td></tr>
<tr><td><code id="VeneerSetPiecewise_+3A_baseurl">baseURL</code></td>
<td>
<p>URL of the Veneer server. Defaults to the veneer default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 data&lt;-data.frame(X=seq(1,5),Y=seq(1,5))
 VeneerSetPiecewise(data,"pw_table")

## End(Not run)
 
</code></pre>

<hr>
<h2 id='WritepwtoIS'>Write an input set line for a piecewise lookup table from a csv file</h2><span id='topic+WritepwtoIS'></span>

<h3>Description</h3>

<p>Write an input set line for a piecewise lookup table from a csv file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>WritepwtoIS(folder, csvfiles, outputfile)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="WritepwtoIS_+3A_folder">folder</code></td>
<td>
<p>Folder for where are the csv files with the lookup tables</p>
</td></tr>
<tr><td><code id="WritepwtoIS_+3A_csvfiles">csvfiles</code></td>
<td>
<p>vector of files to turn into an input set line. 
File name should be the name of the pw table in Source, including the folder name if necessary, separated by &quot;.&quot; (see example). 
The first row in the file should be column names, the same as used in Source, i.e. XValue and YValue</p>
</td></tr>
<tr><td><code id="WritepwtoIS_+3A_outputfile">outputfile</code></td>
<td>
<p>text file to save the lines to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing to the R environment. Input set lines are written to &quot;outputfile&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
folder&lt;-"C:/Source/tables"
csvfiles&lt;-c("LowerLakesOps.pw_LakeTarget.csv","Operations.pw_NA_Lock5_16p8.csv")
outputfile&lt;-"inputset.txt"
WritepwtoIS(folder,csvfiles,outputfile)

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
