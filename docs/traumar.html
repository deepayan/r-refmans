<!DOCTYPE html><html lang="en"><head><title>Help for package traumar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {traumar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#traumar-package'><p>traumar: Calculate Metrics for Trauma System Performance</p></a></li>
<li><a href='#+25not_in+25'><p>Check if Elements Are Not in a Vector</p></a></li>
<li><a href='#impute'><p>Impute Numeric Column Values</p></a></li>
<li><a href='#nonlinear_bins'><p>Create Nonlinear Probability of Survival Bins</p></a></li>
<li><a href='#normalize'><p>Normalize a Numeric Vector</p></a></li>
<li><a href='#pretty_number'><p>Convert Numbers into Readable Abbreviated Formats</p></a></li>
<li><a href='#pretty_percent'><p>Format Numeric Variables as Percentages</p></a></li>
<li><a href='#probability_of_survival'><p>Calculate Probability of Survival Using TRISS Method</p></a></li>
<li><a href='#rm_bin_summary'><p>Bin-Level Summary for Relative Mortality Metric (RMM)</p></a></li>
<li><a href='#rmm'><p>Relative Mortality Metric (RMM) Calculation</p></a></li>
<li><a href='#season'><p>Get Season Based on a Date</p></a></li>
<li><a href='#small_count_label'><p>Label Small Counts Based on a Cutoff</p></a></li>
<li><a href='#stat_sig'><p>Assign Significance Codes Based on P-Values</p></a></li>
<li><a href='#theme_cleaner'><p>Customizable Minimalistic ggplot2 Theme</p></a></li>
<li><a href='#trauma_case_mix'><p>View the Current Patient Population Case Mix Compared to the Major Trauma</p>
Study Case Mix</a></li>
<li><a href='#trauma_performance'><p>Calculate Trauma Hospital Performance Based on Robust and Validated Measures</p></a></li>
<li><a href='#weekend'><p>Classify Dates as Weekday or Weekend</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculate Metrics for Trauma System Performance</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Hospitals, hospital systems, and even trauma systems that provide care to injured patients
    may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives
    of injured patients.  'traumar' provides robust functions driven by the academic literature to 
    automate the calculation of relevant metrics to individuals desiring to measure the performance of their
    trauma center or even a trauma system.  'traumar' also provides some helper functions for the data analysis
    journey. Users can refer to the following publications for descriptions of the methods used in 'traumar'.
    TRISS methodology, including probability of survival, and the W, M, and Z Scores - Flora (1978) 
    &lt;<a href="https://doi.org/10.1097%2F00005373-197810000-00003">doi:10.1097/00005373-197810000-00003</a>&gt;, Boyd et al. (1987, PMID:3106646), Llullaku et al. (2009) 
    &lt;<a href="https://doi.org/10.1186%2F1749-7922-4-2">doi:10.1186/1749-7922-4-2</a>&gt;, Singh et al. (2011) &lt;<a href="https://doi.org/10.4103%2F0974-2700.86626">doi:10.4103/0974-2700.86626</a>&gt;, Baker et al. (1974, PMID:4814394), 
    and Champion et al. (1989) &lt;<a href="https://doi.org/10.1097%2F00005373-198905000-00017">doi:10.1097/00005373-198905000-00017</a>&gt;. For the Relative Mortality Metric, 
    see Napoli et al. (2017) &lt;<a href="https://doi.org/10.1080%2F24725579.2017.1325948">doi:10.1080/24725579.2017.1325948</a>&gt;, Schroeder et al. (2019) 
    &lt;<a href="https://doi.org/10.1080%2F10903127.2018.1489021">doi:10.1080/10903127.2018.1489021</a>&gt;, and Kassar et al. (2016) &lt;<a href="https://doi.org/10.1177%2F00031348221093563">doi:10.1177/00031348221093563</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>broom, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.6.3), dplyr (&ge; 1.1.4), ggplot2 (&ge; 3.5.1), rlang
(&ge; 1.1.5), stats, tibble (&ge; 3.2.1), tidyr (&ge; 1.3.1),
tidyselect (&ge; 1.2.1), utils, lubridate (&ge; 1.9.4), lifecycle
(&ge; 1.0.4), infer (&ge; 1.0.7), purrr (&ge; 1.0.2)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bemts-hhs.github.io/traumar/">https://bemts-hhs.github.io/traumar/</a>,
<a href="https://github.com/bemts-hhs/traumar">https://github.com/bemts-hhs/traumar</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bemts-hhs/traumar/issues">https://github.com/bemts-hhs/traumar/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-20 19:15:00 UTC; nfoss0</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicolas Foss [aut, cre],
  Iowa Department of Health and Human Services [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicolas Foss &lt;nicolas.foss@hhs.iowa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-21 11:50:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='traumar-package'>traumar: Calculate Metrics for Trauma System Performance</h2><span id='topic+traumar'></span><span id='topic+traumar-package'></span>

<h3>Description</h3>

<p>Hospitals, hospital systems, and even trauma systems that provide care to injured patients may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives of injured patients. 'traumar' provides robust functions driven by the academic literature to automate the calculation of relevant metrics to individuals desiring to measure the performance of their trauma center or even a trauma system. 'traumar' also provides some helper functions for the data analysis journey. Users can refer to the following publications for descriptions of the methods used in 'traumar'. TRISS methodology, including probability of survival, and the W, M, and Z Scores - Flora (1978) <a href="https://doi.org/10.1097/00005373-197810000-00003">doi:10.1097/00005373-197810000-00003</a>, Boyd et al. (1987, PMID:3106646), Llullaku et al. (2009) <a href="https://doi.org/10.1186/1749-7922-4-2">doi:10.1186/1749-7922-4-2</a>, Singh et al. (2011) <a href="https://doi.org/10.4103/0974-2700.86626">doi:10.4103/0974-2700.86626</a>, Baker et al. (1974, PMID:4814394), and Champion et al. (1989) <a href="https://doi.org/10.1097/00005373-198905000-00017">doi:10.1097/00005373-198905000-00017</a>. For the Relative Mortality Metric, see Napoli et al. (2017) <a href="https://doi.org/10.1080/24725579.2017.1325948">doi:10.1080/24725579.2017.1325948</a>, Schroeder et al. (2019) <a href="https://doi.org/10.1080/10903127.2018.1489021">doi:10.1080/10903127.2018.1489021</a>, and Kassar et al. (2016) <a href="https://doi.org/10.1177/00031348221093563">doi:10.1177/00031348221093563</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicolas Foss <a href="mailto:nicolas.foss@hhs.iowa.gov">nicolas.foss@hhs.iowa.gov</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Iowa Department of Health and Human Services [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://bemts-hhs.github.io/traumar/">https://bemts-hhs.github.io/traumar/</a>
</p>
</li>
<li> <p><a href="https://github.com/bemts-hhs/traumar">https://github.com/bemts-hhs/traumar</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bemts-hhs/traumar/issues">https://github.com/bemts-hhs/traumar/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25not_in+25'>Check if Elements Are Not in a Vector</h2><span id='topic++25not_in+25'></span>

<h3>Description</h3>

<p>This function returns a logical vector indicating whether each
element of <code>x</code> is not in <code>y</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %not_in% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25not_in+2B25_+3A_x">x</code></td>
<td>
<p>A vector of values to be checked.</p>
</td></tr>
<tr><td><code id="+2B25not_in+2B25_+3A_y">y</code></td>
<td>
<p>A vector of values to check against.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector of the same length as <code>x</code>, where <code>TRUE</code> indicates
the corresponding element in <code>x</code> is not found in <code>y</code>, and <code>FALSE</code> indicates
it is found in <code>y</code>.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example vectors
x &lt;- c("apple", "banana", "cherry")
y &lt;- c("banana", "grape")

# Check which elements in `x` are not in `y`
x %not_in% y

# Example with numeric values
a &lt;- c(1, 2, 3, 4, 5)
b &lt;- c(2, 4, 6)

a %not_in% b

</code></pre>

<hr>
<h2 id='impute'>Impute Numeric Column Values</h2><span id='topic+impute'></span>

<h3>Description</h3>

<p>Cleans numeric columns by handling extreme values or imputing
missing values. The function supports two main focuses: handling skewed
distributions or imputing missing data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute(
  x,
  focus = c("skew", "missing"),
  method = c("winsorize", "iqr", "mean", "median"),
  percentile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="impute_+3A_x">x</code></td>
<td>
<p>A numeric vector to be cleaned.</p>
</td></tr>
<tr><td><code id="impute_+3A_focus">focus</code></td>
<td>
<p>A character string indicating the focus. Options are:
</p>

<ul>
<li> <p><code>"skew"</code>: Handle extreme values using percentile or
IQR methods (default).
</p>
</li>
<li> <p><code>"missing"</code>: Impute missing values.
</p>
</li></ul>
</td></tr>
<tr><td><code id="impute_+3A_method">method</code></td>
<td>
<p>A character string specifying the method:
</p>

<ul>
<li><p> For <code>focus = "skew"</code>:
</p>

<ul>
<li> <p><code>"winsorize"</code>: Replace values outside specified percentiles (default).
</p>
</li>
<li> <p><code>"iqr"</code>: Use IQR to limit extreme values.
</p>
</li></ul>

</li>
<li><p> For <code>focus = "missing"</code>:
</p>

<ul>
<li> <p><code>"mean"</code>: Replace missing values with the mean.
</p>
</li>
<li> <p><code>"median"</code>: Replace missing values with the median.
</p>
</li></ul>

</li></ul>
</td></tr>
<tr><td><code id="impute_+3A_percentile">percentile</code></td>
<td>
<p>A numeric value (percentile &gt; 0) for winsorization.
If not provided, defaults to 0.01 and 0.99.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with cleaned or imputed values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1, 2, 3, 100, 200, NA)
# Winsorize to 1% and 99%
impute(x, focus = "skew", method = "winsorize")

# Replace missing values with the mean
impute(x, focus = "missing", method = "mean")

</code></pre>

<hr>
<h2 id='nonlinear_bins'>Create Nonlinear Probability of Survival Bins</h2><span id='topic+nonlinear_bins'></span>

<h3>Description</h3>

<p>This function generates nonlinear bins for probability of survival data based
on specified thresholds and divisors as specified in Napoli et al. (2017),
Schroeder et al. (2019), and Kassar et al. (2016). This function calculates
bin statistics, including mean, standard deviation, total alive, total dead,
count, and percentage for each bin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nonlinear_bins(
  data,
  Ps_col,
  outcome_col,
  divisor1 = 5,
  divisor2 = 5,
  threshold_1 = 0.9,
  threshold_2 = 0.99
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nonlinear_bins_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>tibble</code> containing the probability of survival
data for a set of patients.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_ps_col">Ps_col</code></td>
<td>
<p>The column in <code>data</code> containing the probability of survival
values for a set of patients.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_outcome_col">outcome_col</code></td>
<td>
<p>The name of the column containing the outcome data. It
should be binary, with values indicating patient survival. A value of <code>1</code>
should represent &quot;alive&quot; (survived), while <code>0</code> should
represent &quot;dead&quot; (did not survive). Ensure the column contains only these
two possible values.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_divisor1">divisor1</code></td>
<td>
<p>A parameter to control the width of the probability of
survival range bins. Affects the creation of step sizes for the beginning
of each bin range. Defaults to <code>5</code>.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_divisor2">divisor2</code></td>
<td>
<p>A parameter to control the width of the probability of
survival range bins. Affects the creation of step sizes for the beginning
of each bin range. Defaults to <code>5</code>.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_threshold_1">threshold_1</code></td>
<td>
<p>A parameter to decide where data indices will begin to
create step sizes. Defaults to <code>0.9</code>.</p>
</td></tr>
<tr><td><code id="nonlinear_bins_+3A_threshold_2">threshold_2</code></td>
<td>
<p>A parameter to decide where data indices will end to
create step sizes. Defaults to <code>0.99</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with <code>intervals</code> and <code>bin_stats</code> objects:
</p>

<ul>
<li> <p><code>intervals</code>: A vector of start and end-points for the probability of survival bin ranges.
</p>
</li>
<li> <p><code>bin_stats</code>: A <code>tibble</code> with columns <code>bin_number</code>, <code>bin_start</code>, <code>bin_end</code>, <code>mean</code>, <code>sd</code>,
<code>alive</code>, <code>dead</code>, <code>count</code>, and <code>percent</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D, MS, original paper and code in MATLAB by Nicholas
J. Napoli, Ph.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate example data with high negative skewness
set.seed(123)

# Parameters
n_patients &lt;- 10000  # Total number of patients

# Skewed towards higher values
Ps &lt;- plogis(rnorm(n_patients, mean = 2, sd = 1.5))

# Simulate survival outcomes based on Ps
survival_outcomes &lt;- rbinom(n_patients,
                            size = 1,
                            prob = Ps
                            )

# Create data frame
data &lt;- data.frame(Ps = Ps, survival = survival_outcomes) |&gt;
dplyr::mutate(death = dplyr::if_else(survival == 1, 0, 1))

# Apply the nonlinear_bins function
results &lt;- nonlinear_bins(data = data,
                          Ps_col = Ps,
                          outcome_col = survival,
                          divisor1 = 5,
                          divisor2 = 5,
                          threshold_1 = 0.9,
                          threshold_2 = 0.99)

# View results
results$intervals
results$bin_stats

</code></pre>

<hr>
<h2 id='normalize'>Normalize a Numeric Vector</h2><span id='topic+normalize'></span>

<h3>Description</h3>

<p>This function normalizes a numeric or integer vector using one of two
methods: min-max normalization (scales data to the range (0, 1)) or z-score
normalization (centers data around 0 with a standard deviation of 1).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>normalize(x, method = c("min_max", "z_score"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="normalize_+3A_x">x</code></td>
<td>
<p>A numeric or integer vector to be normalized.</p>
</td></tr>
<tr><td><code id="normalize_+3A_method">method</code></td>
<td>
<p>A character string specifying the normalization method. Options
are <code>"min_max"</code> for min-max normalization or <code>"z_score"</code> for z-score
normalization. If no method is provided, the default is <code>"min_max"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of the same length as <code>x</code>, containing the
normalized values.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example data
data &lt;- c(10, 20, 30, 40, 50, NA)

# Min-max normalization
normalize(data, method = "min_max")

# Z-score normalization
normalize(data, method = "z_score")

# Default behavior (min-max normalization)
normalize(data)

</code></pre>

<hr>
<h2 id='pretty_number'>Convert Numbers into Readable Abbreviated Formats</h2><span id='topic+pretty_number'></span>

<h3>Description</h3>

<p>This function converts large numeric values into readable abbreviated formats
(e.g., 1,000 becomes &quot;1k&quot;) with options for rounding, decimal precision, and
a custom prefix. It supports numbers up to the decillion range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_number(x, n_decimal = 2, prefix = NULL, truncate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_number_+3A_x">x</code></td>
<td>
<p>A numeric value or vector to be converted into a readable format.</p>
</td></tr>
<tr><td><code id="pretty_number_+3A_n_decimal">n_decimal</code></td>
<td>
<p>An integer specifying the number of decimal places to
include in the output. Defaults to <code>2</code>.</p>
</td></tr>
<tr><td><code id="pretty_number_+3A_prefix">prefix</code></td>
<td>
<p>An optional character string to prepend to the formatted number
(e.g., &quot;$&quot;). Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pretty_number_+3A_truncate">truncate</code></td>
<td>
<p>A logical value indicating whether to truncate the numbers before
formatting. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the numbers formatted as abbreviated
strings. If <code>prefix</code> is provided, it prepends the formatted numbers.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic usage
pretty_number(1234)               # "1.23k"
pretty_number(1234567)            # "1.23m"
pretty_number(1234567890)         # "1.23b"

# Adjusting decimal places
pretty_number(1234, n_decimal = 1) # "1.2k"

# Adding a prefix
pretty_number(1234, prefix = "$")  # "$1.23k"

# Without rounding
pretty_number(1250, truncate = TRUE) # "1.2k"

</code></pre>

<hr>
<h2 id='pretty_percent'>Format Numeric Variables as Percentages</h2><span id='topic+pretty_percent'></span>

<h3>Description</h3>

<p>This function formats numeric variables as percentages with a specified
number of decimal places. It refines the output by removing unnecessary
trailing zeros after the decimal point and ensures the percentage sign is
correctly applied without extraneous characters, resulting in a polished,
human-readable percentage representation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_percent(variable, n_decimal = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_percent_+3A_variable">variable</code></td>
<td>
<p>A numeric vector representing proportions to format as
percentages. The values are on a scale from 0 to 1.</p>
</td></tr>
<tr><td><code id="pretty_percent_+3A_n_decimal">n_decimal</code></td>
<td>
<p>A numeric value specifying the number of decimal places.
Defaults to <code>1</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the formatted percentages.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage:
pretty_percent(0.12345)  # Default decimal places
pretty_percent(0.12345, n_decimal = 2)  # Two decimal places
pretty_percent(c(0.1, 0.25, 0.3333), n_decimal = 1)  # Vector input

</code></pre>

<hr>
<h2 id='probability_of_survival'>Calculate Probability of Survival Using TRISS Method</h2><span id='topic+probability_of_survival'></span>

<h3>Description</h3>

<p>This function calculates the probability of survival (Ps) for trauma patients
based on the Trauma and Injury Severity Score (TRISS) methodology. TRISS
combines physiological and anatomical data to predict survival likelihood
using a logistic regression model. The function incorporates trauma type,
patient age, Revised Trauma Score (RTS), and Injury Severity Score (ISS) into
the calculation. Probability of survival is expressed as a percentage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>probability_of_survival(trauma_type, age, rts, iss)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="probability_of_survival_+3A_trauma_type">trauma_type</code></td>
<td>
<p>Character vector indicating the type of trauma (&quot;Blunt&quot; or
&quot;Penetrating&quot;). Different methods exist for calculating probability of survival
for burn patients, and so these records are excluded here.</p>
</td></tr>
<tr><td><code id="probability_of_survival_+3A_age">age</code></td>
<td>
<p>Numeric vector indicating the patient's age in years.</p>
</td></tr>
<tr><td><code id="probability_of_survival_+3A_rts">rts</code></td>
<td>
<p>Numeric vector indicating the patient's Revised Trauma Score
(RTS).</p>
</td></tr>
<tr><td><code id="probability_of_survival_+3A_iss">iss</code></td>
<td>
<p>Numeric vector indicating the patient's Injury Severity Score
(ISS).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector of probabilities of survival (Ps) expressed as
percentages on a scale from 0 to 1.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage:
trauma_data &lt;- data.frame(
  Trauma_Type = c("Blunt", "Penetrating"),
  Patient_Age_Years = c(30, 60),
  RTS = c(7.84, 6.90),
  ISS = c(10, 25)
)

result &lt;- trauma_data |&gt;
  dplyr::mutate(Ps = probability_of_survival(
    trauma_type = Trauma_Type,
    age = Patient_Age_Years,
    rts = RTS,
    iss = ISS
  ))

</code></pre>

<hr>
<h2 id='rm_bin_summary'>Bin-Level Summary for Relative Mortality Metric (RMM)</h2><span id='topic+rm_bin_summary'></span>

<h3>Description</h3>

<p>Calculates a bin-level summary for the Relative Mortality Metric (RMM) from
Napoli et al. (2017) by grouping data into bins based on survival
probabilities (Ps) and summarizing outcomes within each bin. This function
returns statistics such as total alive, total dead, estimated mortality,
anticipated mortality, and confidence intervals for each bin. For more
information on the methods used in this function, see as well Schroeder et
al. (2019), and Kassar et al. (2016).
</p>
<p>The Relative Mortality Metric (RMM) quantifies the performance of a center in
comparison to the anticipated mortality based on the TRISS national
benchmark. The RMM measures the difference between observed and expected
mortality, with a range from -1 to 1.
</p>

<ul>
<li><p> An RMM of 0 indicates that the observed mortality aligns with the expected
national benchmark across all acuity levels.
</p>
</li>
<li><p> An RMM greater than 0 indicates better-than-expected performance, where
the center is outperforming the national benchmark.
</p>
</li>
<li><p> An RMM less than 0 indicates under-performance, where the center’s observed
mortality is higher than the expected benchmark.
</p>
</li></ul>

<p>This metric helps assess how a center's mortality compares to the national
standards, guiding quality improvement efforts.<code>rm_bin_summary()</code> utilizes
bootstrap sampling to calculate the confidence intervals via the standard
error method.
</p>
<p>Due to the use of bootstrap sampling within the function, users should set
the random number seed before running <code>rm_bin_summary()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_bin_summary(
  data,
  Ps_col,
  outcome_col,
  n_samples = 1000,
  Divisor1 = 5,
  Divisor2 = 5,
  Threshold_1 = 0.9,
  Threshold_2 = 0.99
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rm_bin_summary_+3A_data">data</code></td>
<td>
<p>A data frame or tibble containing the data.</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_ps_col">Ps_col</code></td>
<td>
<p>The name of the column containing the survival probabilities
(Ps). Should be numeric (values between 0 and 100).</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_outcome_col">outcome_col</code></td>
<td>
<p>The name of the column containing the outcome data. It
should be binary, with values indicating patient survival. A value of <code>1</code>
should represent &quot;alive&quot; (survived), while <code>0</code> should
represent &quot;dead&quot; (did not survive). Ensure the column contains only these
two possible values.</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_n_samples">n_samples</code></td>
<td>
<p>A numeric value indicating the number of bootstrap samples
to take from the data source.</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_divisor1">Divisor1</code></td>
<td>
<p>A divisor used for binning the survival probabilities
(default is 5).</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_divisor2">Divisor2</code></td>
<td>
<p>A second divisor used for binning the survival probabilities
(default is 5).</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_threshold_1">Threshold_1</code></td>
<td>
<p>The first threshold for dividing the survival
probabilities (default is 0.9).</p>
</td></tr>
<tr><td><code id="rm_bin_summary_+3A_threshold_2">Threshold_2</code></td>
<td>
<p>The second threshold for dividing the survival
probabilities (default is 0.99).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing bin-level statistics including:
</p>

<ul>
<li> <p><code>bin_number</code>: The bin to which each record was assigned.
</p>
</li>
<li> <p><code>TA_b</code>: Total alive in each bin (number of patients who survived).
</p>
</li>
<li> <p><code>TD_b</code>: Total dead in each bin (number of patients who did not survive).
</p>
</li>
<li> <p><code>N_b</code>: Total number of patients in each bin.
</p>
</li>
<li> <p><code>EM_b</code>: Estimated mortality rate for each bin (TD_b / (TA_b + TD_b)).
</p>
</li>
<li> <p><code>AntiS_b</code>: The anticipated survival rate for each bin.
</p>
</li>
<li> <p><code>AntiM_b</code>: The anticipated mortality rate for each bin.
</p>
</li>
<li> <p><code>bin_start</code>: The lower bound of the survival probability range for each bin.
</p>
</li>
<li> <p><code>bin_end</code>: The upper bound of the survival probability range for each bin.
</p>
</li>
<li> <p><code>midpoint</code>: The midpoint of the bin range (calculated as (bin_start + bin_end) / 2).
</p>
</li>
<li> <p><code>R_b</code>: The width of each bin (bin_end - bin_start).
</p>
</li>
<li> <p><code>population_RMM_LL</code>: The lower bound of the 95% confidence interval for the population RMM.
</p>
</li>
<li> <p><code>population_RMM</code>: The final calculated Relative Mortality Metric for the population
existing in <code>data</code>.
</p>
</li>
<li> <p><code>population_RMM_UL</code>: The upper bound of the 95% confidence interval for the population RMM.
</p>
</li>
<li> <p><code>population_CI</code>: The confidence interval width for the population RMM.
</p>
</li>
<li> <p><code>bootstrap_RMM_LL</code>: The lower bound of the 95% confidence interval for the bootstrap RMM.
</p>
</li>
<li> <p><code>bootstrap_RMM</code>: The average RMM value calculated for the bootstrap sample.
</p>
</li>
<li> <p><code>bootstrap_RMM_UL</code>: The upper bound of the 95% confidence interval for the bootstrap RMM.
</p>
</li>
<li> <p><code>bootstrap_CI</code>: The width of the 95% confidence interval for the bootstrap RMM.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D, MS, original paper and code in MATLAB by Nicholas
J. Napoli, Ph.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate example data with high negative skewness
set.seed(10232015)

# Parameters
n_patients &lt;- 10000  # Total number of patients

Ps &lt;- plogis(rnorm(n_patients, mean = 2,
                    sd = 1.5)
                    )  # Skewed towards higher values

# Simulate survival outcomes based on Ps
survival_outcomes &lt;- rbinom(n_patients,
                            size = 1,
                            prob = Ps
                            )

# Create data frame
data &lt;- data.frame(Ps = Ps, survival = survival_outcomes) |&gt;
dplyr::mutate(death = dplyr::if_else(survival == 1, 0, 1))

# Example usage of the `rm_bin_summary` function
rm_bin_summary(data = data, Ps_col = Ps,
               outcome_col = survival,
               n_samples = 5
               )

</code></pre>

<hr>
<h2 id='rmm'>Relative Mortality Metric (RMM) Calculation</h2><span id='topic+rmm'></span>

<h3>Description</h3>

<p>Calculates the Relative Mortality Metric (RMM) from Napoli et al. (2017)
based on patient survival probabilities (Ps) and actual outcomes. The
function groups patients into bins based on their survival probability scores
(Ps) and computes a weighted mortality metric along with confidence
intervals. For more information on the methods used in this function, see as
well Schroeder et al. (2019), and Kassar et al. (2016).
</p>
<p>The Relative Mortality Metric (RMM) quantifies the performance of a center in
comparison to the anticipated mortality based on the TRISS national
benchmark. The RMM measures the difference between observed and expected
mortality, with a range from -1 to 1.
</p>

<ul>
<li><p> An RMM of 0 indicates that the observed mortality aligns with the expected
national benchmark across all acuity levels.
</p>
</li>
<li><p> An RMM greater than 0 indicates better-than-expected performance, where
the center is outperforming the national benchmark.
</p>
</li>
<li><p> An RMM less than 0 indicates under-performance, where the center’s observed
mortality is higher than the expected benchmark.
</p>
</li></ul>

<p>This metric helps assess how a center's mortality compares to the national
standards, guiding quality improvement efforts.  <code>rmm()</code> utilizes bootstrap
sampling to calculate the confidence intervals via the standard error method.
</p>
<p>Due to the use of bootstrap sampling within the function, users should set
the random number seed before running <code>rmm()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmm(
  data,
  Ps_col,
  outcome_col,
  n_samples = 1000,
  Divisor1 = 5,
  Divisor2 = 5,
  Threshold_1 = 0.9,
  Threshold_2 = 0.99,
  pivot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmm_+3A_data">data</code></td>
<td>
<p>A data frame or tibble containing the data.</p>
</td></tr>
<tr><td><code id="rmm_+3A_ps_col">Ps_col</code></td>
<td>
<p>The name of the column containing the survival probabilities
(Ps). Should be numeric (values between 0 and 100).</p>
</td></tr>
<tr><td><code id="rmm_+3A_outcome_col">outcome_col</code></td>
<td>
<p>The name of the column containing the outcome data. It
should be binary, with values indicating patient survival. A value of <code>1</code>
should represent &quot;alive&quot; (survived), while <code>0</code> should represent &quot;dead&quot; (did
not survive). Ensure the column contains only these two possible values.</p>
</td></tr>
<tr><td><code id="rmm_+3A_n_samples">n_samples</code></td>
<td>
<p>A numeric value indicating the number of bootstrap samples
to take from the data source.</p>
</td></tr>
<tr><td><code id="rmm_+3A_divisor1">Divisor1</code></td>
<td>
<p>A divisor used for binning the survival probabilities
(default is 5).</p>
</td></tr>
<tr><td><code id="rmm_+3A_divisor2">Divisor2</code></td>
<td>
<p>A second divisor used for binning the survival probabilities
(default is 5).</p>
</td></tr>
<tr><td><code id="rmm_+3A_threshold_1">Threshold_1</code></td>
<td>
<p>The first threshold for dividing the survival
probabilities (default is 0.9).</p>
</td></tr>
<tr><td><code id="rmm_+3A_threshold_2">Threshold_2</code></td>
<td>
<p>The second threshold for dividing the survival
probabilities (default is 0.99).</p>
</td></tr>
<tr><td><code id="rmm_+3A_pivot">pivot</code></td>
<td>
<p>A logical indicating whether to return the results in a long
format (pivot = TRUE) or wide format (pivot = FALSE, default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the Relative Mortality Metric (RMM) and related
statistics:
</p>

<ul>
<li> <p><code>population_RMM_LL</code>: The lower bound of the 95% confidence interval for the population RMM.
</p>
</li>
<li> <p><code>population_RMM</code>: The final calculated Relative Mortality Metric for the population
existing in <code>data</code>.
</p>
</li>
<li> <p><code>population_RMM_UL</code>: The upper bound of the 95% confidence interval for the population RMM.
</p>
</li>
<li> <p><code>population_CI</code>: The confidence interval width for the population RMM.
</p>
</li>
<li> <p><code>bootstrap_RMM_LL</code>: The lower bound of the 95% confidence interval for the bootstrap RMM.
</p>
</li>
<li> <p><code>bootstrap_RMM</code>: The average RMM value calculated for the bootstrap sample.
</p>
</li>
<li> <p><code>bootstrap_RMM_UL</code>: The upper bound of the 95% confidence interval for the bootstrap RMM.
</p>
</li>
<li> <p><code>bootstrap_CI</code>: The width of the 95% confidence interval for the bootstrap RMM.
</p>
</li>
<li><p> If <code>pivot = TRUE</code>, the results will be in long format with two columns: <code>stat</code>
and <code>value</code>, where each row corresponds to one of the calculated
statistics.
</p>
</li>
<li><p> If <code>pivot = FALSE</code> (default), the results will be returned in wide format,
with each statistic as a separate column.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D, MS, original paper and code in MATLAB by Nicholas
J. Napoli, Ph.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate example data with high negative skewness
set.seed(10232015)

# Parameters
n_patients &lt;- 1000  # Total number of patients

# Skewed towards higher values
Ps &lt;- plogis(rnorm(n_patients, mean = 2, sd = 1.5))

# Simulate survival outcomes based on Ps
survival_outcomes &lt;- rbinom(n_patients,
                            size = 1,
                            prob = Ps
                            )

# Create data frame
data &lt;- data.frame(Ps = Ps, survival = survival_outcomes) |&gt;
dplyr::mutate(death = dplyr::if_else(survival == 1, 0, 1))

# Example usage of the `rmm` function
rmm(data = data, Ps_col = Ps,
    outcome_col = survival,
    Divisor1 = 5,
    Divisor2 = 5,
    n_samples = 5
    )

# pivot!
rmm(data = data, Ps_col = Ps,
    outcome_col = survival,
    Divisor1 = 5,
    Divisor2 = 5,
    n_samples = 5,
    pivot = TRUE
    )

</code></pre>

<hr>
<h2 id='season'>Get Season Based on a Date</h2><span id='topic+season'></span>

<h3>Description</h3>

<p>This function determines the season (Winter, Spring, Summer, or Fall) based
on an input date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>season(input_date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="season_+3A_input_date">input_date</code></td>
<td>
<p>A Date or POSIXct object representing the date to determine
the season for. The input must be of class <code>Date</code> or <code>POSIXct</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The seasons are assigned based on geographic regions similar to how seasons
occur in the United States.
</p>
<p>The seasons are determined using the month of the year and
the traditional meteorological definition of seasons (Winter: December,
January, February; Spring: March, April, May; Summer: June, July, August;
Fall: September, October, November).
</p>


<h3>Value</h3>

<p>A factor indicating the season corresponding to the input date. The
factor levels are:
</p>

<ul>
<li><p> &quot;Winter&quot; for December, January, and February.
</p>
</li>
<li><p> &quot;Spring&quot; for March, April, and May.
</p>
</li>
<li><p> &quot;Summer&quot; for June, July, and August.
</p>
</li>
<li><p> &quot;Fall&quot; for September, October, and November.
</p>
</li>
<li><p> &quot;Undetermined&quot; if the input is not a valid Date or POSIXct object or if the month is missing.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage of the season function
season(as.Date("2025-01-15"))
season(as.POSIXct("2025-07-01 12:00:00"))

</code></pre>

<hr>
<h2 id='small_count_label'>Label Small Counts Based on a Cutoff</h2><span id='topic+small_count_label'></span>

<h3>Description</h3>

<p>This function labels values in a vector as a replacement string if they are
smaller than a specified cutoff. The input can be numeric, and the function
will return either a modified version of the input vector with small values
replaced by a given label, or it will keep the original values otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>small_count_label(var, cutoff, replacement)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="small_count_label_+3A_var">var</code></td>
<td>
<p>A numeric vector. This represents the variable to be checked
against the cutoff.</p>
</td></tr>
<tr><td><code id="small_count_label_+3A_cutoff">cutoff</code></td>
<td>
<p>A numeric value representing the threshold. Values in <code>var</code>
smaller than this value will be replaced.</p>
</td></tr>
<tr><td><code id="small_count_label_+3A_replacement">replacement</code></td>
<td>
<p>A string or a numeric value. If the value in <code>var</code> is
smaller than the <code>cutoff</code>, this value will replace it. If a string is
provided, it will replace the numeric values with the string. If a numeric
value is provided, the replacement will also be numeric.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector with values from <code>var</code>. Values smaller than the <code>cutoff</code>
will be replaced by the <code>replacement</code>. If <code>replacement</code> is a string, the
return type will be character, otherwise, it will remain numeric.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage of the small_count_label function
small_count_label(c(1, 5, 10), 5, "Below Cutoff")
small_count_label(c(1, 5, 10), 5, 0)

</code></pre>

<hr>
<h2 id='stat_sig'>Assign Significance Codes Based on P-Values</h2><span id='topic+stat_sig'></span>

<h3>Description</h3>

<p>This function assigns significance codes to a p-value vector based on commonly
accepted significance thresholds. The significance codes are:
</p>

<ul>
<li> <p><code>"***"</code> for p-values &lt;= 0.001
</p>
</li>
<li> <p><code>"**"</code> for p-values &lt;= 0.01 and &gt; 0.001
</p>
</li>
<li> <p><code>"*"</code> for p-values &lt;= 0.05 and &gt; 0.01
</p>
</li>
<li> <p><code>"."</code> for p-values &lt;= 0.1 and &gt; 0.05
</p>
</li>
<li> <p><code>"&lt;&gt;"</code> for p-values &gt; 0.1
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>stat_sig(p_val_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_sig_+3A_p_val_data">p_val_data</code></td>
<td>
<p>A numeric vector representing the p-values to be categorized.
The vector should contain p-values between 0 and 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the assigned significance codes for each p-value.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage of the stat_sig function
data &lt;- data.frame(p_value = c(0.001, 0.03, 0.12, 0.05, 0.07))

data |&gt;
  dplyr::mutate(significance = stat_sig(p_val_data = p_value))

</code></pre>

<hr>
<h2 id='theme_cleaner'>Customizable Minimalistic ggplot2 Theme</h2><span id='topic+theme_cleaner'></span>

<h3>Description</h3>

<p>A flexible and customizable theme function for creating polished and
minimalistic plots using <code>ggplot2</code>. The <code>theme_cleaner</code> function provides
various options to control the appearance of plot elements, including font
styles, sizes, colors, axis lines, grid lines, legend, title, subtitle,
captions, and facet appearance. The theme is highly customizable, allowing
for the creation of visually appealing and clean plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_cleaner(
  base_size = 12,
  base_family = "sans",
  base_color = "#70C8B8",
  base_color_title = "#03617A",
  title_text_size = ceiling(base_size * 1.1),
  subtitle_text_size = ceiling(base_size * 1.05),
  caption_color = "#19405B",
  legend_position = "top",
  vjust_title = 0,
  vjust_subtitle = 0,
  hjust_title = 0,
  hjust_subtitle = 0,
  axis_lines = FALSE,
  facets = FALSE,
  facet_text_size = base_size,
  draw_panel_border = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_cleaner_+3A_base_size">base_size</code></td>
<td>
<p>Numeric. Default font size for plot elements. Defaults to
<code>12</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_base_family">base_family</code></td>
<td>
<p>Character. Font family used for text in the plot. Defaults
to <code>"Work Sans"</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_base_color">base_color</code></td>
<td>
<p>Character. Hex color code for primary plot elements (e.g.,
axis text, legend text). Defaults to <code>"#70C8B8"</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_base_color_title">base_color_title</code></td>
<td>
<p>Character. Hex color code for plot title and legend
title text. Defaults to <code>"#03617A"</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_title_text_size">title_text_size</code></td>
<td>
<p>Numeric. Font size for plot title text. Defaults to
<code>base_size * 1.1</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_subtitle_text_size">subtitle_text_size</code></td>
<td>
<p>Numeric. Font size for plot subtitle text. Defaults
to <code>base_size * 1.05</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_caption_color">caption_color</code></td>
<td>
<p>Character. Hex color code for plot caption text.
Defaults to <code>"#19405B"</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_legend_position">legend_position</code></td>
<td>
<p>Character. Legend position on the plot. Accepts &quot;top&quot;,
&quot;bottom&quot;, &quot;left&quot;, or &quot;right&quot;. Defaults to <code>"top"</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_vjust_title">vjust_title</code></td>
<td>
<p>Numeric. Vertical justification of the plot title.
Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_vjust_subtitle">vjust_subtitle</code></td>
<td>
<p>Numeric. Vertical justification of the plot subtitle.
Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_hjust_title">hjust_title</code></td>
<td>
<p>Numeric. Horizontal justification of the plot title.
Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_hjust_subtitle">hjust_subtitle</code></td>
<td>
<p>Numeric. Horizontal justification of the plot subtitle.
Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_axis_lines">axis_lines</code></td>
<td>
<p>Logical. If <code>TRUE</code>, axis lines are drawn in <code>base_color</code>;
otherwise, they are hidden. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_facets">facets</code></td>
<td>
<p>Logical. If <code>TRUE</code>, additional formatting for facet plots is
applied. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_facet_text_size">facet_text_size</code></td>
<td>
<p>Numeric. If <code>facets = TRUE</code>, size formatting for facet
text (<code>strip.text</code>) is applied. Defaults to <code>base_size</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_draw_panel_border">draw_panel_border</code></td>
<td>
<p>Logical. If <code>TRUE</code>, a border is drawn around panels
in facet plots. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="theme_cleaner_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>ggplot2::theme</code> for further
customization.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function customizes common plot elements like axis text, titles,
subtitles, captions, legend, and facet labels. It is designed to work with
<code>ggplot2</code> plots, providing a clean and professional look with minimal
styling. You can adjust various aesthetic features such as font size, color,
and legend position for maximum control over the appearance.
</p>


<h3>Value</h3>

<p>A <code>ggplot2</code> theme object that can be applied to plots.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a ggplot2 plot with the theme_cleaner theme
library(ggplot2)
ggplot(mtcars, aes(x = mpg, y = wt)) +
  geom_point() +
  theme_cleaner(base_size = 14, title_text_size = 16, legend_position = "bottom")

# Customize facet plots with theme_cleaner
ggplot(mtcars, aes(x = mpg, y = wt)) +
  geom_point() +
  facet_wrap(~cyl) +
  theme_cleaner(facets = TRUE, facet_text_size = 12, draw_panel_border = TRUE)

</code></pre>

<hr>
<h2 id='trauma_case_mix'>View the Current Patient Population Case Mix Compared to the Major Trauma
Study Case Mix</h2><span id='topic+trauma_case_mix'></span>

<h3>Description</h3>

<p>This function compares the current patient population's case mix (based on
probability of survival, Ps) to the MTOS case mix by binning patients into
specific Ps ranges. It returns the fraction of patients in each range and
compares it to the MTOS distribution. For more information on the methods used
in these calculations, please see Flora (1978) and Boyd et al. (1987).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_case_mix(df, Ps_col, outcome_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_case_mix_+3A_df">df</code></td>
<td>
<p>A data frame containing patient data.</p>
</td></tr>
<tr><td><code id="trauma_case_mix_+3A_ps_col">Ps_col</code></td>
<td>
<p>The name of the column containing the probability of survival
(Ps) values.</p>
</td></tr>
<tr><td><code id="trauma_case_mix_+3A_outcome_col">outcome_col</code></td>
<td>
<p>The name of the column containing the binary outcome data
(valid values are 1 or TRUE for alive, 0 or FALSE for dead).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function checks whether the <code>outcome_col</code> contains exactly two
unique values representing a binary outcome. It also ensures that <code>Ps_col</code>
contains numeric values within the range 0 to 100. If any values exceed 1,
they are converted to decimal format. The patients are then grouped into
predefined Ps ranges, and the function compares the fraction of patients in
each range with the MTOS case mix distribution.
</p>


<h3>Value</h3>

<p>A data frame containing the Ps ranges, the fraction of patients in
each range in the current population, and the MTOS distribution for each
range.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate example data with high negative skewness
set.seed(123)

# Parameters
n_patients &lt;- 10000  # Total number of patients

# Generate survival probabilities (Ps) using a logistic distribution
set.seed(123)  # For reproducibility
Ps &lt;- plogis(rnorm(n_patients, mean = 2, sd = 1.5))  # Skewed towards higher values

# Simulate survival outcomes based on Ps
survival_outcomes &lt;- rbinom(n_patients, size = 1, prob = Ps)

# Create data frame
data &lt;- data.frame(Ps = Ps, survival = survival_outcomes) |&gt;
dplyr::mutate(death = dplyr::if_else(survival == 1, 0, 1))

# Compare the current case mix with the MTOS case mix
trauma_case_mix(data, Ps_col = Ps, outcome_col = death)

</code></pre>

<hr>
<h2 id='trauma_performance'>Calculate Trauma Hospital Performance Based on Robust and Validated Measures</h2><span id='topic+trauma_performance'></span>

<h3>Description</h3>

<p>This function calculates trauma hospital performance based on the M, W, and Z
scores, which are derived from survival probability and mortality data, using
established methods. It computes the W-score, M-score, and Z-score based on
the provided dataset and calculates performance metrics for trauma programs.
For more information on the methods used in this function, please see
Champion et al. (1990) on the W score, and Flora (1978) and Boyd et al.
(1987) on the M and Z scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_performance(
  df,
  Ps_col,
  outcome_col,
  outcome = 1,
  z_method = c("survival", "mortality"),
  diagnostics = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_performance_+3A_df">df</code></td>
<td>
<p>A data frame containing patient data.</p>
</td></tr>
<tr><td><code id="trauma_performance_+3A_ps_col">Ps_col</code></td>
<td>
<p>The name of the column containing the probability of survival
(Ps). The values should be numeric and between 0 and 1. Values greater than
1 will be automatically converted to decimal format by dividing by 100.</p>
</td></tr>
<tr><td><code id="trauma_performance_+3A_outcome_col">outcome_col</code></td>
<td>
<p>The name of the column containing the binary outcome data.
</p>
<p>The column should contain binary values indicating the patient outcome.
Valid values include 1 (dead) and 0 (alive), or TRUE (dead) and FALSE
(alive), or other similar binary representations (e.g., &quot;Yes&quot; for dead and
&quot;No&quot; for alive). The function will check for two unique values in this
column and expects them to represent the outcome in a binary form.</p>
</td></tr>
<tr><td><code id="trauma_performance_+3A_outcome">outcome</code></td>
<td>
<p>The value representing mortality (default is 1). Can also be set
to 0 or TRUE/FALSE, depending on how the outcome is encoded in
<code>outcome_col</code>.</p>
</td></tr>
<tr><td><code id="trauma_performance_+3A_z_method">z_method</code></td>
<td>
<p>A character vector indicating which method to use for
calculating the Z-score. Must be one of &quot;survival&quot; or &quot;mortality&quot;. The
default is &quot;survival&quot;.</p>
</td></tr>
<tr><td><code id="trauma_performance_+3A_diagnostics">diagnostics</code></td>
<td>
<p>A logical flag (default is FALSE). If TRUE, diagnostic
information about the W, M, and Z scores will be printed to the console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the following calculations:
</p>

<ul>
<li> <p><code>N_Patients</code>: The total number of patients included in the analysis.
</p>
</li>
<li> <p><code>N_Survivors</code>: The total number of patients who survived, based on the provided outcome data.
</p>
</li>
<li> <p><code>N_Deaths</code>: The total number of patients who died, based on the provided outcome data.
</p>
</li>
<li> <p><code>Predicted_Survivors</code>: The total predicted number of survivors based on the
survival probability (<code>Ps</code>) for all patients.
</p>
</li>
<li> <p><code>Predicted_Deaths</code>: The total predicted number of deaths, calculated as <code>1 - Ps</code> for all patients.
</p>
</li>
<li> <p><code>Patient_Estimate</code>: The estimated number of patients who survived, calculated based
on the W-score. This value reflects the difference between the actual and
predicted number of survivors.
</p>
</li>
<li> <p><code>W_Score</code>: The W-score, representing the difference between the observed and expected
number of survivors per 100 patients. A positive W-score indicates that more
patients survived than expected, while a negative score indicates that fewer
patients survived than expected.
</p>
</li>
<li> <p><code>M_Score</code>: The M-score, which compares the observed patient case mix to the Major Trauma
Outcomes Study (MTOS) case mix. A higher score indicates that the patient mix
is more similar to MTOS, while a lower score indicates a dissimilar mix. Based on the MTOS
literature, an M_Score &gt;= 0.88 indicates that the Z_Score comes from distribution similar
enough to the MTOS Ps distribution.
</p>
</li>
<li> <p><code>Z_Score</code>: The Z-score, which quantifies the difference between the actual and predicted
mortality (if <code>z_method = "mortality"</code>) or survival (if <code>z_method = "survival"</code>). A Z-score &gt; 1.96 is considered to point to the statistical
significance of the W-Score at alpha = 0.05 level for survival. The positive
Z_Score indicates that more patients survived than predicted, while a
negative Z-score indicates fewer survivors than predicted.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate example data with high negative skewness
set.seed(123)

# Parameters
n_patients &lt;- 10000  # Total number of patients

# Generate survival probabilities (Ps) using a logistic distribution
set.seed(123)  # For reproducibility
Ps &lt;- plogis(rnorm(n_patients, mean = 2, sd = 1.5))  # Skewed towards higher values

# Simulate survival outcomes based on Ps
survival_outcomes &lt;- rbinom(n_patients, size = 1, prob = Ps)

# Create data frame
data &lt;- data.frame(Ps = Ps, survival = survival_outcomes) |&gt;
dplyr::mutate(death = dplyr::if_else(survival == 1, 0, 1))

# Calculate trauma performance (W, M, Z scores)
trauma_performance(data, Ps_col = Ps, outcome_col = death)

</code></pre>

<hr>
<h2 id='weekend'>Classify Dates as Weekday or Weekend</h2><span id='topic+weekend'></span>

<h3>Description</h3>

<p>This function classifies each date in a vector of dates as either &quot;Weekday&quot;
or &quot;Weekend&quot;. The function returns &quot;Weekday&quot; for Monday to Friday and
&quot;Weekend&quot; for Saturday and Sunday.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weekend(input_date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weekend_+3A_input_date">input_date</code></td>
<td>
<p>A vector of <code>Date</code> or <code>POSIXct</code> objects to classify.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function checks if the <code>input_date</code> is a valid <code>Date</code> or
<code>POSIXct</code> object. It returns &quot;Weekday&quot; for dates that fall on Monday
through Friday and &quot;Weekend&quot; for dates that fall on Saturday or Sunday. If
the input is not of the correct class, the function will throw an error.
</p>


<h3>Value</h3>

<p>A character vector with the classification for each date: either
&quot;Weekday&quot; or &quot;Weekend&quot;.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: Date of a weekend
weekend(as.Date("2025-01-18"))

# Example 2: Date of a weekday
weekend(as.Date("2025-01-15"))

# Example 3: Date of an invalid object
try(
weekend("2025-01-18") # This will throw an error
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
