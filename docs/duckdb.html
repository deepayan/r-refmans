<!DOCTYPE html><html><head><title>Help for package duckdb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {duckdb}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#backend-duckdb'><p>DuckDB SQL backend for dbplyr</p></a></li>
<li><a href='#duckdb'><p>Connect to a DuckDB database instance</p></a></li>
<li><a href='#duckdb_connection-class'><p>DuckDB connection class</p></a></li>
<li><a href='#duckdb_driver-class'><p>DuckDB driver class</p></a></li>
<li><a href='#duckdb_explain-class'><p>DuckDB EXPLAIN query tree</p></a></li>
<li><a href='#duckdb_get_substrait'><p>Get the Substrait plan for a SQL query</p>
Transforms a SQL query into a raw vector containing the serialized Substrait query blob</a></li>
<li><a href='#duckdb_get_substrait_json'><p>Get the Substrait plan for a SQL query in the JSON format</p>
Transforms a SQL query into a vector containing the serialized Substrait query JSON</a></li>
<li><a href='#duckdb_prepare_substrait'><p>Query DuckDB using Substrait</p>
Method for interpreting a Substrait BLOB plan as a DuckDB Query Plan
It interprets and executes the query.</a></li>
<li><a href='#duckdb_prepare_substrait_json'><p>Query DuckDB using Substrait</p>
Method for interpreting a Substrait JSON plan as a DuckDB Query Plan
It interprets and executes the query.</a></li>
<li><a href='#duckdb_read_csv'><p>Reads a CSV file into DuckDB</p></a></li>
<li><a href='#duckdb_register'><p>Register a data frame as a virtual table</p></a></li>
<li><a href='#duckdb_register_arrow'><p>Register an Arrow data source as a virtual table</p></a></li>
<li><a href='#duckdb_result-class'><p>DuckDB Result Set</p></a></li>
<li><a href='#duckdb-package'><p>duckdb: DBI Package for the DuckDB Database Management System</p></a></li>
<li><a href='#read_csv_duckdb'><p>Deprecated functions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>DBI Package for the DuckDB Database Management System</td>
</tr>
<tr>
<td>Version:</td>
<td>0.10.0</td>
</tr>
<tr>
<td>Description:</td>
<td>The DuckDB project is an embedded analytical data management
    system with support for the Structured Query Language (SQL). This
    package includes all of DuckDB and a R Database Interface (DBI)
    connector.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://r.duckdb.org/">https://r.duckdb.org/</a>, <a href="https://github.com/duckdb/duckdb-r">https://github.com/duckdb/duckdb-r</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/duckdb/duckdb-r/issues">https://github.com/duckdb/duckdb-r/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>DBI, R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>adbcdrivermanager, arrow (&ge; 13.0.0), bit64, callr, DBItest,
dbplyr, dplyr, rlang, testthat, tibble, vctrs, withr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-11 16:17:16 UTC; kirill</td>
</tr>
<tr>
<td>Author:</td>
<td>Hannes Mühleisen <a href="https://orcid.org/0000-0001-8552-0029"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Mark Raasveldt <a href="https://orcid.org/0000-0001-5005-6844"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Stichting DuckDB Foundation [cph],
  Apache Software Foundation [cph],
  PostgreSQL Global Development Group [cph],
  The Regents of the University of California [cph],
  Cameron Desrochers [cph],
  Victor Zverovich [cph],
  RAD Game Tools [cph],
  Valve Software [cph],
  Rich Geldreich [cph],
  Tenacious Software LLC [cph],
  The RE2 Authors [cph],
  Google Inc. [cph],
  Facebook Inc. [cph],
  Steven G. Johnson [cph],
  Jiahao Chen [cph],
  Tony Kelman [cph],
  Jonas Fonseca [cph],
  Lukas Fittl [cph],
  Salvatore Sanfilippo [cph],
  Art.sy, Inc. [cph],
  Oran Agra [cph],
  Redis Labs, Inc. [cph],
  Melissa O'Neill [cph],
  PCG Project contributors [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hannes Mühleisen &lt;hannes@cwi.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-13 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='backend-duckdb'>DuckDB SQL backend for dbplyr</h2><span id='topic+simulate_duckdb'></span><span id='topic+translate_duckdb'></span><span id='topic+tbl_file'></span><span id='topic+tbl_query'></span>

<h3>Description</h3>

<p>This is a SQL backend for dbplyr tailored to take into account DuckDB's
possibilities. This mainly follows the backend for PostgreSQL, but
contains more mapped functions.
</p>
<p><code>tbl_file()</code> is an experimental variant of <code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code> to directly access files on disk.
It is safer than <code>dplyr::tbl()</code> because there is no risk of misinterpreting the request,
and paths with special characters are supported.
</p>
<p><code>tbl_query()</code> is an experimental variant of <code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
to create a lazy table from a table-generating function,
useful for reading nonstandard CSV files or other data sources.
It is safer than <code>dplyr::tbl()</code> because there is no risk of misinterpreting the query.
Use <code>dplyr::tbl(src, dplyr::sql("SELECT ... FROM ..."))</code> for custom SQL queries.
See <a href="https://duckdb.org/docs/data/overview">https://duckdb.org/docs/data/overview</a> for details on data importing functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_duckdb(...)

translate_duckdb(...)

tbl_file(src, path, ..., cache = FALSE)

tbl_query(src, query, ..., cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="backend-duckdb_+3A_...">...</code></td>
<td>
<p>Any parameters to be forwarded</p>
</td></tr>
<tr><td><code id="backend-duckdb_+3A_src">src</code></td>
<td>
<p>A duckdb connection object</p>
</td></tr>
<tr><td><code id="backend-duckdb_+3A_path">path</code></td>
<td>
<p>Path to existing Parquet, CSV or JSON file</p>
</td></tr>
<tr><td><code id="backend-duckdb_+3A_cache">cache</code></td>
<td>
<p>Enable object cache for Parquet files</p>
</td></tr>
<tr><td><code id="backend-duckdb_+3A_query">query</code></td>
<td>
<p>SQL code, omitting the <code>FROM</code> clause</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr, warn.conflicts = FALSE)
con &lt;- DBI::dbConnect(duckdb(), path = ":memory:")

dbiris &lt;- copy_to(con, iris, overwrite = TRUE)

dbiris %&gt;%
  select(Petal.Length, Petal.Width) %&gt;%
  filter(Petal.Length &gt; 1.5) %&gt;%
  head(5)

DBI::dbDisconnect(con, shutdown = TRUE)

</code></pre>

<hr>
<h2 id='duckdb'>Connect to a DuckDB database instance</h2><span id='topic+duckdb'></span><span id='topic+duckdb_shutdown'></span><span id='topic+duckdb_adbc'></span><span id='topic+dbConnect__duckdb_driver'></span><span id='topic+dbConnect+2Cduckdb_driver-method'></span><span id='topic+dbDisconnect__duckdb_connection'></span><span id='topic+dbDisconnect+2Cduckdb_connection-method'></span>

<h3>Description</h3>

<p><code>duckdb()</code> creates or reuses a database instance.
</p>
<p><code>duckdb_shutdown()</code> shuts down a database instance.
</p>
<p>Return an <code><a href="adbcdrivermanager.html#topic+adbc_driver_void">adbcdrivermanager::adbc_driver()</a></code> for use with Arrow Database
Connectivity via the adbcdrivermanager package.
</p>
<p><code>dbConnect()</code> connects to a database instance.
</p>
<p><code>dbDisconnect()</code> closes a DuckDB database connection, optionally shutting down
the associated instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb(
  dbdir = DBDIR_MEMORY,
  read_only = FALSE,
  bigint = "numeric",
  config = list()
)

duckdb_shutdown(drv)

duckdb_adbc()

## S4 method for signature 'duckdb_driver'
dbConnect(
  drv,
  dbdir = DBDIR_MEMORY,
  ...,
  debug = getOption("duckdb.debug", FALSE),
  read_only = FALSE,
  timezone_out = "UTC",
  tz_out_convert = c("with", "force"),
  config = list(),
  bigint = "numeric"
)

## S4 method for signature 'duckdb_connection'
dbDisconnect(conn, ..., shutdown = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_+3A_dbdir">dbdir</code></td>
<td>
<p>Location for database files. Should be a path to an existing
directory in the file system. With the default, all
data is kept in RAM</p>
</td></tr>
<tr><td><code id="duckdb_+3A_read_only">read_only</code></td>
<td>
<p>Set to <code>TRUE</code> for read-only operation</p>
</td></tr>
<tr><td><code id="duckdb_+3A_bigint">bigint</code></td>
<td>
<p>How 64-bit integers should be returned, default is double/numeric. Set to integer64 for bit64 encoding.</p>
</td></tr>
<tr><td><code id="duckdb_+3A_config">config</code></td>
<td>
<p>Named list with DuckDB configuration flags</p>
</td></tr>
<tr><td><code id="duckdb_+3A_drv">drv</code></td>
<td>
<p>Object returned by <code>duckdb()</code></p>
</td></tr>
<tr><td><code id="duckdb_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
<tr><td><code id="duckdb_+3A_debug">debug</code></td>
<td>
<p>Print additional debug information such as queries</p>
</td></tr>
<tr><td><code id="duckdb_+3A_timezone_out">timezone_out</code></td>
<td>
<p>The time zone returned to R, defaults to <code>"UTC"</code>, which
is currently the only timezone supported by duckdb.
If you want to display datetime values in the local timezone,
set to <code><a href="base.html#topic+Sys.timezone">Sys.timezone()</a></code> or <code>""</code>.</p>
</td></tr>
<tr><td><code id="duckdb_+3A_tz_out_convert">tz_out_convert</code></td>
<td>
<p>How to convert timestamp columns to the timezone specified
in <code>timezone_out</code>. There are two options: <code>"with"</code>, and <code>"force"</code>. If <code>"with"</code>
is chosen, the timestamp will be returned as it would appear in the specified time zone.
If <code>"force"</code> is chosen, the timestamp will have the same clock
time as the timestamp in the database, but with the new time zone.</p>
</td></tr>
<tr><td><code id="duckdb_+3A_conn">conn</code></td>
<td>
<p>A <code>duckdb_connection</code> object</p>
</td></tr>
<tr><td><code id="duckdb_+3A_shutdown">shutdown</code></td>
<td>
<p>Set to <code>TRUE</code> to shut down the DuckDB database instance that this connection refers to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>duckdb()</code> returns an object of class <a href="#topic+duckdb_driver-class">duckdb_driver</a>.
</p>
<p><code>dbDisconnect()</code> and <code>duckdb_shutdown()</code> are called for their
side effect.
</p>
<p>An object of class &quot;adbc_driver&quot;
</p>
<p><code>dbConnect()</code> returns an object of class
<a href="#topic+duckdb_connection-class">duckdb_connection</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(adbcdrivermanager)
with_adbc(db &lt;- adbc_database_init(duckdb_adbc()), {
  as.data.frame(read_adbc(db, "SELECT 1 as one;"))
})

drv &lt;- duckdb()
con &lt;- dbConnect(drv)

dbGetQuery(con, "SELECT 'Hello, world!'")

dbDisconnect(con)
duckdb_shutdown(drv)

# Shorter:
con &lt;- dbConnect(duckdb())
dbGetQuery(con, "SELECT 'Hello, world!'")
dbDisconnect(con, shutdown = TRUE)
</code></pre>

<hr>
<h2 id='duckdb_connection-class'>DuckDB connection class</h2><span id='topic+duckdb_connection-class'></span><span id='topic+duckdb_connection'></span><span id='topic+dbAppendTable__duckdb_connection'></span><span id='topic+dbAppendTable+2Cduckdb_connection-method'></span><span id='topic+dbBegin__duckdb_connection'></span><span id='topic+dbBegin+2Cduckdb_connection-method'></span><span id='topic+dbCommit__duckdb_connection'></span><span id='topic+dbCommit+2Cduckdb_connection-method'></span><span id='topic+dbDataType__duckdb_connection'></span><span id='topic+dbDataType+2Cduckdb_connection-method'></span><span id='topic+dbExistsTable__duckdb_connection_character'></span><span id='topic+dbExistsTable+2Cduckdb_connection+2Ccharacter-method'></span><span id='topic+dbGetInfo__duckdb_connection'></span><span id='topic+dbGetInfo+2Cduckdb_connection-method'></span><span id='topic+dbIsValid__duckdb_connection'></span><span id='topic+dbIsValid+2Cduckdb_connection-method'></span><span id='topic+dbListFields__duckdb_connection_character'></span><span id='topic+dbListFields+2Cduckdb_connection+2Ccharacter-method'></span><span id='topic+dbListTables__duckdb_connection'></span><span id='topic+dbListTables+2Cduckdb_connection-method'></span><span id='topic+dbQuoteIdentifier+2Cduckdb_connection+2CANY-method'></span><span id='topic+dbQuoteIdentifier+2Cduckdb_connection+2Ccharacter-method'></span><span id='topic+dbQuoteIdentifier+2Cduckdb_connection+2CSQL-method'></span><span id='topic+dbQuoteIdentifier+2Cduckdb_connection+2CId-method'></span><span id='topic+dbQuoteLiteral__duckdb_connection'></span><span id='topic+dbQuoteLiteral+2Cduckdb_connection-method'></span><span id='topic+dbRemoveTable__duckdb_connection_character'></span><span id='topic+dbRemoveTable+2Cduckdb_connection+2Ccharacter-method'></span><span id='topic+dbRollback__duckdb_connection'></span><span id='topic+dbRollback+2Cduckdb_connection-method'></span><span id='topic+dbSendQuery__duckdb_connection_character'></span><span id='topic+dbSendQuery+2Cduckdb_connection+2Ccharacter-method'></span><span id='topic+dbWriteTable__duckdb_connection_character_data.frame'></span><span id='topic+dbWriteTable+2Cduckdb_connection+2Ccharacter+2Cdata.frame-method'></span><span id='topic+show__duckdb_connection'></span><span id='topic+show+2Cduckdb_connection-method'></span>

<h3>Description</h3>

<p>Implements <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'duckdb_connection'
dbAppendTable(conn, name, value, ..., row.names = NULL)

## S4 method for signature 'duckdb_connection'
dbBegin(conn, ...)

## S4 method for signature 'duckdb_connection'
dbCommit(conn, ...)

## S4 method for signature 'duckdb_connection'
dbDataType(dbObj, obj, ...)

## S4 method for signature 'duckdb_connection,character'
dbExistsTable(conn, name, ...)

## S4 method for signature 'duckdb_connection'
dbGetInfo(dbObj, ...)

## S4 method for signature 'duckdb_connection'
dbIsValid(dbObj, ...)

## S4 method for signature 'duckdb_connection,character'
dbListFields(conn, name, ...)

## S4 method for signature 'duckdb_connection'
dbListTables(conn, ...)

## S4 method for signature 'duckdb_connection,ANY'
dbQuoteIdentifier(conn, x, ...)

## S4 method for signature 'duckdb_connection'
dbQuoteLiteral(conn, x, ...)

## S4 method for signature 'duckdb_connection,character'
dbRemoveTable(conn, name, ..., fail_if_missing = TRUE)

## S4 method for signature 'duckdb_connection'
dbRollback(conn, ...)

## S4 method for signature 'duckdb_connection,character'
dbSendQuery(conn, statement, params = NULL, ..., arrow = FALSE)

## S4 method for signature 'duckdb_connection,character,data.frame'
dbWriteTable(
  conn,
  name,
  value,
  ...,
  row.names = FALSE,
  overwrite = FALSE,
  append = FALSE,
  field.types = NULL,
  temporary = FALSE
)

## S4 method for signature 'duckdb_connection'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_connection-class_+3A_conn">conn</code></td>
<td>
<p>A <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a> object, as returned by
<code><a href="DBI.html#topic+dbConnect">dbConnect()</a></code>.</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_name">name</code></td>
<td>
<p>The table name, passed on to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>. Options are:
</p>

<ul>
<li><p> a character string with the unquoted DBMS table name,
e.g. <code>"table_name"</code>,
</p>
</li>
<li><p> a call to <code><a href="DBI.html#topic+Id">Id()</a></code> with components to the fully qualified table name,
e.g. <code>Id(schema = "my_schema", table = "table_name")</code>
</p>
</li>
<li><p> a call to <code><a href="DBI.html#topic+SQL">SQL()</a></code> with the quoted and fully qualified table name
given verbatim, e.g. <code>SQL('"my_schema"."table_name"')</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_value">value</code></td>
<td>
<p>A <a href="base.html#topic+data.frame">data.frame</a> (or coercible to data.frame).</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_...">...</code></td>
<td>
<p>Other parameters passed on to methods.</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_row.names">row.names</code></td>
<td>
<p>Whether the row.names of the data.frame should be preserved</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_dbobj">dbObj</code></td>
<td>
<p>A object inheriting from <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>
or <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a></p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_obj">obj</code></td>
<td>
<p>An R object whose SQL type we want to determine.</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_statement">statement</code></td>
<td>
<p>a character string containing SQL.</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_params">params</code></td>
<td>
<p>For <code>dbBind()</code>, a list of values, named or unnamed,
or a data frame, with one element/column per query parameter.
For <code>dbBindArrow()</code>, values as a nanoarrow stream,
with one column per query parameter.</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_arrow">arrow</code></td>
<td>
<p>Whether the query should be returned as an Arrow Table</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_overwrite">overwrite</code></td>
<td>
<p>If a table with the given name already exists, should it be overwritten?</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_append">append</code></td>
<td>
<p>If a table with the given name already exists, just try to append the passed data to it</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_field.types">field.types</code></td>
<td>
<p>Override the auto-generated SQL types</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_temporary">temporary</code></td>
<td>
<p>Should the created table be temporary?</p>
</td></tr>
<tr><td><code id="duckdb_connection-class_+3A_object">object</code></td>
<td>
<p>Any R object</p>
</td></tr>
</table>

<hr>
<h2 id='duckdb_driver-class'>DuckDB driver class</h2><span id='topic+duckdb_driver-class'></span><span id='topic+duckdb_driver'></span><span id='topic+dbDataType__duckdb_driver'></span><span id='topic+dbDataType+2Cduckdb_driver-method'></span><span id='topic+dbGetInfo__duckdb_driver'></span><span id='topic+dbGetInfo+2Cduckdb_driver-method'></span><span id='topic+dbIsValid__duckdb_driver'></span><span id='topic+dbIsValid+2Cduckdb_driver-method'></span><span id='topic+show__duckdb_driver'></span><span id='topic+show+2Cduckdb_driver-method'></span>

<h3>Description</h3>

<p>Implements <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'duckdb_driver'
dbDataType(dbObj, obj, ...)

## S4 method for signature 'duckdb_driver'
dbGetInfo(dbObj, ...)

## S4 method for signature 'duckdb_driver'
dbIsValid(dbObj, ...)

## S4 method for signature 'duckdb_driver'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_driver-class_+3A_dbobj">dbObj</code></td>
<td>
<p>An object inheriting from <a href="DBI.html#topic+DBIObject-class">DBIObject</a>,
i.e. <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>, <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>,
or a <a href="DBI.html#topic+DBIResult-class">DBIResult</a></p>
</td></tr>
<tr><td><code id="duckdb_driver-class_+3A_...">...</code></td>
<td>
<p>Other arguments to methods.</p>
</td></tr>
<tr><td><code id="duckdb_driver-class_+3A_object">object</code></td>
<td>
<p>Any R object</p>
</td></tr>
</table>

<hr>
<h2 id='duckdb_explain-class'>DuckDB EXPLAIN query tree</h2><span id='topic+duckdb_explain-class'></span><span id='topic+duckdb_explain'></span><span id='topic+print.duckdb_explain'></span>

<h3>Description</h3>

<p>DuckDB EXPLAIN query tree
</p>

<hr>
<h2 id='duckdb_get_substrait'>Get the Substrait plan for a SQL query
Transforms a SQL query into a raw vector containing the serialized Substrait query blob</h2><span id='topic+duckdb_get_substrait'></span>

<h3>Description</h3>

<p>Get the Substrait plan for a SQL query
Transforms a SQL query into a raw vector containing the serialized Substrait query blob
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_get_substrait(conn, query, enable_optimizer = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_get_substrait_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_get_substrait_+3A_query">query</code></td>
<td>
<p>The query string in SQL</p>
</td></tr>
<tr><td><code id="duckdb_get_substrait_+3A_enable_optimizer">enable_optimizer</code></td>
<td>
<p>Optional parameter to enable/disable query-optimizer. By default optimizer is enabled.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A raw vector containing the substrait protobuf blob
</p>

<hr>
<h2 id='duckdb_get_substrait_json'>Get the Substrait plan for a SQL query in the JSON format
Transforms a SQL query into a vector containing the serialized Substrait query JSON</h2><span id='topic+duckdb_get_substrait_json'></span>

<h3>Description</h3>

<p>Get the Substrait plan for a SQL query in the JSON format
Transforms a SQL query into a vector containing the serialized Substrait query JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_get_substrait_json(conn, query, enable_optimizer = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_get_substrait_json_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_get_substrait_json_+3A_query">query</code></td>
<td>
<p>The query string in SQL</p>
</td></tr>
<tr><td><code id="duckdb_get_substrait_json_+3A_enable_optimizer">enable_optimizer</code></td>
<td>
<p>Optional parameter to enable/disable query-optimizer. By default optimizer is enabled.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector containing the substrait protobuf JSON
</p>

<hr>
<h2 id='duckdb_prepare_substrait'>Query DuckDB using Substrait
Method for interpreting a Substrait BLOB plan as a DuckDB Query Plan
It interprets and executes the query.</h2><span id='topic+duckdb_prepare_substrait'></span>

<h3>Description</h3>

<p>Query DuckDB using Substrait
Method for interpreting a Substrait BLOB plan as a DuckDB Query Plan
It interprets and executes the query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_prepare_substrait(conn, query, arrow = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_prepare_substrait_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_prepare_substrait_+3A_query">query</code></td>
<td>
<p>The Protobuf-encoded Substrait Query Plan. Qack!</p>
</td></tr>
<tr><td><code id="duckdb_prepare_substrait_+3A_arrow">arrow</code></td>
<td>
<p>Whether the result should be in Arrow format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A DuckDB Query Result
</p>

<hr>
<h2 id='duckdb_prepare_substrait_json'>Query DuckDB using Substrait
Method for interpreting a Substrait JSON plan as a DuckDB Query Plan
It interprets and executes the query.</h2><span id='topic+duckdb_prepare_substrait_json'></span>

<h3>Description</h3>

<p>Query DuckDB using Substrait
Method for interpreting a Substrait JSON plan as a DuckDB Query Plan
It interprets and executes the query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_prepare_substrait_json(conn, json, arrow = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_prepare_substrait_json_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_prepare_substrait_json_+3A_json">json</code></td>
<td>
<p>The Json Query Plan. Qack!</p>
</td></tr>
<tr><td><code id="duckdb_prepare_substrait_json_+3A_arrow">arrow</code></td>
<td>
<p>Whether the result should be in Arrow format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A DuckDB Query Result
</p>

<hr>
<h2 id='duckdb_read_csv'>Reads a CSV file into DuckDB</h2><span id='topic+duckdb_read_csv'></span>

<h3>Description</h3>

<p>Directly reads a CSV file into DuckDB, tries to detect and create the correct schema for it.
This usually is much faster than reading the data into R and writing it to DuckDB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_read_csv(
  conn,
  name,
  files,
  header = TRUE,
  na.strings = "",
  nrow.check = 500,
  delim = ",",
  quote = "\"",
  col.names = NULL,
  lower.case.names = FALSE,
  sep = delim,
  transaction = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_read_csv_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_name">name</code></td>
<td>
<p>The name for the virtual table that is registered or unregistered</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_files">files</code></td>
<td>
<p>One or more CSV file names, should all have the same structure though</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_header">header</code></td>
<td>
<p>Whether or not the CSV files have a separate header in the first line</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_na.strings">na.strings</code></td>
<td>
<p>Which strings in the CSV files should be considered to be NULL</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_nrow.check">nrow.check</code></td>
<td>
<p>How many rows should be read from the CSV file to figure out data types</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_delim">delim</code></td>
<td>
<p>Which field separator should be used</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_quote">quote</code></td>
<td>
<p>Which quote character is used for columns in the CSV file</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_col.names">col.names</code></td>
<td>
<p>Override the detected or generated column names</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_lower.case.names">lower.case.names</code></td>
<td>
<p>Transform column names to lower case</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_sep">sep</code></td>
<td>
<p>Alias for delim for compatibility</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_transaction">transaction</code></td>
<td>
<p>Should a transaction be used for the entire operation</p>
</td></tr>
<tr><td><code id="duckdb_read_csv_+3A_...">...</code></td>
<td>
<p>Passed on to <code><a href="utils.html#topic+read.csv">read.csv()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The number of rows in the resulted table, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>con &lt;- dbConnect(duckdb())

data &lt;- data.frame(a = 1:3, b = letters[1:3])
path &lt;- tempfile(fileext = ".csv")

write.csv(data, path, row.names = FALSE)

duckdb_read_csv(con, "data", path)
dbReadTable(con, "data")

dbDisconnect(con)
</code></pre>

<hr>
<h2 id='duckdb_register'>Register a data frame as a virtual table</h2><span id='topic+duckdb_register'></span><span id='topic+duckdb_unregister'></span>

<h3>Description</h3>

<p><code>duckdb_register()</code> registers a data frame as a virtual table (view)
in a DuckDB connection.
No data is copied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_register(conn, name, df, overwrite = FALSE, experimental = FALSE)

duckdb_unregister(conn, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_register_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_register_+3A_name">name</code></td>
<td>
<p>The name for the virtual table that is registered or unregistered</p>
</td></tr>
<tr><td><code id="duckdb_register_+3A_df">df</code></td>
<td>
<p>A <code>data.frame</code> with the data for the virtual table</p>
</td></tr>
<tr><td><code id="duckdb_register_+3A_overwrite">overwrite</code></td>
<td>
<p>Should an existing registration be overwritten?</p>
</td></tr>
<tr><td><code id="duckdb_register_+3A_experimental">experimental</code></td>
<td>
<p>Enable experimental optimizations</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>duckdb_unregister()</code> unregisters a previously registered data frame.
</p>


<h3>Value</h3>

<p>These functions are called for their side effect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>con &lt;- dbConnect(duckdb())

data &lt;- data.frame(a = 1:3, b = letters[1:3])

duckdb_register(con, "data", data)
dbReadTable(con, "data")

duckdb_unregister(con, "data")

dbDisconnect(con)
</code></pre>

<hr>
<h2 id='duckdb_register_arrow'>Register an Arrow data source as a virtual table</h2><span id='topic+duckdb_register_arrow'></span><span id='topic+duckdb_unregister_arrow'></span><span id='topic+duckdb_list_arrow'></span>

<h3>Description</h3>

<p><code>duckdb_register_arrow()</code> registers an Arrow data source as a virtual table (view)
in a DuckDB connection.
No data is copied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_register_arrow(conn, name, arrow_scannable, use_async = NULL)

duckdb_unregister_arrow(conn, name)

duckdb_list_arrow(conn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_register_arrow_+3A_conn">conn</code></td>
<td>
<p>A DuckDB connection, created by <code>dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="duckdb_register_arrow_+3A_name">name</code></td>
<td>
<p>The name for the virtual table that is registered or unregistered</p>
</td></tr>
<tr><td><code id="duckdb_register_arrow_+3A_arrow_scannable">arrow_scannable</code></td>
<td>
<p>A scannable Arrow-object</p>
</td></tr>
<tr><td><code id="duckdb_register_arrow_+3A_use_async">use_async</code></td>
<td>
<p>Switched to the asynchronous scanner. (deprecated)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>duckdb_unregister_arrow()</code> unregisters a previously registered data frame.
</p>


<h3>Value</h3>

<p>These functions are called for their side effect.
</p>

<hr>
<h2 id='duckdb_result-class'>DuckDB Result Set</h2><span id='topic+duckdb_result-class'></span><span id='topic+duckdb_result'></span><span id='topic+duckdb_fetch_arrow'></span><span id='topic+duckdb_fetch_record_batch'></span><span id='topic+dbBind__duckdb_result'></span><span id='topic+dbBind+2Cduckdb_result-method'></span><span id='topic+dbClearResult__duckdb_result'></span><span id='topic+dbClearResult+2Cduckdb_result-method'></span><span id='topic+dbColumnInfo__duckdb_result'></span><span id='topic+dbColumnInfo+2Cduckdb_result-method'></span><span id='topic+dbFetch__duckdb_result'></span><span id='topic+dbFetch+2Cduckdb_result-method'></span><span id='topic+dbGetInfo__duckdb_result'></span><span id='topic+dbGetInfo+2Cduckdb_result-method'></span><span id='topic+dbGetRowCount__duckdb_result'></span><span id='topic+dbGetRowCount+2Cduckdb_result-method'></span><span id='topic+dbGetRowsAffected__duckdb_result'></span><span id='topic+dbGetRowsAffected+2Cduckdb_result-method'></span><span id='topic+dbGetStatement__duckdb_result'></span><span id='topic+dbGetStatement+2Cduckdb_result-method'></span><span id='topic+dbHasCompleted__duckdb_result'></span><span id='topic+dbHasCompleted+2Cduckdb_result-method'></span><span id='topic+dbIsValid__duckdb_result'></span><span id='topic+dbIsValid+2Cduckdb_result-method'></span><span id='topic+show__duckdb_result'></span><span id='topic+show+2Cduckdb_result-method'></span>

<h3>Description</h3>

<p>Methods for accessing result sets for queries on DuckDB connections.
Implements <a href="DBI.html#topic+DBIResult-class">DBIResult</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duckdb_fetch_arrow(res, chunk_size = 1e+06)

duckdb_fetch_record_batch(res, chunk_size = 1e+06)

## S4 method for signature 'duckdb_result'
dbBind(res, params, ...)

## S4 method for signature 'duckdb_result'
dbClearResult(res, ...)

## S4 method for signature 'duckdb_result'
dbColumnInfo(res, ...)

## S4 method for signature 'duckdb_result'
dbFetch(res, n = -1, ...)

## S4 method for signature 'duckdb_result'
dbGetInfo(dbObj, ...)

## S4 method for signature 'duckdb_result'
dbGetRowCount(res, ...)

## S4 method for signature 'duckdb_result'
dbGetRowsAffected(res, ...)

## S4 method for signature 'duckdb_result'
dbGetStatement(res, ...)

## S4 method for signature 'duckdb_result'
dbHasCompleted(res, ...)

## S4 method for signature 'duckdb_result'
dbIsValid(dbObj, ...)

## S4 method for signature 'duckdb_result'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duckdb_result-class_+3A_res">res</code></td>
<td>
<p>Query result to be converted to a Record Batch Reader</p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_chunk_size">chunk_size</code></td>
<td>
<p>The chunk size</p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_params">params</code></td>
<td>
<p>For <code>dbBind()</code>, a list of values, named or unnamed,
or a data frame, with one element/column per query parameter.
For <code>dbBindArrow()</code>, values as a nanoarrow stream,
with one column per query parameter.</p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods.</p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_n">n</code></td>
<td>
<p>maximum number of records to retrieve per fetch. Use <code>n = -1</code>
or <code>n = Inf</code>
to retrieve all pending records.  Some implementations may recognize other
special values.</p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_dbobj">dbObj</code></td>
<td>
<p>An object inheriting from <a href="DBI.html#topic+DBIObject-class">DBIObject</a>,
i.e. <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>, <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>,
or a <a href="DBI.html#topic+DBIResult-class">DBIResult</a></p>
</td></tr>
<tr><td><code id="duckdb_result-class_+3A_object">object</code></td>
<td>
<p>Any R object</p>
</td></tr>
</table>

<hr>
<h2 id='duckdb-package'>duckdb: DBI Package for the DuckDB Database Management System</h2><span id='topic+duckdb-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>The DuckDB project is an embedded analytical data management system with support for the Structured Query Language (SQL). This package includes all of DuckDB and a R Database Interface (DBI) connector.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Hannes Mühleisen <a href="mailto:hannes@cwi.nl">hannes@cwi.nl</a> (<a href="https://orcid.org/0000-0001-8552-0029">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Mark Raasveldt <a href="mailto:mark.raasveldt@cwi.nl">mark.raasveldt@cwi.nl</a> (<a href="https://orcid.org/0000-0001-5005-6844">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Stichting DuckDB Foundation [copyright holder]
</p>
</li>
<li><p> Apache Software Foundation [copyright holder]
</p>
</li>
<li><p> PostgreSQL Global Development Group [copyright holder]
</p>
</li>
<li><p> The Regents of the University of California [copyright holder]
</p>
</li>
<li><p> Cameron Desrochers [copyright holder]
</p>
</li>
<li><p> Victor Zverovich [copyright holder]
</p>
</li>
<li><p> RAD Game Tools [copyright holder]
</p>
</li>
<li><p> Valve Software [copyright holder]
</p>
</li>
<li><p> Rich Geldreich [copyright holder]
</p>
</li>
<li><p> Tenacious Software LLC [copyright holder]
</p>
</li>
<li><p> The RE2 Authors [copyright holder]
</p>
</li>
<li><p> Google Inc. [copyright holder]
</p>
</li>
<li><p> Facebook Inc. [copyright holder]
</p>
</li>
<li><p> Steven G. Johnson [copyright holder]
</p>
</li>
<li><p> Jiahao Chen [copyright holder]
</p>
</li>
<li><p> Tony Kelman [copyright holder]
</p>
</li>
<li><p> Jonas Fonseca [copyright holder]
</p>
</li>
<li><p> Lukas Fittl [copyright holder]
</p>
</li>
<li><p> Salvatore Sanfilippo [copyright holder]
</p>
</li>
<li><p> Art.sy, Inc. [copyright holder]
</p>
</li>
<li><p> Oran Agra [copyright holder]
</p>
</li>
<li><p> Redis Labs, Inc. [copyright holder]
</p>
</li>
<li><p> Melissa O'Neill [copyright holder]
</p>
</li>
<li><p> PCG Project contributors [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://r.duckdb.org/">https://r.duckdb.org/</a>
</p>
</li>
<li> <p><a href="https://github.com/duckdb/duckdb-r">https://github.com/duckdb/duckdb-r</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/duckdb/duckdb-r/issues">https://github.com/duckdb/duckdb-r/issues</a>
</p>
</li></ul>


<hr>
<h2 id='read_csv_duckdb'>Deprecated functions</h2><span id='topic+read_csv_duckdb'></span>

<h3>Description</h3>

<p><code>read_csv_duckdb()</code> has been superseded by <code>duckdb_read_csv()</code>.
The order of the arguments has changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_csv_duckdb(conn, files, tablename, ...)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
