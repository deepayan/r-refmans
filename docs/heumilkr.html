<!DOCTYPE html><html><head><title>Help for package heumilkr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {heumilkr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clarke_wright'><p>Clark-Wright algorithm (Capacitated Vehicle Routing</p>
Problem solver)</a></li>
<li><a href='#milkr_cost'><p>Vehicle runs cost / distance</p></a></li>
<li><a href='#milkr_saving'><p>Vehicle run saving</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Heuristic Capacitated Vehicle Routing Problem Solver</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements the Clarke-Wright algorithm to find a quasi-optimal solution to the Capacitated Vehicle Routing Problem. See Clarke, G. and Wright, J.R. (1964) &lt;<a href="https://doi.org/10.1287%2Fopre.12.4.568">doi:10.1287/opre.12.4.568</a>&gt; for details. The implementation is accompanied by helper functions to inspect its solution.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>cpp11</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++17</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/lschneiderbauer/heumilkr">https://github.com/lschneiderbauer/heumilkr</a>,
<a href="https://lschneiderbauer.github.io/heumilkr/">https://lschneiderbauer.github.io/heumilkr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/lschneiderbauer/heumilkr/issues">https://github.com/lschneiderbauer/heumilkr/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang (&ge; 1.1.0), ggplot2 (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), hedgehog (&ge; 0.1)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-09 19:30:19 UTC; lukas</td>
</tr>
<tr>
<td>Author:</td>
<td>Lukas Schneiderbauer [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lukas Schneiderbauer &lt;lukas.schneiderbauer@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-10 19:23:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='clarke_wright'>Clark-Wright algorithm (Capacitated Vehicle Routing
Problem solver)</h2><span id='topic+clarke_wright'></span>

<h3>Description</h3>

<p>Finds a quasi-optimal solution to the Capacitated Vehicle Routing
Problem (CVRP). It is assumed that all demands will be satisfied by a
single source.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clarke_wright(demand, distances, vehicles, restrictions = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clarke_wright_+3A_demand">demand</code></td>
<td>
<p>A numeric vector consisting of &quot;demands&quot; indexed by sites.
The <code>i</code>th entry refers to the demand of site <code>i</code> (and the length
of the vector equals the number of sites <code>N</code> with demands). The
units of the demand values need to match the units of the
vehicle capacity values. <code>NA</code> values are not allowed.</p>
</td></tr>
<tr><td><code id="clarke_wright_+3A_distances">distances</code></td>
<td>
<p>An object of class <code>dist</code>, created by <code><a href="stats.html#topic+dist">stats::dist()</a></code>, with
<code>(N + 1)</code> locations describing the distances between individual
sites. The first index refers to the source site. The <code>(i+1)</code>'th
index refers to site <code>i</code> (as defined by <code>demand</code>).</p>
</td></tr>
<tr><td><code id="clarke_wright_+3A_vehicles">vehicles</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame()</a></code> describing available vehicle types and their respective
capacities. One row per vehicle type. The data frame is expected to have
two columns:
</p>

<ul>
<li> <p><code>n</code> - Number of available vehicles. This can be set to <code>NA</code> if the
number is &quot;infinite&quot; (i.e. effectively the maximal integer value
on your machine.).
It is recommended to keep at least one vehicle type as &quot;infinite&quot;,
otherwise the solver might raise a run time error due to initially
not having enough vehicles available (even though the final
solution might satisfy the availability restrictions).
</p>
</li>
<li> <p><code>caps</code> - The vehicle capacity in same units as <code>demand</code>.
</p>
</li></ul>

<p>The order of the <code><a href="base.html#topic+data.frame">data.frame()</a></code> is relevant and determines the prioritization
of vehicle assignments to runs (in case two or more vehicle types are
eligible for assignment the &quot;first&quot; vehicle is chosen). In a typical scenario
&quot;more expensive&quot; vehicles should be further down in the list (so the cheaper
one is chosen in case there is doubt). Since higher capacity vehicles
usually involve higher costs sorting the data frame by capacity is usually
a good rule of thumb.</p>
</td></tr>
<tr><td><code id="clarke_wright_+3A_restrictions">restrictions</code></td>
<td>
<p>An optional <code><a href="base.html#topic+data.frame">data.frame()</a></code> that allows to define vehicle type restrictions for
particular sites in the form of a blacklist.
The data frame is expected to have two columns:
</p>

<ul>
<li> <p><code>vehicle</code> - The vehicle type index.
</p>
</li>
<li> <p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector)
</p>
</li></ul>

<p>Each row defines a restriction: vehicle type <code>vehicle</code> can not approach site
<code>site</code>. Defaults to <code>NULL</code>, i.e. no restrictions are enforced.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the original paper,
Clarke, G. and Wright, J.R. (1964) <a href="https://doi.org/10.1287/opre.12.4.568">doi:10.1287/opre.12.4.568</a>,
for a detailed explanation of the Clarke-Wright algorithm.
</p>


<h3>Value</h3>

<p>Returns a &quot;<code>heumilkr_solution</code>&quot; object, a <code><a href="base.html#topic+data.frame">data.frame()</a></code> with one row per
site-run combination bestowed with additional attributes. Its columns
consist of:
</p>

<ul>
<li> <p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector) associated
to the run.
</p>
</li>
<li> <p><code>run</code> - Identifies the run the site is assigned to.
</p>
</li>
<li> <p><code>order</code>  - Integer values providing the visiting order within each run.
</p>
</li>
<li> <p><code>vehicle</code> - The vehicle type index (as provided in <code>vehicles</code>) associated
to the run.
</p>
</li>
<li> <p><code>load</code> - The actual load in units of <code>demand</code> on the particular run.
</p>
</li>
<li> <p><code>distance</code> - The travel distance of the particular run.
</p>
</li></ul>

<p>Unless a site demand exceeds the vehicle capacities it is always assigned
to only a single run.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demand &lt;- c(3, 2, 4, 2)

positions &lt;-
  data.frame(
    pos_x = c(0, 1, -1, 2, 3),
    pos_y = c(0, 1, 1, 2, 3)
  )

clarke_wright(
  demand,
  dist(positions),
  data.frame(n = NA_integer_, caps = 6)
)

</code></pre>

<hr>
<h2 id='milkr_cost'>Vehicle runs cost / distance</h2><span id='topic+milkr_cost'></span>

<h3>Description</h3>

<p>Calculates the total distance associated to a <code><a href="#topic+clarke_wright">clarke_wright()</a></code> result.
This is the measure that the corresponding Capacitated Vehicle Routing
Problem minimizes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>milkr_cost(solution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="milkr_cost_+3A_solution">solution</code></td>
<td>
<p>A &quot;<code>heumilkr_solution</code>&quot; object, typically obtained by <code><a href="#topic+clarke_wright">clarke_wright()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The total traveled distance.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demand &lt;- c(3, 2, 4, 2)

positions &lt;-
  data.frame(
    pos_x = c(0, 1, -1, 2, 3),
    pos_y = c(0, 1, 1, 2, 3)
  )

solution &lt;- clarke_wright(
  demand,
  dist(positions),
  data.frame(n = NA_integer_, caps = 6)
)

milkr_cost(solution)

</code></pre>

<hr>
<h2 id='milkr_saving'>Vehicle run saving</h2><span id='topic+milkr_saving'></span>

<h3>Description</h3>

<p>Measures the saving that was achieved by the heuristic optimization
algorithm <code><a href="#topic+clarke_wright">clarke_wright()</a></code> compared to the naive vehicle run assignment,
i.e. one run per site.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>milkr_saving(solution, relative = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="milkr_saving_+3A_solution">solution</code></td>
<td>
<p>A &quot;<code>heumilkr_solution</code>&quot; object, typically obtained by <code><a href="#topic+clarke_wright">clarke_wright()</a></code>.</p>
</td></tr>
<tr><td><code id="milkr_saving_+3A_relative">relative</code></td>
<td>
<p>Should the saving be given as dimensionful value (in units of distance as
provided to <code><a href="#topic+clarke_wright">clarke_wright()</a></code>), or as percentage relative to the
naive costs.
Defaults to <code>FALSE</code>, i.e. a dimensionful value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The savings either as dimensionful value or as percentage relative to the
naive costs, depending on <code>relative</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demand &lt;- c(3, 2, 4, 2)

positions &lt;-
  data.frame(
    pos_x = c(0, 1, -1, 2, 3),
    pos_y = c(0, 1, 1, 2, 3)
  )

solution &lt;- clarke_wright(
  demand,
  dist(positions),
  data.frame(n = NA_integer_, caps = 6)
)

print(milkr_saving(solution))
print(milkr_saving(solution, relative = TRUE))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
