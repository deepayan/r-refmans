<!DOCTYPE html><html lang="en-US"><head><title>Help for package sport</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sport}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bbt_run'><p>Bayesian Bradley-Terry</p></a></li>
<li><a href='#dbl_run'><p>Dynamic Bayesian Logit</p></a></li>
<li><a href='#glicko_run'><p>Glicko rating algorithm</p></a></li>
<li><a href='#glicko2_run'><p>Glicko2 rating algorithm</p></a></li>
<li><a href='#gpheats'><p>Heat results of Speedway Grand-Prix</p></a></li>
<li><a href='#gpsquads'><p>Turnament results of Speedway Grand-Prix</p></a></li>
<li><a href='#plot.rating'><p>Plot rating object</p></a></li>
<li><a href='#predict.rating'><p>Predict rating model</p></a></li>
<li><a href='#rating_run'><p>Apply rating algorithm</p></a></li>
<li><a href='#summary.rating'><p>Summarizing rating objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sequential Pairwise Online Rating Techniques</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dawid Kałędkowski &lt;dawid.kaledkowski@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculates ratings for two-player or 
  multi-player challenges. Methods included in package such as are able to 
  estimate ratings (players strengths) and their evolution in time, also able to 
  predict output of challenge. Algorithms are based on Bayesian Approximation 
  Method, and they don't involve any matrix inversions nor likelihood estimation. 
  Parameters are updated sequentially, and computation doesn't require any 
  additional RAM to make estimation feasible. Additionally, base of the package 
  is written in C++ what makes sport computation even faster. Methods used in the 
  package refer to Mark E. Glickman (1999) 
  <a href="http://www.glicko.net/research/glicko.pdf">http://www.glicko.net/research/glicko.pdf</a>; 
  Mark E. Glickman (2001) &lt;<a href="https://doi.org/10.1080%2F02664760120059219">doi:10.1080/02664760120059219</a>&gt;; 
  Ruby C. Weng, Chih-Jen Lin (2011) <a href="https://www.jmlr.org/papers/volume12/weng11a/weng11a.pdf">https://www.jmlr.org/papers/volume12/weng11a/weng11a.pdf</a>; 
  W. Penny, Stephen J. Roberts (1999) &lt;<a href="https://doi.org/10.1109%2FIJCNN.1999.832603">doi:10.1109/IJCNN.1999.832603</a>&gt;.</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gogonzo/sport/issues">https://github.com/gogonzo/sport/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, data.table, ggplot2</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/gogonzo/sport">https://github.com/gogonzo/sport</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, knitr, lobstr, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 16:25:24 UTC; gonzo</td>
</tr>
<tr>
<td>Author:</td>
<td>Dawid Kałędkowski <a href="https://orcid.org/0000-0001-9533-457X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-08 23:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bbt_run'>Bayesian Bradley-Terry</h2><span id='topic+bbt_run'></span>

<h3>Description</h3>

<p>Bayesian Bradley-Terry
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bbt_run(
  formula,
  data,
  r = numeric(0),
  rd = numeric(0),
  init_r = 25,
  init_rd = 25/3,
  lambda = NULL,
  share = NULL,
  weight = NULL,
  kappa = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bbt_run_+3A_formula">formula</code></td>
<td>
<p>formula which specifies the model. RHS Allows only player
rating parameter and it should be specified in following manner:<br />
</p>
<p><code>rank | id ~ player(name)</code>.
</p>

<ul>
<li> <p><code>rank</code> player position in event.
</p>
</li>
<li> <p><code>id</code> event identifier in which pairwise comparison is assessed.
</p>
</li>
<li> <p><code>player(name)</code> name of the contestant. In this case <code>player(name)</code>
helps algorithm point name of the column where player names are stored.
</p>
</li></ul>

<p>Users can also specify formula in in different way:<br />
</p>
<p><code>rank | id ~ player(name|team)</code>. Which means that players are playing in teams,
and results are observed for teams not for players. For more see vignette.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_data">data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_r">r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_rd">rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_init_r">init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_init_rd">init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_lambda">lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_share">share</code></td>
<td>
<p>name of the column in <code>data</code> containing player share in team
efforts. It's used to first calculate combined rating of the team and
then redistribute ratings update back to players level. Warning - it should
be used only if formula is specified with players nested within teams (<code>player(player|team)</code>).</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_weight">weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td></tr>
<tr><td><code id="bbt_run_+3A_kappa">kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;rating&quot; object is returned:
</p>

<ul>
<li> <p><code>final_r</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>final_rd</code> named vector containing players ratings deviations.
</p>
</li>
<li> <p><code>r</code> data.frame with evolution of the ratings and ratings deviations
estimated at each event.
</p>
</li>
<li> <p><code>pairs</code> pairwise combinations of players in analysed events with
prior probability and result of a challenge.
</p>
</li>
<li> <p><code>class</code> of the object.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code>settings</code> arguments specified in function call.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># the simplest example
data &lt;- data.frame(
  id = c(1, 1, 1, 1),
  team = c("A", "A", "B", "B"),
  player = c("a", "b", "c", "d"),
  rank_team = c(1, 1, 2, 2),
  rank_player = c(3, 4, 1, 2)
)

bbt &lt;- bbt_run(
  data = data,
  formula = rank_player | id ~ player(player),
  r = setNames(c(25, 23.3, 25.83, 28.33), c("a", "b", "c", "d")),
  rd = setNames(c(4.76, 0.71, 2.38, 7.14), c("a", "b", "c", "d"))
)

# nested matchup
bbt &lt;- bbt_run(
  data = data,
  formula = rank_team | id ~ player(player | team)
)

</code></pre>

<hr>
<h2 id='dbl_run'>Dynamic Bayesian Logit</h2><span id='topic+dbl_run'></span>

<h3>Description</h3>

<p>Dynamic Bayesian Logit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbl_run(
  formula,
  data,
  r = NULL,
  rd = NULL,
  lambda = NULL,
  weight = NULL,
  kappa = 0.95,
  init_r = 0,
  init_rd = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dbl_run_+3A_formula">formula</code></td>
<td>
<p>formula which specifies the model. Unlike other algorithms
in the packages (glicko_run, glicko2_run, bbt_run), this method doesn't allow
players nested in teams with <code>player(player | team)</code> and user should matchup
in formula using <code>player(player)</code>. DBL allows user specify multiple parameters
also in interaction with others.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_data">data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_r">r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_rd">rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_lambda">lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_weight">weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_kappa">kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_init_r">init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td></tr>
<tr><td><code id="dbl_run_+3A_init_rd">init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;rating&quot; object is returned:
</p>

<ul>
<li> <p><code>final_r</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>final_rd</code> named vector containing players ratings deviations.
</p>
</li>
<li> <p><code>r</code> data.frame with evolution of the ratings and ratings deviations
estimated at each event.
</p>
</li>
<li> <p><code>pairs</code> pairwise combinations of players in analysed events with
prior probability and result of a challenge.
</p>
</li>
<li> <p><code>class</code> of the object.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code>settings</code> arguments specified in function call.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># the simplest example

data &lt;- data.frame(
  id = c(1, 1, 1, 1),
  name = c("A", "B", "C", "D"),
  rank = c(3, 4, 1, 2),
  gate = c(1, 2, 3, 4),
  factor1 = c("a", "a", "b", "b"),
  factor2 = c("a", "b", "a", "b")
)

dbl &lt;- dbl_run(
  data = data,
  formula = rank | id ~ player(name)
)

dbl &lt;- dbl_run(
  data = data,
  formula = rank | id ~ player(name) + gate * factor1
)
</code></pre>

<hr>
<h2 id='glicko_run'>Glicko rating algorithm</h2><span id='topic+glicko_run'></span>

<h3>Description</h3>

<p>Glicko rating algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glicko_run(
  data,
  formula,
  r = numeric(0),
  rd = numeric(0),
  init_r = 1500,
  init_rd = 350,
  lambda = numeric(0),
  share = numeric(0),
  weight = numeric(0),
  kappa = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="glicko_run_+3A_data">data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_formula">formula</code></td>
<td>
<p>formula which specifies the model. RHS Allows only player
rating parameter and it should be specified in following manner:<br />
</p>
<p><code>rank | id ~ player(name)</code>.
</p>

<ul>
<li> <p><code>rank</code> player position in event.
</p>
</li>
<li> <p><code>id</code> event identifier in which pairwise comparison is assessed.
</p>
</li>
<li> <p><code>player(name)</code> name of the contestant. In this case <code>player(name)</code>
helps algorithm point name of the column where player names are stored.
</p>
</li></ul>

<p>Users can also specify formula in in different way:<br />
</p>
<p><code>rank | id ~ player(name|team)</code>. Which means that players are playing in teams,
and results are observed for teams not for players. For more see vignette.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_r">r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_rd">rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_init_r">init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_init_rd">init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_lambda">lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_share">share</code></td>
<td>
<p>name of the column in <code>data</code> containing player share in team
efforts. It's used to first calculate combined rating of the team and
then redistribute ratings update back to players level. Warning - it should
be used only if formula is specified with players nested within teams (<code>player(player|team)</code>).</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_weight">weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td></tr>
<tr><td><code id="glicko_run_+3A_kappa">kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;rating&quot; object is returned:
</p>

<ul>
<li> <p><code>final_r</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>final_rd</code> named vector containing players ratings deviations.
</p>
</li>
<li> <p><code>r</code> data.frame with evolution of the ratings and ratings deviations
estimated at each event.
</p>
</li>
<li> <p><code>pairs</code> pairwise combinations of players in analysed events with
prior probability and result of a challenge.
</p>
</li>
<li> <p><code>class</code> of the object.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code>settings</code> arguments specified in function call.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># the simplest example
data &lt;- data.frame(
  id = c(1, 1, 1, 1),
  team = c("A", "A", "B", "B"),
  player = c("a", "b", "c", "d"),
  rank_team = c(1, 1, 2, 2),
  rank_player = c(3, 4, 1, 2)
)

# Example from Glickman
glicko &lt;- glicko_run(
  data = data,
  formula = rank_player | id ~ player(player),
  r = setNames(c(1500.0, 1400.0, 1550.0, 1700.0), c("a", "b", "c", "d")),
  rd = setNames(c(200.0, 30.0, 100.0, 300.0), c("a", "b", "c", "d"))
)

# nested matchup
glicko &lt;- glicko_run(
  data = data,
  formula = rank_team | id ~ player(player | team)
)
</code></pre>

<hr>
<h2 id='glicko2_run'>Glicko2 rating algorithm</h2><span id='topic+glicko2_run'></span>

<h3>Description</h3>

<p>Glicko2 rating algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glicko2_run(
  formula,
  data,
  r = numeric(0),
  rd = numeric(0),
  sigma = numeric(0),
  lambda = NULL,
  share = NULL,
  weight = NULL,
  init_r = 1500,
  init_rd = 350,
  init_sigma = 0.05,
  kappa = 0.5,
  tau = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="glicko2_run_+3A_formula">formula</code></td>
<td>
<p>formula which specifies the model. RHS Allows only player
rating parameter and it should be specified in following manner:<br />
</p>
<p><code>rank | id ~ player(name)</code>.
</p>

<ul>
<li> <p><code>rank</code> player position in event.
</p>
</li>
<li> <p><code>id</code> event identifier in which pairwise comparison is assessed.
</p>
</li>
<li> <p><code>player(name)</code> name of the contestant. In this case <code>player(name)</code>
helps algorithm point name of the column where player names are stored.
</p>
</li></ul>

<p>Users can also specify formula in in different way:<br />
</p>
<p><code>rank | id ~ player(name|team)</code>. Which means that players are playing in teams,
and results are observed for teams not for players. For more see vignette.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_data">data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_r">r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_rd">rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_sigma">sigma</code></td>
<td>
<p>(only for glicko2) named vector of initial players ratings
estimates. If not specified then <code>sigma</code> will be created automatically for
parameters specified in <code>formula</code> with initial value <code>init_sigma</code>.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_lambda">lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_share">share</code></td>
<td>
<p>name of the column in <code>data</code> containing player share in team
efforts. It's used to first calculate combined rating of the team and
then redistribute ratings update back to players level. Warning - it should
be used only if formula is specified with players nested within teams (<code>player(player|team)</code>).</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_weight">weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_init_r">init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_init_rd">init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_init_sigma">init_sigma</code></td>
<td>
<p>initial values for <code>sigma</code> if not provided.
Default = 0.5</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_kappa">kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td></tr>
<tr><td><code id="glicko2_run_+3A_tau">tau</code></td>
<td>
<p>The system constant. Which constrains the change in volatility over
time. Reasonable choices are between 0.3 and 1.2 (<code>default = 0.5</code>), though
the system should be tested to decide which value results in greatest
predictive accuracy. Smaller values of <code>tau</code> prevent the volatility measures
from changing by large amounts, which in turn prevent enormous changes in
ratings based on very improbable results. If the application of Glicko-2 is
expected to involve extremely improbable collections of game outcomes, then
<code>tau</code> should be set to a small value, even as small as, say, <code>tau= 0</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;rating&quot; object is returned:
</p>

<ul>
<li> <p><code>final_r</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>final_rd</code> named vector containing players ratings deviations.
</p>
</li>
<li> <p><code>final_sigma</code> named vector containing players ratings volatile.
</p>
</li>
<li> <p><code>r</code> data.frame with evolution of the ratings and ratings deviations
estimated at each event.
</p>
</li>
<li> <p><code>pairs</code> pairwise combinations of players in analysed events with
prior probability and result of a challenge.
</p>
</li>
<li> <p><code>class</code> of the object.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code>settings</code> arguments specified in function call.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># the simplest example
data &lt;- data.frame(
  id = c(1, 1, 1, 1),
  team = c("A", "A", "B", "B"),
  player = c("a", "b", "c", "d"),
  rank_team = c(1, 1, 2, 2),
  rank_player = c(3, 4, 1, 2)
)

# Example from Glickman
glicko2 &lt;- glicko2_run(
  data = data,
  formula = rank_player | id ~ player(player),
  r = setNames(c(1500.0, 1400.0, 1550.0, 1700.0), c("a", "b", "c", "d")),
  rd = setNames(c(200.0, 30.0, 100.0, 300.0), c("a", "b", "c", "d"))
)

# nested matchup
glicko2 &lt;- glicko2_run(
  data = data,
  formula = rank_team | id ~ player(player | team)
)
</code></pre>

<hr>
<h2 id='gpheats'>Heat results of Speedway Grand-Prix</h2><span id='topic+gpheats'></span>

<h3>Description</h3>

<p>Actual dataset containing heats results of all Speedway Grand-Prix turnaments
<code>gpheats</code>.
</p>


<h3>Format</h3>

<p>A data frame with &gt;19000 rows and 11 variables:
</p>

<ul>
<li> <p><code>id</code> - event identifier
</p>
</li>
<li> <p><code>season</code> - year of Grand-Prix, 1995-now
</p>
</li>
<li> <p><code>date</code> - date of turnament
</p>
</li>
<li> <p><code>round</code> - round in season
</p>
</li>
<li> <p><code>name</code> - Turnament name
</p>
</li>
<li> <p><code>heat</code> - heat number, 1-23
</p>
</li>
<li> <p><code>field</code> - number of gate, 1-4
</p>
</li>
<li> <p><code>rider</code> - rider name, string
</p>
</li>
<li> <p><code>points</code> - paints gained, integer
</p>
</li>
<li> <p><code>position</code> - position at finish line, string
</p>
</li>
<li> <p><code>rank</code> - rank at finish line, integer
</p>
</li></ul>



<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='gpsquads'>Turnament results of Speedway Grand-Prix</h2><span id='topic+gpsquads'></span>

<h3>Description</h3>

<p>Actual dataset containing turnament results of all Speedway Grand-Prix events
<code>gpsquads</code>
</p>


<h3>Format</h3>

<p>A data frame with &gt;4000 rows and 9 variables:
</p>

<ul>
<li> <p><code>id</code> - event identifier
</p>
</li>
<li> <p><code>season</code> - year of Grand-Prix, 1995-now
</p>
</li>
<li> <p><code>date</code> - date of turnament
</p>
</li>
<li> <p><code>place</code> - stadium of event
</p>
</li>
<li> <p><code>round</code> - round in season
</p>
</li>
<li> <p><code>name</code> - Turnament name
</p>
</li>
<li> <p><code>rider</code> - rider names, 1-6
</p>
</li>
<li> <p><code>points</code> - points gained, integer
</p>
</li>
<li> <p><code>classification</code> - classification after an event
</p>
</li></ul>



<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='plot.rating'>Plot rating object</h2><span id='topic+plot.rating'></span>

<h3>Description</h3>

<p>Plot rating object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rating'
plot(x, n = 10, players, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.rating_+3A_x">x</code></td>
<td>
<p>of class rating</p>
</td></tr>
<tr><td><code id="plot.rating_+3A_n">n</code></td>
<td>
<p>number of teams to be plotted</p>
</td></tr>
<tr><td><code id="plot.rating_+3A_players">players</code></td>
<td>
<p>optional vector with names of the contestants (coefficients) to plot
their evolution in time.</p>
</td></tr>
<tr><td><code id="plot.rating_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>

<hr>
<h2 id='predict.rating'>Predict rating model</h2><span id='topic+predict.rating'></span>

<h3>Description</h3>

<p>Predict rating model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rating'
predict(object, newdata, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.rating_+3A_object">object</code></td>
<td>
<p>of class rating</p>
</td></tr>
<tr><td><code id="predict.rating_+3A_newdata">newdata</code></td>
<td>
<p>data.frame with data to predict</p>
</td></tr>
<tr><td><code id="predict.rating_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>probabilities of winning challenge by player over his opponent in all provided events.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>glicko &lt;- glicko_run(
  data = gpheats[1:16, ],
  formula = rank | id ~ player(rider)
)
predict(glicko, gpheats[17:20, ])
</code></pre>

<hr>
<h2 id='rating_run'>Apply rating algorithm</h2><span id='topic+rating_run'></span>

<h3>Description</h3>

<p>Apply rating algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rating_run(
  method,
  data,
  formula,
  r = numeric(0),
  rd = numeric(0),
  sigma = numeric(0),
  init_r = numeric(0),
  init_rd = numeric(0),
  init_sigma = numeric(0),
  lambda = numeric(0),
  share = numeric(0),
  weight = numeric(0),
  kappa = numeric(0),
  tau = numeric(0)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rating_run_+3A_method">method</code></td>
<td>
<p>one of <code>c("glicko", "glicko2", "bbt", "dbl")</code></p>
</td></tr>
<tr><td><code id="rating_run_+3A_data">data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_formula">formula</code></td>
<td>
<p>formula which specifies the model. RHS Allows only player
rating parameter and it should be specified in following manner:<br />
</p>
<p><code>rank | id ~ player(name)</code>.
</p>

<ul>
<li> <p><code>rank</code> player position in event.
</p>
</li>
<li> <p><code>id</code> event identifier in which pairwise comparison is assessed.
</p>
</li>
<li> <p><code>player(name)</code> name of the contestant. In this case <code>player(name)</code>
helps algorithm point name of the column where player names are stored.
</p>
</li></ul>

<p>Users can also specify formula in in different way:<br />
</p>
<p><code>rank | id ~ player(name|team)</code>. Which means that players are playing in teams,
and results are observed for teams not for players. For more see vignette.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_r">r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_rd">rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_sigma">sigma</code></td>
<td>
<p>(only for glicko2) named vector of initial players ratings
estimates. If not specified then <code>sigma</code> will be created automatically for
parameters specified in <code>formula</code> with initial value <code>init_sigma</code>.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_init_r">init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td></tr>
<tr><td><code id="rating_run_+3A_init_rd">init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td></tr>
<tr><td><code id="rating_run_+3A_init_sigma">init_sigma</code></td>
<td>
<p>initial values for <code>sigma</code> if not provided.
Default = 0.5</p>
</td></tr>
<tr><td><code id="rating_run_+3A_lambda">lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_share">share</code></td>
<td>
<p>name of the column in <code>data</code> containing player share in team
efforts. It's used to first calculate combined rating of the team and
then redistribute ratings update back to players level. Warning - it should
be used only if formula is specified with players nested within teams (<code>player(player|team)</code>).</p>
</td></tr>
<tr><td><code id="rating_run_+3A_weight">weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_kappa">kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td></tr>
<tr><td><code id="rating_run_+3A_tau">tau</code></td>
<td>
<p>The system constant. Which constrains the change in volatility over
time. Reasonable choices are between 0.3 and 1.2 (<code>default = 0.5</code>), though
the system should be tested to decide which value results in greatest
predictive accuracy. Smaller values of <code>tau</code> prevent the volatility measures
from changing by large amounts, which in turn prevent enormous changes in
ratings based on very improbable results. If the application of Glicko-2 is
expected to involve extremely improbable collections of game outcomes, then
<code>tau</code> should be set to a small value, even as small as, say, <code>tau= 0</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.rating'>Summarizing rating objects</h2><span id='topic+summary.rating'></span>

<h3>Description</h3>

<p>Summarizing rating objects
Summary for object of class <code>rating</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rating'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.rating_+3A_object">object</code></td>
<td>
<p>of class rating</p>
</td></tr>
<tr><td><code id="summary.rating_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with following elements:
</p>

<ul>
<li> <p><code>formula</code> modeled formula.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Overall Accuracy&#8288;</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>r</code> a <code>data.frame</code> with summarized players ratings and model winning probabilities.
</p>
</li></ul>

<p>Probabilities are returned only in models with one variable (ratings):
</p>

<ul>
<li> <p><code>name</code> of a player
</p>
</li>
<li> <p><code>r</code> players ratings
</p>
</li>
<li> <p><code>rd</code> players ratings deviation
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Model probability&#8288;</code> mean predicted probability of winning the challenge by the player.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;True probability&#8288;</code> mean observed probability of winning the challenge by the player.
</p>
</li>
<li> <p><code>Accuracy</code> Accuracy of prediction.
</p>
</li>
<li> <p><code>pairings</code> number of pairwise occurrences.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- glicko_run(
  formula = rank | id ~ player(rider),
  data = gpheats[1:102, ]
)
summary(model)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
