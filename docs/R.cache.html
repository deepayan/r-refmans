<!DOCTYPE html><html lang="en"><head><title>Help for package R.cache</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {R.cache}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#R.cache-package'><p>Package R.cache</p></a></li>
<li><a href='#.baseLoad'><p>Loads an object from a file connection</p></a></li>
<li><a href='#addMemoization'><p>Creates a copy of an existing function such that its results are memoized</p></a></li>
<li><a href='#clearCache'><p>Removes all files in a cache file directory</p></a></li>
<li><a href='#evalWithMemoization'><p>Evaluates an R expression with memoization</p></a></li>
<li><a href='#findCache'><p>Locates a cache file</p></a></li>
<li><a href='#generateCache'><p>Generates a cache pathname from a key object</p></a></li>
<li><a href='#getCachePath'><p>Gets the path to the file cache directory</p></a></li>
<li><a href='#getCacheRootPath'><p>Gets the root path to the file cache directory</p></a></li>
<li><a href='#getChecksum'><p>Generates a deterministic checksum for an R object</p></a></li>
<li><a href='#loadCache'><p>Loads data from file cache</p></a></li>
<li><a href='#memoizedCall'><p>Calls a function with memoization</p></a></li>
<li><a href='#Non-documented+20objects'><p>Non-documented objects</p></a></li>
<li><a href='#Options+20used+20by+20R.cache'><p>Options used by R.cache</p></a></li>
<li><a href='#readCacheHeader'><p>Loads data from file cache</p></a></li>
<li><a href='#saveCache'><p>Saves data to file cache</p></a></li>
<li><a href='#setCachePath'><p>Sets the path to the file cache directory</p></a></li>
<li><a href='#setCacheRootPath'><p>Sets the root path to the file cache directory</p></a></li>
<li><a href='#setupCacheRootPath'><p>Interactively offers the user to set up the default root path</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.16.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, R.methodsS3 (&ge; 1.8.1), R.oo (&ge; 1.24.0), R.utils (&ge;
2.10.1), digest (&ge; 0.6.13)</td>
</tr>
<tr>
<td>Title:</td>
<td>Fast and Light-Weight Caching (Memoization) of Objects and
Results to Speed Up Computations</td>
</tr>
<tr>
<td>Author:</td>
<td>Henrik Bengtsson [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Henrik Bengtsson &lt;henrikb@braju.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Memoization can be used to speed up repetitive and computational expensive function calls.  The first time a function that implements memoization is called the results are stored in a cache memory.  The next time the function is called with the same set of parameters, the results are momentarily retrieved from the cache avoiding repeating the calculations.  With this package, any R object can be cached in a key-value storage where the key can be an arbitrary set of R objects.  The cache memory is persistent (on the file system).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-2.1">LGPL-2.1</a> | <a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a> [expanded from: LGPL (&ge; 2.1)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>TRUE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/HenrikBengtsson/R.cache">https://github.com/HenrikBengtsson/R.cache</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/HenrikBengtsson/R.cache/issues">https://github.com/HenrikBengtsson/R.cache/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-21 13:19:33 UTC; hb</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-21 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='R.cache-package'>Package R.cache</h2><span id='topic+R.cache-package'></span><span id='topic+R.cache'></span>

<h3>Description</h3>

<p>Memoization can be used to speed up repetitive and computational expensive function calls.  The first time a function that implements memoization is called the results are stored in a cache memory.  The next time the function is called with the same set of parameters, the results are momentarily retrieved from the cache avoiding repeating the calculations.  With this package, any R object can be cached in a key-value storage where the key can be an arbitrary set of R objects.  The cache memory is persistent (on the file system).
</p>


<h3>Installation and updates</h3>

<p>To install this package and all of its dependent packages, do:
<code>install.packages("R.cache")</code>
</p>


<h3>To get started</h3>


<ul>
<li><p><a href="#topic+loadCache">loadCache</a>, <a href="#topic+saveCache">saveCache</a>
Methods for loading and saving objects from and to the cache.

</p>
</li>
<li><p><a href="#topic+getCacheRootPath">getCacheRootPath</a>, <a href="#topic+setCacheRootPath">setCacheRootPath</a>
Methods for getting and setting the directory where cache
files are stored.

</p>
</li></ul>



<h3>How to cite this package</h3>

<p>Whenever using this package, please cite [1] as
</p>
<pre>
Bengtsson, H. The R.oo package - Object-Oriented Programming with References Using
Standard R Code, Proceedings of the 3rd International Workshop on Distributed
Statistical Computing (DSC 2003), ISSN 1609-395X, Hornik, K.; Leisch, F. &amp; Zeileis,
A. (ed.), 2003
</pre>


<h3>Wishlist</h3>

<p>Here is a list of features that would be useful, but which I have
too little time to add myself. Contributions are appreciated.
</p>

<ul>
<li><p> Add a functionality to identify cache files that are
no longer of use.  For now, there is an extra header field
for arbitrary comments which can be used, but maybe more
formal fields are useful, e.g. keywords, user, etc?
</p>
</li></ul>

<p>If you consider implement some of the above, make sure it is not
already implemented by downloading the latest &quot;devel&quot; version!
</p>


<h3>Related work</h3>

<p>See also the <span class="pkg">filehash</span> package, and the <code>cache()</code> function
in the <span class="pkg">Biobase</span> package of Bioconductor.
</p>


<h3>License</h3>

<p>The releases of this package is licensed under LGPL version 2.1 or newer.
</p>


<h3>References</h3>

<p>[1] H. Bengtsson, <em>The R.oo package - Object-Oriented Programming with References Using Standard R Code</em>, In Kurt Hornik, Friedrich Leisch and Achim Zeileis, editors, Proceedings of the 3rd International Workshop on Distributed Statistical Computing (DSC 2003), March 20-22, Vienna, Austria. <a href="https://www.r-project.org/conferences/DSC-2003/Proceedings/">https://www.r-project.org/conferences/DSC-2003/Proceedings/</a>
<br />
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>

<hr>
<h2 id='.baseLoad'>Loads an object from a file connection</h2><span id='topic+.baseLoad'></span>

<h3>Description</h3>

<p>Loads an object from a file connection similar to <code><a href="base.html#topic+load">load</a></code>(), but without resetting
file connections (to position zero).
</p>
<p><em>WARNING: This is an internal function that should not be
called by anything but the internal code of the <span class="pkg">R.cache</span> package.</em>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.baseLoad(con, envir=parent.frame())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".baseLoad_+3A_con">con</code></td>
<td>
<p>A <code><a href="base.html#topic+connections">connection</a></code>.</p>
</td></tr>
<tr><td><code id=".baseLoad_+3A_envir">envir</code></td>
<td>
<p>An <code><a href="base.html#topic+environment">environment</a></code> where the loaded object will be stored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The reason why it is not possible to use <code><a href="base.html#topic+load">load</a></code>() is that
that resets the file position of the connection before trying to
load the object.
The reason why that happens is because when you pass a regular file
connection to <code><a href="base.html#topic+load">load</a></code>() it gets coerced via <code><a href="base.html#topic+gzcon">gzcon</a></code>(),
which is the function that resets the file position.
</p>
<p>The workaround is to create a local copy of <code>base::load()</code> and
modify it by dropping the <code>gzcon()</code> coercion.  This is possible
because this function, that is <code>.baseLoad()</code>, is always called
with a <code>gzfile()</code> <code><a href="base.html#topic+connections">connection</a></code>.
</p>


<h3>Value</h3>

<p>Returns (invisible) a <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> of the names of objects
loaded.
</p>


<h3>See Also</h3>

<p>This function is used by <code><a href="#topic+loadCache">loadCache</a></code>() and <code><a href="#topic+readCacheHeader">readCacheHeader</a></code>().
</p>

<hr>
<h2 id='addMemoization'>Creates a copy of an existing function such that its results are memoized</h2><span id='topic+addMemoization.default'></span><span id='topic+addMemoization'></span>

<h3>Description</h3>

<p>Creates a copy of an existing function such that its results are memoized.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
addMemoization(fcn, envir=parent.frame(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addMemoization_+3A_fcn">fcn</code></td>
<td>
<p>A <code><a href="base.html#topic+function">function</a></code> (or the name of a function) that should be
copied and have memoization added.</p>
</td></tr>
<tr><td><code id="addMemoization_+3A_envir">envir</code></td>
<td>
<p>The <code><a href="base.html#topic+environment">environment</a></code> from where to look for the function.</p>
</td></tr>
<tr><td><code id="addMemoization_+3A_...">...</code></td>
<td>
<p>Additional arguments for controlling the memoization,
i.e. all arguments of <code><a href="#topic+memoizedCall">memoizedCall</a></code>() that are not passed
to <code><a href="base.html#topic+do.call">do.call</a></code>().</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The new function is setup such that the the memoized call is done
in the environment of the caller (the parent frame of the function).
</p>
<p>If the <code><a href="base.html#topic+function">function</a></code> returns <code><a href="base.html#topic+NULL">NULL</a></code>, that particular function call is
<em>not</em> memoized.
</p>


<h3>Value</h3>

<p>Returns a <code><a href="base.html#topic+function">function</a></code>.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>The returned function utilized <code><a href="#topic+memoizedCall">memoizedCall</a></code>() internally.
</p>

<hr>
<h2 id='clearCache'>Removes all files in a cache file directory</h2><span id='topic+clearCache.default'></span><span id='topic+clearCache'></span>

<h3>Description</h3>

<p>Removes all files in a cache file directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
clearCache(path=getCachePath(...), ..., recursive=FALSE, prompt=TRUE &amp;&amp; interactive())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clearCache_+3A_path">path</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> string specifying the directory to be cleared.
By default, the path is what is returned by <code><a href="#topic+getCachePath">getCachePath</a></code>()
which arguments <code>...</code> are also passed.</p>
</td></tr>
<tr><td><code id="clearCache_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+getCachePath">getCachePath</a></code>(), especially
argument <code>dirs</code> to specify subdirectories.</p>
</td></tr>
<tr><td><code id="clearCache_+3A_recursive">recursive</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, subdirectories are also removed, otherwise
just the files in the specified directory.</p>
</td></tr>
<tr><td><code id="clearCache_+3A_prompt">prompt</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, the user will be prompted to confirm that
the directory will cleared before files are removed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the specified directory does not exists, an exception is thrown.
</p>


<h3>Value</h3>

<p>Returns (invisibly) a <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> of pathnames of the
files removed.  If no files were removed, <code><a href="base.html#topic+NULL">NULL</a></code> is returned.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>

<hr>
<h2 id='evalWithMemoization'>Evaluates an R expression with memoization</h2><span id='topic+evalWithMemoization'></span>

<h3>Description</h3>

<p>Evaluates an R expression with memoization such that the same objects are assigned to the
current environment and the same result is returned, if any.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalWithMemoization(expr, key=NULL, ..., envir=parent.frame(),
  drop=c("srcref", "srcfile", "wholeSrcref"), force=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evalWithMemoization_+3A_expr">expr</code></td>
<td>
<p>The <code><a href="base.html#topic+expression">expression</a></code> to be evaluated.</p>
</td></tr>
<tr><td><code id="evalWithMemoization_+3A_key">key</code></td>
<td>
<p>Additional objects to uniquely identify the evaluation.</p>
</td></tr>
<tr><td><code id="evalWithMemoization_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="#topic+loadCache">loadCache</a></code>()
and <code><a href="#topic+saveCache">saveCache</a></code>().</p>
</td></tr>
<tr><td><code id="evalWithMemoization_+3A_envir">envir</code></td>
<td>
<p>The <code><a href="base.html#topic+environment">environment</a></code> in which the expression should
be evaluated.</p>
</td></tr>
<tr><td><code id="evalWithMemoization_+3A_drop">drop</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code> vector of <code>expr</code> attributes to drop.
The default is to drop all source-reference information.</p>
</td></tr>
<tr><td><code id="evalWithMemoization_+3A_force">force</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, existing cached results are ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the value of the evaluated <code>expr</code> <code><a href="base.html#topic+expression">expression</a></code>, if any.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>Internally, <code><a href="base.html#topic+eval">eval</a></code>() is used to evaluate the expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>for (kk in 1:5) {
  cat(sprintf("Iteration #%d:\n", kk))
  res &lt;- evalWithMemoization({
    cat("Evaluating expression...")
    a &lt;- 1
    b &lt;- 2
    c &lt;- 4
    Sys.sleep(1)
    cat("done\n")
    b
  })
  print(res)

  # Sanity checks
  stopifnot(a == 1 &amp;&amp; b == 2 &amp;&amp; c == 4)

  # Clean up
  rm(a, b, c)
} # for (kk ...)


## OUTPUTS:
## Iteration #1:
## Evaluating expression...done
## [1] 2
## Iteration #2:
## [1] 2
## Iteration #3:
## [1] 2
## Iteration #4:
## [1] 2
## Iteration #5:
## [1] 2


############################################################
# WARNING
############################################################
# If the expression being evaluated depends on
# "input" objects, then these must be be specified
# explicitly as "key" objects.
for (ii in 1:2) {
  for (kk in 1:3) {
    cat(sprintf("Iteration #%d:\n", kk))
    res &lt;- evalWithMemoization({
      cat("Evaluating expression...")
      a &lt;- kk
      Sys.sleep(1)
      cat("done\n")
      a
    }, key=list(kk=kk))
    print(res)

    # Sanity checks
    stopifnot(a == kk)

    # Clean up
    rm(a)
  } # for (kk ...)
} # for (ii ...)

## OUTPUTS:
## Iteration #1:
## Evaluating expression...done
## [1] 1
## Iteration #2:
## Evaluating expression...done
## [1] 2
## Iteration #3:
## Evaluating expression...done
## [1] 3
## Iteration #1:
## [1] 1
## Iteration #2:
## [1] 2
## Iteration #3:
## [1] 3
</code></pre>

<hr>
<h2 id='findCache'>Locates a cache file</h2><span id='topic+findCache.default'></span><span id='topic+findCache'></span>

<h3>Description</h3>

<p>Locates a cache file from a key object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
findCache(key=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findCache_+3A_key">key</code></td>
<td>
<p>An optional object from which a hexadecimal hash
code will be generated and appended to the filename.</p>
</td></tr>
<tr><td><code id="findCache_+3A_...">...</code></td>
<td>
<p>Additional argument passed to <code><a href="#topic+generateCache">generateCache</a></code>().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the pathname as a <code><a href="base.html#topic+character">character</a></code>, or <code><a href="base.html#topic+NULL">NULL</a></code> if the no cached
data exists.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+generateCache">generateCache</a></code>().
<code><a href="#topic+loadCache">loadCache</a></code>().
</p>

<hr>
<h2 id='generateCache'>Generates a cache pathname from a key object</h2><span id='topic+generateCache.default'></span><span id='topic+generateCache'></span>

<h3>Description</h3>

<p>Generates a cache pathname from a key object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
generateCache(key, suffix=".Rcache", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generateCache_+3A_key">key</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> or an <code><a href="base.html#topic+environment">environment</a></code> from which a <code><a href="base.html#topic+character">character</a></code> string
checksum will be calculated and that will constitute the name part
of the cache filename.</p>
</td></tr>
<tr><td><code id="generateCache_+3A_suffix">suffix</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> string to be appended to the end of the
filename.</p>
</td></tr>
<tr><td><code id="generateCache_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+getCachePath">getCachePath</a></code>().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the pathname as a <code><a href="base.html#topic+character">character</a></code> string.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+findCache">findCache</a></code>().
Internally, the generic function <code><a href="#topic+getChecksum">getChecksum</a></code>() is used to
calculate the checksum of argument <code>key</code>.
</p>

<hr>
<h2 id='getCachePath'>Gets the path to the file cache directory</h2><span id='topic+getCachePath.default'></span><span id='topic+getCachePath'></span>

<h3>Description</h3>

<p>Gets the path to the file cache directory.
If missing, the directory is created.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
getCachePath(dirs=NULL, path=NULL, rootPath=getCacheRootPath(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCachePath_+3A_dirs">dirs</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> constituting the path to the
cache subdirectory (of the <em>cache root directory</em>
as returned by <code><a href="#topic+getCacheRootPath">getCacheRootPath</a></code>()) to be used.
If <code><a href="base.html#topic+NULL">NULL</a></code>, the path will be the cache root path.</p>
</td></tr>
<tr><td><code id="getCachePath_+3A_path">path</code>, <code id="getCachePath_+3A_rootpath">rootPath</code></td>
<td>
<p>(Advanced) <code><a href="base.html#topic+character">character</a></code> strings specifying the
explicit/default cache path and root cache path.</p>
</td></tr>
<tr><td><code id="getCachePath_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the path as a <code><a href="base.html#topic+character">character</a></code> string.
If the user does not have write permissions to the path, then
an error is thrown.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+setCachePath">setCachePath</a></code>.
</p>

<hr>
<h2 id='getCacheRootPath'>Gets the root path to the file cache directory</h2><span id='topic+getCacheRootPath.default'></span><span id='topic+getCacheRootPath'></span>

<h3>Description</h3>

<p>Gets the root path to the file cache directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
getCacheRootPath(defaultPath=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCacheRootPath_+3A_defaultpath">defaultPath</code></td>
<td>
<p>The default path, if no user-specified directory
has been given.</p>
</td></tr>
<tr><td><code id="getCacheRootPath_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the path as a <code><a href="base.html#topic+character">character</a></code> string.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>Too set the directory where cache files are stored,
see <code><a href="#topic+setCacheRootPath">setCacheRootPath</a></code>().
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  print(getCacheRootPath())
</code></pre>

<hr>
<h2 id='getChecksum'>Generates a deterministic checksum for an R object</h2><span id='topic+getChecksum.default'></span><span id='topic+getChecksum'></span>

<h3>Description</h3>

<p>Generates a deterministic checksum for an R object such that (i) if the same object is used again, then
the same checksum is obtained, and (ii) if another object is used,
then a different checksum is obtained with extremely high probability.
In other words, it is highly unlikely that two different objects
have the same checksum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
getChecksum(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getChecksum_+3A_object">object</code></td>
<td>
<p>The object for which a checksum should be calculated.</p>
</td></tr>
<tr><td><code id="getChecksum_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="digest.html#topic+digest">digest</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Because <code>getChecksum()</code> is a generic function,
it is possible to provide custom methods for specific
classes of objects.  This means that, if a certain class
specifies fields that carry auxiliary data, then these
can be excluded from the checksum calculation.
For instance, assume that all objects of class 'TimestampedObject'
contain timestamps specifying when each object was created.
Then a custom <code>getChecksum()</code> method for this class can
first drop the timestamp and then call the default
<code>getChecksum()</code> function.
</p>


<h3>Value</h3>

<p>Returns checksum represented as a <code><a href="base.html#topic+character">character</a></code> string.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>Internally, the <code><a href="digest.html#topic+digest">digest</a></code> method is used to calculate
the checksum.
</p>

<hr>
<h2 id='loadCache'>Loads data from file cache</h2><span id='topic+loadCache.default'></span><span id='topic+loadCache'></span>

<h3>Description</h3>

<p>Loads data from file cache, which is unique for an optional key object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
loadCache(key=NULL, sources=NULL, suffix=".Rcache", removeOldCache=TRUE, pathname=NULL,
  dirs=NULL, ..., onError=c("warning", "error", "message", "quiet", "print"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadCache_+3A_key">key</code></td>
<td>
<p>An optional object from which a hexadecimal hash
code will be generated and appended to the filename.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_sources">sources</code></td>
<td>
<p>Optional source objects.  If the cache object has a
timestamp older than one of the source objects, it will be ignored
and removed.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_suffix">suffix</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> string to be appended to the end of the
filename.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_removeoldcache">removeOldCache</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code> and the cache is older than the
<code>sources</code>, the cache file is removed, otherwise not.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_pathname">pathname</code></td>
<td>
<p>The pathname to the cache file.  If specified,
arguments <code>key</code> and <code>suffix</code> are ignored.  Note that
this is only needed in order to read a cache file for which
the key is unknown, for instance, in order to investigate
an unknown cache file.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_dirs">dirs</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> constituting the path to the
cache subdirectory (of the <em>cache root directory</em>
as returned by <code><a href="#topic+getCacheRootPath">getCacheRootPath</a></code>()) to be used.
If <code><a href="base.html#topic+NULL">NULL</a></code>, the path will be the cache root path.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr><td><code id="loadCache_+3A_onerror">onError</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> string specifying what the action is
if an exception is thrown.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The hash code calculated from the <code>key</code> object is a
32 characters long hexadecimal MD5 hash code.
For more details, see <code><a href="#topic+getChecksum">getChecksum</a></code>().
</p>


<h3>Value</h3>

<p>Returns an <span class="rlang"><b>R</b></span> object or <code><a href="base.html#topic+NULL">NULL</a></code>, if cache does not exist.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveCache">saveCache</a></code>().
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simulate &lt;- function(mean, sd) {
  # 1. Try to load cached data, if already generated
  key &lt;- list(mean, sd)
  data &lt;- loadCache(key)
  if (!is.null(data)) {
    cat("Loaded cached data\n")
    return(data);
  }

  # 2. If not available, generate it.
  cat("Generating data from scratch...")
  data &lt;- rnorm(1000, mean=mean, sd=sd)
  Sys.sleep(1)             # Emulate slow algorithm
  cat("ok\n")
  saveCache(data, key=key, comment="simulate()")

  data;
}

data &lt;- simulate(2.3, 3.0)
data &lt;- simulate(2.3, 3.5)
data &lt;- simulate(2.3, 3.0) # Will load cached data

# Clean up
file.remove(findCache(key=list(2.3,3.0)))
file.remove(findCache(key=list(2.3,3.5)))
</code></pre>

<hr>
<h2 id='memoizedCall'>Calls a function with memoization</h2><span id='topic+memoizedCall.default'></span><span id='topic+memoizedCall'></span>

<h3>Description</h3>

<p>Calls a function with memoization, that is, caches the results to be retrieved if
the function is called again with the exact same arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
memoizedCall(what, ..., envir=parent.frame(), force=FALSE, sources=NULL, dirs=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="memoizedCall_+3A_what">what</code></td>
<td>
<p>The <code><a href="base.html#topic+function">function</a></code> to be called, or a <code><a href="base.html#topic+character">character</a></code> string
specifying the name of the function to be called,
cf. <code><a href="base.html#topic+do.call">do.call</a></code>().</p>
</td></tr>
<tr><td><code id="memoizedCall_+3A_...">...</code></td>
<td>
<p>Arguments passed to the function.</p>
</td></tr>
<tr><td><code id="memoizedCall_+3A_envir">envir</code></td>
<td>
<p>The <code><a href="base.html#topic+environment">environment</a></code> in which the function is evaluated.</p>
</td></tr>
<tr><td><code id="memoizedCall_+3A_force">force</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, any cached results are ignored, otherwise not.</p>
</td></tr>
<tr><td><code id="memoizedCall_+3A_sources">sources</code>, <code id="memoizedCall_+3A_dirs">dirs</code></td>
<td>
<p>Optional arguments passed to
<code><a href="#topic+loadCache">loadCache</a></code>() and <code><a href="#topic+saveCache">saveCache</a></code>().</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code><a href="base.html#topic+function">function</a></code> returns <code><a href="base.html#topic+NULL">NULL</a></code>, that particular function call is
<em>not</em> memoized.
</p>


<h3>Value</h3>

<p>Returns the result of the function call.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>Internally, <code><a href="#topic+loadCache">loadCache</a></code>() is used to load memoized results,
if available.  If not available, then <code><a href="base.html#topic+do.call">do.call</a></code>() is used to
evaluate the function call,
and <code><a href="#topic+saveCache">saveCache</a></code>() is used to save the results to cache.
</p>

<hr>
<h2 id='Non-documented+20objects'>Non-documented objects</h2><span id='topic+Non-documented+20objects'></span><span id='topic+getChecksum.Object'></span><span id='topic+.textPrompt'></span>

<h3>Description</h3>

<p>This page contains aliases for all &quot;non-documented&quot; objects that
<code>R CMD check</code> detects in this package.
</p>
<p>Almost all of them are <em>generic</em> functions that have specific
document for the corresponding method coupled to a specific class.
Other functions are re-defined by <code>setMethodS3()</code> to
<em>default</em> methods. Neither of these two classes are non-documented
in reality.
The rest are deprecated methods.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>

<hr>
<h2 id='Options+20used+20by+20R.cache'>Options used by R.cache</h2><span id='topic+Options+20used+20by+20R.cache'></span><span id='topic+R.cache.options'></span>

<h3>Description</h3>

<p>Below are all <span class="rlang"><b>R</b></span> options specific to the <span class="pkg">R.cache</span> package.
<br />
<em>WARNING: Note that the names and the default values of
these options may change in future versions of the package.
Please use with care until further notice.</em>
</p>


<h3>Options for controlling futures</h3>


<dl>
<dt><span class="option">R.cache.compress</span>:</dt><dd>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, <code><a href="#topic+saveCache">saveCache</a></code>() will write compressed cache files,
otherwise not.
(Default: <code><a href="base.html#topic+logical">FALSE</a></code>)
</p>
</dd>
<dt><span class="option">R.cache.enabled</span>:</dt><dd>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, <code><a href="#topic+loadCache">loadCache</a></code>() is reading from and <code><a href="#topic+saveCache">saveCache</a></code>() is writing
to the cache, otherwise not.
(Default: <code><a href="base.html#topic+logical">TRUE</a></code>)
</p>
</dd>
<dt><span class="option">R.cache.rootPath</span>:</dt><dd>
<p>A <code><a href="base.html#topic+character">character</a></code> string specifying the default cache root path.
If not set, environment variable <span class="env">R_CACHE_ROOTPATH</span> is considered.
</p>
</dd>
<dt><span class="option">R.cache.touchOnLoad</span>:</dt><dd>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, <code><a href="#topic+loadCache">loadCache</a></code>() will update the &quot;last-modified&quot; timestamp of
the cache file (to the current time), otherwise not.
(Default: <code><a href="base.html#topic+logical">FALSE</a></code>)
</p>
</dd>
</dl>


<hr>
<h2 id='readCacheHeader'>Loads data from file cache</h2><span id='topic+readCacheHeader.default'></span><span id='topic+readCacheHeader'></span>

<h3>Description</h3>

<p>Loads data from file cache, which is unique for an optional key object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
readCacheHeader(file, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readCacheHeader_+3A_file">file</code></td>
<td>
<p>A filename or a <code><a href="base.html#topic+connections">connection</a></code>.</p>
</td></tr>
<tr><td><code id="readCacheHeader_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a named <code><a href="base.html#topic+list">list</a></code> structure with element <code>identifier</code>,
<code>version</code>, <code>comment</code> (optional), <code>sources</code> (optional),
and <code>timestamp</code>.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+findCache">findCache</a></code>().
<code><a href="#topic+loadCache">loadCache</a></code>().
<code><a href="#topic+saveCache">saveCache</a></code>().
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data &lt;- 1:120
key &lt;- list(some=1, vari=2, ables=3)

saveCache(key=key, data, comment="A simple example of a cached object.")

header &lt;- readCacheHeader(findCache(key=key))
print(header)

# Clean up
file.remove(findCache(key=key))
</code></pre>

<hr>
<h2 id='saveCache'>Saves data to file cache</h2><span id='topic+saveCache.default'></span><span id='topic+saveCache'></span>

<h3>Description</h3>

<p>Saves data to file cache, which is unique for an optional key object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
saveCache(object, key=NULL, sources=NULL, suffix=".Rcache", comment=NULL, pathname=NULL,
  dirs=NULL, compress=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saveCache_+3A_object">object</code></td>
<td>
<p>The object to be saved to file.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_key">key</code></td>
<td>
<p>An optional object from which a hexadecimal hash
code will be generated and appended to the filename.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_sources">sources</code></td>
<td>
<p>Source objects used for comparison of timestamps when
cache is loaded later.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_suffix">suffix</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> string to be appended to the end of the
filename.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_comment">comment</code></td>
<td>
<p>An optional <code><a href="base.html#topic+character">character</a></code> string written in ASCII at the
beginning of the file.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_pathname">pathname</code></td>
<td>
<p>(Advanced) An optional <code><a href="base.html#topic+character">character</a></code> string specifying
the pathname to the cache file.  If not specified (default), a unique
one is automatically generated from arguments <code>key</code> and
<code>suffix</code> among other things.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_dirs">dirs</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> constituting the path to the
cache subdirectory (of the <em>cache root directory</em>
as returned by <code><a href="#topic+getCacheRootPath">getCacheRootPath</a></code>()) to be used.
If <code><a href="base.html#topic+NULL">NULL</a></code>, the path will be the cache root path.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_compress">compress</code></td>
<td>
<p>If <code><a href="base.html#topic+logical">TRUE</a></code>, the cache file will be saved using
gzip compression, otherwise not.</p>
</td></tr>
<tr><td><code id="saveCache_+3A_...">...</code></td>
<td>
<p>Additional argument passed to <code><a href="base.html#topic+save">save</a></code>().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns (invisible) the pathname of the cache file.
</p>


<h3>Compression</h3>

<p>The <code>saveCache()</code> method saves a compressed cache file
(with filename extension *.gz) if argument <code>compress</code> is <code><a href="base.html#topic+logical">TRUE</a></code>.
The <code><a href="#topic+loadCache">loadCache</a></code>() method locates (via <code><a href="#topic+findCache">findCache</a></code>()) and
loads such cache files as well.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>For more details on how the hash code is generated etc, <code><a href="#topic+loadCache">loadCache</a></code>().
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: For an example, see ?loadCache</code></pre>

<hr>
<h2 id='setCachePath'>Sets the path to the file cache directory</h2><span id='topic+setCachePath.default'></span><span id='topic+setCachePath'></span>

<h3>Description</h3>

<p>Sets the path to the file cache directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
setCachePath(dirs=NULL, path=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setCachePath_+3A_dirs">dirs</code></td>
<td>
<p>A <code><a href="base.html#topic+character">character</a></code> <code><a href="base.html#topic+vector">vector</a></code> constituting the path to the
cache subdirectory of interest.</p>
</td></tr>
<tr><td><code id="setCachePath_+3A_path">path</code></td>
<td>
<p>The path to override the path according to the
<code>dirs</code> argument.</p>
</td></tr>
<tr><td><code id="setCachePath_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns nothing.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+getCachePath">getCachePath</a></code>().
</p>

<hr>
<h2 id='setCacheRootPath'>Sets the root path to the file cache directory</h2><span id='topic+setCacheRootPath.default'></span><span id='topic+setCacheRootPath'></span>

<h3>Description</h3>

<p>Sets the root path to the file cache directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
setCacheRootPath(path=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setCacheRootPath_+3A_path">path</code></td>
<td>
<p>The path.</p>
</td></tr>
<tr><td><code id="setCacheRootPath_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns (invisibly) the old root path.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p><code><a href="#topic+getCacheRootPath">getCacheRootPath</a></code>().
</p>

<hr>
<h2 id='setupCacheRootPath'>Interactively offers the user to set up the default root path</h2><span id='topic+setupCacheRootPath.default'></span><span id='topic+setupCacheRootPath'></span>

<h3>Description</h3>

<p>Interactively offers the user to set up the default root path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
setupCacheRootPath(defaultPath=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setupCacheRootPath_+3A_defaultpath">defaultPath</code></td>
<td>
<p>Default root path to set.</p>
</td></tr>
<tr><td><code id="setupCacheRootPath_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the cache root path is already set, it is used and nothing is done.
If the &quot;default&quot; root path (<code>defaultPath</code>) exists, it is used,
otherwise, if running interactively, the user is asked to approve
the usage (and creation) of the default root path.
In all other cases, the cache root path is set to a session-specific
temporary directory.
</p>


<h3>Value</h3>

<p>Returns (invisibly) the root path,
or <code><a href="base.html#topic+NULL">NULL</a></code> if running a non-interactive session.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>Internally, <code><a href="#topic+setCacheRootPath">setCacheRootPath</a></code>() is used to set the cache root path.
The <code><a href="base.html#topic+interactive">interactive</a></code>() function is used to test whether <span class="rlang"><b>R</b></span> is
running interactively or not.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
