<!DOCTYPE html><html lang="en"><head><title>Help for package SLCARE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SLCARE}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SLCARE-package'><p>SLCARE: Semiparametric Latent Class Analysis of Recurrent Events</p></a></li>
<li><a href='#colorectal'><p>Follow-up of metastatic colorectal cancer patients: times of new lesions</p>
appearance and death</a></li>
<li><a href='#plot.SLCARE'><p>Produce Plots for SLCARE</p></a></li>
<li><a href='#predict.SLCARE'><p>Predict Results for SLCARE</p></a></li>
<li><a href='#print.SLCARE'><p>Print Results for SLCARE</p></a></li>
<li><a href='#SimData'><p>Simulated dataset for demonstration</p></a></li>
<li><a href='#SLCARE'><p>Semiparametric Latent Class Analysis for Recurrent Event</p></a></li>
<li><a href='#summary.SLCARE'><p>Summary Results for SLCARE</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Semiparametric Latent Class Analysis of Recurrent Events</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Efficient R package for latent class analysis of recurrent events, based on the semiparametric multiplicative intensity model by Zhao et al. (2022) &lt;<a href="https://doi.org/10.1111%2Frssb.12499">doi:10.1111/rssb.12499</a>&gt;. SLCARE returns estimates for non-functional model parameters along with the associated variance estimates and p-values. Visualization tools are provided to depict the estimated functional model parameters and related functional quantities of interest. SLCARE also delivers a model checking plot to help assess the adequacy of the fitted model.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, magrittr, methods, nnet, reda, reReg, rlang,
stats, tidyr, utils</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-24 08:52:57 UTC; qiyu</td>
</tr>
<tr>
<td>Author:</td>
<td>Qi Yu [aut, cre],
  Limin Peng [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Qi Yu &lt;qi.yu2@emory.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-24 09:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='SLCARE-package'>SLCARE: Semiparametric Latent Class Analysis of Recurrent Events</h2><span id='topic+SLCARE-package'></span><span id='topic+_PACKAGE'></span>

<h3>Description</h3>

<p>Efficient R package for latent class analysis of recurrent events, based on the semiparametric multiplicative intensity model by Zhao et al. (2022) <a href="https://doi.org/10.1111/rssb.12499">doi:10.1111/rssb.12499</a>. SLCARE returns estimates for non-functional model parameters along with the associated variance estimates and p-values. Visualization tools are provided to depict the estimated functional model parameters and related functional quantities of interest. SLCARE also delivers a model checking plot to help assess the adequacy of the fitted model.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Qi Yu <a href="mailto:qi.yu2@emory.edu">qi.yu2@emory.edu</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Limin Peng <a href="mailto:lpeng@emory.edu">lpeng@emory.edu</a>
</p>
</li></ul>


<hr>
<h2 id='colorectal'>Follow-up of metastatic colorectal cancer patients: times of new lesions
appearance and death</h2><span id='topic+colorectal'></span>

<h3>Description</h3>

<p>Randomly chosen 150 patients from the follow-up of the FFCD 2000-05
multicenter phase III clinical trial originally including 410 patients with
metastatic colorectal cancer randomized into two therapeutic strategies:
combination and sequential. The dataset contains times of observed
appearances of new lesions censored by a terminal event (death or
right-censoring) with baseline characteristics (treatment arm, age, WHO
performance status and previous resection).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(colorectal)
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns: </p>

<dl>
<dt>id</dt><dd><p>identification of each subject. Repeated for each recurrence</p>
</dd>
<dt>time0</dt><dd><p>start of interval (0 or previous recurrence time)</p>
</dd>
<dt>time1</dt><dd><p>recurrence or censoring time</p>
</dd> <dt>new.lesions</dt><dd><p>Appearance of
new lesions status. 0: censsored or no event, 1: new lesions</p>
</dd>
<dt>treatment</dt><dd><p>To which treatment arm a patient was allocated? 1:
sequential (S); 2: combination (C)</p>
</dd> <dt>age</dt><dd><p>Age at baseline: 1: &lt;50
years, 2: 50-69 years, 3: &gt;69 years</p>
</dd> <dt>who.PS</dt><dd><p>WHO performance status at
baseline: 1: status 0, 2: status 1, 3: status 2</p>
</dd>
<dt>prev.resection</dt><dd><p>Previous resection of the primate tumor?  0: No, 1:
Yes</p>
</dd> <dt>state</dt><dd><p>death indicator. 0: alive, 1: dead</p>
</dd>
<dt>gap.time</dt><dd><p>interocurrence time or censoring time</p>
</dd> </dl>



<h3>Note</h3>

<p>This dataset was originally publicly available in frailtypack package (Rondeau et al. 2012).
Unfortunately the 'frailtypack&quot; is not available on CRAN at the time we create SLCARE.
We tentatively integrate this dataset to our package. The archive version of fraitypack on CRAN can be find at https://CRAN.R-project.org/package=frailtypack
</p>


<h3>References</h3>

<p>M. Ducreux, D. Malka, J. Mendiboure, P.-L. Etienne, P. Texereau,
D. Auby, P. Rougier, M. Gasmi, M. Castaing, M. Abbas, P. Michel, D. Gargot,
A. Azzedine, C. Lombard- Bohas, P. Geoffroy, B. Denis, J.-P., Pignon,
L.,Bedenne, and O.  Bouche (2011). Sequential versus combination
chemotherapy for the treatment of advanced colorectal cancer (FFCD 2000-05):
an open-label, randomised, phase 3 trial.  <em>The Lancet Oncology</em>
<b>12</b>, 1032-44.
</p>

<hr>
<h2 id='plot.SLCARE'>Produce Plots for SLCARE</h2><span id='topic+plot.SLCARE'></span>

<h3>Description</h3>

<p>Generate cumulative baseline intensity function, estimated mean function, model checking plot for SLCARE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SLCARE'
plot(x, type = c("ModelChecking", "mu0", "EstMeans"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.SLCARE_+3A_x">x</code></td>
<td>
<p>an object of class <code>SLCARE</code>.</p>
</td></tr>
<tr><td><code id="plot.SLCARE_+3A_type">type</code></td>
<td>
<p>the type of the plot.</p>
</td></tr>
<tr><td><code id="plot.SLCARE_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>SLCARE</code> provides visualization tools to depict the estimated functional model parameters and related functional quantities of interest.
These tools include:
</p>
<p><b>mu0:</b> estimated cumulative baseline intensity function.
</p>
<p><b>EstMeans:</b> estimated mean function plot - The crude estimates for the class-specific mean functions of recurrent events
</p>
<p><code>SLCARE</code> also provides a tool to help assess the adequacy of the fitted model:
</p>
<p><b>ModelChecking:</b> model checking plot - A plot shows the comparison of the observed recurrent events versus the expected number of recurrent events. A major departure from the identity line may suggest a lack-of-fit of the assumed models.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SLCARE">SLCARE()</a></code>
</p>

<hr>
<h2 id='predict.SLCARE'>Predict Results for SLCARE</h2><span id='topic+predict.SLCARE'></span>

<h3>Description</h3>

<p>Calculate the posterior predicted number of recurrent events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SLCARE'
predict(object, integer = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.SLCARE_+3A_object">object</code></td>
<td>
<p>an object of class <code>SLCARE</code>.</p>
</td></tr>
<tr><td><code id="predict.SLCARE_+3A_integer">integer</code></td>
<td>
<p>logicals. If <code>FALSE</code> (the default value), the function returns to float numbers.</p>
</td></tr>
<tr><td><code id="predict.SLCARE_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+SLCARE">SLCARE()</a></code>
</p>

<hr>
<h2 id='print.SLCARE'>Print Results for SLCARE</h2><span id='topic+print.SLCARE'></span>

<h3>Description</h3>

<p>Print point estimates (Est), bootstrap standard error estimates (SE), initial estimates for the estimation algorithm (Init), convergence criterion (ConvergeLoss), latent class membership probability (ClassProb), predicted number of recurrent events (PostPredict), relative entropy of the fitted model (Entropy), p-value (pvalue) for SLCARE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SLCARE'
print(x, type = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.SLCARE_+3A_x">x</code></td>
<td>
<p>an object of class <code>SLCARE</code>.</p>
</td></tr>
<tr><td><code id="print.SLCARE_+3A_type">type</code></td>
<td>
<p>the type of the output.</p>
</td></tr>
<tr><td><code id="print.SLCARE_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+SLCARE">SLCARE()</a></code>
</p>

<hr>
<h2 id='SimData'>Simulated dataset for demonstration</h2><span id='topic+SimData'></span>

<h3>Description</h3>

<p>A simulated dataset perturbed from a real dataset with the following variables:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SimData)
</code></pre>


<h3>Format</h3>

<p>A data frame with 476 rows and 6 variables.
</p>

<dl>
<dt>id</dt><dd><p>subjects identification</p>
</dd>
<dt>start</dt><dd><p>start time of the interval for the recurrent event.</p>
</dd>
<dt>stop</dt><dd><p>ending time of the interval for the recurrent event; when time origin is 0 this variable also marks the recurrence or terminal/censoring time.</p>
</dd>
<dt>event</dt><dd><p>recurrent event indicator; 1 if a recurrent event is observed.</p>
</dd>
<dt>x1</dt><dd><p>a binary baseline covariate.</p>
</dd>
<dt>x2</dt><dd><p>a continuous baseline covariate.</p>
</dd>
</dl>


<hr>
<h2 id='SLCARE'>Semiparametric Latent Class Analysis for Recurrent Event</h2><span id='topic+SLCARE'></span>

<h3>Description</h3>

<p>Fit semiparametric latent class model for recurrent event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SLCARE(
  formula = "x1 + x2",
  alpha = NULL,
  beta = NULL,
  data = data,
  id_col = "id",
  start_col = "start",
  stop_col = "stop",
  event_col = "event",
  K = NULL,
  gamma = 0,
  max_epochs = 500,
  conv_threshold = 0.01,
  boot = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SLCARE_+3A_formula">formula</code></td>
<td>
<p>a string specifying the variables of interest to be involved in the regression, with the format of &quot;x1 + x2&quot;.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_alpha">alpha</code></td>
<td>
<p>initial estimate for alpha in the estimation procedure (multinomial logistic regression model). This should be NULL (default) or a numeric matrix. 'NULL' represents the initial estimate for alpha resulted from the automated initializer.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_beta">beta</code></td>
<td>
<p>initial estimate for beta in the estimation procedure (recurrent event model). This should be NULL (default) or a numeric matrix. 'NULL' represents the initial estimate for beta resulted from the automated initializer.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_data">data</code></td>
<td>
<p>a long-format Dataframe, with the format similar to Simdata (a package build-in dataset).</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_id_col">id_col</code></td>
<td>
<p>parameter that indicates the column name of the subject identifier in data.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_start_col">start_col</code></td>
<td>
<p>parameter that indicates the column name of the start time of the recurrent event interval in data.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_stop_col">stop_col</code></td>
<td>
<p>parameter that indicates the column name of the ending time of the recurrent event interval in data.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_event_col">event_col</code></td>
<td>
<p>parameter that indicates the column name of the recurrent event indicator in data. 1 if a recurrent event is observed.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_k">K</code></td>
<td>
<p>pre-determined number of latent classes.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_gamma">gamma</code></td>
<td>
<p>parameter that indicates the distribution of frailty W. The default is 0 which indicates the model holds without the subject-specific frailty (i.e., W = 1), gamma = k indicates that W follows the Gamma(k, k) distribution.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_max_epochs">max_epochs</code></td>
<td>
<p>maximum number of iterations for the estimation algorithm.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_conv_threshold">conv_threshold</code></td>
<td>
<p>convergence threshold for the estimation algorithm.</p>
</td></tr>
<tr><td><code id="SLCARE_+3A_boot">boot</code></td>
<td>
<p>number of bootstrap replicates used to obtain the standard error estimation. The default is NULL which indicates bootstrap is not conducted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><b>Model:</b>
</p>
<p>Suppose the recurrent events process is observed with the intensity function proposed in Zhao et al. (2022):
</p>
<p style="text-align: center;"><code class="reqn">\lambda _{i} (t) = \sum _{k = 1} ^{K} I (\xi _{i} = k) \times \lambda _{0} (t) \times W_{i} \times \eta _{0,k} \times \exp(\tilde{Z} _{i} ^{\top} \tilde{\beta} _{0,k}) </code>
</p>

<p>where <code class="reqn">K</code> is the number of latent classes in the whole population,
<code class="reqn">\xi_i</code> denotes the unobserved latent class membership,
<code class="reqn">\lambda _{0} (t)</code> is an unspecified, continuous,
nonnegative baseline intensity function shared by all latent classes,
<code class="reqn">C_i</code> is the subject specific censoring time,
<code class="reqn">\tilde{Z}_i</code> is the time-independent covariates,
<code class="reqn">W_{i}</code> is a positive subject-specific latent variable independent of <code class="reqn">(\xi_i, \tilde{Z}_i, C_i)</code>.
</p>
<p>The distribution of the latent class membership <code class="reqn">\xi _{i}</code> is modeled by a logistic regression model:
</p>
<p style="text-align: center;"><code class="reqn">P(\xi _{i} = k | \tilde{Z} _{i}) = p_{k} (\alpha _{0} , \tilde{Z} _{i}) \doteq \frac{\exp(\tilde{Z} _{i} ^{\top} \alpha _{0,k})}{\sum_{k = 1}^{K}\exp(\tilde{Z} _{i} ^{\top} \alpha _{0,k}) } , \quad k = 1, \cdots, K </code>
</p>

<p><code>SLCARE</code> is build for introducing a robust and flexible algorithm to carry out Zhao et al. (2022)'s latent class analysis method for recurrent event data described above.
The detailed discussion of the proposed estimation algorithms can be found in the paper &quot;SLCARE: An R package for Semiparametric Latent Class Analysis of Recurrent Events&quot; (in preparation).
</p>
<p><b>Initial Values:</b>
</p>
<p>The proposed estimating algorithm needs an input of initial values for <code class="reqn">\hat{\beta}</code> and <code class="reqn">\hat{\alpha}</code>.
<code>SLCARE</code> allows users to specify the initial values for the estimation algorithm by their own choice.
<code>SLCARE</code> also provide an automated initializer which obtains the initial values using
a combination of K-means clustering, multinomial regression and Wang et al. (2001)'s multiplicative intensity model.
The detailed discussion of the proposed estimation algorithms can be found in the paper &quot;SLCARE: An R package for Semiparametric Latent Class Analysis of Recurrent Events&quot; (in preparation).
</p>
<p><b>Specify the number of latent classes and individual frailty:</b>
</p>
<p><code>SLCARE</code> allows the frailty distribution to be W = 1 or W follows a distribution that is parameterized as Gamma(k,k). These choices of frailty distributions cover a variety of density forms.
Suggested by Zhao et al. (2022), users can choose the distribution of individual frailty and the number of latent classes based on the model entropy provided by <code>SLCARE</code>.
An example of model selection can be found in the paper &quot;SLCARE: An R package for Semiparametric Latent Class Analysis of Recurrent Events&quot; (in preparation).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(SimData)

# fit SLCARE with K = 2, formula = "x1 + x2" and default settings for other arguments
model1 &lt;- SLCARE(formula = "x1 + x2", data = SimData, K = 2)

# summary results
summary(model1, digits = 3)

# generate model checking plot
plot(model1, type = "ModelChecking")

# plot estimated cumulative baseline intensity function
plot(model1, type = "mu0")

# generate estimated mean function plot
plot(model1, type = "EstMeans")

# check class membership probabilities of the 6th - 10th subjects in SimData
print(model1, type = "ClassProb")[6:10,]

# check the predicted number of recurrent events of the 6th - 10th subjects in SimData
print(model1, type = "PostPredict")[6:10,]

# check the change in parameter estimates in the last iteration
print(model1, type = "ConvergeLoss")
</code></pre>

<hr>
<h2 id='summary.SLCARE'>Summary Results for SLCARE</h2><span id='topic+summary.SLCARE'></span>

<h3>Description</h3>

<p>Summary results for <code>SLCARE</code> object including regression coefficients, corresponding standard error estimates and relative entropy of the fitted model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SLCARE'
summary(object, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SLCARE_+3A_object">object</code></td>
<td>
<p>an object of class <code>SLCARE</code>.</p>
</td></tr>
<tr><td><code id="summary.SLCARE_+3A_digits">digits</code></td>
<td>
<p>minimal number of significant digits.</p>
</td></tr>
<tr><td><code id="summary.SLCARE_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+SLCARE">SLCARE()</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
