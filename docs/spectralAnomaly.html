<!DOCTYPE html><html lang="en"><head><title>Help for package spectralAnomaly</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spectralAnomaly}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#spectralAnomaly-package'><p>spectralAnomaly: Detect Anomalies Using the Spectral Residual Algorithm</p></a></li>
<li><a href='#anomaly_score'><p>Create anomaly score from input data</p></a></li>
<li><a href='#anomaly_thresh'><p>Apply threshold to anomaly score</p></a></li>
<li><a href='#saliency_map'><p>Create saliency map</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Detect Anomalies Using the Spectral Residual Algorithm</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Apply the spectral residual algorithm to data, such as a
    time series, to detect anomalies. Anomaly scores can be used to determine
    outliers based upon a threshold or fed into more sophisticated prediction
    models. Methods are based upon "Time-Series Anomaly Detection Service at
    Microsoft", Ren, H., Xu, B., Wang, Y., et al., (2019)
    &lt;<a href="https://doi.org/10.48550%2FarXiv.1906.03821">doi:10.48550/arXiv.1906.03821</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://al-obrien.github.io/spectralAnomaly/">https://al-obrien.github.io/spectralAnomaly/</a>,
<a href="https://github.com/al-obrien/spectralAnomaly">https://github.com/al-obrien/spectralAnomaly</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/al-obrien/spectralAnomaly/issues">https://github.com/al-obrien/spectralAnomaly/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-12 21:32:26 UTC; allen</td>
</tr>
<tr>
<td>Author:</td>
<td>Allen OBrien [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Allen OBrien &lt;allen.g.obrien@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-15 21:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='spectralAnomaly-package'>spectralAnomaly: Detect Anomalies Using the Spectral Residual Algorithm</h2><span id='topic+spectralAnomaly'></span><span id='topic+spectralAnomaly-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Apply the spectral residual algorithm to data, such as a time series, to detect anomalies. Anomaly scores can be used to determine outliers based upon a threshold or fed into more sophisticated prediction models. Methods are based upon &quot;Time-Series Anomaly Detection Service at Microsoft&quot;, Ren, H., Xu, B., Wang, Y., et al., (2019) <a href="https://doi.org/10.48550/arXiv.1906.03821">doi:10.48550/arXiv.1906.03821</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Allen OBrien <a href="mailto:allen.g.obrien@gmail.com">allen.g.obrien@gmail.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://al-obrien.github.io/spectralAnomaly/">https://al-obrien.github.io/spectralAnomaly/</a>
</p>
</li>
<li> <p><a href="https://github.com/al-obrien/spectralAnomaly">https://github.com/al-obrien/spectralAnomaly</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/al-obrien/spectralAnomaly/issues">https://github.com/al-obrien/spectralAnomaly/issues</a>
</p>
</li></ul>


<hr>
<h2 id='anomaly_score'>Create anomaly score from input data</h2><span id='topic+anomaly_score'></span>

<h3>Description</h3>

<p>Convert an input of numeric data, typically a time series, into a score for anomaly detection.
The data is first extended to improve the detection latency, followed by saliency map creation. The
score is calculated using the sliding window average for each point in the saliency map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anomaly_score(x, score_window, spec_window = 3, m = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="anomaly_score_+3A_x">x</code></td>
<td>
<p>Numeric vector.</p>
</td></tr>
<tr><td><code id="anomaly_score_+3A_score_window">score_window</code></td>
<td>
<p>Integer value for the window width for scoring.</p>
</td></tr>
<tr><td><code id="anomaly_score_+3A_spec_window">spec_window</code></td>
<td>
<p>Positive integer value for the window to calculate the averaged log spectrum.</p>
</td></tr>
<tr><td><code id="anomaly_score_+3A_m">m</code></td>
<td>
<p>Integer value representing the number of preceding points for the estimation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of anomaly scores.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- ts(rnorm(12*6,10,2), start=c(2009, 1), end=c(2014, 12), frequency=12)
anomaly_score(tmp, score_window = 25)
</code></pre>

<hr>
<h2 id='anomaly_thresh'>Apply threshold to anomaly score</h2><span id='topic+anomaly_thresh'></span>

<h3>Description</h3>

<p>A helper function that wraps around <code>quantile</code> to apply a threshold to anomaly scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anomaly_thresh(x, threshold = 0.99, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="anomaly_thresh_+3A_x">x</code></td>
<td>
<p>Numeric vector of anomaly scores (e.g. created by <code>anomaly_score</code>).</p>
</td></tr>
<tr><td><code id="anomaly_thresh_+3A_threshold">threshold</code></td>
<td>
<p>Numeric value to determine the threshold to flag outliers among the score.</p>
</td></tr>
<tr><td><code id="anomaly_thresh_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code>quantile</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector referencing which, if any, of the provided values are outliers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test_data &lt;- c(1,2,3,4,5,100,5,4,3,2,1)
anomaly_thresh(test_data, 0.99)
</code></pre>

<hr>
<h2 id='saliency_map'>Create saliency map</h2><span id='topic+saliency_map'></span>

<h3>Description</h3>

<p>Using the provided numeric input, typically a time series, calculate the spectral residual
and output the saliency map for use in anomaly detection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saliency_map(x, window = 3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saliency_map_+3A_x">x</code></td>
<td>
<p>Numeric vector.</p>
</td></tr>
<tr><td><code id="saliency_map_+3A_window">window</code></td>
<td>
<p>Positive integer value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector representing the saliency map values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+anomaly_score">anomaly_score</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- ts(rnorm(12*6,10,2), start=c(2009, 1), end=c(2014, 12), frequency=12)
saliency_map(tmp)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
