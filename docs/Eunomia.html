<!DOCTYPE html><html><head><title>Help for package Eunomia</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Eunomia}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Eunomia-package'><p>Eunomia: Standard Dataset Manager for Observational Medical Outcomes Partnership Common Data Model Sample Datasets</p></a></li>
<li><a href='#createCohorts'><p>Construct cohorts</p></a></li>
<li><a href='#downloadEunomiaData'><p>Download Eunomia data files</p></a></li>
<li><a href='#exportDataFiles'><p>Export data files from a database(sqlite or duckdb)</p></a></li>
<li><a href='#extractLoadData'><p>Extract the Eunomia data files and load into a database</p>
Extract files from a .ZIP file and creates a OMOP CDM database that is then stored in the
same directory as the .ZIP file.</a></li>
<li><a href='#getDatabaseFile'><p>Create a copy of a Eunomia dataset</p></a></li>
<li><a href='#getEunomiaConnectionDetails'><p>Get Default Eunomia Connection Details</p></a></li>
<li><a href='#loadDataFiles'><p>Load data files into a database(sqlite or duckdb)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Standard Dataset Manager for Observational Medical Outcomes
Partnership Common Data Model Sample Datasets</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-04-22</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Frank DeFalco &lt;fdefalco@ohdsi.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Facilitates access to sample datasets from the 'EunomiaDatasets' repository (<a href="https://github.com/ohdsi/EunomiaDatasets">https://github.com/ohdsi/EunomiaDatasets</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/OHDSI/Eunomia">https://github.com/OHDSI/Eunomia</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/OHDSI/Eunomia/issues">https://github.com/OHDSI/Eunomia/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>readr, rlang, RSQLite, DBI, arrow, CommonDataModel</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, withr, duckdb, DatabaseConnector</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-22 21:30:32 UTC; fjd</td>
</tr>
<tr>
<td>Author:</td>
<td>Frank DeFalco [aut, cre],
  Martijn Schuemie [aut],
  Anthony Sena [aut],
  Natthawut Adulyanukosol [aut],
  Star Liu [aut],
  Adam Black [aut],
  Observational Health Data Science and Informatics [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-23 11:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='Eunomia-package'>Eunomia: Standard Dataset Manager for Observational Medical Outcomes Partnership Common Data Model Sample Datasets</h2><span id='topic+Eunomia'></span><span id='topic+Eunomia-package'></span>

<h3>Description</h3>

<p>Facilitates access to sample datasets from the 'EunomiaDatasets' repository (<a href="https://github.com/ohdsi/EunomiaDatasets">https://github.com/ohdsi/EunomiaDatasets</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Frank DeFalco <a href="mailto:fdefalco@ohdsi.org">fdefalco@ohdsi.org</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Martijn Schuemie <a href="mailto:schuemie@ohdsi.org">schuemie@ohdsi.org</a>
</p>
</li>
<li><p> Anthony Sena <a href="mailto:sena@ohdsi.org">sena@ohdsi.org</a>
</p>
</li>
<li><p> Natthawut Adulyanukosol <a href="mailto:na339@unc.edu">na339@unc.edu</a>
</p>
</li>
<li><p> Star Liu <a href="mailto:sliu197@jhmi.edu">sliu197@jhmi.edu</a>
</p>
</li>
<li><p> Adam Black <a href="mailto:black@ohdsi.org">black@ohdsi.org</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Observational Health Data Science and Informatics [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/OHDSI/Eunomia">https://github.com/OHDSI/Eunomia</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/OHDSI/Eunomia/issues">https://github.com/OHDSI/Eunomia/issues</a>
</p>
</li></ul>


<hr>
<h2 id='createCohorts'>Construct cohorts</h2><span id='topic+createCohorts'></span>

<h3>Description</h3>

<p>Creates a set of predefined cohorts in a cohort table. WARNING: this will delete all existing
cohorts in the table!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createCohorts(
  connectionDetails,
  cdmDatabaseSchema = "main",
  cohortDatabaseSchema = "main",
  cohortTable = "cohort"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createCohorts_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>The connection details to connect to the (Eunomia) database.</p>
</td></tr>
<tr><td><code id="createCohorts_+3A_cdmdatabaseschema">cdmDatabaseSchema</code></td>
<td>
<p>Deprecated. The cdm must be created in the main schema.</p>
</td></tr>
<tr><td><code id="createCohorts_+3A_cohortdatabaseschema">cohortDatabaseSchema</code></td>
<td>
<p>Deprecated. The cohort table will be created in the main schema.</p>
</td></tr>
<tr><td><code id="createCohorts_+3A_cohorttable">cohortTable</code></td>
<td>
<p>Deprecated. Cohort table will be named &quot;cohort&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame listing all created cohorts.
</p>

<hr>
<h2 id='downloadEunomiaData'>Download Eunomia data files</h2><span id='topic+downloadEunomiaData'></span>

<h3>Description</h3>

<p>Download the Eunomia data files from https://github.com/OHDSI/EunomiaDatasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadEunomiaData(
  datasetName,
  cdmVersion = "5.3",
  pathToData = Sys.getenv("EUNOMIA_DATA_FOLDER"),
  overwrite = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadEunomiaData_+3A_datasetname">datasetName</code></td>
<td>
<p>The data set name as found on https://github.com/OHDSI/EunomiaDatasets. The
data set name corresponds to the folder with the data set ZIP files</p>
</td></tr>
<tr><td><code id="downloadEunomiaData_+3A_cdmversion">cdmVersion</code></td>
<td>
<p>The OMOP CDM version. This version will appear in the suffix of the data file,
for example: &lt;datasetName&gt;_&lt;cdmVersion&gt;.zip. Default: '5.3'</p>
</td></tr>
<tr><td><code id="downloadEunomiaData_+3A_pathtodata">pathToData</code></td>
<td>
<p>The path where the Eunomia data is stored on the file system., By default the
value of the environment variable &quot;EUNOMIA_DATA_FOLDER&quot; is used.</p>
</td></tr>
<tr><td><code id="downloadEunomiaData_+3A_overwrite">overwrite</code></td>
<td>
<p>Control whether the existing archive file will be overwritten should it already
exist.</p>
</td></tr>
<tr><td><code id="downloadEunomiaData_+3A_verbose">verbose</code></td>
<td>
<p>Provide additional logging details during execution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the destination if the download was successful.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
downloadEunomiaData("GiBleed")

## End(Not run)
</code></pre>

<hr>
<h2 id='exportDataFiles'>Export data files from a database(sqlite or duckdb)</h2><span id='topic+exportDataFiles'></span>

<h3>Description</h3>

<p>Helper function to export data to csv or parquet files from a database file (sqlite or duckdb).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportDataFiles(
  dbPath,
  outputFolder,
  outputFormat = "csv",
  dbms = "sqlite",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportDataFiles_+3A_dbpath">dbPath</code></td>
<td>
<p>The path to the source .sqlite or .duckdb file</p>
</td></tr>
<tr><td><code id="exportDataFiles_+3A_outputfolder">outputFolder</code></td>
<td>
<p>The path to the export destination directory</p>
</td></tr>
<tr><td><code id="exportDataFiles_+3A_outputformat">outputFormat</code></td>
<td>
<p>The output format for the files.  Supported formats include csv, parquet.</p>
</td></tr>
<tr><td><code id="exportDataFiles_+3A_dbms">dbms</code></td>
<td>
<p>The file-based database system to use: 'sqlite' (default) or 'duckdb'</p>
</td></tr>
<tr><td><code id="exportDataFiles_+3A_verbose">verbose</code></td>
<td>
<p>Boolean argument controlling verbose debugging output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to export to outputFolder.
</p>

<hr>
<h2 id='extractLoadData'>Extract the Eunomia data files and load into a database
Extract files from a .ZIP file and creates a OMOP CDM database that is then stored in the
same directory as the .ZIP file.</h2><span id='topic+extractLoadData'></span>

<h3>Description</h3>

<p>Extract the Eunomia data files and load into a database
Extract files from a .ZIP file and creates a OMOP CDM database that is then stored in the
same directory as the .ZIP file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractLoadData(
  from,
  to,
  dbms = "sqlite",
  cdmVersion = "5.3",
  inputFormat = "csv",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractLoadData_+3A_from">from</code></td>
<td>
<p>The path to the .ZIP file that contains the csv CDM source files</p>
</td></tr>
<tr><td><code id="extractLoadData_+3A_to">to</code></td>
<td>
<p>The path to the .sqlite or .duckdb file that will be created</p>
</td></tr>
<tr><td><code id="extractLoadData_+3A_dbms">dbms</code></td>
<td>
<p>The file based database system to use: 'sqlite' (default) or 'duckdb'</p>
</td></tr>
<tr><td><code id="extractLoadData_+3A_cdmversion">cdmVersion</code></td>
<td>
<p>The version of the OMOP CDM that are represented in the archive files.</p>
</td></tr>
<tr><td><code id="extractLoadData_+3A_inputformat">inputFormat</code></td>
<td>
<p>The format of the files expected in the archive. (csv or parquet)</p>
</td></tr>
<tr><td><code id="extractLoadData_+3A_verbose">verbose</code></td>
<td>
<p>Provide additional logging details during execution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to load archive into a database file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+downloadEunomiaData">downloadEunomiaData</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
extractLoadData("c:/strategusData/GiBleed_5.3.zip")

## End(Not run)
</code></pre>

<hr>
<h2 id='getDatabaseFile'>Create a copy of a Eunomia dataset</h2><span id='topic+getDatabaseFile'></span>

<h3>Description</h3>

<p>Creates a copy of a Eunomia database, and returns the path to the new database file.
If the dataset does not yet exist on the user's computer it will attempt to download the source data
to the the path defined by the EUNOMIA_DATA_FOLDER environment variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDatabaseFile(
  datasetName,
  cdmVersion = "5.3",
  pathToData = Sys.getenv("EUNOMIA_DATA_FOLDER"),
  dbms = "sqlite",
  databaseFile = tempfile(fileext = paste0(".", dbms)),
  inputFormat = "csv",
  verbose = FALSE,
  overwrite = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDatabaseFile_+3A_datasetname">datasetName</code></td>
<td>
<p>The data set name as found on https://github.com/OHDSI/EunomiaDatasets. The
data set name corresponds to the folder with the data set ZIP files</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_cdmversion">cdmVersion</code></td>
<td>
<p>The OMOP CDM version. This version will appear in the suffix of the data file,
for example: &lt;datasetName&gt;_&lt;cdmVersion&gt;.zip. Default: '5.3'</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_pathtodata">pathToData</code></td>
<td>
<p>The path where the Eunomia data is stored on the file system., By default the
value of the environment variable &quot;EUNOMIA_DATA_FOLDER&quot; is used.</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_dbms">dbms</code></td>
<td>
<p>The database system to use. &quot;sqlite&quot; (default) or &quot;duckdb&quot;</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_databasefile">databaseFile</code></td>
<td>
<p>The path where the database file will be copied to. By default, the database
will be copied to a temporary folder, and will be deleted at the end of the R
session.</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_inputformat">inputFormat</code></td>
<td>
<p>The format of the files expected in the archive. (csv or parquet)</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_verbose">verbose</code></td>
<td>
<p>Provide additional logging details during execution</p>
</td></tr>
<tr><td><code id="getDatabaseFile_+3A_overwrite">overwrite</code></td>
<td>
<p>Remove and replace an existing data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The file path to the new Eunomia dataset copy
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 conn &lt;- DBI::dbConnect(RSQLite::SQLite(), getDatabaseFile("GiBleed"))
 DBI::dbDisconnect(conn)

 conn &lt;- DBI::dbConnect(duckdb::duckdb(), getDatabaseFile("GiBleed", dbms = "duckdb"))
 DBI::dbDisconnect(conn, shutdown = TRUE)

 conn &lt;- DatabaseConnector::connect(dbms = "sqlite", server = getDatabaseFile("GiBleed"))
 DatabaseConnector::disconnect(conn)

## End(Not run)

</code></pre>

<hr>
<h2 id='getEunomiaConnectionDetails'>Get Default Eunomia Connection Details</h2><span id='topic+getEunomiaConnectionDetails'></span>

<h3>Description</h3>

<p>Creates a copy of the default (GiBleed) Eunomia database, and provides details for connecting to
that copy. Function provides backwards compatibility to prior releases of Eunomia default (GiBleed)
dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getEunomiaConnectionDetails(
  databaseFile = tempfile(fileext = ".sqlite"),
  dbms = "sqlite"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getEunomiaConnectionDetails_+3A_databasefile">databaseFile</code></td>
<td>
<p>The path where the database file will be copied to. By default, the database will
be copied to a temporary folder, and will be deleted at the end of the R session.</p>
</td></tr>
<tr><td><code id="getEunomiaConnectionDetails_+3A_dbms">dbms</code></td>
<td>
<p>The target dialect, by default &quot;sqlite&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ConnectionDetails object, to be used with the <code>DatabaseConnector</code> package.
</p>

<hr>
<h2 id='loadDataFiles'>Load data files into a database(sqlite or duckdb)</h2><span id='topic+loadDataFiles'></span>

<h3>Description</h3>

<p>Load data from csv or parquet files into a database file (sqlite or duckdb).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadDataFiles(
  dataPath,
  dbPath,
  inputFormat = "csv",
  cdmVersion = "5.3",
  cdmDatabaseSchema = "main",
  dbms = "sqlite",
  verbose = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadDataFiles_+3A_datapath">dataPath</code></td>
<td>
<p>The path to the directory containing CDM source files (csv or parquet)</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_dbpath">dbPath</code></td>
<td>
<p>The path to the .sqlite or .duckdb file that will be created</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_inputformat">inputFormat</code></td>
<td>
<p>The input format of the files to load.  Supported formats include csv, parquet.</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_cdmversion">cdmVersion</code></td>
<td>
<p>The CDM version to create in the resulting database. Supported versions are 5.3 and 5.4</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_cdmdatabaseschema">cdmDatabaseSchema</code></td>
<td>
<p>The schema in which to create the CDM tables. Default is main.</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_dbms">dbms</code></td>
<td>
<p>The file-based database system to use: 'sqlite' (default) or 'duckdb'</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_verbose">verbose</code></td>
<td>
<p>Provide additional logging details during execution.</p>
</td></tr>
<tr><td><code id="loadDataFiles_+3A_overwrite">overwrite</code></td>
<td>
<p>Remove and replace an existing data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, loads data into database file.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
