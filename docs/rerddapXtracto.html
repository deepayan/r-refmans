<!DOCTYPE html><html lang="en"><head><title>Help for package rerddapXtracto</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rerddapXtracto}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rerddapXtracto'><p>rerddapXtracto: Routines to simplify data extraction using ERD's ERDDAP™ web service.</p></a></li>
<li><a href='#dataInfo'><p>dataInfo Data</p></a></li>
<li><a href='#Marlintag38606'><p>Marlin Tag Data</p></a></li>
<li><a href='#mbnms'><p>MBNMS Boundaries</p></a></li>
<li><a href='#MBsst'><p>MBsst Data</p></a></li>
<li><a href='#PB_Argos'><p>Polar Bear Track Data</p></a></li>
<li><a href='#plotBBox'><p>plot result of 'rxtracto_3D'</p></a></li>
<li><a href='#plotTrack'><p>plot result of 'rxtracto'</p></a></li>
<li><a href='#rxtracto'><p>Extract environmental data along a trajectory from an 'ERDDAP™' server using 'rerddap'.</p></a></li>
<li><a href='#rxtracto_3D'><p>Extract environmental data in a 3-dimensional box from an 'ERDDAP™' server using 'rerddap'.</p></a></li>
<li><a href='#rxtractogon'><p>Extract environmental data in a polygon using 'ERDDAP™' and 'rerddap'.</p></a></li>
<li><a href='#safe_info'><p>Wrap rerddap::info() so that it will fail gracefully</p>
<code>safe_info</code> uses tryCatch() to deal with unavailable response</a></li>
<li><a href='#swchl'><p>swchl Data</p></a></li>
<li><a href='#tidy_grid'><p>convert result of 'rxtracto_3D' or 'rxtractogon' to tidy long-format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Extracts Environmental Data from 'ERDDAP™' Web Services</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-02-25</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains three functions that access
    environmental data from any 'ERDDAP™' data web service. The rxtracto() function extracts
    data along a trajectory for a given "radius" around the point. The
    rxtracto_3D() function extracts data in a box. The rxtractogon() function
    extracts data in a polygon. All of those three function use the 'rerddap' package
    to extract the data, and should work with any 'ERDDAP™' server.
    There are also two functions, plotBBox() and plotTrack() that use the 'plotdap'
    package to simplify the creation of maps of the data.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rmendels/rerddapXtracto">https://github.com/rmendels/rerddapXtracto</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rmendels/rerddapXtracto/issues">https://github.com/rmendels/rerddapXtracto/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 4.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>abind, dplyr, ggplot2, httr, maps, methods, ncdf4, parsedate,
plotdap (&ge; 0.0.5), readr, rerddap (&ge; 0.8.0), sf, sp, stats,
utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>cmocean, gganimate, knitr, lubridate, mapdata, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-25 16:49:28 UTC; rmendels</td>
</tr>
<tr>
<td>Author:</td>
<td>Roy Mendelssohn [aut, cre],
  Marie Auger-Methe [ctb],
  Sunny Bak-Hospital [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Roy Mendelssohn &lt;roy.mendelssohn@noaa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-25 22:40:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='rerddapXtracto'>rerddapXtracto: Routines to simplify data extraction using ERD's ERDDAP™ web service.</h2><span id='topic+rerddapXtracto-package'></span><span id='topic+rerddapXtracto'></span>

<h3>Description</h3>

<p>The rerddapXtracto package subsets and extracts satellite and other oceanographic related data
from any ERDDAP™ server using the R package &quot;rerddap&quot;developed by Scott Chamberlain and the
wonderful people at &quot;rOpenSci&quot;.
</p>


<h3>Details</h3>

<p>The package contains three main functions:
</p>


<h3>Main Functions</h3>


<ul>
<li> <p><code>rxtracto</code> - Extracts an environmental variable along a track defined by
its longtiude, latitude and time.
</p>
</li>
<li> <p><code>rxtracto_3D</code> - Extracts an environmental variable in a
3D  (longitude,latitude, time) bounding box
</p>
</li>
<li> <p><code>rxtractogon</code> - Extracts an environmental variable in a spatial
polygon through time.
</p>
</li></ul>

<p>These functions require a call be made to  <code>rerddap:info()</code> for the appropriate ERDDAP™ server
and datasetID.
#'
@section Details:
Besides the terse help documents,  more  detail in using the
functions are given  in the included vignette &quot;UsingrerddapXtracto&quot;. The datasets used
in the vignette are included in the &quot;data&quot; directory.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Roy Mendelssohn <a href="mailto:roy.mendelssohn@noaa.gov">roy.mendelssohn@noaa.gov</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Marie Auger-Methe [contributor]
</p>
</li>
<li><p> Sunny Bak-Hospital [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/rmendels/rerddapXtracto">https://github.com/rmendels/rerddapXtracto</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rmendels/rerddapXtracto/issues">https://github.com/rmendels/rerddapXtracto/issues</a>
</p>
</li></ul>


<hr>
<h2 id='dataInfo'>dataInfo Data</h2><span id='topic+dataInfo'></span>

<h3>Description</h3>

<p>pre-Download of 'rerddap' info needed for examples
so can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataInfo
</code></pre>


<h3>Format</h3>

<p>An object of class <code>info</code> of length 3.
</p>


<h3>Details</h3>

<p>obtained using
dataInfo &lt;- rerddap::info('erdHadISST')
</p>

<hr>
<h2 id='Marlintag38606'>Marlin Tag Data</h2><span id='topic+Marlintag38606'></span>

<h3>Description</h3>

<p>Telemetry data of a blue marlin tagged in the Pacific Ocean in 2003
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Marlintag38606
</code></pre>


<h3>Format</h3>

<p>A data frame with 152 obs. of 7 variables:
</p>

<dl>
<dt>date</dt><dd><p>time of observation given as YYYY-MM-DD</p>
</dd>
<dt>lon</dt><dd><p>longitude of observation</p>
</dd>
<dt>lat</dt><dd><p>latitude of observation</p>
</dd>
<dt>lowLon</dt><dd><p>low error on longitude</p>
</dd>
<dt>higLon</dt><dd><p>high error on longitude</p>
</dd>
<dt>lowLat</dt><dd><p>low error on latitude</p>
</dd>
<dt>higLat</dt><dd><p>high error on latitude</p>
</dd>
</dl>



<h3>Source</h3>

<p>Dr. Mike Musyl, Pelagic Research Group LLC
</p>

<hr>
<h2 id='mbnms'>MBNMS Boundaries</h2><span id='topic+mbnms'></span>

<h3>Description</h3>

<p>A dataset containing the latitudes and longitudes of a polygon that define
boundaries of the Monterey Bay National Marine Sanctuary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnms
</code></pre>


<h3>Format</h3>

<p>A data frame with 6666 obs. of 2 variables:
</p>

<dl>
<dt>Longitude</dt><dd><p>Longitudes of a boundary polygon</p>
</dd>
<dt>Latitude</dt><dd><p>Latitudes of a boundary polygon</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://sanctuaries.noaa.gov/library/imast_gis.html">https://sanctuaries.noaa.gov/library/imast_gis.html</a>
</p>

<hr>
<h2 id='MBsst'>MBsst Data</h2><span id='topic+MBsst'></span>

<h3>Description</h3>

<p>pre-Download of Pacific West Coast SST fro use in 'plotBBox()' example
can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MBsst
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> (inherits from <code>rxtracto3D</code>) of length 6.
</p>


<h3>Details</h3>

<p>obtained using the 'rxtracto_3D()' command
dataInfo &lt;- rerddap::info('erdMBsstd1day')
parameter &lt;- 'sst'
xcoord &lt;- c(230, 230.1)
ycoord &lt;- c(33, 33.1)
tcoord &lt;- c('2006-01-15', '2006-01-15')
zcoord &lt;- c(0., 0.)
MBsst &lt;- rxtracto_3D(dataInfo, parameter, xcoord = xcoord, ycoord = ycoord,
tcoord = tcoord, zcoord = zcoord)
</p>

<hr>
<h2 id='PB_Argos'>Polar Bear Track Data</h2><span id='topic+PB_Argos'></span>

<h3>Description</h3>

<p>Telemetry data of a tagged polar bear
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PB_Argos
</code></pre>


<h3>Format</h3>

<p>A data frame with 1919 obs. of 4 variables:
</p>

<dl>
<dt>DateTime</dt><dd><p>time of observation</p>
</dd>
<dt>QualClass</dt><dd><p>Quality Flag</p>
</dd>
<dt>Lat</dt><dd><p>latitude of observation</p>
</dd>
<dt>Lon</dt><dd><p>longitude of observation</p>
</dd>
</dl>



<h3>Source</h3>


<dl>
<dt>dryad dataset</dt><dd><p>https://datadryad.org/stash/dataset/doi:10.5061/dryad.4qrfj6q96</p>
</dd>
<dt>Citation</dt><dd><p>Auger-Méthé, Marie; Derocher, Andrew E. (2021). Argos and GPS data for a polar bear track [Dataset]. Dryad. https://doi.org/10.5061/dryad.4qrfj6q96</p>
</dd>
<dt>Associated Paper</dt><dd><p>Auger-Méthé, M.,  Newman, K.,  Cole, D.,  Empacher, F.,  Gryba, R.,  King, A. A.,  Leos-Barajas, V.,  Mills Flemming, J., Nielsen, A.,  Petris, G., and  Thomas, L..  2021.  A guide to state–space modeling of ecological time series. Ecological Monographs  91(4):e01470. 10.1002/ecm.1470</p>
</dd>
</dl>


<hr>
<h2 id='plotBBox'>plot result of 'rxtracto_3D'</h2><span id='topic+plotBBox'></span>

<h3>Description</h3>

<p><code>plotBBox</code> is a function to plot the results from
'rxtracto_3D'()' and 'rxtractogon()'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotBBox(
  resp,
  plotColor = "viridis",
  time = NA,
  myFunc = NA,
  mapData = NULL,
  crs = NULL,
  animate = FALSE,
  cumulative = FALSE,
  name = NA,
  maxpixels = 10000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotBBox_+3A_resp">resp</code></td>
<td>
<p>data frame returned from 'rxtracto_3D'()' or 'rxtractogon()'</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_plotcolor">plotColor</code></td>
<td>
<p>the color to use in plot from 'cmocean'</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_time">time</code></td>
<td>
<p>a function to map multi-time to one, or else identity
for animation</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_myfunc">myFunc</code></td>
<td>
<p>function of one argument to transform the data</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_mapdata">mapData</code></td>
<td>
<p>map data from 'maps' or 'mapdata', must be of class 'map'</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_crs">crs</code></td>
<td>
<p>valid crs string</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_animate">animate</code></td>
<td>
<p>if multiple times, if TRUE will animate the maps</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_cumulative">cumulative</code></td>
<td>
<p>makes cumulative animation of data</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_name">name</code></td>
<td>
<p>name for colorbar label</p>
</td></tr>
<tr><td><code id="plotBBox_+3A_maxpixels">maxpixels</code></td>
<td>
<p>maximum number of pixels to use in making the map
- controls resolution</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a 'plotdap' plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## example code to download data for plotBBox
## dataInfo &lt;- rerddap::info('erdMBsstd1day')
## parameter &lt;- 'sst'
## xcoord &lt;- c(230, 230.1)
## ycoord &lt;- c(33, 33.1)
## tcoord &lt;- c('2006-01-15', '2006-01-15')
## zcoord &lt;- c(0., 0.)
## MBsst &lt;- rxtracto_3D(dataInfo, parameter, xcoord = xcoord, ycoord = ycoord,
##                      tcoord = tcoord, zcoord = zcoord)
##
## low resolution selected to keep time to render down
# suppressWarnings(p &lt;- plotBBox(MBsst, maxpixels = 50))
</code></pre>

<hr>
<h2 id='plotTrack'>plot result of 'rxtracto'</h2><span id='topic+plotTrack'></span>

<h3>Description</h3>

<p><code>plotTrack</code> is a function to plot the results from
'rxtracto()'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotTrack(
  resp,
  xcoord,
  ycoord,
  tcoord,
  plotColor = "viridis",
  myFunc = NA,
  mapData = NULL,
  crs = NULL,
  animate = FALSE,
  cumulative = FALSE,
  name = NA,
  shape = 20,
  size = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotTrack_+3A_resp">resp</code></td>
<td>
<p>data frame returned from 'rxtracto()'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_xcoord">xcoord</code></td>
<td>
<p>passed to 'rxtracto()'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_ycoord">ycoord</code></td>
<td>
<p>passed to 'rxtracto()'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_tcoord">tcoord</code></td>
<td>
<p>passed to 'rxtracto()'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_plotcolor">plotColor</code></td>
<td>
<p>the color to use in plot from 'cmocean'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_myfunc">myFunc</code></td>
<td>
<p>function of one argument to transform the data</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_mapdata">mapData</code></td>
<td>
<p>map data from 'maps' or 'mapdata', must be of class 'map'</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_crs">crs</code></td>
<td>
<p>valid crs string</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_animate">animate</code></td>
<td>
<p>if multiple times, if TRUE will animate the maps</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_cumulative">cumulative</code></td>
<td>
<p>makes cumulative animation of data</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_name">name</code></td>
<td>
<p>name for colorbar label</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_shape">shape</code></td>
<td>
<p>shape to use to mark track</p>
</td></tr>
<tr><td><code id="plotTrack_+3A_size">size</code></td>
<td>
<p>size of shape to use to mark track</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a 'plotdap' plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## example data download for plotTrack
## tagData &lt;- Marlintag38606
## xpos &lt;- tagData$lon[1:20]
## ypos &lt;- tagData$lat[1:20]
## tpos &lt;- tagData$date[1:20]
## zpos &lt;- rep(0., length(xpos))

## example data download for plotTrack
## swchlInfo &lt;- rerddap::info('erdSWchla8day')
##scwchl &lt;- rxtracto(swchlInfo, parameter = 'chlorophyll', xcoord = xpos,
##        ycoord = ypos, tcoord = tpos, zcoord = zpos, xlen = .2, ylen = .2)
##
# suppressWarnings(p &lt;- plotTrack(swchl, xpos, ypos, tpos, plotColor = 'algae'))
</code></pre>

<hr>
<h2 id='rxtracto'>Extract environmental data along a trajectory from an 'ERDDAP™' server using 'rerddap'.</h2><span id='topic+rxtracto'></span>

<h3>Description</h3>

<p><code>rxtracto_new</code> uses the R program 'rerddap' to extract environmental
data from an 'ERDDAP' server along a (x,y,z, time) trajectory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rxtracto(
  dataInfo,
  parameter = NULL,
  xcoord = NULL,
  ycoord = NULL,
  zcoord = NULL,
  tcoord = NULL,
  xlen = 0,
  ylen = 0,
  zlen = 0,
  xName = "longitude",
  yName = "latitude",
  zName = "altitude",
  tName = "time",
  interp = NULL,
  verbose = FALSE,
  progress_bar = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rxtracto_+3A_datainfo">dataInfo</code></td>
<td>
<p>- the return from an 'rerddap::info' call to an 'ERDDAP™' server</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_parameter">parameter</code></td>
<td>
<p>- character string containing the name of the parameter to extract</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_xcoord">xcoord</code></td>
<td>
<p>- a real array with the x-coordinates of the trajectory (if longitude in #'   decimal degrees East, either 0-360 or -180 to 180)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_ycoord">ycoord</code></td>
<td>
<p>-  a real array with the y-coordinate of the trajectory (if latitude in
decimal degrees N; -90 to 90)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_zcoord">zcoord</code></td>
<td>
<p>-a real array with the z-coordinate of the trajectory (usually altitude or depth)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_tcoord">tcoord</code></td>
<td>
<p>- a character array with the times of the trajectory in
&quot;YYYY-MM-DD&quot; - for now restricted to be time.</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_xlen">xlen</code></td>
<td>
<p>- real array defining the longitude box around the given point (xlen/2 around the point)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_ylen">ylen</code></td>
<td>
<p>- real array defining the latitude box around the given point (ylen/2 around the point)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_zlen">zlen</code></td>
<td>
<p>- real array defining the depth or altitude box around the given point (zlen/2 around the point)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_xname">xName</code></td>
<td>
<p>- character string with name of the xcoord in the 'ERDDAP™' dataset (default &quot;longitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_yname">yName</code></td>
<td>
<p>- character string with name of the ycoord in the 'ERDDAP™' dataset (default &quot;latitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_zname">zName</code></td>
<td>
<p>- character string with name of the zcoord in the 'ERDDAP™' dataset (default &quot;altitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_tname">tName</code></td>
<td>
<p>- character string with name of the tcoord in the 'ERDDAP™' dataset (default &quot;time&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_interp">interp</code></td>
<td>
<p>- array (size 2) of character strings - c(interpolation type, neighborhood)
Uses the new ERDDAP interpoation option to get values
See Vignette for details
Default is Null, do not use the interpolation option</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_verbose">verbose</code></td>
<td>
<p>- logical variable (default FALSE)
if the the URL request should be verbose</p>
</td></tr>
<tr><td><code id="rxtracto_+3A_progress_bar">progress_bar</code></td>
<td>
<p>- logical variable (default FALSE)
should a progress bar be displayed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If success a dataframe containing:
</p>

<ul>
<li><p> column 1 = mean of data within search radius
</p>
</li>
<li><p> column 2 = standard deviation of data within search radius
</p>
</li>
<li><p> column 3 = number of points found within search radius
</p>
</li>
<li><p> column 4 = time of returned value
</p>
</li>
<li><p> column 5 = min longitude of call (decimal degrees)
</p>
</li>
<li><p> column 6 = max longitude of call (decimal degrees)
</p>
</li>
<li><p> column 7 = min latitude of call (decimal degrees)
</p>
</li>
<li><p> column 8 = max latitude of call (decimal degrees)
</p>
</li>
<li><p> column 9 = requested time in tag
</p>
</li>
<li><p> column 10 = median of data within search radius
</p>
</li>
<li><p> column 11 = median absolute deviation of data within search radius
</p>
</li></ul>

<p>else an error string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## toy example to show use
## but keep execution time down
##
# dataInfo &lt;- rerddap::info('erdHadISST')
##
parameter &lt;- 'sst'
xcoord &lt;- c(-130.5)
ycoord &lt;- c(40.5)
tcoord &lt;- c('2006-01-16')
# extract &lt;- rxtracto(dataInfo, parameter = parameter, xcoord = xcoord,
#                   ycoord = ycoord, tcoord= tcoord
#                   )
##
## bathymetry example
## 2-D example getting bathymetry
## Wrap rerddap::info('etopo360') call in function that insures proper finish if it fails
dataInfo &lt;- safe_info('etopo360')
parameter &lt;- 'altitude'
# extract &lt;- rxtracto(dataInfo, parameter, xcoord = xcoord, ycoord = ycoord)

</code></pre>

<hr>
<h2 id='rxtracto_3D'>Extract environmental data in a 3-dimensional box from an 'ERDDAP™' server using 'rerddap'.</h2><span id='topic+rxtracto_3D'></span>

<h3>Description</h3>

<p><code>rxtracto_3D</code> uses the R program 'rerddap' to extract environmental data
from an 'ERDDAP' server in an (x,y,z, time) bounding box.
The same call could be made directly in rerddap,
but function is maintained as it is used in the polygon routine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rxtracto_3D(
  dataInfo,
  parameter = NULL,
  xcoord = NULL,
  ycoord = NULL,
  zcoord = NULL,
  tcoord = NULL,
  xName = "longitude",
  yName = "latitude",
  zName = "altitude",
  tName = "time",
  verbose = FALSE,
  cache_remove = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rxtracto_3D_+3A_datainfo">dataInfo</code></td>
<td>
<p>- the return from an 'rerddap:info' call to an 'ERDDAP™' server</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_parameter">parameter</code></td>
<td>
<p>- character string containing the name of the parameter to extract</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_xcoord">xcoord</code></td>
<td>
<p>- a real array with the x-coordinates of the trajectory (if longitude in #'   decimal degrees East, either 0-360 or -180 to 180)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_ycoord">ycoord</code></td>
<td>
<p>-  a real array with the y-coordinate of the trajectory (if latitude in
decimal degrees N; -90 to 90)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_zcoord">zcoord</code></td>
<td>
<p>-  a real array with the z-coordinate (usually altitude or depth)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_tcoord">tcoord</code></td>
<td>
<p>- a character array with the times of the trajectory in
&quot;YYYY-MM-DD&quot; - for now restricted to be time.</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_xname">xName</code></td>
<td>
<p>- character string with name of the xcoord in the 'ERDDAP™' dataset (default &quot;longitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_yname">yName</code></td>
<td>
<p>- character string with name of the ycoord in the 'ERDDAP™' dataset (default &quot;latitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_zname">zName</code></td>
<td>
<p>- character string with name of the zcoord in the 'ERDDAP™' dataset (default &quot;altitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_tname">tName</code></td>
<td>
<p>- character string with name of the tcoord in the 'ERDDAP™' dataset (default &quot;time&quot;)</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_verbose">verbose</code></td>
<td>
<p>- logical variable (default FALSE) if the the URL request should be verbose</p>
</td></tr>
<tr><td><code id="rxtracto_3D_+3A_cache_remove">cache_remove</code></td>
<td>
<p>- logical variable (default TRUE) whether to delete 'rerddap' cache</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful a structure with data and dimensions:
</p>

<ul>
<li><p> extract$data - the data array dimensioned (lon,lat,time)
</p>
</li>
<li><p> extract$varname - the name of the parameter extracted
</p>
</li>
<li><p> extract$datasetname - ERDDAP™ dataset name
</p>
</li>
<li><p> extract$longitude - the longitudes on some scale as request
</p>
</li>
<li><p> extract$latitude - the latitudes always going south to north
</p>
</li>
<li><p> extract$time - the times of the extracts
</p>
</li></ul>

<p>else an error string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## toy example to show use
## and keep execution time low
##
# dataInfo &lt;- rerddap::info('erdHadISST')
parameter &lt;- 'sst'
xcoord &lt;- c(-130.5, -130.5)
ycoord &lt;- c(40.5, 40.5)
tcoord &lt;- c('2006-01-16', '2006-01-16')
# extract &lt;- rxtracto_3D(dataInfo, parameter, xcoord = xcoord, ycoord = ycoord,
#                        tcoord = tcoord)

## bathymetry example
## 2-D example getting bathymetry
## Wrap rerddap::info('etopo360') call in function that insures proper finish if it fails
dataInfo &lt;- safe_info('etopo360')
parameter &lt;- 'altitude'
# extract &lt;- rxtracto_3D(dataInfo, parameter, xcoord = xcoord, ycoord = ycoord)
</code></pre>

<hr>
<h2 id='rxtractogon'>Extract environmental data in a polygon using 'ERDDAP™' and 'rerddap'.</h2><span id='topic+rxtractogon'></span>

<h3>Description</h3>

<p><code>rxtractogon</code> uses the R program 'rerddap' to extract environmental data
from an 'ERDDAP™' server in a polygon through time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rxtractogon(
  dataInfo,
  parameter,
  xcoord = NULL,
  ycoord = NULL,
  zcoord = NULL,
  tcoord = NULL,
  xName = "longitude",
  yName = "latitude",
  zName = "altitude",
  tName = "time",
  verbose = FALSE,
  cache_remove = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rxtractogon_+3A_datainfo">dataInfo</code></td>
<td>
<p>- the return from an 'rerddap:info' call to an 'ERDDAP™' server</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_parameter">parameter</code></td>
<td>
<p>- character string containing the name of the parameter to extract</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_xcoord">xcoord</code></td>
<td>
<p>- array giving longitudes (in decimal
degrees East, either 0-360 or -180 to 180) of polygon</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_ycoord">ycoord</code></td>
<td>
<p>-  array giving latitudes (in decimal
degrees N; -90 to 90)of polygon</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_zcoord">zcoord</code></td>
<td>
<p>-  a real number with the z-coordinate(usually altitude or depth)</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_tcoord">tcoord</code></td>
<td>
<p>- 2-array of minimum and maximum times as 'YYYY-MM-DD'</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_xname">xName</code></td>
<td>
<p>- character string with name of the xcoord in the 'ERDDAP™' dataset (default &quot;longitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_yname">yName</code></td>
<td>
<p>- character string with name of the ycoord in the 'ERDDAP™' dataset (default &quot;latitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_zname">zName</code></td>
<td>
<p>- character string with name of the zcoord in the 'ERDDAP™' dataset (default &quot;altitude&quot;)</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_tname">tName</code></td>
<td>
<p>- character string with name of the tcoord in the 'ERDDAP™' dataset (default &quot;time&quot;)</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_verbose">verbose</code></td>
<td>
<p>- logical variable (default FALSE) if the the URL request should be verbose</p>
</td></tr>
<tr><td><code id="rxtractogon_+3A_cache_remove">cache_remove</code></td>
<td>
<p>- logical variable (default TRUE) whether to delete 'rerddap' cache</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful a structure with data and dimensions
</p>

<ul>
<li><p> extract$data - the masked data array dimensioned (lon,lat,time)
</p>
</li>
<li><p> extract$varname - the name of the parameter extracted
</p>
</li>
<li><p> extract$datasetname - ERDDAP dataset name
</p>
</li>
<li><p> extract$longitude - the longitudes on some scale as request
</p>
</li>
<li><p> extract$latitude - the latitudes always going south to north
</p>
</li>
<li><p> extract$time - the times of the extracts
</p>
</li></ul>

<p>else an error string
</p>


<h3>Details</h3>

<p>rxtractogon extracts the data from the smallest bounding box that contains
the polygon, and then uses the function &quot;point.in.polygon&quot; from the &quot;sp&quot;
package to mask out the areas outside of the polygon.
rxtractogon only works with datasets defined
on a latitude and longitude grid.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## toy example to show use
## and keep execution time low
# dataInfo &lt;- rerddap::info('erdHadISST')
parameter &lt;- 'sst'
tcoord &lt;- c("2016-06-15")
xcoord &lt;- mbnms$Longitude[1:3]
ycoord &lt;- mbnms$Latitude[1:3]
# sanctSST &lt;- rxtractogon (dataInfo, parameter=parameter, xcoord = xcoord,
#                          ycoord = ycoord,  tcoord= tcoord)
#
## MBMS bathymetry example
xcoord &lt;- mbnms$Longitude
ycoord &lt;- mbnms$Latitude
## Wrap rerddap::info('etopo180') call in function that insures proper finish if it fails
dataInfo &lt;- safe_info('etopo180')
parameter = 'altitude'
xName &lt;- 'longitude'
yName &lt;- 'latitude'
# bathy &lt;- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord, ycoord = ycoord)
</code></pre>

<hr>
<h2 id='safe_info'>Wrap rerddap::info() so that it will fail gracefully
<code>safe_info</code> uses tryCatch() to deal with unavailable response</h2><span id='topic+safe_info'></span>

<h3>Description</h3>

<p>Wrap rerddap::info() so that it will fail gracefully
<code>safe_info</code> uses tryCatch() to deal with unavailable response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safe_info(dataset_id, url = "https://upwell.pfeg.noaa.gov/erddap/")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safe_info_+3A_dataset_id">dataset_id</code></td>
<td>
<p>ERDDAP dataset_id</p>
</td></tr>
<tr><td><code id="safe_info_+3A_url">url</code></td>
<td>
<p>base ERDDAP URL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If success,  dataset information,  otherwise message and end
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dataInfo &lt;- safe_info('etopo360')

</code></pre>

<hr>
<h2 id='swchl'>swchl Data</h2><span id='topic+swchl'></span>

<h3>Description</h3>

<p>pre-Download of Pacific West Coast SST fro use in 'plotTrack()' example
can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swchl
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> (inherits from <code>rxtractoTrack</code>) of length 13.
</p>


<h3>Details</h3>

<p>obtained using the 'rxtracto()' command
tagData &lt;- Marlintag38606
xpos &lt;- tagData$lon[1:20]
ypos &lt;- tagData$lat[1:20]
tpos &lt;- tagData$date[1:20]
tpos &lt;- tagData$date[1:20]
zpos &lt;- rep(0., length(xpos))
swchlInfo &lt;- rerddap::info('erdSWchla8day')
swchl &lt;- rxtracto(swchlInfo, parameter = 'chlorophyll', xcoord = xpos,
ycoord = ypos, tcoord = tpos, zcoord = zpos, xlen = .2, ylen = .2)
</p>

<hr>
<h2 id='tidy_grid'>convert result of 'rxtracto_3D' or 'rxtractogon' to tidy long-format</h2><span id='topic+tidy_grid'></span>

<h3>Description</h3>

<p><code>tidy_grid</code> is a function to convert result of 'rxtracto_3D' or 'rxtractogon' to &quot;tidy&quot; long-format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_grid(response)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_grid_+3A_response">response</code></td>
<td>
<p>data frame returned from 'rxtracto_3D'()' or 'rxtractogon()'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe in long-format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>MBsst_tidy &lt;-tidy_grid(MBsst)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
