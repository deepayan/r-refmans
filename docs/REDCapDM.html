<!DOCTYPE html><html><head><title>Help for package REDCapDM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {REDCapDM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#REDCapDM-package'><p>Managing REDCap Data: The R package REDCapDM</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#check_queries'><p>Check for changes between two reports of the queries</p></a></li>
<li><a href='#checkbox_names'><p>Change checkboxes names into the name of their options</p></a></li>
<li><a href='#covican'><p>Subset of the COVICAN's database</p></a></li>
<li><a href='#fill_data'><p>Fill rows with the values in one event</p></a></li>
<li><a href='#rd_event'><p>Identification of missing event(s)</p></a></li>
<li><a href='#rd_export'><p>Exporting the dataset of the queries</p></a></li>
<li><a href='#rd_insert_na'><p>Insert missing using a filter</p></a></li>
<li><a href='#rd_query'><p>Identification of queries</p></a></li>
<li><a href='#rd_rlogic'><p>REDCap logic into R logic</p></a></li>
<li><a href='#rd_transform'><p>Transformation of the raw data</p></a></li>
<li><a href='#recalculate'><p>Recalculate REDCap calculated fields</p></a></li>
<li><a href='#redcap_data'><p>Read REDCap data</p></a></li>
<li><a href='#split_event'><p>Creation of a data frame with variables of all the forms of a specified event</p></a></li>
<li><a href='#split_form'><p>Creation of a data frame with variables of a specified form</p></a></li>
<li><a href='#to_factor'><p>Convert variables to factors</p></a></li>
<li><a href='#transform_checkboxes'><p>Transformation of checkboxes in case of having a branching logic</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'REDCap' Data Management</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.8</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>João Carmezim &lt;jcarmezim@igtp.cat&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>REDCap Data Management - REDCapDM is a comprehensive package that enables users to seamlessly handle data exported directly from REDCap or through API connections. This tool facilitates various functions, including data preprocessing, report generation for queries such as outliers or missing values, and tracking of identified queries. 'REDCap' (Research Electronic Data CAPture; <a href="https://projectredcap.org">https://projectredcap.org</a>) is a web application developed at Vanderbilt University, designed for creating and managing online surveys and databases. The API connection provides users with the capability to programmatically access both data and project metadata, including the data dictionary, from the web.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bruigtp.github.io/REDCapDM/">https://bruigtp.github.io/REDCapDM/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bruigtp/REDCapDM/issues">https://github.com/bruigtp/REDCapDM/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, janitor, magrittr, openxlsx, purrr, REDCapR, rlang,
stringr, tibble, tidyr, tidyselect, utils, stringi, labelled,
cli, forcats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, kableExtra</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-16 20:32:55 UTC; jcarmezim</td>
</tr>
<tr>
<td>Author:</td>
<td>João Carmezim [aut, cre],
  Pau Satorra [aut],
  Judith Peñafiel [aut],
  Esther García [aut],
  Natàlia Pallarés [aut],
  Cristian Tebé [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-20 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='REDCapDM-package'>Managing REDCap Data: The R package REDCapDM</h2><span id='topic+REDCapDM-package'></span><span id='topic+REDCapDM'></span>

<h3>Description</h3>

<p>The REDCapDM package facilitates the importing of data from REDCap into R through either an API connection or directly from exported files. It encompasses various functions dedicated to data processing and transformation, aiding in the generation and administration of queries to address any discrepancies or uncertainties encountered within the dataset.
</p>
<p>REDCapDM functions:
</p>
<p>- redcap_data: used to read data exported from REDCap or through an API connection.
</p>
<p>- rd_transform: pre-processing a dataset.
</p>
<p>- rd_rlogic: transcribes redcap logic to R logic.
</p>
<p>- rd_insert_na: manually input a missing value for specified variables using a filter.
</p>
<p>- rd_query: identification of queries.
</p>
<p>- rd_event: identification of missing events per record identifier.
</p>
<p>- check_queries: used to compare current queries with an old report to determine which ones have been modified, which remain unchanged, and if there are any new queries.
</p>
<p>- rd_export: used to export all identified queries into a xlsx file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Install REDCapDM from CRAN:
install.packages('REDCapR')

# Install REDCapDM from GitHub:
remotes::install_github('bruigtp/REDCapDM')

## End(Not run)
</code></pre>

<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='check_queries'>Check for changes between two reports of the queries</h2><span id='topic+check_queries'></span>

<h3>Description</h3>

<p>This function compares a previous report of queries with a new one and allows you to check which queries are new, which have been modified, and which remain unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_queries(old, new, report_title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_queries_+3A_old">old</code></td>
<td>
<p>Previous version of the queries report.</p>
</td></tr>
<tr><td><code id="check_queries_+3A_new">new</code></td>
<td>
<p>New version of the queries report. The status of each query is determined using this object.</p>
</td></tr>
<tr><td><code id="check_queries_+3A_report_title">report_title</code></td>
<td>
<p>Character string specifying the title of the report.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list consisting of a dataframe with every single query of both reports and a column containing the status of the queries (new, solved, miscorrected or pending) compared to the previous query report. There is also a summary of the total number of queries per category in addition to this dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example of a query
data_old &lt;- rd_query(covican,
                     variables = "copd",
                     expression = "is.na(x)",
                     event = "baseline_visit_arm_1")
data_new &lt;- rbind(data_old$queries[1:5,], c("100-20",rep("abc",8)))

# Control of queries
check &lt;- check_queries(old = data_old$queries,
                       new = data_new)
</code></pre>

<hr>
<h2 id='checkbox_names'>Change checkboxes names into the name of their options</h2><span id='topic+checkbox_names'></span>

<h3>Description</h3>

<p>Function that returns both data and dictionary with the name of the checkboxes transformed by the name of their options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkbox_names(data, dic, labels, checkbox_labels = c("No", "Yes"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkbox_names_+3A_data">data</code></td>
<td>
<p>Dataset containing the REDCap data.</p>
</td></tr>
<tr><td><code id="checkbox_names_+3A_dic">dic</code></td>
<td>
<p>Dataset containing the REDCap dictionary.</p>
</td></tr>
<tr><td><code id="checkbox_names_+3A_labels">labels</code></td>
<td>
<p>Named character vector with the name of the variables in the data and the REDCap label in its name.</p>
</td></tr>
<tr><td><code id="checkbox_names_+3A_checkbox_labels">checkbox_labels</code></td>
<td>
<p>Character vector with the names that will have the two options of every checkbox variable. Default is c('No', 'Yes').</p>
</td></tr>
</table>

<hr>
<h2 id='covican'>Subset of the COVICAN's database</h2><span id='topic+covican'></span>

<h3>Description</h3>

<p>A random sample of the COVICAN study. An international, multicentre cohort study of cancer patients with COVID-19 to describe the epidemiology, risk factors, and clinical outcomes of co-infections and superinfections in onco-hematological patients with COVID-19.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(covican)
</code></pre>


<h3>Format</h3>

<p>A data frame with 342 rows and 56 columns
</p>

<dl>
<dt>record_id:</dt><dd><p>Identifier of each record. This information does not match the real data.</p>
</dd>
<dt>redcap_event_name:</dt><dd><p>Auto-generated name of the events</p>
</dd>
<dt>redcap_data_access_group:</dt><dd><p>Auto-generated name of each center. This information does not match the real data.</p>
</dd>
<dt>inc_1:</dt><dd><p>Inclusion criteria of 'Patients older than 18 years' (0 = No ; 1 = Yes)</p>
</dd>
<dt>inc_2:</dt><dd><p>Inclusion criteria of 'Cancer patients' (0 = No ; 1 = Yes)</p>
</dd>
<dt>inc_3:</dt><dd><p>Inclusion criteria of 'Diagnosed of COVID-19' (0 = No ; 1 = Yes)</p>
</dd>
<dt>exc_1:</dt><dd><p>Exclusion criteria of 'Solid tumour remission &gt;1 year' (0 = No ; 1 = Yes)</p>
</dd>
<dt>screening_fail_crit:</dt><dd><p>Indicator of non-compliance with inclusion and exclusion criteria (0 = compliance ; 1 = non-compliance)</p>
</dd>
<dt>d_birth:</dt><dd><p>Date of birth (y-m-d). This date does not correspond to the original.</p>
</dd>
<dt>d_admission:</dt><dd><p>Date of first visit (y-m-d). This date does not correspond to the original.</p>
</dd>
<dt>age:</dt><dd><p>Age in years</p>
</dd>
<dt>dm:</dt><dd><p>Indicator of diabetes (0 = No ; 1 = Yes)</p>
</dd>
<dt>type_dm:</dt><dd><p>Type of diabetes (1 = No complications ; 2 = End-organ diabetes-related disease)</p>
</dd>
<dt>copd:</dt><dd><p>Indicator of chronic obstructive pulmonary disease (0 = No ; 1 = Yes)</p>
</dd>
<dt>fio2:</dt><dd><p>Fraction of inspired oxygen in percentage</p>
</dd>
<dt>available_analytics:</dt><dd><p>Indicator of blood test available (0 = No ; 1 = Yes)</p>
</dd>
<dt>potassium:</dt><dd><p>Potassium in mmol/L</p>
</dd>
<dt>resp_rate:</dt><dd><p>Respiratory rate in bpm</p>
</dd>
<dt>leuk_lymph:</dt><dd><p>Indicator of leukemia or lymphoma (0 = No ; 1 = Yes)</p>
</dd>
<dt>acute_leuk:</dt><dd><p>Indicator of acute leukemia (0 = No ; 1 = Yes)</p>
</dd>
<dt>type_underlying_disease[...]:</dt><dd><p>Checkbox with the type of underlying disease (0 = Haematological cancer ; 1 = Solid tumour)</p>
</dd>
<dt>underlying_disease_hemato[...]:</dt><dd><p>Checkbox with the type of underlying disease (1 = Acute myeloid leukemia ; 2 = 	Myelodysplastic syndrome ; 3 = Chronic myeloid leukaemia ; 4 = Acute lymphoblastic leukaemia ; 5 = 	Hodgkin lymphoma ; 6 = Non Hodgkin lymphoma ; 7 = Multiple myeloma ; 8 = Myelofibrosis ; 9 = Aplastic anaemia ; 10 = Chronic lymphocytic leukaemia ; 11 = Amyloidosis ; 12 = Other)</p>
</dd>
<dt>urine_culture:</dt><dd><p>Indicator of urine culture: (0 = Not done ; 1 = Done)</p>
</dd>
<dt>[...].factor:</dt><dd><p>Labels of the different variables</p>
</dd>
</dl>



<h3>Note</h3>

<p>List containing three dataframes: the first one with the data, the second one with the dictionary ('codebook') of the REDCap project and the final one with the instrument-event mappings of the REDCap project.
</p>


<h3>References</h3>

<p>Gudiol, C., Durà-Miralles, X., Aguilar-Company, J., Hernández-Jiménez, P., Martínez-Cutillas, M., Fernandez-Avilés, F., Machado, M., Vázquez, L., Martín-Dávila, P., de Castro, N., Abdala, E., Sorli, L., Andermann, T. M., Márquez-Gómez, I., Morales, H., Gabilán, F., Ayaz, C. M., Kayaaslan, B., Aguilar-Guisado, M., Herrera, F. Royo-Cebrecos C, Peghin M, González-Rico C, Goikoetxea J, Salgueira S, Silva-Pinto A, Gutiérrez-Gutiérrez B, Cuellar S, Haidar G, Maluquer C, Marin M, Pallarès N, Carratalà J. (2021). Co-infections and superinfections complicating COVID-19 in cancer patients: A multicentre, international study. The Journal of infection, 83(3), 306–313. https://doi.org/10.1016/j.jinf.2021.07.014
</p>

<hr>
<h2 id='fill_data'>Fill rows with the values in one event</h2><span id='topic+fill_data'></span>

<h3>Description</h3>

<p>Function that with one particular variable and event it fills all the rows in the data with the value in that particular event. Auxiliar to rd_rlogic function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_data(which_event, which_var, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fill_data_+3A_which_event">which_event</code></td>
<td>
<p>String with the name of the event</p>
</td></tr>
<tr><td><code id="fill_data_+3A_which_var">which_var</code></td>
<td>
<p>String with the name of the variable</p>
</td></tr>
<tr><td><code id="fill_data_+3A_data">data</code></td>
<td>
<p>Dataset containing the REDCap data.</p>
</td></tr>
</table>

<hr>
<h2 id='rd_event'>Identification of missing event(s)</h2><span id='topic+rd_event'></span>

<h3>Description</h3>

<p>When working with a longitudinal REDCap project, the exported data has a structure where each row represents one event per record. However, by default, REDCap does not export events for which there is no information available.
This function allows you to identify which record identifiers do not contain information about a particular event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_event(
  ...,
  data = NULL,
  dic = NULL,
  event,
  filter = NA,
  query_name = NA,
  addTo = NA,
  report_title = NA,
  report_zeros = FALSE,
  link = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_event_+3A_...">...</code></td>
<td>
<p>List containing the data, the dictionary and the event (if required). It may be the output of the 'redcap_data' function.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_data">data</code></td>
<td>
<p>Data frame containing the data read from REDCap. If the list is given, this argument is not required.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_dic">dic</code></td>
<td>
<p>Data frame containing the dictionary read from REDCap. If the list is given, this argument is not required.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_event">event</code></td>
<td>
<p>Character vector with the name of the REDCap event(s) to be analyzed.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_filter">filter</code></td>
<td>
<p>A filter to be applied to the dataset. This argument can be used to identify the missing events on a subset of the dataset.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_query_name">query_name</code></td>
<td>
<p>Description of the query. It can be defined as the same one for all the variables, or you can define a different one for each variable. By default, the function defines it as &lsquo;The event [event] is missing&rsquo; for each event'.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_addto">addTo</code></td>
<td>
<p>Data frame corresponding to a previous query data frame to which you can add the new query data frame. By default, the function always generates a new data frame without taking into account previous reports.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_report_title">report_title</code></td>
<td>
<p>Character string specifying the title of the report.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_report_zeros">report_zeros</code></td>
<td>
<p>Logical. If 'TRUE', the function returns a report containing variables with zero queries.</p>
</td></tr>
<tr><td><code id="rd_event_+3A_link">link</code></td>
<td>
<p>List containing project information used to create a web link to each missing event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a data frame of 9 columns (10 columns, if the link argument is specified) meant to help the user identify each missing event and a table with the total number of missing events per event analyzed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example &lt;- rd_event(covican,
                    event = "follow_up_visit_da_arm_1")
example
</code></pre>

<hr>
<h2 id='rd_export'>Exporting the dataset of the queries</h2><span id='topic+rd_export'></span>

<h3>Description</h3>

<p>This function allows you to export the previously identified queries to an xlsx file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_export(
  ...,
  queries = NULL,
  column = NULL,
  sheet_name = NULL,
  path = NULL,
  password = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_export_+3A_...">...</code></td>
<td>
<p>List containing the data frame of queries. It may be the output of the 'rd_query' or 'rd_event' functions.</p>
</td></tr>
<tr><td><code id="rd_export_+3A_queries">queries</code></td>
<td>
<p>Data frame containing the identified queries. If the list is given, this argument is not required.</p>
</td></tr>
<tr><td><code id="rd_export_+3A_column">column</code></td>
<td>
<p>Character element specifying the column containing the link of each query.</p>
</td></tr>
<tr><td><code id="rd_export_+3A_sheet_name">sheet_name</code></td>
<td>
<p>Character element specifying the sheet name of the resulting xlsx file.</p>
</td></tr>
<tr><td><code id="rd_export_+3A_path">path</code></td>
<td>
<p>Character element specifying the file path to save the xlsx file. If 'NULL', the file is created in the current working directory.</p>
</td></tr>
<tr><td><code id="rd_export_+3A_password">password</code></td>
<td>
<p>String with the password to protect the worksheet and prevent others from making changes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An xlsx file containing all the queries and, if available, hyperlinks to each one of them.
</p>

<hr>
<h2 id='rd_insert_na'>Insert missing using a filter</h2><span id='topic+rd_insert_na'></span>

<h3>Description</h3>

<p>Function that allows you to manually input a missing to some variables ('vars') when some filters ('filter') are satisfied. Useful for checkboxes without a gatekeeper question in the branching logic. Take in account that the variable will be transformed only in the events where both the variable and the filter evaluation are present, so they need to have at least one event in common.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_insert_na(..., data = NULL, dic = NULL, event_form = NULL, vars, filter)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_insert_na_+3A_...">...</code></td>
<td>
<p>List containing the data and the dictionary and the event if it's needed. Can be the output of the function 'redcap_data'.</p>
</td></tr>
<tr><td><code id="rd_insert_na_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_insert_na_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_insert_na_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_insert_na_+3A_vars">vars</code></td>
<td>
<p>Character vector containing the names of those variables to transform.</p>
</td></tr>
<tr><td><code id="rd_insert_na_+3A_filter">filter</code></td>
<td>
<p>Character vector containing the logic to be directly evaluated. When each logic is TRUE the corresponding variable specified in 'vars' will be put to missing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>transformed data with the specified variables converted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>table(is.na(covican$data$potassium))
data &lt;- rd_insert_na(covican,
             vars = "potassium",
             filter = "age &lt; 65")
table(data$potassium)
</code></pre>

<hr>
<h2 id='rd_query'>Identification of queries</h2><span id='topic+rd_query'></span>

<h3>Description</h3>

<p>This function allows you to identify queries by the use a specific expression.
It can be used to identify missing values or to identify values that are outside the lower and upper limits of a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_query(
  ...,
  variables = NA,
  expression = NA,
  negate = FALSE,
  event = NA,
  filter = NA,
  addTo = NA,
  variables_names = NA,
  query_name = NA,
  instrument = NA,
  report_title = NA,
  report_zeros = FALSE,
  by_dag = FALSE,
  link = list(),
  data = NULL,
  dic = NULL,
  event_form = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_query_+3A_...">...</code></td>
<td>
<p>List containing the data, the dictionary and the event (if required). It may be the output of the 'redcap_data' function.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_variables">variables</code></td>
<td>
<p>Character vector of the names of the database variables to be checked.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_expression">expression</code></td>
<td>
<p>Character vector of expressions to be applied to the selected variables.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_negate">negate</code></td>
<td>
<p>Logical value which indicates whether the defined expression should be negated. Defaults to 'FALSE'.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_event">event</code></td>
<td>
<p>The name of the REDCap event to be analyzed. If there are events in your REDCap project, you should use this argument in order to name the event to which the defined variables belong.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_filter">filter</code></td>
<td>
<p>A filter to be applied to the dataset. For example, the branching logic of a determined variable can be applied using this argument.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_addto">addTo</code></td>
<td>
<p>Data frame corresponding to a previous query data frame to which you can add the new query data frame. By default, the function always generates a new data frame without taking into account previous reports.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_variables_names">variables_names</code></td>
<td>
<p>Character vector containing the description of each selected variable. By default, the function automatically takes the description of each variable from the dictionary of the REDCap project.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_query_name">query_name</code></td>
<td>
<p>Description of the query. It can be defined as the same one for all the variables, or you can define a different one for each variable. By default, the function defines it as &lsquo;The value is [value] and it should not be [expression]&rsquo;'.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_instrument">instrument</code></td>
<td>
<p>REDCap's instrument to which the variables belong. It can be defined as the same one for all the variables, or you can define a different one for each variable. By default, the function automatically selects the corresponding instrument of each variable from the dictionary of the REDCap project.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_report_title">report_title</code></td>
<td>
<p>Character string specifying the title of the report.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_report_zeros">report_zeros</code></td>
<td>
<p>Logical. If 'TRUE', the function returns a report containing variables with zero queries.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_by_dag">by_dag</code></td>
<td>
<p>Logical. If 'TRUE', both elements of the output are grouped by the data access groups (DAGs) of the REDCap project.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_link">link</code></td>
<td>
<p>List containing project information used to create a web link to each query.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_data">data</code></td>
<td>
<p>Data frame containing the data read from REDCap. If the list is given, this argument is not required.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_dic">dic</code></td>
<td>
<p>Data frame containing the dictionary read from REDCap. If the list is given, this argument is not required.</p>
</td></tr>
<tr><td><code id="rd_query_+3A_event_form">event_form</code></td>
<td>
<p>Data frame containing the correspondence of each event with each form. If the list is specified this argument is not necessary.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a data frame of 9 columns (10 columns, if the link argument is specified) meant to help the user identify each query and a table with the total number of queries per variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Missing values
example &lt;- rd_query(covican,
                    variables = c("copd", "age"),
                    expression = c("is.na(x)", "x %in% NA"),
                    event = "baseline_visit_arm_1")
example

# Expression
example &lt;- rd_query(covican,
                    variables="age",
                    expression="x&gt;20",
                    event="baseline_visit_arm_1")
example

# Using the filter argument
example &lt;- rd_query(covican,
                    variables = "potassium",
                    expression = "is.na(x)",
                    event = "baseline_visit_arm_1",
                    filter = "available_analytics=='1'")
example
</code></pre>

<hr>
<h2 id='rd_rlogic'>REDCap logic into R logic</h2><span id='topic+rd_rlogic'></span>

<h3>Description</h3>

<p>This function allows you to transcribe REDCap logic to R logic. WARNING: If the REDCap logic involves some smart-variables this function will not be able to transform it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_rlogic(..., data = NULL, dic = NULL, event_form = NULL, logic, var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_rlogic_+3A_...">...</code></td>
<td>
<p>List containing the data and the dictionary and the event if it's needed. Can be the output of the function 'redcap_data'.</p>
</td></tr>
<tr><td><code id="rd_rlogic_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_rlogic_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_rlogic_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form. If the list is specified this argument is not needed.</p>
</td></tr>
<tr><td><code id="rd_rlogic_+3A_logic">logic</code></td>
<td>
<p>String containing a logic in REDCap format.</p>
</td></tr>
<tr><td><code id="rd_rlogic_+3A_var">var</code></td>
<td>
<p>string with the name of the variable that contains the logic.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing the logic in R format and its evaluation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rd_rlogic(covican,
          logic = "if([exc_1]='1' or [inc_1]='0' or [inc_2]='0' or [inc_3]='0',1,0)",
          var = "screening_fail_crit")
</code></pre>

<hr>
<h2 id='rd_transform'>Transformation of the raw data</h2><span id='topic+rd_transform'></span>

<h3>Description</h3>

<p>Function that transforms the raw data from REDCap read by the function 'redcap_data'. It returns the transformed data and dictionary along with the summary of the results of each step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rd_transform(
  ...,
  data = NULL,
  dic = NULL,
  event_form = NULL,
  checkbox_labels = c("No", "Yes"),
  checkbox_na = FALSE,
  exclude_recalc = NULL,
  exclude_to_factor = NULL,
  delete_vars = NULL,
  delete_pattern = c("_complete", "_timestamp"),
  final_format = "raw",
  which_event = NULL,
  which_form = NULL,
  wide = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rd_transform_+3A_...">...</code></td>
<td>
<p>Output of the function &lsquo;redcap_data', that is a list containing the data frames of the data, he dictionary and the event_form (if it&rsquo;s needed) of the REDCap project.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_data">data</code></td>
<td>
<p>Data frame containing the data read from REDCap. If the list is specified this argument is not necessary.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap. If the list is specified this argument is not necessary.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_event_form">event_form</code></td>
<td>
<p>Data frame containing the correspondence of each event with each form. If the list is specified this argument is not necessary.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_checkbox_labels">checkbox_labels</code></td>
<td>
<p>Character vector with the names that will have the two options of every checkbox variable. Default is &lsquo;c(&rsquo;No', 'Yes')'.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_checkbox_na">checkbox_na</code></td>
<td>
<p>Logical indicating if values of checkboxes that have a branching logic have to set to missing only when the branching logic is missing (if set to false) or also when the branching logic isn't satisfied (if set to true). The default is false.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_exclude_recalc">exclude_recalc</code></td>
<td>
<p>Character vector with the names of the variables that do not have to be recalculated. Might be useful for projects were there are some calculated fields that have a time consuming recalculation.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_exclude_to_factor">exclude_to_factor</code></td>
<td>
<p>Character vector with the names of the variables that do not have to be transformed to factors.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_delete_vars">delete_vars</code></td>
<td>
<p>Character vector specifying the variables to exclude.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_delete_pattern">delete_pattern</code></td>
<td>
<p>Character vector specifying the regex pattern that will contain the variables to exclude. By default, variables ending up with '_complete' and '_timestamp' will be removed.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_final_format">final_format</code></td>
<td>
<p>Character string indicating the final arrangement format of the data that the function will return. Choose one of 'raw', 'by_event' or 'by_form'. 'raw' (default) will return the transformed data with the original structure. 'by_event' will return the transformed data as a nested data frame by event. 'by_form' will return the transformed data as a nested data frame by form.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_which_event">which_event</code></td>
<td>
<p>Character string indicating if only one event has to be returned if the final format selected is 'by_event'.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_which_form">which_form</code></td>
<td>
<p>Character string indicating if only one form has to be returned if the final format selected is 'by_form'.</p>
</td></tr>
<tr><td><code id="rd_transform_+3A_wide">wide</code></td>
<td>
<p>Logical indicating if the data split by form (if selected) has to be in a wide format or in a long one.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the transformed dataset, dictionary, event_form and the results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rd_transform(covican)

# For customization of checkbox labels
rd_transform(covican,
             checkbox_labels = c("Not present", "Present"))

</code></pre>

<hr>
<h2 id='recalculate'>Recalculate REDCap calculated fields</h2><span id='topic+recalculate'></span>

<h3>Description</h3>

<p>Function that recalculates every calculated field if the logic can be transcribed to R. Recall that calculated fields with smart-variables in the logic or variables in other events cannot be transcribed.
</p>
<p>The function will return the dataset and dictionary with the added recalculated variables (the name of the calculated field + '_recalc') along with a table that shows the summary of the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recalculate(data, dic, event_form = NULL, exclude_recalc = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recalculate_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap.</p>
</td></tr>
<tr><td><code id="recalculate_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap.</p>
</td></tr>
<tr><td><code id="recalculate_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form.</p>
</td></tr>
<tr><td><code id="recalculate_+3A_exclude_recalc">exclude_recalc</code></td>
<td>
<p>Character vector with the names of the variables that do not have to be recalculated. Might be useful for projects were there are some calculated fields that have a time consuming recalculation.</p>
</td></tr>
</table>

<hr>
<h2 id='redcap_data'>Read REDCap data</h2><span id='topic+redcap_data'></span>

<h3>Description</h3>

<p>This function allows users to read datasets from a REDCap project into R for analysis, either via export of the data or via an API connection.
</p>
<p>The REDCap API is an interface that allows communication with REDCap and server without going through the interactive REDCap interface.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcap_data(
  data_path = NA,
  dic_path = NA,
  event_path = NA,
  uri = NA,
  token = NA,
  filter_field = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redcap_data_+3A_data_path">data_path</code></td>
<td>
<p>Character string with the pathname of the R file to read the dataset from.</p>
</td></tr>
<tr><td><code id="redcap_data_+3A_dic_path">dic_path</code></td>
<td>
<p>Character string with the pathname of the dictionary.</p>
</td></tr>
<tr><td><code id="redcap_data_+3A_event_path">event_path</code></td>
<td>
<p>Character string with the pathname of the file containing the correspondence between each event and each form (it can be downloaded through the 'Designate Instruments for My Events' tab inside the 'Project Setup' section of REDCap)</p>
</td></tr>
<tr><td><code id="redcap_data_+3A_uri">uri</code></td>
<td>
<p>The URI (Uniform Resource Identification) of the REDCap project.</p>
</td></tr>
<tr><td><code id="redcap_data_+3A_token">token</code></td>
<td>
<p>Character vector with the generated token.</p>
</td></tr>
<tr><td><code id="redcap_data_+3A_filter_field">filter_field</code></td>
<td>
<p>Character vector with the fields of the REDCap project desired to import into R (API connection only)&lt;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing the dataset and the dictionary of the REDCap project. If the event_path is specified, it will also contain a third element with the correspondence of the events &amp; forms of the project.
</p>


<h3>Note</h3>

<p>If you will give further use to the package, we advise you to use the argument 'dic_path' to read your dictionary, as all other functions need it in order to run properly.
</p>
<p>To read exported data, you must first use REDCap's 'Export Data' function and select the 'R Statistical Software' format. It will then generate a CSV file with all the observations and an R file with the necessary code to complete each variable's information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Exported files from REDCap

dataset &lt;- redcap_data(data_path = "C:/Users/username/example.r",
                       dic_path = "C:/Users/username/example_dictionary.csv",
                       event_path = "C:/Users/username/events.csv")

# API connection

dataset_api &lt;- redcap_data(uri = "https://redcap.idibell.cat/api/",
                           token = "55E5C3D1E83213ADA2182A4BFDEA") # This token is fictitious


## End(Not run)
</code></pre>

<hr>
<h2 id='split_event'>Creation of a data frame with variables of all the forms of a specified event</h2><span id='topic+split_event'></span>

<h3>Description</h3>

<p>Function that given the data, the dictionary and the mapping between forms and events it creates a nested dataset containing all the datasets filtered by each event and containing only the variables found in the event. It can be chosen to return only the data from the specified event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_event(data, dic, event_form, which = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_event_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap.</p>
</td></tr>
<tr><td><code id="split_event_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap.</p>
</td></tr>
<tr><td><code id="split_event_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form.</p>
</td></tr>
<tr><td><code id="split_event_+3A_which">which</code></td>
<td>
<p>Specify an event if only data for the desired event is wanted.</p>
</td></tr>
</table>

<hr>
<h2 id='split_form'>Creation of a data frame with variables of a specified form</h2><span id='topic+split_form'></span>

<h3>Description</h3>

<p>Function that given the data, the dictionary and the mapping between forms and events it creates a nested dataset containing all the datasets having only the variables in each form. It can be chosen to return only the data from the specified form
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_form(data, dic, event_form = NULL, which = NULL, wide = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_form_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap.</p>
</td></tr>
<tr><td><code id="split_form_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap.</p>
</td></tr>
<tr><td><code id="split_form_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form.</p>
</td></tr>
<tr><td><code id="split_form_+3A_which">which</code></td>
<td>
<p>Specify a form if only data for the desired form is wanted.</p>
</td></tr>
<tr><td><code id="split_form_+3A_wide">wide</code></td>
<td>
<p>If the dataset needs to be in a wide format or not (long).</p>
</td></tr>
</table>

<hr>
<h2 id='to_factor'>Convert variables to factors</h2><span id='topic+to_factor'></span>

<h3>Description</h3>

<p>Function that converts every variable except those specified to factor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_factor(data, dic, exclude = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_factor_+3A_data">data</code></td>
<td>
<p>Dataset containing the REDCap data.</p>
</td></tr>
<tr><td><code id="to_factor_+3A_dic">dic</code></td>
<td>
<p>Dataset containing the REDCap dictionary.</p>
</td></tr>
<tr><td><code id="to_factor_+3A_exclude">exclude</code></td>
<td>
<p>Character vector containing the names of those variables that will not be converted to factors. If 'NULL', all variables will be converted.</p>
</td></tr>
</table>

<hr>
<h2 id='transform_checkboxes'>Transformation of checkboxes in case of having a branching logic</h2><span id='topic+transform_checkboxes'></span>

<h3>Description</h3>

<p>Inspects all the checkboxes of the study and looks if there is a branching logic. If there is one, when the logic of the branching logic is missing it directly inputs a missing to the checkbox. If checkbox_na is TRUE additionally it will put a missing when the branching logic isn't satisfied and not only when the logic is missing. If a branching logic cannot be found or the logic cannot be transcribed because of the presence of some smart variables, the variable is added in the list of the reviewable ones that will be printed.
</p>
<p>The function will return the dataset with the transformed checkboxes along with a table that shows a summary of the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_checkboxes(data, dic, event_form = NULL, checkbox_na = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_checkboxes_+3A_data">data</code></td>
<td>
<p>Data frame containing data from REDCap.</p>
</td></tr>
<tr><td><code id="transform_checkboxes_+3A_dic">dic</code></td>
<td>
<p>Data frame  containing the dictionary read from REDCap.</p>
</td></tr>
<tr><td><code id="transform_checkboxes_+3A_event_form">event_form</code></td>
<td>
<p>Data frame  containing the correspondence of each event with each form.</p>
</td></tr>
<tr><td><code id="transform_checkboxes_+3A_checkbox_na">checkbox_na</code></td>
<td>
<p>Logical indicating if values of checkboxes that have a branching logic have to set to missing only when the branching logic is missing (if set to false) or also when the branching logic isn't satisfied (if set to true). The default is false.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
