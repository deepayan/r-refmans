<!DOCTYPE html><html><head><title>Help for package GENEAclassify</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {GENEAclassify}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#GENEAclassify-package'><p>Classification of accelorometer data</p></a></li>
<li><a href='#abssumdiff'><p>Finding the absolute sum of the differences</p></a></li>
<li><a href='#changeTimes'><p>Select Times as Segment Changepoints</p></a></li>
<li><a href='#CirDisp'><p>CirDisp function</p></a></li>
<li><a href='#CirKurt'><p>CirKurt function</p></a></li>
<li><a href='#CirSD'><p>CirSD function</p></a></li>
<li><a href='#CirSkew'><p>CirSkew function</p></a></li>
<li><a href='#CirVar'><p>CirVar function</p></a></li>
<li><a href='#classifyGENEA'><p>Classify Data into Categories defined in an rpart GENEA fit</p></a></li>
<li><a href='#createGENEAmodel'><p>Create training data decision tree model</p></a></li>
<li><a href='#dataImport'><p>Data import function</p></a></li>
<li><a href='#degrees'><p>Extract rotation time series</p></a></li>
<li><a href='#features'><p>Get features of a GENEA rpart fit</p></a></li>
<li><a href='#find_peaks'><p>Find_Peaks</p></a></li>
<li><a href='#GENEAcount'><p>Count Steps</p></a></li>
<li><a href='#GENEAratio'><p>Principal Frequency Ratio</p></a></li>
<li><a href='#GENEAskew'><p>Skewness, a measure of centredness</p></a></li>
<li><a href='#getGENEAsegments'><p>import and segment one or more bin files.</p></a></li>
<li><a href='#head.GENEAbin'><p>Get features of a GENEActiv bin data object.</p></a></li>
<li><a href='#impact'><p>impact function</p></a></li>
<li><a href='#inGroup'><p>Which values are in a new group?</p></a></li>
<li><a href='#levels.GENEA'><p>Get levels of a GENEA rpart response</p></a></li>
<li><a href='#meandiff'><p>Finding the mean of the differences</p></a></li>
<li><a href='#MeanDir'><p>MeanDir function</p></a></li>
<li><a href='#radians'><p>Extract rotation time series in radians</p></a></li>
<li><a href='#removeShortSegments'><p>Remove Short Segments from Data</p></a></li>
<li><a href='#sddiff'><p>Finding the standard deviation of the differences</p></a></li>
<li><a href='#segmentation'><p>Perform Segmentation on GENEActiv Accelerometer Data</p></a></li>
<li><a href='#sod'><p>Finding the sum of the differences</p></a></li>
<li><a href='#stepCounter'><p>Step Counter</p></a></li>
<li><a href='#sumdiff'><p>Finding the sum of the differences</p></a></li>
<li><a href='#summariseCols'><p>Perform summary of vectors in the parent frame</p></a></li>
<li><a href='#TrainingData'><p>Example Training Data set</p></a></li>
<li><a href='#trainingFit'><p>Example classification tree</p></a></li>
<li><a href='#updown'><p>Extract data relating to the up/down component</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Segmentation and Classification of Accelerometer Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.5.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-07</td>
</tr>
<tr>
<td>Author:</td>
<td>Chris Campbell [aut],
  Aimee Gott [aut],
  Joss Langford [aut],
  Charles Sweetland [aut],
  Penny Sweetland [aut],
  Jia Ying Chua [aut, cre],
  Activinsights Ltd [cph]</td>
</tr>
<tr>
<td>Description:</td>
<td>Segmentation and classification procedures for data from the 'Activinsights GENEActiv' <a href="https://activinsights.com/technology/geneactiv/">https://activinsights.com/technology/geneactiv/</a> accelerometer that provides the user with a model to guess behaviour from test data where behaviour is missing.
    Includes a step counting algorithm, a function to create segmented data with custom features and a function to use recursive partitioning provided in the function rpart() of the 'rpart' package to create classification models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.0), methods, utils, grDevices, MASS, GENEAread,
changepoint, signal, rpart</td>
</tr>
<tr>
<td>Suggests:</td>
<td>waveslim, knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-08 09:10:29 UTC; JiaYingChua</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jia Ying Chua &lt;jiayingc@activinsights.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-19 19:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='GENEAclassify-package'>Classification of accelorometer data</h2><span id='topic+GENEAclassify-package'></span>

<h3>Description</h3>

<p>This package provides tools to perform the segmentation
and classification of GENEActiv accelorometer data. The high frequency
time series data is split into segments based on activity changepoints.
An <span class="pkg">rpart</span> fit is trained against known activities at each segment.
This fit can then then be used to guess behaviours from test data when
activity at each time point has not been reported. This allows detailed
behaviour profiles to be created for the wearer.
</p>

<hr>
<h2 id='abssumdiff'>Finding the absolute sum of the differences</h2><span id='topic+abssumdiff'></span>

<h3>Description</h3>

<p>Finding the absolute sum of the differences
called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>abssumdiff(x, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="abssumdiff_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="abssumdiff_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   abssumdiff(x = tmp1)
</code></pre>

<hr>
<h2 id='changeTimes'>Select Times as Segment Changepoints</h2><span id='topic+changeTimes'></span>

<h3>Description</h3>

<p>Trims down the number of changepoints in time series 
data to give segments that can reasonably be classified into 
discrete periods of activity. These will not normally be less than
30 seconds in duration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changeTimes(
  time,
  intervalseconds = 30,
  changeupdown,
  changedegrees,
  mininterval = 5,
  verbose = TRUE,
  verbose_timer = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changeTimes_+3A_time">time</code></td>
<td>
<p>numeric vector</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_intervalseconds">intervalseconds</code></td>
<td>
<p>An integer number of seconds (usually greater than 5) 
during which at most one changepoint may occur (typically between 5 and 30).
If intervalseconds is NA, all times will be returned.
If intervalseconds &lt;= mininterval it will be ignored 
(with a warning if verbose is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_changeupdown">changeupdown</code></td>
<td>
<p>cpt object</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_changedegrees">changedegrees</code></td>
<td>
<p>cpt object</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_mininterval">mininterval</code></td>
<td>
<p>single numeric</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_verbose">verbose</code></td>
<td>
<p>single logical should all warnings be reported? (default TRUE)</p>
</td></tr>
<tr><td><code id="changeTimes_+3A_verbose_timer">verbose_timer</code></td>
<td>
<p>single logical giving a time analysis of code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <span class="pkg">changepoint</span> package provides tools for optimally 
segmenting time series data.
</p>


<h3>Value</h3>

<p>numeric vector of times
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(changepoint)
d1 &lt;- c(54, 30, 27, 53, 100, 204, 197)
d2 &lt;- c(67, 64, 70, 79, 69, 60, 54)
c1 &lt;- cpt.var(d1, penalty = "SIC", pen.value = 1e-3, method = "PELT")
c2 &lt;- cpt.var(d2, penalty = "SIC", pen.value = 1e-3, method = "PELT")
changeTimes(time = 0:6, intervalseconds = 30, 
    changeupdown = c1, changedegrees = c2)
</code></pre>

<hr>
<h2 id='CirDisp'>CirDisp function</h2><span id='topic+CirDisp'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CirDisp(rotation, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CirDisp_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="CirDisp_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   CirDisp(tmp1)
</code></pre>

<hr>
<h2 id='CirKurt'>CirKurt function</h2><span id='topic+CirKurt'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CirKurt(rotation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CirKurt_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   CirKurt(tmp1)
</code></pre>

<hr>
<h2 id='CirSD'>CirSD function</h2><span id='topic+CirSD'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CirSD(rotation, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CirSD_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="CirSD_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   CirSD(tmp1)
</code></pre>

<hr>
<h2 id='CirSkew'>CirSkew function</h2><span id='topic+CirSkew'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CirSkew(rotation, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CirSkew_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="CirSkew_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   CirSkew(tmp1)
</code></pre>

<hr>
<h2 id='CirVar'>CirVar function</h2><span id='topic+CirVar'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CirVar(rotation, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CirVar_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="CirVar_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   CirVar(tmp1)
</code></pre>

<hr>
<h2 id='classifyGENEA'>Classify Data into Categories defined in an rpart GENEA fit</h2><span id='topic+classifyGENEA'></span>

<h3>Description</h3>

<p>Perform classification on segmented GENEActiv bin data using an 
rpart GENEA training fit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>classifyGENEA(
  testfile,
  start = NULL,
  end = NULL,
  Use.Timestamps = FALSE,
  radians = FALSE,
  mmap.load = (.Machine$sizeof.pointer &gt;= 8),
  trainingfit = trainingFit,
  newdata,
  allprobs = FALSE,
  setinf = 100,
  outputname = "_classified",
  outputdir = "GENEAclassification",
  datacols = "default",
  changepoint = c("UpDownDegrees", "TempFreq", "UpDownFreq", "UpDownMean", "UpDownVar",
    "UpDownMeanVar", "DegreesMean", "DegreesVar", "DegreesMeanVar",
    "UpDownMeanVarDegreesMeanVar", "UpDownMeanVarMagMeanVar"),
  penalty = "Manual",
  pen.value1 = 40,
  pen.value2 = 400,
  intervalseconds = 30,
  mininterval = 5,
  samplefreq = 100,
  filterorder = 2,
  boundaries = c(0.5, 5),
  Rp = 3,
  plot.it = FALSE,
  hysteresis = 0.1,
  stft_win = 10,
  plot.seg = FALSE,
  plot.seg.outputfile = "Changepoint",
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="classifyGENEA_+3A_testfile">testfile</code></td>
<td>
<p>character string stating path to a GENEActiv bin file, or a folder 
containing GENEActiv bin files.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_start">start</code></td>
<td>
<p>Where to start reading observations.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_end">end</code></td>
<td>
<p>Where to end reading observations.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_use.timestamps">Use.Timestamps</code></td>
<td>
<p>To use timestamps as the start and end time values this has to be set to TRUE. (Default FALSE)</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_radians">radians</code></td>
<td>
<p>calculate degrees rotation in radians.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_mmap.load">mmap.load</code></td>
<td>
<p>Default is (.Machine$sizeof.pointer &gt;= 8). see <code><a href="mmap.html#topic+mmap">mmap</a></code> for more details</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_trainingfit">trainingfit</code></td>
<td>
<p>a GENEA rpart object created by <code><a href="#topic+createGENEAmodel">createGENEAmodel</a></code> 
that gives the decision tree that was fitted from the training data. 
These are the parameters used to predict the new data.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_newdata">newdata</code></td>
<td>
<p>a new data frame that is to be classified (provide instead of testfile). 
The data must contain the <code><a href="#topic+features">features</a></code> named in the trainingfit.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_allprobs">allprobs</code></td>
<td>
<p>single logical should all estimated probabilities be 
reported rather than probability of selected class (default <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_setinf">setinf</code></td>
<td>
<p>single numeric an arbitrary value to replace Inf in calculated 
columns or NA to ignore Inf values. (default 100).
-setinf is used to replace -Inf. Alternatively, use setinf NULL to leave Inf as is.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_outputname">outputname</code></td>
<td>
<p>file name root (excluding extension) for saving the 
classification output (default &quot;classified&quot;).</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_outputdir">outputdir</code></td>
<td>
<p>absolute or relative path to directory in which artifacts 
(plot and changes files) should be created or <code>NULL</code> 
(default &quot;GENEAclassification&quot;).</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_datacols">datacols</code></td>
<td>
<p>a vector constructed 'column.summary' or 'default'. See <code><a href="#topic+segmentation">segmentation</a></code> for details.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_changepoint">changepoint</code></td>
<td>
<p>defines the change point analysis to use. UpDownDegrees performs the change point analysis on the variance of arm elevation and wrist rotation. TempFreq performs a change point on the variance in the temeprature and Frequency (Typically better for sleep behaviours)</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_penalty">penalty</code></td>
<td>
<p>single characgter, the penalty to use for changepoint detection. default (&quot;SIC&quot;)</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_pen.value1">pen.value1</code></td>
<td>
<p>Value of the type 1 error required when penalty is &quot;Asymptotic&quot;.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_pen.value2">pen.value2</code></td>
<td>
<p>Default set as NULL and so equals pen.value1 if no input.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_intervalseconds">intervalseconds</code></td>
<td>
<p>An integer number of seconds between 5 and 30 during which at most one changepoint may occur.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_mininterval">mininterval</code></td>
<td>
<p>single numeric that defines the smallest changepoint initially found. Passed to <code><a href="changepoint.html#topic+cpt.var">cpt.var</a></code> as the variable minseglen</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_samplefreq">samplefreq</code></td>
<td>
<p>The sampling frequency of the data, in hertz,
when calculating the step number. (default 100)</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_filterorder">filterorder</code></td>
<td>
<p>The order of the filter applied with respect to the cheby options.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_boundaries">boundaries</code></td>
<td>
<p>to passed to the filter in the step counting algorithm.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_rp">Rp</code></td>
<td>
<p>the decibel level that the cheby filter takes. see <code><a href="signal.html#topic+cheby1">cheby1</a></code></p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_plot.it">plot.it</code></td>
<td>
<p>(logical) Creates a plot showing the zero crossings counted by the step counting algorithm#' @param Centre Centres the xz signal about 0 when set to True.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_hysteresis">hysteresis</code></td>
<td>
<p>The hysteresis applied after zero crossing. (default 100mg)</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_stft_win">stft_win</code></td>
<td>
<p>numeric for the window to calculate the frequency of an event using the <code><a href="GENEAread.html#topic+stft">stft</a></code> function.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_plot.seg">plot.seg</code></td>
<td>
<p>(logical) Creates a plot displaying the changepoint locations</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_plot.seg.outputfile">plot.seg.outputfile</code></td>
<td>
<p>The name of the png file created that shows the change points on a positionals plots.</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_verbose">verbose</code></td>
<td>
<p>single logical should additional progress reporting be 
printed at the console (default <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="classifyGENEA_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to <code><a href="#topic+dataImport">dataImport</a></code>, 
<code><a href="#topic+segmentation">segmentation</a></code> and other functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will apply the rules determined by the rpart GENEA 
decision tree passed to argument trainingfit to the columns 
of newdata to classify into classes 
(view using <code>"<a href="#topic+levels.GENEA">levels</a>"</code>).
</p>


<h3>Value</h3>

<p>The function will return the data frame that was provided as newdata with 
additional columns. </p>

<ol>
<li> <p><code>Class</code>, a factor indicating that the predicted category of the segment
</p>
</li>
<li> <p><code>p.Class</code>, estimated probability that the prediction is correct
</p>
</li></ol>

<p>Alternatively, by setting argument allprobs to TRUE, a column constructed 
'p.level' containing the estimated probability of each possible class 
will be returned instead.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## segData &lt;- read.csv(system.file(package = "GENEAclassify", 
##       "testdata", "trainingData9.csv"))
## The training fit can be created by provided the file path to the training data
## in the function getTrainingData - see the help file for more details
## Uses the fitted decision tree to predict the segmented data
## class9 &lt;- classifyGENEA(testfile = "trainingData9.csv",
##                         newdata = segData, 
##                         trainingfit = trainingFit)
## head(class9)
## table(class9$Class)
</code></pre>

<hr>
<h2 id='createGENEAmodel'>Create training data decision tree model</h2><span id='topic+createGENEAmodel'></span>

<h3>Description</h3>

<p>From data frame create a decision tree that can be used for 
classifying data into specified categories. The data frame may optionally 
contain a reserved column Source, specifying the provenance of the record.
The data frame must contain a column, by default named Activity, specifing 
the classes into which the model fit should be classified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createGENEAmodel(
  data,
  outputtree = NULL,
  features = c("Segment.Duration", "Principal.Frequency.mad", "UpDown.sd", "Degrees.sd"),
  category = "Activity",
  plot = TRUE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createGENEAmodel_+3A_data">data</code></td>
<td>
<p>data frame containing segmented GENEActiv bin data.</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_outputtree">outputtree</code></td>
<td>
<p>name of the png file that shows the classification tree plot.</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_features">features</code></td>
<td>
<p>character vector naming independent variables to use in classification.
Alternatively, a numeric vector specifying the variables to pass to the classification 
or NULL, in which case all variables are used in the order of the supplied training dataset.
Note that including large numbers of variables (&gt;7) may result in long run times.</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_category">category</code></td>
<td>
<p>single character naming the dependent variable to use (default 'Activity').</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_plot">plot</code></td>
<td>
<p>a logical value indicating whether a plot of the classification tree
should be plotted. The default is TRUE.</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_verbose">verbose</code></td>
<td>
<p>single logical should additional progress reporting be printed 
at the console? (default <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="createGENEAmodel_+3A_...">...</code></td>
<td>
<p>other arguments for <code>rpart</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function will create an rpart classification tree for the training data based 
upon the parameters passed to features. The model created, an GENEA rpart object can be used 
within the function <code>"<a href="#topic+classifyGENEA">classifyGENEA</a>"</code> to classify GENEA bin files.
</p>


<h3>Value</h3>

<p>A GENEA rpart fit.
</p>


<h3>See Also</h3>

<p>The returned object can be interrogated with 
<code>features</code>, the variables used in defining the model,
and <code>"<a href="#topic+levels.GENEA">levels</a>"</code>, the response categories predicted by the model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## dataPath &lt;- file.path(system.file(package = "GENEAclassify"),
##                                   "testdata",
##                                   "trainingData9.csv")
##
## t1 &lt;- read.csv(file = dataPath)
## 
## f1 &lt;- createGENEAmodel(data = t1,
##                        features = c("Degrees.var",
##                                     "UpDown.mad",
##                                     "Magnitude.mean"),
##                        category = "Activity")
## 
## class(f1)
## levels(f1)
## features(f1)
## plot(f1)
## text(f1)
</code></pre>

<hr>
<h2 id='dataImport'>Data import function</h2><span id='topic+dataImport'></span>

<h3>Description</h3>

<p>Loads the data into R and creates format required for segmentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataImport(
  binfile,
  downsample = 100,
  start = NULL,
  end = NULL,
  Use.Timestamps = FALSE,
  radians = FALSE,
  keep_raw_data = TRUE,
  mmap.load = (.Machine$sizeof.pointer &gt;= 8),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataImport_+3A_binfile">binfile</code></td>
<td>
<p>File path to binary data to be segmented.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_downsample">downsample</code></td>
<td>
<p>Rate to downsample the data, defaults to every 100th observation. For no downsampling set NULL.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_start">start</code></td>
<td>
<p>Where to start reading observations.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_end">end</code></td>
<td>
<p>Where to end reading observations.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_use.timestamps">Use.Timestamps</code></td>
<td>
<p>To use timestamps as the startand end time values this has to be set to TRUE. (Default FALSE)</p>
</td></tr>
<tr><td><code id="dataImport_+3A_radians">radians</code></td>
<td>
<p>calculate degrees rotation in radians.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_keep_raw_data">keep_raw_data</code></td>
<td>
<p>Keep the raw data for calculating steps using stepcounter.</p>
</td></tr>
<tr><td><code id="dataImport_+3A_mmap.load">mmap.load</code></td>
<td>
<p>Default is (.Machine$sizeof.pointer &gt;= 8). see mmap for more details</p>
</td></tr>
<tr><td><code id="dataImport_+3A_...">...</code></td>
<td>
<p>additional arguments passed through.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reads in the binary data file and extracts the information required for the segmentation procedure.
</p>


<h3>Value</h3>

<p>Returns a list containing a matrix of the data including the x, y and z axis data, vectors of the up down (elevation) 
and degrees (rotation), a vector of time stamps, a vector of vector magnitudes and the serial number of the device.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##   segData = dataImport(bindata = file.path(system.file(package = "GENEAread"),
##                                                         "binfile",
##                                                         "TESTfile.bin"))
## 
## segData1 = dataImport(AccData)
## names(segData)
</code></pre>

<hr>
<h2 id='degrees'>Extract rotation time series</h2><span id='topic+degrees'></span>

<h3>Description</h3>

<p>Extract data relating to the rotation component.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>degrees(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="degrees_+3A_x">x</code></td>
<td>
<p>data output from get.intervals</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Called by <code>dataImport</code>.
Note: the &quot;+ 1&quot; has been removed from the original implementation.
</p>


<h3>Value</h3>

<p>The degrees (rotation) data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d1 = matrix(c(100, 101, -0.79, -0.86, -0.17, -0.14, 0.53, 0.46), 
        nrow = 2, ncol = 4)
   colnames(d1) = c("timestamp", "x", "y", "z")
   degrees(x = d1)
</code></pre>

<hr>
<h2 id='features'>Get features of a GENEA rpart fit</h2><span id='topic+features'></span>

<h3>Description</h3>

<p>Shows the response features specified by a GENEA (rpart) object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>features(fit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="features_+3A_fit">fit</code></td>
<td>
<p>GENEA rpart object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector naming features selected by GENEA rpart fit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(trainingFit)
features(fit = trainingFit)
</code></pre>

<hr>
<h2 id='find_peaks'>Find_Peaks</h2><span id='topic+find_peaks'></span>

<h3>Description</h3>

<p>Peak detect function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_peaks(x, m = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_peaks_+3A_x">x</code></td>
<td>
<p>timeseries signal</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_m">m</code></td>
<td>
<p>The number of points either side of the peak to required to be a peak.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Finds the peaks and valleys within the signal passed to the function.
</p>

<hr>
<h2 id='GENEAcount'>Count Steps</h2><span id='topic+GENEAcount'></span>

<h3>Description</h3>

<p>Step count is the number of step lengths divided by 2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GENEAcount(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GENEAcount_+3A_x">x</code></td>
<td>
<p>vector</p>
</td></tr>
<tr><td><code id="GENEAcount_+3A_...">...</code></td>
<td>
<p>other arguments to be swallowed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>single numeric
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   x1 &lt;- c(20, 15, 10)
   GENEAcount(x1)
   x2 &lt;- c(300, 255, 111)
   GENEAcount(x2)
</code></pre>

<hr>
<h2 id='GENEAratio'>Principal Frequency Ratio</h2><span id='topic+GENEAratio'></span>

<h3>Description</h3>

<p>Calculates the ratio of the principle step frequencies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GENEAratio(principals, freq = "Freq", nfr = 3L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GENEAratio_+3A_principals">principals</code></td>
<td>
<p>principal frequency</p>
</td></tr>
<tr><td><code id="GENEAratio_+3A_freq">freq</code></td>
<td>
<p>single character naming single numeric variable 
in parent environment stating sampling frequency</p>
</td></tr>
<tr><td><code id="GENEAratio_+3A_nfr">nfr</code></td>
<td>
<p>single integer number of frames to search</p>
</td></tr>
<tr><td><code id="GENEAratio_+3A_...">...</code></td>
<td>
<p>other arguments to be swallowed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note this function is intended to be called from within 
an apply call in <code><a href="#topic+segmentation">segmentation</a></code>, hence the 
unusual syntax of defining the sampling frequency, freq
as an object in the parent frame
</p>


<h3>Value</h3>

<p>single numeric
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    Freq &lt;- 100
    GENEAratio(principals = c(0.1, 3.2, 0.3, 0.0, 0.2))
</code></pre>

<hr>
<h2 id='GENEAskew'>Skewness, a measure of centredness</h2><span id='topic+GENEAskew'></span>

<h3>Description</h3>

<p>Many datasets do not have the highest density 
of measurements in the middle of the distribution of the data.
Skewness is a measure of the asymmetry of a probability distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GENEAskew(x, na.rm = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GENEAskew_+3A_x">x</code></td>
<td>
<p>numeric vector</p>
</td></tr>
<tr><td><code id="GENEAskew_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="GENEAskew_+3A_...">...</code></td>
<td>
<p>other arguments to be swallowed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>single numeric
</p>


<h3>Examples</h3>

<pre><code class='language-R'>GENEAskew(1:10)
GENEAskew((1:10)^2)
GENEAskew((1:10)^0.5)
</code></pre>

<hr>
<h2 id='getGENEAsegments'>import and segment one or more bin files.</h2><span id='topic+getGENEAsegments'></span>

<h3>Description</h3>

<p>Import and summarize GENEActiv bin data for manual classification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGENEAsegments(
  testfile,
  start = NULL,
  end = NULL,
  Use.Timestamps = FALSE,
  radians = FALSE,
  keep_raw_data = TRUE,
  mmap.load = (.Machine$sizeof.pointer &gt;= 8),
  outputtoken = "_segmented",
  outputdir = "GENEAclassification",
  datacols = "default",
  decimalplaces = "default",
  filterWave = FALSE,
  filtername = "haar",
  j = 8,
  changepoint = c("UpDownDegrees", "TempFreq", "UpDownFreq", "UpDownMean", "UpDownVar",
    "UpDownMeanVar", "DegreesMean", "DegreesVar", "DegreesMeanVar",
    "UpDownMeanVarDegreesMeanVar", "UpDownMeanVarMagMeanVar"),
  penalty = "Manual",
  pen.value1 = 40,
  pen.value2 = 400,
  intervalseconds = 30,
  mininterval = 5,
  samplefreq = 100,
  filterorder = 2,
  boundaries = c(0.5, 5),
  Rp = 3,
  plot.it = FALSE,
  hysteresis = 0.1,
  stft_win = 10,
  plot_changepoints = FALSE,
  plot_changepoints_outputfile = "Changepoint",
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getGENEAsegments_+3A_testfile">testfile</code></td>
<td>
<p>character vector stating path to a GENEActiv bin file, or a folder containing GENEActiv bin files.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_start">start</code></td>
<td>
<p>Where to start reading observations.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_end">end</code></td>
<td>
<p>Where to end reading observations.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_use.timestamps">Use.Timestamps</code></td>
<td>
<p>To use timestamps as the start and end time values this has to be set to TRUE. (Default FALSE)</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_radians">radians</code></td>
<td>
<p>calculate degrees rotation in radians.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_keep_raw_data">keep_raw_data</code></td>
<td>
<p>Keep the raw data for calculating steps using stepcounter.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_mmap.load">mmap.load</code></td>
<td>
<p>Default is (.Machine$sizeof.pointer &gt;= 8). see <code><a href="mmap.html#topic+mmap">mmap</a></code> for more details</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_outputtoken">outputtoken</code></td>
<td>
<p>single character string to be appended to the file name
for saving the segmenation output (default '_segmentated').</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_outputdir">outputdir</code></td>
<td>
<p>The absolute or relative path to directory in which artifacts (plot and changes files) should be created, or NULL
(default &quot;GENEAclassification&quot;).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_datacols">datacols</code></td>
<td>
<p>a vector constructed 'column.summary' or 'default'. See <code><a href="#topic+segmentation">segmentation</a></code> for details.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_decimalplaces">decimalplaces</code></td>
<td>
<p>named numeric vector of decimal places with which to
round summary columns. <code>NULL</code> returns unrounded values.
The length 1 character vector 'default' applies default roundings: </p>

<ul>
<li><p> Start.Time = 0,
</p>
</li>
<li><p> Degrees.mean = 3,
</p>
</li>
<li><p> Degrees.median = 3,
</p>
</li>
<li><p> Degrees.var = 3,
</p>
</li>
<li><p> Degrees.sd = 3,
</p>
</li>
<li><p> Degrees.mad = 3,
</p>
</li>
<li><p> Magnitude.mean = 3,
</p>
</li>
<li><p> UpDown.mean = 3,
</p>
</li>
<li><p> UpDown.median = 3,
</p>
</li>
<li><p> UpDown.var = 3
</p>
</li>
<li><p> UpDown.sd = 3,
</p>
</li>
<li><p> UpDown.mad = 3,
</p>
</li>
<li><p> Principal.Frequency.median = 3,
</p>
</li>
<li><p> Principal.Frequency.mad = 3,
</p>
</li>
<li><p> Principal.Frequency.ratio = 3,
</p>
</li>
<li><p> Principal.Frequency.sumdiff = 3,
</p>
</li>
<li><p> Principal.Frequency.meandiff = 3,
</p>
</li>
<li><p> Principal.Frequency.abssumdiff = 3,
</p>
</li>
<li><p> Principal.Frequency.sddiff = 3,
</p>
</li>
<li><p> Light.mean = 0,
</p>
</li>
<li><p> Light.max = 0,
</p>
</li>
<li><p> Temp.mean = 1,
</p>
</li>
<li><p> Temp.sumdiff = 3
</p>
</li>
<li><p> Temp.meandiff = 3
</p>
</li>
<li><p> Temp.abssumdiff = 3
</p>
</li>
<li><p> Temp.sddiff = 3
</p>
</li>
<li><p> Step.count = 0
</p>
</li>
<li><p> Step.sd = 1
</p>
</li>
<li><p> Step.mean = 0
</p>
</li>
<li><p> Step.GENEAamplitude = 3
</p>
</li>
<li><p> Step.GENEAwavelength = 3
</p>
</li>
<li><p> Step.GENEAdistance = 3
</p>
</li></ul>

<p>This can be changed by using a named list. e.g decimalplaces = c(Start.Time = 2, Degrees.mean = 4).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_filterwave">filterWave</code></td>
<td>
<p>single logical, should a smoothing filter from <code><a href="waveslim.html#topic+wave.filter">wave.filter</a></code> be applied? (default FALSE).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_filtername">filtername</code></td>
<td>
<p>single character, the name of the wavelet to use for smoothing
when filter is TRUE. (default &quot;haar&quot;) Passed to <code>link[waveslim]{wave.filter}</code>.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_j">j</code></td>
<td>
<p>single numeric, the level to which to smooth. Passed to <code>link[waveslim]{wave.filter}</code> (default 8).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_changepoint">changepoint</code></td>
<td>
<p>defines the change point analysis to use. UpDownDegrees performs the change point analysis on the variance of arm elevation and wrist rotation. 
TempFreq performs a change point on the variance in the temperature and frequency (Typically better for sleep behaviours).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_penalty">penalty</code></td>
<td>
<p>single character, the penalty to use for changepoint detection. default (&quot;SIC&quot;).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_pen.value1">pen.value1</code></td>
<td>
<p>Value of the type 1 error required when penalty is &quot;Asymptotic&quot;.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_pen.value2">pen.value2</code></td>
<td>
<p>Default set as NULL and so equals pen.value1 if no input.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_intervalseconds">intervalseconds</code></td>
<td>
<p>An integer number of seconds between 5 and 30 during which at most one changepoint may occur.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_mininterval">mininterval</code></td>
<td>
<p>single numeric that defines the smallest changepoint initially found. Passed to <code><a href="changepoint.html#topic+cpt.var">cpt.var</a></code> as the variable minseglen</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_samplefreq">samplefreq</code></td>
<td>
<p>The sampling frequency of the data, in hertz,
when calculating the step number. (default 100).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_filterorder">filterorder</code></td>
<td>
<p>The order of the filter applied with respect to the butter or cheby options. 
See <code><a href="signal.html#topic+cheby1">cheby1</a></code> or <code><a href="signal.html#topic+butter">butter</a></code>.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_boundaries">boundaries</code></td>
<td>
<p>to pass to the filter in the step counting algorithm.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_rp">Rp</code></td>
<td>
<p>the decibel level that the cheby filter takes. See <code><a href="signal.html#topic+cheby1">cheby1</a></code>.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_plot.it">plot.it</code></td>
<td>
<p>single logical, Creates a plot showing the zero crossings counted by the step counting algorithm#' @param Centre Centres the xz signal about 0 when set to True.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_hysteresis">hysteresis</code></td>
<td>
<p>The hysteresis applied after zero crossing. (default 100mg)</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_stft_win">stft_win</code></td>
<td>
<p>numeric for the window to calculate the frequency of an event using the <code><a href="GENEAread.html#topic+stft">stft</a></code> function.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_plot_changepoints">plot_changepoints</code></td>
<td>
<p>single logical, Creates a plot displaying the changepoint locations.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_plot_changepoints_outputfile">plot_changepoints_outputfile</code></td>
<td>
<p>The name of the png file created that shows the change points on a positionals plots.</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_verbose">verbose</code></td>
<td>
<p>single logical should additional progress reporting be printed at the console? (default TRUE).</p>
</td></tr>
<tr><td><code id="getGENEAsegments_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to <code><a href="#topic+dataImport">dataImport</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code> and other functions with these functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>segmented data are returned
</p>


<h3>See Also</h3>

<p>The returned object can be interrogated with <code><a href="#topic+head.GENEAbin">head</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## testfile = file.path(system.file(package = "GENEAread"),
##                                  "binfile",
##                                  "TESTfile.bin")
## 
## segData &lt;- getGENEAsegments(testfile = testfile,
##                             outputdir = file.path(tempdir(), "GENEAclassification"),    
##                             changepoint = "UpDownDegrees",
##                             pen.value1 = 1,
##                             pen.value2 = 1)
## head(segData)
## list.files(file.path(tempdir(), "GENEAclassification"))
</code></pre>

<hr>
<h2 id='head.GENEAbin'>Get features of a GENEActiv bin data object.</h2><span id='topic+head.GENEAbin'></span>

<h3>Description</h3>

<p>Shows the first n elements of a GENEActiv bin (list) data object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'GENEAbin'
head(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="head.GENEAbin_+3A_x">x</code></td>
<td>
<p>GENEActiv bin list object</p>
</td></tr>
<tr><td><code id="head.GENEAbin_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list showing the first part of each list element.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>temp &lt;- list(Data = matrix(rnorm(40), ncol = 4), 
    UpDown = rnorm(10), 
    Degrees = sample(-90:90, 10),
    Time = 1:10, 
    Light = runif(10),
    Temp = rep(20, 10),
    Magnitude = runif(10), 
    Serial = "012345",
    RawData = matrix(rnorm(700), ncol = 7),
    Freq = 100)
class(temp) &lt;- c("list", "GENEAbin")
head(x = temp)
</code></pre>

<hr>
<h2 id='impact'>impact function</h2><span id='topic+impact'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impact(x, threshold = 2.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="impact_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="impact_+3A_threshold">threshold</code></td>
<td>
<p>cutoff point above which acceleration is considered</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   Freq &lt;- 100
   x &lt;- c(1,1.5,2.6,2,3,3,1,1,1)
   impact(x)
</code></pre>

<hr>
<h2 id='inGroup'>Which values are in a new group?</h2><span id='topic+inGroup'></span>

<h3>Description</h3>

<p>Choose elements at each step.
Used by <code><a href="#topic+features">features</a></code> to identify unique components of splits table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inGroup(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inGroup_+3A_x">x</code></td>
<td>
<p>numeric vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical vector with length x
</p>


<h3>Examples</h3>

<pre><code class='language-R'>GENEAclassify:::inGroup(x = rep(-1, 5))
x1 &lt;- c(1, 1, 1, 2, 2, 2, 2, 3, 3)
x1t &lt;- GENEAclassify:::inGroup(x = x1)
x1[x1t]
</code></pre>

<hr>
<h2 id='levels.GENEA'>Get levels of a GENEA rpart response</h2><span id='topic+levels.GENEA'></span>

<h3>Description</h3>

<p>Shows the levels used in a GENEA (rpart) fit object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'GENEA'
levels(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="levels.GENEA_+3A_x">x</code></td>
<td>
<p>GENEA rpart object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector naming levels classified by GENEA rpart fit
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(trainingFit)
levels(x = trainingFit)
</code></pre>

<hr>
<h2 id='meandiff'>Finding the mean of the differences</h2><span id='topic+meandiff'></span>

<h3>Description</h3>

<p>Finding the mean of the differences
Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meandiff(x, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="meandiff_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="meandiff_+3A_na.rm">na.rm</code></td>
<td>
<p>Remove the na values in the vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   meandiff(x = tmp1)
</code></pre>

<hr>
<h2 id='MeanDir'>MeanDir function</h2><span id='topic+MeanDir'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MeanDir(rotation, na.rm = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MeanDir_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
<tr><td><code id="MeanDir_+3A_rotation">rotation</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   MeanDir(tmp1)
</code></pre>

<hr>
<h2 id='radians'>Extract rotation time series in radians</h2><span id='topic+radians'></span>

<h3>Description</h3>

<p>Extract data relating to the rotation component.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>radians(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="radians_+3A_x">x</code></td>
<td>
<p>data output from get.intervals</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Called by <code>dataImport</code>.
Note: the &quot;+ 1&quot; has been removed from the original implementation.
</p>


<h3>Value</h3>

<p>The degrees (rotation) data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d1 = matrix(c(100, 101, -0.79, -0.86, -0.17, -0.14, 0.53, 0.46), 
        nrow = 2, ncol = 4)
   colnames(d1) = c("timestamp", "x", "y", "z")
   degrees(x = d1)
</code></pre>

<hr>
<h2 id='removeShortSegments'>Remove Short Segments from Data</h2><span id='topic+removeShortSegments'></span>

<h3>Description</h3>

<p>Remove the short segments from the data based on the estimated 
variance in <code><a href="#topic+changeTimes">changeTimes</a></code>. If variance is small, 
segments specified may be retained.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeShortSegments(shortduration, changes, variance, time)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeShortSegments_+3A_shortduration">shortduration</code></td>
<td>
<p>integer vector, the elements that are determined to have short durations</p>
</td></tr>
<tr><td><code id="removeShortSegments_+3A_changes">changes</code></td>
<td>
<p>integer vector, the estimated change points</p>
</td></tr>
<tr><td><code id="removeShortSegments_+3A_variance">variance</code></td>
<td>
<p>numeric vector, the variance of the parameter estimate for the cpt object</p>
</td></tr>
<tr><td><code id="removeShortSegments_+3A_time">time</code></td>
<td>
<p>numeric vector, the time vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with elements:</p>

<ol>
<li><p> changes, the new change points, 
</p>
</li>
<li><p> times, the new times at the start and end of each segment, and 
</p>
</li>
<li><p> duration, the new durations of each segment
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(changepoint)
set.seed(45265)
tm0 &lt;- 1001:1060
d0 &lt;- round(c(cumsum(runif(n = 20) * 2), 
    20:1 + rnorm(n = 20), 
    runif(n = 20) * 10))  
## identify changes in variance
c0 &lt;- cpt.var(d0, penalty = "SIC", pen.value = 1e-3, method = "PELT")
## times of changepoints
cp0 &lt;- cpts(c0)
t0 &lt;- c(tm0[1], tm0[sort(cp0)], tm0[60])
sdur0 &lt;- which(diff(t0) &lt; 10)
v0 &lt;- param.est(c0)$variance
## Note that variance for early changepoints is low
## so they are not removed.
GENEAclassify:::removeShortSegments(shortduration = sdur0, 
    changes = cp0, 
    variance = v0, 
    time = tm0)
</code></pre>

<hr>
<h2 id='sddiff'>Finding the standard deviation of the differences</h2><span id='topic+sddiff'></span>

<h3>Description</h3>

<p>Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sddiff(x, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sddiff_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="sddiff_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   sddiff(x = tmp1)
</code></pre>

<hr>
<h2 id='segmentation'>Perform Segmentation on GENEActiv Accelerometer Data</h2><span id='topic+segmentation'></span>

<h3>Description</h3>

<p>Perform segmentation of Activinsights accelerometer data.
Data are smoothed by the second, or by 10 data points,
whichever number of records is greater.
</p>
<p>Filtering is performed by tools from <span class="pkg">waveslim</span>.
Options are passed to <code><a href="waveslim.html#topic+wavelet.filter">wavelet.filter</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>segmentation(
  data,
  outputfile = "detectedChanges",
  outputdir = "GENEAclassification",
  datacols = "default",
  decimalplaces = "default",
  filterWave = FALSE,
  filtername = "haar",
  j = 8,
  changepoint = c("UpDownDegrees", "TempFreq", "UpDownFreq", "UpDownMean", "UpDownVar",
    "UpDownMeanVar", "DegreesMean", "DegreesVar", "DegreesMeanVar",
    "UpDownMeanVarDegreesMeanVar", "UpDownMeanVarMagMeanVar", "RadiansMean",
    "RadiansVar", "RadiansMeanVar", "UpDownMeanDegreesVar"),
  penalty = "Manual",
  pen.value1 = 40,
  pen.value2 = 400,
  intervalseconds = 30,
  mininterval = 5,
  samplefreq = 100,
  filterorder = 2,
  boundaries = c(0.5, 5),
  Rp = 3,
  plot.it = FALSE,
  hysteresis = 0.1,
  stft_win = 10,
  verbose = FALSE,
  verbose_timer = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="segmentation_+3A_data">data</code></td>
<td>
<p>the GENEActiv bin object to be segmented which should be the output
of the <code><a href="#topic+dataImport">dataImport</a></code> function.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_outputfile">outputfile</code></td>
<td>
<p>single character, file name for saving the segmentation output as CSV
(and if plot.it is TRUE, corresponding plot PNG). If NULL, create no files.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_outputdir">outputdir</code></td>
<td>
<p>single character, the absolute or relative path to directory in which
plot and changes files) should be created, or NULL
(default &quot;GENEAclassification&quot;). Ignored if outputfile is NULL.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_datacols">datacols</code></td>
<td>
<p>character vector constructed 'column.summary'.
This object specifies the data and summary to output for the classification.
The first part of each element must name column in the GENEAbin datasets specified by filePath.
Derived columns may also be selected:</p>

<ul>
<li><p> Step (zero-crossing step counter method),
</p>
</li>
<li><p> Principal.Frequency.
</p>
</li></ul>

<p>The second should be the name of a function that evaluates to lenth one.
The functions must contain only alphabetical characters
(no numbers, underscores or punctuation).
The default matrix, specified using the length 1 character vector
<code>'default'</code> is: </p>

<ul>
<li><p> UpDown.mean
</p>
</li>
<li><p> UpDown.sd
</p>
</li>
<li><p> UpDown.mad
</p>
</li>
<li><p> Degrees.mean
</p>
</li>
<li><p> Degrees.var
</p>
</li>
<li><p> Degrees.sd
</p>
</li>
<li><p> Light.mean
</p>
</li>
<li><p> Light.max
</p>
</li>
<li><p> Temp.mean
</p>
</li>
<li><p> Temp.sumdiff
</p>
</li>
<li><p> Temp.meandiff
</p>
</li>
<li><p> Temp.abssumdiff
</p>
</li>
<li><p> Temp.sddiff
</p>
</li>
<li><p> Magnitude.mean
</p>
</li>
<li><p> Step.GENEAcount
</p>
</li>
<li><p> Step.sd
</p>
</li>
<li><p> Step.mean
</p>
</li>
<li><p> Step.GENEAamplitude
</p>
</li>
<li><p> Step.GENEAwavelength
</p>
</li>
<li><p> Principal.Frequency.median
</p>
</li>
<li><p> Principal.Frequency.mad
</p>
</li>
<li><p> Principal.Frequency.ratio
</p>
</li>
<li><p> Principal.Frequency.sumdiff
</p>
</li>
<li><p> Principal.Frequency.meandiff
</p>
</li>
<li><p> Principal.Frequency.abssumdiff
</p>
</li>
<li><p> Principal.Frequency.sddiff
</p>
</li></ul>
</td></tr>
<tr><td><code id="segmentation_+3A_decimalplaces">decimalplaces</code></td>
<td>
<p>named numeric vector of decimal places with which to
round summary columns. <code>NULL</code> returns unrounded values.
The length 1 character vector 'default' applies default roundings: </p>

<ul>
<li><p> Start.Time = 0,
</p>
</li>
<li><p> Degrees.mean = 3,
</p>
</li>
<li><p> Degrees.median = 3,
</p>
</li>
<li><p> Degrees.var = 3,
</p>
</li>
<li><p> Degrees.sd = 3,
</p>
</li>
<li><p> Degrees.mad = 3,
</p>
</li>
<li><p> Magnitude.mean = 3,
</p>
</li>
<li><p> UpDown.mean = 3,
</p>
</li>
<li><p> UpDown.median = 3,
</p>
</li>
<li><p> UpDown.var = 3
</p>
</li>
<li><p> UpDown.sd = 3,
</p>
</li>
<li><p> UpDown.mad = 3,
</p>
</li>
<li><p> Principal.Frequency.median = 3,
</p>
</li>
<li><p> Principal.Frequency.mad = 3,
</p>
</li>
<li><p> Principal.Frequency.ratio = 3,
</p>
</li>
<li><p> Principal.Frequency.sumdiff = 3,
</p>
</li>
<li><p> Principal.Frequency.meandiff = 3,
</p>
</li>
<li><p> Principal.Frequency.abssumdiff = 3,
</p>
</li>
<li><p> Principal.Frequency.sddiff = 3,
</p>
</li>
<li><p> Light.mean = 0,
</p>
</li>
<li><p> Light.max = 0,
</p>
</li>
<li><p> Temp.mean = 1,
</p>
</li>
<li><p> Temp.sumdiff = 3
</p>
</li>
<li><p> Temp.meandiff = 3
</p>
</li>
<li><p> Temp.abssumdiff = 3
</p>
</li>
<li><p> Temp.sddiff = 3
</p>
</li>
<li><p> Step.GENEAcount = 0
</p>
</li>
<li><p> Step.sd = 1
</p>
</li>
<li><p> Step.mean = 0
</p>
</li></ul>
</td></tr>
<tr><td><code id="segmentation_+3A_filterwave">filterWave</code></td>
<td>
<p>single logical, should a smoothing filter from <code><a href="waveslim.html#topic+wave.filter">wave.filter</a></code> be applied? (default FALSE).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_filtername">filtername</code></td>
<td>
<p>single character, the name of the wavelet to use for smoothing
when filter is TRUE. (default &quot;haar&quot;) Passed to <code>link[waveslim]{wave.filter}</code>.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_j">j</code></td>
<td>
<p>single numeric, the level to which to smooth. Passed to <code>link[waveslim]{wave.filter}</code> (default 8).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_changepoint">changepoint</code></td>
<td>
<p>defines the change point analysis to use. UpDownDegrees performs the change point analysis on the variance of arm elevation and wrist rotation. 
TempFreq performs a change point on the variance in the temeprature and frequency (Typically better for sleep behaviours).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_penalty">penalty</code></td>
<td>
<p>single characgter, the penalty to use for changepoint detection. default (&quot;SIC&quot;).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_pen.value1">pen.value1</code></td>
<td>
<p>Value of the type 1 error required when penalty is &quot;Asymptotic&quot;.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_pen.value2">pen.value2</code></td>
<td>
<p>Default set as NULL and so equals pen.value1 if no input.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_intervalseconds">intervalseconds</code></td>
<td>
<p>An integer number of seconds between 5 and 30 during which at most one changepoint may occur.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_mininterval">mininterval</code></td>
<td>
<p>single numeric that defines the smallest changepoint initially found. Passed to <code><a href="changepoint.html#topic+cpt.var">cpt.var</a></code> as the variable minseglen</p>
</td></tr>
<tr><td><code id="segmentation_+3A_samplefreq">samplefreq</code></td>
<td>
<p>The sampling frequency of the data, in hertz,
when calculating the step number. (default 100).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_filterorder">filterorder</code></td>
<td>
<p>The order of the filter applied with respect to the butter or cheby options if stepCounter is used. The order of the moving average filter if step counter 2 is used.
See <code><a href="signal.html#topic+cheby1">cheby1</a></code> or <code><a href="signal.html#topic+butter">butter</a></code>.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_boundaries">boundaries</code></td>
<td>
<p>to pass to the filter in the step counting algorithm.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_rp">Rp</code></td>
<td>
<p>the decibel level that the cheby filter takes. See <code><a href="signal.html#topic+cheby1">cheby1</a></code>.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_plot.it">plot.it</code></td>
<td>
<p>single logical, Creates a plot showing the zero crossings counted by the step counting algorithm#' @param Centre Centres the xz signal about 0 when set to True.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_hysteresis">hysteresis</code></td>
<td>
<p>The hysteresis applied after zero crossing. (default 100mg)</p>
</td></tr>
<tr><td><code id="segmentation_+3A_stft_win">stft_win</code></td>
<td>
<p>numeric for the window to calculate the frequency of an event using the <code><a href="GENEAread.html#topic+stft">stft</a></code> function.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_verbose">verbose</code></td>
<td>
<p>single logical to print additional progress reporting (default FALSE).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_verbose_timer">verbose_timer</code></td>
<td>
<p>single logical tp print additional progress reporting on time for each section of the function (default FALSE).</p>
</td></tr>
<tr><td><code id="segmentation_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to <code><a href="#topic+dataImport">dataImport</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code> and other functions with these functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Performs the segmentation procedure on the provided elevation data.
Optionally a wavelet filter is first applied to smooth the data.
The number of changes occuring in a given number of seconds may be controlled using the
intervalseconds argument. Changes will be removed based on which segments are the closest match in terms of variance.
A series of features for each of the segments will then be calculated and returned as a csv file.
</p>


<h3>Value</h3>

<p>The segment data are returned invisibly. This data frame has columns:</p>

<ul>
<li><p> Serial.Number
</p>
</li>
<li><p> Start.Time
</p>
</li>
<li><p> Segment.Start.Time
</p>
</li>
<li><p> Segment.Duration
</p>
</li>
<li><p> UpDown.median
</p>
</li>
<li><p> UpDown.var
</p>
</li>
<li><p> Degrees.median
</p>
</li>
<li><p> Degrees.mad
</p>
</li></ul>

<p>In addition, the requested columns are included.
Optionally, as a side effect a csv file is returned listing all of the segments
found in the data along with a variety of features for that segment.
Optionally a png file plotting the data and the
detected changes can also be produced.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Load the data to segment keeping only the first quarter of the data
## library(GENEAread)
## testfile = file.path(system.file(package = "GENEAread"),
##                                  "binfile",
##                                  "TESTfile.bin")
## segData &lt;- dataImport(binfile = testfile,
##     downsample = 100, start = 0, end = 0.25)
## head(segData)
### Run loaded data through segmentation function
## segment &lt;- segmentation(data = segData, outputfile = NULL)
## head(segment)
## segment2 &lt;- segmentation(data = segData, outputfile = NULL,
##     datacols = "Degrees.skew")
## head(segment2)
</code></pre>

<hr>
<h2 id='sod'>Finding the sum of the differences</h2><span id='topic+sod'></span>

<h3>Description</h3>

<p>Adding in a feedback call sumdiff that finds the difference of a function and then sums this difference. 
Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sod(x, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sod_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="sod_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   sumdiff(x = tmp1)
</code></pre>

<hr>
<h2 id='stepCounter'>Step Counter</h2><span id='topic+stepCounter'></span>

<h3>Description</h3>

<p>Function to calculate the number and variance of the steps in the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stepCounter(
  AccData,
  samplefreq = 100,
  filterorder = 2,
  boundaries = c(0.5, 5),
  Rp = 3,
  plot.it = FALSE,
  hysteresis = 0.05,
  verbose = verbose,
  fun = c("GENEAcount", "mean", "sd", "mad")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stepCounter_+3A_accdata">AccData</code></td>
<td>
<p>The data to use for calculating the steps. This should either an AccData object or a vector.</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_samplefreq">samplefreq</code></td>
<td>
<p>The sampling frequency of the data, in hertz,
when calculating the step number (default 100).</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_filterorder">filterorder</code></td>
<td>
<p>single integer, order of the Chebyshev bandpass filter,
passed to argument n of <code><a href="signal.html#topic+cheby1">cheby1</a></code>.</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_boundaries">boundaries</code></td>
<td>
<p>length 2 numeric vector specifying lower and upper bounds
of Chebychev filter (default <code>c(0.5, 5)</code> Hz),
passed to argument W of <code><a href="signal.html#topic+butter">butter</a></code> or <code><a href="signal.html#topic+cheby1">cheby1</a></code>.</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_rp">Rp</code></td>
<td>
<p>the decibel level that the cheby filter takes, see <code><a href="signal.html#topic+cheby1">cheby1</a></code>.</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_plot.it">plot.it</code></td>
<td>
<p>single logical create plot of data and zero crossing points (default <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_hysteresis">hysteresis</code></td>
<td>
<p>The hysteresis applied after zero crossing. (default 100mg)</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_verbose">verbose</code></td>
<td>
<p>single logical should additional progress reporting be printed at the console? (default FALSE).</p>
</td></tr>
<tr><td><code id="stepCounter_+3A_fun">fun</code></td>
<td>
<p>character vector naming functions by which to summarize steps.
&quot;count&quot; is an internally implemented summarizing function that returns step count.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector with length fun.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d1 &lt;- sin(seq(0.1, 100, 0.1))/2 + rnorm(1000)/10 + 1
Steps4 = stepCounter(d1)
length(Steps4)
mean(Steps4)
sd(Steps4)
plot(Steps4)
</code></pre>

<hr>
<h2 id='sumdiff'>Finding the sum of the differences</h2><span id='topic+sumdiff'></span>

<h3>Description</h3>

<p>Adding in a feedback call sumdiff that finds the difference of a function and then sums this difference. 
Called by <code>segmentation</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sumdiff(x, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sumdiff_+3A_x">x</code></td>
<td>
<p>vector of numeric values</p>
</td></tr>
<tr><td><code id="sumdiff_+3A_na.rm">na.rm</code></td>
<td>
<p>single logical should missing values be removed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single value data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   tmp1 &lt;- c(1,3,2,6,4,5,3,9,10)
   sumdiff(x = tmp1)
</code></pre>

<hr>
<h2 id='summariseCols'>Perform summary of vectors in the parent frame</h2><span id='topic+summariseCols'></span>

<h3>Description</h3>

<p>Parses a matrix of object/summary instructions,
and applies the specified function to the object.
The object(s) named in colfun must exist in a parent frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summariseCols(colfun, nfr = 3L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summariseCols_+3A_colfun">colfun</code></td>
<td>
<p>a character matrix with two columns.
The first should be a function name, the second a column in data.</p>
</td></tr>
<tr><td><code id="summariseCols_+3A_nfr">nfr</code></td>
<td>
<p>single positive integer number of frames up to look for named variables (default 3)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with column names constructed from colfun
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A &lt;- split(1:10, rep(1, each = 10))
dataCols &lt;- matrix(c("A", "mean",
        "A", "median",
        "A", "var"), ncol = 2, byrow = TRUE)
GENEAclassify:::summariseCols(colfun = dataCols)
A &lt;- split(1:10, rep(1:2, each = 5))
GENEAclassify:::summariseCols(colfun = dataCols)
</code></pre>

<hr>
<h2 id='TrainingData'>Example Training Data set</h2><span id='topic+TrainingData'></span>

<h3>Description</h3>

<p>A manually classified training data set provided with the package.
</p>


<h3>Format</h3>

<p>Manually classified segmented data that can be used to build a classification model.
</p>


<h3>Source</h3>

<p>Manually classified by Actvinsights.
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+levels.GENEA">levels</a>"</code> <code><a href="#topic+features">features</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(TrainingData)
class(TrainingData)
</code></pre>

<hr>
<h2 id='trainingFit'>Example classification tree</h2><span id='topic+trainingFit'></span>

<h3>Description</h3>

<p>rpart object declaring the decision tree for the classification of GENEActiv bin data into typical groups.
</p>


<h3>Format</h3>

<p>An <code>rpart</code> object with class <code>GENEA</code> containing the decision 
tree information required for prediction.
</p>


<h3>Source</h3>

<p>Output of <code>createGENEAmodel</code> on experimental training data.
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+levels.GENEA">levels</a>"</code> <code><a href="#topic+features">features</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(trainingFit)
class(trainingFit)
levels(trainingFit)
features(trainingFit)
plot(trainingFit)
text(trainingFit, cex = 0.5)
</code></pre>

<hr>
<h2 id='updown'>Extract data relating to the up/down component</h2><span id='topic+updown'></span>

<h3>Description</h3>

<p>Extract up/down time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updown(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updown_+3A_x">x</code></td>
<td>
<p>data output from <code>get.intervals</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extract code from <code>positionals</code> to perform data conversion to up/down time series.
Input is expected to be result of <code>get.intervals</code>.
</p>


<h3>Value</h3>

<p>The up/down vertical elevation data (y-axis)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    d1 = matrix(c(100, 101, -0.79, -0.86, -0.17, -0.14, 0.53, 0.46), 
        nrow = 2, ncol = 4)
    colnames(d1) = c("timestamp", "x", "y", "z")
    updown(x = d1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
