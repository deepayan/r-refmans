<!DOCTYPE html><html lang="en-US"><head><title>Help for package rpyANTs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rpyANTs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ants'><p>Get 'ANTsPy' module</p></a></li>
<li><a href='#ants_apply_transforms'><p>Apply a transform list to map an image from one domain to another</p></a></li>
<li><a href='#ants_apply_transforms_to_points'><p>Apply a transform list to map points from one domain to another</p></a></li>
<li><a href='#ants_available'><p>Check if 'ANTs' is available</p></a></li>
<li><a href='#ants_motion_correction'><p>Motion correction</p></a></li>
<li><a href='#ants_plot'><p>Plot single <code>'ANTsImage'</code></p></a></li>
<li><a href='#ants_plot_grid'><p>Plot multiple <code>'ANTsImage'</code></p></a></li>
<li><a href='#ants_registration'><p>Register two images using 'ANTs'</p></a></li>
<li><a href='#ants_resample_image'><p>Resample image</p></a></li>
<li><a href='#antspynet'><p>Get <code>'ANTsPyNet'</code> module</p></a></li>
<li><a href='#antspynet_brain_extraction'><p>Extract brain and strip skull</p></a></li>
<li><a href='#antspynet_preprocess_brain_image'><p>Process brain image prior to segmentation</p></a></li>
<li><a href='#antspynet_segmentation'><p>Imaging segmentation using <code>antspynet</code></p></a></li>
<li><a href='#as_ANTsImage'><p>Load data as <code>'ANTsImage'</code> class</p></a></li>
<li><a href='#as_ANTsTransform'><p>Convert to <code>'ANTsTransform'</code></p></a></li>
<li><a href='#correct_intensity'><p>Truncate and correct 'MRI' intensity</p></a></li>
<li><a href='#ensure_template'><p>Ensure the template directory is downloaded</p></a></li>
<li><a href='#halpern_preprocess'><p>'ANTs' functions for 'Halpern' lab</p></a></li>
<li><a href='#install_ants'><p>Install 'ANTs' via 'ANTsPy'</p></a></li>
<li><a href='#is_affine3D'><p>Check if an object is a 3D 'affine' transform matrix</p></a></li>
<li><a href='#py'><p>Get 'Python' main process environment</p></a></li>
<li><a href='#py_builtin'><p>Get 'Python' built-in object</p></a></li>
<li><a href='#py_list'><p>List in 'Python'</p></a></li>
<li><a href='#py_slice'><p>Slice index in 'Python' arrays</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#t1_preprocess'><p>Process 'T1' image</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>An Alternative Advanced Normalization Tools ('ANTs')</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.4</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Provides portable access from 'R' to biomedical image processing toolbox 
    'ANTs' by Avants et al. (2009) &lt;<a href="https://doi.org/10.54294%2Fuvnhin">doi:10.54294/uvnhin</a>&gt; via seamless
    integration with the 'Python' implementation 'ANTsPy'. Allows biomedical 
    images to be processed in 'Python' and analyzed in 'R', and vice versa 
    via shared memory. See 'citation("rpyANTs")' for more reference information.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, rpymat (&ge; 0.1.6), reticulate (&ge; 1.26), RNifti (&ge;
1.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://dipterix.org/rpyANTs/">http://dipterix.org/rpyANTs/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dipterix/rpyANTs/issues">https://github.com/dipterix/rpyANTs/issues</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>For the rpyANTs package - Zhengjia Wang; For ANTs -
ConsortiumOfANTS; For ANTsPy - ANTs Contributors.</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-17 01:17:04 UTC; dipterix</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhengjia Wang [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhengjia Wang &lt;dipterix.wang@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-17 03:20:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='ants'>Get 'ANTsPy' module</h2><span id='topic+ants'></span><span id='topic+load_ants'></span>

<h3>Description</h3>

<p>Get 'ANTsPy' module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants

load_ants(force = FALSE, error_if_missing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_+3A_force">force</code></td>
<td>
<p>whether to force reloading <code>ants</code> module; default is false</p>
</td></tr>
<tr><td><code id="ants_+3A_error_if_missing">error_if_missing</code></td>
<td>
<p>whether to raise errors when the module is unable to
load; default is true.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'Python' module if successfully loaded. If <code>error_if_missing</code>
is set to false and module is unable to load, return <code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+antspynet">antspynet</a></code>
</p>

<hr>
<h2 id='ants_apply_transforms'>Apply a transform list to map an image from one domain to another</h2><span id='topic+ants_apply_transforms'></span>

<h3>Description</h3>

<p>See <code>ants$apply_transforms</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_apply_transforms(
  fixed,
  moving,
  transformlist,
  interpolator = c("linear", "nearestNeighbor", "gaussian", "genericLabel", "bSpline",
    "cosineWindowedSinc", "welchWindowedSinc", "hammingWindowedSinc",
    "lanczosWindowedSinc"),
  imagetype = 0L,
  whichtoinvert = NULL,
  compose = NULL,
  defaultvalue = 0,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_apply_transforms_+3A_fixed">fixed</code></td>
<td>
<p>fixed image defining domain into which the moving image is transformed</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_moving">moving</code></td>
<td>
<p>moving image to be mapped to fixed space</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_transformlist">transformlist</code></td>
<td>
<p>list of strings (path to transforms) generated by
<code><a href="#topic+ants_registration">ants_registration</a></code> where each transform is a file name</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_interpolator">interpolator</code></td>
<td>
<p>how to interpolate the image; see 'Usage'</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_imagetype">imagetype</code></td>
<td>
<p>integer: 0 (scalar), 1 (vector), 2 (tensor), 3 (time-series),
used when the fixed and moving images have different mode (dimensions)</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_whichtoinvert">whichtoinvert</code></td>
<td>
<p>either <code>NULL</code>, <code>None</code> ('Python'), or a vector
of logical with same length as <code>transformlist</code>; print
<code>ants$apply_transforms</code> to see detailed descriptions</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_compose">compose</code></td>
<td>
<p>optional character pointing to a valid file location</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_defaultvalue">defaultvalue</code></td>
<td>
<p>numerical value for mappings outside the image domain</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose application of transform</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_+3A_...">...</code></td>
<td>
<p>must be named arguments passing to further methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformed image. The image will share the same space as <code>fixed</code>.
</p>


<h3>See Also</h3>

<p><code>print(ants$apply_transforms)</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  fixed &lt;- as_ANTsImage( ants$get_ants_data('r16') )
  moving &lt;- as_ANTsImage( ants$get_ants_data('r64') )
  fixed &lt;- ants_resample_image(fixed, c(64, 64), TRUE, "linear")
  moving &lt;- ants_resample_image(moving, c(64,64), TRUE, "linear")

  mytx &lt;- ants_registration(fixed = fixed,
                            moving = moving,
                            type_of_transform = 'SyN')
  mywarpedimage &lt;- ants_apply_transforms(
    fixed = fixed,
    moving = moving,
    transformlist = mytx$fwdtransforms
  )

  par(mfrow = c(1,3), mar = c(0,0,3,0))
  pal &lt;- gray.colors(256)
  image(fixed[], asp = 1, axes = FALSE, col = pal,
        ylim = c(1, 0), main = "Reference")
  image(moving[], asp = 1, axes = FALSE, col = pal,
        ylim = c(1, 0), main = "Moving")
  image(mywarpedimage[], asp = 1, axes = FALSE, col = pal,
        ylim = c(1, 0), main = "Moving reg+resamp into Reference")
}

</code></pre>

<hr>
<h2 id='ants_apply_transforms_to_points'>Apply a transform list to map points from one domain to another</h2><span id='topic+ants_apply_transforms_to_points'></span>

<h3>Description</h3>

<p>See <code>ants$apply_transforms_to_points</code> for more details. Please note
point mapping goes the opposite direction of image mapping (see
<code><a href="#topic+ants_apply_transforms">ants_apply_transforms</a></code>), for both reasons of convention and
engineering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_apply_transforms_to_points(
  dim,
  points,
  transformlist,
  whichtoinvert = NULL,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_apply_transforms_to_points_+3A_dim">dim</code></td>
<td>
<p>dimensions of the transformation</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_to_points_+3A_points">points</code></td>
<td>
<p>data frame containing columns <code>'x'</code>, <code>'y'</code>,
<code>'z'</code>, <code>'t'</code> (depending on <code>dim</code>)</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_to_points_+3A_transformlist">transformlist</code></td>
<td>
<p>list of strings (path to transforms) generated by
<code><a href="#topic+ants_registration">ants_registration</a></code> where each transform is a file name</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_to_points_+3A_whichtoinvert">whichtoinvert</code></td>
<td>
<p>either <code>NULL</code>, <code>None</code> ('Python'), or a vector
of logical with same length as <code>transformlist</code>; print
<code>ants$apply_transforms_to_points</code> to see detailed descriptions</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_to_points_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose application of transform</p>
</td></tr>
<tr><td><code id="ants_apply_transforms_to_points_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformed points in data frame (R object)
</p>


<h3>See Also</h3>

<p><code>print(ants$apply_transforms_to_points)</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  fixed &lt;- as_ANTsImage( ants$get_ants_data('r16') )
  moving &lt;- as_ANTsImage( ants$get_ants_data('r27') )

  reg &lt;- ants_registration(
    fixed = fixed, moving = moving,
    type_of_transform = "antsRegistrationSyNRepro[a]")

  pts &lt;- data.frame(
    x = c(128, 127),
    y = c(101, 111)
  )

  ptsw = ants_apply_transforms_to_points(2, pts, reg$fwdtransforms)
  ptsw
}

</code></pre>

<hr>
<h2 id='ants_available'>Check if 'ANTs' is available</h2><span id='topic+ants_available'></span>

<h3>Description</h3>

<p>Check if 'ANTs' is available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_available(module = c("ants", "antspynet"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_available_+3A_module">module</code></td>
<td>
<p>either <code>'ants'</code> or <code>'antspynet'</code>; default is
<code>'ants'</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical, whether <code>'ANTs'</code> or <code>'ANTsPyNet'</code> is available
</p>


<h3>See Also</h3>

<p><code><a href="#topic+install_ants">install_ants</a></code>
</p>

<hr>
<h2 id='ants_motion_correction'>Motion correction</h2><span id='topic+ants_motion_correction'></span>

<h3>Description</h3>

<p>Print <code>ants$motion_correction</code> to see the original document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_motion_correction(
  x,
  fixed = NULL,
  type_of_transform = "BOLDRigid",
  mask = NULL,
  fdOffset = 50,
  outprefix = "",
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_motion_correction_+3A_x">x</code></td>
<td>
<p>input image, usually 'fMRI' series</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_fixed">fixed</code></td>
<td>
<p>fixed image to register all timepoints to</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_type_of_transform">type_of_transform</code></td>
<td>
<p>see <code><a href="#topic+ants_registration">ants_registration</a></code></p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_mask">mask</code></td>
<td>
<p>mask for image</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_fdoffset">fdOffset</code></td>
<td>
<p>offset value to use in frame-wise displacement calculation</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_outprefix">outprefix</code></td>
<td>
<p>save path</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose the messages</p>
</td></tr>
<tr><td><code id="ants_motion_correction_+3A_...">...</code></td>
<td>
<p>passed to registration methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Motion-corrected image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {
  fi &lt;- as_ANTsImage(ants$get_ants_data('ch2'))
  mytx &lt;- ants_motion_correction( fi )

  par(mfrow = c(1, 2), mar = c(1,1,1,1))
  image(fi[,,91], asp = 1, axes = FALSE)
  image(mytx$motion_corrected[,,91], asp = 1, axes = FALSE)
}

</code></pre>

<hr>
<h2 id='ants_plot'>Plot single <code>'ANTsImage'</code></h2><span id='topic+ants_plot'></span>

<h3>Description</h3>

<p>Plot single <code>'ANTsImage'</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_plot(
  image,
  overlay = NULL,
  blend = FALSE,
  alpha = 1,
  cmap = "Greys_r",
  overlay_cmap = "turbo",
  overlay_alpha = 0.9,
  vminol = NULL,
  vmaxol = NULL,
  cbar = FALSE,
  cbar_length = 0.8,
  cbar_dx = 0,
  cbar_vertical = TRUE,
  axis = 0,
  nslices = 12,
  slices = NULL,
  ncol = NULL,
  slice_buffer = NULL,
  black_bg = TRUE,
  bg_thresh_quant = 0.01,
  bg_val_quant = 0.99,
  domain_image_map = NULL,
  crop = FALSE,
  scale = FALSE,
  reverse = FALSE,
  title = "",
  title_fontsize = 20,
  title_dx = 0,
  title_dy = 0,
  filename = NULL,
  dpi = 500,
  figsize = 1.5,
  reorient = TRUE,
  resample = TRUE,
  force_agg = FALSE,
  close_figure = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_plot_+3A_image">image</code></td>
<td>
<p><code>'ANTsImage'</code>, or something can be converted to <code>'ANTsImage'</code></p>
</td></tr>
<tr><td><code id="ants_plot_+3A_overlay">overlay</code></td>
<td>
<p>overlay <code>'ANTsImage'</code>, can be <code>NULL</code>, optional</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_blend">blend</code></td>
<td>
<p>whether to blend image with overlay; default is false</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_cmap">cmap</code>, <code id="ants_plot_+3A_alpha">alpha</code></td>
<td>
<p>image color map and transparency</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_overlay_cmap">overlay_cmap</code>, <code id="ants_plot_+3A_overlay_alpha">overlay_alpha</code></td>
<td>
<p>overlay color map and transparency</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_vminol">vminol</code>, <code id="ants_plot_+3A_vmaxol">vmaxol</code></td>
<td>
<p>I could not find its usage</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_cbar">cbar</code></td>
<td>
<p>whether to draw color legend</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_cbar_length">cbar_length</code>, <code id="ants_plot_+3A_cbar_dx">cbar_dx</code>, <code id="ants_plot_+3A_cbar_vertical">cbar_vertical</code></td>
<td>
<p>legend position and size</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_axis">axis</code></td>
<td>
<p>see 'Details'</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_nslices">nslices</code>, <code id="ants_plot_+3A_slices">slices</code>, <code id="ants_plot_+3A_ncol">ncol</code></td>
<td>
<p>controls slice to show</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_slice_buffer">slice_buffer</code></td>
<td>
<p>performance</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_black_bg">black_bg</code>, <code id="ants_plot_+3A_bg_thresh_quant">bg_thresh_quant</code>, <code id="ants_plot_+3A_bg_val_quant">bg_val_quant</code></td>
<td>
<p>controls background</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_domain_image_map">domain_image_map</code></td>
<td>
<p>optional <code>'ANTsImage'</code></p>
</td></tr>
<tr><td><code id="ants_plot_+3A_crop">crop</code>, <code id="ants_plot_+3A_scale">scale</code>, <code id="ants_plot_+3A_reverse">reverse</code></td>
<td>
<p>whether to crop, scale, or reverse the image
according to background</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_title">title</code>, <code id="ants_plot_+3A_title_fontsize">title_fontsize</code>, <code id="ants_plot_+3A_title_dx">title_dx</code>, <code id="ants_plot_+3A_title_dy">title_dy</code></td>
<td>
<p>image title</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_filename">filename</code>, <code id="ants_plot_+3A_dpi">dpi</code>, <code id="ants_plot_+3A_figsize">figsize</code></td>
<td>
<p>needed when saving to file</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_reorient">reorient</code></td>
<td>
<p>whether to reorient to <code>'LAI'</code> before plotting;
default is true</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_resample">resample</code></td>
<td>
<p>whether to resample</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_force_agg">force_agg</code></td>
<td>
<p>whether to force graphic engine to use <code>'agg'</code> device;
default is false</p>
</td></tr>
<tr><td><code id="ants_plot_+3A_close_figure">close_figure</code></td>
<td>
<p>whether to close figure when returning the function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, images will be reoriented to <code>'LAI'</code> orientation before
plotting. So, if <code>axis=0</code>, the images will be ordered from the
left side of the brain to the right side of the brain. If <code>axis=1</code>,
the images will be ordered from the anterior (front) of the brain to
the posterior (back) of the brain. And if <code>axis=2</code>, the images will
be ordered from the inferior (bottom) of the brain to the superior (top)
of the brain.
</p>


<h3>Value</h3>

<p>Nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  img &lt;- ants$image_read(ants$get_ants_data('mni'))

  ants_plot(
    img, nslices = 12, black_bg = FALSE,
    bg_thresh_quant = 0.05, bg_val_quant = 1.0, axis = 2,
    cbar = TRUE, crop = TRUE, reverse = TRUE, cbar_vertical = FALSE,
    ncol = 4, title = "Axial view of MNI brain"
  )
}


</code></pre>

<hr>
<h2 id='ants_plot_grid'>Plot multiple <code>'ANTsImage'</code></h2><span id='topic+ants_plot_grid'></span>

<h3>Description</h3>

<p>R-friendly wrapper function for <code>ants$plot_grid</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_plot_grid(
  images,
  shape = NULL,
  slices = 0,
  axes = 2,
  figsize = 1,
  rpad = 0,
  cpad = 0,
  vmin = NULL,
  vmax = NULL,
  colorbar = TRUE,
  cmap = "Greys_r",
  title = "",
  tfontsize = 20,
  title_dx = 0,
  title_dy = 0,
  rlabels = NULL,
  rfontsize = 14,
  rfontcolor = "black",
  rfacecolor = "white",
  clabels = NULL,
  cfontsize = 14,
  cfontcolor = "black",
  cfacecolor = "white",
  filename = NULL,
  dpi = 400,
  transparent = TRUE,
  ...,
  force_agg = FALSE,
  close_figure = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_plot_grid_+3A_images">images</code></td>
<td>
<p>a single <code>'ANTsImage'</code>, list, or nested list of <code>'ANTsImage'</code></p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_shape">shape</code></td>
<td>
<p>shape of grid, default is using dimensions of <code>images</code></p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_slices">slices</code></td>
<td>
<p>length of one or equaling to length of <code>slices</code>, slice
number to plot</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_axes">axes</code></td>
<td>
<p><code>0</code> for <code>'sagittal'</code>, <code>1</code> for <code>'coronal'</code>,
<code>2</code> for <code>'axial'</code>; default is <code>2</code></p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_figsize">figsize</code>, <code id="ants_plot_grid_+3A_rpad">rpad</code>, <code id="ants_plot_grid_+3A_cpad">cpad</code>, <code id="ants_plot_grid_+3A_colorbar">colorbar</code>, <code id="ants_plot_grid_+3A_cmap">cmap</code>, <code id="ants_plot_grid_+3A_transparent">transparent</code></td>
<td>
<p>graphical parameters</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_vmin">vmin</code>, <code id="ants_plot_grid_+3A_vmax">vmax</code></td>
<td>
<p>value threshold for the image</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_title">title</code></td>
<td>
<p>title of figure</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_title_dx">title_dx</code>, <code id="ants_plot_grid_+3A_title_dy">title_dy</code>, <code id="ants_plot_grid_+3A_tfontsize">tfontsize</code></td>
<td>
<p>controls title margin and size</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_rlabels">rlabels</code>, <code id="ants_plot_grid_+3A_clabels">clabels</code></td>
<td>
<p>row and column labels</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_rfontsize">rfontsize</code>, <code id="ants_plot_grid_+3A_rfontcolor">rfontcolor</code>, <code id="ants_plot_grid_+3A_rfacecolor">rfacecolor</code>, <code id="ants_plot_grid_+3A_cfontsize">cfontsize</code>, <code id="ants_plot_grid_+3A_cfontcolor">cfontcolor</code>, <code id="ants_plot_grid_+3A_cfacecolor">cfacecolor</code></td>
<td>
<p>row
and column font size, color, and background color</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_filename">filename</code>, <code id="ants_plot_grid_+3A_dpi">dpi</code></td>
<td>
<p>parameters to save figures</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_...">...</code></td>
<td>
<p>passed to <code>ants$plot_grid</code>; make sure all entries are named</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_force_agg">force_agg</code></td>
<td>
<p>whether to force graphic engine to use <code>'agg'</code> device;
default is false</p>
</td></tr>
<tr><td><code id="ants_plot_grid_+3A_close_figure">close_figure</code></td>
<td>
<p>whether to close figure when returning the function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  image1 &lt;- ants$image_read(ants$get_ants_data('mni'))
  image2 &lt;- image1$smooth_image(1.0)
  image3 &lt;- image1$smooth_image(2.0)
  image4 &lt;- image1$smooth_image(3.0)

  ants_plot_grid(
    list(image1, image2, image3, image4),
    slices = 100, title = "4x1 Grid"
  )

  ants_plot_grid(
    list(image1, image2, image3, image4),
    shape = c(2, 2),
    slices = 100, title = "2x2 Grid"
  )
  ants_plot_grid(
    list(image1, image2, image3, image4),
    shape = c(2, 2), axes = c(0,1,2,1),
    slices = 100, title = "2x2 Grid (diff. anatomical slices)"
  )

}



</code></pre>

<hr>
<h2 id='ants_registration'>Register two images using 'ANTs'</h2><span id='topic+ants_registration'></span>

<h3>Description</h3>

<p>Register two images using 'ANTs'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_registration(
  fixed,
  moving,
  type_of_transform = "SyN",
  initial_transform = NULL,
  outprefix = tempfile(),
  mask = NULL,
  grad_step = 0.2,
  flow_sigma = 3,
  total_sigma = 0,
  aff_metric = c("mattes", "GC", "meansquares"),
  aff_sampling = 32,
  aff_random_sampling_rate = 0.2,
  syn_metric = c("mattes", "CC", "meansquares", "demons"),
  syn_sampling = 32,
  reg_iterations = c(40, 20, 0),
  aff_iterations = c(2100, 1200, 1200, 10),
  aff_shrink_factors = c(6, 4, 2, 1),
  aff_smoothing_sigmas = c(3, 2, 1, 0),
  write_composite_transform = FALSE,
  verbose = FALSE,
  smoothing_in_mm = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_registration_+3A_fixed">fixed</code></td>
<td>
<p>fixed image to which we register the moving image, can be
character path to 'NIfTI' image, or <code>'ANTsImage'</code> instance,
<code>'oro.nifti'</code> object, <code>'niftiImage'</code> from
package <code>'RNifti'</code>, or <code>'threeBrain.nii'</code> from package
<code>'threeBrain'</code>; see also <code><a href="#topic+as_ANTsImage">as_ANTsImage</a></code></p>
</td></tr>
<tr><td><code id="ants_registration_+3A_moving">moving</code></td>
<td>
<p>moving image to be mapped to fixed space; see also <code><a href="#topic+as_ANTsImage">as_ANTsImage</a></code></p>
</td></tr>
<tr><td><code id="ants_registration_+3A_type_of_transform">type_of_transform</code></td>
<td>
<p>a linear or non-linear registration type;
print <code>ants$registration</code> to see details</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_initial_transform">initial_transform</code></td>
<td>
<p>optional list of strings; transforms to apply prior
to registration</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_outprefix">outprefix</code></td>
<td>
<p>output file to save results</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_mask">mask</code></td>
<td>
<p>image mask; see also <code><a href="#topic+as_ANTsImage">as_ANTsImage</a></code></p>
</td></tr>
<tr><td><code id="ants_registration_+3A_grad_step">grad_step</code>, <code id="ants_registration_+3A_flow_sigma">flow_sigma</code>, <code id="ants_registration_+3A_total_sigma">total_sigma</code></td>
<td>
<p>optimization parameters</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_aff_metric">aff_metric</code></td>
<td>
<p>the metric for the 'affine' transformation, choices are
<code>'GC'</code>, <code>'mattes'</code>, <code>'meansquares'</code></p>
</td></tr>
<tr><td><code id="ants_registration_+3A_aff_sampling">aff_sampling</code>, <code id="ants_registration_+3A_aff_random_sampling_rate">aff_random_sampling_rate</code>, <code id="ants_registration_+3A_aff_iterations">aff_iterations</code>, <code id="ants_registration_+3A_aff_shrink_factors">aff_shrink_factors</code>, <code id="ants_registration_+3A_aff_smoothing_sigmas">aff_smoothing_sigmas</code></td>
<td>
<p>controls 'affine' transform</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_syn_metric">syn_metric</code></td>
<td>
<p>the metric for the <code>'SyN'</code> transformation, choices
are <code>'GC'</code>, <code>'mattes'</code>, <code>'meansquares'</code>, <code>'demons'</code></p>
</td></tr>
<tr><td><code id="ants_registration_+3A_syn_sampling">syn_sampling</code>, <code id="ants_registration_+3A_reg_iterations">reg_iterations</code></td>
<td>
<p>controls the <code>'SyN'</code> transform</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_write_composite_transform">write_composite_transform</code></td>
<td>
<p>whether the composite transform (and its
inverse, if it exists) should be written to an 'HDF5' composite file;
default is false</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_verbose">verbose</code></td>
<td>
<p>verbose the progress</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_smoothing_in_mm">smoothing_in_mm</code></td>
<td>
<p>logical, currently only impacts low dimensional
registration</p>
</td></tr>
<tr><td><code id="ants_registration_+3A_...">...</code></td>
<td>
<p>others passed to <code>ants$registration</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function family <code>ants_registration*</code> align images (specified by
<code>moving</code>) to <code>fixed</code>. Here are descriptions of the variations:
</p>

<dl>
<dt><code>ants_registration</code></dt><dd><p>Simple wrapper function for 'Python'
implementation <code>ants.registration</code>, providing various of registration
options</p>
</dd>
<dt><code>ants_registration_halpern1</code></dt><dd><p>Rigid-body registration designed
for 'Casey-Halpern' lab, mainly used for aligning 'MRI' to 'CT' (or the other
way around)</p>
</dd>
</dl>



<h3>Value</h3>

<p>A 'Python' dictionary of aligned images and transform files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {

  ants &lt;- load_ants()

  # check the python documentation here for detailed explanation
  print(ants$registration)

  # example to register
  fi &lt;- ants$image_read(ants$get_ants_data('r16'))
  mo &lt;- ants$image_read(ants$get_ants_data('r64'))

  # resample to speed up this example
  fi &lt;- ants$resample_image(fi, list(60L,60L), TRUE, 0L)
  mo &lt;- ants$resample_image(mo, list(60L,60L), TRUE, 0L)

  # SDR transform
  transform &lt;- ants_registration(
    fixed=fi, moving=mo, type_of_transform = 'SyN' )

  ants$plot(fi, overlay = transform$warpedmovout, overlay_alpha = 0.3)


}


</code></pre>

<hr>
<h2 id='ants_resample_image'>Resample image</h2><span id='topic+ants_resample_image'></span>

<h3>Description</h3>

<p>See <code>ants$resample_image</code> for more details
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ants_resample_image(
  x,
  resample_params,
  use_voxels = FALSE,
  interp_type = c("linear", "nn", "guassian", "sinc", "bspline")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ants_resample_image_+3A_x">x</code></td>
<td>
<p>input image</p>
</td></tr>
<tr><td><code id="ants_resample_image_+3A_resample_params">resample_params</code></td>
<td>
<p>either relative number or absolute integers</p>
</td></tr>
<tr><td><code id="ants_resample_image_+3A_use_voxels">use_voxels</code></td>
<td>
<p>whether the <code>resample_params</code> should be treated as
new dimension <code>use_voxels=TRUE</code>, or the new dimension should be
calculated based on current dimension and <code>resample_params</code> combined
(<code>use_voxels=FALSE</code> then <code>resample_params</code> will be treated as
relative number); default is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="ants_resample_image_+3A_interp_type">interp_type</code></td>
<td>
<p>interpolation type; either integer or character; see
'Usage' for available options</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Resampled image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  fi &lt;- as_ANTsImage(ants$get_ants_data("r16"))

  # linear (interp_type = 0 or "linear)
  filin &lt;- ants_resample_image(fi, c(50, 60), TRUE, "linear")

  # nearest neighbor (interp_type = 1 or "nn)
  finn &lt;- ants_resample_image(fi, c(50, 60), TRUE, "nn")

  par(mfrow = c(1, 3), mar = c(0, 0, 0, 0))
  pal &lt;- gray.colors(256, start = 0)

  image(fi[], asp = 1, axes = FALSE,
        ylim = c(1,0), col = pal)
  image(filin[], asp = 1, axes = FALSE,
        ylim = c(1,0), col = pal)
  image(finn[], asp = 1, axes = FALSE,
        ylim = c(1,0), col = pal)
}


</code></pre>

<hr>
<h2 id='antspynet'>Get <code>'ANTsPyNet'</code> module</h2><span id='topic+antspynet'></span><span id='topic+load_antspynet'></span>

<h3>Description</h3>

<p>Get <code>'ANTsPyNet'</code> module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_antspynet(force = FALSE, error_if_missing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="antspynet_+3A_force">force</code></td>
<td>
<p>whether to force reloading <code>antspynet</code> module; default is false</p>
</td></tr>
<tr><td><code id="antspynet_+3A_error_if_missing">error_if_missing</code></td>
<td>
<p>whether to raise errors when the module is unable to
load; default is true.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'Python' module if successfully loaded. If <code>error_if_missing</code>
is set to false and module is unable to load, return <code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ants">ants</a></code>
</p>

<hr>
<h2 id='antspynet_brain_extraction'>Extract brain and strip skull</h2><span id='topic+antspynet_brain_extraction'></span>

<h3>Description</h3>

<p>Print <code>antspynet$brain_extraction</code> to see the original documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>antspynet_brain_extraction(
  x,
  modality = c("t1", "t1nobrainer", "t1combined", "flair", "t2", "t2star", "bold", "fa",
    "t1t2infant", "t1infant", "t2infant"),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="antspynet_brain_extraction_+3A_x">x</code></td>
<td>
<p>input image or image path</p>
</td></tr>
<tr><td><code id="antspynet_brain_extraction_+3A_modality">modality</code></td>
<td>
<p>modality type</p>
</td></tr>
<tr><td><code id="antspynet_brain_extraction_+3A_verbose">verbose</code></td>
<td>
<p>whether to print out process to the screen</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Brain mask image
</p>

<hr>
<h2 id='antspynet_preprocess_brain_image'>Process brain image prior to segmentation</h2><span id='topic+antspynet_preprocess_brain_image'></span>

<h3>Description</h3>

<p>Strip skulls, normalize intensity, align and re-sample to template. This
procedure is needed for many <code>antspynet</code> functions since the deep
neural networks are trained in template spaces
</p>


<h3>Usage</h3>

<pre><code class='language-R'>antspynet_preprocess_brain_image(
  x,
  truncate_intensity = c(0.01, 0.99),
  brain_extraction_modality = c("none", "t1", "t1v0", "t1nobrainer", "t1combined",
    "flair", "t2", "bold", "fa", "t1infant", "t2infant"),
  template_transform_type = c("None", "Affine", "Rigid"),
  template = c("biobank", "croppedMni152"),
  do_bias_correction = TRUE,
  return_bias_field = FALSE,
  do_denoising = TRUE,
  intensity_matching_type = c("regression", "histogram"),
  reference_image = NULL,
  intensity_normalization_type = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="antspynet_preprocess_brain_image_+3A_x">x</code></td>
<td>
<p><code>'ANTsImage'</code> or path to image to process</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_truncate_intensity">truncate_intensity</code></td>
<td>
<p>defines the quantile threshold for truncating the
image intensity</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_brain_extraction_modality">brain_extraction_modality</code></td>
<td>
<p>character of length 1, perform brain
extraction modality</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_template_transform_type">template_transform_type</code></td>
<td>
<p>either <code>'Rigid'</code> or <code>'Affine'</code>
align to template brain</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_template">template</code></td>
<td>
<p>template image (not skull-stripped) or string, e.g.
<code>'biobank'</code>, <code>'croppedMni152'</code></p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_do_bias_correction">do_bias_correction</code></td>
<td>
<p>whether to perform bias field correction</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_return_bias_field">return_bias_field</code></td>
<td>
<p>return bias field as an additional output without
bias correcting the image</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_do_denoising">do_denoising</code></td>
<td>
<p>whether to remove noises using non-local means</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_intensity_matching_type">intensity_matching_type</code></td>
<td>
<p>either <code>'regression'</code> or
<code>'histogram'</code>; only is performed if <code>reference_image</code> is not
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_reference_image">reference_image</code></td>
<td>
<p><code>'ANTsImage'</code> or path to image, or <code>NULL</code></p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_intensity_normalization_type">intensity_normalization_type</code></td>
<td>
<p>either re-scale the intensities to
<code>c(0, 1)</code> (<code>'01'</code>), or for zero-mean, unit variance
(<code>'0mean'</code>); if <code>NULL</code> normalization is not performed</p>
</td></tr>
<tr><td><code id="antspynet_preprocess_brain_image_+3A_verbose">verbose</code></td>
<td>
<p>print progress to the screen</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dictionary with images after process. The images are registered and
re-sampled into template.
</p>


<h3>See Also</h3>

<p><code>antspynet$preprocess_brain_image</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(rpyANTs)
if(interactive() &amp;&amp; ants_available("antspynet")) {
  image_path &lt;- ants$get_ants_data('r30')
  preprocessed &lt;- antspynet_preprocess_brain_image(
    image_path, verbose = FALSE
  )

  # Compare
  orig_img &lt;- as_ANTsImage(image_path)
  new_img &lt;- preprocessed$preprocessed_image
  pal &lt;- grDevices::gray.colors(256, start = 0, end = 1)

  par(mfrow = c(1, 2), mar = c(0.1, 0.1, 0.1, 0.1),
      bg = "black", fg = "white")
  image(orig_img[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0))
  image(new_img[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0))

}


</code></pre>

<hr>
<h2 id='antspynet_segmentation'>Imaging segmentation using <code>antspynet</code></h2><span id='topic+antspynet_segmentation'></span><span id='topic+antspynet_desikan_killiany_tourville_labeling'></span><span id='topic+antspynet_deep_atropos'></span>

<h3>Description</h3>

<p>Supports <code>Desikan-Killiany-Tourville</code> labeling and deep <code>'Atropos'</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>antspynet_desikan_killiany_tourville_labeling(
  x,
  do_preprocessing = TRUE,
  return_probability_images = FALSE,
  do_lobar_parcellation = FALSE,
  verbose = TRUE
)

antspynet_deep_atropos(
  x,
  do_preprocessing = TRUE,
  use_spatial_priors = TRUE,
  aseg_only = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="antspynet_segmentation_+3A_x">x</code></td>
<td>
<p><code>'NIfTI'</code> image or path to the image that is to be segmented</p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_do_preprocessing">do_preprocessing</code></td>
<td>
<p>whether <code>x</code> is in native space and needs the be
registered to template brain before performing segmentation; default is true
since the model is trained with template brain. If you want to manually
process the image, see <code><a href="#topic+antspynet_preprocess_brain_image">antspynet_preprocess_brain_image</a></code></p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_return_probability_images">return_probability_images</code></td>
<td>
<p>whether to return probability images</p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_do_lobar_parcellation">do_lobar_parcellation</code></td>
<td>
<p>whether to perform lobar 'parcellation'</p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_verbose">verbose</code></td>
<td>
<p>whether to print out the messages</p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_use_spatial_priors">use_spatial_priors</code></td>
<td>
<p>whether to use <code>'MNI'</code> partial tissue priors</p>
</td></tr>
<tr><td><code id="antspynet_segmentation_+3A_aseg_only">aseg_only</code></td>
<td>
<p>whether to just return the segmented image</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One or a list of <code>'ANTsImage'</code> image instances. Please print
out <code>antspynet$desikan_killiany_tourville_labeling</code> or
<code>antspynet$deep_atropos</code> to see the details.
</p>


<h3>See Also</h3>

<p><code>antspynet$desikan_killiany_tourville_labeling</code>,
<code>antspynet$deep_atropos</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Print Python documents
if(interactive() &amp;&amp; ants_available("antspynet")) {
  antspynet &lt;- load_antspynet()

  print(antspynet$deep_atropos)

  print(antspynet$desikan_killiany_tourville_labeling)
}


</code></pre>

<hr>
<h2 id='as_ANTsImage'>Load data as <code>'ANTsImage'</code> class</h2><span id='topic+as_ANTsImage'></span>

<h3>Description</h3>

<p>Load data as <code>'ANTsImage'</code> class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_ANTsImage(x, strict = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_ANTsImage_+3A_x">x</code></td>
<td>
<p>data to be converted; this can be an <code>'ANTsImage'</code> instance,
character, <code>'oro.nifti'</code> object, <code>'niftiImage'</code> from
package <code>'RNifti'</code>, or <code>'threeBrain.nii'</code> from package
<code>'threeBrain'</code></p>
</td></tr>
<tr><td><code id="as_ANTsImage_+3A_strict">strict</code></td>
<td>
<p>whether <code>x</code> should not be <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>'ANTsImage'</code> instance; use <code>ants$ANTsImage</code> to see
the 'Python' documentation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {

  ants &lt;- load_ants()

  # Python string
  x1 &lt;- ants$get_ants_data('r16')
  as_ANTsImage( x1 )

  # R character
  nii_path &lt;- system.file(package = "RNifti",
                          "extdata", "example.nii.gz")
  as_ANTsImage( nii_path )

  # niftiImage object
  x2 &lt;- RNifti::readNifti(nii_path)
  as_ANTsImage( x2 )

}

</code></pre>

<hr>
<h2 id='as_ANTsTransform'>Convert to <code>'ANTsTransform'</code></h2><span id='topic+as_ANTsTransform'></span><span id='topic+as_ANTsTransform.default'></span><span id='topic+as_ANTsTransform.ants.core.ants_transform.ANTsTransform'></span><span id='topic+as_ANTsTransform.ants.core.ants_image.ANTsImage'></span><span id='topic+as_ANTsTransform.numpy.ndarray'></span><span id='topic+as_ANTsTransform.character'></span>

<h3>Description</h3>

<p>Convert to <code>'ANTsTransform'</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_ANTsTransform(x, ...)

## Default S3 method:
as_ANTsTransform(x, dimension = 3, ...)

## S3 method for class 'ants.core.ants_transform.ANTsTransform'
as_ANTsTransform(x, ...)

## S3 method for class 'ants.core.ants_image.ANTsImage'
as_ANTsTransform(x, ...)

## S3 method for class 'numpy.ndarray'
as_ANTsTransform(x, ...)

## S3 method for class 'character'
as_ANTsTransform(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_ANTsTransform_+3A_x">x</code></td>
<td>
<p>'affine' matrix or <code>'numpy'</code> array, character path to the
matrix, <code>'ANTsTransform'</code>, <code>'ANTsImage'</code> as displacement field.</p>
</td></tr>
<tr><td><code id="as_ANTsTransform_+3A_...">...</code></td>
<td>
<p>passed to other methods</p>
</td></tr>
<tr><td><code id="as_ANTsTransform_+3A_dimension">dimension</code></td>
<td>
<p>expected transform space dimension; default is 3</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>'ANTsTransform'</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {

  mat &lt;- matrix(c(
    0, -1, 0, 128,
    1, 0, 0, -128,
    0, 0, -1, 128,
    0, 0,  0,   1
  ), ncol = 4, byrow = TRUE)

  trans &lt;- as_ANTsTransform(mat)
  trans

  # apply transform
  trans$apply_to_point(c(120, 400, 1))

  # same results
  mat %*% c(120, 400, 1, 1)

  trans[] == mat

}

</code></pre>

<hr>
<h2 id='correct_intensity'>Truncate and correct 'MRI' intensity</h2><span id='topic+correct_intensity'></span>

<h3>Description</h3>

<p>Uses <code>ants.abp_n4</code> to truncate and correct intensity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correct_intensity(image, mask = NULL, intensity_truncation = c(0.025, 0.975))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="correct_intensity_+3A_image">image</code></td>
<td>
<p>'MRI' image to be corrected, will be passed to
<code><a href="#topic+as_ANTsImage">as_ANTsImage</a></code></p>
</td></tr>
<tr><td><code id="correct_intensity_+3A_mask">mask</code></td>
<td>
<p>binary mask image</p>
</td></tr>
<tr><td><code id="correct_intensity_+3A_intensity_truncation">intensity_truncation</code></td>
<td>
<p>numerical length of two, quantile probabilities
to truncate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>'ANTsImage'</code> instance
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {
  ants &lt;- load_ants()
  scale &lt;- (0.1 + outer(
    seq(0, 1, length.out = 256)^6,
    seq(0, 1, length.out = 256)^2,
    FUN = "+"
  )) / 6
  img = ants$image_read(ants$get_ants_data('r16')) * scale

  corrected &lt;- correct_intensity(img)

  pal &lt;- gray.colors(255, start = 0)
  par(mfrow = c(1, 2), mar = c(0.1, 0.1, 2.1, 0.1),
      bg = "black", fg = "white")
  image(img[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0),
        main = "Original", col.main = "white")
  image(corrected[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0),
        main = "Corrected", col.main = "white")

}

</code></pre>

<hr>
<h2 id='ensure_template'>Ensure the template directory is downloaded</h2><span id='topic+ensure_template'></span>

<h3>Description</h3>

<p>Ensure the template directory is downloaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensure_template(name = BUILTIN_TEMPLATES)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ensure_template_+3A_name">name</code></td>
<td>
<p>name of the template, commonly known as <code>'MNI152'</code>
templates; choices are <code>"mni_icbm152_nlin_asym_09a"</code>,
<code>"mni_icbm152_nlin_asym_09b"</code>, and <code>"mni_icbm152_nlin_asym_09c"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The downloaded template path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Do not run for testing as this will download the template
if(FALSE) {

# Default is `mni_icbm152_nlin_asym_09a`
ensure_template()
ensure_template("mni_icbm152_nlin_asym_09a")

# Using MNI152b
ensure_template("mni_icbm152_nlin_asym_09b")

}


</code></pre>

<hr>
<h2 id='halpern_preprocess'>'ANTs' functions for 'Halpern' lab</h2><span id='topic+halpern_preprocess'></span><span id='topic+halpern_register_ct_mri'></span><span id='topic+halpern_register_template_mri'></span><span id='topic+halpern_apply_transform_template_mri'></span>

<h3>Description</h3>

<p>'ANTs' functions for 'Halpern' lab
</p>


<h3>Usage</h3>

<pre><code class='language-R'>halpern_register_ct_mri(
  fixed,
  moving,
  outprefix,
  fixed_is_ct = TRUE,
  verbose = TRUE
)

halpern_register_template_mri(
  fixed,
  moving,
  outprefix,
  mask = NULL,
  verbose = TRUE
)

halpern_apply_transform_template_mri(roi_folder, outprefix, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="halpern_preprocess_+3A_fixed">fixed</code></td>
<td>
<p>fixed image as template</p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_moving">moving</code></td>
<td>
<p>moving image that is to be registered into <code>fixed</code></p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_outprefix">outprefix</code></td>
<td>
<p>output prefix, needs to be absolute path prefix</p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_fixed_is_ct">fixed_is_ct</code></td>
<td>
<p>whether <code>fixed</code> is 'CT'</p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose the progress; default is true</p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_mask">mask</code></td>
<td>
<p>mask file for template (skull-stripped)</p>
</td></tr>
<tr><td><code id="halpern_preprocess_+3A_roi_folder">roi_folder</code></td>
<td>
<p>template 'ROI' or atlas folder in which the image atlases
or masks will be transformed into subject's native brain</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of result configurations
</p>

<hr>
<h2 id='install_ants'>Install 'ANTs' via 'ANTsPy'</h2><span id='topic+install_ants'></span>

<h3>Description</h3>

<p>Install 'ANTs' via 'ANTsPy'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_ants(python_ver = "3.11", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_ants_+3A_python_ver">python_ver</code></td>
<td>
<p>'Python' version, see <code><a href="rpymat.html#topic+configure_conda">configure_conda</a></code>;
default is <code>"3.11"</code> since <code>'ANTsPy'</code> is compiled for all platforms
under this version</p>
</td></tr>
<tr><td><code id="install_ants_+3A_verbose">verbose</code></td>
<td>
<p>whether to print the installation messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns nothing.
</p>

<hr>
<h2 id='is_affine3D'>Check if an object is a 3D 'affine' transform matrix</h2><span id='topic+is_affine3D'></span><span id='topic+is_affine3D.default'></span><span id='topic+is_affine3D.ants.core.ants_transform.ANTsTransform'></span>

<h3>Description</h3>

<p>Check if an object is a 3D 'affine' transform matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_affine3D(x, ...)

## Default S3 method:
is_affine3D(x, strict = TRUE, ...)

## S3 method for class 'ants.core.ants_transform.ANTsTransform'
is_affine3D(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_affine3D_+3A_x">x</code></td>
<td>
<p>R or Python object, accepted forms are numeric <code>matrix</code>,
<code>'ANTsTransform'</code>, or <code>character</code> (path to transform matrix)</p>
</td></tr>
<tr><td><code id="is_affine3D_+3A_...">...</code></td>
<td>
<p>passed to other methods</p>
</td></tr>
<tr><td><code id="is_affine3D_+3A_strict">strict</code></td>
<td>
<p>whether the last element should be always 1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value whether the object can be loaded as a 4-by-4 matrix.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# not affine
is_affine3D(1)

# 3x3 matrix is not as it is treated as 2D transform
is_affine3D(matrix(rnorm(9), nrow = 3))

# 3x4 matrix
x &lt;- matrix(rnorm(12), nrow = 3)
is_affine3D(x)

# 4x4 matrix
x &lt;- rbind(x, c(0,0,0,1))
is_affine3D(x)

if(interactive() &amp;&amp; ants_available()) {

  ants &lt;- load_ants()
  x &lt;- ants$new_ants_transform(dimension = 3L)
  is_affine3D(x)

  # save the parameters
  f &lt;- tempfile(fileext = ".mat")
  ants$write_transform(x, f)
  is_affine3D(f)

}




</code></pre>

<hr>
<h2 id='py'>Get 'Python' main process environment</h2><span id='topic+py'></span>

<h3>Description</h3>

<p>Get 'Python' main process environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py
</code></pre>


<h3>Format</h3>

<p>An object of class <code>python.builtin.module</code> (inherits from <code>python.builtin.object</code>) of length 1.
</p>


<h3>Value</h3>

<p>The 'Python' main process as a module
</p>

<hr>
<h2 id='py_builtin'>Get 'Python' built-in object</h2><span id='topic+py_builtin'></span>

<h3>Description</h3>

<p>Get 'Python' built-in object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_builtin(name, convert = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="py_builtin_+3A_name">name</code></td>
<td>
<p>object name</p>
</td></tr>
<tr><td><code id="py_builtin_+3A_convert">convert</code></td>
<td>
<p>see <code><a href="reticulate.html#topic+import_builtins">import_builtins</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A python built-in object specified by <code>name</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; ants_available()) {


# ------ Basic case: use python `int` as an R function ---------
py_int &lt;- py_builtin("int")

# a is an R object now
a &lt;- py_int(9)
print(a)
class(a)

# ------ Use python `int` as a Python function -----------------
py_int2 &lt;- py_builtin("int", convert = FALSE)

# b in a python object
b &lt;- py_int2(9)

# There is no '[1] ' when printing
print(b)
class(b)

# convert to R object
py_to_r(b)



}

</code></pre>

<hr>
<h2 id='py_list'>List in 'Python'</h2><span id='topic+py_list'></span>

<h3>Description</h3>

<p>List in 'Python'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_list(..., convert = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="py_list_+3A_...">...</code></td>
<td>
<p>passing to <code>list</code> ('Python')</p>
</td></tr>
<tr><td><code id="py_list_+3A_convert">convert</code></td>
<td>
<p>whether to convert the results back into R; default is no</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List instance, or an R vector if converted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; ants_available()) {

  py_list(list(1,2,3))
  py_list(c(1,2,3))

  py_list(array(1:9, c(3,3)))
  py_list(list(list(1:3), letters[1:3]))

}
</code></pre>

<hr>
<h2 id='py_slice'>Slice index in 'Python' arrays</h2><span id='topic+py_slice'></span>

<h3>Description</h3>

<p>Slice index in 'Python' arrays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_slice(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="py_slice_+3A_...">...</code></td>
<td>
<p>passing to <code>slice</code> ('Python')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Index slice instance
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; ants_available()) {

  x &lt;- np_array(array(seq(20), c(4, 5)))

  # equivalent to x[::2]
  x[py_slice(NULL, NULL, 2L)]

}
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+tuple'></span><span id='topic+py_help'></span><span id='topic+np_array'></span><span id='topic+import'></span><span id='topic+repl_python'></span><span id='topic+run_script'></span><span id='topic+r_to_py'></span><span id='topic+py_to_r'></span><span id='topic+py_to_r_wrapper'></span><span id='topic+py_str'></span><span id='topic+py_run_string'></span><span id='topic+py_bool'></span><span id='topic+py_dict'></span><span id='topic+py_call'></span><span id='topic+py_del_attr'></span><span id='topic+py_del_item'></span><span id='topic+py_eval'></span><span id='topic+py_get_attr'></span><span id='topic+py_set_attr'></span><span id='topic+py_get_item'></span><span id='topic+py_set_item'></span><span id='topic+py_len'></span><span id='topic+py_none'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>reticulate</dt><dd><p><code><a href="reticulate.html#topic+import">import</a></code>, <code><a href="reticulate.html#topic+np_array">np_array</a></code>, <code><a href="reticulate.html#topic+np_array">np_array</a></code>, <code><a href="reticulate.html#topic+py_bool">py_bool</a></code>, <code><a href="reticulate.html#topic+py_call">py_call</a></code>, <code><a href="reticulate.html#topic+py_del_attr">py_del_attr</a></code>, <code><a href="reticulate.html#topic+py_get_item">py_del_item</a></code>, <code><a href="reticulate.html#topic+dict">py_dict</a></code>, <code><a href="reticulate.html#topic+py_eval">py_eval</a></code>, <code><a href="reticulate.html#topic+py_get_attr">py_get_attr</a></code>, <code><a href="reticulate.html#topic+py_get_item">py_get_item</a></code>, <code><a href="reticulate.html#topic+py_help">py_help</a></code>, <code><a href="reticulate.html#topic+py_len">py_len</a></code>, <code><a href="reticulate.html#topic+py_none">py_none</a></code>, <code><a href="reticulate.html#topic+py_run">py_run_string</a></code>, <code><a href="reticulate.html#topic+py_set_attr">py_set_attr</a></code>, <code><a href="reticulate.html#topic+py_get_item">py_set_item</a></code>, <code><a href="reticulate.html#topic+py_str">py_str</a></code>, <code><a href="reticulate.html#topic+r-py-conversion">py_to_r</a></code>, <code><a href="reticulate.html#topic+py_to_r_wrapper">py_to_r_wrapper</a></code>, <code><a href="reticulate.html#topic+r-py-conversion">r_to_py</a></code>, <code><a href="reticulate.html#topic+r-py-conversion">r_to_py</a></code>, <code><a href="reticulate.html#topic+tuple">tuple</a></code></p>
</dd>
<dt>rpymat</dt><dd><p><code><a href="rpymat.html#topic+repl_python">repl_python</a></code>, <code><a href="rpymat.html#topic+run_pyscript">run_script</a></code></p>
</dd>
</dl>

<hr>
<h2 id='t1_preprocess'>Process 'T1' image</h2><span id='topic+t1_preprocess'></span>

<h3>Description</h3>

<p>Process 'MRI' and align with template brains
</p>


<h3>Usage</h3>

<pre><code class='language-R'>t1_preprocess(
  t1_path,
  templates = "mni_icbm152_nlin_asym_09a",
  work_path = ".",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="t1_preprocess_+3A_t1_path">t1_path</code></td>
<td>
<p>path to a 'T1' image</p>
</td></tr>
<tr><td><code id="t1_preprocess_+3A_templates">templates</code></td>
<td>
<p>template to use; default is <code>'mni_icbm152_nlin_asym_09a'</code>,</p>
</td></tr>
<tr><td><code id="t1_preprocess_+3A_work_path">work_path</code></td>
<td>
<p>working path, must be a directory</p>
</td></tr>
<tr><td><code id="t1_preprocess_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose the progress</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing will be returned. Please check <code>work_path</code> for results.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
