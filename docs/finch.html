<!DOCTYPE html><html><head><title>Help for package finch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {finch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#finch-package'><p>finch</p></a></li>
<li><a href='#as.location'><p>Convert a path or URL to a location object</p></a></li>
<li><a href='#dwca_cache'><p>Caching</p></a></li>
<li><a href='#dwca_cache_delete'><p>This function is defunct.</p></a></li>
<li><a href='#dwca_cache_delete_all'><p>This function is defunct.</p></a></li>
<li><a href='#dwca_cache_details'><p>This function is defunct.</p></a></li>
<li><a href='#dwca_cache_list'><p>This function is defunct.</p></a></li>
<li><a href='#dwca_read'><p>Parse Darwin Core Archive</p></a></li>
<li><a href='#dwca_validate'><p>Validate a Darwin Core Archive</p></a></li>
<li><a href='#finch-defunct'><p>Defunct functions in finch</p></a></li>
<li><a href='#simple_read'><p>Parse a DarwinRecordSet and SimpleDarwinRecordSet files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Parse Darwin Core Files</td>
</tr>
<tr>
<td>Description:</td>
<td>Parse and create Darwin Core (<a href="http://rs.tdwg.org/dwc/">http://rs.tdwg.org/dwc/</a>) Simple
    and Archives. Functionality includes reading and parsing all the
    files in a Darwin Core Archive, including the datasets and metadata;
    read and parse simple Darwin Core files; and validation of Darwin
    Core Archives.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/finch/">https://docs.ropensci.org/finch/</a>,
<a href="https://github.com/ropensci/finch">https://github.com/ropensci/finch</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/finch/issues">https://github.com/ropensci/finch/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2 (&ge; 1.0.0), EML (&ge; 2.0.0), data.table (&ge; 1.10.0),
digest, hoardr (&ge; 0.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, crul, jsonlite</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>X-schema.org-applicationCategory:</td>
<td>Biology</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>biology, occurrences, specimen, biodiversity,
collections, species</td>
</tr>
<tr>
<td>X-schema.org-isPartOf:</td>
<td>https://ropensci.org</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-08-10 21:48:08 UTC; sckott</td>
</tr>
<tr>
<td>Author:</td>
<td>Scott Chamberlain <a href="https://orcid.org/0000-0003-1444-9135"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Scott Chamberlain &lt;myrmecocystus@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-08-11 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='finch-package'>finch</h2><span id='topic+finch-package'></span><span id='topic+finch'></span>

<h3>Description</h3>

<p>Parse Darwin Core Archive files
</p>


<h3>Author(s)</h3>

<p>Scott Chamberlain <a href="mailto:myrmecocystus@gmail.com">myrmecocystus@gmail.com</a>
</p>

<hr>
<h2 id='as.location'>Convert a path or URL to a location object</h2><span id='topic+as.location'></span><span id='topic+as.location.character'></span><span id='topic+as.location.location'></span><span id='topic+print.location'></span>

<h3>Description</h3>

<p>Convert a path or URL to a location object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.location(x, ...)

## S3 method for class 'character'
as.location(x, ...)

## S3 method for class 'location'
as.location(x, ...)

## S3 method for class 'location'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.location_+3A_x">x</code></td>
<td>
<p>Input, a path or URL</p>
</td></tr>
<tr><td><code id="as.location_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># A zip file
file &lt;- system.file("examples/0000154-150116162929234.zip",
  package = "finch")
as.location(file)

# A directory
dir &lt;- system.file("examples/0000154-150116162929234",
  package = "finch")
as.location(dir)

# A URL
as.location("https://httpbin.org/get")
</code></pre>

<hr>
<h2 id='dwca_cache'>Caching</h2><span id='topic+dwca_cache'></span>

<h3>Description</h3>

<p>Manage cached <code>finch</code> files with package <span class="pkg">hoardr</span>
</p>


<h3>Details</h3>

<p>The dafault cache directory is
<code>paste0(rappdirs::user_cache_dir(), "/R/finch")</code>, but you can set
your own path using <code>cache_path_set()</code>
</p>
<p><code>cache_delete</code> only accepts one file name, while
<code>cache_delete_all</code> doesn't accept any names, but deletes all files.
For deleting many specific files, use <code>cache_delete</code> in a <code><a href="base.html#topic+lapply">lapply()</a></code>
type call
</p>


<h3>Useful user functions</h3>


<ul>
<li> <p><code>dwca_cache$cache_path_get()</code> get cache path
</p>
</li>
<li> <p><code>dwca_cache$cache_path_set()</code> set cache path
</p>
</li>
<li> <p><code>dwca_cache$list()</code> returns a character vector of full
path file names
</p>
</li>
<li> <p><code>dwca_cache$files()</code> returns file objects with metadata
</p>
</li>
<li> <p><code>dwca_cache$details()</code> returns files with details
</p>
</li>
<li> <p><code>dwca_cache$delete()</code> delete specific files
</p>
</li>
<li> <p><code>dwca_cache$delete_all()</code> delete all files, returns nothing
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dwca_cache

# list files in cache
dwca_cache$list()

# delete certain database files
# dwca_cache$delete("file path")
# dwca_cache$list()

# delete all files in cache
# dwca_cache$delete_all()
# dwca_cache$list()

# set a different cache path from the default

## End(Not run)
</code></pre>

<hr>
<h2 id='dwca_cache_delete'>This function is defunct.</h2><span id='topic+dwca_cache_delete'></span>

<h3>Description</h3>

<p>This function is defunct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_cache_delete(...)
</code></pre>

<hr>
<h2 id='dwca_cache_delete_all'>This function is defunct.</h2><span id='topic+dwca_cache_delete_all'></span>

<h3>Description</h3>

<p>This function is defunct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_cache_delete_all(...)
</code></pre>

<hr>
<h2 id='dwca_cache_details'>This function is defunct.</h2><span id='topic+dwca_cache_details'></span>

<h3>Description</h3>

<p>This function is defunct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_cache_details(...)
</code></pre>

<hr>
<h2 id='dwca_cache_list'>This function is defunct.</h2><span id='topic+dwca_cache_list'></span>

<h3>Description</h3>

<p>This function is defunct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_cache_list(...)
</code></pre>

<hr>
<h2 id='dwca_read'>Parse Darwin Core Archive</h2><span id='topic+dwca_read'></span>

<h3>Description</h3>

<p>Parse Darwin Core Archive
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_read(input, read = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dwca_read_+3A_input">input</code></td>
<td>
<p>(character) Path to local zip file, directory, or a url.
If a URL it must be for a zip file.</p>
</td></tr>
<tr><td><code id="dwca_read_+3A_read">read</code></td>
<td>
<p>(logical) Whether or not to read in data files. If <code>FALSE</code>,
we give back paths to files only. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="dwca_read_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="data.table.html#topic+fread">data.table::fread()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that sometimes file reads fail. We use <code><a href="data.table.html#topic+fread">data.table::fread()</a></code>
internally, which is very fast, but can fail sometimes. If so, try reading
in the data manually.
</p>
<p>When you pass in a URL, we use <span class="pkg">rappdirs</span> to determine cache path, and
if you pass the same URL again, and your cache is not cleared, we'll
pull from the cache. Passing a file or directory on your local system
won't invoke the caching route, but will go directly to the file/directory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set up a temporary directory for the example
dwca_cache$cache_path_set(path = "finch", type = "tempdir")

dir &lt;- system.file("examples", "0000154-150116162929234", package = "finch")

# Don't read data in
(x &lt;- dwca_read(dir, read=FALSE))
x$files
x$highmeta
x$dataset_meta[[1]]
x$data

# Read data
(x &lt;- dwca_read(dir, read=TRUE))
head(x$data[[1]])

# Can pass in a zip file
zip &lt;- system.file("examples", "0000154-150116162929234.zip",
  package = "finch")
(out &lt;- dwca_read(zip))
out$files
out$highmeta
out$emlmeta
out$dataset_meta

# Can pass in zip file as a url
url &lt;-
"https://github.com/ropensci/finch/blob/master/inst/examples/0000154-150116162929234.zip?raw=true"
(out &lt;- dwca_read(url))

# another url
url &lt;- "http://ipt.jbrj.gov.br/jbrj/archive.do?r=redlist_2013_taxons&amp;v=3.12"
(out &lt;- dwca_read(url))

## End(Not run)
</code></pre>

<hr>
<h2 id='dwca_validate'>Validate a Darwin Core Archive</h2><span id='topic+dwca_validate'></span>

<h3>Description</h3>

<p>Validate a Darwin Core Archive
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwca_validate(x, ifModifiedSince = NULL, browse = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dwca_validate_+3A_x">x</code></td>
<td>
<p>(character) A url for a Darwin Core Archive. If you have a local
Darwin Core Archive, put it up online somewhere. Required.</p>
</td></tr>
<tr><td><code id="dwca_validate_+3A_ifmodifiedsince">ifModifiedSince</code></td>
<td>
<p>(character) An optional ISO date (yyyy-mm-dd) to
enable conditional get requests, validating archives only if they have
been modified since the given date. This feature requires the archive url
to honor the if-modified-since http header. Apache webservers for example
do this out of the box for static files, but if you use dynamic scripts
to generate the archive on the fly this might not be recognised. Optional.</p>
</td></tr>
<tr><td><code id="dwca_validate_+3A_browse">browse</code></td>
<td>
<p>(logical) Browse to generated report or not.
Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="dwca_validate_+3A_...">...</code></td>
<td>
<p>Curl options passed to <a href="crul.html#topic+HttpClient">crul::HttpClient</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Uses the GBIF DCA validator (http://tools.gbif.org/dwca-validator/)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x &lt;- "http://rs.gbif.org/datasets/german_sl.zip"
dwca_validate(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='finch-defunct'>Defunct functions in finch</h2><span id='topic+finch-defunct'></span>

<h3>Description</h3>


<ul>
<li> <p><code>dwca_cache_delete</code>: Defunt - see <a href="#topic+dwca_cache">dwca_cache</a>
</p>
</li>
<li> <p><code>dwca_cache_delete_all</code>: Defunt - see <a href="#topic+dwca_cache">dwca_cache</a>
</p>
</li>
<li> <p><code>dwca_cache_details</code>: Defunt - see <a href="#topic+dwca_cache">dwca_cache</a>
</p>
</li>
<li> <p><code>dwca_cache_list</code>: Defunt - see <a href="#topic+dwca_cache">dwca_cache</a>
</p>
</li></ul>


<hr>
<h2 id='simple_read'>Parse a DarwinRecordSet and SimpleDarwinRecordSet files</h2><span id='topic+simple_read'></span>

<h3>Description</h3>

<p>Parse a DarwinRecordSet and SimpleDarwinRecordSet files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simple_read(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simple_read_+3A_file">file</code></td>
<td>
<p>(character) A path to a single simple Darwin Core
file in XML format. Required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Make sure when reading a DarwinRecordSet to access the chunks by
position rather than name since duplicate names are allowed in chunks.
</p>


<h3>Value</h3>

<p>a S3 class <code>dwc_recordset</code> when a DarwinRecordSet is given, or
a <code>dwc_simplerecordset</code> when a SimpleDarwinRecordSet is given. In
each case the object is really just a list, with lightweight S3 class
attached for easy downstream usage. Prints summary to screen by default
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# SimpleDarwinRecordSet examples
file &lt;- system.file("examples", "example_simple.xml", package = "finch")
simple_read(file)
file &lt;- system.file("examples", "example_simple_fossil.xml",
  package = "finch")
simple_read(file)

# DarwinRecordSet examples
file &lt;- system.file("examples", "example_classes_observation.xml",
  package = "finch")
simple_read(file)

file &lt;- system.file("examples", "example_classes_specimen.xml",
  package = "finch")
simple_read(file)

# access elements of the object
file &lt;- system.file("examples", "example_classes_specimen.xml",
  package = "finch")
res &lt;- simple_read(file)
## namespaces
res$meta
## locations
res$locations
## chunks, the first one
res$chunks[[1]]

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
