<!DOCTYPE html><html><head><title>Help for package teal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {teal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.datasets_to_data'><p>Convert <code>FilteredData</code> to reactive list of datasets of the <code>teal_data</code> type.</p></a></li>
<li><a href='#append_module'><p>Append a <code>teal_module</code> to <code>children</code> of a <code>teal_modules</code> object</p></a></li>
<li><a href='#as_tdata'><p>Downgrade <code>teal_data</code> objects in modules for compatibility</p></a></li>
<li><a href='#build_app_title'><p>Build app title with favicon</p></a></li>
<li><a href='#calculate_hashes'><p>Get the hash of a dataset</p></a></li>
<li><a href='#check_filter_datanames'><p>Check <code>datanames</code> in filters</p></a></li>
<li><a href='#check_modules_datanames'><p>Check <code>datanames</code> in modules</p></a></li>
<li><a href='#create_app_id'><p>Application ID</p></a></li>
<li><a href='#deep_copy_filter'><p>Deep copy <code>teal_slices</code></p></a></li>
<li><a href='#example_module'><p>An example <code>teal</code> module</p></a></li>
<li><a href='#extract_module'><p>Extract/Remove module(s) of specific class</p></a></li>
<li><a href='#filter_manager_module_srv'><p>Module specific filter manager</p></a></li>
<li><a href='#get_client_timezone'><p>Get client timezone</p></a></li>
<li><a href='#get_code_tdata'><p>Wrapper for <code>get_code.tdata</code></p></a></li>
<li><a href='#get_datasets_code'><p>Get datasets code</p></a></li>
<li><a href='#get_metadata'><p>Function to get metadata from a <code>tdata</code> object</p></a></li>
<li><a href='#get_rcode_libraries'><p>Generates library calls from current session info</p></a></li>
<li><a href='#include_css_files'><p>Include <code>CSS</code> files from <code style="white-space: pre;">&#8288;/inst/css/&#8288;</code> package directory to application header</p></a></li>
<li><a href='#include_js_files'><p>Include <code>JS</code> files from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory to application header</p></a></li>
<li><a href='#include_teal_css_js'><p>Code to include <code>teal</code> <code>CSS</code> and <code>JavaScript</code> files</p></a></li>
<li><a href='#init'><p>Create the server and UI function for the <code>shiny</code> app</p></a></li>
<li><a href='#is_arg_used'><p>Does the object make use of the <code>arg</code></p></a></li>
<li><a href='#join_keys.tdata'><p>Extract <code>join_keys</code> from <code>tdata</code></p></a></li>
<li><a href='#landing_popup_module'><p>Landing popup module</p></a></li>
<li><a href='#matrix_to_mapping'><p>Convert mapping matrix to filter mapping specification.</p></a></li>
<li><a href='#module_filter_manager'><p>Manage multiple <code>FilteredData</code> objects</p></a></li>
<li><a href='#module_filter_manager_modal'><p>Filter manager modal</p></a></li>
<li><a href='#module_labels'><p>Retrieve labels from <code>teal_modules</code></p></a></li>
<li><a href='#module_nested_tabs'><p>Create a UI of nested tabs of <code>teal_modules</code></p></a></li>
<li><a href='#module_tabs_with_filters'><p>Add right filter panel into each of the top-level <code>teal_modules</code> UIs</p></a></li>
<li><a href='#module_teal'><p><code>teal</code> main app module</p></a></li>
<li><a href='#module_teal_with_splash'><p>Add splash screen to <code>teal</code> application</p></a></li>
<li><a href='#modules_datasets'><p>Create filterable data for modules</p></a></li>
<li><a href='#modules_depth'><p>Get module depth</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#report_card_template'><p>Template function for <code>TealReportCard</code> creation and customization</p></a></li>
<li><a href='#reporter_previewer_module'><p>Create a <code>teal</code> module for previewing a report</p></a></li>
<li><a href='#run_js_files'><p>Run <code>JS</code> file from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory</p></a></li>
<li><a href='#show_rcode_modal'><p>Show <code>R</code> code modal</p></a></li>
<li><a href='#slices_store'><p>Store and restore <code>teal_slices</code> object</p></a></li>
<li><a href='#snapshot_manager_module'><p>Filter state snapshot management</p></a></li>
<li><a href='#tdata'><p>Create a <code>tdata</code> object</p></a></li>
<li><a href='#tdata2env'><p>Function to convert a <code>tdata</code> object to an <code>environment</code></p></a></li>
<li><a href='#teal_data_datanames'><p>Wrapper on <code>teal.data::datanames</code></p></a></li>
<li><a href='#teal_data_module'><p>Data module for <code>teal</code> applications</p></a></li>
<li><a href='#teal_data_to_filtered_data'><p>Create a <code>FilteredData</code></p></a></li>
<li><a href='#teal_modules'><p>Create <code>teal_module</code> and <code>teal_modules</code> objects</p></a></li>
<li><a href='#teal_slices'><p>Filter settings for <code>teal</code> applications</p></a></li>
<li><a href='#teal-package'><p><code>teal</code>: Interactive exploration of clinical trials data</p></a></li>
<li><a href='#TealReportCard'><p><code>TealReportCard</code></p></a></li>
<li><a href='#TealSlicesBlock'><p><code>RcodeBlock</code></p></a></li>
<li><a href='#unfold_mapping'><p>Explicitly enumerate global filters.</p></a></li>
<li><a href='#validate_app_title_tag'><p>Function for validating the title parameter of <code>teal::init</code></p></a></li>
<li><a href='#validate_has_data'><p>Validate that dataset has a minimum number of observations</p></a></li>
<li><a href='#validate_has_elements'><p>Validates that vector has length greater than 0</p></a></li>
<li><a href='#validate_has_variable'><p>Validates that dataset contains specific variable</p></a></li>
<li><a href='#validate_in'><p>Validates that vector includes all expected values</p></a></li>
<li><a href='#validate_inputs'><p>Send input validation messages to output</p></a></li>
<li><a href='#validate_n_levels'><p>Validate that variables has expected number of levels</p></a></li>
<li><a href='#validate_no_intersection'><p>Validates no intersection between two vectors</p></a></li>
<li><a href='#validate_one_row_per_id'><p>Validate that dataset has unique rows for key variables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Exploratory Web Apps for Analyzing Clinical Trials Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.15.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-07</td>
</tr>
<tr>
<td>Description:</td>
<td>A 'shiny' based interactive exploration framework for
    analyzing clinical trials data. 'teal' currently provides a dynamic
    filtering facility and different data viewers. 'teal' 'shiny'
    applications are built using standard 'shiny' modules.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://insightsengineering.github.io/teal/">https://insightsengineering.github.io/teal/</a>,
<a href="https://github.com/insightsengineering/teal/">https://github.com/insightsengineering/teal/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insightsengineering/teal/issues">https://github.com/insightsengineering/teal/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0), shiny (&ge; 1.7.0), teal.data (&ge; 0.4.0), teal.slice
(&ge; 0.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate (&ge; 2.1.0), jsonlite, lifecycle (&ge; 0.2.0), logger
(&ge; 0.2.0), magrittr (&ge; 1.5), methods, rlang (&ge; 1.0.0),
shinyjs, stats, teal.code (&ge; 0.5.0), teal.logger (&ge; 0.1.1),
teal.reporter (&ge; 0.2.0), teal.widgets (&ge; 0.4.0), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bslib, knitr (&ge; 1.42), MultiAssayExperiment, R6, rmarkdown
(&ge; 2.19), shinyvalidate, testthat (&ge; 3.1.5), withr (&ge;
2.1.0), yaml (&ge; 1.1.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>Config/Needs/verdepcheck:</td>
<td>rstudio/shiny, insightsengineering/teal.data,
insightsengineering/teal.slice, mllg/checkmate,
jeroen/jsonlite, r-lib/lifecycle, daroczig/logger,
tidyverse/magrittr, r-lib/rlang, daattali/shinyjs,
insightsengineering/teal.logger,
insightsengineering/teal.reporter,
insightsengineering/teal.widgets, rstudio/bslib, yihui/knitr,
bioc::MultiAssayExperiment, r-lib/R6, rstudio/rmarkdown,
rstudio/shinyvalidate, insightsengineering/teal.code,
r-lib/testthat, r-lib/withr, yaml=vubiostat/r-yaml</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>insightsengineering/nesttemplate</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Collate:</td>
<td>'dummy_functions.R' 'get_rcode_utils.R' 'include_css_js.R'
'modules.R' 'init.R' 'landing_popup_module.R'
'module_filter_manager.R' 'module_nested_tabs.R'
'module_snapshot_manager.R' 'module_tabs_with_filters.R'
'module_teal.R' 'module_teal_with_splash.R'
'reporter_previewer_module.R' 'show_rcode_modal.R' 'tdata.R'
'teal.R' 'teal_data_module.R' 'teal_data_module-eval_code.R'
'teal_data_module-within.R' 'teal_reporter.R'
'teal_slices-store.R' 'teal_slices.R' 'utils.R'
'validate_inputs.R' 'validations.R' 'zzz.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-07 20:41:59 UTC; unardid</td>
</tr>
<tr>
<td>Author:</td>
<td>Dawid Kaledkowski <a href="https://orcid.org/0000-0001-9533-457X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Pawel Rucki [aut],
  Aleksander Chlebowski
    <a href="https://orcid.org/0000-0001-5018-6294"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Andre Verissimo <a href="https://orcid.org/0000-0002-2212-339X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kartikeya Kirar [aut],
  Vedha Viyash [aut],
  Marcin Kosinski [aut],
  Adrian Waddell [aut],
  Chendi Liao [rev],
  Dony Unardi [rev],
  Nikolas Burkoff [aut],
  Mahmoud Hallal [aut],
  Maciej Nasinski [aut],
  Konrad Pagacz [aut],
  Junlue Zhao [aut],
  Tadeusz Lewandowski [aut],
  F. Hoffmann-La Roche AG [cph, fnd],
  Maximilian Mordig [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dawid Kaledkowski &lt;dawid.kaledkowski@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-07 22:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.datasets_to_data'>Convert <code>FilteredData</code> to reactive list of datasets of the <code>teal_data</code> type.</h2><span id='topic+.datasets_to_data'></span>

<h3>Description</h3>

<p>Converts <code>FilteredData</code> object to <code>teal_data</code> object containing datasets needed for a specific module.
Please note that if a module needs a dataset which has a parent, then the parent will also be returned.
A hash per <code>dataset</code> is calculated internally and returned in the code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.datasets_to_data(module, datasets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".datasets_to_data_+3A_module">module</code></td>
<td>
<p>(<code>teal_module</code>) module where needed filters are taken from</p>
</td></tr>
<tr><td><code id=".datasets_to_data_+3A_datasets">datasets</code></td>
<td>
<p>(<code>FilteredData</code>) object where needed data are taken from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>teal_data</code> object.
</p>

<hr>
<h2 id='append_module'>Append a <code>teal_module</code> to <code>children</code> of a <code>teal_modules</code> object</h2><span id='topic+append_module'></span>

<h3>Description</h3>

<p>Append a <code>teal_module</code> to <code>children</code> of a <code>teal_modules</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_module(modules, module)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="append_module_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>)</p>
</td></tr>
<tr><td><code id="append_module_+3A_module">module</code></td>
<td>
<p>(<code>teal_module</code>) object to be appended onto the children of <code>modules</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>teal_modules</code> object with <code>module</code> appended.
</p>

<hr>
<h2 id='as_tdata'>Downgrade <code>teal_data</code> objects in modules for compatibility</h2><span id='topic+as_tdata'></span>

<h3>Description</h3>

<p>Convert <code>teal_data</code> to <code>tdata</code> in <code>teal</code> modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_tdata(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_tdata_+3A_x">x</code></td>
<td>
<p>data object, either <code>tdata</code> or <code>teal_data</code>, the latter possibly in a reactive expression</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Recent changes in <code>teal</code> cause modules to fail because modules expect a <code>tdata</code> object
to be passed to the <code>data</code> argument but instead they receive a <code>teal_data</code> object,
which is additionally wrapped in a reactive expression in the server functions.
In order to easily adapt such modules without a proper refactor,
use this function to downgrade the <code>data</code> argument.
</p>


<h3>Value</h3>

<p>Object of class <code>tdata</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>td &lt;- teal_data()
td &lt;- within(td, iris &lt;- iris) %&gt;% within(mtcars &lt;- mtcars)
td
as_tdata(td)
as_tdata(reactive(td))

</code></pre>

<hr>
<h2 id='build_app_title'>Build app title with favicon</h2><span id='topic+build_app_title'></span>

<h3>Description</h3>

<p>A helper function to create the browser title along with a logo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_app_title(
  title = "teal app",
  favicon =
    "https://raw.githubusercontent.com/insightsengineering/hex-stickers/main/PNG/nest.png"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_app_title_+3A_title">title</code></td>
<td>
<p>(<code>character</code>) The browser title for the <code>teal</code> app.</p>
</td></tr>
<tr><td><code id="build_app_title_+3A_favicon">favicon</code></td>
<td>
<p>(<code>character</code>) The path for the icon for the title.
The image/icon path can be remote or the static path accessible by <code>shiny</code>, like the <code style="white-space: pre;">&#8288;www/&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>shiny.tag</code> containing the element that adds the title and logo to the <code>shiny</code> app.
</p>

<hr>
<h2 id='calculate_hashes'>Get the hash of a dataset</h2><span id='topic+calculate_hashes'></span>

<h3>Description</h3>

<p>Get the hash of a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_hashes(datanames, datasets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_hashes_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) names of datasets</p>
</td></tr>
<tr><td><code id="calculate_hashes_+3A_datasets">datasets</code></td>
<td>
<p>(<code>FilteredData</code>) object holding the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of hashes per dataset.
</p>

<hr>
<h2 id='check_filter_datanames'>Check <code>datanames</code> in filters</h2><span id='topic+check_filter_datanames'></span>

<h3>Description</h3>

<p>This function checks whether <code>datanames</code> in filters correspond to those in <code>data</code>,
returning character vector with error messages or <code>TRUE</code> if all checks pass.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_filter_datanames(filters, datanames)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_filter_datanames_+3A_filters">filters</code></td>
<td>
<p>(<code>teal_slices</code>) object</p>
</td></tr>
<tr><td><code id="check_filter_datanames_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) names of datasets available in the <code>data</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>character(1)</code> containing error message or TRUE if validation passes.
</p>

<hr>
<h2 id='check_modules_datanames'>Check <code>datanames</code> in modules</h2><span id='topic+check_modules_datanames'></span>

<h3>Description</h3>

<p>This function ensures specified <code>datanames</code> in modules match those in the data object,
returning error messages or <code>TRUE</code> for successful validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_modules_datanames(modules, datanames)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_modules_datanames_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object</p>
</td></tr>
<tr><td><code id="check_modules_datanames_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) names of datasets available in the <code>data</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>character(1)</code> containing error message or <code>TRUE</code> if validation passes.
</p>

<hr>
<h2 id='create_app_id'>Application ID</h2><span id='topic+create_app_id'></span>

<h3>Description</h3>

<p>Creates App ID used to match filter snapshots to application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_app_id(data, modules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_app_id_+3A_data">data</code></td>
<td>
<p>(<code>teal_data</code> or <code>teal_data_module</code>) as accepted by <code>init</code></p>
</td></tr>
<tr><td><code id="create_app_id_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object as accepted by <code>init</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate app ID that will be used to stamp filter state snapshots.
App ID is a hash of the app's data and modules.
See &quot;transferring snapshots&quot; section in ?snapshot.
</p>


<h3>Value</h3>

<p>A single character string.
</p>

<hr>
<h2 id='deep_copy_filter'>Deep copy <code>teal_slices</code></h2><span id='topic+deep_copy_filter'></span>

<h3>Description</h3>

<p>it's important to create a new copy of <code>teal_slices</code> when
starting a new <code>shiny</code> session. Otherwise, object will be shared
by multiple users as it is created in global environment before
<code>shiny</code> session starts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deep_copy_filter(filter)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deep_copy_filter_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>teal_slices</code>
</p>

<hr>
<h2 id='example_module'>An example <code>teal</code> module</h2><span id='topic+example_module'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_module(label = "example teal module", datanames = "all")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="example_module_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Label shown in the navigation item for the module or module group.
For <code>modules()</code> defaults to <code>"root"</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="example_module_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) A vector with <code>datanames</code> that are relevant for the item. The
filter panel will automatically update the shown filters to include only
filters in the listed datasets. <code>NULL</code> will hide the filter panel,
and the keyword <code>"all"</code> will show filters of all datasets. <code>datanames</code> also determines
a subset of datasets which are appended to the <code>data</code> argument in server function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>teal</code> module which can be included in the <code>modules</code> argument to <code><a href="#topic+init">init()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app &lt;- init(
  data = teal_data(IRIS = iris, MTCARS = mtcars),
  modules = example_module()
)
if (interactive()) {
  shinyApp(app$ui, app$server)
}
</code></pre>

<hr>
<h2 id='extract_module'>Extract/Remove module(s) of specific class</h2><span id='topic+extract_module'></span><span id='topic+drop_module'></span>

<h3>Description</h3>

<p>Given a <code>teal_module</code> or a <code>teal_modules</code>, return the elements of the structure according to <code>class</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_module(modules, class)

drop_module(modules, class)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_module_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>)</p>
</td></tr>
<tr><td><code id="extract_module_+3A_class">class</code></td>
<td>
<p>The class name of <code>teal_module</code> to be extracted or dropped.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> For <code>extract_module</code>, a <code>teal_module</code> of class <code>class</code> or <code>teal_modules</code> containing modules of class <code>class</code>.
</p>
</li>
<li><p> For <code>drop_module</code>, the opposite, which is all <code>teal_modules</code> of  class other than <code>class</code>.
</p>
</li></ul>

<p><code>teal_modules</code>
</p>

<hr>
<h2 id='filter_manager_module_srv'>Module specific filter manager</h2><span id='topic+filter_manager_module_srv'></span>

<h3>Description</h3>

<p>Tracks filter states in a single module.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_manager_module_srv(id, module_fd, slices_global)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_manager_module_srv_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
<code>shiny</code> module id.</p>
</td></tr>
<tr><td><code id="filter_manager_module_srv_+3A_module_fd">module_fd</code></td>
<td>
<p>(<code>FilteredData</code>)
Object containing the data to be filtered in a single <code>teal</code> module.</p>
</td></tr>
<tr><td><code id="filter_manager_module_srv_+3A_slices_global">slices_global</code></td>
<td>
<p>(<code>reactiveVal</code>)
stores <code>teal_slices</code> with all available filters; allows the following actions:
</p>

<ul>
<li><p> to disable/enable a specific filter in a module
</p>
</li>
<li><p> to restore saved filter settings
</p>
</li>
<li><p> to save current filter panel settings
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>This module tracks the state of a single <code>FilteredData</code> object and global <code>teal_slices</code>
and updates both objects as necessary. Filter states added in different modules
Filter states added any individual module are added to global <code>teal_slices</code>
and from there become available in other modules
by setting <code>private$available_teal_slices</code> in each <code>FilteredData</code>.
</p>


<h3>Value</h3>

<p>A <code>reactive</code> expression containing the slices active in this module.
</p>

<hr>
<h2 id='get_client_timezone'>Get client timezone</h2><span id='topic+get_client_timezone'></span>

<h3>Description</h3>

<p>User timezone in the browser may be different to the one on the server.
This script can be run to register a <code>shiny</code> input which contains information about the timezone in the browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_client_timezone(ns)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_client_timezone_+3A_ns">ns</code></td>
<td>
<p>(<code>function</code>) namespace function passed from the <code>session</code> object in the <code>shiny</code> server.
For <code>shiny</code> modules this will allow for proper name spacing of the registered input.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>shiny</code>) input variable accessible with <code>input$tz</code> which is a (<code>character</code>)
string containing the timezone of the browser/client.
</p>

<hr>
<h2 id='get_code_tdata'>Wrapper for <code>get_code.tdata</code></h2><span id='topic+get_code_tdata'></span>

<h3>Description</h3>

<p>This wrapper is to be used by downstream packages to extract the code of a <code>tdata</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_code_tdata(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_code_tdata_+3A_data">data</code></td>
<td>
<p>(<code>tdata</code>) object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>character</code>) code used in the <code>tdata</code> object.
</p>

<hr>
<h2 id='get_datasets_code'>Get datasets code</h2><span id='topic+get_datasets_code'></span>

<h3>Description</h3>

<p>Retrieve complete code to create, verify, and filter a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_datasets_code(datanames, datasets, hashes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_datasets_code_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) names of datasets to extract code from</p>
</td></tr>
<tr><td><code id="get_datasets_code_+3A_datasets">datasets</code></td>
<td>
<p>(<code>FilteredData</code>) object</p>
</td></tr>
<tr><td><code id="get_datasets_code_+3A_hashes">hashes</code></td>
<td>
<p>named (<code>list</code>) of hashes per dataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character string concatenated from the following elements:
</p>

<ul>
<li><p> data pre-processing code (from <code>data</code> argument in <code>init</code>)
</p>
</li>
<li><p> hash check of loaded objects
</p>
</li>
<li><p> filter code (if any)
</p>
</li></ul>


<hr>
<h2 id='get_metadata'>Function to get metadata from a <code>tdata</code> object</h2><span id='topic+get_metadata'></span><span id='topic+get_metadata.tdata'></span><span id='topic+get_metadata.default'></span>

<h3>Description</h3>

<p>Function to get metadata from a <code>tdata</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metadata(data, dataname)

## S3 method for class 'tdata'
get_metadata(data, dataname)

## Default S3 method:
get_metadata(data, dataname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_metadata_+3A_data">data</code></td>
<td>
<p>(<code>tdata</code> - object) to extract the data from</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_dataname">dataname</code></td>
<td>
<p>(<code>character(1)</code>) the dataset name whose metadata is requested</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either list of metadata or NULL if no metadata.
</p>

<hr>
<h2 id='get_rcode_libraries'>Generates library calls from current session info</h2><span id='topic+get_rcode_libraries'></span>

<h3>Description</h3>

<p>Function to create multiple library calls out of current session info to ensure reproducible code works.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_rcode_libraries()
</code></pre>


<h3>Value</h3>

<p>Character vector of <code style="white-space: pre;">&#8288;library(&lt;package&gt;)&#8288;</code> calls.
</p>

<hr>
<h2 id='include_css_files'>Include <code>CSS</code> files from <code style="white-space: pre;">&#8288;/inst/css/&#8288;</code> package directory to application header</h2><span id='topic+include_css_files'></span>

<h3>Description</h3>

<p><code>system.file</code> should not be used to access files in other packages, it does
not work with <code>devtools</code>. Therefore, we redefine this method in each package
as needed. Thus, we do not export this method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_css_files(pattern = "*")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_css_files_+3A_pattern">pattern</code></td>
<td>
<p>(<code>character</code>) pattern of files to be included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>HTML code that includes <code>CSS</code> files.
</p>

<hr>
<h2 id='include_js_files'>Include <code>JS</code> files from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory to application header</h2><span id='topic+include_js_files'></span>

<h3>Description</h3>

<p><code>system.file</code> should not be used to access files in other packages, it does
not work with <code>devtools</code>. Therefore, we redefine this method in each package
as needed. Thus, we do not export this method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_js_files(pattern = NULL, except = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_js_files_+3A_pattern">pattern</code></td>
<td>
<p>(<code>character</code>) pattern of files to be included, passed to <code>system.file</code></p>
</td></tr>
<tr><td><code id="include_js_files_+3A_except">except</code></td>
<td>
<p>(<code>character</code>) vector of basename filenames to be excluded</p>
</td></tr>
</table>


<h3>Value</h3>

<p>HTML code that includes <code>JS</code> files.
</p>

<hr>
<h2 id='include_teal_css_js'>Code to include <code>teal</code> <code>CSS</code> and <code>JavaScript</code> files</h2><span id='topic+include_teal_css_js'></span>

<h3>Description</h3>

<p>This is useful when you want to use the same <code>JavaScript</code> and <code>CSS</code> files that are
used with the <code>teal</code> application.
This is also useful for running standalone modules in <code>teal</code> with the correct
styles.
Also initializes <code>shinyjs</code> so you can use it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_teal_css_js()
</code></pre>


<h3>Details</h3>

<p>Simply add <code>include_teal_css_js()</code> as one of the UI elements.
</p>


<h3>Value</h3>

<p>A <code>shiny.tag.list</code>.
</p>

<hr>
<h2 id='init'>Create the server and UI function for the <code>shiny</code> app</h2><span id='topic+init'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>End-users: This is the most important function for you to start a
<code>teal</code> app that is composed of <code>teal</code> modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init(
  data,
  modules,
  filter = teal_slices(),
  title = build_app_title(),
  header = tags$p(),
  footer = tags$p(),
  id = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_+3A_data">data</code></td>
<td>
<p>(<code>teal_data</code> or <code>teal_data_module</code>)
For constructing the data object, refer to <code>teal_data()</code> and <code><a href="#topic+teal_data_module">teal_data_module()</a></code>.</p>
</td></tr>
<tr><td><code id="init_+3A_modules">modules</code></td>
<td>
<p>(<code>list</code> or <code>teal_modules</code> or <code>teal_module</code>)
nested list of <code>teal_modules</code> or <code>teal_module</code> objects or a single
<code>teal_modules</code> or <code>teal_module</code> object. These are the specific output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="init_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
<tr><td><code id="init_+3A_title">title</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The browser window title. Defaults to a title &quot;teal app&quot; with the icon of NEST.
Can be created using the <code>build_app_title()</code> or
by passing a valid <code>shiny.tag</code> which is a head tag with title and link tag.</p>
</td></tr>
<tr><td><code id="init_+3A_header">header</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The header of the app.</p>
</td></tr>
<tr><td><code id="init_+3A_footer">footer</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The footer of the app.</p>
</td></tr>
<tr><td><code id="init_+3A_id">id</code></td>
<td>
<p>(<code>character</code>)
Optional string specifying the <code>shiny</code> module id in cases it is used as a <code>shiny</code> module
rather than a standalone <code>shiny</code> app. This is a legacy feature.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When initializing the <code>teal</code> app, if <code>datanames</code> are not set for the <code>teal_data</code> object,
defaults from the <code>teal_data</code> environment will be used.
</p>


<h3>Value</h3>

<p>Named list with server and UI functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app &lt;- init(
  data = teal_data(
    new_iris = transform(iris, id = seq_len(nrow(iris))),
    new_mtcars = transform(mtcars, id = seq_len(nrow(mtcars))),
    code = "
      new_iris &lt;- transform(iris, id = seq_len(nrow(iris)))
      new_mtcars &lt;- transform(mtcars, id = seq_len(nrow(mtcars)))
    "
  ),
  modules = modules(
    module(
      label = "data source",
      server = function(input, output, session, data) {},
      ui = function(id, ...) div(p("information about data source")),
      datanames = "all"
    ),
    example_module(label = "example teal module"),
    module(
      "Iris Sepal.Length histogram",
      server = function(input, output, session, data) {
        output$hist &lt;- renderPlot(
          hist(data()[["new_iris"]]$Sepal.Length)
        )
      },
      ui = function(id, ...) {
        ns &lt;- NS(id)
        plotOutput(ns("hist"))
      },
      datanames = "new_iris"
    )
  ),
  filter = teal_slices(
    teal_slice(dataname = "new_iris", varname = "Species"),
    teal_slice(dataname = "new_iris", varname = "Sepal.Length"),
    teal_slice(dataname = "new_mtcars", varname = "cyl"),
    exclude_varnames = list(new_iris = c("Sepal.Width", "Petal.Width")),
    module_specific = TRUE,
    mapping = list(
      `example teal module` = "new_iris Species",
      `Iris Sepal.Length histogram` = "new_iris Species",
      global_filters = "new_mtcars cyl"
    )
  ),
  title = "App title",
  header = tags$h1("Sample App"),
  footer = tags$p("Copyright 2017 - 2023")
)
if (interactive()) {
  shinyApp(app$ui, app$server)
}

</code></pre>

<hr>
<h2 id='is_arg_used'>Does the object make use of the <code>arg</code></h2><span id='topic+is_arg_used'></span>

<h3>Description</h3>

<p>Does the object make use of the <code>arg</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_arg_used(modules, arg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_arg_used_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_module</code> or <code>teal_modules</code>) object</p>
</td></tr>
<tr><td><code id="is_arg_used_+3A_arg">arg</code></td>
<td>
<p>(<code>character(1)</code>) names of the arguments to be checked against formals of <code>teal</code> modules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>logical</code> whether the object makes use of <code>arg</code>.
</p>

<hr>
<h2 id='join_keys.tdata'>Extract <code>join_keys</code> from <code>tdata</code></h2><span id='topic+join_keys.tdata'></span>

<h3>Description</h3>

<p>Extract <code>join_keys</code> from <code>tdata</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tdata'
join_keys(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="join_keys.tdata_+3A_data">data</code></td>
<td>
<p>(<code>tdata</code>) object</p>
</td></tr>
<tr><td><code id="join_keys.tdata_+3A_...">...</code></td>
<td>
<p>Additional arguments (not used)</p>
</td></tr>
</table>

<hr>
<h2 id='landing_popup_module'>Landing popup module</h2><span id='topic+landing_popup_module'></span>

<h3>Description</h3>

<p>Creates a landing welcome popup for <code>teal</code> applications.
</p>
<p>This module is used to display a popup dialog when the application starts.
The dialog blocks access to the application and must be closed with a button before the application can be viewed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>landing_popup_module(
  label = "Landing Popup",
  title = NULL,
  content = NULL,
  buttons = modalButton("Accept")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="landing_popup_module_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Label of the module.</p>
</td></tr>
<tr><td><code id="landing_popup_module_+3A_title">title</code></td>
<td>
<p>(<code>character(1)</code>) Text to be displayed as popup title.</p>
</td></tr>
<tr><td><code id="landing_popup_module_+3A_content">content</code></td>
<td>
<p>(<code>character(1)</code>, <code>shiny.tag</code> or <code>shiny.tag.list</code>) with the content of the popup.
Passed to <code>...</code> of <code>shiny::modalDialog</code>. See examples.</p>
</td></tr>
<tr><td><code id="landing_popup_module_+3A_buttons">buttons</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>shiny.tag.list</code>) Typically a <code>modalButton</code> or <code>actionButton</code>. See examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>teal_module</code> (extended with <code>teal_landing_module</code> class) to be used in <code>teal</code> applications.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app1 &lt;- init(
  data = teal_data(iris = iris),
  modules = modules(
    landing_popup_module(
      content = "A place for the welcome message or a disclaimer statement.",
      buttons = modalButton("Proceed")
    ),
    example_module()
  )
)
if (interactive()) {
  shinyApp(app1$ui, app1$server)
}

app2 &lt;- init(
  data = teal_data(iris = iris),
  modules = modules(
    landing_popup_module(
      title = "Welcome",
      content = tags$b(
        "A place for the welcome message or a disclaimer statement.",
        style = "color: red;"
      ),
      buttons = tagList(
        modalButton("Proceed"),
        actionButton("read", "Read more",
          onclick = "window.open('http://google.com', '_blank')"
        ),
        actionButton("close", "Reject", onclick = "window.close()")
      )
    ),
    example_module()
  )
)

if (interactive()) {
  shinyApp(app2$ui, app2$server)
}

</code></pre>

<hr>
<h2 id='matrix_to_mapping'>Convert mapping matrix to filter mapping specification.</h2><span id='topic+matrix_to_mapping'></span>

<h3>Description</h3>

<p>Transform a mapping matrix, i.e. a data frame that maps each filter state to each module,
to a list specification like the one used in the <code>mapping</code> attribute of <code>teal_slices</code>.
Global filters are gathered in one list element.
If a module has no active filters but the global ones, it will not be mentioned in the output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix_to_mapping(mapping_matrix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix_to_mapping_+3A_mapping_matrix">mapping_matrix</code></td>
<td>
<p>(<code>data.frame</code>) of logical vectors where
columns represent modules and row represent <code>teal_slice</code>s</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named <code>list</code> like that in the <code>mapping</code> attribute of a <code>teal_slices</code> object.
</p>

<hr>
<h2 id='module_filter_manager'>Manage multiple <code>FilteredData</code> objects</h2><span id='topic+module_filter_manager'></span><span id='topic+filter_manager_ui'></span><span id='topic+filter_manager_srv'></span>

<h3>Description</h3>

<p>Oversee filter states across the entire application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_manager_ui(id)

filter_manager_srv(id, filtered_data_list, filter)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_filter_manager_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
<code>shiny</code> module id.</p>
</td></tr>
<tr><td><code id="module_filter_manager_+3A_filtered_data_list">filtered_data_list</code></td>
<td>
<p>(named <code>list</code>)
A list, possibly nested, of <code>FilteredData</code> objects.
Each <code>FilteredData</code> will be served to one module in the <code>teal</code> application.
The structure of the list must reflect the nesting of modules in tabs
and the names of the list must match the labels of their respective modules.</p>
</td></tr>
<tr><td><code id="module_filter_manager_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This module observes changes in the filters of each <code>FilteredData</code> object
and keeps track of all filters used. A mapping of filters to modules
is kept in the <code>mapping_matrix</code> object (which is actually a <code>data.frame</code>)
that tracks which filters (rows) are active in which modules (columns).
</p>


<h3>Value</h3>

<p>A list of <code>reactive</code>s, each holding a <code>teal_slices</code>, as returned by <code>filter_manager_module_srv</code>.
</p>

<hr>
<h2 id='module_filter_manager_modal'>Filter manager modal</h2><span id='topic+module_filter_manager_modal'></span><span id='topic+filter_manager_modal_ui'></span><span id='topic+filter_manager_modal_srv'></span>

<h3>Description</h3>

<p>Opens a modal containing the filter manager UI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_manager_modal_ui(id)

filter_manager_modal_srv(id, filtered_data_list, filter)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_filter_manager_modal_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
<code>shiny</code> module id.</p>
</td></tr>
<tr><td><code id="module_filter_manager_modal_+3A_filtered_data_list">filtered_data_list</code></td>
<td>
<p>(named <code>list</code>)
A list, possibly nested, of <code>FilteredData</code> objects.
Each <code>FilteredData</code> will be served to one module in the <code>teal</code> application.
The structure of the list must reflect the nesting of modules in tabs
and the names of the list must match the labels of their respective modules.</p>
</td></tr>
<tr><td><code id="module_filter_manager_modal_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='module_labels'>Retrieve labels from <code>teal_modules</code></h2><span id='topic+module_labels'></span>

<h3>Description</h3>

<p>Retrieve labels from <code>teal_modules</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>module_labels(modules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_labels_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the labels of the modules. If the modules are nested,
the function returns a nested <code>list</code> of labels.
</p>

<hr>
<h2 id='module_nested_tabs'>Create a UI of nested tabs of <code>teal_modules</code></h2><span id='topic+module_nested_tabs'></span><span id='topic+ui_nested_tabs'></span><span id='topic+ui_nested_tabs.default'></span><span id='topic+ui_nested_tabs.teal_modules'></span><span id='topic+ui_nested_tabs.teal_module'></span><span id='topic+srv_nested_tabs'></span><span id='topic+srv_nested_tabs.default'></span><span id='topic+srv_nested_tabs.teal_modules'></span><span id='topic+srv_nested_tabs.teal_module'></span>

<h3>Description</h3>

<p>Create a UI of nested tabs of <code>teal_modules</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ui_nested_tabs(id, modules, datasets, depth = 0L, is_module_specific = FALSE)

## Default S3 method:
ui_nested_tabs(id, modules, datasets, depth = 0L, is_module_specific = FALSE)

## S3 method for class 'teal_modules'
ui_nested_tabs(id, modules, datasets, depth = 0L, is_module_specific = FALSE)

## S3 method for class 'teal_module'
ui_nested_tabs(id, modules, datasets, depth = 0L, is_module_specific = FALSE)

srv_nested_tabs(
  id,
  datasets,
  modules,
  is_module_specific = FALSE,
  reporter = teal.reporter::Reporter$new()
)

## Default S3 method:
srv_nested_tabs(
  id,
  datasets,
  modules,
  is_module_specific = FALSE,
  reporter = teal.reporter::Reporter$new()
)

## S3 method for class 'teal_modules'
srv_nested_tabs(
  id,
  datasets,
  modules,
  is_module_specific = FALSE,
  reporter = teal.reporter::Reporter$new()
)

## S3 method for class 'teal_module'
srv_nested_tabs(
  id,
  datasets,
  modules,
  is_module_specific = TRUE,
  reporter = teal.reporter::Reporter$new()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_nested_tabs_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
module id</p>
</td></tr>
<tr><td><code id="module_nested_tabs_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object containing the output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="module_nested_tabs_+3A_datasets">datasets</code></td>
<td>
<p>(named <code>list</code> of <code>FilteredData</code>)
object to store filter state and filtered datasets, shared across modules. For more
details see <code><a href="teal.slice.html#topic+FilteredData">teal.slice::FilteredData</a></code>. Structure of the list must be the same as structure
of the <code>modules</code> argument and list names must correspond to the labels in <code>modules</code>.
When filter is not module-specific then list contains the same object in all elements.</p>
</td></tr>
<tr><td><code id="module_nested_tabs_+3A_depth">depth</code></td>
<td>
<p>(<code>integer(1)</code>)
number which helps to determine depth of the modules nesting.</p>
</td></tr>
<tr><td><code id="module_nested_tabs_+3A_is_module_specific">is_module_specific</code></td>
<td>
<p>(<code>logical(1)</code>)
flag determining if the filter panel is global or module-specific.
When set to <code>TRUE</code>, a filter panel is called inside of each module tab.</p>
</td></tr>
<tr><td><code id="module_nested_tabs_+3A_reporter">reporter</code></td>
<td>
<p>(<code>Reporter</code>) object from <code>teal.reporter</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on the class of <code>modules</code>, <code>ui_nested_tabs</code> returns:
</p>

<ul>
<li> <p><code>teal_module</code>: instantiated UI of the module.
</p>
</li>
<li> <p><code>teal_modules</code>: <code>tabsetPanel</code> with each tab corresponding to recursively
calling this function on it.
</p>
</li></ul>

<p><code>srv_nested_tabs</code> returns a reactive which returns the active module that corresponds to the selected tab.
</p>


<h3><code>ui_nested_tabs</code></h3>

<p>Each <code>teal_modules</code> is translated to a <code>tabsetPanel</code> and each
of its children is another tab-module called recursively. The UI of a
<code>teal_module</code> is obtained by calling its UI function.
</p>
<p>The <code>datasets</code> argument is required to resolve the <code>teal</code> arguments in an
isolated context (with respect to reactivity).
</p>


<h3><code>srv_nested_tabs</code></h3>

<p>This module recursively calls all elements of <code>modules</code> and returns currently active one.
</p>

<ul>
<li> <p><code>teal_module</code> returns self as a active module.
</p>
</li>
<li> <p><code>teal_modules</code> also returns module active within self which is determined by the <code>input$active_tab</code>.
</p>
</li></ul>


<hr>
<h2 id='module_tabs_with_filters'>Add right filter panel into each of the top-level <code>teal_modules</code> UIs</h2><span id='topic+module_tabs_with_filters'></span><span id='topic+ui_tabs_with_filters'></span><span id='topic+srv_tabs_with_filters'></span>

<h3>Description</h3>

<p>The <a href="#topic+ui_nested_tabs">ui_nested_tabs</a> function returns a nested tabbed UI corresponding
to the nested modules.
This function adds the right filter panel to each main tab.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ui_tabs_with_filters(id, modules, datasets, filter = teal_slices())

srv_tabs_with_filters(
  id,
  datasets,
  modules,
  reporter = teal.reporter::Reporter$new(),
  filter = teal_slices()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_tabs_with_filters_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
module id</p>
</td></tr>
<tr><td><code id="module_tabs_with_filters_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object containing the output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="module_tabs_with_filters_+3A_datasets">datasets</code></td>
<td>
<p>(named <code>list</code> of <code>FilteredData</code>)
object to store filter state and filtered datasets, shared across modules. For more
details see <code><a href="teal.slice.html#topic+FilteredData">teal.slice::FilteredData</a></code>. Structure of the list must be the same as structure
of the <code>modules</code> argument and list names must correspond to the labels in <code>modules</code>.
When filter is not module-specific then list contains the same object in all elements.</p>
</td></tr>
<tr><td><code id="module_tabs_with_filters_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
<tr><td><code id="module_tabs_with_filters_+3A_reporter">reporter</code></td>
<td>
<p>(<code>Reporter</code>) object from <code>teal.reporter</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The right filter panel's filter choices affect the <code>datasets</code> object. Therefore,
all modules using the same <code>datasets</code> share the same filters.
</p>
<p>This works with nested modules of depth greater than 2, though the filter
panel is inserted at the right of the modules at depth 1 and not at the leaves.
</p>


<h3>Value</h3>

<p>A <code>shiny.tag.list</code> containing the main menu, placeholders for filters and placeholders for the <code>teal</code> modules.
</p>

<hr>
<h2 id='module_teal'><code>teal</code> main app module</h2><span id='topic+module_teal'></span><span id='topic+ui_teal'></span><span id='topic+srv_teal'></span>

<h3>Description</h3>

<p>This is the main <code>teal</code> app that puts everything together.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ui_teal(
  id,
  splash_ui = tags$h2("Starting the Teal App"),
  title = build_app_title(),
  header = tags$p(),
  footer = tags$p()
)

srv_teal(id, modules, teal_data_rv, filter = teal_slices())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_teal_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
module id</p>
</td></tr>
<tr><td><code id="module_teal_+3A_splash_ui">splash_ui</code></td>
<td>
<p>(<code>shiny.tag</code>) UI to display initially,
can be a splash screen or a <code>shiny</code> module UI. For the latter, see
<code><a href="#topic+init">init()</a></code> about how to call the corresponding server function.</p>
</td></tr>
<tr><td><code id="module_teal_+3A_title">title</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The browser window title. Defaults to a title &quot;teal app&quot; with the icon of NEST.
Can be created using the <code>build_app_title()</code> or
by passing a valid <code>shiny.tag</code> which is a head tag with title and link tag.</p>
</td></tr>
<tr><td><code id="module_teal_+3A_header">header</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The header of the app.</p>
</td></tr>
<tr><td><code id="module_teal_+3A_footer">footer</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The footer of the app.</p>
</td></tr>
<tr><td><code id="module_teal_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object containing the output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="module_teal_+3A_teal_data_rv">teal_data_rv</code></td>
<td>
<p>(<code>reactive</code>)
returns the <code>teal_data</code>, only evaluated once, <code>NULL</code> value is ignored</p>
</td></tr>
<tr><td><code id="module_teal_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It displays the splash UI which is used to fetch the data, possibly
prompting for a password input to fetch the data. Once the data is ready,
the splash screen is replaced by the actual <code>teal</code> UI that is tabsetted and
has a filter panel with <code>datanames</code> that are relevant for the current tab.
Nested tabs are possible, but we limit it to two nesting levels for reasons
of clarity of the UI.
</p>
<p>The splash screen functionality can also be used
for non-delayed data which takes time to load into memory, avoiding
<code>shiny</code> session timeouts.
</p>
<p>Server evaluates the <code>teal_data_rv</code> (delayed data mechanism) and creates the
<code>datasets</code> object that is shared across modules.
Once it is ready and non-<code>NULL</code>, the splash screen is replaced by the
main <code>teal</code> UI that depends on the data.
The currently active tab is tracked and the right filter panel
updates the displayed datasets to filter for according to the active <code>datanames</code>
of the tab.
</p>
<p>It is written as a <code>shiny</code> module so it can be added into other apps as well.
</p>


<h3>Value</h3>

<p>Returns a <code>reactive</code> expression which returns the currently active module.
</p>

<hr>
<h2 id='module_teal_with_splash'>Add splash screen to <code>teal</code> application</h2><span id='topic+module_teal_with_splash'></span><span id='topic+ui_teal_with_splash'></span><span id='topic+srv_teal_with_splash'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Displays custom splash screen during initial delayed data loading.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ui_teal_with_splash(
  id,
  data,
  title = build_app_title(),
  header = tags$p(),
  footer = tags$p()
)

srv_teal_with_splash(id, data, modules, filter = teal_slices())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module_teal_with_splash_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>)
module id</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_data">data</code></td>
<td>
<p>(<code>teal_data</code> or <code>teal_data_module</code>)
For constructing the data object, refer to <code>teal_data()</code> and <code><a href="#topic+teal_data_module">teal_data_module()</a></code>.</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_title">title</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The browser window title. Defaults to a title &quot;teal app&quot; with the icon of NEST.
Can be created using the <code>build_app_title()</code> or
by passing a valid <code>shiny.tag</code> which is a head tag with title and link tag.</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_header">header</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The header of the app.</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_footer">footer</code></td>
<td>
<p>(<code>shiny.tag</code> or <code>character(1)</code>)
The footer of the app.</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object containing the output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="module_teal_with_splash_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
Specifies the initial filter using <code><a href="#topic+teal_slices">teal_slices()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This module pauses app initialization pending delayed data loading.
This is necessary because the filter panel and modules depend on the data to initialize.
</p>
<p><code>teal_with_splash</code> follows the <code>shiny</code> module convention.
<code><a href="#topic+init">init()</a></code> is a wrapper around this that assumes that <code>teal</code> it is
the top-level module and cannot be embedded.
</p>
<p>Note: It is no longer recommended to embed <code>teal</code> in <code>shiny</code> apps as a module.
but rather use <code>init</code> to create a standalone application.
</p>


<h3>Value</h3>

<p>Returns a <code>reactive</code> expression containing a <code>teal_data</code> object when data is loaded or <code>NULL</code> when it is not.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+init">init()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>teal_modules &lt;- modules(example_module())
# Shiny app with modular integration of teal
ui &lt;- fluidPage(
  ui_teal_with_splash(id = "app1", data = teal_data())
)

server &lt;- function(input, output, session) {
  srv_teal_with_splash(
    id = "app1",
    data = teal_data(iris = iris),
    modules = teal_modules
  )
}

if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='modules_datasets'>Create filterable data for modules</h2><span id='topic+modules_datasets'></span>

<h3>Description</h3>

<p>Converts input data to a <code>FilteredData</code> object(s) to allow filtering before passing data to individual modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modules_datasets(
  data,
  modules,
  filters,
  filtered_data_singleton = teal_data_to_filtered_data(data)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modules_datasets_+3A_data">data</code></td>
<td>
<p>(<code>teal_data</code>)</p>
</td></tr>
<tr><td><code id="modules_datasets_+3A_modules">modules</code></td>
<td>
<p>(<code>teal_modules</code>) object</p>
</td></tr>
<tr><td><code id="modules_datasets_+3A_filters">filters</code></td>
<td>
<p>(<code>teal_slices</code>) object</p>
</td></tr>
<tr><td><code id="modules_datasets_+3A_filtered_data_singleton">filtered_data_singleton</code></td>
<td>
<p>A result of <code>teal_data_to_filtered_data</code> applied to <code>data</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns list of same shape as <code>modules</code>, containing <code>FilteredData</code> at every leaf.
If module specific, each leaf contains different instance, otherwise every leaf contains <code>filtered_data_singleton</code>.
</p>

<hr>
<h2 id='modules_depth'>Get module depth</h2><span id='topic+modules_depth'></span>

<h3>Description</h3>

<p>Depth starts at 0, so a single <code>teal.module</code> has depth 0.
Nesting it increases overall depth by 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modules_depth(modules, depth = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modules_depth_+3A_modules">modules</code></td>
<td>
<p>(<code>list</code> or <code>teal_modules</code> or <code>teal_module</code>)
nested list of <code>teal_modules</code> or <code>teal_module</code> objects or a single
<code>teal_modules</code> or <code>teal_module</code> object. These are the specific output modules which
will be displayed in the <code>teal</code> application. See <code><a href="#topic+modules">modules()</a></code> and <code><a href="#topic+module">module()</a></code> for
more details.</p>
</td></tr>
<tr><td><code id="modules_depth_+3A_depth">depth</code></td>
<td>
<p>optional, integer determining current depth level</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depth level for given module.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span><span id='topic+badge'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>lifecycle</dt><dd><p><code><a href="lifecycle.html#topic+badge">badge</a></code></p>
</dd>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='report_card_template'>Template function for <code>TealReportCard</code> creation and customization</h2><span id='topic+report_card_template'></span>

<h3>Description</h3>

<p>This function generates a report card with a title,
an optional description, and the option to append the filter state list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_card_template(
  title,
  label,
  description = NULL,
  with_filter,
  filter_panel_api
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_card_template_+3A_title">title</code></td>
<td>
<p>(<code>character(1)</code>) title of the card (unless overwritten by label)</p>
</td></tr>
<tr><td><code id="report_card_template_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) label provided by the user when adding the card</p>
</td></tr>
<tr><td><code id="report_card_template_+3A_description">description</code></td>
<td>
<p>(<code>character(1)</code>) optional additional description</p>
</td></tr>
<tr><td><code id="report_card_template_+3A_with_filter">with_filter</code></td>
<td>
<p>(<code>logical(1)</code>) flag indicating to add filter state</p>
</td></tr>
<tr><td><code id="report_card_template_+3A_filter_panel_api">filter_panel_api</code></td>
<td>
<p>(<code>FilterPanelAPI</code>) object with API that allows the generation
of the filter state in the report</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>TealReportCard</code>) populated with a title, description and filter state.
</p>

<hr>
<h2 id='reporter_previewer_module'>Create a <code>teal</code> module for previewing a report</h2><span id='topic+reporter_previewer_module'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function wraps <code><a href="teal.reporter.html#topic+reporter_previewer_ui">teal.reporter::reporter_previewer_ui()</a></code> and
<code><a href="teal.reporter.html#topic+reporter_previewer_srv">teal.reporter::reporter_previewer_srv()</a></code> into a <code>teal_module</code> to be
used in <code>teal</code> applications.
</p>
<p>If you are creating a <code>teal</code> application using <code><a href="#topic+init">init()</a></code> then this
module will be added to your application automatically if any of your <code>teal_modules</code>
support report generation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reporter_previewer_module(label = "Report previewer", server_args = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reporter_previewer_module_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Label shown in the navigation item for the module or module group.
For <code>modules()</code> defaults to <code>"root"</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="reporter_previewer_module_+3A_server_args">server_args</code></td>
<td>
<p>(named <code>list</code>)
Arguments passed to <code><a href="teal.reporter.html#topic+reporter_previewer_srv">teal.reporter::reporter_previewer_srv()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>teal_module</code> (extended with <code>teal_module_previewer</code> class) containing the <code>teal.reporter</code> previewer functionality.
</p>

<hr>
<h2 id='run_js_files'>Run <code>JS</code> file from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory</h2><span id='topic+run_js_files'></span>

<h3>Description</h3>

<p>This is triggered from the server to execute on the client
rather than triggered directly on the client.
Unlike <code>include_js_files</code> which includes <code>JavaScript</code> functions,
the <code>run_js</code> actually executes <code>JavaScript</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_js_files(files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_js_files_+3A_files">files</code></td>
<td>
<p>(<code>character</code>) vector of filenames.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>system.file</code> should not be used to access files in other packages, it does
not work with <code>devtools</code>. Therefore, we redefine this method in each package
as needed. Thus, we do not export this method.
</p>


<h3>Value</h3>

<p>returns <code>NULL</code>, invisibly.
</p>

<hr>
<h2 id='show_rcode_modal'>Show <code>R</code> code modal</h2><span id='topic+show_rcode_modal'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Use the <code><a href="shiny.html#topic+showModal">shiny::showModal()</a></code> function to show the <code>R</code> code inside.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_rcode_modal(title = NULL, rcode, session = getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_rcode_modal_+3A_title">title</code></td>
<td>
<p>(<code>character(1)</code>)
Title of the modal, displayed in the first comment of the <code>R</code> code.</p>
</td></tr>
<tr><td><code id="show_rcode_modal_+3A_rcode">rcode</code></td>
<td>
<p>(<code>character</code>)
vector with <code>R</code> code to show inside the modal.</p>
</td></tr>
<tr><td><code id="show_rcode_modal_+3A_session">session</code></td>
<td>
<p>(<code>ShinySession</code> optional)
<code>shiny</code> session object, if missing then <code><a href="shiny.html#topic+domains">shiny::getDefaultReactiveDomain()</a></code> is used.</p>
</td></tr>
</table>


<h3>References</h3>

<p><code><a href="shiny.html#topic+showModal">shiny::showModal()</a></code>
</p>

<hr>
<h2 id='slices_store'>Store and restore <code>teal_slices</code> object</h2><span id='topic+slices_store'></span><span id='topic+slices_restore'></span>

<h3>Description</h3>

<p>Functions that write a <code>teal_slices</code> object to a file in the <code>JSON</code> format,
and also restore the object from disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slices_store(tss, file)

slices_restore(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="slices_store_+3A_tss">tss</code></td>
<td>
<p>(<code>teal_slices</code>) object to be stored.</p>
</td></tr>
<tr><td><code id="slices_store_+3A_file">file</code></td>
<td>
<p>(<code>character(1)</code>) file path where <code>teal_slices</code> object will be
saved and restored. The file extension should be <code>".json"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Date and date time objects are stored in the following formats:
</p>

<ul>
<li> <p><code>Date</code> class is converted to the <code>"ISO8601"</code> standard (<code>YYYY-MM-DD</code>).
</p>
</li>
<li> <p><code>POSIX*t</code> classes are converted to character by using
<code>format.POSIX*t(usetz = TRUE, tz = "UTC")</code> (<code style="white-space: pre;">&#8288;YYYY-MM-DD HH:MM:SS UTC&#8288;</code>, where
<code>UTC</code> is the <code style="white-space: pre;">&#8288;Coordinated Universal Time&#8288;</code> timezone short-code).
</p>
</li></ul>

<p>This format is assumed during <code>slices_restore</code>. All <code>POSIX*t</code> objects in
<code>selected</code> or <code>choices</code> fields of <code>teal_slice</code> objects are always printed in
<code>UTC</code> timezone as well.
</p>


<h3>Value</h3>

<p><code>slices_store</code> returns <code>NULL</code>, invisibly.
</p>
<p><code>slices_restore</code> returns a <code>teal_slices</code> object restored from the file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+teal_slices">teal_slices()</a></code>
</p>

<hr>
<h2 id='snapshot_manager_module'>Filter state snapshot management</h2><span id='topic+snapshot_manager_module'></span><span id='topic+snapshot_manager_ui'></span><span id='topic+snapshot'></span><span id='topic+snapshot_manager'></span><span id='topic+snapshot_manager_srv'></span>

<h3>Description</h3>

<p>Capture and restore snapshots of the global (app) filter state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snapshot_manager_ui(id)

snapshot_manager_srv(id, slices_global, mapping_matrix, filtered_data_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="snapshot_manager_module_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>) <code>shiny</code> module id</p>
</td></tr>
<tr><td><code id="snapshot_manager_module_+3A_slices_global">slices_global</code></td>
<td>
<p>(<code>reactiveVal</code>) that contains a <code>teal_slices</code> object
containing all <code>teal_slice</code>s existing in the app, both active and inactive</p>
</td></tr>
<tr><td><code id="snapshot_manager_module_+3A_mapping_matrix">mapping_matrix</code></td>
<td>
<p>(<code>reactive</code>) that contains a <code>data.frame</code> representation
of the mapping of filter state ids (rows) to modules labels (columns);
all columns are <code>logical</code> vectors</p>
</td></tr>
<tr><td><code id="snapshot_manager_module_+3A_filtered_data_list">filtered_data_list</code></td>
<td>
<p>non-nested (named <code>list</code>) that contains <code>FilteredData</code> objects</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This module introduces snapshots: stored descriptions of the filter state of the entire application.
Snapshots allow the user to save the current filter state of the application for later use in the session,
as well as to save it to file in order to share it with an app developer or other users,
who in turn can upload it to their own session.
</p>
<p>The snapshot manager is accessed through the filter manager, with the cog icon in the top right corner.
At the beginning of a session it presents three icons: a camera, an upload, and an circular arrow.
Clicking the camera captures a snapshot, clicking the upload adds a snapshot from a file
and applies the filter states therein, and clicking the arrow resets initial application state.
As snapshots are added, they will show up as rows in a table and each will have a select button and a save button.
</p>


<h3>Value</h3>

<p>Nothing is returned.
</p>


<h3>Server logic</h3>

<p>Snapshots are basically <code>teal_slices</code> objects, however, since each module is served by a separate instance
of <code>FilteredData</code> and these objects require shared state, <code>teal_slice</code> is a <code>reactiveVal</code> so <code>teal_slices</code>
cannot be stored as is. Therefore, <code>teal_slices</code> are reversibly converted to a list of lists representation
(attributes are maintained).
</p>
<p>Snapshots are stored in a <code>reactiveVal</code> as a named list.
The first snapshot is the initial state of the application and the user can add a snapshot whenever they see fit.
</p>
<p>For every snapshot except the initial one, a piece of UI is generated that contains
the snapshot name, a select button to restore that snapshot, and a save button to save it to a file.
The initial snapshot is restored by a separate &quot;reset&quot; button.
It cannot be saved directly but a user is welcome to capture the initial state as a snapshot and save that.
</p>


<h3>Snapshot mechanics</h3>

<p>When a snapshot is captured, the user is prompted to name it.
Names are displayed as is but since they are used to create button ids,
under the hood they are converted to syntactically valid strings.
New snapshot names are validated so that their valid versions are unique.
Leading and trailing white space is trimmed.
</p>
<p>The module can read the global state of the application from <code>slices_global</code> and <code>mapping_matrix</code>.
The former provides a list of all existing <code>teal_slice</code>s and the latter says which slice is active in which module.
Once a name has been accepted, <code>slices_global</code> is converted to a list of lists - a snapshot.
The snapshot contains the <code>mapping</code> attribute of the initial application state
(or one that has been restored), which may not reflect the current one,
so <code>mapping_matrix</code> is transformed to obtain the current mapping, i.e. a list that,
when passed to the <code>mapping</code> argument of <code><a href="#topic+teal_slices">teal_slices()</a></code>, would result in the current mapping.
This is substituted as the snapshot's <code>mapping</code> attribute and the snapshot is added to the snapshot list.
</p>
<p>To restore app state, a snapshot is retrieved from storage and rebuilt into a <code>teal_slices</code> object.
Then state of all <code>FilteredData</code> objects (provided in <code>filtered_data_list</code>) is cleared
and set anew according to the <code>mapping</code> attribute of the snapshot.
The snapshot is then set as the current content of <code>slices_global</code>.
</p>
<p>To save a snapshot, the snapshot is retrieved and reassembled just like for restoring,
and then saved to file with <code><a href="#topic+slices_store">slices_store()</a></code>.
</p>
<p>When a snapshot is uploaded, it will first be added to storage just like a newly created one,
and then used to restore app state much like a snapshot taken from storage.
Upon clicking the upload icon the user will be prompted for a file to upload
and may choose to name the new snapshot. The name defaults to the name of the file (the extension is dropped)
and normal naming rules apply. Loading the file yields a <code>teal_slices</code> object,
which is disassembled for storage and used directly for restoring app state.
</p>


<h3>Transferring snapshots</h3>

<p>Snapshots uploaded from disk should only be used in the same application they come from,
<em>i.e.</em> an application that uses the same data and the same modules.
To ensure this is the case, <code>init</code> stamps <code>teal_slices</code> with an app id that is stored in the <code>app_id</code> attribute of
a <code>teal_slices</code> object. When a snapshot is restored from file, its <code>app_id</code> is compared to that
of the current app state and only if the match is the snapshot admitted to the session.
</p>


<h3>Author(s)</h3>

<p>Aleksander Chlebowski
</p>

<hr>
<h2 id='tdata'>Create a <code>tdata</code> object</h2><span id='topic+tdata'></span><span id='topic+new_tdata'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>Create a new object called <code>tdata</code> which contains <code>data</code>, a <code>reactive</code> list of <code>data.frames</code>
(or <code>MultiAssayExperiment</code>), with attributes:
</p>

<ul>
<li> <p><code>code</code> (<code>reactive</code>) containing code used to generate the data
</p>
</li>
<li><p> join_keys (<code>join_keys</code>) containing the relationships between the data
</p>
</li>
<li><p> metadata (named <code>list</code>) containing any metadata associated with the data frames
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>new_tdata(data, code = "", join_keys = NULL, metadata = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tdata_+3A_data">data</code></td>
<td>
<p>(named <code>list</code>) A list of <code>data.frame</code> or <code>MultiAssayExperiment</code> objects,
which optionally can be <code>reactive</code>.
Inside this object all of these items will be made <code>reactive</code>.</p>
</td></tr>
<tr><td><code id="tdata_+3A_code">code</code></td>
<td>
<p>(<code>character</code> or <code>reactive</code> which evaluates to a <code>character</code>) containing
the code used to generate the data. This should be <code>reactive</code> if the code is changing
during a reactive context (e.g. if filtering changes the code). Inside this
object <code>code</code> will be made reactive</p>
</td></tr>
<tr><td><code id="tdata_+3A_join_keys">join_keys</code></td>
<td>
<p>(<code>teal.data::join_keys</code>) object containing relationships between the
datasets.</p>
</td></tr>
<tr><td><code id="tdata_+3A_metadata">metadata</code></td>
<td>
<p>(named <code>list</code>) each element contains a list of metadata about the named <code>data.frame</code>
Each element of these list should be atomic and length one.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tdata</code> object.
</p>


<h3>See Also</h3>

<p><code>as_tdata</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data &lt;- new_tdata(
  data = list(iris = iris, mtcars = reactive(mtcars), dd = data.frame(x = 1:10)),
  code = "iris &lt;- iris
    mtcars &lt;- mtcars
    dd &lt;- data.frame(x = 1:10)",
  metadata = list(dd = list(author = "NEST"), iris = list(version = 1))
)

# Extract a data.frame
isolate(data[["iris"]]())

# Get code
isolate(get_code_tdata(data))

# Get metadata
get_metadata(data, "iris")

</code></pre>

<hr>
<h2 id='tdata2env'>Function to convert a <code>tdata</code> object to an <code>environment</code></h2><span id='topic+tdata2env'></span>

<h3>Description</h3>

<p>Any <code>reactive</code> expressions inside <code>tdata</code> are evaluated first.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tdata2env(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tdata2env_+3A_data">data</code></td>
<td>
<p>(<code>tdata</code>) object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>environment</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data &lt;- new_tdata(
  data = list(iris = iris, mtcars = reactive(mtcars)),
  code = "iris &lt;- iris
    mtcars = mtcars"
)

my_env &lt;- isolate(tdata2env(data))

</code></pre>

<hr>
<h2 id='teal_data_datanames'>Wrapper on <code>teal.data::datanames</code></h2><span id='topic+teal_data_datanames'></span>

<h3>Description</h3>

<p>Special function used in internals of <code>teal</code> to return names of datasets even if <code>datanames</code>
has not been set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_data_datanames(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_data_datanames_+3A_data">data</code></td>
<td>
<p>(<code>teal_data</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code>
</p>

<hr>
<h2 id='teal_data_module'>Data module for <code>teal</code> applications</h2><span id='topic+teal_data_module'></span><span id='topic+eval_code'></span><span id='topic+eval_code+2Cteal_data_module+2Ccharacter-method'></span><span id='topic+eval_code+2Cteal_data_module+2Clanguage-method'></span><span id='topic+eval_code+2Cteal_data_module+2Cexpression-method'></span><span id='topic+within'></span><span id='topic+within.teal_data_module'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Create a <code>teal_data_module</code> object and evaluate code on it with history tracking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_data_module(ui, server)

## S4 method for signature 'teal_data_module,character'
eval_code(object, code)

## S3 method for class 'teal_data_module'
within(data, expr, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_data_module_+3A_ui">ui</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;function(id)&#8288;</code>)
<code>shiny</code> module UI function; must only take <code>id</code> argument</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_server">server</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;function(id)&#8288;</code>)
<code>shiny</code> module server function; must only take <code>id</code> argument;
must return reactive expression containing <code>teal_data</code> object</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_object">object</code></td>
<td>
<p>(<code>teal_data_module</code>)</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_code">code</code></td>
<td>
<p>(<code>character</code> or <code>language</code>) code to evaluate. If <code>character</code>, comments are retained.</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_data">data</code></td>
<td>
<p>(<code>teal_data_module</code>) object</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_expr">expr</code></td>
<td>
<p>(<code>expression</code>) to evaluate. Must be inline code. See</p>
</td></tr>
<tr><td><code id="teal_data_module_+3A_...">...</code></td>
<td>
<p>See <code>Details</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>teal_data_module</code> creates a <code>shiny</code> module to supply or modify data in a <code>teal</code> application.
The module allows for running data pre-processing code (creation <em>and</em> some modification) after the app starts.
The body of the server function will be run in the app rather than in the global environment.
This means it will be run every time the app starts, so use sparingly.
</p>
<p>Pass this module instead of a <code>teal_data</code> object in a call to <code><a href="#topic+init">init()</a></code>.
Note that the server function must always return a <code>teal_data</code> object wrapped in a reactive expression.
</p>
<p>See vignette <code>vignette("data-as-shiny-module", package = "teal")</code> for more details.
</p>
<p><code>eval_code</code> evaluates given code in the environment of the <code>teal_data</code> object created by the <code>teal_data_module</code>.
The code is added to the <code style="white-space: pre;">&#8288;@code&#8288;</code> slot of the <code>teal_data</code>.
</p>
<p><code>within</code> is a convenience function for evaluating inline code inside the environment of a <code>teal_data_module</code>.
It accepts only inline expressions (both simple and compound) and allows for injecting values into <code>expr</code> through
the <code>...</code> argument: as <code>name:value</code> pairs are passed to <code>...</code>, <code>name</code> in <code>expr</code> will be replaced with <code>value.</code>
</p>


<h3>Value</h3>

<p><code>teal_data_module</code> returns an object of class <code>teal_data_module</code>.
</p>
<p><code>eval_code</code> returns a <code>teal_data_module</code> object with a delayed evaluation of <code>code</code> when the module is run.
</p>
<p><code>within</code> returns a <code>teal_data_module</code> object with a delayed evaluation of <code>expr</code> when the module is run.
</p>


<h3>See Also</h3>

<p><code><a href="teal.data.html#topic+teal_data-class">teal.data::teal_data</a></code>, <code><a href="teal.code.html#topic+qenv">teal.code::qenv()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tdm &lt;- teal_data_module(
  ui = function(id) {
    ns &lt;- NS(id)
    actionButton(ns("submit"), label = "Load data")
  },
  server = function(id) {
    moduleServer(id, function(input, output, session) {
      eventReactive(input$submit, {
        data &lt;- within(
          teal_data(),
          {
            dataset1 &lt;- iris
            dataset2 &lt;- mtcars
          }
        )
        datanames(data) &lt;- c("dataset1", "dataset2")

        data
      })
    })
  }
)

eval_code(tdm, "dataset1 &lt;- subset(dataset1, Species == 'virginica')")

within(tdm, dataset1 &lt;- subset(dataset1, Species == "virginica"))

# use additional parameter for expression value substitution.
valid_species &lt;- "versicolor"
within(tdm, dataset1 &lt;- subset(dataset1, Species %in% species), species = valid_species)
</code></pre>

<hr>
<h2 id='teal_data_to_filtered_data'>Create a <code>FilteredData</code></h2><span id='topic+teal_data_to_filtered_data'></span>

<h3>Description</h3>

<p>Create a <code>FilteredData</code> object from a <code>teal_data</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_data_to_filtered_data(x, datanames = teal_data_datanames(x))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_data_to_filtered_data_+3A_x">x</code></td>
<td>
<p>(<code>teal_data</code>) object</p>
</td></tr>
<tr><td><code id="teal_data_to_filtered_data_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) vector of data set names to include; must be subset of <code>datanames(x)</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>FilteredData</code> object.
</p>

<hr>
<h2 id='teal_modules'>Create <code>teal_module</code> and <code>teal_modules</code> objects</h2><span id='topic+teal_modules'></span><span id='topic+module'></span><span id='topic+teal_module'></span><span id='topic+modules'></span><span id='topic+format.teal_module'></span><span id='topic+print.teal_module'></span><span id='topic+format.teal_modules'></span><span id='topic+print.teal_modules'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Create a nested tab structure to embed modules in a <code>teal</code> application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>module(
  label = "module",
  server = function(id, ...) {
     moduleServer(id, function(input, output, session) {
 
       })
 },
  ui = function(id, ...) {
     tags$p(paste0("This module has no UI (id: ", id, " )"))

    },
  filters,
  datanames = "all",
  server_args = NULL,
  ui_args = NULL
)

modules(..., label = "root")

## S3 method for class 'teal_module'
format(x, indent = 0, ...)

## S3 method for class 'teal_module'
print(x, ...)

## S3 method for class 'teal_modules'
format(x, indent = 0, ...)

## S3 method for class 'teal_modules'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_modules_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Label shown in the navigation item for the module or module group.
For <code>modules()</code> defaults to <code>"root"</code>. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_server">server</code></td>
<td>
<p>(<code>function</code>) <code>shiny</code> module with following arguments:
</p>

<ul>
<li> <p><code>id</code> - <code>teal</code> will set proper <code>shiny</code> namespace for this module (see <code><a href="shiny.html#topic+moduleServer">shiny::moduleServer()</a></code>).
</p>
</li>
<li> <p><code>input</code>, <code>output</code>, <code>session</code> - (optional; not recommended) When provided, then <code><a href="shiny.html#topic+callModule">shiny::callModule()</a></code>
will be used to call a module. From <code>shiny</code> 1.5.0, the recommended way is to use
<code><a href="shiny.html#topic+moduleServer">shiny::moduleServer()</a></code> instead which doesn't require these arguments.
</p>
</li>
<li> <p><code>data</code> (optional) When provided, the module will be called with <code>teal_data</code> object (i.e. a list of
reactive (filtered) data specified in the <code>filters</code> argument) as the value of this argument.
</p>
</li>
<li> <p><code>datasets</code> (optional) When provided, the module will be called with <code>FilteredData</code> object as the
value of this argument. (See <code><a href="teal.slice.html#topic+FilteredData">teal.slice::FilteredData</a></code>).
</p>
</li>
<li> <p><code>reporter</code> (optional) When provided, the module will be called with <code>Reporter</code> object as the value
of this argument. (See <code><a href="teal.reporter.html#topic+Reporter">teal.reporter::Reporter</a></code>).
</p>
</li>
<li> <p><code>filter_panel_api</code> (optional) When provided, the module will be called with <code>FilterPanelAPI</code> object
as the value of this argument. (See <code><a href="teal.slice.html#topic+FilterPanelAPI">teal.slice::FilterPanelAPI</a></code>).
</p>
</li>
<li> <p><code>...</code> (optional) When provided, <code>server_args</code> elements will be passed to the module named argument
or to the <code>...</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_modules_+3A_ui">ui</code></td>
<td>
<p>(<code>function</code>) <code>shiny</code> UI module function with following arguments:
</p>

<ul>
<li> <p><code>id</code> - <code>teal</code> will set proper <code>shiny</code> namespace for this module.
</p>
</li>
<li> <p><code>...</code> (optional) When provided, <code>ui_args</code> elements will be passed to the module named argument
or to the <code>...</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_modules_+3A_filters">filters</code></td>
<td>
<p>(<code>character</code>) Deprecated. Use <code>datanames</code> instead.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) A vector with <code>datanames</code> that are relevant for the item. The
filter panel will automatically update the shown filters to include only
filters in the listed datasets. <code>NULL</code> will hide the filter panel,
and the keyword <code>"all"</code> will show filters of all datasets. <code>datanames</code> also determines
a subset of datasets which are appended to the <code>data</code> argument in server function.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_server_args">server_args</code></td>
<td>
<p>(named <code>list</code>) with additional arguments passed on to the server function.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_ui_args">ui_args</code></td>
<td>
<p>(named <code>list</code>) with additional arguments passed on to the UI function.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_...">...</code></td>
<td>

<ul>
<li><p> For <code>modules()</code>: (<code>teal_module</code> or <code>teal_modules</code>) Objects to wrap into a tab.
</p>
</li>
<li><p> For <code>format()</code> and <code>print()</code>: Arguments passed to other methods.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_modules_+3A_x">x</code></td>
<td>
<p>(<code>teal_module</code> or <code>teal_modules</code>) Object to format/print.</p>
</td></tr>
<tr><td><code id="teal_modules_+3A_indent">indent</code></td>
<td>
<p>(<code>integer(1)</code>) Indention level; each nested element is indented one level more.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>module()</code> creates an instance of a <code>teal_module</code> that can be placed in a <code>teal</code> application.
<code>modules()</code> shapes the structure of a the application by organizing <code>teal_module</code> within the navigation panel.
It wraps <code>teal_module</code> and <code>teal_modules</code> objects in a <code>teal_modules</code> object,
which results in a nested structure corresponding to the nested tabs in the final application.
</p>
<p>Note that for <code>modules()</code> <code>label</code> comes after <code>...</code>, so it must be passed as a named argument,
otherwise it will be captured by <code>...</code>.
</p>
<p>The labels <code>"global_filters"</code> and <code>"Report previewer"</code> are reserved
because they are used by the <code>mapping</code> argument of <code><a href="#topic+teal_slices">teal_slices()</a></code>
and the report previewer module <code><a href="#topic+reporter_previewer_module">reporter_previewer_module()</a></code>, respectively.
</p>


<h3>Value</h3>

<p><code>module()</code> returns an object of class <code>teal_module</code>.
</p>
<p><code>modules()</code> returns a <code>teal_modules</code> object which contains following fields:
</p>

<ul>
<li> <p><code>label</code>: taken from the <code>label</code> argument.
</p>
</li>
<li> <p><code>children</code>: a list containing objects passed in <code>...</code>. List elements are named after
their <code>label</code> attribute converted to a valid <code>shiny</code> id.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)

module_1 &lt;- module(
  label = "a module",
  server = function(id, data) {
    moduleServer(
      id,
      module = function(input, output, session) {
        output$data &lt;- renderDataTable(data()[["iris"]])
      }
    )
  },
  ui = function(id) {
    ns &lt;- NS(id)
    tagList(dataTableOutput(ns("data")))
  },
  datanames = "all"
)

module_2 &lt;- module(
  label = "another module",
  server = function(id) {
    moduleServer(
      id,
      module = function(input, output, session) {
        output$text &lt;- renderText("Another Module")
      }
    )
  },
  ui = function(id) {
    ns &lt;- NS(id)
    tagList(textOutput(ns("text")))
  },
  datanames = NULL
)

modules &lt;- modules(
  label = "modules",
  modules(
    label = "nested modules",
    module_1
  ),
  module_2
)

app &lt;- init(
  data = teal_data(iris = iris),
  modules = modules
)

if (interactive()) {
  shinyApp(app$ui, app$server)
}
</code></pre>

<hr>
<h2 id='teal_slices'>Filter settings for <code>teal</code> applications</h2><span id='topic+teal_slices'></span><span id='topic+as.teal_slices'></span><span id='topic+c.teal_slices'></span>

<h3>Description</h3>

<p>Specify initial filter states and filtering settings for a <code>teal</code> app.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_slices(
  ...,
  exclude_varnames = NULL,
  include_varnames = NULL,
  count_type = NULL,
  allow_add = TRUE,
  module_specific = FALSE,
  mapping,
  app_id = NULL
)

as.teal_slices(x)

## S3 method for class 'teal_slices'
c(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_slices_+3A_...">...</code></td>
<td>
<p>any number of <code>teal_slice</code> objects. For <code>print</code> and <code>format</code>,
additional arguments passed to other functions.</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_include_varnames">include_varnames</code>, <code id="teal_slices_+3A_exclude_varnames">exclude_varnames</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>s of <code>character</code>) where list names
match names of data sets and vector elements match variable names in respective data sets;
specify which variables are allowed to be filtered; see <code>Details</code>.</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_count_type">count_type</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<em>This is a new feature. Do kindly share your opinions on
<a href="https://github.com/insightsengineering/teal.slice/"><code>teal.slice</code>'s GitHub repository</a>.</em>
</p>
<p>(<code>character(1)</code>) string specifying how observations are tallied by these filter states.
Possible options:
</p>

<ul>
<li> <p><code>"none"</code> (default) to have counts of single <code>FilterState</code> to show unfiltered number only.
</p>
</li>
<li> <p><code>"all"</code> to have counts of single <code>FilterState</code> to show number of observation in filtered
and unfiltered dataset. Note, that issues were reported when using this option with <code>MultiAssayExperiment</code>.
Please make sure that adding new filters doesn't fail on target platform before deploying for production.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_slices_+3A_allow_add">allow_add</code></td>
<td>
<p>(<code>logical(1)</code>) logical flag specifying whether the user will be able to add new filters</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_module_specific">module_specific</code></td>
<td>
<p>optional (<code>logical(1)</code>)
</p>

<ul>
<li> <p><code>FALSE</code> (default) when one filter panel applied to all modules.
All filters will be shared by all modules.
</p>
</li>
<li> <p><code>TRUE</code> when filter panel module-specific.
Modules can have different set of filters specified - see <code>mapping</code> argument.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_slices_+3A_mapping">mapping</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<em>This is a new feature. Do kindly share your opinions on
<a href="https://github.com/insightsengineering/teal/"><code>teal</code>'s GitHub repository</a>.</em>
</p>
<p>(named <code>list</code>) specifies which filters will be active in which modules on app start.
Elements should contain character vector of <code>teal_slice</code> <code>id</code>s (see <code><a href="teal.slice.html#topic+teal_slice">teal.slice::teal_slice</a></code>).
Names of the list should correspond to <code>teal_module</code> <code>label</code> set in <code><a href="#topic+module">module()</a></code> function.
</p>

<ul>
<li> <p><code>id</code>s listed under <code style="white-space: pre;">&#8288;"global_filters&#8288;</code> will be active in all modules.
</p>
</li>
<li><p> If missing, all filters will be applied to all modules.
</p>
</li>
<li><p> If empty list, all filters will be available to all modules but will start inactive.
</p>
</li>
<li><p> If <code>module_specific</code> is <code>FALSE</code>, only <code>global_filters</code> will be active on start.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_slices_+3A_app_id">app_id</code></td>
<td>
<p>(<code>character(1)</code>)
For internal use only, do not set manually.
Added by <code>init</code> so that a <code>teal_slices</code> can be matched to the app in which it was used.
Used for verifying snapshots uploaded from file. See <code>snapshot</code>.</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_x">x</code></td>
<td>
<p>(<code>list</code>) of lists to convert to <code>teal_slices</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Produces a <code>teal_slices</code> object.
The <code>teal_slice</code> components will specify filter states that will be active when the app starts.
Attributes (created with the named arguments) will configure the way the app applies filters.
See argument descriptions for details.
</p>


<h3>Value</h3>

<p>A <code>teal_slices</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="teal.slice.html#topic+teal_slices">teal.slice::teal_slices</a></code>, <code><a href="teal.slice.html#topic+teal_slice">teal.slice::teal_slice</a></code>, <code><a href="#topic+slices_store">slices_store()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filter &lt;- teal_slices(
  teal_slice(dataname = "iris", varname = "Species", id = "species"),
  teal_slice(dataname = "iris", varname = "Sepal.Length", id = "sepal_length"),
  teal_slice(
    dataname = "iris", id = "long_petals", title = "Long petals", expr = "Petal.Length &gt; 5"
  ),
  teal_slice(dataname = "mtcars", varname = "mpg", id = "mtcars_mpg"),
  mapping = list(
    module1 = c("species", "sepal_length"),
    module2 = c("mtcars_mpg"),
    global_filters = "long_petals"
  )
)

app &lt;- init(
  data = teal_data(iris = iris, mtcars = mtcars),
  modules = list(
    module("module1"),
    module("module2")
  ),
  filter = filter
)

if (interactive()) {
  shinyApp(app$ui, app$server)
}

</code></pre>

<hr>
<h2 id='teal-package'><code>teal</code>: Interactive exploration of clinical trials data</h2><span id='topic+teal'></span><span id='topic+teal-package'></span>

<h3>Description</h3>

<p>The <code>teal</code> package provides a <code>shiny</code> based framework for creating an
interactive data analysis environment.
</p>


<h3>Details</h3>

<p>To learn mode about the package, visit the <a href="https://insightsengineering.github.io/teal/latest-tag/">project website</a>
or read the <code><a href="#topic+init">init()</a></code> manual page.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dawid Kaledkowski <a href="mailto:dawid.kaledkowski@roche.com">dawid.kaledkowski@roche.com</a> (<a href="https://orcid.org/0000-0001-9533-457X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Pawel Rucki <a href="mailto:pawel.rucki@roche.com">pawel.rucki@roche.com</a>
</p>
</li>
<li><p> Aleksander Chlebowski <a href="mailto:aleksander.chlebowski@contractors.roche.com">aleksander.chlebowski@contractors.roche.com</a> (<a href="https://orcid.org/0000-0001-5018-6294">ORCID</a>)
</p>
</li>
<li><p> Andre Verissimo <a href="mailto:andre.verissimo@roche.com">andre.verissimo@roche.com</a> (<a href="https://orcid.org/0000-0002-2212-339X">ORCID</a>)
</p>
</li>
<li><p> Kartikeya Kirar <a href="mailto:kartikeya.kirar@businesspartner.roche.com">kartikeya.kirar@businesspartner.roche.com</a>
</p>
</li>
<li><p> Vedha Viyash <a href="mailto:vedha.viyash@roche.com">vedha.viyash@roche.com</a>
</p>
</li>
<li><p> Marcin Kosinski <a href="mailto:marcin.kosinski.mk1@roche.com">marcin.kosinski.mk1@roche.com</a>
</p>
</li>
<li><p> Adrian Waddell <a href="mailto:adrian.waddell@gene.com">adrian.waddell@gene.com</a>
</p>
</li>
<li><p> Nikolas Burkoff
</p>
</li>
<li><p> Mahmoud Hallal
</p>
</li>
<li><p> Maciej Nasinski
</p>
</li>
<li><p> Konrad Pagacz
</p>
</li>
<li><p> Junlue Zhao
</p>
</li>
<li><p> Tadeusz Lewandowski
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Chendi Liao <a href="mailto:chendi.liao@roche.com">chendi.liao@roche.com</a> [reviewer]
</p>
</li>
<li><p> Dony Unardi <a href="mailto:unardid@gene.com">unardid@gene.com</a> [reviewer]
</p>
</li>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li>
<li><p> Maximilian Mordig [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://insightsengineering.github.io/teal/">https://insightsengineering.github.io/teal/</a>
</p>
</li>
<li> <p><a href="https://github.com/insightsengineering/teal/">https://github.com/insightsengineering/teal/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/insightsengineering/teal/issues">https://github.com/insightsengineering/teal/issues</a>
</p>
</li></ul>


<hr>
<h2 id='TealReportCard'><code>TealReportCard</code></h2><span id='topic+TealReportCard'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
Child class of <code>ReportCard</code> that is used for <code>teal</code> specific applications.
In addition to the parent methods, it supports rendering <code>teal</code> specific elements such as
the source code, the encodings panel content and the filter panel content as part of the
meta data.
</p>


<h3>Super class</h3>

<p><code><a href="teal.reporter.html#topic+ReportCard">teal.reporter::ReportCard</a></code> -&gt; <code>TealReportCard</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-TealReportCard-append_src"><code>TealReportCard$append_src()</code></a>
</p>
</li>
<li> <p><a href="#method-TealReportCard-append_fs"><code>TealReportCard$append_fs()</code></a>
</p>
</li>
<li> <p><a href="#method-TealReportCard-append_encodings"><code>TealReportCard$append_encodings()</code></a>
</p>
</li>
<li> <p><a href="#method-TealReportCard-clone"><code>TealReportCard$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_content"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_content'><code>teal.reporter::ReportCard$append_content()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_metadata"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_metadata'><code>teal.reporter::ReportCard$append_metadata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_plot"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_plot'><code>teal.reporter::ReportCard$append_plot()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_rcode"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_rcode'><code>teal.reporter::ReportCard$append_rcode()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_table"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_table'><code>teal.reporter::ReportCard$append_table()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="append_text"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-append_text'><code>teal.reporter::ReportCard$append_text()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="from_list"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-from_list'><code>teal.reporter::ReportCard$from_list()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="get_content"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-get_content'><code>teal.reporter::ReportCard$get_content()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="get_metadata"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-get_metadata'><code>teal.reporter::ReportCard$get_metadata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="get_name"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-get_name'><code>teal.reporter::ReportCard$get_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="initialize"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-initialize'><code>teal.reporter::ReportCard$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="reset"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-reset'><code>teal.reporter::ReportCard$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="set_name"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-set_name'><code>teal.reporter::ReportCard$set_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ReportCard" data-id="to_list"><a href='../../teal.reporter/html/ReportCard.html#method-ReportCard-to_list'><code>teal.reporter::ReportCard$to_list()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-TealReportCard-append_src"></a>



<h4>Method <code>append_src()</code></h4>

<p>Appends the source code to the <code>content</code> meta data of this <code>TealReportCard</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealReportCard$append_src(src, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>src</code></dt><dd><p>(<code>character(1)</code>) code as text.</p>
</dd>
<dt><code>...</code></dt><dd><p>any <code>rmarkdown</code> <code>R</code> chunk parameter and its value.
But <code>eval</code> parameter is always set to <code>FALSE</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>TealReportCard</code>, invisibly.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>card &lt;- TealReportCard$new()$append_src(
  "plot(iris)"
)
card$get_content()[[1]]$get_content()
</pre>
</div>


<hr>
<a id="method-TealReportCard-append_fs"></a>



<h4>Method <code>append_fs()</code></h4>

<p>Appends the filter state list to the <code>content</code> and <code>metadata</code> of this <code>TealReportCard</code>.
If the filter state list has an attribute named <code>formatted</code>, it appends it to the card otherwise it uses
the default <code>yaml::as.yaml</code> to format the list.
If the filter state list is empty, nothing is appended to the <code>content</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealReportCard$append_fs(fs)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fs</code></dt><dd><p>(<code>teal_slices</code>) object returned from <code><a href="#topic+teal_slices">teal_slices()</a></code> function.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-TealReportCard-append_encodings"></a>



<h4>Method <code>append_encodings()</code></h4>

<p>Appends the encodings list to the <code>content</code> and <code>metadata</code> of this <code>TealReportCard</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealReportCard$append_encodings(encodings)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>encodings</code></dt><dd><p>(<code>list</code>) list of encodings selections of the <code>teal</code> app.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>card &lt;- TealReportCard$new()$append_encodings(list(variable1 = "X"))
card$get_content()[[1]]$get_content()

</pre>
</div>


<hr>
<a id="method-TealReportCard-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealReportCard$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `TealReportCard$append_src`
## ------------------------------------------------

card &lt;- TealReportCard$new()$append_src(
  "plot(iris)"
)
card$get_content()[[1]]$get_content()

## ------------------------------------------------
## Method `TealReportCard$append_encodings`
## ------------------------------------------------

card &lt;- TealReportCard$new()$append_encodings(list(variable1 = "X"))
card$get_content()[[1]]$get_content()

</code></pre>

<hr>
<h2 id='TealSlicesBlock'><code>RcodeBlock</code></h2><span id='topic+TealSlicesBlock'></span>

<h3>Description</h3>

<p><code>RcodeBlock</code>
</p>
<p><code>RcodeBlock</code>
</p>


<h3>Super classes</h3>

<p><code><a href="teal.reporter.html#topic+ContentBlock">teal.reporter::ContentBlock</a></code> -&gt; <code><a href="teal.reporter.html#topic+TextBlock">teal.reporter::TextBlock</a></code> -&gt; <code>TealSlicesBlock</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-TealSlicesBlock-new"><code>TealSlicesBlock$new()</code></a>
</p>
</li>
<li> <p><a href="#method-TealSlicesBlock-set_content"><code>TealSlicesBlock$set_content()</code></a>
</p>
</li>
<li> <p><a href="#method-TealSlicesBlock-from_list"><code>TealSlicesBlock$from_list()</code></a>
</p>
</li>
<li> <p><a href="#method-TealSlicesBlock-to_list"><code>TealSlicesBlock$to_list()</code></a>
</p>
</li>
<li> <p><a href="#method-TealSlicesBlock-clone"><code>TealSlicesBlock$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="ContentBlock" data-id="get_content"><a href='../../teal.reporter/html/ContentBlock.html#method-ContentBlock-get_content'><code>teal.reporter::ContentBlock$get_content()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="TextBlock" data-id="get_available_styles"><a href='../../teal.reporter/html/TextBlock.html#method-TextBlock-get_available_styles'><code>teal.reporter::TextBlock$get_available_styles()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="TextBlock" data-id="get_style"><a href='../../teal.reporter/html/TextBlock.html#method-TextBlock-get_style'><code>teal.reporter::TextBlock$get_style()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.reporter" data-topic="TextBlock" data-id="set_style"><a href='../../teal.reporter/html/TextBlock.html#method-TextBlock-set_style'><code>teal.reporter::TextBlock$set_style()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-TealSlicesBlock-new"></a>



<h4>Method <code>new()</code></h4>

<p>Returns a <code>TealSlicesBlock</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealSlicesBlock$new(content = teal_slices(), style = "verbatim")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>content</code></dt><dd><p>(<code>teal_slices</code>) object returned from <code><a href="#topic+teal_slices">teal_slices()</a></code> function.</p>
</dd>
<dt><code>style</code></dt><dd><p>(<code>character(1)</code>) string specifying style to apply.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Returns a <code>TealSlicesBlock</code> object with no content and no parameters.
</p>



<h5>Returns</h5>

<p>Object of class <code>TealSlicesBlock</code>, invisibly.
</p>


<hr>
<a id="method-TealSlicesBlock-set_content"></a>



<h4>Method <code>set_content()</code></h4>

<p>Sets content of this <code>TealSlicesBlock</code>.
Sets content as <code>YAML</code> text which represents a list generated from <code>teal_slices</code>.
The list displays limited number of fields from <code>teal_slice</code> objects, but this list is
sufficient to conclude which filters were applied.
When <code>selected</code> field in <code>teal_slice</code> object is a range, then it is displayed as a &quot;min&quot;
</p>


<h5>Usage</h5>

<div class="r"><pre>TealSlicesBlock$set_content(content)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>content</code></dt><dd><p>(<code>teal_slices</code>) object returned from <code><a href="#topic+teal_slices">teal_slices()</a></code> function.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-TealSlicesBlock-from_list"></a>



<h4>Method <code>from_list()</code></h4>

<p>Create the <code>RcodeBlock</code> from a list.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealSlicesBlock$from_list(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(named <code>list</code>) with two fields <code>c("text", "params")</code>.
Use the <code>get_available_params</code> method to get all possible parameters.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-TealSlicesBlock-to_list"></a>



<h4>Method <code>to_list()</code></h4>

<p>Convert the <code>RcodeBlock</code> to a list.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealSlicesBlock$to_list()</pre></div>



<h5>Returns</h5>

<p>named <code>list</code> with a text and <code>params</code>.
</p>


<hr>
<a id="method-TealSlicesBlock-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>TealSlicesBlock$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='unfold_mapping'>Explicitly enumerate global filters.</h2><span id='topic+unfold_mapping'></span>

<h3>Description</h3>

<p>Transform module mapping such that global filters are explicitly specified for every module.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unfold_mapping(mapping, module_names)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unfold_mapping_+3A_mapping">mapping</code></td>
<td>
<p>(named <code>list</code>) as stored in mapping parameter of <code>teal_slices</code></p>
</td></tr>
<tr><td><code id="unfold_mapping_+3A_module_names">module_names</code></td>
<td>
<p>(<code>character</code>) vector containing names of all modules in the app</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>named_list</code> with one element per module, each element containing all filters applied to that module.
</p>

<hr>
<h2 id='validate_app_title_tag'>Function for validating the title parameter of <code>teal::init</code></h2><span id='topic+validate_app_title_tag'></span>

<h3>Description</h3>

<p>Checks if the input of the title from <code>teal::init</code> will create a valid title and favicon tag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_app_title_tag(shiny_tag)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_app_title_tag_+3A_shiny_tag">shiny_tag</code></td>
<td>
<p>(<code>shiny.tag</code>) Object to validate for a valid title.</p>
</td></tr>
</table>

<hr>
<h2 id='validate_has_data'>Validate that dataset has a minimum number of observations</h2><span id='topic+validate_has_data'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_has_data(
  x,
  min_nrow = NULL,
  complete = FALSE,
  allow_inf = TRUE,
  msg = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_has_data_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)</p>
</td></tr>
<tr><td><code id="validate_has_data_+3A_min_nrow">min_nrow</code></td>
<td>
<p>(<code>numeric(1)</code>) Minimum allowed number of rows in <code>x</code>.</p>
</td></tr>
<tr><td><code id="validate_has_data_+3A_complete">complete</code></td>
<td>
<p>(<code>logical(1)</code>) Flag specifying whether to check only complete cases. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="validate_has_data_+3A_allow_inf">allow_inf</code></td>
<td>
<p>(<code>logical(1)</code>) Flag specifying whether to allow infinite values. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="validate_has_data_+3A_msg">msg</code></td>
<td>
<p>(<code>character(1)</code>) Additional message to display alongside the default message.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(teal)
ui &lt;- fluidPage(
  sliderInput("len", "Max Length of Sepal",
    min = 4.3, max = 7.9, value = 5
  ),
  plotOutput("plot")
)

server &lt;- function(input, output) {
  output$plot &lt;- renderPlot({
    iris_df &lt;- iris[iris$Sepal.Length &lt;= input$len, ]
    validate_has_data(
      iris_df,
      min_nrow = 10,
      complete = FALSE,
      msg = "Please adjust Max Length of Sepal"
    )

    hist(iris_df$Sepal.Length, breaks = 5)
  })
}
if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='validate_has_elements'>Validates that vector has length greater than 0</h2><span id='topic+validate_has_elements'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_has_elements(x, msg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_has_elements_+3A_x">x</code></td>
<td>
<p>vector</p>
</td></tr>
<tr><td><code id="validate_has_elements_+3A_msg">msg</code></td>
<td>
<p>message to display</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  id = c(1:10, 11:20, 1:10),
  strata = rep(c("A", "B"), each = 15)
)
ui &lt;- fluidPage(
  selectInput("ref1", "Select strata1 to compare",
    choices = c("A", "B", "C"), selected = "A"
  ),
  selectInput("ref2", "Select strata2 to compare",
    choices = c("A", "B", "C"), selected = "B"
  ),
  verbatimTextOutput("arm_summary")
)

server &lt;- function(input, output) {
  output$arm_summary &lt;- renderText({
    sample_1 &lt;- data$id[data$strata == input$ref1]
    sample_2 &lt;- data$id[data$strata == input$ref2]

    validate_has_elements(sample_1, "No subjects in strata1.")
    validate_has_elements(sample_2, "No subjects in strata2.")

    paste0(
      "Number of samples in: strata1=", length(sample_1),
      " comparions strata2=", length(sample_2)
    )
  })
}
if (interactive()) {
  shinyApp(ui, server)
}
</code></pre>

<hr>
<h2 id='validate_has_variable'>Validates that dataset contains specific variable</h2><span id='topic+validate_has_variable'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_has_variable(data, varname, msg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_has_variable_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)</p>
</td></tr>
<tr><td><code id="validate_has_variable_+3A_varname">varname</code></td>
<td>
<p>(<code>character(1)</code>) name of variable to check for in <code>data</code></p>
</td></tr>
<tr><td><code id="validate_has_variable_+3A_msg">msg</code></td>
<td>
<p>(<code>character(1)</code>) message to display if <code>data</code> does not include <code>varname</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  one = rep("a", length.out = 20),
  two = rep(c("a", "b"), length.out = 20)
)
ui &lt;- fluidPage(
  selectInput(
    "var",
    "Select variable",
    choices = c("one", "two", "three", "four"),
    selected = "one"
  ),
  verbatimTextOutput("summary")
)

server &lt;- function(input, output) {
  output$summary &lt;- renderText({
    validate_has_variable(data, input$var)
    paste0("Selected treatment variables: ", paste(input$var, collapse = ", "))
  })
}
if (interactive()) {
  shinyApp(ui, server)
}
</code></pre>

<hr>
<h2 id='validate_in'>Validates that vector includes all expected values</h2><span id='topic+validate_in'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_in(x, choices, msg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_in_+3A_x">x</code></td>
<td>
<p>Vector of values to test.</p>
</td></tr>
<tr><td><code id="validate_in_+3A_choices">choices</code></td>
<td>
<p>Vector to test against.</p>
</td></tr>
<tr><td><code id="validate_in_+3A_msg">msg</code></td>
<td>
<p>(<code>character(1)</code>) Error message to display if some elements of <code>x</code> are not elements of <code>choices</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ui &lt;- fluidPage(
  selectInput(
    "species",
    "Select species",
    choices = c("setosa", "versicolor", "virginica", "unknown species"),
    selected = "setosa",
    multiple = FALSE
  ),
  verbatimTextOutput("summary")
)

server &lt;- function(input, output) {
  output$summary &lt;- renderPrint({
    validate_in(input$species, iris$Species, "Species does not exist.")
    nrow(iris[iris$Species == input$species, ])
  })
}
if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='validate_inputs'>Send input validation messages to output</h2><span id='topic+validate_inputs'></span>

<h3>Description</h3>

<p>Captures messages from <code>InputValidator</code> objects and collates them
into one message passed to <code>validate</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_inputs(..., header = "Some inputs require attention")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_inputs_+3A_...">...</code></td>
<td>
<p>either any number of <code>InputValidator</code> objects
or an optionally named, possibly nested <code>list</code> of <code>InputValidator</code>
objects, see <code>Details</code></p>
</td></tr>
<tr><td><code id="validate_inputs_+3A_header">header</code></td>
<td>
<p>(<code>character(1)</code>) generic validation message; set to NULL to omit</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>shiny::validate</code> is used to withhold rendering of an output element until
certain conditions are met and to print a validation message in place
of the output element.
<code>shinyvalidate::InputValidator</code> allows to validate input elements
and to display specific messages in their respective input widgets.
<code>validate_inputs</code> provides a hybrid solution.
Given an <code>InputValidator</code> object, messages corresponding to inputs that fail validation
are extracted and placed in one validation message that is passed to a <code>validate</code>/<code>need</code> call.
This way the input <code>validator</code> messages are repeated in the output.
</p>
<p>The <code>...</code> argument accepts any number of <code>InputValidator</code> objects
or a nested list of such objects.
If <code>validators</code> are passed directly, all their messages are printed together
under one (optional) header message specified by <code>header</code>. If a list is passed,
messages are grouped by <code>validator</code>. The list's names are used as headers
for their respective message groups.
If neither of the nested list elements is named, a header message is taken from <code>header</code>.
</p>


<h3>Value</h3>

<p>Returns NULL if the final validation call passes and a <code>shiny.silent.error</code> if it fails.
</p>


<h3>See Also</h3>

<p><code><a href="shinyvalidate.html#topic+InputValidator">shinyvalidate::InputValidator</a></code>, <code><a href="shiny.html#topic+validate">shiny::validate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)
library(shinyvalidate)

ui &lt;- fluidPage(
  selectInput("method", "validation method", c("sequential", "combined", "grouped")),
  sidebarLayout(
    sidebarPanel(
      selectInput("letter", "select a letter:", c(letters[1:3], LETTERS[4:6])),
      selectInput("number", "select a number:", 1:6),
      br(),
      selectInput("color", "select a color:",
        c("black", "indianred2", "springgreen2", "cornflowerblue"),
        multiple = TRUE
      ),
      sliderInput("size", "select point size:",
        min = 0.1, max = 4, value = 0.25
      )
    ),
    mainPanel(plotOutput("plot"))
  )
)

server &lt;- function(input, output) {
  # set up input validation
  iv &lt;- InputValidator$new()
  iv$add_rule("letter", sv_in_set(LETTERS, "choose a capital letter"))
  iv$add_rule("number", function(x) {
    if (as.integer(x) %% 2L == 1L) "choose an even number"
  })
  iv$enable()
  # more input validation
  iv_par &lt;- InputValidator$new()
  iv_par$add_rule("color", sv_required(message = "choose a color"))
  iv_par$add_rule("color", function(x) {
    if (length(x) &gt; 1L) "choose only one color"
  })
  iv_par$add_rule(
    "size",
    sv_between(
      left = 0.5, right = 3,
      message_fmt = "choose a value between {left} and {right}"
    )
  )
  iv_par$enable()

  output$plot &lt;- renderPlot({
    # validate output
    switch(input[["method"]],
      "sequential" = {
        validate_inputs(iv)
        validate_inputs(iv_par, header = "Set proper graphical parameters")
      },
      "combined" = validate_inputs(iv, iv_par),
      "grouped" = validate_inputs(list(
        "Some inputs require attention" = iv,
        "Set proper graphical parameters" = iv_par
      ))
    )

    plot(faithful$eruptions ~ faithful$waiting,
      las = 1, pch = 16,
      col = input[["color"]], cex = input[["size"]]
    )
  })
}

if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='validate_n_levels'>Validate that variables has expected number of levels</h2><span id='topic+validate_n_levels'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_n_levels(x, min_levels = 1, max_levels = 12, var_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_n_levels_+3A_x">x</code></td>
<td>
<p>variable name. If <code>x</code> is not a factor, the unique values
are treated as levels.</p>
</td></tr>
<tr><td><code id="validate_n_levels_+3A_min_levels">min_levels</code></td>
<td>
<p>cutoff for minimum number of levels of <code>x</code></p>
</td></tr>
<tr><td><code id="validate_n_levels_+3A_max_levels">max_levels</code></td>
<td>
<p>cutoff for maximum number of levels of <code>x</code></p>
</td></tr>
<tr><td><code id="validate_n_levels_+3A_var_name">var_name</code></td>
<td>
<p>name of variable being validated for use in
validation message</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the number of levels of <code>x</code> is less than <code>min_levels</code>
or greater than <code>max_levels</code> the validation will fail.
This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  one = rep("a", length.out = 20),
  two = rep(c("a", "b"), length.out = 20),
  three = rep(c("a", "b", "c"), length.out = 20),
  four = rep(c("a", "b", "c", "d"), length.out = 20),
  stringsAsFactors = TRUE
)
ui &lt;- fluidPage(
  selectInput(
    "var",
    "Select variable",
    choices = c("one", "two", "three", "four"),
    selected = "one"
  ),
  verbatimTextOutput("summary")
)

server &lt;- function(input, output) {
  output$summary &lt;- renderText({
    validate_n_levels(data[[input$var]], min_levels = 2, max_levels = 15, var_name = input$var)
    paste0(
      "Levels of selected treatment variable: ",
      paste(levels(data[[input$var]]),
        collapse = ", "
      )
    )
  })
}
if (interactive()) {
  shinyApp(ui, server)
}
</code></pre>

<hr>
<h2 id='validate_no_intersection'>Validates no intersection between two vectors</h2><span id='topic+validate_no_intersection'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_no_intersection(x, y, msg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_no_intersection_+3A_x">x</code></td>
<td>
<p>vector</p>
</td></tr>
<tr><td><code id="validate_no_intersection_+3A_y">y</code></td>
<td>
<p>vector</p>
</td></tr>
<tr><td><code id="validate_no_intersection_+3A_msg">msg</code></td>
<td>
<p>(<code>character(1)</code>) message to display if <code>x</code> and <code>y</code> intersect</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  id = c(1:10, 11:20, 1:10),
  strata = rep(c("A", "B", "C"), each = 10)
)

ui &lt;- fluidPage(
  selectInput("ref1", "Select strata1 to compare",
    choices = c("A", "B", "C"),
    selected = "A"
  ),
  selectInput("ref2", "Select strata2 to compare",
    choices = c("A", "B", "C"),
    selected = "B"
  ),
  verbatimTextOutput("summary")
)

server &lt;- function(input, output) {
  output$summary &lt;- renderText({
    sample_1 &lt;- data$id[data$strata == input$ref1]
    sample_2 &lt;- data$id[data$strata == input$ref2]

    validate_no_intersection(
      sample_1, sample_2,
      "subjects within strata1 and strata2 cannot overlap"
    )
    paste0(
      "Number of subject in: reference treatment=", length(sample_1),
      " comparions treatment=", length(sample_2)
    )
  })
}
if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='validate_one_row_per_id'>Validate that dataset has unique rows for key variables</h2><span id='topic+validate_one_row_per_id'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_one_row_per_id(x, key = c("USUBJID", "STUDYID"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_one_row_per_id_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)</p>
</td></tr>
<tr><td><code id="validate_one_row_per_id_+3A_key">key</code></td>
<td>
<p>(<code>character</code>) Vector of ID variables from <code>x</code> that identify unique records.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code>shiny::validate</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>iris$id &lt;- rep(1:50, times = 3)
ui &lt;- fluidPage(
  selectInput(
    inputId = "species",
    label = "Select species",
    choices = c("setosa", "versicolor", "virginica"),
    selected = "setosa",
    multiple = TRUE
  ),
  plotOutput("plot")
)
server &lt;- function(input, output) {
  output$plot &lt;- renderPlot({
    iris_f &lt;- iris[iris$Species %in% input$species, ]
    validate_one_row_per_id(iris_f, key = c("id"))

    hist(iris_f$Sepal.Length, breaks = 5)
  })
}
if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
