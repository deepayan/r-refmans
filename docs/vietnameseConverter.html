<!DOCTYPE html><html><head><title>Help for package vietnameseConverter</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vietnameseConverter}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#vietnameseConverter-package'>
<p>The vietnameseConverter package</p></a></li>
<li><a href='#decodeVN'><p>Convert characters from legacy Vietnamese encodings to UTF-8 encoding</p></a></li>
<li><a href='#loadEncodingTableVN'><p>Load conversion table for Vietnamese characters</p></a></li>
<li><a href='#vn_samples'><p>Sample data frames in legacy Vietnamese encodings</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Convert Vietnamese Encodings</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Juergen Niedballa &lt;niedballa@izw-berlin.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Conversion of characters from unsupported Vietnamese character encodings to Unicode characters. These Vietnamese encodings (TCVN3, VISCII, VPS) are not natively supported in R and lead to printing of wrong characters and garbled text (mojibake). This package fixes that problem and provides readable output with the correct Unicode characters (with or without diacritics). </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>gsubfn, methods, sf, utf8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, R.rsp, DT</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jniedballa/vietnameseConverter">https://github.com/jniedballa/vietnameseConverter</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-20 18:58:24 UTC; Juergen</td>
</tr>
<tr>
<td>Author:</td>
<td>Juergen Niedballa <a href="https://orcid.org/0000-0002-9187-2116"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  An The Truong Nguyen [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-20 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='vietnameseConverter-package'>
The vietnameseConverter package
</h2><span id='topic+vietnameseConverter-package'></span><span id='topic+vietnameseConverter'></span>

<h3>Description</h3>

<p>This package helps you read and use data from Vietnamese sources in R. These data often use Vietnamese legacy character encodings such as TCVN (Vietnam Standards / Tieu chuan Viet Nam) which are still in use today, but are not read correctly in R.
</p>
<p>To correct this problem and make such data available in R, this package converts character vectors and entire data frames from legacy Vietnamese encodings to the correct Unicode charactes. It currently supports conversions from three different Vietnamese encodings (TCVN3, VISCII, VPS) to Unicode and vice versa.
</p>
<p>The main function is <code><a href="#topic+decodeVN">decodeVN</a></code>.
</p>


<h3>Author(s)</h3>

<p>Juergen Niedballa
</p>

<hr>
<h2 id='decodeVN'>Convert characters from legacy Vietnamese encodings to UTF-8 encoding</h2><span id='topic+decodeVN'></span>

<h3>Description</h3>

<p>Convert characters from legacy Vietnamese encodings to UTF-8 encoding
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decodeVN(
  x,
  from = c("TCVN3", "VISCII", "VPS", "Unicode"),
  to = c("Unicode", "TCVN3", "VISCII", "VPS"),
  diacritics = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decodeVN_+3A_x">x</code></td>
<td>
<p>data.frame, sf object, or character vector</p>
</td></tr>
<tr><td><code id="decodeVN_+3A_from">from</code></td>
<td>
<p>Text encoding of input x</p>
</td></tr>
<tr><td><code id="decodeVN_+3A_to">to</code></td>
<td>
<p>Text encoding of output</p>
</td></tr>
<tr><td><code id="decodeVN_+3A_diacritics">diacritics</code></td>
<td>
<p>logical. Preserve diacritics (TRUE) or not (FALSE)?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many characters in legacy Vietnamese encodings (e.g. TCVN3, VPS, VISCII)
are not read correctly in R, particularly those with diacritics (accents). The particular
encodings don't seem to be supported by R, at least on many locales. When R reads them as if they have UTF-8
encoding, it will result in wrong characters being printed and garbled text (Mojibake - see vignette and examples below).
</p>
<p>This functions converts character vectors to from various Vietnamese legacy encodings to readable
Unicode characters in UTF-8 encoding. By default the function attempts the conversion from TCVN3 to Unicode
while preserving the diacritics, but also supports other Vietnamese encodings  (TCVN3, VPS, VISCII - via argument <code>from</code>).
Currently VNI and VNU are not supported.
</p>
<p>It works on data frames, spatial objects (from the sf package), and character vectors.
</p>
<p><code>diacritics = TRUE</code> will return characters with their diacritics. With <code>diacritics = FALSE</code>,
the output will be ASCII letters without diacritics. Upper/lower case will be preserved regardless.
</p>
<p>The internal search and replace is performed by the <code><a href="gsubfn.html#topic+gsubfn">gsubfn</a></code> function from the <span class="pkg">gsubfn</span> package. It performs simple character replacements to fix the text.
</p>
<p>Currently the function converts from the Vietnamese encodings to Unicode, not vice versa. Please contact the maintainer
if the conversion from Unicode to Vietnamese encodings would be relevant for you.
</p>
<p>The character conversion table was adapted from <a href="http://vietunicode.sourceforge.net/charset/">http://vietunicode.sourceforge.net/charset/</a>.
</p>


<h3>Value</h3>

<p>character string or data frame (depending on x)
</p>


<h3>Warning</h3>

<p>When printing a data frame with Unicode characters using the standard print method, the R console will show the Unicode escape characters (e.g. &quot;&lt;U+1EA3&gt;&quot;) instead of the actual Unicode characters. This is a limitation of the R console. The data are correct and will show correctly when using e.g. View() or when printing columns as vectors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   # First we produce the wrongly formatted character string
   # using Unicode symbols is only necessary to create a portable example in the R package
   # you don't need to use Unicode characters like this in your data

   string &lt;- c("Qu\u00B6ng Tr\u00DE", "An \u00A7\u00ABn", "Th\u00F5a Thi\u00AAn Hu\u00D5")

   # Below we have a look at the wrongly formatted character string.
   # This is what it would look like when you load TCVN3 encoded data as UTF8
   string

   # convert character vector from TCVN3 &gt; UTF-8
   decodeVN(string)
   decodeVN(string, diacritics = FALSE)

   # # convert data frame columns from TCVN3 &gt; UTF-8
   df &lt;- data.frame(id = c(1,2,3),
                   name  = string)

   df_decode &lt;- decodeVN(df)
   df_decode
   # NOTE: some characters may be displayed as unicode in the R console
   # check the individual column to see if they are correct:
   df_decode[,2]

   decodeVN(df, diacritics = FALSE)

   # using the built-in sample data
   data(vn_samples)
   decodeVN(vn_samples$TCVN3)   # TCVN -&gt; Unicode   # TCVN3 -&gt; Unicode
   decodeVN(vn_samples$TCVN3, diacritics = FALSE)   # TCVN3 -&gt; Unicode (ASCII characters only)
   decodeVN(vn_samples$VISCII, from = "VISCII")     # VISCII -&gt; Unicode


   # Demonstration for sf object

   # create sf object (just for demonstration)
   require(sf)
   df_geom &lt;- st_sfc(st_point(c(3,4)), st_point(c(10,11)), st_point(c(15,13)))
   df_spatial &lt;- st_set_geometry(df, df_geom)

   # convert Vietnamese characters
   df_spatial_decode &lt;- decodeVN(df_spatial)

   df_spatial_decode
   df_spatial_decode$name


</code></pre>

<hr>
<h2 id='loadEncodingTableVN'>Load conversion table for Vietnamese characters</h2><span id='topic+loadEncodingTableVN'></span>

<h3>Description</h3>

<p>Load conversion table for Vietnamese characters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadEncodingTableVN(version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadEncodingTableVN_+3A_version">version</code></td>
<td>
<p>Version of this table (1 or 2) - 2 is currentlty being used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The table was adapted from <a href="http://vietunicode.sourceforge.net/charset/">http://vietunicode.sourceforge.net/charset/</a>
</p>


<h3>Value</h3>

<p>data.frame
</p>

<hr>
<h2 id='vn_samples'>Sample data frames in legacy Vietnamese encodings</h2><span id='topic+vn_samples'></span>

<h3>Description</h3>

<p>A list with four data frames. The data frames list the provinces of Viet Nam.
</p>
<p>The first list item ($Unicode) shows the correct entries. The other three data frames show what loading data encoded in three different Vietnamese encodings would look like when loaded in R.
</p>
<p>The list items are:
</p>

<ul>
<li> <p><b>Unicode</b> - Data frame with correct Unicode characters (reference)
</p>
</li>
<li> <p><b>TCVN3</b> -  Data frame with TCVN3-encoded characters
</p>
</li>
<li> <p><b>VISCII</b> -  Data frame with VISCII-encoded characters
</p>
</li>
<li> <p><b>VPS</b> -  Data frame with VPS-encoded characters
</p>
</li></ul>

<p>Note that the last 3 are not actually encoded in their respective Vietnamese encodings. Instead, they show what a table in those encodings would look like when loaded into R (or more generally, a system that is not aware of the encodings).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(vn_samples)
</code></pre>


<h3>Format</h3>

<p>A list with 4 data frames</p>


<h3>Details</h3>

<p>Each data frame contains 5 colums and 63 rows. The first two are character, the last three numeric.
</p>

<ul>
<li> <p><b>Province_city</b>        -   Name of province
</p>
</li>
<li> <p><b>Administrative_center</b> -   Administrative center of the province
</p>
</li>
<li> <p><b>Area_km2</b>             -   Area in km^2
</p>
</li>
<li> <p><b>Density_perkm2</b>       -   Population density (km^-2)
</p>
</li>
<li> <p><b>HDI_2012</b>             -   Human development index in 2012
</p>
</li></ul>

<p>The first two columns are character, the last three numeric. Only the character columns will be modified by calling <code><a href="#topic+decodeVN">decodeVN</a></code>, while the numeric columns will not be changed.
</p>
<p>Factors are not converted. If your data frame contains factors, convert these to character first.
</p>


<h3>Note</h3>

<p>The data frame is based on the table of provinces of Viet nam on Wikipedia <a href="https://en.wikipedia.org/wiki/Provinces_of_Vietnam">https://en.wikipedia.org/wiki/Provinces_of_Vietnam</a> with minor edits. The legacy Vietnamese encodings were simulated using the <code><a href="#topic+decodeVN">decodeVN</a></code> function and checked with this online conversion tool: <a href="http://www.enderminh.com/minh/vnconversions.aspx">http://www.enderminh.com/minh/vnconversions.aspx</a>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
