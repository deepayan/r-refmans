<!DOCTYPE html><html lang="en"><head><title>Help for package support.BWS3</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {support.BWS3}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#support.BWS3-package'>
<p>Tools for Case 3 best-worst scaling</p></a></li>
<li><a href='#bws3.dataset'>
<p>Creating a dataset suitable for Case 3 best-worst scaling analysis</p></a></li>
<li><a href='#bws3.design'>
<p>Designing choice sets for Case 3 best-worst scaling</p></a></li>
<li><a href='#bws3.response'>
<p>Generating artificial responses to Case 3 best-worst scaling questions</p></a></li>
<li><a href='#milk'>
<p>Consumer valuation of milk</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools for Case 3 Best-Worst Scaling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-01</td>
</tr>
<tr>
<td>Author:</td>
<td>Hideo Aizaki</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hideo Aizaki &lt;azk-r@spa.nifty.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides basic functions that support an implementation of multi-profile case (Case 3) best-worst scaling (BWS). Case 3 BWS is a question-based survey method to elicit people's preferences for attribute levels. Case 3 BWS constructs various combinations of attribute levels (profiles) and then asks respondents to select the best and worst profiles in each choice set. A main function creates a dataset for the analysis from the choice sets and the responses to the questions. For details on Case 3 BWS, refer to Louviere et al. (2015) &lt;<a href="https://doi.org/10.1017%2FCBO9781107337855">doi:10.1017/CBO9781107337855</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Suggests:</td>
<td>crossdes, DoE.base, support.CEs, survival</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-01 06:28:24 UTC; rpkgdev</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-01 07:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='support.BWS3-package'>
Tools for Case 3 best-worst scaling
</h2><span id='topic+support.BWS3-package'></span><span id='topic+support.BWS3'></span>

<h3>Description</h3>

<p>Provides basic functions that support an implementation of Case 3 (multi-profile case) best-worst scaling.
</p>


<h3>Details</h3>

<p>Case 3 (multi-profile case) best-worst scaling (BWS) is a question-based survey method to elicit people's preferences for attribute levels. A Case 3 BWS question consists of three or more profiles. Each profile has two or more attributes and each attribute has two or more levels. Respondents are asked to select the best and worst profiles for each question. Analyzing the responses to the questions reveals the people's preferences for the attribute levels. Refer to Hensher et al. (2015), Lancsar et al. (2013), Louviere et al. (2015), and Marley and Pihlens (2012) for details. 
</p>


<h3>Acknowledgments</h3>

<p>I would like to thank Professor Kazuo Sato for his kind support. This work was supported by JSPS KAKENHI Grant Numbers JP16K07886 and JP20K06251.
</p>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>References</h3>

<p>Hensher DA, Rose JM, Greene WH (2015) <em>Applied Choice Analysis</em>. 2nd edition. Cambridge University Press.
</p>
<p>Louviere JJ, Flynn TN, Marley AAJ (2015) <em>Best-Worst Scaling: Theory, Methods and Applications</em>. Cambridge University Press.
</p>
<p>Lancsar E, Louviere J, Donaldson C, Currie G, Burgess L (2013) Best worst discrete choice experiments in health: Methods and an application. <em>Social Science &amp; Medicine</em> <b>76</b>: 74&ndash;82.
</p>
<p>Marley AAJ, Pihlens D (2012) Models of best-worst choice and ranking among multiattribute options (profiles). <em>Journal of Mathematical Psychology</em> <b>56</b>: 24&ndash;34.
</p>

<hr>
<h2 id='bws3.dataset'>
Creating a dataset suitable for Case 3 best-worst scaling analysis
</h2><span id='topic+bws3.dataset'></span>

<h3>Description</h3>

<p>This function creates a dataset suitable for Case 3 best-worst scaling analysis using a modeling approach.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bws3.dataset(data, id = "id", response, choice.sets, categorical.attributes = NULL,
 continuous.attributes = NULL, common = NULL, optout = FALSE, asc = NULL,
 model = "maxdiff", detail = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bws3.dataset_+3A_data">data</code></td>
<td>

<p>A data frame containing a respondent dataset.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_id">id</code></td>
<td>

<p>A character representing the respondent identification number variable in the respondent dataset.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_response">response</code></td>
<td>

<p>A named list containing the names of response variables in the respondent dataset.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_choice.sets">choice.sets</code></td>
<td>

<p>An object of the S3 class <code>"cedes"</code>.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_categorical.attributes">categorical.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as dummy-coded variables in the analysis, or a named vector containing the reference levels of attributes treated as effect-coded variables. If there are no categorical variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_continuous.attributes">continuous.attributes</code></td>
<td>

<p>A vector containing the names of attributes treated as continuous variables in the analysis. If there are no continuous variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_common">common</code></td>
<td>

<p>A named vector containing a fixed combination of levels corresponding to a common alternative (base/reference) in the choice sets. If the common alternative is an opt-out (no choice) option, use the argument <code>optout</code> instead. If there is no common option, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_optout">optout</code></td>
<td>

<p>A logical variable describing whether the opt-out option is included in the BWS questions. If <code>TRUE</code> (default), the opt-out option is included; otherwise it is not.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_asc">asc</code></td>
<td>

<p>A vector containing binary values, which takes the value of <code>1</code> when an alternative specific constant (ASC) is included in the utility function of an alternative and <code>0</code> otherwise: the <code class="reqn">i</code>-th element in the vector corresponds to the <code class="reqn">i</code>-th alternative. If there are no ASCs, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_model">model</code></td>
<td>

<p>A character showing a type of dataset created by the function: <code>"maxdiff"</code> for a maximum difference model; <code>"sequential"</code> for a sequential model; and <code>"rank"</code> for a rank-ordered model.
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_detail">detail</code></td>
<td>

<p>A logical variable describing whether the response variables that are assigned to the argument <code>response</code> are also stored in the dataset created by the function. 
</p>
</td></tr>
<tr><td><code id="bws3.dataset_+3A_...">...</code></td>
<td>

<p>Optional arguments; currently not in use.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a dataset for Case 3 BWS analysis using the modeling approach, which uses discrete choice models. When using the function, a model type must be selected from among the three standards models: maximum difference (maxdiff/paired), sequential, and rank-ordered. The argument <code>model</code> is set according to the selected model. See Lancsar et al. (2013) and Marley and Pihlens (2012) for details on the three models, and Hensher et al. (2015, Appendix 6B) for details on the dataset structure for Case 3 BWS.
</p>
<p>The respondent dataset, in which each row corresponds to a respondent, is assigned to the argument <code>data</code>. The dataset must include the respondent's identification number (id) variable, the block variable (<code>BLOCK</code>), and the response variables, each indicating the alternatives (profiles) that were selected as the best and worst for each question. Other variables in the respondent dataset are treated as the respondents' characteristics such as gender and age. The variables relating to respondents' characteristics are also stored in the resultant dataset created by the function. The names of the id and response variables are left to the discretion of the user. The id variable is assigned to the argument <code>id</code> (the default is <code>"id"</code>). The response variables are assigned to the argument <code>response</code> in list format: each element of the list, corresponding to a Case 3 BWS question, is a named vector that contains alternative numbers selected as the best and worst in the Case 3 BWS question (see the Examples section below for details). 
</p>
<p>An object containing the choice sets, which follows the S3 class <code>"cedes"</code> (see the <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code> function in the <span class="pkg">support.CEs</span> package), is assigned to the argument <code>choice.sets</code>. Only unlabeled (generic) designs are acceptable in the current version of the function. Attribute variables in <code>choice.sets</code> are assigned either to the argument <code>categorical.attributes</code> or the argument <code>continuous.attributes</code>, according to the model you use. If categorical attributes are treated as dummy-coded variables in the analysis, a vector containing the names of the categorical attributes is assigned to <code>categorical.attributes</code>. If categorical attributes are treated as effect-coded variables in the analysis, a named vector containing the names of reference levels is assigned to <code>categorical.attributes</code>. For example, suppose a profile consists of three 3-level attributes: attribute A with levels A1, A2, and A3; attribute B with B1, B2, and B3 levels; and attribute C with C1, C2, and C3 levels. If the three attributes are treated as dummy-coded variables in the analysis, a vector <code>c("A", "B", "C")</code> is assigned to <code>categorical.attributes</code>. If the three attributes are treated as effect-coded variables in the analysis and the first level in each attribute is a reference level, a named vector <code>c(A = "A1", B = "B1", C = "C1")</code> is assigned to it. If each BWS question contains a common alternative, such as status quo, and it is not included in the choice sets assigned to the argument <code>choice.sets</code>, a fixed combination of levels corresponding to the common alternative in vector format (e.g., <code>c("A1", "B3", "C2")</code>) is assigned to the argument <code>common</code>. If each BWS question includes an opt-out (no choice) option, the argument <code>option</code> is set as <code>TRUE</code>; otherwise it is set as <code>FALSE</code> (default). Accordingly, the attribute variables in the dataset created by the function take the value of <code>0</code> in the row corresponding to the opt-out options. The order of alternatives in <code>choice.sets</code> must be the same as the alternative numbers used in the response variables. Furthermore, the order of questions in the respondent dataset must be the same as that in <code>choice.sets</code>.
</p>
<p>If alternative specific constants (ASCs) are needed for the model you choose, a vector with binary values is set according to your model specification and then assigned to the argument <code>asc</code>. The <code class="reqn">i</code>-th element in the vector corresponds to the <code class="reqn">i</code>-th alternative, and the value of <code>1</code> indicates the presence of ASC in the corresponding alternative and the value of <code>0</code> indicates its absence. For example, suppose that each BWS question has four alternatives and the 1st, 2nd, and 3rd alternatives in the model have an ASC each. In this case, a vector <code>c(1, 1, 1, 0)</code> is assigned to <code>asc</code>. Consequently, the resultant dataset includes four ASCs: <code>ASC1</code> taking the value of <code>1</code> for the 1st alternative and <code>0</code> otherwise, <code>ASC2</code> taking the value of <code>1</code> for the 2nd alternative and <code>0</code> otherwise, <code>ASC3</code> taking the value of <code>1</code> for the 3rd alternative and <code>0</code> otherwise, and <code>ASC4</code> taking the value of <code>0</code> for all the alternatives (<code>ASC4</code> is not needed in the analysis).
</p>


<h3>Value</h3>

<p>This function returns a dataset for analysis, which is an object of S3 class <code>"bws3dataset"</code> and inherits from data frame format. The dataset for the maxdiff (paired) model contains the following variables as well as attribute variables and respondents' characteristic variables: 
</p>
<table role = "presentation">
<tr><td><code>id</code></td>
<td>

<p>A respondent's identification number; the actual name of this variable is set according to the id variable in the respondent dataset if the argument <code>id</code> is set by users.</p>
</td></tr>
<tr><td><code>BLOCK</code></td>
<td>

<p>A serial number of blocks.</p>
</td></tr>
<tr><td><code>QES</code></td>
<td>

<p>A serial number of Case 3 BWS questions.</p>
</td></tr>
<tr><td><code>PAIR</code></td>
<td>

<p>A serial number for the possible pairs of the best and worst alternatives for each question.</p>
</td></tr>
<tr><td><code>BEST</code></td>
<td>

<p>An alternative number treated as the best in the possible pairs of the best and worst alternatives.</p>
</td></tr>
<tr><td><code>WORST</code></td>
<td>

<p>An alternative number treated as the worst in the possible pairs of the best and worst alternatives.</p>
</td></tr>
<tr><td><code>RES.B</code></td>
<td>

<p>An alternative number selected as the best by respondents.</p>
</td></tr>
<tr><td><code>RES.W</code></td>
<td>

<p>An alternative number selected as the worst by respondents.</p>
</td></tr>
<tr><td><code>RES</code></td>
<td>

<p>A binary variable that takes the value of <code>1</code> when a possible pair of the best and worst alternatives is selected by respondents and <code>0</code> otherwise. The variable is used as a dependent variable in the model formula of the function for discrete choice analysis.</p>
</td></tr>
<tr><td><code>STR</code></td>
<td>

<p>A stratification variable identifying each combination of respondent and question. The variable may be used in the model formula for discrete choice analysis.</p>
</td></tr>
<tr><td><code>ASC</code></td>
<td>

<p>Alternative specific constant(s). The serial number of the alternatives is appended to the tail of ASC (e.g., <code>ASC1</code>, <code>ASC2</code>, and <code>ASC3</code>).</p>
</td></tr>
</table>
<p>The dataset for the sequential model and the one for the rank-ordered model contains the variables <code>id</code>, <code>BLOCK</code>, <code>QES</code>, and <code>STR</code> mentioned above, in addition to the following variables: 
</p>
<table role = "presentation">
<tr><td><code>ALT</code></td>
<td>

<p>A serial number of alternatives for each question.</p>
</td></tr>
<tr><td><code>RES.ALT</code></td>
<td>

<p>An alternative number selected as the best or worst by respondents.</p>
</td></tr>
<tr><td><code>SET</code></td>
<td>

<p>A serial number of implied choice sets for each question.</p>
</td></tr>
<tr><td><code>BW</code></td>
<td>

<p>A state variable taking the value of <code>1</code> for the possible best alternatives and <code>-1</code> for the possible worst alternatives. The variable is not included in the dataset for the rank-ordered model.</p>
</td></tr>
<tr><td><code>RES</code></td>
<td>

<p>A binary variable that takes the value of <code>1</code> when a possible best or worst alternative is selected by respondents and <code>0</code> otherwise.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>References</h3>

<p>See the help page for <code><a href="#topic+support.BWS3-package">support.BWS3-package</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+support.BWS3-package">support.BWS3-package</a></code>, <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The following lines of code construct choice sets for Case 3 BWS
# using rotation.design() in the package support.CEs; create a dataset
# for the analysis using bws3.dataset(); and then conduct a maxdiff model
# analysis on the basis of a conditional logit model specification
# using clogit() in the package survival.

# Load packages
library(support.CEs)
library(survival)
# Reproduce old results
if(getRversion() &gt;= "3.6.0") RNGkind(sample.kind = "Rounding")
# Create choice sets
dsgn &lt;- rotation.design(                
  attribute.names = list(
    A = c("A1", "A2", "A3"), B = c("B1", "B2", "B3"),
    C = c("C1", "C2", "C3"), D = c("D1", "D2", "D3")),
  nalternatives = 4, nblocks = 1,randomize = TRUE, seed = 9876)
# Prepare response variables
dat &lt;- data.frame(          
  IDvar = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),
  BLOCK = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
  q1b1  = c(2, 1, 1, 1, 1, 2, 1, 1, 1, 1),
  q1w1  = c(4, 2, 4, 3, 4, 4, 4, 3, 3, 4),
  q1b2  = c(1, 4, 2, 2, 2, 3, 3, 2, 2, 2),
  q1w2  = c(3, 3, 3, 4, 3, 1, 2, 4, 4, 3),
  q2b1  = c(1, 4, 2, 1, 1, 4, 4, 4, 1, 2),
  q2w1  = c(3, 3, 3, 3, 3, 1, 3, 2, 2, 3),
  q2b2  = c(4, 1, 4, 4, 4, 3, 1, 1, 4, 4),
  q2w2  = c(2, 2, 1, 2, 2, 2, 2, 3, 3, 1),
  q3b1  = c(4, 2, 1, 4, 2, 2, 4, 4, 3, 4),
  q3w1  = c(1, 3, 3, 1, 1, 1, 1, 1, 4, 1),
  q3b2  = c(2, 1, 2, 3, 4, 3, 2, 3, 1, 3),
  q3w2  = c(3, 4, 4, 2, 3, 4, 3, 2, 2, 2),
  q4b1  = c(2, 2, 2, 1, 2, 3, 4, 4, 2, 1),
  q4w1  = c(3, 4, 3, 3, 4, 4, 3, 2, 4, 2),
  q4b2  = c(1, 1, 4, 2, 1, 1, 1, 1, 1, 3),
  q4w2  = c(4, 3, 1, 4, 3, 2, 2, 3, 3, 4),
  q5b1  = c(1, 1, 1, 3, 3, 2, 3, 3, 3, 1),
  q5w1  = c(2, 2, 2, 2, 4, 4, 2, 2, 2, 2),
  q5b2  = c(3, 3, 3, 1, 1, 1, 1, 1, 4, 3),
  q5w2  = c(4, 4, 4, 4, 2, 3, 4, 4, 1, 4),
  q6b1  = c(1, 3, 3, 1, 2, 4, 3, 3, 3, 3),
  q6w1  = c(4, 2, 1, 3, 1, 1, 1, 4, 1, 1),
  q6b2  = c(3, 1, 2, 4, 4, 3, 2, 1, 2, 4),
  q6w2  = c(2, 4, 4, 2, 3, 2, 4, 2, 4, 2),
  q7b1  = c(4, 4, 2, 2, 3, 4, 4, 4, 2, 1),
  q7w1  = c(3, 2, 4, 1, 1, 3, 3, 3, 1, 3),
  q7b2  = c(2, 3, 3, 4, 4, 2, 2, 2, 4, 4),
  q7w2  = c(1, 1, 1, 3, 2, 1, 1, 1, 3, 2),
  q8b1  = c(3, 2, 2, 2, 1, 3, 2, 2, 3, 3),
  q8w1  = c(4, 4, 1, 4, 4, 4, 3, 1, 2, 2),
  q8b2  = c(2, 1, 3, 1, 2, 2, 4, 3, 1, 4),
  q8w2  = c(1, 3, 4, 3, 3, 1, 1, 4, 4, 1),
  q9b1  = c(4, 1, 3, 4, 3, 3, 3, 1, 4, 4),
  q9w1  = c(2, 4, 1, 3, 4, 1, 1, 2, 3, 1),
  q9b2  = c(1, 2, 2, 2, 2, 4, 2, 3, 2, 2),
  q9w2  = c(3, 3, 4, 1, 1, 2, 4, 4, 1, 3))
# Store names of response variables
rsp.vars &lt;- list(
  q1 = c("q1b1", "q1w1", "q1b2", "q1w2"),
  q2 = c("q2b1", "q2w1", "q2b2", "q2w2"),
  q3 = c("q3b1", "q3w1", "q3b2", "q3w2"),
  q4 = c("q4b1", "q4w1", "q4b2", "q4w2"),
  q5 = c("q5b1", "q5w1", "q5b2", "q5w2"),
  q6 = c("q6b1", "q6w1", "q6b2", "q6w2"),
  q7 = c("q7b1", "q7w1", "q7b2", "q7w2"),
  q8 = c("q8b1", "q8w1", "q8b2", "q8w2"),
  q9 = c("q9b1", "q9w1", "q9b2", "q9w2"))
# Store names of attributes
attributes &lt;- c("A", "B", "C", "D")
# Create a dataset
bws3dat &lt;- bws3.dataset(
  data = dat, id = "IDvar", response = rsp.vars,
  choice.sets = dsgn, categorical = attributes, model = "maxdiff")
# Fit the model
clogit(RES ~ A2 + A3 + B2 + B3 + C2 + C3 + D2 + D3 + strata(STR), bws3dat)
</code></pre>

<hr>
<h2 id='bws3.design'>
Designing choice sets for Case 3 best-worst scaling
</h2><span id='topic+bws3.design'></span>

<h3>Description</h3>

<p>This function creates a design for Case 3 best-worst scaling (BWS) from a full/fractional factorial design (FFD) and a balanced incomplete block design (BIBD).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bws3.design(bibd, ffd, attribute.levels)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bws3.design_+3A_bibd">bibd</code></td>
<td>

<p>A data frame or matrix containing a BIBD.
</p>
</td></tr>
<tr><td><code id="bws3.design_+3A_ffd">ffd</code></td>
<td>

<p>A data frame or matrix containing a FFD.
</p>
</td></tr>
<tr><td><code id="bws3.design_+3A_attribute.levels">attribute.levels</code></td>
<td>

<p>A list containing the names of the attributes and their levels.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates the choice sets for Case 3 BWS according to Louviere et al. (2015): candidate alternatives (profiles) are created using a FFD; and then the profiles are assigned to the choice sets using a BIBD. The FFD and BIBD used in the function must satisfy the following:
</p>
<p>1) The level values in the FFD and those in the BIBD are serial integer values starting from 1.
</p>
<p>2) The number of columns of the BIBD is equal to or larger than three.
</p>
<p>3) The number of treatments in the BIBD is equal to the number of rows of the FFD. 
</p>
<p>4) The number of columns of the FFD is equal to the number of attributes.
</p>
<p>5) The order of columns (from left to right) of the FFD corresponds to the order of component names in the list assigned to the argument <code>attribute.levels</code>.
</p>


<h3>Value</h3>

<p>This function returns an object of S3 class <code>"cedes"</code> which is a list of the following components (see also the help for <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code> in the <b>support.CEs</b> package):
</p>
<table role = "presentation">
<tr><td><code>alternatives</code></td>
<td>

<p>A list of objects, <code>alt.j</code>: the <code class="reqn">j</code>-th alternative in each choice set created by the function. Each <code>alt.j</code> includes the variables <code>BLOCK</code>, <code>QES</code>, <code>ALT</code>, and attribute variables corresponding to the argument <code>attribute.levels</code>.</p>
</td></tr>
<tr><td><code>design.information</code></td>
<td>

<p>Information related to the design for Case 3 BWS created by the function. This list includes objects such as the number of blocks into which the design is divided (<code>nblocks</code>), the number of questions per block (<code>nquestions</code>), the number of alternatives per choice set (<code>nalternatives</code>), and the number of attributes per alternative (<code>nattributes</code>).</p>
</td></tr>
</table>


<h3>References</h3>

<p>See the help page for <code><a href="#topic+support.BWS3-package">support.BWS3-package</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bws3.dataset">bws3.dataset</a></code>, <code><a href="#topic+bws3.response">bws3.response</a></code>, <code><a href="#topic+support.BWS3-package">support.BWS3-package</a></code>, <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the section Examples in the help page for the function bws3.response.
</code></pre>

<hr>
<h2 id='bws3.response'>
Generating artificial responses to Case 3 best-worst scaling questions
</h2><span id='topic+bws3.response'></span>

<h3>Description</h3>

<p>This function synthesizes responses to Case 3 best-worst scaling (BWS) questions on the basis of a maximum difference model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bws3.response(design, categorical.attributes = NULL, 
  continuous.attributes = NULL, asc = NULL, common = NULL,
  optout = FALSE, b, n, detail = FALSE, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bws3.response_+3A_design">design</code></td>
<td>

<p>An object of the S3 class <code>"cedes"</code>.
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_categorical.attributes">categorical.attributes</code></td>
<td>

<p>A vector containing the names of the attributes that are treated as dummy-coded variables in the model. If there are no categorical variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_continuous.attributes">continuous.attributes</code></td>
<td>

<p>A vector containing the names of the attributes that are treated as continuous variables in the model. If there are no continuous variables, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_asc">asc</code></td>
<td>

<p>A vector containing binary values, which takes the value of 1 when an alternative specific constant (ASC) is included in the utility function of an alternative and 0 otherwise. The <code class="reqn">i</code>-th element in the vector corresponds to the <code class="reqn">i</code>-th alternative. If there are no ASCs, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_common">common</code></td>
<td>

<p>A named vector containing a fixed combination of levels corresponding to a common alternative (base/reference) in the choice sets. If the common alternative is an opt-out (no choice) option, use the argument <code>optout</code> instead. If there is no common option, it is set as <code>NULL</code> (default).
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_optout">optout</code></td>
<td>

<p>A logical variable describing whether the opt-out option is included in the BWS questions. If <code>TRUE</code> (default), the opt-out option is included; if <code>FALSE</code>, it is not.
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_b">b</code></td>
<td>

<p>A vector containing parameters of independent variables in the model. The vector is used to calculate utilities for alternatives.
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_n">n</code></td>
<td>
<p>An integer value showing the number of respondents in the resultant dataset.
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_detail">detail</code></td>
<td>

<p>A logical variable: if <code>TRUE</code>, the dataset is returned in a detailed format; and if <code>FALSE</code> (default), the dataset is returned in a simple format.
</p>
</td></tr>
<tr><td><code id="bws3.response_+3A_seed">seed</code></td>
<td>

<p>Seed for a random number generator.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function synthesizes responses to Case 3 BWS questions on the basis of a maximum difference model. The model assumes that an alternative consists of <code class="reqn">k</code> attribute-levels, and that <code class="reqn">m</code> alternatives exist in a choice set (a question). The number of possible pairs where alternative <code class="reqn">i</code> is selected as the best and alternative <code class="reqn">j</code> is selected as the worst (<code class="reqn">i \neq j</code>) from <code class="reqn">m</code> alternatives is given by <code class="reqn">m \times (m - 1)</code>. The model also assumes that the respondents select alternative <code class="reqn">i</code> as the best and alternative <code class="reqn">j</code> as the worst because the difference in utility between alternatives <code class="reqn">i</code> and <code class="reqn">j</code> is the highest among all of the <code class="reqn">m \times (m - 1)</code> differences in utility. The systematic component of the utility is assumed to be a linear additive function of the attribute and/or level variables. If the error component of the utility is assumed to be an independently, identically distributed type I extreme value, the probability of selecting alternative <code class="reqn">i</code> as the best and alternative <code class="reqn">j</code> as the worst is expressed as a conditional logit model.
</p>
<p>Given the parameter values assigned to the argument <code>b</code>, the choice sets assigned to the argument <code>design</code>, and the classifications of attributes (categorical or continuous) assigned to the arguments <code>categorical.attributes</code> and/or <code>continuous.attributes</code>, the function <code>bws3.response</code> calculates the utility for the alternatives. The parameter values assigned to the argument <code>b</code> are set as a numerical vector where the elements correspond to the parameters of attribute and/or level variables. As an example, assume that three attributes A, B, and C are the first, second, and third continuous attribute, respectively, in alternatives, and their corresponding attribute variables <code class="reqn">X_{A}</code>, <code class="reqn">X_{B}</code>, and <code class="reqn">X_{C}</code> have parameter values of <code class="reqn">0.1</code>, <code class="reqn">0.4</code>, and <code class="reqn">-0.5</code>, respectively. A vector assigned to the argument <code>b</code> is <code>c(0.1, 0.4, -0.5)</code>. As another example, assume that the three attributes A, B, and C are categorical attributes with three levels each (e.g., levels A1, A2, and A3 for attribute A) and that the first level for each attribute (i.e., A1, B1, and C1) is treated as the base (reference) level. If the parameters for the dummy-coded level variables corresponding to levels A2, A3, B2, B3, C2, and C3 are <code class="reqn">0.2</code>, <code class="reqn">0.4</code>, <code class="reqn">0.4</code>, <code class="reqn">0.8</code>, <code class="reqn">-0.7</code>, and <code class="reqn">-1.4</code>, respectively, a vector assigned to the argument <code>b</code> is given as <code>c(0, 0.2, 0.4, 0, 0.4, 0.8, 0, -0.7, -1.4)</code>, where the first, fourth, and seventh elements correspond to the reference level for each attribute, and thus have a value of 0. After calculating the utility values (by adding the calculated values of the systematic component of the utility and random numbers generated from a type I extreme value distribution), the function <code>bws3.response</code> finds the pair with the highest difference in utility from the <code class="reqn">m \times (m - 1)</code> differences in utility.
</p>
<p>If the systematic component of the utility includes ASCs, the argument <code>asc</code> is set: the <code class="reqn">i</code>-th element of a binary vector assigned to the argument <code>asc</code> takes a value of 1 if the <code class="reqn">i</code>-th alternative has an ASC, and takes a value of 0 otherwise. As an example, if a choice set consists of four alternatives and only the fourth alternative has an ASC, a vector <code>c(0, 0, 0, 1)</code> is assigned to the argument <code>asc</code>. Although this creates four ASCs (i.e., <code>ASC1</code>, <code>ASC2</code>, <code>ASC3</code>, and <code>ASC4</code>) corresponding to the four alternatives in the resultant dataset, only the fourth ASC (<code>ASC4</code>) is used in the analysis (the remaining <code>ASC1</code>, <code>ASC2</code>, and <code>ASC3</code> are ignored). As another example, if a choice set consists of three alternatives and the first and second alternatives have ASCs, a vector <code>c(1, 1, 0)</code> is assigned to the argument <code>asc</code>: this results in three ASCs in the resultant dataset; only the first and second ASCs (<code>ASC1</code> and <code>ASC2</code>) are used in the analysis.
</p>
<p>If BWS questions include an opt-out option, the argument <code>optout</code> is set as <code>TRUE</code>; otherwise it is set as <code>FALSE</code>. The function <code>bws3.response</code> assumes that the opt-out option is the last alternative in each choice set and that all of the attribute and/or level variables associated with the opt-out option have a value of 0.
</p>


<h3>Value</h3>

<p>This function returns a data frame that contains synthesized responses to Case 3 BWS questions, in either a detailed or a simple format. The detailed format dataset contains the following variables, as well as independent variables according to the arguments <code>categorical.attributes</code> and/or <code>continuous.attributes</code>.
</p>
<table role = "presentation">
<tr><td><code>id</code></td>
<td>

<p>An identification number of artificial respondents.
</p>
</td></tr>
<tr><td><code>BLOCK</code></td>
<td>

<p>A serial number of blocks in the choice sets.
</p>
</td></tr>
<tr><td><code>QES</code></td>
<td>

<p>A serial number of questions.
</p>
</td></tr>
<tr><td><code>BEST</code></td>
<td>

<p>An alternative number treated as the best in the possible pairs of the best and worst alternatives.
</p>
</td></tr>
<tr><td><code>WORST</code></td>
<td>

<p>An alternative number treated as the worst in the possible pairs of the best and worst alternatives.
</p>
</td></tr>
<tr><td><code>PAIR</code></td>
<td>

<p>A serial number of possible pairs of the best and worst alternatives for each question.
</p>
</td></tr>
<tr><td><code>RES</code></td>
<td>

<p>Responses to BWS questions, taking the value of 1 if a possible pair of the best and worst alternative is selected by the synthesized respondents and 0 otherwise.
</p>
</td></tr>
<tr><td><code>STR</code></td>
<td>

<p>A stratification variable used to identify each combination of respondent and question.
</p>
</td></tr>
</table>
<p>The simple format dataset contains the following variables.
</p>
<table role = "presentation">
<tr><td><code>id</code></td>
<td>

<p>An identification number of artificial respondents.
</p>
</td></tr>
<tr><td><code>BLOCK</code></td>
<td>

<p>A serial number of blocks in the choice sets.
</p>
</td></tr>
<tr><td><code>Bi</code></td>
<td>

<p>A variable describing the alternative number that is selected as the best in the <code class="reqn">i</code>-th BWS question. The serial number of questions is appended to the tail of the variable name (e.g., <code>B1</code> for the first question, <code>B2</code> for the second question, and <code>B3</code> for the third question).
</p>
</td></tr>
<tr><td><code>Wi</code></td>
<td>

<p>A variable describing the alternative number that is selected as the worst in the <code class="reqn">i</code>-th BWS question. The serial number of questions is appended to the tail of the variable name (e.g., <code>W1</code> for the first question, <code>W2</code> for the second question, and <code>W3</code> for the third question).
</p>
</td></tr>
</table>
<p>The detailed format dataset includes a dependent variable and independent variables for the analysis, and thus is available for discrete choice analysis functions such as the function <code>clogit</code> in the <b>survival</b> package. On the other hand, the simple format dataset only contains variables that correspond to responses to BWS questions, as well as <code>id</code> and <code>BLOCK</code> variables. It must be converted using the function <code>bws3.dataset</code> in the package for the analysis. For details, see the Examples section.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+support.BWS3-package">support.BWS3-package</a></code>, <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>, <code><a href="DoE.base.html#topic+oa.design">oa.design</a></code>, <code><a href="crossdes.html#topic+find.BIB">find.BIB</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The following lines of code synthesize responses to Case 3 BWS questions,
# return them in detailed and simple format, and then fit the models using
# the function clogit in the survival package. The choice sets include 
# three alternatives that are expressed by three attributes (A, B, and C)
# with three levels each. The function bws3.design creates the choice sets
# from a three-level fractional factorial design with 3 factors that is
# generated using the function oa.design in the DoE.base package and a BIBD
# with 9 treatments, 12 blocks, and size 3 that is generated using
# the function find.BIB in the crossdes package. The systematic component
# of the utility for alternatives where all of the three attributes are
# treated as categorical attributes is the same as that explained in 
# the Details section.

## Not run: 
# Load packages
library(DoE.base)
library(survival)
library(crossdes)

# Create design matrix
set.seed(987)
bibd &lt;- find.BIB(trt = 9, b = 12, k = 3)
isGYD(bibd)
oa &lt;- oa.design(nl = c(3, 3, 3), randomize = FALSE)
atr &lt;- list(
  A = c("A1", "A2", "A3"), B = c("B1", "B2", "B3"),
  C = c("C1", "C2", "C3"))
dsgn &lt;- bws3.design(bibd = bibd, ffd = oa, attribute.levels = atr)

# Synthesize responses to Case 3 BWS questions 
param &lt;- c(0, 0.2, 0.4, 0, 0.4, 0.8, 0, -0.7, -1.4)
atr.names &lt;- c("A", "B", "C")
## dataset in detailed format
dat.detail &lt;- bws3.response(
  design = dsgn, b = param, n = 100,
  categorical.attributes = atr.names,
  detail = TRUE, seed = 987)
str(dat.detail)
## dataset in simple format
dat.simple &lt;- bws3.response(
  design = dsgn, b = param, n = 100,
  categorical.attributes = atr.names,
  detail = FALSE, seed = 987)
str(dat.simple)

# Convert dat.simple into dataset for the analysis
dat.simple.md &lt;- bws3.dataset(
  data = dat.simple,
  response = list(
    c("B1", "W1"), c("B2", "W2"), c("B3", "W3"),
    c("B4", "W4"), c("B5", "W5"), c("B6", "W6"),
    c("B7", "W7"), c("B8", "W8"), c("B9", "W9"),
    c("B10", "W10"), c("B11", "W11"), c("B12", "W12")),
  choice.sets = dsgn,
  categorical.attributes = atr.names,
  model = "maxdiff")

# Fit conditional logit models
mf &lt;- RES ~ A2 + A3 + B2 + B3 + C2 + C3  + strata(STR)
out.detail &lt;- clogit(mf, dat.detail)
out.simple &lt;- clogit(mf, dat.simple.md)
out.simple
all.equal(coef(out.detail), coef(out.simple))

## End(Not run)
</code></pre>

<hr>
<h2 id='milk'>
Consumer valuation of milk
</h2><span id='topic+milk'></span>

<h3>Description</h3>

<p>This dataset contains artificial responses to Case 3 BWS questions about consumer valuation of milk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(milk)
</code></pre>


<h3>Format</h3>

<p>A data frame with 150 rows (respondents) and 20 columns (variables).
</p>

<dl>
<dt><code>id</code></dt><dd><p>Identification number of respondents.</p>
</dd>
<dt><code>BLOCK</code></dt><dd><p>Serial number of blocks.</p>
</dd>
<dt><code>B1</code></dt><dd><p>Alternative selected as the best in question 1.</p>
</dd>
<dt><code>W1</code></dt><dd><p>Alternative selected as the worst in question 1.</p>
</dd>
<dt><code>B2</code></dt><dd><p>Alternative selected as the best in question 2.</p>
</dd>
<dt><code>W2</code></dt><dd><p>Alternative selected as the worst in question 2.</p>
</dd>
<dt><code>B3</code></dt><dd><p>Alternative selected as the best in question 3.</p>
</dd>
<dt><code>W3</code></dt><dd><p>Alternative selected as the worst in question 3.</p>
</dd>
<dt><code>B4</code></dt><dd><p>Alternative selected as the best in question 4.</p>
</dd>
<dt><code>W4</code></dt><dd><p>Alternative selected as the worst in question 4.</p>
</dd>
<dt><code>B5</code></dt><dd><p>Alternative selected as the best in question 5.</p>
</dd>
<dt><code>W5</code></dt><dd><p>Alternative selected as the worst in question 5.</p>
</dd>
<dt><code>B6</code></dt><dd><p>Alternative selected as the best in question 6.</p>
</dd>
<dt><code>W6</code></dt><dd><p>Alternative selected as the worst in question 6.</p>
</dd>
<dt><code>B7</code></dt><dd><p>Alternative selected as the best in question 7.</p>
</dd>
<dt><code>W7</code></dt><dd><p>Alternative selected as the worst in question 7.</p>
</dd>
<dt><code>B8</code></dt><dd><p>Alternative selected as the best in question 8.</p>
</dd>
<dt><code>W8</code></dt><dd><p>Alternative selected as the worst in question 8.</p>
</dd>
<dt><code>f</code></dt><dd><p>Dummy variable taking 1 if respondent is female, 0 otherwise.</p>
</dd>
<dt><code>age</code></dt><dd><p>Respondent's age: 2 = 20s; 3 = 30s; 4 = 40s; and 5 = 50s.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Hideo Aizaki
</p>


<h3>Source</h3>

<p>Responses were generated artificially as follows.
</p>
<p>1) A Case 3 BWS question required respondents to select their most and least preferred ones from among two cartons of milk (Milk 1 and Milk 2) and an opt-out option. Each response variable (<code>B</code> and <code>W</code>) indicates an alternative selected: 1 = Milk 1; 2 = Milk 2; and 3 = the opt-out option.
</p>
<p>2) Milk has six attributes: safety, worker, ghg, cattle, biodiversity, and price. The former five attributes refer to sustainable dairy practices involved in the production process of raw milk.
</p>
<p>3) A total of 24 questions were created and then divided into 3 sets of 8 questions.
</p>
<p>4) Conditions for generating responses were set considering Aizaki et al. (2013) and Aizaki and Takeshita (2023).
</p>
<p>5) Respondents' characteristics (variables <code>f</code> and <code>age</code>) were generated randomly.
</p>


<h3>References</h3>

<p>Aizaki H, Takeshita H. (2023) Comparing consumer preferences for sustainable dairy activities among countries. <em>Behaviormetrika</em> <b>50</b>: 653&ndash;677. (Open access paper)
</p>
<p>Aizaki H, Nanseki T, Zhou H. (2013) Japanese consumer preferences for milk certified as good agricultural practice. <em>Animal Science Journal</em> <b>84</b>: 82&ndash;89.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bws3.dataset">bws3.dataset</a></code>, <code><a href="support.CEs.html#topic+rotation.design">rotation.design</a></code>, <code><a href="survival.html#topic+clogit">clogit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Load packages
library(survival)
library(support.CEs)
# Define attributes and levels
## Each practice attribute has two levels: "wo.x" and "x".
## "wo" is an abbreviation of "without".
## "wo.x" means a milk carton without a label regarding practice x.
## "x" means a milk carton with a label regarding practice x.
attrs &lt;- list(
 safety       = c("wo.safety", "safety"),
 worker       = c("wo.worker", "worker"),
 ghg          = c("wo.ghg", "ghg"),
 cattle       = c("wo.cattle", "cattle"),
 biodiversity = c("wo.biodiversity", "biodiversity"),
 price        = c(148, 158, 168, 178, 188, 198))
# Create choice sets
BWS3design &lt;- rotation.design(
 attribute.names = attrs,
 nalternatives = 2,
 nblocks = 3,
 randomize = TRUE,
 seed = 987)
# Load a dataset "milk"
data(milk)
# Create a dataset
bws3dat &lt;- bws3.dataset(
 data = milk,
 response = list(
  c("B1", "W1"), c("B2", "W2"), c("B3", "W3"), c("B4", "W4"),
  c("B5", "W5"), c("B6", "W6"), c("B7", "W7"), c("B8", "W8")),
 choice.sets = BWS3design,
 categorical.attributes = 
  c("safety", "worker", "ghg", "cattle", "biodiversity"),
 continuous.attributes  = c("price"),
 optout = TRUE,
 asc = c(0,0,1),
 model = "maxdiff")
# Fit a model
bws3mf &lt;- RES ~ ASC3 + safety + worker + ghg + cattle +
                biodiversity + price + strata(STR)
bws3md.cl &lt;- clogit(formula = bws3mf, data = bws3dat)
bws3md.cl
gofm(bws3md.cl)
mwtp(bws3md.cl, monetary.variables = "price")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
