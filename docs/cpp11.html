<!DOCTYPE html><html><head><title>Help for package cpp11</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cpp11}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cpp_register'><p>Generates wrappers for registered C++ functions</p></a></li>
<li><a href='#cpp_source'><p>Compile C++ code</p></a></li>
<li><a href='#cpp_vendor'><p>Vendor the cpp11 dependency</p></a></li>
<li><a href='#cpp11-package'><p>cpp11: A C++11 Interface for R's C Interface</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A C++11 Interface for R's C Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a header only, C++11 interface to R's C
    interface.  Compared to other approaches 'cpp11' strives to be safe
    against long jumps from the C API as well as C++ exceptions, conform
    to normal R function semantics and supports interaction with 'ALTREP'
    vectors.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cpp11.r-lib.org">https://cpp11.r-lib.org</a>, <a href="https://github.com/r-lib/cpp11">https://github.com/r-lib/cpp11</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/cpp11/issues">https://github.com/r-lib/cpp11/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bench, brio, callr, cli, covr, decor, desc, ggplot2, glue,
knitr, lobstr, mockery, progress, rmarkdown, scales, Rcpp,
testthat (&ge; 3.2.0), tibble, utils, vctrs, withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/Needs/cpp11/cpp_register:</td>
<td>brio, cli, decor, desc, glue, tibble,
vctrs</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-01 19:16:04 UTC; davis</td>
</tr>
<tr>
<td>Author:</td>
<td>Davis Vaughan <a href="https://orcid.org/0000-0003-4777-038X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Jim Hester <a href="https://orcid.org/0000-0002-2739-7082"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Romain Fran√ßois <a href="https://orcid.org/0000-0002-2444-4226"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Benjamin Kietzman [ctb],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Davis Vaughan &lt;davis@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-02 13:20:02 UTC</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.4.0; ; 2024-01-02 07:13:52 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='cpp_register'>Generates wrappers for registered C++ functions</h2><span id='topic+cpp_register'></span>

<h3>Description</h3>

<p>Functions decorated with <code style="white-space: pre;">&#8288;[[cpp11::register]]&#8288;</code> in files ending in <code>.cc</code>,
<code>.cpp</code>, <code>.h</code> or <code>.hpp</code> will be wrapped in generated code and registered to
be called from R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cpp_register(
  path = ".",
  quiet = !is_interactive(),
  extension = c(".cpp", ".cc")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cpp_register_+3A_path">path</code></td>
<td>
<p>The path to the package root directory</p>
</td></tr>
<tr><td><code id="cpp_register_+3A_quiet">quiet</code></td>
<td>
<p>If <code>TRUE</code> suppresses output from this function</p>
</td></tr>
<tr><td><code id="cpp_register_+3A_extension">extension</code></td>
<td>
<p>The file extension to use for the generated src/cpp11 file.
<code>.cpp</code> by default, but <code>.cc</code> is also supported.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note registered functions will not be <em>exported</em> from your package unless
you also add a <code style="white-space: pre;">&#8288;@export&#8288;</code> roxygen2 directive for them.
</p>
<p>In order to use <code>cpp_register()</code> the <code>cli</code>, <code>decor</code>, <code>desc</code>, <code>glue</code>,
<code>tibble</code> and <code>vctrs</code> packages must also be installed.
</p>


<h3>Value</h3>

<p>The paths to the generated R and C++ source files (in that order).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a minimal package
dir &lt;- tempfile()
dir.create(dir)

writeLines("Package: testPkg", file.path(dir, "DESCRIPTION"))
writeLines("useDynLib(testPkg, .registration = TRUE)", file.path(dir, "NAMESPACE"))

# create a C++ file with a decorated function
dir.create(file.path(dir, "src"))
writeLines("[[cpp11::register]] int one() { return 1; }", file.path(dir, "src", "one.cpp"))

# register the functions in the package
cpp_register(dir)

# Files generated by registration
file.exists(file.path(dir, "R", "cpp11.R"))
file.exists(file.path(dir, "src", "cpp11.cpp"))

# cleanup
unlink(dir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='cpp_source'>Compile C++ code</h2><span id='topic+cpp_source'></span><span id='topic+cpp_function'></span><span id='topic+cpp_eval'></span>

<h3>Description</h3>

<p><code><a href="cpp11.html#topic+cpp_source">cpp_source()</a></code> compiles and loads a single C++ file for use in R.
<code><a href="cpp11.html#topic+cpp_function">cpp_function()</a></code> compiles and loads a single function for use in R.
<code><a href="cpp11.html#topic+cpp_eval">cpp_eval()</a></code> evaluates a single C++ expression and returns the result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cpp_source(
  file,
  code = NULL,
  env = parent.frame(),
  clean = TRUE,
  quiet = TRUE,
  cxx_std = Sys.getenv("CXX_STD", "CXX11"),
  dir = tempfile()
)

cpp_function(
  code,
  env = parent.frame(),
  clean = TRUE,
  quiet = TRUE,
  cxx_std = Sys.getenv("CXX_STD", "CXX11")
)

cpp_eval(
  code,
  env = parent.frame(),
  clean = TRUE,
  quiet = TRUE,
  cxx_std = Sys.getenv("CXX_STD", "CXX11")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cpp_source_+3A_file">file</code></td>
<td>
<p>A file containing C++ code to compile</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_code">code</code></td>
<td>
<p>If non-null, the C++ code to compile</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_env">env</code></td>
<td>
<p>The R environment where the R wrapping functions should be defined.</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_clean">clean</code></td>
<td>
<p>If <code>TRUE</code>, cleanup the files after sourcing</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_quiet">quiet</code></td>
<td>
<p>If 'TRUE', do not show compiler output</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_cxx_std">cxx_std</code></td>
<td>
<p>The C++ standard to use, the <code>CXX_STD</code> make macro is set to
this value. The default value queries the <code>CXX_STD</code> environment variable, or
uses 'CXX11' if unset.</p>
</td></tr>
<tr><td><code id="cpp_source_+3A_dir">dir</code></td>
<td>
<p>The directory to store the generated source files. <code>tempfile()</code> is
used by default. The directory will be removed if <code>clean</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Within C++ code you can use <code style="white-space: pre;">&#8288;[[cpp11::linking_to("pkgxyz")]]&#8288;</code> to link to
external packages. This is equivalent to putting those packages in the
<code>LinkingTo</code> field in a package DESCRIPTION.
</p>


<h3>Value</h3>

<p>For <code><a href="cpp11.html#topic+cpp_source">cpp_source()</a></code> and <code style="white-space: pre;">&#8288;[cpp_function()]&#8288;</code> the results of
<code><a href="base.html#topic+dyn.load">dyn.load()</a></code> (invisibly). For <code style="white-space: pre;">&#8288;[cpp_eval()]&#8288;</code> the results of the evaluated
expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cpp_source(
  code = '#include "cpp11/integers.hpp"

  [[cpp11::register]]
  int num_odd(cpp11::integers x) {
    int total = 0;
    for (int val : x) {
      if ((val % 2) == 1) {
        ++total;
      }
    }
    return total;
  }
  ')

num_odd(as.integer(c(1:10, 15, 23)))

if (interactive() &amp;&amp; require("progress")) {

cpp_source(
  code = '
#include &lt;cpp11/R.hpp&gt;
#include &lt;RProgress.h&gt;

[[cpp11::linking_to("progress")]]

[[cpp11::register]] void
show_progress() {
  RProgress::RProgress pb("Processing [:bar] ETA: :eta");

  pb.tick(0);
  for (int i = 0; i &lt; 100; i++) {
    usleep(2.0 / 100 * 1000000);
    pb.tick();
  }
}
')

show_progress()
}

</code></pre>

<hr>
<h2 id='cpp_vendor'>Vendor the cpp11 dependency</h2><span id='topic+cpp_vendor'></span>

<h3>Description</h3>

<p>Vendoring is the act of making your own copy of the 3rd party packages your
project is using. It is often used in the go language community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cpp_vendor(path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cpp_vendor_+3A_path">path</code></td>
<td>
<p>The path to the package root directory</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function vendors cpp11 into your package by copying the cpp11
headers into the <code>inst/include</code> folder of your package and adding
'cpp11 version: XYZ' to the top of the files, where XYZ is the version of
cpp11 currently installed on your machine.
</p>
<p>If you choose to vendor the headers you should <em>remove</em> <code>LinkingTo: cpp11</code> from your DESCRIPTION.
</p>
<p><strong>Note</strong>: vendoring places the responsibility of updating the code on
<strong>you</strong>. Bugfixes and new features in cpp11 will not be available for your
code until you run <code>cpp_vendor()</code> again.
</p>


<h3>Value</h3>

<p>The file path to the vendored code (invisibly).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a new directory
dir &lt;- tempfile()
dir.create(dir)

# vendor the cpp11 headers into the directory
cpp_vendor(dir)

list.files(file.path(dir, "inst", "include", "cpp11"))

# cleanup
unlink(dir, recursive = TRUE)
</code></pre>

<hr>
<h2 id='cpp11-package'>cpp11: A C++11 Interface for R's C Interface</h2><span id='topic+cpp11'></span><span id='topic+cpp11-package'></span>

<h3>Description</h3>

<p>Provides a header only, C++11 interface to R's C interface. Compared to other approaches 'cpp11' strives to be safe against long jumps from the C API as well as C++ exceptions, conform to normal R function semantics and supports interaction with 'ALTREP' vectors.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Davis Vaughan <a href="mailto:davis@posit.co">davis@posit.co</a> (<a href="https://orcid.org/0000-0003-4777-038X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Jim Hester (<a href="https://orcid.org/0000-0002-2739-7082">ORCID</a>)
</p>
</li>
<li><p> Romain Fran√ßois (<a href="https://orcid.org/0000-0002-2444-4226">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Benjamin Kietzman [contributor]
</p>
</li>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://cpp11.r-lib.org">https://cpp11.r-lib.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/cpp11">https://github.com/r-lib/cpp11</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/cpp11/issues">https://github.com/r-lib/cpp11/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
