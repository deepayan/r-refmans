<!DOCTYPE html><html><head><title>Help for package psica</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {psica}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#plot.psicaTree'><p>Plots a PSICA tree.</p></a></li>
<li><a href='#predict.psicaTree'><p>Makes predictions for PSICA tree.</p></a></li>
<li><a href='#print.psicaTree'><p>Prints a PSICA tree.</p></a></li>
<li><a href='#prune.psicaTree'><p>Prunes a PSICA tree.</p></a></li>
<li><a href='#psica'><p>Create a tree that discovers groups having similar treatment</p>
(intervention) effects.</a></li>
<li><a href='#snip.psicaTree'><p>Prunes desired nodes in a PSICA tree.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Decision Tree Analysis for Probabilistic Subgroup Identification
with Multiple Treatments</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Author:</td>
<td>Oleg Sysoev, Krzysztof Bartoszek, Katarina Ekholm Selling and Lotta
    Ekstrom</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Oleg Sysoev &lt;Oleg.Sysoev@liu.se&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>In the situation when multiple alternative treatments or
    interventions available, different population groups may respond differently
    to different treatments. This package implements a method that discovers
    the population subgroups in which a certain treatment has a better effect
    than the other alternative treatments. This is done by first estimating the
    treatment effect for a given treatment and its uncertainty by computing random
    forests, and the resulting model is summarized by a decision tree in which the
    probabilities that the given treatment is best for a given subgroup is shown in
    the corresponding terminal node of the tree.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rdpack, grid, gridBase, randomForest, rpart, partykit, party,
BayesTree</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-11 16:58:08 UTC; olesy12</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-11 17:20:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='plot.psicaTree'>Plots a PSICA tree.</h2><span id='topic+plot.psicaTree'></span>

<h3>Description</h3>

<p>A plot is produced that shows a PSICA tree in which the terminal nodes
contain the probabilities that one treatment is better than the other
ones as well as a label containing the possible best treatments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psicaTree'
plot(x, type = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.psicaTree_+3A_x">x</code></td>
<td>
<p>the PSICA tree to be plotted.</p>
</td></tr>
<tr><td><code id="plot.psicaTree_+3A_type">type</code></td>
<td>
<p>If type=1 a default plot showing the probability of each treatment to be the best are
displayed, if type=2 boxplots of the effect values are displayed in each terminal node.</p>
</td></tr>
<tr><td><code id="plot.psicaTree_+3A_...">...</code></td>
<td>
<p>Other parameter passed to the generic plot function</p>
</td></tr>
</table>

<hr>
<h2 id='predict.psicaTree'>Makes predictions for PSICA tree.</h2><span id='topic+predict.psicaTree'></span>

<h3>Description</h3>

<p>Makes predictions for PSICA tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psicaTree'
predict(object, prob = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.psicaTree_+3A_object">object</code></td>
<td>
<p>the PSICA tree to be predicted</p>
</td></tr>
<tr><td><code id="predict.psicaTree_+3A_prob">prob</code></td>
<td>
<p>should the matrix or class probabilities be predicted (TRUE)
or the classes themselves (FALSE)</p>
</td></tr>
<tr><td><code id="predict.psicaTree_+3A_...">...</code></td>
<td>
<p>further parameters to be passed to 'rpart' object.</p>
</td></tr>
</table>

<hr>
<h2 id='print.psicaTree'>Prints a PSICA tree.</h2><span id='topic+print.psicaTree'></span>

<h3>Description</h3>

<p>Prints a PSICA tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psicaTree'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.psicaTree_+3A_x">x</code></td>
<td>
<p>the PSICA tree to be printed</p>
</td></tr>
<tr><td><code id="print.psicaTree_+3A_...">...</code></td>
<td>
<p>Other parameter passed to the generic print function</p>
</td></tr>
</table>

<hr>
<h2 id='prune.psicaTree'>Prunes a PSICA tree.</h2><span id='topic+prune.psicaTree'></span>

<h3>Description</h3>

<p>Prunes a PSICA tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psicaTree'
prune(pT, cp = 0.001, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prune.psicaTree_+3A_pt">pT</code></td>
<td>
<p>the PSICA tree to be pruned.</p>
</td></tr>
<tr><td><code id="prune.psicaTree_+3A_cp">cp</code></td>
<td>
<p>Cost complexity parameter that defines how much the tree
must be pruned. See rpart::control() for description of the
cost-complexity parameter.</p>
</td></tr>
<tr><td><code id="prune.psicaTree_+3A_...">...</code></td>
<td>
<p>further parameters to be passed to 'rpart' object.</p>
</td></tr>
</table>

<hr>
<h2 id='psica'>Create a tree that discovers groups having similar treatment
(intervention) effects.</h2><span id='topic+psica'></span>

<h3>Description</h3>

<p>The PSICA method operates by first building regression trees for each treament group
and then obtaining the distributions of the effect size for given levels of independent
variables by either bootstrap or by means of the bias-corrected infinitesimal jackknife.
The obtained distributions are used for computing the probabilities that one treatment
is better (effect size is greater) than the other treatments for a given
set of input values. These probabilities are then summarised in the form of a decision tree
built with a special loss function. The terminal nodes of the resulting tree show
the probabilities that one  treatment is better than the other treatments
as well as a label containing the possible best treatments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psica(formula, data, intervention, method = "normal",
  forestControl = list(minsplit = 10, mincriterion = 0.95, nBoots = 500,
  nTrees = 200, mtry = 5), treeControl = rpart::rpart.control(minsplit =
  20, minbucket = 10, cp = 0.003), confidence = 0.95, prune = TRUE,
  ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="psica_+3A_formula">formula</code></td>
<td>
<p>Formula that shows the dependent variable (effect)
and independent variables (separated by '+'). The treatment
variable should not be present among dependent variables</p>
</td></tr>
<tr><td><code id="psica_+3A_data">data</code></td>
<td>
<p>Data frame containing dependent and independent variables
and the categorical treatment variable</p>
</td></tr>
<tr><td><code id="psica_+3A_intervention">intervention</code></td>
<td>
<p>The name of the treatment variable</p>
</td></tr>
<tr><td><code id="psica_+3A_method">method</code></td>
<td>
<p>Choose &quot;boot&quot; for computing probabilities by bootstrapping random forests,
&quot;normal&quot; for computing probabilities by appoximating random forest variance with
infinitesimal jackknife with bias correction.</p>
</td></tr>
<tr><td><code id="psica_+3A_forestcontrol">forestControl</code></td>
<td>
<p>parameters of forest growing, a list with parameters
</p>

<ul>
<li><p> minsplit:  minimum number of observation in the node to
be splitted when growing random forest, default 10
</p>
</li>
<li><p> mincriterion: &quot;mincriterion&quot; setting of the random forest,
see ctree in package partykit
</p>
</li>
<li><p> nBoots: number of trees in random forest.
</p>
</li>
<li><p> nTrees: amount of trees in each random forest
</p>
</li>
<li><p> mtry: number of variables to be selected at each split. Choose either 'sqrt(amount_of_inputs)'
if amount of input variables is large or 'amount_of_inputs' if there are few input variables.
</p>
</li></ul>
</td></tr>
<tr><td><code id="psica_+3A_treecontrol">treeControl</code></td>
<td>
<p>Parameters for decision tree growing,
see rpart.control()</p>
</td></tr>
<tr><td><code id="psica_+3A_confidence">confidence</code></td>
<td>
<p>Parameter that defines the cut-off probability in the loss function
and also which treatments are included in the labels of the PSICA tree. More specifically,
labels in the terminal nodes show all treatments except of useless treatments, i.e. the
treatments that altogether have a probability to be the best which is smaller than 1-confidence.</p>
</td></tr>
<tr><td><code id="psica_+3A_prune">prune</code></td>
<td>
<p>should the final tree be pruned or is (possibly) overfitted tree desired?</p>
</td></tr>
<tr><td><code id="psica_+3A_...">...</code></td>
<td>
<p>further argumets passed to rpart object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of a class psicaTree
</p>


<h3>References</h3>

<p>Sysoev O, Bartoszek K, EkstrÃƒÂ¶m E, Ekholm Selling K (2019).
&ldquo;PSICA: Decision trees for probabilistic subgroup identification with categorical treatments.&rdquo;
<em>Statistics in Medicine</em>, <b>38</b>(22), 4436-4452.
doi: <a href="https://doi.org/10.1002/sim.8308">10.1002/sim.8308</a>, https://onlinelibrary.wiley.com/doi/pdf/10.1002/sim.8308, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/sim.8308">https://onlinelibrary.wiley.com/doi/abs/10.1002/sim.8308</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n=100
X1=runif(n)
X1=sort(X1)
f1&lt;- function(x){
  2*tanh(4*x-2)+3
}
X2=runif(n)
X2=sort(X2)
f2&lt;- function(x){
  2*tanh(2*x-1)+2.3 #2.8
}
plot(X1,f1(X1),ylim=c(0,5), type="l")
points(X2,f2(X2), type="l")
Y1=f1(X1)+rnorm(n, 0, 0.8)
Y2=f2(X2)+rnorm(n,0,0.8)
points(X1,Y1, col="blue")
points(X2,Y2, col="red")
data=data.frame(X=c(X1,X2), Y=c(Y1,Y2), interv=c(rep("treat",n), rep("control",n)))
pt=psica(Y~X, data=data, method="normal",intervention = "interv",
 forestControl=list(nBoots=200, mtry=1))
print(pt)
plot(pt)

</code></pre>

<hr>
<h2 id='snip.psicaTree'>Prunes desired nodes in a PSICA tree.</h2><span id='topic+snip.psicaTree'></span>

<h3>Description</h3>

<p>Prunes desired nodes in a PSICA tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'psicaTree'
snip(pT, indices)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="snip.psicaTree_+3A_pt">pT</code></td>
<td>
<p>the PSICA tree to be pruned.</p>
</td></tr>
<tr><td><code id="snip.psicaTree_+3A_indices">indices</code></td>
<td>
<p>vector of indices of the nodes. All contents below the nodes with these
indices will be pruned.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
