<!DOCTYPE html><html lang="en-GB"><head><title>Help for package xmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {xmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#xmap-package'><p>xmap: Transforming Data Between Statistical Classifications</p></a></li>
<li><a href='#apply_xmap'><p>Apply Crossmap Transformation to Conformable Data</p></a></li>
<li><a href='#as_xmap_tbl'><p>Coercing data frames of links to crossmap tibbles</p></a></li>
<li><a href='#demo'><p>Demo objects for the 'xmap' package</p></a></li>
<li><a href='#vhas'><p>Boolean flags for properties of candidate and validated xmap links (internal)</p></a></li>
<li><a href='#xmap-rlang'><p>Internal rlang methods</p></a></li>
<li><a href='#xmap-vctrs'><p>Internal vctrs methods</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Transforming Data Between Statistical Classifications</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides support for transformations of numeric aggregates
   between statistical classifications (e.g. occupation or industry categorisations) using the 'Crossmaps' framework. 
   Implements classes for representing transformations between a source and target classification
   as graph structures, and methods for validating and applying crossmaps to transform
   data collected under the source classification into data indexed using the target classification codes.
   Documentation about the 'Crossmaps' framework is provided in the included vignettes
   and in Huang (2024, &lt;<a href="https://doi.org/10.48550%2FarXiv.2406.14163">doi:10.48550/arXiv.2406.14163</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cynthia A. Huang &lt;cynthiahqy@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/cynthiahqy/xmap">https://github.com/cynthiahqy/xmap</a>,
<a href="https://cynthiahqy.github.io/xmap/">https://cynthiahqy.github.io/xmap/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/cynthiahqy/xmap/issues">https://github.com/cynthiahqy/xmap/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.4.0), dplyr (&ge; 1.1.0), methods, pillar (&ge; 1.6.0),
rlang (&ge; 1.0.0), tibble, tidyr, tidyselect, vctrs (&ge; 0.6.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, purrr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-31 10:30:53 UTC; chua0032</td>
</tr>
<tr>
<td>Author:</td>
<td>Cynthia A. Huang <a href="https://orcid.org/0000-0002-9218-987X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Laura Puzzello [aut, fnd]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-31 16:10:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='xmap-package'>xmap: Transforming Data Between Statistical Classifications</h2><span id='topic+xmap'></span><span id='topic+xmap-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides support for transformations of numeric aggregates between statistical classifications (e.g. occupation or industry categorisations) using the 'Crossmaps' framework. Implements classes for representing transformations between a source and target classification as graph structures, and methods for validating and applying crossmaps to transform data collected under the source classification into data indexed using the target classification codes. Documentation about the 'Crossmaps' framework is provided in the included vignettes and in Huang (2024, <a href="https://doi.org/10.48550/arXiv.2406.14163">doi:10.48550/arXiv.2406.14163</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Cynthia A. Huang <a href="mailto:cynthiahqy@gmail.com">cynthiahqy@gmail.com</a> (<a href="https://orcid.org/0000-0002-9218-987X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Laura Puzzello [funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/cynthiahqy/xmap">https://github.com/cynthiahqy/xmap</a>
</p>
</li>
<li> <p><a href="https://cynthiahqy.github.io/xmap/">https://cynthiahqy.github.io/xmap/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/cynthiahqy/xmap/issues">https://github.com/cynthiahqy/xmap/issues</a>
</p>
</li></ul>


<hr>
<h2 id='apply_xmap'>Apply Crossmap Transformation to Conformable Data</h2><span id='topic+apply_xmap'></span><span id='topic+diagnose_apply_xmap'></span>

<h3>Description</h3>

<p>This function applies crossmap transformation to a dataset, transforming
data based on specified mapping rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_xmap(.data, .xmap, values_from, keys_from = names(.xmap$.from), ...)

diagnose_apply_xmap(.data, .xmap, values_from, keys_from = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_xmap_+3A_.data">.data</code></td>
<td>
<p>The dataset to transform.</p>
</td></tr>
<tr><td><code id="apply_xmap_+3A_.xmap">.xmap</code></td>
<td>
<p>An 'xmap_tbl' object.</p>
</td></tr>
<tr><td><code id="apply_xmap_+3A_values_from">values_from</code></td>
<td>
<p>A 'tidyselect' expression of columns in '.data'
with values to transform</p>
</td></tr>
<tr><td><code id="apply_xmap_+3A_keys_from">keys_from</code></td>
<td>
<p>A 'tidyselect' expression specifies the column in '.data'
to match with '.xmap$from'</p>
</td></tr>
<tr><td><code id="apply_xmap_+3A_...">...</code></td>
<td>
<p>(reserved)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with transformed data.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>diagnose_apply_xmap()</code>: Returns messages for any diagnosed issues.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>abc_xmap &lt;- demo$abc_links |&gt;
  as_xmap_tbl(from = "lower", to = "upper", weight_by = "share")
abc_data &lt;- tibble::tibble(
  lower = unique(demo$abc_links$lower),
  count = runif(length(unique(demo$abc_links$lower)), min = 100, max = 500)
)
apply_xmap(
  .data = abc_data,
  .xmap = abc_xmap,
  values_from = count
)
</code></pre>

<hr>
<h2 id='as_xmap_tbl'>Coercing data frames of links to crossmap tibbles</h2><span id='topic+as_xmap_tbl'></span><span id='topic+as_xmap_tbl.data.frame'></span><span id='topic+diagnose_as_xmap_tbl'></span>

<h3>Description</h3>

<p>This method takes a data.frame-like object and converts it into an 'xmap_tbl'
based on specified columns for 'from', 'to', and 'weight'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_xmap_tbl(x, ...)

## S3 method for class 'data.frame'
as_xmap_tbl(x, from, to, weight_by, ..., tol = .Machine$double.eps^0.5)

diagnose_as_xmap_tbl(
  x,
  from,
  to,
  weight_by,
  ...,
  tol = .Machine$double.eps^0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_xmap_tbl_+3A_x">x</code></td>
<td>
<p>A data.frame or tibble to be converted in a crossmap tibble.</p>
</td></tr>
<tr><td><code id="as_xmap_tbl_+3A_...">...</code></td>
<td>
<p>(reserved) Additional arguments passed to methods.</p>
</td></tr>
<tr><td><code id="as_xmap_tbl_+3A_from">from</code></td>
<td>
<p>The column in &lsquo;x' that specifies the &rsquo;from' nodes.</p>
</td></tr>
<tr><td><code id="as_xmap_tbl_+3A_to">to</code></td>
<td>
<p>The column in &lsquo;x' that specifies the &rsquo;to' nodes.</p>
</td></tr>
<tr><td><code id="as_xmap_tbl_+3A_weight_by">weight_by</code></td>
<td>
<p>The column in 'x' that specifies the weight of the links.</p>
</td></tr>
<tr><td><code id="as_xmap_tbl_+3A_tol">tol</code></td>
<td>
<p>Tolerance of comparison.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an xmap tibble object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo$abc_links |&gt;
  as_xmap_tbl(from = lower, to = upper, weight_by = share)
</code></pre>

<hr>
<h2 id='demo'>Demo objects for the 'xmap' package</h2><span id='topic+demo'></span>

<h3>Description</h3>

<p>A collection of demo inputs for experimenting with functions
in the 'xmap' package.
'_pairs' objects are tibbles with just source-target *pairs* (no weights)
'_links' objects are tibbles with weighted source-target *links*.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo
</code></pre>


<h3>Format</h3>

<p>## 'demo'
A list with:
</p>

<dl>
<dt>ctr_iso3c_pairs</dt><dd><p>named vector with 249 elements. Names are ISO-3 country codes, values are ISO English country names. Retrieved from 'countrycode' package:
<a href="https://github.com/vincentarelbundock/countrycode">https://github.com/vincentarelbundock/countrycode</a></p>
</dd>
<dt>anzsco22_isco8_crosswalk</dt><dd><p>tibble with 10 rows and 5 columns. Subset of crosswalk between ANZSCO22 and ISCO8 Occupation Code Standards published by The AUstralian Bureau of Statistics</p>
</dd>
<dt>anzsco22_stats</dt><dd><p>tibble with 10 rows and 2 columns. Stylised Occupation Counts</p>
</dd>
<dt>simple_links</dt><dd><p>tibble with 10 rows and 3 columns. specifying links 'xcode'-&gt;'alphacode' by 'weight'</p>
</dd>
<dt>abc_links</dt><dd><p>tibble with 6 rows and 3 columns, specifying links 'lower'-&gt;'upper' by 'share'</p>
</dd>
<dt>aus_state_pairs</dt><dd><p>named list with 1 element named &quot;AUS&quot; containing codes for the Australian states</p>
</dd>
<dt>aus_state_pop_df</dt><dd><p>tibble containing 2022 population figures for Australia by state. Retrieved from:
<a href="https://www.abs.gov.au/statistics/people/population/national-state-and-territory-population/jun-2022">https://www.abs.gov.au/statistics/people/population/national-state-and-territory-population/jun-2022</a></p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>demo$abc_links
</code></pre>

<hr>
<h2 id='vhas'>Boolean flags for properties of candidate and validated xmap links (internal)</h2><span id='topic+vhas'></span><span id='topic+vhas_no_dup_pairs'></span><span id='topic+vhas_valid_weights'></span>

<h3>Description</h3>

<p>'vhas_*()' functions check properties of xmap links and/or candidate links.
The functions only accepts equal length vector inputs to support multiple link formats,
but does not check if the inputs are from the same xmap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vhas_no_dup_pairs(v_from, v_to)

vhas_valid_weights(v_from, v_weights, tol = .Machine$double.eps^0.5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vhas_+3A_v_from">v_from</code>, <code id="vhas_+3A_v_to">v_to</code>, <code id="vhas_+3A_v_weights">v_weights</code></td>
<td>
<p>equal length vectors containing the source-target node pairs</p>
</td></tr>
<tr><td><code id="vhas_+3A_tol">tol</code></td>
<td>
<p>numeric <code class="reqn">\ge 0</code>. Ignore differences smaller than 'tol'.
Passed through to the 'tolerance' arg of 'base::all.equal()'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>vhas_no_dup_pairs()</code>: Returns TRUE if xmap does not have
duplicate pairs of source-target nodes (irrespective of weights)
</p>
</li>
<li> <p><code>vhas_valid_weights()</code>: Returns TRUE if all weights for a given 'from' label
sum to one (approximately)
</p>
</li></ul>

<hr>
<h2 id='xmap-rlang'>Internal rlang methods</h2><span id='topic+xmap-rlang'></span>

<h3>Description</h3>

<p>Internal rlang methods
</p>

<hr>
<h2 id='xmap-vctrs'>Internal vctrs methods</h2><span id='topic+xmap-vctrs'></span>

<h3>Description</h3>

<p>Internal vctrs methods
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
