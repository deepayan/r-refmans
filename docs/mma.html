<!DOCTYPE html><html lang="en"><head><title>Help for package mma</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mma}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mma-package'>
<p>Mediation Analysis Package</p></a></li>
<li><a href='#boot.med'>
<p>Statistical Inference on Mediation Analysis with Continuous or Binary Predictor</p></a></li>
<li><a href='#boot.mod'>
<p>Statistical Inference on Mediation Analysis with Continuous or Binary Predictor at different level of the moderator</p></a></li>
<li><a href='#cgd1'>
<p>cgd1 Data Set</p></a></li>
<li><a href='#data.org'>
<p>Data Organization and Identify Potential Mediators</p></a></li>
<li><a href='#form.interaction'>
<p>Create interaction terms of predictor(s) and potential moderator(s).</p></a></li>
<li><a href='#med'>
<p>Mediation Analysis with Binary or Continuous Predictor</p></a></li>
<li><a href='#mma'>
<p>Multiple Mediation Analysis</p></a></li>
<li><a href='#moderate'>
<p>Calculate and plot the direct effect of the selected exposure variable at each level of the moderator.</p></a></li>
<li><a href='#plot.med'>
<p>Plot the mediation effect on the fitted med object</p></a></li>
<li><a href='#plot.mma'>
<p>Relative effects plot of the fitted mma object</p></a></li>
<li><a href='#plot2.mma'>
<p>Relative effects plot of the fitted mma object with moderator</p></a></li>
<li><a href='#print.med'>
<p>Print an med object</p></a></li>
<li><a href='#print.mma'>
<p>Print a mma object</p></a></li>
<li><a href='#summary.med_iden'>
<p>Summary method for class &quot;med_iden&quot;.</p></a></li>
<li><a href='#summary.mma'>
<p>Summary of an mma project</p></a></li>
<li><a href='#test.moderation'>
<p>Test for moderation effects.</p></a></li>
<li><a href='#weight_behavior'>
<p>Weight_Behavior Data Set</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Multiple Mediation Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>10.7-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-28</td>
</tr>
<tr>
<td>Author:</td>
<td>Qingzhao Yu and Bin Li</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Qingzhao Yu &lt;qyu@lsuhsc.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.1), gbm, splines, survival, car, gplots</td>
</tr>
<tr>
<td>Imports:</td>
<td>lattice, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>Used for general multiple mediation analysis. 
	The analysis method is described in Yu and Li (2022) (ISBN: 9780367365479) "Statistical Methods for Mediation, Confounding and Moderation Analysis Using R and SAS", published by Chapman and Hall/CRC; and Yu et al.(2017) &lt;<a href="https://doi.org/10.1016%2Fj.sste.2017.02.001">doi:10.1016/j.sste.2017.02.001</a>&gt; "Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors", published on Spatial and Spatio-temporal Epidemiology, 21, 13-23.  </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.r-project.org">https://www.r-project.org</a>,
<a href="https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html">https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-29 14:19:49 UTC; qyu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-29 18:10:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='mma-package'>
Mediation Analysis Package
</h2><span id='topic+mma-package'></span>

<h3>Description</h3>

<p>This package is used to identify mediators and for general mediation analysis. Mediation effect refers to the effect conveyed by intervening variables to an observed relationship between an exposure and a response variable (outcome).  In this package, the exposure is called the predictor, the intervening variables are called mediators.  The mediation effects include the total effect, direct effect, and indirect effect, which are defined and the statistical inferences described in Yu et al.(2014).
</p>


<h3>Details</h3>

<p><code>"<a href="#topic+data.org">data.org</a>"</code> is used to identify potential mediators. <code>"<a href="#topic+med">med</a>"</code> , and <code>"<a href="#topic+boot.med">boot.med</a>"</code> are used for statistical inferences on the mediation effects when the predictor is binary or continuous. <code>"<a href="#topic+mma">mma</a>"</code> is a combined function that automatically identify potential mediators, based on which to make statistical inference on the mediation effects.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a> and Bin Li <a href="mailto:bli@lsu.edu">bli@lsu.edu</a>
</p>
<p>Maintainer: Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Baron, R.M., and Kenny, D.A. (1986) &lt;doi:10.1037/0022-3514.51.6.1173&gt;. &quot;The moderator-mediator variable distinction in social psychological research: conceptual, strategic, and statistical considerations,&quot; J. Pers Soc Psychol, 51(6), 1173-1182.
</p>
<p>J.H. Friedman, T. Hastie, R. Tibshirani (2000) &lt;doi:10.1214/aos/1016120463&gt;. &quot;Additive Logistic Regression: a Statistical View of Boosting,&quot; Annals of Statistics 28(2):337-374.
</p>
<p>J.H. Friedman (2001) &lt;doi:10.1214/aos/1013203451&gt;. &quot;Greedy Function Approximation: A Gradient Boosting Machine,&quot; Annals of Statistics 29(5):1189-1232.
</p>
<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.38: 398–412.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>
<p>Yu, Q. and Li, B., (2020). &lt;doi:10.1080/02664763.2020.1738359&gt;. &quot;A Multivariate Multiple Third-Variable Effect Analysis with an Application to Explore Racial and Ethnic Disparities in Obesity,&quot; Journal of Applied Statistics.  
</p>
<p>Yu, Q. and Li, B., 2022. Statistical Methods for Mediation, Confounding and Moderation Analysis Using R and SAS. Chapman and Hall/CRC. ISBN 9780367365479.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
#binary predictor
 #binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 temp.b.b.glm&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,n=2,n2=2)
 
 temp.b.b.mart&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,nonlinear=TRUE,n=2,n2=5)
 #continuous y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,1]
 temp.b.c.glm&lt;-mma(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4,n2=20)
 temp.b.c.mart&lt;-mma(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4,
                     n=2,nonlinear=TRUE,n2=20)
</code></pre>

<hr>
<h2 id='boot.med'>
Statistical Inference on Mediation Analysis with Continuous or Binary Predictor
</h2><span id='topic+boot.med'></span>

<h3>Description</h3>

<p>To make inferences on the mediation effects when the predictor is continuous or binary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.med(data,x=data$x, y=data$y,dirx=data$dirx,binm=data$binm,
         contm=data$contm,catm=data$catm,jointm=data$jointm, 
         cova=data$cova, margin=1,n=20,
         nonlinear=FALSE,df1=1,nu=0.001,D=3,distn=NULL,family1=data$family1,
         n2=50,w=rep(1,nrow(x)),refy=NULL,x.new=x,pred.new=dirx,
         cova.new=cova,binpred=data$binpred,type=NULL,
         w.new=NULL,all.model=FALSE,xmod=NULL,custom.function=NULL,para=FALSE,echo=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boot.med_+3A_data">data</code></td>
<td>

<p>the list of result from data.org that organize the covariates, mediators, predictor and outcome. If data is FALSE, then need to set x, y, dirx, contm, catm, and jointm.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_x">x</code></td>
<td>

<p>a data frame contains all mediators and covariates.  Need to set up only when data is FALSE.  All varaibles in x that are not identified as potential mediators (by mediator, contmed, binmed, catmed, or jointm) are forced in mediation analysis as covariates.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_y">y</code></td>
<td>

<p>the vector of outcome variable.  Need to set up only when data is FALSE.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_dirx">dirx</code></td>
<td>
<p>the vector/matrix of predictor(s). Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="boot.med_+3A_binm">binm</code></td>
<td>

<p>the variable names or the column number of x that locates the binary mediators. Need to set up only when data is FALSE.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_contm">contm</code></td>
<td>
<p>the variable names or the column numbers of x that locate the potential continuous mediators. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="boot.med_+3A_catm">catm</code></td>
<td>
<p>categorical mediators should be binarized and be presented as a list, where the first item is the number of categorical variables and the following items are the names or the column numbers of each binarized categorical variable in x. data.org organizes the categorical mediators in this format after they pass the mediator tests. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="boot.med_+3A_jointm">jointm</code></td>
<td>
<p>a list where the first item is the number of groups of joint mediators to be considered, and each of the following items identifies the names or the column numbers of the mediators in x for each group of joint mediators. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="boot.med_+3A_cova">cova</code></td>
<td>
<p>The data frame of covariates to be used to predict the mediator(s). The covariates in cova cannot be potential mediators. If the covariates are for some specific potential mediators, cova$for.m is the vector of names of potential mediators that use the covariates. Works for continuous predictors (pred) only, also the specified covariates should have no missing if only some mediators uses the covariates. Works mainly for continuous predictors (pred), also the specified covariates should have no missing if only some mediators uses the covariates.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_margin">margin</code></td>
<td>

<p>the change in predictor when calculating the mediation effects, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_n">n</code></td>
<td>

<p>the time of resampling in calculating the indirect effects, default is n=20, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_nonlinear">nonlinear</code></td>
<td>

<p>if TURE, Multiple Additive Regression Trees (MART) will be used to fit the final full model in estimating the outcome. The default value of nonlinear is FALSE, in which case, a generalized linear model will be used to fit the final full model.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_df1">df1</code></td>
<td>

<p>if nonlinear is TURE, natural cubic spline will be used to fit the relationship between the predictor and each mediator.  The df is the degree of freedom in the ns() function, the default is 1.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_nu">nu</code></td>
<td>

<p>set the parameter &quot;shrinkage&quot; in gbm function if MART is to be used, by default, nu=0.001. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_d">D</code></td>
<td>

<p>set the parameter &quot;interaction.depth&quot; in gbm function if MART is to be used, by default, D=3. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_distn">distn</code></td>
<td>

<p>the assumed distribution of the outcome if MART is used for final full model. The default value of distn is &quot;gaussian&quot; for coninuous y, and &quot;bernoulli&quot; for binary y.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_family1">family1</code></td>
<td>

<p>define the conditional distribution of y given x, and the linkage function that links the mean of y with the system component if generalized linear model is used as the final full model.  The default value of family1 is gaussian(link=&quot;identity&quot;) for continuous y, and binomial(link = &quot;logit&quot;) for binary y.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_n2">n2</code></td>
<td>

<p>the number of times of bootstrap resampling.  The default value is n2=50.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_w">w</code></td>
<td>

<p>the weight for observations.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_refy">refy</code></td>
<td>

<p>if y is binary, the reference group of y.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_x.new">x.new</code></td>
<td>

<p>of the same format as x, with a new set of covariates and mediators on which to calculate the mediation effects.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_pred.new">pred.new</code></td>
<td>

<p>a new set of predictor(s).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_cova.new">cova.new</code></td>
<td>

<p>a new set of covaraite(s).
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_binpred">binpred</code></td>
<td>

<p>if TRUE, the predictor is binary.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_type">type</code></td>
<td>

<p>the type of prediction when y is class Surv. Is &quot;risk&quot; if not specified.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_w.new">w.new</code></td>
<td>

<p>the weights for new.x.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_all.model">all.model</code></td>
<td>

<p>save all the fitted model from bootstrap samples if TRUE. This needs to be true to make inferences on moderation effects. </p>
</td></tr>
<tr><td><code id="boot.med_+3A_xmod">xmod</code></td>
<td>

<p>If there is a moderator, xmod gives the moderator's name in cova and/or x.
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_custom.function">custom.function</code></td>
<td>
<p>a string of customer defined final model for predicting the outcome(s). The response variable should be noted as &quot;responseY&quot;, the dataset should be noted as &quot;dataset123&quot;. The weights for observations should be noted as &quot;weights123&quot;. The covariates should be in x or pred. Use &quot;~.&quot; for all varaibles in x and pred is allowed. The customer defined model should be able to make prediction by using &quot;predict(object, newdata=...)&quot;, where the object is the results of the fitted model. If a specific package needs to be called to fit the model, the user should call the package first. For example, if the gamlss package is used to fit a piecewise polynomial with &quot;age&quot; to be the mediator and &quot;race&quot; be the predictor, we can set custom.function=&quot;gamlss(responseV~b(age,df=3)+race,data=dataset123,tace=FALSE)&quot;. The length of custom.function should be the same as the dimension of y. If custom.function[j] is NA, the usual method will be used to fit y[j]. 
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_para">para</code></td>
<td>
<p>It is for binary predictors. If it is true, we would like the x-m relationship be fitted parametrically. 
</p>
</td></tr>
<tr><td><code id="boot.med_+3A_echo">echo</code></td>
<td>
<p>If echo is FALSE, there is no counting printed for the number of bootstrap iterations. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The mediators are not tested in this function.  data.org should be used for the tests and data organizing, and then the resulting list from data.org can be used directly to define the arguments in this function. boot.med considers all variables in x as mediators or covariates in the final model and all variables identified by contm, binm, catm, or jointm as mediators.
</p>


<h3>Value</h3>

<p>Returns an mma object.
</p>
<table role = "presentation">
<tr><td><code>estimation</code></td>
<td>
<p>list the estimation of ie (indirect effect), te  (total effect), and de (direct effect from the predictor) separately.</p>
</td></tr>  <tr><td><code>bootsresults</code></td>
<td>
<p>a list where the first item, ie, is a matrix of n2 rows where each column gives the estimated indirect effect from the corresponding mediator (identified by the column name) from the n2 bootstrap samples; the second item, te, is a vector of estimated total effects from the bootstrap sample; and the 3rd item, de, is a vector of estimated direct effect of the predictor from the bootstrap sample.</p>
</td></tr> 
<tr><td><code>model</code></td>
<td>
<p>a list where the first item, MART, is TRUE if mart is fitted for the final model; the second item, Survival, is TRUE if a survival model is fitted; the third item, type, is the type of prediction when a survival model is fitted; the fourth item, model, is the fitted final full model where y is the outcome and all predictor, covariates, and mediators are the explanatory variables; and the fourth item, best.iter is the number of best iterations if MART is used to fit the final model.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>a list that contains all the used data: x=x, y=y, dirx=dirx, binm=binm, contm=contm, catm=catm, jointm=jointm, binpred=FALSE.</p>
</td></tr>
<tr><td><code>boot.detail</code></td>
<td>
<p>a list that contains the mediation effects on each row of new.x: new.x=new.x, te1, de1, ie1.</p>
</td></tr>
<tr><td><code>all_model</code></td>
<td>
<p>a list with all fitted models from bootstrap samples if all.model is TRUE. </p>
</td></tr>
<tr><td><code>all_iter</code></td>
<td>
<p>if all.model is TRUE, a matrix with all fitted best iterations if MART is used. Each row is from one bootstrap sample. </p>
</td></tr>
<tr><td><code>all_boot</code></td>
<td>
<p>if all.model is TRUE, a matrix with all bootstrap samples. Each row is one bootstrap sample. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a></p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+med">med</a>"</code> just estimate the mediation effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
##binary x
#binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
 temp1&lt;-boot.med(data=data.bin,n=2,n2=4)
 temp2&lt;-boot.med(data=data.bin,n=2,n2=4,nu=0.05,nonlinear=TRUE)


#continuous y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,1]
 data.cont&lt;-data.org(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4)
 temp3&lt;-boot.med(data=data.cont,n=2,n2=4) 
 temp4&lt;-boot.med(data=data.cont,n=2,n2=4,nu=0.05, nonlinear=TRUE)


##Surv class outcome (survival analysis)

data(cgd1)       #a dataset in the survival package
x=cgd1[,c(4:5,7:12)]
pred=cgd1[,6]
status&lt;-ifelse(is.na(cgd1$etime1),0,1)
y=Surv(cgd1$futime,status)          
#for continuous predictor
data.surv.contx&lt;-data.org(x,y,pred=pred,mediator=1:ncol(x),      
                          alpha=0.5,alpha2=0.5)
temp9.contx&lt;-boot.med(data=data.surv.contx,n=1,n2=2, type="lp") 
temp10.contx&lt;-boot.med(data=data.surv.contx,nonlinear=TRUE,n=1,n2=2) 

#for binary predictor

x=cgd1[,c(5:12)]
pred=cgd1[,4]
data.surv.binx&lt;-data.org(x,y,pred=pred,mediator=1:ncol(x),   
                    alpha=0.4,alpha2=0.4)
temp9.binx&lt;-boot.med(data=data.surv.binx,n=1,n2=2, type="lp") 
summary(temp9.binx)
temp10.binx&lt;-boot.med(data=data.surv.binx,nonlinear=TRUE,n=1,n2=2) 


</code></pre>

<hr>
<h2 id='boot.mod'>
Statistical Inference on Mediation Analysis with Continuous or Binary Predictor at different level of the moderator
</h2><span id='topic+boot.mod'></span>

<h3>Description</h3>

<p>To make inferences on the mediation effects when the predictor is continuous or binary at different level of the moderator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.mod(mma1,vari,continuous.resolution=10,
         w=NULL,n=20,
         x.new=NULL,w.new=NULL,pred.new=NULL,cova.new=NULL,xj=1,margin=1,
         xmod=vari,df1=1,para=FALSE,echo=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boot.mod_+3A_mma1">mma1</code></td>
<td>

<p>the mma project generated from the function mma or boot.med.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_vari">vari</code></td>
<td>

<p>The name of the moderator. The moderator should be included in the original data as a covariate for the response(in x) and/or for mediators (in cova). 
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_continuous.resolution">continuous.resolution</code></td>
<td>

<p>The number of equally space points (for continuous moderator) or levels (for categorical moderator) at which to evaluate mediation effects separately. If the moderator is categorical, continuous.resolution=10 implies using all individual levels.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_w">w</code></td>
<td>

<p>the weight for observations.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_n">n</code></td>
<td>

<p>the time of resampling in calculating the indirect effects, default is n=20, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_x.new">x.new</code></td>
<td>

<p>of the same format as x, with a new set of covariates and mediators on which to calculate the mediation effects.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_w.new">w.new</code></td>
<td>

<p>the weights for new.x.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_pred.new">pred.new</code></td>
<td>

<p>a new set of predictor(s).
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_cova.new">cova.new</code></td>
<td>

<p>a new set of covariate for mediator(s).
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_xj">xj</code></td>
<td>

<p>the inference of mediation effects at different levels of moderator is made on the xjth predictor.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_margin">margin</code></td>
<td>

<p>the change in predictor when calculating the mediation effects, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_xmod">xmod</code></td>
<td>

<p>If there is a moderator, xmod gives the moderator's name in cova and/or x.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_df1">df1</code></td>
<td>

<p>if nonlinear is TURE, natural cubic spline will be used to fit the relationship between the predictor and each mediator.  The df is the degree of freedom in the ns() function, the default is 1.
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_para">para</code></td>
<td>
<p>It is for binary predictors. If it is true, we would like the x-m relationship be fitted parametrically. 
</p>
</td></tr>
<tr><td><code id="boot.mod_+3A_echo">echo</code></td>
<td>
<p>If echo is FALSE, there is no counting printed for the number of bootstrap iterations. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>calculate the mediation effects from the xjth predictor to the response variable(s) at each level of the mediator.
</p>


<h3>Value</h3>

<p>Returns an mma.mod object, which is similar to the mma object. Instead of calculating mediation effects for each predictor, the function returns the mediation effects of the xjth predictor at each level of the moderator.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a></p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+med">med</a>"</code> just estimate the mediation effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#binary x and categorical moderator
#linear model
data("weight_behavior")
pred=weight_behavior[,3]
x=weight_behavior[,c(2,4:14)]
inter=form.interaction(x,pred,inter.cov=c("race"),predref="M") 
x=cbind(x,inter)
y=weight_behavior[,15]
head(x)
data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
                   binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp1&lt;-boot.med(data=data.bin,n=2,n2=4,all.model=TRUE)
temp1.mode=boot.mod(temp1,vari="race",continuous.resolution=10)
plot2.mma(temp1.mode,vari="exercises",moderator="race")
plot2.mma(temp1.mode,vari="sports",moderator="race")

#nonlinear model
x=weight_behavior[,c(2,4:14)]
pred=weight_behavior[,3]
y=weight_behavior[,15]
data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp2&lt;-boot.med(data=data.bin,n=2,n2=4,nu=0.05,nonlinear=TRUE,all.model=TRUE)
temp2.mode=boot.mod(temp2,vari="race",continuous.resolution=10)
plot2.mma(temp2.mode,vari="exercises",moderator="race")
plot2.mma(temp2.mode,vari="sports",moderator="race")

#binary x and continuou moderator
x=weight_behavior[,c(2,4:14)]
pred=weight_behavior[,3]
y=weight_behavior[,1]
inter=form.interaction(x,pred,inter.cov=c("age"),predref="M") 
x=cbind(x,inter)
head(x)
data.cont&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
                   binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp3&lt;-boot.med(data=data.cont,n=2,n2=4,all.model=TRUE) 
temp3.mode=boot.mod(temp3,vari="age",continuous.resolution=2)
summary(temp3.mode)

plot2.mma(temp3.mode,vari="exercises",moderator="age")
plot2.mma(temp3.mode,vari="sports",moderator="age")

x=weight_behavior[,c(2,4:14)]
pred=weight_behavior[,3]
y=weight_behavior[,1]
data.cont&lt;-data.org(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4)
temp4&lt;-boot.med(data=data.cont,n=2,n2=4,nu=0.05, nonlinear=TRUE,all.model=TRUE)
temp4.mode=boot.mod(temp4,vari="age",continuous.resolution=2,n=20)
summary(temp4.mode)
summary(temp4.mode,bymed=TRUE)

</code></pre>

<hr>
<h2 id='cgd1'>
cgd1 Data Set
</h2><span id='topic+cgd1'></span>

<h3>Description</h3>

<p>This database was obtained from the survival package containing a time-to-event data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(weight_behavior)</code></pre>


<h3>Format</h3>

<p>The data set contains many variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cgd1)
names(cgd1)
</code></pre>

<hr>
<h2 id='data.org'>
Data Organization and Identify Potential Mediators
</h2><span id='topic+data.org'></span>

<h3>Description</h3>

<p>Do a preliminary data analysis to identify potential mediators and covariates. Each variable listed in jointm is forced in the final estimation model as a mediator. Also organize the data into a format that can be directly used for the mediation analysis functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data.org(x,y,pred,mediator=NULL,contmed=NULL,binmed=NULL,binref=NULL,catmed=NULL,
                   catref=NULL,jointm=NULL,refy=rep(NA,ncol(data.frame(y))), 
                   family1=as.list(rep(NA,ncol(data.frame(y)))),
                   predref=rep(NA,ncol(data.frame(pred))),alpha=0.1,alpha2=0.1,
                   testtype=1, w=NULL,cova=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data.org_+3A_x">x</code></td>
<td>

<p>a data frame contains the predictor, all potential mediators and covariates. Note that x has to be a data frame. All varaibles in x that are not identified as potential mediators (by mediator, contmed, binmed, catmed, or jointm) are forced in mediation analysis as covariates.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_y">y</code></td>
<td>

<p>the vector of outcome variable.The outcome can be binary, continuous, or of &quot;Surv&quot; class (see survival package for help).
</p>
</td></tr>
<tr><td><code id="data.org_+3A_pred">pred</code></td>
<td>

<p>the column or matrix of predictor(s): the predictor is the exposure variable, it can be a binary or multi-categorical factor or one/a few contiuous variable(s).
</p>
</td></tr>
<tr><td><code id="data.org_+3A_mediator">mediator</code></td>
<td>

<p>the list of mediators (column numbers in x or by variable names). The mediators to be checked can be identified by &quot;contmed&quot;, &quot;binmed&quot; and &quot;catmed&quot;, or by this argument, &quot;mediator&quot;, where binary and categorical mediators in x are identified as factors or characters, the reference group is the first level of the factor or factorized character. if a mediator has only two unique values, the mediator is identified as binary. If the reference groups need to be changed, the binary or categorical mediators can be listed in binmed or catmed, and the corresponding reference group in binref or catref.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_contmed">contmed</code></td>
<td>

<p>a vector of variable names or column numbers that locate the potential continuous mediators in x.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_binmed">binmed</code></td>
<td>

<p>a vector of column numbers that locate the potential binary mediators in x.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_binref">binref</code></td>
<td>

<p>the defined reference groups of the binary potential mediators in binmed. The first levels of the mediators if is null.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_catmed">catmed</code></td>
<td>

<p>a vector of variable names or column numbers that locate the potential categorical mediators in x. The first levels of the mediators if is null.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_catref">catref</code></td>
<td>

<p>the defined reference groups of the categorical potential mediators in catmed.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_jointm">jointm</code></td>
<td>

<p>a list that identifies the mediators that need to be considered jointly, where the first item indicates the number of groups of mediators to be considered jointly, and each of the following items identifies the variable names or column numbers of the mediators in x for each group of joint mediators.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_refy">refy</code></td>
<td>

<p>if y is binary, the reference group of y. The default is the first level of as.factor(y). y for the reference group is assigned as 0.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_family1">family1</code></td>
<td>

<p>define the conditional distribution of y given x, and the linkage function that links the mean of y with the system component in generalized linear model.  The default value of family1 is binomial(link = &quot;logit&quot;) for binary y, and gaussian(link=&quot;identity&quot;) for continuous y.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_predref">predref</code></td>
<td>

<p>if the predictor is categorical, identify the reference group of the predictor. The default is the first level of the predictor. The value of the predictor is 0 for the reference group.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_alpha">alpha</code></td>
<td>

<p>the significance level at which to test if the potential mediators (identified by contmed, binmed, and catmed) can be used as a covariate or mediator in estimating y when all variables in x are included in the model.  The default value is alpha=0.1
</p>
</td></tr>
<tr><td><code id="data.org_+3A_alpha2">alpha2</code></td>
<td>

<p>the significant level at which to test if a potential mediator is related with the predictor. The default value is alpha2=0.1.
</p>
</td></tr>  
<tr><td><code id="data.org_+3A_testtype">testtype</code></td>
<td>
<p>if the testtype is 1 (by default), covariates/mediators are identified using full model; if the testtype is 2, covariates/mediators are tested one by one in models with the predictor only.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_w">w</code></td>
<td>
<p>the weight for data analysis, by default is rep(1,length(y)).
</p>
</td></tr>
<tr><td><code id="data.org_+3A_cova">cova</code></td>
<td>
<p>The data frame of covariates to be used to predict the mediator(s). The covariates in cova cannot be potential mediators. If the covariates are for some specific potential mediators, cova$for.m is the vector of names of potential mediators that use the covariates. Works for continuous predictors (pred) only, also the specified covariates should have no missing if only some mediators uses the covariates.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.org returns a list with the organized data and identifiers of the potential mediators in the organized data set. The list has two components, bin.results if there is binary or categorical exposure(s), cont.results if there is continuous exposures.
</p>
<table role = "presentation">
<tr><td><code>x</code></td>
<td>
<p>the organized data frame that include all potential mediators and covariates that should be used to estimate the outcome.</p>
</td></tr>
<tr><td><code>dirx</code></td>
<td>
<p>the vector/matrix of predictor(s)/exposure variable(s).</p>
</td></tr>
<tr><td><code>contm</code></td>
<td>
<p>the column numbers of x that locate the potential continuous mediators.</p>
</td></tr>
<tr><td><code>binm</code></td>
<td>
<p>when the predictor is continuous, binm gives the column numbers of x that locate the potential binary mediators.</p>
</td></tr>
<tr><td><code>catm</code></td>
<td>
<p>when the predictor is binary, catm gives the column numbers of x that locate the potential binary or categorical mediators; when the predictor is continuous, catm gives a list where the first item is the number of potential categorical mediators, and the following items give the column numbers of each binarized categorical mediator in x.</p>
</td></tr>
<tr><td><code>jointm</code></td>
<td>
<p>a list where the first item is the number of groups of joint mediators, and each of the following items identifies the column numbers of the mediators in the newly organized x for each group of joint mediators.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>the vector/matrix of outcome(s).</p>
</td></tr>
<tr><td><code>y_type</code></td>
<td>
<p>the variable type of outcome(s): 1 is continuous, 2 is binary, 3 is reserved for multi-categorical (no 3 would show in y_type, since all categorical responses are binarized), and 4 is survival.</p>
</td></tr>
<tr><td><code>fullmodel</code></td>
<td>
<p>a list with each item the full linear model fitted with all potential mediators and covariates for each response.</p>
</td></tr>
<tr><td><code>rela</code></td>
<td>
<p>p-values of tests on the realtionship between the predictor(s) and each potiential mediator.</p>
</td></tr>
<tr><td><code>P1</code></td>
<td>
<p>If testtype=2, P1 gives the p-value of the corresponding variables in predicting the outcome(s) when only the variable and predictor are covariates in the model.</p>
</td></tr>
<tr><td><code>binpred</code></td>
<td>
<p>The columne numbers of binary predictors in pred.</p>
</td></tr>
<tr><td><code>contpred</code></td>
<td>
<p>The columne numbers of continuous predictors in pred.</p>
</td></tr>
<tr><td><code>catpred</code></td>
<td>
<p>A list with each item includes the columne numbers of a categorical predictor in pred.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>All other variables in x but not identified by mediator, contmed, binmed, or catmed are forced in the final model as covariates.  Compared with data.org, joint mediators are considered in this function. Every variable in the jointm should be listed in contmed, binmed, or catmed, and these variables are forced to be included as mediators for further mediation analysis. A variables can be included in more than one groups of joint mediators in jointm.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Baron, R.M., and Kenny, D.A. (1986) &lt;doi:10.1037/0022-3514.51.6.1173&gt;. The moderator-mediator variable distinction in social psychological research: conceptual, strategic, and statistical considerations. J. Pers Soc Psychol, 51(6), 1173-1182.
</p>
<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+data.org">data.org</a>"</code>  that does not consider joint mediators, which can be added freely in the mediation analysis functions later.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
#binary predictor
 #binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.b.b.2.1&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="M", alpha=0.4,alpha2=0.4)
 summary(data.b.b.2.1)
 #Or you can specify the potential mediators and change the reference 
 #group for binary or categorical mediators. In the following code,
 #potential continuous mediators are columns 8,9,10,12, and 13 of x,
 #binary mediators are columns 7 and 11, and categorical mediator is
 #column 6 of x with 1 to be the reference group for all categorical
 #and binary mediators. 
  data.b.b.2&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
   binref=c(1,1),catmed=5,catref=1,jointm=list(n=1,j1=c(5,7,9)),
   predref="M",alpha=0.4,alpha2=0.4) 
  summary(data.b.b.2)
 #use the mediator argument instead of contmet, binmed and catmed
 
 #multivariate predictor

 x=weight_behavior[,c(2:3,5:14)]
 pred=weight_behavior[,4]
 y=weight_behavior[,15]
 data.b.b.2.3&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="OTHER", alpha=0.4,alpha2=0.4)
 summary(data.b.b.2.3)

 #multivariate responses
 x=weight_behavior[,c(2:3,5:14)]
 pred=weight_behavior[,4]
 y=weight_behavior[,c(1,15)]
 data.b.b.2.4&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="OTHER", alpha=0.4,alpha2=0.4)
 summary(data.b.b.2.4)

 #continuous y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,1]
 data.b.c.2&lt;-data.org(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
   predref="M",alpha=0.4,alpha2=0.4)
 summary(data.b.c.2)
 
#continuous predictor
 #binary y
 x=weight_behavior[,3:14]
 pred=weight_behavior[,2]
 y=weight_behavior[,15]
 data.c.b.2&lt;-data.org(x,y,pred=pred,mediator=5:12,catref=1,
          jointm=list(n=2,j1=7:9,j2=c(5,7)),alpha=0.4,alpha2=0.4)
 summary(data.c.b.2)

#multivariate predictors 
 x=weight_behavior[,c(3:12,14)]
 pred=weight_behavior[,c(2,13)]
 y=weight_behavior[,15]
 data.c.b.2.2&lt;-data.org(x,y,pred=pred,mediator=5:11,catref=1,
          jointm=list(n=2,j1=7:9,j2=c(5,7)),alpha=0.4,alpha2=0.4)
 summary(data.c.b.2.2)
 
 #continuous y
 x=weight_behavior[,3:14]
 pred=weight_behavior[,2]
 y=weight_behavior[,1]
 data.c.c.2&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
   binref=c(1,1),catmed=5,catref=1,jointm=list(n=2,j1=7:9,j2=c(5,7)),
   alpha=0.4,alpha2=0.4)
 summary(data.c.c.2)

 #multivariate responses
 x=weight_behavior[,c(2:3,5:14)]
 pred=weight_behavior[,4]
 y=weight_behavior[,c(1,15)]
 data.b.c.2.4&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="OTHER", alpha=0.4,alpha2=0.4)
 summary(data.b.c.2.4)

# 
 x=weight_behavior[,c(3:12,14)]
 pred=weight_behavior[,c(2,13)]
 y=weight_behavior[,c(1,15)]
 data.c.c.2.2&lt;-data.org(x,y,pred=pred,mediator=5:11,catref=1,
          jointm=list(n=2,j1=7:9,j2=c(5,7)),alpha=0.4,alpha2=0.4)
 summary(data.c.c.2.2)
 
#Surv class outcome (survival analysis)
data(cgd1)       #a dataset in the survival package
x=cgd1[,c(4:5,7:12)]
pred=cgd1[,6]
status&lt;-ifelse(is.na(cgd1$etime1),0,1)
y=Surv(cgd1$futime,status)          
 #for continuous predictor
 #all other variables are considered as potential mediator
 data.surv.contx&lt;-data.org(x,y,pred=pred,mediator=(1:ncol(x)),      
                    alpha=0.5,alpha2=0.5) 
 summary(data.surv.contx)

 #for binary predictor
x=cgd1[,c(5:12)]
pred=cgd1[,4]
 data.surv.binx&lt;-data.org(x,y,pred=pred,mediator=(1:ncol(x)),   
                    alpha=0.4,alpha2=0.4)
 summary(data.surv.binx)
</code></pre>

<hr>
<h2 id='form.interaction'>
Create interaction terms of predictor(s) and potential moderator(s).
</h2><span id='topic+form.interaction'></span>

<h3>Description</h3>

<p>Create interaction terms of predictor(S) and potential moderator(s). Mainly for linear models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>form.interaction(x,pred,inter.cov,predref=NULL,kx=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="form.interaction_+3A_x">x</code></td>
<td>

<p>As the x in data.org.
</p>
</td></tr>
<tr><td><code id="form.interaction_+3A_pred">pred</code></td>
<td>

<p>The predictor(s) that might have interaction effect with the potential moderators.
</p>
</td></tr>
<tr><td><code id="form.interaction_+3A_inter.cov">inter.cov</code></td>
<td>

<p>The vector of names of potential moderators, which are included in x as covariates.
</p>
</td></tr>
<tr><td><code id="form.interaction_+3A_predref">predref</code></td>
<td>

<p>The reference group of the predictor if the predictor is categorical.
</p>
</td></tr>
<tr><td><code id="form.interaction_+3A_kx">kx</code></td>
<td>

<p>The interaction is with the kx-th predictor(s). kx can be a vector. If kx is null, the interaction is with each predictor.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>form.interaction is used to create interaction terms between predictor(s) and potential moderator(s). The created interaction terms should be used as covariates in linear mediation analysis. The function is not needed for nonlinear mediation method.
</p>


<h3>Value</h3>

<p>Return a matrix with the interaction terms pred*inter.cov.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+test.moderation">test.moderation</a>"</code>, <code>"<a href="#topic+moderate">moderate</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
pred=data.frame(weight_behavior[,3])
names(pred)="pred"
x=weight_behavior[,c(2,4:14)]
inter=form.interaction(x,pred,inter.cov=c("sports","sweat"),predref=NULL) 
x=cbind(x,inter)
head(x)
</code></pre>

<hr>
<h2 id='med'>
Mediation Analysis with Binary or Continuous Predictor
</h2><span id='topic+med'></span>

<h3>Description</h3>

<p>To estimate the mediation effects when the predictor is binary or continuous.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>med(data, x=data$bin.results$x, y=data$bin.results$y, dirx=data$bin.results$dirx, 
              binm=data$bin.results$binm,contm = data$bin.results$contm, 
              catm = data$bin.results$catm, jointm = data$bin.results$jointm, 
              cova=data$bin.results$cova, allm = c(contm, catm), 
              margin=1, n=20, nonlinear=FALSE, df1=1, nu=0.001,D=3,distn=NULL,
              family1=data$bin.results$family1,refy=rep(0,ncol(y)),
              binpred=data$bin.results$binpred,x.new=x,pred.new=dirx, 
              cova.new=cova,type=NULL, w=NULL, w.new=NULL,xmod=NULL,
              custom.function=NULL,para=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="med_+3A_data">data</code></td>
<td>

<p>the list of result from data.org that organize the covariates, mediators, predictor and outcome. If data is FALSE, then need to set x1, y1, dirx, contm, catm, and jointm.
</p>
</td></tr>
<tr><td><code id="med_+3A_x">x</code></td>
<td>

<p>a data frame contains all mediators and covariates.  Need to set up only when data is FALSE. All varaibles in x that are not identified as potential mediators (by mediator, contmed, binmed, catmed, or jointm) are forced in mediation analysis as covariates.
</p>
</td></tr>
<tr><td><code id="med_+3A_y">y</code></td>
<td>

<p>the vector of outcome variable.  Need to set up only when data is FALSE.
</p>
</td></tr>
<tr><td><code id="med_+3A_dirx">dirx</code></td>
<td>
<p>the vector or matrix of predictor(s). The reference group is set to be 0. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="med_+3A_binm">binm</code></td>
<td>

<p>the variable names or the column number of x that locates the binary mediators. Need to set up only when data is FALSE.
</p>
</td></tr>
<tr><td><code id="med_+3A_contm">contm</code></td>
<td>
<p>the variable names or the column numbers of x that locate the potential continuous mediators. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="med_+3A_catm">catm</code></td>
<td>
<p>categorical mediators should be binarized and be presented as a list, where the first item is the number of categorical variables and the following items are the names or the column numbers of each binarized categorical variable in x. data.org organizes the categorical mediators in this format after they pass the mediator tests. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="med_+3A_jointm">jointm</code></td>
<td>
<p>a list where the first item is the number of groups of joint mediators to be considered, and each of the following items identifies the names or the column numbers of the mediators in x for each group of joint mediators. Need to set up only when data is FALSE.</p>
</td></tr>
<tr><td><code id="med_+3A_cova">cova</code></td>
<td>
<p>The data frame of covariates to be used to predict the mediator(s). The covariates in cova cannot be potential mediators. If the covariates are for some specific potential mediators, cova$for.m is the vector of names of potential mediators that use the covariates. Works for continuous predictors (pred) only, also the specified covariates should have no missing if only some mediators uses the covariates.  Need to set up only when data is FALSE.
</p>
</td></tr>
<tr><td><code id="med_+3A_allm">allm</code></td>
<td>

<p>the column numbers of all mediators.  Need to set up only when data is FALSE. The default value of allm is c(contm,catm).
</p>
</td></tr>
<tr><td><code id="med_+3A_margin">margin</code></td>
<td>

<p>the change in predictor when calculating the mediation effects, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="med_+3A_n">n</code></td>
<td>

<p>the time of resampling in calculating the indirect effects, default is n=20, see Yu et al. (2014).
</p>
</td></tr>

<tr><td><code id="med_+3A_nonlinear">nonlinear</code></td>
<td>

<p>if TURE, Multiple Additive Regression Trees (MART) will be used to fit the final full model in estimating the outcome. The default value of nonlinear is FALSE, in which case, a generalized linear model will be used to fit the final full model.
</p>
</td></tr>
<tr><td><code id="med_+3A_df1">df1</code></td>
<td>

<p>if nonlinear is TURE, natural cubic spline will be used to fit the relationship between the predictor and each mediator.  The df is the degree of freedom in the ns() function, the default is 1.
</p>
</td></tr>
<tr><td><code id="med_+3A_nu">nu</code></td>
<td>

<p>set the parameter &quot;shrinkage&quot; in gbm function if MART is to be used, by default, nu=0.001. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="med_+3A_d">D</code></td>
<td>

<p>set the parameter &quot;interaction.depth&quot; in gbm function if MART is to be used, by default, D=3. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="med_+3A_distn">distn</code></td>
<td>

<p>the assumed distribution(s) of the outcome(s) if MART is used for final full model. The default value of distn is &quot;gaussian&quot; for continuous y,  &quot;bernoulli&quot; for binary y and coxph for &quot;Surv&quot; class outcome.
</p>
</td></tr>
<tr><td><code id="med_+3A_family1">family1</code></td>
<td>
<p>a list with the ith item 
define the conditional distribution of y[,i] given x, and the linkage function that links the mean of y with the system component if generalized linear model is used as the final full model.  The default value of family1 is gaussian(link=&quot;identity&quot;) for contiuous y[,i], and binomial(link = &quot;logit&quot;) for binary y[,i].
</p>
</td></tr>
<tr><td><code id="med_+3A_refy">refy</code></td>
<td>

<p>if y is binary, the reference group of y.
</p>
</td></tr>
<tr><td><code id="med_+3A_binpred">binpred</code></td>
<td>

<p>if TRUE, the predict variable is binary.  
</p>
</td></tr>
<tr><td><code id="med_+3A_x.new">x.new</code></td>
<td>

<p>A new set of covariates, of the same format as x (after data.org),  on which to calculate the mediation effects. For continuous predictor only. If is NULL, the mediation effects will be calculated based on the original data set.
</p>
</td></tr>
<tr><td><code id="med_+3A_pred.new">pred.new</code></td>
<td>

<p>A new set of predictor(s), of the same format as pred (after data.org), on which to calculate the mediation effects. For continuous predictor only.
</p>
</td></tr>
<tr><td><code id="med_+3A_cova.new">cova.new</code></td>
<td>

<p>A new set of covariate(s) to estimate mediators, of the same format as cova.
</p>
</td></tr>
<tr><td><code id="med_+3A_type">type</code></td>
<td>

<p>the type of prediction when y is class Surv. By default, type is &quot;risk&quot;.
</p>
</td></tr>
<tr><td><code id="med_+3A_w">w</code></td>
<td>

<p>the weight for each case in x.
</p>
</td></tr>
<tr><td><code id="med_+3A_w.new">w.new</code></td>
<td>

<p>the weight for each case in x.new.
</p>
</td></tr>
<tr><td><code id="med_+3A_xmod">xmod</code></td>
<td>

<p>If there is a moderator, xmod gives the moderator's name in cova and/or x.
</p>
</td></tr>
<tr><td><code id="med_+3A_custom.function">custom.function</code></td>
<td>
<p>a string of customer defined final model for predicting the outcome(s). The response variable should be noted as &quot;responseY&quot;, the dataset should be noted as &quot;dataset123&quot;. The weights for observations should be noted as &quot;weights123&quot;. The covariates should be in x or pred. Use &quot;~.&quot; for all varaibles in x and pred is allowed. The customer defined model should be able to make prediction by using &quot;predict(object, newdata=...)&quot;, where the object is the results of the fitted model. If a specific package needs to be called to fit the model, the user should call the package first. For example, if the gamlss package is used to fit a piecewise polynomial with &quot;age&quot; to be the mediator and &quot;race&quot; be the predictor, we can set custom.function=&quot;gamlss(responseV~b(age,df=3)+race,data=dataset123,tace=FALSE)&quot;. The length of custom.function should be the same as the dimension of y. If custom.function[j] is NA, the usual method will be used to fit y[j]. 
</p>
</td></tr>
<tr><td><code id="med_+3A_para">para</code></td>
<td>
<p>It is for binary predictors. If it is true, we would like the x-m relationship be fitted parametrically. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The mediators are not tested in this function.  data.org should be used first for the tests and data organizing, and then the resulting list from data.org can be used directly to define the arguments in this function. med considers all variables in x as mediators or covariates in the final model and all variables identified by contm, binm, catm, or jointm as mediators.
</p>


<h3>Value</h3>

<p>The result is an med object with the item a.binx for results of binary or categorical exposure(s) and the item a.contx for continuous exposure(s):
</p>
<table role = "presentation">
<tr><td><code>denm</code></td>
<td>
<p>a matrix where each column gives the estimated direct effect not from the corresponding mediator (identified by the column name), see Yu et al. (2014) for the definition, and each row corresponding to the results from one resampling for binary predictor or the results on a row of x.new for continuous predictor.</p>
</td></tr>
<tr><td><code>ie</code></td>
<td>
<p>a matrix where each column gives the estimated indirect effect from the corresponding mediator (identified by the column name) and each row corresponding to the results from one resampling for binary predictor or the results on a row of x.new for continuous predictor.</p>
</td></tr> 
<tr><td><code>te</code></td>
<td>
<p>a vector of the estimated total effect on x.new.</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>a list, where the first item, MART, is TRUE if a mart is fitted as the final model; the second item, Survial is T if a survival model is fit; the third item, type, is the type of prediction when a survival model is fitted; the fourth item, full.model, is the fitted final full model where y is the outcome and all predictor, covariates, and mediators are the explanatory variables; and the fifth item, best.iter,  is the number of best iterations if MART is used to fit the final model, is NULL if the final model is a generalized linear model.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>J.H. Friedman, T. Hastie, R. Tibshirani (2000) &lt;doi:10.1214/aos/1016120463&gt;. &quot;Additive Logistic Regression: a Statistical View of Boosting,&quot; Annals of Statistics 28(2):337-374.
</p>
<p>J.H. Friedman (2001) &lt;doi:10.1214/aos/1013203451&gt;. &quot;Greedy Function Approximation: A Gradient Boosting Machine,&quot; Annals of Statistics 29(5):1189-1232.
</p>
<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+boot.med">boot.med</a>"</code> to make inferences on the estimated mediation effects using bootstrap method.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
##binary x
#binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
  binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp1&lt;-med(data=data.bin,n=2)
#or use self-defined final function
temp1&lt;-med(data=data.bin,n=2,custom.function = 
           'glm(responseY~.,data=dataset123,family="quasibinomial",
           weights=weights123)')
temp2&lt;-med(data=data.bin,n=2,nonlinear=TRUE)


 #multiple predictors (categorical and continuous predictors)
 x=weight_behavior[,c(3,5:14)]
 pred=weight_behavior[,c(2,4)]
 y=weight_behavior[,15]
 data.b.b.2.3&lt;-data.org(x,y,mediator=4:11,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="OTHER", alpha=0.4,alpha2=0.4)
 temp1.2&lt;-med(data.b.b.2.3,n=2)
 temp2.2&lt;-med(data.b.b.2.3,n=2,nonlinear=TRUE)

 #multivariate responses
 x=weight_behavior[,c(2:3,5:14)]
 pred=weight_behavior[,4]
 y=weight_behavior[,c(1,15)]
 data.b.b.2.4&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="OTHER", alpha=0.4,alpha2=0.4)
 temp1.3&lt;-med(data.b.b.2.4,n=2)
#or use the self defined function
 temp1.3&lt;-med(data.b.b.2.4,n=2,custom.function =c('glm(responseY~.,
              data=dataset123,family="gaussian",weights=weights123)', 
              'glm(responseY~.,data=dataset123,family="quasibinomial",
              weights=weights123)'))
 temp2.3&lt;-med(data.b.b.2.4,n=2,nonlinear=TRUE)

#continuous y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,1]
 data.cont&lt;-data.org(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4)
 temp3&lt;-med(data=data.cont,n=2) 
 temp4&lt;-med(data=data.cont,n=2,nonlinear=TRUE) 

##continuous x
#binary y
 x=weight_behavior[,3:14]
 pred=weight_behavior[,2]
 y=weight_behavior[,15]
 data.contx&lt;-data.org(x,y,pred=pred,mediator=4:10,alpha=0.4,alpha2=0.4)
 temp5&lt;-med(data=data.contx,n=2)
#or use the self defined function
 temp5&lt;-med(data=data.contx,n=2,custom.function ='glm(responseY~.,
            data=dataset123,family="quasibinomial",weights=weights123)')
 temp6&lt;-med(data=data.contx,n=2,nonlinear=TRUE,nu=0.05)

#continuous y
x=weight_behavior[,3:14]
y=weight_behavior[,1]
pred=weight_behavior[,2]
data.contx&lt;-data.org(x,y,pred=pred,contmed=c(11:12),binmed=c(6,10),
                     binref=c(1,1),catmed=5,catref=1,
                     alpha=0.4,alpha2=0.4)

temp7&lt;-med(data=data.contx,n=2) 
temp8&lt;-med(data=data.contx,n=2,nonlinear=TRUE,nu=0.05) 

##Surv class outcome (survival analysis)
data(cgd1)       #a dataset in the survival package
x=cgd1[,c(4:5,7:12)]
pred=cgd1[,6]
status&lt;-ifelse(is.na(cgd1$etime1),0,1)
y=Surv(cgd1$futime,status)          
#for continuous predictor
data.surv.contx&lt;-data.org(x,y,pred=pred,mediator=1:ncol(x),      
                          alpha=0.5,alpha2=0.5)
temp9.contx&lt;-med(data=data.surv.contx,n=2,type="lp")

#close to mart results when use type="lp"
temp9.contx
temp10.contx&lt;-med(data=data.surv.contx,n=2,nonlinear=TRUE)  
#results in the linear part unit
temp10.contx

#for binary predictor
x=cgd1[,c(5:12)]
pred=cgd1[,4]
data.surv.binx&lt;-data.org(x,y,pred=pred,mediator=1:ncol(x),   
                    alpha=0.4,alpha2=0.4)
temp9.binx&lt;-med(data=data.surv.binx,n=2,type="lp") 
temp9.binx
temp10.binx&lt;-med(data=data.surv.binx,n=2,nonlinear=TRUE)  
temp10.binx
</code></pre>

<hr>
<h2 id='mma'>
Multiple Mediation Analysis
</h2><span id='topic+mma'></span>

<h3>Description</h3>

<p>Test for mediators and do statistical inferences on the identified mediation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mma(x,y,pred,mediator=NULL, contmed=NULL,binmed=NULL,binref=NULL,catmed=NULL,
    catref=NULL,jointm=NULL,cova=NULL, refy=rep(NA,ncol(data.frame(y))),
    predref=rep(NA,ncol(data.frame(pred))),alpha=0.1,alpha2=0.1, margin=1, n=20,
    nonlinear=FALSE,df1=1,nu=0.001,D=3,distn=NULL,
    family1=as.list(rep(NA,ncol(data.frame(y)))),n2=50,w=rep(1,nrow(x)),
    testtype=1, x.new=NULL, pred.new=NULL, cova.new=NULL, type=NULL,w.new=NULL, 
    all.model=FALSE,xmod=NULL,custom.function = NULL,para=FALSE,echo=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mma_+3A_x">x</code></td>
<td>

<p>a data frame contains the predictor, all potential mediators and covariates. All varaibles in x that are not identified as potential mediators (by mediator, contmed, binmed, catmed, or jointm) are forced in mediation analysis as covariates.
</p>
</td></tr>
<tr><td><code id="mma_+3A_y">y</code></td>
<td>

<p>the vector of outcome variable.
</p>
</td></tr>
<tr><td><code id="mma_+3A_pred">pred</code></td>
<td>

<p>the vector/matrix of the predictor(s).
</p>
</td></tr>
<tr><td><code id="mma_+3A_mediator">mediator</code></td>
<td>

<p>the list of mediators (column numbers in x or by variable names). The mediators to be checked can be identified by &quot;contmed&quot;, &quot;binmed&quot; and &quot;catmed&quot;, or by this argument, &quot;mediator&quot;, where binary and categorical mediators in x are identified by factors, the reference group is the first level of the factor.  
</p>
</td></tr>
<tr><td><code id="mma_+3A_contmed">contmed</code></td>
<td>

<p>a vector of column numbers that locate the potential continuous mediators in x.
</p>
</td></tr>
<tr><td><code id="mma_+3A_binmed">binmed</code></td>
<td>

<p>a vector of column numbers that locate the potential binary mediators in x.
</p>
</td></tr>
<tr><td><code id="mma_+3A_binref">binref</code></td>
<td>

<p>the defined reference groups of the binary potential mediators in binmed.
</p>
</td></tr>
<tr><td><code id="mma_+3A_catmed">catmed</code></td>
<td>

<p>a vector of column numbers that locate the potential categorical mediators in x.
</p>
</td></tr>
<tr><td><code id="mma_+3A_catref">catref</code></td>
<td>

<p>the defined reference groups of the categorical potential mediators in catmed.
</p>
</td></tr>
<tr><td><code id="mma_+3A_jointm">jointm</code></td>
<td>

<p>a list that identifies the mediators that need to be considered jointly, where the first item indicates the number of groups of mediators to be considered jointly, and each of the following items identifies the column numbers of the mediators in x for each group of joint mediators.
</p>
</td></tr>
<tr><td><code id="mma_+3A_cova">cova</code></td>
<td>
<p>The data frame of covariates to be used to predict the mediator(s). The covariates in cova cannot be potential mediators. If the covariates are for some specific potential mediators, cova$for.m is the vector of names of potential mediators that use the covariates. Works for continuous predictors (pred) only, also the specified covariates should have no missing if only some mediators uses the covariates. Works mainly for continuous predictors (pred), also the specified covariates should have no missing if only some mediators uses the covariates.
</p>
</td></tr>
<tr><td><code id="mma_+3A_refy">refy</code></td>
<td>

<p>if y is binary, the reference group of y.By default, the reference group will be the first level of as.factor(y).
</p>
</td></tr>
<tr><td><code id="mma_+3A_predref">predref</code></td>
<td>

<p>if predictor is binary, identify the reference group of the binary predictor. By default, the reference group will be the first level of the predictor.
</p>
</td></tr>
<tr><td><code id="mma_+3A_alpha">alpha</code></td>
<td>

<p>the significance level at which to test if the potential mediators (identified by contmed, binmed, and catmed) can be used as a covariate or mediator in estimating y when all variables in x are included in the model.  The default value is alpha=0.1
</p>
</td></tr>
<tr><td><code id="mma_+3A_alpha2">alpha2</code></td>
<td>

<p>the significant level at which to test if a potential mediator is related with the predictor. The default value is alpha2=0.1.
</p>
</td></tr>  
<tr><td><code id="mma_+3A_margin">margin</code></td>
<td>

<p>if binpred is FALSE, define the change in predictor when calculating the mediation effects, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="mma_+3A_n">n</code></td>
<td>

<p>the time of resampling in calculating the indirect effects, default is n=20, see Yu et al. (2014).
</p>
</td></tr>
<tr><td><code id="mma_+3A_nonlinear">nonlinear</code></td>
<td>

<p>if TURE, Multiple Additive Regression Trees (MART) will be used to fit the final full model in estimating the outcome. The default value of nonlinear is FALSE, in which case, a generalized linear model will be used to fit the final full model.
</p>
</td></tr>
<tr><td><code id="mma_+3A_df1">df1</code></td>
<td>

<p>if nonlinear is TURE, natural cubic spline will be used to fit the relationship between the countinuous predictor and each mediator.  The df is the degree of freedom in the ns() function, the default is 1.
</p>
</td></tr>
<tr><td><code id="mma_+3A_nu">nu</code></td>
<td>

<p>set the parameter &quot;interaction.depth&quot; in gbm function if MART is to be used, by default, nu=0.001. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="mma_+3A_d">D</code></td>
<td>

<p>set the parameter &quot;shrinkage&quot; in gbm function if MART is to be used, by default, D=3. See also help(gbm.fit).
</p>
</td></tr>
<tr><td><code id="mma_+3A_distn">distn</code></td>
<td>

<p>the assumed distribution of the outcome if MART is used for final full model. The default value of distn is &quot;bernoulli&quot; for binary y, and &quot;gaussian&quot; for continuous y.
</p>
</td></tr>
<tr><td><code id="mma_+3A_family1">family1</code></td>
<td>

<p>define the conditional distribution of y given x, and the linkage function that links the mean of y with the system component if generalized linear model is used as the final full model.  The default value of family1 is binomial(link = &quot;logit&quot;) for binary y, gaussian(link=&quot;identity&quot;) for continuous y.
</p>
</td></tr>
<tr><td><code id="mma_+3A_n2">n2</code></td>
<td>

<p>the number of times of bootstrap resampling.  The default value is n2=50.
</p>
</td></tr>
<tr><td><code id="mma_+3A_w">w</code></td>
<td>

<p>the weight for each observation.
</p>
</td></tr>
<tr><td><code id="mma_+3A_testtype">testtype</code></td>
<td>
<p>if the testtype is 1 (by default), covariates/mediators are identified using full model; if the testtype is 2, covariates/mediators are tested one by one in models with the predictor only.
</p>
</td></tr>
<tr><td><code id="mma_+3A_x.new">x.new</code></td>
<td>

<p>A new set of predictor and corresponding covariates, of the same format as x (after data.org),  on which to calculate the mediation effects. For continuous predictor only. If is NULL, the mediation effects will be calculated based on the original data set.
</p>
</td></tr>
<tr><td><code id="mma_+3A_pred.new">pred.new</code></td>
<td>

<p>A new set of predictor(s), of the same format as x (after data.org), on which to calculate the mediation effects. For continuous predictor only.
</p>
</td></tr>
<tr><td><code id="mma_+3A_cova.new">cova.new</code></td>
<td>

<p>a new set of covaraite(s).
</p>
</td></tr>
<tr><td><code id="mma_+3A_type">type</code></td>
<td>

<p>the type of prediction when y is class Surv. Is &quot;risk&quot; if not specified.
</p>
</td></tr>
<tr><td><code id="mma_+3A_w.new">w.new</code></td>
<td>

<p>the weights for new.x.
</p>
</td></tr>
<tr><td><code id="mma_+3A_all.model">all.model</code></td>
<td>

<p>save all the fitted model from bootstrap samples if TRUE. This needs to be true to make inferences on moderation effects.
</p>
</td></tr>
<tr><td><code id="mma_+3A_xmod">xmod</code></td>
<td>

<p>If there is a moderator, xmod gives the moderator's name in cova and/or x.
</p>
</td></tr>
<tr><td><code id="mma_+3A_custom.function">custom.function</code></td>
<td>
<p>a string of customer defined final model for predicting the outcome(s). The response variable should be noted as &quot;responseY&quot;, the dataset should be noted as &quot;dataset123&quot;. The weights for observations should be noted as &quot;weights123&quot;. The covariates should be in x or pred. Use &quot;~.&quot; for all varaibles in x and pred is allowed. The customer defined model should be able to make prediction by using &quot;predict(object, newdata=...)&quot;, where the object is the results of the fitted model. If a specific package needs to be called to fit the model, the user should call the package first. For example, if the gamlss package is used to fit a piecewise polynomial with &quot;age&quot; to be the mediator and &quot;race&quot; be the predictor, we can set custom.function=&quot;gamlss(responseV~b(age,df=3)+race,data=dataset123,tace=FALSE)&quot;. The length of custom.function should be the same as the dimension of y. If custom.function[j] is NA, the usual method will be used to fit y[j]. 
</p>
</td></tr>
<tr><td><code id="mma_+3A_para">para</code></td>
<td>
<p>It is for binary predictors. If it is true, we would like the x-m relationship be fitted parametrically. 
</p>
</td></tr>
<tr><td><code id="mma_+3A_echo">echo</code></td>
<td>
<p>If echo is FALSE, there is no counting printed for the number of bootstrap iterations. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>mma first tests if the potential mediators defined by binm, contm, and catm should be treated as mediators or covariates (if none, the variable will be deleted from further analysis). All variables identified by jointm are treated as mediators. All other variables in x that are not tested are treated as covariates. Then mma does the mediation effects estimation and inference on the selected variables.  
</p>


<h3>Value</h3>

<p>Returns an mma object.
</p>
<table role = "presentation">
<tr><td><code>estimation</code></td>
<td>
<p>list the estimation of ie (indirect effect), te  (total effect), and de (direct effect from the predictor) separately.</p>
</td></tr>  <tr><td><code>bootsresults</code></td>
<td>
<p>a list where the first item, ie, is a matrix of n2 rows where each column gives the estimated indirect effect from the corresponding mediator (identified by the column name) from the n2 bootstrap samples; the second item, te, is a vector of estimated total effects from the bootstrap sample; and the 3rd item, de, is a vector of estimated direct effect of the predictor from the bootstrap sample.</p>
</td></tr> 
<tr><td><code>model</code></td>
<td>
<p>a list where the first item, MART, is T if mart is fitted for the final model; the second item, Survival, is T if a survival model is fitted; the third item, type, is the type of prediction when a survival model is fitted; the fourth item, model, is the fitted final full model where y is the outcome and all predictor, covariates, and mediators are the explanatory variables; and the fourth item, best.iter is the number of best iterations if MART is used to fit the final model.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>a list that contains all the used data: x=x, y=y, dirx=dirx, binm=binm, contm=contm, catm=catm, jointm=jointm, binpred=FALSE.</p>
</td></tr>
<tr><td><code>boot.detail</code></td>
<td>
<p>for continuous predictor only: a list that contains the mediation effects on each row of new.pred: new.pred=new.pred, te1, de1, ie1.</p>
</td></tr>
<tr><td><code>all_model</code></td>
<td>
<p>a list with all fitted models from bootstrap samples if all.model is TRUE.</p>
</td></tr>
<tr><td><code>all_iter</code></td>
<td>
<p>if all.model is TRUE, a matrix with all fitted best iterations if MART is used. Each row is from one bootstrap sample.</p>
</td></tr>
<tr><td><code>all_boot</code></td>
<td>
<p>if all.model is TRUE, a matrix with all bootstrap samples. Each row is one bootstrap sample.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Baron, R.M., and Kenny, D.A. (1986) &lt;doi:10.1037/0022-3514.51.6.1173&gt;. &quot;The moderator-mediator variable distinction in social psychological research: conceptual, strategic, and statistical considerations,&quot; J. Pers Soc Psychol, 51(6), 1173-1182.
</p>
<p>J.H. Friedman, T. Hastie, R. Tibshirani (2000) &lt;doi:10.1214/aos/1016120463&gt;. &quot;Additive Logistic Regression: a Statistical View of Boosting,&quot; Annals of Statistics 28(2):337-374.
</p>
<p>J.H. Friedman (2001) &lt;doi:10.1214/aos/1013203451&gt;. &quot;Greedy Function Approximation: A Gradient Boosting Machine,&quot; Annals of Statistics 29(5):1189-1232.
</p>
<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+data.org">data.org</a>"</code> is for mediator tests, and <code>"<a href="#topic+med">med</a>"</code> , and <code>"<a href="#topic+boot.med">boot.med</a>"</code> for mediation analysis and inferences.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
#binary predictor
 #binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 temp.b.b.glm&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,n=2,n2=2)
 
 temp.b.b.mart&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,nonlinear=TRUE,n=2,n2=5)
 #continuous y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=data.frame(weight_behavior[,1])
 colnames(y)="bmi"
 temp.b.c.glm&lt;-mma(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4,n2=20)
 temp.b.c.mart&lt;-mma(x,y,pred=pred,mediator=5:12,jointm=list(n=1,j1=7:9), 
                     predref="M",alpha=0.4,alpha2=0.4,
                     n=2,nonlinear=TRUE,n2=20)


##Surv class outcome (survival analysis)
data(cgd1)       #a dataset in the survival package
x=cgd1[,c(4:5,7:12)]
pred=cgd1[,6]
status&lt;-ifelse(is.na(cgd1$etime1),0,1)
y=Surv(cgd1$futime,status)          
#for continuous predictor
temp.cox.contx&lt;-mma(x,y,pred=pred,mediator=1:ncol(x),      
                    alpha=0.5,alpha2=0.5,n=1,n2=2,type="lp") 
summary(temp.cox.contx)
temp.surv.mart.contx&lt;-mma(x,y,pred=pred,mediator=1:ncol(x),      
                    alpha=0.5,alpha2=0.5,nonlinear=TRUE,n2=2) 

#for binary predictor
x=cgd1[,c(5:12)]
pred=cgd1[,4]
temp.cox.binx&lt;-mma(x,y,pred=pred,mediator=1:ncol(x),   
                    alpha=0.4,alpha2=0.4,n=1,n2=2,type="lp") 
summary(temp.cox.binx)

</code></pre>

<hr>
<h2 id='moderate'>
Calculate and plot the direct effect of the selected exposure variable at each level of the moderator.
</h2><span id='topic+moderate'></span>

<h3>Description</h3>

<p>Calculate and plot the direct effect of the selected exposure variable at each level of the moderator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moderate(med1,vari,j=1,kx=1,continuous.resolution=100,plot=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="moderate_+3A_med1">med1</code></td>
<td>

<p>The med object from the <a href="#topic+med">med</a> function.
</p>
</td></tr>
<tr><td><code id="moderate_+3A_vari">vari</code></td>
<td>

<p>The name of the moderator.
</p>
</td></tr>
<tr><td><code id="moderate_+3A_j">j</code></td>
<td>

<p>The jth response if the response is multiple.
</p>
</td></tr>
<tr><td><code id="moderate_+3A_kx">kx</code></td>
<td>

<p>The moderate effect is with the kx-th predictor(s). 
</p>
</td></tr>
<tr><td><code id="moderate_+3A_continuous.resolution">continuous.resolution</code></td>
<td>

<p>The number of equally space points at which to evaluate continuous predictors. 
</p>
</td></tr>
<tr><td><code id="moderate_+3A_plot">plot</code></td>
<td>

<p>Plot the direct effect at each level of the moderator if ture. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate and plot the direct effect of the selected exposure variable at each level of the moderator base on the result from the <a href="#topic+med">med</a> function.
</p>


<h3>Value</h3>

<p>The <a href="#topic+moderate">moderate</a> returns a list where the item result is a data frame with two or three elements
</p>
<table role = "presentation">
<tr><td><code>moderator</code></td>
<td>
<p>the moderator levels.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>the level of the exposure variable &ndash; available only for continuous exposure and moderate with nonlinear method.</p>
</td></tr>
<tr><td><code>de</code></td>
<td>
<p>the direct effect at the corresonding moderator (and exposure) level(s).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+form.interaction">form.interaction</a>"</code>,
<code>"<a href="#topic+test.moderation">test.moderation</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#nonlinear model
 data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
     binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
 temp2&lt;-med(data=data.bin,n=2,nonlinear=TRUE)
 result1=moderate(temp2,vari="race")
 result2=moderate(temp2,vari="age")

</code></pre>

<hr>
<h2 id='plot.med'>
Plot the mediation effect on the fitted med object
</h2><span id='topic+plot.med'></span>

<h3>Description</h3>

<p>Plot the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'med'
plot(x,...,vari,xlim=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.med_+3A_x">x</code></td>
<td>

<p>a med object created initially call to med, med.binx, or med.contx.
</p>
</td></tr>
<tr><td><code id="plot.med_+3A_vari">vari</code></td>
<td>

<p>an indices or the name of the variable to plot.
</p>
</td></tr>
<tr><td><code id="plot.med_+3A_xlim">xlim</code></td>
<td>

<p>the range of the variable to be plotted.
</p>
</td></tr>
<tr><td><code id="plot.med_+3A_...">...</code></td>
<td>

<p>other arguments passed to the plot function.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>plot.med plots the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable. If the predictor is binary, draw a histogram or boxplot of the marginal density of the variable at each different value of the predictor.
</p>


<h3>Value</h3>

<p>No return value, called for graphs</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+med">med</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
  binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp1&lt;-med(data=data.bin,n=2)
temp2&lt;-med(data=data.bin,n=2,nonlinear=TRUE)
plot(temp1,data.bin,vari="exercises",xlim=c(0,50))
plot(temp2,data.bin,vari="sports")
</code></pre>

<hr>
<h2 id='plot.mma'>
Relative effects plot of the fitted mma object
</h2><span id='topic+plot.mma'></span>

<h3>Description</h3>

<p>Plot the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mma'
plot(x,...,vari,xlim=NULL,alpha=0.95,
quantile=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.mma_+3A_x">x</code></td>
<td>

<p>a mma object created initially call to mma, boot.met.binx, or boot.met.contx.
</p>
</td></tr>
<tr><td><code id="plot.mma_+3A_vari">vari</code></td>
<td>

<p>an indices or the name of the variable to plot.
</p>
</td></tr>
<tr><td><code id="plot.mma_+3A_xlim">xlim</code></td>
<td>

<p>the range of the variable to be plotted.
</p>
</td></tr>
<tr><td><code id="plot.mma_+3A_alpha">alpha</code></td>
<td>

<p>for continuous predictor only, to draw the alpha confidence interval of the indirect effect.
</p>
</td></tr>
<tr><td><code id="plot.mma_+3A_quantile">quantile</code></td>
<td>

<p>for continuous predictor only, if true to draw the alpha confidence interval of the indirect effect based on quantile, otherwise, based on the normal approximation.
</p>
</td></tr>
<tr><td><code id="plot.mma_+3A_...">...</code></td>
<td>

<p>other arguments passed to the plot function.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>plot.mma plots the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable. If the predictor is binary, draw a histogram or boxplot of the marginal density of the variable at each different value of the predictor.
</p>


<h3>Value</h3>

<p>No return value, called for drawing graphs</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+mma">mma</a>"</code>,<code>"<a href="#topic+boot.med">boot.med</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 temp.b.b.glm&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,n=2,n2=2)
plot(temp.b.b.glm,vari="exercises",xlim=c(0,50))
plot(temp.b.b.glm,vari="sports")
</code></pre>

<hr>
<h2 id='plot2.mma'>
Relative effects plot of the fitted mma object with moderator
</h2><span id='topic+plot2.mma'></span>

<h3>Description</h3>

<p>Plot the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable, at each level of the moderator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot2.mma(x,...,vari,xlim=NULL,alpha=0.95,quantile=FALSE,moderator,xj=1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot2.mma_+3A_x">x</code></td>
<td>

<p>a mma object created initially call to boot.mod.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_vari">vari</code></td>
<td>

<p>an indices or the name of the variable to plot.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_xlim">xlim</code></td>
<td>

<p>the range of the variable to be plotted.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_alpha">alpha</code></td>
<td>

<p>for continuous predictor only, to draw the alpha confidence interval of the indirect effect.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_quantile">quantile</code></td>
<td>

<p>for continuous predictor only, if true to draw the alpha confidence interval of the indirect effect based on quantile, otherwise, based on the normal approximation.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_...">...</code></td>
<td>

<p>other arguments passed to the plot function.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_moderator">moderator</code></td>
<td>

<p>the name of the moderator.
</p>
</td></tr>
<tr><td><code id="plot2.mma_+3A_xj">xj</code></td>
<td>

<p>the moderation effect on the xjth predictor.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>plot2.mma plots the marginal effect of the selected variable on the outcome, and the marginal effect of the predictor on the selected variable, at each level of the moderator. If the predictor is binary, draw a histogram or boxplot of the marginal density of the variable at each different value of the predictor.
</p>


<h3>Value</h3>

<p>No return value, called for graphs</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+boot.mod">boot.mod</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#see boot.mod menu.
</code></pre>

<hr>
<h2 id='print.med'>
Print an med object
</h2><span id='topic+print.med'></span>

<h3>Description</h3>

<p>Print the estimation of mediation effects from an med object: from functions med.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'med'
print(x,...,digit=4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.med_+3A_x">x</code></td>
<td>

<p>a med object created initially call to med.
</p>
</td></tr>
<tr><td><code id="print.med_+3A_...">...</code></td>
<td>

<p>other arguments passed to the print function.
</p>
</td></tr>
<tr><td><code id="print.med_+3A_digit">digit</code></td>
<td>

<p>the number of digits to keep at printing.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for graphs</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+med">med</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
##binary x
#binary y
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
                    binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
 temp1&lt;-med(data=data.bin,n=2)
 temp2&lt;-med(data=data.bin,n=2,nonlinear=TRUE)
 temp1
 print(temp2,digit=5)
</code></pre>

<hr>
<h2 id='print.mma'>
Print a mma object
</h2><span id='topic+print.mma'></span>

<h3>Description</h3>

<p>Print the estimation of mediation effects from an mma object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mma'
print(x,...,digit=3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.mma_+3A_x">x</code></td>
<td>

<p>a mma object created initially call to mma, boot.med.binx, or boot.med.contx.
</p>
</td></tr>
<tr><td><code id="print.mma_+3A_...">...</code></td>
<td>

<p>other arguments passed to the print function.
</p>
</td></tr>
<tr><td><code id="print.mma_+3A_digit">digit</code></td>
<td>

<p>the number of decimal digits to keep.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a LIST
</p>
<table role = "presentation">
<tr><td><code>ie</code></td>
<td>
<p>estimation of the indirect effects from the mma object.</p>
</td></tr>
<tr><td><code>te</code></td>
<td>
<p>estimation of the total effect from the mma object.</p>
</td></tr>
<tr><td><code>de</code></td>
<td>
<p>estimation of the direct effect from the mma object.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+mma">mma</a>"</code>,<code>"<a href="#topic+boot.med">boot.med</a>"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 temp.b.b.glm&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,n=2,n2=2)
 print(temp.b.b.glm,digit=8)
</code></pre>

<hr>
<h2 id='summary.med_iden'>
Summary method for class &quot;med_iden&quot;.
</h2><span id='topic+summary.med_iden'></span><span id='topic+print.summary.med_iden'></span>

<h3>Description</h3>

<p>Compute the estimations, standard deviations and confidence intervals of the mediation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'med_iden'
summary(object,...,only=FALSE) 
## S3 method for class 'summary.med_iden'
print(x,...) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.med_iden_+3A_object">object</code></td>
<td>

<p>a med_iden object created initially call to data.org.
</p>
</td></tr>
<tr><td><code id="summary.med_iden_+3A_x">x</code></td>
<td>

<p>a summary.med_iden object created initially call to summary.med_iden
</p>
</td></tr>
<tr><td><code id="summary.med_iden_+3A_...">...</code></td>
<td>

<p>other arguments passed to the print function.
</p>
</td></tr>
<tr><td><code id="summary.med_iden_+3A_only">only</code></td>
<td>

<p>if only=T, show test results for selected covariates and mediators only.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>summary.med_iden gives a list of identified mediators, covariates and the test results. 
</p>


<h3>Value</h3>

<p>The function summary.med_iden return a list of covariates and mediators as identified by a series tests.
</p>
<table role = "presentation">
<tr><td><code>mediator</code></td>
<td>
<p>variable names of the identified mediators, either siginicant in both full model and in relate to the predictor, or being a member of the pre-identified joint mediators.</p>
</td></tr>
<tr><td><code>covariate</code></td>
<td>
<p>variable names of covariates: being significant in the full model but not significantly relate with the predictor.</p>
</td></tr>
<tr><td><code>tests</code></td>
<td>
<p>statistical test results.</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>the original object.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+mma">mma</a>"</code>,<code>"<a href="#topic+boot.med">boot.med</a>"</code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
 data.b.b.2&lt;-data.org(x,y,mediator=5:12,jointm=list(n=1,j1=c(5,7,9)),
                        pred=pred,predref="M", alpha=0.4,alpha2=0.4)
 summary(data.b.b.2)
</code></pre>

<hr>
<h2 id='summary.mma'>
Summary of an mma project
</h2><span id='topic+summary.mma'></span><span id='topic+print.summary.mma'></span>

<h3>Description</h3>

<p>Compute the estimations, standard deviations and confidence intervals of the mediation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mma'
summary(object,..., alpha=0.05, plot=TRUE, RE=FALSE,
quant=FALSE,ball.use=FALSE,bymed=FALSE,win1=0.2) 
## S3 method for class 'summary.mma'
print(x,...,digit=3) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.mma_+3A_object">object</code></td>
<td>

<p>a mma object created initially call to mma, boot.met.binx, or boot.met.contx.
</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_x">x</code></td>
<td>

<p>a summary.mma object created initially call to summary.mma.
</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_...">...</code></td>
<td>

<p>other arguments passed to the print function.
</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_alpha">alpha</code></td>
<td>

<p>the alpha level for confidence interval.</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_plot">plot</code></td>
<td>

<p>default is TRUE, if ture, draw a barplot of the mediation effects with confidence intervals.</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_re">RE</code></td>
<td>

<p>default is FALSE, if ture, show the inferences on relative mediation effects.</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_quant">quant</code></td>
<td>

<p>default is TRUE, if ture and ball.use is FALSE, draw the confidence intervals of relative effects using quantile.</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_ball.use">ball.use</code></td>
<td>

<p>default is TRUE, if ture, draw the confidence intervals of relative effects using the confidence ball. If both quant and ball.use are false, draw the confidence intervals based on the standard deviaitons from bootstrap estimates.</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_digit">digit</code></td>
<td>

<p>the number of decimal digits to keep.
</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_bymed">bymed</code></td>
<td>

<p>if true, show results by each mediator.
</p>
</td></tr>
<tr><td><code id="summary.mma_+3A_win1">win1</code></td>
<td>

<p>The rate of winsarize.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>summary.mma gives a list of the estimations and summary statistics based on the bootstrap results. If plot=T, draw a barplot of the relative effects of the direct effect of the predictor and indirect effects of the mediators. Relative effects is defined as the (in)direct effect divided by the total effect. The plot is arranged in order from the largest to the smallest relative effect.
</p>


<h3>Value</h3>

<p>The function summary.mma return a list. The first item, results, is the list for mediation effects, and the second item, re, is the list for relative effects. Under them, results have the items ie, te and de; re has the items ie and de. In each of the items, est is the estimation of the corresponding (relative) mediation effects based on the whole data, mean is the average estimated (relative) effects from the bootstrap samples, sd is the standard deviation of the estimates from the bootstrap sample. upbd and lwbd are the upper and lower bound of the confidence interval of the estimation using parametric method from the bootstrap sample, upbd_q and lwbd_q are the corresponding quantiles of the estimation from the bootstrap sample.
</p>
<table role = "presentation">
<tr><td><code>ie</code></td>
<td>
<p>a matrix of statistics inference on the (relative) indirect effects from the mma object.  est is the estimate using the full sample. mean is the estimate that average over the bootstrap estimates. sd is the standard deviation of the bootstrap estimates. upbd and lwbd are the confidence bounds based on sd. upbd_q and lwbd_q are the confidence bounds based on quantiles of the bootstrap estimates. upbd_b and lwbd_b are condidence ball bounds based on bootstap estimates.</p>
</td></tr>
<tr><td><code>te</code></td>
<td>
<p>statistics inference on the total effects from the mma object.</p>
</td></tr>
<tr><td><code>de</code></td>
<td>
<p>statistics inference on the (relative) direct effects from the mma object.</p>
</td></tr>
</table>
<p>If plot=T, draw a barplot of the relative mediation effects.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189. 
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23. 
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11. 
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006. 
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+mma">mma</a>"</code>,<code>"<a href="#topic+boot.med">boot.med</a>"</code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
 x=weight_behavior[,c(2,4:14)]
 pred=weight_behavior[,3]
 y=weight_behavior[,15]
  temp.b.b.glm&lt;-mma(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),binref=c(1,1),
                    catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4,n=2,n2=2)
 summary(temp.b.b.glm, RE=TRUE, ball.use=FALSE)
 summary(temp.b.b.glm, ball.use=FALSE)
</code></pre>

<hr>
<h2 id='test.moderation'>
Test for moderation effects.
</h2><span id='topic+test.moderation'></span>

<h3>Description</h3>

<p>Used on a med object, test if there are moderation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test.moderation(med1,vari,j=1,kx=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="test.moderation_+3A_med1">med1</code></td>
<td>

<p>a med object created initially call to med.
</p>
</td></tr>
<tr><td><code id="test.moderation_+3A_vari">vari</code></td>
<td>

<p>If med1 was from generalized linear method, vari is the vector of names of potential moderation effects &ndash; the interaction terms formed by the potential moderator(s) times the predictor(s). Those interaction terms have to be included in mediation analysis as covariates.
</p>
<p>If med1 was formed by nonlinear method, vari is the vector of names of potential moderators, which have been included in mediation analysis as covariates.
</p>
</td></tr>
<tr><td><code id="test.moderation_+3A_j">j</code></td>
<td>

<p>To check the moderation effect on the jth response.
</p>
</td></tr>
<tr><td><code id="test.moderation_+3A_kx">kx</code></td>
<td>

<p>The moderation effect is with the kx-th predictor(s). kx can be a vector. If kx is null, the moderation effect is with each predictor.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>test.moderation is used to test whether direct moderation effect is significant based on the med object from med function (mediation analysis). If geralized linear models were used for mediation anlysis, the moderation effects (formed by the interactions of potential moderators and predictor) should be included in the mediation analysis as covariates. The function test.modeartion will give the significance levels of these interaction terms. If nonlinear models were used for mediation analysis, the potential moderators (but not the interaction terms) should have been included in mediation analysis as covarites. The function test.moderation will give not only significance levels of their interaction with the predictor(s) in generalized linear model, but also the H-statistics by Friedman and Popescue (2008).
</p>


<h3>Value</h3>

<p>No return value, called for test results.</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. &quot;General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Journal of Biometrics &amp; Biostatistics,5(2): 189.
</p>
<p>Yu, Q., Scribner, R.A., Leonardi, C., Zhang, L., Park, C., Chen, L., and Simonsen, N.R. (2017) &lt;doi:10.1016/j.sste.2017.02.001&gt;. &quot;Exploring racial disparity in obesity: a mediation analysis considering geo-coded environmental factors,&quot; Spatial and Spatio-temporal Epidemiology, 21, 13-23.
</p>
<p>Yu, Q., and Li, B. (2017) &lt;doi:10.5334/hors.160&gt;. &quot;mma: An r package for multiple mediation analysis,&quot; Journal of Open Research Software, 5(1), 11.
</p>
<p>Yu, Q., Wu, X., Li, B., and Scribner, R. (2018). &lt;doi:10.1002/sim.7977&gt;. &quot;Multiple Mediation Analysis with Survival Outcomes – With an Application to Explore Racial Disparity in Breast Cancer Survival,&quot; Statistics in Medicine.
</p>
<p>Yu, Q., Medeiros, KL, Wu, X., and Jensen, R. (2018). &lt;doi:10.1007/s11336-018-9612-2&gt;. &quot;Explore Ethnic Disparities in Anxiety and Depression Among Cancer Survivors Using Nonlinear Mediation Analysis,&quot; Psychometrika, 83(4), 991-1006.
</p>
<p>Friedman, J.H. and Popescu B.E. (2008) &quot;PREDICTIVE LEARNING VIA RULE ENSEMBLES,&quot; Annals of Applied Statistics, 2(3): 916-954.
</p>


<h3>See Also</h3>

<p><code>"<a href="#topic+med">med</a>"</code>,, <code>"<a href="#topic+moderate">moderate</a>"
</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
x=weight_behavior[,c(2,4:14)]
pred=weight_behavior[,3]
y=weight_behavior[,15]
data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11:12),binmed=c(6,10),
                   binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp2&lt;-med(data=data.bin,n=2,nonlinear=TRUE)
a=test.moderation(temp2,c("sports","sweat"),j=1,kx=NULL)

x=cbind(x,form.interaction(x,pred,inter.cov=c("sports","sweat"),predref=NULL))

data.bin&lt;-data.org(x,y,pred=pred,contmed=c(7:9,11),binmed=c(6,10),
                   binref=c(1,1),catmed=5,catref=1,predref="M",alpha=0.4,alpha2=0.4)
temp1&lt;-med(data=data.bin,n=2)
a=test.moderation(temp1,c("sports","sweat"),j=1,kx=NULL)
</code></pre>

<hr>
<h2 id='weight_behavior'>
Weight_Behavior Data Set
</h2><span id='topic+weight_behavior'></span>

<h3>Description</h3>

<p>This database was obtained from the Louisiana State University Health Sciences Center, New Orleans, by Dr. Richard Scribner.  He explored the relationship between BMI and kids behavior through a survey at children, teachers and parents in Grenada in 2014.  This data set includes 691 observations and 15 variables. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(weight_behavior)</code></pre>


<h3>Format</h3>

<p>The data set contains the following variables:
</p>
<p>bmi - body mass index, calculated by weight(kg)/height(cm)^2, numeric
</p>
<p>age - children's age in years at the time of survey, numeric
</p>
<p>sex - sex of the children, factor
</p>
<p>race - race of the children, factor
</p>
<p>numpeople - number of people in family, numeric
</p>
<p>car - the number of cars in family, numeric
</p>
<p>gotosch -  the method used to go to school, factor
</p>
<p>snack - eat snack or not in a day, binary
</p>
<p>tvhours - number of hours watching TV per week, numeric
</p>
<p>cmpthours - number of hours using computer per week, numeric
</p>
<p>cellhours - number of hours playing with cell phones per week, numeric
</p>
<p>sports - join in a sport team or not, 1: yes; and 2: no
</p>
<p>exercises - number of hours of exercises per week, numeric
</p>
<p>sweat - number of hours of sweating activities per week, numeric
</p>
<p>overweigh - the child is overweighed or not, binary
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(weight_behavior)
names(weight_behavior)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
