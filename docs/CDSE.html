<!DOCTYPE html><html lang="en"><head><title>Help for package CDSE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CDSE}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CDSE'><p>Package providing interface to the 'Copernicus Data Space Ecosystem' API</p></a></li>
<li><a href='#CDSE-deprecated'><p>Deprecated functions in package <span class="pkg">CDSE</span>.</p></a></li>
<li><a href='#GetArchiveImage'><p>Get image from the archive (deprecated)</p></a></li>
<li><a href='#GetCollections'><p>List available collections</p></a></li>
<li><a href='#GetImage'><p>Get image from the archive</p></a></li>
<li><a href='#GetImageBy...'><p>Get image from the archive (vectorization ready)</p></a></li>
<li><a href='#GetOAuthClient'><p>Get OAuth client</p></a></li>
<li><a href='#GetOAuthToken'><p>Get OAuth token</p></a></li>
<li><a href='#GetQueryables'><p>Get CQL2 parameters for a collection</p></a></li>
<li><a href='#GetStatistics'><p>Get statistical values</p></a></li>
<li><a href='#GetStatisticsBy...'><p>Get statistical values (vectorization ready)</p></a></li>
<li><a href='#Point2Bbox'><p>Create bounding box around a point</p></a></li>
<li><a href='#SearchCatalog'><p>Search collection for available images</p></a></li>
<li><a href='#SearchCatalogBy...'><p>Search collection for available images (vectorization ready)</p></a></li>
<li><a href='#SeasonalFilter'><p>Filter image catalog for seasonal images</p></a></li>
<li><a href='#SeasonalTimerange'><p>Create seasonal time range</p></a></li>
<li><a href='#UniqueCatalog'><p>Produce image catalog without multiple entries per date</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'Copernicus Data Space Ecosystem' API Wrapper</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides interface to the 'Copernicus Data Space Ecosystem' API 
    <a href="https://dataspace.copernicus.eu/analyse/apis">https://dataspace.copernicus.eu/analyse/apis</a>, mainly for searching the catalog of available
    data from Copernicus Sentinel missions and obtaining the images for just the area of interest 
    based on selected spectral bands. The package uses the 'Sentinel Hub' REST API interface
    <a href="https://dataspace.copernicus.eu/analyse/apis/sentinel-hub">https://dataspace.copernicus.eu/analyse/apis/sentinel-hub</a> that provides access to various 
    satellite imagery archives. It allows you to access raw satellite data, rendered images, 
    statistical analysis, and other features. 
    This package is in no way officially related to or endorsed by Copernicus.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>geojsonsf, grDevices, httr2, jsonlite, lubridate, lutz, sf,
stats, terra, utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://zivankaraman.github.io/CDSE/">https://zivankaraman.github.io/CDSE/</a>,
<a href="https://github.com/zivankaraman/CDSE">https://github.com/zivankaraman/CDSE</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/zivankaraman/CDSE/issues">https://github.com/zivankaraman/CDSE/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Config/build/clean-inst-doc:</td>
<td>FALSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>maps, parallel, tibble</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-31 14:36:30 UTC; zivankaraman</td>
</tr>
<tr>
<td>Author:</td>
<td>Zivan Karaman <a href="https://orcid.org/0000-0002-8933-4589"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zivan Karaman &lt;zivan.karaman@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-08-31 17:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='CDSE'>Package providing interface to the 'Copernicus Data Space Ecosystem' API</h2><span id='topic+CDSE'></span>

<h3>Description</h3>

<p>The <code>CDSE</code> package for R was developed to allow access to the
'Copernicus Data Space Ecosystem' <a href="https://dataspace.copernicus.eu/">https://dataspace.copernicus.eu/</a>
data and services from R. The 'Copernicus Data Space Ecosystem',
deployed in 2023, offers access to the EO data collection from the Copernicus missions,
with discovery and download capabilities and numerous data processing tools.
In particular, the 'Sentinel Hub' API <a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub.html</a>
provides access to the multi-spectral and multi-temporal big data satellite imagery service,
capable of fully automated, real-time processing and distribution of remote sensing data and related EO products.
Users can use APIs to retrieve satellite data over their AOI and specific time range from
full archives in a matter of seconds. When working on the application of EO where the area
of interest is relatively small compared to the image tiles distributed by Copernicus (100 x 100 km),
it allows to retrieve just the portion of the image of interest rather than downloading the huge tile
image file and processing it locally. The goal of the <code>CDSE</code> package is to provide
easy access to this functionality from R.
</p>
<p>The main functions allow to search the catalog of available imagery from the Sentinel-1, Sentinel-2,
Sentinel-3, and Sentinel-5 missions, and to process and download the images of an area of interest and
a time range in various formats. Other functions might be added in subsequent releases of the package.
</p>


<h3>API authentication</h3>

<p>Most of the API functions require OAuth2 authentication. The recommended procedure is to obtain
an authentication client object from the <code>GetOAuthClient</code> function, and to pass it as the <code>client</code>
argument to the functions requiring the authentication. For more detailed information, you are
invited to consult the <code>"Before you start"</code> document.
</p>


<h3>Project homepage</h3>

<p><a href="https://zivankaraman.github.io/CDSE/">https://zivankaraman.github.io/CDSE/</a>, <a href="https://github.com/zivankaraman/CDSE">https://github.com/zivankaraman/CDSE</a>
</p>


<h3>Issues</h3>

<p>For bug reports and feature requests please use the tracker <a href="https://github.com/zivankaraman/CDSE/issues">https://github.com/zivankaraman/CDSE/issues</a>
</p>


<h3>Author(s)</h3>

<p>Zivan Karaman &lt;zivan.karaman@gmail.com&gt;
</p>

<hr>
<h2 id='CDSE-deprecated'>Deprecated functions in package <span class="pkg">CDSE</span>.</h2><span id='topic+CDSE-deprecated'></span>

<h3>Description</h3>

<p>The functions listed below are deprecated and will be defunct in
the near future. When possible, alternative functions with similar
functionality are also mentioned. Help pages for deprecated functions are
available at <code>help("&lt;function&gt;-deprecated")</code>.
</p>


<h3><code>GetArchiveImage</code></h3>

<p>For <code>GetArchiveImage</code>, use <code><a href="#topic+GetImage">GetImage</a></code>.
</p>

<hr>
<h2 id='GetArchiveImage'>Get image from the archive (deprecated)</h2><span id='topic+GetArchiveImage'></span>

<h3>Description</h3>

<p>Retrieves the image for the area of interest using the parameters provided.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetArchiveImage_+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_script">script</code></td>
<td>
<p>a length one character string containing the evaluation script or the name of the file containing the script.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_mosaicking_order">mosaicking_order</code></td>
<td>
<p>character indicating the order in which tiles are overlapped from which the output result is mosaicked.
Must be one of &quot;mostRecent&quot;, &quot;leastRecent&quot;, or &quot;leastCC&quot;. Default: &quot;mostRecent&quot;</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_file">file</code></td>
<td>
<p>name of the file to save the image. If NULL, a <code>SpatRaster</code> object is returned. Default: NULL</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_format">format</code></td>
<td>
<p>character indicating the output file format.
Must be one of &quot;image/tiff&quot;, &quot;image/png&quot;, or &quot;image/jpeg&quot;. Default: &quot;image/tiff&quot;</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_pixels">pixels</code></td>
<td>
<p>integer scalar or length-two vector indicating the request image width and height.
Values must be integers between 1 and 2500.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_resolution">resolution</code></td>
<td>
<p>numeric scalar or length-two vector indicating the spatial resolution of the request image
in horizontal and vertical direction (in meters).
</p>
<p>Only one of the arguments &quot;pixels&quot; or &quot;resolution&quot; must be set at the same time.
If the argument &quot;pixels&quot; or &quot;resolution&quot; is scalar, the same value is used for horizontal and vertical direction (width and height).</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_buffer">buffer</code></td>
<td>
<p>numeric, width of the buffer to retrieve the image of enlarged area. Default: 0</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_mask">mask</code></td>
<td>
<p>logical indicating if the image should contain only pixels within Area of Interest. Default: FALSE</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetArchiveImage_+3A_url">url</code></td>
<td>
<p>character indicating the process endpoint. Default: Copernicus Data Space Ecosystem process endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>aoi</code> argument is provided, the result is returned in the same coordinate reference system.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object (from the package <code>terra</code>) of the requested image (if <code>file</code> is <code>NULL</code>),
or the (invisible) name of the file created.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetCollections">GetCollections</a></code>, <code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>
<p><code><a href="#topic+CDSE-deprecated">CDSE-deprecated</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
script_file &lt;- system.file("scripts", "NDVI_uint8.js", package = "CDSE")
day &lt;- "2023-07-11"
ras &lt;- GetArchiveImage(aoi = aoi, time_range = day, script = script_file,
       collection = "sentinel-2-l2a",format = "image/tiff",
       mosaicking_order = "leastCC", resolution = 10, client = OAuthClient)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetCollections'>List available collections</h2><span id='topic+GetCollections'></span>

<h3>Description</h3>

<p>Retrieves the list of available imagery collections.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetCollections(as_data_frame = TRUE, url = getOption("CDSE.catalog_url"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetCollections_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="GetCollections_+3A_url">url</code></td>
<td>
<p>character indicating the STAC catalog search endpoint. Default: Copernicus Data Space Ecosystem STAC endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function doesn't require authentication.
</p>


<h3>Value</h3>

<p>A <code>list</code> or a <code>data.frame</code> of all available imagery collections and their attributes.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetImage">GetImage</a></code>, <code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
GetCollections(as_data_frame = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetImage'>Get image from the archive</h2><span id='topic+GetImage'></span>

<h3>Description</h3>

<p>Retrieves the image for the area of interest using the parameters provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetImage(
  aoi,
  bbox,
  time_range,
  collection,
  script,
  file = NULL,
  format = c("image/tiff", "image/png", "image/jpeg"),
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC"),
  pixels,
  resolution,
  buffer = 0,
  mask = FALSE,
  client,
  token,
  url = getOption("CDSE.process_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetImage_+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_script">script</code></td>
<td>
<p>a length one character string containing the evaluation script or the name of the file containing the script.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_file">file</code></td>
<td>
<p>name of the file to save the image. If NULL, a <code>SpatRaster</code> object is returned. Default: NULL</p>
</td></tr>
<tr><td><code id="GetImage_+3A_format">format</code></td>
<td>
<p>character indicating the output file format.
Must be one of &quot;image/tiff&quot;, &quot;image/png&quot;, or &quot;image/jpeg&quot;. Default: &quot;image/tiff&quot;</p>
</td></tr>
<tr><td><code id="GetImage_+3A_mosaicking_order">mosaicking_order</code></td>
<td>
<p>character indicating the order in which tiles are overlapped from which the output result is mosaicked.
Must be one of &quot;mostRecent&quot;, &quot;leastRecent&quot;, or &quot;leastCC&quot;. Default: &quot;mostRecent&quot;</p>
</td></tr>
<tr><td><code id="GetImage_+3A_pixels">pixels</code></td>
<td>
<p>integer scalar or length-two vector indicating the request image width and height.
Values must be integers between 1 and 2500.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_resolution">resolution</code></td>
<td>
<p>numeric scalar or length-two vector indicating the spatial resolution of the request image
in horizontal and vertical direction (in meters).
</p>
<p>Only one of the arguments &quot;pixels&quot; or &quot;resolution&quot; must be set at the same time.
If the argument &quot;pixels&quot; or &quot;resolution&quot; is scalar, the same value is used for horizontal and vertical direction (width and height).</p>
</td></tr>
<tr><td><code id="GetImage_+3A_buffer">buffer</code></td>
<td>
<p>numeric, width of the buffer to retrieve the image of enlarged area. Default: 0</p>
</td></tr>
<tr><td><code id="GetImage_+3A_mask">mask</code></td>
<td>
<p>logical indicating if the image should contain only pixels within Area of Interest. Default: FALSE</p>
</td></tr>
<tr><td><code id="GetImage_+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetImage_+3A_url">url</code></td>
<td>
<p>character indicating the process endpoint. Default: Copernicus Data Space Ecosystem process endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>aoi</code> argument is provided, the result is returned in the same coordinate reference system.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object (from the package <code>terra</code>) of the requested image (if <code>file</code> is <code>NULL</code>),
or the (invisible) name of the file created.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetCollections">GetCollections</a></code>, <code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
script_file &lt;- system.file("scripts", "NDVI_uint8.js", package = "CDSE")
day &lt;- "2023-07-11"
ras &lt;- GetImage(aoi = aoi, time_range = day, script = script_file,
       collection = "sentinel-2-l2a",format = "image/tiff",
       mosaicking_order = "leastCC", resolution = 10, client = OAuthClient)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetImageBy...'>Get image from the archive (vectorization ready)</h2><span id='topic+GetImageBy...'></span><span id='topic+GetImageByTimerange'></span><span id='topic+GetImageByAOI'></span><span id='topic+GetImageByBbox'></span>

<h3>Description</h3>

<p>These functions retrieve the image for the area of interest using the parameters provided.
They are simple wrappers around the 'GetImage' function with arguments organized in a way
that facilitates calling the function in a vectorized manner (using 'lapply' or similar function)
and thus potentially also the parallelization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetImageByTimerange(
  time_range,
  aoi,
  bbox,
  collection,
  script,
  file = NULL,
  format = c("image/tiff", "image/png", "image/jpeg"),
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC"),
  pixels,
  resolution,
  buffer = 0,
  mask = FALSE,
  client,
  token,
  url = getOption("CDSE.process_url")
)

GetImageByAOI(
  aoi,
  time_range,
  collection,
  script,
  file = NULL,
  format = c("image/tiff", "image/png", "image/jpeg"),
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC"),
  pixels,
  resolution,
  buffer = 0,
  mask = FALSE,
  client,
  token,
  url = getOption("CDSE.process_url")
)

GetImageByBbox(
  bbox,
  time_range,
  collection,
  script,
  file = NULL,
  format = c("image/tiff", "image/png", "image/jpeg"),
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC"),
  pixels,
  resolution,
  buffer = 0,
  mask = FALSE,
  client,
  token,
  url = getOption("CDSE.process_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetImageBy..._+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_script">script</code></td>
<td>
<p>a length one character string containing the evaluation script or the name of the file containing the script.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_file">file</code></td>
<td>
<p>name of the file to save the image. If NULL, a <code>SpatRaster</code> object is returned. Default: NULL</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_format">format</code></td>
<td>
<p>character indicating the output file format.
Must be one of &quot;image/tiff&quot;, &quot;image/png&quot;, or &quot;image/jpeg&quot;. Default: &quot;image/tiff&quot;</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_mosaicking_order">mosaicking_order</code></td>
<td>
<p>character indicating the order in which tiles are overlapped from which the output result is mosaicked.
Must be one of &quot;mostRecent&quot;, &quot;leastRecent&quot;, or &quot;leastCC&quot;. Default: &quot;mostRecent&quot;</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_pixels">pixels</code></td>
<td>
<p>integer scalar or length-two vector indicating the request image width and height.
Values must be integers between 1 and 2500.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_resolution">resolution</code></td>
<td>
<p>numeric scalar or length-two vector indicating the spatial resolution of the request image
in horizontal and vertical direction (in meters).
</p>
<p>Only one of the arguments &quot;pixels&quot; or &quot;resolution&quot; must be set at the same time.
If the argument &quot;pixels&quot; or &quot;resolution&quot; is scalar, the same value is used for horizontal and vertical direction (width and height).</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_buffer">buffer</code></td>
<td>
<p>numeric, width of the buffer to retrieve the image of enlarged area. Default: 0</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_mask">mask</code></td>
<td>
<p>logical indicating if the image should contain only pixels within Area of Interest. Default: FALSE</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetImageBy..._+3A_url">url</code></td>
<td>
<p>character indicating the process endpoint. Default: Copernicus Data Space Ecosystem process endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>aoi</code> argument is provided, the result is returned in the same coordinate reference system.
</p>
<p><code>GetImageByTimerange</code> is arranged for vectorization on time_range (time_range is the first argument).
</p>
<p><code>GetImageByAOI</code> is arranged for vectorization on aoi (aoi is the first argument).
</p>
<p><code>GetImageByBbox</code> is arranged for vectorization on bbox (bbox is the first argument).
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object (from the package <code>terra</code>) of the requested image (if <code>file</code> is <code>NULL</code>),
or the (invisible) name of the file created.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Process.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetImage">GetImage</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
cloudless_images &lt;- SearchCatalog(aoi = aoi, from = "2023-01-01", to = "2023-12-31",
                    collection = "sentinel-2-l2a", with_geometry = TRUE,
                    filter = "eo:cloud_cover &lt; 0.8", client = OAuthClient)
script_file &lt;- system.file("scripts", "NDVI_float32.js", package = "CDSE")
days &lt;- rev(cloudless_images$acquisitionDate)
lstRast &lt;- lapply(days, GetImageByTimerange, aoi = aoi, collection = "sentinel-2-l2a",
    script = script_file, file = NULL, format = "image/tiff", mosaicking_order = "mostRecent",
    resolution = 10, buffer = 0, mask = TRUE, client = OAuthClient,
    url = getOption("CDSE.process_url"))
par(mfrow = c(3, 4))
sapply(seq_along(days), FUN = function(i) {
     ras &lt;- lstRast[[i]]
     day &lt;- days[i]
     ras[ras &lt; 0] &lt;- 0
     terra::plot(ras, main = paste("Central Park NDVI on", day), range = c(0, 1),
            cex.main = 0.7, pax = list(cex.axis = 0.5), plg = list(cex = 0.5),
            col = colorRampPalette(c("darkred", "yellow", "darkgreen"))(99))
     })

## End(Not run)
</code></pre>

<hr>
<h2 id='GetOAuthClient'>Get OAuth client</h2><span id='topic+GetOAuthClient'></span>

<h3>Description</h3>

<p>Gets an OAuth authentication client (<code>httr2</code> OAuth client object)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetOAuthClient(id, secret, url = getOption("CDSE.auth_url"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetOAuthClient_+3A_id">id</code></td>
<td>
<p>character, user OAuth client id</p>
</td></tr>
<tr><td><code id="GetOAuthClient_+3A_secret">secret</code></td>
<td>
<p>character, user OAuth client secret</p>
</td></tr>
<tr><td><code id="GetOAuthClient_+3A_url">url</code></td>
<td>
<p>character, endpoint for requesting tokens. Default: Copernicus Data Space Ecosystem OAuth endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The client can be used in queries requiring the authentication.
</p>


<h3>Value</h3>

<p><code>httr2</code> OAuth client object
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Overview/Authentication.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Overview/Authentication.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetOAuthToken">GetOAuthToken</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
id &lt;- "..."
secret &lt;- "..."
OAuthClient &lt;- GetOAuthClient(id = id, secret = secret)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetOAuthToken'>Get OAuth token</h2><span id='topic+GetOAuthToken'></span>

<h3>Description</h3>

<p>Gets an OAuth authentication token (long character string)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetOAuthToken(id, secret, url = getOption("CDSE.auth_url"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetOAuthToken_+3A_id">id</code></td>
<td>
<p>character, user OAuth client id</p>
</td></tr>
<tr><td><code id="GetOAuthToken_+3A_secret">secret</code></td>
<td>
<p>character, user OAuth client secret</p>
</td></tr>
<tr><td><code id="GetOAuthToken_+3A_url">url</code></td>
<td>
<p>character, endpoint for requesting tokens. Default: Copernicus Data Space Ecosystem OAuth endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The token can be used in queries requiring the authentication.
</p>


<h3>Value</h3>

<p>Long character string containing the authentication token.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Overview/Authentication.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Overview/Authentication.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetOAuthClient">GetOAuthClient</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
id &lt;- "..."
secret &lt;- "..."
token &lt;- GetOAuthToken(id = id, secret = secret)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetQueryables'>Get CQL2 parameters for a collection</h2><span id='topic+GetQueryables'></span>

<h3>Description</h3>

<p>Returns a list of variable terms that can be used in CQL2 expressions to filter the collection catalog search.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetQueryables(
  collection,
  as_data_frame = TRUE,
  client,
  token,
  url = getOption("CDSE.catalog_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetQueryables_+3A_collection">collection</code></td>
<td>
<p>character indicating the collection for which the parameters are queried.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetQueryables_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="GetQueryables_+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetQueryables_+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetQueryables_+3A_url">url</code></td>
<td>
<p>character indicating the STAC catalog search endpoint. Default: Copernicus Data Space Ecosystem STAC endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no parameters found, a <code>NULL</code> value or 0-row <code>data.frame</code> is returned.
</p>


<h3>Value</h3>

<p>A <code>list</code> or a <code>data.frame</code>.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/ApiReference.html#tag/catalog_collections/operation/getCatalogCollectionQueryables">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/ApiReference.html#tag/catalog_collections/operation/getCatalogCollectionQueryables</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetCollections">GetCollections</a></code>, <code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
GetQueryables("sentinel-2-l2a", client = OAuthClient)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetStatistics'>Get statistical values</h2><span id='topic+GetStatistics'></span>

<h3>Description</h3>

<p>Retrieves the simple statistics for the area of interest calculated based on satellite imagery
without having to download images.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetStatistics(
  aoi,
  bbox,
  time_range,
  collection,
  script,
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC")[1],
  pixels,
  resolution,
  buffer = 0,
  percentiles = NULL,
  aggregation_period = 1L,
  aggregation_unit = c("day", "week", "month", "year")[1],
  lastIntervalBehavior = c("SKIP", "SHORTEN", "EXTEND")[1],
  as_data_frame = TRUE,
  client,
  token,
  url = getOption("CDSE.statistical_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetStatistics_+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_script">script</code></td>
<td>
<p>a length one character string containing the evaluation script or the name of the file containing the script.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_mosaicking_order">mosaicking_order</code></td>
<td>
<p>character indicating the order in which tiles are overlapped from
which the output result is mosaicked.
Must be one of &quot;mostRecent&quot;, &quot;leastRecent&quot;, or &quot;leastCC&quot;.
Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition. Default: &quot;mostRecent&quot;</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_pixels">pixels</code></td>
<td>
<p>integer scalar or length-two vector indicating the request image width and height.
Values must be integers between 1 and 2500.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_resolution">resolution</code></td>
<td>
<p>numeric scalar or length-two vector indicating the spatial resolution of the request image
in horizontal and vertical direction (in meters).
</p>
<p>Only one of the arguments <code>pixels</code> or <code>resolution</code> must be set at the same time.
If the argument <code>pixels</code> or <code>resolution</code> is scalar, the same value is used for horizontal and vertical direction (width and height).</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_buffer">buffer</code></td>
<td>
<p>numeric, width of the buffer to retrieve the image of enlarged area. Default: 0</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_percentiles">percentiles</code></td>
<td>
<p>numeric vector indicating which percentile values should be computed.
Default: NULL, don't compute any percentiles.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_aggregation_period">aggregation_period</code></td>
<td>
<p>the length of the aggregation period in <code>aggregation_unit</code>
(days by default). Default: 1</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_aggregation_unit">aggregation_unit</code></td>
<td>
<p>character indicating the the unit of the aggregation period,
must be one of &quot;day&quot;, &quot;week&quot;, &quot;month&quot;, or &quot;year&quot;. Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition (here just the first letter is enough). Default: &quot;day&quot;</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_lastintervalbehavior">lastIntervalBehavior</code></td>
<td>
<p>character indicating the behavior of the last interval if the
given <code>time_range</code> isn't divisible by the provided <code>aggregation_period.</code>
Must be one of:
</p>

<dl>
<dt><code>SKIP</code></dt><dd><p>- skip the last interval (default behavior)</p>
</dd>
<dt><code>SHORTEN</code></dt><dd><p>- shortens the last interval so that it ends at the end of provided <code>time_range</code></p>
</dd>
<dt><code>EXTEND</code></dt><dd><p>- extends the last interval over the end of the provided time range so that all intervals are of equal duration</p>
</dd>
</dl>

<p>Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition. Default: &quot;SKIP&quot;</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetStatistics_+3A_url">url</code></td>
<td>
<p>character indicating the process endpoint. Default: Copernicus Data Space Ecosystem process endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The values are aggregated over the period (number of <code>aggregation_units</code>)
given by the <code>aggregation_period</code> argument.
The default values provide daily statistics. The statistics are returned only for the
<code>aggregation_units</code> (days, weeks, months, years) when the data is
available. This can be determined by the days of the satellite overpasses, but also
by the calculations done in the evaluation script.
</p>
<p>The scripts used for the Statistical API have some additional requirements: the <code>evaluatePixel()</code>
function must, in addition to other output, always also return dataMask output.
This output defines which pixels are excluded from calculations.
For more information please visit the online documentation
<a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html</a>.
</p>
<p>If a <code>time_range</code> is not divisible by an <code>aggregation_period</code>, the last (&quot;not full&quot;) time
interval will be dismissed by default (SKIP option). The user can instead set the
<code>lastIntervalBehavior</code> to SHORTEN (shortens the last interval so that it ends at the end
of the provided time range) or EXTEND (extends the last interval over the end of the
provided time range so that all the intervals are of equal duration).
</p>
<p>If percentiles requested are 25, 50, and 75, the columns are renamed 'q1', 'median', and 'q3'.
</p>


<h3>Value</h3>

<p><code>data.frame</code> or <code>list</code> with statistical values.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetCollections">GetCollections</a></code>, <code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
script_file &lt;- system.file("scripts", "NDVI_CLOUDS_STAT.js", package = "CDSE")
daily_stats &lt;- GetStatistics(aoi = aoi, time_range = c("2023-07-01", "2023-07-31"),
  collection = "sentinel-2-l2a", script = script_file, mosaicking_order = "leastCC",
  resolution = 100, aggregation_period = 1, client = OAuthClient)
# specify week as 7 days
weekly_stats &lt;- GetStatistics(aoi = aoi, time_range = c("2023-07-01", "2023-07-31"),
  collection = "sentinel-2-l2a", script = script_file,mosaicking_order = "leastCC",
  resolution = 100, aggregation_period = 7, client = OAuthClient)
# specify week as 1 week
weekly_stats_extended &lt;- GetStatistics(aoi = aoi, time_range = c("2023-07-01", "2023-07-31"),
  collection = "sentinel-2-l2a", script = script_file, mosaicking_order = "leastCC",
  resolution = 100, aggregation_period = 1, aggregation_unit = "w",
  lastIntervalBehavior = "EXTEND", client = OAuthClient)

## End(Not run)
</code></pre>

<hr>
<h2 id='GetStatisticsBy...'>Get statistical values (vectorization ready)</h2><span id='topic+GetStatisticsBy...'></span><span id='topic+GetStatisticsByTimerange'></span><span id='topic+GetStatisticsByAOI'></span><span id='topic+GetStatisticsByBbox'></span>

<h3>Description</h3>

<p>These functions retrieve simple statistics for the area of interest calculated
based on satellite imagery without having to download images.
They are simple wrappers around the <code>GetStatistics</code> function with arguments organized in a way
that facilitates calling the function in a vectorized manner (using <code>lapply</code> or similar function)
and thus potentially also the parallelization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetStatisticsByTimerange(
  time_range,
  aoi,
  bbox,
  collection,
  script,
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC")[1],
  pixels,
  resolution,
  buffer = 0,
  percentiles = NULL,
  aggregation_period = 1L,
  aggregation_unit = c("day", "week", "month", "year")[1],
  lastIntervalBehavior = c("SKIP", "SHORTEN", "EXTEND")[1],
  as_data_frame = TRUE,
  client,
  token,
  url = getOption("CDSE.statistical_url")
)

GetStatisticsByAOI(
  aoi,
  time_range,
  collection,
  script,
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC")[1],
  pixels,
  resolution,
  buffer = 0,
  percentiles = NULL,
  aggregation_period = 1L,
  aggregation_unit = c("day", "week", "month", "year")[1],
  lastIntervalBehavior = c("SKIP", "SHORTEN", "EXTEND")[1],
  as_data_frame = TRUE,
  client,
  token,
  url = getOption("CDSE.statistical_url")
)

GetStatisticsByBbox(
  bbox,
  time_range,
  collection,
  script,
  mosaicking_order = c("mostRecent", "leastRecent", "leastCC")[1],
  pixels,
  resolution,
  buffer = 0,
  percentiles = NULL,
  aggregation_period = 1L,
  aggregation_unit = c("day", "week", "month", "year")[1],
  lastIntervalBehavior = c("SKIP", "SHORTEN", "EXTEND")[1],
  as_data_frame = TRUE,
  client,
  token,
  url = getOption("CDSE.statistical_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetStatisticsBy..._+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_script">script</code></td>
<td>
<p>a length one character string containing the evaluation script or the name of the file containing the script.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_mosaicking_order">mosaicking_order</code></td>
<td>
<p>character indicating the order in which tiles are overlapped from
which the output result is mosaicked.
Must be one of &quot;mostRecent&quot;, &quot;leastRecent&quot;, or &quot;leastCC&quot;.
Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition. Default: &quot;mostRecent&quot;</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_pixels">pixels</code></td>
<td>
<p>integer scalar or length-two vector indicating the request image width and height.
Values must be integers between 1 and 2500.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_resolution">resolution</code></td>
<td>
<p>numeric scalar or length-two vector indicating the spatial resolution of the request image
in horizontal and vertical direction (in meters).
</p>
<p>Only one of the arguments &quot;pixels&quot; or &quot;resolution&quot; must be set at the same time.
If the argument &quot;pixels&quot; or &quot;resolution&quot; is scalar, the same value is used for horizontal and vertical direction (width and height).</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_buffer">buffer</code></td>
<td>
<p>numeric, width of the buffer to retrieve the image of enlarged area. Default: 0</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_percentiles">percentiles</code></td>
<td>
<p>numeric vector indicating which percentile values should be computed.
Default: NULL, don't compute any percentiles.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_aggregation_period">aggregation_period</code></td>
<td>
<p>the length of the aggregation period in <code>aggregation_unit</code>
(days by default). Default: 1</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_aggregation_unit">aggregation_unit</code></td>
<td>
<p>character indicating the the unit of the aggregation period,
must be one of &quot;day&quot;, &quot;week&quot;, &quot;month&quot;, or &quot;year&quot;. Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition (here just the first letter is enough). Default: &quot;day&quot;</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_lastintervalbehavior">lastIntervalBehavior</code></td>
<td>
<p>character indicating the behavior of the last interval if the
given <code>time_range</code> isn't divisible by the provided <code>aggregation_period.</code>
Must be one of:
</p>

<dl>
<dt><code>SKIP</code></dt><dd><p>- skip the last interval (default behavior)</p>
</dd>
<dt><code>SHORTEN</code></dt><dd><p>- shortens the last interval so that it ends at the end of provided <code>time_range</code></p>
</dd>
<dt><code>EXTEND</code></dt><dd><p>- extends the last interval over the end of the provided time range so that all intervals are of equal duration</p>
</dd>
</dl>

<p>Partial matching is used, that is,
only enough initial letters of each string element are needed to guarantee unique
recognition. Default: &quot;SKIP&quot;</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="GetStatisticsBy..._+3A_url">url</code></td>
<td>
<p>character indicating the process endpoint. Default: Copernicus Data Space Ecosystem process endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The values are aggregated over the period (number of <code>aggregation_units</code>)
given by the <code>aggregation_period</code> argument.
The default values provide daily statistics. The statistics are returned only for the
<code>aggregation_units</code> (days, weeks, months, years) when the data is
available. This can be determined by the days of the satellite overpasses, but also
by the calculations done in the evaluation script.
</p>
<p>The scripts used for the Statistical API have some additional requirements: the <code>evaluatePixel()</code>
function must, in addition to other output, always also return dataMask output.
This output defines which pixels are excluded from calculations.
For more information please visit the online documentation
<a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html</a>.
</p>
<p>If a <code>time_range</code> is not divisible by an <code>aggregation_period</code>, the last (&quot;not full&quot;) time
interval will be dismissed by default (SKIP option). The user can instead set the
<code>lastIntervalBehavior</code> to SHORTEN (shortens the last interval so that it ends at the end
of the provided time range) or EXTEND (extends the last interval over the end of the
provided time range so that all the intervals are of equal duration).
</p>
<p>If percentiles requested are 25, 50, and 75, the columns are renamed 'q1', 'median', and 'q3'.
</p>
<p><code>GetStatisticsByTimerange</code> is arranged for vectorization on time_range (time_range is the first argument).
</p>
<p><code>GetStatisticsByAOI</code> is arranged for vectorization on aoi (aoi is the first argument).
</p>
<p><code>GetStatisticsByBbox</code> is arranged for vectorization on bbox (bbox is the first argument).
</p>


<h3>Value</h3>

<p><code>data.frame</code> or <code>list</code> with statistical values.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Statistical.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetStatistics">GetStatistics</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
script_file &lt;- "inst/scripts/NDVI_dataMask_float32.js"
seasons &lt;- SeasonalTimerange(from = "2020-06-01", to = "2023-08-31")
lst_stats &lt;- lapply(seasons, GetStatisticsByTimerange, aoi = aoi, collection = "sentinel-2-l2a",
   script = script_file, mosaicking_order = "leastCC", resolution = 100,
   aggregation_period = 7L, client = OAuthClient)
weekly_stats &lt;- do.call(rbind, lst_stats)
weekly_stats &lt;- weekly_stats[rev(order(weekly_stats$from)), ]
row.names(weekly_stats) &lt;- NULL
head(weekly_stats)

## End(Not run)
</code></pre>

<hr>
<h2 id='Point2Bbox'>Create bounding box around a point</h2><span id='topic+Point2Bbox'></span>

<h3>Description</h3>

<p>Creates the bounding box (numeric vector of length four) around the input point(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Point2Bbox(x, y = NULL, size, crs = 4326)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Point2Bbox_+3A_x">x</code></td>
<td>
<p>an <code>sf</code>, <code>sfc</code>, or <code>SpatialPoints*</code> object, a numeric indicating the longitude/easting of the point(s),
or any input accepted by <code>xy.coords</code></p>
</td></tr>
<tr><td><code id="Point2Bbox_+3A_y">y</code></td>
<td>
<p>numeric, the latitude/northing of the point(s). Default: NULL</p>
</td></tr>
<tr><td><code id="Point2Bbox_+3A_size">size</code></td>
<td>
<p>numeric indicating the size (in meters) of the bounding box to create</p>
</td></tr>
<tr><td><code id="Point2Bbox_+3A_crs">crs</code></td>
<td>
<p>coordinate reference system of the input (and the output): object of class <code>crs</code>,
or input string for <code>st_crs</code>. Default: 4326 (WGS 84)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function assumes that the <code>crs</code> units are either degrees or meters, a warning is issued if not,
and the result will probably be incorrect.
</p>


<h3>Value</h3>

<p>A bounding box (numeric vector of length four), or a list of bounding boxes if the input is not scalar.
</p>


<h3>See Also</h3>

<p><code><a href="grDevices.html#topic+xy.coords">xy.coords</a></code>, <code><a href="sf.html#topic+st_crs">st_crs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Point2Bbox(x = -73.96557, y = 40.78246, size = 1000, crs = 4326)

## End(Not run)
</code></pre>

<hr>
<h2 id='SearchCatalog'>Search collection for available images</h2><span id='topic+SearchCatalog'></span>

<h3>Description</h3>

<p>Searches the specified collection for available images in the given time interval and intersecting with the
bounding box or the area of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SearchCatalog(
  aoi,
  bbox,
  from,
  to,
  collection,
  as_data_frame = TRUE,
  with_geometry = TRUE,
  filter = NULL,
  client,
  token,
  url = getOption("CDSE.catalog_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SearchCatalog_+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_from">from</code></td>
<td>
<p>start of the time interval to search.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_to">to</code></td>
<td>
<p>end of the time interval to search.
</p>
<p><code>from</code> and <code>to</code> can be either Date or character that can be converted to date by <code>as.Date</code>.
</p>
<p>Open interval (one side only) can be obtained by providing the <code>NA</code> or <code>NULL</code> value for the corresponding argument.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_with_geometry">with_geometry</code></td>
<td>
<p>logical indicating if the granule geometries should be included in the data.frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_filter">filter</code></td>
<td>
<p>character, CQL2 text filter. Use the function <code>GetQueryables</code> to find out which filters
can bu used with the collection. Default: NULL (no filtering)</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="SearchCatalog_+3A_url">url</code></td>
<td>
<p>character indicating the STAC catalog search endpoint. Default: Copernicus Data Space Ecosystem STAC endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no images found, a <code>NULL</code> value is returned.
</p>


<h3>Value</h3>

<p>A <code>list</code>, <code>data.frame</code> or a <code>sf</code> object.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GetCollections">GetCollections</a></code>, <code><a href="#topic+GetQueryables">GetQueryables</a></code>, <code><a href="#topic+GetImage">GetImage</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "luxembourg.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
images &lt;- SearchCatalog(aoi = aoi, from = "2023-07-01", to = "2023-07-31",
          collection = "sentinel-2-l2a", with_geometry = TRUE, client = OAuthClient)
images_cloudless &lt;- SearchCatalog(aoi = aoi, from = "2023-07-01", to = "2023-07-31",
          filter = "eo:cloud_cover &lt; 5",
          collection = "sentinel-2-l2a", with_geometry = TRUE, client = OAuthClient)

## End(Not run)
</code></pre>

<hr>
<h2 id='SearchCatalogBy...'>Search collection for available images (vectorization ready)</h2><span id='topic+SearchCatalogBy...'></span><span id='topic+SearchCatalogByTimerange'></span><span id='topic+SearchCatalogByAOI'></span><span id='topic+SearchCatalogByBbox'></span>

<h3>Description</h3>

<p>These functions search the specified collection for available images using the parameters provided.
They are simple wrappers around the 'SearchCatalog' function with arguments organized in a way
that facilitates calling the function in a vectorized manner (using 'lapply' or similar function)
and thus potentially also the parallelization. The 'from' and 'to' arguments are combined into a single argument 'time_range'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SearchCatalogByTimerange(
  time_range,
  aoi,
  bbox,
  collection,
  as_data_frame = TRUE,
  with_geometry = TRUE,
  filter = NULL,
  client,
  token,
  url = getOption("CDSE.catalog_url")
)

SearchCatalogByAOI(
  aoi,
  time_range,
  collection,
  as_data_frame = TRUE,
  with_geometry = TRUE,
  filter = NULL,
  client,
  token,
  url = getOption("CDSE.catalog_url")
)

SearchCatalogByBbox(
  bbox,
  time_range,
  collection,
  as_data_frame = TRUE,
  with_geometry = TRUE,
  filter = NULL,
  client,
  token,
  url = getOption("CDSE.catalog_url")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SearchCatalogBy..._+3A_time_range">time_range</code></td>
<td>
<p>scalar or vector (Date or character that can be converted to date) defining the time interval.
Open interval (one side only) can be obtained by providing the <code>NA</code> or <code>NULL</code> value for the corresponding argument.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_aoi">aoi</code></td>
<td>
<p>sf or sfc object, typically a (multi)polygon, describing the Area of Interest.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_bbox">bbox</code></td>
<td>
<p>numeric vector of four elements describing the bounding box of interest.
Specify with a coordinate pair on two (opposite) vertices of the bounding box rectangle.
Coordinates need to be in longitude, latitude.
</p>
<p>Only one of either <code>aoi</code> or <code>bbox</code> may be specified.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_collection">collection</code></td>
<td>
<p>character indicating which collection to search.
Must be one of the collections returned by <code>GetCollections</code>.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>logical indicating if the result should be returned as data frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_with_geometry">with_geometry</code></td>
<td>
<p>logical indicating if the granule geometries should be included in the data.frame. Default: TRUE</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_filter">filter</code></td>
<td>
<p>character, CQL2 text filter. Use the function <code>GetQueryables</code> to find out which filters
can bu used with the collection. Default: NULL (no filtering)</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_client">client</code></td>
<td>
<p>OAuth client object to use for authentication.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_token">token</code></td>
<td>
<p>OAuth token character string to use for authentication.
</p>
<p>Exactly one of either <code>client</code> or <code>token</code> must be specified. It is recommended to use <code>client</code>.</p>
</td></tr>
<tr><td><code id="SearchCatalogBy..._+3A_url">url</code></td>
<td>
<p>character indicating the STAC catalog search endpoint. Default: Copernicus Data Space Ecosystem STAC endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no images found, a <code>NULL</code> value is returned.
</p>
<p><code>SearchCatalogByTimerange</code> is arranged for vectorization on time_range (time_range is the first argument).
</p>
<p><code>SearchCatalogByAOI</code> is arranged for vectorization on aoi (aoi is the first argument).
</p>
<p><code>SearchCatalogByBbox</code> is arranged for vectorization on bbox (bbox is the first argument).
</p>


<h3>Value</h3>

<p>A <code>list</code>, <code>data.frame</code> or a <code>sf</code> object.
</p>


<h3>Source</h3>

<p><a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html">https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Catalog.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
seasons &lt;- SeasonalTimerange(from = "2020-06-01", to = "2023-08-31")
lst_images_cloudless &lt;- lapply(seasons, SearchCatalogByTimerange, aoi = aoi,
    collection = "sentinel-2-l2a", with_geometry = FALSE,
    filter = "eo:cloud_cover &lt; 5", client = OAuthClient)
images_cloudless &lt;- do.call(rbind, lst_images_cloudless)
images_cloudless &lt;- images_cloudless[rev(order(images_cloudless$acquisitionDate)), ]
row.names(images_cloudless) &lt;- NULL
head(images_cloudless[, 1:5])

## End(Not run)
</code></pre>

<hr>
<h2 id='SeasonalFilter'>Filter image catalog for seasonal images</h2><span id='topic+SeasonalFilter'></span>

<h3>Description</h3>

<p>Filters image catalog entries that fall in the season of interest -
dates between <code>from</code> day/month and <code>to</code> day/month for all years in the
<code>from</code> - <code>to</code> time range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SeasonalFilter(catalog, from, to)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SeasonalFilter_+3A_catalog">catalog</code></td>
<td>
<p><code>data.frame</code> or <code>sf</code> object as the one produced by a call to <code>SearchCatalog</code></p>
</td></tr>
<tr><td><code id="SeasonalFilter_+3A_from">from</code></td>
<td>
<p>start of the season of interest.</p>
</td></tr>
<tr><td><code id="SeasonalFilter_+3A_to">to</code></td>
<td>
<p>end of the season of interest.
</p>
<p>The <code>from</code> and <code>to</code> arguments can be either Date or character that can be converted to date by <code>as.Date</code>.
Open intervals are not allowed (both <code>from</code> and <code>to</code> must be valid dates).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> or a <code>sf</code> object, depending on the type of the input.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SearchCatalog">SearchCatalog</a></code>, <code><a href="#topic+SeasonalTimerange">SeasonalTimerange</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "centralpark.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
all_images &lt;- SearchCatalog(aoi = aoi, from = "2021-06-01", to = "2023-08-31",
    collection = "sentinel-2-l2a", with_geometry = TRUE, client = OAuthClient)
sesonal_images &lt;- SeasonalFilter(all_images, from = "2021-06-01", to = "2023-08-31")

## End(Not run)
</code></pre>

<hr>
<h2 id='SeasonalTimerange'>Create seasonal time range</h2><span id='topic+SeasonalTimerange'></span>

<h3>Description</h3>

<p>Creates list of seasonal filters (one per year) for the season of interest -
dates between <code>from</code> day/month and <code>to</code> day/month for all years in the
<code>from</code> - <code>to</code> time range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SeasonalTimerange(from, to)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SeasonalTimerange_+3A_from">from</code></td>
<td>
<p>start of the season of interest.</p>
</td></tr>
<tr><td><code id="SeasonalTimerange_+3A_to">to</code></td>
<td>
<p>end of the season of interest.
</p>
<p>The <code>from</code> and <code>to</code> arguments can be either Date or character that can be converted to date by <code>as.Date</code>.
Open intervals are not allowed (both <code>from</code> and <code>to</code> must be valid dates).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of time ranges defining the season of interest for each year.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
seasons &lt;- SeasonalTimerange(from = "2020-05-01", to = "2023-09-30")
seasons &lt;- SeasonalTimerange(from = "2019-11-01", to = "2023-03-30")

## End(Not run)
</code></pre>

<hr>
<h2 id='UniqueCatalog'>Produce image catalog without multiple entries per date</h2><span id='topic+UniqueCatalog'></span>

<h3>Description</h3>

<p>Sometimes several images could be available for the given day. It can be useful to have a list
where for any given day there is just one row in the list. This unique row can be selected to represent either
the least cloud coverage or the biggest coverage of the are of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UniqueCatalog(
  imageCatalog,
  by = c("areaCoverage", "tileCloudCover"),
  keep = names(imageCatalog)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="UniqueCatalog_+3A_imagecatalog">imageCatalog</code></td>
<td>
<p><code>data.frame</code> as returned by the <code>SearchCatalog</code> function.</p>
</td></tr>
<tr><td><code id="UniqueCatalog_+3A_by">by</code></td>
<td>
<p>character indicating which attribute is used to select the best image per date.
Can be either &quot;areaCoverage&quot; or &quot;tileCloudCover&quot;.</p>
</td></tr>
<tr><td><code id="UniqueCatalog_+3A_keep">keep</code></td>
<td>
<p>list of columns to keep in output. Default: all columns in input.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, the returned <code>data.frame</code> has the same columns as the input catalog.
User can specify a subset of columns to include in the output through the <code>keep</code> parameter.
</p>


<h3>Value</h3>

<p><code>data.frame</code> with one row per date.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SearchCatalog">SearchCatalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dsn &lt;- system.file("extdata", "luxembourg.geojson", package = "CDSE")
aoi &lt;- sf::read_sf(dsn, as_tibble = FALSE)
images &lt;- SearchCatalog(aoi = aoi, from = "2023-07-01", to = "2023-07-31",
          collection = "sentinel-2-l2a", with_geometry = TRUE, client = OAuthClient)
best_daily &lt;- UniqueCatalog(images, by = "areaCoverage",
                keep = c("acquisitionDate", "tileCloudCover", "areaCoverage", "satellite"))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
