<!DOCTYPE html><html><head><title>Help for package dataspice</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dataspice}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#as_jsonld'><p>Convert a list object to JSON-LD</p></a></li>
<li><a href='#build_site'><p>Build a dataspice site</p></a></li>
<li><a href='#create_spice'><p>Put metadata templates within a <code>metadata</code> subdirectory</p></a></li>
<li><a href='#crosswalk'><p>Crosswalk a term</p></a></li>
<li><a href='#crosswalk_creator'><p>Crosswalk a Schema.org/creator</p></a></li>
<li><a href='#crosswalk_datetime'><p>Convert a date(time) of unknown format into EML</p></a></li>
<li><a href='#crosswalk_distribution'><p>Crosswalk a Schema.org/distribution</p></a></li>
<li><a href='#crosswalk_Organization'><p>Crosswalk a Schema.org/Organization</p></a></li>
<li><a href='#crosswalk_Person'><p>Crosswalk functions for <code>as_eml</code></p>
Crosswalk a Schema.org/Person</a></li>
<li><a href='#crosswalk_variables'><p>Crosswalk <code>dataspice</code> variables to EML</p></a></li>
<li><a href='#dataspice-package'><p>dataspice: Create Lightweight Schema.org Descriptions of Data</p></a></li>
<li><a href='#edit_access'><p>Shiny apps for editing dataspice metadata tables</p></a></li>
<li><a href='#edit_attributes'><p>Shiny apps for editing dataspice metadata tables</p></a></li>
<li><a href='#edit_biblio'><p>Shiny apps for editing dataspice metadata tables</p></a></li>
<li><a href='#edit_creators'><p>Shiny apps for editing dataspice metadata tables</p></a></li>
<li><a href='#eml_to_spice'><p>Create dataspice metadata tables from EML</p></a></li>
<li><a href='#es_access'><p>Get access from EML</p></a></li>
<li><a href='#es_attributes'><p>Get attributes from EML</p></a></li>
<li><a href='#es_biblio'><p>Get biblio from EML</p></a></li>
<li><a href='#es_creators'><p>Get creators from EML</p></a></li>
<li><a href='#jsonld_to_mustache'><p>Convert JSONLD to a list suitable for Mustache templating</p></a></li>
<li><a href='#parse_GeoShape_box'><p>Parse spatialCoverage$geo$box section for use in a Leaflet map</p></a></li>
<li><a href='#parse_spatialCoverage'><p>Parse spatialCoverage section for use in a Leaflet map</p></a></li>
<li><a href='#prep_access'><p>Prepare access</p></a></li>
<li><a href='#prep_attributes'><p>Prepare attributes</p></a></li>
<li><a href='#serve_site'><p>Serve site</p></a></li>
<li><a href='#spice_to_eml'><p>Convert <code>dataspice</code> metadata to EML</p></a></li>
<li><a href='#validate_access'><p>Validate access.csv</p></a></li>
<li><a href='#validate_attributes'><p>Validate attributes.csv</p></a></li>
<li><a href='#validate_biblio'><p>Validate biblio.csv</p></a></li>
<li><a href='#validate_creators'><p>Validate creators.csv</p></a></li>
<li><a href='#validate_file_paths'><p>Validate file paths</p></a></li>
<li><a href='#write_jsonld'><p>Write a list out as object to JSON-LD</p></a></li>
<li><a href='#write_spice'><p>Write spice</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Create Lightweight Schema.org Descriptions of Data</td>
</tr>
<tr>
<td>Description:</td>
<td>The goal of 'dataspice' is to make it easier for researchers to
  create basic, lightweight, and concise metadata files for their datasets.
  These basic files can then be used to make useful information available during
  analysis, create a helpful dataset "README" webpage, and produce more complex
  metadata formats to aid dataset discovery. Metadata fields are based on
  the 'Schema.org' and 'Ecological Metadata Language' standards.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/dataspice">https://github.com/ropensci/dataspice</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/dataspice/issues">https://github.com/ropensci/dataspice/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>purrr, EML, fs, jsonlite, whisker, readr, stringr, tools,
tibble, shiny, rhandsontable, dplyr, tidyr, ggplot2, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, kableExtra, knitr, rmarkdown, servr, listviewer,
maps</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-16 21:52:08 UTC; bryce</td>
</tr>
<tr>
<td>Author:</td>
<td>Carl Boettiger [aut] (https://github.com/cboettig),
  Scott Chamberlain [aut] (https://github.com/sckott),
  Auriel Fournier [aut] (https://github.com/aurielfournier),
  Kelly Hondula [aut] (https://github.com/khondula),
  Anna Krystalli [aut] (https://github.com/annakrystalli),
  Bryce Mecum [aut, cre] (https://github.com/amoeba),
  Maëlle Salmon [aut] (https://github.com/maelle),
  Kate Webbink [aut] (https://github.com/magpiedin),
  Kara Woo [aut] (https://github.com/karawoo),
  Irene Steves [ctb] (https://github.com/isteves)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bryce Mecum &lt;brycemecum@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-16 22:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='as_jsonld'>Convert a list object to JSON-LD</h2><span id='topic+as_jsonld'></span>

<h3>Description</h3>

<p>Convert a list object to JSON-LD
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_jsonld(
  x,
  context = "http://schema.org",
  pretty = TRUE,
  auto_unbox = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_jsonld_+3A_x">x</code></td>
<td>
<p>the object to be encoded.</p>
</td></tr>
<tr><td><code id="as_jsonld_+3A_context">context</code></td>
<td>
<p>JSON-LD context; &quot;http://schema.org&quot;.</p>
</td></tr>
<tr><td><code id="as_jsonld_+3A_pretty">pretty</code></td>
<td>
<p>Whether or not to prettify output. See
<code><a href="jsonlite.html#topic+toJSON">toJSON</a></code>.</p>
</td></tr>
<tr><td><code id="as_jsonld_+3A_auto_unbox">auto_unbox</code></td>
<td>
<p>Whether or not to automatically unbox output. See
<code><a href="jsonlite.html#topic+toJSON">toJSON</a></code>.</p>
</td></tr>
<tr><td><code id="as_jsonld_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to
<code><a href="jsonlite.html#topic+toJSON">toJSON</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='build_site'>Build a dataspice site</h2><span id='topic+build_site'></span>

<h3>Description</h3>

<p>Build a dataspice site
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_site(
  path = "data/metadata/dataspice.json",
  template_path = system.file("template.html5", package = "dataspice"),
  out_path = "docs/index.html"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_site_+3A_path">path</code></td>
<td>
<p>(character) Path to a JSON+LD file with dataspice metadata</p>
</td></tr>
<tr><td><code id="build_site_+3A_template_path">template_path</code></td>
<td>
<p>(character) Optional. Path to a template for
<code><a href="whisker.html#topic+whisker.render">whisker.render</a></code></p>
</td></tr>
<tr><td><code id="build_site_+3A_out_path">out_path</code></td>
<td>
<p>(character) Optional. Path to write the site's <code>index.html</code>
to. Defaults to <code>docs/index.html</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. Creates/overwrites <code>docs/index.html</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create JSON+LD from a set of metadata templates
json &lt;- write_json(biblio, access, attributes, creators)
build_site(json)

## End(Not run)
</code></pre>

<hr>
<h2 id='create_spice'>Put metadata templates within a <code>metadata</code> subdirectory</h2><span id='topic+create_spice'></span>

<h3>Description</h3>

<p>Put metadata templates within a <code>metadata</code> subdirectory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_spice(dir = "data")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_spice_+3A_dir">dir</code></td>
<td>
<p>Directory containing data, within which a <code>metadata</code> subdirectory
will be created. Defaults to <code>data</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
create_spice()

# Create templates from the data in a folder other than `data`
create_spice("my_data")

## End(Not run)
</code></pre>

<hr>
<h2 id='crosswalk'>Crosswalk a term</h2><span id='topic+crosswalk'></span>

<h3>Description</h3>

<p>Crosswalk a term
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk(doc, term)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_+3A_doc">doc</code></td>
<td>
<p>(list) A <code>dataspice</code> document as a <code>list</code></p>
</td></tr>
<tr><td><code id="crosswalk_+3A_term">term</code></td>
<td>
<p>(character) The term to crosswalk.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(list) The result of the crosswalk. May be an empty <code>list</code> on
failure.
</p>

<hr>
<h2 id='crosswalk_creator'>Crosswalk a Schema.org/creator</h2><span id='topic+crosswalk_creator'></span>

<h3>Description</h3>

<p>Crosswalk a Schema.org/creator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_creator(creator)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_creator_+3A_creator">creator</code></td>
<td>
<p>(list) A creator</p>
</td></tr>
</table>

<hr>
<h2 id='crosswalk_datetime'>Convert a date(time) of unknown format into EML</h2><span id='topic+crosswalk_datetime'></span>

<h3>Description</h3>

<p>A quick and dirty crosswalk of an unknown date(time) input to EML that really
only works for ISO8601 input. All other formats will fail and be returned
as-is as a <code>calendarDate</code>. From there the user will need to do a conversion
themselves.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_datetime(input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_datetime_+3A_input">input</code></td>
<td>
<p>(character) Some unknown date(time) input</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(list) A <code>list</code> with members <code>calendarDate</code> and <code>time</code>. <code>time</code> will
be <code>NULL</code> if parsing fails or if the time string inside <code>input</code> isn't
ISO8601
</p>

<hr>
<h2 id='crosswalk_distribution'>Crosswalk a Schema.org/distribution</h2><span id='topic+crosswalk_distribution'></span>

<h3>Description</h3>

<p>Crosswalk a Schema.org/distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_distribution(distribution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_distribution_+3A_distribution">distribution</code></td>
<td>
<p>(list) A distribution</p>
</td></tr>
</table>

<hr>
<h2 id='crosswalk_Organization'>Crosswalk a Schema.org/Organization</h2><span id='topic+crosswalk_Organization'></span>

<h3>Description</h3>

<p>Crosswalk a Schema.org/Organization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_Organization(creator)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_Organization_+3A_creator">creator</code></td>
<td>
<p>(list) A creator</p>
</td></tr>
</table>

<hr>
<h2 id='crosswalk_Person'>Crosswalk functions for <code>as_eml</code>
Crosswalk a Schema.org/Person</h2><span id='topic+crosswalk_Person'></span>

<h3>Description</h3>

<p>Crosswalk functions for <code>as_eml</code>
Crosswalk a Schema.org/Person
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_Person(creator)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_Person_+3A_creator">creator</code></td>
<td>
<p>(list) A creator</p>
</td></tr>
</table>

<hr>
<h2 id='crosswalk_variables'>Crosswalk <code>dataspice</code> variables to EML</h2><span id='topic+crosswalk_variables'></span>

<h3>Description</h3>

<p>See <code><a href="EML.html#topic+set_attributes">set_attributes</a></code> for more information on what must be
filled out after this is run in order to get a valid EML <code>attributeList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosswalk_variables(spice)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosswalk_variables_+3A_spice">spice</code></td>
<td>
<p>(list) Your <code>dataspice</code> metadata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(data.frame) A partial EML attributes table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Load an example dataspice JSON that comes installed with the package
spice &lt;- system.file(
  "examples", "annual-escapement.json",
  package = "dataspice")

# Convert it to EML (notice the warning)
eml_doc &lt;- suppressWarnings({spice_to_eml(spice)})
attributes &lt;- crosswalk_variables(spice)

# Now fill in the attributes data.frame. See `EML::set_attributes`.

# And last, set the attributes on our EML document
eml_doc$dataset$dataTable[[1]]$attributeList &lt;-
  EML::set_attributes(attributes)

## End(Not run)
</code></pre>

<hr>
<h2 id='dataspice-package'>dataspice: Create Lightweight Schema.org Descriptions of Data</h2><span id='topic+dataspice'></span><span id='topic+dataspice-package'></span>

<h3>Description</h3>

<p>The goal of 'dataspice' is to make it easier for researchers to
create basic, lightweight, and concise metadata files for their datasets.
These basic files can then be used to make useful information available during
analysis, create a helpful dataset &quot;README&quot; webpage, and produce more complex
metadata formats to aid dataset discovery. Metadata fields are based on
the 'Schema.org' and 'Ecological Metadata Language' standards.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Bryce Mecum <a href="mailto:brycemecum@gmail.com">brycemecum@gmail.com</a> (https://github.com/amoeba)
</p>
<p>Authors:
</p>

<ul>
<li><p> Carl Boettiger (https://github.com/cboettig)
</p>
</li>
<li><p> Scott Chamberlain (https://github.com/sckott)
</p>
</li>
<li><p> Auriel Fournier (https://github.com/aurielfournier)
</p>
</li>
<li><p> Kelly Hondula (https://github.com/khondula)
</p>
</li>
<li><p> Anna Krystalli (https://github.com/annakrystalli)
</p>
</li>
<li><p> Maëlle Salmon (https://github.com/maelle)
</p>
</li>
<li><p> Kate Webbink (https://github.com/magpiedin)
</p>
</li>
<li><p> Kara Woo (https://github.com/karawoo)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Irene Steves (https://github.com/isteves) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ropensci/dataspice">https://github.com/ropensci/dataspice</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/dataspice/issues">https://github.com/ropensci/dataspice/issues</a>
</p>
</li></ul>


<hr>
<h2 id='edit_access'>Shiny apps for editing dataspice metadata tables</h2><span id='topic+edit_access'></span>

<h3>Description</h3>

<p>Launch Shiny app for editing individual <code>dataspice</code> metadata tables. Use
<code style="white-space: pre;">&#8288;edit_*()&#8288;</code> where <code>*</code> is one of the four <code>dataspice</code> metadata tables
<strong><code>attributes</code>, <code>biblio</code>, <code>access</code> or <code>creators</code></strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_access(metadata_dir = file.path("data", "metadata"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_access_+3A_metadata_dir">metadata_dir</code></td>
<td>
<p>the directory containing the <code>dataspice</code> metadata <code>.csv</code>
files. Defaults to <code style="white-space: pre;">&#8288;data/metadata/&#8288;</code> directory in <strong>current project root</strong>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
edit_attributes()
edit_biblio()
edit_access()
edit_creators()

# Specifying a different dataspice metadata directory
edit_attributes(metadata_dir = "analysis/data/metadata/"))

## End(Not run)
</code></pre>

<hr>
<h2 id='edit_attributes'>Shiny apps for editing dataspice metadata tables</h2><span id='topic+edit_attributes'></span>

<h3>Description</h3>

<p>Launch Shiny app for editing individual <code>dataspice</code> metadata tables. Use
<code style="white-space: pre;">&#8288;edit_*()&#8288;</code> where <code>*</code> is one of the four <code>dataspice</code> metadata tables
<strong><code>attributes</code>, <code>biblio</code>, <code>access</code> or <code>creators</code></strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_attributes(metadata_dir = "data/metadata")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_attributes_+3A_metadata_dir">metadata_dir</code></td>
<td>
<p>the directory containing the <code>dataspice</code> metadata <code>.csv</code>
files. Defaults to <code style="white-space: pre;">&#8288;data/metadata/&#8288;</code> directory in <strong>current project root</strong>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
edit_attributes()
edit_biblio()
edit_access()
edit_creators()

# Specifying a different dataspice metadata directory
edit_attributes(metadata_dir = "analysis/data/metadata/"))

## End(Not run)
</code></pre>

<hr>
<h2 id='edit_biblio'>Shiny apps for editing dataspice metadata tables</h2><span id='topic+edit_biblio'></span>

<h3>Description</h3>

<p>Launch Shiny app for editing individual <code>dataspice</code> metadata tables. Use
<code style="white-space: pre;">&#8288;edit_*()&#8288;</code> where <code>*</code> is one of the four <code>dataspice</code> metadata tables
<strong><code>attributes</code>, <code>biblio</code>, <code>access</code> or <code>creators</code></strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_biblio(metadata_dir = file.path("data", "metadata"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_biblio_+3A_metadata_dir">metadata_dir</code></td>
<td>
<p>the directory containing the <code>dataspice</code> metadata <code>.csv</code>
files. Defaults to <code style="white-space: pre;">&#8288;data/metadata/&#8288;</code> directory in <strong>current project root</strong>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
edit_attributes()
edit_biblio()
edit_access()
edit_creators()

# Specifying a different dataspice metadata directory
edit_attributes(metadata_dir = "analysis/data/metadata/"))

## End(Not run)
</code></pre>

<hr>
<h2 id='edit_creators'>Shiny apps for editing dataspice metadata tables</h2><span id='topic+edit_creators'></span>

<h3>Description</h3>

<p>Launch Shiny app for editing individual <code>dataspice</code> metadata tables. Use
<code style="white-space: pre;">&#8288;edit_*()&#8288;</code> where <code>*</code> is one of the four <code>dataspice</code> metadata tables
<strong><code>attributes</code>, <code>biblio</code>, <code>access</code> or <code>creators</code></strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_creators(metadata_dir = file.path("data", "metadata"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_creators_+3A_metadata_dir">metadata_dir</code></td>
<td>
<p>the directory containing the <code>dataspice</code> metadata <code>.csv</code>
files. Defaults to <code style="white-space: pre;">&#8288;data/metadata/&#8288;</code> directory in <strong>current project root</strong>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
edit_attributes()
edit_biblio()
edit_access()
edit_creators()

# Specifying a different dataspice metadata directory
edit_attributes(metadata_dir = "analysis/data/metadata/"))

## End(Not run)
</code></pre>

<hr>
<h2 id='eml_to_spice'>Create dataspice metadata tables from EML</h2><span id='topic+eml_to_spice'></span>

<h3>Description</h3>

<p>Create dataspice metadata tables from EML
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eml_to_spice(eml, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eml_to_spice_+3A_eml">eml</code></td>
<td>
<p>(emld) An EML object</p>
</td></tr>
<tr><td><code id="eml_to_spice_+3A_path">path</code></td>
<td>
<p>(character) Folder path for saving the tables to disk</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with names <code>attributes</code>, <code>access</code>, <code>biblio</code>, and <code>creators</code>.
Optionally, if <code>path</code> is specified, saves the four tables as <code>CSV</code> files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# First, load up an example EML record
library(EML)

eml_path &lt;- system.file(
 file.path("example-dataset", "broodTable_metadata.xml"),
 package = "dataspice")
eml &lt;- read_eml(eml_path)


# Generate the four dataspice tables
my_spice &lt;- eml_to_spice(eml)

# Or save them as a file
# Generate the four dataspice tables
eml_to_spice(eml, ".")

## End(Not run)
</code></pre>

<hr>
<h2 id='es_access'>Get access from EML</h2><span id='topic+es_access'></span>

<h3>Description</h3>

<p>Return EML access in the dataspice access.csv format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>es_access(eml, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="es_access_+3A_eml">eml</code></td>
<td>
<p>(emld) an EML object</p>
</td></tr>
<tr><td><code id="es_access_+3A_path">path</code></td>
<td>
<p>(character) folder path for saving the table to disk</p>
</td></tr>
</table>

<hr>
<h2 id='es_attributes'>Get attributes from EML</h2><span id='topic+es_attributes'></span>

<h3>Description</h3>

<p>Return EML attributes in the dataspice attributes.csv format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>es_attributes(eml, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="es_attributes_+3A_eml">eml</code></td>
<td>
<p>(emld) an EML object</p>
</td></tr>
<tr><td><code id="es_attributes_+3A_path">path</code></td>
<td>
<p>(character) folder path for saving the table to disk</p>
</td></tr>
</table>

<hr>
<h2 id='es_biblio'>Get biblio from EML</h2><span id='topic+es_biblio'></span>

<h3>Description</h3>

<p>Return EML biblio in the dataspice biblio.csv format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>es_biblio(eml, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="es_biblio_+3A_eml">eml</code></td>
<td>
<p>(emld) an EML object</p>
</td></tr>
<tr><td><code id="es_biblio_+3A_path">path</code></td>
<td>
<p>(character) folder path for saving the table to disk</p>
</td></tr>
</table>

<hr>
<h2 id='es_creators'>Get creators from EML</h2><span id='topic+es_creators'></span>

<h3>Description</h3>

<p>Return EML creators in the dataspice creators.csv format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>es_creators(eml, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="es_creators_+3A_eml">eml</code></td>
<td>
<p>(emld) an EML object</p>
</td></tr>
<tr><td><code id="es_creators_+3A_path">path</code></td>
<td>
<p>(character) folder path for saving the table to disk</p>
</td></tr>
</table>

<hr>
<h2 id='jsonld_to_mustache'>Convert JSONLD to a list suitable for Mustache templating</h2><span id='topic+jsonld_to_mustache'></span>

<h3>Description</h3>

<p>Convert JSONLD to a list suitable for Mustache templating
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jsonld_to_mustache(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jsonld_to_mustache_+3A_path">path</code></td>
<td>
<p>(character) Path to file on disk to convert</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(list) Mustache-appropriate list
</p>

<hr>
<h2 id='parse_GeoShape_box'>Parse spatialCoverage$geo$box section for use in a Leaflet map</h2><span id='topic+parse_GeoShape_box'></span>

<h3>Description</h3>

<p>Parse spatialCoverage$geo$box section for use in a Leaflet map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_GeoShape_box(box)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_GeoShape_box_+3A_box">box</code></td>
<td>
<p>(list) spatialCoverage$geo$box section of the JSONLD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(list) Template-specific variables for Leaflet
</p>

<hr>
<h2 id='parse_spatialCoverage'>Parse spatialCoverage section for use in a Leaflet map</h2><span id='topic+parse_spatialCoverage'></span>

<h3>Description</h3>

<p>Parse spatialCoverage section for use in a Leaflet map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_spatialCoverage(spatialCoverage)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_spatialCoverage_+3A_spatialcoverage">spatialCoverage</code></td>
<td>
<p>(list) spatialCoverage section of the JSONLD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(list) Template-specific variables for Leaflet
</p>

<hr>
<h2 id='prep_access'>Prepare access</h2><span id='topic+prep_access'></span>

<h3>Description</h3>

<p>Extract <code>fileNames</code> from data file(s) and add them to <code>access.csv</code>. The
helper <code><a href="#topic+validate_file_paths">validate_file_paths</a></code> can be used to create vectors of
valid file paths that can be checked and then passed as <code>data_path</code> argument
to <code><a href="#topic+prep_access">prep_access</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prep_access(data_path = "data", access_path = "data/metadata/access.csv", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prep_access_+3A_data_path">data_path</code></td>
<td>
<p>character vector of either:
</p>

<ol>
<li><p> path(s) to the data file(s).
</p>
</li>
<li><p> single path to directory containing data file(s).
Currently only tabular <code>.csv</code> and <code>.tsv</code> or <code>.rds</code> files are supported.
</p>
</li></ol>
</td></tr>
<tr><td><code id="prep_access_+3A_access_path">access_path</code></td>
<td>
<p>path to the <code>access.csv</code> file. Defaults to
<code>data/metadata/access.csv</code>.</p>
</td></tr>
<tr><td><code id="prep_access_+3A_...">...</code></td>
<td>
<p>parameters passed to <code>list.files()</code>. For example, use
<code>recursive = TRUE</code> to list files in a folder recursively or use <code>pattern</code> to
filter files for patterns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updates <code>access.csv</code> and writes to <code>access_path</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# First create the metadata tempaltes
create_spice()

# Then begin filling them in from your data files
prep_access()

## End(Not run)
</code></pre>

<hr>
<h2 id='prep_attributes'>Prepare attributes</h2><span id='topic+prep_attributes'></span>

<h3>Description</h3>

<p>Extract <code>variableNames</code> from data file(s) and add them to <code>attributes.csv</code>.
The helper <code><a href="#topic+validate_file_paths">validate_file_paths</a></code> can be used to create vectors of
valid file paths that can be checked and then passed as <code>data_path</code> argument
to <code><a href="#topic+prep_attributes">prep_attributes</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prep_attributes(
  data_path = "data",
  attributes_path = "data/metadata/attributes.csv",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prep_attributes_+3A_data_path">data_path</code></td>
<td>
<p>character vector of either:
</p>

<ol>
<li><p> path(s) to the data file(s).
</p>
</li>
<li><p> single path to directory containing data file(s).
Currently only tabular <code>.csv</code> and <code>.tsv</code> files are supported. Alternatively
attributes returned using <code>names()</code> can be extracted from r object, stored as
<code>.rds</code> files.
</p>
</li></ol>
</td></tr>
<tr><td><code id="prep_attributes_+3A_attributes_path">attributes_path</code></td>
<td>
<p>path to the <code style="white-space: pre;">&#8288;attributes.csv`` file. Defaults to &#8288;</code>data/metadata/attributes.csv'.</p>
</td></tr>
<tr><td><code id="prep_attributes_+3A_...">...</code></td>
<td>
<p>parameters passed to <code>list.files()</code>. For example, use
<code>recursive = TRUE</code> to list files in a folder recursively or use <code>pattern</code> to
filter files for patterns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>prep_attributes()</code> updates the <code>attributes.csv</code> and writes to
<code>attributes_path</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
create_spice()
# extract attributes from all `csv`, `tsv`, `rds` files in the data folder
# (non recursive)
prep_attributes()
# recursive
prep_attributes(recursive = TRUE)
# extract attributes from a single file using file path
data_path &lt;- system.file("example-dataset","BroodTables.csv",
                         package = "dataspice")
prep_attributes(data_path)
# extract attributes from a single file by file path pattern matching
data_path &lt;- system.file("example-dataset", package = "dataspice")
prep_attributes(data_path, pattern = "StockInfo")
# extract from a folder using folder path
data_path &lt;- system.file("example-dataset", package = "dataspice")
prep_attributes(data_path)

## End(Not run)
</code></pre>

<hr>
<h2 id='serve_site'>Serve site</h2><span id='topic+serve_site'></span>

<h3>Description</h3>

<p>Serve site
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serve_site(path = "docs")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serve_site_+3A_path">path</code></td>
<td>
<p>(character) Optional. Directory to serve. Defaults to
<code>docs</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Build your site
json &lt;- write_json(biblio, access, attributes, creators)
build_site(json)

# Serve it
serve_site()

## End(Not run)
</code></pre>

<hr>
<h2 id='spice_to_eml'>Convert <code>dataspice</code> metadata to EML</h2><span id='topic+spice_to_eml'></span>

<h3>Description</h3>

<p>Performs an (imperfect) conversion of <code>dataspice</code> metadata to EML. It's
very likely you will get validation errors and need to fix them afterwards
but <code>spice_to_eml</code> is a good way to a richer metadata schema (EML) when
you're already using <code>dataspice</code> but need a richer metadata schema.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spice_to_eml(spice = file.path("data", "metadata", "dataspice.json"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spice_to_eml_+3A_spice">spice</code></td>
<td>
<p>(list) Your <code>dataspice</code> metadata. Uses
<code>data/metadata/dataspice.json</code> by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(emld) The crosswalked <code>emld</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load an example dataspice JSON that comes installed with the package
spice &lt;- system.file(
  "examples", "annual-escapement.json",
  package = "dataspice"
)

# And crosswalk it to EML
spice_to_eml(spice)

# We can also create dataspice metadata from scratch and crosswalk it to EML
myspice &lt;- list(
  name = "My example spice",
  creator = "Me",
  contact = "Me"
)
spice_to_eml(myspice)
</code></pre>

<hr>
<h2 id='validate_access'>Validate access.csv</h2><span id='topic+validate_access'></span>

<h3>Description</h3>

<p>Validate access.csv
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_access(access)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_access_+3A_access">access</code></td>
<td>
<p>(data.frame) A <code>data.frame</code> read in from <code>access.csv</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. Side-effect: Can <code>stop</code> execution if validation fails.
</p>

<hr>
<h2 id='validate_attributes'>Validate attributes.csv</h2><span id='topic+validate_attributes'></span>

<h3>Description</h3>

<p>Validate attributes.csv
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_attributes(attributes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_attributes_+3A_attributes">attributes</code></td>
<td>
<p>(data.frame) A <code>data.frame</code> read in from
<code>attributes.csv</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. Side-effect: Can <code>stop</code> execution if validation fails.
</p>

<hr>
<h2 id='validate_biblio'>Validate biblio.csv</h2><span id='topic+validate_biblio'></span>

<h3>Description</h3>

<p>Validate biblio.csv
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_biblio(biblio)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_biblio_+3A_biblio">biblio</code></td>
<td>
<p>(data.frame) A <code>data.frame</code> read in from <code>biblio.csv</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. Side-effect: Can <code>stop</code> execution if validation fails.
</p>

<hr>
<h2 id='validate_creators'>Validate creators.csv</h2><span id='topic+validate_creators'></span>

<h3>Description</h3>

<p>Validate creators.csv
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_creators(creators)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_creators_+3A_creators">creators</code></td>
<td>
<p>(data.frame) A <code>data.frame</code> read in from
<code>creators.csv</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing. Side-effect: Can <code>stop</code> execution if validation fails.
</p>

<hr>
<h2 id='validate_file_paths'>Validate file paths</h2><span id='topic+validate_file_paths'></span>

<h3>Description</h3>

<p>Helper function to return a set of file paths for use in other functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_file_paths(data_path = "data", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_file_paths_+3A_data_path">data_path</code></td>
<td>
<p>character vector of either:
</p>

<ol>
<li><p> path(s) to the data file(s).
</p>
</li>
<li><p> single path to directory containing data file(s).
Currently only tabular <code>.csv</code> and <code>.tsv</code> files are supported. Alternatively
attributes returned using <code>names()</code> can be extracted from r object, stored as
<code>.rds</code> files.
</p>
</li></ol>
</td></tr>
<tr><td><code id="validate_file_paths_+3A_...">...</code></td>
<td>
<p>parameters passed to <code>list.files()</code>. For example, use
<code>recursive = TRUE</code> to list files in a folder recursively or use <code>pattern</code> to
filter files for patterns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One or more data file paths
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Assuming some data files in "./data"
my_files &lt;- validate_file_paths()

# If your data files are in `another_folder`
my_files &lt;- validate_file_paths("another_folder")

## End(Not run)
</code></pre>

<hr>
<h2 id='write_jsonld'>Write a list out as object to JSON-LD</h2><span id='topic+write_jsonld'></span>

<h3>Description</h3>

<p>Write a list out as object to JSON-LD
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_jsonld(
  x,
  path,
  context = "http://schema.org",
  pretty = TRUE,
  auto_unbox = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_jsonld_+3A_x">x</code></td>
<td>
<p>an object to be serialized to JSON</p>
</td></tr>
<tr><td><code id="write_jsonld_+3A_path">path</code></td>
<td>
<p>file on disk</p>
</td></tr>
<tr><td><code id="write_jsonld_+3A_context">context</code></td>
<td>
<p>JSON-LD context; &quot;http://schema.org&quot;</p>
</td></tr>
<tr><td><code id="write_jsonld_+3A_pretty">pretty</code></td>
<td>
<p>adds indentation whitespace to JSON output. Can be TRUE/FALSE or a number specifying the number of spaces to indent. See <code><a href="jsonlite.html#topic+prettify">prettify</a></code></p>
</td></tr>
<tr><td><code id="write_jsonld_+3A_auto_unbox">auto_unbox</code></td>
<td>
<p>automatically <code><a href="jsonlite.html#topic+unbox">unbox</a></code> all atomic vectors of length 1. It is usually safer to avoid this and instead use the <code><a href="jsonlite.html#topic+unbox">unbox</a></code> function to unbox individual elements.
An exception is that objects of class <code>AsIs</code> (i.e. wrapped in <code>I()</code>) are not automatically unboxed. This is a way to mark single values as length-1 arrays.</p>
</td></tr>
<tr><td><code id="write_jsonld_+3A_...">...</code></td>
<td>
<p>additional conversion arguments, see also <a href="jsonlite.html#topic+toJSON">toJSON</a> or <a href="jsonlite.html#topic+fromJSON">fromJSON</a></p>
</td></tr>
</table>

<hr>
<h2 id='write_spice'>Write spice</h2><span id='topic+write_spice'></span>

<h3>Description</h3>

<p>Write out your metadata as a dataspice JSON-LD document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_spice(path = "data/metadata", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_spice_+3A_path">path</code></td>
<td>
<p>location of metadata files</p>
</td></tr>
<tr><td><code id="write_spice_+3A_...">...</code></td>
<td>
<p>additional arguments to <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A JSON-LD file at the path specified
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# First create your metadata templates
create_spice()

# Then fill in the template files however you like

# Then write out your dataspice file
write_spice()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
