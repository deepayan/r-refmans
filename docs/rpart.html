<!DOCTYPE html><html><head><title>Help for package rpart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rpart}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#car.test.frame'><p>Automobile Data from 'Consumer Reports' 1990</p></a></li>
<li><a href='#car90'><p>Automobile Data from 'Consumer Reports' 1990</p></a></li>
<li><a href='#cu.summary'><p>Automobile Data from 'Consumer Reports' 1990</p></a></li>
<li><a href='#kyphosis'><p>Data on Children who have had Corrective Spinal Surgery</p></a></li>
<li><a href='#labels.rpart'>
<p>Create Split Labels For an Rpart Object</p></a></li>
<li><a href='#meanvar.rpart'>
<p>Mean-Variance Plot for an Rpart Object</p></a></li>
<li><a href='#na.rpart'>
<p>Handles Missing Values in an Rpart Object</p></a></li>
<li><a href='#path.rpart'>
<p>Follow Paths to Selected Nodes of an Rpart Object</p></a></li>
<li><a href='#plot.rpart'>
<p>Plot an Rpart Object</p></a></li>
<li><a href='#plotcp'>
<p>Plot a Complexity Parameter Table for an Rpart Fit</p></a></li>
<li><a href='#post.rpart'>
<p>PostScript Presentation Plot of an Rpart Object</p></a></li>
<li><a href='#predict.rpart'>
<p>Predictions from a Fitted Rpart Object</p></a></li>
<li><a href='#print.rpart'>
<p>Print an Rpart Object</p></a></li>
<li><a href='#printcp'>
<p>Displays CP table for Fitted Rpart Object</p></a></li>
<li><a href='#prune.rpart'>
<p>Cost-complexity Pruning of an Rpart Object</p></a></li>
<li><a href='#residuals.rpart'>
<p>Residuals From a Fitted Rpart Object</p></a></li>
<li><a href='#rpart'>
<p>Recursive Partitioning and Regression Trees</p></a></li>
<li><a href='#rpart-internal'>
<p>Internal Functions</p></a></li>
<li><a href='#rpart.control'>
<p>Control for Rpart Fits</p></a></li>
<li><a href='#rpart.exp'><p>Initialization function for exponential fitting</p></a></li>
<li><a href='#rpart.object'>
<p>Recursive Partitioning and Regression Trees Object</p></a></li>
<li><a href='#rsq.rpart'>
<p>Plots the Approximate R-Square for the Different Splits</p></a></li>
<li><a href='#snip.rpart'>
<p>Snip Subtrees of an Rpart Object</p></a></li>
<li><a href='#solder.balance'><p>Soldering of Components on Printed-Circuit Boards</p></a></li>
<li><a href='#stagec'><p>Stage C Prostate Cancer</p></a></li>
<li><a href='#summary.rpart'>
<p>Summarize a Fitted Rpart Object</p></a></li>
<li><a href='#text.rpart'>
<p>Place Text on a Dendrogram Plot</p></a></li>
<li><a href='#xpred.rpart'>
<p>Return Cross-Validated Predictions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Priority:</td>
<td>recommended</td>
</tr>
<tr>
<td>Version:</td>
<td>4.1.23</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-04</td>
</tr>
<tr>
<td>Description:</td>
<td>Recursive partitioning for classification, 
  regression and survival trees.  An implementation of most of the 
  functionality of the 1984 book by Breiman, Friedman, Olshen and Stone.</td>
</tr>
<tr>
<td>Title:</td>
<td>Recursive Partitioning and Regression Trees</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.15.0), graphics, stats, grDevices</td>
</tr>
<tr>
<td>Suggests:</td>
<td>survival</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Author:</td>
<td>Terry Therneau [aut],
  Beth Atkinson [aut, cre],
  Brian Ripley [trl] (producer of the initial R port, maintainer 1999-2017)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Beth Atkinson &lt;atkinson@mayo.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bethatkinson/rpart">https://github.com/bethatkinson/rpart</a>,
<a href="https://cran.r-project.org/package=rpart">https://cran.r-project.org/package=rpart</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bethatkinson/rpart/issues">https://github.com/bethatkinson/rpart/issues</a></td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-05 16:26:54 UTC; atkinson</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-05 22:10:02 UTC</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.4.0; x86_64-pc-linux-gnu; 2024-03-26 07:26:31 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='car.test.frame'>Automobile Data from 'Consumer Reports' 1990</h2><span id='topic+car.test.frame'></span>

<h3>Description</h3>

<p>The <code>car.test.frame</code> data frame has 60 rows and 8 columns,
giving data on makes of cars taken from the April, 1990 issue of
<em>Consumer Reports</em>. This is part of a larger dataset, some
columns of which are given in <code><a href="#topic+cu.summary">cu.summary</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>car.test.frame
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>

<dl>
<dt><code>Price</code></dt><dd>
<p>a numeric vector giving the list price in US dollars of a standard model
</p>
</dd>
<dt><code>Country</code></dt><dd>
<p>of origin, a factor with levels
&lsquo;<span class="samp">&#8288;France&#8288;</span>&rsquo;, 
&lsquo;<span class="samp">&#8288;Germany&#8288;</span>&rsquo;, 
&lsquo;<span class="samp">&#8288;Japan&#8288;</span>&rsquo; ,
&lsquo;<span class="samp">&#8288;Japan/USA&#8288;</span>&rsquo;, 
&lsquo;<span class="samp">&#8288;Korea&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Mexico&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Sweden&#8288;</span>&rsquo; and
&lsquo;<span class="samp">&#8288;USA&#8288;</span>&rsquo; 
</p>
</dd>
<dt><code>Reliability</code></dt><dd>
<p>a numeric vector coded <code>1</code> to <code>5</code>.
</p>
</dd>
<dt><code>Mileage</code></dt><dd>
<p>fuel consumption miles per US gallon, as tested. 
</p>
</dd>
<dt><code>Type</code></dt><dd>
<p>a factor with levels
<code>Compact</code> 
<code>Large</code> 
<code>Medium</code> 
<code>Small</code> 
<code>Sporty</code> 
<code>Van</code> 
</p>
</dd>
<dt><code>Weight</code></dt><dd>
<p>kerb weight in pounds.
</p>
</dd>
<dt><code>Disp.</code></dt><dd>
<p>the engine capacity (displacement) in litres.
</p>
</dd>
<dt><code>HP</code></dt><dd>
<p>the net horsepower of the vehicle.
</p>
</dd>
</dl>


<h3>Source</h3>

<p><em>Consumer Reports</em>, April, 1990, pp. 235&ndash;288 quoted in
</p>
<p>John M. Chambers and Trevor J. Hastie eds. (1992)
<em>Statistical Models in S</em>, Wadsworth and Brooks/Cole,
Pacific Grove, CA, pp. 46&ndash;47.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+car90">car90</a></code>,
<code><a href="#topic+cu.summary">cu.summary</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
summary(z.auto)
</code></pre>

<hr>
<h2 id='car90'>Automobile Data from 'Consumer Reports' 1990</h2><span id='topic+car90'></span>

<h3>Description</h3>

<p>Data on 111 cars, taken from pages 235&ndash;255, 281&ndash;285 and 287&ndash;288 of the
April 1990 <em>Consumer Reports</em> Magazine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(car90)</code></pre>


<h3>Format</h3>

  
<p>The data frame contains the following columns
</p>

<dl>
<dt>Country</dt><dd><p>a factor giving the country in which the car was
manufactured</p>
</dd>
<dt>Disp</dt><dd><p>engine displacement in cubic inches</p>
</dd>
<dt>Disp2</dt><dd><p>engine displacement in liters</p>
</dd>
<dt>Eng.Rev</dt><dd><p>engine revolutions per mile, or engine speed at 60 mph</p>
</dd>
<dt>Front.Hd</dt><dd><p>distance between the car's head-liner and the head
of a 5 ft. 9 in. front seat passenger, in inches, as measured by CU</p>
</dd>
<dt>Frt.Leg.Room</dt><dd><p>maximum front leg room, in inches, as measured by CU</p>
</dd>
<dt>Frt.Shld</dt><dd><p>front shoulder room, in inches, as measured by CU</p>
</dd>
<dt>Gear.Ratio</dt><dd><p>the overall gear ratio, high gear, for manual transmission</p>
</dd>
<dt>Gear2</dt><dd><p>the overall gear ratio, high gear, for automatic transmission</p>
</dd>
<dt>HP</dt><dd><p>net horsepower</p>
</dd>
<dt>HP.revs</dt><dd><p>the red line&mdash;the maximum safe engine speed in rpm</p>
</dd>
<dt>Height</dt><dd><p>height of car, in inches, as supplied by manufacturer</p>
</dd>
<dt>Length</dt><dd><p>overall length, in inches, as supplied by manufacturer</p>
</dd>
<dt>Luggage</dt><dd><p>luggage space</p>
</dd>
<dt>Mileage</dt><dd><p>a numeric vector of gas mileage in miles/gallon as
tested by CU; contains NAs.</p>
</dd>
<dt>Model2</dt><dd><p>alternate name, if the car was sold under two labels</p>
</dd>
<dt>Price</dt><dd><p>list price with standard equipment, in dollars</p>
</dd>
<dt>Rear.Hd</dt><dd><p>distance between the car's head-liner and the head of
a 5 ft 9 in. rear seat passenger, in inches, as measured by CU</p>
</dd>
<dt>Rear.Seating</dt><dd><p>rear fore-and-aft seating room, in inches,
as measured by CU</p>
</dd>
<dt>RearShld</dt><dd><p>rear shoulder room, in inches, as measured by CU</p>
</dd>
<dt>Reliability</dt><dd><p>an ordered factor with levels &lsquo;<span class="samp">&#8288;Much worse&#8288;</span>&rsquo; &lt;
&lsquo;<span class="samp">&#8288;worse&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;average&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;better&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;Much
	better&#8288;</span>&rsquo;: contains <code>NA</code>s.</p>
</dd>
<dt>Rim</dt><dd><p>factor giving the rim size</p>
</dd>
<dt>Sratio.m</dt><dd><p>Number of turns of the steering
wheel required for a turn of 30 foot radius, manual steering</p>
</dd>
<dt>Sratio.p</dt><dd><p>Number of turns of the steering
wheel required for a turn of 30 foot radius, power steering</p>
</dd>
<dt>Steering</dt><dd><p>steering type offered: manual, power, or both</p>
</dd>
<dt>Tank</dt><dd><p>fuel refill capacity in gallons</p>
</dd>
<dt>Tires</dt><dd><p>factor giving tire size</p>
</dd>
<dt>Trans1</dt><dd><p>manual transmission, a factor with levels &lsquo;<span class="samp">&#8288;&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;man.4&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;man.5&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;man.6&#8288;</span>&rsquo;</p>
</dd>
<dt>Trans2</dt><dd><p>automatic transmission, a factor with levels &lsquo;<span class="samp">&#8288;&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;auto.3&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;auto.4&#8288;</span>&rsquo;, and &lsquo;<span class="samp">&#8288;auto.CVT&#8288;</span>&rsquo;.  No car is
missing both the manual and automatic transmission variables, but
several had both as options</p>
</dd> 
<dt>Turning</dt><dd><p>the radius of the turning circle in feet</p>
</dd>
<dt>Type</dt><dd><p>a factor giving the general type of car.
The levels are: &lsquo;<span class="samp">&#8288;Small&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;Sporty&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;Compact&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;Medium&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;Large&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;Van&#8288;</span>&rsquo;</p>
</dd>
<dt>Weight</dt><dd><p>an order statistic giving the relative weights of the
cars; 1 is the lightest and 111 is the heaviest</p>
</dd>
<dt>Wheel.base</dt><dd><p>length of wheelbase, in inches, as supplied by manufacturer</p>
</dd>
<dt>Width</dt><dd><p>width of car, in inches, as supplied by manufacturer</p>
</dd>
</dl>


<h3>Source</h3>

<p>This is derived (with permission) from the data set <code>car.all</code> in
S-PLUS, but with some further clean up of variable names and definitions.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+car.test.frame">car.test.frame</a></code>,
<code><a href="#topic+cu.summary">cu.summary</a></code> for extracts from other versions of the dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(car90)
plot(car90$Price/1000, car90$Weight,
     xlab = "Price (thousands)", ylab = "Weight (lbs)")
mlowess &lt;- function(x, y, ...) {
    keep &lt;- !(is.na(x) | is.na(y))
    lowess(x[keep], y[keep], ...)
}
with(car90, lines(mlowess(Price/1000, Weight, f = 0.5)))
</code></pre>

<hr>
<h2 id='cu.summary'>Automobile Data from 'Consumer Reports' 1990</h2><span id='topic+cu.summary'></span>

<h3>Description</h3>

<p>The <code>cu.summary</code> data frame has 117 rows and 5 columns,
giving data on makes of cars taken from the April, 1990 issue of
<em>Consumer Reports</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cu.summary
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>

<dl>
<dt><code>Price</code></dt><dd>
<p>a numeric vector giving the list price in US dollars of a standard model
</p>
</dd>
<dt><code>Country</code></dt><dd>
<p>of origin, a factor with levels
&lsquo;<span class="samp">&#8288;Brazil&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;England&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;France&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Germany&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Japan&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Japan/USA&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Korea&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Mexico&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;Sweden&#8288;</span>&rsquo; and
&lsquo;<span class="samp">&#8288;USA&#8288;</span>&rsquo;
</p>
</dd>
<dt><code>Reliability</code></dt><dd>
<p>an ordered factor with levels
&lsquo;<span class="samp">&#8288;Much worse&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;worse&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;average&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;better&#8288;</span>&rsquo; &lt; &lsquo;<span class="samp">&#8288;Much better&#8288;</span>&rsquo;
</p>
</dd>
<dt><code>Mileage</code></dt><dd>
<p>fuel consumption miles per US gallon, as tested.
</p>
</dd>
<dt><code>Type</code></dt><dd>
<p>a factor with levels
<code>Compact</code>
<code>Large</code>
<code>Medium</code>
<code>Small</code>
<code>Sporty</code>
<code>Van</code>
</p>
</dd>
</dl>



<h3>Source</h3>

<p><em>Consumer Reports</em>, April, 1990, pp. 235&ndash;288 quoted in
</p>
<p>John M. Chambers and Trevor J. Hastie eds. (1992)
<em>Statistical Models in S</em>, Wadsworth and Brooks/Cole,
Pacific Grove, CA, pp. 46&ndash;47.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+car.test.frame">car.test.frame</a></code>,
<code><a href="#topic+car90">car90</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Price ~ Mileage + Type + Country, cu.summary)
par(xpd = TRUE)
plot(fit, compress = TRUE)
text(fit, use.n = TRUE)
</code></pre>

<hr>
<h2 id='kyphosis'>Data on Children who have had Corrective Spinal Surgery</h2><span id='topic+kyphosis'></span>

<h3>Description</h3>

<p>The <code>kyphosis</code> data frame has 81 rows and 4 columns.
representing data on children who have had corrective spinal surgery
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kyphosis
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>

<dl>
<dt><code>Kyphosis</code></dt><dd>
<p>a factor with levels
<code>absent</code> 
<code>present</code>
indicating if a kyphosis (a type of deformation)
was present after the operation.
</p>
</dd>
<dt><code>Age</code></dt><dd>
<p>in months
</p>
</dd>
<dt><code>Number</code></dt><dd>
<p>the number of vertebrae involved 
</p>
</dd>
<dt><code>Start</code></dt><dd>
<p>the number of the first (topmost) vertebra operated on.
</p>
</dd>
</dl>


<h3>Source</h3>

<p>John M. Chambers and Trevor J. Hastie eds. (1992)
<em>Statistical Models in S</em>, Wadsworth and Brooks/Cole,
Pacific Grove, CA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
fit2 &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis,
              parms = list(prior = c(0.65, 0.35), split = "information"))
fit3 &lt;- rpart(Kyphosis ~ Age + Number + Start, data=kyphosis,
              control = rpart.control(cp = 0.05))
par(mfrow = c(1,2), xpd = TRUE)
plot(fit)
text(fit, use.n = TRUE)
plot(fit2)
text(fit2, use.n = TRUE)
</code></pre>

<hr>
<h2 id='labels.rpart'>
Create Split Labels For an Rpart Object 
</h2><span id='topic+labels.rpart'></span>

<h3>Description</h3>

<p>This function provides labels for the branches of an <code>rpart</code> tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
labels(object, digits = 4, minlength = 1L, pretty, collapse = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="labels.rpart_+3A_object">object</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the
result of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr>
<tr><td><code id="labels.rpart_+3A_digits">digits</code></td>
<td>

<p>the number of digits to be used for numeric values.  
All of the <code>rpart</code> functions that call labels
explicitly set this value, with <code>options("digits")</code>
as the default.
</p>
</td></tr>
<tr><td><code id="labels.rpart_+3A_minlength">minlength</code></td>
<td>

<p>the minimum length for abbreviation of character or factor variables.
If <code>0</code> no abbreviation is done; if <code>1</code> single English letters are
used, first lower case than upper case (with a maximum of 52
levels). If the value is greater than , the <code><a href="base.html#topic+abbreviate">abbreviate</a></code>
function is used, passed the <code>minlength</code> argument.
</p>
</td></tr>
<tr><td><code id="labels.rpart_+3A_pretty">pretty</code></td>
<td>

<p>an argument included for compatibility with the original Splus tree package:
<code>pretty = 0</code> implies <code>minlength = 0L</code>,
<code>pretty = NULL</code> implies <code>minlength = 1L</code>, and
<code>pretty = TRUE</code> implies <code>minlength = 4L</code>.
</p>
</td></tr>
<tr><td><code id="labels.rpart_+3A_collapse">collapse</code></td>
<td>

<p>logical. The returned set of labels is always of the same length as
the number of nodes in the tree.
</p>
<p>If <code>collapse = TRUE</code> (default), 
the returned value is a vector of labels for the branch leading into
each node, with <code>"root"</code> as the label for the top node.
</p>
<p>If <code>FALSE</code>, the returned value is a two
column matrix of labels for the left and right branches leading 
out from each node, with <code>"leaf"</code> as the branch labels for terminal
nodes.
</p>
</td></tr>
<tr><td><code id="labels.rpart_+3A_...">...</code></td>
<td>
<p>optional arguments to <code>abbreviate</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of split labels (<code>collapse = TRUE</code>) or matrix of left and
right splits (<code>collapse = FALSE</code>) for the supplied <code>rpart</code>
object.  This function is called by printing methods for <code>rpart</code>
and is not intended to be called directly by the users.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+abbreviate">abbreviate</a></code> 
</p>

<hr>
<h2 id='meanvar.rpart'>
Mean-Variance Plot for an Rpart Object 
</h2><span id='topic+meanvar'></span><span id='topic+meanvar.rpart'></span>

<h3>Description</h3>

<p>Creates a plot on the current graphics device of the deviance of the 
node divided by the number of observations at the node.  Also returns 
the node number. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meanvar(tree, ...)

## S3 method for class 'rpart'
meanvar(tree, xlab = "ave(y)", ylab = "ave(deviance)", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="meanvar.rpart_+3A_tree">tree</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result 
of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="meanvar.rpart_+3A_xlab">xlab</code></td>
<td>

<p>x-axis label for the plot. 
</p>
</td></tr>
<tr><td><code id="meanvar.rpart_+3A_ylab">ylab</code></td>
<td>

<p>y-axis label for the plot. 
</p>
</td></tr>
<tr><td><code id="meanvar.rpart_+3A_...">...</code></td>
<td>

<p>additional graphical parameters may be supplied as arguments to this function. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an invisible list containing the following vectors is returned. 
</p>
<table>
<tr><td><code>x</code></td>
<td>

<p>fitted value at terminal nodes (<code>yval</code>). 
</p>
</td></tr>
<tr><td><code>y</code></td>
<td>

<p>deviance of node divided by number of observations at node. 
</p>
</td></tr>
<tr><td><code>label</code></td>
<td>

<p>node number. 
</p>
</td></tr>
</table>


<h3>Side Effects</h3>

<p>a plot is put on the current graphics device. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.rpart">plot.rpart</a></code>.   
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
meanvar(z.auto, log = 'xy')
</code></pre>

<hr>
<h2 id='na.rpart'>
Handles Missing Values in an Rpart Object 
</h2><span id='topic+na.rpart'></span>

<h3>Description</h3>

<p>Handles missing values in an <code>"rpart"</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na.rpart(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na.rpart_+3A_x">x</code></td>
<td>

<p>a model frame.
</p>
</td></tr></table>


<h3>Details</h3>

<p>Default function that handles missing values when calling the
function <code>rpart</code>.
</p>
<p>It omits cases where part of the response is missing or all the
explanatory variables are missing.
</p>

<hr>
<h2 id='path.rpart'>
Follow Paths to Selected Nodes of an Rpart Object
</h2><span id='topic+path.rpart'></span>

<h3>Description</h3>

<p>Returns a names list where each element contains the splits on the
path from the root to the selected nodes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>path.rpart(tree, nodes, pretty = 0, print.it = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="path.rpart_+3A_tree">tree</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the
result of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr>
<tr><td><code id="path.rpart_+3A_nodes">nodes</code></td>
<td>

<p>an integer vector containing indices (node numbers) of all nodes for
which paths are desired.  If missing, user selects nodes as described
below. 
</p>
</td></tr>
<tr><td><code id="path.rpart_+3A_pretty">pretty</code></td>
<td>

<p>an integer denoting the extent to which factor levels in split labels
will be abbreviated.  A value of (0) signifies no abbreviation.  A
<code>NULL</code>, the default, signifies using elements of letters to represent
the different factor levels.
</p>
</td></tr>
<tr><td><code id="path.rpart_+3A_print.it">print.it</code></td>
<td>

<p>Logical. Denotes whether paths will be printed out as
nodes are interactively selected.   Irrelevant if <code>nodes</code>
argument is supplied.
</p>
</td></tr></table>


<h3>Details</h3>

<p>The function has a required argument as an <code>rpart</code> object  and
a list of nodes as optional arguments.  Omitting a list of
nodes will cause the function to  wait  for  the  user  to
select  nodes  from the dendrogram.  It will return a list,
with one component for each node  specified  or  selected.
The  component  contains the sequence of splits leading to
that node.  In the graphical  interaction,  the  individual
paths are printed out as nodes are selected.
</p>


<h3>Value</h3>

<p>A named (by node) list, each element of which contains all
the  splits  on the path from the root to the specified or
selected nodes.
</p>


<h3>Graphical Interaction</h3>

<p>A dendrogram of the <code>rpart</code> object is expected to be visible on
the graphics device, and a graphics input device (e.g. a mouse) is
required.  Clicking (the selection button) on a node selects that
node.  This process may be repeated any number of times.  Clicking the
exit button will stop the selection process and return the list of
paths.
</p>


<h3>References</h3>

<p>This function was modified from <code>path.tree</code> in S. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
print(fit)
path.rpart(fit, nodes = c(11, 22))
</code></pre>

<hr>
<h2 id='plot.rpart'>
Plot an Rpart Object
</h2><span id='topic+plot.rpart'></span>

<h3>Description</h3>

<p>Plots an rpart object on the current graphics device.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
plot(x, uniform = FALSE, branch = 1, compress = FALSE, nspace,
     margin = 0, minbranch = 0.3, branch.col = 1, branch.lty = 1, 
     branch.lwd = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.rpart_+3A_x">x</code></td>
<td>

<p>a fitted object of class <code>"rpart"</code>, containing a classification,
regression, or rate tree.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_uniform">uniform</code></td>
<td>

<p>if <code>TRUE</code>, uniform vertical spacing of the nodes is used; this may be
less cluttered when fitting a large plot onto a page.
The default is to use a non-uniform spacing proportional to the 
error in the fit.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_branch">branch</code></td>
<td>

<p>controls the shape of the branches from parent to child node.
Any number from 0 to 1 is allowed.  A value of 1 gives square
shouldered branches, a value of 0 give V shaped branches, 
with other values being intermediate.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_compress">compress</code></td>
<td>

<p>if <code>FALSE</code>, the leaf nodes will be at the horizontal plot coordinates of
<code>1:nleaves</code>.  
If <code>TRUE</code>, the routine attempts a more compact arrangement of
the tree.
The compaction algorithm assumes <code>uniform=TRUE</code>; surprisingly, the result
is usually an improvement even when that is not the case.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_nspace">nspace</code></td>
<td>

<p>the amount of extra space between a node with children and
a leaf, as compared to the minimal space between leaves.  
Applies to compressed trees only.  The default is the value of
<code>branch</code>.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_margin">margin</code></td>
<td>

<p>an extra fraction of white space to leave around the borders of the tree.
(Long labels sometimes get cut off by the default computation).
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_minbranch">minbranch</code></td>
<td>

<p>set the minimum length for a branch to <code>minbranch</code> times the average
branch length.  This parameter is ignored if <code>uniform=TRUE</code>.
Sometimes a split will give very little improvement, or even (in
the classification case) no improvement at all.  
A tree with branch lengths strictly proportional to improvement
leaves no room to squeeze in node labels.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_branch.col">branch.col</code></td>
<td>

<p>set the color of the branches.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_branch.lty">branch.lty</code></td>
<td>

<p>set the line type of the branches.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_branch.lwd">branch.lwd</code></td>
<td>

<p>set the line width of the branches.
</p>
</td></tr>
<tr><td><code id="plot.rpart_+3A_...">...</code></td>
<td>

<p>arguments to be passed to or from other methods.
</p>
</td></tr></table>


<h3>Details</h3>

<p>This function is a method for the generic function <code>plot</code>, for objects
of class <code>rpart</code>.
The y-coordinate of the top node of the tree will always be 1.
</p>


<h3>Value</h3>

<p>The coordinates of the nodes are returned as a list, with
components <code>x</code> and <code>y</code>.
</p>


<h3>Side Effects</h3>

<p>An unlabeled plot is produced on the current graphics device: one being
opened if needed.
</p>
<p>In order to build up a plot in the usual S style, e.g., a separate
<code>text</code> command for adding labels, some extra information about the
plot needs be retained.  This is kept in an environment in the package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code>, <code><a href="#topic+text.rpart">text.rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Price ~ Mileage + Type + Country, cu.summary)
par(xpd = TRUE)
plot(fit, compress = TRUE)
text(fit, use.n = TRUE)
</code></pre>

<hr>
<h2 id='plotcp'>
Plot a Complexity Parameter Table for an Rpart Fit 
</h2><span id='topic+plotcp'></span>

<h3>Description</h3>

<p>Gives a visual representation of the cross-validation results in an 
<code>rpart</code> object. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotcp(x, minline = TRUE, lty = 3, col = 1,
       upper = c("size", "splits", "none"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotcp_+3A_x">x</code></td>
<td>

<p>an object of class <code>"rpart"</code> 
</p>
</td></tr>
<tr><td><code id="plotcp_+3A_minline">minline</code></td>
<td>

<p>whether a horizontal line is drawn 1SE above the minimum of the curve. 
</p>
</td></tr>
<tr><td><code id="plotcp_+3A_lty">lty</code></td>
<td>

<p>line type for this line 
</p>
</td></tr>
<tr><td><code id="plotcp_+3A_col">col</code></td>
<td>

<p>colour for this line 
</p>
</td></tr>
<tr><td><code id="plotcp_+3A_upper">upper</code></td>
<td>

<p>what is plotted on the top axis: the size of the tree (the number of
leaves), the number of splits or nothing. 
</p>
</td></tr>
<tr><td><code id="plotcp_+3A_...">...</code></td>
<td>

<p>additional plotting parameters 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The set of possible cost-complexity prunings of a tree from a nested
set. For the geometric means of the intervals of values of <code>cp</code> for which
a pruning is optimal, a cross-validation has (usually) been done in
the initial construction by <code><a href="#topic+rpart">rpart</a></code>. The <code>cptable</code> in the fit contains
the mean and standard deviation of the errors in the cross-validated
prediction against each of the geometric means, and these are plotted
by this function. A good choice of <code>cp</code> for pruning is often the
leftmost value for which the mean lies below the horizontal line.
</p>


<h3>Value</h3>

<p>None. 
</p>


<h3>Side Effects</h3>

<p>A plot is produced on the current graphical device. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code>,  <code><a href="#topic+printcp">printcp</a></code>,  <code><a href="#topic+rpart.object">rpart.object</a></code>   
</p>

<hr>
<h2 id='post.rpart'>
PostScript Presentation Plot of an Rpart Object 
</h2><span id='topic+post.rpart'></span><span id='topic+post'></span>

<h3>Description</h3>

<p>Generates a PostScript presentation plot of an <code>rpart</code> object. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>post(tree, ...)

## S3 method for class 'rpart'
post(tree, title., 
     filename = paste(deparse(substitute(tree)), ".ps", sep = ""), 
     digits = getOption("digits") - 2, pretty = TRUE,
     use.n = TRUE, horizontal = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="post.rpart_+3A_tree">tree</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result 
of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_title.">title.</code></td>
<td>

<p>a title which appears at the top of the plot.  By default, the 
name of the <code>rpart</code> endpoint is printed out. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_filename">filename</code></td>
<td>

<p>ASCII file to contain the output.  By default, the name of the file is 
the name of the object given by <code>rpart</code> (with the suffix <code>.ps</code> added). If 
<code>filename = ""</code>, the plot appears on the current graphical device. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_digits">digits</code></td>
<td>

<p>number of significant digits to include in numerical data. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_pretty">pretty</code></td>
<td>

<p>an integer denoting the extent to which factor levels will be 
abbreviated in the character strings defining the splits; 
(0) signifies no abbreviation of levels.  A <code>NULL</code> signifies using 
elements of letters to represent the different factor levels.  The 
default (<code>TRUE</code>) indicates the maximum possible abbreviation. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_use.n">use.n</code></td>
<td>

<p>Logical.  If <code>TRUE</code> (default), adds to the label 
<code style="white-space: pre;">&#8288;#events level1/ #events level2/&#8288;</code> etc. for method <code>class</code>,
<code style="white-space: pre;">&#8288;n&#8288;</code> for 
method <code>anova</code>, and <code style="white-space: pre;">&#8288;#events/n&#8288;</code> for methods <code>poisson</code> and <code>exp</code>).
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_horizontal">horizontal</code></td>
<td>

<p>Logical.  If <code>TRUE</code> (default), plot is horizontal. If <code>FALSE</code>, plot 
appears as landscape. 
</p>
</td></tr>
<tr><td><code id="post.rpart_+3A_...">...</code></td>
<td>

<p>other arguments to the <code>postscript</code> function. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plot created uses the functions <code>plot.rpart</code> and <code>text.rpart</code> (with 
the <code>fancy</code> option).  The settings were chosen because they looked 
good to us, but other options may be better, depending on the <code>rpart</code> 
object.   
Users are encouraged to write their own function containing favorite 
options. 
</p>


<h3>Side Effects</h3>

<p>a plot of <code>rpart</code> is created using the <code>postscript</code> driver, or
the current device if <code>filename = ""</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.rpart">plot.rpart</a></code>,  <code><a href="#topic+rpart">rpart</a></code>,  <code><a href="#topic+text.rpart">text.rpart</a></code>,  <code><a href="base.html#topic+abbreviate">abbreviate</a></code>   
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
post(z.auto, file = "")   # display tree on active device
   # now construct postscript version on file "pretty.ps"
   # with no title
post(z.auto, file = "pretty.ps", title = " ")
z.hp &lt;- rpart(Mileage ~ Weight + HP, car.test.frame)
post(z.hp)
## End(Not run)
</code></pre>

<hr>
<h2 id='predict.rpart'>
Predictions from a Fitted Rpart Object 
</h2><span id='topic+predict.rpart'></span>

<h3>Description</h3>

<p>Returns a vector of predicted responses from a fitted <code>rpart</code> object. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
predict(object, newdata,
       type = c("vector", "prob", "class", "matrix"),
       na.action = na.pass, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.rpart_+3A_object">object</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be
the result of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="predict.rpart_+3A_newdata">newdata</code></td>
<td>

<p>data frame containing the values at which predictions are required. 
The predictors referred to in the right side of
<code>formula(object)</code> must be present by name in <code>newdata</code>.
If missing, the fitted values are returned. 
</p>
</td></tr>
<tr><td><code id="predict.rpart_+3A_type">type</code></td>
<td>

<p>character string denoting the type of predicted value returned.  If
the <code>rpart</code> object is a classification tree, then the default is to
return <code>prob</code> predictions, a matrix whose columns are the
probability of the first, second, etc. class.  (This agrees with the
default behavior of <code><a href="tree.html#topic+tree">tree</a></code>).  Otherwise, a vector
result is returned.
</p>
</td></tr>
<tr><td><code id="predict.rpart_+3A_na.action">na.action</code></td>
<td>
<p>a function to determine what should be done with
missing values in <code>newdata</code>.  The default is to pass them down
the tree using surrogates in the way selected when the model was built.
Other possibilities are <code><a href="stats.html#topic+na.omit">na.omit</a></code> and <code><a href="stats.html#topic+na.fail">na.fail</a></code>.
</p>
</td></tr>
<tr><td><code id="predict.rpart_+3A_...">...</code></td>
<td>

<p>further arguments passed to or from other methods.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a method for the generic function predict for class
<code>"rpart"</code>. It can be invoked by calling <code>predict</code> for an object
of the appropriate class, or directly by calling <code>predict.rpart</code>
regardless of the class of the object.
</p>


<h3>Value</h3>

<p>A new object is obtained by
dropping <code>newdata</code> down the object.  For factor predictors, if an
observation contains a level not used to grow the tree, it is left at
the deepest possible node and <code>frame$yval</code> at the node is the
prediction.
</p>
<p>If <code>type = "vector"</code>:<br />
vector of predicted responses.
For regression trees this is the mean response at the node, for Poisson
trees it is the estimated response rate, and for classification trees
it is the predicted class (as a number).
</p>
<p>If <code>type = "prob"</code>:<br />
(for a classification tree) a matrix of class probabilities.
</p>
<p>If <code>type = "matrix"</code>:<br /> a matrix of the full responses
(<code>frame$yval2</code> if this exists, otherwise <code>frame$yval</code>).  For
regression trees, this is the mean response, for Poisson trees it is
the response rate and the number of events at that node in the fitted
tree, and for classification trees it is the concatenation of at least
the predicted class, the class counts at that node in the fitted tree,
and the class probabilities (some versions of <span class="pkg">rpart</span> may contain
further columns).
</p>
<p>If <code>type = "class"</code>:<br />
(for a classification tree) a factor of classifications based on the
responses.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+predict">predict</a></code>,  <code><a href="#topic+rpart.object">rpart.object</a></code>   
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
predict(z.auto)

fit &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
predict(fit, type = "prob")   # class probabilities (default)
predict(fit, type = "vector") # level numbers
predict(fit, type = "class")  # factor
predict(fit, type = "matrix") # level number, class frequencies, probabilities

sub &lt;- c(sample(1:50, 25), sample(51:100, 25), sample(101:150, 25))
fit &lt;- rpart(Species ~ ., data = iris, subset = sub)
fit
table(predict(fit, iris[-sub,], type = "class"), iris[-sub, "Species"])
</code></pre>

<hr>
<h2 id='print.rpart'>
Print an Rpart Object 
</h2><span id='topic+print.rpart'></span>

<h3>Description</h3>

<p>This function prints an <code>rpart</code> object.  It is a method for the generic 
function <code>print</code> of class <code>"rpart"</code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
print(x, minlength = 0, spaces = 2, cp, digits = getOption("digits"),
  nsmall = min(20, digits), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.rpart_+3A_x">x</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result 
of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_minlength">minlength</code></td>
<td>

<p>Controls the abbreviation of labels: see <code><a href="#topic+labels.rpart">labels.rpart</a></code>.
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_spaces">spaces</code></td>
<td>

<p>the number of spaces to indent nodes of increasing depth. 
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_digits">digits</code></td>
<td>

<p>the number of digits of numbers to print. 
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_nsmall">nsmall</code></td>
<td>

<p>the number of digits to the right of the decimal. See <code><a href="base.html#topic+format">format</a></code>. 
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_cp">cp</code></td>
<td>

<p>prune all nodes with a complexity less than <code>cp</code> from the
printout. Ignored if unspecified.
</p>
</td></tr>
<tr><td><code id="print.rpart_+3A_...">...</code></td>
<td>

<p>arguments to be passed to or from other methods.
</p>
</td></tr></table>


<h3>Details</h3>

<p>This function is a method for the generic function <code>print</code> for class 
<code>"rpart"</code>.  It can be invoked by calling print for an object of the 
appropriate class, or directly by calling <code>print.rpart</code> regardless of 
the class of the object. 
</p>


<h3>Side Effects</h3>

<p>A semi-graphical layout of the contents of <code>x$frame</code> is
printed.  Indentation is used to convey the tree topology.
Information for each node includes the node number, split, size,
deviance, and fitted value.  For the <code>"class"</code> method, the
class probabilities are also printed. 
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+print">print</a></code>,  <code><a href="#topic+rpart.object">rpart.object</a></code>,
<code><a href="#topic+summary.rpart">summary.rpart</a></code>,  <code><a href="#topic+printcp">printcp</a></code>   
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
z.auto
## Not run: node), split, n, deviance, yval
      * denotes terminal node

 1) root 60 1354.58300 24.58333  
   2) Weight&gt;=2567.5 45  361.20000 22.46667  
     4) Weight&gt;=3087.5 22   61.31818 20.40909 *
     5) Weight&lt;3087.5 23  117.65220 24.43478  
      10) Weight&gt;=2747.5 15   60.40000 23.80000 *
      11) Weight&lt;2747.5 8   39.87500 25.62500 *
   3) Weight&lt;2567.5 15  186.93330 30.93333 *

## End(Not run)</code></pre>

<hr>
<h2 id='printcp'>
Displays CP table for Fitted Rpart Object 
</h2><span id='topic+printcp'></span>

<h3>Description</h3>

<p>Displays the <code>cp</code> table for fitted <code>rpart</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printcp(x, digits = getOption("digits") - 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="printcp_+3A_x">x</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result 
of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="printcp_+3A_digits">digits</code></td>
<td>

<p>the number of digits of numbers to print.
</p>
</td></tr></table>


<h3>Details</h3>

<p>Prints a table of optimal prunings based on a complexity parameter. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.rpart">summary.rpart</a></code>,  <code><a href="#topic+rpart.object">rpart.object</a></code>   
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
printcp(z.auto)
## Not run: 
Regression tree:
rpart(formula = Mileage ~ Weight, data = car.test.frame)

Variables actually used in tree construction:
[1] Weight

Root node error: 1354.6/60 = 22.576

        CP nsplit rel error  xerror     xstd 
1 0.595349      0   1.00000 1.03436 0.178526
2 0.134528      1   0.40465 0.60508 0.105217
3 0.012828      2   0.27012 0.45153 0.083330
4 0.010000      3   0.25729 0.44826 0.076998

## End(Not run)</code></pre>

<hr>
<h2 id='prune.rpart'>
Cost-complexity Pruning of an Rpart Object 
</h2><span id='topic+prune.rpart'></span><span id='topic+prune'></span>

<h3>Description</h3>

<p>Determines a nested sequence of subtrees of the supplied <code>rpart</code> object 
by recursively <code>snipping</code> off the least important splits, based on the 
complexity parameter (<code>cp</code>). 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prune(tree, ...)

## S3 method for class 'rpart'
prune(tree, cp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prune.rpart_+3A_tree">tree</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result 
of some function that produces an object with the same named 
components as that returned by the <code>rpart</code> function. 
</p>
</td></tr>
<tr><td><code id="prune.rpart_+3A_cp">cp</code></td>
<td>

<p>Complexity parameter to which the <code>rpart</code> object will be trimmed.
</p>
</td></tr>
<tr><td><code id="prune.rpart_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new <code>rpart</code> object that is trimmed to the value <code>cp</code>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
zp &lt;- prune(z.auto, cp = 0.1)
plot(zp) #plot smaller rpart object
</code></pre>

<hr>
<h2 id='residuals.rpart'>
Residuals From a Fitted Rpart Object 
</h2><span id='topic+residuals.rpart'></span>

<h3>Description</h3>

<p>Method for <code>residuals</code> for an <code>rpart</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
residuals(object, type = c("usual", "pearson", "deviance"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residuals.rpart_+3A_object">object</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.
</p>
</td></tr>
<tr><td><code id="residuals.rpart_+3A_type">type</code></td>
<td>

<p>Indicates the type of residual desired.
</p>
<p>For regression or <code>anova</code> trees all three residual
definitions reduce to <code>y - fitted</code>.  This is the residual returned for
<code>user</code> method trees as well.
</p>
<p>For classification trees the <code>usual</code> residuals
are the misclassification losses L(actual, predicted) where L is the
loss matrix.  With default losses this residual is
0/1 for correct/incorrect classification.
The <code>pearson</code> residual is 
(1-fitted)/sqrt(fitted(1-fitted)) and the <code>deviance</code> residual is 
sqrt(minus twice logarithm of fitted).
</p>
<p>For <code>poisson</code> and <code>exp</code>
(or survival) trees, the <code>usual</code> residual
is the observed - expected number of events.
The <code>pearson</code> and <code>deviance</code> residuals are as defined in
McCullagh and Nelder.
</p>
</td></tr>
<tr><td><code id="residuals.rpart_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of residuals of type <code>type</code> from a fitted <code>rpart</code> object. 
</p>


<h3>References</h3>

<p>McCullagh P. and Nelder, J. A. (1989)
<em>Generalized Linear Models</em>.
London: Chapman and Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(skips ~ Opening + Solder + Mask + PadType + Panel,
             data = solder.balance, method = "anova")
summary(residuals(fit))
plot(predict(fit),residuals(fit))
</code></pre>

<hr>
<h2 id='rpart'>
Recursive Partitioning and Regression Trees
</h2><span id='topic+rpart'></span>

<h3>Description</h3>

<p>Fit a <code>rpart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart(formula, data, weights, subset, na.action = na.rpart, method,
      model = FALSE, x = FALSE, y = TRUE, parms, control, cost, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rpart_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response but no interaction
terms.  If this is a data frame, it is taken as the model frame
(see <code><a href="stats.html#topic+model.frame">model.frame</a>).</code>
</p>
</td></tr>
<tr><td><code id="rpart_+3A_data">data</code></td>
<td>
<p>an optional data frame in which to interpret the variables
named in the formula.</p>
</td></tr> 
<tr><td><code id="rpart_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="rpart_+3A_subset">subset</code></td>
<td>
<p>optional expression saying that only a subset of the
rows of the data should be used in the fit.</p>
</td></tr>
<tr><td><code id="rpart_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
<tr><td><code id="rpart_+3A_method">method</code></td>
<td>
<p>one of <code>"anova"</code>, <code>"poisson"</code>, <code>"class"</code>
or <code>"exp"</code>.  If <code>method</code> is missing then the routine tries
to make an intelligent guess.
If <code>y</code> is a survival object, then <code>method = "exp"</code> is assumed,
if <code>y</code> has 2 columns then <code>method = "poisson"</code> is assumed,
if <code>y</code> is a factor then <code>method = "class"</code> is assumed,
otherwise <code>method = "anova"</code> is assumed.
It is wisest to specify the method directly, especially as more
criteria may added to the function in future.
</p>
<p>Alternatively, <code>method</code> can be a list of functions named
<code>init</code>, <code>split</code> and <code>eval</code>.  Examples are given in
the file &lsquo;<span class="file">tests/usersplits.R</span>&rsquo; in the sources, and in the
vignettes &lsquo;User Written Split Functions&rsquo;.</p>
</td></tr>
<tr><td><code id="rpart_+3A_model">model</code></td>
<td>
<p>if logical: keep a copy of the model frame in the result?
If the input value for <code>model</code> is a model frame (likely from an
earlier call to the <code>rpart</code> function), then this frame is used
rather than constructing new data.</p>
</td></tr>
<tr><td><code id="rpart_+3A_x">x</code></td>
<td>
<p>keep a copy of the <code>x</code> matrix in the result.</p>
</td></tr>
<tr><td><code id="rpart_+3A_y">y</code></td>
<td>
<p>keep a copy of the dependent variable in the result.  If
missing and <code>model</code> is supplied this defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rpart_+3A_parms">parms</code></td>
<td>
<p>optional parameters for the splitting function.<br />
Anova splitting has no parameters.<br />
Poisson splitting has a single parameter, the coefficient of variation of
the prior distribution on the rates.  The default value is 1.<br />
Exponential splitting has the same parameter as Poisson.<br />
For classification splitting, the list can contain any of:
the vector of prior probabilities (component <code>prior</code>), the loss matrix
(component <code>loss</code>) or the splitting index (component
<code>split</code>).  The priors must be positive and sum to 1.  The loss
matrix must have zeros on the diagonal and positive off-diagonal
elements.  The splitting index can be <code>gini</code> or
<code>information</code>.  The default priors are proportional to the data
counts, the losses default to 1, and the split defaults to
<code>gini</code>.</p>
</td></tr>
<tr><td><code id="rpart_+3A_control">control</code></td>
<td>
<p>a list of options that control details of the
<code>rpart</code> algorithm.  See <code><a href="#topic+rpart.control">rpart.control</a></code>.</p>
</td></tr>
<tr><td><code id="rpart_+3A_cost">cost</code></td>
<td>
<p>a vector of non-negative costs, one for each variable in
the model. Defaults to one for all variables.  These are scalings to
be applied when considering splits, so the improvement on splitting
on a variable is divided by its cost in deciding which split to
choose.</p>
</td></tr>
<tr><td><code id="rpart_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>rpart</code>.  They are checked against the
list of valid arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This differs from the <code>tree</code> function in S mainly in its handling
of surrogate variables.  In most details it follows Breiman
<em>et. al</em> (1984) quite closely.  <span class="rlang"><b>R</b></span> package <span class="pkg">tree</span> provides a
re-implementation of <code>tree</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>rpart</code>.  See <code><a href="#topic+rpart.object">rpart.object</a></code>.
</p>


<h3>References</h3>

<p>Breiman L., Friedman J. H., Olshen R. A., and Stone, C. J. (1984)
<em>Classification and Regression Trees.</em>
Wadsworth.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart.control">rpart.control</a></code>, <code><a href="#topic+rpart.object">rpart.object</a></code>,
<code><a href="#topic+summary.rpart">summary.rpart</a></code>, <code><a href="#topic+print.rpart">print.rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis)
fit2 &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis,
              parms = list(prior = c(.65,.35), split = "information"))
fit3 &lt;- rpart(Kyphosis ~ Age + Number + Start, data = kyphosis,
              control = rpart.control(cp = 0.05))
par(mfrow = c(1,2), xpd = NA) # otherwise on some devices the text is clipped
plot(fit)
text(fit, use.n = TRUE)
plot(fit2)
text(fit2, use.n = TRUE)
</code></pre>

<hr>
<h2 id='rpart-internal'>
Internal Functions 
</h2><span id='topic+pred.rpart'></span><span id='topic+rpart.matrix'></span><span id='topic+rpart.class'></span><span id='topic+rpart.anova'></span><span id='topic+rpart.poisson'></span><span id='topic+rpartco'></span>

<h3>Description</h3>

<p>Internal functions, only used by packages <span class="pkg">rpart</span> and <span class="pkg">ipred</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred.rpart(fit, x)
rpart.anova(y, offset, parms, wt)
rpart.class(y, offset, parms, wt)
rpart.matrix(frame)
rpart.poisson(y, offset, parms, wt)
rpartco(tree, parms)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rpart-internal_+3A_fit">fit</code></td>
<td>
<p>a tree fitted by <code>rpart</code>.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_x">x</code></td>
<td>
<p>a matrix of predictors.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_y">y</code></td>
<td>
<p>the responses.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_offset">offset</code></td>
<td>
<p>an offset, or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_parms">parms</code></td>
<td>
<p>a list of parameters, usually empty.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_wt">wt</code></td>
<td>
<p>case weights.</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_frame">frame</code></td>
<td>
<p>model frame (from call to <code>rpart</code>)</p>
</td></tr>
<tr><td><code id="rpart-internal_+3A_tree">tree</code></td>
<td>
<p>a tree fitted by <code>rpart</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>rpartco</code> the x,y plotting coordinates of the nodes.
</p>
<p><code>rpart.anova</code>, <code>rpart.class</code> and
<code>rpart.poisson</code> return a list with components
</p>
<table>
<tr><td><code>y</code></td>
<td>
<p>(adjusting for <code>offset</code> if necessary),</p>
</td></tr>
<tr><td><code>parms</code></td>
<td>
<p>as input,</p>
</td></tr>
<tr><td><code>numresp</code></td>
<td>
<p>the number of responses,</p>
</td></tr>
<tr><td><code>summary</code></td>
<td>
<p>a function to be invoked by <code><a href="#topic+summary.rpart">summary.rpart</a></code>,</p>
</td></tr>
<tr><td><code>text</code></td>
<td>
<p>a function to be invoked by <code><a href="#topic+text.rpart">text.rpart</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='rpart.control'>
Control for Rpart Fits
</h2><span id='topic+rpart.control'></span>

<h3>Description</h3>

<p>Various parameters that control aspects of the <code>rpart</code> fit. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart.control(minsplit = 20, minbucket = round(minsplit/3), cp = 0.01, 
              maxcompete = 4, maxsurrogate = 5, usesurrogate = 2, xval = 10,
              surrogatestyle = 0, maxdepth = 30, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rpart.control_+3A_minsplit">minsplit</code></td>
<td>

<p>the minimum number of observations that must exist in a node in order for 
a split to be attempted. 
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_minbucket">minbucket</code></td>
<td>

<p>the minimum number of observations in any terminal <code>&lt;leaf&gt;</code> node.
If only one of <code>minbucket</code> or <code>minsplit</code> is specified,
the code either sets <code>minsplit</code> to <code>minbucket*3</code>
or <code>minbucket</code> to <code>minsplit/3</code>, as appropriate.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_cp">cp</code></td>
<td>

<p>complexity parameter.  Any split that does not decrease the overall
lack of fit by a factor of <code>cp</code> is not attempted.  For instance,
with <code>anova</code> splitting, this means that the overall R-squared must
increase by <code>cp</code> at each step. The main role of this parameter
is to save computing time by pruning off splits that are obviously
not worthwhile. Essentially,the user informs the program that any
split which does not improve the fit by <code>cp</code> will likely be
pruned off by cross-validation, and that hence the program need
not pursue it.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_maxcompete">maxcompete</code></td>
<td>

<p>the number of competitor splits retained in the output.  It is useful to
know not just which split was chosen, but which variable came in second,
third, etc.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_maxsurrogate">maxsurrogate</code></td>
<td>

<p>the number of surrogate splits retained in the output.  If this is set to
zero the compute time will be reduced, since approximately half of the
computational time (other than setup) is used in the search for surrogate
splits.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_usesurrogate">usesurrogate</code></td>
<td>

<p>how to use surrogates in the splitting process.  <code>0</code> means
display only; an observation with a missing value for the primary
split rule is not sent further down the tree.  <code>1</code> means use
surrogates, in order, to split subjects missing the primary variable;
if all surrogates are missing the observation is not split.  For value
<code>2</code> ,if all surrogates are missing, then send the observation in
the majority direction.  A value of <code>0</code> corresponds to the action
of <code>tree</code>, and <code>2</code> to the recommendations of Breiman
<em>et.al</em> (1984).
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_xval">xval</code></td>
<td>

<p>number of cross-validations.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_surrogatestyle">surrogatestyle</code></td>
<td>

<p>controls the selection of a best surrogate.
If set to <code>0</code> (default) the program uses the total number of correct
classification for a potential surrogate variable,
if set to <code>1</code> it uses the percent correct, calculated over the
non-missing values of the surrogate.
The first option more severely penalizes covariates with a large number of
missing values.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_maxdepth">maxdepth</code></td>
<td>

<p>Set the maximum depth of any node of the final tree, with the root
node counted as depth 0.  Values greater than  30 <code>rpart</code> will
give nonsense results on 32-bit machines.
</p>
</td></tr>
<tr><td><code id="rpart.control_+3A_...">...</code></td>
<td>

<p>mop up other arguments.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the options.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code>
</p>

<hr>
<h2 id='rpart.exp'>Initialization function for exponential fitting</h2><span id='topic+rpart.exp'></span>

<h3>Description</h3>

<p>This function does the initialization step for rpart, when the
response is a survival object.  It rescales the data so as to have an
exponential baseline hazard and then uses Poisson methods.  This
function would rarely if ever be called directly by a user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart.exp(y, offset, parms, wt)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rpart.exp_+3A_y">y</code></td>
<td>
<p>the response, which will be of class <code>Surv</code></p>
</td></tr>
<tr><td><code id="rpart.exp_+3A_offset">offset</code></td>
<td>
<p>optional offset</p>
</td></tr>
<tr><td><code id="rpart.exp_+3A_parms">parms</code></td>
<td>
<p>parameters controlling the fit.
This is a list with components <code>shrink</code> and <code>method</code>.
The first is the prior for the coefficient of variation of the
predictions.  The second is either <code>"deviance"</code>
or <code>"sqrt"</code> and is the measure used for cross-validation.
If values are missing the defaults are used, which are
<code>"deviance"</code> for the method, and a shrinkage of 1.0 for the
deviance method and 0 for the square root.</p>
</td></tr>
<tr><td><code id="rpart.exp_+3A_wt">wt</code></td>
<td>
<p>case weights, if present</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with the necessary initialization components</p>


<h3>Author(s)</h3>

<p>Terry Therneau</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code></p>

<hr>
<h2 id='rpart.object'>
Recursive Partitioning and Regression Trees Object 
</h2><span id='topic+rpart.object'></span>

<h3>Description</h3>

<p>These are objects representing fitted <code>rpart</code> trees. 
</p>


<h3>Value</h3>

<table>
<tr><td><code>frame</code></td>
<td>

<p>data frame with one row for each node in the tree.
The <code>row.names</code> of <code>frame</code> contain the (unique) node numbers that
follow a binary ordering indexed by node depth.
Columns of <code>frame</code> include
<code>var</code>, a factor giving the names of the variables used in the
split at each node (leaf nodes are denoted by the level <code>"&lt;leaf&gt;"</code>), 
<code>n</code>, the number of observations reaching the node,
<code>wt</code>, the sum of case weights for observations reaching the node,
<code>dev</code>, the deviance of the node,
<code>yval</code>, the fitted value of the response at the node,
and <code>splits</code>, a two column matrix of left and right split labels
for each node.  Also included in the frame are <code>complexity</code>, the
complexity parameter at which this split will collapse, <code>ncompete</code>,
the number of competitor splits recorded, and <code>nsurrogate</code>, the
number of surrogate splits recorded.
</p>
<p>Extra response information which may be present is in <code>yval2</code>,
which contains the number of events at the node (poisson tree), or a
matrix containing the fitted class, the class counts for each node,
the class probabilities and the &lsquo;node probability&rsquo; (classification trees).
</p>
</td></tr>
<tr><td><code>where</code></td>
<td>

<p>an integer vector of the same length as the number of observations in the
root node, containing the row number of <code>frame</code> corresponding to
the leaf node that each observation falls into. 
</p>
</td></tr>
<tr><td><code>call</code></td>
<td>

<p>an image of the call that produced the object, but with the arguments 
all named and with the actual formula included as the formula argument. 
To re-evaluate the call, say <code>update(tree)</code>.
</p>
</td></tr>
<tr><td><code>terms</code></td>
<td>

<p>an object of class <code>c("terms", "formula")</code> (see
<code><a href="stats.html#topic+terms.object">terms.object</a></code>) summarizing the formula.  Used by various
methods, but typically not of direct relevance to users.
</p>
</td></tr>
<tr><td><code>splits</code></td>
<td>

<p>a numeric matrix describing the splits: only present if there are any.
The row label is the name of
the split variable, and columns are <code>count</code>, the number of
observations (which are not missing and are of positive weight) sent
left or right by the split (for competitor splits this is the number
that would have been sent left or right had this split been used, for
surrogate splits it is the number missing the primary split variable
which were decided using this surrogate), <code>ncat</code>, the number of
categories or levels for the variable (<code>+/-1</code> for a continuous
variable), <code>improve</code>, which is the improvement in deviance given
by this split, or, for surrogates, the concordance of the surrogate
with the primary, and <code>index</code>, the numeric split point.  The last
column <code>adj</code> gives the adjusted concordance for surrogate splits.
For a factor, the <code>index</code> column contains the row number of the
csplit matrix.  For a continuous variable, the sign of <code>ncat</code>
determines whether the subset <code>x &lt; cutpoint</code> or <code>x &gt;
  cutpoint</code> is sent to the left.
</p>
</td></tr>
<tr><td><code>csplit</code></td>
<td>

<p>an integer matrix.  (Only present only if at least one of the split
variables is a factor or ordered factor.)  There is a row for
each such split, and the number of columns is the largest number of
levels in the factors.  Which row is given by the <code>index</code> column
of the <code>splits</code> matrix.  The columns record <code>1</code> if that
level of the factor goes to the left, <code>3</code> if it goes to the
right, and <code>2</code> if that level is not present at this node
of the tree (or not defined for the factor).
</p>
</td></tr>
<tr><td><code>method</code></td>
<td>

<p>character string: the method used to grow the tree.   One of
<code>"class"</code>, <code>"exp"</code>, <code>"poisson"</code>, <code>"anova"</code> or
<code>"user"</code> (if splitting functions were supplied).
</p>
</td></tr>
<tr><td><code>cptable</code></td>
<td>

<p>a matrix of information on the optimal prunings based on a
complexity parameter.
</p>
</td></tr>
<tr><td><code>variable.importance</code></td>
<td>

<p>a named numeric vector giving the importance of each variable.  (Only
present if there are any splits.)  When printed by
<code><a href="#topic+summary.rpart">summary.rpart</a></code> these are rescaled to add to 100.
</p>
</td></tr>
<tr><td><code>numresp</code></td>
<td>

<p>integer number of responses; the number of levels for a factor response.
</p>
</td></tr>
<tr><td><code>parms</code>, <code>control</code></td>
<td>

<p>a record of the arguments supplied, which defaults filled in.
</p>
</td></tr>
<tr><td><code>functions</code></td>
<td>

<p>the <code>summary</code>, <code>print</code> and <code>text</code> functions for method used.
</p>
</td></tr>
<tr><td><code>ordered</code></td>
<td>

<p>a named logical vector recording for each variable if it was an
ordered factor.
</p>
</td></tr>
<tr><td><code>na.action</code></td>
<td>

<p>(where relevant) information returned by <code><a href="stats.html#topic+model.frame">model.frame</a></code> on
the special handling of <code>NA</code>s derived from the <code>na.action</code>
argument.
</p>
</td></tr>
</table>
<p>There may be <a href="base.html#topic+attributes">attributes</a> <code>"xlevels"</code> and <code>"levels"</code>
recording the levels of any factor splitting variables and of a factor
response respectively.
</p>
<p>Optional components include the model frame (<code>model</code>), the matrix
of predictors (<code>x</code>) and the response variable (<code>y</code>) used to
construct the <code>rpart</code> object.
</p>


<h3>Structure</h3>

<p>The following components must be included in a legitimate <code>rpart</code>
object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code>.
</p>

<hr>
<h2 id='rsq.rpart'>
Plots the Approximate R-Square for the Different Splits 
</h2><span id='topic+rsq.rpart'></span>

<h3>Description</h3>

<p>Produces 2 plots.  The first plots the r-square (apparent and
apparent - from cross-validation) versus the number of splits.  
The second plots the Relative Error(cross-validation) +/- 1-SE from
cross-validation versus the number of splits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rsq.rpart(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rsq.rpart_+3A_x">x</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result
of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr></table>


<h3>Side Effects</h3>

<p>Two plots are produced.
</p>


<h3>Note</h3>

<p>The labels are only appropriate for the <code>"anova"</code> method.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
rsq.rpart(z.auto)
</code></pre>

<hr>
<h2 id='snip.rpart'>
Snip Subtrees of an Rpart Object 
</h2><span id='topic+snip.rpart'></span>

<h3>Description</h3>

<p>Creates a &quot;snipped&quot; rpart object, containing the nodes that remain
after selected subtrees have been snipped off.  The user can snip
nodes using the toss argument, or interactively by clicking the mouse
button on specified nodes within the graphics window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snip.rpart(x, toss)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="snip.rpart_+3A_x">x</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result
of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr>
<tr><td><code id="snip.rpart_+3A_toss">toss</code></td>
<td>

<p>an integer vector containing indices (node numbers) of all subtrees to
be snipped off.  If missing, user selects branches to snip off as
described below.
</p>
</td></tr></table>


<h3>Details</h3>

<p>A dendrogram of <code>rpart</code> is expected to be visible on the graphics
device, and a graphics input device (e.g., a mouse) is required.  Clicking
(the selection button) on a node displays the node number, sample
size, response y-value, and Error (dev). Clicking a second time on the
same node snips that subtree off and visually erases the subtree.
This process may be repeated an number of times.  Warnings result from
selecting the root or leaf nodes.  Clicking the exit button will stop
the snipping process and return the resulting <code>rpart</code> object.
</p>
<p>See the documentation for the specific graphics device for details on
graphical input techniques.
</p>


<h3>Value</h3>

<p>A <code>rpart</code> object containing the nodes that remain after specified or
selected subtrees have been snipped off.  
</p>


<h3>Warning</h3>

<p>Visually erasing the plot is done by over-plotting with the background
colour.  This will do nothing if the background is transparent
(often true for screen devices).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.rpart">plot.rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## dataset not in R
## Not run: 
z.survey &lt;- rpart(market.survey) # grow the rpart object
plot(z.survey) # plot the tree
z.survey2 &lt;- snip.rpart(z.survey, toss = 2) # trim subtree at node 2
plot(z.survey2) # plot new tree

# can also interactively select the node using the mouse in the
# graphics window

## End(Not run)</code></pre>

<hr>
<h2 id='solder.balance'>Soldering of Components on Printed-Circuit Boards</h2><span id='topic+solder.balance'></span><span id='topic+solder'></span>

<h3>Description</h3>

<p>The <code>solder.balance</code> data frame has 720 rows and 6 columns, representing
a balanced subset of a designed experiment varying 5 factors on the
soldering of components on printed-circuit boards.
</p>
<p>The <code>solder</code> data frame is the full version of the data with 900
rows.  It is located in both the rpart and the survival packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solder
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>

<dl>
<dt><code>Opening</code></dt><dd>
<p>a factor with levels
&lsquo;<span class="samp">&#8288;L&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;M&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;S&#8288;</span>&rsquo;
indicating the amount of clearance around the mounting pad.
</p>
</dd>
<dt><code>Solder</code></dt><dd>
<p>a factor with levels
&lsquo;<span class="samp">&#8288;Thick&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;Thin&#8288;</span>&rsquo;
giving the thickness of the solder used.
</p>
</dd>
<dt><code>Mask</code></dt><dd>
<p>a factor with levels
&lsquo;<span class="samp">&#8288;A1.5&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;A3&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;B3&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;B6&#8288;</span>&rsquo;
indicating the type and thickness of mask used.
</p>
</dd>
<dt><code>PadType</code></dt><dd>
<p>a factor with levels &lsquo;<span class="samp">&#8288;D4&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;D6&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;D7&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;L4&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;L6&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;L7&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;L8&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;L9&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;W4&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;W9&#8288;</span>&rsquo;
giving the size and geometry of the mounting pad.
</p>
</dd>
<dt><code>Panel</code></dt><dd>
<p><code>1:3</code> indicating the panel on a board being tested.
</p>
</dd>
<dt><code>skips</code></dt><dd>
<p>a numeric vector giving the number of visible solder skips.
</p>
</dd>
</dl>


<h3>Source</h3>

<p>John M. Chambers and Trevor J. Hastie eds. (1992)
<em>Statistical Models in S</em>, Wadsworth and Brooks/Cole,
Pacific Grove, CA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(skips ~ Opening + Solder + Mask + PadType + Panel,
             data = solder.balance, method = "anova")
summary(residuals(fit))
plot(predict(fit), residuals(fit))
</code></pre>

<hr>
<h2 id='stagec'>Stage C Prostate Cancer</h2><span id='topic+stagec'></span>

<h3>Description</h3>

<p>A set of 146 patients with stage C prostate cancer, from a
study exploring the prognostic value of flow cytometry.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(stagec)</code></pre>


<h3>Format</h3>

<p>A data frame with 146 observations on the following 8 variables.
</p>

<dl>
<dt><code>pgtime</code></dt><dd><p>Time to progression or last follow-up (years)</p>
</dd>
<dt><code>pgstat</code></dt><dd><p>1 = progression observed, 0 = censored</p>
</dd>
<dt><code>age</code></dt><dd><p>age in years</p>
</dd>
<dt><code>eet</code></dt><dd><p>early endocrine therapy, 1 = no, 2 = yes</p>
</dd>
<dt><code>g2</code></dt><dd><p>percent of cells in G2 phase, as found by flow cytometry</p>
</dd>
<dt><code>grade</code></dt><dd><p>grade of the tumor, Farrow system</p>
</dd>
<dt><code>gleason</code></dt><dd><p>grade of the tumor, Gleason system</p>
</dd>
<dt><code>ploidy</code></dt><dd><p>the ploidy status of the tumor, from flow
cytometry. Values are &lsquo;<span class="samp">&#8288;diploid&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;tetraploid&#8288;</span>&rsquo;,
and &lsquo;<span class="samp">&#8288;aneuploid&#8288;</span>&rsquo;</p>
</dd>
</dl>



<h3>Details</h3>

<p>A tumor is called diploid (normal complement of dividing cells) if the
fraction of cells in G2 phase was determined to be 13% or less.
Aneuploid cells have a measurable fraction with a chromosome count that
is neither 24 nor 48, for these the G2 percent is difficult or
impossible to measure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(survival)
rpart(Surv(pgtime, pgstat) ~ ., stagec)
</code></pre>

<hr>
<h2 id='summary.rpart'>
Summarize a Fitted Rpart Object 
</h2><span id='topic+summary.rpart'></span>

<h3>Description</h3>

<p>Returns a detailed listing of a fitted <code>rpart</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
summary(object, cp = 0, digits = getOption("digits"), file, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.rpart_+3A_object">object</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result
of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr>
<tr><td><code id="summary.rpart_+3A_digits">digits</code></td>
<td>

<p>Number of significant digits to be used in the result.
</p>
</td></tr>
<tr><td><code id="summary.rpart_+3A_cp">cp</code></td>
<td>

<p>trim nodes with a complexity of less than <code>cp</code> from the listing.
</p>
</td></tr>
<tr><td><code id="summary.rpart_+3A_file">file</code></td>
<td>

<p>write the output to a given file name. (Full listings of a tree are
often quite long).
</p>
</td></tr>
<tr><td><code id="summary.rpart_+3A_...">...</code></td>
<td>

<p>arguments to be passed to or from other methods.
</p>
</td></tr></table>


<h3>Details</h3>

<p>This function is a method for the generic function summary for class
<code>"rpart"</code>.  It can be invoked by calling <code>summary</code>
for an object of the appropriate class, or directly by calling
<code>summary.rpart</code> regardless of the class of the object.
</p>
<p>It prints the call, the table shown by <code><a href="#topic+printcp">printcp</a></code>, the
variable importance (summing to 100) and details for each node (the
details depending on the type of tree).
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+summary">summary</a></code>, <code><a href="#topic+rpart.object">rpart.object</a></code>, <code><a href="#topic+printcp">printcp</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## a regression tree
z.auto &lt;- rpart(Mileage ~ Weight, car.test.frame)
summary(z.auto)

## a classification tree with multiple variables and surrogate splits.
summary(rpart(Kyphosis ~ Age + Number + Start, data = kyphosis))
</code></pre>

<hr>
<h2 id='text.rpart'>
Place Text on a Dendrogram Plot
</h2><span id='topic+text.rpart'></span>

<h3>Description</h3>

<p>Labels the current plot of the tree dendrogram with text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rpart'
text(x, splits = TRUE, label, FUN = text, all = FALSE,
     pretty = NULL, digits = getOption("digits") - 3, use.n = FALSE,
     fancy = FALSE, fwidth = 0.8, fheight = 0.8, bg = par("bg"),
     minlength = 1L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="text.rpart_+3A_x">x</code></td>
<td>

<p>fitted model object of class <code>"rpart"</code>.  This is assumed to be the result
of some function that produces an object with the same named
components as that returned by the <code>rpart</code> function.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_splits">splits</code></td>
<td>

<p>logical flag.  If <code>TRUE</code> (default), then the splits in the tree are
labeled with the criterion for the split.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_label">label</code></td>
<td>

<p>For compatibility with <code>rpart2</code>, ignored in this version (with
a warning).
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_fun">FUN</code></td>
<td>

<p>the name of a labeling function, e.g. <code>text</code>.  
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_all">all</code></td>
<td>

<p>Logical.  If <code>TRUE</code>, all nodes are labeled, otherwise just
terminal nodes.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_minlength">minlength</code></td>
<td>

<p>the length to use for factor labels.  A value of 1 causes them to be
printed as &lsquo;a&rsquo;, &lsquo;b&rsquo;, .....
Larger values use abbreviations of the label names.
See the <code>labels.rpart</code> function for details.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_pretty">pretty</code></td>
<td>

<p>an alternative to the <code>minlength</code> argument, see
<code><a href="#topic+labels.rpart">labels.rpart</a></code>.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_digits">digits</code></td>
<td>

<p>number of significant digits to include in numerical labels.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_use.n">use.n</code></td>
<td>

<p>Logical.  If <code>TRUE</code>, adds to label 
<code style="white-space: pre;">&#8288;(#events level1/ #events level2/&#8288;</code> etc. for <code>class</code>,
<code>n</code> for <code>anova</code>, and <code style="white-space: pre;">&#8288;#events/n&#8288;</code> for <code>poisson</code>
and <code>exp</code>).
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_fancy">fancy</code></td>
<td>

<p>Logical.  If <code>TRUE</code>, nodes are represented by ellipses (interior nodes)
and rectangles (leaves) and labeled by <code>yval</code>.  The edges connecting the
nodes are labeled by left and right splits.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_fwidth">fwidth</code></td>
<td>

<p>Relates to option <code>fancy</code> and the width of the ellipses and rectangles.
If <code>fwidth &lt; 1</code> then it is a scaling factor (default = 0.8).  If 
<code>fwidth &gt; 1</code> then it represents the number of character widths 
(for current graphical device) to use.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_fheight">fheight</code></td>
<td>

<p>Relates to option <code>fancy</code> and the height of the ellipses and rectangles.
If <code>fheight &lt;1</code> then it is a scaling factor (default = 0.8).  If
<code>fheight &gt; 1</code> then it represents the number of character heights 
(for current graphical device) to use.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_bg">bg</code></td>
<td>

<p>The color used to paint the background to annotations if <code>fancy = TRUE</code>.
</p>
</td></tr>
<tr><td><code id="text.rpart_+3A_...">...</code></td>
<td>

<p>Graphical parameters may also be supplied as arguments to this
function (see <code>par</code>).  As labels often extend outside the plot
region it can be helpful to specify <code>xpd = TRUE</code>.
</p>
</td></tr>
</table>


<h3>Side Effects</h3>

<p>the current plot of a tree dendrogram is labeled.
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+text">text</a></code>, <code><a href="#topic+plot.rpart">plot.rpart</a></code>, <code><a href="#topic+rpart">rpart</a></code>,
<code><a href="#topic+labels.rpart">labels.rpart</a></code>, <code><a href="base.html#topic+abbreviate">abbreviate</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>freen.tr &lt;- rpart(y ~ ., freeny)
par(xpd = TRUE)
plot(freen.tr)
text(freen.tr, use.n = TRUE, all = TRUE)
</code></pre>

<hr>
<h2 id='xpred.rpart'>
Return Cross-Validated Predictions 
</h2><span id='topic+xpred.rpart'></span>

<h3>Description</h3>

<p>Gives the predicted values for an <code>rpart</code> fit, under
cross validation, for a set of complexity parameter values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpred.rpart(fit, xval = 10, cp, return.all = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xpred.rpart_+3A_fit">fit</code></td>
<td>

<p>a object of class <code>"rpart"</code>. 
</p>
</td></tr>
<tr><td><code id="xpred.rpart_+3A_xval">xval</code></td>
<td>

<p>number of cross-validation groups.  This may also be an explicit list of
integers that define the cross-validation groups.
</p>
</td></tr>
<tr><td><code id="xpred.rpart_+3A_cp">cp</code></td>
<td>

<p>the desired list of complexity values.  By default it is taken from the
<code>cptable</code> component of the fit.
</p>
</td></tr>
<tr><td><code id="xpred.rpart_+3A_return.all">return.all</code></td>
<td>

<p>if FALSE return only the first element of the prediction</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Complexity penalties are actually ranges, not values.  If the
<code>cp</code> values found in the table were <code class="reqn">.36</code>, <code class="reqn">.28</code>,
and <code class="reqn">.13</code>, for instance, this means that the first row of the
table holds for all complexity penalties in the range <code class="reqn">[.36, 1]</code>,
the second row for <code>cp</code> in the range <code class="reqn">[.28, .36)</code> and
the third row for <code class="reqn">[.13,.28)</code>.  By default, the geometric mean
of each interval is used for cross validation.
</p>


<h3>Value</h3>

<p>A matrix with one row for each observation and one column for each complexity
value.  If <code>return.all</code> is TRUE and the prediction for each node
is a vector, then the result will be an array containing all of the
predictions.  When the response is categorical, for instance, the
result contains the predicted class followed by the class
probabilities of the selected terminal node;
<code>result[1,,]</code> will be the matrix of predicted classes,
<code>result[2,,]</code> the matrix of class 1 probabilities, etc.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart">rpart</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fit &lt;- rpart(Mileage ~ Weight, car.test.frame)
xmat &lt;- xpred.rpart(fit)
xerr &lt;- (xmat - car.test.frame$Mileage)^2
apply(xerr, 2, sum)   # cross-validated error estimate

# approx same result as rel. error from printcp(fit)
apply(xerr, 2, sum)/var(car.test.frame$Mileage) 
printcp(fit)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
