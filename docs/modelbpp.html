<!DOCTYPE html><html><head><title>Help for package modelbpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {modelbpp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#modelbpp-package'><p>modelbpp: Model BIC Posterior Probability</p></a></li>
<li><a href='#c.partables'><p>Manipulate Parameter Tables</p></a></li>
<li><a href='#dat_cfa'><p>A Sample Dataset Based On a</p>
Confirmatory Factor Analysis Model
(For Testing)</a></li>
<li><a href='#dat_path_model'><p>A Sample Dataset Based on a</p>
Path Model (For Testing)</a></li>
<li><a href='#dat_path_model_p06'><p>A Sample Dataset Based On a</p>
Complex Path Model (For Testing)</a></li>
<li><a href='#dat_sem'><p>A Sample Dataset Based On a</p>
Structural Model (For Testing)</a></li>
<li><a href='#dat_serial_4'><p>A Sample Dataset Based On a</p>
Serial Mediation Model (For Testing)</a></li>
<li><a href='#dat_serial_4_weak'><p>A Sample Dataset Based On a</p>
Serial Mediation Model
With Weak Paths (For Testing)</a></li>
<li><a href='#fit_many'><p>Fit a List of Models</p></a></li>
<li><a href='#get_add'><p>Models That Are Less Restricted</p></a></li>
<li><a href='#get_drop'><p>Models That Are More Restricted</p></a></li>
<li><a href='#min_prior'><p>Minimum Prior</p></a></li>
<li><a href='#model_graph'><p>Generate a Graph of Models</p></a></li>
<li><a href='#model_set'><p>BIC Posterior Probabilities</p>
of Neighboring Models</a></li>
<li><a href='#partables_helpers'><p>Helper Functions For <code>partables</code>-Class Objects</p></a></li>
<li><a href='#plot.model_graph'><p>Plot a Network of Models</p></a></li>
<li><a href='#print.model_set'><p>Print a <code>model_set</code>-Class Object</p></a></li>
<li><a href='#print.partables'><p>Print a <code>partables</code>-Class Object</p></a></li>
<li><a href='#print.sem_outs'><p>Print an <code>sem_outs</code>-Class Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Model BIC Posterior Probability</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Fits the neighboring models of a fitted
  structural equation model and assesses the model
  uncertainty of the fitted model based on BIC posterior
  probabilities, using the method presented in
  Wu, Cheung, and Leung (2020)
  &lt;<a href="https://doi.org/10.1080%2F00273171.2019.1574546">doi:10.1080/00273171.2019.1574546</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, tinytest</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>lavaan, parallel, pbapply, igraph</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://sfcheung.github.io/modelbpp/">https://sfcheung.github.io/modelbpp/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sfcheung/modelbpp/issues">https://github.com/sfcheung/modelbpp/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-20 13:42:52 UTC; sfcheung</td>
</tr>
<tr>
<td>Author:</td>
<td>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Huiping Wu [aut],
  Shing On Leung <a href="https://orcid.org/0000-0002-0962-339X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Ivan Jacob Agaloos Pesigan
    <a href="https://orcid.org/0000-0003-4818-8420"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shu Fai Cheung &lt;shufai.cheung@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-20 14:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='modelbpp-package'>modelbpp: Model BIC Posterior Probability</h2><span id='topic+modelbpp'></span><span id='topic+modelbpp-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Fits the neighboring models of a fitted structural equation model and assesses the model uncertainty of the fitted model based on BIC posterior probabilities, using the method presented in Wu, Cheung, and Leung (2020) <a href="https://doi.org/10.1080/00273171.2019.1574546">doi:10.1080/00273171.2019.1574546</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Shu Fai Cheung <a href="mailto:shufai.cheung@gmail.com">shufai.cheung@gmail.com</a> (<a href="https://orcid.org/0000-0002-9871-9448">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Huiping Wu
</p>
</li>
<li><p> Shing On Leung (<a href="https://orcid.org/0000-0002-0962-339X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Ivan Jacob Agaloos Pesigan <a href="mailto:r.jeksterslab@gmail.com">r.jeksterslab@gmail.com</a> (<a href="https://orcid.org/0000-0003-4818-8420">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://sfcheung.github.io/modelbpp/">https://sfcheung.github.io/modelbpp/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/sfcheung/modelbpp/issues">https://github.com/sfcheung/modelbpp/issues</a>
</p>
</li></ul>


<hr>
<h2 id='c.partables'>Manipulate Parameter Tables</h2><span id='topic+c.partables'></span><span id='topic+c.model_set'></span><span id='topic+partables_drop'></span><span id='topic+manipulate_partables'></span>

<h3>Description</h3>

<p>Functions to manipulate
a <code>partables</code>-class object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'partables'
c(...)

## S3 method for class 'model_set'
c(...)

partables_drop(x, model_names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c.partables_+3A_...">...</code></td>
<td>
<p>An arbitrary number of
objects. All invalid objects (see
details) will be discarded. If an
object is named and is not
<code>partables</code> object, its name will be
used.</p>
</td></tr>
<tr><td><code id="c.partables_+3A_x">x</code></td>
<td>
<p>A <code>partables</code>-class object.</p>
</td></tr>
<tr><td><code id="c.partables_+3A_model_names">model_names</code></td>
<td>
<p>A character vector
of the names of models in a
<code>partables</code>-class object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>partables</code>-class objects have
a <code>c()</code> method that can be used to
combine parameter tables.
Each object must be
</p>
<p>a. a <code>partables</code>-class object,
b. a <code>model_set</code>-class object,
c. a <code>lavaan</code>-class object, or
d. a parameter table of
the class <code>lavaan.data.frame()</code>,
usually generated by
<code><a href="lavaan.html#topic+lavParTable">lavaan::parameterTable()</a></code>.
Other objects will be discarded.
</p>
<p>Names will be used when combining
objects. If two objects have the same
names, then only the first one will be
retained. No warning message will be
issued. Users are encouraged to
explicitly name all objects carefully.
</p>
<p>Note that, to invoke this method,
the first object must be a
<code>partables</code> object.
</p>
<p>The <code>model_set</code> class also has a
<code>c</code>-method. It
will replace the first object by the stored
partables and then call the <code>c</code>-method of <code>partables</code> objects.
</p>
<p>The function <code><a href="#topic+partables_drop">partables_drop()</a></code> is
for dropping models from a
<code>partables</code>-class object.
</p>


<h3>Value</h3>

<p>A <code>partables</code>-class objects with
all the objects supplied combined
together. If an object is
a <code>lavaan</code>-class object, its
parameter table will be retrieved
by <code><a href="lavaan.html#topic+lavParTable">lavaan::parameterTable()</a></code>.
If an object is a <code>model_set</code>-class
object, the stored <code>partables</code>-class
object will be retrieved.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

moda &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"

fita &lt;- sem(moda, dat_path_model, fixed.x = TRUE)

outa &lt;- model_set(fita,
                  progress = FALSE,
                  parallel = FALSE)

modb &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x2
ab := a*b
"

fitb &lt;- sem(modb, dat_path_model, fixed.x = TRUE)

outb &lt;- model_set(fitb,
                  progress = FALSE,
                  parallel = FALSE)

mod2 &lt;-
"
x2 ~ 0*x3 + 0*x4
x1 ~ 0*x3
"
fit2 &lt;- sem(mod2, dat_path_model)

mod3 &lt;-
"
x2 ~ x3 + 0*x4
x1 ~ x3
"
fit3 &lt;- sem(mod3, dat_path_model)

out &lt;- c(outa$models, user2 = fit2, outb$models, user3 = fit3)
out

out2 &lt;- c(outa, user2 = fit2, outb$models, user3 = fit3)
out2

out3 &lt;- c(outa, user2 = fit2, outb, user3 = fit3)
out3

</code></pre>

<hr>
<h2 id='dat_cfa'>A Sample Dataset Based On a
Confirmatory Factor Analysis Model
(For Testing)</h2><span id='topic+dat_cfa'></span>

<h3>Description</h3>

<p>Generated from
a confirmatory factor analysis
model (n = 200).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_cfa
</code></pre>


<h3>Format</h3>

<p>A data frame with six variables:
</p>

<dl>
<dt>x1</dt><dd><p>Indicator</p>
</dd>
<dt>x2</dt><dd><p>Indicator</p>
</dd>
<dt>x3</dt><dd><p>Indicator</p>
</dd>
<dt>x4</dt><dd><p>Indicator</p>
</dd>
<dt>x5</dt><dd><p>Indicator</p>
</dd>
<dt>x6</dt><dd><p>Indicator</p>
</dd>
</dl>



<h3>Details</h3>

<p>The model used to generate
this dataset:
</p>
<div class="sourceCode"><pre>f1 =~ x1 + x2 + x3 + x5
f2 =~ x3 + x4 + x5 + x6
f1 ~~ f2
</pre></div>

<hr>
<h2 id='dat_path_model'>A Sample Dataset Based on a
Path Model (For Testing)</h2><span id='topic+dat_path_model'></span>

<h3>Description</h3>

<p>Generated from the
a path model (n = 100).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_path_model
</code></pre>


<h3>Format</h3>

<p>A data frame with four variables:
</p>

<dl>
<dt>x1</dt><dd><p>Predictor</p>
</dd>
<dt>x2</dt><dd><p>Predictor</p>
</dd>
<dt>x3</dt><dd><p>Mediator</p>
</dd>
<dt>x4</dt><dd><p>Outcome</p>
</dd>
</dl>



<h3>Details</h3>

<p>The model used to generate
this dataset:
</p>
<div class="sourceCode"><pre>x1 ~~ x2
x3 ~ x1 + x2
x4 ~ x3 + x1 + x2
</pre></div>

<hr>
<h2 id='dat_path_model_p06'>A Sample Dataset Based On a
Complex Path Model (For Testing)</h2><span id='topic+dat_path_model_p06'></span>

<h3>Description</h3>

<p>Generated from
a complex path model (n = 200).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_path_model_p06
</code></pre>


<h3>Format</h3>

<p>A data frame with six variables:
</p>

<dl>
<dt>x1</dt><dd><p>Predictor</p>
</dd>
<dt>x2</dt><dd><p>Predictor</p>
</dd>
<dt>x3</dt><dd><p>Predictor</p>
</dd>
<dt>y4</dt><dd><p>Mediator</p>
</dd>
<dt>y5</dt><dd><p>Mediator</p>
</dd>
<dt>y6</dt><dd><p>Outcome</p>
</dd>
</dl>



<h3>Details</h3>

<p>The model used to generate
this dataset:
</p>
<div class="sourceCode"><pre>y4 ~  x1 + x2 + x3
y5 ~  y4 + x1 + x2
y6 ~  y4 + y5 + x1 + x2 + x3
x1 ~~ x2 + x3
x2 ~~ x3
</pre></div>

<hr>
<h2 id='dat_sem'>A Sample Dataset Based On a
Structural Model (For Testing)</h2><span id='topic+dat_sem'></span>

<h3>Description</h3>

<p>Generated from
a structural model with
latent variables (n = 250).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_sem
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 250 rows and 16 columns.
</p>


<h3>Details</h3>

<p>The model to be fitted:
</p>
<div class="sourceCode"><pre>f1 =~ x1 + x2 + x3 + x4
f2 =~ x5 + x6 + x7 + x8
f3 =~ x9 + x10 + x11 + x12
f4 =~ x13 + x14 + x15 + x16
f3 ~ f1 + f2
f4 ~ f3
</pre></div>

<hr>
<h2 id='dat_serial_4'>A Sample Dataset Based On a
Serial Mediation Model (For Testing)</h2><span id='topic+dat_serial_4'></span>

<h3>Description</h3>

<p>Generated from
a serial mediation model (n = 100).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_serial_4
</code></pre>


<h3>Format</h3>

<p>A data frame with four variables:
</p>

<dl>
<dt>x</dt><dd><p>Predictor</p>
</dd>
<dt>m1</dt><dd><p>Mediator</p>
</dd>
<dt>m2</dt><dd><p>Mediator</p>
</dd>
<dt>y</dt><dd><p>Outcome</p>
</dd>
</dl>



<h3>Details</h3>

<p>The model used to generate
this dataset:
</p>
<div class="sourceCode"><pre>m1 ~ x
m2 ~ m1
y  ~ m2
</pre></div>

<hr>
<h2 id='dat_serial_4_weak'>A Sample Dataset Based On a
Serial Mediation Model
With Weak Paths (For Testing)</h2><span id='topic+dat_serial_4_weak'></span>

<h3>Description</h3>

<p>Generated from
a serial mediation model (n = 100).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_serial_4_weak
</code></pre>


<h3>Format</h3>

<p>A data frame with four variables:
</p>

<dl>
<dt>x</dt><dd><p>Predictor</p>
</dd>
<dt>m1</dt><dd><p>Mediator</p>
</dd>
<dt>m2</dt><dd><p>Mediator</p>
</dd>
<dt>y</dt><dd><p>Outcome</p>
</dd>
</dl>



<h3>Details</h3>

<p>The model to be fitted:
</p>
<div class="sourceCode"><pre>m1 ~ x
m2 ~ m1 + x
y  ~ m2 + m1 + x
</pre></div>

<hr>
<h2 id='fit_many'>Fit a List of Models</h2><span id='topic+fit_many'></span>

<h3>Description</h3>

<p>Fit a list of models
to a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_many(
  model_list,
  sem_out,
  original = NULL,
  parallel = FALSE,
  ncores = max(parallel::detectCores(logical = FALSE) - 1, 1),
  make_cluster_args = list(),
  progress = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_many_+3A_model_list">model_list</code></td>
<td>
<p>A list of parameter
tables to be used by
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> or <code><a href="stats.html#topic+update">update()</a></code>.
Usually generated by <code><a href="#topic+get_add">get_add()</a></code> or
<code><a href="#topic+get_drop">get_drop()</a></code>.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_sem_out">sem_out</code></td>
<td>
<p>The output from an
structural equation modeling
function. It currently supports
<a href="lavaan.html#topic+lavaan-class">lavaan::lavaan</a> objects
only. Usually
the one used in <code><a href="#topic+model_set">model_set()</a></code>,
<code><a href="#topic+get_add">get_add()</a></code> or
<code><a href="#topic+get_drop">get_drop()</a></code> to generate the list of
models.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_original">original</code></td>
<td>
<p>String. If provided,
it should be a name of a model
in <code>model_list</code>, with which
differences in model degrees of
freedom will be computed for other
models. If <code>NULL</code>, the default,
then the model in <code>sem_out</code> will
be used to computed the differences
in model degrees of freedom. If <code>NA</code>,
then differences in model <em>df</em> will
not be computed.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_parallel">parallel</code></td>
<td>
<p>If <code>TRUE</code>, parallel
processing will be used to fit the
models. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_ncores">ncores</code></td>
<td>
<p>Numeric. The number of
CPU cores to be used if <code>parallel</code>
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_make_cluster_args">make_cluster_args</code></td>
<td>
<p>A list of
named arguments to be passed to
<code>parallel::makeCluster()</code>. Used by
advanced users to configure the
cluster if <code>parallel</code> is <code>TRUE</code>.
Default is <code>list()</code>.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_progress">progress</code></td>
<td>
<p>Whether a progress
bar will be displayed, implemented
by the <code>pbapply</code> package. Default
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="fit_many_+3A_verbose">verbose</code></td>
<td>
<p>Whether additional
messages will be displayed, such
as the expected processing time.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It receives a list of
models, defined by <code>lavaan</code> parameter
tables (usually generated by
<code><a href="#topic+model_set">model_set()</a></code>, <code><a href="#topic+get_add">get_add()</a></code> or
<code><a href="#topic+get_drop">get_drop()</a></code>),
and fit them to a dataset stored
in a <code>lavaan</code>-class object.
</p>
<p>This function is called by
<code><a href="#topic+model_set">model_set()</a></code> and usually users do
not need to call it. It is exported
for advanced users.
</p>


<h3>Value</h3>

<p>An object of the class
<code>sem_outs</code>, a list with the
following major elements:
</p>

<ul>
<li> <p><code>fit</code>: A named list of
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> output objects or
<code><a href="stats.html#topic+update">update()</a></code> for fitting a model with
the added parameters.
</p>
</li>
<li> <p><code>change</code>: A numeric vector, of the
same length as <code>fit</code>. The change
in model <em>df</em> for each fit compared
to the original model. A
positive number denotes one less
free parameter. A negative number
denotes one more free parameter or
one less constraint.
</p>
</li>
<li> <p><code>converged</code>: A named vector of
boolean values, of the same length
as <code>fit</code>. Indicates whether each
fit converged or not.
</p>
</li>
<li> <p><code>post_check</code>: A named vector of
boolean values, of the same length
as <code>fit</code>. Indicates whether the
solution of each fit is
admissible or not. Checked by
<code><a href="lavaan.html#topic+lavInspect">lavaan::lavInspect()</a></code> with
the <code>what</code> argument set to
<code>"post.check"</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)
dat &lt;- dat_path_model
mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"
fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)
mod_to_add &lt;- get_add(fit)
fit_many(mod_to_add, fit)

</code></pre>

<hr>
<h2 id='get_add'>Models That Are Less Restricted</h2><span id='topic+get_add'></span>

<h3>Description</h3>

<p>Generate a list of
models with one or more fixed
parameter freed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_add(
  sem_out,
  must_add = NULL,
  must_not_add = NULL,
  remove_constraints = TRUE,
  exclude_error_cov = TRUE,
  df_change = 1,
  model_id = NA,
  keep_correct_df_change = TRUE,
  remove_duplicated = TRUE,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_add_+3A_sem_out">sem_out</code></td>
<td>
<p>The original model,
which is the output from an
structural equation modeling
function. Currently support
<a href="lavaan.html#topic+lavaan-class">lavaan::lavaan</a> objects only.</p>
</td></tr>
<tr><td><code id="get_add_+3A_must_add">must_add</code></td>
<td>
<p>A character vector
of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"y ~ x"</code>), that must be added.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="get_add_+3A_must_not_add">must_not_add</code></td>
<td>
<p>A character
vector of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"x1 ~~ x1"</code>), that must not be
added. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="get_add_+3A_remove_constraints">remove_constraints</code></td>
<td>
<p>Whether
equality constraints will be
removed. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_add_+3A_exclude_error_cov">exclude_error_cov</code></td>
<td>
<p>Exclude
error covariances of indicators.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_add_+3A_df_change">df_change</code></td>
<td>
<p>How many degrees
of freedom (<em>df</em>) away in the list.
All models with <em>df</em> change less than
or equal to this number will be
included, taking into account
requirements set by other arguments.
Default is 1.</p>
</td></tr>
<tr><td><code id="get_add_+3A_model_id">model_id</code></td>
<td>
<p>The identification
number of the starting model.
Default is <code>NA</code>, no identification
number.</p>
</td></tr>
<tr><td><code id="get_add_+3A_keep_correct_df_change">keep_correct_df_change</code></td>
<td>
<p>Keep
only models with actual <em>df</em> change
equal to expected <em>df</em> change.</p>
</td></tr>
<tr><td><code id="get_add_+3A_remove_duplicated">remove_duplicated</code></td>
<td>
<p>If <code>TRUE</code>,
the default, duplicated models are
removed.</p>
</td></tr>
<tr><td><code id="get_add_+3A_progress">progress</code></td>
<td>
<p>Whether a progress
bar will be displayed, implemented
by the <code>pbapply</code> package. Default
is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It generates a list of models
with one or more fixed parameter
freed (and the degrees of freedom, <em>df</em>,
increases by one or more). If a
model has equality constraints, models
with one or more of the constraints
between two free parameters
released will also be included.
</p>
<p>Graphically, paths or covariances
are &quot;added&quot; to form the list of models.
</p>
<p>The models to be included are
identified by
<code><a href="lavaan.html#topic+modificationIndices">lavaan::modificationIndices()</a></code>.
</p>
<p>The models will be checked by <code>lavaan</code>
to make sure that the decrease in
model degrees of freedom is of the
expected value.
</p>
<p>This function is called by
<code><a href="#topic+model_set">model_set()</a></code> and usually users do
not need to call it. It is exported
for advanced users.
</p>


<h3>Value</h3>

<p>An object of the class
<code>partables</code>, a named list of parameter
tables, each of them to be used by
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> or <code><a href="stats.html#topic+update">update()</a></code>
for fitting a model with the added
parameters.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+print.partables">print.partables()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)
dat &lt;- dat_path_model
mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"
fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)
mod_to_add &lt;- get_add(fit)
mod_to_add

</code></pre>

<hr>
<h2 id='get_drop'>Models That Are More Restricted</h2><span id='topic+get_drop'></span>

<h3>Description</h3>

<p>Generate a list of
models with one or more free parameter
dropped (fixed to zero).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_drop(
  sem_out,
  must_drop = NULL,
  must_not_drop = NULL,
  df_change = 1,
  model_id = NA,
  keep_correct_df_change = TRUE,
  remove_duplicated = TRUE,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_drop_+3A_sem_out">sem_out</code></td>
<td>
<p>The original model,
which is the output from an
structural equation modeling
function. Currently support
<a href="lavaan.html#topic+lavaan-class">lavaan::lavaan</a> objects only.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_must_drop">must_drop</code></td>
<td>
<p>A character vector
of parameters, named in
<code>lavaan::lavaan()</code> style (e.g.,
<code>"y ~ x"</code>), that must be included.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_must_not_drop">must_not_drop</code></td>
<td>
<p>A character
vector of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"x1 ~~ x1"</code>), that must not be
included. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_df_change">df_change</code></td>
<td>
<p>How many degrees
of freedom away in the list. All
models with <em>df</em> change less than
or equal to this number will be
included, taking into account
requirements set by other arguments.
Default is 1.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_model_id">model_id</code></td>
<td>
<p>The identification
number of the starting model.
Default is <code>NA</code>, no identification
number.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_keep_correct_df_change">keep_correct_df_change</code></td>
<td>
<p>Keep
only models with actual <em>df</em> change
equal to expected <em>df</em> change.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_remove_duplicated">remove_duplicated</code></td>
<td>
<p>If <code>TRUE</code>,
the default, duplicated models are
removed.</p>
</td></tr>
<tr><td><code id="get_drop_+3A_progress">progress</code></td>
<td>
<p>Whether a progress
bar will be displayed, implemented
by the <code>pbapply</code> package. Default
is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It generates a list of models
with one or more free parameters
dropped, that is, fixed to zero
(with degrees of freedom,
<em>df</em>, increases by one or more).
</p>
<p>All free parameters are included in
the pool of candidates, except for
those explicitly requested to be
kept.
</p>
<p>The models will be checked by <code>lavaan</code>
to make sure that the increase in
model degrees of freedom is of the
expected value.
</p>
<p>This function is called by
<code><a href="#topic+model_set">model_set()</a></code> and usually users do
not need to call it. It is exported
for advanced users.
</p>


<h3>Value</h3>

<p>An object of the class
<code>partables</code>, a named list of parameter
tables, each of them to be used by
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> or <code><a href="stats.html#topic+update">update()</a></code>
for fitting a model with the added
parameters.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+print.partables">print.partables()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

dat &lt;- dat_path_model
mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1 + x2
ab := a*b
"

fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)
mod_to_drop &lt;- get_drop(fit)
mod_to_drop

</code></pre>

<hr>
<h2 id='min_prior'>Minimum Prior</h2><span id='topic+min_prior'></span>

<h3>Description</h3>

<p>Find the minimum prior
probability required to achieve
the desired BIC posterior
probability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>min_prior(bic, bpp_target, target_name = "original")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="min_prior_+3A_bic">bic</code></td>
<td>
<p>A named vector of BIC values
for a set of models.</p>
</td></tr>
<tr><td><code id="min_prior_+3A_bpp_target">bpp_target</code></td>
<td>
<p>A value from zero
to 1. The desired BIC posterior
probability.</p>
</td></tr>
<tr><td><code id="min_prior_+3A_target_name">target_name</code></td>
<td>
<p>The name of the
original model, as appeared in the
names of <code>bic</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It assumes that all models other than
the original model have the same prior
probabilities.
</p>
<p>This function is called by
<code><a href="#topic+model_set">model_set()</a></code> or <code><a href="#topic+print.model_set">print.model_set()</a></code>
and usually users do
not need to call it. It is exported
for advanced users.
</p>


<h3>Value</h3>

<p>A scalar. The required prior
probability.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>References</h3>

<p>Wu, H., Cheung, S. F., &amp; Leung, S. O.
(2020). Simple use of BIC to assess
model selection uncertainty: An
illustration using mediation and
moderation models.
<em>Multivariate Behavioral Research</em>,
<em>55</em>(1), 1&ndash;16.
<a href="https://doi.org/10.1080/00273171.2019.1574546">doi:10.1080/00273171.2019.1574546</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+model_set">model_set()</a></code> and
<code><a href="#topic+print.model_set">print.model_set()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

dat &lt;- dat_path_model

mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"

fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)

out &lt;- model_set(fit)
min_prior(out$bic, bpp_target = .8)

</code></pre>

<hr>
<h2 id='model_graph'>Generate a Graph of Models</h2><span id='topic+model_graph'></span>

<h3>Description</h3>

<p>Generate an 'igraph' object from a
'model_set' object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_graph(
  object,
  node_size_by_x = TRUE,
  x = NULL,
  node_size = 5,
  min_size = 5,
  max_size = 35,
  color_original = "lightblue",
  color_add = "burlywood1",
  color_drop = "lightgreen",
  color_others = "lightgrey",
  color_label = "black",
  node_label_size = 1,
  original = "original",
  drop_redundant_direct_paths = TRUE,
  label_arrow_by_df = NULL,
  arrow_label_size = 1,
  weight_arrows_by_df = c("inverse", "normal", "none"),
  arrow_min_width = 0.5,
  arrow_max_width = 2,
  progress = TRUE,
  short_names = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_graph_+3A_object">object</code></td>
<td>
<p>Must be a
<code>model_set</code>-class object for now.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_node_size_by_x">node_size_by_x</code></td>
<td>
<p>Logical. Whether
node (vertex) sizes are determined
by a variable. Default is <code>TRUE</code>.
See <code>x</code> below on how size is
determined.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_x">x</code></td>
<td>
<p>If not <code>NULL</code>, it should be
a numeric vector of length equal to
the number of models. The node sizes
will be proportional to the values
of <code>x</code>, offset by <code>min_size</code>. If
<code>NULL</code>, the default, the BIC
posterior probabilities
stored in <code>object</code> will be retrieved.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_node_size">node_size</code></td>
<td>
<p>If <code>node_size_by_x</code>
is <code>FALSE</code>, this is the size for
all nodes.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_min_size">min_size</code></td>
<td>
<p>The minimum size
of a node. Default is 5.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_max_size">max_size</code></td>
<td>
<p>The maximum size
of a node. Default is 35.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_color_original">color_original</code></td>
<td>
<p>The color
of node of the original model.
Default is <code>"lightblue"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_color_add">color_add</code></td>
<td>
<p>The color of
the nodes of models formed by
adding one or more free parameters to
the original model.
Default is <code>"burlywood1"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_color_drop">color_drop</code></td>
<td>
<p>The color of
the nodes of models formed by
dropping one or more free parameters
from the original model.
Default is <code>"lightgreen"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_color_others">color_others</code></td>
<td>
<p>The color
of other models not specified above.
Default is <code>"grey50"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_color_label">color_label</code></td>
<td>
<p>The color of the
text labels of the nodes. Default
is <code>"black"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_node_label_size">node_label_size</code></td>
<td>
<p>The size of
the labels of the nodes. Default is
1.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_original">original</code></td>
<td>
<p>String. The name
of the original model (target model).
Default is <code>"original"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_drop_redundant_direct_paths">drop_redundant_direct_paths</code></td>
<td>
<p>Logical. Whether the redundant direct
path between two models. A direct path
is redundant if two models are also
connected through at least one
another model. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_label_arrow_by_df">label_arrow_by_df</code></td>
<td>
<p>If <code>TRUE</code>,
then an arrow (edge) is always labelled
by the difference in model <em>df</em>s.
If <code>FALSE</code>, then no arrows are
labelled. If <code>NULL</code>, then arrows are
labelled when not all differences
in model <em>df</em>s are equal to one.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_arrow_label_size">arrow_label_size</code></td>
<td>
<p>The size of
the labels of the arrows (edges), if labelled.
Default is 1.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_weight_arrows_by_df">weight_arrows_by_df</code></td>
<td>
<p>String.
Use if model <em>df</em>
differences are stored.
If <code>"inverse"</code>, larger the
difference in model <em>df</em>, <em>narrower</em>
an arrow. That is, more similar two
models are, thicker the arrow. If
<code>"normal"</code>, larger the difference
in model <em>df</em>, <em>wider</em> an arrow.
If <code>"none"</code>, then arrow width is
constant, set to <code>arrow_max_width</code>.
Default is <code>"inverse"</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_arrow_min_width">arrow_min_width</code></td>
<td>
<p>If
<code>weight_arrows_by_df</code> is not <code>"none"</code>,
this is the minimum width of an
arrow.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_arrow_max_width">arrow_max_width</code></td>
<td>
<p>If
<code>weight_arrows_by_df</code> is not <code>"none"</code>,
this is the maximum width of an
arrow. If <code>weight_arrows_by_df</code> is
<code>"none"</code>, this is the width of all
arrows.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_progress">progress</code></td>
<td>
<p>Whether a progress
bar will be displayed for some
steps (e.g., checking for nested
relations). Default
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_short_names">short_names</code></td>
<td>
<p>If <code>TRUE</code> and
short model names are stored,
they will be used as model labels.
Please print the object with
<code>short_names = TRUE</code> to find the
corresponding full model names.</p>
</td></tr>
<tr><td><code id="model_graph_+3A_...">...</code></td>
<td>
<p>Optional arguments. Not
used for now.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It extracts the model list stored
in <code>object</code>, creates an adjacency
matrix, and then creates an <code>igraph</code>
object customized for visualizing
model relations.
</p>


<h4>Construction of the Graph</h4>

<p>This is the default way to construct
the graph when the model set is
automatically by <code><a href="#topic+model_set">model_set()</a></code>.
</p>

<ul>
<li><p> Each model is connected by an
arrow, pointing from one model to
another model that
</p>
<p>a. can be formed by adding one
or more free parameter, or
</p>
<p>b. can be formed by releasing one
or more equality constraint
between two
parameters.
</p>
<p>c. has nested relation with this
model as determined by the
method proposed by Bentler
and Satorra (2010), if the
models are not generated
internally.
</p>
</li></ul>

<p>That is, it points to a model with
more degrees of freedom (more
complicated),
and
is nested within that model in either
parameter sense or covariance sense.
</p>

<ul>
<li><p> By default, the size of the node
for each model is scaled by its
BIC posterior probability, if
available. See <em>The Size of a Node</em>
below.
</p>
</li>
<li><p> If a model is designated as the
original (target) model,
than he original model, the models
with
more degrees of freedom than the
original model,
and the models with fewer degrees
of freedom than the original models,
are colored differently.
</p>
</li>
<li><p> The default layout is the Sugiyama
layout, with simpler models (models
with fewer degrees of freedom) on
the top. The lower a model is in
the network, the more the degrees
of freedom it has. This layout is
suitable for showing the nested
relations of the models. Models on
the same level (layer) horizontally
have the same model <em>df</em>.
</p>
</li></ul>

<p>The output is an <code>igraph</code> object.
Users can customize it in any way
they want using functions from
the <code>igraph</code> package.
</p>
<p>If a model has no nested relation
with all other model, it will not
be connected to other models.
</p>
<p>If no model is named <code>original</code>
(default is <code>"original"</code>), then no
model is colored as the original model.
</p>



<h4>User-Provided Models</h4>

<p>If <code>object</code> contained one or more
user-provided models which are not
generated automatically by
<code><a href="#topic+model_set">model_set()</a></code> or similar functions
(e.g., <code><a href="#topic+gen_models">gen_models()</a></code>), then the
method by Bentler and Satorra (2010)
will be used to determine model
relations. Models connected by an
arrow has a nested relation based on
the NET method by Bentler and Satorra
(2010). An internal function inspired
by <code><a href="semTools.html#topic+net">semTools::net()</a></code> is used to
implement the NET method.
</p>



<h4>The Size of a Node</h4>

<p>When a model is scaled by <code>x</code>,
which usually is the BIC posterior
probability, its size is determined
by:
</p>
<p><code>max_size * (x - min(x))/(max(x) - min(x)) + min_size</code>
</p>



<h3>Value</h3>

<p>A <code>model_graph</code>-class object that
can be used as as an <code>igraph</code>-object,
with a plot method (<code><a href="#topic+plot.model_graph">plot.model_graph()</a></code>)
with settings
suitable for plotting a network
of models with BIC posterior probabilities
computed.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
The internal function for nesting
inspired by <code><a href="semTools.html#topic+net">semTools::net()</a></code>,
which was developed by
Terrence D. Jorgensen.
</p>


<h3>References</h3>

<p>Bentler, P. M., &amp; Satorra, A. (2010).
Testing model nesting and equivalence.
<em>Psychological Methods, 15</em>(2),
111&ndash;123. <a href="https://doi.org/10.1037/a0019625">doi:10.1037/a0019625</a>
Asparouhov, T., &amp; Muthén, B. (2019).
Nesting and Equivalence Testing for
Structural Equation Models.
<em>Structural Equation Modeling: A Multidisciplinary Journal, 26</em>(2),
302&ndash;309. <a href="https://doi.org/10.1080/10705511.2018.1513795">doi:10.1080/10705511.2018.1513795</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

mod &lt;-
"
m1 ~ x
y ~ m1
"

fit &lt;- sem(mod, dat_serial_4, fixed.x = TRUE)

out &lt;- model_set(fit)
out

g &lt;- model_graph(out)
plot(g)

</code></pre>

<hr>
<h2 id='model_set'>BIC Posterior Probabilities
of Neighboring Models</h2><span id='topic+model_set'></span><span id='topic+gen_models'></span>

<h3>Description</h3>

<p>Identify neighboring
models, fit them, and return the
BIC posterior probabilities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_set(
  sem_out,
  partables = NULL,
  model_set_out = NULL,
  prior_sem_out = NULL,
  must_add = NULL,
  must_not_add = NULL,
  must_drop = NULL,
  must_not_drop = NULL,
  remove_constraints = TRUE,
  exclude_error_cov = TRUE,
  df_change_add = 1,
  df_change_drop = 1,
  remove_duplicated = TRUE,
  fit_models = ifelse(!is.null(model_set_out$fit), FALSE, TRUE),
  compute_bpp = TRUE,
  original = "original",
  parallel = FALSE,
  ncores = max(parallel::detectCores(logical = FALSE) - 1, 1),
  make_cluster_args = list(),
  progress = TRUE,
  verbose = TRUE,
  skip_check_sem_out = FALSE
)

gen_models(
  sem_out,
  must_add = NULL,
  must_not_add = NULL,
  must_drop = NULL,
  must_not_drop = NULL,
  remove_constraints = TRUE,
  exclude_error_cov = TRUE,
  df_change_add = 1,
  df_change_drop = 1,
  remove_duplicated = TRUE,
  progress = TRUE,
  output = c("partables", "model_set")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_set_+3A_sem_out">sem_out</code></td>
<td>
<p>It can be the output
from an
SEM function. Currently it supports
<a href="lavaan.html#topic+lavaan-class">lavaan::lavaan</a> objects only.
If it is a named list of
<a href="lavaan.html#topic+lavaan-class">lavaan::lavaan</a> objects, then
all arguments for model generation
will be ignored, and models will not
be refitted. Users need to ensure
that the models can be meaningfully
compared because they will not be
checked.</p>
</td></tr>
<tr><td><code id="model_set_+3A_partables">partables</code></td>
<td>
<p>A <code>partables</code>-class
object, usually generated by
<code><a href="#topic+get_add">get_add()</a></code> or <code><a href="#topic+get_drop">get_drop()</a></code>. A named
list of parameter tables to be fitted
along with the original model in
<code>sem_out</code>.
If supplied, all arguments related
to identifying models will be ignored.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_model_set_out">model_set_out</code></td>
<td>
<p>If set to
the output of a previous call
to <code><a href="#topic+model_set">model_set()</a></code> (a <code>model_set</code>-class
object), the list of stored models
will be used. All arguments related
to generate neighboring models will
be ignored.
If supplied, <code>sem_out</code> will also be
ignored and will be retrieved from
<code>model_set_out</code>, and <code>partables</code>
will also be ignored.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_prior_sem_out">prior_sem_out</code></td>
<td>
<p>The prior of the
model fitted in <code>sem_out</code>. Default
is <code>NULL</code>, and all models will have
equal prior probabilities.</p>
</td></tr>
<tr><td><code id="model_set_+3A_must_add">must_add</code></td>
<td>
<p>A character vector
of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"y ~ x"</code>), that must be added.
Default is 'NULL&ldquo;.</p>
</td></tr>
<tr><td><code id="model_set_+3A_must_not_add">must_not_add</code></td>
<td>
<p>A character
vector of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"x1 ~~ x1"</code>), that must not be
added. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_must_drop">must_drop</code></td>
<td>
<p>A character vector
of parameters, named in
<code>lavaan::lavaan()</code> style (e.g.,
<code>"y ~ x"</code>), that must be included.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_must_not_drop">must_not_drop</code></td>
<td>
<p>A character
vector of parameters, named in
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> style (e.g.,
<code>"x1 ~~ x1"</code>), that must not be
included. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_remove_constraints">remove_constraints</code></td>
<td>
<p>Whether
equality constraints will be
removed. Default is &ldquo;TRUE'.</p>
</td></tr>
<tr><td><code id="model_set_+3A_exclude_error_cov">exclude_error_cov</code></td>
<td>
<p>Exclude
error covariances of indicators.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_df_change_add">df_change_add</code></td>
<td>
<p>How many degrees
of freedom (<em>df</em>) away in the list.
All models with <em>df</em> change less than
or equal to this number will be
included, taking into account
requirements set by other arguments.
Default is 1.</p>
</td></tr>
<tr><td><code id="model_set_+3A_df_change_drop">df_change_drop</code></td>
<td>
<p>How many degrees
of freedom away in the list. All
models with <em>df</em> change less than
or equal to this number will be
included, taking into account
requirements set by other arguments.
Default is 1.</p>
</td></tr>
<tr><td><code id="model_set_+3A_remove_duplicated">remove_duplicated</code></td>
<td>
<p>If <code>TRUE</code>,
the default, duplicated models are
removed.</p>
</td></tr>
<tr><td><code id="model_set_+3A_fit_models">fit_models</code></td>
<td>
<p>If <code>TRUE</code>,
the
models will be fitted to the data,
usually stored in <code>sem_out</code>.
If <code>FALSE</code>, the models will be returned
as is, in the element <code>models</code>
of the output. If <code>model_set_out</code>
is set and models have been fitted,
then default is <code>FALSE</code>. Otherwise,
default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_compute_bpp">compute_bpp</code></td>
<td>
<p>If <code>TRUE</code>, then BIC
posterior probabilities will be
computed. Default
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_original">original</code></td>
<td>
<p>String. The name of the
original (traget) model. Default is
<code>"original"</code>. Used if <code>prior_sem_out</code>
is unnamed and only has one value.</p>
</td></tr>
<tr><td><code id="model_set_+3A_parallel">parallel</code></td>
<td>
<p>If <code>TRUE</code>, parallel
processing will be used to fit the
models. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_ncores">ncores</code></td>
<td>
<p>Numeric. The number of
CPU cores to be used if <code>parallel</code>
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_make_cluster_args">make_cluster_args</code></td>
<td>
<p>A list of
named arguments to be passed to
<code>parallel::makeCluster()</code>. Used by
advanced users to configure the
cluster if <code>parallel</code> is <code>TRUE</code>.
Default is <code>list()</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_progress">progress</code></td>
<td>
<p>Whether a progress
bar will be displayed, implemented
by the <code>pbapply</code> package or by
<code>utils::txtProgressBar</code>. Default
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_verbose">verbose</code></td>
<td>
<p>Whether additional
messages will be displayed, such
as the expected processing time.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="model_set_+3A_skip_check_sem_out">skip_check_sem_out</code></td>
<td>
<p>If <code>TRUE</code>
and <code>sem_out</code> is set, check
whether <code>sem_out</code> is of a supported
type (estimator is <code>"ML"</code> and
the model has only one group). If
not, an error will be raised.
Can be set to <code>FALSE</code> for experimenting
the functions on models not officially
supported.</p>
</td></tr>
<tr><td><code id="model_set_+3A_output">output</code></td>
<td>
<p>If <code>"model_set"</code>,
then the output is a <code>model_set</code>-class
object. If <code>"partables"</code>, the output
is a <code>partables</code>-class object.
Default is <code>partables</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It computes the BIC
posterior probabilities of a set
of models by the method presented
in Wu, Cheung, and Leung (2020).
</p>
<p>First, a list of model is identified
based on user-specified criteria.
By default, models differ from a fitted
model by one degree of freedom,
the 1-df-away <em>neighboring</em> models,
will be found using <code><a href="#topic+get_add">get_add()</a></code>
and <a href="#topic+get_drop">get_drop</a>.
</p>
<p>Second, these models will be fitted
to the sample dataset, and their
BICs will be computed.
</p>
<p>Third, their BIC posterior
probabilities will be computed
using their BICs. By default,
equal prior
probabilities for all the models
being fitted will be assumed in
the current version. This can be
changed by <code>prior_sem_out</code>.
</p>
<p>The results can then be printed,
with the models sorted by descending
order of BIC posterior
probabilities. The results can
also be visualized using
<code><a href="#topic+model_graph">model_graph()</a></code>.
</p>


<h3>Value</h3>

<p>The function <code><a href="#topic+model_set">model_set()</a></code>
returns an object of the class
<code>model_set</code>, a list with the following
major elements:
</p>

<ul>
<li> <p><code>models</code>: A named list of parameter
tables. Each represent the models
identified.
</p>
</li>
<li> <p><code>bic</code>: A numeric vector, of the
same length as <code>model</code>. The BIC of
each model.
</p>
</li>
<li> <p><code>postprob</code>: A numeric vector, of
the same length as <code>model</code>. The
BIC posterior probability of each
model.
</p>
</li>
<li> <p><code>fit</code>: A named list of
<code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> output objects
or <code><a href="stats.html#topic+update">update()</a></code> for fitting a model
with the added parameters, of the
same length as <code>model</code>.
</p>
</li>
<li> <p><code>change</code>: A numeric vector, of the
same length as <code>model</code>. The change
in model df for each fit. A
positive number denotes one less
free parameter. A negative number
denotes one more free parameter or
one less constraint.
</p>
</li>
<li> <p><code>converged</code>: A named vector of
boolean values, of the same length
as <code>model</code>. Indicates whether each
fit converged or not.
</p>
</li>
<li> <p><code>post_check</code>: A named vector of
boolean values, of the same length
as <code>model</code>. Indicates whether the
solution of each fit is admissible
or not. Checked by
<code><a href="lavaan.html#topic+lavInspect">lavaan::lavInspect()</a></code>.
</p>
</li></ul>

<p>The object returned by <code><a href="#topic+gen_models">gen_models()</a></code>
depends on the argument <code>output</code>.
See the argument <code>output</code> for the
details
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>model_set()</code>: Compute the BPPs of a list of models.
Can generate the models and/or fit the models. Can also
accept pregenerated models, or just update BPPs.
</p>
</li>
<li> <p><code>gen_models()</code>: Generate a list of models (parameter tables).
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>References</h3>

<p>Wu, H., Cheung, S. F., &amp; Leung, S. O.
(2020). Simple use of BIC to assess
model selection uncertainty: An
illustration using mediation and
moderation models.
<em>Multivariate Behavioral Research</em>,
<em>55</em>(1), 1&ndash;16.
<a href="https://doi.org/10.1080/00273171.2019.1574546">doi:10.1080/00273171.2019.1574546</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+print.model_set">print.model_set()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

dat &lt;- dat_path_model

mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"

fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)

out &lt;- model_set(fit)
out

</code></pre>

<hr>
<h2 id='partables_helpers'>Helper Functions For <code>partables</code>-Class Objects</h2><span id='topic+partables_helpers'></span><span id='topic+identical_partables'></span><span id='topic+is_partable'></span><span id='topic+same_variables'></span><span id='topic+get_partables'></span><span id='topic+to_partables'></span>

<h3>Description</h3>

<p>For tasks such as comparing two parameter
tables inside a <code>partables</code>-class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>identical_partables(object1, object2)

is_partable(x)

same_variables(x)

get_partables(x)

to_partables(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="partables_helpers_+3A_object1">object1</code></td>
<td>
<p>A <code>lavaan</code> parameter
table or similar object.</p>
</td></tr>
<tr><td><code id="partables_helpers_+3A_object2">object2</code></td>
<td>
<p>A <code>lavaan</code> parameter
table or similar object.</p>
</td></tr>
<tr><td><code id="partables_helpers_+3A_x">x</code></td>
<td>
<p>An object to be checked.</p>
</td></tr>
<tr><td><code id="partables_helpers_+3A_...">...</code></td>
<td>
<p>The objects to be combined.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code><a href="#topic+identical_partables">identical_partables()</a></code> compare two
<code>lavaan</code> parameter tables and see whether they
are identical. (Adapted from a similar function
in the package <code>semhelpinghands</code>).
</p>
<p>The function <code><a href="#topic+is_partable">is_partable()</a></code> tries
to
check whether an object is &quot;likely&quot;
to be a parameter table that can be
used by <code><a href="lavaan.html#topic+lavaan">lavaan::lavaan()</a></code> and its
wrappers, such as <code><a href="lavaan.html#topic+sem">lavaan::sem()</a></code>.
</p>
<p>Note that there is no guarantee the
the parameter table makes sense or
will not lead to error when fitted.
It can only check whether it has the
required columns.
</p>
<p>The function <code><a href="#topic+same_variables">same_variables()</a></code>
check whether all parameter labels
in a <code>partables</code>-class object use
the same observed variables.
</p>
<p>The function <code><a href="#topic+get_partables">get_partables()</a></code>
extract the <code>partable</code> object from
a <code>model_set</code>-class object.
</p>
<p>The function <code><a href="#topic+to_partables">to_partables()</a></code>
combine objects to create a
<code>partables</code>-class object.
The objects to be combined can be
a <code>lavaan</code>-class object (e.g.,
the output of <code><a href="lavaan.html#topic+sem">lavaan::sem()</a></code>)
or a parameter table of <code>lavaan</code>.
</p>


<h3>Value</h3>

<p>The function <code><a href="#topic+identical_partables">identical_partables()</a></code>
returns either <code>TRUE</code> or <code>FALSE</code>.
</p>
<p>The function <code><a href="#topic+is_partable">is_partable()</a></code>
returns either <code>TRUE</code> or <code>FALSE</code>.
</p>
<p>The function <code><a href="#topic+same_variables">same_variables()</a></code>
returns either <code>TRUE</code> or <code>FALSE</code>.
</p>
<p>The function <code><a href="#topic+get_partables">get_partables()</a></code>
returns a <code>partables</code>-class
object.
</p>
<p>The function <code><a href="#topic+to_partables">to_partables()</a></code>
returns a <code>partables</code>-class
object, created from the objects
supplied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)
mod1 &lt;-
"
x3 ~ x1
x2 ~ x4
"
mod2 &lt;-
"
x2 ~ x4
x3 ~ x1
"
fit1 &lt;- sem(mod1, dat_path_model)
fit2 &lt;- sem(mod2, dat_path_model)
pt1 &lt;- parameterTable(fit1)
pt2 &lt;- parameterTable(fit2)
identical_partables(pt1, pt2)


is_partable(pt1)


out &lt;- model_set(fit1,
                 fit_models = FALSE)
same_variables(get_partables(out))



out &lt;- model_set(fit1,
                 fit_models = FALSE)
get_partables(out)


fit1 &lt;- sem(mod1, dat_path_model)
fit2 &lt;- sem(mod2, dat_path_model)
pt1 &lt;- parameterTable(fit1)
pt2 &lt;- parameterTable(fit2)

to_partables(fit1, fit2)
to_partables(pt1, pt2)

</code></pre>

<hr>
<h2 id='plot.model_graph'>Plot a Network of Models</h2><span id='topic+plot.model_graph'></span>

<h3>Description</h3>

<p>Plot a network of models
generated by <code>model_graph()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'model_graph'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.model_graph_+3A_x">x</code></td>
<td>
<p>The output of
<code><a href="#topic+model_graph">model_graph()</a></code>. (Named <code>x</code>
because it is required in the naming
of arguments of the <code>plot</code> generic
function.)</p>
</td></tr>
<tr><td><code id="plot.model_graph_+3A_...">...</code></td>
<td>
<p>Additional arguments,
passed to <code><a href="igraph.html#topic+plot.igraph">plot.igraph()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is the plot
method of <code>model_graph</code> objects,
the output of
<code><a href="#topic+model_graph">model_graph()</a></code>.
</p>
<p>For now, it simply passes the object
to <code><a href="igraph.html#topic+plot.igraph">plot.igraph()</a></code>. This function
is created for possible customization
of the plot in the future.
</p>


<h3>Value</h3>

<p><code>NULL</code>. Called for its
side effect.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+model_graph">model_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

dat &lt;- dat_path_model

mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"

fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)

out &lt;- model_set(fit)
out

g &lt;- model_graph(out)
plot(g)

</code></pre>

<hr>
<h2 id='print.model_set'>Print a <code>model_set</code>-Class Object</h2><span id='topic+print.model_set'></span>

<h3>Description</h3>

<p>Print the content of
a <code>model_set</code>-class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'model_set'
print(
  x,
  bic_digits = 3,
  bpp_digits = 3,
  sort_models = TRUE,
  max_models = 20,
  bpp_target = NULL,
  target_name = "original",
  more_fit_measures = NULL,
  fit_measures_digits = 3,
  short_names = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.model_set_+3A_x">x</code></td>
<td>
<p>A <code>model_set</code>-class object.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_bic_digits">bic_digits</code></td>
<td>
<p>The number of
decimal places to be displayed
for BIC.
Default is 3.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_bpp_digits">bpp_digits</code></td>
<td>
<p>The number of
decimal places to be displayed
for BIC posterior probability
and prior probabilities.
Default is 3.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_sort_models">sort_models</code></td>
<td>
<p>Whether the models
will be sorted by BIC posterior
probability.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_max_models">max_models</code></td>
<td>
<p>The maximum number
of models to be printed. Default is
20.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_bpp_target">bpp_target</code></td>
<td>
<p>The desired
BIC probability. Used to compute
and print
the minimum prior probability
of the target model required to
achieve <code>bpp_target</code>. Default
is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_target_name">target_name</code></td>
<td>
<p>The name of the
target model as appeared in the
model list. Default is <code>"original"</code>.
Used if <code>bpp_target</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_more_fit_measures">more_fit_measures</code></td>
<td>
<p>Character
vector. To be passed to
<code><a href="lavaan.html#topic+fitMeasures">lavaan::fitMeasures()</a></code>. Default is
<code>NULL</code>. If not <code>NULL</code>, these are
the additional measures to be printed.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_fit_measures_digits">fit_measures_digits</code></td>
<td>
<p>The number of
decimal places to be displayed
for additional fit measures, if
requested. Default is 3.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_short_names">short_names</code></td>
<td>
<p>If <code>TRUE</code>,
then simple short names will be
printed
along with full model names.
Default is <code>FALSE</code>. Short names
can be used when interpreting
the graph from <code>model_graph()</code>
if short names are used in the graph.</p>
</td></tr>
<tr><td><code id="print.model_set_+3A_...">...</code></td>
<td>
<p>Optional arguments.
Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is the print method of the
output of <code><a href="#topic+model_set">model_set()</a></code>.
</p>


<h3>Value</h3>

<p><code>x</code> is returned invisibly.
Called for its side effect.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p>A <code>model_set</code>-class object
is generated by <code><a href="#topic+model_set">model_set()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)

dat &lt;- dat_path_model

mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"

fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)

out &lt;- model_set(fit)
out

</code></pre>

<hr>
<h2 id='print.partables'>Print a <code>partables</code>-Class Object</h2><span id='topic+print.partables'></span>

<h3>Description</h3>

<p>Print the content of
a <code>partables</code>-class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'partables'
print(x, max_tables = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.partables_+3A_x">x</code></td>
<td>
<p>A <code>partables</code>-class object.</p>
</td></tr>
<tr><td><code id="print.partables_+3A_max_tables">max_tables</code></td>
<td>
<p>The maximum number
of models to be printed.
Default is 10.</p>
</td></tr>
<tr><td><code id="print.partables_+3A_...">...</code></td>
<td>
<p>Optional arguments.
Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The print method for the output
of <code><a href="#topic+gen_models">gen_models()</a></code>, <code><a href="#topic+get_add">get_add()</a></code>,
and <code><a href="#topic+get_drop">get_drop()</a></code>.
</p>


<h3>Value</h3>

<p><code>x</code> is returned invisibly.
Called for its side effect.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gen_models">gen_models()</a></code>, <code><a href="#topic+get_add">get_add()</a></code>,
and <code><a href="#topic+get_drop">get_drop()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)
dat &lt;- dat_path_model
mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"
fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)
mod_to_add &lt;- get_add(fit)
mod_to_add
print(mod_to_add, max_tables = 1)
mod_to_drop &lt;- get_drop(fit)
mod_to_drop
print(mod_to_drop, max_tables = 1)

</code></pre>

<hr>
<h2 id='print.sem_outs'>Print an <code>sem_outs</code>-Class Object</h2><span id='topic+print.sem_outs'></span>

<h3>Description</h3>

<p>Print the content of
an <code>sem_outs</code>-class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sem_outs'
print(x, max_models = 20, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.sem_outs_+3A_x">x</code></td>
<td>
<p>An <code>sem_outs</code>-class object.</p>
</td></tr>
<tr><td><code id="print.sem_outs_+3A_max_models">max_models</code></td>
<td>
<p>The maximum number
of models to be printed. Default
is 20.</p>
</td></tr>
<tr><td><code id="print.sem_outs_+3A_...">...</code></td>
<td>
<p>Optional arguments.
Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The print method for the output
of <code>fit_many()</code>.
</p>


<h3>Value</h3>

<p><code>x</code> is returned invisibly.
Called for its side effect.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p>An <code>sem_outs</code>-class object
is generated by <code>fit_many()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(lavaan)
dat &lt;- dat_path_model
mod &lt;-
"
x3 ~ a*x1 + b*x2
x4 ~ a*x1
ab := a*b
"
fit &lt;- sem(mod, dat_path_model, fixed.x = TRUE)
mod_to_add &lt;- get_add(fit)
out &lt;- fit_many(mod_to_add, fit)
out
print(out, max_models = 1)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
