<!DOCTYPE html><html lang="en"><head><title>Help for package roxut</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {roxut}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#roxut-package'><p>roxut</p></a></li>
<li><a href='#roclet_clean.roclet_tests'><p>Delete Unit Test Files Generated by @tests Tags</p></a></li>
<li><a href='#roclet_output.roclet_tests'><p>Write the Results of Processing @tests Tags to Unit Test File</p></a></li>
<li><a href='#roclet_process.roclet_tests'><p>Process @tests Tags</p></a></li>
<li><a href='#roxy_tag_parse.roxy_tag_tests'><p>Parse @tests Tags</p></a></li>
<li><a href='#tests_roclet'><p>tests_roclet</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Document Unit Tests Roxygen-Style</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-08-22</td>
</tr>
<tr>
<td>Description:</td>
<td>Much as 'roxygen2' allows one to document functions in the same file as the function itself, 'roxut'  allows one to write the unit tests in the same file as the function.  Once processed, the unit tests are moved to the appropriate directory.  Currently supports 'testthat' and 'tinytest' frameworks. The 'roxygen2' package provides much of the infrastructure.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bryanhanson/roxut">https://github.com/bryanhanson/roxut</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bryanhanson/roxut/issues">https://github.com/bryanhanson/roxut/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>roxygen2 (&ge; 7.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-08-22 18:39:50 UTC; bryanhanson</td>
</tr>
<tr>
<td>Author:</td>
<td>Bryan A. Hanson <a href="https://orcid.org/0000-0003-3536-8246"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Claudia Beleites [ctb],
  Hadley Wickham [aut, cph] (roxygen2 code),
  Peter Danenberg [aut, cph] (roxygen2 code),
  Gábor Csárdi [aut] (roxygen2 code),
  Manuel Eugster [aut, cph] (roxygen2 code),
  RStudio [cph] (roxygen2 code)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bryan A. Hanson &lt;hanson@depauw.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-08-22 19:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='roxut-package'>roxut</h2><span id='topic+roxut-package'></span><span id='topic+roxut'></span>

<h3>Description</h3>

<p>Much as <code>roxygen2</code> allows one to document functions in the same file
as the function itself, <code>roxut</code> allows one to write the unit tests
in the same file as the function.  Once processed, the unit tests are
moved to the appropriate directory.  Currently supports <code>testthat</code> and
<code>tinytest</code> frameworks.  The <code>roxygen2</code> package provides much of the infrastructure.
</p>


<h3>Author(s)</h3>

<p>Bryan A. Hanson.
</p>
<p>Maintainer: Bryan A. Hanson <a href="mailto:hanson@depauw.edu">hanson@depauw.edu</a>
</p>

<hr>
<h2 id='roclet_clean.roclet_tests'>Delete Unit Test Files Generated by @tests Tags</h2><span id='topic+roclet_clean.roclet_tests'></span>

<h3>Description</h3>

<p>Delete unit test files generated by @tests tags. Activated when
calling <code>roxygenize</code> with <code>clean = TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'roclet_tests'
roclet_clean(x, base_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="roclet_clean.roclet_tests_+3A_x">x</code></td>
<td>
<p>A <code>roclet</code> object.</p>
</td></tr>
<tr><td><code id="roclet_clean.roclet_tests_+3A_base_path">base_path</code></td>
<td>
<p>Path to root of source package.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL  If found, files created by <code>roxut</code> will be deleted.
</p>


<h3>Author(s)</h3>

<p>Bryan A. Hanson
</p>

<hr>
<h2 id='roclet_output.roclet_tests'>Write the Results of Processing @tests Tags to Unit Test File</h2><span id='topic+roclet_output.roclet_tests'></span>

<h3>Description</h3>

<p>The contents of the unit tests (lines following the <code>@tests</code> tags)
are written verbatim to the appropriate directories (directory depends
on whether <code>tinytest</code> or <code>testthat</code> is in use).  If there is more
than one function and corresponding unit tests in a file, the first unit tests
will be in <code>filename.R</code>, the second in <code>filename-1.R</code> etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'roclet_tests'
roclet_output(x, results, base_path, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="roclet_output.roclet_tests_+3A_x">x</code></td>
<td>
<p>A <code>roclet</code> object.</p>
</td></tr>
<tr><td><code id="roclet_output.roclet_tests_+3A_results">results</code></td>
<td>
<p>Value returned from the <code>roclet_process()</code> method.</p>
</td></tr>
<tr><td><code id="roclet_output.roclet_tests_+3A_base_path">base_path</code></td>
<td>
<p>Path to root of source package.</p>
</td></tr>
<tr><td><code id="roclet_output.roclet_tests_+3A_...">...</code></td>
<td>
<p>Other arguments passed downstream. Needed for compatibility,
does not appear to be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, a list with the text of the tests. Writes files!
</p>


<h3>Author(s)</h3>

<p>Bryan A. Hanson
</p>

<hr>
<h2 id='roclet_process.roclet_tests'>Process @tests Tags</h2><span id='topic+roclet_process.roclet_tests'></span>

<h3>Description</h3>

<p>Processes the blocks containing the <code>@tests</code> tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'roclet_tests'
roclet_process(x, blocks, env, base_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="roclet_process.roclet_tests_+3A_x">x</code></td>
<td>
<p>A <code>roclet</code> object.</p>
</td></tr>
<tr><td><code id="roclet_process.roclet_tests_+3A_blocks">blocks</code></td>
<td>
<p>A list of <code>roxy_block</code> objects.</p>
</td></tr>
<tr><td><code id="roclet_process.roclet_tests_+3A_env">env</code></td>
<td>
<p>Package environment.</p>
</td></tr>
<tr><td><code id="roclet_process.roclet_tests_+3A_base_path">base_path</code></td>
<td>
<p>Path to root of source package.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list.
</p>


<h3>Author(s)</h3>

<p>Bryan A. Hanson
</p>

<hr>
<h2 id='roxy_tag_parse.roxy_tag_tests'>Parse @tests Tags</h2><span id='topic+roxy_tag_parse.roxy_tag_tests'></span>

<h3>Description</h3>

<p>This function is called once for each <code>@tests</code> tag in a
function definition file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'roxy_tag_tests'
roxy_tag_parse(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="roxy_tag_parse.roxy_tag_tests_+3A_x">x</code></td>
<td>
<p>A <code>roclet</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>x</code> object is returned, appended with a list <code>val</code>
containing two elements:
</p>

<ul>
<li> <p><code>framework</code> containing the name of the unit test framework in use.
</p>
</li>
<li> <p><code>tests</code> containing the content of the unit tests.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Bryan A. Hanson
</p>

<hr>
<h2 id='tests_roclet'>tests_roclet</h2><span id='topic+tests_roclet'></span>

<h3>Description</h3>

<p>This roclet automates the creation of unit tests, using <code>@tests</code> tags
written in the function definition files, and processed using <code>roxygen2</code>.
The unit tests are written verbatim to the appropriate destination file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tests_roclet()
</code></pre>


<h3>Value</h3>

<p>A complete roclet.
</p>


<h3>Author(s)</h3>

<p>Bryan A. Hanson
</p>


<h3>Examples</h3>

<pre><code class='language-R'># In actual use, the test lines would be in your function definition file.
# The results (cat'd here) would be written to the unit test file.
# If the function definition file is myFunc.R then the results
# are written to test-myFunc.R in the appropriate directory
# (the directory depends on whether your are using tinytest or testthat).

tinytest_in &lt;- "#' @tests tinytest\n#' # Are these equal?\n#' expect_equal(5.0, 5.0)\nNULL\n"
tinytest_out &lt;- roxygen2::roc_proc_text(tests_roclet(), tinytest_in)
cat(tinytest_out$tinytest, "\n")

testthat_in &lt;- "#' @tests testthat\n#' # Are these equal?\n#' expect_equal(5.0, 5.0)\nNULL\n"
testthat_out &lt;- roxygen2::roc_proc_text(tests_roclet(), testthat_in)
cat(testthat_out$testthat, "\n")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
