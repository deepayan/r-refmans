<!DOCTYPE html><html lang="en"><head><title>Help for package MSCA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MSCA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MSCA'><p>Clustering of Multiple Censored Time-to-Event Endpoints</p></a></li>
<li><a href='#EHR'><p>Description of the EHR dataset</p></a></li>
<li><a href='#make_state_matrix'><p>Create a State Matrix</p></a></li>
<li><a href='#msca'><p>Compute Jaccard Index Using Parallel Rcpp</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Clustering of Multiple Censored Time-to-Event Endpoints</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides basic tools for computing clusters of instances described by multiple time-to-event censored endpoints. From long-format datasets, where one instance is described by one or more records of events, a procedure is used to compute state matrices. Then, from state matrices, a procedure provides optimised computation of the Jaccard distance between instances. The library is currently in development, and more options and tools allowing graphical representation of typologies are expected. For methodological details, see our methodological paper: Delord M, Douiri A (2025) &lt;<a href="https://doi.org/10.1186%2Fs12874-025-02476-7">doi:10.1186/s12874-025-02476-7</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, Matrix, Rcpp, RcppParallel, rlang, stats, tibble, utils</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo, RcppParallel</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-18 10:44:32 UTC; marc</td>
</tr>
<tr>
<td>Author:</td>
<td>Marc Delord <a href="https://orcid.org/0000-0002-0455-6749"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marc Delord &lt;mdelord@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-19 14:30:13 UTC</td>
</tr>
</table>
<hr>
<h2 id='MSCA'>Clustering of Multiple Censored Time-to-Event Endpoints</h2><span id='topic+MSCA-package'></span>

<h3>Description</h3>

<p>The MSCA library provides basic tools for computing clusters
of instances described by multiple time-to-event censored endpoints.
From long format datasets, where one instance is described by one or
more record of events, a procedure is used to compute states matrices.
Then, from states matrices, a procedure provides optimised computation
of the Jacard distance between instances. The library is currently in
development and more options and tools allowing graphical
representation of typologies are expected.</p>


<h3>Details</h3>

<p>This package is under active development
</p>


<h3>Author(s)</h3>

<p>Marc Delord
</p>
<p><strong>Reference:</strong> Delord M, Douiri A (2025) &quot;Multiple states clustering analysis (MSCA),
an unsupervised approach to multiple time-to-event electronic health records
applied to multimorbidity associated with myocardial infarction.&quot;
BMC Med Res Methodol. 25(1):32. &lt;doi:10.1186/s12874-025-02476-7&gt;
</p>
<p>Maintainer: Marc Delord &lt;mdelord@gmail.com&gt;
</p>

<hr>
<h2 id='EHR'>Description of the EHR dataset</h2><span id='topic+EHR'></span>

<h3>Description</h3>

<p>This is a toy dataset to illustrate the use of the the MSCA library
</p>


<h3>Format</h3>

<p>A data frame with <code>3000</code> records and <code>3</code> variables:
</p>

<dl>
<dt>link_id</dt><dd><p>Unique patient identifyer</p>
</dd>
<dt>reg</dt><dd><p>Registered long-term condition</p>
</dd>
<dt>aos</dt><dd><p>Age at onset of the registered long-term condition</p>
</dd>
</dl>



<h3>Source</h3>

<p>Toy dataset
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load the dataset
data(EHR)

# Display the first few rows
head(EHR)
</code></pre>

<hr>
<h2 id='make_state_matrix'>Create a State Matrix</h2><span id='topic+make_state_matrix'></span>

<h3>Description</h3>

<p>This function generates state matrices based on the given dataset, with options for
defining ID columns, LTC columns, and matrix dimensions. It splits the data, processes
it by group, and computes matrices for each subset of data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_state_matrix(
  data,
  id = "link_id",
  ltc = "reg",
  aos = "aos",
  k = 100,
  l = 111,
  fail_code = "death",
  cens_code = "cens"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_state_matrix_+3A_data">data</code></td>
<td>
<p>A data frame or tibble containing the dataset long format</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_id">id</code></td>
<td>
<p>A string representing the column name of patients ID</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_ltc">ltc</code></td>
<td>
<p>A string representing the column name of the event (long term conditions)</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_aos">aos</code></td>
<td>
<p>A string representing the column name of age at onset of considered long term conditions</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_k">k</code></td>
<td>
<p>An integer representing the group size when splitting the dataset (usefull for large datasets)</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_l">l</code></td>
<td>
<p>An integer representing the number of rows of the state matrices. It usualle represent the maximum age of patients</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_fail_code">fail_code</code></td>
<td>
<p>A string representing the code used for failure (death)</p>
</td></tr>
<tr><td><code id="make_state_matrix_+3A_cens_code">cens_code</code></td>
<td>
<p>A string representing the code used for censoring</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function processes the data by splitting it based on the <code>id</code> and <code>ltc</code> columns.
It computes matrices for each subset, with rows representing different states and columns representing unique IDs.
</p>


<h3>Value</h3>

<p>A list of state matrices, one per patient
</p>

<hr>
<h2 id='msca'>Compute Jaccard Index Using Parallel Rcpp</h2><span id='topic+msca'></span>

<h3>Description</h3>

<p>This function takes a matrix, removes rows where all values are zero (or NA),
and computes the Jaccard index using an Rcpp parallel function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msca(smats)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="msca_+3A_smats">smats</code></td>
<td>
<p>A numeric matrix where Jaccard Index will be computed between the columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix containing the Jaccard index between columns.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
