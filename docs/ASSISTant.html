<!DOCTYPE html><html><head><title>Help for package ASSISTant</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ASSISTant}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ASSISTant'><p>Three stage group sequential adaptive design with subgroup selection</p></a></li>
<li><a href='#ASSISTDesign'><p>A class to encapsulate the adaptive clinical trial design of Lai, Lavori and Liao</p></a></li>
<li><a href='#ASSISTDesignB'><p>A fixed sample design to compare against the adaptive clinical</p>
trial design</a></li>
<li><a href='#ASSISTDesignC'><p>A fixed sample RCT design to compare against the adaptive clinical</p>
trial design of Lai, Lavori and Liao.</a></li>
<li><a href='#colNamesForStage'><p>Return a vector of column names for statistics for a given stage</p></a></li>
<li><a href='#computeMeanAndSD'><p>Compute the mean and sd of a discrete Rankin distribution</p></a></li>
<li><a href='#computeMHPBoundaries'><p>Compute the three modified Haybittle-Peto boundaries</p></a></li>
<li><a href='#computeMHPBoundaryITT'><p>Compute the three modified Haybittle-Peto boundaries and effect size</p></a></li>
<li><a href='#conformParameters'><p>Conform designParameters so that weights are turned in to probabilities, the null and control distributions are proper matrices etc.</p></a></li>
<li><a href='#DEFUSE3Design'><p>The DEFUSE3 design</p></a></li>
<li><a href='#generateDiscreteData'><p>A data generation function using a discrete distribution for Rankin</p>
score rather than a normal distribution</a></li>
<li><a href='#generateNormalData'><p>A data generation function along the lines of what was used in the Lai, Lavori, Liao paper.</p>
score rather than a normal distribution</a></li>
<li><a href='#groupSampleSize'><p>Compute the sample size for any group at a stage assuming a nested</p>
structure as in the paper.</a></li>
<li><a href='#LLL.SETTINGS'><p>Design and trial settings used in the Lai, Lavori, Liao paper simulations</p></a></li>
<li><a href='#mHP.b'><p>Compute the efficacy boundary (modified Haybittle-Peto) for the</p>
first two stages</a></li>
<li><a href='#mHP.btilde'><p>Compute the futility boundary (modified Haybittle-Peto) for the</p>
first two stages</a></li>
<li><a href='#mHP.c'><p>Compute the efficacy boundary (modified Haybittle-Peto) for the</p>
final (third) stage</a></li>
<li><a href='#scalarInRange'><p>Is a scalar quantity is a specified range?</p></a></li>
<li><a href='#wilcoxon'><p>Compute the standardized Wilcoxon test statistic for two samples</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Adaptive Subgroup Selection in Group Sequential Trials</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-11-30</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bnaras/ASSISTant">https://github.com/bnaras/ASSISTant</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bnaras/ASSISTant/issues">https://github.com/bnaras/ASSISTant/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Clinical trial design for subgroup selection in three-stage group
             sequential trial as described in Lai, Lavori and Liao (2014,
	     &lt;<a href="https://doi.org/10.1016%2Fj.cct.2014.09.001">doi:10.1016/j.cct.2014.09.001</a>&gt;). Includes facilities for design,
	     exploration and analysis of such trials. An implementation of
	     the initial DEFUSE-3 trial is also provided as a vignette.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, mvtnorm, knitr, magrittr, dplyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-01 14:56:45 UTC; naras</td>
</tr>
<tr>
<td>Author:</td>
<td>Tze Leung Lai [ctb],
  Philip Lavori [aut],
  Olivia Liao [aut],
  Balasubramanian Narasimhan [aut, cre],
  Ka Wai Tsang [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Balasubramanian Narasimhan &lt;naras@stat.Stanford.EDU&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-02 09:30:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='ASSISTant'>Three stage group sequential adaptive design with subgroup selection</h2><span id='topic+ASSISTant'></span>

<h3>Description</h3>

<p><code>ASSISTant</code> is a package that implements a three-stage
adaptive clinical trial design with provision for subgroup
selection where the treatment may be effective; see Lai, Lavori and
Liao (<a href="https://doi.org/10.1016/j.cct.2014.09.001">doi:10.1016/j.cct.2014.09.001</a>). The main design object is
an <code>R6</code> class that can be instantiated and manipulated to
obtain the operating characteristics. A vignette is provided
showing the use of this package for designing the DEFUSE-3 trial,
described in the paper by Lai, Lavori and Liao. The package
contains everything necessary to reproduce the results of the
paper.
</p>


<h3>References</h3>

<p>Adaptive Choice of Patient Subgroup for Comparing Two
Treatments by Tze Leung Lai and Philip W. Lavori and Olivia
Yueh-Wen Liao. Contemporary Clinical Trials, Vol. 39, No. 2, pp
191-200 (2014, <a href="https://doi.org/10.1016/j.cct.2014.09.001">doi:10.1016/j.cct.2014.09.001</a>).
</p>
<p>Adaptive design of confirmatory trials: Advances and
challenges by Tze Leung Lai and Philip W. Lavori and Ka Wai
Tsang. Contemporary Clinical Trials, Vol. 45, Part A, pp 93-102
(2015, <a href="https://doi.org/10.1016/j.cct.2015.06.007">doi:10.1016/j.cct.2015.06.007</a>).
</p>

<hr>
<h2 id='ASSISTDesign'>A class to encapsulate the adaptive clinical trial design of Lai, Lavori and Liao</h2><span id='topic+ASSISTDesign'></span>

<h3>Description</h3>

<p><code>ASSISTDesign</code> objects are used to design, simulate and analyze
adaptive group sequential clinical trial with three stages. For details refer to the paper
<em>Adaptive Choice of Patient Subgroup for Comparing Two Treatments</em>
by Tze Leung Lai and Philip W. Lavori and Olivia Yueh-Wen Liao. Contemporary Clinical Trials,
Vol. 39, No. 2, pp 191-200 (2014).
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ASSISTDesign-new"><code>ASSISTDesign$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-getDesignParameters"><code>ASSISTDesign$getDesignParameters()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-getTrialParameters"><code>ASSISTDesign$getTrialParameters()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-getBoundaries"><code>ASSISTDesign$getBoundaries()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-setBoundaries"><code>ASSISTDesign$setBoundaries()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-print"><code>ASSISTDesign$print()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-computeCriticalValues"><code>ASSISTDesign$computeCriticalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-explore"><code>ASSISTDesign$explore()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-performInterimLook"><code>ASSISTDesign$performInterimLook()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-analyze"><code>ASSISTDesign$analyze()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-summary"><code>ASSISTDesign$summary()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesign-clone"><code>ASSISTDesign$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-ASSISTDesign-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new <code>ASSISTDesign</code> instance using the parameters specified.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$new(
  designParameters,
  trialParameters,
  discreteData = FALSE,
  boundaries
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>designParameters</code></dt><dd><p>parameters of the experimental design. Must contain apropriate distributions to sample from, if <code>discreteData = TRUE</code></p>
</dd>
<dt><code>trialParameters</code></dt><dd><p>the trial parameters, such as sample size etc.</p>
</dd>
<dt><code>discreteData</code></dt><dd><p>a flag indicating that a discrete distribution is to be used for the Rankin scores</p>
</dd>
<dt><code>boundaries</code></dt><dd><p>decision boundaries to use for interim looks, a named vector of <code>btilde</code>, <code>b</code> and <code>c</code> values</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a new <code>AssistDesign</code> object
</p>


<hr>
<a id="method-ASSISTDesign-getDesignParameters"></a>



<h4>Method <code>getDesignParameters()</code></h4>

<p>return the designParameters field
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$getDesignParameters()</pre></div>


<hr>
<a id="method-ASSISTDesign-getTrialParameters"></a>



<h4>Method <code>getTrialParameters()</code></h4>

<p>return the trialParameters field
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$getTrialParameters()</pre></div>


<hr>
<a id="method-ASSISTDesign-getBoundaries"></a>



<h4>Method <code>getBoundaries()</code></h4>

<p>return the boundaries field
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$getBoundaries()</pre></div>


<hr>
<a id="method-ASSISTDesign-setBoundaries"></a>



<h4>Method <code>setBoundaries()</code></h4>

<p>Set the boundaries field
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$setBoundaries(value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>value</code></dt><dd><p>a named vector of <code>btilde</code>, <code>b</code> and <code>c</code> values</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ASSISTDesign-print"></a>



<h4>Method <code>print()</code></h4>

<p>Print details of the design to console
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$print()</pre></div>


<hr>
<a id="method-ASSISTDesign-computeCriticalValues"></a>



<h4>Method <code>computeCriticalValues()</code></h4>

<p>Compute the critical boundary values <code class="reqn">\tilde{b}</code>, <code class="reqn">b</code> and <code class="reqn">c</code> for futility, efficacy and final efficacy decisions. This is time consuming so cache where possible.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$computeCriticalValues()</pre></div>



<h5>Returns</h5>

<p>a named vector of critical values with names <code>btilde</code>, <code>b</code>, and <code>c</code> as in the paper
</p>


<hr>
<a id="method-ASSISTDesign-explore"></a>



<h4>Method <code>explore()</code></h4>

<p>Explore the design using the specified number of simulations and random number seed and other parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$explore(
  numberOfSimulations = 5000,
  rngSeed = 12345,
  trueParameters = self$getDesignParameters(),
  recordStats = TRUE,
  showProgress = TRUE,
  fixedSampleSize = FALSE,
  saveRawData = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt><dd><p>default number of simulations is 5000</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>default seed is 12345</p>
</dd>
<dt><code>trueParameters</code></dt><dd><p>the state of nature, by default the value of <code>self$getDesignParameters()</code> as would be the case for a Type I error calculation. If changed, would yield power.</p>
</dd>
<dt><code>recordStats</code></dt><dd><p>a boolean flag (default <code>TRUE</code>) to record statistics</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag to show progress, default <code>TRUE</code></p>
</dd>
<dt><code>fixedSampleSize</code></dt><dd><p>a bollean flag indicating that patients lost after a futile overall look are not made up, default <code>FALSE</code>.</p>
</dd>
<dt><code>saveRawData</code></dt><dd><p>a flag (default <code>FALSE</code>) to indicate if raw data has to be saved</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a list of results
</p>


<hr>
<a id="method-ASSISTDesign-performInterimLook"></a>



<h4>Method <code>performInterimLook()</code></h4>

<p>Perform an interim look on trial data
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$performInterimLook(
  trialData,
  stage,
  recordStats = FALSE,
  fixedSampleSize = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialData</code></dt><dd><p>trial data frame</p>
</dd>
<dt><code>stage</code></dt><dd><p>the trial stage</p>
</dd>
<dt><code>recordStats</code></dt><dd><p>a boolean flag to record all statistics</p>
</dd>
<dt><code>fixedSampleSize</code></dt><dd><p>a flag to use a fixed sample size to account for loss to follow up</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>the trial history
</p>


<hr>
<a id="method-ASSISTDesign-analyze"></a>



<h4>Method <code>analyze()</code></h4>

<p>Analyze the exploration data from trial
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$analyze(trialExploration)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialExploration</code></dt><dd><p>the result of a call to <code>explore()</code> to simulate the design</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Return a list of summary quantities
</p>


<hr>
<a id="method-ASSISTDesign-summary"></a>



<h4>Method <code>summary()</code></h4>

<p>Print the operating characteristics of the design using the analysis data
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$summary(analysis)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>analysis</code></dt><dd><p>the analysis result from the <code>analyze()</code> call</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ASSISTDesign-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesign$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code>LLL.SETTINGS</code> for an explanation of trial parameters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(LLL.SETTINGS)
prevalence &lt;- LLL.SETTINGS$prevalences$table1
scenario &lt;- LLL.SETTINGS$scenarios$S0
designParameters &lt;- list(prevalence = prevalence,
                         mean = scenario$mean,
                         sd = scenario$sd)
designA &lt;- ASSISTDesign$new(trialParameters = LLL.SETTINGS$trialParameters,
                              designParameters = designParameters)
print(designA)
result &lt;- designA$explore(showProgress = interactive())
analysis &lt;- designA$analyze(result)
designA$summary(analysis)

## End(Not run)
</code></pre>

<hr>
<h2 id='ASSISTDesignB'>A fixed sample design to compare against the adaptive clinical
trial design</h2><span id='topic+ASSISTDesignB'></span>

<h3>Description</h3>

<p><code>ASSISTDesignB</code> objects are used to design a trial
with certain characteristics provided in the object instantiation
method. This design differs from <code>ASSISTDesign</code> in only how it
computes the critical boundaries, how it performs the interim
look, and what quantities are computed in a trial run.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+ASSISTDesign">ASSISTant::ASSISTDesign</a></code> -&gt; <code>ASSISTDesignB</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ASSISTDesignB-computeCriticalValues"><code>ASSISTDesignB$computeCriticalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignB-explore"><code>ASSISTDesignB$explore()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignB-analyze"><code>ASSISTDesignB$analyze()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignB-summary"><code>ASSISTDesignB$summary()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignB-clone"><code>ASSISTDesignB$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getBoundaries'><code>ASSISTant::ASSISTDesign$getBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getDesignParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getDesignParameters'><code>ASSISTant::ASSISTDesign$getDesignParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getTrialParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getTrialParameters'><code>ASSISTant::ASSISTDesign$getTrialParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="initialize"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-initialize'><code>ASSISTant::ASSISTDesign$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="performInterimLook"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-performInterimLook'><code>ASSISTant::ASSISTDesign$performInterimLook()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="print"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-print'><code>ASSISTant::ASSISTDesign$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="setBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-setBoundaries'><code>ASSISTant::ASSISTDesign$setBoundaries()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-ASSISTDesignB-computeCriticalValues"></a>



<h4>Method <code>computeCriticalValues()</code></h4>

<p>Compute the critical boundary value <code class="reqn">c_\alpha</code>
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignB$computeCriticalValues()</pre></div>



<h5>Returns</h5>

<p>a named vector of a single value containing the value for <code>c</code>
</p>


<hr>
<a id="method-ASSISTDesignB-explore"></a>



<h4>Method <code>explore()</code></h4>

<p>Explore the design using the specified number of simulations, random number seed, and
further parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignB$explore(
  numberOfSimulations = 100,
  rngSeed = 12345,
  trueParameters = self$getDesignParameters(),
  showProgress = TRUE,
  saveRawData = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt><dd><p>default number of simulations is 100</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>default seed is 12345</p>
</dd>
<dt><code>trueParameters</code></dt><dd><p>the state of nature, by default the value of <code>self$getDesignParameters()</code> as would be the case for a Type I error calculation. If changed, would yield power.</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag to show progress, default <code>TRUE</code></p>
</dd>
<dt><code>saveRawData</code></dt><dd><p>a flag (default <code>FALSE</code>) to indicate if raw data has to be saved</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a list of results
</p>


<hr>
<a id="method-ASSISTDesignB-analyze"></a>



<h4>Method <code>analyze()</code></h4>

<p>Analyze the exploration data from trial
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignB$analyze(trialExploration)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialExploration</code></dt><dd><p>the result of a call to <code>explore()</code> to simulate the design</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Return a list of summary quantities
</p>


<hr>
<a id="method-ASSISTDesignB-summary"></a>



<h4>Method <code>summary()</code></h4>

<p>Print the operating characteristics of the design using the analysis data
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignB$summary(analysis)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>analysis</code></dt><dd><p>the analysis result from the <code>analyze()</code> call</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ASSISTDesignB-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignB$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code>ASSISTDesign</code> which is a superclass of this object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(LLL.SETTINGS)
prevalence &lt;- LLL.SETTINGS$prevalences$table1
scenario &lt;- LLL.SETTINGS$scenarios$S0
designParameters &lt;- list(prevalence = prevalence,
                       mean = scenario$mean,
                       sd = scenario$sd)
designB &lt;- ASSISTDesignB$new(trialParameters = LLL.SETTINGS$trialParameters,
                            designParameters = designParameters)
print(designB)
## A realistic design uses 5000 simulations or more!
result &lt;- designB$explore(showProgress = interactive())
analysis &lt;- designB$analyze(result)
designB$summary(analysis)

## End(Not run)
## For full examples, try:
## browseURL(system.file("full_doc/ASSISTant.html", package="ASSISTant"))

</code></pre>

<hr>
<h2 id='ASSISTDesignC'>A fixed sample RCT design to compare against the adaptive clinical
trial design of Lai, Lavori and Liao.</h2><span id='topic+ASSISTDesignC'></span>

<h3>Description</h3>

<p><code>ASSISTDesignC</code> objects are used to design a trial
with certain characteristics provided in the object instantiation
method. This design differs from <code>ASSISTDesign</code> in only how it
computes the critical boundaries, how it performs the interim
look, and what quantities are computed in a trial run.
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+ASSISTDesign">ASSISTant::ASSISTDesign</a></code> -&gt; <code><a href="#topic+ASSISTDesignB">ASSISTant::ASSISTDesignB</a></code> -&gt; <code>ASSISTDesignC</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ASSISTDesignC-computeCriticalValues"><code>ASSISTDesignC$computeCriticalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignC-explore"><code>ASSISTDesignC$explore()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignC-analyze"><code>ASSISTDesignC$analyze()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignC-summary"><code>ASSISTDesignC$summary()</code></a>
</p>
</li>
<li> <p><a href="#method-ASSISTDesignC-clone"><code>ASSISTDesignC$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getBoundaries'><code>ASSISTant::ASSISTDesign$getBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getDesignParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getDesignParameters'><code>ASSISTant::ASSISTDesign$getDesignParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getTrialParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getTrialParameters'><code>ASSISTant::ASSISTDesign$getTrialParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="initialize"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-initialize'><code>ASSISTant::ASSISTDesign$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="performInterimLook"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-performInterimLook'><code>ASSISTant::ASSISTDesign$performInterimLook()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="print"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-print'><code>ASSISTant::ASSISTDesign$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="setBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-setBoundaries'><code>ASSISTant::ASSISTDesign$setBoundaries()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-ASSISTDesignC-computeCriticalValues"></a>



<h4>Method <code>computeCriticalValues()</code></h4>

<p>Compute the critical boundary values <code class="reqn">\tilde{b}</code>, <code class="reqn">b</code> and <code class="reqn">c</code> for futility, efficacy and final efficacy decisions. This is time consuming so cache where possible.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignC$computeCriticalValues()</pre></div>



<h5>Returns</h5>

<p>a named list containing the critical value <code>cAlpha</code>
</p>


<hr>
<a id="method-ASSISTDesignC-explore"></a>



<h4>Method <code>explore()</code></h4>

<p>Explore the design using the specified number of simulations and random number seed and other parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignC$explore(
  numberOfSimulations = 5000,
  rngSeed = 12345,
  trueParameters = self$getDesignParameters(),
  showProgress = TRUE,
  saveRawData = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt><dd><p>default number of simulations is 5000</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>default seed is 12345</p>
</dd>
<dt><code>trueParameters</code></dt><dd><p>the state of nature, by default the value of <code>self$getDesignParameters()</code> as would be the case for a Type I error calculation. If changed, would yield power.</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag to show progress, default <code>TRUE</code></p>
</dd>
<dt><code>saveRawData</code></dt><dd><p>a flag (default <code>FALSE</code>) to indicate if raw data has to be saved</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a list of results
</p>


<hr>
<a id="method-ASSISTDesignC-analyze"></a>



<h4>Method <code>analyze()</code></h4>

<p>Analyze the design given the <code>trialExploration</code> data
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignC$analyze(trialExploration)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialExploration</code></dt><dd><p>the results from a call to <code>explore()</code> to simulate the design</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a named list of rejections
</p>


<hr>
<a id="method-ASSISTDesignC-summary"></a>



<h4>Method <code>summary()</code></h4>

<p>Print the operating characteristics of the design using the analysis data
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignC$summary(analysis)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>analysis</code></dt><dd><p>the analysis result from the <code>analyze()</code> call</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>no value, just print
</p>


<hr>
<a id="method-ASSISTDesignC-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ASSISTDesignC$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code>ASSISTDesignB</code> which is a superclass of this object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(LLL.SETTINGS)
prevalence &lt;- LLL.SETTINGS$prevalences$table1
scenario &lt;- LLL.SETTINGS$scenarios$S0
designParameters &lt;- list(prevalence = prevalence,
                       mean = scenario$mean,
                       sd = scenario$sd)
## A realistic design uses 5000 simulations or more!
designC &lt;- ASSISTDesignC$new(trialParameters = LLL.SETTINGS$trialParameters,
                            designParameters = designParameters)
print(designC)
result &lt;- designC$explore(numberOfSimulations = 100, showProgress = interactive())
analysis &lt;- designC$analyze(result)
designC$summary(analysis)
## For full examples, try:
## browseURL(system.file("full_doc/ASSISTant.html", package="ASSISTant"))

</code></pre>

<hr>
<h2 id='colNamesForStage'>Return a vector of column names for statistics for a given stage</h2><span id='topic+colNamesForStage'></span>

<h3>Description</h3>

<p>Return a vector of column names for statistics for a given stage
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colNamesForStage(stage, J)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colNamesForStage_+3A_stage">stage</code></td>
<td>
<p>the trial stage (1 to 3 inclusive).</p>
</td></tr>
<tr><td><code id="colNamesForStage_+3A_j">J</code></td>
<td>
<p>the number of subgroups</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of the column names
</p>

<hr>
<h2 id='computeMeanAndSD'>Compute the mean and sd of a discrete Rankin distribution</h2><span id='topic+computeMeanAndSD'></span>

<h3>Description</h3>

<p>Compute the mean and sd of a discrete Rankin distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeMeanAndSD(probVec = rep(1, 7L), support = 0L:6L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeMeanAndSD_+3A_probvec">probVec</code></td>
<td>
<p>a probability vector of length equal to length of support,
default is uniform</p>
</td></tr>
<tr><td><code id="computeMeanAndSD_+3A_support">support</code></td>
<td>
<p>a vector of support values (default 0:6 for Rankin Scores)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named vector of <code>mean</code> and <code>sd</code>
</p>

<hr>
<h2 id='computeMHPBoundaries'>Compute the three modified Haybittle-Peto boundaries</h2><span id='topic+computeMHPBoundaries'></span>

<h3>Description</h3>

<p>Compute the three modified Haybittle-Peto boundaries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeMHPBoundaries(prevalence, N, alpha, beta, eps, futilityOnly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeMHPBoundaries_+3A_prevalence">prevalence</code></td>
<td>
<p>the vector of prevalences between 0 and 1 summing
to 1. <code class="reqn">J</code>, the number of groups, is implicitly the length
of this vector and should be at least 2.</p>
</td></tr>
<tr><td><code id="computeMHPBoundaries_+3A_n">N</code></td>
<td>
<p>a three-vector of total sample size at each stage</p>
</td></tr>
<tr><td><code id="computeMHPBoundaries_+3A_alpha">alpha</code></td>
<td>
<p>the type I error</p>
</td></tr>
<tr><td><code id="computeMHPBoundaries_+3A_beta">beta</code></td>
<td>
<p>the type II error</p>
</td></tr>
<tr><td><code id="computeMHPBoundaries_+3A_eps">eps</code></td>
<td>
<p>the fraction (between 0 and 1) of the type 1 error to
spend in the interim stages 1 and 2</p>
</td></tr>
<tr><td><code id="computeMHPBoundaries_+3A_futilityonly">futilityOnly</code></td>
<td>
<p>a logical value indicating only the futility
boundary is to be computed; default <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named vector of three values containing
<code class="reqn">\tilde{b}</code>, b, c
</p>

<hr>
<h2 id='computeMHPBoundaryITT'>Compute the three modified Haybittle-Peto boundaries and effect size</h2><span id='topic+computeMHPBoundaryITT'></span>

<h3>Description</h3>

<p>Compute the three modified Haybittle-Peto boundaries and effect size
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeMHPBoundaryITT(prevalence, alpha)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeMHPBoundaryITT_+3A_prevalence">prevalence</code></td>
<td>
<p>the vector of prevalences between 0 and 1 summing
to 1. <code class="reqn">J</code>, the number of groups, is implicitly the length
of this vector and should be at least 2.</p>
</td></tr>
<tr><td><code id="computeMHPBoundaryITT_+3A_alpha">alpha</code></td>
<td>
<p>the type I error</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named vector of a single value containing the value for <code>c</code>
</p>

<hr>
<h2 id='conformParameters'>Conform designParameters so that weights are turned in to probabilities, the null and control distributions are proper matrices etc.</h2><span id='topic+conformParameters'></span>

<h3>Description</h3>

<p>Conform designParameters so that weights are turned in to probabilities, the null and control distributions are proper matrices etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conformParameters(plist, discreteData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conformParameters_+3A_plist">plist</code></td>
<td>
<p>the parameter list</p>
</td></tr>
<tr><td><code id="conformParameters_+3A_discretedata">discreteData</code></td>
<td>
<p>flag if data is discrete</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the modified parameter list
</p>

<hr>
<h2 id='DEFUSE3Design'>The DEFUSE3 design</h2><span id='topic+DEFUSE3Design'></span>

<h3>Description</h3>

<p><code>DEFUSE3Design</code> is a slight variant of the the adaptive
clinical trial design of Lai, Lavori and Liao. Simulation is used to compute
the expected maximum sample size and the boundary for early futility is adjusted to
account as well.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+ASSISTDesign">ASSISTant::ASSISTDesign</a></code> -&gt; <code>DEFUSE3Design</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DEFUSE3Design-getOriginalBoundaries"><code>DEFUSE3Design$getOriginalBoundaries()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-new"><code>DEFUSE3Design$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-adjustCriticalValues"><code>DEFUSE3Design$adjustCriticalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-explore"><code>DEFUSE3Design$explore()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-performInterimLook"><code>DEFUSE3Design$performInterimLook()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-clone"><code>DEFUSE3Design$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="analyze"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-analyze'><code>ASSISTant::ASSISTDesign$analyze()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="computeCriticalValues"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-computeCriticalValues'><code>ASSISTant::ASSISTDesign$computeCriticalValues()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getBoundaries'><code>ASSISTant::ASSISTDesign$getBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getDesignParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getDesignParameters'><code>ASSISTant::ASSISTDesign$getDesignParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getTrialParameters"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getTrialParameters'><code>ASSISTant::ASSISTDesign$getTrialParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="print"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-print'><code>ASSISTant::ASSISTDesign$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="setBoundaries"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-setBoundaries'><code>ASSISTant::ASSISTDesign$setBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="summary"><a href='../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-summary'><code>ASSISTant::ASSISTDesign$summary()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DEFUSE3Design-getOriginalBoundaries"></a>



<h4>Method <code>getOriginalBoundaries()</code></h4>

<p>Return the original boundaries for the design
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$getOriginalBoundaries()</pre></div>



<h5>Returns</h5>

<p>a named vector of values for <code>b</code>, <code>btilde</code> and <code>c</code>
</p>


<hr>
<a id="method-DEFUSE3Design-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a <code>DEFUSE3Design</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$new(
  designParameters,
  trialParameters,
  discreteData = FALSE,
  numberOfSimulations = 5000,
  rngSeed = 54321,
  showProgress = TRUE,
  trueParameters = NULL,
  boundaries
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>designParameters</code></dt><dd><p>parameters of the experimental design. Must contain apropriate distributions to sample from, if <code>discreteData = TRUE</code></p>
</dd>
<dt><code>trialParameters</code></dt><dd><p>the trial parameters, such as sample size etc.</p>
</dd>
<dt><code>discreteData</code></dt><dd><p>a flag indicating that a discrete distribution is to be used for the Rankin scores</p>
</dd>
<dt><code>numberOfSimulations</code></dt><dd><p>the number of simulations to use, default 5000</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>the random number generator seed</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag to show progress (default <code>TRUE</code>)</p>
</dd>
<dt><code>trueParameters</code></dt><dd><p>a list of true parameter values reflecting the state of nature</p>
</dd>
<dt><code>boundaries</code></dt><dd><p>decision boundaries to use for interim looks, a named vector of <code>btilde</code>, <code>b</code> and <code>c</code> values</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a new <code>AssistDesign</code> object
</p>


<hr>
<a id="method-DEFUSE3Design-adjustCriticalValues"></a>



<h4>Method <code>adjustCriticalValues()</code></h4>

<p>Adjust critical values to account for sample size loss due to futility
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$adjustCriticalValues(numberOfSimulations, rngSeed, showProgress)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt><dd><p>the number of simulations to use</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>the random number generator seed</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag for showing progress</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>the adjusted boundaries
</p>


<hr>
<a id="method-DEFUSE3Design-explore"></a>



<h4>Method <code>explore()</code></h4>

<p>Explore the design using the specified number of simulations and random number seed and other parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$explore(
  numberOfSimulations = 5000,
  rngSeed = 12345,
  trueParameters = self$getDesignParameters(),
  recordStats = TRUE,
  showProgress = TRUE,
  saveRawData = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt><dd><p>default number of simulations is 5000</p>
</dd>
<dt><code>rngSeed</code></dt><dd><p>default seed is 12345</p>
</dd>
<dt><code>trueParameters</code></dt><dd><p>the state of nature, by default the value of <code>self$getDesignParameters()</code> as would be the case for a Type I error calculation. If changed, would yield power.</p>
</dd>
<dt><code>recordStats</code></dt><dd><p>a boolean flag (default <code>TRUE</code>) to record statistics</p>
</dd>
<dt><code>showProgress</code></dt><dd><p>a boolean flag to show progress, default <code>TRUE</code></p>
</dd>
<dt><code>saveRawData</code></dt><dd><p>a flag (default <code>FALSE</code>) to indicate if raw data has to be saved</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>a list of results
</p>


<hr>
<a id="method-DEFUSE3Design-performInterimLook"></a>



<h4>Method <code>performInterimLook()</code></h4>

<p>Perform an interim look for futility
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$performInterimLook(trialData, stage, recordStats = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialData</code></dt><dd><p>trial data frame</p>
</dd>
<dt><code>stage</code></dt><dd><p>the trial stage</p>
</dd>
<dt><code>recordStats</code></dt><dd><p>a boolean flag to record all statistics</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>the trial history
</p>


<hr>
<a id="method-DEFUSE3Design-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code>ASSISTDesign</code> which is a superclass of this object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trialParameters &lt;- list(N = c(200, 340, 476), type1Error = 0.025,
                        eps = 1/2, type2Error = 0.1)
designParameters &lt;- list(
   nul0 = list(prevalence = rep(1/6, 6), mean = matrix(0, 2, 6),
               sd = matrix(1, 2, 6)),
   alt1 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.4, 0.3, 0, 0, 0)),
               sd = matrix(1, 2, 6)),
   alt2 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.5, 0, 0, 0, 0)),
               sd = matrix(1,2, 6)),
   alt3 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6), rep(0.36, 6)),
               sd = matrix(1,2, 6)),
   alt4 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6), rep(0.30, 6)),
               sd = matrix(1,2, 6)),
   alt5 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.4, 0.3, 0.2, 0, 0, 0)),
               sd = matrix(1,2, 6)),
   alt6 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.5, 0.3, 0.3, 0.1, 0.1)),
               sd = matrix(1,2, 6)))

## Not run: 
## A realistic design uses 5000 simulations or more!
defuse3 &lt;- DEFUSE3Design$new(trialParameters = trialParameters,
                             numberOfSimulations = 25,
                             designParameters = designParameters$nul0,
                             showProgress = FALSE)
print(defuse3)
result &lt;- defuse3$explore(showProgress = interactive())
analysis &lt;- defuse3$analyze(result)
print(defuse3$summary(analysis))

## End(Not run)
## For full examples, try:
## browseURL(system.file("full_doc/defuse3.html", package="ASSISTant"))

</code></pre>

<hr>
<h2 id='generateDiscreteData'>A data generation function using a discrete distribution for Rankin
score rather than a normal distribution</h2><span id='topic+generateDiscreteData'></span>

<h3>Description</h3>

<p>A data generation function using a discrete distribution for Rankin
score rather than a normal distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateDiscreteData(prevalence, N, support = 0L:6L, ctlDist, trtDist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateDiscreteData_+3A_prevalence">prevalence</code></td>
<td>
<p>a vector of group prevalences (length denoted by J below)</p>
</td></tr>
<tr><td><code id="generateDiscreteData_+3A_n">N</code></td>
<td>
<p>the sample size to generate</p>
</td></tr>
<tr><td><code id="generateDiscreteData_+3A_support">support</code></td>
<td>
<p>the support values of the discrete distribution (length K), default 0:6</p>
</td></tr>
<tr><td><code id="generateDiscreteData_+3A_ctldist">ctlDist</code></td>
<td>
<p>a probability vector of length K denoting the Rankin score distribution for control.</p>
</td></tr>
<tr><td><code id="generateDiscreteData_+3A_trtdist">trtDist</code></td>
<td>
<p>an K x J probability matrix with each column is the Rankin distribution for the associated group</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a three-column data frame of <code>subGroup</code>, <code>trt</code> (0 or 1), and <code>score</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulate data from a discrete distribution for the Rankin scores,
# which are typically ordinal integers from 0 to 6 in the following
# simulations. So we define a few scenarios.
library(ASSISTant)
null.uniform &lt;- rep(1, 7L) ## uniform on 7 support points
hourglass &lt;- c(1, 2, 2, 1, 2, 2, 1)
inverted.hourglass &lt;- c(2, 1, 1, 2, 1, 1, 2)
bottom.heavy &lt;- c(2, 2, 2, 1, 1, 1, 1)
bottom.heavier &lt;- c(3, 3, 2, 2, 1, 1, 1)
top.heavy &lt;- c(1, 1, 1, 1, 2, 2, 2)
top.heavier &lt;- c(1, 1, 1, 2, 2, 3, 3)
ctlDist &lt;- null.uniform
trtDist &lt;- cbind(null.uniform, null.uniform, hourglass, hourglass) ## 4 groups
generateDiscreteData(prevalence = rep(1, 4), N = 10, ctlDist = ctlDist,
                     trtDist = trtDist) ## default support is 0:6
trtDist &lt;- cbind(bottom.heavy, bottom.heavy, top.heavy, top.heavy)
generateDiscreteData(prevalence = rep(1, 4), N = 10, ctlDist = ctlDist,
                     trtDist = trtDist)
support &lt;- c(-2, -1, 0, 1, 2) ## Support of distribution
top.loaded &lt;- c(1, 1, 1, 3, 3) ## Top is heavier
ctl.dist &lt;- c(1, 1, 1, 1, 1) ## null on 5 support points
trt.dist &lt;- cbind(ctl.dist, ctl.dist, top.loaded) ## 3 groups
generateDiscreteData(prevalence = rep(1, 3), N = 10, support = support,
                     ctlDist = ctl.dist, trtDist = trt.dist)
## ctl.dist can also be a matrix with different nulls for each subgroup
uniform &lt;- rep(1, 5)
bot.loaded &lt;- c(3, 3, 1, 1, 1)
ctl.dist &lt;- matrix(c(uniform, bot.loaded, top.loaded), nrow = 5)
generateDiscreteData(prevalence = rep(1, 3), N = 10, support = support,
                     ctlDist = ctl.dist, trtDist = trt.dist)
</code></pre>

<hr>
<h2 id='generateNormalData'>A data generation function along the lines of what was used in the Lai, Lavori, Liao paper.
score rather than a normal distribution</h2><span id='topic+generateNormalData'></span>

<h3>Description</h3>

<p>A data generation function along the lines of what was used in the Lai, Lavori, Liao paper.
score rather than a normal distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateNormalData(prevalence, N, mean, sd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateNormalData_+3A_prevalence">prevalence</code></td>
<td>
<p>a vector of group prevalences (length denoted by J below)</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_n">N</code></td>
<td>
<p>the sample size to generate</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_mean">mean</code></td>
<td>
<p>a 2 x J matrix of means under the null (first row) and alternative for each group</p>
</td></tr>
<tr><td><code id="generateNormalData_+3A_sd">sd</code></td>
<td>
<p>a 2 x J matrix of standard deviations under the null (first row) and alternative for each group</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a three-column data frame of <code>subGroup</code>, <code>trt</code> (0 or 1), and <code>score</code>
</p>

<hr>
<h2 id='groupSampleSize'>Compute the sample size for any group at a stage assuming a nested
structure as in the paper.</h2><span id='topic+groupSampleSize'></span>

<h3>Description</h3>

<p>In the three stage design under consideration, the groups are
nested with assumed prevalences and fixed total sample size at each
stage. This function returns the sample size for a specified group
at a given stage, where the futility stage for the overall group
test may be specified along with the chosen subgroup.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupSampleSize(
  prevalence,
  N,
  stage,
  group,
  HJFutileAtStage = NA,
  chosenGroup = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupSampleSize_+3A_prevalence">prevalence</code></td>
<td>
<p>the vector of prevalence, will be normalized if
not already so. The length of this vector implicitly indicates
the number of groups J.</p>
</td></tr>
<tr><td><code id="groupSampleSize_+3A_n">N</code></td>
<td>
<p>an integer vector of length 3 indicating total sample size
at each of the three stages</p>
</td></tr>
<tr><td><code id="groupSampleSize_+3A_stage">stage</code></td>
<td>
<p>the stage of the trial</p>
</td></tr>
<tr><td><code id="groupSampleSize_+3A_group">group</code></td>
<td>
<p>the group whose sample size is desired</p>
</td></tr>
<tr><td><code id="groupSampleSize_+3A_hjfutileatstage">HJFutileAtStage</code></td>
<td>
<p>is the stage at which overall futility
occured. Default <code>NA</code> indicating it did not occur. Also
ignored if stage is 1.</p>
</td></tr>
<tr><td><code id="groupSampleSize_+3A_chosengroup">chosenGroup</code></td>
<td>
<p>the selected group if HJFutilityAtStage is not
<code>NA</code>. Ignored if stage is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the sample size for group
</p>

<hr>
<h2 id='LLL.SETTINGS'>Design and trial settings used in the Lai, Lavori, Liao paper simulations</h2><span id='topic+LLL.SETTINGS'></span>

<h3>Description</h3>

<p>A list of design and trial design settings used for analysis and simulations in
the Lai, Lavori, Liao paper displayed in Tables 1 and 2. The
elements of the list are the following
</p>

<dl>
<dt>trialParameters</dt><dd>

<dl>
<dt>N</dt><dd><p>the sample size at each of three interim looks, the last being the final one;
The length of this also determines the number of interim looks</p>
</dd>
<dt>type1Error</dt><dd><p>the overall type I error</p>
</dd>
<dt>eps</dt><dd><p>the fraction of type I error spent at each interim look</p>
</dd>
<dt>type2Error</dt><dd><p>the type II error desired</p>
</dd>
</dl>

</dd>
<dt>scenarios</dt><dd>
<p>A list of the 10 settings used in the simulations named <code>S0</code>, <code>S1</code>, ...,
<code>S10</code> as in the paper, each with three elements
</p>

<dl>
<dt>mean</dt><dd><p>a <code class="reqn">2\times J</code> matrix of means, the first row for the null setting,
the second for the alternative</p>
</dd>
<dt>sd</dt><dd><p>a <code class="reqn">2\times J</code> matrix of standard deviations, the first row for the
null setting, the second for the alternative</p>
</dd>
</dl>

</dd>
<dt>prevalences</dt><dd>
<p>A list of two elements with prevalence vectors used in the paper; the lengths of these
vectors implicitly define the number of groups.
</p>

<dl>
<dt>table1</dt><dd><p>a vector of equal prevalences for six groups used in table 1</p>
</dd>
<dt>table2</dt><dd><p>a vector of prevalences used in table 2 of the paper</p>
</dd>
</dl>

</dd>
</dl>



<h3>References</h3>

<p>Adaptive Choice of Patient Subgroup for Comparing Two
Treatments by Tze Leung Lai and Philip W. Lavori and Olivia
Yueh-Wen Liao. Contemporary Clinical Trials, Vol. 39, No. 2, pp
191-200 (2014, <a href="https://doi.org/10.1016/j.cct.2014.09.001">doi:10.1016/j.cct.2014.09.001</a>).
</p>

<hr>
<h2 id='mHP.b'>Compute the efficacy boundary (modified Haybittle-Peto) for the
first two stages</h2><span id='topic+mHP.b'></span>

<h3>Description</h3>

<p>Compute the efficacy boundary (modified Haybittle-Peto) for the
first two stages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mHP.b(prevalence, N, cov.J, mu.prime, Sigma.prime, alpha, btilde, theta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mHP.b_+3A_prevalence">prevalence</code></td>
<td>
<p>the vector of prevalences between 0 and 1 summing
to 1. <code class="reqn">J</code>, the number of groups, is implicitly the length
of this vector and should be at least 2.</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_n">N</code></td>
<td>
<p>a three-vector of total sample size at each stage</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_cov.j">cov.J</code></td>
<td>
<p>the 3 x 3 covariance matrix for Z_J at each of the
three stages</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_mu.prime">mu.prime</code></td>
<td>
<p>a list of <code class="reqn">J</code> mean vectors, each of length
<code class="reqn">J-1</code> representing the conditional means of all the other
<code class="reqn">Z_j</code> given <code class="reqn">Z_i</code>. This mean does not account for the
conditioned value of <code class="reqn">Z_i</code> and so has to be multiplied by
that during use!</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_sigma.prime">Sigma.prime</code></td>
<td>
<p>a list of <code class="reqn">J</code> covariance matrices, each
<code class="reqn">J-1</code> by <code class="reqn">J-1</code> representing the conditional covariances
all the other <code class="reqn">Z_j</code> given <code class="reqn">Z_i</code></p>
</td></tr>
<tr><td><code id="mHP.b_+3A_alpha">alpha</code></td>
<td>
<p>the amount of type I error to spend</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_btilde">btilde</code></td>
<td>
<p>the futility boundary</p>
</td></tr>
<tr><td><code id="mHP.b_+3A_theta">theta</code></td>
<td>
<p>the effect size on the probability scale</p>
</td></tr>
</table>

<hr>
<h2 id='mHP.btilde'>Compute the futility boundary (modified Haybittle-Peto) for the
first two stages</h2><span id='topic+mHP.btilde'></span>

<h3>Description</h3>

<p>The futility boundary <code class="reqn">\tilde{b}</code> is computed by
solving (under the alternative)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mHP.btilde(beta, cov.J)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mHP.btilde_+3A_beta">beta</code></td>
<td>
<p>the type II error</p>
</td></tr>
<tr><td><code id="mHP.btilde_+3A_cov.j">cov.J</code></td>
<td>
<p>the 3 x 3 covariance matrix</p>
</td></tr>
</table>


<h3>Details</h3>

<p style="text-align: center;"><code class="reqn">
P(\tilde{Z}_J^1\le\tilde{b} or \tilde{Z}_J^2\le\tilde{b}) = \epsilon\beta </code>
</p>

<p>where the superscripts denote the stage and <code class="reqn">\epsilon</code> is the
fraction of the type I error (<code class="reqn">\alpha</code>) spent and <code class="reqn">\beta</code>
is the type II error. We make use of the joint normal density of
<code class="reqn">Z_{J}</code> (the overall group) at each of the three stages and the
fact that the <code class="reqn">\tilde{Z_J}</code> is merely a translation of
<code class="reqn">Z_J</code>. So here the calculation is based on a mean of zero and
has to be translated during use!
</p>

<hr>
<h2 id='mHP.c'>Compute the efficacy boundary (modified Haybittle-Peto) for the
final (third) stage</h2><span id='topic+mHP.c'></span>

<h3>Description</h3>

<p>Compute the efficacy boundary (modified Haybittle-Peto) for the
final (third) stage
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mHP.c(prevalence, N, cov.J, mu.prime, Sigma.prime, alpha, btilde, b, theta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mHP.c_+3A_prevalence">prevalence</code></td>
<td>
<p>the vector of prevalences between 0 and 1 summing
to 1. <code class="reqn">J</code>, the number of groups, is implicitly the length
of this vector and should be at least 2.</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_n">N</code></td>
<td>
<p>a three-vector of total sample size at each stage</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_cov.j">cov.J</code></td>
<td>
<p>the 3 x 3 covariance matrix for Z_J at each of the
three stages</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_mu.prime">mu.prime</code></td>
<td>
<p>a list of <code class="reqn">J</code> mean vectors, each of length
<code class="reqn">J-1</code> representing the conditional means of all the other
<code class="reqn">Z_j</code> given <code class="reqn">Z_i</code>. This mean does not account for the
conditioned value of <code class="reqn">Z_i</code> and so has to be multiplied by
that during use!</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_sigma.prime">Sigma.prime</code></td>
<td>
<p>a list of <code class="reqn">J</code> covariance matrices, each
<code class="reqn">J-1</code> by <code class="reqn">J-1</code> representing the conditional covariances
all the other <code class="reqn">Z_j</code> given <code class="reqn">Z_i</code></p>
</td></tr>
<tr><td><code id="mHP.c_+3A_alpha">alpha</code></td>
<td>
<p>the amount of type I error to spend</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_btilde">btilde</code></td>
<td>
<p>the futility boundary</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_b">b</code></td>
<td>
<p>the efficacy boundary for the first two stages</p>
</td></tr>
<tr><td><code id="mHP.c_+3A_theta">theta</code></td>
<td>
<p>the effect size on the probability scale</p>
</td></tr>
</table>

<hr>
<h2 id='scalarInRange'>Is a scalar quantity is a specified range?</h2><span id='topic+scalarInRange'></span><span id='topic+numberInRange'></span><span id='topic+scalarIntegerInRange'></span><span id='topic+integerInRange'></span><span id='topic+den.vs'></span>

<h3>Description</h3>

<p>Check if the argument is a scalar within specified range
</p>
<p>Check if the argument is within specified range
</p>
<p>Check if the argument is a scalar integer within specified range
</p>
<p>Check if the argument is an integer vector within specified range
</p>
<p>The computation involves a <code class="reqn">J-1</code> multivariate normal integral
of the conditional density of the <code class="reqn">i</code>-th subgroup statistic
given that it was maximal among all subgroups:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scalarInRange(x, low = -Inf, high = Inf)

numberInRange(x, low = -Inf, high = Inf)

scalarIntegerInRange(x, low = -Inf, high = Inf)

integerInRange(x, low = -Inf, high = Inf)

den.vs(v, i, mu.prime, Sigma.prime, fut)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scalarInRange_+3A_low">low</code></td>
<td>
<p>the lower bound, default <code>-Inf</code></p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_high">high</code></td>
<td>
<p>the upper bound, default <code>Inf</code></p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_v">v</code></td>
<td>
<p>the value of the statistic</p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_i">i</code></td>
<td>
<p>the subgroup</p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_mu.prime">mu.prime</code></td>
<td>
<p>the conditional mean vector of the distribution of
length <code class="reqn">J - 1</code>; needs to be multipled by the conditional
value, the parameter <code>v</code>.</p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_sigma.prime">Sigma.prime</code></td>
<td>
<p>the conditional covariance matrix of dimension
<code class="reqn">J-1</code> by <code class="reqn">J-1</code></p>
</td></tr>
<tr><td><code id="scalarInRange_+3A_fut">fut</code></td>
<td>
<p>the futility boundary, which is <code class="reqn">\tilde{b}</code>
for stages 1 and 2, but <code class="reqn">c</code> for stage 3</p>
</td></tr>
</table>


<h3>Details</h3>

<p style="text-align: center;"><code class="reqn">
\phi_i(v)(\int_0^v\int_0^v\ldots
\int_0^{\tilde{b}} \phi_v(z_{-i})dz_{-i})
</code>
</p>

<p>where <code class="reqn">z_{-i}</code> denotes all subgroups other than <code class="reqn">i</code>.
</p>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code>
</p>
<p><code>TRUE</code> or <code>FALSE</code>
</p>
<p><code>TRUE</code> or <code>FALSE</code>
</p>
<p><code>TRUE</code> or <code>FALSE</code>
</p>
<p>the conditional probability
</p>

<hr>
<h2 id='wilcoxon'>Compute the standardized Wilcoxon test statistic for two samples</h2><span id='topic+wilcoxon'></span>

<h3>Description</h3>

<p>We compute the standardized Wilcoxon test statistic with mean 0 and
and standard deviation 1 for samples <code class="reqn">x</code> and <code class="reqn">y</code>.  The R function
<code><a href="stats.html#topic+wilcox.test">stats::wilcox.test()</a></code> returns the statistic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wilcoxon(x, y, theta = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wilcoxon_+3A_x">x</code></td>
<td>
<p>a sample numeric vector</p>
</td></tr>
<tr><td><code id="wilcoxon_+3A_y">y</code></td>
<td>
<p>a sample numeric vector</p>
</td></tr>
<tr><td><code id="wilcoxon_+3A_theta">theta</code></td>
<td>
<p>a value &gt; 0 but &lt; 1/2.</p>
</td></tr>
</table>


<h3>Details</h3>

<p style="text-align: center;"><code class="reqn">
U = \sum_i R_i - \frac{m(m + 1)}{2}
</code>
</p>

<p>where <code class="reqn">R_i</code> are the ranks of the first sample <code class="reqn">x</code> of size
<code class="reqn">m</code>. We compute
</p>
<p style="text-align: center;"><code class="reqn">
\frac{(U - mn(1/2 + \theta))}{\sqrt{mn(m + n + 1) / 12}}
</code>
</p>

<p>where <code class="reqn">\theta</code> is the alternative hypothesis shift on the
probability scale, i.e. <code class="reqn">P(X &gt; Y) = 1/2 + \theta</code>.
</p>


<h3>Value</h3>

<p>the standardized Wilcoxon statistic
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
