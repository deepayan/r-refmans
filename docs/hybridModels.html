<!DOCTYPE html><html><head><title>Help for package hybridModels</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hybridModels}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#buildModelClass'><p>It builds an object of a pre-specified class.</p></a></li>
<li><a href='#findContactChain'><p>Finding elements in contact chains of a dynamic network.</p></a></li>
<li><a href='#hybridModel'><p>Hybrid model simulation.</p></a></li>
<li><a href='#hybridModels'><p>hybridModels: an R package for stochastic simulation of disease spreading in dynamic networks.</p></a></li>
<li><a href='#networkSample'><p>Daily record of animal's movement (from 2012 to 2013).</p></a></li>
<li><a href='#nodesCensus'><p>Information about animal premises (from 2012 to 2013).</p></a></li>
<li><a href='#plot'><p>Summary plots for hybrid Models</p></a></li>
<li><a href='#simHM'><p>It runs the chosen hybrid model.</p></a></li>
<li><a href='#summary'><p>summary for hybrid models</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3.7</td>
</tr>
<tr>
<td>Title:</td>
<td>An R Package for the Stochastic Simulation of Disease Spreading
in Dynamic Networks</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-06-25</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.1),</td>
</tr>
<tr>
<td>Imports:</td>
<td>doParallel, doRNG, foreach, ggplot2, GillespieSSA, parallel,
reshape2, stats, stringr, grid</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulates stochastic hybrid models for transmission of infectious
    diseases in dynamic networks. It is a metapopulation model in which each
    node in the network is a sub-population and disease spreads within nodes
    and among them, combining two approaches: stochastic simulation algorithm
    (&lt;<a href="https://doi.org/10.1146%2Fannurev.physchem.58.032806.104637">doi:10.1146/annurev.physchem.58.032806.104637</a>&gt;) and individual-based
    approach, respectively. Equations that models spread within nodes are
    customizable and there are two link types among nodes: migration and
    influence (commuting). More information in Fernando S. Marques,
    Jose H. H. Grisi-Filho, Marcos Amaku et al. (2020) &lt;<a href="https://doi.org/10.18637%2Fjss.v094.i06">doi:10.18637/jss.v094.i06</a>&gt;.</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>true</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Author:</td>
<td>Fernando S. Marques [aut, cre],
  Jose H. H. Grisi-Filho [aut],
  Marcos Amaku [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Fernando S. Marques &lt;fernandosix@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/fernandosm/hybridModels">https://github.com/fernandosm/hybridModels</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/fernandosm/hybridModels/issues">https://github.com/fernandosm/hybridModels/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-25 22:40:27 UTC; zion</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-26 14:50:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='buildModelClass'>It builds an object of a pre-specified class.</h2><span id='topic+buildModelClass'></span>

<h3>Description</h3>

<p><code>buildModelClass</code> is generic function that calls a method
to create a object base on model's name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>buildModelClass(
  x,
  var.names,
  init.cond,
  model.parms,
  probWeights,
  emigrRule,
  prop.func = NULL,
  state.var = NULL,
  infl.var = NULL,
  state.change.matrix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="buildModelClass_+3A_x">x</code></td>
<td>
<p>is an empty object of a class requested.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_var.names">var.names</code></td>
<td>
<p>a <code><a href="base.html#topic+list">list</a></code> with variable names of the network:
the donor node, the receiver node, the time when each connection between
donor to the receiver happened and the weight of these connection.
The variables names must be &quot;from&quot;, &quot;to&quot;, &quot;Time&quot; and &quot;arc&quot;, respectively.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_init.cond">init.cond</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> with initial conditions.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_model.parms">model.parms</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> with model's parameters.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_probweights">probWeights</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> (optional and for migration type
only) mapping state variables to migration probability weights based on
state variables. These argument can be used to give weights for sampling
individuals from node. They need not sum to one, they should be
non-negative and not zero. For more information on the sampling method
<a href="base.html#topic+sample">sample</a>.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_emigrrule">emigrRule</code></td>
<td>
<p>a string (optional and for migration type only) stating how
many individual emigrate based on state variables. It requires that the
network have weights instead of number of individuals that migrate.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_prop.func">prop.func</code></td>
<td>
<p>a character <code><a href="base.html#topic+vector">vector</a></code> with propensity functions
of a generic node. See references for more details</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_state.var">state.var</code></td>
<td>
<p>a character <code><a href="base.html#topic+vector">vector</a></code> with the state variables of
the propensity functions.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_infl.var">infl.var</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> mapping state variables to influence
variables.</p>
</td></tr>
<tr><td><code id="buildModelClass_+3A_state.change.matrix">state.change.matrix</code></td>
<td>
<p>is a state-change <code><a href="base.html#topic+matrix">matrix</a></code>. See references
for more details</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the class requested.
</p>


<h3>References</h3>

<p>.
</p>

<hr>
<h2 id='findContactChain'>Finding elements in contact chains of a dynamic network.</h2><span id='topic+findContactChain'></span>

<h3>Description</h3>

<p>Parallel function to find outgoing and ingoing contact chain
elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findContactChain(
  Data,
  from,
  to,
  Time,
  selected.nodes,
  type = "size",
  numberOfcores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findContactChain_+3A_data">Data</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">data.frame</a></code> with network information: node ID, origin
node, destination node, and the time in which the link was established.</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_from">from</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code>, variable name (column name) for origin node.</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_to">to</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code>, variable name (column name) for destination node.</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_time">Time</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code>, variable name (column name) for the time
in which the link was established between two nodes.</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_selected.nodes">selected.nodes</code></td>
<td>
<p><code><a href="base.html#topic+vector">vector</a></code>, the function will find the contact
chain of the nodes present in the selected.nodes vector.</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_type">type</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code>, of returned result. type = 'size' (default),
will return the size of 'outgoing' and 'ingoing' contact chains.
Type = 'chain' will return also the nodes in each chain (might be slow
for big data sets).</p>
</td></tr>
<tr><td><code id="findContactChain_+3A_numberofcores">numberOfcores</code></td>
<td>
<p><code><a href="base.html#topic+integer">integer</a></code>, number of cores used to calculate
the contact chain (default is NULL, that will lead the algorithm to
use the max number of cores).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a function that find elements of a contact chain from a dynamic
network.
</p>


<h3>Value</h3>

<p>setting type = 'size', it returns a <code><a href="base.html#topic+data.frame">data.frame</a></code> with ingoing
and outgoing contact chains size, add 1 to include the selected.nodes.
Setting type = 'chain', it returns a <code><a href="base.html#topic+list">list</a></code> with the data
frame and elements of ingoing and outgoing chains.
</p>


<h3>References</h3>

<p>[1] C Dube, C Ribble, D Kelton, et al. Comparing network analysis measures to
determine potential epidemic size of highly contagious exotic diseases in
fragmented monthly networks of dairy cattle movements in Ontario, Canada.
In: Transboundary and emerging diseases 55.9-10 (Dec. 2008), pp. 382-392.
</p>
<p>[2] C Dube, C Ribble, D Kelton, et al. A review of network analysis terminology
and its application to foot-and-mouth disease modeling and policy development.
In: Transboundary and emerging diseases 56.3 (Apr. 2009), pp. 73-85.
</p>
<p>[3] Fernando S. Marques, Jose H. H. Grisi-Filho, Marcos Amaku et al.
hybridModels: An R Package for the Stochastic Simulation of Disease Spreading
in Dynamic Network. In: Jounal of Statistical Software Volume 94, Issue 6
&lt;doi:10.18637/jss.v094.i06&gt;.
</p>
<p>[4] Jenny Frossling, Anna Ohlson, Camilla Bjorkman, et al. Application of
network analysis parameters in risk-based surveillance - Examples based
on cattle trade data and bovine infections in Sweden. In:  Preventive
veterinary medicine 105.3 (July 2012), pp. 202-208.
&lt;doi:10.1016/j.prevetmed.2011.12.011&gt;.
</p>
<p>[5] K Buttner, J Krieter, and I Traulsen. Characterization of Contact Structures
for the Spread of Infectious Diseases in a Pork Supply Chain in Northern
Germany by Dynamic Network Analysis of Yearly and Monthly Networks. In:
Transboundary and emerging diseases 2000 (May 2013), pp. 1-12.
</p>
<p>[6] Maria Noremark, Nina Ha kansson, Susanna Sternberg Lewerin, et al.
Network analysis of cattle and pig movements in Sweden: measures relevant
for disease control and risk based surveillance. In: Preventive veterinary
medicine 99.2-4 (2011), pp. 78-90. &lt;doi:10.1016/j.prevetmed.2010.12.009&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Loading data
data(networkSample) # help("networkSample"), for more info.
 
# contact chain function
selected.nodes &lt;- c(37501, 36811, 36812)
contact.chain &lt;- findContactChain(Data = networkSample, from = 'originID',
                                  to = 'destinationID', Time = 'Day', selected.nodes,
                                  type = 'chain', numberOfcores = 2)
</code></pre>

<hr>
<h2 id='hybridModel'>Hybrid model simulation.</h2><span id='topic+hybridModel'></span>

<h3>Description</h3>

<p><code>hybridModel</code> function runs hybrid models simulations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hybridModel(
  network = stop("undefined 'network'"),
  var.names = NULL,
  link.type = "migration",
  model = "custom",
  probWeights = NULL,
  emigrRule = NULL,
  init.cond = stop("undefined 'initial conditions'"),
  fill.time = F,
  model.parms = stop("undefined 'model parmeters'"),
  prop.func = NULL,
  state.var = NULL,
  infl.var = NULL,
  state.change.matrix = NULL,
  ssa.method = NULL,
  nodesCensus = NULL,
  sim.number = 1,
  pop.correc = TRUE,
  num.cores = "max"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hybridModel_+3A_network">network</code></td>
<td>
<p>a <code><a href="base.html#topic+data.frame">data.frame</a></code> with variables that describe
the donor node, the receiver node, the time when each connection between
donor to the receiver happened and the number of individual or weight of
these connection.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_var.names">var.names</code></td>
<td>
<p>a <code><a href="base.html#topic+list">list</a></code> with variable names of the network:
the donor node, the receiver node, the time when each connection between
donor to the receiver happened and the weight of these connection.
The variables names must be &quot;from&quot;, &quot;to&quot;, &quot;Time&quot; and &quot;arc&quot;, respectively.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_link.type">link.type</code></td>
<td>
<p>a <code><a href="base.html#topic+character">character</a></code> describing the link type between 
nodes. There are two types: 'migration' and 'influence'. In the migration
link type there are actual migration between nodes. In the influence 
link type individuals does not migrate, just influences another node.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_model">model</code></td>
<td>
<p>a <code><a href="base.html#topic+character">character</a></code> describing model's name.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_probweights">probWeights</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> (optional and for migration type
only) mapping state variables to migration probability weights based on
state variables. These argument can be used to give weights for sampling
individuals from node. They need not sum to one, they should be
non-negative and not zero. For more information on the sampling method
<a href="base.html#topic+sample">sample</a>.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_emigrrule">emigrRule</code></td>
<td>
<p>a string (optional and for migration type only) stating how
many individual emigrate based on state variables. It requires that the
network have weights instead of number of individuals that migrate.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_init.cond">init.cond</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> with initial conditions.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_fill.time">fill.time</code></td>
<td>
<p>It indicates whether to return all dates or just the dates
when nodes get connected.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_model.parms">model.parms</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> with model's parameters.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_prop.func">prop.func</code></td>
<td>
<p>a character <code><a href="base.html#topic+vector">vector</a></code> with propensity functions
of a generic node. See references for more details</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_state.var">state.var</code></td>
<td>
<p>a character <code><a href="base.html#topic+vector">vector</a></code> with the state variables of
the propensity functions.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_infl.var">infl.var</code></td>
<td>
<p>a named <code><a href="base.html#topic+vector">vector</a></code> mapping state variables to influence
variables.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_state.change.matrix">state.change.matrix</code></td>
<td>
<p>is a state-change <code><a href="base.html#topic+matrix">matrix</a></code>. See references
for more details</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_ssa.method">ssa.method</code></td>
<td>
<p>a <code><a href="base.html#topic+list">list</a></code> with SSA parameters. The default method
is the direct method. See references for more details</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_nodescensus">nodesCensus</code></td>
<td>
<p>a <code><a href="base.html#topic+data.frame">data.frame</a></code> with the first column describing
nodes' ID, the second column with the number of individuals and the third
describing the day of the census.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_sim.number">sim.number</code></td>
<td>
<p>Number of repetitions.The default value is 1</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_pop.correc">pop.correc</code></td>
<td>
<p>Whether <code>hybridModel</code> function tries to balance the number
of individuals or not. The default value is TRUE.</p>
</td></tr>
<tr><td><code id="hybridModel_+3A_num.cores">num.cores</code></td>
<td>
<p>number of  threads/cores that the simulation will use. the
default value is num.cores = 'max', the Algorithm will use all
threads/cores available.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object containing a <code><a href="base.html#topic+data.frame">data.frame</a></code> (results) with the number
of individuals through time per node and per state.
</p>


<h3>References</h3>

<p>[1] Pineda-krch, M. (2008). GillespieSSA : Implementing the Stochastic
Simulation Algorithm in R. Journal of Statistical Software, Volume 25
Issue 12 &lt;doi:10.1146/annurev.physchem.58.032806.104637&gt;.
</p>
<p>[2] Fernando S. Marques, Jose H. H. Grisi-Filho, Marcos Amaku et al.
hybridModels: An R Package for the Stochastic Simulation of Disease Spreading
in Dynamic Network. In: Jounal of Statistical Software Volume 94, Issue 6
&lt;doi:10.18637/jss.v094.i06&gt;.
</p>


<h3>See Also</h3>

<p><a href="GillespieSSA.html#topic+GillespieSSA">GillespieSSA</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Migration model
# Parameters and initial conditions for an SIS model
# loading the data set 
data(networkSample) # help("networkSample"), for more info
networkSample &lt;- networkSample[which(networkSample$Day &lt; "2012-03-20"),]

var.names &lt;- list(from = 'originID', to = 'destinationID', Time = 'Day',
                  arc = 'num.animals')
                  
prop.func &lt;- c('beta * S * I / (S + I)', 'gamma * I')
state.var &lt;- c('S', 'I')
state.change.matrix &lt;- matrix(c(-1,  1,  # S
                                 1, -1), # I
                              nrow = 2, ncol = 2, byrow = TRUE)
                              
model.parms &lt;- c(beta = 0.1, gamma = 0.01)

init.cond &lt;- rep(100, length(unique(c(networkSample$originID,
                                      networkSample$destinationID))))
names(init.cond) &lt;- paste('S', unique(c(networkSample$originID,
                                        networkSample$destinationID)), sep = '')
init.cond &lt;- c(init.cond, c(I36811 = 10, I36812 = 10)) # adding infection
                  
# running simulations, check the number of cores available (num.cores)
sim.results &lt;- hybridModel(network = networkSample, var.names = var.names,
                           model.parms = model.parms, state.var = state.var,
                           prop.func = prop.func, init.cond = init.cond,
                           state.change.matrix = state.change.matrix,
                           sim.number = 2, num.cores = 2)

# default plot layout (plot.types: 'pop.mean', 'subpop', or 'subpop.mean')
plot(sim.results, plot.type = 'subpop.mean')

# changing plot layout with ggplot2 (example)
# uncomment the lines below to test new layout exemple
#library(ggplot2)
#plot(sim.results, plot.type = 'subpop') + ggtitle('New Layout') + 
#  theme_bw() + theme(axis.title = element_text(size = 14, face = "italic"))

# Influence model
# Parameters and initial conditions for an SIS model
# loading the data set 
data(networkSample) # help("networkSample"), for more info
networkSample &lt;- networkSample[which(networkSample$Day &lt; "2012-03-20"),]

var.names &lt;- list(from = 'originID', to = 'destinationID', Time = 'Day',
                  arc = 'num.animals')
                  
prop.func &lt;- c('beta * S * (I + i) / (S + I + s + i)', 'gamma * I')
state.var &lt;- c('S', 'I')
infl.var &lt;- c(S = "s", I = "i") # mapping influence
state.change.matrix &lt;- matrix(c(-1,  1,  # S
                                 1, -1), # I
                              nrow = 2, ncol = 2, byrow = TRUE)
                              
model.parms &lt;- c(beta = 0.1, gamma = 0.01)

init.cond &lt;- rep(100, length(unique(c(networkSample$originID,
                                      networkSample$destinationID))))
names(init.cond) &lt;- paste('S', unique(c(networkSample$originID,
                                        networkSample$destinationID)), sep = '')
init.cond &lt;- c(init.cond, c(I36811 = 10, I36812 = 10)) # adding infection
                  
# running simulations, check num of cores available (num.cores)
# Uncomment to run
# sim.results &lt;- hybridModel(network = networkSample, var.names = var.names,
#                            model.parms = model.parms, state.var = state.var,
#                            infl.var = infl.var, prop.func = prop.func,
#                            init.cond = init.cond,
#                            state.change.matrix = state.change.matrix,
#                            sim.number = 2, num.cores = 2)

# default plot layout (plot.types: 'pop.mean', 'subpop', or 'subpop.mean')
# plot(sim.results, plot.type = 'subpop.mean')

</code></pre>

<hr>
<h2 id='hybridModels'>hybridModels: an R package for stochastic simulation of disease spreading in dynamic networks.</h2><span id='topic+hybridModels'></span>

<h3>Description</h3>

<p>The hybridModels package provides functions to simulate stochastic models
in dynamics networks, using two processes in different scales:
1 Global scale to simulate the transmission from one node to another
2 Local scale to simulate the transmission inside the node
</p>


<h3>Modeling transmission of diseases</h3>

<p>'Framework to run n simulations in dynamic network and plot results'
</p>

<hr>
<h2 id='networkSample'>Daily record of animal's movement (from 2012 to 2013).</h2><span id='topic+networkSample'></span>

<h3>Description</h3>

<p>One dataset containing the number of animals that were moved from one node to 
another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>networkSample
</code></pre>


<h3>Format</h3>

<p>A data frame with 78 rows and 4 variables:
</p>

<ul>
<li><p> Day: The day when the movement occurs
</p>
</li>
<li><p> originID: The ID of the origin premises
</p>
</li>
<li><p> destinationID: The ID of the destination premises
</p>
</li>
<li><p> num.animals: The number of animals traded
</p>
</li></ul>



<h3>Source</h3>

<p>ADAGRO
</p>

<hr>
<h2 id='nodesCensus'>Information about animal premises (from 2012 to 2013).</h2><span id='topic+nodesCensus'></span>

<h3>Description</h3>

<p>A dataset containing animal premises' identification and census.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nodesCensus
</code></pre>


<h3>Format</h3>

<p>A data frame with 507 rows and 2 variables:
</p>

<ul>
<li><p> nodes.ID: The ID of the premises
</p>
</li>
<li><p> pop: premises's population size
</p>
</li></ul>


<hr>
<h2 id='plot'>Summary plots for hybrid Models</h2><span id='topic+plot'></span><span id='topic+plot.HM'></span>

<h3>Description</h3>

<p><code>plot.HM</code> is a method to plot hybrid models from this
package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'HM'
plot(x, sim = 1, plot.type = "subpop", facet.scales = "free_y", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_+3A_x">x</code></td>
<td>
<p><code>HM</code> object</p>
</td></tr>
<tr><td><code id="plot_+3A_sim">sim</code></td>
<td>
<p>indicates which simulation to plot.</p>
</td></tr>
<tr><td><code id="plot_+3A_plot.type">plot.type</code></td>
<td>
<p>plots the mean number of each state variable for the whole
population ('pop.mean'), or the subpopulations of a particular
simulation ('subpop', default value), or the mean of each subpopulation
('subpop.mean').</p>
</td></tr>
<tr><td><code id="plot_+3A_facet.scales">facet.scales</code></td>
<td>
<p>should scales be fixed (&quot;free_y&quot;, the default), free (&quot;free&quot;), or free
in one dimension (&quot;free_x&quot;, &quot;free_y&quot;). See ggplot2 package for more
details.</p>
</td></tr>
<tr><td><code id="plot_+3A_...">...</code></td>
<td>
<p>arguments to be passed to methods.</p>
</td></tr>
</table>


<h3>References</h3>

<p>[1] Fernando S. Marques, Jose H. H. Grisi-Filho, Marcos Amaku et al.
hybridModels: An R Package for the Stochastic Simulation of Disease Spreading
in Dynamic Network. In: Jounal of Statistical Software Volume 94, Issue 6
&lt;doi:10.18637/jss.v094.i06&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Parameters and initial conditions for an SIS model
# loading the data set 
data(networkSample) # help("networkSample"), for more info
networkSample &lt;- networkSample[which(networkSample$Day &lt; "2012-03-20"),]

var.names &lt;- list(from = 'originID', to = 'destinationID', Time = 'Day',
                  arc = 'num.animals')
                  
prop.func &lt;- c('beta * S * I / (S + I)', 'gamma * I')
state.var &lt;- c('S', 'I')
state.change.matrix &lt;- matrix(c(-1,  1,  # S
                                 1, -1), # I
                              nrow = 2, ncol = 2, byrow = TRUE)
                              
model.parms &lt;- c(beta = 0.1, gamma = 0.01)

init.cond &lt;- rep(100, length(unique(c(networkSample$originID,
                                      networkSample$destinationID))))
names(init.cond) &lt;- paste('S', unique(c(networkSample$originID,
                                        networkSample$destinationID)), sep = '')
init.cond &lt;- c(init.cond, c(I36811 = 10, I36812 = 10)) # adding infection
                  
# running simulations, check num of cores available (num.cores)
sim.results &lt;- hybridModel(network = networkSample, var.names = var.names,
                           model.parms = model.parms, state.var = state.var,
                           prop.func = prop.func, init.cond = init.cond,
                           state.change.matrix = state.change.matrix,
                           sim.number = 2, num.cores = 2)

# default plot layout (plot.types: 'pop.mean', 'subpop', or 'subpop.mean')
plot(sim.results, plot.type = 'subpop.mean')

# changing plot layout with ggplot2 (example)
# uncomment the lines below to test new layout exemple
#library(ggplot2)
#plot(sim.results, plot.type = 'subpop') + ggtitle('New Layout') + 
#  theme_bw() + theme(axis.title = element_text(size = 14, face = "italic"))

</code></pre>

<hr>
<h2 id='simHM'>It runs the chosen hybrid model.</h2><span id='topic+simHM'></span>

<h3>Description</h3>

<p><code>simHM</code> is generic function that calls a method to run the
simulation base on object's class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simHM(x, network, sim.number, num.cores = "max", fill.time)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simHM_+3A_x">x</code></td>
<td>
<p>of a specific class of model.</p>
</td></tr>
<tr><td><code id="simHM_+3A_network">network</code></td>
<td>
<p>a <code><a href="base.html#topic+data.frame">data.frame</a></code> with variables that describe
the donor node, the receiver node, the time when each connection between
donor to the receiver happened and the number of individual or weight of
these connection.</p>
</td></tr>
<tr><td><code id="simHM_+3A_sim.number">sim.number</code></td>
<td>
<p>Number of repetitions.The default value is 1</p>
</td></tr>
<tr><td><code id="simHM_+3A_num.cores">num.cores</code></td>
<td>
<p>number of  threads/cores that the simulation will use. the
default value is num.cores = 'max', the Algorithm will use all
threads/cores available.</p>
</td></tr>
<tr><td><code id="simHM_+3A_fill.time">fill.time</code></td>
<td>
<p>It indicates whether to return all dates or just the dates
when nodes get connected.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> with the number of individuals through
time per node, per state and per simulation.
</p>


<h3>References</h3>

<p>.
</p>


<h3>See Also</h3>

<p><a href="GillespieSSA.html#topic+GillespieSSA">GillespieSSA</a>.
</p>

<hr>
<h2 id='summary'>summary for hybrid models</h2><span id='topic+summary'></span><span id='topic+summary.HM'></span>

<h3>Description</h3>

<p><code>summary.HM</code> is a method to print a summary with basic
description of nodes' states at a specific time (the time must
be present in the network data). The default value is Null,
that means it prints nodes' final states.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'HM'
summary(object, at = NULL, stateVars = NULL, nodes = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_+3A_object">object</code></td>
<td>
<p><code>HM</code> object</p>
</td></tr>
<tr><td><code id="summary_+3A_at">at</code></td>
<td>
<p>the date (as character) that will be used to print the summary</p>
</td></tr>
<tr><td><code id="summary_+3A_statevars">stateVars</code></td>
<td>
<p><code><a href="base.html#topic+vector">vector</a></code> containing the state variable to
summarize. The default value is NULL, which will print a
summary with all states.</p>
</td></tr>
<tr><td><code id="summary_+3A_nodes">nodes</code></td>
<td>
<p><code><a href="base.html#topic+vector">vector</a></code> containing the nodes of interest. The
default value is NULL, which will print a summary with all
nodes.</p>
</td></tr>
<tr><td><code id="summary_+3A_...">...</code></td>
<td>
<p>arguments to be passed to methods.</p>
</td></tr>
</table>


<h3>References</h3>

<p>[1] Fernando S. Marques, Jose H. H. Grisi-Filho, Marcos Amaku et al.
hybridModels: An R Package for the Stochastic Simulation of Disease Spreading
in Dynamic Network. In: Jounal of Statistical Software Volume 94, Issue 6
&lt;doi:10.18637/jss.v094.i06&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Parameters and initial conditions for an SIS model
# loading the data set 
data(networkSample) # help("networkSample"), for more info
networkSample &lt;- networkSample[which(networkSample$Day &lt; "2012-03-20"),]

var.names &lt;- list(from = 'originID', to = 'destinationID', Time = 'Day',
                  arc = 'num.animals')
                  
prop.func &lt;- c('beta * S * I / (S + I)', 'gamma * I')
state.var &lt;- c('S', 'I')
state.change.matrix &lt;- matrix(c(-1,  1,  # S
                                 1, -1), # I
                              nrow = 2, ncol = 2, byrow = TRUE)
                              
model.parms &lt;- c(beta = 0.1, gamma = 0.01)

init.cond &lt;- rep(100, length(unique(c(networkSample$originID,
                                      networkSample$destinationID))))
names(init.cond) &lt;- paste('S', unique(c(networkSample$originID,
                                        networkSample$destinationID)), sep = '')
init.cond &lt;- c(init.cond, c(I36811 = 10, I36812 = 10)) # adding infection
                  
# running simulations, check num of cores available (num.cores)
sim.results &lt;- hybridModel(network = networkSample, var.names = var.names,
                           model.parms = model.parms, state.var = state.var,
                           prop.func = prop.func, init.cond = init.cond,
                           state.change.matrix = state.change.matrix,
                           sim.number = 4, num.cores = 2)

summary(sim.results, stateVars = c('S', 'I'), nodes = c(36812, 36813))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
