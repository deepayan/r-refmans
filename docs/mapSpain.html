<!DOCTYPE html><html><head><title>Help for package mapSpain</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mapSpain}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mapSpain-package'><p>mapSpain: Administrative Boundaries of Spain</p></a></li>
<li><a href='#addProviderEspTiles'><p>Include base tiles of Spanish public administrations on a <a href="https://CRAN.R-project.org/package=leaflet"><span class="pkg">leaflet</span></a></p>
map</a></li>
<li><a href='#esp_check_access'><p>Check access to SIANE data</p></a></li>
<li><a href='#esp_clear_cache'><p>Clear your <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> cache dir</p></a></li>
<li><a href='#esp_codelist'><p>Spanish Code Translation Data Frame</p></a></li>
<li><a href='#esp_detect_cache_dir'><p>Detect cache dir for <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a></p></a></li>
<li><a href='#esp_dict_region_code'><p>Convert and translate Subdivision Names</p></a></li>
<li><a href='#esp_get_can_box'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines and polygons for insetting the Canary Islands</p></a></li>
<li><a href='#esp_get_capimun'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> points of the municipalities of Spain</p></a></li>
<li><a href='#esp_get_ccaa'><p>Get Autonomous Communities of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</p></a></li>
<li><a href='#esp_get_comarca'><p>Get 'comarcas' of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons</p></a></li>
<li><a href='#esp_get_country'><p>Get the borders of Spain as a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon</p></a></li>
<li><a href='#esp_get_grid_BDN'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by BDN</p></a></li>
<li><a href='#esp_get_grid_EEA'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by EEA</p></a></li>
<li><a href='#esp_get_grid_ESDAC'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by ESDAC</p></a></li>
<li><a href='#esp_get_grid_MTN'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by IGN</p></a></li>
<li><a href='#esp_get_gridmap'><p>Get a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> hexbin or squared polygon of Spain</p></a></li>
<li><a href='#esp_get_hydrobasin'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the drainage basin demarcations of Spain</p></a></li>
<li><a href='#esp_get_hypsobath'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and lines with the hypsometry and bathymetry of</p>
Spain.</a></li>
<li><a href='#esp_get_munic'><p>Get municipalities of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons</p></a></li>
<li><a href='#esp_get_nuts'><p>Get NUTS of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</p></a></li>
<li><a href='#esp_get_prov'><p>Get Provinces of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</p></a></li>
<li><a href='#esp_get_railway'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines and points with the railways of Spain</p></a></li>
<li><a href='#esp_get_rivers'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon and lines of rivers, channels and other wetlands of</p>
Spain</a></li>
<li><a href='#esp_get_roads'><p>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines of the roads of Spain</p></a></li>
<li><a href='#esp_get_simpl_prov'><p>Get a simplified map of provinces and autonomous communities of Spain</p></a></li>
<li><a href='#esp_getTiles'><p>Get static tiles from public administrations of Spanish.</p></a></li>
<li><a href='#esp_make_provider'><p>Create a custom tile provider</p></a></li>
<li><a href='#esp_move_can'><p>Displace a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object located in the Canary Islands</p></a></li>
<li><a href='#esp_munic.sf'><p>All Municipalities <code>POLYGON</code> object of Spain (2019)</p></a></li>
<li><a href='#esp_nuts.sf'><p>All NUTS <code>POLYGON</code> object of Spain</p></a></li>
<li><a href='#esp_set_cache_dir'><p>Set your <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> cache dir</p></a></li>
<li><a href='#esp_tiles_providers'><p>List with information of Public WMS and WMTS of Spain</p></a></li>
<li><a href='#leaflet.providersESP.df'><p>Public WMS and WMTS of Spain</p></a></li>
<li><a href='#pobmun19'><p>Population by municipality (2019)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Administrative Boundaries of Spain</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Administrative Boundaries of Spain at several levels
    (Autonomous Communities, Provinces, Municipalities) based on the
    'GISCO' 'Eurostat' database <a href="https://ec.europa.eu/eurostat/web/gisco">https://ec.europa.eu/eurostat/web/gisco</a>
    and 'CartoBase SIANE' from 'Instituto Geografico Nacional'
    <a href="https://www.ign.es/">https://www.ign.es/</a>.  It also provides a 'leaflet' plugin and the
    ability of downloading and processing static tiles.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ropenspain.github.io/mapSpain/">https://ropenspain.github.io/mapSpain/</a>,
<a href="https://github.com/rOpenSpain/mapSpain">https://github.com/rOpenSpain/mapSpain</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rOpenSpain/mapSpain/issues">https://github.com/rOpenSpain/mapSpain/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>countrycode (&ge; 1.2.0), giscoR (&ge; 0.2.4), rappdirs (&ge;
0.3.0), sf (&ge; 0.9.0), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2 (&ge; 3.0.0), knitr, leaflet (&ge; 2.0.0), png (&ge;
0.1-5), rmarkdown, slippymath (&ge; 0.3.1), terra (&ge; 1.1-4),
testthat (&ge; 3.0.0), tidyterra</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/coverage:</td>
<td>covr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>ragg, reactable, rnaturalearth, tidyverse,
ropenspain/rostemplate, ropensci/rnaturalearthhires, devtools</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Copyright:</td>
<td>© EuroGeographics for the administrative boundaries. Atlas
Nacional de España (ANE) CC BY 4.0 &lt;http://www.ign.es&gt;. INE
&lt;https://www.ine.es/en/index.htm&gt;</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>X-schema.org-applicationCategory:</td>
<td>cartography</td>
</tr>
<tr>
<td>X-schema.org-isPartOf:</td>
<td>https://ropenspain.es/</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>rOpenSpain, tiles, r, maps, spatial, rstats,
r-package, municipalities, Spain, gisco, provinces, ign,
administrative-boundaries, ccaa, static-tiles</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-23 20:20:23 UTC; diego</td>
</tr>
<tr>
<td>Author:</td>
<td>Diego Hernangómez <a href="https://orcid.org/0000-0001-8457-4658"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph] (rOpenSpain)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Diego Hernangómez &lt;diego.hernangomezherrero@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-23 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mapSpain-package'>mapSpain: Administrative Boundaries of Spain</h2><span id='topic+mapSpain'></span><span id='topic+mapSpain-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Administrative Boundaries of Spain at several levels (Autonomous Communities, Provinces, Municipalities) based on the 'GISCO' 'Eurostat' database <a href="https://ec.europa.eu/eurostat/web/gisco">https://ec.europa.eu/eurostat/web/gisco</a> and 'CartoBase SIANE' from 'Instituto Geografico Nacional' <a href="https://www.ign.es/">https://www.ign.es/</a>. It also provides a 'leaflet' plugin and the ability of downloading and processing static tiles.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Diego Hernangómez <a href="mailto:diego.hernangomezherrero@gmail.com">diego.hernangomezherrero@gmail.com</a> (<a href="https://orcid.org/0000-0001-8457-4658">ORCID</a>) (rOpenSpain) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ropenspain.github.io/mapSpain/">https://ropenspain.github.io/mapSpain/</a>
</p>
</li>
<li> <p><a href="https://github.com/rOpenSpain/mapSpain">https://github.com/rOpenSpain/mapSpain</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rOpenSpain/mapSpain/issues">https://github.com/rOpenSpain/mapSpain/issues</a>
</p>
</li></ul>


<hr>
<h2 id='addProviderEspTiles'>Include base tiles of Spanish public administrations on a <a href="https://CRAN.R-project.org/package=leaflet"><span class="pkg">leaflet</span></a>
map</h2><span id='topic+addProviderEspTiles'></span><span id='topic+providerEspTileOptions'></span>

<h3>Description</h3>

<p>Include tiles of public Spanish organisms to a
<code><a href="leaflet.html#topic+leaflet">leaflet::leaflet()</a></code> map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addProviderEspTiles(
  map,
  provider,
  layerId = NULL,
  group = NULL,
  options = providerEspTileOptions()
)

providerEspTileOptions(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addProviderEspTiles_+3A_map">map</code></td>
<td>
<p>A map widget created from <code><a href="leaflet.html#topic+leaflet">leaflet::leaflet()</a></code>.</p>
</td></tr>
<tr><td><code id="addProviderEspTiles_+3A_provider">provider</code></td>
<td>
<p>Name of the provider, see <a href="#topic+esp_tiles_providers">esp_tiles_providers</a> for
values available.</p>
</td></tr>
<tr><td><code id="addProviderEspTiles_+3A_layerid">layerId</code></td>
<td>
<p>the layer id</p>
</td></tr>
<tr><td><code id="addProviderEspTiles_+3A_group">group</code></td>
<td>
<p>The name of the group the newly created layers should belong to
Human-friendly group names are permitted–they need not be short,
identifier-style names. Any number of layers and even different types of
layers (e.g. markers and polygons) can share the same group name. See
<code><a href="leaflet.html#topic+map-layers">leaflet::addTiles()</a></code>.</p>
</td></tr>
<tr><td><code id="addProviderEspTiles_+3A_options">options</code></td>
<td>
<p>a list of extra options for tile layers, popups, paths
(circles, rectangles, polygons, ...), or other map elements</p>
</td></tr>
<tr><td><code id="addProviderEspTiles_+3A_...">...</code></td>
<td>
<p>Arguments passed on to <code><a href="leaflet.html#topic+addProviderTiles">leaflet::providerTileOptions()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+providerEspTileOptions">providerEspTileOptions()</a></code> is a wrapper of
<code><a href="leaflet.html#topic+addProviderTiles">leaflet::providerTileOptions()</a></code>.
</p>


<h3>Value</h3>

<p>A modified <code><a href="leaflet.html#topic+leaflet">leaflet::leaflet()</a></code> <code>map</code> object.
</p>


<h3>Source</h3>

<p><a href="https://dieghernan.github.io/leaflet-providersESP/">https://dieghernan.github.io/leaflet-providersESP/</a> leaflet plugin,
<strong>v1.3.3</strong>.
</p>


<h3>See Also</h3>

<p><code><a href="leaflet.html#topic+leaflet">leaflet::leaflet()</a></code>, <code><a href="leaflet.html#topic+map-layers">leaflet::addTiles()</a></code>
</p>
<p><code><a href="leaflet.html#topic+addProviderTiles">leaflet::providerTileOptions()</a></code>, <code><a href="leaflet.html#topic+map-options">leaflet::tileOptions()</a></code>
</p>
<p>Other imagery utilities: 
<code><a href="#topic+esp_getTiles">esp_getTiles</a>()</code>,
<code><a href="#topic+esp_make_provider">esp_make_provider</a>()</code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(leaflet)
PuertadelSol &lt;-
  leaflet() %&gt;%
  setView(
    lat = 40.4166,
    lng = -3.7038400,
    zoom = 18
  ) %&gt;%
  addProviderEspTiles(provider = "IGNBase.Gris") %&gt;%
  addProviderEspTiles(provider = "RedTransporte.Carreteras")

PuertadelSol
</code></pre>

<hr>
<h2 id='esp_check_access'>Check access to SIANE data</h2><span id='topic+esp_check_access'></span>

<h3>Description</h3>

<p>Check if R has access to resources at
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_check_access()
</code></pre>


<h3>Value</h3>

<p>a logical.
</p>


<h3>See Also</h3>

<p><code><a href="giscoR.html#topic+gisco_check_access">giscoR::gisco_check_access()</a></code>
</p>
<p>Other helper: 
<code><a href="#topic+esp_move_can">esp_move_can</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
esp_check_access()
</code></pre>

<hr>
<h2 id='esp_clear_cache'>Clear your <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> cache dir</h2><span id='topic+esp_clear_cache'></span>

<h3>Description</h3>

<p><strong>Use this function with caution</strong>. This function would clear your cached
data and configuration, specifically:
</p>

<ul>
<li><p> Deletes the <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> config directory
(<code>rappdirs::user_config_dir("mapSpain", "R")</code>).
</p>
</li>
<li><p> Deletes the <code>cache_dir</code> directory.
</p>
</li>
<li><p> Deletes the values on stored on <code>Sys.getenv("MAPSPAIN_CACHE_DIR")</code> and
<code>options(mapSpain_cache_dir)</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_clear_cache(config = FALSE, cached_data = TRUE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_clear_cache_+3A_config">config</code></td>
<td>
<p>if <code>TRUE</code>, will delete the configuration folder of
<a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a>.</p>
</td></tr>
<tr><td><code id="esp_clear_cache_+3A_cached_data">cached_data</code></td>
<td>
<p>If this is set to <code>TRUE</code>, it will delete your
<code>cache_dir</code> and all its content.</p>
</td></tr>
<tr><td><code id="esp_clear_cache_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an overkill function that is intended to reset your status
as it you would never have installed and/or used <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a>.
</p>


<h3>Value</h3>

<p>Invisible. This function is called for its side effects.
</p>


<h3>See Also</h3>

<p>Other cache utilities: 
<code><a href="#topic+esp_detect_cache_dir">esp_detect_cache_dir</a>()</code>,
<code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Don't run this! It would modify your current state
## Not run: 
esp_clear_cache(verbose = TRUE)

## End(Not run)

Sys.getenv("MAPSPAIN_CACHE_DIR")
</code></pre>

<hr>
<h2 id='esp_codelist'>Spanish Code Translation Data Frame</h2><span id='topic+esp_codelist'></span>

<h3>Description</h3>

<p>A data frame used internally for translating codes and names of the
different subdivisions of Spain. The data frame provides the hierarchy of
the subdivisions including NUTS1 level, Autonomous Communities
(equivalent to NUTS2), Provinces and NUTS3 level. See <strong>Note</strong>.
</p>


<h3>Format</h3>

<p>A data frame with 59 rows
codes and columns:
</p>

<dl>
<dt>nuts1.code</dt><dd><p>NUTS 1 code</p>
</dd>
<dt>nuts1.name</dt><dd><p>NUTS 1 name</p>
</dd>
<dt>nuts1.name.alt</dt><dd><p>NUTS 1 alternative name</p>
</dd>
<dt>nuts1.shortname.es</dt><dd><p>NUTS1 1 short (common) name (Spanish)</p>
</dd>
<dt>codauto</dt><dd><p>INE code of the autonomous community</p>
</dd>
<dt>iso2.ccaa.code</dt><dd><p>ISO2 code of the autonomous community</p>
</dd>
<dt>nuts2.code</dt><dd><p>NUTS 2 Code</p>
</dd>
<dt>ine.ccaa.name</dt><dd><p>INE name of the autonomous community</p>
</dd>
<dt>iso2.ccaa.name.es</dt><dd><p>ISO2 name of the autonomous community (Spanish)</p>
</dd>
<dt>iso2.ccaa.name.ca</dt><dd><p>ISO2 name of the autonomous community (Catalan)</p>
</dd>
<dt>iso2.ccaa.name.gl</dt><dd><p>ISO2 name of the autonomous community (Galician)</p>
</dd>
<dt>iso2.ccaa.name.eu</dt><dd><p>ISO2 name of the autonomous community (Basque)</p>
</dd>
<dt>nuts2.name</dt><dd><p>NUTS 2 name</p>
</dd>
<dt>cldr.ccaa.name.en</dt><dd><p>CLDR name of the autonomous community (English)</p>
</dd>
<dt>cldr.ccaa.name.es</dt><dd><p>CLDR name of the autonomous community (Spanish)</p>
</dd>
<dt>cldr.ccaa.name.ca</dt><dd><p>CLDR name of the autonomous community (Catalan)</p>
</dd>
<dt>cldr.ccaa.name.ga</dt><dd><p>CLDR name of the autonomous community (Galician)</p>
</dd>
<dt>cldr.ccaa.name.eu</dt><dd><p>CLDR name of the autonomous community (Basque)</p>
</dd>
<dt>ccaa.shortname.en</dt><dd><p>Short (common) name of the autonomous community
(English)</p>
</dd>
<dt>ccaa.shortname.es</dt><dd><p>Short (common) name of the autonomous community
(Spanish)</p>
</dd>
<dt>ccaa.shortname.ca</dt><dd><p>Short (common) name of the autonomous community
(Catalan)</p>
</dd>
<dt>ccaa.shortname.ga</dt><dd><p>Short (common) name of the autonomous community
(Galician)</p>
</dd>
<dt>ccaa.shortname.eu</dt><dd><p>Short (common) name of the autonomous community
(Basque)</p>
</dd>
<dt>cpro</dt><dd><p>INE code of the province</p>
</dd>
<dt>iso2.prov.code</dt><dd><p>ISO2 code of the province</p>
</dd>
<dt>nuts.prov.code</dt><dd><p>NUTS code of the province</p>
</dd>
<dt>ine.prov.name</dt><dd><p>INE name of the province</p>
</dd>
<dt>iso2.prov.name.es</dt><dd><p>ISO2 name of the province (Spanish)</p>
</dd>
<dt>iso2.prov.name.ca</dt><dd><p>ISO2 name of the province (Catalan)</p>
</dd>
<dt>iso2.prov.name.ga</dt><dd><p>ISO2 name of the province (Galician)</p>
</dd>
<dt>iso2.prov.name.eu</dt><dd><p>ISO2 name of the province (Basque)</p>
</dd>
<dt>cldr.prov.name.en</dt><dd><p>CLDR name of the province (English)</p>
</dd>
<dt>cldr.prov.name.es</dt><dd><p>CLDR name of the province (Spanish)</p>
</dd>
<dt>cldr.prov.name.ca</dt><dd><p>CLDR name of the province (Catalan)</p>
</dd>
<dt>cldr.prov.name.ga</dt><dd><p>CLDR name of the province (Galician)</p>
</dd>
<dt>cldr.prov.name.eu</dt><dd><p>CLDR name of the province (Basque)</p>
</dd>
<dt>prov.shortname.en</dt><dd><p>Short (common) name of the province (English)</p>
</dd>
<dt>prov.shortname.es</dt><dd><p>Short (common) name of the province (Spanish)</p>
</dd>
<dt>prov.shortname.ca</dt><dd><p>Short (common) name of the province (Catalan)</p>
</dd>
<dt>prov.shortname.ga</dt><dd><p>Short (common) name of the province (Galician)</p>
</dd>
<dt>prov.shortname.eu</dt><dd><p>Short (common) name of the province (Basque)</p>
</dd>
<dt>nuts3.code</dt><dd><p>NUTS 3 code</p>
</dd>
<dt>nuts3.name</dt><dd><p>NUTS 3 name</p>
</dd>
<dt>nuts3.shortname.es</dt><dd><p>NUTS 3 short (common) name</p>
</dd>
</dl>



<h3>Note</h3>

<p>Although NUTS2 matches the first subdivision level of Spain
(CCAA - Autonomous Communities), it should be noted that NUTS3 does not
match the second subdivision level of Spain (Provinces). NUTS3 provides a
dedicated code for major islands whereas the Provinces doesn't.
</p>
<p>Ceuta and Melilla has an specific status (Autonomous Cities) but are
considered as communities with a single province (as Madrid, Asturias
or Murcia) on this dataset.
</p>


<h3>Source</h3>


<ul>
<li> <p><strong>INE</strong>: Instituto Nacional de Estadistica: <a href="https://www.ine.es/">https://www.ine.es/</a>
</p>
</li>
<li> <p><strong>Eurostat (NUTS)</strong>: <a href="https://ec.europa.eu/eurostat/web/nuts/overview">https://ec.europa.eu/eurostat/web/nuts/overview</a>
</p>
</li>
<li> <p><strong>ISO</strong>: <a href="https://www.iso.org/home.html">https://www.iso.org/home.html</a>
</p>
</li>
<li> <p><strong>CLDR</strong>: <a href="https://unicode-org.github.io/cldr-staging/charts/38/index.html">https://unicode-org.github.io/cldr-staging/charts/38/index.html</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other datasets: 
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>,
<code><a href="#topic+esp_nuts.sf">esp_nuts.sf</a></code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>,
<code><a href="#topic+pobmun19">pobmun19</a></code>
</p>
<p>Other political: 
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>
<p>Other dictionary: 
<code><a href="#topic+esp_dict_region_code">esp_dict_region_code</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("esp_codelist")
</code></pre>

<hr>
<h2 id='esp_detect_cache_dir'>Detect cache dir for <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a></h2><span id='topic+esp_detect_cache_dir'></span>

<h3>Description</h3>

<p>Helper function to detect the current cache folder. See
<code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_detect_cache_dir(x = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_detect_cache_dir_+3A_x">x</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character with the path to your <code>cache_dir</code>.
</p>


<h3>See Also</h3>

<p>Other cache utilities: 
<code><a href="#topic+esp_clear_cache">esp_clear_cache</a>()</code>,
<code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>esp_detect_cache_dir()

</code></pre>

<hr>
<h2 id='esp_dict_region_code'>Convert and translate Subdivision Names</h2><span id='topic+esp_dict_region_code'></span><span id='topic+esp_dict_translate'></span>

<h3>Description</h3>

<p>Converts long subdivision names into different coding schemes and languages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_dict_region_code(sourcevar, origin = "text", destination = "text")

esp_dict_translate(sourcevar, lang = "en", all = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_dict_region_code_+3A_sourcevar">sourcevar</code></td>
<td>
<p>Vector which contains the subdivision names to be converted.</p>
</td></tr>
<tr><td><code id="esp_dict_region_code_+3A_origin">origin</code>, <code id="esp_dict_region_code_+3A_destination">destination</code></td>
<td>
<p>One of <code>"text"</code>, <code>"nuts"</code>, <code>"iso2"</code>,
<code>"codauto"</code> and <code>"cpro"</code>.</p>
</td></tr>
<tr><td><code id="esp_dict_region_code_+3A_lang">lang</code></td>
<td>
<p>Language of translation. Available languages are:
</p>

<ul>
<li> <p><code>"es"</code>: Spanish
</p>
</li>
<li> <p><code>"en"</code>: English
</p>
</li>
<li> <p><code>"ca"</code>: Catalan
</p>
</li>
<li> <p><code>"ga"</code>: Galician
</p>
</li>
<li> <p><code>"eu"</code>: Basque
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_dict_region_code_+3A_all">all</code></td>
<td>
<p>Logical. Should the function return all names or not?
On <code>FALSE</code> it returns a character vector. See <strong>Value</strong>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no match is found for any value, the function displays a warning and
returns <code>NA</code> for those values.
</p>
<p>Note that mixing names of different administrative levels (e.g. &quot;Catalonia&quot;
and &quot;Barcelona&quot;) may return empty values, depending on the <code>destination</code>
values.
</p>


<h3>Value</h3>

<p><code><a href="#topic+esp_dict_region_code">esp_dict_region_code()</a></code> returns a vector of characters.
</p>
<p><code><a href="#topic+esp_dict_translate">esp_dict_translate()</a></code> returns a character vector or a named
list with each of the possible names of each <code>sourcevar</code> on the required
language <code>lang</code>.
</p>


<h3>See Also</h3>

<p>Other dictionary: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>
</p>
<p>Other dictionary: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vals &lt;- c("Errioxa", "Coruna", "Gerona", "Madrid")

esp_dict_region_code(vals)
esp_dict_region_code(vals, destination = "nuts")
esp_dict_region_code(vals, destination = "cpro")
esp_dict_region_code(vals, destination = "iso2")

# From ISO2 to another codes

iso2vals &lt;- c("ES-M", "ES-S", "ES-SG")
esp_dict_region_code(iso2vals, origin = "iso2")
esp_dict_region_code(iso2vals,
  origin = "iso2",
  destination = "nuts"
)
esp_dict_region_code(iso2vals,
  origin = "iso2",
  destination = "cpro"
)

# Mixing levels
valsmix &lt;- c("Centro", "Andalucia", "Seville", "Menorca")
esp_dict_region_code(valsmix, destination = "nuts")
## Not run: 

# Warning

esp_dict_region_code(valsmix, destination = "codauto")
esp_dict_region_code(valsmix, destination = "iso2")

## End(Not run)


vals &lt;- c("La Rioja", "Sevilla", "Madrid", "Jaen", "Orense", "Baleares")

esp_dict_translate(vals)
esp_dict_translate(vals, lang = "es")
esp_dict_translate(vals, lang = "ca")
esp_dict_translate(vals, lang = "eu")
esp_dict_translate(vals, lang = "ga")

esp_dict_translate(vals, lang = "ga", all = TRUE)
</code></pre>

<hr>
<h2 id='esp_get_can_box'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines and polygons for insetting the Canary Islands</h2><span id='topic+esp_get_can_box'></span><span id='topic+esp_get_can_provinces'></span>

<h3>Description</h3>

<p>When plotting Spain, it is usual to represent the Canary Islands as an inset
(see <code>moveCAN</code> on <code><a href="#topic+esp_get_nuts">esp_get_nuts()</a></code>). These functions provides complementary
lines and polygons to be used when the Canary Islands are displayed
as an inset.
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_can_box">esp_get_can_box()</a></code> is used to draw lines around the displaced Canary
Islands.
</p>
</li></ul>


<ul>
<li> <p><code><a href="#topic+esp_get_can_provinces">esp_get_can_provinces()</a></code> is used to draw a separator line between the two
provinces of the Canary Islands.
</p>
</li></ul>

<p>See also <code><a href="#topic+esp_move_can">esp_move_can()</a></code> to displace stand-alone objects on the Canary
Islands.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_can_box(style = "right", moveCAN = TRUE, epsg = "4258")

esp_get_can_provinces(moveCAN = TRUE, epsg = "4258")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_can_box_+3A_style">style</code></td>
<td>
<p>Style of line around Canary Islands. Four options available:
<code>"left"</code>, <code>"right"</code>, <code>"box"</code> or <code>"poly"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_can_box_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_can_box_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon or line depending of <code>style</code> parameter.
</p>
<p><code>esp_get_can_provinces</code> returns a <code>LINESTRING</code> object.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p><code>esp_get_can_provinces</code> extracted from CartoBase ANE,
<code>se89_mult_admin_provcan_l.shp</code> file.
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>
<p>Other Canary Islands: 
<code><a href="#topic+esp_move_can">esp_move_can</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
Provs &lt;- esp_get_prov()
Box &lt;- esp_get_can_box()
Line &lt;- esp_get_can_provinces()

# Plot
library(ggplot2)

ggplot(Provs) +
  geom_sf() +
  geom_sf(data = Box) +
  geom_sf(data = Line) +
  theme_linedraw()

# Displacing Canary

# By same factor

displace &lt;- c(15, 0)

Provs_D &lt;- esp_get_prov(moveCAN = displace)

Box_D &lt;- esp_get_can_box(style = "left", moveCAN = displace)

Line_D &lt;- esp_get_can_provinces(moveCAN = displace)

ggplot(Provs_D) +
  geom_sf() +
  geom_sf(data = Box_D) +
  geom_sf(data = Line_D) +
  theme_linedraw()


# Example with poly option

# Get countries with giscoR

library(giscoR)

# Low resolution map
res &lt;- "20"

Countries &lt;-
  gisco_get_countries(
    res = res,
    epsg = "4326",
    country = c("France", "Portugal", "Andorra", "Morocco", "Argelia")
  )
CANbox &lt;-
  esp_get_can_box(
    style = "poly",
    epsg = "4326",
    moveCAN = c(12.5, 0)
  )

CCAA &lt;- esp_get_ccaa(
  res = res,
  epsg = "4326",
  moveCAN = c(12.5, 0) # Same displacement factor)
)

# Plot

ggplot(Countries) +
  geom_sf(fill = "#DFDFDF") +
  geom_sf(data = CANbox, fill = "#C7E7FB", linewidth = 1) +
  geom_sf(data = CCAA, fill = "#FDFBEA") +
  coord_sf(
    xlim = c(-10, 4.3),
    ylim = c(34.6, 44)
  ) +
  theme(
    panel.background = element_rect(fill = "#C7E7FB"),
    panel.grid = element_blank()
  )

</code></pre>

<hr>
<h2 id='esp_get_capimun'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> points of the municipalities of Spain</h2><span id='topic+esp_get_capimun'></span>

<h3>Description</h3>

<p>Get a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> point with the location of the political powers for
each municipality (possibly the center of the municipality).
</p>
<p>Note that this differs of the centroid of the boundaries of the
municipality, returned by <code><a href="#topic+esp_get_munic">esp_get_munic()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_capimun(
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  region = NULL,
  munic = NULL,
  moveCAN = TRUE,
  rawcols = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_capimun_+3A_year">year</code></td>
<td>
<p>Release year. See <strong>Details</strong> for years available.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_region">region</code></td>
<td>
<p>A vector of names and/or codes for provinces
or <code>NULL</code> to get all the municipalities. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_munic">munic</code></td>
<td>
<p>A name or <code><a href="base.html#topic+grep">regex</a></code> expression with the names of
the required municipalities. <code>NULL</code> would not produce any filtering.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_capimun_+3A_rawcols">rawcols</code></td>
<td>
<p>Logical. Setting this to <code>TRUE</code> would add the raw columns of
the dataset provided by IGN.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>year</code> could be passed as a single year (<code>YYYY</code> format, as end of year) or
as a specific date (<code>YYYY-MM-DD</code> format). Historical information starts as
of 2005.
</p>
<p>When using <code>region</code> you can use and mix names and NUTS codes (levels 1,
2 or 3), ISO codes (corresponding to level 2 or 3) or <code>cpro</code>. See
<a href="#topic+esp_codelist">esp_codelist</a>
</p>
<p>When calling a superior level (Province, Autonomous Community or NUTS1) ,
all the municipalities of that level would be added.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> point object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>
<p>Other municipalities: 
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This code compares centroids of municipalities against esp_get_capimun
# It also download tiles, make sure you are online

library(sf)

# Get shape
area &lt;- esp_get_munic_siane(munic = "Valladolid", epsg = 3857)

# Area in km2
print(paste0(round(as.double(sf::st_area(area)) / 1000000, 2), " km2"))

# Extract centroid
centroid &lt;- sf::st_centroid(area)
centroid$type &lt;- "Centroid"

# Compare with capimun
capimun &lt;- esp_get_capimun(munic = "Valladolid", epsg = 3857)
capimun$type &lt;- "Capimun"

# Get a tile to check
tile &lt;- esp_getTiles(area, "IGNBase.Todo", zoommin = 2)

# Join both point geometries
points &lt;- rbind(
  centroid[, "type"],
  capimun[, "type"]
)


# Check on plot
library(ggplot2)
library(tidyterra)

ggplot(points) +
  geom_spatraster_rgb(data = tile, maxcell = Inf) +
  geom_sf(data = area, fill = NA, color = "blue") +
  geom_sf(data = points, aes(fill = type), size = 5, shape = 21) +
  scale_fill_manual(values = c("green", "red")) +
  theme_void() +
  labs(title = "Centroid vs. capimun")

## End(Not run)
</code></pre>

<hr>
<h2 id='esp_get_ccaa'>Get Autonomous Communities of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</h2><span id='topic+esp_get_ccaa'></span><span id='topic+esp_get_ccaa_siane'></span>

<h3>Description</h3>

<p>Returns
<a href="https://en.wikipedia.org/wiki/Autonomous_communities_of_Spain">Autonomous Communities of Spain</a> as
polygons and points at a specified scale.
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_ccaa">esp_get_ccaa()</a></code> uses GISCO (Eurostat) as source. Please use
<code><a href="giscoR.html#topic+gisco_attributions">giscoR::gisco_attributions()</a></code>
</p>
</li></ul>


<ul>
<li> <p><code><a href="#topic+esp_get_ccaa_siane">esp_get_ccaa_siane()</a></code> uses CartoBase ANE as source, provided by
Instituto Geografico Nacional (IGN), <a href="http://www.ign.es/web/ign/portal">http://www.ign.es/web/ign/portal</a>.
Years available are 2005 up to today.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_ccaa(ccaa = NULL, moveCAN = TRUE, ...)

esp_get_ccaa_siane(
  ccaa = NULL,
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "3",
  moveCAN = TRUE,
  rawcols = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_ccaa_+3A_ccaa">ccaa</code></td>
<td>
<p>A vector of names and/or codes for autonomous communities
or <code>NULL</code> to get all the autonomous communities. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+esp_get_nuts">esp_get_nuts</a></code>
</p>

<dl>
<dt><code>spatialtype</code></dt><dd><p>Type of geometry to be returned:
</p>

<ul>
<li> <p><code>"LB"</code>: Labels - point object.
</p>
</li>
<li> <p><code>"RG"</code>: Regions - polygon object.
</p>
</li></ul>
</dd>
</dl>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_year">year</code></td>
<td>
<p>Release year. See <code><a href="#topic+esp_get_nuts">esp_get_nuts()</a></code> for <code><a href="#topic+esp_get_ccaa">esp_get_ccaa()</a></code> and
<strong>Details</strong> for <code><a href="#topic+esp_get_ccaa_siane">esp_get_ccaa_siane()</a></code></p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the polygon. Values available are
<code>3</code>, <code>6.5</code> or <code>10</code>.</p>
</td></tr>
<tr><td><code id="esp_get_ccaa_+3A_rawcols">rawcols</code></td>
<td>
<p>Logical. Setting this to <code>TRUE</code> would add the raw columns of
the dataset provided by IGN.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When using <code>ccaa</code> you can use and mix names and NUTS codes (levels 1 or 2),
ISO codes (corresponding to level 2) or <code>codauto</code> (see <a href="#topic+esp_codelist">esp_codelist</a>).
Ceuta and Melilla are considered as Autonomous Communities on this function.
</p>
<p>When calling a NUTS1 level, all the Autonomous Communities of that level
would be added.
</p>
<p>On <code><a href="#topic+esp_get_ccaa_siane">esp_get_ccaa_siane()</a></code>, <code>year</code> could be passed as a single year (<code>YYYY</code>
format, as end of year) or as a specific date (<code>YYYY-MM-DD</code> format).
Historical information starts as of 2005.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object specified by <code>spatialtype</code>.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ccaa &lt;- esp_get_ccaa()

library(ggplot2)

ggplot(ccaa) +
  geom_sf()

# Random CCAA
Random &lt;- esp_get_ccaa(ccaa = c(
  "Euskadi",
  "Catalunya",
  "ES-EX",
  "Canarias",
  "ES52",
  "01"
))


ggplot(Random) +
  geom_sf(aes(fill = codauto), show.legend = FALSE) +
  geom_sf_label(aes(label = codauto), alpha = 0.3)

# All CCAA of a Zone plus an addition

Mix &lt;-
  esp_get_ccaa(ccaa = c("La Rioja", "Noroeste"))

ggplot(Mix) +
  geom_sf()

# Combine with giscoR to get countries


library(giscoR)
library(sf)

res &lt;- 20 # Set same resoluion

europe &lt;- gisco_get_countries(resolution = res)
ccaa &lt;- esp_get_ccaa(moveCAN = FALSE, resolution = res)

# Transform to same CRS
europe &lt;- st_transform(europe, 3035)
ccaa &lt;- st_transform(ccaa, 3035)

ggplot(europe) +
  geom_sf(fill = "#DFDFDF", color = "#656565") +
  geom_sf(data = ccaa, fill = "#FDFBEA", color = "#656565") +
  coord_sf(
    xlim = c(23, 74) * 10e4,
    ylim = c(14, 55) * 10e4
  ) +
  theme(panel.background = element_rect(fill = "#C7E7FB"))

</code></pre>

<hr>
<h2 id='esp_get_comarca'>Get 'comarcas' of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons</h2><span id='topic+esp_get_comarca'></span>

<h3>Description</h3>

<p>Returns 'comarcas' of Spain as polygons,as provided by the
<strong>INE</strong> (Instituto Nacional de Estadistica).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_comarca(
  region = NULL,
  comarca = NULL,
  moveCAN = TRUE,
  epsg = "4258",
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_comarca_+3A_region">region</code></td>
<td>
<p>A vector of names and/or codes for provinces or <code>NULL</code> to get
all the comarcas., See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_comarca">comarca</code></td>
<td>
<p>A name or <code><a href="base.html#topic+grep">regex</a></code> expression with the names of
the required comarcas. <code>NULL</code> would not produce any filtering.</p>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_comarca_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'Comarcas' (English equivalent: district, county, area or zone) does not
always have a formal legal status. They correspond mainly to natural areas
(valleys, river basins etc.) or even to historical regions or ancient
kingdoms.
</p>
<p>When using <code>region</code> you can use and mix names and NUTS codes
(levels 1, 2 or 3), ISO codes (corresponding to level 2 or 3) or
&quot;cpro&quot; (see <a href="#topic+esp_codelist">esp_codelist</a>).
</p>
<p>When calling a superior level (Province, Autonomous Community or NUTS1) ,
all the comarcas of that level would be added.
</p>


<h4>Legal Notice</h4>

<p>The use of the information contained on the
<a href="https://www.ine.es/en/index.htm">INE website</a> may be carried out by users or
re-use agents, at their own risk, and they will be the sole liable parties
in the case of having to answer to third parties due to damages arising
from such use.
</p>



<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p>INE: PC_Axis files.
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

comarcas &lt;- esp_get_comarca(moveCAN = FALSE)

library(ggplot2)

ggplot(comarcas) +
  geom_sf()

# Comarcas of Castille and Leon

comarcas_cyl &lt;- esp_get_comarca("Castilla y Leon")

ggplot(comarcas_cyl) +
  geom_sf(aes(fill = ine.prov.name)) +
  labs(fill = "Province")

# Comarcas with Mountains or Alt(o,a) in the name

comarcas_alto &lt;- esp_get_comarca(
  comarca = "Montaña|Monte|Sierra|Alt",
  epsg = 3857
)

ggplot(comarcas_alto) +
  geom_sf(aes(fill = ine.ccaa.name)) +
  geom_sf_text(aes(label = name), check_overlap = TRUE) +
  labs(fill = "CCAA")


</code></pre>

<hr>
<h2 id='esp_get_country'>Get the borders of Spain as a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon</h2><span id='topic+esp_get_country'></span>

<h3>Description</h3>

<p>Returns the boundaries of Spain as a single <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon at a
specified scale.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_country(moveCAN = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_country_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_country_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+esp_get_nuts">esp_get_nuts</a></code>
</p>

<dl>
<dt><code>year</code></dt><dd><p>Release year of the file. One of <code>"2003"</code>, <code>"2006"</code>,
<code>"2010"</code>, <code>"2013"</code>, <code>"2016"</code>  or <code>"2021"</code>.</p>
</dd>
<dt><code>epsg</code></dt><dd><p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</dd>
<dt><code>cache</code></dt><dd><p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</dd>
<dt><code>update_cache</code></dt><dd><p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</dd>
<dt><code>cache_dir</code></dt><dd><p>A path to a cache directory. See <strong>About caching</strong>.</p>
</dd>
<dt><code>verbose</code></dt><dd><p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</dd>
<dt><code>resolution</code></dt><dd><p>Resolution of the geospatial data. One of
</p>

<ul>
<li><p> &quot;60&quot;: 1:60million
</p>
</li>
<li><p> &quot;20&quot;: 1:20million
</p>
</li>
<li><p> &quot;10&quot;: 1:10million
</p>
</li>
<li><p> &quot;03&quot;: 1:3million
</p>
</li>
<li><p> &quot;01&quot;: 1:1million
</p>
</li></ul>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
OriginalCan &lt;- esp_get_country(moveCAN = FALSE)

# One row only

nrow(OriginalCan)

library(ggplot2)

ggplot(OriginalCan) +
  geom_sf(fill = "grey70")


# Less resolution

MovedCan &lt;- esp_get_country(moveCAN = TRUE, resolution = "20")

library(ggplot2)

ggplot(MovedCan) +
  geom_sf(fill = "grey70")
</code></pre>

<hr>
<h2 id='esp_get_grid_BDN'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by BDN</h2><span id='topic+esp_get_grid_BDN'></span><span id='topic+esp_get_grid_BDN_ccaa'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon with the geographic grids of Spain as provided
on the Banco de Datos de la Naturaleza (Nature Data Bank), by the Ministry
of Environment (MITECO):
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_grid_BDN">esp_get_grid_BDN()</a></code> extracts country-wide grids with resolutions
5x5 or 10x10 kms.
</p>
</li>
<li> <p><code><a href="#topic+esp_get_grid_BDN_ccaa">esp_get_grid_BDN_ccaa()</a></code> extracts grids by Autonomous Community with
resolution 1x1 km.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_grid_BDN(
  resolution = 10,
  type = "main",
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)

esp_get_grid_BDN_ccaa(
  ccaa,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_grid_BDN_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the grid in kms. Could be <code>5</code> or <code>10</code>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_BDN_+3A_type">type</code></td>
<td>
<p>The scope of the grid. It could be mainland Spain (<code>"main"</code>) or
the Canary Islands (<code>"canary"</code>).</p>
</td></tr>
<tr><td><code id="esp_get_grid_BDN_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_grid_BDN_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_BDN_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_BDN_+3A_ccaa">ccaa</code></td>
<td>
<p>A vector of names and/or codes for autonomous communities.
See <strong>Details</strong> on <code><a href="#topic+esp_get_ccaa">esp_get_ccaa()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>BDN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN">https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN</a>).
</p>
<p>See original metadata and source on
<a href="https://www.miteco.gob.es/es/biodiversidad/servicios/banco-datos-naturaleza/informacion-disponible/bdn-cart-aux-descargas-ccaa.html">https://www.miteco.gob.es/es/biodiversidad/servicios/banco-datos-naturaleza/informacion-disponible/bdn-cart-aux-descargas-ccaa.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+esp_get_ccaa">esp_get_ccaa()</a></code>
</p>
<p>Other grids: 
<code><a href="#topic+esp_get_grid_EEA">esp_get_grid_EEA</a>()</code>,
<code><a href="#topic+esp_get_grid_ESDAC">esp_get_grid_ESDAC</a>()</code>,
<code><a href="#topic+esp_get_grid_MTN">esp_get_grid_MTN</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

grid &lt;- esp_get_grid_BDN(resolution = "10", type = "main")

library(ggplot2)

ggplot(grid) +
  geom_sf() +
  theme_light() +
  labs(title = "BDN Grid for Spain")


</code></pre>

<hr>
<h2 id='esp_get_grid_EEA'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by EEA</h2><span id='topic+esp_get_grid_EEA'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon with the geographic grids of Spain as provided
by the European Environment Agency (EEA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_grid_EEA(
  resolution = 100,
  type = "main",
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_grid_EEA_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the grid in kms. Could be <code>1</code>, <code>10</code> or <code>100</code>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_EEA_+3A_type">type</code></td>
<td>
<p>The scope of the grid. It could be mainland Spain (<code>"main"</code>) or
the Canary Islands (<code>"canary"</code>).</p>
</td></tr>
<tr><td><code id="esp_get_grid_EEA_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_grid_EEA_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_EEA_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p><a href="https://www.eea.europa.eu/en/datahub/datahubitem-view/3c362237-daa4-45e2-8c16-aaadfb1a003b">EEA reference grid</a>.
</p>


<h3>See Also</h3>

<p>Other grids: 
<code><a href="#topic+esp_get_grid_BDN">esp_get_grid_BDN</a>()</code>,
<code><a href="#topic+esp_get_grid_ESDAC">esp_get_grid_ESDAC</a>()</code>,
<code><a href="#topic+esp_get_grid_MTN">esp_get_grid_MTN</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

grid &lt;- esp_get_grid_EEA(type = "main", resolution = 100)
grid_can &lt;- esp_get_grid_EEA(type = "canary", resolution = 100)
esp &lt;- esp_get_country(moveCAN = FALSE)

library(ggplot2)

ggplot(grid) +
  geom_sf() +
  geom_sf(data = grid_can) +
  geom_sf(data = esp, fill = NA) +
  theme_light() +
  labs(title = "EEA Grid for Spain")

## End(Not run)

</code></pre>

<hr>
<h2 id='esp_get_grid_ESDAC'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by ESDAC</h2><span id='topic+esp_get_grid_ESDAC'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon with the geographic grids of Spain as provided
by the European Soil Data Centre (ESDAC).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_grid_ESDAC(
  resolution = 10,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_grid_ESDAC_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the grid in kms. Could be <code>1</code> or <code>10</code>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_ESDAC_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_grid_ESDAC_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_ESDAC_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p><a href="https://esdac.jrc.ec.europa.eu/content/european-reference-grids">EEA reference grid</a>.
</p>


<h3>References</h3>


<ul>
<li><p> Panagos P., Van Liedekerke M., Jones A., Montanarella L., &quot;European Soil
Data Centre: Response to European policy support and public data
requirements&quot;; (2012) <em>Land Use Policy</em>, 29 (2), pp. 329-338.
<a href="https://doi.org/10.1016/j.landusepol.2011.07.003">doi:10.1016/j.landusepol.2011.07.003</a>
</p>
</li>
<li><p> European Soil Data Centre (ESDAC), esdac.jrc.ec.europa.eu, European
Commission, Joint Research Centre.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other grids: 
<code><a href="#topic+esp_get_grid_BDN">esp_get_grid_BDN</a>()</code>,
<code><a href="#topic+esp_get_grid_EEA">esp_get_grid_EEA</a>()</code>,
<code><a href="#topic+esp_get_grid_MTN">esp_get_grid_MTN</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
grid &lt;- esp_get_grid_ESDAC()
esp &lt;- esp_get_country(moveCAN = FALSE)

library(ggplot2)

ggplot(grid) +
  geom_sf() +
  geom_sf(data = esp, color = "grey50", fill = NA) +
  theme_light() +
  labs(title = "ESDAC Grid for Spain")

## End(Not run)

</code></pre>

<hr>
<h2 id='esp_get_grid_MTN'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the national geographic grids provided by IGN</h2><span id='topic+esp_get_grid_MTN'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon with the geographic grids of Spain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_grid_MTN(
  grid = "MTN25_ETRS89_Peninsula_Baleares_Canarias",
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_grid_MTN_+3A_grid">grid</code></td>
<td>
<p>Name of the grid to be loaded. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_MTN_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_grid_MTN_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_grid_MTN_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metadata available on
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN">https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN</a>.
</p>
<p>Possible values of <code>grid</code> are:</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>grid_name</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN25_ED50_Peninsula_Baleares </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN25_ETRS89_ceuta_melilla_alboran </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN25_ETRS89_Peninsula_Baleares_Canarias </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN25_RegCan95_Canarias </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN50_ED50_Peninsula_Baleares </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN50_ETRS89_Peninsula_Baleares_Canarias </td>
</tr>
<tr>
 <td style="text-align: left;">
   MTN50_RegCan95_Canarias </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h4>MTN Grids</h4>

<p>A description of the MTN (Mapa Topografico Nacional) grids available:
</p>
<p><strong>MTN25_ED50_Peninsula_Baleares</strong>
</p>
<p>MTN25 grid corresponding to the Peninsula and Balearic Islands, in ED50 and
geographical coordinates (longitude, latitude) This is the real MTN25 grid,
that is, the one that divides the current printed series of the map, taking
into account special sheets and irregularities.
</p>
<p><strong>MTN50_ED50_Peninsula_Baleares</strong>
</p>
<p>MTN50 grid corresponding to the Peninsula and Balearic Islands, in ED50 and
geographical coordinates (longitude, latitude) This is the real MTN50 grid,
that is, the one that divides the current printed series of the map, taking
into account special sheets and irregularities.
</p>
<p><strong>MTN25_ETRS89_ceuta_melilla_alboran</strong>
</p>
<p>MTN25 grid corresponding to Ceuta, Melilla, Alboran and Spanish territories
in North Africa, adjusted to the new official geodetic reference system
ETRS89, in geographical coordinates (longitude, latitude).
</p>
<p><strong>MTN25_ETRS89_Peninsula_Baleares_Canarias</strong>
</p>
<p>MTN25 real grid corresponding to the Peninsula, the Balearic Islands and the
Canary Islands, adjusted to the new ETRS89 official reference geodetic
system, in geographical coordinates (longitude, latitude).
</p>
<p><strong>MTN50_ETRS89_Peninsula_Baleares_Canarias</strong>
</p>
<p>MTN50 real grid corresponding to the Peninsula, the Balearic Islands and the
Canary Islands, adjusted to the new ETRS89 official reference geodetic
system, in geographical coordinates (longitude, latitude).
</p>
<p><strong>MTN25_RegCan95_Canarias</strong>
</p>
<p>MTN25 grid corresponding to the Canary Islands, in REGCAN95 (WGS84
compatible) and geographic coordinates (longitude, latitude). It is the real
MTN25 grid, that is, the one that divides the current printed series of the
map, taking into account the special distribution of the Canary Islands
sheets.
</p>
<p><strong>MTN50_RegCan95_Canarias</strong>
</p>
<p>MTN50 grid corresponding to the Canary Islands, in REGCAN95 (WGS84
compatible) and geographic coordinates (longitude, latitude). This is the
real grid of the MTN50, that is, the one that divides the current printed
series of the map, taking into account the special distribution of the
Canary Islands sheets.
</p>



<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN">https://github.com/rOpenSpain/mapSpain/tree/sianedata/MTN</a>).
</p>


<h3>See Also</h3>

<p>Other grids: 
<code><a href="#topic+esp_get_grid_BDN">esp_get_grid_BDN</a>()</code>,
<code><a href="#topic+esp_get_grid_EEA">esp_get_grid_EEA</a>()</code>,
<code><a href="#topic+esp_get_grid_ESDAC">esp_get_grid_ESDAC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

grid &lt;- esp_get_grid_MTN(grid = "MTN50_ETRS89_Peninsula_Baleares_Canarias")

library(ggplot2)

ggplot(grid) +
  geom_sf() +
  theme_light() +
  labs(title = "MTN50 Grid for Spain")


</code></pre>

<hr>
<h2 id='esp_get_gridmap'>Get a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> hexbin or squared polygon of Spain</h2><span id='topic+esp_get_gridmap'></span><span id='topic+esp_get_hex_prov'></span><span id='topic+esp_get_hex_ccaa'></span><span id='topic+esp_get_grid_prov'></span><span id='topic+esp_get_grid_ccaa'></span>

<h3>Description</h3>

<p>Loads a hexbin map (<a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object) or a map of squares with the
boundaries of the provinces or autonomous communities of Spain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_hex_prov(prov = NULL)

esp_get_hex_ccaa(ccaa = NULL)

esp_get_grid_prov(prov = NULL)

esp_get_grid_ccaa(ccaa = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_gridmap_+3A_prov">prov</code></td>
<td>
<p>A vector of names and/or codes for provinces
or <code>NULL</code> to get all the provinces. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_gridmap_+3A_ccaa">ccaa</code></td>
<td>
<p>A vector of names and/or codes for autonomous communities
or <code>NULL</code> to get all the autonomous communities. See <strong>Details</strong>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Hexbin or grid map has an advantage over usual choropleth maps.
In choropleths, a large polygon data looks more emphasized just because
of its size, what introduces a bias. Here with hexbin, each region is
represented equally dismissing the bias.
</p>
<p>You can use and mix names, ISO codes, &quot;codauto&quot;/&quot;cpro&quot; codes (see
<a href="#topic+esp_codelist">esp_codelist</a>) and NUTS codes of different levels.
</p>
<p>When using a code corresponding of a higher level (e.g.
<code>esp_get_prov("Andalucia")</code>) all the corresponding units of that level are
provided (in this case , all the provinces of Andalucia).
</p>
<p>Results are provided in <strong>EPSG:4258</strong>, use <code><a href="sf.html#topic+st_transform">sf::st_transform()</a></code>
to change the projection.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> POLYGON object.
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>esp &lt;- esp_get_country()
hexccaa &lt;- esp_get_hex_ccaa()

library(ggplot2)

ggplot(hexccaa) +
  geom_sf(data = esp) +
  geom_sf(aes(fill = codauto),
    alpha = 0.3,
    show.legend = FALSE
  ) +
  geom_sf_text(aes(label = label), check_overlap = TRUE) +
  theme_void() +
  labs(title = "Hexbin: CCAA")





hexprov &lt;- esp_get_hex_prov()

ggplot(hexprov) +
  geom_sf(data = esp) +
  geom_sf(aes(fill = codauto),
    alpha = 0.3,
    show.legend = FALSE
  ) +
  geom_sf_text(aes(label = label), check_overlap = TRUE) +
  theme_void() +
  labs(title = "Hexbin: Provinces")



gridccaa &lt;- esp_get_grid_ccaa()

ggplot(gridccaa) +
  geom_sf(data = esp) +
  geom_sf(aes(fill = codauto),
    alpha = 0.3,
    show.legend = FALSE
  ) +
  geom_sf_text(aes(label = label), check_overlap = TRUE) +
  theme_void() +
  labs(title = "Grid: CCAA")


gridprov &lt;- esp_get_grid_prov()

ggplot(gridprov) +
  geom_sf(data = esp) +
  geom_sf(aes(fill = codauto),
    alpha = 0.3,
    show.legend = FALSE
  ) +
  geom_sf_text(aes(label = label), check_overlap = TRUE) +
  theme_void() +
  labs(title = "Grid: Provinces")
</code></pre>

<hr>
<h2 id='esp_get_hydrobasin'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons of the drainage basin demarcations of Spain</h2><span id='topic+esp_get_hydrobasin'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon object containing areas with the required
hydrographic elements of Spain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_hydrobasin(
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "3",
  domain = "land"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_hydrobasin_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the polygon. Values available are
<code>"3"</code>, <code>"6.5"</code> or <code>"10"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_hydrobasin_+3A_domain">domain</code></td>
<td>
<p>Possible values are <code>"land"</code>, that includes only
the ground part or the ground or <code>"landsea"</code>, that includes both the ground
and the related sea waters of the basin</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metadata available on
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/">https://github.com/rOpenSpain/mapSpain/tree/sianedata/</a>.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other natural: 
<code><a href="#topic+esp_get_hypsobath">esp_get_hypsobath</a>()</code>,
<code><a href="#topic+esp_get_rivers">esp_get_rivers</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

hydroland &lt;- esp_get_hydrobasin(domain = "land")
hydrolandsea &lt;- esp_get_hydrobasin(domain = "landsea")

library(ggplot2)


ggplot(hydroland) +
  geom_sf(data = hydrolandsea, fill = "skyblue4", alpha = .4) +
  geom_sf(fill = "skyblue", alpha = .5) +
  geom_sf_text(aes(label = rotulo),
    size = 3, check_overlap = TRUE,
    fontface = "bold",
    family = "serif"
  ) +
  coord_sf(
    xlim = c(-9.5, 4.5),
    ylim = c(35, 44)
  ) +
  theme_void()


</code></pre>

<hr>
<h2 id='esp_get_hypsobath'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and lines with the hypsometry and bathymetry of
Spain.</h2><span id='topic+esp_get_hypsobath'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon or line object representing the hypsometry and
bathymetry of Spain.
</p>

<ul>
<li> <p><strong>Hypsometry</strong> represents the  the elevation and depth of features of the
Earth's surface relative to mean sea level.
</p>
</li>
<li> <p><strong>Bathymetry</strong> is the measurement of the depth of water in oceans, rivers,
or lakes.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_hypsobath(
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "3",
  spatialtype = "area"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_hypsobath_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the shape. Values available
are <code>"3"</code> or <code>"6.5"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_hypsobath_+3A_spatialtype">spatialtype</code></td>
<td>
<p>Spatial type of the output. Use <code>"area"</code> for polygons or
<code>"line"</code> for lines.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metadata available on
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/">https://github.com/rOpenSpain/mapSpain/tree/sianedata/</a>.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon or line object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other natural: 
<code><a href="#topic+esp_get_hydrobasin">esp_get_hydrobasin</a>()</code>,
<code><a href="#topic+esp_get_rivers">esp_get_rivers</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# This code would produce a nice plot - It will take a few seconds to run
library(ggplot2)

hypsobath &lt;- esp_get_hypsobath()

# Error on the data provided - There is an empty shape
# Remove:

hypsobath &lt;- hypsobath[!sf::st_is_empty(hypsobath), ]

# Tints from Wikipedia
# https://en.wikipedia.org/wiki/Wikipedia:WikiProject_Maps/Conventions/Topographic_maps

bath_tints &lt;- colorRampPalette(
  rev(
    c(
      "#D8F2FE", "#C6ECFF", "#B9E3FF",
      "#ACDBFB", "#A1D2F7", "#96C9F0",
      "#8DC1EA", "#84B9E3", "#79B2DE",
      "#71ABD8"
    )
  )
)

hyps_tints &lt;- colorRampPalette(
  rev(
    c(
      "#F5F4F2", "#E0DED8", "#CAC3B8", "#BAAE9A",
      "#AC9A7C", "#AA8753", "#B9985A", "#C3A76B",
      "#CAB982", "#D3CA9D", "#DED6A3", "#E8E1B6",
      "#EFEBC0", "#E1E4B5", "#D1D7AB", "#BDCC96",
      "#A8C68F", "#94BF8B", "#ACD0A5"
    )
  )
)

levels &lt;- sort(unique(hypsobath$val_inf))

# Create palette
br_bath &lt;- length(levels[levels &lt; 0])
br_terrain &lt;- length(levels) - br_bath

pal &lt;- c(bath_tints((br_bath)), hyps_tints((br_terrain)))


# Plot Canary Islands
ggplot(hypsobath) +
  geom_sf(aes(fill = as.factor(val_inf)),
    color = NA
  ) +
  coord_sf(
    xlim = c(-18.6, -13),
    ylim = c(27, 29.5)
  ) +
  scale_fill_manual(values = pal) +
  guides(fill = guide_legend(
    title = "Elevation",
    direction = "horizontal",
    label.position = "bottom",
    title.position = "top",
    nrow = 1
  )) +
  theme(legend.position = "bottom")


# Plot Mainland
ggplot(hypsobath) +
  geom_sf(aes(fill = as.factor(val_inf)),
    color = NA
  ) +
  coord_sf(
    xlim = c(-9.5, 4.4),
    ylim = c(35.8, 44)
  ) +
  scale_fill_manual(values = pal) +
  guides(fill = guide_legend(
    title = "Elevation",
    reverse = TRUE,
    keyheight = .8
  ))


</code></pre>

<hr>
<h2 id='esp_get_munic'>Get municipalities of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons</h2><span id='topic+esp_get_munic'></span><span id='topic+esp_get_munic_siane'></span>

<h3>Description</h3>

<p>Returns municipalities of Spain as polygons at a specified scale.
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_munic">esp_get_munic()</a></code> uses GISCO (Eurostat) as source. Please use
<code><a href="giscoR.html#topic+gisco_attributions">giscoR::gisco_attributions()</a></code>
</p>
</li></ul>


<ul>
<li> <p><code><a href="#topic+esp_get_munic_siane">esp_get_munic_siane()</a></code> uses CartoBase ANE as source, provided by
Instituto Geografico Nacional (IGN), <a href="http://www.ign.es/web/ign/portal">http://www.ign.es/web/ign/portal</a>.
Years available are 2005 up to today.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_munic(
  year = "2019",
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  region = NULL,
  munic = NULL,
  moveCAN = TRUE
)

esp_get_munic_siane(
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = 3,
  region = NULL,
  munic = NULL,
  moveCAN = TRUE,
  rawcols = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_munic_+3A_year">year</code></td>
<td>
<p>Release year. See <strong>Details</strong> for years available.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_region">region</code></td>
<td>
<p>A vector of names and/or codes for provinces
or <code>NULL</code> to get all the municipalities. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_munic">munic</code></td>
<td>
<p>A name or <code><a href="base.html#topic+grep">regex</a></code> expression with the names of
the required municipalities. <code>NULL</code> would not produce any filtering.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the polygon. Values available are
<code>"3"</code>, <code>"6.5"</code> or  <code>"10"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_munic_+3A_rawcols">rawcols</code></td>
<td>
<p>Logical. Setting this to <code>TRUE</code> would add the raw columns of
the dataset provided by IGN.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The years available are:
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_munic">esp_get_munic()</a></code>:  <code>year</code> could be one of &quot;2001&quot;, &quot;2004&quot;, &quot;2006&quot;, &quot;2008&quot;,
&quot;2010&quot;, &quot;2013&quot; and any year between 2016 and 2019.
See <code><a href="giscoR.html#topic+gisco_get_lau">giscoR::gisco_get_lau()</a></code>, <code><a href="giscoR.html#topic+gisco_get_lau">giscoR::gisco_get_communes()</a></code>.
</p>
</li>
<li> <p><code><a href="#topic+esp_get_munic_siane">esp_get_munic_siane()</a></code>: <code>year</code> could be passed as a single year (&quot;YYYY&quot;
format, as end of year) or as a specific date (&quot;YYYY-MM-DD&quot; format).
Historical information starts as of 2005.
</p>
</li></ul>

<p>When using <code>region</code> you can use and mix names and NUTS codes
(levels 1, 2 or 3), ISO codes (corresponding to level 2 or 3) or
&quot;cpro&quot; (see <a href="#topic+esp_codelist">esp_codelist</a>).
</p>
<p>When calling a superior level (Province, Autonomous Community or NUTS1) ,
all the municipalities of that level would be added.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p><a href="https://gisco-services.ec.europa.eu/distribution/v2/">GISCO API</a>
</p>
<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p><code><a href="giscoR.html#topic+gisco_get_lau">giscoR::gisco_get_lau()</a></code>, <code><a href="base.html#topic+regex">base::regex()</a></code>.
</p>
<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>
<p>Other municipalities: 
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get munics
Base &lt;- esp_get_munic(year = "2019", region = "Castilla y Leon")

# Provs for delimiting
provs &lt;- esp_get_prov(prov = "Castilla y Leon")

# Load population data
data("pobmun19")

# Arrange and create breaks

Base_pop &lt;- merge(Base, pobmun19,
  by = c("cpro", "cmun"),
  all.x = TRUE
)

br &lt;- sort(c(
  0, 50, 100, 200, 500,
  1000, 5000, 50000, 100000,
  Inf
))

Base_pop$cuts &lt;- cut(Base_pop$pob19, br, dig.lab = 20)

# Plot
library(ggplot2)


ggplot(Base_pop) +
  geom_sf(aes(fill = cuts), color = NA) +
  geom_sf(data = provs, fill = NA, color = "grey70") +
  scale_fill_manual(values = hcl.colors(length(br), "cividis")) +
  labs(
    title = "Population in Castilla y Leon",
    subtitle = "INE, 2019",
    fill = "Persons"
  ) +
  theme_void()

</code></pre>

<hr>
<h2 id='esp_get_nuts'>Get NUTS of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</h2><span id='topic+esp_get_nuts'></span>

<h3>Description</h3>

<p>Returns <a href="https://en.wikipedia.org/wiki/NUTS_statistical_regions_of_Spain">NUTS regions of Spain</a>
as polygons and points at a specified scale, as provided by
<a href="https://ec.europa.eu/eurostat/web/gisco">GISCO</a>
(Geographic Information System of the Commission, depending of Eurostat).
</p>
<p>NUTS are provided at three different levels:
</p>

<ul>
<li> <p><strong>&quot;0&quot;</strong>: Country level
</p>
</li>
<li> <p><strong>&quot;1&quot;</strong>: Groups of autonomous communities
</p>
</li>
<li> <p><strong>&quot;2&quot;</strong>: Autonomous communities
</p>
</li>
<li> <p><strong>&quot;3&quot;</strong>: Roughly matches the provinces, but providing specific individual
objects for each major island
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_nuts(
  year = "2016",
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "01",
  spatialtype = "RG",
  region = NULL,
  nuts_level = "all",
  moveCAN = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_nuts_+3A_year">year</code></td>
<td>
<p>Release year of the file. One of <code>"2003"</code>, <code>"2006"</code>,
<code>"2010"</code>, <code>"2013"</code>, <code>"2016"</code>  or <code>"2021"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the geospatial data. One of
</p>

<ul>
<li><p> &quot;60&quot;: 1:60million
</p>
</li>
<li><p> &quot;20&quot;: 1:20million
</p>
</li>
<li><p> &quot;10&quot;: 1:10million
</p>
</li>
<li><p> &quot;03&quot;: 1:3million
</p>
</li>
<li><p> &quot;01&quot;: 1:1million
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_spatialtype">spatialtype</code></td>
<td>
<p>Type of geometry to be returned:
</p>

<ul>
<li> <p><code>"LB"</code>: Labels - point object.
</p>
</li>
<li> <p><code>"RG"</code>: Regions - polygon object.
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_region">region</code></td>
<td>
<p>Optional. A vector of region names, NUTS or ISO codes
(see <code><a href="#topic+esp_dict_region_code">esp_dict_region_code()</a></code>).</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_nuts_level">nuts_level</code></td>
<td>
<p>NUTS level. One of &quot;0&quot; (Country-level), &quot;1&quot;, &quot;2&quot; or &quot;3&quot;.
See <strong>Description</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_nuts_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object specified by <code>spatialtype</code>.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Note</h3>

<p>Please check the download and usage provisions on
<code><a href="giscoR.html#topic+gisco_attributions">giscoR::gisco_attributions()</a></code>
</p>


<h3>Source</h3>

<p><a href="https://gisco-services.ec.europa.eu/distribution/v2/">GISCO API</a>
</p>


<h3>See Also</h3>

<p><code><a href="giscoR.html#topic+gisco_get_nuts">giscoR::gisco_get_nuts()</a></code>, <code><a href="#topic+esp_dict_region_code">esp_dict_region_code()</a></code>.
</p>
<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>
<p>Other nuts: 
<code><a href="#topic+esp_nuts.sf">esp_nuts.sf</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
NUTS1 &lt;- esp_get_nuts(nuts_level = 1, moveCAN = TRUE)

library(ggplot2)

ggplot(NUTS1) +
  geom_sf() +
  labs(
    title = "NUTS1: Displacing Canary Islands",
    caption = giscoR::gisco_attributions()
  )


NUTS1_alt &lt;- esp_get_nuts(nuts_level = 1, moveCAN = c(15, 0))


ggplot(NUTS1_alt) +
  geom_sf() +
  labs(
    title = "NUTS1: Displacing Canary Islands",
    subtitle = "to the right",
    caption = giscoR::gisco_attributions()
  )


NUTS1_orig &lt;- esp_get_nuts(nuts_level = 1, moveCAN = FALSE)

ggplot(NUTS1_orig) +
  geom_sf() +
  labs(
    title = "NUTS1",
    subtitle = "Canary Islands on the true location",
    caption = giscoR::gisco_attributions()
  )


AndOriental &lt;-
  esp_get_nuts(region = c("Almeria", "Granada", "Jaen", "Malaga"))


ggplot(AndOriental) +
  geom_sf()



RandomRegions &lt;- esp_get_nuts(region = c("ES1", "ES300", "ES51"))

ggplot(RandomRegions) +
  geom_sf() +
  labs(title = "Random Regions")


MixingCodes &lt;- esp_get_nuts(region = c("ES4", "ES-PV", "Valencia"))


ggplot(MixingCodes) +
  geom_sf() +
  labs(title = "Mixing Codes")
</code></pre>

<hr>
<h2 id='esp_get_prov'>Get Provinces of Spain as <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygons and points</h2><span id='topic+esp_get_prov'></span><span id='topic+esp_get_prov_siane'></span>

<h3>Description</h3>

<p>Returns
<a href="https://en.wikipedia.org/wiki/Provinces_of_Spain">provinces of Spain</a>
as polygons and points at a specified scale.
</p>

<ul>
<li> <p><code><a href="#topic+esp_get_prov">esp_get_prov()</a></code> uses GISCO (Eurostat) as source. Please use
<code><a href="giscoR.html#topic+gisco_attributions">giscoR::gisco_attributions()</a></code>
</p>
</li></ul>


<ul>
<li> <p><code><a href="#topic+esp_get_prov_siane">esp_get_prov_siane()</a></code> uses CartoBase ANE as source, provided by Instituto
Geografico Nacional (IGN), <a href="http://www.ign.es/web/ign/portal">http://www.ign.es/web/ign/portal</a>. Years
available are 2005 up to today.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_get_prov(prov = NULL, moveCAN = TRUE, ...)

esp_get_prov_siane(
  prov = NULL,
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "3",
  moveCAN = TRUE,
  rawcols = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_prov_+3A_prov">prov</code></td>
<td>
<p>A vector of names and/or codes for provinces
or <code>NULL</code> to get all the provinces. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+esp_get_nuts">esp_get_nuts</a></code>
</p>

<dl>
<dt><code>spatialtype</code></dt><dd><p>Type of geometry to be returned:
</p>

<ul>
<li> <p><code>"LB"</code>: Labels - point object.
</p>
</li>
<li> <p><code>"RG"</code>: Regions - polygon object.
</p>
</li></ul>
</dd>
</dl>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_year">year</code></td>
<td>
<p>Release year. See <code><a href="#topic+esp_get_nuts">esp_get_nuts()</a></code> for <code><a href="#topic+esp_get_prov">esp_get_prov()</a></code> and
<strong>Details</strong> for <code><a href="#topic+esp_get_prov_siane">esp_get_prov_siane()</a></code></p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the polygon. Values available are
<code>3</code>, <code>6.5</code> or <code>10</code>.</p>
</td></tr>
<tr><td><code id="esp_get_prov_+3A_rawcols">rawcols</code></td>
<td>
<p>Logical. Setting this to <code>TRUE</code> would add the raw columns of
the dataset provided by IGN.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When using <code>prov</code> you can use and mix names and NUTS codes (levels 1, 2 or
3), ISO codes (corresponding to level 2 or 3) or &quot;cpro&quot; (see
<a href="#topic+esp_codelist">esp_codelist</a>).
</p>
<p>Ceuta and Melilla are considered as provinces on this dataset.
</p>
<p>When calling a superior level (Autonomous Community or NUTS1) ,
all the provinces of that level would be added.
</p>
<p>On <code><a href="#topic+esp_get_prov_siane">esp_get_prov_siane()</a></code>, <code>year</code> could be passed as a single year (&quot;YYYY&quot;
format, as end of year) or as a specific date (&quot;YYYY-MM-DD&quot; format).
Historical information starts as of 2005.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object specified by <code>spatialtype</code>.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_simpl_prov">esp_get_simpl_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prov &lt;- esp_get_prov()

library(ggplot2)

ggplot(prov) +
  geom_sf() +
  theme_void()


# Random Provinces

Random &lt;-
  esp_get_prov(prov = c(
    "Zamora",
    "Palencia",
    "ES-GR",
    "ES521",
    "01"
  ))


ggplot(Random) +
  geom_sf(aes(fill = codauto), show.legend = FALSE, alpha = 0.5) +
  scale_fill_manual(values = hcl.colors(
    nrow(Random), "Spectral"
  )) +
  theme_minimal()


# All Provinces of a Zone plus an addition

Mix &lt;- esp_get_prov(prov = c(
  "Noroeste",
  "Castilla y Leon", "La Rioja"
))

Mix$CCAA &lt;- esp_dict_region_code(
  Mix$codauto,
  origin = "codauto"
)

ggplot(Mix) +
  geom_sf(aes(fill = CCAA), alpha = 0.5) +
  scale_fill_discrete(type = hcl.colors(5, "Temps")) +
  theme_classic()

# ISO codes available

allprovs &lt;- esp_get_prov()

ggplot(allprovs) +
  geom_sf(fill = NA) +
  geom_sf_text(aes(label = iso2.prov.code),
    check_overlap = TRUE,
    fontface = "bold"
  ) +
  theme_void()

</code></pre>

<hr>
<h2 id='esp_get_railway'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines and points with the railways of Spain</h2><span id='topic+esp_get_railway'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines or point object representing the nodes and railway
lines of Spain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_railway(
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  spatialtype = "line"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_railway_+3A_year">year</code></td>
<td>
<p>Release year.</p>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_railway_+3A_spatialtype">spatialtype</code></td>
<td>
<p>Spatial type of the output. Use <code>"line"</code>
for extracting the railway as lines and <code>"point"</code> for extracting
stations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> line or point object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other infrastructure: 
<code><a href="#topic+esp_get_roads">esp_get_roads</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


provs &lt;- esp_get_prov()
ccaa &lt;- esp_get_ccaa()

# Railways
rails &lt;- esp_get_railway()

# Stations
stations &lt;- esp_get_railway(spatialtype = "point")

# Map

library(ggplot2)

ggplot(provs) +
  geom_sf(fill = "grey99", color = "grey50") +
  geom_sf(data = ccaa, fill = NA) +
  geom_sf(
    data = rails, aes(color = tipo),
    show.legend = FALSE, linewidth = 1.5
  ) +
  geom_sf(
    data = stations,
    color = "red", alpha = 0.5
  ) +
  coord_sf(
    xlim = c(-7.5, -2.5),
    ylim = c(38, 41)
  ) +
  scale_color_manual(values = hcl.colors(
    length(unique(rails$tipo)), "viridis"
  )) +
  theme_minimal()


</code></pre>

<hr>
<h2 id='esp_get_rivers'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon and lines of rivers, channels and other wetlands of
Spain</h2><span id='topic+esp_get_rivers'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon or line object representing rivers, channels,
reservoirs and other wetlands of Spain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_rivers(
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  resolution = "3",
  spatialtype = "line",
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_rivers_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the polygon. Values available are
<code>"3"</code>, <code>"6.5"</code> or <code>"10"</code>.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_spatialtype">spatialtype</code></td>
<td>
<p>Spatial type of the output. Use <code>"area"</code> for polygons or
<code>"line"</code> for lines.</p>
</td></tr>
<tr><td><code id="esp_get_rivers_+3A_name">name</code></td>
<td>
<p>Optional. A character or  <code><a href="base.html#topic+grep">regex</a></code> expression
with the name of the element(s) to be extracted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metadata available on
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata/">https://github.com/rOpenSpain/mapSpain/tree/sianedata/</a>.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> polygon or line object.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other natural: 
<code><a href="#topic+esp_get_hydrobasin">esp_get_hydrobasin</a>()</code>,
<code><a href="#topic+esp_get_hypsobath">esp_get_hypsobath</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Use of regex

regex1 &lt;- esp_get_rivers(name = "Tajo|Segura")
unique(regex1$rotulo)


regex2 &lt;- esp_get_rivers(name = "Tajo$| Segura")
unique(regex2$rotulo)

# See the diference

# Rivers in Spain
shapeEsp &lt;- esp_get_country(moveCAN = FALSE)

MainRivers &lt;-
  esp_get_rivers(name = "Tajo$|Ebro$|Ebre$|Duero|Guadiana$|Guadalquivir")

sf::st_bbox(MainRivers)
library(ggplot2)

ggplot(shapeEsp) +
  geom_sf() +
  geom_sf(data = MainRivers, color = "skyblue", linewidth = 2) +
  coord_sf(
    xlim = c(-7.5, 1),
    ylim = c(36.8, 43)
  ) +
  theme_void()


# Wetlands in South-West Andalucia
and &lt;- esp_get_prov(c("Huelva", "Sevilla", "Cadiz"))
Wetlands &lt;- esp_get_rivers(spatialtype = "area")

ggplot(and) +
  geom_sf() +
  geom_sf(
    data = Wetlands, fill = "skyblue",
    color = "skyblue", alpha = 0.5
  ) +
  coord_sf(
    xlim = c(-7.5, -4.5),
    ylim = c(36, 38.5)
  ) +
  theme_void()


</code></pre>

<hr>
<h2 id='esp_get_roads'>Get <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> lines of the roads of Spain</h2><span id='topic+esp_get_roads'></span>

<h3>Description</h3>

<p>Loads a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> line object representing the main roads of Spain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_roads(
  year = Sys.Date(),
  epsg = "4258",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  moveCAN = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_roads_+3A_year">year</code></td>
<td>
<p>Release year. See <strong>Details</strong> for years available.</p>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_epsg">epsg</code></td>
<td>
<p>projection of the map: 4-digit <a href="https://epsg.io/">EPSG code</a>.
One of:
</p>

<ul>
<li> <p><code>"4258"</code>: ETRS89
</p>
</li>
<li> <p><code>"4326"</code>: WGS84
</p>
</li>
<li> <p><code>"3035"</code>: ETRS89 / ETRS-LAEA
</p>
</li>
<li> <p><code>"3857"</code>: Pseudo-Mercator
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_roads_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>. It places the Canary Islands close to Spain's mainland.
Initial position can be adjusted using the vector of coordinates. See
<strong>Displacing the Canary Islands</strong>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>year</code> could be passed as a single year (&quot;YYYY&quot; format, as end of year) or
as a specific date (&quot;YYYY-MM-DD&quot; format).
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> line object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Displacing the Canary Islands</h3>

<p>While <code>moveCAN</code> is useful for visualization, it would alter the actual
geographic position of the Canary Islands. When using the output for
spatial analysis or using tiles (e.g. with <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> or
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>)  this option should be set to <code>FALSE</code> in order to
get the actual coordinates, instead of the modified ones. See also
<code><a href="#topic+esp_move_can">esp_move_can()</a></code> for displacing stand-alone <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> objects.
</p>


<h3>Source</h3>

<p>IGN data via a custom CDN (see
<a href="https://github.com/rOpenSpain/mapSpain/tree/sianedata">https://github.com/rOpenSpain/mapSpain/tree/sianedata</a>).
</p>


<h3>See Also</h3>

<p>Other infrastructure: 
<code><a href="#topic+esp_get_railway">esp_get_railway</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


country &lt;- esp_get_country()
Roads &lt;- esp_get_roads()

library(ggplot2)

ggplot(country) +
  geom_sf(fill = "grey90") +
  geom_sf(data = Roads, aes(color = tipo), show.legend = "line") +
  scale_color_manual(
    values = c("#003399", "#003399", "#ff0000", "#ffff00")
  ) +
  guides(color = guide_legend(direction = "vertical")) +
  theme_minimal() +
  labs(color = "Road type") +
  theme(legend.position = "bottom")


</code></pre>

<hr>
<h2 id='esp_get_simpl_prov'>Get a simplified map of provinces and autonomous communities of Spain</h2><span id='topic+esp_get_simpl_prov'></span><span id='topic+esp_get_simpl_ccaa'></span>

<h3>Description</h3>

<p>Loads a simplified map (<a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object) with the boundaries of the
provinces or autonomous communities of Spain, as provided by the <strong>INE</strong>
(Instituto Nacional de Estadistica).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_get_simpl_prov(
  prov = NULL,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)

esp_get_simpl_ccaa(
  ccaa = NULL,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_get_simpl_prov_+3A_prov">prov</code></td>
<td>
<p>A vector of names and/or codes for provinces
or <code>NULL</code> to get all the provinces. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_simpl_prov_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_get_simpl_prov_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_get_simpl_prov_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_get_simpl_prov_+3A_ccaa">ccaa</code></td>
<td>
<p>A vector of names and/or codes for autonomous communities
or <code>NULL</code> to get all the autonomous communities. See <strong>Details</strong>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Results are provided <strong>without CRS</strong>, as provided on source.
</p>
<p>You can use and mix names, ISO codes, &quot;codauto&quot;/&quot;cpro&quot; codes (see
<a href="#topic+esp_codelist">esp_codelist</a>) and NUTS codes of different levels.
</p>
<p>When using a code corresponding of a higher level (e.g.
<code>esp_get_simpl_prov("Andalucia")</code>) all the corresponding units of that level
are provided (in this case , all the provinces of Andalucia).
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> POLYGON object.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p>INE: PC_Axis files
</p>


<h3>See Also</h3>

<p><code><a href="#topic+esp_get_hex_prov">esp_get_hex_prov()</a></code>, <code><a href="#topic+esp_get_hex_ccaa">esp_get_hex_ccaa()</a></code>
</p>
<p>Other political: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>,
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_ccaa">esp_get_ccaa</a>()</code>,
<code><a href="#topic+esp_get_comarca">esp_get_comarca</a>()</code>,
<code><a href="#topic+esp_get_country">esp_get_country</a>()</code>,
<code><a href="#topic+esp_get_gridmap">esp_get_gridmap</a></code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>,
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>,
<code><a href="#topic+esp_get_prov">esp_get_prov</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

prov_simp &lt;- esp_get_simpl_prov()

library(ggplot2)

ggplot(prov_simp) +
  geom_sf(aes(fill = ine.ccaa.name)) +
  labs(fill = "CCAA")

# Provs of Single CCAA

and_simple &lt;- esp_get_simpl_prov("Andalucia")

ggplot(and_simple) +
  geom_sf()

# CCAAs

ccaa_simp &lt;- esp_get_simpl_ccaa()

ggplot(ccaa_simp) +
  geom_sf() +
  geom_sf_text(aes(label = ine.ccaa.name), check_overlap = TRUE)


</code></pre>

<hr>
<h2 id='esp_getTiles'>Get static tiles from public administrations of Spanish.</h2><span id='topic+esp_getTiles'></span>

<h3>Description</h3>

<p>Get static map tiles based on a spatial object. Maps can be fetched from
various open map servers.
</p>
<p>This function is a implementation of the javascript plugin
<a href="https://dieghernan.github.io/leaflet-providersESP/">leaflet-providersESP</a>
<strong>v1.3.3</strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_getTiles(
  x,
  type = "IDErioja",
  zoom = NULL,
  zoommin = 0,
  crop = TRUE,
  res = 512,
  bbox_expand = 0.05,
  transparent = TRUE,
  mask = FALSE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_getTiles_+3A_x">x</code></td>
<td>
<p>An <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> or <code>sfc</code> object.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_type">type</code></td>
<td>
<p>This parameter could be either:
</p>

<ul>
<li><p> The name of one of the  pre-defined providers
(see <code><a href="#topic+esp_tiles_providers">esp_tiles_providers()</a></code>).
</p>
</li>
<li><p> A list with two named elements <code>id</code> and <code>q</code> with your own parameters.
See <code><a href="#topic+esp_make_provider">esp_make_provider()</a></code> and examples.
</p>
</li></ul>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_zoom">zoom</code></td>
<td>
<p>Zoom level. If <code>NULL</code>, it is determined automatically. If set,
it overrides <code>zoommin</code>. Only valid for WMTS tiles. On a single point it
applies a buffer to the point and on <code>zoom = NULL</code> the function set a zoom
level of 18. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_zoommin">zoommin</code></td>
<td>
<p>Delta on default <code>zoom</code>. The default value is designed to
download fewer tiles than you probably want. Use <code>1</code> or <code>2</code> to
increase the resolution.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_crop">crop</code></td>
<td>
<p><code>TRUE</code> if results should be cropped to the specified <code>x</code> extent,
<code>FALSE</code> otherwise. If <code>x</code> is an <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object with one <code>POINT</code>, crop
is set to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_res">res</code></td>
<td>
<p>Resolution (in pixels) of the final tile. Only valid for WMS.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_bbox_expand">bbox_expand</code></td>
<td>
<p>A numeric value that indicates the expansion percentage
of the bounding box of <code>x</code>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_transparent">transparent</code></td>
<td>
<p>Logical. Provides transparent background, if supported.
Depends on the selected provider on <code>type</code>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_mask">mask</code></td>
<td>
<p><code>TRUE</code> if the result should be masked to <code>x</code>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. See <strong>About caching</strong>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="esp_getTiles_+3A_options">options</code></td>
<td>
<p>A named list containing additional options to pass to the
query.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Zoom levels are described on the
<a href="https://wiki.openstreetmap.org/wiki/Zoom_levels">OpenStreetMap wiki</a>:</p>

<table>
<tr>
 <td style="text-align: right;">
   zoom </td><td style="text-align: left;"> area to represent </td>
</tr>
<tr>
 <td style="text-align: right;">
   0 </td><td style="text-align: left;"> whole world </td>
</tr>
<tr>
 <td style="text-align: right;">
   3 </td><td style="text-align: left;"> large country </td>
</tr>
<tr>
 <td style="text-align: right;">
   5 </td><td style="text-align: left;"> state </td>
</tr>
<tr>
 <td style="text-align: right;">
   8 </td><td style="text-align: left;"> county </td>
</tr>
<tr>
 <td style="text-align: right;">
   10 </td><td style="text-align: left;"> metropolitan area </td>
</tr>
<tr>
 <td style="text-align: right;">
   11 </td><td style="text-align: left;"> city </td>
</tr>
<tr>
 <td style="text-align: right;">
   13 </td><td style="text-align: left;"> village or suburb </td>
</tr>
<tr>
 <td style="text-align: right;">
   16 </td><td style="text-align: left;"> streets </td>
</tr>
<tr>
 <td style="text-align: right;">
   18 </td><td style="text-align: left;"> some buildings, trees </td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p>For a complete list of providers see <a href="#topic+esp_tiles_providers">esp_tiles_providers</a>.
</p>
<p>Most WMS/WMTS providers provide tiles on &quot;EPSG:3857&quot;. In case that the tile
looks deformed, try projecting first <code>x</code>:
</p>
<p><code>x &lt;- sf::st_transform(x, 3857)</code>
</p>


<h3>Value</h3>

<p>A <code>SpatRaster</code> is returned, with 3 (RGB) or 4 (RGBA) layers, depending on
the provider. See <code><a href="terra.html#topic+rast">terra::rast()</a></code>.
.
</p>


<h3>About caching</h3>

<p>You can set your <code>cache_dir</code> with <code><a href="#topic+esp_set_cache_dir">esp_set_cache_dir()</a></code>.
</p>
<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding .geojson file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>Source</h3>

<p><a href="https://dieghernan.github.io/leaflet-providersESP/">https://dieghernan.github.io/leaflet-providersESP/</a> leaflet plugin,
<strong>v1.3.3</strong>.
</p>


<h3>See Also</h3>

<p><code><a href="terra.html#topic+rast">terra::rast()</a></code>.
</p>
<p>Other imagery utilities: 
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles</a>()</code>,
<code><a href="#topic+esp_make_provider">esp_make_provider</a>()</code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This script downloads tiles to your local machine
# Run only if you are online

segovia &lt;- esp_get_prov_siane("segovia", epsg = 3857)
tile &lt;- esp_getTiles(segovia, "IGNBase.Todo")

library(ggplot2)
library(tidyterra)

ggplot(segovia) +
  geom_spatraster_rgb(data = tile, maxcell = Inf) +
  geom_sf(fill = NA)

# Another provider

tile2 &lt;- esp_getTiles(segovia, type = "MDT")

ggplot(segovia) +
  geom_spatraster_rgb(data = tile2, maxcell = Inf) +
  geom_sf(fill = NA)

# A custom WMS provided

custom_wms &lt;- esp_make_provider(
  id = "an_id_for_caching",
  q = "https://idecyl.jcyl.es/geoserver/ge/wms?",
  service = "WMS",
  version = "1.3.0",
  format = "image/png",
  layers = "geolog_cyl_litologia"
)

custom_wms_tile &lt;- esp_getTiles(segovia, custom_wms)

autoplot(custom_wms_tile, maxcell = Inf) +
  geom_sf(data = segovia, fill = NA, color = "red")

# A custom WMTS provider

custom_wmts &lt;- esp_make_provider(
  id = "cyl_wmts",
  q = "https://www.ign.es/wmts/pnoa-ma?",
  service = "WMTS",
  layer = "OI.OrthoimageCoverage"
)

custom_wmts_tile &lt;- esp_getTiles(segovia, custom_wmts)

autoplot(custom_wmts_tile, maxcell = Inf) +
  geom_sf(data = segovia, fill = NA, color = "white", linewidth = 2)

# Example from https://leaflet-extras.github.io/leaflet-providers/preview/
cartodb_voyager &lt;- list(
  id = "CartoDB_Voyager",
  q = "https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png"
)
cartodb &lt;- esp_getTiles(segovia, cartodb_voyager, zoommin = 1)

autoplot(cartodb, maxcell = Inf) +
  geom_sf(data = segovia, fill = NA, color = "black", linewidth = 1)

## End(Not run)
</code></pre>

<hr>
<h2 id='esp_make_provider'>Create a custom tile provider</h2><span id='topic+esp_make_provider'></span>

<h3>Description</h3>

<p>Helper function for <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> that helps to create a custom provider.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_make_provider(id, q, service, layers, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_make_provider_+3A_id">id</code></td>
<td>
<p>An identifier for the user. Would be used also for identifying
cached tiles.</p>
</td></tr>
<tr><td><code id="esp_make_provider_+3A_q">q</code></td>
<td>
<p>The base url of the service</p>
</td></tr>
<tr><td><code id="esp_make_provider_+3A_service">service</code></td>
<td>
<p>The type of tile service, either <code>"WMS"</code> or <code>"WMTS"</code>.</p>
</td></tr>
<tr><td><code id="esp_make_provider_+3A_layers">layers</code></td>
<td>
<p>The name of the layer to retrieve</p>
</td></tr>
<tr><td><code id="esp_make_provider_+3A_...">...</code></td>
<td>
<p>Additional parameters to the query, like <code>version</code>, <code>format</code>,
<code>crs/srs</code>, <code>style</code>, ... depending on the capabilities of the service.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is meant to work with services provided as of the
<a href="http://opengeospatial.github.io/e-learning/wms/text/operations.html#getmap">OGC Standard</a>.
</p>
<p>Note that:
</p>

<ul>
<li> <p><a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> would not provide advice on the parameter <code>q</code> to be
provided.
</p>
</li>
<li><p> Currently, on <strong>WMTS</strong> requests only services with
<code>tilematrixset=GoogleMapsCompatible</code> are supported.
</p>
</li></ul>



<h3>Value</h3>

<p>A named list with two elements <code>id</code> and <code>q</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+esp_getTiles">esp_getTiles()</a></code>.
</p>
<p>For a list of potential providers from Spain check
<a href="https://www.idee.es/segun-tipo-de-servicio">IDEE Directory</a>.
</p>
<p>Other imagery utilities: 
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles</a>()</code>,
<code><a href="#topic+esp_getTiles">esp_getTiles</a>()</code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This script downloads tiles to your local machine
# Run only if you are online

custom_wms &lt;- esp_make_provider(
  id = "an_id_for_caching",
  q = "https://idecyl.jcyl.es/geoserver/ge/wms?",
  service = "WMS",
  layers = "geolog_cyl_litologia"
)

x &lt;- esp_get_ccaa("Castilla y León", epsg = 3857)

mytile &lt;- esp_getTiles(x, type = custom_wms)

tidyterra::autoplot(mytile) +
  ggplot2::geom_sf(data = x, fill = NA)

## End(Not run)
</code></pre>

<hr>
<h2 id='esp_move_can'>Displace a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object located in the Canary Islands</h2><span id='topic+esp_move_can'></span>

<h3>Description</h3>

<p>Helper function to displace an external <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object (potentially
representing a location in the Canary Islands) to align it with the objects
provided by <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> with the option <code>moveCAN = TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esp_move_can(x, moveCAN = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_move_can_+3A_x">x</code></td>
<td>
<p>An <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object. It may be <code>sf</code> or <code>sfc</code> object.</p>
</td></tr>
<tr><td><code id="esp_move_can_+3A_movecan">moveCAN</code></td>
<td>
<p>A logical <code>TRUE/FALSE</code> or a vector of coordinates
<code>c(lat, lon)</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a helper function that intends to ease the representation of objects
located in the Canary Islands that have been obtained from other sources
rather than the package <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a>.
</p>


<h3>Value</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object of the same class and same CRS than <code>x</code> but
displaced accordingly.
</p>


<h3>See Also</h3>

<p>Other helper: 
<code><a href="#topic+esp_check_access">esp_check_access</a>()</code>
</p>
<p>Other Canary Islands: 
<code><a href="#topic+esp_get_can_box">esp_get_can_box</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
teide &lt;- data.frame(
  name = "Teide Peak",
  lon = -16.6437593,
  lat = 28.2722883
)

teide_sf &lt;- st_as_sf(teide, coords = c("lon", "lat"), crs = 4326)

# If we use any mapSpain produced object with moveCAN = TRUE...

esp &lt;- esp_get_country(moveCAN = c(13, 0))

library(ggplot2)


ggplot(esp) +
  geom_sf() +
  geom_sf(data = teide_sf, color = "red") +
  labs(
    title = "Canary Islands displaced",
    subtitle = "But not the external Teide object"
  )



# But we can

teide_sf_disp &lt;- esp_move_can(teide_sf, moveCAN = c(13, 0))

ggplot(esp) +
  geom_sf() +
  geom_sf(data = teide_sf_disp, color = "red") +
  labs(
    title = "Canary Islands displaced",
    subtitle = "And also the external Teide object"
  )

</code></pre>

<hr>
<h2 id='esp_munic.sf'>All Municipalities <code>POLYGON</code> object of Spain (2019)</h2><span id='topic+esp_munic.sf'></span>

<h3>Description</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object including all municipalities of Spain as provided by
GISCO (2019 version).
</p>


<h3>Format</h3>

<p>A <code>sf</code> object (resolution: 1:1million, EPSG:4258) object with
8,131 rows and columns:
</p>

<dl>
<dt>codauto</dt><dd><p>INE code of the autonomous community.</p>
</dd>
<dt>ine.ccaa.name</dt><dd><p>INE name of the autonomous community.</p>
</dd>
<dt>cpro</dt><dd><p>INE code of the province.</p>
</dd>
<dt>ine.prov.name</dt><dd><p>INE name of the province.</p>
</dd>
<dt>cmun</dt><dd><p>INE code of the municipality.</p>
</dd>
<dt>name</dt><dd><p>Name of the municipality.</p>
</dd>
<dt>LAU_CODE</dt><dd><p>LAU Code (GISCO) of the municipality. This is a
combination of <strong>cpro</strong> and <strong>cmun</strong>, aligned with INE coding scheme.</p>
</dd>
<dt>geometry</dt><dd><p>geometry field.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/">https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/</a>, LAU 2019
data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+esp_get_munic">esp_get_munic()</a></code>.
</p>
<p>Other datasets: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_nuts.sf">esp_nuts.sf</a></code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>,
<code><a href="#topic+pobmun19">pobmun19</a></code>
</p>
<p>Other municipalities: 
<code><a href="#topic+esp_get_capimun">esp_get_capimun</a>()</code>,
<code><a href="#topic+esp_get_munic">esp_get_munic</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("esp_munic.sf")

teruel_cpro &lt;- esp_dict_region_code("Teruel", destination = "cpro")

teruel_sf &lt;- esp_munic.sf[esp_munic.sf$cpro == teruel_cpro, ]
teruel_city &lt;- teruel_sf[teruel_sf$name == "Teruel", ]

# Plot

library(ggplot2)

ggplot(teruel_sf) +
  geom_sf(fill = "#FDFBEA") +
  geom_sf(data = teruel_city, aes(fill = name)) +
  scale_fill_manual(
    values = "#C12838",
    labels = "City of Teruel"
  ) +
  labs(
    fill = "",
    title = "Municipalities of Teruel"
  ) +
  theme_minimal() +
  theme(
    text = element_text(face = "bold"),
    panel.background = element_rect(colour = "black"),
    panel.grid = element_blank(),
    legend.position = c(.2, .95)
  )
</code></pre>

<hr>
<h2 id='esp_nuts.sf'>All NUTS <code>POLYGON</code> object of Spain</h2><span id='topic+esp_nuts.sf'></span>

<h3>Description</h3>

<p>A <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object including all NUTS levels of Spain as provided by
GISCO (2016 version).
</p>


<h3>Format</h3>

<p>A <code>sf</code> object (resolution: 1:1million, EPSG:4258) with
86 rows and columns:
</p>

<dl>
<dt>LEVL_CODE</dt><dd><p>NUTS level code (0,1,2,3)</p>
</dd>
<dt>NUTS_ID</dt><dd><p>NUTS identifier</p>
</dd>
<dt>URBN_TYPE</dt><dd><p>Urban Type, see Details</p>
</dd>
<dt>CNTR_CODE</dt><dd><p>Eurostat Country code <code>ES</code></p>
</dd>
<dt>NAME_LATN</dt><dd><p>NUTS name on Latin characters</p>
</dd>
<dt>NUTS_NAME</dt><dd><p>NUTS name on local alphabet</p>
</dd>
<dt>MOUNT_TYPE</dt><dd><p>Mount Type, see Details</p>
</dd>
<dt>COAST_TYPE</dt><dd><p>Coast Type, see Details</p>
</dd>
<dt>FID</dt><dd><p>FID</p>
</dd>
<dt>geometry</dt><dd><p>geometry field</p>
</dd>
</dl>



<h3>Details</h3>

<p><strong>MOUNT_TYPE</strong>: Mountain typology:
</p>

<ul>
<li><p> 1: More than 50 % of the surface is covered by topographic mountain areas.
</p>
</li>
<li><p> 2: More than 50 % of the regional population lives in topographic
mountain areas.
</p>
</li>
<li><p> 3: More than 50 % of the surface is covered by topographic mountain areas
and where more than 50 % of the regional population lives in these
mountain areas.
</p>
</li>
<li><p> 4: Non-mountain region / other regions.
</p>
</li>
<li><p> 0: No classification provided
</p>
</li></ul>

<p><strong>URBN_TYPE</strong>: Urban-rural typology:
</p>

<ul>
<li><p> 1: Predominantly urban region.
</p>
</li>
<li><p> 2: Intermediate region.
</p>
</li>
<li><p> 3: Predominantly rural region.
</p>
</li>
<li><p> 0: No classification provided
</p>
</li></ul>

<p><strong>COAST_TYPE</strong>: Coastal typology:
</p>

<ul>
<li><p> 1: Coastal (on coast).
</p>
</li>
<li><p> 2: Coastal (less than 50% of population living within 50 km. of the
coastline).
</p>
</li>
<li><p> 3: Non-coastal region.
</p>
</li>
<li><p> 0: No classification provided
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://gisco-services.ec.europa.eu/distribution/v2/nuts/">https://gisco-services.ec.europa.eu/distribution/v2/nuts/</a>, file
<code>NUTS_RG_20M_2016_4326.geojson</code>.
</p>


<h3>See Also</h3>

<p>Other datasets: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>,
<code><a href="#topic+pobmun19">pobmun19</a></code>
</p>
<p>Other nuts: 
<code><a href="#topic+esp_get_nuts">esp_get_nuts</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("esp_nuts.sf")

nuts &lt;- esp_nuts.sf

# Select NUTS 3
nuts3 &lt;- esp_nuts.sf[esp_nuts.sf$LEVL_CODE == 3, ]

# Combine with full shape

spain &lt;- esp_get_country(moveCAN = FALSE)

# Plot Urban Type: See
# https://ec.europa.eu/eurostat/web/rural-development/methodology

library(ggplot2)

nuts3$URBN_TYPE_cat &lt;- as.factor(nuts3$URBN_TYPE)

levels(nuts3$URBN_TYPE_cat)
levels(nuts3$URBN_TYPE_cat) &lt;- c("Urban", "Intermediate", "Rural")

ggplot(nuts3) +
  geom_sf(aes(fill = URBN_TYPE_cat), linewidth = .1) +
  scale_fill_manual(values = c("grey80", "#FFC183", "#68AC20")) +
  labs(
    title = "NUTS3 levels of Spain",
    fill = "Urban topology"
  ) +
  theme_linedraw() +
  theme(
    legend.position = c(.8, .2)
  )
</code></pre>

<hr>
<h2 id='esp_set_cache_dir'>Set your <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> cache dir</h2><span id='topic+esp_set_cache_dir'></span>

<h3>Description</h3>

<p>This function will store your <code>cache_dir</code> path on your local machine and
would load it for future sessions. Type <code>Sys.getenv("MAPSPAIN_CACHE_DIR")</code> to
find your cached path.
</p>
<p>Alternatively, you can store the <code>cache_dir</code> manually with the following
options:
</p>

<ul>
<li><p> Run <code>Sys.setenv(MAPSPAIN_CACHE_DIR = "cache_dir")</code>. You would need to
run this command on each session (Similar to <code>install = FALSE</code>).
</p>
</li>
<li><p> Set <code>options(mapSpain_cache_dir = "cache_dir")</code>. Similar to the previous
option. This is <strong>not recommended any more</strong>, and it is provided for
backwards compatibility purposes.
</p>
</li>
<li><p> Write this line on your .Renviron file:
<code>MAPSPAIN_CACHE_DIR = "value_for_cache_dir"</code> (same behavior than
<code>install = TRUE</code>). This would store your <code>cache_dir</code> permanently.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>esp_set_cache_dir(
  cache_dir,
  overwrite = FALSE,
  install = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esp_set_cache_dir_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On missing value the function
would store the cached files on a temporary dir (See <code><a href="base.html#topic+tempfile">base::tempdir()</a></code>).</p>
</td></tr>
<tr><td><code id="esp_set_cache_dir_+3A_overwrite">overwrite</code></td>
<td>
<p>If this is set to <code>TRUE</code>, it will overwrite an existing
<code>MAPSPAIN_CACHE_DIR</code> that you already have in local machine.</p>
</td></tr>
<tr><td><code id="esp_set_cache_dir_+3A_install">install</code></td>
<td>
<p>if <code>TRUE</code>, will install the key in your local machine for
use in future sessions.  Defaults to <code>FALSE.</code> If <code>cache_dir</code> is <code>FALSE</code>
this parameter is set to <code>FALSE</code> automatically.</p>
</td></tr>
<tr><td><code id="esp_set_cache_dir_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) character with the path to your <code>cache_dir</code>.
</p>


<h3>See Also</h3>

<p><code><a href="rappdirs.html#topic+user_data_dir">rappdirs::user_config_dir()</a></code>
</p>
<p>Other cache utilities: 
<code><a href="#topic+esp_clear_cache">esp_clear_cache</a>()</code>,
<code><a href="#topic+esp_detect_cache_dir">esp_detect_cache_dir</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Don't run this! It would modify your current state
## Not run: 
esp_set_cache_dir(verbose = TRUE)

## End(Not run)

Sys.getenv("MAPSPAIN_CACHE_DIR")
</code></pre>

<hr>
<h2 id='esp_tiles_providers'>List with information of Public WMS and WMTS of Spain</h2><span id='topic+esp_tiles_providers'></span>

<h3>Description</h3>

<p>A named list of length 102 containing
the parameters of the url information of different public WMS and WMTS
providers of Spain.
</p>
<p>Implementation of javascript plugin
<a href="https://dieghernan.github.io/leaflet-providersESP/">leaflet-providersESP</a>
<strong>v1.3.3</strong>.
</p>


<h3>Format</h3>

<p>A named list of the providers available with the following structure:
</p>

<ul>
<li><p> Each item of the list is named with the provider alias.
</p>
</li>
<li><p> Each element of the list contains two nested named lists:
</p>

<ul>
<li> <p><code>static</code> with the parameters to get static tiles plus an additional item
named <code>attribution</code>.
</p>
</li>
<li> <p><code>leaflet</code> with additional parameters to be passed onto
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles()</a></code>.
</p>
</li></ul>

</li></ul>



<h3>Details</h3>

<p>Providers available to be passed to <code>type</code> on <code><a href="#topic+esp_getTiles">esp_getTiles()</a></code> are:
</p>

<ul>
<li> <p><code>"IDErioja"</code>
</p>
</li>
<li> <p><code>"IDErioja.Base"</code>
</p>
</li>
<li> <p><code>"IDErioja.Relieve"</code>
</p>
</li>
<li> <p><code>"IDErioja.Claro"</code>
</p>
</li>
<li> <p><code>"IDErioja.Oscuro"</code>
</p>
</li>
<li> <p><code>"IGNBase"</code>
</p>
</li>
<li> <p><code>"IGNBase.Todo"</code>
</p>
</li>
<li> <p><code>"IGNBase.Gris"</code>
</p>
</li>
<li> <p><code>"IGNBase.TodoNoFondo"</code>
</p>
</li>
<li> <p><code>"IGNBase.Orto"</code>
</p>
</li>
<li> <p><code>"MDT"</code>
</p>
</li>
<li> <p><code>"MDT.Elevaciones"</code>
</p>
</li>
<li> <p><code>"MDT.Relieve"</code>
</p>
</li>
<li> <p><code>"MDT.CurvasNivel"</code>
</p>
</li>
<li> <p><code>"MDT.SpotElevation"</code>
</p>
</li>
<li> <p><code>"PNOA"</code>
</p>
</li>
<li> <p><code>"PNOA.MaximaActualidad"</code>
</p>
</li>
<li> <p><code>"PNOA.Mosaico"</code>
</p>
</li>
<li> <p><code>"OcupacionSuelo"</code>
</p>
</li>
<li> <p><code>"OcupacionSuelo.Ocupacion"</code>
</p>
</li>
<li> <p><code>"OcupacionSuelo.Usos"</code>
</p>
</li>
<li> <p><code>"LiDAR"</code>
</p>
</li>
<li> <p><code>"MTN"</code>
</p>
</li>
<li> <p><code>"Geofisica"</code>
</p>
</li>
<li> <p><code>"Geofisica.Terremotos10dias"</code>
</p>
</li>
<li> <p><code>"Geofisica.Terremotos30dias"</code>
</p>
</li>
<li> <p><code>"Geofisica.Terremotos365dias"</code>
</p>
</li>
<li> <p><code>"Geofisica.ObservedEvents"</code>
</p>
</li>
<li> <p><code>"Geofisica.HazardArea"</code>
</p>
</li>
<li> <p><code>"VigilanciaVolcanica"</code>
</p>
</li>
<li> <p><code>"VigilanciaVolcanica.ErupcionesHistoricas"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminoFrances"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosFrancia"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosGalicia"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosDelNorte"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosAndaluces"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosCentro"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosEste"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosCatalanes"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosSureste"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosInsulares"</code>
</p>
</li>
<li> <p><code>"CaminoDeSantiago.CaminosPortugueses"</code>
</p>
</li>
<li> <p><code>"Catastro"</code>
</p>
</li>
<li> <p><code>"Catastro.Catastro"</code>
</p>
</li>
<li> <p><code>"Catastro.Parcela"</code>
</p>
</li>
<li> <p><code>"Catastro.CadastralParcel"</code>
</p>
</li>
<li> <p><code>"Catastro.CadastralZoning"</code>
</p>
</li>
<li> <p><code>"Catastro.Address"</code>
</p>
</li>
<li> <p><code>"Catastro.Building"</code>
</p>
</li>
<li> <p><code>"Catastro.BuildingPart"</code>
</p>
</li>
<li> <p><code>"Catastro.AdministrativeBoundary"</code>
</p>
</li>
<li> <p><code>"Catastro.AdministrativeUnit"</code>
</p>
</li>
<li> <p><code>"RedTransporte"</code>
</p>
</li>
<li> <p><code>"RedTransporte.Carreteras"</code>
</p>
</li>
<li> <p><code>"RedTransporte.Ferroviario"</code>
</p>
</li>
<li> <p><code>"RedTransporte.Aerodromo"</code>
</p>
</li>
<li> <p><code>"RedTransporte.AreaServicio"</code>
</p>
</li>
<li> <p><code>"RedTransporte.EstacionesFerroviario"</code>
</p>
</li>
<li> <p><code>"RedTransporte.Puertos"</code>
</p>
</li>
<li> <p><code>"Cartociudad"</code>
</p>
</li>
<li> <p><code>"Cartociudad.CodigosPostales"</code>
</p>
</li>
<li> <p><code>"Cartociudad.Direcciones"</code>
</p>
</li>
<li> <p><code>"NombresGeograficos"</code>
</p>
</li>
<li> <p><code>"UnidadesAdm"</code>
</p>
</li>
<li> <p><code>"UnidadesAdm.Limites"</code>
</p>
</li>
<li> <p><code>"UnidadesAdm.Unidades"</code>
</p>
</li>
<li> <p><code>"Hidrografia"</code>
</p>
</li>
<li> <p><code>"Hidrografia.MasaAgua"</code>
</p>
</li>
<li> <p><code>"Hidrografia.Cuencas"</code>
</p>
</li>
<li> <p><code>"Hidrografia.Subcuencas"</code>
</p>
</li>
<li> <p><code>"Hidrografia.POI"</code>
</p>
</li>
<li> <p><code>"Hidrografia.ManMade"</code>
</p>
</li>
<li> <p><code>"Hidrografia.LineaCosta"</code>
</p>
</li>
<li> <p><code>"Hidrografia.Rios"</code>
</p>
</li>
<li> <p><code>"Hidrografia.Humedales"</code>
</p>
</li>
<li> <p><code>"Militar"</code>
</p>
</li>
<li> <p><code>"Militar.CEGET1M"</code>
</p>
</li>
<li> <p><code>"Militar.CEGETM7814"</code>
</p>
</li>
<li> <p><code>"Militar.CEGETM7815"</code>
</p>
</li>
<li> <p><code>"Militar.CEGETM682"</code>
</p>
</li>
<li> <p><code>"Militar.CECAF1M"</code>
</p>
</li>
<li> <p><code>"ADIF"</code>
</p>
</li>
<li> <p><code>"ADIF.Vias"</code>
</p>
</li>
<li> <p><code>"ADIF.Nodos"</code>
</p>
</li>
<li> <p><code>"ADIF.Estaciones"</code>
</p>
</li>
<li> <p><code>"LimitesMaritimos"</code>
</p>
</li>
<li> <p><code>"LimitesMaritimos.LimitesMaritimos"</code>
</p>
</li>
<li> <p><code>"LimitesMaritimos.LineasBase"</code>
</p>
</li>
<li> <p><code>"Copernicus"</code>
</p>
</li>
<li> <p><code>"Copernicus.Forest"</code>
</p>
</li>
<li> <p><code>"Copernicus.ForestLeaf"</code>
</p>
</li>
<li> <p><code>"Copernicus.WaterWet"</code>
</p>
</li>
<li> <p><code>"Copernicus.SoilSeal"</code>
</p>
</li>
<li> <p><code>"Copernicus.GrassLand"</code>
</p>
</li>
<li> <p><code>"Copernicus.RiparianGreen"</code>
</p>
</li>
<li> <p><code>"Copernicus.RiparianLandCover"</code>
</p>
</li>
<li> <p><code>"Copernicus.Natura2k"</code>
</p>
</li>
<li> <p><code>"Copernicus.UrbanAtlas"</code>
</p>
</li>
<li> <p><code>"ParquesNaturales"</code>
</p>
</li>
<li> <p><code>"ParquesNaturales.Limites"</code>
</p>
</li>
<li> <p><code>"ParquesNaturales.ZonasPerifericas"</code>
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://dieghernan.github.io/leaflet-providersESP/">https://dieghernan.github.io/leaflet-providersESP/</a> leaflet plugin,
<strong>v1.3.3</strong>.
</p>


<h3>See Also</h3>

<p>Other datasets: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>,
<code><a href="#topic+esp_nuts.sf">esp_nuts.sf</a></code>,
<code><a href="#topic+pobmun19">pobmun19</a></code>
</p>
<p>Other imagery utilities: 
<code><a href="#topic+addProviderEspTiles">addProviderEspTiles</a>()</code>,
<code><a href="#topic+esp_getTiles">esp_getTiles</a>()</code>,
<code><a href="#topic+esp_make_provider">esp_make_provider</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("esp_tiles_providers")
# Get a single provider

single &lt;- esp_tiles_providers[["IGNBase.Todo"]]
single$static

single$leaflet

</code></pre>

<hr>
<h2 id='leaflet.providersESP.df'>Public WMS and WMTS of Spain</h2><span id='topic+leaflet.providersESP.df'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>This data frame is not longer in use by <a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a>. See
<a href="#topic+esp_tiles_providers">esp_tiles_providers</a> instead.
</p>
<p>A data frame containing information of different public WMS and WMTS
providers of Spain
</p>


<h3>Format</h3>

<p>A data frame object with a list of the required parameters for calling
the service:
</p>

<dl>
<dt>provider</dt><dd><p>Provider name</p>
</dd></dl>
<p>.
</p>
<dl>
<dt>field</dt><dd><p>Description of <code>value</code></p>
</dd></dl>
<p>.
</p>
<dl>
<dt>value</dt><dd><p>INE code of each province</p>
</dd></dl>
<p>.

</p>


<h3>Source</h3>

<p><a href="https://dieghernan.github.io/leaflet-providersESP/">https://dieghernan.github.io/leaflet-providersESP/</a> leaflet plugin,
<strong>v1.3.3</strong>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("leaflet.providersESP.df")
</code></pre>

<hr>
<h2 id='pobmun19'>Population by municipality (2019)</h2><span id='topic+pobmun19'></span>

<h3>Description</h3>

<p>Population by municipality (2019)
</p>


<h3>Format</h3>

<p>An example data frame with
8,131 rows containing the
population data by municipality in Spain (2019).
</p>

<dl>
<dt>cpro</dt><dd><p>INE code of the province.</p>
</dd>
<dt>provincia</dt><dd><p>name of the province.</p>
</dd>
<dt>cmun</dt><dd><p>INE code of the municipality.</p>
</dd>
<dt>name</dt><dd><p>Name of the municipality.</p>
</dd>
<dt>pob19</dt><dd><p>Overall population (2019)</p>
</dd>
<dt>men</dt><dd><p>Men population (2019)</p>
</dd>
<dt>women</dt><dd><p>Women population (2019)</p>
</dd>
</dl>



<h3>Source</h3>

<p>INE: Instituto Nacional de Estadistica <a href="https://www.ine.es/">https://www.ine.es/</a>
</p>


<h3>See Also</h3>

<p>Other datasets: 
<code><a href="#topic+esp_codelist">esp_codelist</a></code>,
<code><a href="#topic+esp_munic.sf">esp_munic.sf</a></code>,
<code><a href="#topic+esp_nuts.sf">esp_nuts.sf</a></code>,
<code><a href="#topic+esp_tiles_providers">esp_tiles_providers</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("pobmun19")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
