<!DOCTYPE html><html><head><title>Help for package meteoForecast</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {meteoForecast}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Forecast variables'>
<p>Forecast Variables available in each model.</p></a></li>
<li><a href='#getPoint'><p>NWP forecasts for a location</p></a></li>
<li><a href='#getRaster'><p>NWP forecasts for a region</p></a></li>
<li><a href='#meteoForecast-package'><p>Access to several Numerical Weather Prediction services both in raster format and as a time series for a location.</p></a></li>
<li><a href='#options'><p> Options and Internal Variables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Numerical Weather Predictions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.56</td>
</tr>
<tr>
<td>Description:</td>
<td>Access to several Numerical Weather Prediction services both in raster format and as a time series for a location. Currently it works with GFS <a href="https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast">https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast</a>, MeteoGalicia <a href="https://www.meteogalicia.gal/web/modelos/threddsIndex.action">https://www.meteogalicia.gal/web/modelos/threddsIndex.action</a>, NAM <a href="https://www.ncei.noaa.gov/products/weather-climate-models/north-american-mesoscale">https://www.ncei.noaa.gov/products/weather-climate-models/north-american-mesoscale</a>, and RAP <a href="https://www.ncei.noaa.gov/products/weather-climate-models/rapid-refresh-update">https://www.ncei.noaa.gov/products/weather-climate-models/rapid-refresh-update</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/oscarperpinan/meteoForecast">https://github.com/oscarperpinan/meteoForecast</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/oscarperpinan/meteoForecast/issues">https://github.com/oscarperpinan/meteoForecast/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>raster, sp, zoo, ncdf4</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats, utils, XML</td>
</tr>
<tr>
<td>Suggests:</td>
<td>sf, lattice, rasterVis</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-07 11:03:38 UTC; oscar</td>
</tr>
<tr>
<td>Author:</td>
<td>Oscar Perpinan Lamigueiro [cre, aut],
  Marcelo Pinho Almeida [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Oscar Perpinan Lamigueiro &lt;oscar.perpinan@upm.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-08 09:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='Forecast+20variables'>
Forecast Variables available in each model.
</h2><span id='topic+grepVar'></span>

<h3>Description</h3>

<p>The <code>grepVar</code> retrieves the XML file with the names,
description, and labels of each variable available in the service, and
searches for matches in the description field.</p>


<h3>Usage</h3>

<pre><code class='language-R'>grepVar(x, service, day = Sys.Date() - 1, complete = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Forecast+2B20variables_+3A_x">x</code></td>
<td>
<p>character string to be matched in the description field of
the set of variables. Try <code>x = ""</code> and <code>complete = TRUE</code> to
get the complete list of choices with the description field.</p>
</td></tr>
<tr><td><code id="Forecast+2B20variables_+3A_service">service</code></td>
<td>
<p>Character, to choose from 'meteogalicia', 'gfs', 'nam', and 'rap'</p>
</td></tr>
<tr><td><code id="Forecast+2B20variables_+3A_day">day</code></td>
<td>
<p>Date. Services change the variables availability over time.</p>
</td></tr>
<tr><td><code id="Forecast+2B20variables_+3A_complete">complete</code></td>
<td>
<p>Logical, if <code>FALSE</code> (default) only the
<code>name</code> of the variables is returned. If <code>TRUE</code> the name,
label, and description columns are provided.</p>
</td></tr>  </table>


<h3>Value</h3>

<p> If <code>complete = TRUE</code> this function provides a
<code>data.frame</code> with three columns, <code>name</code>, <code>label</code>, and
<code>description</code>. Use the elements of the <code>name</code> column to choose
a variable with the argument <code>var</code> of <code><a href="#topic+getRaster">getRaster</a></code> and
<code><a href="#topic+getPoint">getPoint</a></code>.  </p>


<h3>Source</h3>

<p><a href="https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html">https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html</a>
</p>
<p><a href="https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html">https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
## Variables available recently
grepVar('cloud', service = 'gfs', complete = TRUE)

## Variables available some days ago
grepVar('cloud', service = 'nam',
        day = Sys.Date() - 10,
        complete = TRUE)

## You can get the complete list with x = ""
grepVar("", service = 'meteogalicia', complete = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='getPoint'>NWP forecasts for a location</h2><span id='topic+getPoint'></span><span id='topic+getPointDays'></span><span id='topic+getPointRuns'></span>

<h3>Description</h3>

<p>The <code>getPoint*</code> functions get outputs of the NWP models run by MeteoGalicia and NCEP (GFS, RAP, NAM) for a single location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPoint(point, vars = "swflx", day = Sys.Date(), run = "00",
         resolution = NULL, vertical = NA, service = mfService())

getPointDays(point, vars = "swflx", start = Sys.Date(), end,
             service = mfService(), ...)

getPointRuns(point, var = "swflx",
             start = Sys.Date() - 1, end = Sys.Date(),
             service = mfService(), ...) 


</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPoint_+3A_point">point</code></td>
<td>
<p>Coordinates of the location. It can be a
<code>SpatialPoints</code> or a <code>numeric</code> of length 2 (lon, lat).</p>
</td></tr>
<tr><td><code id="getPoint_+3A_var">var</code>, <code id="getPoint_+3A_vars">vars</code></td>
<td>
<p>Character. The name of the variables to retrieve. Use <code><a href="#topic+grepVar">grepVar</a></code> to know what variables are available in each service. <code>getPointRuns</code> only works with one variable.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_day">day</code></td>
<td>
<p>Date or character</p>
</td></tr>
<tr><td><code id="getPoint_+3A_run">run</code></td>
<td>
<p>Character. The meteogalicia service executes the model at OOUTC and 12UTC. Therefore <code>run</code> can be '00' or '12'. With GFS and NAM <code>run</code> can be '00', '06', '12', and '18'.  The RAP service is run every hour.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_start">start</code></td>
<td>
<p>Date or character. First day of the time period to retrieve.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_end">end</code></td>
<td>
<p>Date or character. Last day of the time period to retrieve.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_resolution">resolution</code></td>
<td>
<p>Numeric. Resolution in kilometers of the raster. Valid choices are 4, 12, and 36. It is only used with <code>service = 'meteogalicia'</code>.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_vertical">vertical</code></td>
<td>
<p>Numeric. Vertical coordinate for variables with several levels. Its default value is <code>NA</code>, meaning that only the first level will be retained.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_service">service</code></td>
<td>
<p>Character, which service to use, 'meteogalicia', 'gfs', 'nam', or 'rap'.</p>
</td></tr>
<tr><td><code id="getPoint_+3A_...">...</code></td>
<td>
<p>Additional arguments for <code><a href="#topic+getPoint">getPoint</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions download data from the MeteoGalicia and NCEP (GFS, RAP, NAM) servers using the NetCDF Subset Service. The result is returned as a <code>zoo</code> time series object, with one or more csv files stored in the temporary folder (as defined by <code>tempdir()</code>).
</p>


<h3>Value</h3>

<p><code>getPoint</code> and <code>getPointDays</code> produce a <code>zoo</code> time series with a column for each variable included in <code>vars</code>.
</p>
<p>The time series returned by <code>getPoint</code> starts at 01UTC of <code>day</code> if <code>run = '00'</code> or 13UTC if <code>run = '12'</code>. It spans over 4 days (96 hours) if <code>run = '00'</code> or 84 hours if <code>run = '12'</code>.
</p>
<p>The time series returned by <code>getPointDays</code> starts at 01UTC of <code>start</code> and finishes at 00UTC of <code>end + 1</code>. Each day comprised in the time period is constructed with the forecast outputs corresponding to the 00UTC run of that day. Therefore, only the first 24 values obtained with <code>getPoint</code> are used for each day.
</p>
<p>The time series returned by <code>getPointRuns</code> starts at 01UTC of <code>start</code> and finishes at 00UTC of <code>end + 1</code>. It has 4 columns, named &quot;D3_00&quot;, &quot;D2_00&quot;, &quot;D1_00&quot; and &quot;D0_00&quot;. The column &quot;D3_00&quot; corresponds to the forecast results produced 3 days before the time stamp of each row, and so on.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro with contributions from Marcelo Almeida</p>


<h3>References</h3>

<p><a href="https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html">https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html</a>
</p>
<p><a href="https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html">https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getRaster">getRaster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  ## If some of the next examples do not work, try using a different
  ## date. Check availability for each service with the links included in
  ## the references section.
  testDay &lt;- Sys.Date() - 1

  ## temperature (Kelvin) forecast from meteogalicia
  tempK &lt;- getPoint(c(0, 40), vars = 'temp', day = testDay)
  ## Cell does not coincide exactly with request
  attr(tempK, 'lat')
  attr(tempK, 'lon')
  ## Units conversion
  tempC &lt;- tempK - 273

  library(lattice)
  ## Beware: the x-axis labels display time using your local timezone.
  Sys.timezone()

  ## Use Sys.setenv(TZ = 'UTC') to produce graphics with the timezone
  ## of the objects provided by meteoForecast.
  xyplot(tempC)

  ## Multiple variables
  vars &lt;- getPoint(c(0, 40), vars = c('swflx', 'temp'), day = testDay)
  xyplot(vars)

  ## Vertical coordinates
  tempK1000 &lt;- getPoint(c(0,40),
                        vars = "Temperature_surface",
                        day = testDay,
                        service ="gfs", vertical = 1000)

  ## Time sequence
  radDays &lt;- getPointDays(c(0, 40),
                          start = testDay - 3,
                          end = testDay)
  
  xyplot(radDays)

  ## Variability between runs
  radRuns &lt;- getPointRuns(c(0, 40),
                          start = testDay - 3,
                          end = testDay)
  xyplot(radRuns, superpose = TRUE)
  
  ## variability around the average
  radAv &lt;- rowMeans(radRuns)
  radVar &lt;- sweep(radRuns, 1, radAv)
  xyplot(radVar, superpose = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='getRaster'>NWP forecasts for a region</h2><span id='topic+getRaster'></span><span id='topic+getRasterDays'></span><span id='topic+getRasterDay'></span><span id='topic+checkDays'></span>

<h3>Description</h3>

<p>The <code>getRaster*</code> functions get outputs of the NWP models for a region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
getRaster(var = "swflx", day = Sys.Date(), run = "00",
          frames = 'complete', box, resolution = NULL,
          names, remote = TRUE, service = mfService(),
          dataDir = ".", use00H = FALSE, ...)

getRasterDays(var = "swflx", start = Sys.Date(), end,
              remote = TRUE, dataDir = ".", ...)

getRasterDay(var = "swflx", day = Sys.Date(),
              remote = TRUE, dataDir = ".", ...)

checkDays(start, end, vars, remote = FALSE,
          service = mfService(), dataDir = '.')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getRaster_+3A_var">var</code>, <code id="getRaster_+3A_vars">vars</code></td>
<td>
<p>Character. The name of the variable (or variables in <code>checkDays</code>) to retrieve. Use <code><a href="#topic+grepVar">grepVar</a></code> to know what variables are available in each service.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_day">day</code></td>
<td>
<p>Date or character. In <code>getRaster</code> it defines the day when the forecast was produced. In <code>getRasterDay</code> it defines the day to be forecast.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_run">run</code></td>
<td>
<p>Character. For example, the meteogalicia service executes the model at OOUTC and 12UTC. Therefore <code>run</code> can be '00' or '12'.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_start">start</code></td>
<td>
<p>Date or character. First day of the time period to retrieve.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_end">end</code></td>
<td>
<p>Date or character. Last day of the time period to retrieve.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_frames">frames</code></td>
<td>
<p>Numeric. It defines the number of hourly forecasts (frames) to retrieve. If <code>frames = 'complete'</code>, the full set of frames is downloaded. For example, the meteogalicia service produces 96 hourly forecasts (frames) with <code>run='00'</code> and 84 frames with <code>run='12'</code>.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_box">box</code></td>
<td>
<p>The bounding box, defined using longitude and latitude values. A <code><a href="raster.html#topic+Extent">Extent</a></code> or an object that can be coerced to that class with <code><a href="raster.html#topic+extent">extent</a></code>: a 2x2 matrix (first row: xmin, xmax; second row: ymin, ymax), vector (length=4; order= xmin, xmax, ymin, ymax) or list (with at least two elements, with names 'x' and 'y'). </p>
</td></tr>
<tr><td><code id="getRaster_+3A_resolution">resolution</code></td>
<td>
<p>Numeric. Resolution in kilometers of the raster. Valid choices are 4, 12, and 36. It is only used with <code>service = 'meteogalicia'</code>.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_names">names</code></td>
<td>
<p>Character. Names of the layers of the resulting <code>RasterBrick</code>. If missing, a predefined vector is assigned the combination of day and hour.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_remote">remote</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) data is downloaded from the remote service. If <code>FALSE</code> the <code>RasterBrick</code> is produced with the files available in the local folder.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_service">service</code></td>
<td>
<p>Character, which service to use, 'meteogalicia', 'gfs', 'nam' or 'rap'.</p>
</td></tr>
<tr><td><code id="getRaster_+3A_use00h">use00H</code></td>
<td>
<p>Logical. Only used when <code>service</code> is 'gfs', 'nam', or 'rap'. If <code>FALSE</code> (default), the first frame of each run or 00H &quot;forecast&quot; is not considered. This first frame is only produced for some variables. Therefore, with <code>use00H = TRUE</code> fewer frames that the number defined with <code>frames</code> could be obtained for some variables.)</p>
</td></tr>
<tr><td><code id="getRaster_+3A_datadir">dataDir</code></td>
<td>
<p>Character, path of the folder where files are stored (if <code>remote = 'FALSE'</code>)</p>
</td></tr>
<tr><td><code id="getRaster_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not used in <code>getRaster</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getRaster</code> downloads data from the MeteoGalicia and NCDC (GFS,
RAP, and NAM) servers using the NetCDF Subset Service. The result is returned as a <code>RasterBrick</code> object, with one or more NetCDF files stored in the temporary folder (as defined by <code>tempdir()</code>). Each frame or layer of the <code>RasterBrick</code> corresponds to a certain hour of the forecast.
</p>
<p><code>getRasterDay</code> uses <code>getRaster</code> to download the results corresponding to a certain <code>day</code>. If the <code>day</code> is in the future, the most recent forecast is downloaded with <code>getRaster</code>, and the corresponding frames are extracted. If the <code>day</code> is in the past, <code>getRaster</code> is used to download the corresponding frames of the forecast produced that day.
</p>
<p><code>getRasterDays</code> uses <code>getRaster</code> to download the results cast each day comprised between <code>start</code> and <code>end</code> using the 00UTC run. Then it subsets the first 24 frames of each result, and binds them together to produce a <code>RasterBrick</code>. Therefore, each frame of this <code>RasterBrick</code> is a forecast for an hour of the day when the forecast was cast.
</p>
<p><code>checkDays</code> explores a local folder looking for NetCDF files corresponding to a time sequence and a set of variables. It returns a <code>Date</code> vector comprising the days with files available for the requested variables. If <code>remote = TRUE</code> it only checks that <code>start</code> is after 2008-01-01 (first date of the archived forecasts of MeteoGalicia.)  </p>


<h3>Value</h3>

<p>The <code>getRaster*</code> functions return a <code>RasterBrick</code> with a layer for each hour of the NWP forecast.
</p>
<p>The time zone of the time index of this <code>RasterBrick</code>, stored in its <code>z</code> slot (accesible with <code><a href="raster.html#topic+getZ">getZ</a></code>) is UTC.
</p>
<p>MeteoGalicia, NAM, and RAP use the Lambert Conic Conformal projection. GFS files use longitude-latitude coordinates.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán with contributions from Marcelo Almeida.
</p>


<h3>References</h3>

<p><a href="https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html">https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html</a>
</p>
<p><a href="https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html">https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## If some of the next examples do not work, try using a different
## date. Check availability for each service with the links included in
## the references section.

testDay &lt;- Sys.Date() - 1

## Retrieve raster data
wrf &lt;- getRaster('temp', day = testDay)

## Display results with rasterVis
library(rasterVis)

levelplot(wrf, layers = 10:19)

hovmoller(wrf)

## Using box and frames specification
mfExtent('gfs')

cloudGFS &lt;- getRaster('Temperature_surface',
                      day = testDay,
                      box = c(-30, 30, 30, 50),
                      service = 'gfs')

levelplot(cloudGFS, layout = c(1, 1))

mfExtent('nam')
cloudNAM &lt;- getRaster('Temperature_surface',
                      day = testDay,
                      box = c(-100, -80, 30, 50),
                      frames = 10,
                      service = 'nam')
mfExtent('rap')
cloudRAP &lt;- getRaster('Temperature_surface',
                      day = testDay,
                      box = c(-100, -80, 30, 50),
                      frames = 10,
                      service = 'rap')


## Day sequence of cloud cover
wrfDays &lt;- getRasterDays('cft',
                         start = testDay - 3,
                         end = testDay + 2,
                         box = c(-2, 35, 2, 40))

levelplot(wrfDays, layers = 10:19)

## animation
levelplot(wrfDays, layout = c(1, 1), par.settings = BTCTheme)

## Hövmoller graphic
hovmoller(wrfDays, par.settings = BTCTheme, contour = TRUE, cuts = 10)

NAMDays &lt;- getRasterDays('Temperature_surface',
                         start = testDay - 3,
                         end = testDay,
                         box = c(-100, -80, 30, 50),
                         service = 'nam')

## Extract data at some locations

st &lt;- data.frame(name=c('Almeria','Granada','Huelva','Malaga','Caceres'),
               elev=c(42, 702, 38, 29, 448))

coordinates(st) &lt;- cbind(c(-2.46, -3.60, -6.94, -4.42, -6.37),
                         c(36.84, 37.18, 37.26, 36.63, 39.47)
                         )
proj4string(st) &lt;- '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0'


## Extract values for some locations
vals &lt;- extract(wrf, st)
vals &lt;- zoo(t(vals), getZ(wrf))
names(vals) &lt;- st$name

xyplot(vals)

## End(Not run)
</code></pre>

<hr>
<h2 id='meteoForecast-package'>Access to several Numerical Weather Prediction services both in raster format and as a time series for a location.</h2><span id='topic+meteoForecast-package'></span><span id='topic+meteoForecast'></span>

<h3>Description</h3>

<p><code>meteoForecast</code> is a package to access outputs from Numerical Weather Prediction models both in raster format and as a time series for a location. Currenty it works with GFS, MeteoGalicia, NAM, and RAP.
</p>


<h3>Details</h3>

<p><code>getRaster</code>, <code>getRasterDay</code>, and <code>getRasterDays</code> get data inside a bounding box and provide a multilayer raster data using the <code>RasterBrick</code> class defined in the package <code>raster</code>.
</p>
<p><code>getPoint</code>, <code>getPointDays</code>, and <code>getPointRuns</code> get data for a certain location and produce a time series using the <code>zoo</code> class.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán, with contributions from Marcelo Almeida
</p>


<h3>References</h3>

<p><a href="https://www.meteogalicia.gal/web/modelos/threddsIndex.action?request_locale=es">https://www.meteogalicia.gal/web/modelos/threddsIndex.action?request_locale=es</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-gfs-003-files/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-gfs-003-files/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="raster.html#topic+raster">raster</a></code>
<code><a href="zoo.html#topic+zoo">zoo</a></code>
</p>

<hr>
<h2 id='options'> Options and Internal Variables </h2><span id='topic+getMFOption'></span><span id='topic+setMFOption'></span><span id='topic+mfService'></span><span id='topic+mfExtent'></span><span id='topic+mfProj4'></span>

<h3>Description</h3>

<p> Functions to get or set options, and to access internal parameters of the package.  </p>


<h3>Usage</h3>

<pre><code class='language-R'>
getMFOption(name = NULL)
setMFOption(name, value)
mfService(service = NULL)
mfExtent(service, resolution = 12)
mfProj4(service, resolution = 12)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="options_+3A_name">name</code></td>
<td>
<p>Character, name of the option to get or set.</p>
</td></tr>
<tr><td><code id="options_+3A_value">value</code></td>
<td>
<p>Character, value of the option to be changed.</p>
</td></tr>
<tr><td><code id="options_+3A_service">service</code></td>
<td>
<p>Character, name of the service ('meteogalicia', 'gfs', 'nam', 'rap').</p>
</td></tr>
<tr><td><code id="options_+3A_resolution">resolution</code></td>
<td>
<p>Numeric, value of the resolution (in kilometers). Only useful if <code>service = 'meteogalicia'</code></p>
</td></tr> </table>


<h3>Details</h3>

<p> Use <code>getMFOption</code> to list the options of the package. Only one option, <code>service</code>, is available with this version. With <code>setMFOption</code> the option defined with <code>name</code> can be modified.
</p>
<p><code>mfService</code>, a wrapper around <code>getMFOption</code> and <code>setMFOption</code>, displays the default service if used without arguments. It modifies the default service to the value of its argument.
</p>
<p><code>mfExtent</code> and <code>mfProj4</code> provides the extent and the proj4 string of the corresponding service.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mfService()

mfExtent('meteogalicia', 36)

mfExtent('nam')

mfProj4('rap')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
