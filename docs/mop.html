<!DOCTYPE html><html lang="en"><head><title>Help for package mop</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mop}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mop-package'><p>mop: Mobility Oriented-Parity Metric</p></a></li>
<li><a href='#layers_of_interest'><p>Example of variables for a set of interest</p></a></li>
<li><a href='#match_na_raster'><p>Match NA cells for all layers in SpatRaster</p></a></li>
<li><a href='#matrix_of_interest'><p>Example of matrix with variables in a set of interest</p></a></li>
<li><a href='#mop'><p>Analysis of extrapolation risks using the MOP metric</p></a></li>
<li><a href='#mop_distance'><p>MOP distance calculation</p></a></li>
<li><a href='#mop_results'><p>Constructor of S3 objects of class mop_results</p></a></li>
<li><a href='#out_range'><p>Detect values outside ranges of reference conditions</p></a></li>
<li><a href='#print'><p>Print a short version of elements in mop objects</p></a></li>
<li><a href='#reference_layers'><p>Example of variables for a set of reference</p></a></li>
<li><a href='#reference_matrix'><p>Example of matrix with variables in a set of reference</p></a></li>
<li><a href='#summary'><p>Summary of attributes and results</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Mobility Oriented-Parity Metric</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marlon E. Cobos &lt;manubio13@gmail.com&gt;</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-26</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of tools to perform multiple versions of the Mobility
    Oriented-Parity metric. This multivariate analysis helps to characterize 
    levels of dissimilarity between a set of conditions of reference and another
    set of conditions of interest. If predictive models are transferred to 
    conditions different from those over which models were calibrated (trained),
    this metric helps to identify transfer conditions that differ 
    substantially from those of calibration. These tools are implemented 
    following principles proposed in Owens et al. (2013) 
    &lt;<a href="https://doi.org/10.1016%2Fj.ecolmodel.2013.04.011">doi:10.1016/j.ecolmodel.2013.04.011</a>&gt;, and expanded to obtain more detailed 
    results that aid in interpretation.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/marlonecobos/mop">https://github.com/marlonecobos/mop</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/marlonecobos/mop/issues">https://github.com/marlonecobos/mop/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>doSNOW (&ge; 1.0), foreach (&ge; 1.5), methods, parallel, Rcpp,
snow (&ge; 0.4), stats, terra (&ge; 1.6-7), utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-27 16:51:42 UTC; marlon</td>
</tr>
<tr>
<td>Author:</td>
<td>Marlon E. Cobos <a href="https://orcid.org/0000-0002-2611-1767"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Hannah L. Owens <a href="https://orcid.org/0000-0003-0071-1745"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jorge Soberón <a href="https://orcid.org/0000-0003-2160-4148"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  A. Townsend Peterson
    <a href="https://orcid.org/0000-0003-0243-2379"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-28 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mop-package'>mop: Mobility Oriented-Parity Metric</h2><span id='topic+mop-package'></span>

<h3>Description</h3>

<p><code>mop</code> contains a set of tools to calculate the Mobility Oriented-Parity
metric, which allows a user to compare a set of conditions of reference
versus another set of of interest.
</p>


<h3>Details</h3>

<p>The main goals of the MOP metric are to explore conditions in the set of
interest that are non-analogous to those in the reference set, and to
quantify how different conditions in the set of interest are from the
reference set. The tools included here help to identify conditions outside
the ranges of the reference set with greater detail than in other
implementations. These tools are based on the methods proposed by
Owens et al. (2013; <a href="doi:10.1016/j.ecolmodel.2013.04.011">doi:10.1016/j.ecolmodel.2013.04.011</a>).
</p>


<h3>Functions in mop</h3>

<p><code><a href="#topic+mop">mop</a></code>, <code><a href="#topic+mop_distance">mop_distance</a></code>, <code><a href="#topic+out_range">out_range</a></code>,
<code><a href="#topic+match_na_raster">match_na_raster</a></code>
</p>


<h3>Data included</h3>

<p><code><a href="#topic+reference_matrix">reference_matrix</a></code>, <code><a href="#topic+matrix_of_interest">matrix_of_interest</a></code>,
<code><a href="#topic+reference_layers">reference_layers</a></code>, <code><a href="#topic+layers_of_interest">layers_of_interest</a></code>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Marlon E. Cobos <a href="mailto:manubio13@gmail.com">manubio13@gmail.com</a> (<a href="https://orcid.org/0000-0002-2611-1767">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Hannah L. Owens <a href="mailto:hannah.owens@gmail.com">hannah.owens@gmail.com</a> (<a href="https://orcid.org/0000-0003-0071-1745">ORCID</a>)
</p>
</li>
<li><p> Jorge Soberón <a href="mailto:jsoberon@ku.edu">jsoberon@ku.edu</a> (<a href="https://orcid.org/0000-0003-2160-4148">ORCID</a>)
</p>
</li>
<li><p> A. Townsend Peterson <a href="mailto:town@ku.edu">town@ku.edu</a> (<a href="https://orcid.org/0000-0003-0243-2379">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/marlonecobos/mop">https://github.com/marlonecobos/mop</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/marlonecobos/mop/issues">https://github.com/marlonecobos/mop/issues</a>
</p>
</li></ul>


<hr>
<h2 id='layers_of_interest'>Example of variables for a set of interest</h2><span id='topic+layers_of_interest'></span>

<h3>Description</h3>

<p>A <code>SpatRaster</code> object representing variables in a set of interest. Variables
represent future bioclimatic variables downloaded from the WorldClim database
(<a href="https://worldclim.org/">https://worldclim.org/</a>).
</p>


<h3>Format</h3>

<p>A <code>SpatRaster</code> object.
</p>


<h3>Value</h3>

<p>No return value. Used with function <code><a href="terra.html#topic+rast">rast</a></code> to
bring raster variables to analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>layers_of_interest &lt;- terra::rast(system.file("extdata",
                                              "layers_of_interest.tif",
                                              package = "mop"))

terra::plot(layers_of_interest)
</code></pre>

<hr>
<h2 id='match_na_raster'>Match NA cells for all layers in SpatRaster</h2><span id='topic+match_na_raster'></span>

<h3>Description</h3>

<p>Options to identify which values in a set of conditions of interest
(<code>g_matrix</code>) are outside the range of a set of conditions of
reference (<code>m_matrix</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_na_raster(layers)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_na_raster_+3A_layers">layers</code></td>
<td>
<p>a <code>SpatRaster</code> object containing two or more variables to be
matched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>SpatRaster</code> object with NA cells matching in all layers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data
layers &lt;- terra::rast(system.file("extdata", "reference_layers.tif",
                      package = "mop"))

# add NA in some places
layers[20:24, 10:16][, 3] &lt;- NA
terra::plot(layers)

# match NAs
matched &lt;- match_na_raster(layers)
terra::plot(matched)
</code></pre>

<hr>
<h2 id='matrix_of_interest'>Example of matrix with variables in a set of interest</h2><span id='topic+matrix_of_interest'></span>

<h3>Description</h3>

<p>A numeric table representing variables in a set of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix_of_interest
</code></pre>


<h3>Format</h3>

<p>A matrix with 723 rows and 6 columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("matrix_of_interest", package = "mop")

head(matrix_of_interest)
</code></pre>

<hr>
<h2 id='mop'>Analysis of extrapolation risks using the MOP metric</h2><span id='topic+mop'></span>

<h3>Description</h3>

<p>Analysis to calculate the mobility-oriented parity metric and other
sub-products to represent dissimilarities and non-analogous conditions
when comparing a set of reference conditions (M; <code>m</code>) against another
set of conditions of interest (G; <code>g</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mop(m, g, type = "basic",  calculate_distance = FALSE,
    where_distance = "in_range", distance = "euclidean",
    scale = FALSE, center = FALSE, fix_NA = TRUE, percentage = 1,
    comp_each = 2000, tol = NULL, rescale_distance = FALSE,
    parallel = FALSE, n_cores = NULL, progress_bar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mop_+3A_m">m</code></td>
<td>
<p>a <code>SpatRaster</code> or matrix of variables representing a set of
conditions of reference (e.g., the set of conditions in which a model was
calibrated). If a matrix is used, each column represents a variable.</p>
</td></tr>
<tr><td><code id="mop_+3A_g">g</code></td>
<td>
<p>a <code>SpatRaster</code> or matrix of variables representing a set of
conditions of interest for which dissimilarity values and non-analogous
conditions will be detected (e.g., conditions in which a model is projected).
Variable names must match between <code>m</code> and <code>g</code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_type">type</code></td>
<td>
<p><code>character</code>, type of MOP analysis to be performed. See <code>Details</code>
for options.</p>
</td></tr>
<tr><td><code id="mop_+3A_calculate_distance">calculate_distance</code></td>
<td>
<p><code>logical</code>, whether to calculate distances
(dissimilarities) between <code>m</code> and <code>g</code>. The default, FALSE, runs
rapidly and does not assess dissimilarity levels.</p>
</td></tr>
<tr><td><code id="mop_+3A_where_distance">where_distance</code></td>
<td>
<p><code>character</code>, where to calculate distances, considering
how conditions in <code>g</code> are positioned in comparison to the range of
conditions in <code>m</code>. See <code>Details</code> for options.</p>
</td></tr>
<tr><td><code id="mop_+3A_distance">distance</code></td>
<td>
<p><code>character</code>, which distances are calculated, <code>euclidean</code> or
<code>mahalanobis</code>. Valid if <code>calculate_distance = TRUE</code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_scale">scale</code></td>
<td>
<p>scaling options, <code>logical</code> or <code>numeric-alike</code> as in
<code><a href="base.html#topic+scale">scale</a></code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_center">center</code></td>
<td>
<p><code>logical</code> or <code>numeric-alike</code> center options as in
<code><a href="base.html#topic+scale">scale</a></code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_fix_na">fix_NA</code></td>
<td>
<p><code>logical</code>, whether to fix layers so cells with NA values
are the same in all layers. Setting to FALSE may save time if the
rasters are big and have no NA matching problems.</p>
</td></tr>
<tr><td><code id="mop_+3A_percentage">percentage</code></td>
<td>
<p><code>numeric</code>, percentage of <code>m</code> closest conditions used
to derive mean environmental distances to each combination of conditions in
<code>g</code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_comp_each">comp_each</code></td>
<td>
<p><code>numeric</code>, number of combinations in <code>g</code> to be used for
distance calculations at a time. Increasing this number requires more RAM.</p>
</td></tr>
<tr><td><code id="mop_+3A_tol">tol</code></td>
<td>
<p>tolerance to detect linear dependencies when calculating
Mahalanobis distances. The default, NULL, uses <code>.Machine$double.eps</code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_rescale_distance">rescale_distance</code></td>
<td>
<p><code>logical</code>, whether or not to re-scale distances 0-1.
Re-scaling prevents comparisons of dissimilarity values obtained from runs
with different values of <code>percentage</code>.</p>
</td></tr>
<tr><td><code id="mop_+3A_parallel">parallel</code></td>
<td>
<p><code>logical</code>, whether calculations should be performed in
parallel using <code>n_cores</code> of the computer. Using this option will speed
up the analysis but will demand more RAM.</p>
</td></tr>
<tr><td><code id="mop_+3A_n_cores">n_cores</code></td>
<td>
<p><code>numeric</code>, number of cores to be used in parallel processing.
If <code>parallel = TRUE</code> and <code>n_cores = NULL</code> (all CPU cores on current host - 1)
will be used.</p>
</td></tr>
<tr><td><code id="mop_+3A_progress_bar">progress_bar</code></td>
<td>
<p><code>logical</code>, whether to show a progress bar.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>type</code> options return results that differ in the detail of how non-analogous
conditions are identified.
</p>

<ul>
<li> <p><strong>basic</strong> - makes calculation as proposed by Owens et al. (2013)
<a href="doi:10.1016/j.ecolmodel.2013.04.011">doi:10.1016/j.ecolmodel.2013.04.011</a>.
</p>
</li>
<li> <p><strong>simple</strong> - calculates how many variables in the set of interest are
non-analogous to those in the reference set.
</p>
</li>
<li> <p><strong>detailed</strong> - calculates five additional extrapolation metrics. See
<code>mop_detailed</code> under <code>Value</code> below for full details.
</p>
</li></ul>

<p><code>where_distance</code> options determine what values should be used to calculate
dissimilarity
</p>

<ul>
<li> <p><strong>in_range</strong> - only conditions inside <code>m</code> ranges
</p>
</li>
<li> <p><strong>out_range</strong> - only conditions outside <code>m</code> ranges
</p>
</li>
<li> <p><strong>all</strong> - all conditions
</p>
</li></ul>

<p>When the variables used to represent conditions have different units,
scaling and centering are recommended. This step is only valid when Euclidean
distances are used.
</p>


<h3>Value</h3>

<p>A object of class <code><a href="#topic+mop_results">mop_results</a></code> containing:
</p>

<ul>
<li> <p><strong>summary</strong> - a list with details of the data used in the analysis:
</p>

<ul>
<li> <p><em>variables</em> - names of variables considered.
</p>
</li>
<li> <p><em>type</em> - type of MOP analysis performed.
</p>
</li>
<li> <p><em>scale</em> - value according to the argument <code>scale</code>.
</p>
</li>
<li> <p><em>center</em> - value according to the argument <code>center</code>.
</p>
</li>
<li> <p><em>calculate_distance</em> - value according to the argument
<code>calculate_distance</code>.
</p>
</li>
<li> <p><em>distance</em> - option regarding distance used.
</p>
</li>
<li> <p><em>percentage</em> - percentage of <code>m</code> used as reference for
distance calculation.
</p>
</li>
<li> <p><em>rescale_distance</em> - value according to the argument
<code>rescale_distance</code>.
</p>
</li>
<li> <p><em>fix_NA</em> - value according to the argument <code>fix_NA</code>.
</p>
</li>
<li> <p><em>N_m</em> - total number of elements (cells with values or valid
rows) in <code>m</code>.
</p>
</li>
<li> <p><em>N_g</em> - total number of elements (cells with values or valid
rows) in <code>g</code>.
</p>
</li>
<li> <p><em>m_ranges</em> - matrix with ranges of variables in reference conditions
(<code>m</code>).
</p>
</li></ul>

</li>
<li> <p><strong>mop_distances</strong> - if <code>calculate_distance</code> = TRUE, a SpatRaster or
vector with distance values for the set of interest (<code>g</code>). Higher values
represent greater dissimilarity compared to the set of reference (<code>m</code>).
</p>
</li>
<li> <p><strong>mop_basic</strong> - a SpatRaster or vector, for the set of interest,
representing conditions in which at least one of the variables is
non-analogous to the set of reference. Values should be: 1 for non-analogous
conditions, and NA for conditions inside the ranges of the reference set.
</p>
</li>
<li> <p><strong>mop_simple</strong> - a SpatRaster or vector, for the set of interest,
representing how many variables in the set of interest are non-analogous to
those in the reference set. NA is used for conditions inside the ranges of
the reference set.
</p>
</li>
<li> <p><strong>mop_detailed</strong> - a list containing:
</p>

<ul>
<li> <p><em>interpretation_combined</em> - a data.frame to help identify combinations
of variables in <em>towards_low_combined</em> and <em>towards_high_combined</em> that
are non-analogous to <code>m</code>.
</p>
</li>
<li> <p><em>towards_low_end</em> - a SpatRaster or matrix for all variables
representing where non-analogous conditions were found towards low values
of each variable.
</p>
</li>
<li> <p><em>towards_high_end</em> - a SpatRaster or matrix for all variables
representing where non-analogous conditions were found towards high
values of each variable.
</p>
</li>
<li> <p><em>towards_low_combined</em> - a SpatRaster or vector with values
representing the identity of the variables found to have non-analogous
conditions towards low values. If vector, interpretation requires the use
of the data.frame <em>interpretation_combined</em>.
</p>
</li>
<li> <p><em>towards_high_combined</em> - a SpatRaster or vector with values
representing the identity of the variables found to have non-analogous
conditions towards high values. If vector, interpretation requires the
use of the data.frame <em>interpretation_combined</em>.
</p>
</li></ul>

</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+mop_distance">mop_distance</a></code>, <code><a href="#topic+out_range">out_range</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data
reference_layers &lt;- terra::rast(system.file("extdata", "reference_layers.tif",
                                            package = "mop"))

layers_of_interest &lt;- terra::rast(system.file("extdata",
                                              "layers_of_interest.tif",
                                              package = "mop"))

# analysis
mop_res &lt;- mop(m = reference_layers, g = layers_of_interest)

summary(mop_res)
</code></pre>

<hr>
<h2 id='mop_distance'>MOP distance calculation</h2><span id='topic+mop_distance'></span>

<h3>Description</h3>

<p>Calculates distances from each of the points of interest in <code>g_matrix</code>
to a defined percentage of the reference conditions in <code>m_matrix</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mop_distance(m_matrix, g_matrix, distance = "euclidean", percentage = 1,
             comp_each = 2000, tol = NULL, parallel = FALSE, n_cores = NULL,
             progress_bar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mop_distance_+3A_m_matrix">m_matrix</code></td>
<td>
<p>matrix of variables representing the set of conditions to be
used as reference. Each column represents a variable.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_g_matrix">g_matrix</code></td>
<td>
<p>matrix of variables representing the set of conditions to be
compared against the reference conditions (where distances are to be
calculated). Each column represents a variable. Variable names must match
those in <code>m_matrix</code>.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_distance">distance</code></td>
<td>
<p><code>character</code>, one of two options: &quot;euclidean&quot; or &quot;mahalanobis&quot;.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_percentage">percentage</code></td>
<td>
<p><code>numeric</code>, percentage of points of m (the closest ones)
used to derive mean environmental distances to each g point.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_comp_each">comp_each</code></td>
<td>
<p><code>numeric</code>, number of points of the g matrix to be used for
distance calculations at a time (default = 2000). Increasing this number
requires more RAM.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_tol">tol</code></td>
<td>
<p>tolerance to detect linear dependencies when calculating
Mahalanobis distances. The default, NULL, uses <code>.Machine$double.eps</code>.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_parallel">parallel</code></td>
<td>
<p><code>logical</code>, if TRUE, calculations will be performed in parallel
using <code>n_cores</code> of the computer. Using this option will speed up the
analysis  but will demand more RAM.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_n_cores">n_cores</code></td>
<td>
<p><code>numeric</code>, number of cores to be used in parallel processing.
Uses current host CPU cores - 1 by default.</p>
</td></tr>
<tr><td><code id="mop_distance_+3A_progress_bar">progress_bar</code></td>
<td>
<p><code>logical</code>, whether to show a progress bar for
calculations. Valid when calculations are not run in parallel.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with values of distances calculated according to
parameters used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data
data("reference_matrix", package = "mop")
data("matrix_of_interest", package = "mop")

# analysis
mop_dist &lt;- mop_distance(m_matrix = reference_matrix,
                         g_matrix = matrix_of_interest)
</code></pre>

<hr>
<h2 id='mop_results'>Constructor of S3 objects of class mop_results</h2><span id='topic+mop_results'></span><span id='topic+new_mop_results'></span>

<h3>Description</h3>

<p>Constructor of S3 objects of class mop_results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_mop_results(summary = new("list"), mop_distances = NULL,
                mop_basic = NULL, mop_simple = NULL,
                mop_detailed = new("list"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mop_results_+3A_summary">summary</code></td>
<td>
<p>a list with a summary of the data and parameters used in
analysis. Default = empty list.</p>
</td></tr>
<tr><td><code id="mop_results_+3A_mop_distances">mop_distances</code></td>
<td>
<p>a <code>SpatRaster</code> or numeric vector of distances from the
set of conditions of reference to the set of conditions of interest.
Default = NULL.</p>
</td></tr>
<tr><td><code id="mop_results_+3A_mop_basic">mop_basic</code></td>
<td>
<p>a <code>SpatRaster</code> or numeric vector showing conditions in the set
of interest outside the ranges in the reference set. The value <code>1</code>
indicates conditions outside one or more ranges. Default = NULL.</p>
</td></tr>
<tr><td><code id="mop_results_+3A_mop_simple">mop_simple</code></td>
<td>
<p>a <code>SpatRaster</code> or numeric vector showing conditions in the
set of interest outside the ranges in the reference set. Values indicate how
many variables are outside reference ranges. Default = NULL.</p>
</td></tr>
<tr><td><code id="mop_results_+3A_mop_detailed">mop_detailed</code></td>
<td>
<p>a list with a detailed representation of mop results
in conditions outside the range of reference. Default = empty list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>mop_results</code>.
</p>

<hr>
<h2 id='out_range'>Detect values outside ranges of reference conditions</h2><span id='topic+out_range'></span>

<h3>Description</h3>

<p>Options to identify which values in a set of conditions of interest
(<code>g_matrix</code>) are outside the range of a set of conditions of
reference (<code>m_matrix</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>out_range(m_matrix, g_matrix, type = "basic")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="out_range_+3A_m_matrix">m_matrix</code></td>
<td>
<p>matrix of variables representing the set of conditions to be
used as reference. Each column represents a variable.</p>
</td></tr>
<tr><td><code id="out_range_+3A_g_matrix">g_matrix</code></td>
<td>
<p>matrix of variables representing the set of conditions to be
compared against the reference conditions (where conditions outside range
are to be detected). Each column represents a variable. Variable names must
match those in <code>m_matrix</code>.</p>
</td></tr>
<tr><td><code id="out_range_+3A_type">type</code></td>
<td>
<p><code>character</code>, type of identification to be performed. See <code>Details</code>
for options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Results are produced according to <code>type</code>:
</p>

<ul>
<li> <p><strong>basic</strong> - helps to identify conditions outside ranges, in general, one or
variables are only counted as <code>1</code>. This is always returned.
</p>
</li>
<li> <p><strong>simple</strong> - identifies the number of variables with conditions outside
ranges, for each condition of interest outside ranges, the number of
non-analogous variables is returned.
</p>
</li>
<li> <p><strong>detailed</strong> - produces various results (including the two above):
</p>

<ul>
<li> <p><em>high_all</em> - identifies non-analogous conditions towards high values of
variables, for each variable independently.
</p>
</li>
<li> <p><em>low_all</em> - identifies non-analogous conditions towards low values of
variables, for each variable independently.
</p>
</li>
<li> <p><em>high_combined</em> - values are used to identify combinations of variables
with non-analogous conditions towards high values of the variables.
</p>
</li>
<li> <p><em>low_combined</em> - values are used to identify combinations of variables
with non-analogous conditions towards low values of the variables.
</p>
</li>
<li> <p><em>interpretation</em> - a <code>data.frame</code> to help identify which variables are
considered in combined results.
</p>
</li></ul>

</li></ul>



<h3>Value</h3>

<p>A list containing the ranges in <code>m_matrix</code>, results from analysis
according to <code>type</code>, and table to help with interpretations. NA values
represent conditions of interest inside ranges of reference conditions.
See <code>Details</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data
data("reference_matrix", package = "mop")
data("matrix_of_interest", package = "mop")

# analysis
out &lt;- out_range(m_matrix = reference_matrix,
                 g_matrix = matrix_of_interest)
</code></pre>

<hr>
<h2 id='print'>Print a short version of elements in mop objects</h2><span id='topic+print'></span><span id='topic+print.mop_results'></span><span id='topic+print+2Cmop_results'></span>

<h3>Description</h3>

<p>Print a short version of elements in mop objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mop_results'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>object of class mop_results.</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods. Ignored
in this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A short description of objects in the console.
</p>

<hr>
<h2 id='reference_layers'>Example of variables for a set of reference</h2><span id='topic+reference_layers'></span>

<h3>Description</h3>

<p>A <code>SpatRaster</code> object representing variables in a set of reference. Variables
represent current bioclimatic variables downloaded from the WorldClim
database (<a href="https://worldclim.org/">https://worldclim.org/</a>).
</p>


<h3>Format</h3>

<p>A <code>SpatRaster</code> object.
</p>


<h3>Value</h3>

<p>No return value. Used with function <code><a href="terra.html#topic+rast">rast</a></code> to
bring raster variables to analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reference_layers &lt;- terra::rast(system.file("extdata", "reference_layers.tif",
                                            package = "mop"))

terra::plot(reference_layers)
</code></pre>

<hr>
<h2 id='reference_matrix'>Example of matrix with variables in a set of reference</h2><span id='topic+reference_matrix'></span>

<h3>Description</h3>

<p>A numeric table representing variables in a set of reference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reference_matrix
</code></pre>


<h3>Format</h3>

<p>A matrix with 723 rows and 6 columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("reference_matrix", package = "mop")

head(reference_matrix)
</code></pre>

<hr>
<h2 id='summary'>Summary of attributes and results</h2><span id='topic+summary'></span><span id='topic+summary.mop_results'></span><span id='topic+summary+2Cmop_results'></span>

<h3>Description</h3>

<p>Summary of attributes and results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mop_results'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary_+3A_object">object</code></td>
<td>
<p>object of class mop_results.</p>
</td></tr>
<tr><td><code id="summary_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced. Ignored in
this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A printed summary.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
