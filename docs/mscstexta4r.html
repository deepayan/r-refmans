<!DOCTYPE html><html><head><title>Help for package mscstexta4r</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mscstexta4r}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mscstexta4r'><p>R Client for the Microsoft Cognitive Services Text Analytics REST API</p></a></li>
<li><a href='#texta'><p>The <code>texta</code> object</p></a></li>
<li><a href='#textaDetectLanguages'><p>Detects the languages used in documents.</p></a></li>
<li><a href='#textaDetectTopics'><p>Detects the top topics in a group of text documents.</p></a></li>
<li><a href='#textaDetectTopicsStatus'><p>Retrieves the status of a topic detection operation submitted for</p>
processing.</a></li>
<li><a href='#textaInit'><p>Initializes the <span class="pkg">mscstexta4r</span> package.</p></a></li>
<li><a href='#textaKeyPhrases'><p>Returns the key talking points in sentences or documents.</p></a></li>
<li><a href='#textaSentiment'><p>Assesses the sentiment of sentences or documents.</p></a></li>
<li><a href='#textatopics'><p>The <code>textatopics</code> object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Client for the Microsoft Cognitive Services Text Analytics
REST API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Phil Ferriere &lt;pferriere@hotmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>R Client for the Microsoft Cognitive Services Text Analytics
    REST API, including Sentiment Analysis, Topic Detection, Language Detection,
    and Key Phrase Extraction. An account MUST be registered at the Microsoft
    Cognitive Services website <a href="https://www.microsoft.com/cognitive-services/">https://www.microsoft.com/cognitive-services/</a>
    in order to obtain a (free) API key. Without an API key, this package will
    not work properly.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/philferriere/mscstexta4r">https://github.com/philferriere/mscstexta4r</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://www.github.com/philferriere/mscstexta4r/issues">http://www.github.com/philferriere/mscstexta4r/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, httr, jsonlite, pander, stringi, dplyr, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, mscsweblm4r</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>A valid account MUST be registered with Microsoft's
Cognitive Services website
&lt;https://www.microsoft.com/cognitive-services/&gt; in order to
obtain a (free) API key. Without an API key, this package will
not work properly.</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-06-22 19:05:58 UTC; Phil</td>
</tr>
<tr>
<td>Author:</td>
<td>Phil Ferriere [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-06-23 00:52:35</td>
</tr>
</table>
<hr>
<h2 id='mscstexta4r'>R Client for the Microsoft Cognitive Services Text Analytics REST API</h2><span id='topic+mscstexta4r'></span><span id='topic+mscstexta4r-package'></span>

<h3>Description</h3>

<p><span class="pkg">mscstexta4r</span> is a client/wrapper/interface for the Microsoft
Cognitive Services (MSCS) Text Analytics (Text Analytics) REST API. To use this
package, you MUST have a valid account with <a href="https://www.microsoft.com/cognitive-services">https://www.microsoft.com/cognitive-services</a>.
Once you have an account, Microsoft will provide you with a (free) API key
you can use with this package.
</p>


<h3>The MSCS Text Analytics REST API</h3>

<p>Microsoft Cognitive Services &ndash; formerly known as Project Oxford &ndash; are a set
of APIs, SDKs and services that developers can use to add AI features to
their apps. Those features include emotion and video detection; facial,
speech and vision recognition; as well as speech and NLP.
</p>
<p>The Text Analytics REST API provides tools for NLP and is documented at
<a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
This API supports the following operations:
</p>

<ul>
<li><p> Sentiment analysis - Is a sentence or document generally positive or negative?
</p>
</li>
<li><p> Topic detection - What's being discussed across a list of documents/reviews/articles?
</p>
</li>
<li><p> Language detection - What language is a document written in?
</p>
</li>
<li><p> Key talking points extraction - What's being discussed in a single document?
</p>
</li></ul>



<h3><span class="pkg">mscstexta4r</span> Functions</h3>

<p>The following <span class="pkg">mscstexta4r</span> core functions are used to wrap the
MSCS Text Analytics REST API:
</p>

<ul>
<li><p> Sentiment analysis - <code><a href="#topic+textaSentiment">textaSentiment</a></code> function
</p>
</li>
<li><p> Topic detection - <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> and <code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> functions
</p>
</li>
<li><p> Language detection - <code><a href="#topic+textaDetectLanguages">textaDetectLanguages</a></code> function
</p>
</li>
<li><p> Extraction of key talking points - <code><a href="#topic+textaKeyPhrases">textaKeyPhrases</a></code> function
</p>
</li></ul>

<p>The <code><a href="#topic+textaInit">textaInit</a></code> configuration function is used to set the REST
API URL and the private API key. It needs to be called <em>only once</em>,
after package load, or the core functions will not work properly.
</p>


<h3>Prerequisites</h3>

<p>To use the <span class="pkg">mscstexta4r</span> R package, you <strong>MUST</strong> have a valid
account with Microsoft Cognitive Services (see <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details). Once you have an account, Microsoft will provide you with an
API key listed under your subscriptions. After you've configured
<span class="pkg">mscstexta4r</span> with your API key (as explained in the next section), you
will be able to call the Text Analytics REST API from R, up to your
maximum number of transactions per month and per minute.
</p>


<h3>Package Loading and Configuration</h3>

<p>After loading the <span class="pkg">mscstexta4r</span> package with the <code>library()</code> function,
you must call the <code><a href="#topic+textaInit">textaInit</a></code> before you can call any of
the core <span class="pkg">mscstexta4r</span> functions.
</p>
<p>The <code><a href="#topic+textaInit">textaInit</a></code> configuration function will first check to see
if the variable <code>MSCS_TEXTANALYTICS_CONFIG_FILE</code> exists in the system
environment. If it does, the package will use that as the path to the
configuration file.
</p>
<p>If <code>MSCS_TEXTANALYTICS_CONFIG_FILE</code> doesn't exist, it will look for
the file <code>.mscskeys.json</code> in the current user's home directory (that's
<code>~/.mscskeys.json</code> on Linux, and something like <code>C:/Users/Phil/Documents/.mscskeys.json</code>
on Windows). If the file is found, the package will load the API key and URL
from it.
</p>
<p>If using a file, please make sure it has the following structure:
</p>
<pre>
{
  "textanalyticsurl": "https://westus.api.cognitive.microsoft.com/texta/analytics/v2.0/",
  "textanalyticskey": "...MSCS Text Analytics API key goes here..."
}
</pre>
<p>If no configuration file is found, <code><a href="#topic+textaInit">textaInit</a></code> will attempt to
pick up its configuration information from two Sys env variables instead:
</p>
<p><code>MSCS_TEXTANALYTICS_URL</code> - the URL for the Text Analytics REST API.
</p>
<p><code>MSCS_TEXTANALYTICS_KEY</code> -  your personal Text Analytics REST API key.
</p>


<h3>Synchronous vs Asynchronous Execution</h3>

<p>All but <strong>ONE</strong> core text analytics functions execute exclusively in
synchronous mode: <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> is the only function that
can be executed either synchronously or asynchronously. Why? Because topic
detection is typically a &quot;batch&quot; operation meant to be performed on thousands
of related documents (product reviews, research articles, etc.).
</p>
<p>What's the difference?
</p>
<p>When <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> executes synchronously, you must wait
for it to finish before you can move on to the next task. When
<code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> executes asynchronously, you can move on to
something else before topic detection has completed. In the latter case, you
will need to call <code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> periodically yourself
until the Microsoft Cognitive Services server complete topic detection and
results become available.
</p>
<p>When to run which mode?
</p>
<p>If you're performing topic detection in batch mode (from an R script), we
recommend using the <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> function in synchronous
mode, in which case it will return only after topic detection has completed.
</p>
<p><strong>IMPORTANT NOTE: If you're calling <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> in
synchronous mode within the R console REPL (interactive mode), it will
appear as if the console has hanged. This is <em>EXPECTED</em>. The function
hasn't crashed. It is simply in &quot;sleep mode&quot;, activating itself periodically
and then going back to sleep, until the results have become available. In
sleep mode, even though it appears &quot;stuck&quot;, <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code>
doesn't use any CPU resources. While the function is operating in sleep
mode, you <em>WILL NOT</em> be able to use the console before the function
completes. If you need to operate the console while topic detection is being
performed by the Microsoft Cognitive services servers, you should call
<code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> in asynchronous mode and then call
<code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> yourself repeteadly afterwards, until
results are available.</strong>
</p>


<h3>S3 Objects of the Classes <code><a href="#topic+texta">texta</a></code> and <code><a href="#topic+textatopics">textatopics</a></code></h3>

<p>The sentiment analysis, language detection, and key talking points extraction
functions of the <span class="pkg">mscstexta4r</span> package return S3 objects of the class
<code><a href="#topic+texta">texta</a></code>. The <code><a href="#topic+texta">texta</a></code> object exposes results collected
in a single dataframe, the REST API JSON response, and the original HTTP
request.
</p>
<p>The functions <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> returns a S3 object of the
class <code><a href="#topic+textatopics">textatopics</a></code>. The <code><a href="#topic+textatopics">textatopics</a></code> object exposes
formatted results using several dataframes (documents and their IDs, topics
and their IDs, which topics are assigned to which documents), the REST API
JSON response (should you care), and the HTTP request (mostly for debugging
purposes).'
</p>


<h3>Error Handling</h3>

<p>The MSCS Text Analytics API is a REST API. HTTP requests over a network and
the Internet can fail. Because of congestion, because the web site is down
for maintenance, because of firewall configuration issues, etc. There are
many possible points of failure.
</p>
<p>The API can also fail if you've exhausted your call volume quota or are
exceeding the API calls rate limit. Unfortunately, MSCS does not expose an
API you can query to check if you're about to exceed your quota for instance.
The only way you'll know for sure is by looking at the error code returned
after an API call has failed.
</p>
<p>To help with error handling, we recommend the systematic use of
<code>tryCatch()</code> when calling <span class="pkg">mscstexta4r</span>'s core functions. Its
mechanism may appear a bit daunting at first, but it is well documented at <a href="http://www.inside-r.org/r-doc/base/signalCondition">http://www.inside-r.org/r-doc/base/signalCondition</a>.
We use it in many of the code examples.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>

<hr>
<h2 id='texta'>The <code>texta</code> object</h2><span id='topic+texta'></span>

<h3>Description</h3>

<p>The <code>texta</code> object exposes formatted results, the REST API JSON
response, and the HTTP request:
</p>

<ul>
<li> <p><code>result</code> the results in <code>data.frame</code> format
</p>
</li>
<li> <p><code>json</code> the REST API JSON response
</p>
</li>
<li> <p><code>request</code> the HTTP request
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>See Also</h3>

<p>Other res: <code><a href="#topic+textatopics">textatopics</a></code>
</p>

<hr>
<h2 id='textaDetectLanguages'>Detects the languages used in documents.</h2><span id='topic+textaDetectLanguages'></span>

<h3>Description</h3>

<p>This function returns the language detected in a sentence or
documents along with a confidence score between 0 and 1. A scores equal to 1
indicates 100
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaDetectLanguages(documents, numberOfLanguagesToDetect = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textaDetectLanguages_+3A_documents">documents</code></td>
<td>
<p>(character vector) Vector of sentences or documents on
which to perform language detection.</p>
</td></tr>
<tr><td><code id="textaDetectLanguages_+3A_numberoflanguagestodetect">numberOfLanguagesToDetect</code></td>
<td>
<p>(integer) Number of languages to detect. Set
to 1 by default. Use a higher value if individual documents contain a mix of
languages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+texta">texta</a></code>. The results are stored
in the <code>results</code> dataframe inside this object. The dataframe contains
the original sentences or documents, the name of the detected language, the
ISO 639-1 code of the detected language, and a confidence score. If an error
occurred during processing, the dataframe will also have an <code>error</code>
column that describes the error.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

 docsText &lt;- c(
   "The Louvre or the Louvre Museum is the world's largest museum.",
   "Le musee du Louvre est un musee d'art et d'antiquites situe au centre de Paris.",
   "El Museo del Louvre es el museo nacional de Francia.",
   "Il Museo del Louvre a Parigi, in Francia, e uno dei piu celebri musei del mondo.",
   "Der Louvre ist ein Museum in Paris."
 )

 tryCatch({

   # Detect languages used in documents
   docsLanguage &lt;- textaDetectLanguages(
     documents = docsText,           # Input sentences or documents
     numberOfLanguagesToDetect = 1L  # Number of languages to detect
   )

   # Class and structure of docsLanguage
   class(docsLanguage)
   #&gt; [1] "texta"
   str(docsLanguage, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame': 5 obs. of  4 variables:
   #&gt;  $ json   : chr "{\"documents\":[{\"id\":\"B6e4C\",\"detectedLanguages\": __truncated__ }]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "texta"

   # Print results
   docsLanguage
   #&gt; texta [https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/lan __truncated__ ]
   #&gt;
   #&gt; -----------------------------------------------------------
   #&gt;             text               name    iso6391Name   score
   #&gt; ----------------------------- ------- ------------- -------
   #&gt;   The Louvre or the Louvre    English      en          1
   #&gt; Museum is the world's largest
   #&gt;            museum.
   #&gt;
   #&gt;   Le musee du Louvre est un    French      fr          1
   #&gt;  musee d'art et d'antiquites
   #&gt;   situe au centre de Paris.
   #&gt;
   #&gt;   El Museo del Louvre es el   Spanish      es          1
   #&gt;  museo nacional de Francia.
   #&gt;
   #&gt; Il Museo del Louvre a Parigi, Italian      it          1
   #&gt;   in Francia, e uno dei piu
   #&gt;   celebri musei del mondo.
   #&gt;
   #&gt;  Der Louvre ist ein Museum in  German      de          1
   #&gt;            Paris.
   #&gt; -----------------------------------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='textaDetectTopics'>Detects the top topics in a group of text documents.</h2><span id='topic+textaDetectTopics'></span>

<h3>Description</h3>

<p>This function returns the top detected topics for a list of
submitted text documents. A topic is identified with a key phrase, which can
be one or more related words. At least 100 text documents must be submitted,
however this API is designed to detect topics across hundreds to thousands of
documents. For best performance, limit each document to a short, human
written text paragraph such as review, conversation or user feedback.
</p>
<p>English is the only language supported at this time.
</p>
<p>You can provide a list of stop words to control which words or documents are
filtered out. You can also supply a list of topics to exclude from the
response. Finally, you can also provide min/max word frequency count
thresholds to exclude rare/ubiquitous document topics.
</p>
<p>We recommend using the <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> function in synchronous
mode, in which case it will return only after topic detection has completed.
If you decide to call this function in asynchronous mode, you will need to
call the <code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> function periodically yourself
until the Microsoft Cognitive Services server complete topic detection and
results become available.
</p>
<p><strong>IMPORTANT NOTE: If you're calling <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> in
synchronous mode within the R console REPL (interactive mode), it will
appear as if the console has hanged. This is <em>EXPECTED</em>. The function
hasn't crashed. It is simply in &quot;sleep mode&quot;, activating itself periodically
and then going back to sleep, until the results have become available. In
sleep mode, even though it appears &quot;stuck&quot;, <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code>
dodesn't use any CPU resources. While the function is operating in sleep
mode, you <em>WILL NOT</em> be able to use the console until the function
completes. If need to operate the console while topic detection is being
performed by the Microsoft Cognitive services servers, you should call
<code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> in asynchronous mode and then call
<code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> yourself repeteadly afterwards, until
results are available.</strong>
</p>
<p>Note that one transaction is charged per text document submitted.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaDetectTopics(documents, stopWords = NULL, topicsToExclude = NULL,
  minDocumentsPerWord = NULL, maxDocumentsPerWord = NULL,
  resultsPollInterval = 30L, resultsTimeout = 1200L, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textaDetectTopics_+3A_documents">documents</code></td>
<td>
<p>(character vector) Vector of sentences or documents on
which to perform topic detection. At least 100 text documents must be
submitted. English is the only language supported at this time.</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_stopwords">stopWords</code></td>
<td>
<p>(character vector) Vector of stop words to ignore while
performing topic detection (optional)</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_topicstoexclude">topicsToExclude</code></td>
<td>
<p>(character vector) Vector of topics to exclude from
the response (optional)</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_mindocumentsperword">minDocumentsPerWord</code></td>
<td>
<p>(integer) Words that occur in less than this many
documents are ignored. Use this parameter to help exclude rare document
topics. Omit to let the service choose appropriate value. (optional)</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_maxdocumentsperword">maxDocumentsPerWord</code></td>
<td>
<p>(integer) Words that occur in more than this many
documents are ignored. Use this parameter to help exclude ubiquitous document
topics. Omit to let the service choose appropriate value. (optional)</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_resultspollinterval">resultsPollInterval</code></td>
<td>
<p>(integer) Interval (in seconds) at which this function
will query the Microsoft Cognitive Services servers for results (optional,
default: 30L). If set to 0L, this function will return immediately and you
will have to call <code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> periodically to collect
results. If set to a non-zero integer value, this function will only return
after all results have been collected. It does so by repeatedly calling
<code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> on its own until topic detection has
completed. In the latter case, you do not need to call
<code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code>.</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_resultstimeout">resultsTimeout</code></td>
<td>
<p>(integer) Interval (in seconds) at which point this function
will give up and stop querying the Microsoft Cognitive Services servers for
results (optional, default: 1200L). As soon as all results are available,
this function will return them to the caller. If the Microsoft Cognitive
Services servers within resultsTimeout seconds, this function will
stop polling the servers and return the most current results.</p>
</td></tr>
<tr><td><code id="textaDetectTopics_+3A_verbose">verbose</code></td>
<td>
<p>(logical) If set to TRUE, print every poll status to stdout.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+textatopics">textatopics</a></code>. The results are stored in
the <code>results</code> dataframes inside this object. See <code><a href="#topic+textatopics">textatopics</a></code>
for details. In the synchronous case (i.e., the function only returns after
completion), the dataframes contain the documents, the topics, and which
topics are assigned to which documents. In the asynchonous case (i.e., the
function returns immediately), the dataframes contain the documents, their
unique identifiers, their current operation status code, but they don't
contain the topics yet, nor their assignments. To get the topics and their
assignments, you must call <code><a href="#topic+textaDetectTopicsStatus">textaDetectTopicsStatus</a></code> until the
Microsoft Services servers have completed topic detection.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 load("./data/yelpChineseRestaurantReviews.rda")
 set.seed(1234)
 documents &lt;- sample(yelpChReviews$text, 1000)

 tryCatch({

   # Detect top topics in group of documents
   topics &lt;- textaDetectTopics(
     documents,                  # At least 100 documents (English only)
     stopWords = NULL,           # Stop word list (optional)
     topicsToExclude = NULL,     # Topics to exclude (optional)
     minDocumentsPerWord = NULL, # Threshold to exclude rare topics (optional)
     maxDocumentsPerWord = NULL, # Threshold to exclude ubiquitous topics (optional)
     resultsPollInterval = 30L,  # Poll interval (in s, default:30s, use 0L for async)
     resultsTimeout = 1200L,     # Give up timeout (in s, default: 1200s = 20mn)
     verbose = TRUE              # If set to TRUE, print every poll status to stdout
   )

   # Class and structure of topics
   class(topics)
   #&gt; [1] "textatopics"

   str(topics, max.level = 1)
   #&gt; List of 8
   #&gt; $ status          : chr "Succeeded"
   #&gt; $ operationId     : chr "30334a3e1e28406a80566bb76ff04884"
   #&gt; $ operationType   : chr "topics"
   #&gt; $ documents       :'data.frame':  1000 obs. of  2 variables:
   #&gt; $ topics          :'data.frame':  71 obs. of  3 variables:
   #&gt; $ topicAssignments:'data.frame':  502 obs. of  3 variables:
   #&gt; $ json            : chr "{\"status\":\"Succeeded\",\"createdDateTime\": __truncated__ }
   #&gt; $ request         :List of 7
   #&gt; ..- attr(*, "class")= chr "request"
   #&gt; - attr(*, "class")= chr "textatopics"

   # Print results
   topics
   #&gt; textatopics [https://westus.api.cognitive.microsoft.com/text/analytics/ __truncated__ ]
   #&gt; status: Succeeded
   #&gt; operationId: 30334a3e1e28406a80566bb76ff04884
   #&gt; operationType: topics
   #&gt; topics (first 20):
   #&gt; ------------------------
   #&gt;    keyPhrase      score
   #&gt; ---------------- -------
   #&gt;     portions       35
   #&gt;   noodle soup      30
   #&gt;    vegetables      20
   #&gt;       tofu         19
   #&gt;      garlic        17
   #&gt;     Eggplant       15
   #&gt;       Pad          15
   #&gt;      combo         13
   #&gt; Beef Noodle Soup   13
   #&gt;      House         12
   #&gt;      entree        12
   #&gt;     wontons        12
   #&gt;     Pei Wei        12
   #&gt;  mongolian beef    11
   #&gt;       crab         11
   #&gt;      Panda         11
   #&gt;       bean         10
   #&gt;    dumplings        9
   #&gt;     veggies         9
   #&gt;      decor          9
   #&gt; ------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='textaDetectTopicsStatus'>Retrieves the status of a topic detection operation submitted for
processing.</h2><span id='topic+textaDetectTopicsStatus'></span>

<h3>Description</h3>

<p>This function retrieves the status of an asynchronous topic
detection operation previously submitted for processing. If the operation
has reached a 'Succeeded' state, this function will also return the results.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaDetectTopicsStatus(operation, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textaDetectTopicsStatus_+3A_operation">operation</code></td>
<td>
<p>(textatopics) textatopics S3 object returned by the original
call to <code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code>.</p>
</td></tr>
<tr><td><code id="textaDetectTopicsStatus_+3A_verbose">verbose</code></td>
<td>
<p>(logical) If set to TRUE, print poll status to stdout.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+textatopics">textatopics</a></code> with the results
of the topic detection operation. See <code><a href="#topic+textatopics">textatopics</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 load("./data/yelpChineseRestaurantReviews.rda")
 set.seed(1234)
 documents &lt;- sample(yelpChReviews$text, 1000)

 tryCatch({

   # Start async topic detection
   operation &lt;- textaDetectTopics(
     documents,                  # At least 100 docs/sentences
     stopWords = NULL,           # Stop word list (optional)
     topicsToExclude = NULL,     # Topics to exclude (optional)
     minDocumentsPerWord = NULL, # Threshold to exclude rare topics (optional)
     maxDocumentsPerWord = NULL, # Threshold to exclude ubiquitous topics (optional)
     resultsPollInterval = 0L    # Poll interval (in s, default: 30s, use 0L for async)
   )

   # Poll the servers until the work completes or until we time out
   resultsPollInterval &lt;- 60L
   resultsTimeout &lt;- 1200L
   startTime &lt;- Sys.time()
   endTime &lt;- startTime + resultsTimeout

   while (Sys.time() &lt;= endTime) {
     sleepTime &lt;- startTime + resultsPollInterval - Sys.time()
     if (sleepTime &gt; 0)
       Sys.sleep(sleepTime)
     startTime &lt;- Sys.time()

     # Poll for results
     topics &lt;- textaDetectTopicsStatus(operation)
     if (topics$status != "NotStarted" &amp;&amp; topics$status != "Running")
       break;
   }

   # Class and structure of topics
   class(topics)
   #&gt; [1] "textatopics"

   str(topics, max.level = 1)
   #&gt; List of 8
   #&gt; $ status          : chr "Succeeded"
   #&gt; $ operationId     : chr "30334a3e1e28406a80566bb76ff04884"
   #&gt; $ operationType   : chr "topics"
   #&gt; $ documents       :'data.frame':  1000 obs. of  2 variables:
   #&gt; $ topics          :'data.frame':  71 obs. of  3 variables:
   #&gt; $ topicAssignments:'data.frame':  502 obs. of  3 variables:
   #&gt; $ json            : chr "{\"status\":\"Succeeded\",\"createdDateTime\": __truncated__ }
   #&gt; $ request         :List of 7
   #&gt; ..- attr(*, "class")= chr "request"
   #&gt; - attr(*, "class")= chr "textatopics"

   # Print results
   topics
   #&gt; textatopics [https://westus.api.cognitive.microsoft.com/text/analytics/ __truncated__ ]
   #&gt; status: Succeeded
   #&gt; operationId: 30334a3e1e28406a80566bb76ff04884
   #&gt; operationType: topics
   #&gt; topics (first 20):
   #&gt; ------------------------
   #&gt;    keyPhrase      score
   #&gt; ---------------- -------
   #&gt;     portions       35
   #&gt;   noodle soup      30
   #&gt;    vegetables      20
   #&gt;       tofu         19
   #&gt;      garlic        17
   #&gt;     Eggplant       15
   #&gt;       Pad          15
   #&gt;      combo         13
   #&gt; Beef Noodle Soup   13
   #&gt;      House         12
   #&gt;      entree        12
   #&gt;     wontons        12
   #&gt;     Pei Wei        12
   #&gt;  mongolian beef    11
   #&gt;       crab         11
   #&gt;      Panda         11
   #&gt;       bean         10
   #&gt;    dumplings        9
   #&gt;     veggies         9
   #&gt;      decor          9
   #&gt; ------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='textaInit'>Initializes the <span class="pkg">mscstexta4r</span> package.</h2><span id='topic+textaInit'></span>

<h3>Description</h3>

<p>This function initializes the Microsoft Cognitive Services
Text Analytics REST API key and URL by reading them either from a
configuration file or environment variables.
</p>
<p>This function <strong>MUST</strong> be called right after package load and before calling
any <span class="pkg">mscstexta4r</span> core functions, or these functions will fail.
</p>
<p>The <code><a href="#topic+textaInit">textaInit</a></code> configuration function will first check to see
if the variable <code>MSCS_TEXTANALYTICS_CONFIG_FILE</code> exists in the system
environment. If it does, the package will use that as the path to the
configuration file.
</p>
<p>If <code>MSCS_TEXTANALYTICS_CONFIG_FILE</code> doesn't exist, it will look for
the file <code>.mscskeys.json</code> in the current user's home directory (that's
<code>~/.mscskeys.json</code> on Linux, and something like <code>C:/Users/Phil/Documents/.mscskeys.json</code>
on Windows). If the file is found, the package will load the API key and URL
from it.
</p>
<p>If using a file, please make sure it has the following structure:
</p>
<pre>
{
  "textanalyticsurl": "https://westus.api.cognitive.microsoft.com/texta/analytics/v2.0/",
  "textanalyticskey": "...MSCS Text Analytics API key goes here..."
}
</pre>
<p>If no configuration file is found, <code><a href="#topic+textaInit">textaInit</a></code> will attempt to
pick up its configuration information from two Sys env variables instead:
</p>
<p><code>MSCS_TEXTANALYTICS_URL</code> - the URL for the Text Analytics REST API.
</p>
<p><code>MSCS_TEXTANALYTICS_KEY</code> -  your personal Text Analytics REST API key.
</p>
<p><code><a href="#topic+textaInit">textaInit</a></code> needs to be called <em>only once</em>, after package
load.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaInit()
</code></pre>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 textaInit()

## End(Not run)
</code></pre>

<hr>
<h2 id='textaKeyPhrases'>Returns the key talking points in sentences or documents.</h2><span id='topic+textaKeyPhrases'></span>

<h3>Description</h3>

<p>This function returns the the key talking points in a list of
sentences or documents. The following languages are currently supported:
English, German, Spanish and Japanese.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaKeyPhrases(documents, languages = rep("en", length(documents)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textaKeyPhrases_+3A_documents">documents</code></td>
<td>
<p>(character vector) Vector of sentences or documents for
which to extract key talking points.</p>
</td></tr>
<tr><td><code id="textaKeyPhrases_+3A_languages">languages</code></td>
<td>
<p>(character vector) Languages of the sentences or documents,
supported values: &quot;en&quot;(English, default), &quot;de&quot;(German), &quot;es&quot;(Spanish),
&quot;fr&quot;(French), &quot;ja&quot;(Japanese)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+texta">texta</a></code>. The results are stored
in the <code>results</code> dataframe inside this object. The dataframe contains
the original sentences or documents and their key talking points. If an error
occurred during processing, the dataframe will also have an <code>error</code>
column that describes the error.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

 docsText &lt;- c(
   "Loved the food, service and atmosphere! We'll definitely be back.",
   "Very good food, reasonable prices, excellent service.",
   "It was a great restaurant.",
   "If steak is what you want, this is the place.",
   "The atmosphere is pretty bad but the food is quite good.",
   "The food is quite good but the atmosphere is pretty bad.",
   "I'm not sure I would come back to this restaurant.",
   "The food wasn't very good.",
   "While the food was good the service was a disappointment.",
   "I was very disappointed with both the service and my entree."
 )
 docsLanguage &lt;- rep("en", length(docsText))

 tryCatch({

   # Get key talking points in documents
   docsKeyPhrases &lt;- textaKeyPhrases(
     documents = docsText,    # Input sentences or documents
     languages = docsLanguage
     # "en"(English, default)|"de"(German)|"es"(Spanish)|"fr"(French)|"ja"(Japanese)
   )

   # Class and structure of docsKeyPhrases
   class(docsKeyPhrases)
   #&gt; [1] "texta"
   str(docsKeyPhrases, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame': 10 obs. of  2 variables:
   #&gt;  $ json   : chr "{\"documents\":[{\"keyPhrases\":[\"atmosphere\",\"food\", __truncated__ ]}]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "texta"

   # Print results
   docsKeyPhrases
   #&gt; texta [https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/keyPhrases]
   #&gt;
   #&gt; -----------------------------------------------------------
   #&gt;              text                       keyPhrases
   #&gt; ------------------------------ ----------------------------
   #&gt;  Loved the food, service and    atmosphere, food, service
   #&gt;  atmosphere! We'll definitely
   #&gt;            be back.
   #&gt;
   #&gt;   Very good food, reasonable   reasonable prices, good food
   #&gt;   prices, excellent service.
   #&gt;
   #&gt;   It was a great restaurant.         great restaurant
   #&gt;
   #&gt;   If steak is what you want,           steak, place
   #&gt;       this is the place.
   #&gt;
   #&gt;  The atmosphere is pretty bad        atmosphere, food
   #&gt;  but the food is quite good.
   #&gt;
   #&gt;  The food is quite good but the       food, atmosphere
   #&gt;   atmosphere is pretty bad.
   #&gt;
   #&gt; I'm not sure I would come back          restaurant
   #&gt;      to this restaurant.
   #&gt;
   #&gt;   The food wasn't very good.               food
   #&gt;
   #&gt;  While the food was good the          service, food
   #&gt; service was a disappointment.
   #&gt;
   #&gt;  I was very disappointed with        service, entree
   #&gt;    both the service and my
   #&gt;            entree.
   #&gt; -----------------------------------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='textaSentiment'>Assesses the sentiment of sentences or documents.</h2><span id='topic+textaSentiment'></span>

<h3>Description</h3>

<p>This function returns a numeric score between 0 and 1 with
scores close to 1 indicating positive sentiment and scores close to 0
indicating negative sentiment.
</p>
<p>Sentiment score is generated using classification techniques. The input
features of the classifier include n-grams, features generated from
part-of-speech tags, and word embeddings. English, French, Spanish and
Portuguese text are supported.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textaSentiment(documents, languages = rep("en", length(documents)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textaSentiment_+3A_documents">documents</code></td>
<td>
<p>(character vector) Vector of sentences or documents for
which to assess sentiment.</p>
</td></tr>
<tr><td><code id="textaSentiment_+3A_languages">languages</code></td>
<td>
<p>(character vector) Languages of the sentences or documents,
supported values: &quot;en&quot;(English, default), &quot;es&quot;(Spanish), &quot;fr&quot;(French),
&quot;pt&quot;(Portuguese)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+texta">texta</a></code>. The results are stored
in the <code>results</code> dataframe inside this object. The dataframe contains
the original sentences or documents and their sentiment score. If an error
occurred during processing, the dataframe will also have an <code>error</code>
column that describes the error.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

 docsText &lt;- c(
   "Loved the food, service and atmosphere! We'll definitely be back.",
   "Very good food, reasonable prices, excellent service.",
   "It was a great restaurant.",
   "If steak is what you want, this is the place.",
   "The atmosphere is pretty bad but the food is quite good.",
   "The food is quite good but the atmosphere is pretty bad.",
   "I'm not sure I would come back to this restaurant.",
   "The food wasn't very good.",
   "While the food was good the service was a disappointment.",
   "I was very disappointed with both the service and my entree."
 )
 docsLanguage &lt;- rep("en", length(docsText))

 tryCatch({

   # Perform sentiment analysis
   docsSentiment &lt;- textaSentiment(
     documents = docsText,    # Input sentences or documents
     languages = docsLanguage
     # "en"(English, default)|"es"(Spanish)|"fr"(French)|"pt"(Portuguese)
   )

   # Class and structure of docsSentiment
   class(docsSentiment)
   #&gt; [1] "texta"
   str(docsSentiment, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame': 10 obs. of  2 variables:
   #&gt;  $ json   : chr "{\"documents\":[{\"score\":0.9903013,\"id\":\"hDgKc\", __truncated__ }]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "texta"

   # Print results
   docsSentiment
   #&gt; texta [https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/sentiment]
   #&gt;
   #&gt; --------------------------------------
   #&gt;              text               score
   #&gt; ------------------------------ -------
   #&gt;  Loved the food, service and    0.9847
   #&gt;  atmosphere! We'll definitely
   #&gt;            be back.
   #&gt;
   #&gt;  Very good food, reasonable     0.9831
   #&gt;  prices, excellent service.
   #&gt;
   #&gt;  It was a great restaurant.     0.9306
   #&gt;
   #&gt;  If steak is what you want,     0.8014
   #&gt;      this is the place.
   #&gt;
   #&gt; The atmosphere is pretty bad    0.4998
   #&gt;  but the food is quite good.
   #&gt;
   #&gt; The food is quite good but the   0.475
   #&gt;   atmosphere is pretty bad.
   #&gt;
   #&gt; I'm not sure I would come back  0.2857
   #&gt;      to this restaurant.
   #&gt;
   #&gt;   The food wasn't very good.    0.1877
   #&gt;
   #&gt;  While the food was good the   0.08727
   #&gt; service was a disappointment.
   #&gt;
   #&gt;  I was very disappointed with  0.01877
   #&gt;    both the service and my
   #&gt;            entree.
   #&gt; --------------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='textatopics'>The <code>textatopics</code> object</h2><span id='topic+textatopics'></span>

<h3>Description</h3>

<p>The <code>textatopics</code> object exposes formatted results for the
<code><a href="#topic+textaDetectTopics">textaDetectTopics</a></code> API, this REST API's JSON response, and the
HTTP request:
</p>

<ul>
<li> <p><code>status</code> the operation's current status (&quot;NotStarted&quot;|&quot;Running&quot;|&quot;Succeeded&quot;|&quot;Failed&quot;)
</p>
</li>
<li> <p><code>documents</code> a <code>data.frame</code> with the documents and a unique
string ID for each
</p>
</li>
<li> <p><code>topics</code> a <code>data.frame</code> with the identified topics, a
unique string ID for each, and a prevalence score for each topic (count of
documents assigned to topic)
</p>
</li>
<li> <p><code>topicAssignments</code> a <code>data.frame</code> with all the topics
(identified by their topic ID) assigned to each document (identified by
their document ID), and a distance score for each topic assignment (between
0 and 1; the lower the distance score the stronger the topic affiliation)
</p>
</li>
<li> <p><code>json</code> the REST API JSON response
</p>
</li>
<li> <p><code>request</code> the HTTP request
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>See Also</h3>

<p>Other res: <code><a href="#topic+texta">texta</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
