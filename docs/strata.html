<!DOCTYPE html><html lang="en"><head><title>Help for package strata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {strata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#strata-package'><p>strata: Simple Framework for Simple Automation</p></a></li>
<li><a href='#adhoc'><p>Execute a single stratum or lamina ad hoc by its name</p></a></li>
<li><a href='#adhoc_lamina'><p>Execute a single lamina ad hoc</p></a></li>
<li><a href='#adhoc_stratum'><p>Execute a single stratum ad hoc</p></a></li>
<li><a href='#build_lamina'><p>Add a lamina to the project space</p></a></li>
<li><a href='#build_outlined_strata_project'><p>Build a strata project from an outline dataframe</p></a></li>
<li><a href='#build_quick_strata_project'><p>Quickly build strata project with minimal input and standard names</p></a></li>
<li><a href='#build_stratum'><p>Add a stratum to the project space</p></a></li>
<li><a href='#edit_toml'><p>Edit a toml file by providing a dataframe replacement</p></a></li>
<li><a href='#log_error'><p>Wrapper around log_message for ERROR messages in the log</p></a></li>
<li><a href='#log_message'><p>Send a standardized log message to stdout or stderr</p></a></li>
<li><a href='#log_total_time'><p>Print time difference in a standard message for logging purposes</p></a></li>
<li><a href='#main'><p>Execute entire strata project</p></a></li>
<li><a href='#survey_log'><p>Return the log contents of a strata log file as a tibble</p></a></li>
<li><a href='#survey_strata'><p>Survey the layout and execution order of a strata project</p></a></li>
<li><a href='#survey_tomls'><p>Find all the strata-based toml files in a strata project</p></a></li>
<li><a href='#view_toml'><p>View the contents of a toml file as a dataframe</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Simple Framework for Simple Automation</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Build a project framework for users with 
    access to only the most basic of automation tools. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/asenetcky/strata">https://github.com/asenetcky/strata</a>,
<a href="https://asenetcky.github.io/strata/">https://asenetcky.github.io/strata/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/asenetcky/strata/issues">https://github.com/asenetcky/strata/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate (&ge; 2.3.2), dplyr (&ge; 1.1.0), fs (&ge; 1.6.4), glue
(&ge; 1.8.0), lifecycle (&ge; 1.0.0), purrr (&ge; 1.0.2), readr (&ge;
2.0.0), rlang (&ge; 1.1.4), stringr (&ge; 1.5.1), tibble (&ge; 3.2.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-05 13:25:23 UTC; alex</td>
</tr>
<tr>
<td>Author:</td>
<td>Alexander Senetcky
    <a href="https://orcid.org/0009-0009-3730-5397"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alexander Senetcky &lt;asenetcky@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-05 13:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='strata-package'>strata: Simple Framework for Simple Automation</h2><span id='topic+strata'></span><span id='topic+strata-package'></span>

<h3>Description</h3>

<p>Build a project framework for users with access to only the most basic of automation tools.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alexander Senetcky <a href="mailto:asenetcky@gmail.com">asenetcky@gmail.com</a> (<a href="https://orcid.org/0009-0009-3730-5397">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/asenetcky/strata">https://github.com/asenetcky/strata</a>
</p>
</li>
<li> <p><a href="https://asenetcky.github.io/strata/">https://asenetcky.github.io/strata/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/asenetcky/strata/issues">https://github.com/asenetcky/strata/issues</a>
</p>
</li></ul>


<hr>
<h2 id='adhoc'>Execute a single stratum or lamina ad hoc by its name</h2><span id='topic+adhoc'></span>

<h3>Description</h3>

<p>In interactive sessions, <code>adhoc()</code> will execute the stratum or lamina that
matches the name provided by the user. If multiple matches are found, the
user will be prompted to choose which one to execute.  If no matches are
found, an error will be thrown. <code>project_path</code> will default to the current
working directory, unless a path is provided by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adhoc(name, prompt = TRUE, silent = FALSE, project_path = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adhoc_+3A_name">name</code></td>
<td>
<p>Name of stratum or lamina.</p>
</td></tr>
<tr><td><code id="adhoc_+3A_prompt">prompt</code></td>
<td>
<p>Prompt user for choice if multiple matches found?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="adhoc_+3A_silent">silent</code></td>
<td>
<p>Suppress log messages? If <code>FALSE</code> (the default), log messages
will be printed to the console. If <code>TRUE</code>, log messages will be suppressed.</p>
</td></tr>
<tr><td><code id="adhoc_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible data frame of execution plan for matched name.
</p>


<h3>See Also</h3>

<p>Other adhoc: 
<code><a href="#topic+adhoc_lamina">adhoc_lamina</a>()</code>,
<code><a href="#topic+adhoc_stratum">adhoc_stratum</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- strata::build_quick_strata_project(tmp, 3, 2)
adhoc("stratum_1")
fs::dir_delete(tmp)

## End(Not run)
</code></pre>

<hr>
<h2 id='adhoc_lamina'>Execute a single lamina ad hoc</h2><span id='topic+adhoc_lamina'></span>

<h3>Description</h3>

<p><code>adhoc_lamina()</code> will execute <em>only</em> the lamina and the code
therein contained as specified by <code>lamina_path</code>
with or without log messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adhoc_lamina(lamina_path, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adhoc_lamina_+3A_lamina_path">lamina_path</code></td>
<td>
<p>Path to lamina.</p>
</td></tr>
<tr><td><code id="adhoc_lamina_+3A_silent">silent</code></td>
<td>
<p>Suppress log messages? If <code>FALSE</code> (the default), log messages
will be printed to the console. If <code>TRUE</code>, log messages will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible data frame of execution plan.
</p>


<h3>See Also</h3>

<p>Other adhoc: 
<code><a href="#topic+adhoc">adhoc</a>()</code>,
<code><a href="#topic+adhoc_stratum">adhoc_stratum</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- strata::build_quick_strata_project(tmp, 1, 1)
adhoc_lamina(
  fs::path(tmp, "strata", "stratum_1", "s1_lamina_1"),
)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='adhoc_stratum'>Execute a single stratum ad hoc</h2><span id='topic+adhoc_stratum'></span>

<h3>Description</h3>

<p><code>adhoc_stratum()</code> will execute <em>only</em> the stratum, its child
laminae and the code therein contained as specified by <code>stratum_path</code>
with or without log messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adhoc_stratum(stratum_path, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adhoc_stratum_+3A_stratum_path">stratum_path</code></td>
<td>
<p>Path to stratum folder</p>
</td></tr>
<tr><td><code id="adhoc_stratum_+3A_silent">silent</code></td>
<td>
<p>Suppress log messages? If <code>FALSE</code> (the default), log messages
will be printed to the console. If <code>TRUE</code>, log messages will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible data frame of execution plan.
</p>


<h3>See Also</h3>

<p>Other adhoc: 
<code><a href="#topic+adhoc">adhoc</a>()</code>,
<code><a href="#topic+adhoc_lamina">adhoc_lamina</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- strata::build_quick_strata_project(tmp, 1, 1)
adhoc_stratum(
  fs::path(tmp, "strata", "stratum_1"),
)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='build_lamina'>Add a lamina to the project space</h2><span id='topic+build_lamina'></span>

<h3>Description</h3>

<p>Add a lamina to the project space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_lamina(lamina_name, stratum_path, order = 1, skip_if_fail = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_lamina_+3A_lamina_name">lamina_name</code></td>
<td>
<p>Name of lamina</p>
</td></tr>
<tr><td><code id="build_lamina_+3A_stratum_path">stratum_path</code></td>
<td>
<p>Path to stratum folder</p>
</td></tr>
<tr><td><code id="build_lamina_+3A_order">order</code></td>
<td>
<p>Execution order, default is <code>1</code></p>
</td></tr>
<tr><td><code id="build_lamina_+3A_skip_if_fail">skip_if_fail</code></td>
<td>
<p>Skip this lamina if it fails, default is <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns fs::path to lamina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result_stratum_path &lt;- build_stratum("my_stratum_name", tmp)
result_lamina_path &lt;- build_lamina("my_lamina_name", result_stratum_path)
result_lamina_path
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='build_outlined_strata_project'>Build a strata project from an outline dataframe</h2><span id='topic+build_outlined_strata_project'></span>

<h3>Description</h3>

<p>Users with a specific idea in mind already can map out the intended project
structure in an outline dataframe and use <code>build_outlined_strata_project()</code>
to build the project using the dataframe as a blueprint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_outlined_strata_project(outline)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_outlined_strata_project_+3A_outline">outline</code></td>
<td>
<p>A data frame with the following columns: project_path,
stratum_name, stratum_order, lamina_name, lamina_order, skip_if_fail.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible dataframe of the survey of the strata project.
</p>


<h3>Outline</h3>

<p>The outline dataframe should have the following columns:
</p>

<ul>
<li> <p><code>project_path</code>: The path to the project.
</p>
</li>
<li> <p><code>stratum_name</code>: The name of the stratum.
</p>
</li>
<li> <p><code>stratum_order</code>: The order of the stratum.
</p>
</li>
<li> <p><code>lamina_name</code>: The name of the lamina.
</p>
</li>
<li> <p><code>lamina_order</code>: The order of the lamina within the stratum.
</p>
</li>
<li> <p><code>skip_if_fail</code>: A logical indicating if the lamina should be skipped if
it fails.
</p>
</li></ul>

<p>Each row of the outline dataframe represents a stratum and lamina combination
to be created in the project.  A Placeholder R script will be created in each
lamina directory to help remind the user to replace it with their own code.
</p>
<p>There can only be those 6 columns, and there can be no missing values in the
dataframe.  The <code>stratum_name</code> and <code>stratum_order</code> columns must contain
unique values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
outline &lt;- tibble::tibble(
  project_path = tmp,
  stratum_name = c("test1", "test2"),
  stratum_order = c(1, 2),
  lamina_name = c("lamina1", "lamina1"),
  lamina_order = c(1, 2),
  skip_if_fail = FALSE
)
result &lt;- build_outlined_strata_project(outline)
dplyr::glimpse(result)
main(tmp)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='build_quick_strata_project'>Quickly build strata project with minimal input and standard names</h2><span id='topic+build_quick_strata_project'></span>

<h3>Description</h3>

<p><code>build_quick_strata_project</code> will create a project with the specified
number of strata - <code>num_strata</code>, with the specified number of laminae
</p>

<ul>
<li> <p><code>num_laminae_per</code> per stratum. The strata and laminae will be named
<code>stratum_1</code>, <code>stratum_2</code>, etc. and <code>s1_lamina_1</code>, <code>s1_lamina_2</code>, etc.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>build_quick_strata_project(project_path, num_strata = 1, num_laminae_per = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_quick_strata_project_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
<tr><td><code id="build_quick_strata_project_+3A_num_strata">num_strata</code></td>
<td>
<p>Number of strata to create.</p>
</td></tr>
<tr><td><code id="build_quick_strata_project_+3A_num_laminae_per">num_laminae_per</code></td>
<td>
<p>Number of laminae to create per stratum.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible dataframe of the survey of the strata project.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- build_quick_strata_project(tmp, 2, 2)
dplyr::glimpse(result)
main(tmp)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='build_stratum'>Add a stratum to the project space</h2><span id='topic+build_stratum'></span>

<h3>Description</h3>

<p>Add a stratum to the project space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_stratum(stratum_name, project_path, order = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_stratum_+3A_stratum_name">stratum_name</code></td>
<td>
<p>Name of stratum</p>
</td></tr>
<tr><td><code id="build_stratum_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
<tr><td><code id="build_stratum_+3A_order">order</code></td>
<td>
<p>Execution order, default is <code>1</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns fs::path to stratum
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- build_stratum("my_stratum_name", tmp)
result
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='edit_toml'>Edit a toml file by providing a dataframe replacement</h2><span id='topic+edit_toml'></span>

<h3>Description</h3>

<p>Users can use <code>edit_toml()</code> to edit a toml file (should they opt not to use a
text editor) by providing a dataframe of the desired contents. The function
will check the dataframe for validity and then rewrite the toml file using
the dataframe as a blueprint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_toml(original_toml_path, new_toml_dataframe)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edit_toml_+3A_original_toml_path">original_toml_path</code></td>
<td>
<p>Path to the original toml file.</p>
</td></tr>
<tr><td><code id="edit_toml_+3A_new_toml_dataframe">new_toml_dataframe</code></td>
<td>
<p>Dataframe of the new toml file contents with the
following columns: <code>type</code>, <code>name</code>, <code>order</code>, <code>skip_if_fail</code>, <code>created</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible original toml file path to toml file
</p>


<h3><code>new_toml_dataframe</code></h3>

<p><code>edit_toml()</code> will check the dataframe for the following columns:
</p>

<ul>
<li> <p><code>type</code>: The type of the toml file, a character that is  either &quot;strata&quot;
or &quot;laminae&quot;
</p>
</li>
<li> <p><code>name</code>: The character string that is the name of the stratum or lamina
</p>
</li>
<li> <p><code>order</code>: The numeric order of the stratum or lamina
</p>
</li>
<li> <p><code>skip_if_fail</code>: (if type == laminae) A logical indicating if the lamina
should be skipped if it fails
</p>
</li>
<li> <p><code>created</code>: A valid date that is the day the stratum or lamina was created
</p>
</li></ul>

<p>Unexpected columns will be dropped, and <code>edit_toml()</code> will warn the user.
If there are any missing columns, <code>edit_toml()</code> will return an error, stop
and inform the user what is missing.
</p>
<p>If there are duplicates in the <code>order</code> than <code>strata</code> will rewrite the order
using its best guess.
</p>


<h3>usage</h3>

<p>Users using this function will likely want to combine some of the other
helpers in <code>strata</code>. This may looks something like this:
</p>

<ul>
<li><p> User runs <code><a href="#topic+survey_tomls">survey_tomls()</a></code> to find all the toml files in the project
</p>
</li>
<li><p> User runs <code><a href="#topic+view_toml">view_toml()</a></code> to view the contents of the toml file and saves
to an object, like <code>original_toml</code> or similiar
</p>
</li>
<li><p> User edits the <code>original_toml</code> object to their liking and saves as a
new object, like <code>new_toml</code>.
</p>
</li>
<li><p> User runs <code>edit_toml()</code> with the path to the original toml and
<code>new_toml</code> objects and can then use <code><a href="#topic+view_toml">view_toml()</a></code> to confirm the changes.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
strata::build_quick_strata_project(tmp, 2, 3)
original_toml_path &lt;- survey_tomls(tmp)[[1]]
original_toml &lt;- view_toml(original_toml_path)
original_toml
new_toml &lt;- original_toml |&gt;
  dplyr::mutate(
    created = as.Date("2021-01-01")
  )
new_toml_path &lt;- edit_toml(original_toml_path, new_toml)
view_toml(new_toml_path)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='log_error'>Wrapper around log_message for ERROR messages in the log</h2><span id='topic+log_error'></span>

<h3>Description</h3>

<p><code>log_error()</code> does <em>not</em> stop the execution of the script, but it does print
the message to stderr.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_error(message)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_error_+3A_message">message</code></td>
<td>
<p>A string containing a message to log.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A message printed to stderr and an invisible character string copy of
the entire log error message.
</p>


<h3>See Also</h3>

<p>Other log: 
<code><a href="#topic+log_message">log_message</a>()</code>,
<code><a href="#topic+log_total_time">log_total_time</a>()</code>,
<code><a href="#topic+survey_log">survey_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>log_error("This is an error message")
</code></pre>

<hr>
<h2 id='log_message'>Send a standardized log message to stdout or stderr</h2><span id='topic+log_message'></span>

<h3>Description</h3>

<p><code>log_message()</code> does <em>not</em> stop the execution of the script, regardless of
the level of the message, and whether or not it prints to STDOUT or STDERR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_message(message, level = "INFO", out_or_err = "OUT")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_message_+3A_message">message</code></td>
<td>
<p>A string containing a message to log.</p>
</td></tr>
<tr><td><code id="log_message_+3A_level">level</code></td>
<td>
<p>The level of the message (e.g. INFO, WARNING, ERROR), defaults
to &quot;INFO&quot; but will accept any string.</p>
</td></tr>
<tr><td><code id="log_message_+3A_out_or_err">out_or_err</code></td>
<td>
<p>Send log output to stdout or stderr, choices are <code>"OUT"</code>
or <code>"ERR"</code> and the defaults is <code>"OUT"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A message printed to stdout or stderr and an invisible character
string copy of the entire log message.
</p>


<h3>See Also</h3>

<p>Other log: 
<code><a href="#topic+log_error">log_error</a>()</code>,
<code><a href="#topic+log_total_time">log_total_time</a>()</code>,
<code><a href="#topic+survey_log">survey_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>log_message("This is an info message", "INFO", "OUT")
log_message("This is an error message", "ERROR", "ERR")
log_message("This is a warning message", "WARNING", "OUT")
</code></pre>

<hr>
<h2 id='log_total_time'>Print time difference in a standard message for logging purposes</h2><span id='topic+log_total_time'></span>

<h3>Description</h3>

<p>Print time difference in a standard message for logging purposes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_total_time(begin, end)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_total_time_+3A_begin">begin</code></td>
<td>
<p>A data-time object, signifying the beginning or a process</p>
</td></tr>
<tr><td><code id="log_total_time_+3A_end">end</code></td>
<td>
<p>A data-time object, signifying the end of a process</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value of the time difference in seconds
</p>


<h3>See Also</h3>

<p>Other log: 
<code><a href="#topic+log_error">log_error</a>()</code>,
<code><a href="#topic+log_message">log_message</a>()</code>,
<code><a href="#topic+survey_log">survey_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>begin &lt;- Sys.time()
# do something
end &lt;- Sys.time() + 999
log_total_time(begin, end)
</code></pre>

<hr>
<h2 id='main'>Execute entire strata project</h2><span id='topic+main'></span>

<h3>Description</h3>

<p><code>main()</code> will read the <code>.toml</code> files inside the <code>project_path</code>
and begin sourcing the <code>strata</code> and <code>laminae</code> in the order specified by the
user, with or without logging messages.
</p>
<p>When a strata project is created <code>main.R</code> is added to the project root. This
script houses <code>main()</code>, and this file is the entry point to the project and
should be the target for automation. However, <code>main()</code> can be called from
anywhere, and users can opt to not use <code>main.R</code> at all.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>main(project_path, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="main_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
<tr><td><code id="main_+3A_silent">silent</code></td>
<td>
<p>Suppress log messages? If <code>FALSE</code> (the default), log messages
will be printed to the console. If <code>TRUE</code>, log messages will be suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible execution plan.
</p>


<h3>.toml files</h3>

<p>There are two types of <code>.toml</code> files that <code>main()</code> will read:
</p>

<ul>
<li> <p><code>.strata.toml</code> - a singular file inside the <code style="white-space: pre;">&#8288;&lt;project_path&gt;/strata&#8288;</code> folder
</p>
</li>
<li> <p><code>.laminae.toml</code> - a file inside each <code style="white-space: pre;">&#8288;&lt;project_path&gt;/strata/&lt;stratum_name&gt;&#8288;</code>
folder
</p>
<p>These files are created by the <code>strata</code> functions and are used to determine
primarily the order of execution for the strata and laminae.  Anything not
referenced by a .toml will be ignored by <code>main()</code> and other functions such
as <code><a href="#topic+survey_strata">survey_strata()</a></code>, <code><a href="#topic+adhoc_stratum">adhoc_stratum()</a></code>, and <code><a href="#topic+adhoc_lamina">adhoc_lamina()</a></code>. Users can
safely add other folders and files in the project root, and even within the
subfolders and they will be ignored, unless users have code known by a
<code>.toml</code> that references them.
</p>
<p>Users can use the functions <code><a href="#topic+survey_tomls">survey_tomls()</a></code> and [view_toml())] to find and
view the <code>.toml</code> files in their project.
</p>
</li></ul>

<p>[view_toml())]: R:view_toml())
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
result &lt;- strata::build_quick_strata_project(tmp, 1, 1)
main(tmp)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='survey_log'>Return the log contents of a strata log file as a tibble</h2><span id='topic+survey_log'></span>

<h3>Description</h3>

<p>If users decide to pipe the results of <code><a href="#topic+main">main()</a></code> or any of the
logging-related functions into a log file, the contents of log file
can be parsed and stored in a tibble using <code>survey_log()</code>.  <em>Only</em>
the messages from the <code style="white-space: pre;">&#8288;log_*()&#8288;</code> functions will be parsed, all other output
from the code will be ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_log(log_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_log_+3A_log_path">log_path</code></td>
<td>
<p>Path to the log file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of the contents of the log file
</p>


<h3>See Also</h3>

<p>Other survey: 
<code><a href="#topic+survey_strata">survey_strata</a>()</code>,
<code><a href="#topic+survey_tomls">survey_tomls</a>()</code>
</p>
<p>Other log: 
<code><a href="#topic+log_error">log_error</a>()</code>,
<code><a href="#topic+log_message">log_message</a>()</code>,
<code><a href="#topic+log_total_time">log_total_time</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
log &lt;- fs::file_create(fs::path(tmp, "main.log"))
fake_log_message &lt;- log_message("example message")
cat(fake_log_message, file = log)
survey_log(log)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='survey_strata'>Survey the layout and execution order of a strata project</h2><span id='topic+survey_strata'></span>

<h3>Description</h3>

<p><code>survey_strata()</code> will examine the .tomls in <code>project_path</code> provided and
return a dataframe with the following information about the project:
</p>

<ul>
<li> <p><code>stratum_name</code>: the name of the stratum
</p>
</li>
<li> <p><code>lamina_name</code>: the name of the lamina
</p>
</li>
<li> <p><code>execution_order</code>: the order in which the stratum-lamina-code combination
will be executed
</p>
</li>
<li> <p><code>script_name</code>: the name of the script to be executed
</p>
</li>
<li> <p><code>script_path</code>: the path to the script
</p>
</li></ul>

<p>This is based on the contents of the .toml files, everything else is
&quot;invisible&quot; inside the strata project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_strata(project_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_strata_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe housing the layout of your project based on the .tomls.
</p>


<h3>See Also</h3>

<p>Other survey: 
<code><a href="#topic+survey_log">survey_log</a>()</code>,
<code><a href="#topic+survey_tomls">survey_tomls</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
build_quick_strata_project(tmp, 2, 2)
survey_strata(tmp)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='survey_tomls'>Find all the strata-based toml files in a strata project</h2><span id='topic+survey_tomls'></span>

<h3>Description</h3>

<p>Find all the strata-based toml files in a strata project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_tomls(project_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_tomls_+3A_project_path">project_path</code></td>
<td>
<p>A path to strata project folder.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an fs_path object of all toml files.
</p>


<h3>See Also</h3>

<p>Other survey: 
<code><a href="#topic+survey_log">survey_log</a>()</code>,
<code><a href="#topic+survey_strata">survey_strata</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
strata::build_quick_strata_project(tmp, 2, 3)
survey_tomls(tmp)
fs::dir_delete(tmp)
</code></pre>

<hr>
<h2 id='view_toml'>View the contents of a toml file as a dataframe</h2><span id='topic+view_toml'></span>

<h3>Description</h3>

<p>View the contents of a toml file as a dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_toml(toml_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view_toml_+3A_toml_path">toml_path</code></td>
<td>
<p>Path to the toml file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe of the toml file contents.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- fs::dir_create(fs::file_temp())
strata::build_quick_strata_project(tmp, 2, 3)
proj_tomls &lt;- survey_tomls(tmp)
purrr::map(proj_tomls, view_toml)
fs::dir_delete(tmp)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
