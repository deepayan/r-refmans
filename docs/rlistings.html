<!DOCTYPE html><html><head><title>Help for package rlistings</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rlistings}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rlistings-package'><p>rlistings: Clinical Trial Style Data Readout Listings</p></a></li>
<li><a href='#as_listing'><p>Create a listing from a <code>data.frame</code> or <code>tibble</code></p></a></li>
<li><a href='#format_colvector'><p>Utilities for formatting a listing column</p></a></li>
<li><a href='#listing_methods'><p>Methods for <code>listing_df</code> objects</p></a></li>
<li><a href='#make_row_df+2Clisting_df-method'><p>Make pagination data frame for a listing</p></a></li>
<li><a href='#matrix_form+2Clisting_df-method'><p>Transform <code>rtable</code> to a list of matrices which can be used for outputting</p></a></li>
<li><a href='#paginate_listing'><p>Paginate listings</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#split_into_pages_by_var'><p>Split Listing by Values of a Variable</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Clinical Trial Style Data Readout Listings</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.9</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-06-11</td>
</tr>
<tr>
<td>Description:</td>
<td>Listings are often part of the submission of clinical trial
    data in regulatory settings.  We provide a framework for the specific
    formatting features often used when displaying large datasets in that
    context.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://insightsengineering.github.io/rlistings/">https://insightsengineering.github.io/rlistings/</a>,
<a href="https://github.com/insightsengineering/rlistings/">https://github.com/insightsengineering/rlistings/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insightsengineering/rlistings/issues">https://github.com/insightsengineering/rlistings/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>formatters (&ge; 0.5.8), methods, tibble (&ge; 2.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate (&ge; 2.1.0), grDevices, grid, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr (&ge; 1.0.2), knitr (&ge; 1.42), lifecycle (&ge; 0.2.0),
rmarkdown (&ge; 2.23), stringi (&ge; 1.6), testthat (&ge; 3.1.5),
withr (&ge; 2.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/verdepcheck:</td>
<td>insightsengineering/formatters,
tidyverse/tibble, mllg/checkmate, tidyverse/dplyr, yihui/knitr,
r-lib/lifecycle, rstudio/rmarkdown, gagolews/stringi,
r-lib/testthat, r-lib/withr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>insightsengineering/nesttemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-20 08:14:20 UTC; rstudio</td>
</tr>
<tr>
<td>Author:</td>
<td>Gabriel Becker [aut] (original creator of the package),
  Adrian Waddell [aut],
  Joe Zhu [aut, cre],
  Davide Garolini [ctb],
  Emily de la Rua [ctb],
  Abinaya Yogasekaram [ctb],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joe Zhu &lt;joe.zhu@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-20 10:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='rlistings-package'>rlistings: Clinical Trial Style Data Readout Listings</h2><span id='topic+rlistings'></span><span id='topic+rlistings-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Listings are often part of the submission of clinical trial data in regulatory settings. We provide a framework for the specific formatting features often used when displaying large datasets in that context.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Joe Zhu <a href="mailto:joe.zhu@roche.com">joe.zhu@roche.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Gabriel Becker <a href="mailto:gabembecker@gmail.com">gabembecker@gmail.com</a> (original creator of the package)
</p>
</li>
<li><p> Adrian Waddell <a href="mailto:adrian.waddell@gene.com">adrian.waddell@gene.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Davide Garolini <a href="mailto:davide.garolini@roche.com">davide.garolini@roche.com</a> [contributor]
</p>
</li>
<li><p> Emily de la Rua <a href="mailto:emily.de_la_rua@contractors.roche.com">emily.de_la_rua@contractors.roche.com</a> [contributor]
</p>
</li>
<li><p> Abinaya Yogasekaram <a href="mailto:abinaya.yogasekaram@contractors.roche.com">abinaya.yogasekaram@contractors.roche.com</a> [contributor]
</p>
</li>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://insightsengineering.github.io/rlistings/">https://insightsengineering.github.io/rlistings/</a>
</p>
</li>
<li> <p><a href="https://github.com/insightsengineering/rlistings/">https://github.com/insightsengineering/rlistings/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/insightsengineering/rlistings/issues">https://github.com/insightsengineering/rlistings/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as_listing'>Create a listing from a <code>data.frame</code> or <code>tibble</code></h2><span id='topic+as_listing'></span><span id='topic+as_keycol'></span><span id='topic+is_keycol'></span><span id='topic+get_keycols'></span><span id='topic+listing_dispcols'></span><span id='topic+add_listing_dispcol'></span><span id='topic+listing_dispcols+3C-'></span><span id='topic+add_listing_col'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Create listings displaying <code>key_cols</code> and <code>disp_cols</code> to produce a compact and
elegant representation of the input <code>data.frame</code> or <code>tibble</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_listing(
  df,
  key_cols = names(df)[1],
  disp_cols = NULL,
  non_disp_cols = NULL,
  unique_rows = FALSE,
  default_formatting = list(all = fmt_config()),
  col_formatting = NULL,
  main_title = NULL,
  subtitles = NULL,
  main_footer = NULL,
  prov_footer = NULL,
  split_into_pages_by_var = NULL
)

as_keycol(vec)

is_keycol(vec)

get_keycols(df)

listing_dispcols(df)

add_listing_dispcol(df, new)

listing_dispcols(df) &lt;- value

add_listing_col(
  df,
  name,
  fun = NULL,
  format = NULL,
  na_str = "NA",
  align = "left"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_listing_+3A_df">df</code></td>
<td>
<p>(<code>data.frame</code> or <code>listing_df</code>)<br /> the <code>data.frame</code> to be converted to a listing or
<code>listing_df</code> to be modified.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_key_cols">key_cols</code></td>
<td>
<p>(<code>character</code>)<br /> vector of names of columns which should be treated as <em>key columns</em>
when rendering the listing. Key columns allow you to group repeat occurrences.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_disp_cols">disp_cols</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> vector of names of non-key columns which should be
displayed when the listing is rendered. Defaults to all columns of <code>df</code> not named in <code>key_cols</code> or
<code>non_disp_cols</code>.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_non_disp_cols">non_disp_cols</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> vector of names of non-key columns to be excluded as display
columns. All other non-key columns are treated as display columns. Ignored if <code>disp_cols</code> is non-<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_unique_rows">unique_rows</code></td>
<td>
<p>(<code>flag</code>)<br /> whether only unique rows should be included in the listing. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_default_formatting">default_formatting</code></td>
<td>
<p>(<code>list</code>)<br /> a named list of default column format configurations to apply when rendering
the listing. Each name-value pair consists of a name corresponding to a data class (or &quot;numeric&quot; for all
unspecified numeric classes) and a value of type <code>fmt_config</code> with the format configuration that should be
implemented for columns of that class. If named element &quot;all&quot; is included in the list, this configuration will be
used for all data classes not specified. Objects of type <code>fmt_config</code> can take 3 arguments: <code>format</code>, <code>na_str</code>,
and <code>align</code>.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_col_formatting">col_formatting</code></td>
<td>
<p>(<code>list</code>)<br /> a named list of custom column formatting configurations to apply to specific
columns when rendering the listing. Each name-value pair consists of a name corresponding to a column name and a
value of type <code>fmt_config</code> with the formatting configuration that should be implemented for that column. Objects
of type <code>fmt_config</code> can take 3 arguments: <code>format</code>, <code>na_str</code>, and <code>align</code>. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_main_title">main_title</code></td>
<td>
<p>(<code>string</code> or <code>NULL</code>)<br /> the main title for the listing, or <code>NULL</code> (the default).</p>
</td></tr>
<tr><td><code id="as_listing_+3A_subtitles">subtitles</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> a vector of subtitles for the listing, or <code>NULL</code> (the default).</p>
</td></tr>
<tr><td><code id="as_listing_+3A_main_footer">main_footer</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> a vector of main footer lines for the listing, or <code>NULL</code> (the default).</p>
</td></tr>
<tr><td><code id="as_listing_+3A_prov_footer">prov_footer</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> a vector of provenance footer lines for the listing, or <code>NULL</code>
(the default). Each string element is placed on a new line.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_split_into_pages_by_var">split_into_pages_by_var</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br /> the name of a variable for on the listing should be split
into pages, with each page corresponding to one unique value/level of the variable. See
<code><a href="#topic+split_into_pages_by_var">split_into_pages_by_var()</a></code> for more details.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_vec">vec</code></td>
<td>
<p>(<code>string</code>)<br /> name of a column vector from a <code>listing_df</code> object to be annotated as a key column.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_new">new</code></td>
<td>
<p>(<code>character</code>)<br /> vector of names of columns to be added to
the set of display columns.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_value">value</code></td>
<td>
<p>(<code>string</code>)<br /> new value.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_name">name</code></td>
<td>
<p>(<code>string</code>)<br /> name of the existing or new column to be
displayed when the listing is rendered.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_fun">fun</code></td>
<td>
<p>(<code>function</code> or <code>NULL</code>)<br /> a function which accepts <code>df</code> and
returns the vector for a new column, which is added to <code>df</code> as
<code>name</code>, or <code>NULL</code> if marking an existing column as a listing column.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_format">format</code></td>
<td>
<p>(<code>string</code> or <code>function</code>)<br /> a format label (string) or formatter function.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_na_str">na_str</code></td>
<td>
<p>(<code>string</code>)<br /> string that should be displayed in place of missing values.</p>
</td></tr>
<tr><td><code id="as_listing_+3A_align">align</code></td>
<td>
<p>(<code>string</code>)<br /> alignment values should be rendered with.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>At its core, a <code>listing_df</code> object is a <code>tbl_df</code> object with a customized
print method  and support for the formatting and pagination machinery provided by
the <code>formatters</code> package.
</p>
<p><code>listing_df</code> objects have two 'special' types of columns: key columns and display columns.
</p>
<p>Key columns act as indexes, which means a number of things in practice.
</p>
<p>All key columns are also display columns.
</p>
<p><code>listing_df</code> objects are always sorted by their set of key columns at creation time.
Any <code>listing_df</code> object which is not sorted by its full set of key columns (e.g.,
one whose rows have been reordered explicitly during creation) is invalid and the behavior
when rendering or paginating that object is undefined.
</p>
<p>Each value of a key column is printed only once per page and per unique combination of
values for all higher-priority (i.e., to the left of it) key columns. Locations
where a repeated value would have been printed within a key column for the same
higher-priority-key combination on the same page are rendered as empty space.
Note, determination of which elements to display within a key column at rendering is
based on the underlying value; any non-default formatting applied to the column
has no effect on this behavior.
</p>
<p>Display columns are columns which should be rendered, but are not key columns. By
default this is all non-key columns in the incoming data, but in need not be.
Columns in the underlying data which are neither key nor display columns remain
within the object available for computations but <em>are not rendered during
printing or export of the listing</em>.
</p>


<h3>Value</h3>

<p>A <code>listing_df</code> object, sorted by its key columns.
</p>
<p><code>df</code> with <code>name</code> created (if necessary) and marked for
display during rendering.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- ex_adae

# This example demonstrates the listing with key_cols (values are grouped by USUBJID) and
# multiple lines in prov_footer
lsting &lt;- as_listing(dat[1:25, ],
  key_cols = c("USUBJID", "AESOC"),
  main_title = "Example Title for Listing",
  subtitles = "This is the subtitle for this Adverse Events Table",
  main_footer = "Main footer for the listing",
  prov_footer = c(
    "You can even add a subfooter", "Second element is place on a new line",
    "Third string"
  )
) %&gt;%
  add_listing_col("AETOXGR") %&gt;%
  add_listing_col("BMRKR1", format = "xx.x") %&gt;%
  add_listing_col("AESER / AREL", fun = function(df) paste(df$AESER, df$AREL, sep = " / "))

mat &lt;- matrix_form(lsting)

cat(toString(mat))

# This example demonstrates the listing table without key_cols
# and specifying the cols with disp_cols.
dat &lt;- ex_adae
lsting &lt;- as_listing(dat[1:25, ],
  disp_cols = c("USUBJID", "AESOC", "RACE", "AETOXGR", "BMRKR1")
)

mat &lt;- matrix_form(lsting)

cat(toString(mat))

# This example demonstrates a listing with format configurations specified
# via the default_formatting and col_formatting arguments
dat &lt;- ex_adae
dat$AENDY[3:6] &lt;- NA
lsting &lt;- as_listing(dat[1:25, ],
  key_cols = c("USUBJID", "AESOC"),
  disp_cols = c("STUDYID", "SEX", "ASEQ", "RANDDT", "ASTDY", "AENDY"),
  default_formatting = list(
    all = fmt_config(align = "left"),
    numeric = fmt_config(
      format = "xx.xx",
      na_str = "&lt;No data&gt;",
      align = "right"
    )
  )
) %&gt;%
  add_listing_col("BMRKR1", format = "xx.x", align = "center")

mat &lt;- matrix_form(lsting)

cat(toString(mat))

</code></pre>

<hr>
<h2 id='format_colvector'>Utilities for formatting a listing column</h2><span id='topic+format_colvector'></span><span id='topic+vec_nlines'></span><span id='topic+vec_nlines+2CANY-method'></span>

<h3>Description</h3>

<p>For <code>vec_nlines</code>, calculate the number of lines each element of a column vector will
take to render. For <code>format_colvector</code>,
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_colvector(df, colnm, colvec = df[[colnm]])

vec_nlines(vec, max_width = NULL, fontspec = dflt_courier)

## S4 method for signature 'ANY'
vec_nlines(vec, max_width = NULL, fontspec = dflt_courier)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_colvector_+3A_df">df</code></td>
<td>
<p>(<code>listing_df</code>)<br /> the listing.</p>
</td></tr>
<tr><td><code id="format_colvector_+3A_colnm">colnm</code></td>
<td>
<p>(<code>string</code>)<br /> column name.</p>
</td></tr>
<tr><td><code id="format_colvector_+3A_colvec">colvec</code></td>
<td>
<p>(<code>vector</code>)<br /> column values based on <code>colnm</code>.</p>
</td></tr>
<tr><td><code id="format_colvector_+3A_vec">vec</code></td>
<td>
<p>(<code>vector</code>)<br /> a vector.</p>
</td></tr>
<tr><td><code id="format_colvector_+3A_max_width">max_width</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br /> the width to render the column with.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>numeric</code>)<br /> a vector of the number of lines element-wise that will be
needed to render the elements of <code>vec</code> to width <code>max_width</code>.
</p>

<hr>
<h2 id='listing_methods'>Methods for <code>listing_df</code> objects</h2><span id='topic+listing_methods'></span><span id='topic+print.listing_df'></span><span id='topic+toString+2Clisting_df-method'></span><span id='topic++5B+2Clisting_df-method'></span><span id='topic+main_title+2Clisting_df-method'></span><span id='topic+subtitles+2Clisting_df-method'></span><span id='topic+main_footer+2Clisting_df-method'></span><span id='topic+prov_footer+2Clisting_df-method'></span><span id='topic+main_title+3C-+2Clisting_df-method'></span><span id='topic+subtitles+3C-+2Clisting_df-method'></span><span id='topic+main_footer+3C-+2Clisting_df-method'></span><span id='topic+prov_footer+3C-+2Clisting_df-method'></span><span id='topic+num_rep_cols+2Clisting_df-method'></span>

<h3>Description</h3>

<p>See core documentation in <a href="formatters.html#topic+formatters-package">formatters::formatters-package</a> for descriptions of these functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'listing_df'
print(
  x,
  widths = NULL,
  tf_wrap = FALSE,
  max_width = NULL,
  fontspec = NULL,
  col_gap = 3L,
  ...
)

## S4 method for signature 'listing_df'
toString(x, widths = NULL, fontspec = NULL, col_gap = 3L, ...)

## S4 method for signature 'listing_df'
x[i, j, drop = FALSE]

## S4 method for signature 'listing_df'
main_title(obj)

## S4 method for signature 'listing_df'
subtitles(obj)

## S4 method for signature 'listing_df'
main_footer(obj)

## S4 method for signature 'listing_df'
prov_footer(obj)

## S4 replacement method for signature 'listing_df'
main_title(obj) &lt;- value

## S4 replacement method for signature 'listing_df'
subtitles(obj) &lt;- value

## S4 replacement method for signature 'listing_df'
main_footer(obj) &lt;- value

## S4 replacement method for signature 'listing_df'
prov_footer(obj) &lt;- value

## S4 method for signature 'listing_df'
num_rep_cols(obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="listing_methods_+3A_x">x</code></td>
<td>
<p>(<code>listing_df</code>)<br /> the listing.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_widths">widths</code></td>
<td>
<p>(<code>numeric</code> or  <code>NULL</code>)<br /> Proposed widths for the columns of <code>x</code>. The expected
length of this numeric vector can be retrieved with <code>ncol(x) + 1</code> as the column of row names
must also be considered.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_tf_wrap">tf_wrap</code></td>
<td>
<p>(<code>flag</code>)<br /> whether the text for title, subtitles, and footnotes should be wrapped.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_max_width">max_width</code></td>
<td>
<p>(<code>integer(1)</code>, <code>string</code> or <code>NULL</code>)<br /> width that title and footer (including
footnotes) materials should be word-wrapped to. If <code>NULL</code>, it is set to the current print width of the
session (<code>getOption("width")</code>). If set to <code>"auto"</code>, the width of the table (plus any table inset) is
used. Parameter is ignored if <code>tf_wrap = FALSE</code>.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_fontspec">fontspec</code></td>
<td>
<p>(<code>font_spec</code>)<br /> a font_spec object specifying the font information to use for
calculating string widths and heights, as returned by <code><a href="formatters.html#topic+font_spec">font_spec()</a></code>.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_col_gap">col_gap</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> space (in characters) between columns.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_...">...</code></td>
<td>
<p>additional parameters passed to <code><a href="formatters.html#topic+tostring">formatters::toString()</a></code>.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_i">i</code></td>
<td>
<p>(<code>any</code>)<br /> object passed to base <code>[</code> methods.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_j">j</code></td>
<td>
<p>(<code>any</code>)<br /> object passed to base <code>[</code> methods.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_drop">drop</code></td>
<td>
<p>For matrices and arrays.  If <code>TRUE</code> the result is
coerced to the lowest possible dimension (see the examples).  This
only works for extracting elements, not for the replacement.  See
<code><a href="base.html#topic+drop">drop</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_obj">obj</code></td>
<td>
<p>(<code>listing_df</code>)<br /> the listing.</p>
</td></tr>
<tr><td><code id="listing_methods_+3A_value">value</code></td>
<td>
<p>typically an array-like <span class="rlang"><b>R</b></span> object of a similar class as
<code>x</code>.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> Accessor methods return the value of the aspect of <code>obj</code>.
</p>
</li>
<li><p> Setter methods return <code>obj</code> with the relevant element of the listing updated.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>lsting &lt;- as_listing(mtcars)
main_title(lsting) &lt;- "Hi there"

main_title(lsting)

</code></pre>

<hr>
<h2 id='make_row_df+2Clisting_df-method'>Make pagination data frame for a listing</h2><span id='topic+make_row_df+2Clisting_df-method'></span>

<h3>Description</h3>

<p>Make pagination data frame for a listing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'listing_df'
make_row_df(
  tt,
  colwidths = NULL,
  visible_only = TRUE,
  rownum = 0,
  indent = 0L,
  path = character(),
  incontent = FALSE,
  repr_ext = 0L,
  repr_inds = integer(),
  sibpos = NA_integer_,
  nsibs = NA_integer_,
  fontspec = dflt_courier
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_tt">tt</code></td>
<td>
<p>(<code>listing_df</code>)<br /> the listing to be rendered.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_colwidths">colwidths</code></td>
<td>
<p>(<code>numeric</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_visible_only">visible_only</code></td>
<td>
<p>(<code>flag</code>)<br /> ignored, as listings do not have
non-visible structural elements.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_rownum">rownum</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_indent">indent</code></td>
<td>
<p>(<code>integer(1)</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_path">path</code></td>
<td>
<p>(<code>character</code>)<br /> path to the (sub)table represented by <code>tt</code>. Defaults to <code>character()</code>.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_incontent">incontent</code></td>
<td>
<p>(<code>flag</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_repr_ext">repr_ext</code></td>
<td>
<p>(<code>integer(1)</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_repr_inds">repr_inds</code></td>
<td>
<p>(<code>integer</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_sibpos">sibpos</code></td>
<td>
<p>(<code>integer(1)</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_nsibs">nsibs</code></td>
<td>
<p>(<code>integer(1)</code>)<br /> internal detail, do not set manually.</p>
</td></tr>
<tr><td><code id="make_row_df+2B2Clisting_df-method_+3A_fontspec">fontspec</code></td>
<td>
<p>(<code>font_spec</code>)<br /> a font_spec object specifying the font information to use for
calculating string widths and heights, as returned by <code><a href="formatters.html#topic+font_spec">font_spec()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> with pagination information.
</p>


<h3>See Also</h3>

<p><code><a href="formatters.html#topic+make_row_df">formatters::make_row_df()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lsting &lt;- as_listing(mtcars)
mf &lt;- matrix_form(lsting)

</code></pre>

<hr>
<h2 id='matrix_form+2Clisting_df-method'>Transform <code>rtable</code> to a list of matrices which can be used for outputting</h2><span id='topic+matrix_form+2Clisting_df-method'></span>

<h3>Description</h3>

<p>Although <code>rtable</code>s are represented as a tree data structure when outputting the table to ASCII or HTML,
it is useful to map the <code>rtable</code> to an in-between state with the formatted cells in a matrix form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'listing_df'
matrix_form(
  obj,
  indent_rownames = FALSE,
  expand_newlines = TRUE,
  fontspec = font_spec,
  col_gap = 3L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix_form+2B2Clisting_df-method_+3A_obj">obj</code></td>
<td>
<p>(<code>ANY</code>)<br /> object to be transformed into a ready-to-render form (a <code><a href="formatters.html#topic+MatrixPrintForm">MatrixPrintForm</a></code> object).</p>
</td></tr>
<tr><td><code id="matrix_form+2B2Clisting_df-method_+3A_indent_rownames">indent_rownames</code></td>
<td>
<p>(<code>flag</code>)<br /> silently ignored, as listings do not have row names
nor indenting structure.</p>
</td></tr>
<tr><td><code id="matrix_form+2B2Clisting_df-method_+3A_expand_newlines">expand_newlines</code></td>
<td>
<p>(<code>flag</code>)<br /> this should always be <code>TRUE</code> for listings. We keep it
for debugging reasons.</p>
</td></tr>
<tr><td><code id="matrix_form+2B2Clisting_df-method_+3A_fontspec">fontspec</code></td>
<td>
<p>(<code>font_spec</code>)<br /> a font_spec object specifying the font information to use for
calculating string widths and heights, as returned by <code><a href="formatters.html#topic+font_spec">font_spec()</a></code>.</p>
</td></tr>
<tr><td><code id="matrix_form+2B2Clisting_df-method_+3A_col_gap">col_gap</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> the gap to be assumed between columns, in number of spaces with
font specified by <code>fontspec</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="formatters.html#topic+MatrixPrintForm">formatters::MatrixPrintForm</a> object.
</p>


<h3>See Also</h3>

<p><code><a href="formatters.html#topic+matrix_form">formatters::matrix_form()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lsting &lt;- as_listing(mtcars)
mf &lt;- matrix_form(lsting)

</code></pre>

<hr>
<h2 id='paginate_listing'>Paginate listings</h2><span id='topic+paginate_listing'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Pagination of a listing. This can be vertical for long listings with many
rows and/or horizontal if there are many columns. This function is a wrapper of
<code><a href="formatters.html#topic+paginate_indices">formatters::paginate_to_mpfs()</a></code> and it is mainly meant for exploration and testing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paginate_listing(
  lsting,
  page_type = "letter",
  font_family = "Courier",
  font_size = 8,
  lineheight = 1,
  landscape = FALSE,
  pg_width = NULL,
  pg_height = NULL,
  margins = c(top = 0.5, bottom = 0.5, left = 0.75, right = 0.75),
  lpp = NA_integer_,
  cpp = NA_integer_,
  colwidths = NULL,
  tf_wrap = !is.null(max_width),
  rep_cols = NULL,
  max_width = NULL,
  col_gap = 3,
  fontspec = font_spec(font_family, font_size, lineheight),
  verbose = FALSE,
  print_pages = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paginate_listing_+3A_lsting">lsting</code></td>
<td>
<p>(<code>listing_df</code> or <code>list</code>)<br /> the listing or list of listings to paginate.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_page_type">page_type</code></td>
<td>
<p>(<code>string</code>)<br /> name of a page type. See <code><a href="formatters.html#topic+page_types">page_types</a></code>. Ignored
when <code>pg_width</code> and <code>pg_height</code> are set directly.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_font_family">font_family</code></td>
<td>
<p>(<code>string</code>)<br /> name of a font family. An error will be thrown
if the family named is not monospaced. Defaults to <code>"Courier"</code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_font_size">font_size</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> font size. Defaults to <code>12</code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_lineheight">lineheight</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> line height. Defaults to <code>1</code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_landscape">landscape</code></td>
<td>
<p>(<code>flag</code>)<br /> whether the dimensions of <code>page_type</code> should be
inverted for landscape orientation. Defaults to <code>FALSE</code>, ignored when <code>pg_width</code> and
<code>pg_height</code> are set directly.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_pg_width">pg_width</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> page width in inches.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_pg_height">pg_height</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> page height in inches.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_margins">margins</code></td>
<td>
<p>(<code>numeric(4)</code>)<br /> named numeric vector containing <code>"bottom"</code>, <code>"left"</code>,
<code>"top"</code>, and <code>"right"</code> margins in inches. Defaults to <code>.5</code> inches for both vertical
margins and <code>.75</code> for both horizontal margins.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_lpp">lpp</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br /> number of rows/lines (excluding titles and footers)
to include per page. Standard is <code>70</code> while <code>NULL</code> disables vertical pagination.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_cpp">cpp</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br /> width (in characters) of the pages for horizontal
pagination. <code>NULL</code> (the default) indicates no horizontal pagination should be done.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_colwidths">colwidths</code></td>
<td>
<p>(<code>numeric</code>)<br /> vector of column widths (in characters) for use in vertical pagination.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_tf_wrap">tf_wrap</code></td>
<td>
<p>(<code>flag</code>)<br /> whether the text for title, subtitles, and footnotes should be wrapped.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_rep_cols">rep_cols</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> number of <em>columns</em> (not including row labels) to be repeated on every page.
Defaults to 0.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_max_width">max_width</code></td>
<td>
<p>(<code>integer(1)</code>, <code>string</code> or <code>NULL</code>)<br /> width that title and footer (including
footnotes) materials should be word-wrapped to. If <code>NULL</code>, it is set to the current print width of the
session (<code>getOption("width")</code>). If set to <code>"auto"</code>, the width of the table (plus any table inset) is
used. Parameter is ignored if <code>tf_wrap = FALSE</code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_col_gap">col_gap</code></td>
<td>
<p>(<code>numeric(1)</code>)<br /> width of gap between columns, in same units as extent in <code>pagdf</code> (spaces
under a particular font specification).</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_fontspec">fontspec</code></td>
<td>
<p>(<code>font_spec</code>)<br /> a font_spec object specifying the font information to use for
calculating string widths and heights, as returned by <code><a href="formatters.html#topic+font_spec">font_spec()</a></code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_verbose">verbose</code></td>
<td>
<p>(<code>flag</code>)<br /> whether additional informative messages about the search for
pagination breaks should be shown. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="paginate_listing_+3A_print_pages">print_pages</code></td>
<td>
<p>(<code>flag</code>)<br /> whether the paginated listing should be printed to the console
(<code>cat(toString(x))</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code>listing_df</code> objects where each list element corresponds to a separate page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- ex_adae
lsting &lt;- as_listing(dat[1:25, ], disp_cols = c("USUBJID", "AESOC", "RACE", "AETOXGR", "BMRKR1"))
mat &lt;- matrix_form(lsting)
cat(toString(mat))

paginate_listing(lsting, lpp = 10)

paginate_listing(lsting, cpp = 100, lpp = 40)

paginate_listing(lsting, cpp = 80, lpp = 40, verbose = TRUE)

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+export_as_txt'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>formatters</dt><dd><p><code><a href="formatters.html#topic+export_as_txt">export_as_txt</a></code></p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- ex_adae

lsting &lt;- as_listing(dat[1:25, ], key_cols = c("USUBJID", "AESOC")) %&gt;%
  add_listing_col("AETOXGR") %&gt;%
  add_listing_col("BMRKR1", format = "xx.x") %&gt;%
  add_listing_col("AESER / AREL", fun = function(df) paste(df$AESER, df$AREL, sep = " / "))
main_title(lsting) &lt;- "this is some title"
main_footer(lsting) &lt;- "this is some footer"

cat(export_as_txt(lsting, file = NULL, paginate = TRUE))

</code></pre>

<hr>
<h2 id='split_into_pages_by_var'>Split Listing by Values of a Variable</h2><span id='topic+split_into_pages_by_var'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Split is performed based on unique values of the given parameter present in the listing.
Each listing can only be split by variable once. If this function is applied prior to
pagination, parameter values will be separated by page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_into_pages_by_var(lsting, var, page_prefix = var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_into_pages_by_var_+3A_lsting">lsting</code></td>
<td>
<p>listing_df. The listing to split.</p>
</td></tr>
<tr><td><code id="split_into_pages_by_var_+3A_var">var</code></td>
<td>
<p>character. Name of the variable to split on.</p>
</td></tr>
<tr><td><code id="split_into_pages_by_var_+3A_page_prefix">page_prefix</code></td>
<td>
<p>character. Prefix to be appended with the split value (<code>var</code> level),
at the end of the subtitles, corresponding to each resulting list element (listing).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code>lsting_df</code> objects each corresponding to a unique value of <code>var</code>.
</p>


<h3>Note</h3>

<p>This function should only be used after the complete listing has been created. The
listing cannot be modified further after applying this function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- ex_adae[1:20, ]

lsting &lt;- as_listing(
  dat,
  key_cols = c("USUBJID", "AGE"),
  disp_cols = "SEX",
  main_title = "title",
  main_footer = "footer"
) %&gt;%
  add_listing_col("BMRKR1", format = "xx.x") %&gt;%
  split_into_pages_by_var("SEX")

lsting

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
