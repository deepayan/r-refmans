<!DOCTYPE html><html><head><title>Help for package redcapAPI</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {redcapAPI}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#allocationTable'><p>Generate Allocation Tables for the Randomization Module</p></a></li>
<li><a href='#armsMethods'><p>Export, Import, and Delete Arms from a Project</p></a></li>
<li><a href='#assembleCodebook'><p>Assemble Codebook From the Data Dictionary</p></a></li>
<li><a href='#changedRecords'><p>returns a list of record IDs changed (adds, updates, deletes)</p></a></li>
<li><a href='#checkbox_suffixes'><p>Checkbox Suffixes</p></a></li>
<li><a href='#constructLinkToRedcapForm'><p>Construct a Link to a REDCap Form</p></a></li>
<li><a href='#createFileRepositoryFolder'><p>Create a Folder in the File Repository</p></a></li>
<li><a href='#createRedcapProject'><p>Create REDCap Project</p></a></li>
<li><a href='#dagAssignmentMethods'><p>Export and Import Users Assigned to Data Access Groups</p></a></li>
<li><a href='#dagMethods'><p>Export, Import, Delete Data Access Groups from a Project</p></a></li>
<li><a href='#deleteRecords'><p>Delete Records from a Project</p></a></li>
<li><a href='#deprecated_redcapProjectInfo'><p>Deprecated Functions</p></a></li>
<li><a href='#dropRepeatingNA'><p>Drop Row Where Repeat Instrument Is NA</p></a></li>
<li><a href='#eventsMethods'><p>Export, Import, and Delete Event Settings</p></a></li>
<li><a href='#exportBulkRecords'><p>A helper function to export multiple records and forms using</p>
a single call.</a></li>
<li><a href='#exportBundle'><p>Perform a bundle of API calls.</p></a></li>
<li><a href='#exportExternalCoding'><p>Export Codebook Mappings for Fields with External Dependencies</p></a></li>
<li><a href='#exportFieldNames'><p>Export the Complete Field Names for a REDCap Project</p></a></li>
<li><a href='#exportFileRepositoryListing'><p>Export a Listing of Folders and Files in the File Repository</p></a></li>
<li><a href='#exportFilesMultiple'><p>Export Multiple Files From a Project</p></a></li>
<li><a href='#exportInstruments'><p>Export Instruments Defined in a Project</p></a></li>
<li><a href='#exportLogging'><p>Export Logging Records</p></a></li>
<li><a href='#exportPdf'><p>Export PDF file of Data Collection Instruments</p></a></li>
<li><a href='#exportProjectXml'><p>Export Entire Project as REDCap XML File</p></a></li>
<li><a href='#exportVersion'><p>Export the REDCap Version Number</p></a></li>
<li><a href='#Extraction'><p>Extraction and Assignment for <code>redcapFactor</code>s</p></a></li>
<li><a href='#fieldCastingFunctions'><p>Functions for Casting Fields After Export (Post Processing)</p></a></li>
<li><a href='#fieldChoiceMapping'><p>Split a Field Choice Mapping Into a Two Column Matrix</p></a></li>
<li><a href='#fieldToVar'><p>Convert a REDCap Data Field to an R Vector</p></a></li>
<li><a href='#fieldValidationAndCasting'><p>Helper functions for <code>exportRecordsTyped</code> Validation and Casting</p></a></li>
<li><a href='#fileMethods'><p>Export, Import, or Delete Files to a Field in a REDCap Project</p></a></li>
<li><a href='#fileRepositoryMethods'><p>Export, Import, or Delete Multiple Files from the File Repository</p></a></li>
<li><a href='#fileRepositoryPath'><p>Reconstruct the file repository path</p></a></li>
<li><a href='#filterEmptyRow'><p>Remove Rows Containing Only Missing Values</p></a></li>
<li><a href='#fromFileRepositoryMethods'><p>Export, Import, and Delete Individual Files from the File Repository</p></a></li>
<li><a href='#getProjectIdFields'><p>Return a vector of the Project ID Fields</p></a></li>
<li><a href='#importRecords'><p>Import Records to a Project</p></a></li>
<li><a href='#invalidSummary'><p>Helper functions for formatting validation failure report</p></a></li>
<li><a href='#isZeroCodedCheckField'><p>Identify Check Fields with a Zero Coded Option</p></a></li>
<li><a href='#makeApiCall'><p>Make REDCap API Calls</p></a></li>
<li><a href='#mappingMethods'><p>Export and Import Instrument-Event Mappings</p></a></li>
<li><a href='#massert'><p>Conduct Multiple Assertions</p></a></li>
<li><a href='#metaDataMethods'><p>Export and Import the Project Meta Data (Data Dictionary)</p></a></li>
<li><a href='#missingSummary'><p>Report of Missing Values</p></a></li>
<li><a href='#parseBranchingLogic'><p>Parse Branching Logic</p></a></li>
<li><a href='#prepUserImportData'><p>Prepare User Data for Import</p></a></li>
<li><a href='#preserveProject'><p>Preserve Project Data Locally</p></a></li>
<li><a href='#projectInformationMethods'><p>Export and Import Project Settings</p></a></li>
<li><a href='#purgeRestoreProject'><p>Purge and Restore Project Data</p></a></li>
<li><a href='#recodeCheck'><p>Change labeling of <code>checkbox</code> variables</p></a></li>
<li><a href='#reconstituteFileFromExport'><p>Save a File to a Local Directory from a Response</p></a></li>
<li><a href='#recordsManagementMethods'><p>Export Next Record Name or Rename a Record</p></a></li>
<li><a href='#recordsMethods'><p>Export Records and Reports</p></a></li>
<li><a href='#recordsTypedMethods'><p>Export Records or Reports From a Project</p></a></li>
<li><a href='#redcapAPI'><p>Access data, meta data, and files from REDCap using the API</p></a></li>
<li><a href='#redcapConnection'><p>Connect to a REDCap Database</p></a></li>
<li><a href='#redcapDataStructures'><p>REDCap Data Structures</p></a></li>
<li><a href='#redcapError'><p>Handle Errors from the REDCap API</p></a></li>
<li><a href='#redcapFactorFlip'><p>Convert REDCap factors between labeled and coded</p></a></li>
<li><a href='#repeatingInstrumentMethods'><p>Export or Import Repeating Instrument and Events Settings</p></a></li>
<li><a href='#reviewInvalidRecords'><p>Review Invalid Records Following Field Validation</p></a></li>
<li><a href='#splitForms'><p>Split a Data Frame into its Forms</p></a></li>
<li><a href='#stringCleanup'><p>Remove Undesired Characters From Strings</p></a></li>
<li><a href='#stripHTMLandUnicode'><p>Helper Functions for <code>exportRecordsType</code> Attributes</p></a></li>
<li><a href='#surveyMethods'><p>Export Survey Participant Information</p></a></li>
<li><a href='#switchDag'><p>Switch Data Access Group Assignment for the Current User</p></a></li>
<li><a href='#syncUnderscoreCodings'><p>Synchronize coding of checkbox variables between meta data and</p>
records field names.</a></li>
<li><a href='#unlockREDCap'><p>Open REDCap connections using cryptolocker for storage of API_KEYs.</p></a></li>
<li><a href='#userMethods'><p>Export, Import, or Delete Users and User Permissisons</p></a></li>
<li><a href='#userRoleAssignmentMethods'><p>Export or Import User-Role Assignments</p></a></li>
<li><a href='#userRoleMethods'><p>Export, Import, or Delete User Roles in a Project</p></a></li>
<li><a href='#validateImport'><p>Validate Data Frames for Import</p></a></li>
<li><a href='#vectorToApiBodyList'><p>Convert R Vector To List for the API Call Body</p></a></li>
<li><a href='#widerRepeated'><p>Transform Data Into Wide Format</p></a></li>
<li><a href='#writeDataForImport'><p>Prepare a Data Frame for Import Through the API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface to 'REDCap'</td>
</tr>
<tr>
<td>Version:</td>
<td>2.8.4</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shawn Garbett &lt;shawn.garbett@vumc.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Access data stored in 'REDCap' databases using the Application
    Programming Interface (API).  'REDCap' (Research Electronic Data CAPture;
    <a href="https://projectredcap.org">https://projectredcap.org</a>, Harris, et al. (2009) &lt;<a href="https://doi.org/10.1016%2Fj.jbi.2008.08.010">doi:10.1016/j.jbi.2008.08.010</a>&gt;, 
    Harris, et al. (2019) &lt;<a href="https://doi.org/10.1016%2Fj.jbi.2019.103208">doi:10.1016/j.jbi.2019.103208</a>&gt;) is
    a web application for building and managing online surveys and databases
    developed at Vanderbilt University.  The API allows users to access data
    and project meta data (such as the data dictionary) from the web
    programmatically. The 'redcapAPI' package facilitates the process of
    accessing data with options to prepare an analysis-ready data set
    consistent with the definitions in a database's data dictionary.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, chron, httr, labelVector, lubridate, keyring,
getPass, yaml</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), Hmisc, rstudioapi, mockery</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/vubiostat/redcapAPI">https://github.com/vubiostat/redcapAPI</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/vubiostat/redcapAPI/issues">https://github.com/vubiostat/redcapAPI/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-31 16:42:00 UTC; garbetsp</td>
</tr>
<tr>
<td>Author:</td>
<td>Benjamin Nutter [ctb, aut],
  Shawn Garbett <a href="https://orcid.org/0000-0003-4079-5621"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, ctb],
  Savannah Obregon [ctb],
  Thomas Obadia [ctb],
  Marcus Lehr [ctb],
  Brian High [ctb],
  Stephen Lane [ctb],
  Will Beasley [ctb],
  Will Gray [ctb],
  Nick Kennedy [ctb],
  Tan Hsi-Nien [ctb],
  Jeffrey Horner [aut],
  Jeremy Stephens [ctb],
  Cole Beck [ctb],
  Bradley Johnson [ctb],
  Philip Chase [ctb],
  Paddy Tobias [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-31 18:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='allocationTable'>Generate Allocation Tables for the Randomization Module</h2><span id='topic+allocationTable'></span><span id='topic+allocationTable.redcapApiConnection'></span><span id='topic+allocationTable_offline'></span>

<h3>Description</h3>

<p>These methods enable the user to generate allocation tables
for the REDCap randomization module. Randomization may be stratified by other
(categorical) variables in the data set as well as by Data
Access Group. Additionally, randomization may be blocked
to ensure balanced groups throughout the allocation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>allocationTable(
  rcon,
  random,
  strata = NULL,
  group = NULL,
  dag.id = NULL,
  replicates,
  block.size,
  block.size.shift = 0,
  seed.dev = NULL,
  seed.prod = NULL,
  weights = NULL,
  ...
)

## S3 method for class 'redcapApiConnection'
allocationTable(
  rcon,
  random,
  strata = NULL,
  group = NULL,
  dag.id = NULL,
  replicates,
  block.size,
  block.size.shift = 0,
  seed.dev = NULL,
  seed.prod = NULL,
  weights = c(1, 1),
  ...
)

allocationTable_offline(
  meta_data,
  random,
  strata = NULL,
  group = NULL,
  dag.id = NULL,
  replicates,
  block.size,
  block.size.shift = 0,
  seed.dev = NULL,
  seed.prod = NULL,
  weights = c(1, 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="allocationTable_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_random">random</code></td>
<td>
<p><code>character(1)</code>. The field name to be randomized.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_strata">strata</code></td>
<td>
<p><code>character</code>. Field names by which to stratify the randomization.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_group">group</code></td>
<td>
<p><code>character(1)</code>. A field name giving a group by which randomization should be
stratified.  This could also be listed in <code>strata</code>, but the argument
is provided to remain consistent with the REDCap user interface.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_dag.id">dag.id</code></td>
<td>
<p><code>integerish</code>. Data Access Group IDs.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_replicates">replicates</code></td>
<td>
<p><code>integerish(1)</code>. The number of randomizations to perform
within each stratum</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_block.size">block.size</code></td>
<td>
<p><code>integerish</code>. Block size for the randomization.  Blocking is recommended
to ensure balanced groups throughout the randomization.  This may be a vector
to indicate variable block sizes throughout the randomization.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_block.size.shift">block.size.shift</code></td>
<td>
<p><code>numeric</code> on the interval <code style="white-space: pre;">&#8288;[0, 1]&#8288;</code>.
A vector the same length as <code>block.size</code> where the
first element is 0.  This controls when the block size changes as a proportion
of the total sample size.  When <code>block.size=c(8, 4, 2)</code> and
<code>block.size.shift = c(0, .5, .9)</code>, the first half of the randomization
is performed in blocks of 8, then the next 40 percent of the randomization
is performed in blocks of 4, with the last ten percent performed in blocks
of 2.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_seed.dev">seed.dev</code></td>
<td>
<p><code>integerish</code>. At least one value is required.  If only one value is given,
it will be converted to a vector with length equal to the number of strata.
Values will be incremented by 100 to provide independent randomizations.
This may also have length equal to the number of strata.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_seed.prod">seed.prod</code></td>
<td>
<p><code>integerish</code>. Same as <code>seed.dev</code>, but used to seed the production
allocation.  No pairwise elements of <code>seed.dev</code> and <code>seed.prod</code>
may be equal.  This guarantees that the two randomization schemes are
unique.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_weights">weights</code></td>
<td>
<p>An optional vector giving the sampling weights for each of the randomization
groups.  There must be one number for each level of the randomization variable.  If named,
the names must match the group labels.  If unnamed, the group labels will be assigned in the
same order they appear in the data dictionary.  The weights will be normalized, so they do
not need to sum to 1.0.  In other words, <code>weights=c(3, 1)</code> can indicate a 3:1 sampling
ratio.</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="allocationTable_+3A_meta_data">meta_data</code></td>
<td>
<p><code>character(1)</code>. For the offline method, a text string
giving the location of the data dictionary downloaded from REDCap.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each element in <code>block.size</code> must be a multiple of the number of
groups in the randomized variable.
</p>
<p>The 'offline' version of the function operates on the data dictionary file
downloaded from REDCap.  This is made available for instances where the
API cannot be accessed for some reason (such as waiting for API approval
from the REDCap administrator).
</p>
<p>The value of <code>replicates</code> controls how many allocations are generated.  It
is possible to get slightly more replicates than requested if your blocking design
cannot exactly match replicates.  For example, if the users asks for 30 replicates in
blocks of 8, a warning will be printed and 32 replicates will be returned in the
randomization table.
</p>


<h3>Value</h3>

<p>Returns a list with the elements</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>dev_allocation</code> </td><td style="text-align: left;"> <code>data.frame</code> with the randomization allocations for the development environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>prod_allocation</code> </td><td style="text-align: left;"> <code>data.frame</code> with the randomization allocations for the production environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>dev_seed</code> </td><td style="text-align: left;"> The random seed values for the development environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>prod_seed</code> </td><td style="text-align: left;"> The random seed values for the production environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>blocks</code> </td><td style="text-align: left;"> Blocking scheme used to generate the randomization. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>weights</code> </td><td style="text-align: left;"> Weighting scheme for the randomization. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
allocationTable(rcon, 
                random = "treatment_assignment", 
                strata = c("demographic_group", "hospital_group"), 
                replicates = 12, 
                block.size = 4, 
                seed.dev = 12345, 
                seed.prod = 54321)

## End(Not run)

</code></pre>

<hr>
<h2 id='armsMethods'>Export, Import, and Delete Arms from a Project</h2><span id='topic+armsMethods'></span><span id='topic+exportArms'></span><span id='topic+importArms'></span><span id='topic+deleteArms'></span><span id='topic+exportArms.redcapApiConnection'></span><span id='topic+importArms.redcapApiConnection'></span><span id='topic+deleteArms.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export the current arms
from a project, import new arms, and modify or delete existing arms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportArms(rcon, ...)

importArms(rcon, data, override = FALSE, ...)

deleteArms(rcon, arms, ...)

## S3 method for class 'redcapApiConnection'
exportArms(
  rcon,
  arms = character(0),
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importArms(
  rcon,
  data,
  override = FALSE,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteArms(
  rcon,
  arms,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="armsMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_arms">arms</code></td>
<td>
<p><code>character</code> or <code>integerish</code> identifying the arm
numbers to export or delete.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> with two columns.  The first column
(<code>arm_num</code>) is an <code>integerish</code> value . The second (<code>name</code>) is
a character value. For backward compatibility,
this may also be passed as <code>arms_data</code>.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_override">override</code></td>
<td>
<p><code>logical(1)</code>. By default, data will add to or modify
existing arms data. When <code>TRUE</code>, all the existing arms data is
deleted and replaced with the contents of <code>data</code>.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code> If <code>TRUE</code>, the cached arms data will
be refreshed after the API action is complete.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="armsMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exporting arms is not supported for classical REDCap projects. If
the user attempts to export arms for a classical project, a
data frame will be returned with zero rows.
</p>
<p>When importing, arms are added when the value of <code>arm_num</code>
does not already exist in the project.
</p>
<p>Arm names may be modified by altering the <code>name</code> value associated
with an existing <code>arm_num</code> value.
</p>
<p>Deleting arms&ndash;whether by <code>deleteArms</code> or <code>importArms</code> with
<code>override = TRUE</code>&ndash;is a destructive act that also deletes
events and records associated with the arm. This is irreversible
data loss. REDCap will only permit these actions to occur in projects
in Development status.
</p>


<h3>Value</h3>

<p><code>exportArms</code> returns a <code>data.frame</code> with columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>arm_num</code> </td><td style="text-align: left;"> The ID number for the arm in the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>name</code> </td><td style="text-align: left;"> The display name of the arm. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importArms</code> invisibly returns the number of arms imported.
</p>
<p><code>deleteArms</code> invisibly returns the number of arms deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportArms()</code>: Export the arms defined in a project.
</p>
</li>
<li> <p><code>importArms()</code>: Import and modify the arms definitions in a project.
</p>
</li>
<li> <p><code>deleteArms()</code>: Delete arms from a project.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export all of the Arms
exportArms(rcon)

# Export only a subset of arms
exportArms(rcon, 
           arms = c(1, 3))


# Import a new arms
# Assume arms 1, 2, and 3 exist in the project already
NewData &lt;- data.frame(arm_num = 4, 
                      name = "Arm Four Name")
importArms(rcon, 
           data = NewData)
           
# Change the name of an existing arm
NewData &lt;- data.frame(arm_num = 1, 
                      name = "New Arm Name")
importArms(rcon, 
           data = NewData)
           
# Delete all arms and replace with a new specification
NewData &lt;- data.frame(arm_num = c(1, 2), 
                      name = c("Treatment Arm", "Control Arm"))
importArms(rcon, 
           data = NewData, 
           override = TRUE)
           
# Delete an existing arm
deleteArms(rcon, 
           arms = 4)
         
# Delete multiple existing arm
deleteArms(rcon, 
           arms = c(2, 3))

## End(Not run)
</code></pre>

<hr>
<h2 id='assembleCodebook'>Assemble Codebook From the Data Dictionary</h2><span id='topic+assembleCodebook'></span><span id='topic+assembleCodebook.redcapConnection'></span><span id='topic+as.list.redcapCodebook'></span>

<h3>Description</h3>

<p>This method enables the user to construct a code book similar
in style to the REDCap project codebook. The codebook is similar in
nature to the data dictionary, but multiple choice fields are represented
with one line per coding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assembleCodebook(
  rcon,
  fields = NULL,
  forms = NULL,
  drop_fields = NULL,
  field_types = NULL,
  include_form_complete = TRUE,
  expand_check = FALSE,
  ...
)

## S3 method for class 'redcapConnection'
assembleCodebook(
  rcon,
  fields = NULL,
  forms = NULL,
  drop_fields = NULL,
  field_types = NULL,
  include_form_complete = TRUE,
  expand_check = FALSE,
  ...
)

## S3 method for class 'redcapCodebook'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assembleCodebook_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_fields">fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. When <code>character</code>, the code book will
be limited to the intersection of the fields designated by <code>fields</code>
and <code>forms</code>. When <code>NULL</code>, all fields are included.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_forms">forms</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. When <code>character</code>, the code book will
be limited to the intersection of the fields designated by <code>fields</code>
and <code>forms</code>. When <code>NULL</code>, all forms are included.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_drop_fields">drop_fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. When given, fields named
will be removed from the code book.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_field_types">field_types</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. When given, only the field
types listed will be included in the code book. This will supercede
the intersection of <code>fields</code> and <code>forms</code>. Matching of field types is
performed against the values in the <code>field_type</code> column of the meta data.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_include_form_complete">include_form_complete</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the
<code style="white-space: pre;">&#8288;[form name]_complete&#8288;</code> fields will be included in the codebook.</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_expand_check">expand_check</code></td>
<td>
<p><code>logical(1)</code>. When <code>FALSE</code>, the codebook for checkbox
fields will be similar to the codebook for dropdown and radio fields,
with one line per user-defined option. When <code>TRUE</code>, each checkbox option
will be represented in two fields, one each for 0 (Unchecked) and
1 (Checked).</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="assembleCodebook_+3A_x">x</code></td>
<td>
<p>A <code>redcapCodebook</code> object as returned by <code>assembleCodebook</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>redcapCodebook</code> object. This inherits the <code>data.frame</code> class
and has the columns
</p>

<ul>
<li> <p><code>field_name</code> - The name of the field.
</p>
</li>
<li> <p><code>form</code> - The name of the form on which the field is located.
</p>
</li>
<li> <p><code>field_type</code> - The field type.
</p>
</li>
<li> <p><code>code</code> - For multiple choice fields, the coding for the option.
</p>
</li>
<li> <p><code>label</code> - For multiple choice fields, the label for the option.
</p>
</li>
<li> <p><code>min</code> - For date and numeric fields, the minimum value in the validation, if any.
</p>
</li>
<li> <p><code>max</code> - For date and numeric fields, the maximum value in the validation, if any.
</p>
</li>
<li> <p><code>branching_logic</code> - For fields with branching logic, the string denoting the logic applied.
</p>
</li>
<li> <p><code>field_order</code> - The numeric order of the field in the data dictionary.
</p>
</li>
<li> <p><code>form_order</code> - The numeric order of the form in the data dictionary.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+exportMetaData">exportMetaData()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# codebook for the entire project
assembleCodebook(rcon)

# codebook for multiple choice fields
assembleCodebook(rcon, 
                 field_types = c("dropdown", "radio", "checkbox", 
                                 "yesno", "truefalse"))

## End(Not run)

</code></pre>

<hr>
<h2 id='changedRecords'>returns a list of record IDs changed (adds, updates, deletes)</h2><span id='topic+changedRecords'></span>

<h3>Description</h3>

<p>This is a convenience function that scans logs and
returns record IDs of changed records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changedRecords(rcon, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changedRecords_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="changedRecords_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+exportLogging">exportLogging()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Makes a call to <code>exportLogging</code> with passed arguments. Returns
filtered list or records IDs with update, delete or create events.
</p>


<h3>Value</h3>

<p>Returns a list with the elements</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>updated</code> </td><td style="text-align: left;"> character vector of updated record IDs </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>deleted</code> </td><td style="text-align: left;"> character vector of deleted record IDs </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>created</code> </td><td style="text-align: left;"> character vector of created record IDs </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Changes in last 24 hours     
changedRecords(rcon, beginTime=as.POSIXct(Sys.time()-86400))

## End(Not run)

</code></pre>

<hr>
<h2 id='checkbox_suffixes'>Checkbox Suffixes</h2><span id='topic+checkbox_suffixes'></span>

<h3>Description</h3>

<p>Checkbox variables return one vector of data for each option defined
in the variable.  The variables are returned with the suffix <code style="white-space: pre;">&#8288;___[option]&#8288;</code>.
<code>exportRecords</code> needs these suffixes in order to retrieve all of the
variables and to apply the correct labels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkbox_suffixes(fields, meta_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkbox_suffixes_+3A_fields">fields</code></td>
<td>
<p>The current field names of interest</p>
</td></tr>
<tr><td><code id="checkbox_suffixes_+3A_meta_data">meta_data</code></td>
<td>
<p>The metadata data frame.</p>
</td></tr>
</table>

<hr>
<h2 id='constructLinkToRedcapForm'>Construct a Link to a REDCap Form</h2><span id='topic+constructLinkToRedcapForm'></span><span id='topic+constructLinkToRedcapForm.redcapApiConnection'></span><span id='topic+constructLinkToRedcapForm.redcapOfflineConnection'></span>

<h3>Description</h3>

<p>Uses information from the project and a record to link to
the form on which a data element is recorded. This is intended to be used
within the report of invalid results when exporting or importing
records. It should be noted that when importing records, the records
may not yet exist and the links may not work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructLinkToRedcapForm(rcon, form_name, record_id, event_id = NULL, ...)

## S3 method for class 'redcapApiConnection'
constructLinkToRedcapForm(rcon, form_name, record_id, event_id = NULL, ...)

## S3 method for class 'redcapOfflineConnection'
constructLinkToRedcapForm(rcon, form_name, record_id, event_id = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="constructLinkToRedcapForm_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="constructLinkToRedcapForm_+3A_form_name">form_name</code></td>
<td>
<p><code>character</code>. The name of the form on which the field
name exists.</p>
</td></tr>
<tr><td><code id="constructLinkToRedcapForm_+3A_record_id">record_id</code></td>
<td>
<p><code>character</code>. The ID of the record being linked to.
If passed as a numeric value, it will be coerced to character.
Must have the same length as <code>form_name</code>.</p>
</td></tr>
<tr><td><code id="constructLinkToRedcapForm_+3A_event_id">event_id</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. For classical projects, use either
<code>NULL</code> or <code>NA</code> (<code>NA</code> support is permitted to assist with vectorization).
For longitudinal projects, the ID of the unique event. If passed
as a numeric value, it will be coerced to character.</p>
</td></tr>
<tr><td><code id="constructLinkToRedcapForm_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Constructing a link to a REDCap form requires knowledge of the
following:
</p>

<ul>
<li><p> The REDCap instance url (usually 'redcap.institution.domain').
</p>
</li>
<li><p> The REDCap instance version number.
</p>
</li>
<li><p> The REDCap project ID number
</p>
</li>
<li><p> The record ID
</p>
</li>
<li><p> The form name
</p>
</li>
<li><p> The event ID number (if the project is longitudinal).
</p>
</li></ul>

<p>If any of these items in unknown, a missing value will be returned. For
<code>redcapOfflineConnection</code>s, the user will need to provide the version
number, the project information, and the events (if the project
is longitudinal) as part of the call to <code>offlineConnection</code>. Note that
the REDCap User Interface does not include the event ID number with the
file download for events.
</p>


<h3>Value</h3>

<p>Returns a character vector the same length of <code>form_name</code>.
</p>

<hr>
<h2 id='createFileRepositoryFolder'>Create a Folder in the File Repository</h2><span id='topic+createFileRepositoryFolder'></span><span id='topic+createFileRepositoryFolder.redcapApiConnection'></span>

<h3>Description</h3>

<p>This method enables the user to create a folder in the
file repository. The folder created may also be a subfolder of an
existing folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createFileRepositoryFolder(
  rcon,
  name,
  folder_id = numeric(0),
  dag_id = numeric(0),
  role_id = numeric(0),
  ...
)

## S3 method for class 'redcapApiConnection'
createFileRepositoryFolder(
  rcon,
  name,
  folder_id = numeric(0),
  dag_id = numeric(0),
  role_id = numeric(0),
  ...,
  refresh = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createFileRepositoryFolder_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_name">name</code></td>
<td>
<p><code>character(1)</code> The name of the folder. If a folder by
this name already exists, no action will be taken.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_folder_id">folder_id</code></td>
<td>
<p><code>integerish(0/1)</code>. The ID of the parent folder. When
length is 0, the new folder is placed in the top-level.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_dag_id">dag_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a data access group. When
provided, access to the folder will be restricted to the DAG.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_role_id">role_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a role. When provided,
access to the folder will be restricted to users with that role.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code> When <code>TRUE</code> (default), the cached
File Repository data on <code>rcon</code> will be refreshed.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="createFileRepositoryFolder_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the columns</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>folder_id</code> </td><td style="text-align: left;"> The REDCap assigned ID value for the newly created folder. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>name</code> </td><td style="text-align: left;"> The name assigned to the folder by the user. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+exportFromFileRepository">exportFromFileRepository()</a></code>, <br />
<code><a href="#topic+importToFileRepository">importToFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFromFileRepository">deleteFromFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepository">exportFileRepository()</a></code>, <br />
<code><a href="#topic+importFileRepository">importFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFileRepository">deleteFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepositoryListing">exportFileRepositoryListing()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Create a folder in the top-level directory
createFileRepositoryFolder(rcon, 
                           name = "New Folder Name")
                           
# Create a folder in a subfolder
createFileRepositoryFolder(rcon, 
                           name = "New Folder Name", 
                           folder_id = 12345)
                           
# Create a folder assigned to a Data Access Group
createFileRepositoryFolder(rcon, 
                           name = "New Folder Name", 
                           dag_id = 678)

## End(Not run)

  
</code></pre>

<hr>
<h2 id='createRedcapProject'>Create REDCap Project</h2><span id='topic+createRedcapProject'></span><span id='topic+createRedcapProject.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable a user with a 64-character Super API
token to create a new REDCap project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createRedcapProject(
  rcon,
  project_title,
  purpose = REDCAP_PROJECT_PURPOSE,
  purpose_other = NULL,
  is_longitudinal = FALSE,
  surveys_enabled = FALSE,
  record_autonumbering_enabled = FALSE,
  xml = NULL,
  ...
)

## S3 method for class 'redcapApiConnection'
createRedcapProject(
  rcon,
  project_title,
  purpose = REDCAP_PROJECT_PURPOSE,
  purpose_other = NULL,
  is_longitudinal = FALSE,
  surveys_enabled = FALSE,
  record_autonumbering_enabled = FALSE,
  xml = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createRedcapProject_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_project_title">project_title</code></td>
<td>
<p><code>character(1)</code>. Title for the new project.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_purpose">purpose</code></td>
<td>
<p><code>character</code>, one of
<code>c("Practice/just for fun", "Other", "Research", "Quality Improvement", "Operational Support")</code></p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_purpose_other">purpose_other</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>. Ignored unless
<code>purpose = "Other"</code>, in which case this becomes a required argument.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_is_longitudinal">is_longitudinal</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the project will
be set as a longitudinal project.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_surveys_enabled">surveys_enabled</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> surveys are enabled
for the project. (This will not add any survey instruments, only
enable them).</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_record_autonumbering_enabled">record_autonumbering_enabled</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> if
auto numbering will be enabled in the project.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_xml">xml</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code> an XML string in CDISC ODM XML format that
contains project metadata (fields, forms, events, arms) and might
optionally contain data to be imported as well. When not <code>NULL</code>,
all other arguments are ignored. See Details.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="createRedcapProject_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user creating the project will automatically be added to the project as a
user with full user privileges and a project-level API token,
which could then be used for subsequent project-level API requests.
</p>
<p>When the project is created, it will automatically be given all the
project-level defaults just as if it had been created via the web user
interface, such as automatically creating a single data collection
instrument seeded with a single Record ID field and Form Status field,
as well as (for longitudinal projects) one arm with one event.
</p>
<p>If the user intends to populate the project with arms and events
immediately after creating the project, it is recommended that
<code>override = TRUE</code> be used in <code>importArms</code> and <code>importEvents</code> so that the
default arm and event are removed.
</p>
<p>The <code>xml</code> argument must be in CDISC ODM XML format. It may come from a
REDCap Project XML export  file from REDCap itself
(see <code><a href="#topic+exportProjectXml">exportProjectXml()</a></code>), or may come from another system that is capable of
exporting projects and data in CDISC ODM format. If the <code>xml</code> argument
is used in the API request, it will use the XML to import its
contents into the newly created project. This will not only
create the project with the API request, but also to import all fields,
forms, and project attributes (and events and arms, if longitudinal) as
well as record data all at the same time.
</p>
<p>Only users with a 64-character Super API Tokens can utilize this method
(the standard API token is 32 characters). Users can only be granted a
super token by a REDCap administrator (using the API Tokens page in the
REDCap Control Center). Please be advised that users with a Super API
Token can create new REDCap projects via the API without any approval
needed by a REDCap administrator.
</p>


<h3>Value</h3>

<p>Returns a <code>character(1)</code> the 32-character, project level API token
assigned to the user that created the project. This token is intended
to be used for further project configuration using the API.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportProjectXml">exportProjectXml()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# The token must be a 64-character token
super_token &lt;- redcapConnection(url = "your_redcap_url", 
                                token = "[64-character-super-api-token]")
         
# Create a new project    
createRedcapProject(super_token, 
                    project_title = "New Project Name", 
                    purpose = "Quality Improvement", 
                    is_longitudinal = FALSE, 
                    surveys_enabled = TRUE)
                    
                    
                    
# Copy an existing project into a new project
unlockREDCap(connections = c(rcon = "token_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
xml_file &lt;- tempfile(file.ext = ".xml")
exportProjectXml(rcon, 
                 file = xml_file)
 
xml_text &lt;- paste0(readLines(xml_file), collapse = " ")
createRedcapProject(super_token, 
                    xml = xml_text)

## End(Not run)

</code></pre>

<hr>
<h2 id='dagAssignmentMethods'>Export and Import Users Assigned to Data Access Groups</h2><span id='topic+dagAssignmentMethods'></span><span id='topic+exportUserDagAssignments'></span><span id='topic+importUserDagAssignments'></span><span id='topic+exportUserDagAssignments.redcapApiConnection'></span><span id='topic+importUserDagAssignments.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export existing assignments
of users to Data Access Groups, or import new or updated assignments
to the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportUserDagAssignments(rcon, ...)

importUserDagAssignments(rcon, data, ...)

## S3 method for class 'redcapApiConnection'
exportUserDagAssignments(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importUserDagAssignments(
  rcon,
  data,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dagAssignmentMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="dagAssignmentMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with the columns <code>username</code> and
<code>redcap_data_access_group</code>. The should only be one row per
user name.</p>
</td></tr>
<tr><td><code id="dagAssignmentMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="dagAssignmentMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="dagAssignmentMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="dagAssignmentMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When modifying existing assignments using the import method,
the user must provide the
unique user name and the group name. If the <code>redcap_data_access_group</code>
column is not provided, the REDCap user will not be assigned to any group.
</p>


<h3>Value</h3>

<p><code>exportUserDagAssignments</code> method returns a data frame with two columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>username</code> </td><td style="text-align: left;"> The unique user name for each user in the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>redcap_data_access_group</code> </td><td style="text-align: left;"> The unique Data Access Group name to which the user is assigned. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importUserDagAssignments</code> invisibly returns the number of assignments imported.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportUserDagAssignments()</code>: Export current User-DAG Assignments
</p>
</li>
<li> <p><code>importUserDagAssignments()</code>: Import new or modified User-DAG Assignments.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportDags">exportDags()</a></code>,<br />
<code><a href="#topic+importDags">importDags()</a></code>,<br />
<code><a href="#topic+deleteDags">deleteDags()</a></code>,<br />
<code><a href="#topic+switchDag">switchDag()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export the current assignments
exportUserDagAssignments(rcon)

# Assign a user to a Data Access Group
ForImport &lt;- data.frame(username = "user1", 
                        redcap_data_access_group = "facility_one")
importUserDagAssigments(rcon, 
                        data = ForImport)
                                          
# Assign a multiple users to a Data Access Group
ForImport &lt;- data.frame(username = c("user1", "user2", "user3"), 
                        redcap_data_access_group = c("facility_one", 
                                                     "facility_one", 
                                                      "facility_two"))
importUserDagAssigments(rcon, 
                        data = ForImport)
                        
# Remove a user from all Data Access Groups
ForImport &lt;- data.frame(username = "user1", 
                        redcap_data_access_group = NA_character_)
importUserDagAssigments(rcon, 
                        data = ForImport)

## End(Not run)
</code></pre>

<hr>
<h2 id='dagMethods'>Export, Import, Delete Data Access Groups from a Project</h2><span id='topic+dagMethods'></span><span id='topic+exportDags'></span><span id='topic+importDags'></span><span id='topic+deleteDags'></span><span id='topic+exportDags.redcapApiConnection'></span><span id='topic+importDags.redcapApiConnection'></span><span id='topic+deleteDags.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export existing Data Access Groups,
import new Data Access Groups, or delete Data Access Groups from a
project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportDags(rcon, ...)

importDags(rcon, data, ...)

deleteDags(rcon, dags, ...)

## S3 method for class 'redcapApiConnection'
exportDags(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importDags(
  rcon,
  data,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteDags(
  rcon,
  dags,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dagMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_dags">dags</code></td>
<td>
<p><code>character</code> vector of names matching the <code>unique_group_name</code>.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> with two columns: <code>data_access_group_name</code>
and <code>unique_group_name</code>.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, cached data access
group data will be refreshed after the import.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="dagMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To import new data access groups, the user must provide a value for
<code>data_access_group_name</code> with no value (<code>NA</code>) for <code>unique_group_name</code>.
</p>
<p>To modify a group name, provide a new value for <code>data_access_group_name</code>
with the associated <code>unique_group_name</code>. If <code>unique_group_name</code>
is provided, it must match a value currently in the project.
</p>


<h3>Value</h3>

<p><code>exportDags</code> with the columns</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_group_name</code> </td><td style="text-align: left;"> The human readable name for the data access group. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>unique_group_name</code> </td><td style="text-align: left;"> The internal unique group name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_group_id</code> </td><td style="text-align: left;"> The internal numeric identifier. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importDags</code> invisibly returns the number of Data Access Groups imported.
</p>
<p><code>deleteDags</code> invisibly returns the number of Data Access Groups deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportDags()</code>: Export Data Access Groups from a REDCap Project
</p>
</li>
<li> <p><code>importDags()</code>: Import Data Access Groups to a project.
</p>
</li>
<li> <p><code>deleteDags()</code>: Delete Data Access Groups from a project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+switchDag">switchDag()</a></code>,<br />
<code><a href="#topic+exportUserDagAssignments">exportUserDagAssignments()</a></code>, <br />
<code><a href="#topic+importUserDagAssignments">importUserDagAssignments()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

exportDags(rcon)


# Import a new Data Access Group
NewData &lt;- data.frame(data_access_group_name = "New DAG Name", 
                      unique_group_name = NA_character_)
importDags(rcon, 
           data = NewData)
           
# Modify an existing Data Access Group Name
# The user will need to match the unique_group_name to the existing DAGs
ChangeData &lt;- data.frame(data_access_group_name = "Altered DAG Name", 
                         unique_group_name = "new_dag_name")
importDags(rcon, 
           data = ChangeData)
           
# Delete a Data Access Group
deleteDags(rcon, 
           dags = c("new_dag_name"))

## End(Not run)

</code></pre>

<hr>
<h2 id='deleteRecords'>Delete Records from a Project</h2><span id='topic+deleteRecords'></span><span id='topic+deleteRecords.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to delete records from a project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deleteRecords(rcon, records, arm = NULL, ...)

## S3 method for class 'redcapApiConnection'
deleteRecords(
  rcon,
  records,
  arm = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deleteRecords_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_records">records</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. Record ID's to be
returned.</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_arm">arm</code></td>
<td>
<p><code>integerish</code>. the arm number of the arm in which the
record(s) should be deleted. This can only be used if the project is
longitudinal with more than one arm. If the arm parameter is not
provided, the specified records will be deleted from all arms in which
they exist. Whereas, if <code>arm</code> is provided, they will only be deleted from
the specified arm.</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="deleteRecords_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>deleteRecords</code> invisibly returns a character value giving the number of records deleted.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecords">exportRecords()</a></code>, <br />
<code><a href="#topic+importRecords">importRecords()</a></code>, <br />
<code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Delete records
deleteRecords(rcon, 
              records = c("1", "2"))


## End(Not run)

</code></pre>

<hr>
<h2 id='deprecated_redcapProjectInfo'>Deprecated Functions</h2><span id='topic+deprecated_redcapProjectInfo'></span><span id='topic+redcapProjectInfo'></span><span id='topic+redcapProjectInfo.redcapApiConnection'></span>

<h3>Description</h3>

<p>The <code>redcapProjectInfo</code> function has been deprecated to avoid
confusion with the API method now executed by <code>exportProjectInformation</code>.
The replacement function is <code><a href="#topic+exportBundle">exportBundle()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcapProjectInfo(
  rcon,
  date = TRUE,
  label = TRUE,
  meta_data = TRUE,
  users = TRUE,
  instruments = TRUE,
  events = TRUE,
  arms = TRUE,
  mappings = TRUE,
  version = TRUE,
  ...
)

## S3 method for class 'redcapApiConnection'
redcapProjectInfo(
  rcon,
  date = TRUE,
  label = TRUE,
  meta_data = TRUE,
  users = TRUE,
  instruments = TRUE,
  events = TRUE,
  arms = TRUE,
  mappings = TRUE,
  version = TRUE,
  ...,
  v.number = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_rcon">rcon</code></td>
<td>
<p>A REDCap connection object as generated by <code>redcapConnection</code></p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_date">date</code></td>
<td>
<p>Logical. If <code>TRUE</code>, user expiration dates are converted to
<code>POSIXct</code> objects.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_label">label</code></td>
<td>
<p>Logical.  If <code>TRUE</code>, the user form permissions are
converted to labeled factors.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_meta_data">meta_data</code></td>
<td>
<p>Logical.  Indicates if the meta data (data dictionary)
should be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_users">users</code></td>
<td>
<p>Logical. Indicates if the users table should be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_instruments">instruments</code></td>
<td>
<p>Logical. Indicates if the instruments table should be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_events">events</code></td>
<td>
<p>Logical. Indicates if the event names should be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_arms">arms</code></td>
<td>
<p>Logical. Indicates if the arms table should be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_mappings">mappings</code></td>
<td>
<p>Logical. Indicates if the form-event mappings should
be exported.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_version">version</code></td>
<td>
<p>Indicates if the REDCap version number should be exported.
Only applicable in REDCap 6.0.0 and higher.</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to other methods</p>
</td></tr>
<tr><td><code id="deprecated_redcapProjectInfo_+3A_v.number">v.number</code></td>
<td>
<p>A character string given the desired version number should the
API method not be available.</p>
</td></tr>
</table>

<hr>
<h2 id='dropRepeatingNA'>Drop Row Where Repeat Instrument Is NA</h2><span id='topic+dropRepeatingNA'></span>

<h3>Description</h3>

<p>Drops rows where the repeat instrument is NA. Returns a data frame of records where repeat instruments have a value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropRepeatingNA(Records, rcon, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dropRepeatingNA_+3A_records">Records</code></td>
<td>
<p>A <code>data.frame</code> containing the records from <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code></p>
</td></tr>
<tr><td><code id="dropRepeatingNA_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="dropRepeatingNA_+3A_quiet">quiet</code></td>
<td>
<p><code>logical(1)</code>. When <code>FALSE</code>, a message is printed
indicating how many rows were in <code>Records</code> at the start and
completion of the subset.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>
</p>

<hr>
<h2 id='eventsMethods'>Export, Import, and Delete Event Settings</h2><span id='topic+eventsMethods'></span><span id='topic+exportEvents'></span><span id='topic+importEvents'></span><span id='topic+deleteEvents'></span><span id='topic+exportEvents.redcapApiConnection'></span><span id='topic+importEvents.redcapApiConnection'></span><span id='topic+deleteEvents.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export event settings,
import new events, update settings for existing events, or
delete events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportEvents(rcon, ...)

importEvents(rcon, data, override = FALSE, ...)

deleteEvents(rcon, events = NULL, ...)

## S3 method for class 'redcapApiConnection'
exportEvents(
  rcon,
  arms = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importEvents(
  rcon,
  data,
  override = FALSE,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteEvents(
  rcon,
  events = NULL,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eventsMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_arms">arms</code></td>
<td>
<p><code>character</code> or <code>integerish</code> identifying the arm
numbers for which event data will be exported.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_events">events</code></td>
<td>
<p><code>character</code> giving the unique event names of the events to
be deleted.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. Must have columns <code>event_name</code> and <code>arm_num</code>.
To modify existing events, it must also have a column <code>unique_event_name</code>.
It may optionally have columns for <code>days_offset</code>, <code>offset_min</code>, <code>offset_max</code>.
For backward compatibility, this argument may be passed as <code>event_data</code>.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_override">override</code></td>
<td>
<p><code>logical(1)</code>. By default, data will add to or modify
existing arms data. When <code>TRUE</code>, all the existing arms data is
deleted and replaced with the contents of <code>data</code>.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached arms data will
be refreshed after the API action is complete.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="eventsMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exporting events is not supported for classical REDCap projects. If
the user attempts to export arms for a classical project, a
data frame will be returned with zero rows.
</p>
<p>Additionally, in order for events to be exported, the project must be
longitudinal, have at least one arm, and at least one event defined.
When these conditions are not satifisfied, <code>exportEvents</code>
will return a data frame with zero rows.
</p>
<p>To import new events, the user must provide data with the
<code>unique_event_name</code> set to <code>NA</code> (REDCap assigns the unique
event name automatically from the user provided <code>event_name</code>).
</p>
<p>To modify existing events, the user must provide the <code>unique_event_name</code>.
The other fields in the data provided will overwrite the current values
for the matching event.
</p>
<p>Deleting events&ndash;whether by <code>deleteEvents</code> or <code>importEvents</code> with
<code>override = TRUE</code>&ndash;is a destructive act that also deletes
arms and records associated with the event. This is irreversible
data loss. REDCap will only permit these actions to occur in projects
in Development status.
</p>


<h3>Value</h3>

<p><code>exportEvents</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   event_name </td><td style="text-align: left;"> The user provided name for the event. </td>
</tr>
<tr>
 <td style="text-align: left;">
   arm_num </td><td style="text-align: left;"> The arm number the event is associated with. </td>
</tr>
<tr>
 <td style="text-align: left;">
   unique_event_name </td><td style="text-align: left;"> The REDCap generated event name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   custom_event_label </td><td style="text-align: left;"> An optional user provided label that may be used in place of the event name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   event_id </td><td style="text-align: left;"> REDCap's internal event identifier. </td>
</tr>
<tr>
 <td style="text-align: left;">
   days_offset </td><td style="text-align: left;"> The number of days since time zero (start of the study or project period) an event is scheduled to occur. This field is only provided when the scheduling module is enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   offset_min </td><td style="text-align: left;"> The number of days before the <code>days_offset</code> during which the event may occur. This field is only provided when the scheduling module is enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   offset_max </td><td style="text-align: left;"> The number of days before the <code>days_offset</code> during which the event may occur. This field is only provided when  the scheduling module is enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importEvents</code> invisibly returns the number of events added or modified.
</p>
<p><code>deleteEvents</code> invisibly returns the number of events deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportEvents()</code>: Export events from a REDCap project.
</p>
</li>
<li> <p><code>importEvents()</code>: Add events to a project or modify existing events.
</p>
</li>
<li> <p><code>deleteEvents()</code>: Delete events from a project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportMappings">exportMappings()</a></code>, <br />
<code><a href="#topic+importMappings">importMappings()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export all events
exportEvents(rcon)

# Export events for a subset of arms
exportEvents(rcon, 
             arms = c(1, 3))
             
# Import new events
NewEvents &lt;- data.frame(event_name = c("Event 1", 
                                       "Event 2"), 
                        arm_num = c(1, 1))
importEvents(rcon, 
             data = NewEvents)
             
# Modify existing events
UpdateEvents &lt;- data.frame(event_name = "Event 2 New Name", 
                           arm_num = 1, 
                           unique_event_name = "event_2_arm_1", 
                           custom_event_label = "The second visit")
importEvents(rcon, 
             data = UpdateEvents)
             
# Replace all events with a new set
NewEvents &lt;- data.frame(event_name = c("Event 1", 
                                       "Event 2", 
                                       "Event 1"), 
                        arm_num = c(1, 1, 2))
importEvents(rcon, 
             data = NewEvents, 
             override = TRUE)
             
# Delete events
deleteEvents(rcon, 
             events = c("event_1_arm_1", "event_1_arm_2"))

## End(Not run)

</code></pre>

<hr>
<h2 id='exportBulkRecords'>A helper function to export multiple records and forms using
a single call.</h2><span id='topic+exportBulkRecords'></span>

<h3>Description</h3>

<p>Exports records from multiple REDCap Databases using
multiple calls to <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportBulkRecords(
  lcon,
  forms = NULL,
  envir = NULL,
  sep = "_",
  post = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportBulkRecords_+3A_lcon">lcon</code></td>
<td>
<p>A named list of connections. The name is used as a prefix for data.frame
names in the environment specified. It may also be used as a reference from the
forms argument.</p>
</td></tr>
<tr><td><code id="exportBulkRecords_+3A_forms">forms</code></td>
<td>
<p>A named list that is a subset of rcon's names. A specified <code>rcon</code>
will provide a list of forms for repeated calls to <code>exportRecordsType</code>.
If a connection reference is missing it will default to all forms. To override
this default specify a connection's forms with NA to just get all
data.</p>
</td></tr>
<tr><td><code id="exportBulkRecords_+3A_envir">envir</code></td>
<td>
<p>A environment to write the resulting Records in as variables
given by their name in rcon or if from a form their rcon named pasted to
their form name joined by <code>sep</code>. If not specified the function
will return a named list with the results. Will accept a number of the
environment.</p>
</td></tr>
<tr><td><code id="exportBulkRecords_+3A_sep">sep</code></td>
<td>
<p>A character string to use when joining the rcon name to the form name
for storing variables.</p>
</td></tr>
<tr><td><code id="exportBulkRecords_+3A_post">post</code></td>
<td>
<p>A function that will run on all returned sets of Records.</p>
</td></tr>
<tr><td><code id="exportBulkRecords_+3A_...">...</code></td>
<td>
<p>Any additional variables to pass to <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Will return a named list of the resulting records if <code>envir</code> is
NULL. Otherwise will assign them to the specified <code>envir</code>.
</p>


<h3>See Also</h3>



<h4>Other records exporting functions</h4>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportRecords">exportRecords()</a></code>, <br />
<code><a href="#topic+exportReports">exportReports()</a></code>
</p>



<h4>Field validations and casting</h4>

<p><code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code>, <br />
<code><a href="#topic+reviewInvalidRecords">reviewInvalidRecords()</a></code>
</p>



<h4>Post-processing functionality</h4>

<p><code><a href="#topic+recastRecords">recastRecords()</a></code>, <br />
<code><a href="#topic+guessCast">guessCast()</a></code>, <br />
<code><a href="#topic+guessDate">guessDate()</a></code>, <br />
<code><a href="#topic+castForImport">castForImport()</a></code>, <br />
<code><a href="#topic+mChoiceCast">mChoiceCast()</a></code>, <br />
<code><a href="#topic+splitForms">splitForms()</a></code>, <br />
<code><a href="#topic+widerRepeated">widerRepeated()</a></code>
</p>



<h4>Vignettes</h4>

<p><code>vignette("redcapAPI-offline-connection")</code><br />
<code>vignette("redcapAPI-casting-data")</code><br />
<code>vignette("redcapAPI-missing-data-detection")</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-data-validation)&#8288;</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-faq)&#8288;</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(c(test_conn    = 'TestRedcapAPI',
               sandbox_conn = 'SandboxAPI'),
             keyring      = 'MyKeyring',
             envir        = globalenv(),
             url          = 'https://&lt;REDCAP_URL&gt;/api/') 

# After user interaction to unlock the local encrypted keyring
# the global environment will contain the REDCap connections
# `test_conn` and `sandbox_conn`
# 
# Next the user wants to bulk specify importing all the forms
# of interest and post process

exportBulkRecords(
 rcon  = list(test = test_conn,
              sand = sandbox_conn),
 forms = list(test = c('form1', 'form2'),
 envir = globalenv(),
 post  = function(Records, rcon)
         {
           Records              |&gt;
           mChoiceCast(rcon)    |&gt;
           guessDat(rcon)       |&gt;
           widerRepeating(rcon)
         }
 )
 
# The environment now contains the data.frames: `test.form1`, `test.form2`, `sand`.
# Each of these were retrieved, possibly using the forms argument and all were
# post processed in the same manner as specified by `post`.

## End(Not run)
</code></pre>

<hr>
<h2 id='exportBundle'>Perform a bundle of API calls.</h2><span id='topic+exportBundle'></span><span id='topic+exportBundle.redcapApiConnection'></span>

<h3>Description</h3>

<p>This function is deprecated and will be removed with the release of
<code>redcapAPI</code> 3.0.0. It's functionality is built into caching of
data onto the <code>redcapConnection</code> object.
</p>
<p>Several of the API calls return objects that can be used to perform
various validations in <code>exportRecords</code>, <code>exportReports</code>, and other
methods.  Using an export bundle allows the user to call these methods once and
store the result instead of issuing an additional call to the API each
time a method is invoked.
</p>
<p>For example, if the user is uploading several files to the API, without an
export bundle, <code>importFiles</code> will utilize the <code>exportMetaData</code>
on each call in order to perform validations.  Using a bundle allows the user
to download the meta data once and refer to it on every subsequent call
that requires the data dictionary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportBundle(
  rcon,
  date = TRUE,
  label = TRUE,
  meta_data = TRUE,
  users = TRUE,
  instruments = TRUE,
  events = TRUE,
  arms = TRUE,
  mappings = TRUE,
  version = TRUE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportBundle(
  rcon,
  date = TRUE,
  label = TRUE,
  meta_data = TRUE,
  users = TRUE,
  instruments = TRUE,
  events = TRUE,
  arms = TRUE,
  mappings = TRUE,
  version = TRUE,
  ...,
  return_object = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportBundle_+3A_rcon">rcon</code></td>
<td>
<p>A REDCap connection object as generated by <code>redcapConnection</code></p>
</td></tr>
<tr><td><code id="exportBundle_+3A_date">date</code></td>
<td>
<p>Logical. If <code>TRUE</code>, user expiration dates are converted to
<code>POSIXct</code> objects.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_label">label</code></td>
<td>
<p>Logical.  If <code>TRUE</code>, the user form permissions are
converted to labeled factors.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_meta_data">meta_data</code></td>
<td>
<p>Logical.  Indicates if the meta data (data dictionary)
should be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_users">users</code></td>
<td>
<p>Logical. Indicates if the users table should be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_instruments">instruments</code></td>
<td>
<p>Logical. Indicates if the instruments table should be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_events">events</code></td>
<td>
<p>Logical. Indicates if the event names should be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_arms">arms</code></td>
<td>
<p>Logical. Indicates if the arms table should be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_mappings">mappings</code></td>
<td>
<p>Logical. Indicates if the form-event mappings should
be exported.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_version">version</code></td>
<td>
<p>Indicates if the REDCap version number should be exported.
Only applicable in REDCap 6.0.0 and higher.</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to other methods</p>
</td></tr>
<tr><td><code id="exportBundle_+3A_return_object">return_object</code></td>
<td>
<p>Logical.  When <code>TRUE</code>, the <code>exportBundle</code> object
is returned to the workspace.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The project information is stored in the option
<code>redcap_project_info</code>.  If the project is not longitudinal, the
events, arms, and event-form mappings elements will be assigned character
vectors instead of data frames.
</p>

<hr>
<h2 id='exportExternalCoding'>Export Codebook Mappings for Fields with External Dependencies</h2><span id='topic+exportExternalCoding'></span><span id='topic+exportExternalCoding.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable <code>redcapAPI</code> to obtain a mapping of
codes and associated labels for fields that have external dependencies.
The fields include SQL fields (dependent on another project) or
fields that utilize the BioPortal Ontology modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportExternalCoding(rcon, fields, ...)

## S3 method for class 'redcapApiConnection'
exportExternalCoding(
  rcon,
  fields = NULL,
  ...,
  batch_size = 1000,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportExternalCoding_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_fields">fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. Vector of fields to be returned.  If <code>NULL</code>,
all fields are returned (unless <code>forms</code> is specified).</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_batch_size">batch_size</code></td>
<td>
<p><code>integerish(1)</code> or <code>NULL</code>. When <code>NULL</code>,
all records are pulled. Otherwise, the records all pulled in batches of this size.</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportExternalCoding_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These methods operate by executing two API calls to export first the
coded values and then the labeled values of fields with external
dependencies. The two exports are then used to generate the code-label
mappings for use in casting data.
</p>
<p>Fields of type <code>sql</code> are dropdown fields that are populated by a SQL
query to another project.
</p>
<p>Fields of type <code>bioportal</code> are text fields that have the BioPortal
Ontology module enabled as the validation method.
</p>


<h3>Value</h3>

<p>Returns a named list of named character vectors.
</p>
<p>Each element is in the list is named for the field it maps.
</p>
<p>The character vectors are name-value pairs where the name is the labeled
data and the value is the coded data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
exportExternalCoding(rcon)

## End(Not run)
  
</code></pre>

<hr>
<h2 id='exportFieldNames'>Export the Complete Field Names for a REDCap Project</h2><span id='topic+exportFieldNames'></span><span id='topic+exportFieldNamesArgs'></span><span id='topic+exportFieldNames.redcapApiConnection'></span>

<h3>Description</h3>

<p>This method enables the user to access the complete field
names utilized during export and import methods. These are expecially
relevant when working with checkbox fields.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFieldNames(rcon, ...)

## S3 method for class 'redcapApiConnection'
exportFieldNames(
  rcon,
  fields = character(0),
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportFieldNames_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportFieldNames_+3A_fields">fields</code></td>
<td>
<p><code>NULL</code> or <code>character(1)</code>. Field name to be returned.  By
default, all fields are returned.</p>
</td></tr>
<tr><td><code id="exportFieldNames_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportFieldNames_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportFieldNames_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportFieldNames_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exportFieldNames</code> returns a data frame of the field names the user
may use when performing export and import functions. This is most useful
when working with checkbox fields, which have a different field name than
the one used in the Meta Data. The exported/imported field names for
checkbox fields have the pattern <code style="white-space: pre;">&#8288;[field_name]___[coded_checkbox_value]&#8288;</code>
(there are exactly three underscores separating the field name and the
coded value).
</p>
<p>Fields of types &quot;calc&quot;, &quot;file&quot;, and &quot;descriptive&quot; are not included in the
export. (Signature fields also have the &quot;file&quot; type and are not included)
</p>


<h3>Value</h3>

<p><code>exportFieldNames</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>original_field_name</code> </td><td style="text-align: left;"> The field name as recorded in the data dictionary </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice_value</code> </td><td style="text-align: left;"> represents the raw coded value for a checkbox choice. For non-checkbox fields, this will always be <code>NA</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>export_field_name</code> </td><td style="text-align: left;"> The field name specific to the field. For non-checkbox fields, this is the same as <code>original_field_name</code>. For checkbox fields, it is the field name appended with <code style="white-space: pre;">&#8288;___[choice_value]&#8288;</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+exportMetaData">exportMetaData()</a></code>,<br />
<code><a href="#topic+importMetaData">importMetaData()</a></code>, <br />
<code><a href="#topic+exportInstruments">exportInstruments()</a></code>,<br />
<code><a href="#topic+exportMappings">exportMappings()</a></code>,<br />
<code><a href="#topic+importMappings">importMappings()</a></code>, <br />
<code><a href="#topic+exportPdf">exportPdf()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export all of the field names
exportFieldNames(rcon)

# Export MetaData for a specific field
exportFieldNames(rcon, 
                 fields = "checkbox_test")

## End(Not run)
</code></pre>

<hr>
<h2 id='exportFileRepositoryListing'>Export a Listing of Folders and Files in the File Repository</h2><span id='topic+exportFileRepositoryListing'></span><span id='topic+exportFileRepositoryListing.redcapApiConnection'></span>

<h3>Description</h3>

<p>This method enables the user to export a list of folders
and files saved to the File Repository. The listing may optionally
include contents of subfolders.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFileRepositoryListing(
  rcon,
  folder_id = numeric(0),
  recursive = FALSE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportFileRepositoryListing(
  rcon,
  folder_id = numeric(0),
  recursive = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportFileRepositoryListing_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_folder_id">folder_id</code></td>
<td>
<p><code>integerish(0/1)</code>. The
folder ID of a specific folder in the File Repository for which a list of
files and subfolders will be exported.
By default, the top-level directory of the File Repository will be used.</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_recursive">recursive</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, content of subfolders
will be retrieved until a full listing is produced. If <code>FALSE</code>,
only the contents of the requested folder will be returned.</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportFileRepositoryListing_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the columns</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>folder_id</code> </td><td style="text-align: left;"> The REDCap assigned ID value for the folder. Will be <code>NA</code> if the item is a file. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>doc_id</code> </td><td style="text-align: left;"> The REDCap assigned ID value for the file. Will be <code>NA</code> if the item is a folder. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>name</code> </td><td style="text-align: left;"> The name of the folder of file. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>parent_folder</code> </td><td style="text-align: left;"> The ID of the parent folder of the item. The top-level folder is represented as 0. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+exportFromFileRepository">exportFromFileRepository()</a></code>, <br />
<code><a href="#topic+importToFileRepository">importToFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFromFileRepository">deleteFromFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepository">exportFileRepository()</a></code>, <br />
<code><a href="#topic+importFileRepository">importFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFileRepository">deleteFileRepository()</a></code>, <br />
<code><a href="#topic+createFileRepositoryFolder">createFileRepositoryFolder()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export the top-level listing of the File Repository
exportFileRepositoryListing(rcon)

# Export the complete listing of the File Repository
exportFileRepositoryListing(rcon, 
                            recursive = TRUE)
                            
# Export the listing of a subfolder in the File Repository
exportFileRepositoryListing(rcon, 
                            folder_id = 12345)

## End(Not run)

</code></pre>

<hr>
<h2 id='exportFilesMultiple'>Export Multiple Files From a Project</h2><span id='topic+exportFilesMultiple'></span><span id='topic+exportFilesMultiple.redcapApiConnection'></span>

<h3>Description</h3>

<p>This method enables the user to export multiple files from
a REDCap project with a single call. The REDCap API only allows for one
file to be exported per call, and the <code><a href="#topic+exportFiles">exportFiles()</a></code> methods are written
to mirror that limitation. This extension allows the user to pass
vectors of arguments for records, fields, events, or repeat instances.
Files that can be matched to any combination of these values will
be exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFilesMultiple(
  rcon,
  record,
  field,
  event = NULL,
  dir,
  file_prefix = TRUE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportFilesMultiple(
  rcon,
  record,
  field,
  event = NULL,
  dir,
  file_prefix = TRUE,
  repeat_instance = NULL,
  ...,
  quiet = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportFilesMultiple_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_record">record</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. The record ID in
which the desired file is stored.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_field">field</code></td>
<td>
<p><code>character</code>. The field name in which the file is stored.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_event">event</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. The event name for the file.
This applies only to longitudinal projects.  If the event is not
supplied for a longitudinal project, the API will return an error message</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. A directory/folder to which the file
will be saved. By default, the working directory is used.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_file_prefix">file_prefix</code></td>
<td>
<p><code>logical(1)</code>.  Determines if a prefix is appended
to the file name.  The prefix takes the form <code style="white-space: pre;">&#8288;[record_id]-[event_name]-[file_name]&#8288;</code>.
The file name is always the same name of the file as it exists in REDCap.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_repeat_instance">repeat_instance</code></td>
<td>
<p><code>integerish</code> or <code>NULL</code>. The repeat instance number of
the repeating event or the repeating instrument. When available in your
instance of REDCap, and passed as <code>NULL</code>, the API will assume a value of 1.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_quiet">quiet</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, any errors encountered while
exporting files will be converted to messages.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportFilesMultiple_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exportFilesMultiple</code> will construct all combinations of
the <code>record</code>, <code>field</code>, <code>event</code>, and <code>repeat_instance</code> arguments and
attempt to export the file associated with each combination. Should any
of these combinations produce an error (for example, if a record does not
have a third repeat instance), the error is captured and returned
with the output.
</p>


<h3>Value</h3>

<p>Invisibly returns a <code>data.frame</code> with the following columns:</p>

<table>
<tr>
 <td style="text-align: left;">
   Column </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record</code> </td><td style="text-align: left;"> The record ID </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field</code> </td><td style="text-align: left;"> The name of the field in which the file is stored. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>event</code> </td><td style="text-align: left;"> The name of the event associated with the file. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>repeat_instance</code> </td><td style="text-align: left;"> For repeat instances, the instance associated with the file. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>is_exported</code> </td><td style="text-align: left;"> <code>logical</code> indicating if the file was successfully exported. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>saved_to</code> </td><td style="text-align: left;"> The file path to which the file was saved. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>error</code> </td><td style="text-align: left;"> If an error was encountered, the text of the error. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+exportFiles">exportFiles()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
save_to_dir &lt;- tempdir() 

# Export files for multiple records
# Results are returned invisibly - saving to an object is
#   helpful to be able to view the results

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1:4, 
                      field = "file_upload_field", 
                      event = "event_1_arm_1", 
                      dir = save_to_dir)
Export 
                    
# Export files for multiple instances

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1, 
                      field = "file_upload_field", 
                      event = "event_1_arm_1", 
                      repeat_instance = 1:4, 
                      dir = save_to_dir)
Export
                    
# Export files for multiple records, fields, events, and instances

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1:10, 
                      field = c("registration", "waiver"), 
                      events = c("event_1_arm_1", "event_2_arm_1"), 
                      repeat_instance = 1:3, 
                      dir = save_to_dir)
Export

## End(Not run)


</code></pre>

<hr>
<h2 id='exportInstruments'>Export Instruments Defined in a Project</h2><span id='topic+exportInstruments'></span><span id='topic+exportInstruments.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to view the instruments defined
in the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportInstruments(rcon, ...)

## S3 method for class 'redcapApiConnection'
exportInstruments(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportInstruments_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportInstruments_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportInstruments_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportInstruments_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportInstruments_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>instrument_name</code> </td><td style="text-align: left;"> The REDCap generated instrument name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>instrument_label</code> </td><td style="text-align: left;"> The user provided instrument label. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+exportMetaData">exportMetaData()</a></code>,<br />
<code><a href="#topic+importMetaData">importMetaData()</a></code>, <br />
<code><a href="#topic+exportInstruments">exportInstruments()</a></code>,<br />
<code><a href="#topic+exportMappings">exportMappings()</a></code>,<br />
<code><a href="#topic+importMappings">importMappings()</a></code>, <br />
<code><a href="#topic+exportPdf">exportPdf()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
 
exportInstruments(rcon)

## End(Not run)

</code></pre>

<hr>
<h2 id='exportLogging'>Export Logging Records</h2><span id='topic+exportLogging'></span><span id='topic+exportLogging.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable to user to export the logging
(audit trail) of all changes made to a project, including data exports,
data changes, project metadata changes, modification of user rights, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportLogging(
  rcon,
  logtype = character(0),
  user = character(0),
  record = character(0),
  dag = character(0),
  beginTime = .POSIXct(character(0)),
  endTime = .POSIXct(character(0)),
  ...
)

## S3 method for class 'redcapApiConnection'
exportLogging(
  rcon,
  logtype = character(0),
  user = character(0),
  record = character(0),
  dag = character(0),
  beginTime = as.POSIXct(character(0)),
  endTime = as.POSIXct(character(0)),
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportLogging_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_logtype">logtype</code></td>
<td>
<p><code>character(0/1)</code>. The log event types to export.
When the length is zero, all event types are exported. Otherwise, it
must be one of
<code>c("export", "manage", "user", "record", "record_add", "record_edit", "record_delete", "lock_record", "page_view")</code></p>
</td></tr>
<tr><td><code id="exportLogging_+3A_user">user</code></td>
<td>
<p><code>character(0/1)</code>. Users for whom to return logs. By default
logs for all users are returned.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_record">record</code></td>
<td>
<p><code>character(0/1)</code>. Record ID for which logs are to be returned.
By default, logs are returned for all records.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_dag">dag</code></td>
<td>
<p><code>character(0/1)</code>. Data access group ID for which to return logs.
By default, logs are returned for all data access groups.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_begintime">beginTime</code></td>
<td>
<p><code>POSIXct(0/1)</code>. When given, only
logs recorded after this time will be returned.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_endtime">endTime</code></td>
<td>
<p><code>POSIXct(0/1)</code>. When given, only logs
recorded before this time will be returned.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportLogging_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with columns</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>timestamp</code> </td><td style="text-align: left;"> The date/time of the logging record. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>username</code> </td><td style="text-align: left;"> The user name of the user that performed the action being logged. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>action</code> </td><td style="text-align: left;"> The classification of action being logged. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>details</code> </td><td style="text-align: left;"> Details of the action being logged. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record</code> </td><td style="text-align: left;"> The record ID associated with the action being logged. When not related to a record, this will be <code>NA</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
                    
# Export all of the logging events       
exportLogging(rcon)
  
# Export all of the events for record '2'
exportLogging(rcon, 
              record = "2")
                
# Export all of the events where a record was deleted
exportLoging(rcon, 
             logtype = "record_delete")

## End(Not run)
</code></pre>

<hr>
<h2 id='exportPdf'>Export PDF file of Data Collection Instruments</h2><span id='topic+exportPdf'></span><span id='topic+exportPdf.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods allow the user to download PDF files of
data collection instruments.  The download may be with or without
collected data; and may return a single record, multiple records,
or all records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportPdf(
  rcon,
  dir,
  filename = "redcap_forms_download",
  record = NULL,
  events = NULL,
  instruments = NULL,
  all_records = FALSE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportPdf(
  rcon,
  dir,
  filename = "redcap_forms_download",
  record = NULL,
  events = NULL,
  instruments = NULL,
  all_records = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportPdf_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. The directory into which the file
should be saved.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_filename">filename</code></td>
<td>
<p><code>character(1)</code>. The base of the file name.  When
<code>record = NULL</code>, it will be appended with <code>"_blank.pdf"</code>.  When
<code>record</code> has a value, it will be appended with <code>"_record_[record id].pdf"</code></p>
</td></tr>
<tr><td><code id="exportPdf_+3A_record">record</code></td>
<td>
<p><code>character(1)</code>, <code>integerish(1)</code>, or <code>NULL</code>.
The record id for which forms should be downloaded.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_events">events</code></td>
<td>
<p><code>character</code>. The events for which forms should be downloaded</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_instruments">instruments</code></td>
<td>
<p><code>character</code>. The instruments for which forms
should be downloaded</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_all_records">all_records</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> forms for all records
are downloaded. When <code>TRUE</code>, this overrides the <code>records</code> argument.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportPdf_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These methods mimics the behavior of &quot;Download PDF of Instruments&quot; button on the
REDCap user interface. They permit the user to export a PDF file for:
</p>

<ol>
<li><p> A single collection instrument (blank)c
</p>
</li>
<li><p> All instruments (blank)
</p>
</li>
<li><p> A single instrument (with data from a single record)c
</p>
</li>
<li><p> All instruments (with data from a single record)
</p>
</li>
<li><p> All instruments (with data from all records)
</p>
</li></ol>



<h3>Value</h3>

<p><code>exportPdf</code> invisibly returns the location on the local system
to whihc the files is saved.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportMetaData">exportMetaData()</a></code>,<br />
<code><a href="#topic+importMetaData">importMetaData()</a></code>, <br />
<code><a href="#topic+exportFieldNames">exportFieldNames()</a></code>, <br />
<code><a href="#topic+exportInstruments">exportInstruments()</a></code>,<br />
<code><a href="#topic+exportMappings">exportMappings()</a></code>,<br />
<code><a href="#topic+importMappings">importMappings()</a></code>
</p>

<hr>
<h2 id='exportProjectXml'>Export Entire Project as REDCap XML File</h2><span id='topic+exportProjectXml'></span><span id='topic+exportProjectXml.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export a project's settings
as an XML file in CDISC ODM format. This file may be used to transfer
the project to another project, REDCap instance, or any other
CDISC ODM compliant database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportProjectXml(
  rcon,
  file,
  return_metadata_only = TRUE,
  records = NULL,
  fields = NULL,
  events = NULL,
  survey = FALSE,
  dag = FALSE,
  export_files = FALSE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportProjectXml(
  rcon,
  file,
  return_metadata_only = TRUE,
  records = NULL,
  fields = NULL,
  events = NULL,
  survey = FALSE,
  dag = FALSE,
  export_files = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportProjectXml_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_file">file</code></td>
<td>
<p><code>character(1)</code> The file to which the XML export will be
saved.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_return_metadata_only">return_metadata_only</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> (default)
only meta data values are returned. When <code>FALSE</code>, project records
data are also exported.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_records">records</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. A vector of study id's
to be returned.  When <code>NULL</code>, all subjects are returned.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_fields">fields</code></td>
<td>
<p><code>character</code>. Vector of fields to be returned.  When <code>NULL</code>,
all fields are returned (unless <code>forms</code> is specified).</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_events">events</code></td>
<td>
<p>A <code>character</code>. Vector of events to be returned from a
longitudinal database.  When <code>NULL</code>, all events are returned.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_survey">survey</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the survey identifier fields
(e.g., <code>redcap_survey_identifier</code>) or survey timestamp fields
(e.g., <code style="white-space: pre;">&#8288;[form_name]_timestamp&#8288;</code>) will be included in the export
when surveys are utilized in the project.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_dag">dag</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the <code>redcap_data_access_group</code>
field is exported when data access groups are utilized in the project.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_export_files">export_files</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> will cause the XML returned
to include all files uploaded for File Upload and Signature fields
for all records in the project. Setting this option to <code>TRUE</code> can
make the export very large and may prevent it from completing if the
project contains many files or very large files.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportProjectXml_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The entire project (all records, events, arms, instruments,
fields, and project attributes) can be downloaded as a single XML
file, which is in CDISC ODM format (ODM version 1.3.1). This XML
file can be used to create a clone of the project (including its data,
optionally) on this REDCap server or on another REDCap server
(it can be uploaded on the Create New Project page). Because it is in
CDISC ODM format, it can also be used to import the project into
another ODM-compatible system.
</p>
<p>When the <code>return_metadata_only</code> parameter is set to <code>FALSE</code>, the
Data Export user rights will be applied to any data returned. For example,
if the user has 'De-Identified' or 'Remove All Identifier Fields'
data export rights, then some data fields might be removed and
filtered out of the data set. To make sure that no data is
unnecessarily filtered out of the API request, the user should have
'Full Data Set' export rights in the project.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createRedcapProject">createRedcapProject()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "token_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
xml_file &lt;- tempfile(file.ext = ".xml")
exportProjectXml(rcon, 
                 file = xml_file)

## End(Not run)

  
  
</code></pre>

<hr>
<h2 id='exportVersion'>Export the REDCap Version Number</h2><span id='topic+exportVersion'></span><span id='topic+exportVersion.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export the REDCap instance
version number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportVersion(rcon, ...)

## S3 method for class 'redcapApiConnection'
exportVersion(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportVersion_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="exportVersion_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="exportVersion_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="exportVersion_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="exportVersion_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character value giving the version number.
</p>
<p>IF this function is used in a version of REDCap that does not support
the method (prior to version 6.0.0), the value &quot;5.12.2&quot; will be returned.
This is done solely for the convenience of always returning a value
that can be compared against other versions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export the version number
exportVersion(rcon)

## End(Not run)

</code></pre>

<hr>
<h2 id='Extraction'>Extraction and Assignment for <code>redcapFactor</code>s</h2><span id='topic+Extraction'></span><span id='topic++5B.redcapFactor'></span><span id='topic+print.redcapFactor'></span>

<h3>Description</h3>

<p>Extract elements and make assignments to <code>redcapFactor</code>s
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'redcapFactor'
x[..., drop = FALSE]

## S3 method for class 'redcapFactor'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extraction_+3A_x">x</code></td>
<td>
<p>an object of class <code>redcapFactor</code></p>
</td></tr>
<tr><td><code id="Extraction_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="Extraction_+3A_drop">drop</code></td>
<td>
<p><code>logical</code>. If <code>TRUE</code>, unused levels are dropped.</p>
</td></tr>
</table>

<hr>
<h2 id='fieldCastingFunctions'>Functions for Casting Fields After Export (Post Processing)</h2><span id='topic+fieldCastingFunctions'></span><span id='topic+recastRecords'></span><span id='topic+castForImport'></span><span id='topic+guessCast'></span><span id='topic+guessDate'></span><span id='topic+mChoiceCast'></span>

<h3>Description</h3>

<p>The functions provided here allow for recasting fields
after records have been exported. They generally have a similar
interface to the casting strategy of <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>,
though they may not each offer all the same options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recastRecords(
  data,
  rcon,
  fields,
  cast = list(),
  suffix = "",
  warn_zero_coded = TRUE
)

castForImport(
  data,
  rcon,
  fields = NULL,
  na = list(),
  validation = list(),
  cast = list(),
  warn_zero_coded = TRUE
)

guessCast(
  data,
  rcon,
  na = isNAorBlank,
  validation,
  cast,
  quiet = FALSE,
  threshold = 0.8
)

guessDate(
  data,
  rcon,
  na = isNAorBlank,
  validation = valRx("^[0-9]{1,4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$"),
  cast = function(x, ...) as.POSIXct(x, format = "%Y-%m-%d"),
  quiet = FALSE,
  threshold = 0.8
)

mChoiceCast(data, rcon, style = "labelled", drop_fields = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fieldCastingFunctions_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with the data fields to be recoded.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_fields">fields</code></td>
<td>
<p><code>character/logical/integerish</code>. A vector for identifying
which fields to recode. When <code>logical</code>, the length must match
the number of columns in <code>data</code> (i.e., recycling not permitted).
A message is printed if any of the indicated fields are not a
multiple choice field; no action will be taken on such fields.
For this function, yes/no and true/false fields are considered
multiple choice fields. Fields of class <code>mChoice</code> are quietly skipped.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_cast">cast</code></td>
<td>
<p>A named <code>list</code> of user specified class casting functions. The
same named keys are supported as the na argument. The function will be
provided the variables (x, field_name, coding). The function must return a
vector of logical matching the input length. The cast should match the validation,
if one is using <code>raw_cast</code>, then <code>validation=skip_validation</code> is likely
the desired intent. See <code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code></p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_suffix">suffix</code></td>
<td>
<p><code>character(1)</code>. An optional suffix to provide if
the recoded variables should be returned as new columns. For example,
if recoding a field <code>forklift_brand</code> and <code>suffix = "_labeled"</code>,
the result will have one column with the coded values
(<code>forklift_brand</code>) and one column with the labeled values
(<code>forklift_brand_labeled</code>).</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_warn_zero_coded">warn_zero_coded</code></td>
<td>
<p>logical(1). Turn on or off warnings about zero coded fields. Default is TRUE.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_na">na</code></td>
<td>
<p>A named <code>list</code> of user specified functions to determine if the
data is NA. This is useful when data is loaded that has coding for NA, e.g.
-5 is NA. Keys must correspond to a truncated REDCap field type, i.e.
date_, datetime_, datetime_seconds_, time_mm_ss, time_hh_mm_ss, time, float,
number, calc, int, integer, select, radio, dropdown, yesno, truefalse,
checkbox, form_complete, sql, system. The function will be provided the
variables (x, field_name, coding). The function must return a vector of
logicals matching the input. It defaults to <code><a href="#topic+isNAorBlank">isNAorBlank()</a></code> for all
entries.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_validation">validation</code></td>
<td>
<p>A named <code>list</code> of user specified validation functions. The
same named keys are supported as the na argument. The function will be
provided the variables (x, field_name, coding). The function must return a
vector of logical matching the input length. Helper functions to construct
these are <code><a href="#topic+valRx">valRx()</a></code> and <code><a href="#topic+valChoice">valChoice()</a></code>. Only fields that
are not identified as NA will be passed to validation functions.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_quiet">quiet</code></td>
<td>
<p>Print no messages if triggered, Default=FALSE.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_threshold">threshold</code></td>
<td>
<p>numeric(1). The threshold of non-NA data to trigger casting.</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_style">style</code></td>
<td>
<p>character. One of &quot;labelled&quot; or &quot;coded&quot;. Default is &quot;labelled&quot;</p>
</td></tr>
<tr><td><code id="fieldCastingFunctions_+3A_drop_fields">drop_fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. A vector of field names to remove from
the data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>recastRecords</code> is a post-processing function motivated
initially by the need to switch between codes and labels in multiple
choice fields. Field types for which no casting function is specified will
be returned with no changes. It will not attempt to validate the content
of fields; fields that cannot be successfully cast will be quietly
returned as missing values.
</p>
<p><code>castForImport</code> is written with defaults that will return data
in a format ready to be imported to a project via <code>importRecords</code>.
All fields are returned as character vectors. If any values fail to
validation check, are report is returned as an attribute named <code>invalid</code>.
This attribute may be retrieved using <code><a href="#topic+reviewInvalidRecords">reviewInvalidRecords()</a></code>.
These are then set to <code>NA</code>, which will be imported as blanks through
the API.
</p>
<p><code>guessCast</code> is a helper function to make a guess at casting uncast
columns. It will do a type cast if a validation is met above
a threshold ratio of non-NA records. It modifies the existing
<code>invalid</code> attribute to reflect the cast.
This attribute may be retrieved using <code><a href="#topic+reviewInvalidRecords">reviewInvalidRecords()</a></code>.
<code>guessDate</code> is a special cast of <code>guessCast</code> that has defaults set for casting
a date field.
</p>
<p><code>mChoiceCast</code> is a helper function that adds the <code>Hmisc::mChoice</code>
multiple choice class. It adds a column for a multiple choice checkbox
that is cast to the <code>Hmisc::mChoice</code> class. Requires <code>Hmisc</code>
to be loaded.
</p>


<h3>Zero-Coded Check Fields</h3>

<p>A zero-coded check field is a field of the REDCap type <code>checkbox</code> that has
a coding definition of <code style="white-space: pre;">&#8288;0, [label]&#8288;</code>. When exported, the field names for
these fields is <code style="white-space: pre;">&#8288;[field_name]___0&#8288;</code>. As in other checkbox fields, the
raw data output returns binary values where 0 represent an unchecked
box and 1 represents a checked box. For zero-coded checkboxes, then, a
value of 1 indicates that 0 was selected.
</p>
<p>This coding rarely presents a problem when casting from raw values
(as is done in <code>exportRecordsTyped</code>). However, casting from coded or
labeled values can be problematic. In this case, it becomes
indeterminate from context if the intent of <code>0</code> is 'false' or the coded
value '0' ('true') ...
</p>
<p>The situations in which casting may fail to produce the desired results are</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td><td style="text-align: left;"> Result </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> anything other than "0" </td><td style="text-align: left;"> Likely to fail when casting from coded values </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> 0 </td><td style="text-align: left;"> Likely to fail when casting from coded or labeled values </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Because of the potential for miscast data, casting functions will issue
a warning anytime a zero-coded check field is encountered. A separate
warning is issued when a field is cast from coded or labeled values.
</p>
<p>When casting from coded or labeled values, it is strongly recommended that
the function <code><a href="#topic+castCheckForImport">castCheckForImport()</a></code> be used. This function permits the
user to state explicitly which values should be recognized as checked,
avoiding the ambiguity resulting from the coding.
</p>


<h3>See Also</h3>



<h4>Exporting records</h4>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>, <br />
<code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code>, <br />
<code><a href="#topic+reviewInvalidRecords">reviewInvalidRecords()</a></code>
</p>



<h4>Other Post Processing Functions</h4>

<p><code><a href="#topic+splitForms">splitForms()</a></code>, <br />
<code><a href="#topic+widerRepeated">widerRepeated()</a></code>
</p>



<h4>Vignettes</h4>

<p><code>vignette("redcapAPI-offline-connection", package = "redcapAPI")</code><br />
<code>vignette("redcapAPI-casting-data")</code><br />
<code>vignette("redcapAPI-missing-data-detection")</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-data-validation)&#8288;</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Using recastRecords after export
Recs &lt;- 
  exportRecordsTyped(rcon) |&gt;
  recastRecords(rcon, 
                fields = "dropdown_test",
                cast = list(dropdown = castCode))
                
                
# Using castForImport
castForImport(Records, 
              rcon)
              
              
# Using castForImport to recast zero-coded checkbox values
castForImport(Records, 
              rcon, 
              cast = list(checkbox = castCheckForImport(c("0", "Unchecked"))))


# Using guessCast
exportRecordsTyped(rcon,
                   validation=skip_validation,
                   cast = raw_cast) |&gt; 
  guessCast(rcon, 
            validation=valRx("^[0-9]{1,4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$"), 
            cast=as.Date,
            threshold=0.6)
            
            
# Using mChoiceCast
exportRecordsTyped(rcon) |&gt; 
  mChoiceCast(rcon)


## End(Not run)


</code></pre>

<hr>
<h2 id='fieldChoiceMapping'>Split a Field Choice Mapping Into a Two Column Matrix</h2><span id='topic+fieldChoiceMapping'></span><span id='topic+fieldChoiceMapping.character'></span><span id='topic+fieldChoiceMapping.redcapApiConnection'></span>

<h3>Description</h3>

<p>Uses the string from the <code>select_choices_or_calculations</code>
for the meta data to create a matrix of codes and their mapped
labels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fieldChoiceMapping(object, field_name, ...)

## S3 method for class 'character'
fieldChoiceMapping(object, field_name, ...)

## S3 method for class 'redcapApiConnection'
fieldChoiceMapping(object, field_name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fieldChoiceMapping_+3A_object">object</code></td>
<td>
<p><code>redcapConnection</code> or <code>character(1)</code>. When <code>character</code>, is
matches the format of the meta data field choices
(i.e. <code>rcon$meta_data()$select_choices_or_calculations</code>).</p>
</td></tr>
<tr><td><code id="fieldChoiceMapping_+3A_field_name">field_name</code></td>
<td>
<p><code>character(1)</code> gives the field name for which to
make the choice mapping.</p>
</td></tr>
<tr><td><code id="fieldChoiceMapping_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a matrix with two columns, <code>choice_value</code> and <code>choice_label</code>
</p>

<hr>
<h2 id='fieldToVar'>Convert a REDCap Data Field to an R Vector</h2><span id='topic+fieldToVar'></span>

<h3>Description</h3>

<p>Converts a field exported from REDCap into a valid R vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fieldToVar(
  records,
  meta_data,
  factors = TRUE,
  dates = TRUE,
  checkboxLabels = FALSE,
  labels = TRUE,
  handlers = list(),
  mChoice = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fieldToVar_+3A_records">records</code></td>
<td>
<p>A data frame of records returned by <code>exportRecords</code>
or <code>exportReports</code></p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_meta_data">meta_data</code></td>
<td>
<p>A data frame giving the data dictionary, as returned
by <code>exportMetaData</code></p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_factors">factors</code></td>
<td>
<p>Logical, determines if checkbox, radio button, dropdown and yesno
variables are converted to factors</p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_dates">dates</code></td>
<td>
<p>Logical, determines if date variables are converted to POSIXct format</p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_checkboxlabels">checkboxLabels</code></td>
<td>
<p>Logical, determines if checkbox variables are labeled as
&quot;Checked&quot; or using the checkbox label.  Only applicable when <code>factors = TRUE</code></p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_labels">labels</code></td>
<td>
<p>Logical.  Determines if the variable labels are applied to
the data frame.</p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_handlers">handlers</code></td>
<td>
<p>List, Specify type conversion overrides for specific REDCap field types.
E.g., <code>handlers=list(date_ = as.Date)</code>. For datetime specifications the
datetime ordering directive from the tail is dropped. The following field
types are supported: date_, datetime_, datetime_seconds_, time_mm_ss, time,
float, number, calc, int, integer, select, radio, dropdown, yesno, truefalse,
checkbox, and form_complete.</p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_mchoice">mChoice</code></td>
<td>
<p>logical; defaults to TRUE. Convert checkboxes to mChoice if
Hmisc is installed.</p>
</td></tr>
<tr><td><code id="fieldToVar_+3A_...">...</code></td>
<td>
<p>additional arguments that are ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is called internally by <code>exportRecords</code> and
<code>exportReports</code>.  it is not available to the user.
</p>

<hr>
<h2 id='fieldValidationAndCasting'>Helper functions for <code>exportRecordsTyped</code> Validation and Casting</h2><span id='topic+fieldValidationAndCasting'></span><span id='topic+isNAorBlank'></span><span id='topic+valRx'></span><span id='topic+valChoice'></span><span id='topic+valPhone'></span><span id='topic+valSkip'></span><span id='topic+na_values'></span><span id='topic+castLabel'></span><span id='topic+castLabelCharacter'></span><span id='topic+castCode'></span><span id='topic+castCodeCharacter'></span><span id='topic+castRaw'></span><span id='topic+castChecked'></span><span id='topic+castCheckedCharacter'></span><span id='topic+castCheckLabel'></span><span id='topic+castCheckLabelCharacter'></span><span id='topic+castCheckCode'></span><span id='topic+castCheckCodeCharacter'></span><span id='topic+castCheckForImport'></span><span id='topic+castDpNumeric'></span><span id='topic+castDpCharacter'></span><span id='topic+castTimeHHMM'></span><span id='topic+castTimeMMSS'></span><span id='topic+castLogical'></span><span id='topic+raw_cast'></span><span id='topic+default_cast_no_factor'></span><span id='topic+default_cast_character'></span><span id='topic+skip_validation'></span>

<h3>Description</h3>

<p>This set of functions assists in validating that the content of
fields coming from REDCap match the MetaData, allowing for a
validation report to provided. The cast helpers allow for transforming
the REDCap data into R data types and allowing the user to customize
the end product.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isNAorBlank(x, ...)

valRx(rx)

valChoice(x, field_name, coding)

valPhone(x, field_name, coding)

valSkip(x, field_name, coding)

na_values(FUN)

castLabel(x, field_name, coding)

castLabelCharacter(x, field_name, coding)

castCode(x, field_name, coding)

castCodeCharacter(x, field_name, coding)

castRaw(x, field_name, coding)

castChecked(x, field_name, coding)

castCheckedCharacter(x, field_name, coding)

castCheckLabel(x, field_name, coding)

castCheckLabelCharacter(x, field_name, coding)

castCheckCode(x, field_name, coding)

castCheckCodeCharacter(x, field_name, coding)

castCheckForImport(checked = c("Checked", "1"))

castDpNumeric(dec_symbol = ",")

castDpCharacter(n_dec, dec_symbol = ",")

castTimeHHMM(x, field_name, coding)

castTimeMMSS(x, field_name, coding)

castLogical(x, field_name, coding)

raw_cast

default_cast_no_factor

default_cast_character

skip_validation
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fieldValidationAndCasting_+3A_x">x</code></td>
<td>
<p><code>character</code>. A vector to check.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_...">...</code></td>
<td>
<p>Consumes anything else passed to function. I.e., field_name and
coding.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_rx">rx</code></td>
<td>
<p><code>character</code>. The regular expression pattern to check.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_field_name">field_name</code></td>
<td>
<p><code>character(1)</code>. Name of the field(s)</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_coding">coding</code></td>
<td>
<p>named <code>character</code> vector. The defined coding from the meta data.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_fun">FUN</code></td>
<td>
<p><code>function</code>. A function that takes a character vector.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_checked">checked</code></td>
<td>
<p><code>character</code>. Values to recognize as checked in a
checkbox field.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_dec_symbol">dec_symbol</code></td>
<td>
<p><code>character(1)</code>. The symbol in the field used to
denote a decimal.</p>
</td></tr>
<tr><td><code id="fieldValidationAndCasting_+3A_n_dec">n_dec</code></td>
<td>
<p><code>integerish(1)</code>. The number of decimal places permitted
by the field validation.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 21.
</p>
<p>An object of class <code>list</code> of length 25.
</p>
<p>An object of class <code>list</code> of length 25.
</p>
<p>An object of class <code>list</code> of length 21.
</p>


<h3>Details</h3>

<p>Functions passed to the <code>na</code>, <code>validation</code>, and
<code>cast</code> parameter of <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code> all take the form
of <code style="white-space: pre;">&#8288;function(x, coding, field_name)&#8288;</code>. <code>na</code> and <code>validation</code>
functions are expected to return a logical vector of the same length as the
column processed. Helper routines
are provided here for common cases to construct these functions.
</p>


<h4>Missing Data Detection</h4>

<p><code>na_values</code> is a helper function to create a list of functions
to test for NA based on field type. Useful for bulk override of
NA detection for a project. The output can be directly passed to the <code>na</code>
parameter of <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>.
</p>
<p>Missing data detection is performed ahead of validation. Data that are found
to be missing are excluded from validation reports.
</p>
<p>REDCap users may define project-level missing value codes. If such codes
are defined, they can be seen in Project Setup &gt; Additional Customizations &gt;
Missing Data Codes. They will also be displayed in the project's Codebook.
Project-level missing data codes cannot be accessed via the API, meaning
<code>redcapAPI</code> is unable to assist in determining if a project has any. The
most likely symptom of project-level codes is a high frequency of
values failing validation (See <code>vignette("redcapAPI-missing-data-detection")</code>).
</p>



<h4>Validation Functions</h4>

<p><code>isNAorBlank</code> returns TRUE/FALSE if field is NA or blank. Helper
function for constructing <code>na</code> overrides in <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>.
</p>
<p><code>valRx</code> constructs a validation function from a regular expression pattern.
The function returns a TRUE/FALSE if the value matches the pattern.
</p>
<p><code>valChoice</code> constructs a validation function from a set of choices
defined in the MetaData. The functions returns a TRUE/FALSE if the value
matches one of the choices.
</p>
<p><code>valPhone</code> constructs a validation function for (North American)
phone numbers. It removes punctuation and spaces prior to validating
with the regular expression.
</p>
<p><code>valSkip</code> is a function that supports skipping the validation for
a field type. It returns a <code>TRUE</code> value for each record, regardless
of its value. Validation skipping has occasional utility when importing
certain field types (such as <code>bioportal</code> or <code>sql</code>) where not all of the
eventual choices are available in the project yet.
</p>
<p><code>skip_validation</code> is a list of functions that just returns TRUE for
all data passed in.
</p>



<h4>Casting Functions</h4>

<p><code>castLabel</code> constructs a casting function for multiple choice variables.
The field will be cast to return the choice label (generally more human readable).
<code>castLabelCharacter</code> is an equivalent casting function that returns
a <code>character</code> vector instead of a <code>factor</code>.
</p>
<p><code>castCode</code> constructs a casting function for multiple choice variables.
Similar to <code>castLabel</code>, but the choice value is returned instead. The
values are typically more compact and their meaning may not be obvious.
<code>castCodeCharacter</code> is an equivalent casting function that retuns
a <code>character</code> vector instead of a <code>factor</code>.
</p>
<p><code>castRaw</code> constructs a casting function that returns the content
from REDCap as it was received. It is functionally equivalent to <code>identity</code>.
For multiple choice variables, the result will be coerced to numeric, if possible;
otherwise, the result is character vector.
</p>
<p><code>castChecked</code> constructs a casting function for checkbox fields. It
returns values in the form of Unchecked/Checked. <code>castCheckedCharacter</code>
is an equivalent casting function that returns a <code>character</code> vector
instead of a <code>factor</code>.
</p>
<p><code>castCheckLabel</code> and <code>castCheckCode</code> also construct casting functions
for checkbox fields. For both, unchecked variables are cast to an empty
string (&quot;&quot;). Checked variables are cast to the option label and option code,
respectively. <code>castCheckLabelCharacter</code> and <code>castCheckCodeCharacter</code>
are equivalent casting functions that returns a <code>character</code> vector
instead of a <code>factor</code>.
</p>
<p><code>castCheckForImport</code> is a special case function to allow the user to
specify exactly which values are to be considered &quot;Checked&quot;. Values that
match are returned as <code>1</code> and all other values are returned as <code>0</code>. This is
motivated by the special case where the coding on a checkbox includes
&quot;0, Option&quot;. In the resulting field <code>checkbox___0</code>, a coded value
of <code>0</code> actually implies the choice was selected. In order to perform an
import on such data, it is necessary to cast it using
<code>castCheckForImport(c("0"))</code>.
</p>
<p><code>castDpNumeric</code> is a casting function for fields that use the
<code>number_ndp_comma</code> field type (where <code>n</code> is the number of
decimal places). This function will convert the values to numeric
values for use in analysis. This is a function that returns the
appropriate casting function, thus the appropriate usage when using
the defaults is <code>cast = list(number_1dp_comma = castDpNumeric())</code>
(using the parentheses).
</p>
<p><code>castDpCharacter</code> is a casting function to return fields that use
<code>number_ndp_comma</code> field types to character strings for import. This
is a function that returns the appropriate casting function, thus the
appropriate usage when casting for one decimal place is
<code>cast = list(number_1dp_comma = castDpCharacter(1))</code>.
</p>
<p><code>castTimeHHMM</code> and <code>castTimeMMSS</code> are casting functions to
facilitate importing data. They convert time data into a character format
that will pass the API requirements.
</p>
<p><code>castLogical</code> is a casting function that returns a logical vector for
common, binary-type responses. It is well suited to changing true/false,
yes/no, and checkbox fields into logical vectors, as it returns <code>TRUE</code> if
the value is one of <code>c("1", "true", "yes")</code> and returns <code>FALSE</code> otherwise.
</p>



<h4>Casting Lists</h4>

<p><code>raw_cast</code> overrides all casting if passed as the <code>cast</code>
parameter. It is important the the validation specified matches
the chosen cast. For fully raw it should be <code>skip_validation</code>.
</p>
<p><code>default_cast_no_factor</code> is a list of casting functions that matches
all of the default casts but with the exception that any fields that would
have been cast to factors will instead be cast to characters. It is
provided for the user that prefers to work absent factors. The list
<code>default_cast_character</code> is equivalent and is provided for those that
prefer to describe their casting in terms of what the result is (and not
what it is not).
</p>



<h3>Value</h3>

<p>Validation and casting functions return the objects indicated in the
following table:</p>

<table>
<tr>
 <td style="text-align: left;">
   Function Name </td><td style="text-align: left;"> Object Type Returned </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>isNAOrBlank</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>valRx</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>valChoice</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>valPhone</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>valSkip</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castLabel</code> </td><td style="text-align: left;"> <code>factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castLabelCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCode</code> </td><td style="text-align: left;"> <code>factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCodeCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castRaw</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castChecked</code> </td><td style="text-align: left;"> <code>factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckedCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckLabel</code> </td><td style="text-align: left;"> <code>factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckLabelCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckCode</code> </td><td style="text-align: left;"> <code>factor</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckCodeCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castCheckForImport</code> </td><td style="text-align: left;"> <code>numeric</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castDpNumeric</code> </td><td style="text-align: left;"> <code>numeric</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castDpCharacter</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castTimeHHMM</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castTimeMMSS</code> </td><td style="text-align: left;"> <code>character</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>castLogical</code> </td><td style="text-align: left;"> <code>logical</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+fieldCastingFunctions">fieldCastingFunctions()</a></code>, <br />
<code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>
</p>


<h4>Vignettes</h4>

<p><code>vignette("redcapAPI-casting-data")</code><br />
<code>vignette("redcapAPI-missing-data-detection")</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-data-validation)&#8288;</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-faq)&#8288;</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Make a custom function to give special treatment to a field.
# In this function, the field "field_name_to_skip" will 
# be cast using `castRaw`. All other fields will be cast 
# using `castCode`
customCastCode &lt;- function(x, field_name, coding){
  if (field_name == "field_name_to_skip"){
    castRaw(x, field_name, coding)
  } else {
    castCode(x, field_name, coding)
  }
}

## End(Not run)

</code></pre>

<hr>
<h2 id='fileMethods'>Export, Import, or Delete Files to a Field in a REDCap Project</h2><span id='topic+fileMethods'></span><span id='topic+exportFiles'></span><span id='topic+importFiles'></span><span id='topic+deleteFiles'></span><span id='topic+exportFiles.redcapApiConnection'></span><span id='topic+importFiles.redcapApiConnection'></span><span id='topic+deleteFiles.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable to the user to export a file stored
in a project field, import a file, or delete an existing file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFiles(rcon, record, field, event = NULL, dir, file_prefix = TRUE, ...)

importFiles(
  rcon,
  file,
  record,
  field,
  event,
  overwrite = TRUE,
  repeat_instance = NULL,
  ...
)

deleteFiles(rcon, record, field, event, ...)

## S3 method for class 'redcapApiConnection'
exportFiles(
  rcon,
  record,
  field,
  event = NULL,
  dir,
  file_prefix = TRUE,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importFiles(
  rcon,
  file,
  record,
  field,
  event = NULL,
  overwrite = TRUE,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteFiles(
  rcon,
  record = NULL,
  field = NULL,
  event = NULL,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fileMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_record">record</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code>. The record ID in
which the desired file is stored.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_field">field</code></td>
<td>
<p><code>character(1)</code>. The field name in which the file is stored.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_event">event</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>. The event name for the file.
This applies only to longitudinal projects.  If the event is not
supplied for a longitudinal project, the API will return an error message</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_repeat_instance">repeat_instance</code></td>
<td>
<p><code>integerish(1)</code> or <code>NULL</code>. The repeat instance number of
the repeating event or the repeating instrument. When available in your
instance of REDCap, and passed as <code>NULL</code>, the API will assume a value of 1.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_file">file</code></td>
<td>
<p><code>character(1)</code>. The file path to the file to be imported.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_overwrite">overwrite</code></td>
<td>
<p><code>logical(1)</code>.  When <code>FALSE</code>, the function checks
if a file already exists for that record.  If a file exists, the function
terminates to prevent overwriting.  When <code>TRUE</code>, no additional
check is performed.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. A directory/folder to which the file
will be saved. By default, the working directory is used.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_file_prefix">file_prefix</code></td>
<td>
<p><code>logical(1)</code>.  Determines if a prefix is appended
to the file name.  The prefix takes the form <code style="white-space: pre;">&#8288;[record_id]-[event_name]-[file_name]&#8288;</code>.
The file name is always the same name of the file as it exists in REDCap.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="fileMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions only export, import, or delete a single file.
</p>
<p>When exporting, the file name cannot be changed; whatever name exists in
REDCap is the name that will be used. The record ID and event name
may be appended as a prefix.
</p>


<h3>Value</h3>

<p><code>exportFiles</code> invisibly returns the file path to which the exported
file was saved.
</p>
<p><code>importFiles</code> invisibly returns <code>TRUE</code> when successful, or throws an
error if the import failed.
</p>
<p><code>deleteFiles</code> invisible returns <code>TRUE</code> when successful, or throws an
error if the deletion failed.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportFiles()</code>: Export a file from a REDCap project.
</p>
</li>
<li> <p><code>importFiles()</code>: Import a file to a REDCap project.
</p>
</li>
<li> <p><code>deleteFiles()</code>: Delete a file from a REDCap project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportFilesMultiple">exportFilesMultiple()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

save_to_dir &lt;- tempdir()              

# Export a file
exportFiles(rcon, 
            record = 1, 
            field = "file_upload_test", 
            dir = save_to_dir)
            
# Export a file for a specific event
exportFiles(rcon, 
            record = 1, 
            field = "file_upload_test",
            event = "event_1_arm_1", 
            dir = save_to_dir)

# Import a file 
importFiles(rcon,
            file = "file_to_upload.txt" 
            record = 1, 
            field = "file_upload_test")
           
# Delete a file
deleteFiles(rcon, 
            record = 1, 
            field = "file_upload_test")

## End(Not run)

</code></pre>

<hr>
<h2 id='fileRepositoryMethods'>Export, Import, or Delete Multiple Files from the File Repository</h2><span id='topic+fileRepositoryMethods'></span><span id='topic+exportFileRepository'></span><span id='topic+importFileRepository'></span><span id='topic+deleteFileRepository'></span><span id='topic+exportFileRepository.redcapApiConnection'></span><span id='topic+importFileRepository.redcapApiConnection'></span><span id='topic+deleteFileRepository.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export, import, or delete
entire folders of files from the file repository. These actions
may be done recursively to include subfolders as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFileRepository(
  rcon,
  folder_id,
  dir = getwd(),
  dir_create = FALSE,
  recursive = FALSE,
  ...
)

importFileRepository(rcon, dir, folder_id = numeric(0), ...)

deleteFileRepository(rcon, folder_id, recursive = FALSE, ...)

## S3 method for class 'redcapApiConnection'
exportFileRepository(
  rcon,
  folder_id = numeric(0),
  dir = getwd(),
  dir_create = FALSE,
  recursive = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importFileRepository(
  rcon,
  dir,
  folder_id = numeric(0),
  dag_id = numeric(0),
  role_id = numeric(0),
  recursive = FALSE,
  ...,
  refresh = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteFileRepository(
  rcon,
  folder_id,
  recursive = FALSE,
  refresh = TRUE,
  ...,
  confirm = c("ask", "no", "yes"),
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fileRepositoryMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_folder_id">folder_id</code></td>
<td>
<p><code>integerish(0/1)</code> The folder ID with the files to
download. If length 0, defaults to the top-level directory.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. A directory on the local system to which
the files are to be saved. Defaults to the working directory.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_dir_create">dir_create</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> create the directory
<code>dir</code> if it does not already exist. Defaults to <code>FALSE</code>.
If <code>dir</code> does not exist and <code>dir_create = FALSE</code>, an error is thrown.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_dag_id">dag_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a data access group. When
provided, access to the folder will be restricted to the DAG.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_role_id">role_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a role. When provided,
access to the folder will be restricted to users with that role.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_recursive">recursive</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, export all subfolders
and their files as well.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> (default), the cached
File Repository data on <code>rcon</code> will be refreshed.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_confirm">confirm</code></td>
<td>
<p><code>character</code>. One of <code>c("ask", "no", "yes")</code>.
When <code>"ask"</code>, user will be prompted to confirm the deletion.
When <code>"no"</code>, the function will terminate with no action. When
<code>"yes"</code>, the function will proceed without confirmation (useful
for automated processes).</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="fileRepositoryMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>deleteFileRepository</code> will only delete files and cannot
delete folders.
</p>
<p>Deleted files will remain in the recycling bin for up to 30 days.
</p>


<h3>Value</h3>

<p><code>exportFileRepository</code> returns a data frame with the locations to which
the files were saved on the local system. It has the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>directory</code> </td><td style="text-align: left;"> The directory in which the file is saved. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>filename</code> </td><td style="text-align: left;"> The name of the saved file. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importFileRepository</code> returns a data frame with the locations to which
the files were saved on the local system. It has the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>directory</code> </td><td style="text-align: left;"> The directory in which the file is saved. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>filename</code> </td><td style="text-align: left;"> The name of the saved file. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>deleteFileRepository</code> returns a data frame listing the files that
were deleted from the file repository. It has the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>folder_id</code> </td><td style="text-align: left;"> The REDCap assigned ID number for the folder. This will be <code>NA</code> for files. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>doc_id</code> </td><td style="text-align: left;"> The REDCap assigned ID number for the file. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>name</code> </td><td style="text-align: left;"> The filename of the deleted files. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>parent_folder</code> </td><td style="text-align: left;"> The folder ID of parent folder. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Functions</h3>


<ul>
<li> <p><code>exportFileRepository()</code>: Export multiple files from the File Repository.
</p>
</li>
<li> <p><code>importFileRepository()</code>: Import multiple files to the File Repository.
</p>
</li>
<li> <p><code>deleteFileRepository()</code>: Delete multiple files from the File Repository.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportFromFileRepository">exportFromFileRepository()</a></code>, <br />
<code><a href="#topic+importToFileRepository">importToFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFromFileRepository">deleteFromFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepositoryListing">exportFileRepositoryListing()</a></code>, <br />
<code><a href="#topic+createFileRepositoryFolder">createFileRepositoryFolder()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
save_location &lt;- tempdir()

# Export the top-level file repository folder
exportFileRepository(rcon, 
                     folder_id = numeric(0), 
                     dir = save_location)
                     
# Export the entire repository 
exportFileRepository(rcon, 
                     folder_id = numeric(0), 
                     dir = save_location, 
                     recursive = TRUE)
                     
# Export a file repository folder below the top-level
exportFileRepository(rcon, 
                     folder_id = 12345, 
                     dir = save_location)
                     
# Import the files from a folder to the top-level file repository
importFileRepository(rcon, 
                     dir = "path/to/folder")
                     
# Import the files from a folder to sub folder of the file repository
importFileRepository(rcon, 
                     dir = "path/to/folder", 
                     folder_id = 12345) 
                     
# Import the files from a folder and assign to a specific 
# Data Access Group
importFileRepository(rcon, 
                     dir = "path/to/folder", 
                     dag_id = 789)  
                     
# Delete files from the top-level folder of the file repository
deleteFileRepository(rcon, 
                     folder_id = numeric(0))
                     
# Delete all the file sfrom the file repository
deleteFileRepository(rcon, 
                     folder_id = numeric(0), 
                     recursive = TRUE)                   

## End(Not run)

</code></pre>

<hr>
<h2 id='fileRepositoryPath'>Reconstruct the file repository path</h2><span id='topic+fileRepositoryPath'></span>

<h3>Description</h3>

<p>Reconstruct the file repository path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fileRepositoryPath(doc_id = numeric(0), folder_id = numeric(0), fileRepo)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fileRepositoryPath_+3A_doc_id">doc_id</code></td>
<td>
<p><code>integerish(0/1)</code>. The document ID for which the
file path should be returned. Only one of <code>doc_id</code> or
<code>folder_id</code> should be specified.</p>
</td></tr>
<tr><td><code id="fileRepositoryPath_+3A_folder_id">folder_id</code></td>
<td>
<p><code>integerish(0/1)</code>. The folder ID for which the
file path should be returned. Only one of <code>doc_id</code> or
<code>folder_id</code> should be specified.</p>
</td></tr>
<tr><td><code id="fileRepositoryPath_+3A_filerepo">fileRepo</code></td>
<td>
<p><code>data.frame</code> with the file repository listing.
Typically provided by <code>rcon$fileRepository()</code></p>
</td></tr>
</table>

<hr>
<h2 id='filterEmptyRow'>Remove Rows Containing Only Missing Values</h2><span id='topic+filterEmptyRow'></span>

<h3>Description</h3>

<p>Evaluates each row of a data frame for missingness. If all
fields (excluding the identifying fields) are missing, the row is
removed from the data. For the purpose of this function,
<code>redcap_data_access_group</code> is considered an identifying field.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filterEmptyRow(data, rcon)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filterEmptyRow_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> to be filtered.</p>
</td></tr>
<tr><td><code id="filterEmptyRow_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>
</p>

<hr>
<h2 id='fromFileRepositoryMethods'>Export, Import, and Delete Individual Files from the File Repository</h2><span id='topic+fromFileRepositoryMethods'></span><span id='topic+exportFromFileRepository'></span><span id='topic+importToFileRepository'></span><span id='topic+deleteFromFileRepository'></span><span id='topic+exportFromFileRepository.redcapApiConnection'></span><span id='topic+importToFileRepository.redcapApiConnection'></span><span id='topic+deleteFromFileRepository.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export, import, or delete
individual files from a REDCap project's file repository.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportFromFileRepository(rcon, doc_id, dir = getwd(), dir_create = FALSE, ...)

importToFileRepository(rcon, file, folder_id = numeric(0), ...)

deleteFromFileRepository(rcon, doc_id, ...)

## S3 method for class 'redcapApiConnection'
exportFromFileRepository(
  rcon,
  doc_id,
  dir = getwd(),
  dir_create = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importToFileRepository(
  rcon,
  file,
  folder_id = numeric(0),
  ...,
  refresh = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteFromFileRepository(
  rcon,
  doc_id,
  ...,
  refresh = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fromFileRepositoryMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_doc_id">doc_id</code></td>
<td>
<p><code>integerish(1)</code>. The document ID to be downloaded.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_folder_id">folder_id</code></td>
<td>
<p><code>integerish(0/1)</code>. The ID of the folder into which
the file is to be imported. If length is zero, it is imported to the
top-level folder.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_file">file</code></td>
<td>
<p><code>character(1)</code>. A file on the local system to be imported
to the File Repository.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. A directory on the local system to which
the file is to be saved. Defaults to the working directory.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_dir_create">dir_create</code></td>
<td>
<p><code>logical(1)</code>. Create the directory <code>dir</code>
if it does not already exist. Defaults to <code>FALSE</code>.
If <code>dir</code> does not exist and <code>create = FALSE</code>, an error is thrown.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code> When <code>TRUE</code>, the cached
File Repository data on <code>rcon</code> will be refreshed.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="fromFileRepositoryMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When a file is deleted, the file will remain in the Recycle Bin
folder for up to 30 days.
</p>


<h3>Value</h3>

<p><code>exportFromFileRepository</code>, <code>importToFileRepository</code>,
and <code>deleteFromFileRepository</code> each return a data frame
with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>directory</code> </td><td style="text-align: left;"> The directory in which the file is saved. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>filename</code> </td><td style="text-align: left;"> The name of the saved file. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Functions</h3>


<ul>
<li> <p><code>exportFromFileRepository()</code>: Export a file from the file repository.
</p>
</li>
<li> <p><code>importToFileRepository()</code>: Import a file to the file repository.
</p>
</li>
<li> <p><code>deleteFromFileRepository()</code>: Delete a file from the file repository.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportFileRepository">exportFileRepository()</a></code>, <br />
<code><a href="#topic+importFileRepository">importFileRepository()</a></code>, <br />
<code><a href="#topic+deleteFileRepository">deleteFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepositoryListing">exportFileRepositoryListing()</a></code>, <br />
<code><a href="#topic+createFileRepositoryFolder">createFileRepositoryFolder()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
 
write_to_path &lt;- tempdir()            
             
# Export a file from the repository
exportFromFileRepository(rcon, 
                         doc_id = 12345, 
                         dir = write_to_path)
                         
# Export a file and create the target directory if it does not exist
exportFromFileRepository(rcon, 
                         doc_id = 12345, 
                         dir = write_to_path, 
                         dir_create = TRUE)
                         
# Import a file to the top-level directory of the file repository
importFileToRepository(rcon, 
                       file = "file_to_import.txt")
                       
# Import a file to a specific directory of the file repository
importFileToRepository(rcon, 
                       file = "file_to_import.txt", 
                       folder_id = 678)
                       
# Delete a file from the file repository
deleteFileFromRepository(rcon, 
                         doc_id = 12345)

## End(Not run)
  
</code></pre>

<hr>
<h2 id='getProjectIdFields'>Return a vector of the Project ID Fields</h2><span id='topic+getProjectIdFields'></span>

<h3>Description</h3>

<p>Returns a character vector listing the project ID fields.
This will be at most a vector of length two. The first element will
be the first field in the meta data. The second, if provided, will
be the name of the secondary unique field specified in the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProjectIdFields(rcon)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getProjectIdFields_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character vector with the field names that uniquely identify
an experimental unit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
getProjectIdFields(rcon)

## End(Not run)
</code></pre>

<hr>
<h2 id='importRecords'>Import Records to a Project</h2><span id='topic+importRecords'></span><span id='topic+importRecords.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to import new records or update
existing records to a project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>importRecords(
  rcon,
  data,
  overwriteBehavior = c("normal", "overwrite"),
  returnContent = c("count", "ids", "nothing", "auto_ids"),
  returnData = FALSE,
  logfile = "",
  ...
)

## S3 method for class 'redcapApiConnection'
importRecords(
  rcon,
  data,
  overwriteBehavior = c("normal", "overwrite"),
  returnContent = c("count", "ids", "nothing", "auto_ids"),
  returnData = FALSE,
  logfile = "",
  force_auto_number = FALSE,
  ...,
  batch.size = -1,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="importRecords_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> to be imported to the project.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_overwritebehavior">overwriteBehavior</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("normal", "overwrite")</code>.
<code>"normal"</code> prevents blank fields from overwriting populated fields.
<code>"overwrite"</code> causes blanks to overwrite data in the database.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_returncontent">returnContent</code></td>
<td>
<p><code>character(1)</code>.
One of <code>c("count", "ids", "nothing", "auto_ids")</code>.
'count' returns the number of records imported;
'ids' returns the record ids that are imported;
'nothing' returns no message;
'auto_ids' returns a list of pairs of all record IDs that were imported.
If used when <code>force_auto_number = FALSE</code>, the value will be changed to <code>'ids'</code>.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_returndata">returnData</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, prevents the REDCap
import and instead returns the data frame that would have been given
for import. This is sometimes helpful if the API import fails without
providing an informative message. The data frame can be written to a csv
and uploaded using the interactive tools to troubleshoot the
problem.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_logfile">logfile</code></td>
<td>
<p><code>character(1)</code>. An optional filepath (preferably .txt)
in which to print the log of errors and warnings about the data.
When <code>""</code>, the log is printed to the console.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="importRecords_+3A_force_auto_number">force_auto_number</code></td>
<td>
<p><code>logical(1)</code>. If record auto-numbering has been
enabled in the project, it may be desirable to import records where each
record's record name is automatically determined by REDCap (just as it
does in the user interface). When <code>TRUE</code>, the
record names provided in the request will not be used (although they
are still required in order to associate multiple rows of data to an
individual record in the request); instead those records in the
request will receive new record names during the import process.
It is recommended that the user use <code>returnContent = "auto_ids"</code>
when <code>force_auto_number = TRUE</code></p>
</td></tr>
<tr><td><code id="importRecords_+3A_batch.size">batch.size</code></td>
<td>
<p><code>integerish(1)</code>.  Specifies the number of subjects to be included
in each batch of a batched export or import.  Non-positive numbers
export/import the entire operation in a single batch.
Batching may be beneficial to prevent tying up smaller servers.
See Details.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="importRecords_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>importRecords</code> prevents the most common import errors by testing the
data before attempting the import.  Namely
</p>

<ol>
<li><p> Check that all variables in <code>data</code> exist in the REDCap data dictionary.
</p>
</li>
<li><p> Check that the record id variable exists
</p>
</li>
<li><p> Force the record id variable to the first position in the data frame (with a warning)
</p>
</li>
<li><p> Remove calculated fields (with a warning)
</p>
</li>
<li><p> Verify that REDCap date fields are represented in the data frame as either <code>character</code>, <code>POSIXct</code>, or <code>Date</code> class objects.
</p>
</li>
<li><p> Determine if values are within their specified validation limits.
</p>
</li></ol>

<p>See the documentation for <code><a href="#topic+validateImport">validateImport()</a></code> for detailed
explanations of the validation.
</p>
<p>A 'batched' import is one where the export is performed over a series of
API calls rather than one large call.  For large projects on small servers,
this may prevent a single user from tying up the server and forcing others
to wait on a larger job.
</p>


<h4>BioPortal Fields</h4>

<p>Text fields that are validation enabled using the BioPortal Ontology service
may be imported by providing the coded value. Importing the coded value
does not, however, guarantee that the labeled value will be immediately
available. Labels for BioPortal values are cached on the REDCap server
in a process that occurs when viewing data in the user interface. Thus,
if the label has not be previously cached on the server, the code will be
used to represent both the code and the label.
</p>



<h3>Value</h3>

<p><code>importRecords</code>, when <code>returnData = FALSE</code>, returns the content from the
API response designated by the <code>returnContent</code> argument.
</p>
<p><code>importRecords</code>, when <code>returnData = TRUE</code>, returns the
data frame that was internally prepared for import. This data frame has
values transformed from R objects to character values the API will
accept.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecords">exportRecords()</a></code>, <br />
<code><a href="#topic+deleteRecords">deleteRecords()</a></code>, <br />
<code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Import records
NewData &lt;- data.frame(record_id = c(1, 2, 3), 
                      age = c(27, 43, 32), 
                      date_of_visit = rep(Sys.Date(), 3))
importRecords(rcon, 
              data = NewData)
              
              
# Import records and save validation info to a file
NewData &lt;- data.frame(record_id = c(1, 2, 3), 
                      age = c(27, 43, 32), 
                      date_of_visit = rep(Sys.Date(), 3))
importRecords(rcon, 
              data = NewData, 
              logfile = "import-validation-notes.txt")      


## End(Not run) 

</code></pre>

<hr>
<h2 id='invalidSummary'>Helper functions for formatting validation failure report</h2><span id='topic+invalidSummary'></span><span id='topic+format.invalid'></span><span id='topic+print.invalid'></span><span id='topic+summary.invalid'></span>

<h3>Description</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code> may have an <code>invalid</code>
attribute if validations fail. This data has some routines which
help locate the failing records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'invalid'
format(x, ...)

## S3 method for class 'invalid'
print(x, ...)

## S3 method for class 'invalid'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="invalidSummary_+3A_x">x</code></td>
<td>
<p>The <code>invalid</code> class object.</p>
</td></tr>
<tr><td><code id="invalidSummary_+3A_...">...</code></td>
<td>
<p>additional arguments to <code>print</code></p>
</td></tr>
<tr><td><code id="invalidSummary_+3A_object">object</code></td>
<td>
<p>The <code>invalid</code> class object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rcon &lt;- redcapConnection(url=[YOUR_REDCAP_URL], token=[API_TOKEN])

rec &lt;- exportRecordsTyped(rcon)

attr(rec, "invalid")

## End(Not run)

</code></pre>

<hr>
<h2 id='isZeroCodedCheckField'>Identify Check Fields with a Zero Coded Option</h2><span id='topic+isZeroCodedCheckField'></span><span id='topic+warnOfZeroCodedCheckCasting'></span><span id='topic+warnZeroCodedFieldPresent'></span>

<h3>Description</h3>

<p>Check fields that have <code>0</code> as a coding option can confuse
certain data processing steps because it can be difficult to
differentiate if a <code>0</code> value represents an unchecked or checked
option. Identifying these fields is important to handling them
correctly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isZeroCodedCheckField(field_name)

warnOfZeroCodedCheckCasting(field_name, x)

warnZeroCodedFieldPresent(field_names, warn_zero_coded)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isZeroCodedCheckField_+3A_field_name">field_name</code></td>
<td>
<p><code>character(1)</code> The name of a field to be tested.</p>
</td></tr>
<tr><td><code id="isZeroCodedCheckField_+3A_x">x</code></td>
<td>
<p><code>atomic</code> object.</p>
</td></tr>
<tr><td><code id="isZeroCodedCheckField_+3A_field_names">field_names</code></td>
<td>
<p><code>character</code> vector of field names.</p>
</td></tr>
<tr><td><code id="isZeroCodedCheckField_+3A_warn_zero_coded">warn_zero_coded</code></td>
<td>
<p><code>logical(1)</code>. Turn on or off warnings about zero coded fields. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>isZeroCodedCheckField</code> returns a <code>logical(1)</code>
</p>
<p><code>warnOfZeroCodedCheckCasting</code> has no return and issues a warning if the
field name appears to be zero-coded.
</p>
<p><code>warnZeroCodedFieldPresent</code> has no return and issues a warning if any
of the fields passed appear to be zero-coded.
</p>


<h3>Zero-Coded Check Fields</h3>

<p>A zero-coded check field is a field of the REDCap type <code>checkbox</code> that has
a coding definition of <code style="white-space: pre;">&#8288;0, [label]&#8288;</code>. When exported, the field names for
these fields is <code style="white-space: pre;">&#8288;[field_name]___0&#8288;</code>. As in other checkbox fields, the
raw data output returns binary values where 0 represent an unchecked
box and 1 represents a checked box. For zero-coded checkboxes, then, a
value of 1 indicates that 0 was selected.
</p>
<p>This coding rarely presents a problem when casting from raw values
(as is done in <code>exportRecordsTyped</code>). However, casting from coded or
labeled values can be problematic. In this case, it becomes
indeterminate from context if the intent of <code>0</code> is 'false' or the coded
value '0' ('true') ...
</p>
<p>The situations in which casting may fail to produce the desired results are</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td><td style="text-align: left;"> Result </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> anything other than "0" </td><td style="text-align: left;"> Likely to fail when casting from coded values </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> 0 </td><td style="text-align: left;"> Likely to fail when casting from coded or labeled values </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Because of the potential for miscast data, casting functions will issue
a warning anytime a zero-coded check field is encountered. A separate
warning is issued when a field is cast from coded or labeled values.
</p>
<p>When casting from coded or labeled values, it is strongly recommended that
the function <code><a href="#topic+castCheckForImport">castCheckForImport()</a></code> be used. This function permits the
user to state explicitly which values should be recognized as checked,
avoiding the ambiguity resulting from the coding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isZeroCodedCheckField("check_field___x")

isZeroCodedCheckField("check_field___0")


x &lt;- factor(c(1, 0, 1, 0, 0), 
            levels = 0:1)
warnOfZeroCodedCheckCasting(field_name = "check_field___0", 
                            x = x)
                       
 
warnZeroCodedFieldPresent(c("check_field___x", "check_field___0"), TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='makeApiCall'>Make REDCap API Calls</h2><span id='topic+makeApiCall'></span>

<h3>Description</h3>

<p>Constructs and executes API calls to the REDCap API. These
are left deliberately abstract in order to be flexible enough to
support the <code>redcapAPI</code> functions, but also allow users to
execute calls for new REDCap features that are not yet implemented.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeApiCall(rcon, body = list(), config = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeApiCall_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="makeApiCall_+3A_body">body</code></td>
<td>
<p><code>list</code> List of parameters to be passed to <code><a href="httr.html#topic+POST">httr::POST()</a></code>'s
<code>body</code> argument</p>
</td></tr>
<tr><td><code id="makeApiCall_+3A_config">config</code></td>
<td>
<p><code>list</code> A list of options to be passed to <code><a href="httr.html#topic+POST">httr::POST()</a></code>.
These will be appended to the <code>config</code> options included in the
<code>rcon</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The intent of this function is to provide an approach to execute
calls to the REDCap API that is both consistent and flexible. Importantly,
this provides a framework for making calls to the API using features that
the R package does not yet support (redcapAPI will always lag behind when
REDCap adds new features).
</p>
<p>The API call consists of two components: the &quot;body&quot; and the &quot;config.&quot;
The body of the call contains all of the arguments being passed to the
API. When building body components, be sure to review the documentation.
options to the API that require an array need to be built using
<code>vectorToApiBodyList</code>; options that are not an array can be entered
directly (see examples).
</p>
<p>The config list is a list of parameters to pass to <code><a href="httr.html#topic+POST">httr::POST()</a></code>.
Refer to documentation there for details.
</p>
<p>Using the settings stored in the <code>redcapConnection</code> object, a response
code of 408 (Request Timeout), 500 (Internal Server Error),
502 (Bad Gateway), 503 (Service Unavailable), or 504 (Gateway Timeout)
will prompt reattempts at calling the API. See <code><a href="#topic+redcapConnection">redcapConnection()</a></code>
for details. If the API reaches its attempt limit without resolving to
any other code, the last response is returned. If any other response
code is returned at any point in the retry loop, the loop breaks and
returns that response.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  url &lt;- "Enter your API URL here"
  token &lt;- "Enter your API token here"
  
  rcon &lt;- redcapConnection(url = url, 
                           token = token)
                           
  MetaData &lt;- 
    makeApiCall(rcon = rcon,
               body = list(content = "metadata",
                           format = "csv",
                           returnFormat = "csv"))
  MetaData &lt;- utils::read.csv(text = as.character(MetaData),
                              stringsAsFactors = FALSE,
                              na.strings = "")



  # Call to export Meta Data (Data Dictionary) for specific fields

  fields &lt;- vectorToApiBodyList(vector = c("row_purpose", 
                                           "prereq_radio"),
                                parameter_name = "fields")
  MetaData &lt;-
    makeApiCall(rcon = rcon,
                body = c(list(content = "metadata",
                              format = "csv",
                              returnFormat = "csv"),
                         fields))
  MetaData &lt;- read.csv(text = as.character(MetaData),
                       stringsAsFactors = FALSE,
                       na.strings = "")



  # Basic call to export records

  Records &lt;- makeApiCall(rcon = rcon,
                         body = list(content = "record",
                                     format = "csv",
                                     returnFormat = "csv",
                                     type = "flat"))

  Records &lt;- read.csv(text = as.character(Records),
                      stringsAsFactors = FALSE,
                      na.strings = "")


  # Call to export records for a single form.
  # Note that even though we are interested in a single form, the
  # API requires an array, so we use vectorToApiBodyList

  export_form &lt;- vectorToApiBodyList("branching_logic",
                                     parameter_name = "forms")
  Records &lt;- makeApiCall(rcon = rcon,
                         body = c(list(content = "record",
                                       format = "csv",
                                       returnFormat = "csv",
                                       type = "flat"),
                                  export_form))
  Records &lt;- read.csv(text = as.character(Records),
                      stringsAsFactors = FALSE,
                      na.strings = "")


  # Call to export records with a pipe delimiter.

  Records &lt;- makeApiCall(rcon = rcon,
                         body = list(content = "record",
                                     format = "csv",
                                     returnFormat = "csv",
                                     type = "flat",
                                     csvDelimiter = "|"))
  Records &lt;- read.csv(text = as.character(Records),
                      stringsAsFactors = FALSE,
                      na.strings = "",
                      sep = "|")


  # Call to export records created/modified after 25 Dec 2022 14:00.

  Records &lt;- makeApiCall(rcon = rcon,
                         body = list(content = "record",
                                     format = "csv",
                                     returnFormat = "csv",
                                     type = "flat",
                                     dateRangeBegin = "2022-12-25 14:00:00"))

  Records &lt;- read.csv(text = as.character(Records),
                      stringsAsFactors = FALSE,
                      na.strings = "")
                      
 

## End(Not run)

</code></pre>

<hr>
<h2 id='mappingMethods'>Export and Import Instrument-Event Mappings</h2><span id='topic+mappingMethods'></span><span id='topic+exportMappings'></span><span id='topic+importMappings'></span><span id='topic+exportMappings.redcapApiConnection'></span><span id='topic+importMappings.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export and add/modify the
mappings between instruments and events. The information provided
with the methods corresponds to what is provided in the
'Designate Instruments for My Events' page in the user interface.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportMappings(rcon, arms, ...)

importMappings(rcon, data, refresh = TRUE, ...)

## S3 method for class 'redcapApiConnection'
exportMappings(
  rcon,
  arms = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importMappings(
  rcon,
  data,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mappingMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_arms">arms</code></td>
<td>
<p><code>integerish</code> or <code>character</code>. A vector of arm numbers. When
given, mappings are only exported for the given arms.</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with columns <code>arm_num</code>, <code>unique_event_name</code>,
and <code>form</code>. See Details</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, cached mappings in the <code>rcon</code>
object are refreshed after the import.</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="mappingMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These methods are only applicable to longitudinal projects.
If the project information reports that the project is not longitudinal,
a data frame with 0 rows is returned without calling the API.
</p>


<h3>Value</h3>

<p><code>exportMappings</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>arm_num</code> </td><td style="text-align: left;"> The arm number for the unique event mapped to the instrument. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>unique_event_name</code> </td><td style="text-align: left;"> The unique event name to which the instrument is assigned. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>form</code> </td><td style="text-align: left;"> The REDCap assigned instrument name mapped to the event. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importMappings</code> invisible returns the number of mappings added or edited.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportMappings()</code>: Export instrument-event mappings.
</p>
</li>
<li> <p><code>importMappings()</code>: Import instrument-event mappings to the project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportFieldNames">exportFieldNames()</a></code>,<br />
<code><a href="#topic+exportInstruments">exportInstruments()</a></code>,<br />
<code><a href="#topic+exportMetaData">exportMetaData()</a></code>,<br />
<code><a href="#topic+importMetaData">importMetaData()</a></code>, <br />
<code><a href="#topic+exportPdf">exportPdf()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export all mappings
exportMappings(rcon)

# Export mappings for a specific arm
exportMappings(rcon, 
               arms = 1)
               
# Import mappings
NewMapping &lt;- 
  data.frame(arm_num = c(1, 1, 2), 
             unique_event_name = c("event_1_arm_1", 
                                   "event_2_arm_1", 
                                   "event_1_arm_2"), 
             form = c("registration", 
                      "follow_up", 
                      "registration"))

importMapping(rcon, 
              data = NewMapping)

## End(Not run)

</code></pre>

<hr>
<h2 id='massert'>Conduct Multiple Assertions</h2><span id='topic+massert'></span>

<h3>Description</h3>

<p>This documentation attempts to describe arguments to make assertions
on arguments.  In order to prevent confusion, it is imperative to develop some
terminology up front. We will use <em>function argument</em> to refer to an argument
of the function for which we are conducting assertions.  We will  use
<em>assertion argument</em> to refer to arguments to pass to the assertion function
being applied to a function argument.  Lastly, we will use <em>massert argument</em>
to refer to arguments to <code>massert</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>massert(formula, fun, ..., fixed = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="massert_+3A_formula">formula</code></td>
<td>
<p>A one sided formula naming the arguments on which the assertion
will be performed.</p>
</td></tr>
<tr><td><code id="massert_+3A_fun">fun</code></td>
<td>
<p>An assertion function to perform.</p>
</td></tr>
<tr><td><code id="massert_+3A_...">...</code></td>
<td>
<p>Additional lists. Each argument provided is a named list of <code style="white-space: pre;">&#8288;assertion  arguments&#8288;</code>. The name of each element in a list should match the name of a
<code style="white-space: pre;">&#8288;function argument&#8288;</code>. <code>lower = list(var1 = 0, var2 = 10)</code> sets
the <em>assertion argument</em> <code>lower = 0</code> for <em>function argument</em>
<code>var1</code>; and sets the <em>assertion argument</em> <code>lower = 10</code> for
<code style="white-space: pre;">&#8288;function argument&#8288;</code> <code>var2</code>. The <em>massert arguments</em> in <code>...</code>
may themselves be named or unnamed.</p>
</td></tr>
<tr><td><code id="massert_+3A_fixed">fixed</code></td>
<td>
<p>A named list of arguments that are fixed across all assertions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only one assert function may be utilized in each call to <code>massert</code>.
This allows for all numeric variables to be checked in one call, all logical
variables to be checked in a subsequent call, etc.
</p>

<hr>
<h2 id='metaDataMethods'>Export and Import the Project Meta Data (Data Dictionary)</h2><span id='topic+metaDataMethods'></span><span id='topic+metaDataMethodsArgs'></span><span id='topic+exportMetaData'></span><span id='topic+importMetaData'></span><span id='topic+exportMetaData.redcapApiConnection'></span><span id='topic+importMetaData.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods provide the user access to a REDCap project's
data dictionary. The data dictionary may be exported or altered via
the import.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportMetaData(rcon, ...)

importMetaData(rcon, data, ...)

## S3 method for class 'redcapApiConnection'
exportMetaData(
  rcon,
  fields = character(0),
  forms = character(0),
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importMetaData(
  rcon,
  data,
  refresh = TRUE,
  ...,
  field_types = REDCAP_METADATA_FIELDTYPE,
  validation_types = REDCAP_METADATA_VALIDATION_TYPE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metaDataMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_fields">fields</code></td>
<td>
<p><code>character</code> vector of field names for which the metadata is to
be retrieved.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_forms">forms</code></td>
<td>
<p><code>character</code> vector of forms for which the metadata is to be
retrieved. If a form name is given, all of the fields on that form
will be returned, regardless of whether it is included in <code>fields</code> or
not.  Form names should match those in the second column of the data
dictionary, and not the display names shown on the web interface.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with the Meta Data to import.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached metadata
and instruments will be refreshed after the import.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_field_types">field_types</code></td>
<td>
<p><code>character</code> giving the acceptable field types
when validating the <code>field_type</code> column. This</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_validation_types">validation_types</code></td>
<td>
<p><code>character</code> giving the acceptable values
for the <code>text_validation_or_show_slider_number</code> column.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="metaDataMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When importing meta data, the following conditions apply:
</p>
<p>Field names may start with a letter, have any number of letters,
numbers, or underscores, and end in either a letter or a number. All
letters must be lowercase (the function will coerce them to lower before
checking for duplicate field names).
</p>
<p>Form names may start with a letter, have any number of letters,
numbers, or underscores, and end in either a letter or a number. All
letters must be lowercase (the function will coerce them to lower before
checking for duplicate field names).
</p>
<p>Field types may be one of <code>REDCAP_METADATA_FIELDTYPE</code>. In the event that a
new field type is added to REDCap and <code>redcapAPI</code> is not yet updated,
the user may add additional values via <code>c(REDCAP_METADATA_FIELDTYPE, "new_type")</code>.
</p>
<p>Validation types may be one of <code>REDCAP_METADATA_VALIDATION_TYPE</code> or
<code>NA</code>. As with field types, additional values can be appended if
necessary. Only fields that have a field type of &quot;text&quot; or &quot;slider&quot;
should have a validation type. &quot;slider&quot; fields should be either <code>NA</code>
(do not display the selected number) or <code>"number"</code>.
</p>
<p>For multiple choice fields, the selection choices take the format of
<code>"code1, label1 | ... | coden, labeln"</code>. For slider fields, the
format is <code>"left_value | mid_value | right_value"</code>. Any of those
values may be an empty character, but the two pipes are required, nonetheless.
</p>
<p>For calculated fields, the values in <code>"select_choices_or_calculations"</code>
are currently unvalidated.
</p>
<p>All of the values between brackets in the branching logic must be either a
field name or an existing unique event name (such as <code>"event_1_arm_1"</code>)
</p>


<h3>Value</h3>

<p><code>exportMetaData</code> returns a data frame. Not all 18 (or more) columns are
documented here, but the most commonly used within <code>redcapAPI</code> are
(these may appear in a different order in the data frame):</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field_name</code> </td><td style="text-align: left;"> The name of a field in the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>filed_label</code> </td><td style="text-align: left;"> The human-readable form of the field name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>form_name</code> </td><td style="text-align: left;"> The name of the form on which the field is found. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field_type</code> </td><td style="text-align: left;"> One of two fields used to determine how a field is transformed into an R object. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>select_choices_or_calculations</code> </td><td style="text-align: left;"> The second field used to determine how a field is translated into an R object. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>text_validation_type_or_show_slider_number</code> </td><td style="text-align: left;"> Describes how fields are validated. For slider fields, it gives the limits and center point to display. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field_annotation</code> </td><td style="text-align: left;"> Contains annotations such as units of measures. Also contains action tags. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importMetaData</code> invisibly returns the number of fields that were imported.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportMetaData()</code>: Export the Meta Data (Data Dictionary) of a REDCap Project
</p>
</li>
<li> <p><code>importMetaData()</code>: Import New Meta Data (Data Dictionary) Definitions
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportFieldNames">exportFieldNames()</a></code>,<br />
<code><a href="#topic+exportInstruments">exportInstruments()</a></code>,<br />
<code><a href="#topic+exportMappings">exportMappings()</a></code>,<br />
<code><a href="#topic+importMappings">importMappings()</a></code>, <br />
<code><a href="#topic+exportPdf">exportPdf()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export the MetaData from REDCap
exportMetaData(rcon)

# Export MetaData for select fields only (returns two rows)
exportMetaData(rcon, 
               fields = c("dropdown_test", "radio_test"))

# Export MetaData for select forms
exportMetaData(rcon, 
               forms = c("first_form", "second_form"))
               
# MetaData my be exported for a combination of fields and forms
exportMetaData(rcon, 
               fields = c("dropdown_test", "radio_test"), 
               forms = c("first_form", "second_form"))
               
# Alter and import new MetaData (change the record ID label)
Meta &lt;- exportMetaData(rcon)

Meta$field_label[1] &lt;- "A better description of the Record ID"
importMetaData(rcon, 
               data = Meta)

## End(Not run)
</code></pre>

<hr>
<h2 id='missingSummary'>Report of Missing Values</h2><span id='topic+missingSummary'></span><span id='topic+missingSummary_offline'></span><span id='topic+missingSummary.redcapApiConnection'></span>

<h3>Description</h3>

<p>Returns a data frame of subject events with missing values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missingSummary(
  rcon,
  excludeMissingForms = TRUE,
  ...,
  fixed_fields = REDCAP_SYSTEM_FIELDS
)

## S3 method for class 'redcapApiConnection'
missingSummary(
  rcon,
  excludeMissingForms = TRUE,
  ...,
  fixed_fields = REDCAP_SYSTEM_FIELDS,
  exportRecordsArgs = list(),
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

missingSummary_offline(
  records,
  meta_data,
  excludeMissingForms = TRUE,
  fixed_fields = REDCAP_SYSTEM_FIELDS
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="missingSummary_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_excludemissingforms">excludeMissingForms</code></td>
<td>
<p><code>logical(1)</code> When <code>TRUE</code>, forms where all
fields are missing are assumed to be deliberately missing data and
are excluded from the count of missing values. An example when this is
desirable is if a patient did not experience an adverse event;
the adverse event form would contain no data and the empty fields
should not be considered missing data.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_fixed_fields">fixed_fields</code></td>
<td>
<p><code>character</code> A vector of field names that will be used as
the identifying fields in the output summary. This always includes the record
identifier (ie, the first field in the data dictionary). By default it
also includes any fields identified in <code>REDCAP_SYSTEM_FIELDS</code>, which
are fields that REDCap adds to exports to identify arms, events, etc..</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_exportrecordsargs">exportRecordsArgs</code></td>
<td>
<p>named <code>list</code>. Arguments to pass to <code>exportRecords</code>.
This allows for testing specific forms, events, and/or records. Internally, any
setting passed for <code style="white-space: pre;">&#8288;factors, labels, dates, survey&#8288;</code>, or <code>dag</code>
arguments will be ignored.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_records">records</code></td>
<td>
<p><code>character(1)</code> A filename pointing to the raw records
download from REDCap.</p>
</td></tr>
<tr><td><code id="missingSummary_+3A_meta_data">meta_data</code></td>
<td>
<p><code>character(1)</code> A filename pointing to the data dictionary
download from REDCap.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The intention of this function is to generate a list of subject
events that are missing and could potentially be values that should have
been entered.
</p>
<p>The branching logic from the data dictionary is parsed and translated into
and R expression.  When a field with branching logic passes the logical
statement, it is evaluated with <code>is.na</code>, otherwise, it is set to
<code>FALSE</code> (non-missing, because there was never an opportunity to
provide a value).  The utility of this function is limited to simple
logic where all of the
data exist within the same row. Any complex statements using events
will result in a failure.
</p>
<p>Optionally, forms that are entirely missing can be determined to be
non-missing.  This is applicable when, for instance, a patient did not
have an adverse event.  In this case, a form dedicated to adverse events
would contain meaningless missing values and could be excluded from the
report.
</p>


<h3>See Also</h3>

<p><code>vignette("redcapAPI-offline-connection", package = "redcapAPI")</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Generate a summary of missing values for the entire project
missingSummary(rcon)

# Generate a summary of missing values for a single form
missingSummary(rcon, 
               exportRecordsArgs = list(forms = "target_form"))

## End(Not run)

</code></pre>

<hr>
<h2 id='parseBranchingLogic'>Parse Branching Logic</h2><span id='topic+parseBranchingLogic'></span>

<h3>Description</h3>

<p>Branching logic from the REDCap Data Dictionary is parsed into
R Code and returned as expressions.  These can be evaluated if desired
and allow the user to determine if missing values are truly missing or
not required because the branching logic prevented the variable from being
presented.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseBranchingLogic(l)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseBranchingLogic_+3A_l">l</code></td>
<td>
<p>A vector of REDCap branching logic statements.  These are usually
passed as the vector <code>meta_data$branching_logic</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a study, I was asked to identify which subjects had missing
values so that remaining data could be collected.  The initial pass of
<code>is.na</code> produced a lot of subjects missing values where there was no
need to collect data because they did not qualify for some variables in
the branching logic.  Parsing the logic allowed me to determine which
values we expected to be missing and narrow the search to just those
subjects with legitimately missing values.
</p>
<p>The utility of this function is limited to simple logic where all of the
data exist within the same row. Any complex statements using events
will result in a failure.
</p>


<h3>Value</h3>

<p>Returns a list of unevaluated expressions.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+missingSummary">missingSummary()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
parseBranchingLogic("[age] &gt; 30")
parseBranchingLogic("[dropdown_test] = 'd'")
parseBranchingLogic(c("[age] &gt; 30", 
                      "[dropdown_test] = 'd'"))

## End(Not run)

</code></pre>

<hr>
<h2 id='prepUserImportData'>Prepare User Data for Import</h2><span id='topic+prepUserImportData'></span>

<h3>Description</h3>

<p>Prepares a data frame for import via the API. Allows for
data to be passed in either the raw format or the labeled data
received from <code>exportUsers</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepUserImportData(data, rcon, consolidate = TRUE, user_role = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepUserImportData_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with the structure of
<code>redcapAPI:::REDCAP_USER_STRUCTURE</code>. It may also have additional
columns for the form and export access of each of the instruments.</p>
</td></tr>
<tr><td><code id="prepUserImportData_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="prepUserImportData_+3A_consolidate">consolidate</code></td>
<td>
<p><code>logical(1)</code> If <code>TRUE</code>, the form and data
export access values will be read from the expanded columns. Otherwise,
the consolidated values (as provided by the API export) are utilized.</p>
</td></tr>
<tr><td><code id="prepUserImportData_+3A_user_role">user_role</code></td>
<td>
<p><code>logical(1)</code> If <code>TRUE</code>, the code will
treat the data as if it is being prepared for importing User Roles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.frame</code> with user settings that will be accepted by the
API for import.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+importUsers">importUsers()</a></code>, <br />
<code><a href="#topic+importUserRoles">importUserRoles()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())


# Prep user data
NewData &lt;- data.frame(username = "target_user", 
                      design = 1, 
                      api_export = "Access", 
                      api_import = "No Access", 
                      surveys_enabled = 0)
prepUserImportData(data = NewData, 
                   rcon = rcon)
                   
# Prep user role data
NewData &lt;- data.frame(unique_role_name = "target_user", 
                      design = 1, 
                      api_export = "Access", 
                      api_import = "No Access", 
                      surveys_enabled = 0)
prepUserImportData(data = NewData, 
                   rcon = rcon)

## End(Not run)

</code></pre>

<hr>
<h2 id='preserveProject'>Preserve Project Data Locally</h2><span id='topic+preserveProject'></span><span id='topic+preserveProject.redcapApiConnection'></span><span id='topic+readPreservedProject'></span><span id='topic+readPreservedProject.list'></span><span id='topic+readPreservedProject.character'></span>

<h3>Description</h3>

<p>The methods enable the user to export a project data and
meta data into local memory. For convenience, options are provided
to save the objects to files on the local machine. Files may be
saved as either .Rdata files or .csv files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preserveProject(rcon, ..., save_as = NULL, dir, dir_create = TRUE)

## S3 method for class 'redcapApiConnection'
preserveProject(
  rcon,
  ...,
  save_as = NULL,
  dir,
  dir_create = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)

readPreservedProject(x, ...)

## S3 method for class 'list'
readPreservedProject(x, ..., version = NULL, url = NULL)

## S3 method for class 'character'
readPreservedProject(x, ..., version = NULL, url = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="preserveProject_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_...">...</code></td>
<td>
<p>arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_save_as">save_as</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>. When <code>"Rdata"</code>, the data objects
will be saved to an .Rdata file.
When <code>"csv"</code>, the data objects will
be written to files at <code>dir</code>. Any other character value will prompt an
error.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code>. The path to a directory in which the data
objects (or files) will be saved. Must be provided if <code>save_as</code> is not
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_dir_create">dir_create</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, an attempt will be made to
create the directory at <code>dir</code> if it does not already exist. When <code>FALSE</code>,
and the directory does not exist, an error is returned.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_config">config</code></td>
<td>
<p>A list to be passed to <code><a href="httr.html#topic+POST">httr::POST()</a></code>.  This allows the
user to set additional configurations for the API calls, such as
certificates, SSL version, etc. For the majority of users, this does
not need to be altered.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_x">x</code></td>
<td>
<p><code>list</code> or <code>character</code>. If a <code>list</code>, the list returned (or saved)
by <code>preserveProject</code>. If <code>character</code>, the directory to which the
CSV files are saved by <code>preserveProject</code>.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_version">version</code></td>
<td>
<p><code>character(1)</code> giving the instance's REDCap version number.</p>
</td></tr>
<tr><td><code id="preserveProject_+3A_url">url</code></td>
<td>
<p><code>character(1)</code>. URL for the user's REDCap database API.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The options to save files to local files provide the user a
convenient tool set for providing other users with the ability to work
with data offline. See the examples for suggestions on how to read data
into an <code>offlineConnection</code>.
</p>
<p>When saving to an .Rdata file, the data are saved in a list named
<code>RedcapList</code>. The list has the same elements in the list returned when
<code>save_as = NULL</code> and is suitable for creating an <code>offlineConnection</code>.
The file name it is saved to follows the pattern
<code>"project-[project_id]-RedcapList.Rdata"</code>.
</p>
<p>When saving to a .csv file, each element of the data is saved to a
file with the pattern <code>"project-[project_id]-[data type].csv"</code>.
</p>
<p><code>readPreservedProject</code> is a function of convenience for users who
need to work using offline connections. If given a <code>list</code>, it
must be in the format returned by <code>preserveProject</code>. If given a
<code>character</code>, it must be the directory in which the CSV files were
saved by <code>preserveProject</code>. If any of the file names have been changed,
<code>readPreservedProject</code> will fail to execute. Refer to
<code>vignette("redcapAPI-offline-connection", package = "redcapAPI")</code>
for more details.
</p>


<h3>Value</h3>



<h4>'preserveProject</h4>

<p><code>When</code>save_as = NULL', returns a list is returned with the elements
</p>

<ul>
<li> <p><code>project_information</code>
</p>
</li>
<li> <p><code>arms</code>
</p>
</li>
<li> <p><code>events</code>
</p>
</li>
<li> <p><code>meta_data</code>
</p>
</li>
<li> <p><code>mappings</code>
</p>
</li>
<li> <p><code>repeating_instruments</code>
</p>
</li>
<li> <p><code>users</code>
</p>
</li>
<li> <p><code>user_roles</code>
</p>
</li>
<li> <p><code>user_role_assignments</code>
</p>
</li>
<li> <p><code>dags</code>
</p>
</li>
<li> <p><code>dag_assignments</code>
</p>
</li>
<li> <p><code>records</code>
</p>
</li></ul>

<p>When <code>save_as</code> is not <code>NULL</code>, the logical <code>TRUE</code> is invisibly returned
to provide an indication that the save operation(s) are complete.
</p>



<h4><code>readPreservedProject</code></h4>

<p>Returns a <code>redcapOfflineConnection</code> object.
</p>



<h3>See Also</h3>

<p><code>vignette("redcapAPI-offline-connection", package = "redcapAPI")</code>,<br />
<code><a href="#topic+offlineConnection">offlineConnection()</a></code> <br />
<br />
<code><a href="#topic+purgeProject">purgeProject()</a></code>, <br />
<code><a href="#topic+restoreProject">restoreProject()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Save a project to the current session

projectData &lt;- preserveProject(rcon)


# Save a project to an Rdata file

save_to_dir &lt;- tempdir()
preserveProject(rcon, 
                save_as = "Rdata", 
                dir = save_to_dir)

# Create an offline connection from the Rdata file
load(file.path(save_to_dir, 
               "project-[project_id]-RedcapList.Rdata"))

off_conn &lt;- readPreservedProject(RedcapList, 
                                 version = "[redcap_api_version]", 
                                 url = "[redcap_api_url]")
                  
                  
# Save a project to CSV files

save_to_dir &lt;- tempdir()
preserveProject(rcon, 
                save_as = "csv", 
                dir = save_to_dir)
                
# Create an offline connection from the CSV files

off_con &lt;- 
 readPreservedProject(save_to_dir, 
                      version = "[redcap_api_version]", 
                      url = "[redcap_api_url]")

## End(Not run)

  
</code></pre>

<hr>
<h2 id='projectInformationMethods'>Export and Import Project Settings</h2><span id='topic+projectInformationMethods'></span><span id='topic+exportProjectInformation'></span><span id='topic+importProjectInformation'></span><span id='topic+exportProjectInformation.redcapApiConnection'></span><span id='topic+importProjectInformation.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export or update project
level settings, such as the project title, if it is longitudinal,
if surveys are enabled, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportProjectInformation(rcon, ...)

importProjectInformation(rcon, data, ...)

## S3 method for class 'redcapApiConnection'
exportProjectInformation(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importProjectInformation(
  rcon,
  data,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="projectInformationMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with only one row and any subset of allowable fields to be
updated. See Details.</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. If <code>TRUE</code>, the cached project information
will be updated after the import.</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="projectInformationMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When importing, fields that are not editable will be quietly removed prior to
import. This allows the user to use the result of
<code>exportProjectInformation</code> as a template for the import.
</p>
<p>For any values that are boolean, they should be represented as either a '0'
(no/false) or '1' (yes/true).
</p>
<p>It is not required for <code>data</code> to have all of the fields, but only
the fields the user wishes to update (see examples).
</p>
<p>The following project attributes can be updated:
</p>

<ul>
<li><p> project_title
</p>
</li>
<li><p> project_language
</p>
</li>
<li><p> purpose
</p>
</li>
<li><p> purpose_other
</p>
</li>
<li><p> project_notes
</p>
</li>
<li><p> custom_record_label
</p>
</li>
<li><p> secondary_unique_field
</p>
</li>
<li><p> is_longitudinal
</p>
</li>
<li><p> surveys_enabled
</p>
</li>
<li><p> scheduling_enabled
</p>
</li>
<li><p> record_autonumbering_enabled
</p>
</li>
<li><p> randomization_enabled
</p>
</li>
<li><p> project_irb_number
</p>
</li>
<li><p> project_grant_number
</p>
</li>
<li><p> project_pi_firstname
</p>
</li>
<li><p> project_pi_lastname
</p>
</li>
<li><p> display_today_now_button
</p>
</li>
<li><p> bypass_branching_erase_field_prompt
</p>
</li></ul>



<h3>Value</h3>

<p><code>exportProjectInformation</code> returns a data frame with the columns</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_id</code> </td><td style="text-align: left;"> The internal ID number assigned to the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_title</code> </td><td style="text-align: left;"> The project title given to the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>creation_time</code> </td><td style="text-align: left;"> The date/time the project was created. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>production_time</code> </td><td style="text-align: left;"> The date/time the project was moved into production status. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>in_production</code> </td><td style="text-align: left;"> Boolean value indicating if the project is in production status. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_language</code> </td><td style="text-align: left;"> The language associated with the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>purpose</code> </td><td style="text-align: left;"> An integerish value identifying the purpose of the project. 0 = "Practice/Just for fun", 1 = "Other", 2 = "Research", 3 = "Quality Improvement", 4 = "Operational Support". </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>purpose_other</code> </td><td style="text-align: left;"> The user supplied character value given when the project purpose is 'Other'. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_notes</code> </td><td style="text-align: left;"> The user supplied notes about the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>custom_record_label</code> </td><td style="text-align: left;"> The user provided custom label for the record identifier field. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>secondary_unique_field</code> </td><td style="text-align: left;"> The name of the secondary unique field, if this has been configured. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>is_longitudinal</code> </td><td style="text-align: left;"> Boolean value indicating if the project is a longitudinal project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>has_repeating_instruments_or_events</code> </td><td style="text-align: left;"> Boolean value indicating if the repeating instruments or events module has been enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>surveys_enabled</code> </td><td style="text-align: left;"> Boolean value indicating if the surveys module has been enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>scheduling_enabled</code> </td><td style="text-align: left;"> Boolean value indicating if the scheduling module has been enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_autonumbering_enabled</code> </td><td style="text-align: left;"> Boolean value indicating if the record autonumbering feature has been enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>randomization_enabled</code> </td><td style="text-align: left;"> Boolean value indicating if the randomization module has been enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>ddp_enabled</code> </td><td style="text-align: left;"> Boolean value indicating if dynamic data pull has been enabled for a project (may only be enabled by a REDCap administrator). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_irb_number</code> </td><td style="text-align: left;"> The user provided IRB number for the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_grant_number</code> </td><td style="text-align: left;"> The user provided grant number for the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_pi_firstname</code> </td><td style="text-align: left;"> The first name of the principal investigator. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>project_pi_lastname</code> </td><td style="text-align: left;"> The last name of the principal investigator. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>display_today_now_button</code> </td><td style="text-align: left;"> Boolean value indicating if the today/now button is displayed for date/time fields in the UI. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>missing_data_codes</code> </td><td style="text-align: left;"> Character value giving the missing data codes enabled for the project. They are given in the format <code style="white-space: pre;">&#8288;[code],[label]&#8288;</code>, with each coding separated by a pipe character. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>external_modules</code> </td><td style="text-align: left;"> Character value listing the external modules enabled. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bypass_branching_erase_field_prompt</code> </td><td style="text-align: left;"> Boolean value indicating if the box for "Prevent branching logic from hiding fields that have values" has been checked under "Additional Customizations." </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importProjectInformation</code> invisibly returns the number of fields updated.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportProjectInformation()</code>: Export project settings.
</p>
</li>
<li> <p><code>importProjectInformation()</code>: Import project settings.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export Project Information
exportProjectInformation(rcon)

# Import a new project title
NewData &lt;- data.frame(project_title = "New Title Name")
importProjectInformation(rcon, 
                         data = NewData)
                         
# Enable surveys in the project
NewData &lt;- data.frame(surveys_enabled = 1)
importProjectInformation(rcon, 
                         data = NewData)
                         
# Change multiple fields in the project settings
NewData &lt;- data.frame(project_irb_number = "IRB-12345", 
                      display_today_now_button = 0, 
                      scheduling_enabled = 1)
importProjectInformation(rcon, 
                         data = NewData)

## End(Not run)

</code></pre>

<hr>
<h2 id='purgeRestoreProject'>Purge and Restore Project Data</h2><span id='topic+purgeRestoreProject'></span><span id='topic+purgeProject'></span><span id='topic+purgeProject.redcapApiConnection'></span><span id='topic+restoreProject'></span><span id='topic+restoreProject.redcapApiConnection'></span><span id='topic+restoreProject.list'></span>

<h3>Description</h3>

<p>These functions are primarily intended to assist with testing
features of <code>redcapAPI</code>. Purging and restoring project data permits
us to perform tests on different project structures without having to
manage multiple projects or API tokens.
</p>
<p>When purging project data, many of these actions may
only be performed with a project in development status, as they are
potentially destructive and may result in data loss. It is a good
practice to back up your data and project structure before purging
a project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>purgeProject(object, ...)

## S3 method for class 'redcapApiConnection'
purgeProject(
  object,
  arms = FALSE,
  events = FALSE,
  users = FALSE,
  user_roles = FALSE,
  dags = FALSE,
  records = FALSE,
  purge_all = FALSE,
  flush = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)

restoreProject(object, ...)

## S3 method for class 'redcapApiConnection'
restoreProject(
  object,
  project_information = NULL,
  arms = NULL,
  events = NULL,
  meta_data = NULL,
  mappings = NULL,
  repeating_instruments = NULL,
  users = NULL,
  user_roles = NULL,
  user_role_assignments = NULL,
  dags = NULL,
  dag_assignments = NULL,
  records = NULL,
  flush = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)

## S3 method for class 'list'
restoreProject(
  object,
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="purgeRestoreProject_+3A_object">object</code>, <code id="purgeRestoreProject_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object. Except in
<code>restoreProject.list</code>, where <code>object</code> is a list of data frames
to use in restoring the project.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_arms">arms</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if arms data should be
purged from the project; or a <code>data.frame</code> for restoring arms
data via <code>importArms</code>.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_events">events</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if events data should be
purged from the project; or a <code>data.frame</code> for restoring events
data via <code>importEvents</code></p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_users">users</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if users data should be
purged from the project; or a <code>data.frame</code> for restoring users
data via <code>importUsers</code>. NOT YET IMPLEMENTED</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_user_roles">user_roles</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if user roles data should be
purged from the project; or a <code>data.frame</code> for restoring user roles
data via <code>importUserRoles</code>. NOT YET IMPLEMENTED</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_dags">dags</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if DAG data should be
purged from the project; or a <code>data.frame</code> for restoring DAGs
data via <code>importDags</code>. NOT YET IMPLEMENTED</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_records">records</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if records data should be
purged from the project; or a <code>data.frame</code> for restoring records
data via <code>importRecords</code></p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_purge_all">purge_all</code></td>
<td>
<p><code>logical(1)</code>. A shortcut option to purge all
data elements from a project.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_flush">flush</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, all caches in the connection
object will be flushed after completing the operation. This is highly
recommended.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_project_information">project_information</code></td>
<td>
<p><code>data.frame</code> for restoring data. Provides the
project settings to load via <code>importProjectInformation</code>.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_meta_data">meta_data</code></td>
<td>
<p>A <code>data.frame</code> for restoring metadata
data via <code>importMetaData</code>. The API does not support deleting
metadata, but an import replaces the existing metadata.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_mappings">mappings</code></td>
<td>
<p>A <code>data.frame</code> for restoring instrument-event mappings
via <code>importMappings</code>. The API does not support deleting
mappings, but an import replaces the existing mappings.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_repeating_instruments">repeating_instruments</code></td>
<td>
<p>A <code>data.frame</code> for restoring repeating instruments
configuration via <code><a href="#topic+importRepeatingInstrumentsEvents">importRepeatingInstrumentsEvents()</a></code>. The API does not support deleting
repeating instruments, but an import replaces the existing instruments.
NOT YET IMPLEMENTED</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_user_role_assignments">user_role_assignments</code></td>
<td>
<p>A <code>data.frame</code> for restoring user-role
assignments via <code>importUserRoleAssignments</code>. The API does not support deleting
assignments, but an import replaces the existing assignments. NOT YET IMPLEMENTED.</p>
</td></tr>
<tr><td><code id="purgeRestoreProject_+3A_dag_assignments">dag_assignments</code></td>
<td>
<p>A <code>data.frame</code> for restoring DAG
assignments via <code>importDagAssignments</code>. The API does not support deleting
assignments, but an import replaces the existing assignments. NOT YET IMPLEMENTED.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When restoring a project, all arguments are optional. Any argument
that is <code>NULL</code> will result in no import being made. The order of
reconstructing the project is (purging data occurs in the reverse order):
</p>

<ol>
<li><p> Update project information
</p>
</li>
<li><p> Import Arms Data
</p>
</li>
<li><p> Import Events Data
</p>
</li>
<li><p> Import Meta Data
</p>
</li>
<li><p> Import Mappings
</p>
</li>
<li><p> Import Repeating Instruments
</p>
</li>
<li><p> Import Users
</p>
</li>
<li><p> Import User Roles
</p>
</li>
<li><p> Import User-Role Assignments
</p>
</li>
<li><p> Import Data Access Groups
</p>
</li>
<li><p> Import Data Access Group Assignments
</p>
</li>
<li><p> Import Records
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Preserve a project
preserveProject(rcon)

# Purge a project
purgeProject(rcon, 
             purge_all = TRUE)
                
# Restore a project
restoreProject(rcon)


## End(Not run)

</code></pre>

<hr>
<h2 id='recodeCheck'>Change labeling of <code>checkbox</code> variables</h2><span id='topic+recodeCheck'></span>

<h3>Description</h3>

<p>Rewrites the labeling of <code>checkbox</code> variables from
Checked/Unchecked to Yes/No (or some other user specified labeling).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recodeCheck(
  df,
  vars,
  old = c("Unchecked", "Checked"),
  new = c("No", "Yes"),
  reverse = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recodeCheck_+3A_df">df</code></td>
<td>
<p>A data frame, presumably retrieved from REDCap, though not a
strict requirement.</p>
</td></tr>
<tr><td><code id="recodeCheck_+3A_vars">vars</code></td>
<td>
<p>Optional character vector of variables to convert.  If left
missing, all of the variables in <code>df</code> that are identified as
<code>checkbox</code> variables are relabeled.  See 'Details' for more about
identifying <code>checkbox</code> variables.</p>
</td></tr>
<tr><td><code id="recodeCheck_+3A_old">old</code></td>
<td>
<p>A character vector to be passed to <code>factor</code>.
This indicates the levels to be replaced and their order.</p>
</td></tr>
<tr><td><code id="recodeCheck_+3A_new">new</code></td>
<td>
<p>A character vector of labels to replace the values in
<code>levels</code>.  The first value becomes the reference value.</p>
</td></tr>
<tr><td><code id="recodeCheck_+3A_reverse">reverse</code></td>
<td>
<p>For convenience, if the user would prefer to reverse the
order of the elements in <code>levels</code> and <code>labels</code>,
simply set this to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>checkbox</code> variables are not identified using the metadata
from the REDCap database.  Instead, variables are scanned, and those
variables in which every value is in <code>levels</code> are assumed to be
<code>checkbox</code> variables.
</p>
<p>Realistically, this could be used to relabel any set of factors with
identical labels, regardless of the data source.  The number of labels is
not limited, but <code>levels</code> and <code>labels</code> should have the same length.
</p>
<p>The actual code to perform this is not particularly difficult
(<code>df[checkbox] &lt;- lapply(df[checkbox], factor, levels=levels, labels=labels)</code>),
but <code>checkbox</code> variables are common enough in REDCap
(and the Checked/Unchecked scheme so unpalatable) that a quick way to
replace the labels was highly desirable
</p>

<hr>
<h2 id='reconstituteFileFromExport'>Save a File to a Local Directory from a Response</h2><span id='topic+reconstituteFileFromExport'></span>

<h3>Description</h3>

<p>Converts the file from a <code>response</code> object and saves
it to the local file directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reconstituteFileFromExport(
  response,
  dir,
  dir_create = FALSE,
  file_prefix = "",
  filename = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reconstituteFileFromExport_+3A_response">response</code></td>
<td>
<p>An object of class <code>response</code>.</p>
</td></tr>
<tr><td><code id="reconstituteFileFromExport_+3A_dir">dir</code></td>
<td>
<p><code>character(1)</code> A directory on the local file system into
which the file will be saved.</p>
</td></tr>
<tr><td><code id="reconstituteFileFromExport_+3A_dir_create">dir_create</code></td>
<td>
<p><code>logical(1)</code> If TRUE and the directory does not
exist, it will be created. Defaults to FALSE.
If dir does not exist and create = FALSE, an error is thrown.</p>
</td></tr>
<tr><td><code id="reconstituteFileFromExport_+3A_file_prefix">file_prefix</code></td>
<td>
<p><code>character(1)</code> An optional prefix to prepend to
the file name. This may be desirable to explicitly associate files
with a record and/or event.</p>
</td></tr>
<tr><td><code id="reconstituteFileFromExport_+3A_filename">filename</code></td>
<td>
<p><code>character(0/1)</code> An optional filename. This is used
in the case where a filename is being provided. It this has length 0,
the filename will be extracted from the API response.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+exportFiles">exportFiles()</a></code>, <br />
<code><a href="#topic+exportFromFileRepository">exportFromFileRepository()</a></code>, <br />
<code><a href="#topic+exportFileRepository">exportFileRepository()</a></code>, <br />
<code><a href="#topic+exportPdf">exportPdf()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
response &lt;- makeApiCall(rcon, 
                        body = list(content = 'file', 
                        action = 'export', 
                        record = '1', 
                        field = 'file_upload_test', 
                        event = 'event_1_arm_1'))
reconstituteFileFromExport(response,  
                           dir = tempdir())

## End(Not run)  
  
</code></pre>

<hr>
<h2 id='recordsManagementMethods'>Export Next Record Name or Rename a Record</h2><span id='topic+recordsManagementMethods'></span><span id='topic+exportNextRecordName'></span><span id='topic+renameRecord'></span><span id='topic+exportNextRecordName.redcapApiConnection'></span><span id='topic+renameRecord.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to get the next record name
(when auto numbering is enabled) or rename and existing record.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportNextRecordName(rcon, ...)

renameRecord(rcon, record_name, new_record_name, arm = NULL, ...)

## S3 method for class 'redcapApiConnection'
exportNextRecordName(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
renameRecord(
  rcon,
  record_name,
  new_record_name,
  arm = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordsManagementMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_record_name">record_name</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code>.
The name of an existing record in the project.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_new_record_name">new_record_name</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code>.
The new name to give to the record.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_arm">arm</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, an optional arm number.
If <code>NULL</code>, then all records with same name across all arms on
which it exists (if longitudinal with multiple arms) will be
renamed to new record name, otherwise it will rename the record
only in the specified arm.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="recordsManagementMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>exportNextRecordName</code> returns an integerish value. The value is
determined by looking up the highest record ID number in the
project and incrementing it by 1.
</p>
<p><code>renameRecord</code> invisibly returns a logical value that indicates if the
operation was successful. Otherwise, an error is thrown.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportNextRecordName()</code>: Get the ID number for the next record to be created.
</p>
</li>
<li> <p><code>renameRecord()</code>: Rename an existing record.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecords">exportRecords()</a></code>, <br />
<code><a href="#topic+exportReports">exportReports()</a></code>, <br />
<code><a href="#topic+importRecords">importRecords()</a></code>, <br />
<code><a href="#topic+deleteRecords">deleteRecords()</a></code>, <br />
<code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Get the next record name
exportNextRecordName(rcon)

# Rename an existing record
renameRecord(rcon, 
             record_name = "1", 
             new_record_name = "42")

## End(Not run)

</code></pre>

<hr>
<h2 id='recordsMethods'>Export Records and Reports</h2><span id='topic+recordsMethods'></span><span id='topic+exportRecords'></span><span id='topic+exportRecords_offline'></span><span id='topic+exportReports'></span><span id='topic+exportRecords.redcapApiConnection'></span><span id='topic+exportReports.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export records and reports
from a project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportRecords(
  rcon,
  factors = TRUE,
  fields = NULL,
  forms = NULL,
  records = NULL,
  events = NULL,
  labels = TRUE,
  dates = TRUE,
  drop = NULL,
  survey = TRUE,
  dag = TRUE,
  checkboxLabels = FALSE,
  colClasses = character(0),
  ...
)

exportRecords_offline(
  dataFile,
  metaDataFile,
  factors = TRUE,
  fields = NULL,
  forms = NULL,
  labels = TRUE,
  dates = TRUE,
  checkboxLabels = FALSE,
  colClasses = NA,
  ...,
  meta_data
)

exportReports(
  rcon,
  report_id,
  factors = TRUE,
  labels = TRUE,
  dates = TRUE,
  drop = NULL,
  checkboxLabels = FALSE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportRecords(
  rcon,
  factors = TRUE,
  fields = NULL,
  forms = NULL,
  records = NULL,
  events = NULL,
  labels = TRUE,
  dates = TRUE,
  drop = NULL,
  survey = TRUE,
  dag = TRUE,
  checkboxLabels = FALSE,
  colClasses = character(0),
  ...,
  batch.size = -1,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list(),
  form_complete_auto = TRUE
)

## S3 method for class 'redcapApiConnection'
exportReports(
  rcon,
  report_id,
  factors = TRUE,
  labels = TRUE,
  dates = TRUE,
  drop = NULL,
  checkboxLabels = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordsMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_report_id">report_id</code></td>
<td>
<p><code>integerish(1)</code>. Gives the report id of the desired report.
This is located on the Report Builder page of the user interface.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_factors">factors</code></td>
<td>
<p><code>logical(1)</code>.  When <code>TRUE</code>, multiple choice fields
will be returned as factors. Otherwise, they are returned as
character values. See 'Exporting Records'
for more on how this interacts with the <code>checkboxLabels</code> argument.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_fields">fields</code></td>
<td>
<p><code>character</code>. Fields to be returned.  When <code>NULL</code>,
all fields are returned.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_forms">forms</code></td>
<td>
<p><code>character</code>. Forms to be returned.  When <code>NULL</code>,
all forms are returned.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_records">records</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. Record ID's to be
returned.  When <code>NULL</code>, all records are returned.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_events">events</code></td>
<td>
<p><code>character</code>. Events to be returned from a
longitudinal database.  When <code>NULL</code>, all events are returned.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_labels">labels</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, field labels are
attached to each column as an attribute.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_dates">dates</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, date variables are converted to
<code>POSIXct</code> objects.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_drop">drop</code></td>
<td>
<p><code>character</code>. An optional vector of REDCap field names to
remove from the dataset. Ignored when <code>NULL</code>. Any fields in this
argument that do not exist in the project will be ignored.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_survey">survey</code></td>
<td>
<p><code>logical(1)</code>. specifies whether or not to export the survey identifier field
(<code>redcap_survey_identifier</code>) or survey timestamp fields
(<code style="white-space: pre;">&#8288;[form_name]_timestamp&#8288;</code>) when surveys are utilized in the project.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_dag">dag</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the system field
<code>redcap_data_access_group</code> is included in the export.
This option is only
viable if the user whose token is being used to make the API request is
not in a data access group. If the user is in a group, then this
flag will revert to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_checkboxlabels">checkboxLabels</code></td>
<td>
<p><code>logical(1)</code>. When <code>FALSE</code> labels are
applied as &quot;Unchecked&quot;/&quot;Checked&quot;.
When <code>TRUE</code>, they are applied as <code style="white-space: pre;">&#8288;""/[field_label]&#8288;</code> where <code style="white-space: pre;">&#8288;[field_label]&#8288;</code>
is the label assigned to the level in the data dictionary.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_form_complete_auto">form_complete_auto</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>
(default), the <code style="white-space: pre;">&#8288;[form]_complete&#8288;</code> fields for any form
from which at least one variable is requested will automatically
be retrieved.  When <code>FALSE</code>, these fields must be
explicitly requested.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_colclasses">colClasses</code></td>
<td>
<p>Named <code>character</code> vector. Column classes passed to
<code><a href="utils.html#topic+read.table">utils::read.csv()</a></code> calls.
Useful to force the interpretation of a column in a specific type and
avoid an unexpected recast.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_batch.size">batch.size</code></td>
<td>
<p><code>integerish(1)</code>.  Specifies the number of subjects to be included
in each batch of a batched export or import.  Non-positive numbers
export/import the entire operation in a single batch.
Batching may be beneficial to prevent tying up smaller servers.
See Details.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_datafile">dataFile</code></td>
<td>
<p><code>character(1)</code>. Gives the location
of the dataset downloaded from REDCap.  This should be the raw
(unlabeled) data set.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_metadatafile">metaDataFile</code></td>
<td>
<p><code>character(1)</code>. Gives the location of the data dictionary
downloaded from REDCap.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
<tr><td><code id="recordsMethods_+3A_meta_data">meta_data</code></td>
<td>
<p>Deprecated version of <code>metaDataFile</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is unnecessary to include '&quot;redcap_event_name&quot;&ldquo; in the fields argument.
This field is automatically exported for any longitudinal database.
If the user does include it in the fields argument, it is removed quietly
in the parameter checks.
</p>
<p>There are four ways the data from checkbox variables may be
represented depending on the values of <code>factors</code> and
<code>checkboxLabels</code>. The most common are the first and third
rows of the table below.  When <code>checkboxLabels = TRUE</code>, either
the coded value or the labeled value is returned if the box is
checked, or an empty string if it is not.</p>

<table>
<tr>
 <td style="text-align: left;">
   <code>factors</code> </td><td style="text-align: left;"> <code>checkboxLabels</code> </td><td style="text-align: left;"> <code>Output</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>FALSE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td><td style="text-align: left;"> 0 / 1 </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>FALSE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> "" / code </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td><td style="text-align: left;"> Unchecked / Checked </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> "" / label </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The 'offline' version of <code>exportReports</code> operates on the raw (unlabeled) data
file downloaded from REDCap along with the data dictionary.
This is made available for instances where the API cannot be accessed for
some reason (such as waiting for API approval from the REDCap administrator).
</p>
<p>A 'batched' export (or import) is one where the export is performed over a series of
API calls rather than one large call.  For large projects on small servers,
this may prevent a single user from tying up the server and forcing others
to wait on a larger job.  The batched export is performed by first
calling the API to export the record identifier field (the first field
in the meta data).  The unique ID's are then assigned a batch number with
no more than <code>batch.size</code> ID's in any single batch.  The batches are
exported from the API and stacked together.
</p>
<p>In longitudinal projects, <code>batch.size</code> may not necessarily be the
number of records exported in each batch.  If <code>batch.size</code> is ten and
there are four records per patient, each batch will consist of 40 records.
Thus, if the user is concerned about tying up the server with a large,
longitudinal project, it would be prudent to use a smaller batch size.
</p>


<h3>Value</h3>

<p><code>exportRecords</code> returns a data frame with the project data. The
data will be formatted consistent with the meta data and the arguments
provided by the user.
</p>
<p><code>exportReports</code> returns a data frame with the data from the requested
report. The data will be formatted consisted with the meta data and
the arguments provided by the user.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportRecords()</code>: Export records from a project.
</p>
</li>
<li> <p><code>exportRecords_offline()</code>: Format records from REDCap data file exports.
</p>
</li>
<li> <p><code>exportReports()</code>: Export data via a report.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>, <br />
<code><a href="#topic+importRecords">importRecords()</a></code>, <br />
<code><a href="#topic+deleteRecords">deleteRecords()</a></code>, <br />
<code><a href="#topic+exportNextRecordName">exportNextRecordName()</a></code>, <br />
<code><a href="#topic+renameRecord">renameRecord()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export records
exportRecords(rcon)

# Export records in batches of one hundred IDs
exportRecords(rcon, 
              batch.size = 100)
              
# Export records without factors
exportRecords(rcon, 
              factors = FALSE)
              

# Export a report
exportReports(rcon, 
              report_id = 12345)
              
# Export raw data
exportRecordsTyped(rcon, 
                   validation = skip_validation,
                   cast = raw_cast)


## End(Not run)


</code></pre>

<hr>
<h2 id='recordsTypedMethods'>Export Records or Reports From a Project</h2><span id='topic+recordsTypedMethods'></span><span id='topic+exportRecordsTyped'></span><span id='topic+exportReportsTyped'></span><span id='topic+exportRecordsTyped.redcapApiConnection'></span><span id='topic+exportRecordsTyped.redcapOfflineConnection'></span><span id='topic+exportReportsTyped.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export records from a
database or from a report. These methods have more control for casting
fields to R objects than <code>exportRecords</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportRecordsTyped(
  rcon,
  fields = NULL,
  drop_fields = NULL,
  forms = NULL,
  records = NULL,
  events = NULL,
  ...
)

exportReportsTyped(rcon, report_id, ...)

## S3 method for class 'redcapApiConnection'
exportRecordsTyped(
  rcon,
  fields = NULL,
  drop_fields = NULL,
  forms = NULL,
  records = NULL,
  events = NULL,
  survey = TRUE,
  dag = TRUE,
  date_begin = NULL,
  date_end = NULL,
  na = list(),
  validation = list(),
  cast = list(),
  assignment = list(label = stripHTMLandUnicode, units = unitsFieldAnnotation),
  filter_empty_rows = TRUE,
  warn_zero_coded = TRUE,
  ...,
  config = list(),
  api_param = list(),
  csv_delimiter = ",",
  batch_size = NULL,
  error_handling = getOption("redcap_error_handling")
)

## S3 method for class 'redcapOfflineConnection'
exportRecordsTyped(
  rcon,
  fields = NULL,
  drop_fields = NULL,
  forms = NULL,
  records = NULL,
  events = NULL,
  na = list(),
  validation = list(),
  cast = list(),
  assignment = list(label = stripHTMLandUnicode, units = unitsFieldAnnotation),
  warn_zero_coded = TRUE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportReportsTyped(
  rcon,
  report_id,
  drop_fields = NULL,
  na = list(),
  validation = list(),
  cast = list(),
  assignment = list(label = stripHTMLandUnicode, units = unitsFieldAnnotation),
  warn_zero_coded = TRUE,
  ...,
  config = list(),
  api_param = list(),
  csv_delimiter = ","
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordsTypedMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_report_id">report_id</code></td>
<td>
<p><code>integerish(1)</code>. The ID number of the report to be exported.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_fields">fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. Vector of fields to be returned.  If <code>NULL</code>,
all fields are returned (unless <code>forms</code> is specified).</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_drop_fields">drop_fields</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. A vector of field names to remove from
the export.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_forms">forms</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. Vector of forms to be returned.  If <code>NULL</code>,
all forms are returned (unless <code>fields</code> is specified.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_records">records</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. A vector of study ID's
to be returned.  If <code>NULL</code>, all subjects are returned.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_events">events</code></td>
<td>
<p>A <code>character</code> vector of events to be returned from a
longitudinal database.  If <code>NULL</code>, all events are returned. When
using a <code>redcapOfflineConnection</code> object, this argument is unvalidated,
and only rows that match one of the values given are returned;
misspellings may result in unexpected results.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_survey">survey</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the survey identifier field
(e.g., <code>redcap_survey_identifier</code>) and survey timestamp fields
(e.g., <code style="white-space: pre;">&#8288;[form_name]_timestamp&#8288;</code>) will be exported
(relevant only when surveys are utilized in the project).</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_dag">dag</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the
<code>redcap_data_access_group</code> field will be included in the export \
when data access groups are utilized in the project.
This flag is only viable if the user whose token is
being used to make the API request is not in a data access group.
If the user is in a group, then this flag will revert to its default value.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_date_begin">date_begin</code></td>
<td>
<p><code>POSIXct(1)</code> or <code>NULL</code>. Ignored if <code>NULL</code> (default).
Otherwise, records created or modified after this date will be returned.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_date_end">date_end</code></td>
<td>
<p><code>POSIXct(1)</code> or <code>NULL</code>. Ignored if <code>NULL</code> (default).
Otherwise, records created or modified before this date will be returned.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_na">na</code></td>
<td>
<p>A named <code>list</code> of user specified functions to determine if the
data is NA. This is useful when data is loaded that has coding for NA, e.g.
-5 is NA. Keys must correspond to a truncated REDCap field type, i.e.
date_, datetime_, datetime_seconds_, time_mm_ss, time_hh_mm_ss, time, float,
number, calc, int, integer, select, radio, dropdown, yesno, truefalse,
checkbox, form_complete, sql, system. The function will be provided the
variables (x, field_name, coding). The function must return a vector of
logicals matching the input. It defaults to <code><a href="#topic+isNAorBlank">isNAorBlank()</a></code> for all
entries.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_validation">validation</code></td>
<td>
<p>A named <code>list</code> of user specified validation functions. The
same named keys are supported as the na argument. The function will be
provided the variables (x, field_name, coding). The function must return a
vector of logical matching the input length. Helper functions to construct
these are <code><a href="#topic+valRx">valRx()</a></code> and <code><a href="#topic+valChoice">valChoice()</a></code>. Only fields that
are not identified as NA will be passed to validation functions.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_cast">cast</code></td>
<td>
<p>A named <code>list</code> of user specified class casting functions. The
same named keys are supported as the na argument. The function will be
provided the variables (x, field_name, coding). The function must return a
vector of logical matching the input length. The cast should match the validation,
if one is using <code>raw_cast</code>, then <code>validation=skip_validation</code> is likely
the desired intent. See <code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code></p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_assignment">assignment</code></td>
<td>
<p>A named <code>list</code> of functions. These functions are provided, field_name,
label, description and field_type and return a list of attributes to assign
to the column. Defaults to creating a label attribute from the stripped
HTML and UNICODE raw label and scanning for units={&quot;UNITS&quot;} in description</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_filter_empty_rows">filter_empty_rows</code></td>
<td>
<p><code>logical(1)</code>. Filter out empty rows post retrieval.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_csv_delimiter">csv_delimiter</code></td>
<td>
<p><code>character</code>. One of <code>c(",", "\t", ";", "|", "^")</code>. Designates the
delimiter for the CSV file received from the API.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_batch_size">batch_size</code></td>
<td>
<p><code>integerish(1)</code> or <code>NULL</code>. When <code>NULL</code>,
all records are pulled. Otherwise, the records all pulled in batches of this size.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_warn_zero_coded">warn_zero_coded</code></td>
<td>
<p><code>logical(1)</code>. Turn on or off warnings about
potentially problematic zero coded fields. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="recordsTypedMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'offline' method operates on the raw (unlabeled) data
file downloaded from REDCap along with the data dictionary.
This is made available for instances where the API cannot be accessed for
some reason (such as waiting for API approval from the REDCap administrator).
</p>
<p>When validating data for <code>offlineRedcapConnection</code> objects,
links to invalid data forms will not work if the user does not provide
the <code>url</code>, <code>version</code>, <code>project_info</code>, and <code>events</code> arguments (if the
project is longitudinal). For the <code>project_info</code>, the values <code>project_id</code>
and <code>is_longitudinal</code> are required. The user may be able to provide
as little as <code style="white-space: pre;">&#8288;project_info = data.frame(project_id = [id], is_longitudinal = [0/1])&#8288;</code>.
The user should be aware that the REDCap User Interface download for
events does not include the event ID. To include the event ID, the user
must construct a data frame to pass to <code>offlineConnection</code>.
</p>


<h4>Record Identifier (System) Fields</h4>

<p>In all calls, the project's ID fields will be included&ndash;there is no option
provided to prevent this. Additionally, if the project has a secondary
unique field specified, it will also be included. Inclusion of these fields
is necessary to support some post-processing functions.
</p>
<p>By default, the system fields <code>redcap_event_name</code>,
<code>redcap_repeat_instrument</code>, and <code>redcap_repeat_instance</code> are
exported (when they are appropriate to the project). These are automatically
included by the API. However, if the user omits any of these in <code>fields</code>
or designates one in <code>drop_fields</code>, the final result will honor those
conditions. Excluding any of these identifiers may cause problems with
some post-processing functions that operate on repeating instrument data.
</p>
<p>The combination of the project ID field, secondary unique field, and the
system fields are what uniquely identify an experimental unit. In nearly
all cases, it is desirable to have them all included.
</p>
<p>System fields are cast to labelled values by default. They may be cast
to their coded values using the override <code>cast = list(system = castRaw)</code>.
The fields affected by the <code>system</code> override are <code>redcap_event_name</code>,
<code>redcap_repeat_instrument</code>, and <code>redcap_data_access_group</code>.
</p>



<h4>BioPortal Fields</h4>

<p>Text fields that are validation enabled using the BioPortal Ontology service
may be cast to labeled values so long as the labels have been cached on the
REDCap server. Caching is performed when the field is viewed in a form on
the web interface. However, labels are not cached when data are imported
via the API. In cases where labels are not cached, the coded value is
treated as both the code and the label.
</p>



<h4>Record Batching</h4>

<p>A 'batched' export is one where the export is performed over a series of
API calls rather than one large call.  For large projects on small servers,
this may prevent a single user from tying up the server and forcing others
to wait on a larger job.  The batched export is performed by first
calling the API to export the subject identifier field (the first field
in the meta data).  The unique ID's are then assigned a batch number with
no more than <code>batch_size</code> ID's in any single batch.  The batches are
exported from the API and stacked together.
</p>
<p>In longitudinal projects, <code>batch_size</code> may not necessarily be the
number of records exported in each batch.  If <code>batch_size</code> is ten and
there are four records per patient, each batch will consist of 40 records.
Thus, if the user is concerned about tying up the server with a large,
longitudinal project, it would be prudent to use a smaller batch size.
</p>



<h4>Inversion of Control</h4>

<p>The final product of calling this is a <code>data.frame</code> with columns
that have been type cast to most commonly used analysis class (e.g. factor).
This version allows the user to override any step of this process by
specifying a different function for each of the stages of the type casting.
The algorithm is as follows:
</p>

<ol>
<li><p> Detect NAs in returned data (<code>na</code> argument).
</p>
</li>
<li><p> Run <code>validate</code> functions for the field_types.
</p>
</li>
<li><p> On the fields that are not NA and pass validate do the specified cast.
</p>
</li></ol>

<p>It is expected that the <code>na</code> and <code>validate</code> overrides should
rarely be used. Their exposure via the function parameters is to future
proof against possible bugs in the defaults, and allows for things that
higher versions of REDCap add as possible field types. I.e., the overrides
are for use to continue using the library when errors or changes to REDCap
occur.
</p>
<p>The cast override is one where users can specify things that were controlled
by an ever increasing set of flags before. E.g., <code>dates=as.Date</code> was
an addition to allow dates in the previous version to be overridden if the
user wanted to use the Date class. In this version, it would appear called
as <code style="white-space: pre;">&#8288;cast=list(_date=as.Date))&#8288;</code>. See <code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code>
for a full listing of package provided cast functions.
</p>



<h3>Value</h3>

<p><code>exportRecordsTyped</code> returns a data frame with the formatted data.
</p>
<p><code>exportReportsTyped</code> returns a data frame with the formatted data.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportRecordsTyped()</code>: Export records with type casting.
</p>
</li>
<li> <p><code>exportReportsTyped()</code>: Export reports with type casting.
</p>
</li>
<li> <p><code>exportRecordsTyped(redcapOfflineConnection)</code>: Export records without API access.
</p>
</li></ul>


<h3>Zero-Coded Check Fields</h3>

<p>A zero-coded check field is a field of the REDCap type <code>checkbox</code> that has
a coding definition of <code style="white-space: pre;">&#8288;0, [label]&#8288;</code>. When exported, the field names for
these fields is <code style="white-space: pre;">&#8288;[field_name]___0&#8288;</code>. As in other checkbox fields, the
raw data output returns binary values where 0 represent an unchecked
box and 1 represents a checked box. For zero-coded checkboxes, then, a
value of 1 indicates that 0 was selected.
</p>
<p>This coding rarely presents a problem when casting from raw values
(as is done in <code>exportRecordsTyped</code>). However, casting from coded or
labeled values can be problematic. In this case, it becomes
indeterminate from context if the intent of <code>0</code> is 'false' or the coded
value '0' ('true') ...
</p>
<p>The situations in which casting may fail to produce the desired results are</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td><td style="text-align: left;"> Result </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> anything other than "0" </td><td style="text-align: left;"> Likely to fail when casting from coded values </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> 0 </td><td style="text-align: left;"> Likely to fail when casting from coded or labeled values </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Because of the potential for miscast data, casting functions will issue
a warning anytime a zero-coded check field is encountered. A separate
warning is issued when a field is cast from coded or labeled values.
</p>
<p>When casting from coded or labeled values, it is strongly recommended that
the function <code><a href="#topic+castCheckForImport">castCheckForImport()</a></code> be used. This function permits the
user to state explicitly which values should be recognized as checked,
avoiding the ambiguity resulting from the coding.
</p>


<h3>See Also</h3>



<h4>Other records exporting functions</h4>

<p><code><a href="#topic+exportRecords">exportRecords()</a></code>, <br />
<code><a href="#topic+exportReports">exportReports()</a></code>, <br />
<code><a href="#topic+exportBulkRecords">exportBulkRecords()</a></code>
</p>



<h4>Field validations and casting</h4>

<p><code><a href="#topic+fieldValidationAndCasting">fieldValidationAndCasting()</a></code>, <br />
<code><a href="#topic+reviewInvalidRecords">reviewInvalidRecords()</a></code>
</p>



<h4>Post-processing functionality</h4>

<p><code><a href="#topic+recastRecords">recastRecords()</a></code>, <br />
<code><a href="#topic+guessCast">guessCast()</a></code>, <br />
<code><a href="#topic+guessDate">guessDate()</a></code>, <br />
<code><a href="#topic+castForImport">castForImport()</a></code>, <br />
<code><a href="#topic+mChoiceCast">mChoiceCast()</a></code>, <br />
<code><a href="#topic+splitForms">splitForms()</a></code>, <br />
<code><a href="#topic+widerRepeated">widerRepeated()</a></code>
</p>



<h4>Vignettes</h4>

<p><code>vignette("redcapAPI-offline-connection")</code><br />
<code>vignette("redcapAPI-casting-data")</code><br />
<code>vignette("redcapAPI-missing-data-detection")</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-data-validation)&#8288;</code><br />
<code style="white-space: pre;">&#8288;vignette("redcapAPI-faq)&#8288;</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export records with default settings
exportRecordsTyped(rcon)

# Export records with no factors
exportRecordsTyped(rcon, 
                   cast = default_cast_character)
                   
# Export records for specific records
exportRecordsTyped(rcon, 
                   records = 1:3)
                   
# Export records for specific instruments
exportRecordsTyped(rcon, 
                   forms = c("registration", "visit_1", "medications"))
                   
# Export records using filterLogic, an API parameter not provided
# in the exportRecordsTyped function signature
exportRecordsTyped(
  rcon, 
  records = 1:3, 
  api_param = list(filterLogic = "[age_at_enrollment] &gt; 25")
)
                   
                   
                   
# Export a report 
exportReports(rcon, 
              report_id = 12345)
              
              
# Export records using files downloaded from the user interface
rcon_off &lt;- 
  offlineConnection(
    meta_data = 
      system.file(file.path("extdata/offlineConnectionFiles", 
                            "TestRedcapAPI_DataDictionary.csv"), 
                  package = "redcapAPI"), 
    records = 
      system.file(file.path("extdata/offlineConnectionFiles",
                            "TestRedcapAPI_Records.csv"), 
                  package = "redcapAPI"))

exportRecordsTyped(rcon_off)

## End(Not run)

</code></pre>

<hr>
<h2 id='redcapAPI'>Access data, meta data, and files from REDCap using the API</h2><span id='topic+redcapAPI'></span><span id='topic+redcapAPI-package'></span>

<h3>Description</h3>

<p>REDCap is a database development tool built on MySQL.  Visit
<a href="https://projectredcap.org">https://projectredcap.org</a> for more information.  REDCap
provides an API through which data, the data dictionary, files, and
project information can be accessed.  The <code>redcapAPI</code> package
facilitates the use of these functions and
simplifies the work needed to prepare data for
analysis.
</p>


<h3>Details</h3>

<p>The user should also refer to their institution's REDCap API
documentation as a primary resource of what is available.  Different
versions of REDCap support different features&ndash;the user's REDCap
API documentation will address the features specific to their version
of REDCap.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Shawn Garbett <a href="mailto:shawn.garbett@vumc.org">shawn.garbett@vumc.org</a> (<a href="https://orcid.org/0000-0003-4079-5621">ORCID</a>) [contributor]
</p>
<p>Authors:
</p>

<ul>
<li><p> Benjamin Nutter <a href="mailto:benjamin.nutter@gmail.com">benjamin.nutter@gmail.com</a> [contributor]
</p>
</li>
<li><p> Jeffrey Horner
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Savannah Obregon [contributor]
</p>
</li>
<li><p> Thomas Obadia [contributor]
</p>
</li>
<li><p> Marcus Lehr <a href="mailto:marcus.j.lehr@gmail.com">marcus.j.lehr@gmail.com</a> [contributor]
</p>
</li>
<li><p> Brian High [contributor]
</p>
</li>
<li><p> Stephen Lane [contributor]
</p>
</li>
<li><p> Will Beasley [contributor]
</p>
</li>
<li><p> Will Gray [contributor]
</p>
</li>
<li><p> Nick Kennedy [contributor]
</p>
</li>
<li><p> Tan Hsi-Nien [contributor]
</p>
</li>
<li><p> Jeremy Stephens [contributor]
</p>
</li>
<li><p> Cole Beck [contributor]
</p>
</li>
<li><p> Bradley Johnson [contributor]
</p>
</li>
<li><p> Philip Chase [contributor]
</p>
</li>
<li><p> Paddy Tobias [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/vubiostat/redcapAPI">https://github.com/vubiostat/redcapAPI</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/vubiostat/redcapAPI/issues">https://github.com/vubiostat/redcapAPI/issues</a>
</p>
</li></ul>


<hr>
<h2 id='redcapConnection'>Connect to a REDCap Database</h2><span id='topic+redcapConnection'></span><span id='topic+print.redcapApiConnection'></span><span id='topic+offlineConnection'></span><span id='topic+print.redcapOfflineConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to create a connection object
used to access the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcapConnection(
  url = getOption("redcap_api_url"),
  token,
  config = httr::config(),
  retries = 5,
  retry_interval = 2^(seq_len(retries)),
  retry_quietly = TRUE
)

## S3 method for class 'redcapApiConnection'
print(x, ...)

offlineConnection(
  meta_data = NULL,
  arms = NULL,
  events = NULL,
  instruments = NULL,
  field_names = NULL,
  mapping = NULL,
  repeat_instrument = NULL,
  users = NULL,
  user_roles = NULL,
  user_role_assignment = NULL,
  dags = NULL,
  dag_assignment = NULL,
  project_info = NULL,
  version = NULL,
  file_repo = NULL,
  records = NULL,
  url = NULL,
  external_coding = list()
)

## S3 method for class 'redcapOfflineConnection'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redcapConnection_+3A_url">url</code></td>
<td>
<p><code>character(1)</code>. URL for the user's REDCap database API.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_token">token</code></td>
<td>
<p><code>character(1)</code> REDCap API token</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_config">config</code></td>
<td>
<p>A list to be passed to <code><a href="httr.html#topic+POST">httr::POST()</a></code>.  This allows the
user to set additional configurations for the API calls, such as
certificates, SSL version, etc. For the majority of users, this does
not need to be altered.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_retries">retries</code></td>
<td>
<p><code>integerish(1)</code>. Sets the number of attempts to make to the
API if a timeout error is encountered. Must be a positive value.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_retry_interval">retry_interval</code></td>
<td>
<p><code>numeric</code>. Sets the intervals (in seconds) at
which retries are attempted. By default, set at a <code>2^r</code> where
<code>r</code> is the <code>r</code>th retry (ie, 2, 4, 8, 16, ...). For fixed
intervals, provide a single value. Values will be recycled to match
the number of retries.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_retry_quietly">retry_quietly</code></td>
<td>
<p><code>logical(1)</code>. When <code>FALSE</code>, messages will
be shown giving the status of the API calls. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_x">x</code></td>
<td>
<p><code>redcapConnection</code> object to be printed</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_...">...</code></td>
<td>
<p>arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_meta_data">meta_data</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
metadata can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_arms">arms</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
arms can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_events">events</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
events can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_instruments">instruments</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
instruments can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_field_names">field_names</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
field names can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_mapping">mapping</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Event Instrument mappings can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_repeat_instrument">repeat_instrument</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Repeating Instruments and Events settings can be read, or a <code>data.frame</code>.
Note: The REDCap GUI does not offer a download file of these settings
(at the time of this writing).</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_users">users</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
User settings can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_user_roles">user_roles</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
User Roles can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_user_role_assignment">user_role_assignment</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
User-Role Assignments can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_dags">dags</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Data Access Groups can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_dag_assignment">dag_assignment</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Data Access Group Assignments can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_project_info">project_info</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Project Information can be read, or a <code>data.frame</code>. See Details.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_version">version</code></td>
<td>
<p><code>character(1)</code> giving the instance's REDCap version number.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_file_repo">file_repo</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
File Repository Listing can be read, or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_records">records</code></td>
<td>
<p>Either a <code>character</code> giving the file from which the
Records can be read, or a <code>data.frame</code>. This should be the raw
data as downloaded from the API, for instance. Using labeled or formatted
data is likely to result in errors when passed to other functions.</p>
</td></tr>
<tr><td><code id="redcapConnection_+3A_external_coding">external_coding</code></td>
<td>
<p>Named <code>list</code> of named <code>character</code> vectors or a
<code>character</code> giving the file from which the external coding may
be read. The list is generally obtained from the API using
<code><a href="#topic+exportExternalCoding">exportExternalCoding()</a></code>. The name of the list element should be
a field name in the data that is of type <code>bioportal</code> or <code>sql</code>.
The named vectors are code-label pairings where the value of the
vector is the code and the name is the label. If passing a file name,
it should be a file with the list saved via <code>dput</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>redcapConnection</code> objects will retrieve and cache various forms of
project information. This can make metadata, arms, events, etc. available
directly from the <code>redcapConnection</code> object. The retrieval of these objects
uses the default values of the respective export functions (excepting the
file repository, which uses <code>recursive = TRUE</code>).
</p>
<p>For each of these objects, there are four methods that can be called from
the <code>redcapConnection</code> object:</p>

<table>
<tr>
 <td style="text-align: left;">
   Function type </td><td style="text-align: left;"> Purpose </td><td style="text-align: left;"> Example </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;[info_type]&#8288;</code> </td><td style="text-align: left;"> Returns the information from the connection object </td><td style="text-align: left;"> <code>rcon$metadata()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>has_[info_type]</code> </td><td style="text-align: left;"> Returns a boolean indicating if the information is cached </td><td style="text-align: left;"> <code>rcon$has_metadata()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>flush_[info_type]</code> </td><td style="text-align: left;"> Purges the information from the connection object </td><td style="text-align: left;"> <code>rcon$flush_metadata()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>refresh_[info_type]</code> </td><td style="text-align: left;"> Replaces the information with a new call to the API </td><td style="text-align: left;"> <code>rcon$refresh_metadata()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Information is cached for
</p>

<ul>
<li> <p><code>metadata</code>
</p>
</li>
<li> <p><code>arms</code>
</p>
</li>
<li> <p><code>events</code>
</p>
</li>
<li> <p><code>instruments</code>
</p>
</li>
<li> <p><code>fieldnames</code>
</p>
</li>
<li> <p><code>mapping</code> (field-event mappings)
</p>
</li>
<li> <p><code>repeatInstrumentEvent</code>
</p>
</li>
<li> <p><code>users</code>
</p>
</li>
<li> <p><code>user_roles</code>
</p>
</li>
<li> <p><code>user_role_assignment</code>
</p>
</li>
<li> <p><code>dags</code>
</p>
</li>
<li> <p><code>dag_assignment</code>
</p>
</li>
<li> <p><code>projectInformation</code>
</p>
</li>
<li> <p><code>version</code>
</p>
</li>
<li> <p><code>fileRepository</code>
</p>
</li>
<li> <p><code>externalCoding</code>
</p>
</li></ul>

<p>There is also a <code>flush_all</code> and <code>refresh_all</code> method that will purge
the entire cache and refresh the entire cache, respectively.
</p>
<p>The <code>externalCoding</code> elements relate to the code-label mappings of text fields
with the external validation types (such as <code>sql</code> fields or text fields
with BioPortal Ontology modules enabled).
</p>


<h4>Specific to API Connections</h4>

<p>The <code>redcapApiConnection</code> object also stores the user preferences for
handling repeated attempts to call the API. In the event of a timeout
error or server unavailability, these settings allow a system pause before
attempting another API call. In the event all of the retries fail, the
error message of the last attempt will be returned. These settings may
be altered at any time using the methods <code>rcon$set_retries(r)</code>,
<code>rcon$set_retry_interval(ri)</code>, and <code>rcon$set_retry_quietly(rq)</code>.
The argument to these functions have the same requirements as the
corresponding arguments to <code>redcapConnection</code>.
</p>
<p>Tokens are specific to a project, and a token must be created for each
project for which the user wishes to use the API.
</p>
<p>Additional Curl option can be set in the <code>config</code> argument.  See the documentation
for <code><a href="httr.html#topic+config">httr::config()</a></code> and <code><a href="httr.html#topic+httr_options">httr::httr_options()</a></code> for more Curl options.
</p>



<h4>Specific to Offline Connections</h4>

<p>&quot;Offline connections&quot; are a tool designed to provide the users without
API privileges with at least a subset of the functionality available to
API users. The offline connections are typically constructed from the
comma separated value (CSV) files downloaded from the REDCap user
interface. Alternatively, data frames may be provided with the
necessary data.
</p>
<p>Not all of the components of an offline connection are needed for most
operations. Rather, the object was built to accept the same components
available to the <code>redcapApiConnection</code> in order to provide a consistent
interface and simplify future development.
</p>
<p>The meta data will be required for nearly all operations. For
validating and casting data, the <code>records</code> data must be provided, and
works best if the data are the raw, unlabeled data downloaded from the
REDCap user interface.
</p>
<p>Other components that may prove useful when casting records are the
url, version, events (if the project is longitudinal), and a subset
of the project information. The user is encouraged to review the
vignette for working with offline connections for more details.
</p>
<p>With offline connections, the refresh methods have an important difference.
The user may pass the refresh method a file path or data frame which
will be used to replace the existing component. See examples.
</p>



<h3>See Also</h3>

<p>For establishing connections using secure token storage. <br />
<code><a href="#topic+unlockREDCap">unlockREDCap()</a></code> <br />
<code>vignette("redcapAPI-getting-started-connecting", package = "redcapAPI")</code><br />
</p>
<p>For working with offline connections.
<code>vignette("redcapAPI-offline-connection", package = "redcapAPI")</code><br />
<br />
To prepare data for an offline user, see <code><a href="#topic+preserveProject">preserveProject()</a></code> and
<code><a href="#topic+readPreservedProject">readPreservedProject()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rcon &lt;- redcapConnection(url = [YOUR_REDCAP_URL], 
                         token = [API_TOKEN])

exportRecords(rcon)

# Get the complete metadata for the project
rcon$metadata()

# Get the fieldnames for a project
rcon$fieldnames()

# remove a cached value for fieldnames
rcon$flush_fieldnames()
rcon$has_fieldnames()


# Using offline connections

meta_data_file &lt;- "path/to/meta_data_file.csv"
records_file &lt;- "path/to/records_file.csv"
events_file &lt;- "path/to/events_file.csv"

ProjectInfo &lt;- data.frame(project_id = 12345, 
                          is_longitudinal = 1)

off_conn &lt;- offlineConnection(meta_data = meta_data_file, 
                              records = records_file,
                              project_info = ProjectInfo, 
                              version = [YOUR_REDCAP_VERSION_NUMBER], 
                              url = [YOUR_REDCAP_URL])
                              
off_conn$metadata()
off_conn$records()
off_conn$projectInformation()
off_conn$version()

# Add or replace the data in the events component.
off_conn$refresh_events(events_file)
off_conn$events()

## End(Not run)

</code></pre>

<hr>
<h2 id='redcapDataStructures'>REDCap Data Structures</h2><span id='topic+redcapDataStructures'></span><span id='topic+validateRedcapData'></span><span id='topic+REDCAP_SYSTEM_FIELDS'></span><span id='topic+REDCAP_PROJECT_PURPOSE'></span><span id='topic+REDCAP_METADATA_FIELDTYPE'></span><span id='topic+REDCAP_METADATA_VALIDATION_TYPE'></span><span id='topic+REDCAP_REPEAT_INSTRUMENT_STRUCTURE'></span>

<h3>Description</h3>

<p>Utilities for recognizing and validating data structures
for use with the REDCap API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validateRedcapData(data, redcap_data)

REDCAP_SYSTEM_FIELDS

REDCAP_PROJECT_PURPOSE

REDCAP_METADATA_FIELDTYPE

REDCAP_METADATA_VALIDATION_TYPE

REDCAP_REPEAT_INSTRUMENT_STRUCTURE
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redcapDataStructures_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> User provided data to be compared against
the established REDCap data structure.</p>
</td></tr>
<tr><td><code id="redcapDataStructures_+3A_redcap_data">redcap_data</code></td>
<td>
<p><code>data.frame</code> A data set from the <code>redcapAPI</code>
package to use a reference for comparing to expected data structure.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 4.
</p>
<p>An object of class <code>character</code> of length 5.
</p>
<p>An object of class <code>character</code> of length 11.
</p>
<p>An object of class <code>character</code> of length 23.
</p>
<p>An object of class <code>data.frame</code> with 0 rows and 3 columns.
</p>

<hr>
<h2 id='redcapError'>Handle Errors from the REDCap API</h2><span id='topic+redcapError'></span>

<h3>Description</h3>

<p>Determine the proper way to handle errors returned from the API.
Not all errors should be fatal.  See Details for more
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcapError(x, error_handling)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redcapError_+3A_x">x</code></td>
<td>
<p>Object returned by <code><a href="httr.html#topic+POST">httr::POST()</a></code>.</p>
</td></tr>
<tr><td><code id="redcapError_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Maintaining consistent functionality for all types of REDCap projects
requires that errors be handled delicately.  It is not always desirable for an
error from the API to terminate the program.  One example of such a case is when
a user executes the <code>exportEvents</code> function for a classic project;
doing so returns an error from the API that events cannot be exported for
classic projects.  In REDCap versions earlier than 6.5.0, there is no way to
determine if a project is classic or longitudinal without attempting to export
the events.
</p>
<p>For this reason, it is often preferable to have these kinds of errors return
<code>NULL</code> so that the program does not crash if it does not need to (one such
instance where it does not need to crash is when <code>exportEvents</code> is called
within <code>exportRecords</code>; the <code>events</code> argument is irrelevant to a
classic project and the error can safely be ignored.
</p>
<p>The other common type of error that does not need to be fatal is when a
<code>redcapAPI</code> method is sent to a REDCap instance that does not support the
method.  For example, the <code>exportVersion</code> method is not supported in
REDCap instances earlier than 6.0.0.  In these cases, we may prefer not to cast
a hard error.
</p>
<p>These two types of errors may be handled in one of two ways.  When the
error handler is set to <code>"null"</code>, a <code>NULL</code> is returned.  When the
error handler is set to <code>"error"</code>, the error is returned.  The option
is set globally using <code>options(redcap_error_handler = "null")</code> and is
set to <code>"null"</code> by default.
</p>

<hr>
<h2 id='redcapFactorFlip'>Convert REDCap factors between labeled and coded</h2><span id='topic+redcapFactorFlip'></span>

<h3>Description</h3>

<p>Factors exported from REDCap can be toggled between the coded
and labeled values with the use of the attributes assigned to the
factors during export.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcapFactorFlip(v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redcapFactorFlip_+3A_v">v</code></td>
<td>
<p>A factor exported from REDCap.  The REDCap type may be radio,
dropdown, check, yesno, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each factor type variable in REDCap is given the attributes
<code>redcapLabels</code> and <code>redcapLevels</code>.  With these attached to the
vector, switching between the coded and labeled values can be done with
ease.  This may be helpful when the coded value has importance,
such as 0/1 for death, or if a yes is worth six points (instead of one).
</p>

<hr>
<h2 id='repeatingInstrumentMethods'>Export or Import Repeating Instrument and Events Settings</h2><span id='topic+repeatingInstrumentMethods'></span><span id='topic+repeatingInstrumentEventMethods'></span><span id='topic+exportRepeatingInstrumentsEvents'></span><span id='topic+importRepeatingInstrumentsEvents'></span><span id='topic+exportRepeatingInstrumentsEvents.redcapApiConnection'></span><span id='topic+importRepeatingInstrumentsEvents.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export the existing
repeating instrument and event settings, or import new settings to
the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportRepeatingInstrumentsEvents(rcon, ...)

importRepeatingInstrumentsEvents(rcon, data, ...)

## S3 method for class 'redcapApiConnection'
exportRepeatingInstrumentsEvents(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importRepeatingInstrumentsEvents(
  rcon,
  data,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="repeatingInstrumentMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. For classical projects, it must have the
columns <code>form_name</code> and <code>custom_form_label</code>. Longitudinal
projects also require a column for <code>event_name</code>.</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached
value of repeating instruments and events on <code>rcon</code> will be
refreshed.</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="repeatingInstrumentMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Repeating events (as opposed to repeating instruments) are
provided as a row of data where the <code>form_name</code> column is <code>NA</code>.
</p>
<p>It is not possible to update the <code>has_repeating_instruments_or_events</code>
property of the project through <code>importProjectInformation</code>.
Enabling of repeating instruments and events must be done through the GUI.
</p>
<p>Although the API does not provide a delete method, it is possible to
remove settings by doing an import that excludes the settings that are
to be deleted. All settings can be cleared by executing
<code>importRepeatingInstrumentsEvents(rcon, REDCAP_REPEAT_INSTRUMENT_STRUCTURE)</code>.
</p>


<h3>Value</h3>

<p><code>exportRepeatingInstrumentsEvents</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>event_name</code> </td><td style="text-align: left;"> The unique event name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>form_name</code> </td><td style="text-align: left;"> The form name, as given in the second column of the Meta Data </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>custom_form_label</code> </td><td style="text-align: left;"> A custom display string for the repeating instrument/event </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importRepeatingInstrumentsEvents</code> invisibly returns the number of rows imported.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportRepeatingInstrumentsEvents()</code>: Export repeating instruments and events.
</p>
</li>
<li> <p><code>importRepeatingInstrumentsEvents()</code>: Import repeating instruments and events.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export repeating instruments and events
exportRepeatingInstrumentsEvents(rcon)

# Import repeating instruments and events
NewData &lt;- data.frame(event_name = c("event_1_arm_1", 
                                     "event_2_arm_1"), 
                      form_name = c("field_observation", 
                                    "self_assessment"), 
                      custom_form_label = c("Instructor led field observation", 
                                            "Trainee self assessment"))
                                            
importRepeatingInstrumentsEvents(rcon, 
                                 data = NewData)

## End(Not run)

</code></pre>

<hr>
<h2 id='reviewInvalidRecords'>Review Invalid Records Following Field Validation</h2><span id='topic+reviewInvalidRecords'></span>

<h3>Description</h3>

<p>This function retrieves a summary of data elements that
failed validation during field validation and casting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reviewInvalidRecords(data, quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reviewInvalidRecords_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. The result of a function that performed
field validation.</p>
</td></tr>
<tr><td><code id="reviewInvalidRecords_+3A_quiet">quiet</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, a message will be printed
if the <code>invalid</code> attribute is not found on <code>data</code>. Otherwise,
the message is suppressed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When discussing field validation and invalid data, it is helpful to
establish the following terminology:
</p>
<p>A <em>Records data frame</em> is a data frame returned by a function
where the fields (columns) in the data frame have been cast for
subsequent analysis.
</p>
<p>Some casting function also perform field validation and return an
<em>Invalid data frame</em>, which is a listing of data elements that
have failed validation. The Invalid data frame is attached as an
attribute to the Records data frame. If no data elements fail the
validation, the Invalid data frame will have zero rows. If at least
one data element fails validation, a warning is printed to notify
the user so that the user may review the Invalid data frame and
mitigate the failed validations.
</p>
<p>The Invalid data frame has an additional class (<code>c("invalid", "data.frame")</code>)
and comes with a print method. The <code>print.invalid</code> method displays the
content of the Invalid data frame neatly in both the console
and within reports utilizing markdown.
</p>


<h3>Value</h3>

<p>If <code>data</code> has the <code>"invalid"</code> attribute, an object with class
<code>c("invalid", "data.frame")</code> is returned. (<code>NULL</code> will be returned if
<code>data</code> does not have the attribute).
</p>
<p>The colums in the Invalid data frame are</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>row</code> </td><td style="text-align: left;"> The row number from the Records data frame for which validation failed. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_id</code> </td><td style="text-align: left;"> The record ID for the failed validation. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field_name</code> </td><td style="text-align: left;"> The field name (column) of the failed validation. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>field_type</code> </td><td style="text-align: left;"> The field type of the failed validation. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>value</code> </td><td style="text-align: left;"> The original value that failed validation. It will be replaced with <code>NA</code> in the Records data. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The Invalid data frame has additional attributes
</p>

<ul>
<li> <p><code>time</code> - The date/time at which the validation was performed.
</p>
</li>
<li> <p><code>version</code> - The REDCap version number (as retrieved by <code>exportVersion</code>).
</p>
</li>
<li> <p><code>project</code> - The title of the REDCap project (as retrieved by <code>exportProjectInformation</code>).
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>, <br />
<code><a href="#topic+castForImport">castForImport()</a></code>, <br />
<code><a href="#topic+guessCast">guessCast()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Review the Invalid data frame after export
Records &lt;- exportRecordsTyped(rcon)
reviewInvalidRecords(Records)



# Review Invalid data frame before import
RecordsForIMport &lt;- castForImport(rcon)
reviewInvalidRecords(Records)



# Access the Invalid data frame the attributes
Records &lt;- exportRecordsTyped(rcon)
attr(Records, "invalid")
attributes(Records)$invalid

## End(Not run)

</code></pre>

<hr>
<h2 id='splitForms'>Split a Data Frame into its Forms</h2><span id='topic+splitForms'></span>

<h3>Description</h3>

<p>Separates a data frame from REDCap into a list of data
frames where each form constitutes an element in the list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splitForms(Records, rcon, envir = NULL, base = NULL, post = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="splitForms_+3A_records">Records</code></td>
<td>
<p><code>data.frame</code> such as one generated by <code>exportRecords</code> or
<code>exportRecordsTyped</code></p>
</td></tr>
<tr><td><code id="splitForms_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="splitForms_+3A_envir">envir</code></td>
<td>
<p>environment. The target environment for the resulting list
of <code>data.frame</code>s. Defaults to <code>NULL</code> which returns the a list.
Use <code>globalenv</code> to assign the global environment. Will accept a number
of the environment.</p>
</td></tr>
<tr><td><code id="splitForms_+3A_base">base</code></td>
<td>
<p><code>character(1)</code> giving the start of the naming scheme
for the elements of the list. By default, the names of the list will
be the form names. If this value is provided, it will follow the
format <code>base.form_name</code>.</p>
</td></tr>
<tr><td><code id="splitForms_+3A_post">post</code></td>
<td>
<p><code>function</code> to apply to each element of form data
after separating them, must be of signature <code style="white-space: pre;">&#8288;function(data, rcon)&#8288;</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>



<h4>Other post-processing functions</h4>

<p><code><a href="#topic+recastRecords">recastRecords()</a></code>, <br />
<code><a href="#topic+guessCast">guessCast()</a></code>, <br />
<code><a href="#topic+guessDate">guessDate()</a></code>, <br />
<code><a href="#topic+castForImport">castForImport()</a></code>, <br />
<code><a href="#topic+mChoiceCast">mChoiceCast()</a></code>, <br />
<code><a href="#topic+widerRepeated">widerRepeated()</a></code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
Records &lt;- exportRecordsTyped(rcon)

splitForms(Records, rcon)

## End(Not run)
   
  
</code></pre>

<hr>
<h2 id='stringCleanup'>Remove Undesired Characters From Strings</h2><span id='topic+stringCleanup'></span><span id='topic+stripHTMLTags'></span><span id='topic+stripUnicode'></span>

<h3>Description</h3>

<p>These functions are utilities to clear undesired characters
from REDCap output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stripHTMLTags(
  x,
  tags = c("p", "br", "div", "span", "b", "font", "sup", "sub"),
  ignore.case = TRUE
)

stripUnicode(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stringCleanup_+3A_x">x</code></td>
<td>
<p><code>character</code>, vector of content to be cleaned.</p>
</td></tr>
<tr><td><code id="stringCleanup_+3A_tags">tags</code></td>
<td>
<p><code>character</code>, vector of HTML tags to remove from <code>x</code></p>
</td></tr>
<tr><td><code id="stringCleanup_+3A_ignore.case">ignore.case</code></td>
<td>
<p><code>logical(1)</code>, should cases be ignored when matching
patterns? Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>stripHTMLTags</code> returns a <code>character</code> vector.
</p>
<p><code>stripUnicode</code> returns a <code>character</code> vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stripHTMLTags("&lt;p&gt;Text in a paragraph &lt;b&gt;tag&lt;/b&gt; with bold formatting &lt;/p&gt;")

stripUnicode("\U00B5 = 0")

</code></pre>

<hr>
<h2 id='stripHTMLandUnicode'>Helper Functions for <code>exportRecordsType</code> Attributes</h2><span id='topic+stripHTMLandUnicode'></span><span id='topic+unitsFieldAnnotation'></span>

<h3>Description</h3>

<p>These functions assist in setting attributes for
columns of the resulting type cast data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stripHTMLandUnicode(field_name, field_label, field_annotation)

unitsFieldAnnotation(field_name, field_label, field_annotation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stripHTMLandUnicode_+3A_field_name">field_name</code></td>
<td>
<p><code>character</code>. Name of the fields.</p>
</td></tr>
<tr><td><code id="stripHTMLandUnicode_+3A_field_label">field_label</code></td>
<td>
<p><code>character</code>. Labels from meta data.</p>
</td></tr>
<tr><td><code id="stripHTMLandUnicode_+3A_field_annotation">field_annotation</code></td>
<td>
<p><code>character</code>. Annotations from meta_data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Functions passed into the <code>assignment</code> argument list of
<code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code> construct attributes on a column.
They are expected to have a signature of <code style="white-space: pre;">&#8288;function(field_name, field_label, field_annotation)&#8288;</code> and return the attribute to assign or <code>NA</code>.
They must be vectorized.
</p>
<p>Useful utilities are provided in <code><a href="#topic+stringCleanup">stringCleanup()</a></code>
</p>
<p><code>stripHTMLandUnicode</code> strips both HTML and UNICODE from the <code>field_label</code>.
</p>
<p><code>unitsFieldAnnotation</code> pulls a units string from the field_annotation.
An example of the form searched for is <code style="white-space: pre;">&#8288;units=\{"meters"\}&#8288;</code>
</p>


<h3>Value</h3>

<p><code>stripHTMLandUnicode</code> returns a character vector.
</p>
<p><code>unitsFieldAnnotation</code> returns a character vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code>, <br />
<code><a href="#topic+exportReportsTyped">exportReportsTyped()</a></code>, <br />
<code><a href="#topic+stripHTMLTags">stripHTMLTags()</a></code>, <br />
<code><a href="#topic+stripUnicode">stripUnicode()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
stripHTMLandUnicode("field_name", "&lt;b&gt;Field label&lt;/b&gt;", "field annotation")

unitsFieldAnnotation("field", "label", "units={\"meters\"}")

## End(Not run)

</code></pre>

<hr>
<h2 id='surveyMethods'>Export Survey Participant Information</h2><span id='topic+surveyMethods'></span><span id='topic+exportSurveyParticipants'></span><span id='topic+exportSurveyLink'></span><span id='topic+exportSurveyQueueLink'></span><span id='topic+exportSurveyReturnCode'></span><span id='topic+exportSurveyParticipants.redcapApiConnection'></span><span id='topic+exportSurveyLink.redcapApiConnection'></span><span id='topic+exportSurveyQueueLink.redcapApiConnection'></span><span id='topic+exportSurveyReturnCode.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export information relating
to survey participants.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportSurveyParticipants(rcon, instrument, event, ...)

exportSurveyLink(rcon, record, instrument, event, repeat_instance = 1, ...)

exportSurveyQueueLink(rcon, record, ...)

exportSurveyReturnCode(
  rcon,
  record,
  instrument,
  event,
  repeat_instance = 1,
  ...
)

## S3 method for class 'redcapApiConnection'
exportSurveyParticipants(
  rcon,
  instrument = NULL,
  event = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
exportSurveyLink(
  rcon,
  record,
  instrument,
  event = NULL,
  repeat_instance = 1,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
exportSurveyQueueLink(
  rcon,
  record,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
exportSurveyReturnCode(
  rcon,
  record,
  instrument,
  event = NULL,
  repeat_instance = 1,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surveyMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_record">record</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code>. The record ID of a
survey participant.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_instrument">instrument</code></td>
<td>
<p><code>character(1)</code>. The name of a survey instrument.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_event">event</code></td>
<td>
<p><code>character(1)</code> The event name of the event for which
participant information should be exported.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_repeat_instance">repeat_instance</code></td>
<td>
<p><code>integerish(1)</code>. The repeat instance if the
instrument is designated as a repeating instrument. Default value is <code>1</code>.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="surveyMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>exportSurveyParticipants</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>email</code> </td><td style="text-align: left;"> The e-mail address of the participant. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>email_occurrence</code> </td><td style="text-align: left;"> The number of times the invitation has been sent (after the next invite). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>identifier</code> </td><td style="text-align: left;"> Participant identifier (if it exists) to match the survey response to a participant. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record</code> </td><td style="text-align: left;"> Record ID of the participant. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>invitation_sent_status</code> </td><td style="text-align: left;"> Boolean value indicating if a survey invitation has been sent. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>invitation_send_time</code> </td><td style="text-align: left;"> Date/time the survey invitation was sent. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>response_status</code> </td><td style="text-align: left;"> Boolean value indicating if the participant has responded. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>survey_access_code</code> </td><td style="text-align: left;"> The participant's survey access code. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>survey_link</code> </td><td style="text-align: left;"> The participant's survey link. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>survey_queue_link</code> </td><td style="text-align: left;"> The participants' survey queue link. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>exportSurveyLink</code> returns a <code>character(1)</code> giving the link for the user
to access the survey form.
</p>
<p><code>exportSurveyQueueLink</code> returns a <code>character(1)</code> giving the survey queue
link for the user.
</p>
<p><code>exportSurveyReturnCode</code> returns a <code>character(1)</code> giving the survey return
code for the user.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportSurveyParticipants()</code>: Export survey participants for a survey instrument.
</p>
</li>
<li> <p><code>exportSurveyLink()</code>: Export a survey participant's survey instrument link.
</p>
</li>
<li> <p><code>exportSurveyQueueLink()</code>: Export a survey participant's survey queue link.
</p>
</li>
<li> <p><code>exportSurveyReturnCode()</code>: Export a survey participant's instrument return code.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export survey participants
exportSurveyParticipants(rcon, 
                         instrument = "survey_form")
                         
# Export survey participants for an event
exportSurveyParticipants(rcon, 
                         instrument = "survey_form", 
                         event = "event_1_arm_1")
                         
# Export survey link
exportSurveyLink(rcon, 
                 record = 1, 
                 instrument = "survey_form")
                 
# Export survey queue link
exportSurveyQueueLink(rcon, 
                      record = 1)
                      
# Export survey return code
exportSurveyReturnCode(rcon, 
                       user = 1, 
                       instrument = "survey_form")

## End(Not run)

</code></pre>

<hr>
<h2 id='switchDag'>Switch Data Access Group Assignment for the Current User</h2><span id='topic+switchDag'></span><span id='topic+switchDagArgs'></span><span id='topic+switchDag.redcapApiConnection'></span>

<h3>Description</h3>

<p>This method enables the current API user to switch
(assign/reassign/unassign) their current Data Access Group assignment
if they have been assigned to multiple DAGs via the DAG Switcher page
in the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>switchDag(rcon, dag, ...)

## S3 method for class 'redcapApiConnection'
switchDag(
  rcon,
  dag,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="switchDag_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="switchDag_+3A_dag">dag</code></td>
<td>
<p><code>character(1)</code> A unique data access group to which to
assign the current user. Use <code>NA</code> to leave the user unassigned.</p>
</td></tr>
<tr><td><code id="switchDag_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code> If <code>TRUE</code>, the cached data access
group assignments will be refreshed.</p>
</td></tr>
<tr><td><code id="switchDag_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="switchDag_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="switchDag_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="switchDag_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns <code>TRUE</code> when the call is completed successfully.
Otherwise an error is thrown.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportDags">exportDags()</a></code>,<br />
<code><a href="#topic+importDags">importDags()</a></code>,<br />
<code><a href="#topic+deleteDags">deleteDags()</a></code>, <br />
<code><a href="#topic+exportUserDagAssignments">exportUserDagAssignments()</a></code>, <br />
<code><a href="#topic+importUserDagAssignments">importUserDagAssignments()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Switch the current user to the DAG "Facility Two"
switchDag(rcon, 
          dag = "facility_two")

## End(Not run)
</code></pre>

<hr>
<h2 id='syncUnderscoreCodings'>Synchronize coding of checkbox variables between meta data and
records field names.</h2><span id='topic+syncUnderscoreCodings'></span>

<h3>Description</h3>

<p>Due to a bug in the REDCap export module, underscores in
checkbox codings are not retained in the suffixes of the field names
in the exported records.  For example, if variable <code>chk</code> is a
checkbox with a coding 'a_b, A and B', the field name in the data
export becomes <code>chk___ab</code>.  The loss of the underscore causes
<code>fieldToVar</code> to fail as it cannot match variable names to the
meta data.  <code>syncUnderscoreCodings</code> rectifies this problem by
searching the suffixes and meta data for underscores.  If a
discrepancy is found, the underscores are removed from the metadata
codings, restoring harmony to the universe.  This bug was fixed in
REDCap version 5.5.21 and this function does not apply to that and
later versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>syncUnderscoreCodings(records, meta_data, export = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="syncUnderscoreCodings_+3A_records">records</code></td>
<td>
<p>The data frame object returned from the API export
prior to applying factors, labels, and dates via the <code>fieldToVar</code>
function.</p>
</td></tr>
<tr><td><code id="syncUnderscoreCodings_+3A_meta_data">meta_data</code></td>
<td>
<p>Metadata export from <code>exportMetaData</code></p>
</td></tr>
<tr><td><code id="syncUnderscoreCodings_+3A_export">export</code></td>
<td>
<p>Logical.  Specifies if data are being synchronized for
import or export</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>syncUnderscoreCodings</code> performs a series of evaluations.  First, it
determines if any underscores are found  in the checkbox codings.
If none are found, the function terminates without changing anything.
</p>
<p>If the checkbox codings have underscores, the next evaluation is to
determine if the variable names suffixes have matching underscores.
If they do, then the function terminates with no changes to the meta data.
</p>
<p>For data exports, if the prior two checks find underscores in the meta data
and no underscores in the suffixes, the underscores are removed from the
meta data and the new meta data returned.
</p>
<p>For data imports, the meta data are not altered and the
<code>checkbox_field_name_map</code> attribute is used to synchronize field
names to the meta data and the expectations of REDCap (for import,
REDCap expects the underscore codings to be used.
</p>


<h3>Backward Compatibility</h3>

<p>In retrospect, we realize that the way <code>syncUnderscoreCodings</code> is written
is backward.  We should have altered the field names in the records
data frame.  Any scripts that make use of <code>syncUnderscoreCodings</code> and were
written prior to version 5.5.21 will fail because the underscores in the codings
will now be present where they were not before.
</p>
<p>For backward compatibility of <code>redcapAPI</code>, we continue to alter the codings
in the meta data. We do not anticipate many problems, as most people do not use
underscores in the checkbox codings
</p>
<p>If your scripts were written under REDCap 5.5.21 or higher, there will be no backward
compatibility problems related to this issue.
</p>

<hr>
<h2 id='unlockREDCap'>Open REDCap connections using cryptolocker for storage of API_KEYs.</h2><span id='topic+unlockREDCap'></span>

<h3>Description</h3>

<p>Opens a set of connections to REDcap from API_KEYs stored in an encrypted keyring.
If the keyring does not exist, it will ask for password to this keyring to use on
later requests. Next it
will ask for the API_KEYs specified in <code>connections</code>. If an API_KEY does not
work, it will request again. On later executions it will use an open keyring
to retrieve all API_KEYs or for a password if the keyring is currently
locked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unlockREDCap(
  connections,
  url,
  keyring,
  envir = NULL,
  passwordFUN = .default_pass(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unlockREDCap_+3A_connections">connections</code></td>
<td>
<p>character vector. A list of strings that define the
connections with associated API_KEYs to load into environment. Each
name should correspond to a REDCap project for traceability, but
it can be named anything one desires.
The name in the returned list is this name.</p>
</td></tr>
<tr><td><code id="unlockREDCap_+3A_url">url</code></td>
<td>
<p>character. The url of one's institutional REDCap server api.</p>
</td></tr>
<tr><td><code id="unlockREDCap_+3A_keyring">keyring</code></td>
<td>
<p>character. Potential keyring, not used by default.</p>
</td></tr>
<tr><td><code id="unlockREDCap_+3A_envir">envir</code></td>
<td>
<p>environment. The target environment for the connections. Defaults to NULL
which returns the keys as a list. Use <code><a href="base.html#topic+globalenv">globalenv()</a></code> to assign in the
global environment. Will accept a number such a '1' for global as well.</p>
</td></tr>
<tr><td><code id="unlockREDCap_+3A_passwordfun">passwordFUN</code></td>
<td>
<p>function. Function to get the password for the keyring. Usually defaults <code>getPass::getPass</code>.
On MacOS it will use rstudioapi::askForPassword if available.</p>
</td></tr>
<tr><td><code id="unlockREDCap_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="#topic+redcapConnection">redcapConnection()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If one forgets the password to this keyring, or wishes to start over:
<code>keyring::keyring_delete("&lt;NAME_OF_KEY_RING_HERE&gt;")</code>
</p>
<p>Consistent behavior requires <code>options(keyring_backend=keyring::backend_file)</code> to
be set. It is recommended to place this in <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code>.
</p>
<p>For production servers where the password must be stored in a readable
plain text file, it will search for <code style="white-space: pre;">&#8288;../&lt;basename&gt;.yml&#8288;</code>. DO NOT USE
this unless one is a sysadmin, as this defeats the security and purpose of
a local encrypted file. The expected structure of this yaml file is
as follows:
</p>
<pre>
other-config-stuff1: blah blah
redcapAPI:
  keys:
    intake: THIS_IS_THE_INTAKE_DATABASE_APIKEY
    details: THIS_IS_THE_DETAILS_DATABASE_APIKEY
other-config-stuff2: blah blah
other-config-stuff3: blah blah
</pre>
<p>IMPORTANT: Make sure that R is set to NEVER save workspace to .RData
as this <em>is</em> writing the API_KEY to a local file in clear text because
connection objects contain the unlocked key in memory. Tips
are provided in <code>vignette("redcapAPI-best-practices")</code>.
</p>


<h3>Value</h3>

<p>If <code>envir</code> is NULL returns a list of opened connections. Otherwise
connections are assigned into the specified <code>envir</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redcapConnection">redcapConnection()</a></code>
</p>


<h4>Vignettes</h4>

<p><code>vignette("redcapAPI-best-practices")</code>, <br />
<code>vignette("redcapAPI-getting-started-connecting")</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
options(keyring_backend=keyring::backend_file) # Put in .Rprofile

unlockREDCap(c(test_conn    = 'TestRedcapAPI',
               sandbox_conn = 'SandboxAPI'),
             keyring      = '&lt;NAME_OF_KEY_RING_HERE&gt;',
             envir        = globalenv(),
             url          = 'https://&lt;INSTITUTIONS_REDCAP_DOMAIN&gt;/api/') 

## End(Not run)
</code></pre>

<hr>
<h2 id='userMethods'>Export, Import, or Delete Users and User Permissisons</h2><span id='topic+userMethods'></span><span id='topic+exportUsers'></span><span id='topic+importUsers'></span><span id='topic+deleteUsers'></span><span id='topic+exportUsers.redcapApiConnection'></span><span id='topic+importUsers.redcapApiConnection'></span><span id='topic+deleteUsers.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to add and remove users from
a project. They also enable the user to modify the permissions
granted to each user within the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportUsers(rcon, ...)

importUsers(rcon, data, ...)

deleteUsers(rcon, users, ...)

## S3 method for class 'redcapApiConnection'
exportUsers(
  rcon,
  dates = TRUE,
  labels = TRUE,
  form_rights = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importUsers(
  rcon,
  data,
  consolidate = TRUE,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteUsers(
  rcon,
  users,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="userMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_dates">dates</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, expiration dates are converted to a
<code>POSIXct</code> object.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_labels">labels</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the data export and form access rights are
converted to factor objects.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_form_rights">form_rights</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the form rights will be
transformed to one column per form. The API-provided character string
is always returned with the format <code style="white-space: pre;">&#8288;[form_name]:[access_code]&#8288;</code> and a comma separating
each form.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_users">users</code></td>
<td>
<p><code>character</code>. Vector of unique user names to be deleted.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. Provides the user data for import. It must have
a column titled <code>username</code>. All other columns are optional.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_consolidate">consolidate</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the form and data
export access values will be read from the expanded columns. Otherwise,
the consolidated values (as provided by the API export) are utilized.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached data will
be refreshed after the API action is complete.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="userMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="userMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>User project access fields (those not related to forms or exports)
are mapped between coded and labeled values as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> Access </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Form access fields are mapped as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> View records/responses and edit records (survey responses are read-only) </td>
</tr>
<tr>
 <td style="text-align: left;">
   2 </td><td style="text-align: left;"> Read Only </td>
</tr>
<tr>
 <td style="text-align: left;">
   3 </td><td style="text-align: left;"> Edit survey responses </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Form export permission fields are mapped as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> Full Data Set </td>
</tr>
<tr>
 <td style="text-align: left;">
   2 </td><td style="text-align: left;"> De-Identified </td>
</tr>
<tr>
 <td style="text-align: left;">
   3 </td><td style="text-align: left;"> Remove Identifier Fields </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h4>Importing Users/User Roles</h4>

<p>It is not required that the user provide a data frame with all of the
fields available for modification. Only fields that are provided will
be modified. The only required field for imports is the <code>username</code> field.
</p>
<p>When setting permissions for a user project access fields, form access,
and form export permissions, the user may provided any of the coded
or labeled values above. The user data is passed through
<code><a href="#topic+prepUserImportData">prepUserImportData()</a></code> before sending it to the API;
text values will be converted to the numeric value.
</p>
<p>It is also permissible to use a column for each form individually, as can
be exported via <code><a href="#topic+exportUsers">exportUsers()</a></code>. With <code>consolidate = TRUE</code>, these
settings will be consolidated into the text string expected by the API.
</p>
<p>The REDCap API does not natively allow for modifying the rights of a user
that is part of a User Role. When an attempt to modify the rights of a
user in a User Role is made with this package, the user will be removed
from the User Role, the rights modified, and then the User Role restored.
This is done silently: be aware that modifications to a user's rights
may not have an impact while the User Role is assigned.
</p>


<h5>Limitations</h5>

<p>When importing via CSV, (as redcapAPI does by default) it appears that
the form access rights are imported but may not always be reflected in
the exported values. The form export rights do not appear to be imported
when using the CSV format. We may be able to resolve this in the future
using a JSON format.
</p>




<h3>Value</h3>

<p><code>exportUsers</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>username</code> </td><td style="text-align: left;"> The unique username for a user that can access the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>email</code> </td><td style="text-align: left;"> The e-mail address associated with the user in the REDCap system. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>firstname</code> </td><td style="text-align: left;"> The user's first name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lastname</code> </td><td style="text-align: left;"> The user's last name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>expiration</code> </td><td style="text-align: left;"> The date at which the user's access to the project will expire. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_group</code> </td><td style="text-align: left;"> The text name of the Data Access Group to which the user is assigned. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_group_id</code> </td><td style="text-align: left;"> The REDCap assigned unique identifier of the Data Access Group. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>design</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utilize the project design modules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>alerts</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utlize the alerts tools. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>user_right</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to modify user rights. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_groups</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has user has permission to assign user to Data Access Groups. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>reports</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to design reports. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>stats_and_charts</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to view the Statistics and Charts module. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>manage_survey_participants</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to manage survey participants. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>calendar</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utilize the project calendar module. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_import_tool</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the data import tool. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_comparison_tool</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the data comparison tool. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>logging</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to view the project logs (audit trail). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>file_repository</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to access the project file repository. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_quality_create</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission create new data quality rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_quality_execute</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to execute data quality rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>api_export</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has API export privileges. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>api_import</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has API import privileges. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mobile_app</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the mobile app. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mobile_app_download_data</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to download data on the mobile app. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_create</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to create new records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_rename</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to rename existing records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_delete</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to delete records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records_all_forms</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to lock records across all forms. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to lock a records on individual forms. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records_customization</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to customize record locking. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_setup</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to set up randomization rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_dashboard</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to view the randomization dashboard. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_perform</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to perform record randomization. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>forms</code> </td><td style="text-align: left;"> Character string listing form access rights for each form. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>forms_export</code> </td><td style="text-align: left;"> Character string listing the form export rights for each form. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When <code>form_rights = TRUE</code>, additional columns are created that give the
form access and form export rights in an individual column for each form.
Form access rights columns have the naming pattern <code style="white-space: pre;">&#8288;[form_name]_access&#8288;</code>
and the form export rights columns have the naming pattern
<code style="white-space: pre;">&#8288;[form_name]_export_access&#8288;</code>.
</p>
<p><code>importUsers</code> invisibly returns the number of users that were added or modified.
</p>
<p><code>deleteUsers</code> invisibly returns the number of users that were deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportUsers()</code>: Export users affiliated with a project.
</p>
</li>
<li> <p><code>importUsers()</code>: Add users or modify user permissions in a project.
</p>
</li>
<li> <p><code>deleteUsers()</code>: Remove users from a project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportUserRoles">exportUserRoles()</a></code>, <br />
<code><a href="#topic+importUserRoles">importUserRoles()</a></code>, <br />
<code><a href="#topic+deleteUserRoles">deleteUserRoles()</a></code>, <br />
<code><a href="#topic+exportUserRoleAssignments">exportUserRoleAssignments()</a></code>, <br />
<code><a href="#topic+importUserRoleAssignments">importUserRoleAssignments()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export users
exportUsers(rcon)

# Export users without additional form access variables
exportUsers(rcon, 
            form_rights = FALSE)
            
# Export users as raw data
exportUsers(rcon, 
            labels = FALSE)
            
            
# Import new permissions
NewData &lt;- data.frame(username = "target_user", 
                      design = 0, 
                      api_export = 1, 
                      api_import = "No Access")
importUsers(rcon, 
            data = NewData)
            

# Remove a user from a project
deleteUsers(rcon, 
            users = "target_user")

## End(Not run)

</code></pre>

<hr>
<h2 id='userRoleAssignmentMethods'>Export or Import User-Role Assignments</h2><span id='topic+userRoleAssignmentMethods'></span><span id='topic+exportUserRoleAssignments'></span><span id='topic+importUserRoleAssignments'></span><span id='topic+exportUserRoleAssignments.redcapApiConnection'></span><span id='topic+importUserRoleAssignments.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export the user-role
assignments, add assignments, or modify existing assignments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportUserRoleAssignments(rcon, ...)

importUserRoleAssignments(rcon, data, ...)

## S3 method for class 'redcapApiConnection'
exportUserRoleAssignments(
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importUserRoleAssignments(
  rcon,
  data,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="userRoleAssignmentMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> with columns <code>username</code> and
<code>unique_role_name</code>. Each <code>username</code> must be unique.
Users without a <code>unique_role_name</code> will not be assigned to
a user role.</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached value
in <code>rcon</code> will be refreshed after the import.</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="userRoleAssignmentMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>exportUserRoleAssignments</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>username</code> </td><td style="text-align: left;"> Username of a user in the project. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>unique_role_name</code> </td><td style="text-align: left;"> The unique role name to which the user is assigned. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_group</code> </td><td style="text-align: left;"> The Data Access Group to which the user is assigned. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><code>importUserRoleAssignments</code> invisibly returns the number of user roles
assignments added or modified.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportUserRoleAssignments()</code>: Export user-role assignments from a project.
</p>
</li>
<li> <p><code>importUserRoleAssignments()</code>: Import user-role assignments to a project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportUsers">exportUsers()</a></code>, <br />
<code><a href="#topic+importUsers">importUsers()</a></code>, <br />
<code><a href="#topic+deleteUsers">deleteUsers()</a></code>, <br />
<code><a href="#topic+exportUserRoles">exportUserRoles()</a></code>, <br />
<code><a href="#topic+importUserRoles">importUserRoles()</a></code>, <br />
<code><a href="#topic+deleteUserRoles">deleteUserRoles()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export user-role assignments
exportUserRoleAssignments(rcon)

# Import/modify a user-role assignment
NewData &lt;- data.frame(username = "desired_user_name", 
                      unique_role_name = "KN3430U")
importUserRolesAssignments(rcon, 
                           data = NewData)

## End(Not run)

</code></pre>

<hr>
<h2 id='userRoleMethods'>Export, Import, or Delete User Roles in a Project</h2><span id='topic+userRoleMethods'></span><span id='topic+exportUserRoles'></span><span id='topic+importUserRoles'></span><span id='topic+deleteUserRoles'></span><span id='topic+exportUserRoles.redcapApiConnection'></span><span id='topic+importUserRoles.redcapApiConnection'></span><span id='topic+deleteUserRoles.redcapApiConnection'></span>

<h3>Description</h3>

<p>These methods enable the user to export user roles,
add user roles, or remove user roles from a project.
They also enable the user to modify the permissions granted to a
user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportUserRoles(rcon, ...)

importUserRoles(rcon, data, ...)

deleteUserRoles(rcon, user_roles, ...)

## S3 method for class 'redcapApiConnection'
exportUserRoles(
  rcon,
  labels = TRUE,
  form_rights = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importUserRoles(
  rcon,
  data,
  consolidate = TRUE,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteUserRoles(
  rcon,
  user_roles,
  refresh = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="userRoleMethods_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_labels">labels</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> the data export and form access rights are
converted to factor objects.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_form_rights">form_rights</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the form rights will be
transformed to one column per form. The API-provided character string
is always returned with the format <code style="white-space: pre;">&#8288;[form_name]:[access_code]&#8288;</code> and a comma separating
each form.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_user_roles">user_roles</code></td>
<td>
<p><code>character</code>. Unique role names to be deleted from
the project.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. Provides the user data for import. It must have
a column titled <code>unique_role_name</code>. All other columns are optional.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_consolidate">consolidate</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the form and data
export access values will be read from the expanded columns. Otherwise,
the consolidated values (as provided by the API export) are utilized.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_refresh">refresh</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, the cached data will
be refreshed after the API action is complete.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_...">...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_error_handling">error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code><a href="#topic+redcapError">redcapError()</a></code>.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_config">config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code><a href="httr.html#topic+POST">httr::POST()</a></code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td></tr>
<tr><td><code id="userRoleMethods_+3A_api_param">api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>User project access fields (those not related to forms or exports)
are mapped between coded and labeled values as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> Access </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Form access fields are mapped as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> View records/responses and edit records (survey responses are read-only) </td>
</tr>
<tr>
 <td style="text-align: left;">
   2 </td><td style="text-align: left;"> Read Only </td>
</tr>
<tr>
 <td style="text-align: left;">
   3 </td><td style="text-align: left;"> Edit survey responses </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Form export permission fields are mapped as:</p>

<table>
<tr>
 <td style="text-align: left;">
   Code </td><td style="text-align: left;"> Label </td>
</tr>
<tr>
 <td style="text-align: left;">
   0 </td><td style="text-align: left;"> No Access </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> Full Data Set </td>
</tr>
<tr>
 <td style="text-align: left;">
   2 </td><td style="text-align: left;"> De-Identified </td>
</tr>
<tr>
 <td style="text-align: left;">
   3 </td><td style="text-align: left;"> Remove Identifier Fields </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h4>Importing Users/User Roles</h4>

<p>It is not required that the user provide a data frame with all of the
fields available for modification. Only fields that are provided will
be modified. The only required field for imports is the <code>username</code> field.
</p>
<p>When setting permissions for a user project access fields, form access,
and form export permissions, the user may provided any of the coded
or labeled values above. The user data is passed through
<code><a href="#topic+prepUserImportData">prepUserImportData()</a></code> before sending it to the API;
text values will be converted to the numeric value.
</p>
<p>It is also permissible to use a column for each form individually, as can
be exported via <code><a href="#topic+exportUsers">exportUsers()</a></code>. With <code>consolidate = TRUE</code>, these
settings will be consolidated into the text string expected by the API.
</p>
<p>The REDCap API does not natively allow for modifying the rights of a user
that is part of a User Role. When an attempt to modify the rights of a
user in a User Role is made with this package, the user will be removed
from the User Role, the rights modified, and then the User Role restored.
This is done silently: be aware that modifications to a user's rights
may not have an impact while the User Role is assigned.
</p>


<h5>Limitations</h5>

<p>When importing via CSV, (as redcapAPI does by default) it appears that
the form access rights are imported but may not always be reflected in
the exported values. The form export rights do not appear to be imported
when using the CSV format. We may be able to resolve this in the future
using a JSON format.
</p>




<h3>Value</h3>

<p><code>exportUserRoles</code> returns a data frame with the columns:</p>

<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>unique_role_name</code> </td><td style="text-align: left;"> The REDCap assigned unique role name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>role_label</code> </td><td style="text-align: left;"> The user provided label describing the role. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>design</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utilize the project design modules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>alerts</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utlize the alerts tools. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>user_right</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to modify user rights. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_access_groups</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has user has permission to assign user to Data Access Groups. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>reports</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to design reports. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>stats_and_charts</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to view the Statistics and Charts module. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>manage_survey_participants</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to manage survey participants. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>calendar</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to utilize the project calendar module. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_import_tool</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the data import tool. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_comparison_tool</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the data comparison tool. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>logging</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to view the project logs (audit trail). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>file_repository</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to access the project file repository. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_quality_create</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission create new data quality rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data_quality_execute</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to execute data quality rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>api_export</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has API export privileges. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>api_import</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has API import privileges. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mobile_app</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to use the mobile app. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mobile_app_download_data</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permissions to download data on the mobile app. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_create</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to create new records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_rename</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to rename existing records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>record_delete</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to delete records. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records_all_forms</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to lock records across all forms. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to lock a records on individual forms. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>lock_records_customization</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to customize record locking. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_setup</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to set up randomization rules. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_dashboard</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to view the randomization dashboard. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>random_perform</code> </td><td style="text-align: left;"> Boolean flag indicating if the user has permission to perform record randomization. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>forms</code> </td><td style="text-align: left;"> Character string listing form access rights for each form. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>forms_export</code> </td><td style="text-align: left;"> Character string listing the form export rights for each form. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When <code>form_rights = TRUE</code>, additional columns are created that give the
form access and form export rights in an individual column for each form.
Form access rights columns have the naming pattern <code style="white-space: pre;">&#8288;[form_name]_access&#8288;</code>
and the form export rights columns have the naming pattern
<code style="white-space: pre;">&#8288;[form_name]_export_access&#8288;</code>.
</p>
<p><code>importUserRoles</code> invisibly returns the number of user roles that were
added or modified.
</p>
<p><code>deleteUserRoles</code> invisibly returns the number of user roles that were deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportUserRoles()</code>: Export user roles from a project.
</p>
</li>
<li> <p><code>importUserRoles()</code>: Import user roles to a project.
</p>
</li>
<li> <p><code>deleteUserRoles()</code>: Delete user roles from a project.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+exportUsers">exportUsers()</a></code>, <br />
<code><a href="#topic+importUsers">importUsers()</a></code>, <br />
<code><a href="#topic+deleteUsers">deleteUsers()</a></code>, <br />
<code><a href="#topic+exportUserRoleAssignments">exportUserRoleAssignments()</a></code>, <br />
<code><a href="#topic+importUserRoleAssignments">importUserRoleAssignments()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Export users-roles
exportUserRoles(rcon)

# Export user-roles without additional form access variables
exportUsersRoles(rcon, 
                 form_rights = FALSE)
            
# Export users as raw data
exportUserRoles(rcon, 
                labels = FALSE)
            
            
# Import new permissions
NewData &lt;- data.frame(unique_role_name = "KN439U", 
                      design = 0, 
                      api_export = 1, 
                      api_import = "No Access")
importUserRoles(rcon, 
                data = NewData)
            

# Remove a user from a project
deleteUserRoles(rcon, 
                user_roles = "KN439U")

## End(Not run) 

</code></pre>

<hr>
<h2 id='validateImport'>Validate Data Frames for Import</h2><span id='topic+validateImport'></span>

<h3>Description</h3>

<p>Validates the variables in a data frame prior to attempting
an import to REDCap
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validateImport(data, meta_data, logfile = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validateImport_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> being prepared for import to REDCap.</p>
</td></tr>
<tr><td><code id="validateImport_+3A_meta_data">meta_data</code></td>
<td>
<p>REDCap database meta data.</p>
</td></tr>
<tr><td><code id="validateImport_+3A_logfile">logfile</code></td>
<td>
<p>A character string giving the filepath to which the
results of the validation are printed.  If <code>""</code>, the results
are printed in the console.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>validateImport</code> is called internally by <code>importRecords</code> and is
not available to the user.
</p>
<p>Each variable is validated by matching they type of variable with the type
listed in the REDCap database.
</p>
<p>Although the log messages will indicate a preference for dates to be in
mm/dd/yyyy format, the function will accept mm/dd/yy, yyyy-mm-dd,
yyyy/mm/dd, and yyyymmdd formats as well.  When possible, pass dates as
Date objects or POSIXct objects to avoid confusion.  Dates are also compared
to minimum and maximum values listed in the data dictionary.  Records where
a date is found out of range are allowed to import and a message
is printed in the log.
</p>
<p>For continuous/numeric variables, the values are checked against the
minimum and maximum allowed in the data dictionary. Records where a value
is found out of range are allowed to import and a message is printed
in the log.
</p>
<p>ZIP codes are tested to see if they fit either the five digit or
five digit + four format.  When these conditions are not met, the data point is
deleted and a message printed in the log.
</p>
<p>YesNo fields permit any of the values 'yes', 'no', '0', '1' to be imported
to REDCap with 0=No, and 1=Yes.  The values are converted to lower case
for validation, so any combination of lower and upper case values
will pass (ie, the data frame is not case-sensitive).
</p>
<p>TrueFalse fields will accept 'TRUE', 'FALSE', 0, 1, and logical values
and are also not case-sensitive.
</p>
<p>Radio and dropdown fields may have either the coding in the data
dictionary or the labels in the data dictionary. The validation will use
the meta data to convert any matching values to the appropriate coding
before importing to REDCap.  Values that cannot be reconciled are
deleted with a message printed in the log.  These variables
are not case-sensitive.
</p>
<p>Checkbox fields require a value of &quot;Checked&quot;, &quot;Unchecked&quot;, &quot;0&quot;, or &quot;1&quot;.
These are currently case-sensitive.  Values that do not match these are
deleted with a warning printed in the log.
</p>
<p>Phone numbers are required to be ten digit numbers.  The phone number is
broken into three parts: 1) a three digit area code, 2) a three digit exchange code,
and 3) a four digit station code.  The exchange code must start with a number
from 2-9, followed by 0-8, and then any third digit.
The exchange code starts with a number from 2-9, followed by any two
digits. The station code is four digits with no restrictions.
</p>
<p>E-mail addresses are considered valid when they have three parts. The first
part comes before the @ symbol, and may be number of characters from
a-z, A-Z, a period, underscore, percent, plus, or minus.  The second part
comes after the @, but before the period, and may consist of any
number of letters, numbers, periods, or dashes.  Finally, the string ends
with a period then anywhere from two to six letters.
</p>

<hr>
<h2 id='vectorToApiBodyList'>Convert R Vector To List for the API Call Body</h2><span id='topic+vectorToApiBodyList'></span>

<h3>Description</h3>

<p>Converts an R vector to a list that will be suitable for
<code>makeApiCall</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vectorToApiBodyList(vector, parameter_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vectorToApiBodyList_+3A_vector">vector</code></td>
<td>
<p>An <code>atomic</code> vector.</p>
</td></tr>
<tr><td><code id="vectorToApiBodyList_+3A_parameter_name">parameter_name</code></td>
<td>
<p><code>character(1)</code>. The REDCap API parameter name.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
vectorToApiBodyList(1:3, "records")

## End(Not run)

</code></pre>

<hr>
<h2 id='widerRepeated'>Transform Data Into Wide Format</h2><span id='topic+widerRepeated'></span>

<h3>Description</h3>

<p>Converts a dataframe into wide format given a single REDCap form.
This function assumes that the Records argument is the result of <code>exportRecordsTyped</code>,
and that all empty values have been previously dropped. This will only widen data frames
that have a unique identification variable (e.g. 'record_id'), &quot;redcap_event_name&quot; and
&quot;redcap_repeat_instrument&quot; in the fields. Otherwise, the data passed in will be returned
unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>widerRepeated(Records, rcon)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="widerRepeated_+3A_records">Records</code></td>
<td>
<p><code>data.frame</code> containing the records from <code><a href="#topic+exportRecordsTyped">exportRecordsTyped()</a></code></p>
</td></tr>
<tr><td><code id="widerRepeated_+3A_rcon">rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td></tr>
</table>


<h3>See Also</h3>



<h4>Other post-processing functions</h4>

<p><code><a href="#topic+recastRecords">recastRecords()</a></code>, <br />
<code><a href="#topic+guessCast">guessCast()</a></code>, <br />
<code><a href="#topic+guessDate">guessDate()</a></code>, <br />
<code><a href="#topic+castForImport">castForImport()</a></code>, <br />
<code><a href="#topic+mChoiceCast">mChoiceCast()</a></code>, <br />
<code><a href="#topic+splitForms">splitForms()</a></code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
Records &lt;- exportRecordsTyped(rcon)

widerRepeated(Records, rcon)

## End(Not run)

</code></pre>

<hr>
<h2 id='writeDataForImport'>Prepare a Data Frame for Import Through the API</h2><span id='topic+writeDataForImport'></span>

<h3>Description</h3>

<p>Converts a dataframe into a character value in the format
of a CSV for import through the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeDataForImport(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeDataForImport_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> to be imported to the API</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
