<!DOCTYPE html><html><head><title>Help for package RcppMsgPack</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RcppMsgPack}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RcppMsgPack-package'><p>'MsgPack' C++ Header Files and Interface Functions for R</p></a></li>
<li><a href='#arrayEx'><p>Simple MsgPack Example</p></a></li>
<li><a href='#enumEx'><p>Second simple MsgPack Example</p></a></li>
<li><a href='#msgpack_format'><p>Format data for 'MsgPack'</p></a></li>
<li><a href='#msgpack_map'><p>'MsgPack' Map</p></a></li>
<li><a href='#msgpack_pack'><p>'MsgPack' Pack</p></a></li>
<li><a href='#msgpack_read'><p>'MsgPack' read</p></a></li>
<li><a href='#msgpack_simplify'><p>Simplify 'MsgPack'</p></a></li>
<li><a href='#msgpack_timestamp_decode'><p>'MsgPack' Timestamp</p></a></li>
<li><a href='#msgpack_timestamp_encode'><p>'MsgPack' Timestamp</p></a></li>
<li><a href='#msgpack_unpack'><p>'MsgPack' Unpack</p></a></li>
<li><a href='#msgpack_write'><p>'MsgPack' write</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'MsgPack' C++ Header Files and Interface Functions for R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-11-18</td>
</tr>
<tr>
<td>Author:</td>
<td>Travers Ching and Dirk Eddelbuettel; the authors and contributors of MsgPack</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dirk Eddelbuettel &lt;edd@debian.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>'MsgPack' header files are provided for use by R packages, along 
 with the ability to access, create and alter 'MsgPack' objects directly from R.
 'MsgPack' is an efficient binary serialization format. It lets you exchange
 data among multiple languages like 'JSON' but it is faster and smaller.
 Small integers are encoded into a single byte, and typical short strings
 require only one extra byte in addition to the strings themselves. This
 package provides headers from the 'msgpack-c' implementation for C and
 C++(11) for use by R, particularly 'Rcpp'. The included 'msgpack-c' headers
 are licensed under the Boost Software License (Version 1.0); the code added
 by this package as well the R integration are licensed under the GPL (&gt;= 2).
 See the files 'COPYRIGHTS' and 'AUTHORS' for a full list of  copyright holders
 and contributors to 'msgpack-c'.  </td>
</tr>
<tr>
<td>Copyright:</td>
<td>file inst/COPYRIGHTS</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, BH</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eddelbuettel/rcppmsgpack/issues">https://github.com/eddelbuettel/rcppmsgpack/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, microbenchmark</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-11-18 20:48:38.367842 UTC; edd</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-11-18 21:10:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='RcppMsgPack-package'>'MsgPack' C++ Header Files and Interface Functions for R</h2><span id='topic+RcppMsgPack-package'></span><span id='topic+RcppMsgPack'></span>

<h3>Description</h3>

<p>'MsgPack' header files are provided for use by R packages, along 
with the ability to access, create and alter 'MsgPack' objects directly from R.
'MsgPack' is an efficient binary serialization format. It lets you exchange
data among multiple languages like 'JSON' but it is faster and smaller.
Small integers are encoded into a single byte, and typical short strings
require only one extra byte in addition to the strings themselves. This
package provides headers from the 'msgpack-c' implementation for C and
C++(11) for use by R, particularly 'Rcpp'. The included 'msgpack-c' headers
are licensed under the Boost Software License (Version 1.0); the code added
by this package as well the R integration are licensed under the GPL (&gt;= 2).
See the files 'COPYRIGHTS' and 'AUTHORS' for a full list of  copyright holders
and contributors to 'msgpack-c'.  </p>


<h3>Package Content</h3>

<p>Index of help topics:
</p>
<pre>
RcppMsgPack-package     'MsgPack' C++ Header Files and Interface
                        Functions for R
arrayEx                 Simple MsgPack Example
enumEx                  Second simple MsgPack Example
msgpack_format          Format data for 'MsgPack'
msgpack_map             'MsgPack' Map
msgpack_pack            'MsgPack' Pack
msgpack_read            'MsgPack' read
msgpack_simplify        Simplify 'MsgPack'
msgpack_timestamp_decode
                        'MsgPack' Timestamp
msgpack_timestamp_encode
                        'MsgPack' Timestamp
msgpack_unpack          'MsgPack' Unpack
msgpack_write           'MsgPack' write
</pre>

<h3>Maintainer</h3>

<p>Dirk Eddelbuettel &lt;edd@debian.org&gt;</p>


<h3>Author(s)</h3>

<p>Travers Ching and Dirk Eddelbuettel; the authors and contributors of MsgPack</p>

<hr>
<h2 id='arrayEx'>Simple MsgPack Example</h2><span id='topic+arrayEx'></span>

<h3>Description</h3>

<p>Simple MsgPack Example
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arrayEx()
</code></pre>


<h3>Details</h3>

<p>The function provides a simple illustration of MessagePack.
</p>


<h3>Value</h3>

<p>A boolean value of <code>TRUE</code> is returned, but the function exists
for its side effect.
</p>


<h3>See Also</h3>

<p>The MessagePack documentation, particularly the msgpack-c examples.
</p>

<hr>
<h2 id='enumEx'>Second simple MsgPack Example</h2><span id='topic+enumEx'></span>

<h3>Description</h3>

<p>Second simple MsgPack Example
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enumEx()
</code></pre>


<h3>Details</h3>

<p>The function provides a simple illustration of MessagePack.
</p>


<h3>Value</h3>

<p>A boolean value of <code>TRUE</code> is returned, but the function exists
for its side effect.
</p>


<h3>See Also</h3>

<p>The MessagePack documentation, particularly the msgpack-c examples.
</p>

<hr>
<h2 id='msgpack_format'>Format data for 'MsgPack'</h2><span id='topic+msgpack_format'></span><span id='topic+msgpackFormat'></span>

<h3>Description</h3>

<p>A helper function to format R data for input to 'MsgPack'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_format(x)

msgpackFormat(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_format_+3A_x">x</code></td>
<td>
<p>An r object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted R object to use as input to msgpack_pack.  Vectors are converted into Lists.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- msgpack_format(1:10)
x_packed &lt;- msgpack_pack(x)
x_unpacked &lt;- msgpack_unpack(x_packed)
x_simplified &lt;- msgpack_simplify(x_unpacked)
</code></pre>

<hr>
<h2 id='msgpack_map'>'MsgPack' Map</h2><span id='topic+msgpack_map'></span><span id='topic+msgpackMap'></span>

<h3>Description</h3>

<p>A helper function to create a map object for input to 'MsgPack'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_map(key, value)

msgpackMap(key, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_map_+3A_key">key</code></td>
<td>
<p>A list or vector of keys (coerced to list).  Duplicate keys are fine (connects to std::multimap in C++).</p>
</td></tr>
<tr><td><code id="msgpack_map_+3A_value">value</code></td>
<td>
<p>A list or vector of values (coerced to list).  This should be the same length as key.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An data.frame also of class &quot;map&quot; that can be used as input to msgpack_pack.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- msgpack_map(key=letters[1:10], value=1:10)
x_packed &lt;- msgpack_pack(x)
x_unpacked &lt;- msgpack_unpack(x_packed)
</code></pre>

<hr>
<h2 id='msgpack_pack'>'MsgPack' Pack</h2><span id='topic+msgpack_pack'></span><span id='topic+msgpackPack'></span>

<h3>Description</h3>

<p>Serialize any number of objects into a single message.  Unnamed List is converted into Array, Map/Data.frame and Named Lists are converted into Maps.  Integer, Double, Character, Raw vectors and NULL are converted into Int types (depending on size), Float types, String, Raw and Nil respectively.  Raw vectors with EXT attribute are converted into Extension types.  The EXT attribute should be an integer from 0 to 127.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_pack(...)

msgpackPack(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_pack_+3A_...">...</code></td>
<td>
<p>Any R objects that have corresponding msgpack types.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A raw vector containing the message.
</p>


<h3>See Also</h3>

<p>See examples/tests.r for more examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- msgpack_format(1:10)
x_packed &lt;- msgpack_pack(x)
x_unpacked &lt;- msgpack_unpack(x_packed)
x_simplified &lt;- msgpack_simplify(x_unpacked)
</code></pre>

<hr>
<h2 id='msgpack_read'>'MsgPack' read</h2><span id='topic+msgpack_read'></span><span id='topic+msgpackRead'></span>

<h3>Description</h3>

<p>A helper function to de-serialize an object read from a file or a connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_read(file, simplify = F, mode = "auto", nbytes = 16777216)

msgpackRead(file, simplify = F, mode = "auto", nbytes = 16777216)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_read_+3A_file">file</code></td>
<td>
<p>A connection, or a string describing the file or pipe to write to, depending on the mode.</p>
</td></tr>
<tr><td><code id="msgpack_read_+3A_simplify">simplify</code></td>
<td>
<p>Passed to msgpack_unpack.  Default: FALSE.</p>
</td></tr>
<tr><td><code id="msgpack_read_+3A_mode">mode</code></td>
<td>
<p>One of &quot;auto&quot;, &quot;file&quot;, &quot;gzip&quot; or &quot;pipe&quot;.  If &quot;auto&quot;, detects based on the file string (any space == pipe, &quot;.gz&quot; == gzip, file otherwise).  Ignored if file is a connection.</p>
</td></tr>
<tr><td><code id="msgpack_read_+3A_nbytes">nbytes</code></td>
<td>
<p>If reading from a pipe or gzip, how many bytes to read at a time.  Default: 16777216</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- tempfile(fileext=".gz")
msgpack_write(1:10, file=tmp)
x &lt;- msgpack_read(tmp, simplify=TRUE)
</code></pre>

<hr>
<h2 id='msgpack_simplify'>Simplify 'MsgPack'</h2><span id='topic+msgpack_simplify'></span><span id='topic+msgpackSimplify'></span>

<h3>Description</h3>

<p>A helper function for simplifying a 'MsgPack' return object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_simplify(x)

msgpackSimplify(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_simplify_+3A_x">x</code></td>
<td>
<p>Return object from msgpack_unpack.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A simplified return object from msgpack_unpack.  Lists of all the same type are concatenated into an atomic vector.  Maps are simplified to named lists or named vectors as appropriate.  NULLs are converted to NAs if simplified to vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- msgpack_format(1:10)
x_packed &lt;- msgpack_pack(x)
x_unpacked &lt;- msgpack_unpack(x_packed)
x_simplified &lt;- msgpack_simplify(x_unpacked)
</code></pre>

<hr>
<h2 id='msgpack_timestamp_decode'>'MsgPack' Timestamp</h2><span id='topic+msgpack_timestamp_decode'></span><span id='topic+msgpackTimestampDecode'></span>

<h3>Description</h3>

<p>Decodes a timestamp from the 'MsgPack' extension specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_timestamp_decode(x, posix = T, tz = "UTC")

msgpackTimestampDecode(x, posix = T, tz = "UTC")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_timestamp_decode_+3A_x">x</code></td>
<td>
<p>A raw vector with attriubte EXT = -1, following the 'MsgPack' timestamp specifications.</p>
</td></tr>
<tr><td><code id="msgpack_timestamp_decode_+3A_posix">posix</code></td>
<td>
<p>Return a POSIXct object.  Otherwise, return a list with seconds and nanoseconds since 1970-01-01 00:00:00.</p>
</td></tr>
<tr><td><code id="msgpack_timestamp_decode_+3A_tz">tz</code></td>
<td>
<p>If returning a POSIXct, set the timezone.  Note that this doesn't change the underlying value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A POSIXct or list.  
mt &lt;- Sys.time()
attr(mt, &quot;tzone&quot;) &lt;- &quot;UTC&quot;
mp &lt;- msgpack_pack(msgpack_timestamp_encode(mt))
mtu &lt;- msgpack_timestamp_decode(msgpack_unpack(mp))
identical(mt, mtu)
</p>

<hr>
<h2 id='msgpack_timestamp_encode'>'MsgPack' Timestamp</h2><span id='topic+msgpack_timestamp_encode'></span><span id='topic+msgpackTimestampEncode'></span>

<h3>Description</h3>

<p>Encodes a timestamp to the 'MsgPack' specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_timestamp_encode(posix = NULL, seconds = NULL, nanoseconds = NULL)

msgpackTimestampEncode(posix = NULL, seconds = NULL, nanoseconds = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_timestamp_encode_+3A_posix">posix</code></td>
<td>
<p>A POSIXct or POSIXlt or anything that can be coerced to a numeric.</p>
</td></tr>
<tr><td><code id="msgpack_timestamp_encode_+3A_seconds">seconds</code></td>
<td>
<p>The number of seconds since 1970-01-01 00:00:00 UTC.  Can be negative.  Don't use seconds and nanoseconds if you use posix (and vice versa).</p>
</td></tr>
<tr><td><code id="msgpack_timestamp_encode_+3A_nanoseconds">nanoseconds</code></td>
<td>
<p>The number of nanoseconds since 1970-01-01 00:00:00 UTC.  Must be less than 1,000,000,000 and greater than 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A serialized timestamp that can be used as input to msgpack_pack.  Briefly, this is an extension type -1 that is variable length, depending on the desired range and precision.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt &lt;- Sys.time()
attr(mt, "tzone") &lt;- "UTC"
mp &lt;- msgpack_pack(msgpack_timestamp_encode(mt))
mtu &lt;- msgpack_timestamp_decode(msgpack_unpack(mp))
identical(mt, mtu)
</code></pre>

<hr>
<h2 id='msgpack_unpack'>'MsgPack' Unpack</h2><span id='topic+msgpack_unpack'></span><span id='topic+msgpackUnpack'></span>

<h3>Description</h3>

<p>De-serialize a 'MsgPack' message.  Array is converted into List. Map is converted into Map/Data.frame. Extension types are converted into raw vectors with EXT attribute.  Integers, Floats, Strings, Raw and Nil are converted into Integer, Float, Character, Raw and NULL respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_unpack(message, simplify = F)

msgpackUnpack(message, simplify = F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_unpack_+3A_message">message</code></td>
<td>
<p>A raw vector containing the message.</p>
</td></tr>
<tr><td><code id="msgpack_unpack_+3A_simplify">simplify</code></td>
<td>
<p>Default false.  Should the return object be simplified?  This is generally faster and more memory efficient.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The message pack object(s) converted into R types.  If more than one object exists in the message, a list of class &quot;msgpack_set&quot; containing the objects is returned.
</p>


<h3>See Also</h3>

<p>See examples/tests.r for more examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- msgpack_format(1:10)
x_packed &lt;- msgpack_pack(x)
x_unpacked &lt;- msgpack_unpack(x_packed)
x_simplified &lt;- msgpack_simplify(x_unpacked)
</code></pre>

<hr>
<h2 id='msgpack_write'>'MsgPack' write</h2><span id='topic+msgpack_write'></span><span id='topic+msgpackWrite'></span>

<h3>Description</h3>

<p>A helper function to serialize an object and write it to a file, or a connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgpack_write(..., msg = NULL, file, mode = "auto")

msgpackWrite(..., msg = NULL, file, mode = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgpack_write_+3A_...">...</code></td>
<td>
<p>Serializable R objects.</p>
</td></tr>
<tr><td><code id="msgpack_write_+3A_msg">msg</code></td>
<td>
<p>Message to write to file.  If not NULL and a raw vector, write it instead of the R objects.  Default: NULL.</p>
</td></tr>
<tr><td><code id="msgpack_write_+3A_file">file</code></td>
<td>
<p>A connection, or a string describing the file or pipe to write to, depending on the mode.</p>
</td></tr>
<tr><td><code id="msgpack_write_+3A_mode">mode</code></td>
<td>
<p>One of &quot;auto&quot;, &quot;file&quot;, &quot;gzip&quot; or &quot;pipe&quot;.  If &quot;auto&quot;, detects based on the file string (any space == pipe, &quot;.gz&quot; == gzip, file otherwise).  Ignored if file is a connection.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- tempfile(fileext=".gz")
msgpack_write(1:10, file=tmp)
x &lt;- msgpack_read(tmp, simplify=TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
