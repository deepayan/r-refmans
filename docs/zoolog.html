<!DOCTYPE html><html><head><title>Help for package zoolog</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {zoolog}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AssembleReference'><p>Assemble Reference</p></a></li>
<li><a href='#CondenseLogs'><p>Condense Measure Log-Ratios</p></a></li>
<li><a href='#dataValenzuelaLamas2008'><p>Example dataset</p></a></li>
<li><a href='#InCategory'><p>Value Matching by Thesaurus Category</p></a></li>
<li><a href='#LogRatios'><p>Log Ratios of Measurements</p></a></li>
<li><a href='#referencesDatabase'><p>References</p></a></li>
<li><a href='#RemoveNACases'><p>Remove Cases Missing All Measurements</p></a></li>
<li><a href='#StandardizeNomenclature'><p>Standardize Nomenclature</p></a></li>
<li><a href='#Subtaxonomy'><p>Subtaxonomy under taxonomical category</p></a></li>
<li><a href='#ThesaurusManagement'><p>Thesaurus Management</p></a></li>
<li><a href='#ThesaurusReaderWriter'><p>Thesaurus Readers and Writers</p></a></li>
<li><a href='#zoologTaxonomy'><p>Taxonomy hierarchy for <span class="pkg">zoolog</span></p></a></li>
<li><a href='#zoologThesaurus'><p>Thesaurus Set for <span class="pkg">zoolog</span></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Zooarchaeological Analysis with Log-Ratios</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-8-22</td>
</tr>
<tr>
<td>Description:</td>
<td>Includes functions and reference data to 
    generate and manipulate log-ratios (also known as log size index (LSI)
    values) from measurements obtained on zooarchaeological material. Log
    ratios are used to compare the relative (rather than the absolute)
    dimensions of animals from archaeological contexts 
    (Meadow 1999, ISBN: 9783896463883).
    zoolog is also able to seamlessly integrate data and references 
    with heterogeneous nomenclature, which is internally managed by a 
    zoolog thesaurus. 
    A preliminary version of the zoolog methods was first used by 
    Trentacoste, Nieto-Espinet, and Valenzuela-Lamas (2018) 
    &lt;<a href="https://doi.org/10.1371%2Fjournal.pone.0208109">doi:10.1371/journal.pone.0208109</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, ggplot2, stats</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, stringi, Rdpack (&ge; 0.7)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://josempozo.github.io/zoolog/">https://josempozo.github.io/zoolog/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-26 08:40:36 UTC; jose</td>
</tr>
<tr>
<td>Author:</td>
<td>Jose M Pozo <a href="https://orcid.org/0000-0002-0759-3510"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Angela Trentacoste
    <a href="https://orcid.org/0000-0001-7096-5252"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Ariadna Nieto-Espinet
    <a href="https://orcid.org/0000-0003-2567-1735"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Silvia Guimarães Chiarelli
    <a href="https://orcid.org/0000-0002-3778-3315"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Silvia Valenzuela-Lamas
    <a href="https://orcid.org/0000-0001-9886-0372"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jose M Pozo &lt;josmpozo@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-26 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='AssembleReference'>Assemble Reference</h2><span id='topic+AssembleReference'></span>

<h3>Description</h3>

<p>Function to build a reference dataframe selecting a case for each taxon from
the available specimens in the references' database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AssembleReference(
  combination,
  ref.db = referencesDatabase,
  thesaurus = zoologThesaurus$taxon
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AssembleReference_+3A_combination">combination</code></td>
<td>
<p>A dataframe or named list. Each (column) name identifies a
taxon. Each column or list element must have a single element of type
character, identifying one of the sources included in the references'
database.</p>
</td></tr>
<tr><td><code id="AssembleReference_+3A_ref.db">ref.db</code></td>
<td>
<p>A reference database. This is a named list of named lists of
dataframes. The first level is named by taxon and the second level is named
by reference source. Each dataframe includes the reference for the
corresponding taxon and source. The default
<code>ref.db = <a href="#topic+referencesDatabase">referencesDatabase</a></code> is provided as package
<span class="pkg">zoolog</span> data.</p>
</td></tr>
<tr><td><code id="AssembleReference_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus for taxa.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A reference dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## `referenceSets` includes a series of predefined reference compositions.
referenceSets
## Actually the package `references` is build from them.
## We can rebuild any of them:
referenceCombi &lt;- AssembleReference(referenceSets["Combi", ])

## Define an altenative reference combining differently the references'
## database:
refComb &lt;- list(cattle = "Nieto", sheep = "Davis", Goat = "Clutton",
                pig = "Albarella", redDeer = "Basel")
userReference &lt;- AssembleReference(refComb)

</code></pre>

<hr>
<h2 id='CondenseLogs'>Condense Measure Log-Ratios</h2><span id='topic+CondenseLogs'></span>

<h3>Description</h3>

<p>This function condenses the calculated log ratio values into a reduced number
of features by grouping log ratio values and selecting or calculating a
feature value. By default the selected groups each represents a single dimension,
i.e. <code>Length</code> and <code>Width</code>. Only one feature is extracted per group.
Currently, two methods are possible: priority (default) or average.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CondenseLogs(
  data,
  grouping = list(Length = c("GL", "GLl", "GLm", "HTC"), Width = c("BT", "Bd", "Bp",
    "SD", "Bfd", "Bfp"), Depth = c("Dd", "DD", "BG", "Dp")),
  method = "priority"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CondenseLogs_+3A_data">data</code></td>
<td>
<p>A dataframe with the input measurements.</p>
</td></tr>
<tr><td><code id="CondenseLogs_+3A_grouping">grouping</code></td>
<td>
<p>A list of named character vectors. The list includes a vector
per selected group. Each vector gives the group of measurements in order of
priority. By default the groups are
<code>Length = c("GL", "GLl", "GLm", "HTC")</code>,
<code>Width = c("BT", "Bd", "Bp", "SD", "Bfd", "Bfp")</code>, and
<code>Depth = c("Dd", "DD", "BG", "Dp")</code>.
The order is irrelevant for <code>method = "average"</code>.</p>
</td></tr>
<tr><td><code id="CondenseLogs_+3A_method">method</code></td>
<td>
<p>Character string indicating which method to use for extracting
the condensed features. Currently accepted methods: <code>"priority"</code>
(default) and <code>"average"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This operation is motivated by two circumstances. First, not all measurements
are available for every bone specimen, which obstructs their direct comparison
and statistical analysis. Second, several measurements can be strongly
correlated (e.g. SD and Bd both represent bone width).
Thus, considering them as independent would
produce an over-representation of bone remains with more measurements per
axis. Condensing each group of measurements into a single feature
(e.g. one measure per axis) palliates both problems.
</p>
<p>Observe that an important property of the log-ratios from a reference is that
it makes the different measures comparable. For instance, if a bone is
scaled with respect to the reference, so that it homogeneously doubles its
width, then all width related measures
(<em>BT</em>, <em>Bd</em>, <em>Bp</em>, <em>SD</em>, ...) will give the
same log-ratio (<code>log(2)</code>). In contrast, the
absolute measures are not directly comparable.
</p>
<p>The measurement names in the grouping list are given without the
<code>logPrefix</code>. But the selection is made from the log-ratios.
</p>
<p>The default method is <code>"priority"</code>, which selects the first available
measure log-ratio in each group. The method <code>"average"</code> extracts the
mean per group, ignoring the non-available measures.
We provide the following by-default group and prioritization:
For lengths, the order of priority is: GL, GLl, GLm, HTC.
For widths, the order of priority is: BT, Bd, Bp, SD, Bfd, Bfp.
For depths, the order of priority is: Dd, DD, BG, Dp
This order maximises the robustness and reliability of the measurements,
as priority is given to the most abundant, more replicable, and less age
dependent measurements.
</p>
<p>This method was first used in:
Trentacoste, A., Nieto-Espinet, A., &amp; Valenzuela-Lamas, S. (2018).
Pre-Roman improvements to agricultural production: Evidence from livestock
husbandry in late prehistoric Italy.
PloS one, 13(12), e0208109.
</p>
<p>Alternatively, a user-defined <code>method</code> can be provided as a function
with a single argument (data.frame) assumed to have as columns the measure
log-ratios determined by the <code>grouping</code>.
</p>


<h3>Value</h3>

<p>A dataframe including the input dataframe and additional columns, one
for each extracted condensed feature, with the corresponding name given in
<code>grouping</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read an example dataset:
dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package="zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")
## For illustration purposes we keep now only a subset of cases to make
## the example run sufficiently fast.
## Avoid this step if you want to process the full example dataset.
dataExample &lt;- dataExample[1:1000, ]

## Compute the log-ratios and select the cases with available log ratios:
dataExampleWithLogs &lt;- RemoveNACases(LogRatios(dataExample))
## We can observe the first lines (excluding some columns for visibility):
head(dataExampleWithLogs)[, -c(6:20,32:63)]

## Extract the default condensed features with the default "priority" method:
dataExampleWithSummary &lt;- CondenseLogs(dataExampleWithLogs)
head(dataExampleWithSummary)[, -c(6:20,32:63)]

## Extract only width with "average" method:
dataExampleWithSummary2 &lt;- CondenseLogs(dataExampleWithLogs,
                               grouping = list(Width = c("BT", "Bd", "Bp", "SD")),
                               method = "average")
head(dataExampleWithSummary2)[, -c(6:20,32:63)]
</code></pre>

<hr>
<h2 id='dataValenzuelaLamas2008'>Example dataset</h2><span id='topic+dataValenzuelaLamas2008'></span>

<h3>Description</h3>

<p>The dataset provided as an example originates from
(Valenzuela-Lamas 2008). The dataset is written in
Catalan, with the exception of some headings to facilitate understanding of
its contents.
</p>


<h3>Format</h3>

<p>The dataset is provided in the <span class="pkg">zoolog</span> <code>extdata</code> folder as a file
in semicolon-separated values format but compressed with
gzip to reduce its size:
</p>

<dl>
<dt><code>dataValenzuelaLamas2008.csv.gz</code></dt><dd></dd>
</dl>

<p>The file is provided in UTF-8 encoding. The file encoding is relevant
because the dataset contains accents and special characters that needs to be
correctly displayed. It can
be directly open by <code>utils::read.csv2</code>, provided that the correct
encoding is set (see examples below).
</p>
<p>Every row of the data.frame refers to one individual bone fragment unless
otherwise stated in the <em>Observations</em> field (&quot;Observacions&quot;).
</p>
<p>All the measurements are expressed in millimetres and were obtained with a
manual calliper.
</p>
<p>The main headings in the database are:
</p>

<dl>
<dt>Site</dt><dd><p>The faunal remains from three Iron Age archaeological sites were recorded
(ALP = Alorda Park, TFC = Turó de la Font de la Canya, OLD = Olèrdola).</p>
</dd>
<dt>N inv	</dt><dd><p>A correlative number for each fragment.</p>
</dd>
<dt>UE</dt><dd><p>Refers to the Stratigraphic Unit (SU in English).</p>
</dd>
<dt>Especie</dt><dd><p>Refers to the species.</p>
</dd>
<dt>Os</dt><dd><p>Refers to the skeletal element.</p>
</dd>
<dt>Fragment</dt><dd><p>Refers to the preserved part in the vertical axis (distal, proximal, diaphysis,
etc.).</p>
</dd>
<dt>Lat</dt><dd><p>Bone laterality: right (d) or left (e).</p>
</dd>
<dt>Vora</dt><dd><p>Refers to the preserved part in relation to the circumference (c), or a vertically,
transversally and obliquely fragmented (sto).</p>
</dd>
<dt>Fract</dt><dd><p>Refers to fracture during field excavation or lab work.</p>
</dd>
<dt>Tafo</dt><dd><p>Refers to anthropic and post-depositional alterations.</p>
</dd>
<dt>Grau</dt><dd><p>Refers to degree of bone alteration in a scale from 0 (no alteration) to 4 (diaphysis completely altered).</p>
</dd>
<dt>Epif</dt><dd><p>Degree of fusion: s= fused, ns= unfused, ec = fusion visible. Also tooth wear is recorded here following (Gardeisen 1997).</p>
</dd>
<dt>Sexe</dt><dd><p>Sex: male (masc) / female (fem).</p>
</dd>
<dt>Traces</dt><dd><p>Refers to butchery marks. It may also include other observations.</p>
</dd>
<dt>Observacions</dt><dd><p>Observations.</p>
</dd>
<dt>Recinte</dt><dd><p>Refers to the number of silo structure (e.g. SJ8) or the room (e.g. AB)
from which the material originates.</p>
</dd>
<dt>TPQ</dt><dd><p>Absolute chronology in Terminus Post Quem.</p>
</dd>
<dt>TAQ</dt><dd><p>Absolute chronology in Terminus Ante Quem.</p>
</dd>
<dt>Period</dt><dd><p>Chronological phasing.</p>
</dd>
<dt>Capsa</dt><dd><p>Box number that contains the item.</p>
</dd>
<dt>Measurement codes </dt><dd><p>The nomenclature follows (Von den Driesch 1976).</p>
</dd>
</dl>



<h3>References</h3>

<p>Gardeisen A (1997).
&ldquo;Exploitation des prélèvements et fichiers de spécialité (PRL, FAUNE, OS).&rdquo;
<em>Lattara</em>, <b>10</b>, 251&ndash;278.<br /><br /> Valenzuela-Lamas S (2008).
<em>Alimentació i ramaderia al Penedès durant la protohistòria (segles VII-III aC)</em>.
Societat Catalana d'Arqueologia (Premi d’Arqueologia - Memorial Josep Barber\&lsquo;a i Farr\'as, 5a edici\&rsquo;o).
<a href="http://www.scarqueologia.com/?page_id=10">http://www.scarqueologia.com/?page_id=10</a>.<br /><br /> Von den Driesch A (1976).
<em>A guide to the measurement of animal bones from archaeological sites: as developed by the Institut für Palaeoanatomie, Domestikationsforschung und Geschichte der Tiermedizin of the University of Munich</em>, volume 1.
Peabody Museum Press.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package="zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")

</code></pre>

<hr>
<h2 id='InCategory'>Value Matching by Thesaurus Category</h2><span id='topic+InCategory'></span>

<h3>Description</h3>

<p>Function to check if an element belongs to a category according to a
thesaurus. It is similar to <code><a href="base.html#topic++25in+25">%in%</a></code> and
<code><a href="base.html#topic+is.element">is.element</a></code>, returning a logical vector indicating if each
element in a given vector is included in a given set. But <code>InCategory</code>
checks for equality assuming the equivalencies defined in the given thesaurus.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>InCategory(x, category, thesaurus)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="InCategory_+3A_x">x</code></td>
<td>
<p>Character vector to be checked for its inclusion in the category.</p>
</td></tr>
<tr><td><code id="InCategory_+3A_category">category</code></td>
<td>
<p>Character vector identifying the categories in which the
inclusion of <code>x</code> will be checked. Each category can be identified by
any equivalent name in the thesaurus.</p>
</td></tr>
<tr><td><code id="InCategory_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector of the same length as <code>x</code>. Each value answers the
question: <em>Does the corresponding element in <code>x</code> belongs to any of
the thesaurus categories identified by <code>category</code>?</em>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zoologThesaurus">zoologThesaurus</a></code>, <code><a href="base.html#topic++25in+25">%in%</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>InCategory(c("sheep", "cattle", "goat", "red deer"),
           c("ovis", "capra"),
           zoologThesaurus$taxon)

</code></pre>

<hr>
<h2 id='LogRatios'>Log Ratios of Measurements</h2><span id='topic+LogRatios'></span>

<h3>Description</h3>

<p>Function to compute the (base 10) log ratios of the measurements
relative to standard reference values.
The default reference and several alternative references are provided with the
package. But the user can use their own references if desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LogRatios(
  data,
  ref = reference$Combi,
  identifiers = c("Taxon", "Element"),
  refMeasuresName = "Measure",
  refValuesName = "Standard",
  thesaurusSet = zoologThesaurus,
  taxonomy = zoologTaxonomy,
  joinCategories = NULL,
  mergedMeasures = NULL,
  useGenusIfUnambiguous = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="LogRatios_+3A_data">data</code></td>
<td>
<p>A dataframe with the input measurements.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_ref">ref</code></td>
<td>
<p>A dataframe including the measurement values used as references.
The default <code>ref = reference$Combi</code> and other <a href="#topic+reference">reference</a> sets are
provided with the package <span class="pkg">zoolog</span>.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_identifiers">identifiers</code></td>
<td>
<p>A vector of column names in <code>ref</code> identifying
a type of bone. By default <code>identifiers = c("Taxon", "Element")</code>.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_refmeasuresname">refMeasuresName</code></td>
<td>
<p>The column name in <code>ref</code> identifying the type of
bone measurement.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_refvaluesname">refValuesName</code></td>
<td>
<p>The column name in <code>ref</code> giving the measurement
value.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_thesaurusset">thesaurusSet</code></td>
<td>
<p>A thesaurus allowing datasets with different nomenclatures
to be merged. By default <code>thesaurusSet = <a href="#topic+zoologThesaurus">zoologThesaurus</a></code>.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_taxonomy">taxonomy</code></td>
<td>
<p>A taxonomy allowing the automatic detection of data and
reference sharing the same genus (or higher taxonomic rank), although of
different species. By default <code>taxonomy = <a href="#topic+zoologTaxonomy">zoologTaxonomy</a></code>.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_joincategories">joinCategories</code></td>
<td>
<p>A list of named character vectors. Each vector is named
by a category in the reference and includes a set of categories in the data
for which to compute the log ratios with respect to that reference.
When <code>NULL</code> (default) no grouping is considered.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_mergedmeasures">mergedMeasures</code></td>
<td>
<p>A list of character vectors or a single character vector.
Each vector identifies a set of measures that the data presents merged in the
same column, named as any of them. This practice only makes sense if only one
of the measures can appear in each bone element.</p>
</td></tr>
<tr><td><code id="LogRatios_+3A_usegenusifunambiguous">useGenusIfUnambiguous</code></td>
<td>
<p>Boolean. If <code>TRUE</code> (default), data cases
are matched to reference sharing the same genus, instead of sharing the same
species.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each log ratio is defined as the decimal logarithm of the ratio of the
variable of interest to a corresponding reference value.
</p>
<p>The <code>identifiers</code> are expected to determine corresponding
columns in both data and reference. Each value in these columns identifies
the type of bone. By default this is determined by a taxon and a bone
element. For any case in the data, the log ratios are computed with respect
to the reference values in the same bone type. If the reference does not
include that bone type, the corresponding log ratios are set to <code>NA</code>.
</p>
<p>The taxonomy allows the matching of data and reference by genus, instead
of by species. This is the default behaviour with
<code>useGenusIfUnambiguous = TRUE</code>, unless there is some ambiguity:
reference including more than one species for the same genus. For instance,
<code>reference$Combi</code> includes a reference for <em>Sus scrofa</em>.
If the data includes cases of <em>Sus domesticus</em>, their
log ratios will be computed with respect to the provided reference for
<em>Sus scrofa</em>.
However, a warning is given to inform the user of this assumption, and let
they know that this can be prevented by setting
<code>useGenusIfUnambiguous = FALSE</code>.
</p>
<p>For some applications it can be interesting to group some set of bone types
into the same reference category to compute the log ratios. The parameter
<code>joinCategories</code> allows this grouping. <code>joinCategories</code> must be a
list of named vectors, each including the set of categories in the data
which should be mapped to the reference category given by its name.
</p>
<p>This can be applied to group different species into a single
reference species. For instance <em>sheep</em>, <em>capra</em>, and doubtful
cases between both (<em>sheep/goat</em>), can be grouped and matched to the
same reference for <em>sheep</em>, by setting
<code>joinCategories = list(sheep = c("sheep", "goat", "oc"))</code>.
Indeed, the zoologTaxonomy can be used for that purpose using the function
<code><a href="#topic+SubtaxonomySet">SubtaxonomySet</a></code> as
<code>joinCategories = list(sheep = SubtaxonomySet("Caprini"))</code>.
Similarly, <code>joinCategories</code> can be applied to group
different bone elements into a single reference (see the example below for
undetermined phalanges).
</p>
<p>Note that the <code>joinCategories</code> option does not remove the distinction
between the different bone types in the data, just indicates that for any
of them the log ratios must be computed from the same reference.
</p>
<p>Using the taxonomy, the presence of cases identified by higher taxonomic
ranks are also automatically detected. For instance, if some partially
identified cases have been recorded as &quot;Ovis/Capra&quot;, this is recognized
to denote the tribe <em>Caprini</em>, which includes several possible species.
Then a warning is given informing the user of the detection of these cases
and of the option to use any of the corresponding species in the reference by
using the argument <code>joinCategories</code> (unless this has been already done).
</p>
<p>There are some measures that, for most usual taxa, are restricted to a subset
of bones. For instance, for <em>Bos</em>, <em>Ovis</em>, <em>Capra</em>, and <em>Sus</em>, the measure
<em>GLl</em> is only relevant for the <em>astragalus</em>, while <em>GL</em> is not
applicable to it.
Thus, there cannot be any ambiguity between both measures since they can
be identified by the bone element. This justifies that some users have
simplified datasets where a single column records indistinctly <em>GL</em> or
<em>GLl</em>. The optional parameter <code>mergedMeasures</code> facilitates the
processing of this type of simplified dataset. For the alluded example,
<code>mergedMeasures = list(c("GL", "GLl"))</code> automatically selects, for each
bone element, the corresponding measure present in the reference.
</p>
<p>Observe that if <code>mergedMeasures</code> is set to non mutually exclusive
measures, the behaviour is unpredictable.
</p>


<h3>Value</h3>

<p>A dataframe including the input dataframe and additional columns, one
for each extracted log ratio for each relevant measurement in the reference.
The name of the added columns are constructed by prefixing each measurement by
the internal variable <code>logPrefix</code>.
</p>
<p>If the input dataframe includes additional S3 classes (such as &quot;tbl_df&quot;),
they are also passed to the output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read an example dataset:
dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package="zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")
## For illustration purposes we keep now only a subset of cases to make
## the example run sufficiently fast.
## Avoid this step if you want to process the full example dataset.
dataExample &lt;- dataExample[1:400, ]
## We can observe the first lines (excluding some columns for visibility):
head(dataExample)[, -c(6:20,32:64)]

## Compute the log-ratios with respect to the default reference in the
## package zoolog:
dataExampleWithLogs &lt;- LogRatios(dataExample)
## The output data frame include new columns with the log-ratios of the
## present measurements, in both data and reference, with a "log" prefix:
head(dataExampleWithLogs)[, -c(6:20,32:64)]

## Compute the log-ratios with respect to a different reference:
dataExampleWithLogs2 &lt;- LogRatios(dataExample, ref = reference$Basel)
head(dataExampleWithLogs2)[, -c(6:20,32:64)]

## Define an altenative reference combining differently the references'
## database:
refComb &lt;- list(cattle = "Nieto", sheep = "Davis", Goat = "Clutton",
                pig = "Albarella", redDeer = "Basel")
userReference &lt;- AssembleReference(refComb)
## Compute the log-ratios with respect to this alternative reference:
dataExampleWithLogs3 &lt;- LogRatios(dataExample, ref = userReference)

## We can be interested in including the first and second phalanges without
## anterior-posterior identification ("phal 1" and "phal 2"), by computing
## their log ratios with respect to the reference of the corresponding
## anterior phalanges ("phal 1 ant" and "phal 2 ant", respectively).
## For this we use the optional argument joinCategories:
categoriesPhalAnt &lt;- list('phal 1 ant' = c("phal 1 ant", "phal 1"),
                          'phal 2 ant' = c("phal 2 ant", "phal 2"))
dataExampleWithLogs4 &lt;- LogRatios(dataExample,
                                  joinCategories = categoriesPhalAnt)
head(dataExampleWithLogs4)[, -c(6:20,32:64)]
</code></pre>

<hr>
<h2 id='referencesDatabase'>References</h2><span id='topic+referencesDatabase'></span><span id='topic+reference'></span><span id='topic+referenceSets'></span>

<h3>Description</h3>

<p>Several osteometrical references are provided in <span class="pkg">zoolog</span> to enable
researchers to use the one of their choice. The user can also use their
own osteometrical reference if preferred.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reference

referenceSets

referencesDatabase
</code></pre>


<h3>Format</h3>

<p>Each reference is a data.frame including 4 columns:
</p>

<dl>
<dt>TAX</dt><dd><p>The taxon to which each reference bone belongs.</p>
</dd>
<dt>EL</dt><dd><p>The skeletal element.</p>
</dd>
<dt>Measure</dt><dd><p>The type of measurement taken on the bone.</p>
</dd>
<dt>Standard</dt><dd><p>The value of the measurement taken on the bone.
All the measurements are expressed in millimetres.</p>
</dd>
</dl>

<p>An object of class <code>data.frame</code> with 4 rows and 15 columns.
</p>
<p>An object of class <code>list</code> of length 15.
</p>


<h3>Data Source</h3>

<p>Currently, the references include reference values for the main domesticates
and their agriotypes (<em>Bos</em>, <em>Ovis</em>, <em>Capra</em>,
<em>Sus</em>), and other less frequent species, such as red deer and donkey,
drawn from the following publications and resources:
</p>

<dl>
<dt><strong>Cattle - <em>Bos</em></strong></dt><dd>
<dl>
<dt>Nieto</dt><dd>
<p><em>Bos taurus</em>.
Female cow dated to the Early Bronze Age (Minferri, Catalonia),
in Nieto-Espinet (2018).</p>
</dd>
<dt>Basel</dt><dd>
<p><em>Bos taurus</em>.
Inv.nr. 2426 (Hinterwälder; female; 17 years old;
live weight: 340 kg; withers height: 113 cm),
from Stopp and Deschler-Erb (2018).</p>
</dd>
<dt>Johnstone</dt><dd>
<p><em>Bos taurus</em>.
Standard values from means of cattle measures from Period II (Late Iron
Age to Romano-British transition) of Elms Farm, Heybridge
(Johnstone and Albarella 2002).</p>
</dd>
<dt>Degerbøl</dt><dd>
<p><em>Bos primigenius</em>.
Female aurochs from Degerbøl and Fredskild (1970).
Non-standard measures converted to more standard ones
(Von den Driesch 1976)</p>
</dd>
<dt>Steppan</dt><dd>
<p><em>Bos primigenius</em>.
Female aurochs from Steppan (2001).
Same specimen as in Degerbøl and Fredskild (1970),
but with new and more standandard measures (Von den Driesch 1976).
Mean measurements from left and right bones when available.</p>
</dd>
</dl>
</dd>
<dt><strong>Sheep - <em>Ovis</em></strong></dt><dd>
<dl>
<dt>Davis</dt><dd>
<p><em>Ovis aries</em>.
Mean values of measurements from a group of adult female Shetland sheep
skeletons from a single flock
(Davis 1996).</p>
</dd>
<dt>Clutton</dt><dd>
<p><em>Ovis aries</em>.
Mean measurements from a group of male Soay sheep of known age
(Clutton-Brock et al. 1990).</p>
</dd>
<dt>Basel</dt><dd>
<p><em>Ovis musimon</em>.
Inv.nr. 2266 (male; adult),
from Stopp and Deschler-Erb (2018).</p>
</dd>
<dt>Uerpmann</dt><dd>
<p><em>Ovis orientalis</em>.
Field Museum of Chicago catalogue number: FMC 57951 (female; western Iran)
from Uerpmann and Uerpmann (1994).</p>
</dd>
</dl>
</dd>
<dt><strong>Goat - <em>Capra</em></strong></dt><dd>
<dl>
<dt>Basel</dt><dd>
<p><em>Capra hircus</em>.
Inv.nr. 1597 (male; adult), from
Stopp and Deschler-Erb (2018).</p>
</dd>
<dt>Clutton</dt><dd>
<p><em>Capra hircus</em>.
Mean measurements from a group of goats of unknown age and sex
(Clutton-Brock et al. 1990).</p>
</dd>
<dt>Uerpmann</dt><dd>
<p><em>Capra aegagrus</em>.
Measurements based on female and male <em>Capra aegagrus</em>,
Natural History Museum in London number: BMNH 651 M and L2
(Taurus Mountains in southern Turkey)
from Uerpmann and Uerpmann (1994).</p>
</dd>
</dl>
</dd>
<dt><strong>Pig - <em>Sus</em></strong></dt><dd>
<dl>
<dt>Albarella</dt><dd>
<p><em>Sus domesticus</em>.
Mean measurements from a group of Late Neolithic pigs from
Durrington Walls, England
(Albarella and Payne 2005).</p>
</dd>
<dt>Basel</dt><dd>
<p><em>Sus scrofa</em>.
Inv.nr. 1446 (male; 2-3 years old; life weight: 120 kg)
from Stopp and Deschler-Erb (2018).</p>
</dd>
<dt>Hongo</dt><dd>
<p><em>Sus scrofa</em>.
Averaged left and right measurements of a female wild board from near
Elaziğ, Turkey. Museum of Comparative Zoology, Harvard University,
specimen #51621 (Hongo and Meadow 2000).</p>
</dd>
<dt>Payne</dt><dd>
<p><em>Sus scrofa</em>.
Measurements based on a sample of modern wild boar, <em>Sus scrofa libycus</em>,
(male and female; Kizilcahamam, Turkey) from
Payne and Bull (1988), Appendix 2.</p>
</dd>
</dl>
</dd>
<dt><strong>Red deer - <em>Cervus</em></strong></dt><dd>
<dl>
<dt>Basel</dt><dd>
<p><em>Cervus elaphus</em>.
Inv.nr. 2271 (male; adult) from
Stopp and Deschler-Erb (2018).</p>
</dd>
</dl>
</dd>
<dt><strong>Fallow deer - <em>Dama</em></strong></dt><dd>
<dl>
<dt>Haifa</dt><dd>
<p><em>Dama mesopotamica</em>.
Adult female modern specimen from Israel (id #1047), curated in
Archaeozoology Laboratory at the University of Haifa
(Harding and Marom 2021).</p>
</dd>
</dl>
</dd>
<dt><strong>Gazelle - <em>Gazella</em></strong></dt><dd>
<dl>
<dt>Haifa</dt><dd>
<p><em>Gazella gazella</em>.
Adult female modern specimen from Israel (id #1037), curated in
Archaeozoology Laboratory at the University of Haifa
(Harding and Marom 2021).</p>
</dd>
</dl>
</dd>
<dt><strong>Equid - <em>Equus</em></strong></dt><dd>
<dl>
<dt>Haifa</dt><dd>
<p><em>Equus asinus</em>.
Adult male modern specimen from Israel (id #1076), curated in
Archaeozoology Laboratory at the University of Haifa
(Harding and Marom 2021).</p>
</dd>
<dt>Johnstone</dt><dd>
<p><em>Equus caballus</em>.
3 years old Icelandic mare (all bones fused, female) died in 1961,
(Johnstone 2004). Skeleton
held at the Zoologische Staatssammlung Munich in Germany.
Specimen ID 1961/29.</p>
</dd>
</dl>
</dd>
<dt><strong>European rabbit - <em>Oryctolagus</em></strong></dt><dd>
<dl>
<dt>Nottingham</dt><dd>
<p><em>Oryctolagus cuniculus</em>.
Adult male European rabbit from Audley End, Essex, UK, curated in the
reference collection at University of Nottingham Arch department (ID RS139)
(Ameen 2021).</p>
</dd>
</dl>
</dd>
<dt><strong>Canid - <em>Canis</em></strong></dt><dd>
<dl>
<dt>Russell</dt><dd>
<p><em>Canis lupus</em>.
Hungarian Agricultural Museum:
Specimen 73.4 (small mature female; probably local origin)
from Russell (1993).</p>
</dd>
</dl>
</dd>
</dl>

<p>The <span class="pkg">zoolog</span> variable <code>referencesDatabase</code> collects all these
references. It is structured as a named list of named lists, following the
hierarchy described above:
</p>
<div class="sourceCode r"><pre>str(referencesDatabase, max.level = 2)
#&gt; List of 15
#&gt;  $ Bos taurus           :List of 3
#&gt;   ..$ Nieto    :'data.frame':	68 obs. of  4 variables:
#&gt;   ..$ Basel    :'data.frame':	50 obs. of  4 variables:
#&gt;   ..$ Johnstone:'data.frame':	24 obs. of  4 variables:
#&gt;  $ Bos primigenius      :List of 2
#&gt;   ..$ Degerbol:'data.frame':	50 obs. of  4 variables:
#&gt;   ..$ Steppan :'data.frame':	84 obs. of  4 variables:
#&gt;  $ Ovis aries           :List of 2
#&gt;   ..$ Davis  :'data.frame':	23 obs. of  4 variables:
#&gt;   ..$ Clutton:'data.frame':	71 obs. of  4 variables:
#&gt;  $ Ovis orientalis      :List of 2
#&gt;   ..$ Basel   :'data.frame':	36 obs. of  4 variables:
#&gt;   ..$ Uerpmann:'data.frame':	50 obs. of  4 variables:
#&gt;  $ Capra hircus         :List of 2
#&gt;   ..$ Basel  :'data.frame':	35 obs. of  4 variables:
#&gt;   ..$ Clutton:'data.frame':	60 obs. of  4 variables:
#&gt;  $ Capra aegagrus       :List of 1
#&gt;   ..$ Uerpmann:'data.frame':	50 obs. of  4 variables:
#&gt;  $ Sus domesticus       :List of 1
#&gt;   ..$ Albarella:'data.frame':	42 obs. of  4 variables:
#&gt;  $ Sus scrofa           :List of 3
#&gt;   ..$ Basel:'data.frame':	41 obs. of  4 variables:
#&gt;   ..$ Hongo:'data.frame':	96 obs. of  4 variables:
#&gt;   ..$ Payne:'data.frame':	33 obs. of  4 variables:
#&gt;  $ Cervus elaphus       :List of 1
#&gt;   ..$ Basel:'data.frame':	14 obs. of  4 variables:
#&gt;  $ Dama mesopotamica    :List of 1
#&gt;   ..$ Haifa:'data.frame':	60 obs. of  4 variables:
#&gt;  $ Gazella gazella      :List of 1
#&gt;   ..$ Haifa:'data.frame':	63 obs. of  4 variables:
#&gt;  $ Equus asinus         :List of 1
#&gt;   ..$ Haifa:'data.frame':	48 obs. of  4 variables:
#&gt;  $ Equus caballus       :List of 1
#&gt;   ..$ Johnstone:'data.frame':	75 obs. of  4 variables:
#&gt;  $ Oryctolagus cuniculus:List of 1
#&gt;   ..$ Nottingham:'data.frame':	58 obs. of  4 variables:
#&gt;  $ Canis lupus          :List of 1
#&gt;   ..$ Russell:'data.frame':	77 obs. of  4 variables:
</pre></div>


<h3>Reference Sets</h3>

<p>The references' database is organized per taxon. However, in general the
zooarchaeological data to be analysed includes several taxa. Thus, the
reference dataframe should include one reference standard for each relevant
taxon.
The <span class="pkg">zoolog</span> variable <code>referenceSets</code> defines four possible
references:
</p>
<div class="sourceCode r"><pre>referenceSets
</pre></div>
<table>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;"> Bos taurus </td><td style="text-align: left;"> Bos primigenius </td><td style="text-align: left;"> Ovis aries </td><td style="text-align: left;"> Ovis orientalis </td><td style="text-align: left;"> Capra hircus </td><td style="text-align: left;"> Capra aegagrus </td><td style="text-align: left;"> Sus domesticus </td><td style="text-align: left;"> Sus scrofa </td><td style="text-align: left;"> Cervus elaphus </td><td style="text-align: left;"> Dama mesopotamica </td><td style="text-align: left;"> Gazella gazella </td><td style="text-align: left;"> Equus asinus </td><td style="text-align: left;"> Equus caballus </td><td style="text-align: left;"> Oryctolagus cuniculus </td><td style="text-align: left;"> Canis lupus </td>
</tr>
<tr>
 <td style="text-align: left;">
   NietoDavisAlbarella </td><td style="text-align: left;"> Nieto </td><td style="text-align: left;">  </td><td style="text-align: left;"> Davis </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;"> Albarella </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   Basel </td><td style="text-align: left;"> Basel </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;"> Basel </td><td style="text-align: left;"> Basel </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;"> Basel </td><td style="text-align: left;"> Basel </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   Combi </td><td style="text-align: left;"> Nieto </td><td style="text-align: left;">  </td><td style="text-align: left;"> Clutton </td><td style="text-align: left;">  </td><td style="text-align: left;"> Clutton </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;"> Basel </td><td style="text-align: left;"> Basel </td><td style="text-align: left;"> Haifa </td><td style="text-align: left;"> Haifa </td><td style="text-align: left;"> Haifa </td><td style="text-align: left;"> Johnstone </td><td style="text-align: left;"> Nottingham </td><td style="text-align: left;"> Russell </td>
</tr>
<tr>
 <td style="text-align: left;">
   Groningen </td><td style="text-align: left;">  </td><td style="text-align: left;"> Degerbol </td><td style="text-align: left;">  </td><td style="text-align: left;"> Uerpmann </td><td style="text-align: left;">  </td><td style="text-align: left;"> Uerpmann </td><td style="text-align: left;">  </td><td style="text-align: left;"> Hongo </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Each row defines a reference set consisting of a reference source for
each taxon (column). The function
<code><a href="#topic+AssembleReference">AssembleReference</a></code> allows us to build the reference set
taking the selected taxon-specific references from the
<code>referencesDatabase</code>.
</p>
<p>The <span class="pkg">zoolog</span> variable <code>reference</code> is a named list including the
references defined by <code>referenceSets</code>:
</p>
<div class="sourceCode r"><pre>str(reference)
#&gt; List of 4
#&gt;  $ NietoDavisAlbarella:'data.frame':	133 obs. of  4 variables:
#&gt;   ..$ TAX     : Factor w/ 3 levels "bota","ovar",..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;   ..$ EL      : Factor w/ 27 levels "AS","CAL","FE",..: 4 4 4 4 4 4 4 4 4 11 ...
#&gt;   ..$ Measure : Factor w/ 26 levels "BFd","BFp","BT",..: 8 9 5 7 13 4 3 12 6 8 ...
#&gt;   ..$ Standard: num [1:133] 259 234 78.3 90.2 29 ...
#&gt;  $ Basel              :'data.frame':	176 obs. of  4 variables:
#&gt;   ..$ TAX     : Factor w/ 5 levels "BOTA","Ovis orientalis",..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;   ..$ EL      : Factor w/ 28 levels "Astragalus","Calcaneus",..: 14 14 14 14 5 5 5 13 13 13 ...
#&gt;   ..$ Measure : Factor w/ 26 levels "BFd","BFp","BG",..: 21 13 18 3 5 4 19 6 19 5 ...
#&gt;   ..$ Standard: num [1:176] 65.9 83 66.9 58.1 95.3 ...
#&gt;  $ Combi              :'data.frame':	635 obs. of  4 variables:
#&gt;   ..$ TAX     : Factor w/ 11 levels "bota","OVAR",..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;   ..$ EL      : Factor w/ 69 levels "AS","CAL","FE",..: 4 4 4 4 4 4 4 4 4 11 ...
#&gt;   ..$ Measure : Factor w/ 83 levels "BFd","BFp","BT",..: 8 9 5 7 13 4 3 12 6 8 ...
#&gt;   ..$ Standard: num [1:635] 259 234 78.3 90.2 29 ...
#&gt;  $ Groningen          :'data.frame':	246 obs. of  4 variables:
#&gt;   ..$ TAX     : Factor w/ 4 levels "Bos primigenius",..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;   ..$ EL      : Factor w/ 23 levels "Astragalus","Calcaneus",..: 13 13 13 5 5 5 5 5 12 12 ...
#&gt;   ..$ Measure : Factor w/ 45 levels "BFp","BG","BT",..: 14 12 2 8 9 4 3 13 8 5 ...
#&gt;   ..$ Standard: num [1:246] 69 70 60 359 309 97 89 46 320 100 ...
</pre></div>
<p><code>reference$Combi</code> includes the most comprehensive reference for each
species so that more measurements can be considered. It is the default
reference for computing the <a href="#topic+LogRatios">log ratios</a>.
</p>
<p>If desired, the user can define their own combinations or can also use
their own references, which must be a dataframe with the format described
above.
</p>


<h3>File Structure</h3>

<p><code>referencesDatabase</code>, <code>refereceSets</code>, and <code>reference</code> are exported variables
automatically loaded in memory. In addition, <span class="pkg">zoolog</span> provides in the
<code>extdata</code> folder a set of semicolon separated files (csv), generating
them:
</p>

<dl>
<dt><code>referenceSets.csv</code></dt><dd><p>Defines <code>referenceSets</code>.</p>
</dd>
<dt><code>referencesDatabase.csv</code></dt><dd><p>Defines the structure of
<code>referencesDatabase</code>.</p>
</dd>
<dt>...</dt><dd><p>A csv file for each taxon-specific reference, as named in
<code>referencesDatabase.csv</code>.</p>
</dd>
</dl>

<div class="sourceCode r"><pre>utils::read.csv2(system.file("extdata", "referencesDatabase.csv",
                             package = "zoolog"))
#&gt;                              Genus                 Taxon     Source
#&gt; 1                   Cattle - *Bos*            Bos taurus      Nieto
#&gt; 2                   Cattle - *Bos*            Bos taurus      Basel
#&gt; 3                   Cattle - *Bos*            Bos taurus  Johnstone
#&gt; 4                   Cattle - *Bos*       Bos primigenius   Degerbol
#&gt; 5                   Cattle - *Bos*       Bos primigenius    Steppan
#&gt; 6                   Sheep - *Ovis*            Ovis aries      Davis
#&gt; 7                   Sheep - *Ovis*            Ovis aries    Clutton
#&gt; 8                   Sheep - *Ovis*       Ovis orientalis      Basel
#&gt; 9                   Sheep - *Ovis*       Ovis orientalis   Uerpmann
#&gt; 10                  Goat - *Capra*          Capra hircus      Basel
#&gt; 11                  Goat - *Capra*          Capra hircus    Clutton
#&gt; 12                  Goat - *Capra*        Capra aegagrus   Uerpmann
#&gt; 13                     Pig - *Sus*        Sus domesticus  Albarella
#&gt; 14                     Pig - *Sus*            Sus scrofa      Basel
#&gt; 15                     Pig - *Sus*            Sus scrofa      Hongo
#&gt; 16                     Pig - *Sus*            Sus scrofa      Payne
#&gt; 17             Red deer - *Cervus*        Cervus elaphus      Basel
#&gt; 18            Fallow deer - *Dama*     Dama mesopotamica      Haifa
#&gt; 19             Gazelle - *Gazella*       Gazella gazella      Haifa
#&gt; 20                 Equid - *Equus*          Equus asinus      Haifa
#&gt; 21                 Equid - *Equus*        Equus caballus  Johnstone
#&gt; 22 European rabbit - *Oryctolagus* Oryctolagus cuniculus Nottingham
#&gt; 23                 Canid - *Canis*           Canis lupus    Russell
#&gt;                          Filename
#&gt; 1       referenceCattle_Nieto.csv
#&gt; 2       referenceCattle_Basel.csv
#&gt; 3   referenceCattle_Johnstone.csv
#&gt; 4    referenceCattle_Degerbol.csv
#&gt; 5     referenceCattle_Steppan.csv
#&gt; 6        referenceSheep_Davis.csv
#&gt; 7      referenceSheep_Clutton.csv
#&gt; 8        referenceSheep_Basel.csv
#&gt; 9     referenceSheep_Uerpmann.csv
#&gt; 10        referenceGoat_Basel.csv
#&gt; 11      referenceGoat_Clutton.csv
#&gt; 12     referenceGoat_Uerpmann.csv
#&gt; 13     referencePig_Albarella.csv
#&gt; 14         referencePig_Basel.csv
#&gt; 15         referencePig_Hongo.csv
#&gt; 16         referencePig_Payne.csv
#&gt; 17     referenceRedDeer_Basel.csv
#&gt; 18        referenceDama_Haifa.csv
#&gt; 19     referenceGazelle_Haifa.csv
#&gt; 20       referenceEquid_Haifa.csv
#&gt; 21   referenceEquid_Johnstone.csv
#&gt; 22 referenceRabbit_Nottingham.csv
#&gt; 23     referenceCanid_Russell.csv
</pre></div>


<h3>Acknowledgement</h3>

<p>We are grateful to Barbara Stopp and Sabine Deschler-Erb
(University of Basel, Switzerland)
for providing the Basel references for cattle, sheep, goat, wild boar,
and red deer (Stopp and Deschler-Erb 2018),
together with the permission to publish them as part of <span class="pkg">zoolog</span>.
</p>
<p>We thank also Francesca Slim and Dimitris Filioglou (University of Groningen)
for providing the references for aurochs, mouflon, wild goat, and wild boar
(Degerbøl and Fredskild 1970; Uerpmann and Uerpmann 1994; Hongo and Meadow 2000)
in the Groningen set.
</p>
<p>We thank Claudia Minniti (University of Salento) for providing Johnstone's
reference for cattle (Johnstone and Albarella 2002).
</p>
<p>We are also grateful to Sierra Harding and Nimrod Marom (University of Haifa)
for providing the Haifa standard measurements for donkey, mountain gazelle,
and Persian fallow deer (Harding and Marom 2021).
</p>
<p>We thank Carly Ameen and Helene Benkert (University of Exeter) for providing
references for horse (Johnstone 2004) and
European rabbit (Ameen 2021).
</p>
<p>We thank Mikolaj Lisowski (University of York) for pointing to the existence
of the improved reference for Bos primigenius
(Steppan 2001) and providing its source.
</p>


<h3>References</h3>

<p>Albarella U, Payne S (2005).
&ldquo;Neolithic pigs from Durrington Walls, Wiltshire, England: a biometrical database.&rdquo;
<em>Journal of Archaeological Science</em>, <b>32</b>(4), 589&ndash;599.<br /><br /> Ameen C (2021).
&ldquo;Measurements from an adult male specimen from Audley End, Essex, UK. in the reference collection at the University of Nottingham Archaeology Department under ID RS139.&rdquo;
Personal communication, included permission to publish them as part of the package zoolog.<br /><br /> Clutton-Brock J, Dennis-Bryan K, Armitage PL, Jewell PA (1990).
&ldquo;Osteology of the Soay sheep.&rdquo;
<em>Bulletin of the British Museum, Natural History. Zoology</em>, <b>56</b>(1), 1&ndash;56.<br /><br /> Davis SJ (1996).
&ldquo;Measurements of a group of adult female Shetland sheep skeletons from a single flock: a baseline for zooarchaeologists.&rdquo;
<em>Journal of archaeological science</em>, <b>23</b>(4), 593&ndash;612.<br /><br /> Degerbøl M, Fredskild B (1970).
<em>The Urus (Bos Primigenius Bojanus) and Neolithic Domesticated Cattle (Bos Taurus Domesticus Linné) in Denmark: Zoological and Palynological Investigations</em>,  Biologiske skrifter, 17:1.
København, (Munksgaard).<br /><br /> Harding S, Marom N (2021).
&ldquo;Measurements compiled for the Zooarchaeology of Southern Phoenicia (ZSP) Project, from the reference collection in the Leon Recanati Institute for Maritime Studies (RIMS, Department of Maritime Civilizations, University of Haifa, Israel).&rdquo;
Personal communication, included permission to publish them as part of the package zoolog.<br /><br /> Hongo H, Meadow RH (2000).
&ldquo;Faunal remains from Prepottery Neolithic levels at Çayönü, southeastern Turkey: a preliminary report focusing on pigs (Sus sp.).&rdquo;
In <em>Archaeozoology of the Near East IVA Proceedings of the fourth international symposium on the archaeozoology of southwestern Asia and adjacent areas. Groningen: ARC Publications</em>, 121&ndash;139.<br /><br /> Johnstone C, Albarella U (2002).
&ldquo;The Late Iron Age and Romano-British Mammal and Bird Bone Assemblage from Elms Farm, Heybridge, Essex (Site Code: Hyef93-95).&rdquo;
Technical Report Report 45/2002, tab.16, p. 70, Centre for Archaeology.<br /><br /> Johnstone CJ (2004).
<em>A biometric study of equids in the Roman world</em>.
Ph.D. thesis, University of York.<br /><br /> Nieto-Espinet A (2018).
&ldquo;Element measure standard biometrical data from a cow dated to the Early Bronze Age (Minferri, Catalonia).&rdquo;
doi: <a href="https://doi.org/10.13140/RG.2.2.13512.78081">10.13140/RG.2.2.13512.78081</a>.<br /><br /> Payne S, Bull G (1988).
&ldquo;Components of variation in measurements of pig bones and teeth, and the use of measurements to distinguish wild from domestic pig remains.&rdquo;
<em>Archaeozoologia</em>, <b>2</b>(1), 27&ndash;66.<br /><br /> Russell N (1993).
<em>Hunting, Herding and Feasting: human use of animals in Neolithic Southeast Europe</em>.
Ph.D. thesis, University of California, Berkeley.<br /><br /> Steppan K (2001).
&ldquo;Ur oder Hausrind? Die Variabilität der Wildtieranteile in linearbandkeramischen Tierknochenkomplexen.&rdquo;
In Arbogast R, Jeunesse C, Schibler J (eds.), <em>Rôle et statut de la chasse dans le Néolithique ancien danubien (5500 - 4900 av. J.-C.) /Rolle und Bedeutung der Jagd während des Frühneolithikums Mitteleuropas (Linearbandkeramik 5500 - 4900 v.Chr.). Premières rencontres danubiennes, Strasbourg 20 et 21 novembre 1996, Actes de la première table-ronde. Internationale Archäologie: Arbeitsgemeinschaft, Symposium, Tagung, Kongress Band 1</em>, 171&ndash;186.
na.<br /><br /> Stopp B, Deschler-Erb S (2018).
&ldquo;Measurements compiled from the reference collection in the Integrative Prähistorische und Naturwissenschaftliche Archäologie (IPNA, University of Basel, Switzerland).&rdquo;
Personal communication, included permission to publish them as part of the package zoolog.<br /><br /> Uerpmann M, Uerpmann H (1994).
&ldquo;Animal bone finds from excavation 520 at Qala’at al-Bahrain.&rdquo;
In Hojlund F, Andersen HH (eds.), <em>Gala'at Al-Bahrain. 1 The Northern City Wall And The Islamic Fortress</em>, 417&ndash;444.
Jutland Archaeological Society.<br /><br /> Von den Driesch A (1976).
<em>A guide to the measurement of animal bones from archaeological sites: as developed by the Institut für Palaeoanatomie, Domestikationsforschung und Geschichte der Tiermedizin of the University of Munich</em>, volume 1.
Peabody Museum Press.
</p>

<hr>
<h2 id='RemoveNACases'>Remove Cases Missing All Measurements</h2><span id='topic+RemoveNACases'></span>

<h3>Description</h3>

<p>Function to remove the table rows for which all measurements of interest
are non-available (NA).
A particular list of measurement names can be explicitly provided
or selected by a common initial pattern.
The default setting removes the rows with no log-ratio available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RemoveNACases(data, measureNames = NULL, prefix = logPrefix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RemoveNACases_+3A_data">data</code></td>
<td>
<p>A dataframe with the input measurements.</p>
</td></tr>
<tr><td><code id="RemoveNACases_+3A_measurenames">measureNames</code></td>
<td>
<p>A vector of characters with the list of measurements
to be considered for missing values. If <code>NULL</code> (default), all measurements
starting by <code>prefix</code> are considered.</p>
</td></tr>
<tr><td><code id="RemoveNACases_+3A_prefix">prefix</code></td>
<td>
<p>A character string with the initial pattern to select the
list of measurements. The default is given by the internal variable
<code>logPrefix</code>. It is in effect only when <code>measureNames = NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with the same columns as the input dataframe but
removing the rows with missing values for all measurements in the list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read an example dataset:
dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package = "zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")
## We can observe the first lines (excluding some columns for visibility):
head(dataExample)[, -c(6:20,32:64)]

## Remove the cases not including any measurement present in the reference.
refMeasureNames &lt;- unique(reference$Combi$Measure)
refMeasureNames
dataExamplePruned &lt;- RemoveNACases(dataExample,
                                   measureNames = refMeasureNames)
## The first lines of the output data frame show at least one available
## measurement value in the selected list:
head(dataExamplePruned)[, -c(6:20,32:64)]

## If we compute first the log-ratios
dataExampleWithLogs &lt;- LogRatios(dataExample)
## the cases not including any log-ratio can be removed with the
## default logPrefix
dataExampleWithLogsPruned &lt;- RemoveNACases(dataExampleWithLogs)
head(dataExampleWithLogsPruned)[, -c(6:20,32:64)]
</code></pre>

<hr>
<h2 id='StandardizeNomenclature'>Standardize Nomenclature</h2><span id='topic+StandardizeNomenclature'></span><span id='topic+StandardizeDataSet'></span>

<h3>Description</h3>

<p>Functions to map the user provided nomenclature into a standard one
as defined in a thesaurus.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>StandardizeNomenclature(x, thesaurus, mark.unknown = FALSE)

StandardizeDataSet(data, thesaurusSet = zoologThesaurus)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="StandardizeNomenclature_+3A_x">x</code></td>
<td>
<p>Character vector.</p>
</td></tr>
<tr><td><code id="StandardizeNomenclature_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus object.</p>
</td></tr>
<tr><td><code id="StandardizeNomenclature_+3A_mark.unknown">mark.unknown</code></td>
<td>
<p>Logical. If <code>FALSE</code> (default) the strings not found in the
thesaurus are kept without change. If <code>TRUE</code> the strings not in the
thesaurus are set to <code>NA</code>.</p>
</td></tr>
<tr><td><code id="StandardizeNomenclature_+3A_data">data</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="StandardizeNomenclature_+3A_thesaurusset">thesaurusSet</code></td>
<td>
<p>A thesaurus set.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>StandardizeNomenclature</code> standardizes a character vector
according to a given thesaurus.
</p>
<p><code>StandardizeDataSet</code> standardizes column names and values of
a data frame according to a thesaurus set.
</p>


<h3>Value</h3>

<p><code>StandardizeNomenclature</code> returns a vector of the same length as the
input vector <code>x</code>. The names present in the thesaurus are set to their
corresponding category. The names not in the thesaurus are kept unchanged if
<code>mark.unknown=FALSE</code> (default) and set to <code>NA</code> if
<code>mark.unknown=TRUE</code>.
</p>
<p><code>StandardizeDataSet</code> returns a data frame with the same structure as
the input <code>data</code>, but standardizing its nomenclature according to a thesaurus set
including appropriate thesauri for its column names and for the values of
a set of columns.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zoologThesaurus">zoologThesaurus</a></code> for a description of the thesaurus and
thesaurus set structure,
</p>
<p><code><a href="#topic+ThesaurusReaderWriter">ThesaurusReaderWriter</a></code>, <code><a href="#topic+ThesaurusManagement">ThesaurusManagement</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Select the thesaurus for taxa present in the thesaurus set
## zoolog::zoologThesaurus:
thesaurus &lt;- zoologThesaurus$taxon
thesaurus
## Standardize an heterodox vector of taxa:
StandardizeNomenclature(c("bota", "giraffe", "pig", "cattle"),
                        thesaurus)
## Observe that "giraffe" is kept unchanged since it is not included in
## any thesaurus category.
## But if mark.unknown is set to TRUE, it is marked as NA:
StandardizeNomenclature(c("bota", "giraffe", "pig", "cattle"),
                        thesaurus, mark.unknown = TRUE)

## This thesaurus is not case sensitive:
attr(thesaurus, "caseSensitive") #  == FALSE
## Thus, names are recognized independently of their case:
StandardizeNomenclature(c("bota", "BOTA", "Bota", "boTa"),
                        thesaurus)

## Load an example data frame:
dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package = "zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")
## Observe mainly the first columns:
head(dataExample[,1:5])
## Stadardize the dataset:
dataStandardized &lt;- StandardizeDataSet(dataExample, zoologThesaurus)
head(dataStandardized[,1:5])

</code></pre>

<hr>
<h2 id='Subtaxonomy'>Subtaxonomy under taxonomical category</h2><span id='topic+Subtaxonomy'></span><span id='topic+SubtaxonomySet'></span><span id='topic+GetSpeciesIn'></span>

<h3>Description</h3>

<p>Functions to obtain the subtaxonomy or the set of taxa included in a
particular taxonomic group, according to the <code><a href="#topic+zoologTaxonomy">zoologTaxonomy</a></code>
by default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Subtaxonomy(
  taxon,
  taxonomy = zoologTaxonomy,
  thesaurus = zoologThesaurus$taxon
)

SubtaxonomySet(
  taxon,
  taxonomy = zoologTaxonomy,
  thesaurus = zoologThesaurus$taxon
)

GetSpeciesIn(
  taxon,
  taxonomy = zoologTaxonomy,
  thesaurus = zoologThesaurus$taxon
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Subtaxonomy_+3A_taxon">taxon</code></td>
<td>
<p>A name of any of the taxa, at any rank included in the taxonomy
(from species to family in the zoolog taxonomy).</p>
</td></tr>
<tr><td><code id="Subtaxonomy_+3A_taxonomy">taxonomy</code></td>
<td>
<p>A taxonomy from which to extract the subtaxonomy.
By default <code>taxonomy = <a href="#topic+zoologTaxonomy">zoologTaxonomy</a></code>.</p>
</td></tr>
<tr><td><code id="Subtaxonomy_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus allowing datasets with different nomenclatures
to be merged. By default <code>thesaurus = <a href="#topic+zoologThesaurus">zoologThesaurus</a>$taxon</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>Subtaxonomy</code> returns a data.frame with the same structure of the input
taxonomy but with only the species (rows) included in the queried
<code>taxon</code>, and the taxonomic ranks (columns)
up to its level.
</p>
<p><code>SubtaxonomySet</code> returns a character vector including a unique copy
(set) of all the taxa, at any taxonomic rank, under the queried
<code>taxon</code>.
Equivalent to Subtaxonomy but as a set instead of a dataframe.
</p>
<p><code>GetSpeciesIn</code> returns a character vector including the species included
in the queried <code>taxon</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get species of genus Sus:
GetSpeciesIn("Sus")

## Get species of family Bovidae:
GetSpeciesIn("Bovidae")

## Get the subtaxonomy of the Tribe Caprini:
Subtaxonomy("Caprini")

## Use SubtaxonomySet to join categories for computing log-ratios.
## For this, we read an example dataset:
dataFile &lt;- system.file("extdata", "dataValenzuelaLamas2008.csv.gz",
                        package="zoolog")
dataExample &lt;- utils::read.csv2(dataFile,
                                na.strings = "",
                                encoding = "UTF-8")
## We illustrate with a subset of cases to make the example run
## sufficiently fast:
dataExample &lt;- dataExample[1:1000, ]
## Compute the log-ratios joining all taxa from tribe \emph{Caprini}
## to use the reference of \emph{Ovis aries}:
categoriesCaprini &lt;- list('Ovis aries' = SubtaxonomySet("Caprini"))
dataExampleWithLogs &lt;- LogRatios(dataExample,
                                 joinCategories = categoriesCaprini)
</code></pre>

<hr>
<h2 id='ThesaurusManagement'>Thesaurus Management</h2><span id='topic+ThesaurusManagement'></span><span id='topic+NewThesaurus'></span><span id='topic+AddToThesaurus'></span><span id='topic+RemoveRepeatedNames'></span><span id='topic+ThesaurusAmbiguity'></span>

<h3>Description</h3>

<p>Functions to modify and check thesauri.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NewThesaurus(
  caseSensitive = FALSE,
  accentSensitive = FALSE,
  punctuationSensitive = FALSE
)

AddToThesaurus(thesaurus, newName, category)

RemoveRepeatedNames(thesaurus)

ThesaurusAmbiguity(thesaurus)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ThesaurusManagement_+3A_casesensitive">caseSensitive</code>, <code id="ThesaurusManagement_+3A_accentsensitive">accentSensitive</code>, <code id="ThesaurusManagement_+3A_punctuationsensitive">punctuationSensitive</code></td>
<td>
<p>Logical. They set
the case, accent, and punctuation sensitivity (<code>FALSE</code> by default) of
the thesaurus.</p>
</td></tr>
<tr><td><code id="ThesaurusManagement_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus object.</p>
</td></tr>
<tr><td><code id="ThesaurusManagement_+3A_newname">newName</code></td>
<td>
<p>Character vector with new names to be added to the thesaurus.</p>
</td></tr>
<tr><td><code id="ThesaurusManagement_+3A_category">category</code></td>
<td>
<p>Character vector identifying the classes where the
new names should be included.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NewThesaurus</code> returns an empty thesaurus. This can then be
populated by <code>AddToThesaurus</code>.
</p>
<p><code>AddToThesaurus</code> returns the input thesaurus complemented with new
names in the categories identified. If any of the categories is not present
in the input thesaurus, new categories are added as required.
</p>
<p><code>RemoveRepeatedNames</code> returns the input thesaurus pruned of redundant
names in each category. The redundancy is evaluated in agreement with the
case and accent sensitivity of the thesaurus.
</p>
<p><code>ThesaurusAmbiguity</code> returns FALSE if no ambiguity is present. When any
ambiguity is found, it returns TRUE with an attribute <code>errmessage</code>
including the names present in more than one category and the
the involved categories. This is internally used by
<code><a href="#topic+ReadThesaurus">ReadThesaurus</a></code> and <code><a href="#topic+AddToThesaurus">AddToThesaurus</a></code> to generate an
error in case they attempt to read or generate an ambiguous thesaurus.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zoologThesaurus">zoologThesaurus</a></code> for a description of the thesaurus and
thesaurus set structure,
</p>
<p><code><a href="#topic+ReadThesaurus">ReadThesaurus</a></code>, <code><a href="#topic+WriteThesaurus">WriteThesaurus</a></code>,
<code><a href="#topic+StandardizeNomenclature">StandardizeNomenclature</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load an example thesaurus:
thesaurus &lt;- ReadThesaurus(system.file("extdata", "taxonThesaurus.csv",
                                       package="zoolog"))
## with categories
names(thesaurus) #  "bos taurus"  "ovis aries"  "sus domesticus"
## Add names to several categories:
thesaurusExtended &lt;- AddToThesaurus(thesaurus,
                                    c("Kuh", "Schwein"),
                                    c("bos taurus","sus domesticus"))
## This adds the name "Kuh" to the category "bos taurus" and
## the name "Schwein" to the category "sus domesticus".

## Generate a new thesaurus and populate it with two categories
## ("red" and "blue"):
thesaurusNew &lt;- NewThesaurus()
thesaurusNew &lt;- AddToThesaurus(thesaurusNew,
                               c("scarlet", "vermilion", "ruby", "cherry",
                                 "carmine", "wine"),
                               "red")
thesaurusNew
thesaurusNew &lt;- AddToThesaurus(thesaurusNew,
                                c("sky blue", "azure", "sapphire", "cerulean",
                                 "navy", "lapis lazuli", "indigo", "cyan"),
                               "blue")
thesaurusNew

## Attempt to generate an ambiguous thesaurus
try(AddToThesaurus(thesaurusNew, "scarlet", "blue"))

## Remove repeated names in the same category:
thesaurusWithRepetitions &lt;- AddToThesaurus(thesaurusNew,
                                           c("scarlet", "ruby"), "red")
thesaurusWithRepetitions
RemoveRepeatedNames(thesaurusWithRepetitions)

</code></pre>

<hr>
<h2 id='ThesaurusReaderWriter'>Thesaurus Readers and Writers</h2><span id='topic+ThesaurusReaderWriter'></span><span id='topic+ReadThesaurus'></span><span id='topic+ReadThesaurusSet'></span><span id='topic+WriteThesaurus'></span><span id='topic+WriteThesaurusSet'></span>

<h3>Description</h3>

<p>Functions to read and write thesauri and thesaurus sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ReadThesaurus(
  file,
  caseSensitive = FALSE,
  accentSensitive = FALSE,
  punctuationSensitive = FALSE
)

ReadThesaurusSet(file)

WriteThesaurus(thesaurus, file)

WriteThesaurusSet(thesaurusSet, file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ThesaurusReaderWriter_+3A_file">file</code></td>
<td>
<p>Name of a file.</p>
</td></tr>
<tr><td><code id="ThesaurusReaderWriter_+3A_casesensitive">caseSensitive</code>, <code id="ThesaurusReaderWriter_+3A_accentsensitive">accentSensitive</code>, <code id="ThesaurusReaderWriter_+3A_punctuationsensitive">punctuationSensitive</code></td>
<td>
<p>Logical. They set
the case, accent, and punctuation sensitivity (<code>FALSE</code> by default) of
the thesaurus.</p>
</td></tr>
<tr><td><code id="ThesaurusReaderWriter_+3A_thesaurus">thesaurus</code></td>
<td>
<p>A thesaurus object.</p>
</td></tr>
<tr><td><code id="ThesaurusReaderWriter_+3A_thesaurusset">thesaurusSet</code></td>
<td>
<p>A thesaurus set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>WriteThesaurus</code> and <code>WriteThesaurusSet</code> create or overwrite the
corresponding files. No value is returned.
</p>
<p><code>ReadThesaurus</code> and <code>ReadThesaurusSet</code> return the read thesaurus or
thesaurusSet, respectively.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zoologThesaurus">zoologThesaurus</a></code> for a description of the thesaurus and
thesaurus set structure,
</p>
<p><code><a href="#topic+ThesaurusManagement">ThesaurusManagement</a></code>,
<code><a href="#topic+StandardizeNomenclature">StandardizeNomenclature</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read a thesaurus for taxa:
thesaurusFile &lt;- system.file("extdata", "taxonThesaurus.csv", package="zoolog")
thesaurus &lt;- ReadThesaurus(thesaurusFile)
## The attributes of the thesaurus include the fields 'caseSensitive',
## 'accentSensitive', and 'punctuationSensitive', all FALSE by default.
attributes(thesaurus)

## Any of them can be set by the user if desired:
thesaurus2 &lt;- ReadThesaurus(thesaurusFile, accentSensitive = TRUE)
attributes(thesaurus2)

## Write the thesarus to a file:
fileExample &lt;- file.path(tempdir(), "thesaurusExample.csv")
WriteThesaurus(thesaurus, fileExample)
## Replace tempdir() for your preferred local path if you want to easily
## examine the written file.

## Read a thesaurus set:
thesaurusSetFile &lt;- system.file("extdata", "zoologThesaurusSet.csv", package="zoolog")
thesaurusSet &lt;- ReadThesaurusSet(thesaurusSetFile)
## The attributes of the thesaurus set include information of the constituent
## thesauri: names, source file names, and their mode of application on datasets.
attributes(thesaurusSet)
## The attributes of each thesaurus are also set by 'ReadThesaurusSet'.
attributes(thesaurusSet$measure)

## Write the thesaurus set to a file:
fileSetExample &lt;- file.path(tempdir(), "thesaurusSetExample.csv")
WriteThesaurusSet(thesaurusSet, fileSetExample)
## It writes the thesaurus-set main data frame and each of the included
## thesaurus files.
## Again, replace tempdir() for your preferred local path if you want to
## easily examine the written files.

</code></pre>

<hr>
<h2 id='zoologTaxonomy'>Taxonomy hierarchy for <span class="pkg">zoolog</span></h2><span id='topic+zoologTaxonomy'></span>

<h3>Description</h3>

<p>The taxonomy hierarchy for all taxa included in the osteometrical references
of the package <span class="pkg">zoolog</span>.
This is used to allow the users to group the taxa by any taxonomical category
from <em>species</em> to <em>family</em>. See
<code><a href="#topic+Subtaxonomy">Subtaxonomy</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoologTaxonomy
</code></pre>


<h3>Format</h3>

<p>The taxonomy is given as a data.frame with columns for
<em>Species</em>, <em>Genus</em>, <em>Tribe</em>, <em>Subfamily</em>, and
<em>Family</em>.
Each row lists the information for one species:</p>

<table>
<tr>
 <td style="text-align: left;">
   Species </td><td style="text-align: left;"> Genus </td><td style="text-align: left;"> Tribe </td><td style="text-align: left;"> Subfamily </td><td style="text-align: left;"> Family </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bos taurus </td><td style="text-align: left;"> Bos </td><td style="text-align: left;"> Bovini </td><td style="text-align: left;"> Bovinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bos primigenius </td><td style="text-align: left;"> Bos </td><td style="text-align: left;"> Bovini </td><td style="text-align: left;"> Bovinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ovis aries </td><td style="text-align: left;"> Ovis </td><td style="text-align: left;"> Caprini </td><td style="text-align: left;"> Caprinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ovis orientalis </td><td style="text-align: left;"> Ovis </td><td style="text-align: left;"> Caprini </td><td style="text-align: left;"> Caprinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Capra hircus </td><td style="text-align: left;"> Capra </td><td style="text-align: left;"> Caprini </td><td style="text-align: left;"> Caprinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Capra aegagrus </td><td style="text-align: left;"> Capra </td><td style="text-align: left;"> Caprini </td><td style="text-align: left;"> Caprinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Gazella gazella </td><td style="text-align: left;"> Gazella </td><td style="text-align: left;"> Antilopini </td><td style="text-align: left;"> Antilopinae </td><td style="text-align: left;"> Bovidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Sus domesticus </td><td style="text-align: left;"> Sus </td><td style="text-align: left;"> Suini </td><td style="text-align: left;"> Suinae </td><td style="text-align: left;"> Suidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Sus scrofa </td><td style="text-align: left;"> Sus </td><td style="text-align: left;"> Suini </td><td style="text-align: left;"> Suinae </td><td style="text-align: left;"> Suidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Cervus elaphus </td><td style="text-align: left;"> Cervus </td><td style="text-align: left;"> Cervini </td><td style="text-align: left;"> Cervinae </td><td style="text-align: left;"> Cervidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Dama mesopotamica </td><td style="text-align: left;"> Dama </td><td style="text-align: left;"> Cervini </td><td style="text-align: left;"> Cervinae </td><td style="text-align: left;"> Cervidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Equus asinus </td><td style="text-align: left;"> Equus </td><td style="text-align: left;"> Equini </td><td style="text-align: left;"> Equinae </td><td style="text-align: left;"> Equidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Equus caballus </td><td style="text-align: left;"> Equus </td><td style="text-align: left;"> Equini </td><td style="text-align: left;"> Equinae </td><td style="text-align: left;"> Equidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Oryctolagus cuniculus </td><td style="text-align: left;"> Oryctolagus </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td><td style="text-align: left;"> Leporidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Canis familiaris </td><td style="text-align: left;"> Canis </td><td style="text-align: left;"> Canini </td><td style="text-align: left;"> Caninae </td><td style="text-align: left;"> Canidae </td>
</tr>
<tr>
 <td style="text-align: left;">
   Canis lupus </td><td style="text-align: left;"> Canis </td><td style="text-align: left;"> Canini </td><td style="text-align: left;"> Caninae </td><td style="text-align: left;"> Canidae </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>File Structure</h3>

<p><code>zoologTaxonomy</code> is an exported variable automatically loaded in
memory. In addition, the csv source file <code>zoologTaxonomy.csv</code>
generating it is included in the <span class="pkg">zoolog</span> <code>extdata</code> folder.
</p>

<hr>
<h2 id='zoologThesaurus'>Thesaurus Set for <span class="pkg">zoolog</span></h2><span id='topic+zoologThesaurus'></span>

<h3>Description</h3>

<p>The thesaurus set defined for the package <span class="pkg">zoolog</span>.
This is used to make the methods robust to different nomenclatures used
in datasets created by different authors. The user can also use other
thesaurus sets, or can modify the provided thesaurus set (see
<code><a href="#topic+ThesaurusManagement">ThesaurusManagement</a></code> and <code><a href="#topic+ThesaurusReaderWriter">ThesaurusReaderWriter</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoologThesaurus
</code></pre>


<h3>Format</h3>

<p>A thesaurus set is a list of thesauri with additional attributes:
</p>

<dl>
<dt>names</dt><dd><p>Character vector with the name of each thesaurus.</p>
</dd>
<dt>applyToColNames</dt><dd><p>Logical vector indicating whether each thesaurus
should be applied to the column names of the data frame.</p>
</dd>
<dt>applyToColValues</dt><dd><p>Logical vector indicating whether each thesaurus
should be applied to the values in the corresponding column of
the data frame.</p>
</dd>
<dt>filename</dt><dd><p>Character vector with the source file of each thesaurus.</p>
</dd>
</dl>

<p>The examples below show the list of four thesauri included in the provided
<code>zoologThesurus</code>.
</p>
<p>Each thesaurus is a data frame also with additional attributes. Each column
of the data frame is a category of names with equivalent meaning in the
intended application. The column name identifies the category and is used
as the standard when applying <code><a href="#topic+StandardizeNomenclature">StandardizeNomenclature</a></code>.
</p>
<p>The names in each column (category) must not be included in any other
column, since this would make the thesaurus ambiguous (see
<code><a href="#topic+ThesaurusAmbiguity">ThesaurusAmbiguity</a></code>).
</p>
<p>Each thesaurus has the following attributes:
</p>

<dl>
<dt>names</dt><dd><p>The standard name for the categories.</p>
</dd>
<dt>class</dt><dd><p>&quot;data.frame&quot;</p>
</dd>
<dt>row.names</dt><dd><p>Irrelevant</p>
</dd>
<dt>caseSensitive</dt><dd><p>Logical indicating whether the names in the thesaurus
should be considered case-sensitive.</p>
</dd>
<dt>accentSensitive</dt><dd><p>Logical indicating whether the names in the
thesaurus should be differentiated by the presence of accent
marks.</p>
</dd>
<dt>punctuationSensitive</dt><dd><p>Logical indicating whether the names in the
thesaurus should be differentiated by the presence of punctuation
marks.</p>
</dd>
</dl>

<p>The examples below show the content and characteristics of the first
thesaurus in <code>zoologThesaurus</code>.
</p>


<h3>File Structure</h3>

<p><code>zoologThesaurus</code> is an exported variable automatically loaded in
memory. In addition, the source files generating it are included in the
<span class="pkg">zoolog</span> <code>extdata</code> folder. There is one file for the thesaurus set
main structure and one file for each included thesaurus. All of them are in
semicolon separated format. Thus, they can be examined in any text editor
or imported into any spreadsheet application. The files are:
</p>

<dl>
<dt><code>zoologThesaurusSet.csv</code></dt><dd><p>Defines the main structure of the
thesaurus set. It has a row for each thesaurus and seven columns
(<em>ThesaurusName</em>, <em>FileName</em>, <em>CaseSensitive</em>,
<em>AccentSensitive</em>, <em>PunctuationSensitive</em>,
<em>ApplyToColNames</em>, and <em>ApplyToColValues</em>).
Their meaning coincides with the description above. Observe that the
case, accent, and punctuation sensitiveness is stored here, instead of
in each thesaurus.</p>
</dd>
<dt><code>identifierThesaurus.csv</code></dt><dd><p>Thesaurus for the identifiers used
in <code><a href="#topic+LogRatios">LogRatios</a></code> to identify the bone types and the measure
names in the data and the references. It has for columns:
<em>Taxon</em>, <em>Element</em>, <em>Measure</em>, and <em>Standard</em>.</p>
</dd>
<dt><code>taxonThesaurus.csv</code></dt><dd><p>Thesaurus for the taxa. There is one
column for each category of taxon considered.</p>
</dd>
<dt><code>elementThesaurus.csv</code></dt><dd><p>Thesaurus for the skeletal elements.
One column for each category.</p>
</dd>
<dt><code>measureThesaurus.csv</code></dt><dd><p>Thesaurus for the measure names.
One column for each category.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## List of thesaurus names and characteristics in the thesaurus set:
attributes(zoologThesaurus)
## Content of the first thesaurus:
zoologThesaurus$identifier
attributes(zoologThesaurus$identifier)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
