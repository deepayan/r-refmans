<!DOCTYPE html><html><head><title>Help for package tardis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tardis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#dict_modifiers'><p>Modifier dictionary.</p></a></li>
<li><a href='#dict_negations'><p>Negation dictionary.</p></a></li>
<li><a href='#dict_tardis_sentiment'><p>Sentiment dictionary for TARDIS package.</p></a></li>
<li><a href='#tardis'><p>Text Analysis with Rules and Dictionaries for Inferring Sentiment (TARDIS)</p></a></li>
<li><a href='#tardis_multidict'><p>Analyze text with more than one dictionary</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Text Analysis with Rules and Dictionaries for Inferring
Sentiment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Measure text's sentiment with dictionaries and simple rules covering
    negations and modifiers. User-supplied dictionaries are supported, including
    Unicode emojis and multi-word tokens, so this package can also be used to
    study constructs beyond sentiment.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, magrittr, purrr, rlang, stringi, stringr, tidyr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/chris31415926535/tardis">https://github.com/chris31415926535/tardis</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/chris31415926535/tardis/issues">https://github.com/chris31415926535/tardis/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>cpp11</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++11</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-18 19:51:07 UTC; christopher</td>
</tr>
<tr>
<td>Author:</td>
<td>Christopher Belanger
    <a href="https://orcid.org/0000-0003-2070-5721"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher Belanger &lt;christopher.a.belanger@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-18 20:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='dict_modifiers'>Modifier dictionary.</h2><span id='topic+dict_modifiers'></span>

<h3>Description</h3>

<p>A <code>tbl_df</code> with two columns: <code>token</code> and <code>score</code>, identifying the tokens
that increase or decrease other words' sentiments, and the percentage by
which they do so.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dict_modifiers
</code></pre>


<h3>Format</h3>

<p>An object of class <code>spec_tbl_df</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 87 rows and 2 columns.
</p>


<h3>Details</h3>

<p>Derived originally from the VADER dictionary, but modified.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=vader">https://CRAN.R-project.org/package=vader</a>
</p>

<hr>
<h2 id='dict_negations'>Negation dictionary.</h2><span id='topic+dict_negations'></span>

<h3>Description</h3>

<p>A <code>tbl_df</code> with one column: token.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dict_negations
</code></pre>


<h3>Format</h3>

<p>An object of class <code>spec_tbl_df</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 38 rows and 1 columns.
</p>


<h3>Details</h3>

<p>Can include apostrophes or not, but they're removed in processing so there's
no need to include <em>both</em> words with and without apostrophes.
</p>
<p>Derived originally from the VADER dictionary, but modified.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=vader">https://CRAN.R-project.org/package=vader</a>
</p>

<hr>
<h2 id='dict_tardis_sentiment'>Sentiment dictionary for TARDIS package.</h2><span id='topic+dict_tardis_sentiment'></span>

<h3>Description</h3>

<p>Combines VADER and emoji dictionaries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dict_tardis_sentiment
</code></pre>


<h3>Format</h3>

<p>An object of class <code>spec_tbl_df</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 7653 rows and 2 columns.
</p>

<hr>
<h2 id='tardis'>Text Analysis with Rules and Dictionaries for Inferring Sentiment (TARDIS)</h2><span id='topic+tardis'></span>

<h3>Description</h3>

<p>This function uses dictionaries (either the included defaults or user-supplied)
custom dictionaries) and simple rules to measure the sentiment of supplied text.
&quot;Sentiment&quot; means roughly the emotion expressed in the text, where emotions are
collapsed into positive (e.g. happy) or negative (e.g. sad, angry).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tardis(
  input_text = c("I am happy.", "I am VERY happy!!", ":)", "Not sad.", "Bad.",
    "Not bad.", "A happy sentence! And a sad one. In the same text."),
  text_column = NA,
  dict_sentiments = NA,
  dict_modifiers = NA,
  dict_negations = NA,
  sigmoid_factor = 15,
  negation_factor = 0.75,
  allcaps_factor = 1.25,
  punctuation_factor = 1.15,
  use_punctuation = TRUE,
  summary_function = c("mean", "median", "max", "min", "sum"),
  simple_count = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tardis_+3A_input_text">input_text</code></td>
<td>
<p>Text to analyze, either a character vector or a data.frame with a column of text.</p>
</td></tr>
<tr><td><code id="tardis_+3A_text_column">text_column</code></td>
<td>
<p>If using data.frame input, the name of the column of text to analyze.</p>
</td></tr>
<tr><td><code id="tardis_+3A_dict_sentiments">dict_sentiments</code></td>
<td>
<p>Optional sentiment dictionary, defaults to internal tardis dictionary.
A data.frame with two columns: <code>word</code> and <code>value</code>.</p>
</td></tr>
<tr><td><code id="tardis_+3A_dict_modifiers">dict_modifiers</code></td>
<td>
<p>Optional modifiers dictionary, or &quot;none&quot; to disable modifiers.
Defaults to internal tardis dictionary. A data.frame with two columns: <code>word</code> and <code>value</code>.</p>
</td></tr>
<tr><td><code id="tardis_+3A_dict_negations">dict_negations</code></td>
<td>
<p>Optional negation dictionary, or &quot;none&quot; to disable negations.
Defaults to internal tardis dictionary. A data.frame with one column: <code>word</code>.</p>
</td></tr>
<tr><td><code id="tardis_+3A_sigmoid_factor">sigmoid_factor</code></td>
<td>
<p>Numeric, default 15. Factor for scaling sentence scores to -1/+1
using a sigmoid function. Set to NA to disable the sigmoid function
and just return sums of scores, adjusted by any applicable
negators, modifiers, or punctuation/caps effects.</p>
</td></tr>
<tr><td><code id="tardis_+3A_negation_factor">negation_factor</code></td>
<td>
<p>Numeric, default 0.75. Multiplier for damping effects of
sentiment-bearing terms after negations. Stacks multiplicatively.
Should probably be less than 1.</p>
</td></tr>
<tr><td><code id="tardis_+3A_allcaps_factor">allcaps_factor</code></td>
<td>
<p>Numeric, default 1.25. Multiplier for scaling effects of
of sentiment-bearing terms in ALL CAPS. Should probably
be more than 1, to increase effects.</p>
</td></tr>
<tr><td><code id="tardis_+3A_punctuation_factor">punctuation_factor</code></td>
<td>
<p>Numeric, default 1.15. Multiplier for scaling effects of
punctuation. A single question mark has no effect, but
one or more exclamation marks does, and question marks
have effects in the presence of exclamation marks, up
to three punctuation marks total.</p>
</td></tr>
<tr><td><code id="tardis_+3A_use_punctuation">use_punctuation</code></td>
<td>
<p>Boolean, default TRUE. Should we consider sentence-level punctuation?</p>
</td></tr>
<tr><td><code id="tardis_+3A_summary_function">summary_function</code></td>
<td>
<p>For multi-sentence texts, how should we summarise sentence
scores into a text score? Default &quot;mean&quot;, also accepts
&quot;median&quot;, &quot;max&quot;, &quot;min&quot;, and &quot;sum&quot;.</p>
</td></tr>
<tr><td><code id="tardis_+3A_simple_count">simple_count</code></td>
<td>
<p>Boolean, default FALSE. Convenience parameter that overrides many
other parameters to enable simple counts of dictionary words:
no modifiers, negations, capitalization, or punctuation
effects are considered and no sigmoid function is applied.</p>
</td></tr>
<tr><td><code id="tardis_+3A_verbose">verbose</code></td>
<td>
<p>For debugging&ndash;should it print lots of messages to the console?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Roughly, each word's sentiment is a property of its dictionary-given sentiment,
whether it's written in all-caps or not, and the three preceding words. A preceding
negation (e.g. &quot;not&quot;) will reverse and reduce the sentiment&ndash;turning a positive
into a slightly less extreme negative, or vice-versa&ndash;and a preceding modifier
can either increase/decrease the sentiment (e.g. &quot;very&quot; will increase it,
&quot;somewhat&quot; will decrease it).
</p>
<p>Sentences are scored based on their words and the presence of exclamation or
question marks.
</p>
<p>If a supplied text string has more than one sentence, this function will also
return the mean, standard deviation, and range of sentiments expressed in its
sentences. The rationale is that it doesn't make sense to apply sentence-level
analysis to paragraphs, especially for online communications where people can
use quick swings in sentiment to express irony.
</p>
<p>Input can be supplied in a data.frame or character vector.
</p>


<h3>Value</h3>

<p>A <code>tbl_df</code> with one row for each input text and three new columns:
<code>sentiment_mean</code>: the average sentiment for each sentence in each text.
<code>sentiment_sd</code>: the standard deviation of sentence sentiments for each text.
<code>sentiment_range</code>: the range of sentence sentiments for each text.
</p>

<hr>
<h2 id='tardis_multidict'>Analyze text with more than one dictionary</h2><span id='topic+tardis_multidict'></span>

<h3>Description</h3>

<p>This convenience function takes a text and a set of dictionaries, and calls
<code>tardis::tardis()</code> once for each dictionary. Other parameters are also passed
along to <code>tardis()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tardis_multidict(input_text, text_column = NA, dictionaries, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tardis_multidict_+3A_input_text">input_text</code></td>
<td>
<p>A text to be analyzed, either a <code>tbl_df</code> or a character vector.</p>
</td></tr>
<tr><td><code id="tardis_multidict_+3A_text_column">text_column</code></td>
<td>
<p>If <code>tbl_df</code> input, a character with the name of the input
column containing the text to be analyzed.</p>
</td></tr>
<tr><td><code id="tardis_multidict_+3A_dictionaries">dictionaries</code></td>
<td>
<p>A single <code>tbl_df</code> with columns <code>dictionary</code>, <code>token</code>, and
(optionally, for weighted dictionaries) <code>score</code>.</p>
</td></tr>
<tr><td><code id="tardis_multidict_+3A_...">...</code></td>
<td>
<p>Other parameters passed on to <code>tardis::tardis()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Dictionaries must be in a single <code>tbl_df</code> with at least two columns:
<code>token</code>, containing the tokens belonging to each dictionary; and <code>dicionary</code>,
which contains a unique identifier mapping each token to a dictionary.
Weights, if present, must be in a column named <code>score</code>.
</p>
<p>Tokens can be mapped to multiple dictionaries, but each row maps one token
to one dictionary.
</p>


<h3>Value</h3>

<p>A <code>tbl_df</code> with new columns for each dictionary.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(magrittr)
# Get NRC emotions dataset from textdata package
nrc_emotion &lt;- textdata::lexicon_nrc() %&gt;%
  dplyr::rename(token = word, dictionary = sentiment) %&gt;%
  dplyr::mutate(score = 1)

# set up some input text
text &lt;- dplyr::tibble(body = c("I am so angry!", "I am angry.",
  "I'm not angry.", "Your mother and I aren't angry, we're just disappointed."))

emotions &lt;- tardis_multidict(input_text = text, text_column = "body",
  dictionaries = nrc_emotion) %&gt;%
  dplyr::select(body, score_anger, score_sadness)

 emotions

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
