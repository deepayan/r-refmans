<!DOCTYPE html><html lang="en"><head><title>Help for package trud</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {trud}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#trud-package'><p>trud: Query the 'NHS TRUD API'</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#download_item'><p>Download NHS TRUD item</p></a></li>
<li><a href='#get_item_metadata'><p>Retrieve metadata for a NHS TRUD item</p></a></li>
<li><a href='#get_subscribed_metadata'><p>Get metadata for subscribed NHS TRUD items</p></a></li>
<li><a href='#trud_items'><p>Get available NHS TRUD items</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Query the 'NHS TRUD API'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A convenient R interface to the 'National Health Service (NHS) 
    Technology Reference Update Distribution (TRUD) API'. Retrieve available
    releases for items that you are subscribed to and download these with ease.
    For more information on the API, see <a href="https://isd.digital.nhs.uk/trud/users/guest/filters/0/api">https://isd.digital.nhs.uk/trud/users/guest/filters/0/api</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, httr2, magrittr, purrr, rlang, rvest, stringr,
tibble, tidyselect</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rmgpanw.github.io/trud/">https://rmgpanw.github.io/trud/</a>, <a href="https://github.com/rmgpanw/trud">https://github.com/rmgpanw/trud</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rmgpanw/trud/issues">https://github.com/rmgpanw/trud/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-21 14:30:14 UTC; alasdair</td>
</tr>
<tr>
<td>Author:</td>
<td>Alasdair Warwick <a href="https://orcid.org/0000-0002-0800-2890"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Robert Luben <a href="https://orcid.org/0000-0002-5088-6343"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Abraham Olvera-Barrios
    <a href="https://orcid.org/0000-0002-3305-4465"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Chuin Ying Ung <a href="https://orcid.org/0000-0001-8487-4589"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alasdair Warwick &lt;alasdair.warwick.19@ucl.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-23 00:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='trud-package'>trud: Query the 'NHS TRUD API'</h2><span id='topic+trud'></span><span id='topic+trud-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A convenient R interface to the 'National Health Service (NHS) Technology Reference Update Distribution (TRUD) API'. Retrieve available releases for items that you are subscribed to and download these with ease. For more information on the API, see <a href="https://isd.digital.nhs.uk/trud/users/guest/filters/0/api">https://isd.digital.nhs.uk/trud/users/guest/filters/0/api</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alasdair Warwick <a href="mailto:alasdair.warwick.19@ucl.ac.uk">alasdair.warwick.19@ucl.ac.uk</a> (<a href="https://orcid.org/0000-0002-0800-2890">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Robert Luben (<a href="https://orcid.org/0000-0002-5088-6343">ORCID</a>)
</p>
</li>
<li><p> Abraham Olvera-Barrios (<a href="https://orcid.org/0000-0002-3305-4465">ORCID</a>)
</p>
</li>
<li><p> Chuin Ying Ung (<a href="https://orcid.org/0000-0001-8487-4589">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rmgpanw.github.io/trud/">https://rmgpanw.github.io/trud/</a>
</p>
</li>
<li> <p><a href="https://github.com/rmgpanw/trud">https://github.com/rmgpanw/trud</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rmgpanw/trud/issues">https://github.com/rmgpanw/trud/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='download_item'>Download NHS TRUD item</h2><span id='topic+download_item'></span>

<h3>Description</h3>

<p>Downloads files for a specified NHS TRUD item (requires a subscription). By
default this is the latest release.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_item(
  item,
  directory = ".",
  download_file = "archive",
  TRUD_API_KEY = NULL,
  release = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_item_+3A_item">item</code></td>
<td>
<p>An integer, the item to be downloaded.</p>
</td></tr>
<tr><td><code id="download_item_+3A_directory">directory</code></td>
<td>
<p>Path to the directory to which this item will be downloaded
to. This is set to the current working directory by default.</p>
</td></tr>
<tr><td><code id="download_item_+3A_download_file">download_file</code></td>
<td>
<p>The item file to be downloaded. Valid values:
</p>

<ul>
<li> <p><code>"archive"</code> (the release item)
</p>
</li>
<li> <p><code>"checksum"</code>
</p>
</li>
<li> <p><code>"signature"</code>
</p>
</li>
<li> <p><code>"publickKey"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="download_item_+3A_trud_api_key">TRUD_API_KEY</code></td>
<td>
<p>A string. The name of an environmental variable
containing your TRUD API key. If <code>NULL</code> (default) this is assumed to be
called <code>TRUD_API_KEY</code>.</p>
</td></tr>
<tr><td><code id="download_item_+3A_release">release</code></td>
<td>
<p>The name of a specific release ID to be downloaded (this can
be ascertained using <code><a href="#topic+get_item_metadata">get_item_metadata()</a></code>). If <code>NULL</code> (default), then the
latest item release will be downloaded.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The file path to the downloaded file, returned invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Download Community Services Data Set pre-deadline extract XML Schema
 x &lt;- download_item(394, directory = tempdir())

 # List downloaded files
 unzip(x, list = TRUE)

 # Download a previous release
 release &lt;- get_item_metadata(394)$releases[[2]]$id

 y &lt;- download_item(394, directory = tempdir(), release = release)

 unzip(y, list = TRUE)

## End(Not run)

# An informative error is raised if your API key is invalid or missing
try(download_item(394, TRUD_API_KEY = "INVALID_API_KEY"))
</code></pre>

<hr>
<h2 id='get_item_metadata'>Retrieve metadata for a NHS TRUD item</h2><span id='topic+get_item_metadata'></span>

<h3>Description</h3>

<p>Sends a request to the release list endpoint, returning a list of metadata
pertaining to the specified NHS TRUD item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_item_metadata(item, TRUD_API_KEY = NULL, latest_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_item_metadata_+3A_item">item</code></td>
<td>
<p>An integer, the item to be downloaded.</p>
</td></tr>
<tr><td><code id="get_item_metadata_+3A_trud_api_key">TRUD_API_KEY</code></td>
<td>
<p>A string. The name of an environmental variable
containing your TRUD API key. If <code>NULL</code> (default) this is assumed to be
called <code>TRUD_API_KEY</code>.</p>
</td></tr>
<tr><td><code id="get_item_metadata_+3A_latest_only">latest_only</code></td>
<td>
<p>If <code>TRUE</code>, only metadata pertaining to the latest item
release will be retrieved. By default this is set to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Get metadata for Community Services Data Set pre-deadline extract XML Schema
 get_item_metadata(394) |&gt;
   purrr::map_at("releases", \(release) purrr::map(release, names))

# Include metadata for any previous releases using `latest_only = FALSE`
get_item_metadata(394, latest_only = FALSE) |&gt;
   purrr::map_at("releases", \(release) purrr::map(release, names))

## End(Not run)

# An informative error is raised if your API key is invalid or missing
try(download_item(394, TRUD_API_KEY = "INVALID_API_KEY"))
</code></pre>

<hr>
<h2 id='get_subscribed_metadata'>Get metadata for subscribed NHS TRUD items</h2><span id='topic+get_subscribed_metadata'></span>

<h3>Description</h3>

<p>A convenience wrapper around <code><a href="#topic+trud_items">trud_items()</a></code> and <code><a href="#topic+get_item_metadata">get_item_metadata()</a></code>,
retrieving metadata for only items that the user is subscribed to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_subscribed_metadata(TRUD_API_KEY = NULL, latest_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_subscribed_metadata_+3A_trud_api_key">TRUD_API_KEY</code></td>
<td>
<p>A string. The name of an environmental variable
containing your TRUD API key. If <code>NULL</code> (default) this is assumed to be
called <code>TRUD_API_KEY</code>.</p>
</td></tr>
<tr><td><code id="get_subscribed_metadata_+3A_latest_only">latest_only</code></td>
<td>
<p>If <code>TRUE</code>, only metadata pertaining to the latest item
release will be retrieved. By default this is set to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble, with item metadata stored in the list column <code>metadata</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+trud_items">trud_items()</a></code>, <code><a href="#topic+get_item_metadata">get_item_metadata()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_subscribed_metadata()

## End(Not run)
</code></pre>

<hr>
<h2 id='trud_items'>Get available NHS TRUD items</h2><span id='topic+trud_items'></span>

<h3>Description</h3>

<p>Scrapes <a href="https://isd.digital.nhs.uk/trud/users/guest/filters/0/categories/1">this page</a>
from the NHS TRUD website for all available items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trud_items()
</code></pre>


<h3>Value</h3>

<p>A tibble, with columns <code>item_number</code> and <code>item_name</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 trud_items()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
