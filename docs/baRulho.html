<!DOCTYPE html><html><head><title>Help for package baRulho</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {baRulho}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#align_test_files'><p>Align test sound files</p></a></li>
<li><a href='#atmospheric_attenuation'><p>Measure atmospheric attenuation and absorption of sound</p></a></li>
<li><a href='#baRulho'><p>baRulho: quantifying habitat-induced acoustic signal degradation</p></a></li>
<li><a href='#blur_ratio'><p>Measure blur ratio in the time domain</p></a></li>
<li><a href='#envelope_correlation'><p>Measure amplitude envelope correlation</p></a></li>
<li><a href='#excess_attenuation'><p>Measure excess attenuation</p></a></li>
<li><a href='#master_sound_file'><p>Create a master sound file</p></a></li>
<li><a href='#noise_profile'><p>Measure full spectrum sound noise profiles</p></a></li>
<li><a href='#playback_est'><p>Extended selection table with re-recorded playbacks</p></a></li>
<li><a href='#playback_est_unaligned'><p>Extended selection table with re-recorded playbacks before alignment</p></a></li>
<li><a href='#search_templates'><p>Search acoustic templates on test sound files</p></a></li>
<li><a href='#signal_to_noise_ratio'><p>Measure attenuation as signal-to-noise ratio</p></a></li>
<li><a href='#spcc'><p>Measure spectrographic cross-correlation as a measure of signal distortion</p></a></li>
<li><a href='#spcc_align'><p>Align start and end of signal using spectrographic cross-correlation</p></a></li>
<li><a href='#spectral_blur_ratio'><p>Measure blur ratio in the frequency domain</p></a></li>
<li><a href='#spectral_correlation'><p>Measure frequency spectral correlation</p></a></li>
<li><a href='#tail_to_signal_ratio'><p>Measure reverberations as tail-to-signal ratio</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Quantifying Habitat-Induced Acoustic Signal Degradation</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-02-24</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcelo Araya-Salas [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcelo Araya-Salas &lt;marcelo.araya@ucr.ac.cr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Intended to facilitate acoustic analysis of (animal) sound transmission experiments, which typically aim to quantify changes in signal structure when transmitted in a given habitat by broadcasting and re-recording animal sounds at increasing distances. The package offers a workflow with functions to prepare the data set for analysis as well as to calculate and visualize several degradation metrics, including blur ratio, signal-to-noise ratio, excess attenuation and envelope correlation among others (Dabelsteen et al 1993 &lt;<a href="https://doi.org/10.1121%2F1.406682">doi:10.1121/1.406682</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>pbapply, utils, stats, seewave, tuneR, fftw, methods</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.1), warbleR (&ge; 1.1.27)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/maRce10/baRulho">https://github.com/maRce10/baRulho</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/maRce10/baRulho/issues">https://github.com/maRce10/baRulho/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, ggplot2, knitr, kableExtra, viridis, png, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-28 15:49:55 UTC; m</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-01 21:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='align_test_files'>Align test sound files</h2><span id='topic+align_test_files'></span>

<h3>Description</h3>

<p><code>align_test_files</code> aligns test (re-recorded) sound files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>align_test_files(X, Y, output = "est", path = NULL, 
by.song = TRUE, marker = "start", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="align_test_files_+3A_x">X</code></td>
<td>
<p>object of class 'data.frame', 'selection_table' or 'extended_selection_table' (the last 2 classes are created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package). This should be the same data than that used for aligning signals in <code><a href="#topic+search_templates">search_templates</a></code>.</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_y">Y</code></td>
<td>
<p>object of class 'data.frame' with the output of <code><a href="#topic+search_templates">search_templates</a></code>.</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data.frame (&quot;data.frame&quot;).</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_path">path</code></td>
<td>
<p>Character string containing the directory path where test (re-recorded) sound files are found.</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_by.song">by.song</code></td>
<td>
<p>Logical argument to indicate if the extended selection table should be created by song (see 'by.song' <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> argument). Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_marker">marker</code></td>
<td>
<p>Character string to define whether a &quot;start&quot; or &quot;end&quot; marker would be used for aligning re-recorded sound files. Default is &quot;start&quot;.</p>
</td></tr>
<tr><td><code id="align_test_files_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> for customizing extended selection table.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function aligns signals found in re-recorded sound files according to a master sound file referenced in 'X'. The function outputs a 'extended selection table'.
</p>


<h3>Value</h3>

<p>An extended selection table with the aligned signals from test (re-recorded) sound files.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>See Also</h3>

<p><code><a href="#topic+spcc_align">spcc_align</a></code>; <code><a href="#topic+search_templates">search_templates</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set temporary directory
td &lt;- tempdir()  

# load example data from warbleR
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", "lbh_selec_table"))

# save sound files to temporary folder
writeWave(Phae.long1, file.path(td, "Phae.long1.wav"))
writeWave(Phae.long2, file.path(td, "Phae.long2.wav"))
writeWave(Phae.long3, file.path(td, "Phae.long3.wav"))
writeWave(Phae.long4, file.path(td, "Phae.long4.wav"))

# make an extended selection table
est &lt;- warbleR::selection_table(X = lbh_selec_table, extended = TRUE, 
confirm.extended = FALSE, path = td, pb = FALSE)

# create master sound file
master.sf &lt;- master_sound_file(X = est, file.name = "example_master", 
dest.path = td, gap.duration = 0.3)

# read master
exmp.master &lt;- readWave(file.path(td, "example_master.wav"))

# add 1 s silence
exmp.test1 &lt;- addsilw(wave = exmp.master, at = "start", d = 1, output = "Wave", 
f = exmp.master@samp.rate)

exmp.test2 &lt;- addsilw(wave = exmp.master, at = "start", d = 2, output = "Wave", 
f = exmp.master@samp.rate)

# create noise
ns &lt;- noisew(f = exmp.master@samp.rate, d = duration(exmp.test2) + 1, 
output = "Wave")

# make noise exactly the same length and add noise to 2 examples
exmp.test1@left &lt;- exmp.test1@left + (ns@left[1:length(exmp.test1@left)] * 500)
exmp.test2@left &lt;- exmp.test2@left + (ns@left[1:length(exmp.test2@left)] * 500)

# normalize before saving
exmp.test1 &lt;- normalize(exmp.test1, unit = "16")
exmp.test2 &lt;- normalize(exmp.test2, unit = "16")

# save examples
writeWave(object = exmp.test1, filename = file.path(td, "example_test1.wav"), 
extensible = FALSE)

writeWave(object = exmp.test2, filename = file.path(td, "example_test2.wav"), 
extensible = FALSE)

# find  tempaltes
found.templts &lt;- search_templates(X = master.sf, 
template.rows = which(master.sf$orig.sound.file == "start_marker"), 
test.files = c("example_test1.wav", "example_test2.wav"), path = td, pb = FALSE)

# align signals and output extended selection table
alg.tests &lt;- align_test_files(X =  master.sf, Y = found.templts, path = td, pb = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='atmospheric_attenuation'>Measure atmospheric attenuation and absorption of sound</h2><span id='topic+atmospheric_attenuation'></span>

<h3>Description</h3>

<p><code>atmospheric_attenuation</code> measures atmospheric attenuation and atmospheric absorption.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atmospheric_attenuation(f, temp, RH, p = 101325, 
formula = 1, spi = NULL, dist = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atmospheric_attenuation_+3A_f">f</code></td>
<td>
<p>numeric vector of length 1 with frequency (in Hertz).</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_temp">temp</code></td>
<td>
<p>numeric vector of length 1 with frequency (in Celsius).</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_rh">RH</code></td>
<td>
<p>numeric vector of length 1 with relative humidity</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_p">p</code></td>
<td>
<p>numeric vector of length 1 with ambient pressure in Pa (standard: 101325, default).</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_formula">formula</code></td>
<td>
<p>1 = Bazley 1976, 2 = Rossing 2007 (p. 116, see details).</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_spi">spi</code></td>
<td>
<p>numeric vector of length 1 with the initial sound pressure in Pa. Required for calculating atmospheric absorption. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="atmospheric_attenuation_+3A_dist">dist</code></td>
<td>
<p>numeric vector of length 1 with distance (m) over which a sound propagates. Required for calculating atmospheric absorption. Default is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate the atmospheric attenuation based on temperature, relative humidity, pressure and sound frequency. The function can applied to formulae based on:
</p>

<ul>
<li> <p><code>1</code>: default. As used by Bazley (1976), Sound absorption in air at frequencies up to 100 kHz. NPL acoustics report Ac 74. 
</p>
</li>
<li> <p><code>2</code>: as used by Rossing (2007), Handbook of Acoustics, Springer.
</p>
</li></ul>

<p>If 'spi' and 'dist' are supplied the function also returns the atmospheric absorption (in dB).
</p>


<h3>Value</h3>

<p>Returns atmospheric attenuation (in dB/m) of sound based on supplied parameters. If 'spi' and 'dist' are supplied the function also returns atmospheric absorption (in dB).
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

#' # remove ambient selections
playback_est &lt;- playback_est[playback_est$signal.type != "ambient", ]

# measure atmospheric attenuation formula 1
atmospheric_attenuation(f = 20000, temp = 20, RH = 90, p = 88000, formula = 1)
}

</code></pre>

<hr>
<h2 id='baRulho'>baRulho: quantifying habitat-induced acoustic signal degradation</h2><span id='topic+baRulho'></span>

<h3>Description</h3>

<p>'baRulho' is a package intended to quantify habitat-induced degradation of (animal) acoustic signals.
</p>


<h3>Details</h3>

<p>The main features of the package are:
</p>

<ul>
<li><p> Loops to apply tasks through acoustic signals referenced in an extended selection table
</p>
</li>
<li><p> The comparison of playback signals re-recorded at different distances 
</p>
</li></ul>

<p>Most functions allow the parallelization of tasks, which distributes the tasks among several processors to improve computational efficiency.
</p>
<p>License: GPL (&gt;= 2)
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas
</p>
<p>Maintainer: Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>

<hr>
<h2 id='blur_ratio'>Measure blur ratio in the time domain</h2><span id='topic+blur_ratio'></span>

<h3>Description</h3>

<p><code>blur_ratio</code> measures blur ratio in signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>blur_ratio(X, parallel = 1, pb = TRUE, method = 1, ssmooth = 200, 
msmooth = NULL, output = "est", img = FALSE, res = 150, hop.size = 11.6, wl = NULL, 
ovlp = 70, pal = reverse.gray.colors.2, collevels = seq(-60, 0, 5), dest.path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="blur_ratio_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. The object must include the following additional columns: 'signal.type', 'bottom.freq' and 'top.freq'.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' for measuring envelope correlation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="blur_ratio_+3A_ssmooth">ssmooth</code></td>
<td>
<p>Numeric vector of length 1 determining the length of the sliding window (in amplitude samples) used for a sum smooth for amplitude envelope calculation (used internally by <code><a href="seewave.html#topic+env">env</a></code>). Default is 200.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_msmooth">msmooth</code></td>
<td>
<p>Numeric vector of length 2 to smooth the amplitude envelope with a mean sliding window for amplitude envelope calculation. The first element is the window length (in number of amplitude values) and the second one the window overlap (used internally by <code><a href="seewave.html#topic+env">env</a></code>).</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default), a data frame ('data.frame') or a list (&quot;list&quot;) containing the extended selection table (first object in the list) and all (smoothed) wave envelopes (second object in the list) is returned. The envelope data can be used for plotting.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_img">img</code></td>
<td>
<p>Logical argument to control if image files in 'jpeg' format containing the images being compared and the corresponding envelopes are produced. Default is no images ( <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_res">res</code></td>
<td>
<p>Numeric argument of length 1. Controls image resolution. Default is 150 (faster) although 300 - 400 is recommended for publication/presentation quality.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Only used when plotting. Default is 70. Applied to both spectra and spectrograms on image files.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_pal">pal</code></td>
<td>
<p>A color palette function to be used to assign colors in the 
plot, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is reverse.gray.colors.2.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_collevels">collevels</code></td>
<td>
<p>Numeric vector indicating a set of levels which are used to partition the amplitude range of the spectrogram (in dB) as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is <code>seq(-60, 0, 5)</code>.</p>
</td></tr>
<tr><td><code id="blur_ratio_+3A_dest.path">dest.path</code></td>
<td>
<p>Character string containing the directory path where the image files will be saved. If NULL (default) then the folder containing the sound files will be used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Blur ratio measures the degradation of sound as a function of the change in signal energy in the time domain as described by Dabelsteen et al (1993). Low values indicate low degradation of signals. The function measures the blur ratio on signals in which a reference playback has been re-recorded at different distances. Blur ratio is measured as the mismatch between amplitude envelopes (expressed as probability density functions) of the reference signal and the re-recorded signal. The function compares each signal type to the corresponding reference signal within the supplied frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X'). The 'signal.type' column must be used to tell the function to only compare signals belonging to the same category (e.g. song-types). Two methods for setting the experimental design are provided. All wave objects in the extended selection table must have the same sampling rate so the length of envelopes is comparable.
</p>


<h3>Value</h3>

<p>Data frame similar to input data, but also includes two new columns ('reference' and 'blur.ratio')
with the reference signal and blur ratio values. If <code>img = TRUE</code> it also returns 1 image file (in 'jpeg' format) for each comparison showing spectrograms of both signals and the overlaid amplitude envelopes (as probability mass functions (PMF)). Spectrograms are shown within the frequency range of the reference signal and also show vertical lines with the start and end of signals to allow users to visually check alignment. If <code>output = 'list'</code> the output would be a list including the data frame just described and a data frame with envelopes (amplitude values) for all signals.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Dabelsteen, T., Larsen, O. N., &amp; Pedersen, S. B. (1993). Habitat-induced degradation of sound signals: Quantifying the effects of communication sounds and bird location on blur ratio, excess attenuation, and signal-to-noise ratio in blackbird song. The Journal of the Acoustical Society of America, 93(4), 2206.
</p>
<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>See Also</h3>

<p><code><a href="#topic+envelope_correlation">envelope_correlation</a></code>, <code><a href="#topic+spectral_blur_ratio">spectral_blur_ratio</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# remove ambient selections
playback_est &lt;- playback_est[playback_est$signal.type != "ambient", ]

# using method 1
blur_ratio(X = playback_est)

# using method 2
blur_ratio(X = playback_est, method = 2)
}

</code></pre>

<hr>
<h2 id='envelope_correlation'>Measure amplitude envelope correlation</h2><span id='topic+envelope_correlation'></span>

<h3>Description</h3>

<p><code>envelope_correlation</code> measures amplitude envelope correlation of signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>envelope_correlation(X, parallel = 1, pb = TRUE, method = 1, cor.method = "pearson", 
ssmooth = NULL, msmooth = NULL, output = "est", hop.size = 11.6, wl = NULL, ovlp = 70)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="envelope_correlation_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).
If <code>NULL</code> (default) then the current working directory is used.</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' to measure amplitude envelope correlation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_cor.method">cor.method</code></td>
<td>
<p>Character string indicating the correlation coefficient to be applied (&quot;pearson&quot;, &quot;spearman&quot;, or &quot;kendall&quot;, see <code><a href="stats.html#topic+cor">cor</a></code>).</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_ssmooth">ssmooth</code></td>
<td>
<p>Numeric vector of length 1 to determine the length of the sliding window used for a sum smooth for amplitude envelope calculation (used internally by <code><a href="seewave.html#topic+env">env</a></code>).</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_msmooth">msmooth</code></td>
<td>
<p>Numeric vector of length 2 to smooth the amplitude envelope with a mean sliding window for amplitude envelope calculation. The first element is the window length (in number of amplitude values) and the second one the window overlap (used internally by <code><a href="seewave.html#topic+env">env</a></code>).</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p>
</td></tr>
<tr><td><code id="envelope_correlation_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is 70.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Amplitude envelope correlation measures the similarity of two signals in the time domain. The  function measures the envelope correlation coefficients of signals in which a reference playback has been re-recorded at increasing distances. Values close to 1 means very similar amplitude envelopes (i.e. little degradation has occurred). If envelopes have different lengths (which means signals have different lengths) cross-correlation is used and the maximum correlation coefficient is returned. Cross-correlation is achieved by sliding the shortest signal along the largest one and calculating the correlation at each step. The 'signal.type' column must be used to indicate the function to only compare signals belonging to the same category (e.g. song-types).The function compares each signal type to the corresponding reference signal within the supplied frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X'). Two methods for calculating envelope correlation are provided (see 'method' argument). Use <code><a href="#topic+blur_ratio">blur_ratio</a></code> to extract envelopes.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but also includes two new columns ('reference' and  'envelope.correlation')
with the reference signal and the amplitude envelope correlation coefficients.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Apol, C.A., Sturdy, C.B. &amp; Proppe, D.S. (2017). Seasonal variability in habitat structure may have shaped acoustic signals and repertoires in the black-capped and boreal chickadees. Evol Ecol. 32:57-74.

</p>


<h3>See Also</h3>

<p><code><a href="#topic+blur_ratio">blur_ratio</a></code>, <code><a href="#topic+spectral_blur_ratio">spectral_blur_ratio</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# remove ambient selections
playback_est &lt;- playback_est[playback_est$signal.type != "ambient", ]

# method 1
envelope_correlation(X = playback_est)

# method 2
envelope_correlation(X = playback_est, method = 2)
}

</code></pre>

<hr>
<h2 id='excess_attenuation'>Measure excess attenuation</h2><span id='topic+excess_attenuation'></span>

<h3>Description</h3>

<p><code>excess_attenuation</code> measures excess attenuation in signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>excess_attenuation(X, parallel = 1, pb = TRUE, method = 1, type = "Marten",
bp = NULL, output = "est", hop.size = 1, wl = NULL, ovlp = 70)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="excess_attenuation_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. The data frame must include the following additional columns: 'distance', 'signal.type', 'bottom.freq' and 'top.freq'.</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' for measuring excess attenuation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_type">type</code></td>
<td>
<p>Character vector of length 1 to indicate the 'type' of excess attenuation to be used. Two types are available:
</p>

<ul>
<li> <p><code>Marten</code>: as described by Marten et al. 1977:(total_attenuation - spheric_spreading_attenuation) / distance. This is the default method. Attenuation is measured as changes in energy on amplitude RMS (root mean square).
</p>
</li>
<li> <p><code>Darden</code>: as described by Darden et al 2008: microphone_gain - 20 x log(distance / 10) - 20 x log(envelope_correlation). The function <code><a href="#topic+envelope_correlation">envelope_correlation</a></code> is used internally. Microphone gain is the combined microphone gain of the reference and re-recorded signals.
</p>
</li></ul>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_bp">bp</code></td>
<td>
<p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 1 ms, which is equivalent to ~45 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. Ignored if <code>bp = NULL</code>. If supplied, 'hop.size' is ignored.
Note that lower values will increase time resolution, which is more important for amplitude ratio calculations.</p>
</td></tr>
<tr><td><code id="excess_attenuation_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Only used when plotting. Default is 70. Only used for bandpass filtering.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Excess attenuation is the amplitude loss of a sound in excess due to spherical spreading. With every doubling of distance, sounds attenuate with a 6 dB loss of amplitude (Morton, 1975; Marten &amp; Marler, 1977). Any additional loss of amplitude results in excess attenuation, or energy loss in excess of that expected to occur with distance via spherical spreading, due to atmospheric conditions or habitat (Wiley &amp; Richards, 1978). Low values indicate little signal attenuation. 
The goal of the function is to measure the excess attenuation on signals in which a reference playback has been re-recorded at increasing distances. The 'signal.type' column must be used to indicate which signals belonging to the same category (e.g. song-types). The function will then compare each signal type to the corresponding reference signal within the frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X'). Two methods for calculating excess attenuation are provided (see 'method' argument).
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but also includes a new column (excess.attenuation)
with the excess attenuation values.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Darden, SK, Pedersen SB, Larsen ON, &amp; Dabelsteen T. (2008). Sound transmission at ground level in a short-grass prairie habitat and its implications for long-range communication in the swift fox *Vulpes velox*. The Journal of the Acoustical Society of America, 124(2), 758-766.
</p>
<p>Marten K, &amp; Marler P. (1977). Sound transmission and its significance for animal vocalization. Behavioral Ecology and Sociobiology, 2(3), 271-290.
</p>
<p>Morton ES. (1975). Ecological sources of selection on avian sounds. The American Naturalist, 109(965), 17-34.

</p>


<h3>See Also</h3>

<p><code><a href="#topic+spcc">spcc</a></code>; <code><a href="#topic+envelope_correlation">envelope_correlation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# using method 1
excess_attenuation(X = playback_est)

# using method 2
excess_attenuation(X = playback_est, method = 2)
}

</code></pre>

<hr>
<h2 id='master_sound_file'>Create a master sound file</h2><span id='topic+master_sound_file'></span>

<h3>Description</h3>

<p><code>master_sound_file</code> creates a master sound file to be used in playback experiments related to sound degradation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>master_sound_file(X, file.name, dest.path = NULL, overwrite = FALSE, delay = 1, 
gap.duration = 1, amp.marker = 2, flim = c(0, 4), cex = 14)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="master_sound_file_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. The object must include the following additional columns: 'bottom.freq' and 'top.freq'.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_file.name">file.name</code></td>
<td>
<p>Character string indicating the name of the sound file.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_dest.path">dest.path</code></td>
<td>
<p>Character string containing the directory path where the sound file will be saved.
If <code>NULL</code> (default) then the current working directory will be used instead.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical argument to determine if the function will overwrite any existing sound file with the same file name. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_delay">delay</code></td>
<td>
<p>Numeric vector of length 1 to control the duration (in s) of a silence gap at the beginning (and at the end) of the sound file. This can be useful to allow some time at the start of the playback experiment. Default is 1.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_gap.duration">gap.duration</code></td>
<td>
<p>Numeric vector of length 1 to control the duration (in s) of silence gaps to be placed in between signals. Default is 1 s.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_amp.marker">amp.marker</code></td>
<td>
<p>Numeric vector of length 1 to use as a constant to amplify markers amplitude. This is useful to increase the amplitude of markers in relation to those of signals, so it is picked up at further distances. Default is 2.</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_flim">flim</code></td>
<td>
<p>Numeric vector of length 2 to control the frequency range in which the markers would be found. If <code>NULL</code> markers would be display across the whole frequency range. Default is c(0, 4).</p>
</td></tr>
<tr><td><code id="master_sound_file_+3A_cex">cex</code></td>
<td>
<p>Numeric vector of length 1 indicating the font size for the start and end markers. Default is 14.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is intended to simplify the creation of master sound files for playback experiments in signal degradation studies. The function takes the wave objects from extended selection tables and concatenate them in a single sound file. The function also adds acoustic markers at the start and end of the playback that can be used to time-sync re-recorded signals to facilitate the streamlining of degradation quantification.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but includes a new column (cross.correlation)
with the spectrogram cross-correlation coefficients.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>See Also</h3>

<p><code><a href="Rraven.html#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data from warbleR
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", 
"lbh_selec_table"))

# save sound files to temporary folder
writeWave(Phae.long1, file.path(tempdir(), "Phae.long1.wav"))
writeWave(Phae.long2, file.path(tempdir(), "Phae.long2.wav"))
writeWave(Phae.long3, file.path(tempdir(), "Phae.long3.wav"))
writeWave(Phae.long4, file.path(tempdir(), "Phae.long4.wav"))

# make an extended selection table
est &lt;- selection_table(X = lbh_selec_table, extended = TRUE, confirm.extended = FALSE, 
path = tempdir())

# create master sound file
master.sel.tab &lt;- master_sound_file(X = est, file.name = "example_master", 
dest.path = tempdir(), gap.duration = 0.3)

# the following code exports the selection table to Raven using Rraven package
# Rraven::exp_raven(master.sel.tab, path = tempdir(), file.name = "example_master_selection_table")
}

</code></pre>

<hr>
<h2 id='noise_profile'>Measure full spectrum sound noise profiles</h2><span id='topic+noise_profile'></span>

<h3>Description</h3>

<p><code>noise_profile</code> Measure full spectrum sound pressure levels (i.e. noise profiles) in sound files or extended selection tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>noise_profile(X = NULL, files = NULL, mar = NULL, 
noise.ref = "adjacent", parallel = 1, pb = TRUE, path = NULL,
bp = NULL, hop.size = 1, wl = NULL, PSD = FALSE, norm = TRUE, dB = "A", averaged = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="noise_profile_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_files">files</code></td>
<td>
<p>Character vector with names of wave files to be analyzed. Files must be found in 'path' supplied (or in the working directory if 'path' is not supplied). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_mar">mar</code></td>
<td>
<p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure ambient noise. Required if 'X' is supplied and ignored if not supplied. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_noise.ref">noise.ref</code></td>
<td>
<p>Character vector of length 1 to determined which noise segment must be used for measuring ambient noise. Ignored if 'X' is not supplied. Two options are available: 
</p>

<ul>
<li> <p><code>adjacent</code>: measure ambient noise right before the signal (using argument 'mar' to define duration of ambient noise segments). 
</p>
</li>
<li> <p><code>custom</code>: measure ambient noise segments referenced in the selection table (labeled as 'ambient' in the 'signal.type' column).
</p>
</li></ul>
</td></tr>
<tr><td><code id="noise_profile_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_path">path</code></td>
<td>
<p>Character string containing the directory path where the sound files are located.
If <code>NULL</code> (default) then the current working directory is used.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_bp">bp</code></td>
<td>
<p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 1 ms, which is equivalent to ~45 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. Ignored if <code>bp = NULL</code>. If supplied, 'hop.size' is ignored. 
Note that lower values will increase time resolution, which is more important for amplitude ratio calculations.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_psd">PSD</code></td>
<td>
<p>Logical to control whether the Probability Mass Function (the probability distribution of frequencies). See <code><a href="seewave.html#topic+meanspec">meanspec</a></code>. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_norm">norm</code></td>
<td>
<p>Logical to control whether amplitude values are normalized (divided by the maximum) so the highest value is 1. See <code><a href="seewave.html#topic+meanspec">meanspec</a></code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_db">dB</code></td>
<td>
<p>A character string of length 1 specifying the type dB to return: &quot;max0&quot; for a maximum dB value at 0, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, and &quot;ITU&quot; for common dB weights. See <code><a href="seewave.html#topic+meanspec">meanspec</a></code>. Default is <code>"A"</code>.</p>
</td></tr>
<tr><td><code id="noise_profile_+3A_averaged">averaged</code></td>
<td>
<p>Logical to control if frequency spectra are averaged within a sound file. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function 'noise_profile()' allows to estimate full spectrum sound pressure levels (i.e. noise profiles) of ambient noise. This can be done on extended selection tables (using the segments containing no signal) or over complete sound files in the working directory (or path supplied). The function uses <code><a href="seewave.html#topic+meanspec">meanspec</a></code> internally to calculate frequency spectra.
</p>


<h3>Value</h3>

<p>A list containing the the frequency spectra for each sound file or wave object (if 'X' is supplied).
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2.
</p>



<h3>See Also</h3>

<p><code><a href="#topic+excess_attenuation">excess_attenuation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# custom noise reference
noise_profile(X = playback_est, mar = 0.01, pb = FALSE, noise.ref = "custom")

# remove noise selections
pe &lt;- playback_est[playback_est$signal.type != "ambient", ]
 
 noise_profile(X = pe, mar = 0.01, pb = FALSE, noise.ref = "adjacent")
}

</code></pre>

<hr>
<h2 id='playback_est'>Extended selection table with re-recorded playbacks</h2><span id='topic+playback_est'></span>

<h3>Description</h3>

<p>Recordings of <em>Phaethornis longirostris</em> (Long-billed Hermit) songs from different song types (column 'signal.type') that were broadcast and re-recorded at 4 distances (1m, 5m, 10m, 15m, column 'distance'). The data includes ambient (background) noise selections for each distances. The data was created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(playback_est)
</code></pre>


<h3>Format</h3>

<p>Extended selection table object in the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code> format, which contains annotations and acoustic data
</p>


<h3>Source</h3>

<p>Marcelo Araya-Salas
</p>

<hr>
<h2 id='playback_est_unaligned'>Extended selection table with re-recorded playbacks before alignment</h2><span id='topic+playback_est_unaligned'></span>

<h3>Description</h3>

<p>The data contains a subset of the selections in the example data 'playback_est' but in this subset the re-recorded signals are not aligned in time with the corresponding reference signals (see <code><a href="#topic+spcc_align">spcc_align</a></code> for more details on aligning signals). This data set is intended mostly for using as an example in <code><a href="#topic+spcc_align">spcc_align</a></code>. The data contains recordings of <em>Phaethornis longirostris</em> (Long-billed Hermit) songs from different song types (column 'signal.type') that were broadcast and re-recorded at 4 distances (1m, 5m, 10m, 15m, column 'distance'). The data was created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(playback_est_unaligned)
</code></pre>


<h3>Format</h3>

<p>Extended selection table object in the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code> format, which contains annotations and acoustic data
</p>


<h3>Source</h3>

<p>Marcelo Araya-Salas
</p>

<hr>
<h2 id='search_templates'>Search acoustic templates on test sound files</h2><span id='topic+search_templates'></span>

<h3>Description</h3>

<p><code>search_templates</code> searches acoustic templates on test (re-recorded) sound files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_templates(X, template.rows, test.files, path = NULL, pb = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_templates_+3A_x">X</code></td>
<td>
<p>Object of class 'data.frame', 'selection_table' or 'extended_selection_table' (the last 2 classes are created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package). Must contain the following columns: 1) &quot;sound.files&quot;: name of the .wav files, 2) &quot;selec&quot;: unique selection identifier (within a sound file), 3) &quot;start&quot;: start time and 4) &quot;end&quot;: end time of selections. Columns for 'top.freq', 'bottom.freq' and 'channel' are optional. Required.</p>
</td></tr>
<tr><td><code id="search_templates_+3A_template.rows">template.rows</code></td>
<td>
<p>Numeric vector with the index of the rows from 'X' to be used as templates. If only 1 is supplied the same template will be run over all 'test.files'. Otherwise, 'template.rows' must be the same length as 'test.files'. Required.</p>
</td></tr>
<tr><td><code id="search_templates_+3A_test.files">test.files</code></td>
<td>
<p>Character vector of length 1 with the name(s) of the test (re-recorded) file(s) in which to search for the template(s) (see argument 'template.rows').</p>
</td></tr>
<tr><td><code id="search_templates_+3A_path">path</code></td>
<td>
<p>Character string containing the directory path where test (re-recorded) sound files are found.</p>
</td></tr>
<tr><td><code id="search_templates_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="search_templates_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code><a href="warbleR.html#topic+cross_correlation">cross_correlation</a></code> for setting cross-correlation parameters (e.g. 'wl', 'ovlp', etc).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function takes a master sound file's reference data ('X') and finds the position of acoustics templates included as selections in 'X'. This is used to align signals found in re-recorded sound files according to a master sound file referenced in 'X'. Take a look at the package vignette for information on how to:: incorporate this into a sound degradation analysis workflow.
</p>


<h3>Value</h3>

<p>A data frame with the time, start, end, test file names, template name, maximum cross-correlation score and the time where it was detected.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>See Also</h3>

<p><code><a href="#topic+spcc_align">spcc_align</a></code>; <code><a href="#topic+align_test_files">align_test_files</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# use a temporary directory
td &lt;- tempdir()  

# load example data from warbleR
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", 
"lbh_selec_table"))

# save sound files to temporary folder
writeWave(Phae.long1, file.path(td, "Phae.long1.wav"))
writeWave(Phae.long2, file.path(td, "Phae.long2.wav"))
writeWave(Phae.long3, file.path(td, "Phae.long3.wav"))
writeWave(Phae.long4, file.path(td, "Phae.long4.wav"))

# make an extended selection table
est &lt;- selection_table(X = lbh_selec_table, extended = TRUE, confirm.extended = FALSE, 
path = td, pb = FALSE)

# create master sound file
master.sf &lt;- master_sound_file(X = est, file.name = "example_master", 
dest.path = td, gap.duration = 0.3)

# read master
exmp.master &lt;- readWave(file.path(td, "example_master.wav"))

# add 1 s silence
exmp.test1 &lt;- addsilw(wave = exmp.master, at = "start", d = 1,
output = "Wave", f = exmp.master@samp.rate)

exmp.test2 &lt;- addsilw(wave = exmp.master, at = "start", d = 2, 
output = "Wave", f = exmp.master@samp.rate)

# create noise
ns &lt;- noisew(f = exmp.master@samp.rate, d = duration(exmp.test2) + 1, 
output = "Wave")

# make noise exactly the same length and add noise to 2 examples
exmp.test1@left &lt;- exmp.test1@left + (ns@left[1:length(exmp.test1@left)] * 500)
exmp.test2@left &lt;- exmp.test2@left + (ns@left[1:length(exmp.test2@left)] * 500)

exmp.test1 &lt;- tuneR::normalize(exmp.test1, unit = "16")
exmp.test2 &lt;- tuneR::normalize(exmp.test2, unit = "16")

# save examples
writeWave(object = exmp.test1, filename = file.path(td, "example_test1.wav"), extensible = FALSE)
writeWave(object = exmp.test2, filename = file.path(td, "example_test2.wav"), extensible = FALSE)

# search using start marker as template
search_templates(X = master.sf, 
template.rows = which(master.sf$orig.sound.file == "start_marker"), 
test.files = c("example_test1.wav", "example_test2.wav"), path = td, pb = FALSE)

# search using end marker as template
search_templates(X = master.sf, template.rows = which(master.sf$orig.sound.file == "end_marker"), 
test.files = c("example_test1.wav", "example_test2.wav"), 
path = td, pb = FALSE)

# search using both start and end markers as template
search_templates(X = master.sf, 
template.rows = which(master.sf$orig.sound.file == "start_marker" | 
master.sf$orig.sound.file == "end_marker"), 
test.files = c("example_test1.wav", "example_test2.wav"), 
path = td, pb = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='signal_to_noise_ratio'>Measure attenuation as signal-to-noise ratio</h2><span id='topic+signal_to_noise_ratio'></span>

<h3>Description</h3>

<p><code>signal_to_noise_ratio</code> measures attenuation as signal-to-noise ratio of signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>signal_to_noise_ratio(X, mar, parallel = 1, pb = TRUE, eq.dur = FALSE,
noise.ref = "adjacent", type = 1, bp = 'freq.range', 
output = "est", hop.size = 1, wl = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="signal_to_noise_ratio_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_mar">mar</code></td>
<td>
<p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure ambient noise.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_eq.dur">eq.dur</code></td>
<td>
<p>Logical. Controls whether the ambient noise segment that is measured has the same duration 
to that of the signal (if <code>TRUE</code>. Default is <code>FALSE</code>). If <code>TRUE</code> then 'mar' and 'noise.ref' arguments are ignored.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_noise.ref">noise.ref</code></td>
<td>
<p>Character vector of length 1 to determined which noise segment must be used for measuring ambient noise. Two options are available: 
</p>

<ul>
<li> <p><code>adjacent</code>: measure ambient noise right before the signal (using argument 'mar' to define duration of ambient noise segments). 
</p>
</li>
<li> <p><code>custom</code>: measure ambient noise segments referenced in the selection table (labeled as 'ambient' in the 'signal.type' column). Those segments will be used to apply the same ambient noise reference to all signals in a sound file. Therefore, at least one 'ambient' selection for each sound file must be provided. If several 'ambient' selections by sound file are supplied, then the root mean square of the amplitude envelope will be averaged across those selections.
</p>
</li></ul>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_type">type</code></td>
<td>
<p>Numeric vector of length 1. Selects the formula to be used to calculate the signal-to-noise ratio (S = signal
, N = background noise): 
</p>

<ul>
<li> <p><code>1</code>: ratio of S amplitude envelope root mean square to N amplitude envelope root mean square
(<code>rms(env(S))/rms(env(N))</code>) as described by Darden (2008).
</p>
</li>
<li> <p><code>2</code>: ratio of the difference between S amplitude envelope root mean square and N amplitude envelope root mean square to N amplitude envelope root mean square (<code>(rms(env(S)) - rms(env(N)))/rms(env(N))</code>, as described by Dabelsteen et al (1993).
</p>
</li></ul>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_bp">bp</code></td>
<td>
<p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Alternatively, when set to 'freq.range' (default), which will make the function use the 'bottom.freq' and 'top.freq' as the bandpass range.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 1 ms, which is equivalent to ~45 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="signal_to_noise_ratio_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. Ignored if <code>bp = NULL</code>. If supplied, 'hop.size' is ignored.
Note that lower values will increase time resolution, which is more important for amplitude ratio calculations.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Signal-to-noise ratio (SNR) measures signal amplitude level in relation to ambient noise. A general margin in which ambient noise will be measured must be specified. Alternatively, a selection of ambient noise can be used as reference (see 'noise.ref' argument). When margins overlap with another acoustic signal nearby, SNR will be inaccurate, so margin length should be carefully considered. Any SNR less than or equal to one suggests background noise is equal to or overpowering the acoustic signal. The function will measure signal-to-noise ratio within the supplied frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X') by default (that is, when <code>bp = 'freq.range'</code>.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but also includes a new column (signal.to.noise.ratio)
with the signal-to-noise ratio values.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Dabelsteen, T., Larsen, O. N., &amp; Pedersen, S. B. (1993). Habitat-induced degradation of sound signals: Quantifying the effects of communication sounds and bird location on blur ratio, excess attenuation, and signal-to-noise ratio in blackbird song. The Journal of the Acoustical Society of America, 93(4), 2206.
</p>
<p>Darden, SK, Pedersen SB, Larsen ON, &amp; Dabelsteen T. (2008). Sound transmission at ground level in a short-grass prairie habitat and its implications for long-range communication in the swift fox *Vulpes velox*. The Journal of the Acoustical Society of America, 124(2), 758-766.

</p>


<h3>See Also</h3>

<p><code><a href="#topic+excess_attenuation">excess_attenuation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# using measure ambient noise reference selections 
signal_to_noise_ratio(X = playback_est, mar = 0.05, noise.ref = 'custom')

# remove ambient selections
playback_est &lt;- playback_est[playback_est$signal.type != "ambient", ]

# using margin for ambient noise of 0.05 and adjacent measure ambient noise reference
signal_to_noise_ratio(X = playback_est, mar = 0.05, noise.ref = 'adjacent')

}

</code></pre>

<hr>
<h2 id='spcc'>Measure spectrographic cross-correlation as a measure of signal distortion</h2><span id='topic+spcc'></span>

<h3>Description</h3>

<p><code>spcc</code> measures spectrographic cross-correlation as a measure of signal distortion in signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spcc(X, parallel = 1, pb = TRUE,  method = 1, 
cor.method = "pearson", output = "est", 
hop.size = 11.6, wl = NULL, ovlp = 90, wn = 'hanning')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spcc_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. The object must include the following additional columns: 'signal.type', 'bottom.freq' and 'top.freq'.</p>
</td></tr>
<tr><td><code id="spcc_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="spcc_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="spcc_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' for measuring envelope correlation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="spcc_+3A_cor.method">cor.method</code></td>
<td>
<p>Character string indicating the correlation coefficient to be applied (&quot;pearson&quot;, &quot;spearman&quot;, or &quot;kendall&quot;, see <code><a href="stats.html#topic+cor">cor</a></code>).</p>
</td></tr>
<tr><td><code id="spcc_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="spcc_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="spcc_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is <code>NULL</code>. If supplied, 'hop.size' is ignored.</p>
</td></tr>
<tr><td><code id="spcc_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying % of overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is 90. High values of ovlp 
slow down the function but produce more accurate results.</p>
</td></tr>
<tr><td><code id="spcc_+3A_wn">wn</code></td>
<td>
<p>A character vector of length 1 specifying the window name as in <code><a href="seewave.html#topic+ftwindow">ftwindow</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Spectrographic cross-correlation measures frequency distortion of signals as a similarity metric. Values close to 1 means very similar spectrograms (i.e. little signal distortion has occurred). Cross-correlation is measured of signals in which a reference playback has been re-recorded at increasing distances. The 'signal.type' column must be used to indicate the function to only compare signals belonging to the same category (e.g. song-types). The function compares each signal type to the corresponding reference signal within the supplied frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X'). Two methods for calculating cross-correlation are provided (see 'method' argument). The function is a wrapper on warbleR's <code><a href="warbleR.html#topic+cross_correlation">cross_correlation</a></code> function.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but includes a new column (cross.correlation)
with the spectrogram cross-correlation coefficients.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Clark, C.W., Marler, P. &amp; Beeman K. (1987). Quantitative analysis of animal vocal phonology: an application to Swamp Sparrow song. Ethology. 76:101-115. 

</p>


<h3>See Also</h3>

<p><code><a href="#topic+blur_ratio">blur_ratio</a></code>, <code><a href="#topic+spcc_align">spcc_align</a></code>, <code><a href="warbleR.html#topic+cross_correlation">cross_correlation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# method 1
spcc(X = playback_est, method = 1)

# method 2
spcc(X = playback_est, method = 2)
}

</code></pre>

<hr>
<h2 id='spcc_align'>Align start and end of signal using spectrographic cross-correlation</h2><span id='topic+spcc_align'></span>

<h3>Description</h3>

<p><code>spcc_align</code> aligns start and end of signal in an extended selection table using spectrographic cross-correlation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spcc_align(X, parallel = 1, pb = TRUE, hop.size = 11.6, wl = NULL, ovlp = 90, 
wn = 'hanning')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spcc_align_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package. The object must include the following additional columns: 'signal.type', 'bottom.freq' and 'top.freq'.</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying % of overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is 90. High values of ovlp 
slow down the function but produce more accurate results.</p>
</td></tr>
<tr><td><code id="spcc_align_+3A_wn">wn</code></td>
<td>
<p>A character vector of length 1 specifying the window name as in <code><a href="seewave.html#topic+ftwindow">ftwindow</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses spectrographic cross-correlation to align the position in time of signals with regard to a reference signal. The signal recorded at the closest distance to the source is used as reference. Precise alignment is crucial for downstream measures of signal degradation. The function calls warbleR's <code><a href="warbleR.html#topic+cross_correlation">cross_correlation</a></code> internally to align signals using cross-correlation. The output extended selection table contains the new start and end values after alignment.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data in which time parameters (columns 'start' and 'end') have been tailored to more closely match the start and end of the reference signal.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Clark, C.W., Marler, P. &amp; Beeman K. (1987). Quantitative analysis of animal vocal phonology: an application to Swamp Sparrow song. Ethology. 76:101-115. 

</p>


<h3>See Also</h3>

<p><code><a href="#topic+blur_ratio">blur_ratio</a></code>, <code><a href="warbleR.html#topic+cross_correlation">cross_correlation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est_unaligned")

# method 1
spcc_align(X = playback_est_unaligned)
}

</code></pre>

<hr>
<h2 id='spectral_blur_ratio'>Measure blur ratio in the frequency domain</h2><span id='topic+spectral_blur_ratio'></span>

<h3>Description</h3>

<p><code>spectral_blur_ratio</code> measures blur ratio of frequency spectra from signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spectral_blur_ratio(X, parallel = 1, pb = TRUE, method = 1, ssmooth = 50, 
output = "est", img = FALSE, res = 150, hop.size = 11.6, wl = NULL, 
ovlp = 70, pal = reverse.gray.colors.2, collevels = seq(-60, 0, 5), dest.path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spectral_blur_ratio_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' for measuring spectrum correlation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_ssmooth">ssmooth</code></td>
<td>
<p>Numeric vector of length 1 determining the length of the sliding window used for a sum smooth for power spectrum calculation (in kHz). Default is 100.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default), a data frame ('data.frame') or a list (&quot;list&quot;) containing the extended selection table (first object in the list) and all (smoothed) wave envelopes (second object in the list) is returned. The envelope data can be used for plotting.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_img">img</code></td>
<td>
<p>Logical argument to control if image files in 'jpeg' format containing the images being compared and the corresponding spectra are produced. Default is no images ( <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_res">res</code></td>
<td>
<p>Numeric argument of length 1. Controls image resolution. Default is 150 (faster) although 300 - 400 is recommended for publication/presentation quality.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored. Applied to both spectra and spectrograms on image files.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is 70. Applied to both spectra and spectrograms on image files.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_pal">pal</code></td>
<td>
<p>A color palette function to be used to assign colors in the 
plot, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is reverse.gray.colors.2.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_collevels">collevels</code></td>
<td>
<p>Numeric vector indicating a set of levels which are used to partition the amplitude range of the spectrogram (in dB) as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is <code>seq(-60, 0, 5)</code>.</p>
</td></tr>
<tr><td><code id="spectral_blur_ratio_+3A_dest.path">dest.path</code></td>
<td>
<p>Character string containing the directory path where the image files will be saved. If NULL (default) then the folder containing the sound files will be used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Spectral blur ratio measures the degradation of sound as a function of the change in signal energy in the frequency domain, analogous to the blur ratio proposed by Dabelsteen et al (1993) for the time domain (and implemented in <code><a href="#topic+blur_ratio">blur_ratio</a></code>). Low values indicate low degradation of signals. The function measures the blur ratio of spectra from signals in which a reference playback has been re-recorded at different distances. Spectral blur ratio is measured as the mismatch between power spectra (expressed as probability density functions) of the reference signal and the re-recorded signal. The function compares each signal type to the corresponding reference signal. The 'signal.type' column must be used to tell the function to only compare signals belonging to the same category (e.g. song-types). Two methods for setting the experimental design are provided. All wave objects in the extended selection table must have the same sampling rate so the length of spectra is comparable.
</p>


<h3>Value</h3>

<p>Data frame similar to input data, but also includes a new column (spectral.blur.ratio)
with the blur ratio values. If <code>img = TRUE</code> it also returns 1 image file (in 'jpeg' format) for each comparison showing spectrograms of both signals and the overlaid power spectrum (as probability mass functions (PMF)). Spectrograms are shown within the frequency range of the reference signal and also show vertical lines with the start and end of signals to allow users to visually check alignment. If <code>output = 'list'</code> the output would a list including the data frame just described and a data frame with spectra (amplitude values) for all signals.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Dabelsteen, T., Larsen, O. N., &amp; Pedersen, S. B. (1993). Habitat-induced degradation of sound signals: Quantifying the effects of communication sounds and bird location on blur ratio, excess attenuation, and signal-to-noise ratio in blackbird song. The Journal of the Acoustical Society of America, 93(4), 2206.
</p>
<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2

</p>


<h3>See Also</h3>

<p><code><a href="#topic+blur_ratio">blur_ratio</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# remove ambient selections
playback_est &lt;- playback_est[playback_est$signal.type != "ambient", ]

# using method 1
spectral_blur_ratio(X = playback_est)

# using method 2
spectral_blur_ratio(X = playback_est, method = 2)
}

</code></pre>

<hr>
<h2 id='spectral_correlation'>Measure frequency spectral correlation</h2><span id='topic+spectral_correlation'></span>

<h3>Description</h3>

<p><code>spectral_correlation</code> measures frequency spectrum correlation of signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spectral_correlation(X, parallel = 1, pb = TRUE, method = 1, 
cor.method = "pearson", output = "est", 
hop.size = 11.6, wl = NULL, ovlp = 70)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spectral_correlation_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).
If <code>NULL</code> (default) then the current working directory is used.</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_method">method</code></td>
<td>
<p>Numeric vector of length 1 to indicate the 'experimental design' to measure frequency spectrum correlation. Two methods are available:
</p>

<ul>
<li> <p><code>1</code>: compare all signals with their counterpart that was recorded at the closest distance to source (e.g. compare a signal recorded at 5m, 10m and 15m with its counterpart recorded at 1m). This is the default method. 
</p>
</li>
<li> <p><code>2</code>: compare all signals with their counterpart recorded at the distance immediately before (e.g. a signal recorded at 10m compared with the same signal recorded at 5m, then signal recorded at 15m compared with same signal recorded at 10m and so on).
</p>
</li></ul>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_cor.method">cor.method</code></td>
<td>
<p>Character string indicating the correlation coefficient to be applied (&quot;pearson&quot;, &quot;spearman&quot;, or &quot;kendall&quot;, see <code><a href="stats.html#topic+cor">cor</a></code>).</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p>
</td></tr>
<tr><td><code id="spectral_correlation_+3A_ovlp">ovlp</code></td>
<td>
<p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="seewave.html#topic+spectro">spectro</a></code>. Default is 70.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>spectral correlation measures the similarity of two signals in the frequency domain. The function measures the spectral correlation coefficients of signals in which a reference playback has been re-recorded at increasing distances. Values range from 1 (identical frequency spectrum, i.e. no degradation) to 0. The 'signal.type' column must be used to indicate the function to only compare signals belonging to the same category (e.g. song-types). The function will then compare each signal type to the corresponding reference signal. Two methods for calculating spectral correlation are provided (see 'method' argument). Use <code><a href="#topic+spectral_blur_ratio">spectral_blur_ratio</a></code> to get spectra for plotting.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but also includes a new column ('spectrum.correlation')
with the calculated frequency spectrum correlation coefficients.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Apol, C.A., Sturdy, C.B. &amp; Proppe, D.S. (2017). Seasonal variability in habitat structure may have shaped acoustic signals and repertoires in the black-capped and boreal chickadees. Evol Ecol. 32:57-74.

</p>


<h3>See Also</h3>

<p><code><a href="#topic+envelope_correlation">envelope_correlation</a></code>, <code><a href="#topic+spectral_blur_ratio">spectral_blur_ratio</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

# remove ambient selections
pe &lt;- playback_est[playback_est$signal.type != "ambient", ]

# method 1
spectral_correlation(X = pe)

# method 2
spectral_correlation(X = pe, method = 2)
}

</code></pre>

<hr>
<h2 id='tail_to_signal_ratio'>Measure reverberations as tail-to-signal ratio</h2><span id='topic+tail_to_signal_ratio'></span>

<h3>Description</h3>

<p><code>tail_to_signal_ratio</code> measures reverberations as tail-to-signal ratio of signals referenced in an extended selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tail_to_signal_ratio(X, mar, parallel = 1, pb = TRUE,  type = 1, 
bp = 'freq.range', output = "est", hop.size = 1, wl = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tail_to_signal_ratio_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' created by the function <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_mar">mar</code></td>
<td>
<p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure ambient noise.</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_parallel">parallel</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_type">type</code></td>
<td>
<p>Numeric. Determine the formula to be used to calculate the tail-to-signal ratio (S = signal, T = tail, N = background noise): 
</p>

<ul>
<li> <p><code>1</code>: ratio of T amplitude envelope quadratic mean to S amplitude envelope quadratic mean
(<code>rms(env(T))/rms(env(S))</code>) as described by Dabelsteen et al. (1993).
</p>
</li>
<li> <p><code>2</code>: ratio of T amplitude envelope quadratic mean to N amplitude envelope quadratic mean (<code>rms(env(T))/rms(env(N))</code>). N is measure in the margin right before the signal. So type 2 actually measures tail-to-noise ratio.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_bp">bp</code></td>
<td>
<p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Alternatively, when set to 'freq.range' (default), which will make the function use the 'bottom.freq' and 'top.freq' as the bandpass range.</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_output">output</code></td>
<td>
<p>Character vector of length 1 to determine if an extended selection table ('est', default) or a data frame ('data.frame').</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_hop.size">hop.size</code></td>
<td>
<p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 1 ms, which is equivalent to ~45 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p>
</td></tr>
<tr><td><code id="tail_to_signal_ratio_+3A_wl">wl</code></td>
<td>
<p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. Ignored if <code>bp = NULL</code>. If supplied, 'hop.size' is ignored.
Note that lower values will increase time resolution, which is more important for amplitude ratio calculations.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Tail-to-signal ratio (TSR) measures ratio of energy in the tail of reverberations to energy in the signal. A general margin in which reverberation tail will be measured must be specified. The function will measure TSR within the supplied frequency range (e.g. bandpass) of the reference signal ('bottom.freq' and 'top.freq' columns in 'X'). Two methods for calculating reverberations are provided (see 'type' argument). Note that 'type' 2 is not equivalent to the original description of TSR in Dabelsteen et al. (1993) and  is better referred to as tail-to-noise ratio.
</p>


<h3>Value</h3>

<p>Extended selection table similar to input data, but also includes a new column (tail.to.signal.ratio)
with the tail-to-signal ratio values.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying habitat-induced degradation of (animal) acoustic signals in R. R package version 1.0.2
</p>
<p>Dabelsteen, T., Larsen, O. N., &amp; Pedersen, S. B. (1993). Habitat-induced degradation of sound signals: Quantifying the effects of communication sounds and bird location on blur ratio, excess attenuation, and signal-to-noise ratio in blackbird song. The Journal of the Acoustical Society of America, 93(4), 2206.
</p>
<p>Darden, SK, Pedersen SB, Larsen ON, &amp; Dabelsteen T. (2008). Sound transmission at ground level in a short-grass prairie habitat and its implications for long-range communication in the swift fox *Vulpes velox*. The Journal of the Acoustical Society of America, 124(2), 758-766.
</p>



<h3>See Also</h3>

<p><code><a href="#topic+excess_attenuation">excess_attenuation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load example data
data("playback_est")

 # remove noise selections
 pe &lt;- playback_est[playback_est$signal.type != "ambient", ]
 
 # using margin for noise of 0.01
 tail_to_signal_ratio(X = pe, mar = 0.01, bp = NULL)
 
 # tail-to-noise ratio (type 2)
 tail_to_signal_ratio(X = playback_est, mar = 0.01, type = 2)
}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
