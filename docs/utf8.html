<!DOCTYPE html><html><head><title>Help for package utf8</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {utf8}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#utf8-package'>
<p>The utf8 Package</p></a></li>
<li><a href='#as_utf8'><p>UTF-8 Character Encoding</p></a></li>
<li><a href='#output_utf8'><p>Output Capabilities</p></a></li>
<li><a href='#utf8_encode'><p>Encode Character Object as for UTF-8 Printing</p></a></li>
<li><a href='#utf8_format'><p>UTF-8 Text Formatting</p></a></li>
<li><a href='#utf8_normalize'><p>Text Normalization</p></a></li>
<li><a href='#utf8_print'><p>Print UTF-8 Text</p></a></li>
<li><a href='#utf8_width'><p>Measure the Character String Width</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Unicode Text Processing</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Process and print 'UTF-8' encoded international
    text (Unicode). Input, validate, normalize, encode, format, and
    display.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (== 2.0)</a> | file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ptrckprry.com/r-utf8/">https://ptrckprry.com/r-utf8/</a>, <a href="https://github.com/patperry/r-utf8">https://github.com/patperry/r-utf8</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/patperry/r-utf8/issues">https://github.com/patperry/r-utf8/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>cli, covr, knitr, rlang, rmarkdown, testthat (&ge; 3.0.0),
withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-22 13:43:19 UTC; kirill</td>
</tr>
<tr>
<td>Author:</td>
<td>Patrick O. Perry [aut, cph],
  Kirill Müller [cre],
  Unicode, Inc. [cph, dtc] (Unicode Character Database)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kirill Müller &lt;kirill@cynkra.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-22 21:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='utf8-package'>
The utf8 Package
</h2><span id='topic+utf8-package'></span><span id='topic+utf8'></span>

<h3>Description</h3>

<p>UTF-8 Text Processing
</p>


<h3>Details</h3>

<p>Functions for manipulating and printing UTF-8 encoded text:
</p>

<ul>
<li> <p><code><a href="#topic+as_utf8">as_utf8</a></code> attempts to convert character data to UTF-8,
throwing an error if the data is invalid;
</p>
</li>
<li> <p><code><a href="#topic+utf8_valid">utf8_valid</a></code> tests whether character data is valid
according to its declared encoding;
</p>
</li>
<li> <p><code><a href="#topic+utf8_normalize">utf8_normalize</a></code> converts text to Unicode composed
normal form (NFC), optionally applying case-folding and compatibility
maps;
</p>
</li>
<li> <p><code><a href="#topic+utf8_encode">utf8_encode</a></code> encodes a character string, escaping all
control characters, so that it can be safely printed to the screen;
</p>
</li>
<li> <p><code><a href="#topic+utf8_format">utf8_format</a></code> formats a character vector by truncating
to a specified character width limit or by left, right, or center
justifying;
</p>
</li>
<li> <p><code><a href="#topic+utf8_print">utf8_print</a></code> prints UTF-8 character data to the screen;
</p>
</li>
<li> <p><code><a href="#topic+utf8_width">utf8_width</a></code> measures the display width of UTF-8 character
strings (many emoji and East Asian characters are twice as wide as other
characters);
</p>
</li>
<li> <p><code><a href="#topic+output_ansi">output_ansi</a></code> and <code><a href="#topic+output_utf8">output_utf8</a></code> test for
the output connections capabilities.
</p>
</li></ul>

<p>For a complete list of functions, use <code>library(help = "utf8")</code>.
</p>


<h3>Author(s)</h3>

<p>Patrick O. Perry
</p>

<hr>
<h2 id='as_utf8'>UTF-8 Character Encoding</h2><span id='topic+as_utf8'></span><span id='topic+utf8_valid'></span>

<h3>Description</h3>

<p>UTF-8 text encoding and validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_utf8(x, normalize = FALSE)

utf8_valid(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_utf8_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="as_utf8_+3A_normalize">normalize</code></td>
<td>
<p>a logical value indicating whether to convert to
Unicode composed normal form (NFC).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>as_utf8</code> converts a character object from its declared encoding
to a valid UTF-8 character object, or throws an error if no conversion
is possible. If <code>normalize = TRUE</code>, then the text gets
transformed to Unicode composed normal form (NFC) after conversion
to UTF-8.
</p>
<p><code>utf8_valid</code> tests whether the elements of a character object
can be translated to valid UTF-8 strings.
</p>


<h3>Value</h3>

<p>For <code>as_utf8</code>, the result is a character object with the same
attributes as <code>x</code> but with <code>Encoding</code> set to <code>"UTF-8"</code>.
</p>
<p>For <code>utf8_valid</code> a logical object with the same <code>names</code>,
<code>dim</code>, and <code>dimnames</code> as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+utf8_normalize">utf8_normalize</a></code>, <code><a href="base.html#topic+iconv">iconv</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the second element is encoded in latin-1, but declared as UTF-8
x &lt;- c("fa\u00E7ile", "fa\xE7ile", "fa\xC3\xA7ile")
Encoding(x) &lt;- c("UTF-8", "UTF-8", "bytes")

# attempt to convert to UTF-8 (fails)
## Not run: as_utf8(x)

y &lt;- x
Encoding(y[2]) &lt;- "latin1" # mark the correct encoding
as_utf8(y) # succeeds

# test for valid UTF-8
utf8_valid(x)
</code></pre>

<hr>
<h2 id='output_utf8'>Output Capabilities</h2><span id='topic+output_ansi'></span><span id='topic+output_utf8'></span>

<h3>Description</h3>

<p>Test whether the output connection has ANSI style escape support
or UTF-8 support.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>output_ansi()

output_utf8()
</code></pre>


<h3>Details</h3>

<p><code>output_ansi</code> tests whether the output connection supports ANSI
style escapes. This is <code>TRUE</code> if the connection is a terminal
and not the Windows GUI. Otherwise, it is true if running in
RStudio 1.1 or later with ANSI escapes enabled, provided <code>stdout()</code>
has not been redirected to another connection by <code>sink()</code>.
</p>
<p><code>output_utf8</code> tests whether the output connection supports UTF-8. For
most platforms <code>l10n_info()$`UTF-8`</code> gives this information, but this
does not give an accurate result for Windows GUIs. To work around this,
we proceed as follows:
</p>

<ul>
<li><p> if the character locale (<code>LC_CTYPE</code>) is <code>"C"</code>, then
the result is <code>FALSE</code>;
</p>
</li>
<li><p> otherwise, if <code>l10n_info()$`UTF-8`</code> is <code>TRUE</code>,
then the result is <code>TRUE</code>;
</p>
</li>
<li><p> if running on Windows, then the result is <code>TRUE</code>;
</p>
</li>
<li><p> in all other cases the result is <code>FALSE</code>.
</p>
</li></ul>

<p>Strictly speaking, UTF-8 support is always available on Windows GUI,
but only a subset of UTF-8 is available (defined by the current character
locale) when the output is redirected by <code>knitr</code> or another process.
Unfortunately, it is impossible to set the character locale to UTF-8 on
Windows. Further, the <code>utf8</code> package only handles two character
locales: C and UTF-8.  To get around this, on Windows, we treat all
non-C locales on that platform as UTF-8. This liberal approach means that
characters in the user's locale never get escaped; others will get output
as <code>&lt;U+XXXX&gt;</code>, with incorrect values for <code>utf8_width</code>.
</p>


<h3>Value</h3>

<p>A logical scalar indicating whether the output connection supports the
given capability.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+.Platform">.Platform</a></code>, <code><a href="base.html#topic+isatty">isatty</a></code>, <code><a href="base.html#topic+l10n_info">l10n_info</a></code>,
<code><a href="base.html#topic+Sys.getlocale">Sys.getlocale</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># test whether ANSI style escapes or UTF-8 output are supported
cat("ANSI:", output_ansi(), "\n")
cat("UTF8:", output_utf8(), "\n")

# switch to C locale
Sys.setlocale("LC_CTYPE", "C")
cat("ANSI:", output_ansi(), "\n")
cat("UTF8:", output_utf8(), "\n")

# switch to native locale
Sys.setlocale("LC_CTYPE", "")

tmp &lt;- tempfile()
sink(tmp) # redirect output to a file
cat("ANSI:", output_ansi(), "\n")
cat("UTF8:", output_utf8(), "\n")
sink() # restore stdout

# inspect the output
readLines(tmp)
</code></pre>

<hr>
<h2 id='utf8_encode'>Encode Character Object as for UTF-8 Printing</h2><span id='topic+utf8_encode'></span>

<h3>Description</h3>

<p>Escape the strings in a character object, optionally adding
quotes or spaces, adjusting the width for display.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utf8_encode(x, width = 0L, quote = FALSE, justify = "left", escapes = NULL,
            display = FALSE, utf8 = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utf8_encode_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_width">width</code></td>
<td>
<p>integer giving the minimum field width; specify
<code>NULL</code> or <code>NA</code> for no minimum.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_quote">quote</code></td>
<td>
<p>logical scalar indicating whether to surround results
with double-quotes and escape internal double-quotes.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_justify">justify</code></td>
<td>
<p>justification; one of <code>"left"</code>, <code>"right"</code>,
<code>"centre"</code>, or <code>"none"</code>. Can be abbreviated.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_escapes">escapes</code></td>
<td>
<p>a character string specifying the display style for
the backslash escapes, as an ANSI SGR parameter string,
or NULL for no styling.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_display">display</code></td>
<td>
<p>logical scalar indicating whether to optimize the
encoding for display, not byte-for-byte data transmission.</p>
</td></tr>
<tr><td><code id="utf8_encode_+3A_utf8">utf8</code></td>
<td>
<p>logical scalar indicating whether to encode for a UTF-8
capable display (ASCII-only otherwise), or <code>NULL</code> to
encode for output capabilities as determined by
<code>output_utf8()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>utf8_encode</code> encodes a character object for printing on a UTF-8
device by escaping controls characters and other non-printable
characters. When <code>display = TRUE</code>, the function optimizes the
encoding for display by removing default ignorable characters (soft
hyphens, zero-width spaces, etc.) and placing zero-width spaces after
wide emoji. When <code>output_utf8()</code> is <code>FALSE</code> the function
escapes all non-ASCII characters and gives the same results on all
platforms.
</p>


<h3>Value</h3>

<p>A character object with the same attributes as <code>x</code> but with
<code>Encoding</code> set to <code>"UTF-8"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+utf8_print">utf8_print</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the second element is encoded in latin-1, but declared as UTF-8
x &lt;- c("fa\u00E7ile", "fa\xE7ile", "fa\xC3\xA7ile")
Encoding(x) &lt;- c("UTF-8", "UTF-8", "bytes")

# encoding
utf8_encode(x)

# add style to the escapes
cat(utf8_encode("hello\nstyled\\world", escapes = "1"), "\n")
</code></pre>

<hr>
<h2 id='utf8_format'>UTF-8 Text Formatting</h2><span id='topic+utf8_format'></span>

<h3>Description</h3>

<p>Format a character object for UTF-8 printing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utf8_format(x, trim = FALSE, chars = NULL, justify = "left",
            width = NULL, na.encode = TRUE, quote = FALSE,
            na.print = NULL, print.gap = NULL, utf8 = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utf8_format_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_trim">trim</code></td>
<td>
<p>logical scalar indicating whether to suppress padding
spaces around elements.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_chars">chars</code></td>
<td>
<p>integer scalar indicating the maximum number of
character units to display.  Wide characters like emoji take
two character units; combining marks and default ignorables
take none. Longer strings get truncated and suffixed or prefixed
with an ellipsis (<code>"..."</code> or <code>"\u2026"</code>, whichever is most
appropriate for the current character locale). Set to <code>NULL</code> to
limit output to the line width as determined by
<code>getOption("width")</code>.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_justify">justify</code></td>
<td>
<p>justification; one of <code>"left"</code>, <code>"right"</code>,
<code>"centre"</code>, or <code>"none"</code>. Can be abbreviated.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_width">width</code></td>
<td>
<p>the minimum field width; set to <code>NULL</code> or
<code>0</code> for no restriction.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_na.encode">na.encode</code></td>
<td>
<p>logical scalar indicating whether to encode
<code>NA</code> values as character strings.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_quote">quote</code></td>
<td>
<p>logical scalar indicating whether to format for a context
with surrounding double-quotes (<code>'"'</code>) and escaped internal
double-quotes.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_na.print">na.print</code></td>
<td>
<p>character string (or <code>NULL</code>) indicating the
encoding for <code>NA</code> values. Ignored when <code>na.encode</code>
is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_print.gap">print.gap</code></td>
<td>
<p>non-negative integer (or <code>NULL</code>) giving the
number of spaces in gaps between columns; set to <code>NULL</code>
or <code>1</code> for a single space.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_utf8">utf8</code></td>
<td>
<p>logical scalar indicating whether to format for a UTF-8
capable display (ASCII-only otherwise), or <code>NULL</code> to
format for output capabilities as determined by <code>output_utf8()</code>.</p>
</td></tr>
<tr><td><code id="utf8_format_+3A_...">...</code></td>
<td>
<p>further arguments passed from other methods. Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>utf8_format</code> formats a character object for printing, optionally
truncating long character strings.
</p>


<h3>Value</h3>

<p>A character object with the same attributes as <code>x</code> but with
<code>Encoding</code> set to <code>"UTF-8"</code> for elements that can be
converted to valid UTF-8 and <code>"bytes"</code> for others.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+utf8_print">utf8_print</a></code>, <code><a href="#topic+utf8_encode">utf8_encode</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the second element is encoded in latin-1, but declared as UTF-8
x &lt;- c("fa\u00E7ile", "fa\xE7ile", "fa\xC3\xA7ile")
Encoding(x) &lt;- c("UTF-8", "UTF-8", "bytes")

# formatting
utf8_format(x, chars = 3)
utf8_format(x, chars = 3, justify = "centre", width = 10)
utf8_format(x, chars = 3, justify = "right")
</code></pre>

<hr>
<h2 id='utf8_normalize'>Text Normalization</h2><span id='topic+utf8_normalize'></span>

<h3>Description</h3>

<p>Transform text to normalized form, optionally mapping to lowercase
and applying compatibility maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utf8_normalize(x, map_case = FALSE, map_compat = FALSE,
               map_quote = FALSE, remove_ignorable = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utf8_normalize_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="utf8_normalize_+3A_map_case">map_case</code></td>
<td>
<p>a logical value indicating whether to apply Unicode
case mapping to the text. For most languages, this transformation
changes uppercase characters to their lowercase equivalents.</p>
</td></tr>
<tr><td><code id="utf8_normalize_+3A_map_compat">map_compat</code></td>
<td>
<p>a logical value indicating whether to apply
Unicode compatibility mappings to the characters, those required
for NFKC and NFKD normal forms.</p>
</td></tr>
<tr><td><code id="utf8_normalize_+3A_map_quote">map_quote</code></td>
<td>
<p>a logical value indicating whether to replace curly
single quotes and Unicode apostrophe characters with ASCII
apostrophe (U+0027).</p>
</td></tr>
<tr><td><code id="utf8_normalize_+3A_remove_ignorable">remove_ignorable</code></td>
<td>
<p>a logical value indicating whether to remove
Unicode &quot;default ignorable&quot; characters like zero-width spaces
and soft hyphens.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>utf8_normalize</code> converts the elements of a character object to
Unicode normalized composed form (NFC) while applying the character
maps specified by the <code>map_case</code>, <code>map_compat</code>,
<code>map_quote</code>, and <code>remove_ignorable</code> arguments.
</p>


<h3>Value</h3>

<p>The result is a character object with the same attributes as <code>x</code>
but with <code>Encoding</code> set to <code>"UTF-8"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as_utf8">as_utf8</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>angstrom &lt;- c("\u00c5", "\u0041\u030a", "\u212b")
utf8_normalize(angstrom) == "\u00c5"
</code></pre>

<hr>
<h2 id='utf8_print'>Print UTF-8 Text</h2><span id='topic+utf8_print'></span>

<h3>Description</h3>

<p>Print a UTF-8 character object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utf8_print(x, chars = NULL, quote = TRUE, na.print = NULL,
           print.gap = NULL, right = FALSE, max = NULL,
           names = NULL, rownames = NULL, escapes = NULL,
           display = TRUE, style = TRUE, utf8 = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utf8_print_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_chars">chars</code></td>
<td>
<p>integer scalar indicating the maximum number of
character units to display.  Wide characters like emoji take
two character units; combining marks and default ignorables
take none. Longer strings get truncated and suffixed or prefixed
with an ellipsis (<code>"..."</code> in C locale, <code>"\u2026"</code> in
others). Set to <code>NULL</code> to limit output to the line width
as determined by <code>getOption("width")</code>.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_quote">quote</code></td>
<td>
<p>logical scalar indicating whether to put surrounding
double-quotes (<code>'"'</code>) around character strings and escape
internal double-quotes.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_na.print">na.print</code></td>
<td>
<p>character string (or <code>NULL</code>) indicating
the encoding for <code>NA</code> values. Ignored when
<code>na.encode</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_print.gap">print.gap</code></td>
<td>
<p>non-negative integer (or <code>NULL</code>) giving the
number of spaces in gaps between columns; set to <code>NULL</code>
or <code>1</code> for a single space.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_right">right</code></td>
<td>
<p>logical scalar indicating whether to right-justify
character strings.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_max">max</code></td>
<td>
<p>non-negative integer (or <code>NULL</code>) indicating the
maximum number of elements to print; set to
<code>getOption("max.print")</code> if argument is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_names">names</code></td>
<td>
<p>a character string specifying the display style for
the (column) names, as an ANSI SGR parameter string.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_rownames">rownames</code></td>
<td>
<p>a character string specifying the display style for
the row names, as an ANSI SGR parameter string.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_escapes">escapes</code></td>
<td>
<p>a character string specifying the display style for
the backslash escapes, as an ANSI SGR parameter string.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_display">display</code></td>
<td>
<p>logical scalar indicating whether to optimize the
encoding for display, not byte-for-byte data transmission.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_style">style</code></td>
<td>
<p>logical scalar indicating whether to apply ANSI
terminal escape codes to style the output.  Ignored when
<code>output_ansi()</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_utf8">utf8</code></td>
<td>
<p>logical scalar indicating whether to optimize results
for a UTF-8 capable display, or <code>NULL</code> to set as the
result of <code>output_utf8()</code>. Ignored when <code>output_utf8()</code>
is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="utf8_print_+3A_...">...</code></td>
<td>
<p>further arguments passed from other methods. Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>utf8_print</code> prints a character object after formatting it with
<code>utf8_format</code>.
</p>
<p>For ANSI terminal output (when <code>output_ansi()</code> is <code>TRUE</code>),
you can style the row and column names with the <code>rownames</code> and
<code>names</code> parameters, specifying an ANSI SGR parameter string; see
<a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_(Select_Graphic_Rendition)_parameters">https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_(Select_Graphic_Rendition)_parameters</a>.
</p>


<h3>Value</h3>

<p>The function returns <code>x</code> invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+utf8_format">utf8_format</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># printing (assumes that output is capable of displaying Unicode 10.0.0)
print(intToUtf8(0x1F600 + 0:79)) # with default R print function
utf8_print(intToUtf8(0x1F600 + 0:79)) # with utf8_print, truncates line
utf8_print(intToUtf8(0x1F600 + 0:79), chars = 1000) # higher character limit

# in C locale, output ASCII (same results on all platforms)
oldlocale &lt;- Sys.getlocale("LC_CTYPE")
invisible(Sys.setlocale("LC_CTYPE", "C")) # switch to C locale
utf8_print(intToUtf8(0x1F600 + 0:79))
invisible(Sys.setlocale("LC_CTYPE", oldlocale)) # switch back to old locale

# Mac and Linux only: style the names
# see https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_(Select_Graphic_Rendition)_parameters
utf8_print(matrix(as.character(1:20), 4, 5),
           names = "1;4", rownames = "2;3")
</code></pre>

<hr>
<h2 id='utf8_width'>Measure the Character String Width</h2><span id='topic+utf8_width'></span>

<h3>Description</h3>

<p>Compute the display widths of the elements of a character object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utf8_width(x, encode = TRUE, quote = FALSE, utf8 = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utf8_width_+3A_x">x</code></td>
<td>
<p>character object.</p>
</td></tr>
<tr><td><code id="utf8_width_+3A_encode">encode</code></td>
<td>
<p>whether to encode the object before measuring its
width.</p>
</td></tr>
<tr><td><code id="utf8_width_+3A_quote">quote</code></td>
<td>
<p>whether to quote the object before measuring its
width.</p>
</td></tr>
<tr><td><code id="utf8_width_+3A_utf8">utf8</code></td>
<td>
<p>logical scalar indicating whether to determine widths
assuming a UTF-8 capable display (ASCII-only otherwise), or
<code>NULL</code> to format for output capabilities as determined
by <code>output_utf8()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>utf8_width</code> returns the printed widths of the elements of
a character object on a UTF-8 device (or on an ASCII device
when <code>output_utf8()</code> is <code>FALSE</code>), when printed with
<code>utf8_print</code>. If the string is not printable on the device,
for example if it contains a control code like <code>"\n"</code>, then
the result is <code>NA</code>. If <code>encode = TRUE</code>, the default,
then the function returns the widths of the encoded elements
via <code>utf8_encode</code>); otherwise, the function returns the
widths of the original elements.
</p>


<h3>Value</h3>

<p>An integer object,  with the same <code>names</code>, <code>dim</code>, and
<code>dimnames</code> as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+utf8_print">utf8_print</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the second element is encoded in latin-1, but declared as UTF-8
x &lt;- c("fa\u00E7ile", "fa\xE7ile", "fa\xC3\xA7ile")
Encoding(x) &lt;- c("UTF-8", "UTF-8", "bytes")

# get widths
utf8_width(x)
utf8_width(x, encode = FALSE)
utf8_width('"')
utf8_width('"', quote = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
