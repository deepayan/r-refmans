<!DOCTYPE html><html><head><title>Help for package forcats</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {forcats}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#forcats-package'><p>forcats: Tools for Working with Categorical Variables (Factors)</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#as_factor'><p>Convert input to a factor</p></a></li>
<li><a href='#fct'><p>Create a factor</p></a></li>
<li><a href='#fct_anon'><p>Anonymise factor levels</p></a></li>
<li><a href='#fct_c'><p>Concatenate factors, combining levels</p></a></li>
<li><a href='#fct_collapse'><p>Collapse factor levels into manually defined groups</p></a></li>
<li><a href='#fct_count'><p>Count entries in a factor</p></a></li>
<li><a href='#fct_cross'><p>Combine levels from two or more factors to create a new factor</p></a></li>
<li><a href='#fct_drop'><p>Drop unused levels</p></a></li>
<li><a href='#fct_expand'><p>Add additional levels to a factor</p></a></li>
<li><a href='#fct_explicit_na'><p>Make missing values explicit</p></a></li>
<li><a href='#fct_inorder'><p>Reorder factor levels by first appearance, frequency, or numeric order</p></a></li>
<li><a href='#fct_lump'><p>Lump uncommon factor together levels into &quot;other&quot;</p></a></li>
<li><a href='#fct_match'><p>Test for presence of levels in a factor</p></a></li>
<li><a href='#fct_na_value_to_level'><p>Convert between <code>NA</code> values and <code>NA</code> levels</p></a></li>
<li><a href='#fct_other'><p>Manually replace levels with &quot;other&quot;</p></a></li>
<li><a href='#fct_recode'><p>Change factor levels by hand</p></a></li>
<li><a href='#fct_relabel'><p>Relabel factor levels with a function, collapsing as necessary</p></a></li>
<li><a href='#fct_relevel'><p>Reorder factor levels by hand</p></a></li>
<li><a href='#fct_reorder'><p>Reorder factor levels by sorting along another variable</p></a></li>
<li><a href='#fct_rev'><p>Reverse order of factor levels</p></a></li>
<li><a href='#fct_shift'><p>Shift factor levels to left or right, wrapping around at end</p></a></li>
<li><a href='#fct_shuffle'><p>Randomly permute factor levels</p></a></li>
<li><a href='#fct_unify'><p>Unify the levels in a list of factors</p></a></li>
<li><a href='#fct_unique'><p>Unique values of a factor, as a factor</p></a></li>
<li><a href='#gss_cat'><p>A sample of categorical variables from the General Social survey</p></a></li>
<li><a href='#lvls'><p>Low-level functions for manipulating levels</p></a></li>
<li><a href='#lvls_union'><p>Find all levels in a list of factors</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Tools for Working with Categorical Variables (Factors)</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Helpers for reordering factor levels (including moving
    specified levels to front, ordering by first appearance, reversing,
    and randomly shuffling), and tools for modifying factor levels
    (including collapsing rare levels into other, 'anonymising', and
    manually 'recoding').</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://forcats.tidyverse.org/">https://forcats.tidyverse.org/</a>,
<a href="https://github.com/tidyverse/forcats">https://github.com/tidyverse/forcats</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidyverse/forcats/issues">https://github.com/tidyverse/forcats/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.4.0), glue, lifecycle, magrittr, rlang (&ge; 1.0.0),
tibble</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, dplyr, ggplot2, knitr, readr, rmarkdown, testthat (&ge;
3.0.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-27 14:11:11 UTC; hadleywickham</td>
</tr>
<tr>
<td>Author:</td>
<td>Hadley Wickham [aut, cre],
  RStudio [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hadley Wickham &lt;hadley@rstudio.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-29 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='forcats-package'>forcats: Tools for Working with Categorical Variables (Factors)</h2><span id='topic+forcats'></span><span id='topic+forcats-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Helpers for reordering factor levels (including moving specified levels to front, ordering by first appearance, reversing, and randomly shuffling), and tools for modifying factor levels (including collapsing rare levels into other, 'anonymising', and manually 'recoding').
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Hadley Wickham <a href="mailto:hadley@rstudio.com">hadley@rstudio.com</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> RStudio [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://forcats.tidyverse.org/">https://forcats.tidyverse.org/</a>
</p>
</li>
<li> <p><a href="https://github.com/tidyverse/forcats">https://github.com/tidyverse/forcats</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/tidyverse/forcats/issues">https://github.com/tidyverse/forcats/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code><a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='as_factor'>Convert input to a factor</h2><span id='topic+as_factor'></span><span id='topic+as_factor.factor'></span><span id='topic+as_factor.character'></span><span id='topic+as_factor.numeric'></span><span id='topic+as_factor.logical'></span>

<h3>Description</h3>

<p>Compared to base R, when <code>x</code> is a character, this function creates
levels in the order in which they appear, which will be the same on every
platform. (Base R sorts in the current locale which can vary from place
to place.) When <code>x</code> is numeric, the ordering is based on the numeric
value and consistent with base R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_factor(x, ...)

## S3 method for class 'factor'
as_factor(x, ...)

## S3 method for class 'character'
as_factor(x, ...)

## S3 method for class 'numeric'
as_factor(x, ...)

## S3 method for class 'logical'
as_factor(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_factor_+3A_x">x</code></td>
<td>
<p>Object to coerce to a factor.</p>
</td></tr>
<tr><td><code id="as_factor_+3A_...">...</code></td>
<td>
<p>Other arguments passed down to method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a generic function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Character object
x &lt;- c("a", "z", "g")
as_factor(x)
as.factor(x)

# Character object containing numbers
y &lt;- c("1.1", "11", "2.2", "22")
as_factor(y)
as.factor(y)

# Numeric object
z &lt;- as.numeric(y)
as_factor(z)
as.factor(z)
</code></pre>

<hr>
<h2 id='fct'>Create a factor</h2><span id='topic+fct'></span>

<h3>Description</h3>

<p><code>fct()</code> is a stricter version of <code><a href="base.html#topic+factor">factor()</a></code> that errors if your
specification of <code>levels</code> is inconsistent with the values in <code>x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct(x = character(), levels = NULL, na = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_+3A_x">x</code></td>
<td>
<p>A character vector. Values must occur in either <code>levels</code> or <code>na</code>.</p>
</td></tr>
<tr><td><code id="fct_+3A_levels">levels</code></td>
<td>
<p>A character vector of known levels. If not supplied, will
be computed from the unique values of <code>x</code>, in the order in which they
occur.</p>
</td></tr>
<tr><td><code id="fct_+3A_na">na</code></td>
<td>
<p>A character vector of values that should become missing values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use factors when you know the set of possible values a variable might take
x &lt;- c("A", "O", "O", "AB", "A")
fct(x, levels = c("O", "A", "B", "AB"))

# If you don't specify the levels, fct will create from the data
# in the order that they're seen
fct(x)


# Differences with base R -----------------------------------------------
# factor() silently generates NAs
x &lt;- c("a", "b", "c")
factor(x, levels = c("a", "b"))
# fct() errors
try(fct(x, levels = c("a", "b")))
# Unless you explicitly supply NA:
fct(x, levels = c("a", "b"), na = "c")

# factor() sorts default levels:
factor(c("y", "x"))
# fct() uses in order of appearance:
fct(c("y", "x"))
</code></pre>

<hr>
<h2 id='fct_anon'>Anonymise factor levels</h2><span id='topic+fct_anon'></span>

<h3>Description</h3>

<p>Replaces factor levels with arbitrary numeric identifiers. Neither
the values nor the order of the levels are preserved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_anon(f, prefix = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_anon_+3A_f">f</code></td>
<td>
<p>A factor.</p>
</td></tr>
<tr><td><code id="fct_anon_+3A_prefix">prefix</code></td>
<td>
<p>A character prefix to insert in front of the random labels.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>gss_cat$relig %&gt;% fct_count()
gss_cat$relig %&gt;%
  fct_anon() %&gt;%
  fct_count()
gss_cat$relig %&gt;%
  fct_anon("X") %&gt;%
  fct_count()
</code></pre>

<hr>
<h2 id='fct_c'>Concatenate factors, combining levels</h2><span id='topic+fct_c'></span>

<h3>Description</h3>

<p>This is a useful way of patching together factors from multiple sources
that really should have the same levels but don't.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_c(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_c_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Individual
factors. Uses tidy dots, so you can splice in a list of factors
with <code style="white-space: pre;">&#8288;!!!&#8288;</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>fa &lt;- factor("a")
fb &lt;- factor("b")
fab &lt;- factor(c("a", "b"))

c(fa, fb, fab)
fct_c(fa, fb, fab)

# You can also pass a list of factors with !!!
fs &lt;- list(fa, fb, fab)
fct_c(!!!fs)
</code></pre>

<hr>
<h2 id='fct_collapse'>Collapse factor levels into manually defined groups</h2><span id='topic+fct_collapse'></span>

<h3>Description</h3>

<p>Collapse factor levels into manually defined groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_collapse(.f, ..., other_level = NULL, group_other = "DEPRECATED")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_collapse_+3A_.f">.f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_collapse_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A series of named character vectors. The levels in
each vector will be replaced with the name.</p>
</td></tr>
<tr><td><code id="fct_collapse_+3A_other_level">other_level</code></td>
<td>
<p>Value of level used for &quot;other&quot; values. Always
placed at end of levels.</p>
</td></tr>
<tr><td><code id="fct_collapse_+3A_group_other">group_other</code></td>
<td>
<p>Deprecated. Replace all levels not named in <code>...</code> with &quot;Other&quot;?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>fct_count(gss_cat$partyid)

partyid2 &lt;- fct_collapse(gss_cat$partyid,
  missing = c("No answer", "Don't know"),
  other = "Other party",
  rep = c("Strong republican", "Not str republican"),
  ind = c("Ind,near rep", "Independent", "Ind,near dem"),
  dem = c("Not str democrat", "Strong democrat")
)
fct_count(partyid2)
</code></pre>

<hr>
<h2 id='fct_count'>Count entries in a factor</h2><span id='topic+fct_count'></span>

<h3>Description</h3>

<p>Count entries in a factor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_count(f, sort = FALSE, prop = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_count_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_count_+3A_sort">sort</code></td>
<td>
<p>If <code>TRUE</code>, sort the result so that the most common values
float to the top.</p>
</td></tr>
<tr><td><code id="fct_count_+3A_prop">prop</code></td>
<td>
<p>If <code>TRUE</code>, compute the fraction of marginal table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with columns <code>f</code>, <code>n</code> and <code>p</code>, if prop is <code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(sample(letters)[rpois(1000, 10)])
table(f)
fct_count(f)
fct_count(f, sort = TRUE)
fct_count(f, sort = TRUE, prop = TRUE)
</code></pre>

<hr>
<h2 id='fct_cross'>Combine levels from two or more factors to create a new factor</h2><span id='topic+fct_cross'></span>

<h3>Description</h3>

<p>Computes a factor whose levels are all the combinations of the levels of the input factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_cross(..., sep = ":", keep_empty = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_cross_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Additional factors
or character vectors.</p>
</td></tr>
<tr><td><code id="fct_cross_+3A_sep">sep</code></td>
<td>
<p>A character string to separate the levels</p>
</td></tr>
<tr><td><code id="fct_cross_+3A_keep_empty">keep_empty</code></td>
<td>
<p>If TRUE, keep combinations with no observations as levels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The new factor
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fruit &lt;- factor(c("apple", "kiwi", "apple", "apple"))
colour &lt;- factor(c("green", "green", "red", "green"))
eaten &lt;- c("yes", "no", "yes", "no")
fct_cross(fruit, colour)
fct_cross(fruit, colour, eaten)
fct_cross(fruit, colour, keep_empty = TRUE)
</code></pre>

<hr>
<h2 id='fct_drop'>Drop unused levels</h2><span id='topic+fct_drop'></span>

<h3>Description</h3>

<p>Compared to <code>base::droplevels()</code>, does not drop <code>NA</code> levels that have values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_drop(f, only = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_drop_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_drop_+3A_only">only</code></td>
<td>
<p>A character vector restricting the set of levels to be dropped.
If supplied, only levels that have no entries and appear in this vector
will be removed.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+fct_expand">fct_expand()</a></code> to add additional levels to a factor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("a", "b"), levels = c("a", "b", "c"))
f
fct_drop(f)

# Set only to restrict which levels to drop
fct_drop(f, only = "a")
fct_drop(f, only = "c")
</code></pre>

<hr>
<h2 id='fct_expand'>Add additional levels to a factor</h2><span id='topic+fct_expand'></span>

<h3>Description</h3>

<p>Add additional levels to a factor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_expand(f, ..., after = Inf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_expand_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_expand_+3A_...">...</code></td>
<td>
<p>Additional levels to add to the factor. Levels that already
exist will be silently ignored.</p>
</td></tr>
<tr><td><code id="fct_expand_+3A_after">after</code></td>
<td>
<p>Where should the new values be placed?</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+fct_drop">fct_drop()</a></code> to drop unused factor levels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(sample(letters[1:3], 20, replace = TRUE))
f
fct_expand(f, "d", "e", "f")
fct_expand(f, letters[1:6])
fct_expand(f, "Z", after = 0)
</code></pre>

<hr>
<h2 id='fct_explicit_na'>Make missing values explicit</h2><span id='topic+fct_explicit_na'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>This function is deprecated because the terminology is confusing;
please use <code><a href="#topic+fct_na_value_to_level">fct_na_value_to_level()</a></code> instead.
</p>
<p>This gives missing values an explicit factor level, ensuring that they
appear in summaries and on plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_explicit_na(f, na_level = "(Missing)")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_explicit_na_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_explicit_na_+3A_na_level">na_level</code></td>
<td>
<p>Level to use for missing values: this is what <code>NA</code>s will be
changed to.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>f1 &lt;- factor(c("a", "a", NA, NA, "a", "b", NA, "c", "a", "c", "b"))
fct_count(f1)
table(f1)
sum(is.na(f1))

# previously
f2 &lt;- fct_explicit_na(f1)
# now
f2 &lt;- fct_na_value_to_level(f1)

fct_count(f2)
table(f2)
sum(is.na(f2))
</code></pre>

<hr>
<h2 id='fct_inorder'>Reorder factor levels by first appearance, frequency, or numeric order</h2><span id='topic+fct_inorder'></span><span id='topic+fct_infreq'></span><span id='topic+fct_inseq'></span>

<h3>Description</h3>

<p>This family of functions changes only the order of the levels.
</p>

<ul>
<li> <p><code>fct_inorder()</code>: by the order in which they first appear.
</p>
</li>
<li> <p><code>fct_infreq()</code>: by number of observations with each level (largest first)
</p>
</li>
<li> <p><code>fct_inseq()</code>: by numeric value of level.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>fct_inorder(f, ordered = NA)

fct_infreq(f, w = NULL, ordered = NA)

fct_inseq(f, ordered = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_inorder_+3A_f">f</code></td>
<td>
<p>A factor</p>
</td></tr>
<tr><td><code id="fct_inorder_+3A_ordered">ordered</code></td>
<td>
<p>A logical which determines the &quot;ordered&quot; status of the
output factor. <code>NA</code> preserves the existing status of the factor.</p>
</td></tr>
<tr><td><code id="fct_inorder_+3A_w">w</code></td>
<td>
<p>An optional numeric vector giving weights for frequency of
each value (not level) in f.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("b", "b", "a", "c", "c", "c"))
f
fct_inorder(f)
fct_infreq(f)

f &lt;- factor(1:3, levels = c("3", "2", "1"))
f
fct_inseq(f)
</code></pre>

<hr>
<h2 id='fct_lump'>Lump uncommon factor together levels into &quot;other&quot;</h2><span id='topic+fct_lump'></span><span id='topic+fct_lump_min'></span><span id='topic+fct_lump_prop'></span><span id='topic+fct_lump_n'></span><span id='topic+fct_lump_lowfreq'></span>

<h3>Description</h3>

<p>A family for lumping together levels that meet some criteria.
</p>

<ul>
<li> <p><code>fct_lump_min()</code>: lumps levels that appear fewer than <code>min</code> times.
</p>
</li>
<li> <p><code>fct_lump_prop()</code>: lumps levels that appear in fewer than (or equal to)
<code>prop * n</code> times.
</p>
</li>
<li> <p><code>fct_lump_n()</code> lumps all levels except for the <code>n</code> most frequent
(or least frequent if <code>n &lt; 0</code>)
</p>
</li>
<li> <p><code>fct_lump_lowfreq()</code> lumps together the least frequent levels, ensuring
that &quot;other&quot; is still the smallest level.
</p>
</li></ul>

<p><code>fct_lump()</code> exists primarily for historical reasons, as it automatically
picks between these different methods depending on its arguments.
We no longer recommend that you use it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_lump(
  f,
  n,
  prop,
  w = NULL,
  other_level = "Other",
  ties.method = c("min", "average", "first", "last", "random", "max")
)

fct_lump_min(f, min, w = NULL, other_level = "Other")

fct_lump_prop(f, prop, w = NULL, other_level = "Other")

fct_lump_n(
  f,
  n,
  w = NULL,
  other_level = "Other",
  ties.method = c("min", "average", "first", "last", "random", "max")
)

fct_lump_lowfreq(f, w = NULL, other_level = "Other")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_lump_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_n">n</code></td>
<td>
<p>Positive <code>n</code> preserves the most common <code>n</code> values.
Negative <code>n</code> preserves the least common <code>-n</code> values.
It there are ties, you will get at least <code>abs(n)</code> values.</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_prop">prop</code></td>
<td>
<p>Positive <code>prop</code> lumps values which do not appear at least
<code>prop</code> of the time. Negative <code>prop</code> lumps values that
do not appear at most <code>-prop</code> of the time.</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_w">w</code></td>
<td>
<p>An optional numeric vector giving weights for frequency of
each value (not level) in f.</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_other_level">other_level</code></td>
<td>
<p>Value of level used for &quot;other&quot; values. Always
placed at end of levels.</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_ties.method">ties.method</code></td>
<td>
<p>A character string specifying how ties are
treated. See <code><a href="base.html#topic+rank">rank()</a></code> for details.</p>
</td></tr>
<tr><td><code id="fct_lump_+3A_min">min</code></td>
<td>
<p>Preserve levels that appear at least <code>min</code> number of times.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+fct_other">fct_other()</a></code> to convert specified levels to other.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- factor(rep(LETTERS[1:9], times = c(40, 10, 5, 27, 1, 1, 1, 1, 1)))
x %&gt;% table()
x %&gt;%
  fct_lump_n(3) %&gt;%
  table()
x %&gt;%
  fct_lump_prop(0.10) %&gt;%
  table()
x %&gt;%
  fct_lump_min(5) %&gt;%
  table()
x %&gt;%
  fct_lump_lowfreq() %&gt;%
  table()

x &lt;- factor(letters[rpois(100, 5)])
x
table(x)
table(fct_lump_lowfreq(x))

# Use positive values to collapse the rarest
fct_lump_n(x, n = 3)
fct_lump_prop(x, prop = 0.1)

# Use negative values to collapse the most common
fct_lump_n(x, n = -3)
fct_lump_prop(x, prop = -0.1)

# Use weighted frequencies
w &lt;- c(rep(2, 50), rep(1, 50))
fct_lump_n(x, n = 5, w = w)

# Use ties.method to control how tied factors are collapsed
fct_lump_n(x, n = 6)
fct_lump_n(x, n = 6, ties.method = "max")

# Use fct_lump_min() to lump together all levels with fewer than `n` values
table(fct_lump_min(x, min = 10))
table(fct_lump_min(x, min = 15))
</code></pre>

<hr>
<h2 id='fct_match'>Test for presence of levels in a factor</h2><span id='topic+fct_match'></span>

<h3>Description</h3>

<p>Do any of <code>lvls</code> occur in <code>f</code>? Compared to <a href="base.html#topic++25in+25">%in%</a>, this function validates
<code>lvls</code> to ensure that they're actually present in <code>f</code>. In other words,
<code>x %in% "not present"</code> will return <code>FALSE</code>, but <code>fct_match(x, "not present")</code>
will throw an error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_match(f, lvls)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_match_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_match_+3A_lvls">lvls</code></td>
<td>
<p>A character vector specifying levels to look for.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>table(fct_match(gss_cat$marital, c("Married", "Divorced")))

# Compare to %in%, misspelled levels throw an error
table(gss_cat$marital %in% c("Maried", "Davorced"))
## Not run: 
table(fct_match(gss_cat$marital, c("Maried", "Davorced")))

## End(Not run)
</code></pre>

<hr>
<h2 id='fct_na_value_to_level'>Convert between <code>NA</code> values and <code>NA</code> levels</h2><span id='topic+fct_na_value_to_level'></span><span id='topic+fct_na_level_to_value'></span>

<h3>Description</h3>

<p>There are two ways to represent missing values in factors: in the values
and in the levels. <code>NA</code>s in the values are most useful for data analysis
(since <code><a href="base.html#topic+is.na">is.na()</a></code> returns what you expect), but because the <code>NA</code> is not
explicitly recorded in the levels, there's no way to control its position
(it's almost always displayed last or not at all). Putting the <code>NA</code>s in the levels allows
you to control its display, at the cost of losing accurate <code>is.na()</code>
reporting.
</p>
<p>(It is possible to have a factor with missing values in both the values
and the levels but it requires some explicit gymnastics and we don't
recommend it.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_na_value_to_level(f, level = NA)

fct_na_level_to_value(f, extra_levels = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_na_value_to_level_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_na_value_to_level_+3A_level">level</code></td>
<td>
<p>Optionally, instead of converting the <code>NA</code> values to an
<code>NA</code> level, convert it to a level with this value.</p>
</td></tr>
<tr><td><code id="fct_na_value_to_level_+3A_extra_levels">extra_levels</code></td>
<td>
<p>Optionally, a character vector giving additional levels
that should also be converted to <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Most factors store NAs in the values:
f1 &lt;- fct(c("a", "b", NA, "c", "b", NA))
levels(f1)
as.integer(f1)
is.na(f1)

# But it's also possible to store them in the levels
f2 &lt;- fct_na_value_to_level(f1)
levels(f2)
as.integer(f2)
is.na(f2)

# If needed, you can convert back to NAs in the values:
f3 &lt;- fct_na_level_to_value(f2)
levels(f3)
as.integer(f3)
is.na(f3)
</code></pre>

<hr>
<h2 id='fct_other'>Manually replace levels with &quot;other&quot;</h2><span id='topic+fct_other'></span>

<h3>Description</h3>

<p>Manually replace levels with &quot;other&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_other(f, keep, drop, other_level = "Other")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_other_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_other_+3A_keep">keep</code>, <code id="fct_other_+3A_drop">drop</code></td>
<td>
<p>Pick one of <code>keep</code> and <code>drop</code>:
</p>

<ul>
<li> <p><code>keep</code> will preserve listed levels, replacing all others with
<code>other_level</code>.
</p>
</li>
<li> <p><code>drop</code> will replace listed levels with <code>other_level</code>, keeping all
as is.
</p>
</li></ul>
</td></tr>
<tr><td><code id="fct_other_+3A_other_level">other_level</code></td>
<td>
<p>Value of level used for &quot;other&quot; values. Always
placed at end of levels.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+fct_lump">fct_lump()</a></code> to automatically convert the rarest (or most
common) levels to &quot;other&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- factor(rep(LETTERS[1:9], times = c(40, 10, 5, 27, 1, 1, 1, 1, 1)))

fct_other(x, keep = c("A", "B"))
fct_other(x, drop = c("A", "B"))
</code></pre>

<hr>
<h2 id='fct_recode'>Change factor levels by hand</h2><span id='topic+fct_recode'></span>

<h3>Description</h3>

<p>Change factor levels by hand
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_recode(.f, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_recode_+3A_.f">.f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_recode_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of named character
vectors where the name gives the new level, and the value gives the old
level. Levels not otherwise mentioned will be left as is. Levels can
be removed by naming them <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- factor(c("apple", "bear", "banana", "dear"))
fct_recode(x, fruit = "apple", fruit = "banana")

# If you make a mistake you'll get a warning
fct_recode(x, fruit = "apple", fruit = "bananana")

# If you name the level NULL it will be removed
fct_recode(x, NULL = "apple", fruit = "banana")

# Wrap the left hand side in quotes if it contains special variables
fct_recode(x, "an apple" = "apple", "a bear" = "bear")

# When passing a named vector to rename levels use !!! to splice
x &lt;- factor(c("apple", "bear", "banana", "dear"))
levels &lt;- c(fruit = "apple", fruit = "banana")
fct_recode(x, !!!levels)
</code></pre>

<hr>
<h2 id='fct_relabel'>Relabel factor levels with a function, collapsing as necessary</h2><span id='topic+fct_relabel'></span>

<h3>Description</h3>

<p>Relabel factor levels with a function, collapsing as necessary
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_relabel(.f, .fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_relabel_+3A_.f">.f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_relabel_+3A_.fun">.fun</code></td>
<td>
<p>A function to be applied to each level. Must accept one
character argument and return a character vector of the same length as
its input.
</p>
<p>You can also use <code>~</code> to create as shorthand (in the style of purrr).
<code>~ paste(., "x")</code> is equivalent to <code>function(.) paste(., "x")</code></p>
</td></tr>
<tr><td><code id="fct_relabel_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>fun</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>gss_cat$partyid %&gt;% fct_count()
gss_cat$partyid %&gt;%
  fct_relabel(~ gsub(",", ", ", .x)) %&gt;%
  fct_count()

convert_income &lt;- function(x) {
  regex &lt;- "^(?:Lt |)[$]([0-9]+).*$"
  is_range &lt;- grepl(regex, x)
  num_income &lt;- as.numeric(gsub(regex, "\\1", x[is_range]))
  num_income &lt;- trunc(num_income / 5000) * 5000
  x[is_range] &lt;- paste0("Gt $", num_income)
  x
}
fct_count(gss_cat$rincome)
convert_income(levels(gss_cat$rincome))
rincome2 &lt;- fct_relabel(gss_cat$rincome, convert_income)
fct_count(rincome2)
</code></pre>

<hr>
<h2 id='fct_relevel'>Reorder factor levels by hand</h2><span id='topic+fct_relevel'></span>

<h3>Description</h3>

<p>This is a generalisation of <code><a href="stats.html#topic+relevel">stats::relevel()</a></code> that allows you to move any
number of levels to any location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_relevel(.f, ..., after = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_relevel_+3A_.f">.f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_relevel_+3A_...">...</code></td>
<td>
<p>Either a function (or formula), or character levels.
</p>
<p>A function will be called with the current levels as input, and the
return value (which must be a character vector) will be used to relevel
the factor.
</p>
<p>Any levels not mentioned will be left in their existing order, by default
after the explicitly mentioned levels. Supports tidy dots.</p>
</td></tr>
<tr><td><code id="fct_relevel_+3A_after">after</code></td>
<td>
<p>Where should the new values be placed?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("a", "b", "c", "d"), levels = c("b", "c", "d", "a"))
fct_relevel(f)
fct_relevel(f, "a")
fct_relevel(f, "b", "a")

# Move to the third position
fct_relevel(f, "a", after = 2)

# Relevel to the end
fct_relevel(f, "a", after = Inf)
fct_relevel(f, "a", after = 3)

# Relevel with a function
fct_relevel(f, sort)
fct_relevel(f, sample)
fct_relevel(f, rev)

# Using 'Inf' allows you to relevel to the end when the number
# of levels is unknown or variable (e.g. vectorised operations)
df &lt;- forcats::gss_cat[, c("rincome", "denom")]
lapply(df, levels)

df2 &lt;- lapply(df, fct_relevel, "Don't know", after = Inf)
lapply(df2, levels)

# You'll get a warning if the levels don't exist
fct_relevel(f, "e")
</code></pre>

<hr>
<h2 id='fct_reorder'>Reorder factor levels by sorting along another variable</h2><span id='topic+fct_reorder'></span><span id='topic+fct_reorder2'></span><span id='topic+last2'></span><span id='topic+first2'></span>

<h3>Description</h3>

<p><code>fct_reorder()</code> is useful for 1d displays where the factor is mapped to
position; <code>fct_reorder2()</code> for 2d displays where the factor is mapped to
a non-position aesthetic. <code>last2()</code> and <code>first2()</code> are helpers for <code>fct_reorder2()</code>;
<code>last2()</code> finds the last value of <code>y</code> when sorted by <code>x</code>; <code>first2()</code> finds the first value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_reorder(
  .f,
  .x,
  .fun = median,
  ...,
  .na_rm = NULL,
  .default = Inf,
  .desc = FALSE
)

fct_reorder2(
  .f,
  .x,
  .y,
  .fun = last2,
  ...,
  .na_rm = NULL,
  .default = -Inf,
  .desc = TRUE
)

last2(.x, .y)

first2(.x, .y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_reorder_+3A_.f">.f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_.x">.x</code>, <code id="fct_reorder_+3A_.y">.y</code></td>
<td>
<p>The levels of <code>f</code> are reordered so that the values
of <code>.fun(.x)</code> (for <code>fct_reorder()</code>) and <code>fun(.x, .y)</code> (for <code>fct_reorder2()</code>)
are in ascending order.</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_.fun">.fun</code></td>
<td>
<p>n summary function. It should take one vector for
<code>fct_reorder</code>, and two vectors for <code>fct_reorder2</code>, and return a single
value.</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code>.fun</code>.</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_.na_rm">.na_rm</code></td>
<td>
<p>Should <code>fct_reorder()</code> remove missing values?
If <code>NULL</code>, the default, will remove missing values with a warning.
Set to <code>FALSE</code> to preserve <code>NA</code>s (if you <code>.fun</code> already handles them) and
<code>TRUE</code> to remove silently.</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_.default">.default</code></td>
<td>
<p>What default value should we use for <code>.fun</code> for
empty levels? Use this to control where empty levels appear in the
output.</p>
</td></tr>
<tr><td><code id="fct_reorder_+3A_.desc">.desc</code></td>
<td>
<p>Order in descending order? Note the default is different
between <code>fct_reorder</code> and <code>fct_reorder2</code>, in order to
match the default ordering of factors in the legend.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># fct_reorder() -------------------------------------------------------------
# Useful when a categorical variable is mapped to position
boxplot(Sepal.Width ~ Species, data = iris)
boxplot(Sepal.Width ~ fct_reorder(Species, Sepal.Width), data = iris)

# or with
library(ggplot2)
ggplot(iris, aes(fct_reorder(Species, Sepal.Width), Sepal.Width)) +
  geom_boxplot()

# fct_reorder2() -------------------------------------------------------------
# Useful when a categorical variable is mapped to color, size, shape etc

chks &lt;- subset(ChickWeight, as.integer(Chick) &lt; 10)
chks &lt;- transform(chks, Chick = fct_shuffle(Chick))

# Without reordering it's hard to match line to legend
ggplot(chks, aes(Time, weight, colour = Chick)) +
  geom_point() +
  geom_line()

# With reordering it's much easier
ggplot(chks, aes(Time, weight, colour = fct_reorder2(Chick, Time, weight))) +
  geom_point() +
  geom_line() +
  labs(colour = "Chick")
</code></pre>

<hr>
<h2 id='fct_rev'>Reverse order of factor levels</h2><span id='topic+fct_rev'></span>

<h3>Description</h3>

<p>This is sometimes useful when plotting a factor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_rev(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_rev_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("a", "b", "c"))
fct_rev(f)
</code></pre>

<hr>
<h2 id='fct_shift'>Shift factor levels to left or right, wrapping around at end</h2><span id='topic+fct_shift'></span>

<h3>Description</h3>

<p>This is useful when the levels of an ordered factor are actually cyclical,
with different conventions on the starting point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_shift(f, n = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_shift_+3A_f">f</code></td>
<td>
<p>A factor.</p>
</td></tr>
<tr><td><code id="fct_shift_+3A_n">n</code></td>
<td>
<p>Positive values shift to the left; negative values shift to
the right.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- factor(
  c("Mon", "Tue", "Wed"),
  levels = c("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"),
  ordered = TRUE
)
x
fct_shift(x)
fct_shift(x, 2)
fct_shift(x, -1)
</code></pre>

<hr>
<h2 id='fct_shuffle'>Randomly permute factor levels</h2><span id='topic+fct_shuffle'></span>

<h3>Description</h3>

<p>Randomly permute factor levels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_shuffle(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_shuffle_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("a", "b", "c"))
fct_shuffle(f)
fct_shuffle(f)
</code></pre>

<hr>
<h2 id='fct_unify'>Unify the levels in a list of factors</h2><span id='topic+fct_unify'></span>

<h3>Description</h3>

<p>Unify the levels in a list of factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_unify(fs, levels = lvls_union(fs))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_unify_+3A_fs">fs</code></td>
<td>
<p>A list of factors</p>
</td></tr>
<tr><td><code id="fct_unify_+3A_levels">levels</code></td>
<td>
<p>Set of levels to apply to every factor. Default to
union of all factor levels</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>fs &lt;- list(factor("a"), factor("b"), factor(c("a", "b")))
fct_unify(fs)
</code></pre>

<hr>
<h2 id='fct_unique'>Unique values of a factor, as a factor</h2><span id='topic+fct_unique'></span>

<h3>Description</h3>

<p><code>fct_unique()</code> extracts the complete set of possible values from the
levels of the factor, rather than looking at the actual values, like
<code><a href="base.html#topic+unique">unique()</a></code>.
</p>
<p><code>fct_unique()</code> only uses the values of <code>f</code> in one way: it looks for
implicit missing values so that they can be included in the result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fct_unique(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fct_unique_+3A_f">f</code></td>
<td>
<p>A factor.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- fct(letters[rpois(100, 10)])
unique(f)     # in order of appearance
fct_unique(f) # in order of levels

f &lt;- fct(letters[rpois(100, 2)], letters[1:20])
unique(f)     # levels that appear in data
fct_unique(f) # all possible levels
</code></pre>

<hr>
<h2 id='gss_cat'>A sample of categorical variables from the General Social survey</h2><span id='topic+gss_cat'></span>

<h3>Description</h3>

<p>A sample of categorical variables from the General Social survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gss_cat
</code></pre>


<h3>Format</h3>


<dl>
<dt>year</dt><dd><p>year of survey, 2000&ndash;2014 (every other year)</p>
</dd>
<dt>age</dt><dd><p>age. Maximum age truncated to 89.</p>
</dd>
<dt>marital</dt><dd><p>marital status</p>
</dd>
<dt>race</dt><dd><p>race</p>
</dd>
<dt>rincome</dt><dd><p>reported income</p>
</dd>
<dt>partyid</dt><dd><p>party affiliation</p>
</dd>
<dt>relig</dt><dd><p>religion</p>
</dd>
<dt>denom</dt><dd><p>denomination</p>
</dd>
<dt>tvhours</dt><dd><p>hours per day watching tv</p>
</dd>
</dl>



<h3>Source</h3>

<p>Downloaded from <a href="https://gssdataexplorer.norc.org/">https://gssdataexplorer.norc.org/</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gss_cat

fct_count(gss_cat$relig)
fct_count(fct_lump(gss_cat$relig))
</code></pre>

<hr>
<h2 id='lvls'>Low-level functions for manipulating levels</h2><span id='topic+lvls'></span><span id='topic+lvls_reorder'></span><span id='topic+lvls_revalue'></span><span id='topic+lvls_expand'></span>

<h3>Description</h3>

<p><code>lvls_reorder</code> leaves values as they are, but changes the order.
<code>lvls_revalue</code> changes the values of existing levels; there must
be one new level for each old level.
<code>lvls_expand</code> expands the set of levels; the new levels must
include the old levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lvls_reorder(f, idx, ordered = NA)

lvls_revalue(f, new_levels)

lvls_expand(f, new_levels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lvls_+3A_f">f</code></td>
<td>
<p>A factor (or character vector).</p>
</td></tr>
<tr><td><code id="lvls_+3A_idx">idx</code></td>
<td>
<p>A integer index, with one integer for each existing level.</p>
</td></tr>
<tr><td><code id="lvls_+3A_ordered">ordered</code></td>
<td>
<p>A logical which determines the &quot;ordered&quot; status of the
output factor. <code>NA</code> preserves the existing status of the factor.</p>
</td></tr>
<tr><td><code id="lvls_+3A_new_levels">new_levels</code></td>
<td>
<p>A character vector of new levels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are less helpful than the higher-level <code>fct_</code> functions,
but are safer than the very low-level manipulation of levels directly,
because they are more specific, and hence can more carefully check their
arguments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- factor(c("a", "b", "c"))
lvls_reorder(f, 3:1)
lvls_revalue(f, c("apple", "banana", "carrot"))
lvls_expand(f, c("a", "b", "c", "d"))
</code></pre>

<hr>
<h2 id='lvls_union'>Find all levels in a list of factors</h2><span id='topic+lvls_union'></span>

<h3>Description</h3>

<p>Find all levels in a list of factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lvls_union(fs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lvls_union_+3A_fs">fs</code></td>
<td>
<p>A list of factors.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>fs &lt;- list(factor("a"), factor("b"), factor(c("a", "b")))
lvls_union(fs)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
