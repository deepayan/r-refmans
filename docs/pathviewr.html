<!DOCTYPE html><html><head><title>Help for package pathviewr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pathviewr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#as_viewr'><p>Convert data from another format into a viewr object</p></a></li>
<li><a href='#bind_viewr_objects'><p>Bind viewr objects</p></a></li>
<li><a href='#calc_min_dist_box'><p>Calculate minimum distance to lateral and end walls in a box-shaped</p>
experimental tunnel</a></li>
<li><a href='#calc_min_dist_v'><p>Calculate minimum distance to lateral and end walls in a V-shaped</p>
experimental tunnel</a></li>
<li><a href='#clean_by_span'><p>Remove file_sub_traj entries that do not span the full region of interest</p></a></li>
<li><a href='#clean_viewr'><p>All-in-one function to clean imported objects</p></a></li>
<li><a href='#clean_viewr_batch'><p>Batch clean viewr files</p></a></li>
<li><a href='#deg_2_rad'><p>Convert degrees to radians</p></a></li>
<li><a href='#exclude_by_velocity'><p>Remove trajectories entirely, based on velocity thresholds</p></a></li>
<li><a href='#fill_traj_gaps'><p>Interpolate gaps within trajectories</p></a></li>
<li><a href='#find_curve_elbow'><p>Find the &quot;elbow&quot; of a curve.</p></a></li>
<li><a href='#gather_tunnel_data'><p>Gather data columns into key-value pairs</p></a></li>
<li><a href='#get_2d_angle'><p>Compute an angle in 2D space</p></a></li>
<li><a href='#get_3d_angle'><p>Compute an angle in 3D space</p></a></li>
<li><a href='#get_3d_cross_prod'><p>Compute the cross product of two 3D vectors</p></a></li>
<li><a href='#get_dist_point_line'><p>Compute distance between a point and a line</p></a></li>
<li><a href='#get_full_trajectories'><p>Retain trajectories that span a selected region of interest</p></a></li>
<li><a href='#get_header_viewr'><p>Extract header info from imported viewr object</p></a></li>
<li><a href='#get_sf'><p>Estimate the spatial frequency of visual stimuli from the subject's</p>
perspective in an experimental tunnel.</a></li>
<li><a href='#get_traj_velocities'><p>Recompute trajectory-specific velocities</p></a></li>
<li><a href='#get_velocity'><p>Get instantaneous velocity for subjects</p></a></li>
<li><a href='#get_vis_angle'><p>Estimate visual angles from a subject's perspective in an experimental tunnel</p></a></li>
<li><a href='#import_and_clean_batch'><p>Batch import and clean files</p></a></li>
<li><a href='#import_and_clean_viewr'><p>Import + clean_viewr()</p></a></li>
<li><a href='#import_batch'><p>Batch import of files for either Motive or Flydra (but not a mix of both)</p></a></li>
<li><a href='#insert_treatments'><p>Inserts treatment and experiment information</p></a></li>
<li><a href='#pathviewr-package'><p>pathviewr: Wrangle, Analyze, and Visualize Animal Movement Data</p></a></li>
<li><a href='#plot_by_subject'><p>Plot trajectories and density plots of position by subject</p></a></li>
<li><a href='#plot_viewr_trajectories'><p>Plot each trajectory within a viewr object</p></a></li>
<li><a href='#quick_separate_trajectories'><p>Quick version of separate_trajectories()</p></a></li>
<li><a href='#rad_2_deg'><p>Convert radians to degrees</p></a></li>
<li><a href='#read_flydra_mat'><p>Import data from a MAT file exported from Flydra software</p></a></li>
<li><a href='#read_motive_csv'><p>Import data from a CSV exported from Optitrack's Motive software</p></a></li>
<li><a href='#redefine_tunnel_center'><p>&quot;Center&quot; the tunnel data, i.e. translation but no rotation</p></a></li>
<li><a href='#relabel_viewr_axes'><p>Relabel the dimensions as length, width, and height</p></a></li>
<li><a href='#remove_duplicate_frames'><p>Remove any duplicates or aliased frames within trajectories</p></a></li>
<li><a href='#remove_vel_anomalies'><p>Remove any rows which show sharp shifts in velocity that are likely due to</p>
tracking errors</a></li>
<li><a href='#rename_viewr_characters'><p>Rename subjects in the data via pattern detection</p></a></li>
<li><a href='#rescale_tunnel_data'><p>Rescale position data within a <code>viewr</code> object</p></a></li>
<li><a href='#rm_by_trajnum'><p>Remove subjects by trajectory number</p></a></li>
<li><a href='#rotate_tunnel'><p>Rotate a tunnel so that perches are approximately aligned</p></a></li>
<li><a href='#section_tunnel_by'><p>Bin data along a specified axis</p></a></li>
<li><a href='#select_x_percent'><p>Select a region of interest within the tunnel</p></a></li>
<li><a href='#separate_trajectories'><p>Separate rows of data into separately labeled trajectories.</p></a></li>
<li><a href='#set_traj_frametime'><p>Redefine frames and time stamps on a per-trajectory basis</p></a></li>
<li><a href='#standardize_tunnel'><p>Rotate and center a tunnel based on landmarks</p></a></li>
<li><a href='#trim_tunnel_outliers'><p>Trim out artifacts and other outliers from the extremes of the tunnel</p></a></li>
<li><a href='#visualize_frame_gap_choice'><p>Visualize the consequence of using various max_frame_gap values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Wrangle, Analyze, and Visualize Animal Movement Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools to import, clean, and visualize movement data,
    particularly from motion capture systems such as Optitrack's 
    'Motive', the Straw Lab's 'Flydra', or from other sources. We provide 
    functions to remove artifacts, standardize tunnel position and tunnel 
    axes, select a region of interest, isolate specific trajectories, fill
    gaps in trajectory data, and calculate 3D and per-axis velocity. For 
    experiments of visual guidance, we also provide functions that use 
    subject position to estimate perception of visual stimuli. </td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Vikram B. Baliga &lt;vbaliga87@gmail.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>R.matlab, data.table (&ge; 1.12.2), magrittr (&ge; 1.5), dplyr (&ge;
1.0.0), stringr (&ge; 1.4.0), tibble (&ge; 3.0.1), tidyr (&ge;
1.1.0), fANCOVA, purrr (&ge; 0.3.3), ggplot2 (&ge; 3.4.0),
tidyselect (&ge; 1.1.0), cowplot, lubridate</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, anomalize, covr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/pathviewr/">https://github.com/ropensci/pathviewr/</a>,
<a href="https://docs.ropensci.org/pathviewr/">https://docs.ropensci.org/pathviewr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/pathviewr/issues/">https://github.com/ropensci/pathviewr/issues/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-07 20:19:24 UTC; vbali</td>
</tr>
<tr>
<td>Author:</td>
<td>Vikram B. Baliga <a href="https://orcid.org/0000-0002-9367-8974"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Melissa S. Armstrong
    <a href="https://orcid.org/0000-0002-3059-0094"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Eric R. Press <a href="https://orcid.org/0000-0002-1944-3755"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Anne-Sophie Bonnet-Lebrun [rev],
  Marco Sciaini [rev]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-08 08:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Value</h3>

<p>No return value, called for side effects
</p>

<hr>
<h2 id='as_viewr'>Convert data from another format into a viewr object</h2><span id='topic+as_viewr'></span>

<h3>Description</h3>

<p>Should you have data from a non-Motive, non-Flydra source, this function can
be used to ensure your data are put into the right format to work with other
pathviewr functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_viewr(
  obj_name,
  frame_rate = 100,
  frame_col,
  time_col,
  subject_col,
  position_length_col,
  position_width_col,
  position_height_col,
  include_rotation = FALSE,
  rotation_real_col,
  rotation_length_col,
  rotation_width_col,
  rotation_height_col
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_viewr_+3A_obj_name">obj_name</code></td>
<td>
<p>A tibble or data frame containing movement trajectories</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_frame_rate">frame_rate</code></td>
<td>
<p>Must be a single numeric value indicating capture frame
rate in frames per second.</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_frame_col">frame_col</code></td>
<td>
<p>Column number of obj_name that contains frame numbers</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_time_col">time_col</code></td>
<td>
<p>Column number of obj_name that contains time (must be in
seconds)</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_subject_col">subject_col</code></td>
<td>
<p>Column number of obj_name that contains subject name(s)</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_position_length_col">position_length_col</code></td>
<td>
<p>Column number of obj_name that contains
length-axis position values</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_position_width_col">position_width_col</code></td>
<td>
<p>Column number of obj_name that contains width-axis
position values</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_position_height_col">position_height_col</code></td>
<td>
<p>Column number of obj_name that contains
height-axis position values</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_include_rotation">include_rotation</code></td>
<td>
<p>Are rotation data included? Defaults to FALSE</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_rotation_real_col">rotation_real_col</code></td>
<td>
<p>Column number of obj_name that contains the &quot;real&quot;
axis of quaternion rotation data</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_rotation_length_col">rotation_length_col</code></td>
<td>
<p>Column number of obj_name that contains the length
axis of quaternion rotation data</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_rotation_width_col">rotation_width_col</code></td>
<td>
<p>Column number of obj_name that contains the width
axis of quaternion rotation data</p>
</td></tr>
<tr><td><code id="as_viewr_+3A_rotation_height_col">rotation_height_col</code></td>
<td>
<p>Column number of obj_name that contains the height
axis of quaternion rotation data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble that is organized to be compliant with other
<code>pathviewr</code> functions and that contains the attributes
<code>pathviewr_steps</code> with entries set to <code>c("viewr",
  "renamed_tunnel", "gathered_tunnel")</code>
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data import functions: 
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>,
<code><a href="#topic+read_flydra_mat">read_flydra_mat</a>()</code>,
<code><a href="#topic+read_motive_csv">read_motive_csv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Create a dummy data frame with simulated (nonsense) data
df &lt;- data.frame(frame = seq(1, 100, by = 1),
                 time_sec = seq(0, by = 0.01, length.out = 100),
                 subject = "birdie_sanders",
                 z = rnorm(100),
                 x = rnorm(100),
                 y = rnorm(100))

## Use as_viewr() to convert it into a viewr object
test &lt;-
  as_viewr(
    df,
    frame_rate = 100,
    frame_col = 1,
    time_col = 2,
    subject_col = 3,
    position_length_col = 5,
    position_width_col = 6,
    position_height_col = 4
  )
</code></pre>

<hr>
<h2 id='bind_viewr_objects'>Bind viewr objects</h2><span id='topic+bind_viewr_objects'></span>

<h3>Description</h3>

<p>Combine a list of multiple viewr objects into a single viewr object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bind_viewr_objects(obj_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bind_viewr_objects_+3A_obj_list">obj_list</code></td>
<td>
<p>A list of viewr objects</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that combines all the
rows of the source viewr objects in <code>obj_list</code>. Metadata may not
necessarily be retained and therefore <code>attributes</code> should be used with
caution.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other batch functions: 
<code><a href="#topic+clean_viewr_batch">clean_viewr_batch</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Since we only have one example file of each type provided
## in pathviewr, we will simply import the same example multiple
## times to simulate batch importing. Replace the contents of
## the following list with your own list of files to be imported.

## Make a list of the same example file 3x
import_list &lt;-
  c(rep(
    system.file("extdata", "pathviewr_motive_example_data.csv",
                package = 'pathviewr'),
    3
  ))

## Batch import
motive_batch_imports &lt;-
  import_batch(import_list,
               import_method = "motive",
               import_messaging = TRUE)

## Batch cleaning of these imported files
## via clean_viewr_batch()
motive_batch_cleaned &lt;-
  clean_viewr_batch(
    file_announce = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Alternatively, use import_and_clean_batch() to
## combine import with cleaning on a batch of files
motive_batch_import_and_clean &lt;-
  import_and_clean_batch(
    import_list,
    import_method = "motive",
    import_messaging = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Each of these lists of objects can be bound into
## one viewr object (i.e. one tibble) via
## bind_viewr_objects()
motive_bound_one &lt;-
  bind_viewr_objects(motive_batch_cleaned)

motive_bound_two &lt;-
  bind_viewr_objects(motive_batch_import_and_clean)

## Either route results in the same object ultimately:
identical(motive_bound_one, motive_bound_two)
</code></pre>

<hr>
<h2 id='calc_min_dist_box'>Calculate minimum distance to lateral and end walls in a box-shaped
experimental tunnel</h2><span id='topic+calc_min_dist_box'></span>

<h3>Description</h3>

<p>Calculate minimum distance to lateral and end walls in a box-shaped
experimental tunnel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_min_dist_box(obj_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_min_dist_box_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that include <code>"viewr"</code> and
<code>treatments_added</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>calc_min_dist_box()</code> assumes the subject locomotes facing
forward, therefore <code>min_dist_end</code> represents the minimum distance
between the subject and the end wall to which it is moving towards.
All outputs are in meters.
</p>


<h3>Value</h3>

<p>A tibble or data.frame with added variables for
<code>min_dist_pos</code>, <code>min_dist_neg</code>, and <code>min_dist_end</code>,.
</p>


<h3>Author(s)</h3>

<p>Eric R. Press
</p>


<h3>See Also</h3>

<p>Other visual perception functions: 
<code><a href="#topic+get_sf">get_sf</a>()</code>,
<code><a href="#topic+get_vis_angle">get_vis_angle</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import sample data from package
 flydra_data &lt;-
 read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                               package = 'pathviewr'),
                               subject_name = "birdie_sanders")

   ## Process data up to and including insert_treatments()
  flydra_data_full &lt;-
   flydra_data %&gt;%
   redefine_tunnel_center(length_method = "middle",
                         height_method = "user-defined",
                         height_zero = 1.44) %&gt;%
   select_x_percent(desired_percent = 50) %&gt;%
   separate_trajectories(max_frame_gap = "autodetect") %&gt;%
   get_full_trajectories(span = 0.95) %&gt;%
   insert_treatments(tunnel_config = "box",
                    tunnel_length = 3,
                    tunnel_width = 1,
                    stim_param_lat_pos = 0.1,
                    stim_param_lat_neg = 0.1,
                    stim_param_end_pos = 0.3,
                    stim_param_end_neg = 0.3,
                    treatment = "lat10_end_30") %&gt;%

   ## Now calculate the minimum distances to each wall
   calc_min_dist_box()

   ## See 3 new variables for calculations to lateral and end walls
   names(flydra_data_full)
</code></pre>

<hr>
<h2 id='calc_min_dist_v'>Calculate minimum distance to lateral and end walls in a V-shaped
experimental tunnel</h2><span id='topic+calc_min_dist_v'></span>

<h3>Description</h3>

<p>Calculate minimum distance to lateral and end walls in a V-shaped
experimental tunnel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_min_dist_v(obj_name, simplify_output = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_min_dist_v_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> and
<code>treatments_added</code>.</p>
</td></tr>
<tr><td><code id="calc_min_dist_v_+3A_simplify_output">simplify_output</code></td>
<td>
<p>If TRUE, the returned object includes only the minimum
distance between the subject and the lateral/end walls. If FALSE, the
returned object includes all variables internal to the calculation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For tunnels in which <code>vertex_angle</code> is &gt;90 degree,
<code>bound_pos</code> and <code>bound_neg</code> represent a planes orthogonal to the
lateral walls and are used to modify <code>min_dist_pos</code> and
<code>min_dist_neg</code> calculations to prevent erroneous outputs.
<code>calc_min_dist_v()</code> assumes the subject locomotes facing forward,
therefore <code>min_dist_end</code> represents the minimum distance between the
subject and the end wall to which it is moving towards All outputs are in
meters.
</p>


<h3>Value</h3>

<p>A tibble or data.frame with added variables for
<code>height_2_vertex</code>, <code>height_2_screen</code>, <code>width_2_screen_pos</code>,
<code>width_2_screen_neg</code>, <code>min_dist_pos</code>, <code>min_dist_neg</code>,
<code>min_dist_end</code>, <code>bound_pos</code>, and <code>bound_neg</code>.
</p>


<h3>Author(s)</h3>

<p>Eric R. Press
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Import sample data from package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

 ## Process data up to and including insert_treatments()
motive_data_full &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  insert_treatments(tunnel_config = "v",
                   perch_2_vertex = 0.4,
                   vertex_angle = 90,
                   tunnel_length = 2,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30") %&gt;%

 ## Now calculate the minimum distances to each wall
  calc_min_dist_v(simplify_output = TRUE)

  ## See 3 new variables for calculations to lateral and end walls
  names(motive_data_full)
</code></pre>

<hr>
<h2 id='clean_by_span'>Remove file_sub_traj entries that do not span the full region of interest</h2><span id='topic+clean_by_span'></span>

<h3>Description</h3>

<p>Remove file_sub_traj entries that do not span the full region of interest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_by_span(
  obj_name,
  axis = "position_length",
  min_value = NULL,
  max_value = NULL,
  tolerance = 0.1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_by_span_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="clean_by_span_+3A_axis">axis</code></td>
<td>
<p>Along which axis should restrictions be enforced?</p>
</td></tr>
<tr><td><code id="clean_by_span_+3A_min_value">min_value</code></td>
<td>
<p>Minimum coordinate value; setting this to NULL will
auto-compute the best value</p>
</td></tr>
<tr><td><code id="clean_by_span_+3A_max_value">max_value</code></td>
<td>
<p>Maximum coordinate; setting this to NULL will auto-compute
the best value</p>
</td></tr>
<tr><td><code id="clean_by_span_+3A_tolerance">tolerance</code></td>
<td>
<p>As a proporiton of axis value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code>. Trajectories that do not span the full region of
interest have been removed; trajectory identities (file_sub_traj) have
not been changed.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+insert_treatments">insert_treatments</a>()</code>,
<code><a href="#topic+remove_duplicate_frames">remove_duplicate_frames</a>()</code>,
<code><a href="#topic+remove_vel_anomalies">remove_vel_anomalies</a>()</code>,
<code><a href="#topic+set_traj_frametime">set_traj_frametime</a>()</code>
</p>

<hr>
<h2 id='clean_viewr'>All-in-one function to clean imported objects</h2><span id='topic+clean_viewr'></span>

<h3>Description</h3>

<p>For an imported viewr object, run through the cleaning pipeline as desired
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_viewr(
  obj_name,
  relabel_viewr_axes = TRUE,
  gather_tunnel_data = TRUE,
  trim_tunnel_outliers = TRUE,
  standardization_option = "rotate_tunnel",
  get_velocity = TRUE,
  select_x_percent = TRUE,
  rename_viewr_characters = FALSE,
  separate_trajectories = TRUE,
  get_full_trajectories = TRUE,
  fill_traj_gaps = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_viewr_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_relabel_viewr_axes">relabel_viewr_axes</code></td>
<td>
<p>default TRUE, should axes be relabeled?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_gather_tunnel_data">gather_tunnel_data</code></td>
<td>
<p>default TRUE, should tunnel data be gathered?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_trim_tunnel_outliers">trim_tunnel_outliers</code></td>
<td>
<p>default TRUE, outliers be trimmed?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_standardization_option">standardization_option</code></td>
<td>
<p>default &quot;rotate_tunnel&quot;; which standardization
option should be used? See Details for more.</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_get_velocity">get_velocity</code></td>
<td>
<p>default TRUE, should velocity be computed?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_select_x_percent">select_x_percent</code></td>
<td>
<p>default TRUE, should a region of interest be
selected?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_rename_viewr_characters">rename_viewr_characters</code></td>
<td>
<p>default FALSE, should subjects be renamed?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_separate_trajectories">separate_trajectories</code></td>
<td>
<p>default TRUE, should trajectories be defined?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_get_full_trajectories">get_full_trajectories</code></td>
<td>
<p>default TRUE, should only full trajectories be
retained?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_fill_traj_gaps">fill_traj_gaps</code></td>
<td>
<p>default FALSE, should gaps in trajectories be filled?</p>
</td></tr>
<tr><td><code id="clean_viewr_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to any of the corresponding functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each argument corresponds to a standalone function in
<code>pathviewr</code>. E.g. the parameter <code>relabel_viewr_axes</code> allows a
user to choose whether <code>pathviewr::relabel_viewr_axes()</code> is run
internally. Should the user desire to use any non-default parameter values
for any functions included here, they should be supplied to this function
as additional arguments formatted exactly as they would appear in their
corresponding function(s). E.g. if the &quot;autodetect&quot; feature in
<code>pathviewr::separate_trajectories()</code> is desired, add an argument
<code>max_frame_gap = "autodetect"</code> to the arguments supplied to this
function.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that has passed
through several <code>pathviewr</code> functions as desired by the user,
resulting in data that have been cleaned and ready for analyses.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other all in one functions: 
<code><a href="#topic+import_and_clean_viewr">import_and_clean_viewr</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

motive_full &lt;-
  motive_data %&gt;%
  clean_viewr(desired_percent = 50,
              max_frame_gap = "autodetect",
              span = 0.95)

## Alternatively, used the import_and_clean_viewr()
## function to combine these steps
motive_import_and_clean &lt;-
  import_and_clean_viewr(
    file_name = system.file("extdata", "pathviewr_motive_example_data.csv",
                            package = 'pathviewr'),
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )
</code></pre>

<hr>
<h2 id='clean_viewr_batch'>Batch clean viewr files</h2><span id='topic+clean_viewr_batch'></span>

<h3>Description</h3>

<p>For a list of viewr objects, run through the pipeline (from relabel axes
up through get full trajectories, as desired) via clean_viewr()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_viewr_batch(obj_list, file_announce = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_viewr_batch_+3A_obj_list">obj_list</code></td>
<td>
<p>A list of viewr objects (i.e. a list of tibbles that each
have attribute <code>pathviewr_steps</code> that includes <code>"viewr"</code>)</p>
</td></tr>
<tr><td><code id="clean_viewr_batch_+3A_file_announce">file_announce</code></td>
<td>
<p>Should the function report each time a file is
processed? Default FALSE; if TRUE, a message will appear in the console
each time a file has been cleaned successfully.</p>
</td></tr>
<tr><td><code id="clean_viewr_batch_+3A_...">...</code></td>
<td>
<p>Arguments to be passed in that specify how this function should
clean files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>viewr objects should be in a list, e.g. the object generated by
<code>import_batch()</code>.
</p>
<p>See <code>clean_viewr()</code> for details of how cleaning steps are handled
and/or refer to the corresponding cleaning functions themselves.
</p>


<h3>Value</h3>

<p>A list of viewr objects (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that have been passed
through the corresponding cleaning functions.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other batch functions: 
<code><a href="#topic+bind_viewr_objects">bind_viewr_objects</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Since we only have one example file of each type provided
## in pathviewr, we will simply import the same example multiple
## times to simulate batch importing. Replace the contents of
## the following list with your own list of files to be imported.

## Make a list of the same example file 3x
import_list &lt;-
  c(rep(
    system.file("extdata", "pathviewr_motive_example_data.csv",
                package = 'pathviewr'),
    3
  ))

## Batch import
motive_batch_imports &lt;-
  import_batch(import_list,
               import_method = "motive",
               import_messaging = TRUE)

## Batch cleaning of these imported files
## via clean_viewr_batch()
motive_batch_cleaned &lt;-
  clean_viewr_batch(
    file_announce = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Alternatively, use import_and_clean_batch() to
## combine import with cleaning on a batch of files
motive_batch_import_and_clean &lt;-
  import_and_clean_batch(
    import_list,
    import_method = "motive",
    import_messaging = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Each of these lists of objects can be bound into
## one viewr object (i.e. one tibble) via
## bind_viewr_objects()
motive_bound_one &lt;-
  bind_viewr_objects(motive_batch_cleaned)

motive_bound_two &lt;-
  bind_viewr_objects(motive_batch_import_and_clean)

## Either route results in the same object ultimately:
identical(motive_bound_one, motive_bound_two)
</code></pre>

<hr>
<h2 id='deg_2_rad'>Convert degrees to radians</h2><span id='topic+deg_2_rad'></span>

<h3>Description</h3>

<p>Convert degrees to radians
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deg_2_rad(deg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deg_2_rad_+3A_deg">deg</code></td>
<td>
<p>Degrees (a numeric of any length &gt;= 1)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The angle(s) in radians (as a numeric vector of the same length)
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## One input
deg_2_rad(90)

## Multiple inputs
deg_2_rad(c(5, 10, 15, 20))
</code></pre>

<hr>
<h2 id='exclude_by_velocity'>Remove trajectories entirely, based on velocity thresholds</h2><span id='topic+exclude_by_velocity'></span>

<h3>Description</h3>

<p>Remove trajectories from a viewr object that contain instances of velocity
known to be spurious.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exclude_by_velocity(obj_name, vel_min = NULL, vel_max = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exclude_by_velocity_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="exclude_by_velocity_+3A_vel_min">vel_min</code></td>
<td>
<p>Default <code>NULL</code>. If a numeric is entered, trajectories
that have at least one observation with velocity less than <code>vel_min</code>
are removed.</p>
</td></tr>
<tr><td><code id="exclude_by_velocity_+3A_vel_max">vel_max</code></td>
<td>
<p>Default <code>NULL</code>. If a numeric is entered, trajectories
that have at least one observation with velocity greater than
<code>vel_max</code> are removed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new viewr object that is identical to the input object but now
excludes any trajectories that contain observations with velocity less than
<code>vel_min</code> (if specified) and/or velocity greater than <code>vel_max</code>
(if specified)
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import and clean the example Motive data
motive_import_and_clean &lt;-
  import_and_clean_viewr(
    file_name = system.file("extdata", "pathviewr_motive_example_data.csv",
                            package = 'pathviewr'),
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## See the distribution of velocities
hist(motive_import_and_clean$velocity)

## Let's remove any trajectories that contain
## velocity &lt; 2
motive_vel_filtered &lt;-
  motive_import_and_clean %&gt;%
  exclude_by_velocity(vel_min = 2)

## See how the distribution of velocities has changed
hist(motive_vel_filtered$velocity)
</code></pre>

<hr>
<h2 id='fill_traj_gaps'>Interpolate gaps within trajectories</h2><span id='topic+fill_traj_gaps'></span>

<h3>Description</h3>

<p>Use LOESS smoothing to fill in gaps of missing data within trajectories in
a viewr object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_traj_gaps(
  obj_name,
  loess_degree = 1,
  loess_criterion = c("aicc", "gcv"),
  loess_family = c("gaussian", "symmetric"),
  loess_user_span = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fill_traj_gaps_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>. Trajectories must be
predefined (i.e. via <code>separate_trajectories()</code>).</p>
</td></tr>
<tr><td><code id="fill_traj_gaps_+3A_loess_degree">loess_degree</code></td>
<td>
<p>See &quot;degree&quot; argument of fANCOVA::loess.as()</p>
</td></tr>
<tr><td><code id="fill_traj_gaps_+3A_loess_criterion">loess_criterion</code></td>
<td>
<p>See &quot;criterion&quot; argument of fANCOVA::loess.as()</p>
</td></tr>
<tr><td><code id="fill_traj_gaps_+3A_loess_family">loess_family</code></td>
<td>
<p>See &quot;family&quot; argument of fANCOVA::loess.as()</p>
</td></tr>
<tr><td><code id="fill_traj_gaps_+3A_loess_user_span">loess_user_span</code></td>
<td>
<p>See &quot;user.span&quot; argument of fANCOVA::loess.as()</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is strongly recommended that the input viewr object be &quot;cleaned&quot;
via <code>select_x_percent()</code> -&gt; <code>separate_trajectories()</code> -&gt;
<code>get_full_trajectories()</code> prior to using this function. Doing so will
ensure that only trajectories with minor gaps will be used in your
analyses. This function will then enable you to interpolate missing data in
those minor gaps.
</p>
<p>Interpolation is handled by first fitting a series of LOESS regressions
(via <code>fANCOVA::loess.as()</code>). In each regression, a position axis (e.g.
<code>position_length</code>) is regressed against <code>frame</code> (<code>frame</code> is
x-axis). From that relationship, values of missing position data are
determined and then inserted into the original data set.
</p>
<p>See <a href="fANCOVA.html#topic+loess.as">loess.as</a> for further details on parameters.
</p>


<h3>Value</h3>

<p>A viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that now includes new
observations (rows) as a result of interpolation to fill in missing data. A
new column <code>gaps_filled</code> is added to the data to indicate original
data (&quot;No&quot;) vs data that have been inserted to fill gaps (&quot;Yes&quot;).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Clean, isolate, and label trajectories
motive_full &lt;-
  motive_data %&gt;%
  clean_viewr(desired_percent = 50,
              max_frame_gap = "autodetect",
              span = 0.95)

## Interpolate missing data via this function
motive_filling &lt;-
 motive_full %&gt;%
 fill_traj_gaps()

## plot all trajectories (before)
plot_viewr_trajectories(motive_full, multi_plot = TRUE)
## plot all trajectories(after)
plot_viewr_trajectories(motive_filling, multi_plot = TRUE)
</code></pre>

<hr>
<h2 id='find_curve_elbow'>Find the &quot;elbow&quot; of a curve.</h2><span id='topic+find_curve_elbow'></span>

<h3>Description</h3>

<p>For bivariate data that show monotonic decreases (e.g. plots of trajectory
count vs. frame gap allowed, or scree plots from PCAs), this function will
find the &quot;elbow&quot; point. This is done by drawing an (imaginary) line between
the first observation and the final observation. Then, the distance between
that line and each observation is calculated. The &quot;elbow&quot; of the curve is the
observation that maximizes this distance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_curve_elbow(data_frame, export_type = "row_num", plot_curve = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_curve_elbow_+3A_data_frame">data_frame</code></td>
<td>
<p>A two-column data frame (numeric entries only), ordered
x-axis first, y-axis second.</p>
</td></tr>
<tr><td><code id="find_curve_elbow_+3A_export_type">export_type</code></td>
<td>
<p>If &quot;row_num&quot; (the default), the row number of the elbow
point is returned. If anything else, the entire row of the original data
frame is returned.</p>
</td></tr>
<tr><td><code id="find_curve_elbow_+3A_plot_curve">plot_curve</code></td>
<td>
<p>Default FALSE; should the curve be plotted?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>export_type</code> is <code>row_num</code> the row number of the elbow
point is returned. If anything else is used for that argument, the entire
row of the original data frame on which the &quot;elbow&quot; is located is returned.
If <code>plot_curve</code> is <code>TRUE</code>, the curve is plotted along with a
vertical line drawn at the computed elbow point.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(x = seq(1:10),
                 y = 1/seq(1:10))
plot(df)
find_curve_elbow(df, plot_curve = TRUE)
</code></pre>

<hr>
<h2 id='gather_tunnel_data'>Gather data columns into key-value pairs</h2><span id='topic+gather_tunnel_data'></span>

<h3>Description</h3>

<p>Reformat <code>viewr</code> data into a &quot;tidy&quot; format so that every row corresponds
to the position (and potentially rotation) of a single subject during an
observed frame and time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gather_tunnel_data(obj_name, NA_drop = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gather_tunnel_data_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="gather_tunnel_data_+3A_na_drop">NA_drop</code></td>
<td>
<p>Should rows with NAs be dropped? Defaults to <code>TRUE</code></p>
</td></tr>
<tr><td><code id="gather_tunnel_data_+3A_...">...</code></td>
<td>
<p>Additional arguments that can be passed to other <code>pathviewr</code>
functions such as <code>relabel_viewr_axes()</code> or <code>read_motive_csv()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The tibble or data.frame that is fed in must have variables that
have subject names and axis names separated by underscores. Axis names must
be one of the following: <code>position_length</code>, <code>position_width</code>, or
<code>position_height</code>. Each of these three dimensions must be present in the
data. Collectively, this means that names like <code>bird01_position_length</code>
or <code>larry_position_height</code> are acceptable, but <code>bird01_x</code> or
<code>bird01_length</code> are not.
</p>


<h3>Value</h3>

<p>A tibble in &quot;tidy&quot; format which is formatted to have every row
correspond to the position (and potentially rotation) of a single subject
during an observed frame and time. Subjects' names are automatically parsed
from original variable names (e.g. subject1_rotation_width extracts
&quot;subject1&quot; as the subject name) and stored in a <code>Subjects</code> column in the
returned tibble.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the Motive example data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## First use relabel_viewr_axes() to rename these variables using _length,
## _width, and _height instead
motive_data_relabeled &lt;- relabel_viewr_axes(motive_data)

## Now use gather_tunnel_data() to gather colums into tidy format
motive_data_gathered &lt;- gather_tunnel_data(motive_data_relabeled)

## Column names reflect the way in which data were reformatted:
names(motive_data_gathered)
</code></pre>

<hr>
<h2 id='get_2d_angle'>Compute an angle in 2D space</h2><span id='topic+get_2d_angle'></span>

<h3>Description</h3>

<p>Compute an angle in 2D space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_2d_angle(x1, y1, x2, y2, x3, y3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_2d_angle_+3A_x1">x1</code></td>
<td>
<p>x-coordinate of first point</p>
</td></tr>
<tr><td><code id="get_2d_angle_+3A_y1">y1</code></td>
<td>
<p>y-coordinate of first point</p>
</td></tr>
<tr><td><code id="get_2d_angle_+3A_x2">x2</code></td>
<td>
<p>x-coordinate of second point (vertex)</p>
</td></tr>
<tr><td><code id="get_2d_angle_+3A_y2">y2</code></td>
<td>
<p>y-coordinate of second point (vertex)</p>
</td></tr>
<tr><td><code id="get_2d_angle_+3A_x3">x3</code></td>
<td>
<p>x-coordinate of third point</p>
</td></tr>
<tr><td><code id="get_2d_angle_+3A_y3">y3</code></td>
<td>
<p>y-coordinate of third point</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Everything supplied to arguments must be numeric values or vectors
of numeric values. The second point (x2, y2) is treated as the vertex, and
the angle between the three points in 2D space is computed.
</p>


<h3>Value</h3>

<p>A numeric vector that provides the angular measurement in degrees.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_2d_angle(
  0, 1,
  0, 0,
  1, 0)
</code></pre>

<hr>
<h2 id='get_3d_angle'>Compute an angle in 3D space</h2><span id='topic+get_3d_angle'></span>

<h3>Description</h3>

<p>Compute an angle in 3D space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_3d_angle(x1, y1, z1, x2, y2, z2, x3, y3, z3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_3d_angle_+3A_x1">x1</code></td>
<td>
<p>x-coordinate of first point</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_y1">y1</code></td>
<td>
<p>y-coordinate of first point</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_z1">z1</code></td>
<td>
<p>z-coordinate of first point</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_x2">x2</code></td>
<td>
<p>x-coordinate of second point (vertex)</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_y2">y2</code></td>
<td>
<p>y-coordinate of second point (vertex)</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_z2">z2</code></td>
<td>
<p>y-coordinate of second point (vertex)</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_x3">x3</code></td>
<td>
<p>x-coordinate of third point</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_y3">y3</code></td>
<td>
<p>y-coordinate of third point</p>
</td></tr>
<tr><td><code id="get_3d_angle_+3A_z3">z3</code></td>
<td>
<p>z-coordinate of third point</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Everything supplied to arguments must be numeric values or vectors
of numeric values. The second point (x2, y2, z2) is treated as the vertex,
and the angle between the three points in 3D space is computed.
</p>


<h3>Value</h3>

<p>A numeric vector that provides the angular measurement in degrees.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_3d_angle(
  0, 1, 0,
  0, 0, 0,
  1, 0, 0)
</code></pre>

<hr>
<h2 id='get_3d_cross_prod'>Compute the cross product of two 3D vectors</h2><span id='topic+get_3d_cross_prod'></span>

<h3>Description</h3>

<p>Compute the cross product of two 3D vectors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_3d_cross_prod(v1, v2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_3d_cross_prod_+3A_v1">v1</code></td>
<td>
<p>First vector, as c(x,y,z)</p>
</td></tr>
<tr><td><code id="get_3d_cross_prod_+3A_v2">v2</code></td>
<td>
<p>Second vector, as c(x,y,z)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length 3 that describes the cross-product
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>v1 &lt;- c(1, 1, 3)
v2 &lt;- c(3, 1, 3)
get_3d_cross_prod(v1, v2)
</code></pre>

<hr>
<h2 id='get_dist_point_line'>Compute distance between a point and a line</h2><span id='topic+get_dist_point_line'></span>

<h3>Description</h3>

<p>Compute distance between a point and a line
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dist_point_line(point, line_coord1, line_coord2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dist_point_line_+3A_point">point</code></td>
<td>
<p>2D or 3D coordinates of the point as c(x,y) or c(x,y,z)</p>
</td></tr>
<tr><td><code id="get_dist_point_line_+3A_line_coord1">line_coord1</code></td>
<td>
<p>2D or 3D coordinates of one point on the line as c(x,y) or
c(x,y,z)</p>
</td></tr>
<tr><td><code id="get_dist_point_line_+3A_line_coord2">line_coord2</code></td>
<td>
<p>2D or 3D coordinates of a second point on the line as
c(x,y) or c(x,y,z)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function accepts 2D coordinates or 3D coordinates, but note that
the dimensions of all supplied arguments must match; all coordinates must
be 2D or they all must be 3D.
</p>


<h3>Value</h3>

<p>A numeric vector of length 1 that provides the euclidean distance
between the point and the line.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## 2D case
get_dist_point_line(
  point = c(0, 0),
  line_coord1 = c(1, 0),
  line_coord2 = c(1, 5)
)

## 3D case
get_dist_point_line(
  point = c(0, 0, 0),
  line_coord1 = c(1, 0, 0),
  line_coord2 = c(1, 5, 0)
)
</code></pre>

<hr>
<h2 id='get_full_trajectories'>Retain trajectories that span a selected region of interest</h2><span id='topic+get_full_trajectories'></span>

<h3>Description</h3>

<p>Specify a minimum span of the selected region of interest and then keep
trajectories that are wider than that span and go from one end to the other
of the region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_full_trajectories(obj_name, span = 0.8, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_full_trajectories_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="get_full_trajectories_+3A_span">span</code></td>
<td>
<p>Span to use; must be numeric and between 0 and 1</p>
</td></tr>
<tr><td><code id="get_full_trajectories_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Because trajectories may not have observations exactly at the
beginning or the end of the region of interest, it may be necessary to allow
trajectories to be slightly shorter than the range of the selected region of
interest. The <code>span</code> parameter of this function handles this. By
supplying a numeric proportion from 0 to 1, a user may allow trajectories to
span that proportion of the selected region. For example, setting <code>span
= 0.95</code> will keep all trajectories that span 95% of the length of the
selected region of interest. Setting <code>span = 1</code> (not recommended) will
strictly keep trajectories that start and end at the exact cut-offs of the
selected region of interest. For these reasons, <code>span</code>s of 0.99 to 0.95
are generally recommended.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which only
trajectories that span the region of interest are retained. Data are
labeled by direction  (either &quot;leftwards&quot; or &quot;rightwards&quot;) with respect to
their starting and ending <code>position_length</code> values in the
<code>direction</code> column.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other functions that define or clean trajectories: 
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "separate" step before running select_x_percent().
motive_separated &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect",
                        frame_rate_proportion = 0.1)

## Now retain only the "full" trajectories that span
## across 0.95 of the range of position_length
motive_full &lt;-
  motive_separated %&gt;%
  get_full_trajectories(span = 0.95)
</code></pre>

<hr>
<h2 id='get_header_viewr'>Extract header info from imported viewr object</h2><span id='topic+get_header_viewr'></span>

<h3>Description</h3>

<p>A function to quickly return the information stored in the header of the
original data file imported via <code>pathviewr</code>'s <code>read_</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_header_viewr(obj_name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_header_viewr_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>
<code>pathviewr_steps</code></p>
</td></tr>
<tr><td><code id="get_header_viewr_+3A_...">...</code></td>
<td>
<p>Additional arguments that may be passed to other <code>pathviewr</code>
functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of the <code>header</code> attribute, or NULL if no exact match
is found and no or more than one partial match is found.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the Motive example data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Now display the Header information
get_header_viewr(motive_data)
</code></pre>

<hr>
<h2 id='get_sf'>Estimate the spatial frequency of visual stimuli from the subject's
perspective in an experimental tunnel.</h2><span id='topic+get_sf'></span>

<h3>Description</h3>

<p>Estimate the spatial frequency of visual stimuli from the subject's
perspective in an experimental tunnel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sf(obj_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_sf_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> and
<code>vis_angles_calculated</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_sf()</code> assumes the following:
</p>

<ul>
<li><p> The subject's gaze is fixed at the point on the either side of the tunnel
that minimizes the distance to visual stimuli and therefore maximizes visual
angles.
</p>
</li>
<li><p> The subject's head is facing parallel to the length axis of the tunnel.
Visual perception functions in future versions of pathviewr will integrate
head orientation coordinates.
Spatial frequency is reported in cycles/degree and is the inverse of visual
angle (degrees/cycle).
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble or data.frame with added variables for
<code>sf_pos</code>, <code>sf_neg</code>, and <code>sf_end</code>.
angle.
</p>


<h3>Author(s)</h3>

<p>Eric R. Press
</p>


<h3>See Also</h3>

<p>Other visual perception functions: 
<code><a href="#topic+calc_min_dist_box">calc_min_dist_box</a>()</code>,
<code><a href="#topic+get_vis_angle">get_vis_angle</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Import sample data from package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))
flydra_data &lt;-
  read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                              package = 'pathviewr'),
                              subject_name = "birdie_sanders")

 ## Process data up to and including get_vis_angle()
motive_data_full &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  insert_treatments(tunnel_config = "v",
                   perch_2_vertex = 0.4,
                   vertex_angle = 90,
                   tunnel_length = 2,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30") %&gt;%
  calc_min_dist_v(simplify_output = TRUE) %&gt;%
  get_vis_angle() %&gt;%

  ## Now calculate the spatial frequencies
  get_sf()

  flydra_data_full &lt;-
  flydra_data %&gt;%
  redefine_tunnel_center(length_method = "middle",
                        height_method = "user-defined",
                        height_zero = 1.44) %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  insert_treatments(tunnel_config = "box",
                   tunnel_length = 3,
                   tunnel_width = 1,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30") %&gt;%
  calc_min_dist_box() %&gt;%
  get_vis_angle() %&gt;%

  ## Now calculate the spatial frequencies
  get_sf()
</code></pre>

<hr>
<h2 id='get_traj_velocities'>Recompute trajectory-specific velocities</h2><span id='topic+get_traj_velocities'></span>

<h3>Description</h3>

<p>Recompute trajectory-specific velocities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_traj_velocities(
  obj_name,
  time_col = "time_sec",
  length_col = "position_length",
  width_col = "position_width",
  height_col = "position_height",
  set_init_vel_zero = FALSE,
  velocity_min = NA,
  velocity_max = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_traj_velocities_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_time_col">time_col</code></td>
<td>
<p>Name of the column containing time</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_length_col">length_col</code></td>
<td>
<p>Name of the column containing length dimension</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_width_col">width_col</code></td>
<td>
<p>Name of the column containing width dimension</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_height_col">height_col</code></td>
<td>
<p>Name of the column containing height dimension</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_set_init_vel_zero">set_init_vel_zero</code></td>
<td>
<p>Should the first value be zero or can it be a
duplicate of the second velocity value? Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_velocity_min">velocity_min</code></td>
<td>
<p>Should data below a certain velocity be filtered out of
the object? If so, enter a numeric. If not, keep NA.</p>
</td></tr>
<tr><td><code id="get_traj_velocities_+3A_velocity_max">velocity_max</code></td>
<td>
<p>Should data above a certain velocity be filtered out of
the object? If so, enter a numeric. If not, keep NA.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Instantaneous velocity is not truly &quot;instantaneous&quot; but rather is
approximated as the change in distance divided by change in time from one
observation (row) to the previous observation (row). Each component of
velocity is computed (i.e. per axis) along with the overall velocity of
the subject.
</p>


<h3>Value</h3>

<p>If <code>add_to_viewr</code> is <code>TRUE</code>, additional columns are
appended to the input viewr object. If <code>FALSE</code>, a standalone tibble is
created. Either way, an &quot;instantaneous&quot; velocity is computed as the
difference in position divided by the difference in time as each successive
row is encountered. Additionally, velocities along each of the three
position axes are computed and provided as additional columns.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>

<hr>
<h2 id='get_velocity'>Get instantaneous velocity for subjects</h2><span id='topic+get_velocity'></span>

<h3>Description</h3>

<p>Velocity (both overall and per-axis) is computed for each row in the data
(see Details)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_velocity(
  obj_name,
  time_col = "time_sec",
  length_col = "position_length",
  width_col = "position_width",
  height_col = "position_height",
  add_to_viewr = TRUE,
  velocity_min = NA,
  velocity_max = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_velocity_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="get_velocity_+3A_time_col">time_col</code></td>
<td>
<p>Name of the column containing time</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_length_col">length_col</code></td>
<td>
<p>Name of the column containing length dimension</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_width_col">width_col</code></td>
<td>
<p>Name of the column containing width dimension</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_height_col">height_col</code></td>
<td>
<p>Name of the column containing height dimension</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_add_to_viewr">add_to_viewr</code></td>
<td>
<p>Default TRUE; should velocity data be added as new
columns or should this function create a new simpler object?</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_velocity_min">velocity_min</code></td>
<td>
<p>Should data below a certain velocity be filtered out of
the object? If so, enter a numeric. If not, keep NA.</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_velocity_max">velocity_max</code></td>
<td>
<p>Should data above a certain velocity be filtered out of
the object? If so, enter a numeric. If not, keep NA.</p>
</td></tr>
<tr><td><code id="get_velocity_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to or from other pathviewr functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Instantaneous velocity is not truly &quot;instantaneous&quot; but rather is
approximated as the change in distance divided by change in time from one
observation (row) to the previous observation (row). Each component of
velocity is computed (i.e. per axis) along with the overall velocity of
the subject.
</p>


<h3>Value</h3>

<p>If <code>add_to_viewr</code> is <code>TRUE</code>, additional columns are
appended to the input viewr object. If <code>FALSE</code>, a standalone tibble is
created. Either way, an &quot;instantaneous&quot; velocity is computed as the
difference in position divided by the difference in time as each successive
row is encountered. Additionally, velocities along each of the three
position axes are computed and provided as additional columns.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga and Melissa S. Armstrong
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+rad_2_deg">rad_2_deg</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "standarization" step before running get_velocity().
 motive_cleaned &lt;-
   motive_data %&gt;%
   relabel_viewr_axes() %&gt;%
   gather_tunnel_data() %&gt;%
   trim_tunnel_outliers() %&gt;%
   rotate_tunnel()

## Now compute velocity and add as columns
 motive_velocity_added &lt;-
   motive_cleaned %&gt;%
   get_velocity(add_to_viewr = TRUE)

## Or set add_to_viewr to FALSE for a standalone object
 motive_velocity_standalone &lt;-
   motive_cleaned %&gt;%
   get_velocity(add_to_viewr = TRUE)
</code></pre>

<hr>
<h2 id='get_vis_angle'>Estimate visual angles from a subject's perspective in an experimental tunnel</h2><span id='topic+get_vis_angle'></span>

<h3>Description</h3>

<p>Estimate visual angles from a subject's perspective in an experimental tunnel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_vis_angle(obj_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_vis_angle_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with
attributes <code>pathviewr_steps</code> that include <code>"viewr"</code>
and <code>min_dist_calculated</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_vis_angle()</code> assumes the following:
</p>

<ul>
<li><p> The subject's gaze is fixed at the point on the either side of the tunnel
that minimizes the distance to visual stimuli and therefore maximizes visual
angles.
</p>
</li>
<li><p> The subject's head is facing parallel to the length axis of the tunnel.
Visual perception functions in future versions of pathviewr will integrate
head orientation coordinates.
Angles are reported in radians/cycle (<code>vis_angle_pos_rad</code>) and
degrees/cycle (<code>vis_angle_pos_deg</code>).
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble or data.frame with added variables for
<code>vis_angle_pos_rad</code>, <code>vis_angle_pos_deg</code>,
<code>vis_angle_neg_rad</code>, <code>vos_angle_neg_deg</code>,
<code>vis_angle_end_rad</code>, and <code>vis_angle_end_deg</code>.
</p>


<h3>Author(s)</h3>

<p>Eric R. Press
</p>


<h3>See Also</h3>

<p>Other visual perception functions: 
<code><a href="#topic+calc_min_dist_box">calc_min_dist_box</a>()</code>,
<code><a href="#topic+get_sf">get_sf</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Import sample data from package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))
flydra_data &lt;-
  read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                              package = 'pathviewr'),
                              subject_name = "birdie_sanders")

 ## Process data up to and including get_min_dist()
motive_data_full &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  insert_treatments(tunnel_config = "v",
                   perch_2_vertex = 0.4,
                   vertex_angle = 90,
                   tunnel_length = 2,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30") %&gt;%
  calc_min_dist_v(simplify_output = TRUE) %&gt;%

  ## Now calculate the visual angles
  get_vis_angle()

  flydra_data_full &lt;-
  flydra_data %&gt;%
  redefine_tunnel_center(length_method = "middle",
                        height_method = "user-defined",
                        height_zero = 1.44) %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  insert_treatments(tunnel_config = "box",
                   tunnel_length = 3,
                   tunnel_width = 1,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30") %&gt;%
  calc_min_dist_box() %&gt;%

   ## Now calculate the visual angles
  get_vis_angle()
</code></pre>

<hr>
<h2 id='import_and_clean_batch'>Batch import and clean files</h2><span id='topic+import_and_clean_batch'></span>

<h3>Description</h3>

<p>Like <code>clean_viewr_batch()</code>, but with import as the first step too
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_and_clean_batch(
  file_path_list,
  import_method = c("flydra", "motive"),
  file_id = NA,
  subject_name = NULL,
  frame_rate = NULL,
  simplify_marker_naming = TRUE,
  import_messaging = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_and_clean_batch_+3A_file_path_list">file_path_list</code></td>
<td>
<p>A list of file paths leading to files to be imported.</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_import_method">import_method</code></td>
<td>
<p>Either &quot;flydra&quot; or &quot;motive&quot;</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_file_id">file_id</code></td>
<td>
<p>(Optional) identifier for this file. If not supplied, this
defaults to <code>basename(file_name)</code>.</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_subject_name">subject_name</code></td>
<td>
<p>For Flydra, the subject name applied to all files</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_frame_rate">frame_rate</code></td>
<td>
<p>For Flydra, the frame rate applied to all files</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_simplify_marker_naming">simplify_marker_naming</code></td>
<td>
<p>For Motive, if Markers are encountered, should
they be renamed from &quot;Subject:marker&quot; to &quot;marker&quot;? Defaults to TRUE</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_import_messaging">import_messaging</code></td>
<td>
<p>Should this function report each time a file has been
processed?</p>
</td></tr>
<tr><td><code id="import_and_clean_batch_+3A_...">...</code></td>
<td>
<p>Additional arguments to specify how data should be cleaned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>viewr objects should be in a list, e.g. the object generated by
<code>import_batch()</code>.
</p>
<p>See <code>clean_viewr()</code> for details of how cleaning steps are handled
and/or refer to the corresponding cleaning functions themselves.
</p>


<h3>Value</h3>

<p>A list of viewr objects (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that have been passed
through the corresponding cleaning functions.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data import functions: 
<code><a href="#topic+as_viewr">as_viewr</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>,
<code><a href="#topic+read_flydra_mat">read_flydra_mat</a>()</code>,
<code><a href="#topic+read_motive_csv">read_motive_csv</a>()</code>
</p>
<p>Other batch functions: 
<code><a href="#topic+bind_viewr_objects">bind_viewr_objects</a>()</code>,
<code><a href="#topic+clean_viewr_batch">clean_viewr_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Since we only have one example file of each type provided
## in pathviewr, we will simply import the same example multiple
## times to simulate batch importing. Replace the contents of
## the following list with your own list of files to be imported.

## Make a list of the same example file 3x
import_list &lt;-
  c(rep(
    system.file("extdata", "pathviewr_motive_example_data.csv",
                package = 'pathviewr'),
    3
  ))

## Batch import
motive_batch_imports &lt;-
  import_batch(import_list,
               import_method = "motive",
               import_messaging = TRUE)

## Batch cleaning of these imported files
## via clean_viewr_batch()
motive_batch_cleaned &lt;-
  clean_viewr_batch(
    file_announce = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Alternatively, use import_and_clean_batch() to
## combine import with cleaning on a batch of files
motive_batch_import_and_clean &lt;-
  import_and_clean_batch(
    import_list,
    import_method = "motive",
    import_messaging = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Each of these lists of objects can be bound into
## one viewr object (i.e. one tibble) via
## bind_viewr_objects()
motive_bound_one &lt;-
  bind_viewr_objects(motive_batch_cleaned)

motive_bound_two &lt;-
  bind_viewr_objects(motive_batch_import_and_clean)

## Either route results in the same object ultimately:
identical(motive_bound_one, motive_bound_two)
</code></pre>

<hr>
<h2 id='import_and_clean_viewr'>Import + clean_viewr()</h2><span id='topic+import_and_clean_viewr'></span>

<h3>Description</h3>

<p>Import a file and then, akin to <code>clean_viewr</code>, run through as many
cleaning steps as desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_and_clean_viewr(
  file_name,
  file_id = NA,
  relabel_viewr_axes = TRUE,
  gather_tunnel_data = TRUE,
  trim_tunnel_outliers = TRUE,
  standardization_option = "rotate_tunnel",
  get_velocity = TRUE,
  select_x_percent = TRUE,
  rename_viewr_characters = FALSE,
  separate_trajectories = TRUE,
  get_full_trajectories = TRUE,
  fill_traj_gaps = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_and_clean_viewr_+3A_file_name">file_name</code></td>
<td>
<p>Target file</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_file_id">file_id</code></td>
<td>
<p>Optional</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_relabel_viewr_axes">relabel_viewr_axes</code></td>
<td>
<p>default TRUE, should axes be relabeled?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_gather_tunnel_data">gather_tunnel_data</code></td>
<td>
<p>default TRUE, should tunnel data be gathered?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_trim_tunnel_outliers">trim_tunnel_outliers</code></td>
<td>
<p>default TRUE, outliers be trimmed?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_standardization_option">standardization_option</code></td>
<td>
<p>default &quot;rotate_tunnel&quot;; which standardization
option should be used? See Details for more.</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_get_velocity">get_velocity</code></td>
<td>
<p>default TRUE, should velocity be computed?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_select_x_percent">select_x_percent</code></td>
<td>
<p>default TRUE, should a region of interest be
selected?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_rename_viewr_characters">rename_viewr_characters</code></td>
<td>
<p>default FALSE, should subjects be renamed?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_separate_trajectories">separate_trajectories</code></td>
<td>
<p>default TRUE, should trajectories be defined?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_get_full_trajectories">get_full_trajectories</code></td>
<td>
<p>default TRUE, should only full trajectories be
retained?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_fill_traj_gaps">fill_traj_gaps</code></td>
<td>
<p>default FALSE, should gaps in trajectories be filled?</p>
</td></tr>
<tr><td><code id="import_and_clean_viewr_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the corresponding functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each argument corresponds to a standalone function in
<code>pathviewr</code>. E.g. the parameter <code>relabel_viewr_axes</code> allows a
user to choose whether <code>pathviewr::relabel_viewr_axes()</code> is run
internally. Should the user desire to use any non-default parameter values
for any functions included here, they should be supplied to this function
as additional arguments formatted exactly as they would appear in their
corresponding function(s). E.g. if the &quot;autodetect&quot; feature in
<code>pathviewr::separate_trajectories()</code> is desired, add an argument
<code>max_frame_gap = "autodetect"</code> to the arguments supplied to this
function.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that has passed
through several <code>pathviewr</code> functions as desired by the user,
resulting in data that have been cleaned and ready for analyses.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other all in one functions: 
<code><a href="#topic+clean_viewr">clean_viewr</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

motive_full &lt;-
  motive_data %&gt;%
  clean_viewr(desired_percent = 50,
              max_frame_gap = "autodetect",
              span = 0.95)

## Alternatively, used the import_and_clean_viewr()
## function to combine these steps
motive_import_and_clean &lt;-
  import_and_clean_viewr(
    file_name = system.file("extdata", "pathviewr_motive_example_data.csv",
                            package = 'pathviewr'),
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )
</code></pre>

<hr>
<h2 id='import_batch'>Batch import of files for either Motive or Flydra (but not a mix of both)</h2><span id='topic+import_batch'></span>

<h3>Description</h3>

<p>Batch import of files for either Motive or Flydra (but not a mix of both)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_batch(
  file_path_list,
  import_method = c("flydra", "motive"),
  file_id = NA,
  subject_name = NULL,
  frame_rate = NULL,
  simplify_marker_naming = TRUE,
  import_messaging = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_batch_+3A_file_path_list">file_path_list</code></td>
<td>
<p>A list of file paths</p>
</td></tr>
<tr><td><code id="import_batch_+3A_import_method">import_method</code></td>
<td>
<p>Either &quot;flydra&quot; or &quot;motive&quot;</p>
</td></tr>
<tr><td><code id="import_batch_+3A_file_id">file_id</code></td>
<td>
<p>Optional</p>
</td></tr>
<tr><td><code id="import_batch_+3A_subject_name">subject_name</code></td>
<td>
<p>For Flydra, the assigned subject name</p>
</td></tr>
<tr><td><code id="import_batch_+3A_frame_rate">frame_rate</code></td>
<td>
<p>For Flydra, the assigned frame rate</p>
</td></tr>
<tr><td><code id="import_batch_+3A_simplify_marker_naming">simplify_marker_naming</code></td>
<td>
<p>default TRUE; for Motive, whether marker naming
should be simplified</p>
</td></tr>
<tr><td><code id="import_batch_+3A_import_messaging">import_messaging</code></td>
<td>
<p>default FALSE; should this function report each time
a file has been imported?</p>
</td></tr>
<tr><td><code id="import_batch_+3A_...">...</code></td>
<td>
<p>Additional arguments (may remove this if needed)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Refer to <code>read_motive_csv()</code> and <code>read_flydra_mat()</code> for
details of data import methods.
</p>


<h3>Value</h3>

<p>A list of viewr objects (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data import functions: 
<code><a href="#topic+as_viewr">as_viewr</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+read_flydra_mat">read_flydra_mat</a>()</code>,
<code><a href="#topic+read_motive_csv">read_motive_csv</a>()</code>
</p>
<p>Other batch functions: 
<code><a href="#topic+bind_viewr_objects">bind_viewr_objects</a>()</code>,
<code><a href="#topic+clean_viewr_batch">clean_viewr_batch</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Since we only have one example file of each type provided
## in pathviewr, we will simply import the same example multiple
## times to simulate batch importing. Replace the contents of
## the following list with your own list of files to be imported.

## Make a list of the same example file 3x
import_list &lt;-
  c(rep(
    system.file("extdata", "pathviewr_motive_example_data.csv",
                package = 'pathviewr'),
    3
  ))

## Batch import
motive_batch_imports &lt;-
  import_batch(import_list,
               import_method = "motive",
               import_messaging = TRUE)

## Batch cleaning of these imported files
## via clean_viewr_batch()
motive_batch_cleaned &lt;-
  clean_viewr_batch(
    file_announce = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Alternatively, use import_and_clean_batch() to
## combine import with cleaning on a batch of files
motive_batch_import_and_clean &lt;-
  import_and_clean_batch(
    import_list,
    import_method = "motive",
    import_messaging = TRUE,
    motive_batch_imports,
    desired_percent = 50,
    max_frame_gap = "autodetect",
    span = 0.95
  )

## Each of these lists of objects can be bound into
## one viewr object (i.e. one tibble) via
## bind_viewr_objects()
motive_bound_one &lt;-
  bind_viewr_objects(motive_batch_cleaned)

motive_bound_two &lt;-
  bind_viewr_objects(motive_batch_import_and_clean)

## Either route results in the same object ultimately:
identical(motive_bound_one, motive_bound_two)
</code></pre>

<hr>
<h2 id='insert_treatments'>Inserts treatment and experiment information</h2><span id='topic+insert_treatments'></span>

<h3>Description</h3>

<p>Adds information about treatment and experimental set up to viewr objects for
analysis in other pathviewr functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>insert_treatments(
  obj_name,
  tunnel_config = "box",
  perch_2_vertex = NULL,
  vertex_angle = NULL,
  tunnel_width = NULL,
  tunnel_length = NULL,
  stim_param_lat_pos = NULL,
  stim_param_lat_neg = NULL,
  stim_param_end_pos = NULL,
  stim_param_end_neg = NULL,
  treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="insert_treatments_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_tunnel_config">tunnel_config</code></td>
<td>
<p>The configuration of the experimental tunnel.
Currently, pathviewr supports rectangular &quot;box&quot; and V-shaped tunnel
configurations.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_perch_2_vertex">perch_2_vertex</code></td>
<td>
<p>If using a V-shaped tunnel, this is the vertical
distance between the vertex and the height of the perches. If the tunnel does
not have perches, insert the vertical distance between the vertex and the
height of the origin (0,0,0).</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_vertex_angle">vertex_angle</code></td>
<td>
<p>If using a V-shaped tunnel, the angle of the vertex (in
degrees) <code>vertex_angle</code> defaults to 90.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_tunnel_width">tunnel_width</code></td>
<td>
<p>If using a box-shaped tunnel, the width of the tunnel.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_tunnel_length">tunnel_length</code></td>
<td>
<p>The length of the tunnel.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_stim_param_lat_pos">stim_param_lat_pos</code></td>
<td>
<p>The size of the stimulus on the lateral positive
wall of the tunnel. Eg. for 10cm wide gratings,
<code>stim_param_lat_pos</code> = 0.1.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_stim_param_lat_neg">stim_param_lat_neg</code></td>
<td>
<p>The size of the stimulus on the lateral negative
wall of the tunnel..</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_stim_param_end_pos">stim_param_end_pos</code></td>
<td>
<p>The size of the stimulus on the end positive
wall of the tunnel.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_stim_param_end_neg">stim_param_end_neg</code></td>
<td>
<p>The size of the stimulus on the end negative
wall of the tunnel.</p>
</td></tr>
<tr><td><code id="insert_treatments_+3A_treatment">treatment</code></td>
<td>
<p>The name of the treatment assigned to all rows of the viewr
object. Currently only able to accept a single treatment per viewr data
object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All length measurements reported in meters.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"treatments added"</code>). Depending
on the argument <code>tunnel_config</code>, the viewr object also includes
columns storing the values of the supplied arguments. This experimental
information is also stored in the viewr object's metadata
</p>


<h3>Author(s)</h3>

<p>Eric R. Press
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+clean_by_span">clean_by_span</a>()</code>,
<code><a href="#topic+remove_duplicate_frames">remove_duplicate_frames</a>()</code>,
<code><a href="#topic+remove_vel_anomalies">remove_vel_anomalies</a>()</code>,
<code><a href="#topic+set_traj_frametime">set_traj_frametime</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Import sample data from package
 motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))
 flydra_data &lt;-
 read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                              package = 'pathviewr'),
                              subject_name = "birdie_sanders")

  ## Clean data up to and including get_full_trajectories()
motive_data_full &lt;-
 motive_data %&gt;%
 relabel_viewr_axes() %&gt;%
 gather_tunnel_data() %&gt;%
 trim_tunnel_outliers() %&gt;%
 rotate_tunnel() %&gt;%
 select_x_percent(desired_percent = 50) %&gt;%
 separate_trajectories(max_frame_gap = "autodetect") %&gt;%
 get_full_trajectories(span = 0.95)

 flydra_data_full &lt;-
  flydra_data %&gt;%
  redefine_tunnel_center(length_method = "middle",
                        height_method = "user-defined",
                        height_zero = 1.44) %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = "autodetect") %&gt;%
  get_full_trajectories(span = 0.95)


## Now add information about the experimental configuration. In this example,
## a V-shaped tunnel in which the vertex is 90deg and lies 0.40m below the
## origin. The visual stimuli on the lateral and end walls have a cycle
## length of 0.1m and 0.3m respectively, and the treatment is labeled
## "lat10_end30"

motive_v &lt;-
motive_data_full %&gt;%
 insert_treatments(tunnel_config = "v",
                   perch_2_vertex = 0.4,
                   vertex_angle = 90,
                   tunnel_length = 2,
                   stim_param_lat_pos = 0.1,
                   stim_param_lat_neg = 0.1,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat10_end_30")

# For an experiment using the box-shaped configuration where the tunnel is 1m
# wide and 3m long and the visual stimuli on the lateral and end walls have a
# cycle length of 0.2 and 0.3m, respectively, and the treatment is labeled
# "lat20_end30".

flydra_box &lt;-
 flydra_data_full %&gt;%
 insert_treatments(tunnel_config = "box",
                   tunnel_width = 1,
                   tunnel_length = 3,
                   stim_param_lat_pos = 0.2,
                   stim_param_lat_neg = 0.2,
                   stim_param_end_pos = 0.3,
                   stim_param_end_neg = 0.3,
                   treatment = "lat20_end30")

## Check out the new columns in the resulting objects
names(motive_v)
names(flydra_box)
</code></pre>

<hr>
<h2 id='pathviewr-package'>pathviewr: Wrangle, Analyze, and Visualize Animal Movement Data</h2><span id='topic+pathviewr'></span><span id='topic+pathviewr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Tools to import, clean, and visualize movement data, particularly from motion capture systems such as Optitrack's 'Motive', the Straw Lab's 'Flydra', or from other sources. We provide functions to remove artifacts, standardize tunnel position and tunnel axes, select a region of interest, isolate specific trajectories, fill gaps in trajectory data, and calculate 3D and per-axis velocity. For experiments of visual guidance, we also provide functions that use subject position to estimate perception of visual stimuli.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Vikram B. Baliga <a href="mailto:vbaliga87@gmail.com">vbaliga87@gmail.com</a> (<a href="https://orcid.org/0000-0002-9367-8974">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Melissa S. Armstrong <a href="mailto:melissa.armstrong@gmail.com">melissa.armstrong@gmail.com</a> (<a href="https://orcid.org/0000-0002-3059-0094">ORCID</a>)
</p>
</li>
<li><p> Eric R. Press <a href="mailto:epress12@gmail.com">epress12@gmail.com</a> (<a href="https://orcid.org/0000-0002-1944-3755">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Anne-Sophie Bonnet-Lebrun [reviewer]
</p>
</li>
<li><p> Marco Sciaini [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ropensci/pathviewr/">https://github.com/ropensci/pathviewr/</a>
</p>
</li>
<li> <p><a href="https://docs.ropensci.org/pathviewr/">https://docs.ropensci.org/pathviewr/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/pathviewr/issues/">https://github.com/ropensci/pathviewr/issues/</a>
</p>
</li></ul>


<hr>
<h2 id='plot_by_subject'>Plot trajectories and density plots of position by subject</h2><span id='topic+plot_by_subject'></span>

<h3>Description</h3>

<p>Plots all trajectories and generates density plots of position by subject
from elevation and bird's eye views.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_by_subject(obj_name, col_by_treat = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_by_subject_+3A_obj_name">obj_name</code></td>
<td>
<p>A viewr object (a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that has been passed
through <code>separate_trajectories()</code> or <code>get_full_trajectories()</code>.</p>
</td></tr>
<tr><td><code id="plot_by_subject_+3A_col_by_treat">col_by_treat</code></td>
<td>
<p>If multiple treatments or sessions, color data per
treatment or session. Treatments must be levels in a column named
<code>treatment</code>.</p>
</td></tr>
<tr><td><code id="plot_by_subject_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input viewr object should have passed through
<code>separate_trajectories()</code> or <code>get_full_trajectories()</code>.
Optionally, treatments should have been added as levels in a column named
<code>treatment</code>. Two plots will be produced, one from a &quot;bird's eye view&quot;
of width against length and one from an &quot;elevation view&quot; of height against
length. All trajectories will be plotted on a per subject basis, along with
density plots of width or height depending on the view.
<code>col_by_treat = TRUE</code>, data will be plotted by color according to
treatment in both the trajectory plots and the density plots.
</p>


<h3>Value</h3>

<p>A &quot;bird's eye view&quot; plot and an &quot;elevation view&quot; plot, made via
ggplot2.
</p>


<h3>Author(s)</h3>

<p>Melissa S. Armstrong
</p>


<h3>See Also</h3>

<p>Other plotting functions: 
<code><a href="#topic+plot_viewr_trajectories">plot_viewr_trajectories</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)
library(ggplot2)
library(magrittr)

if (interactive()) {
  ## Import the example Motive data included in the package
  motive_data &lt;-
    read_motive_csv(system.file("extdata",
                                "pathviewr_motive_example_data.csv",
                                package = 'pathviewr'))

  ## Clean, isolate, and label trajectories
  motive_full &lt;-
    motive_data %&gt;%
    clean_viewr(desired_percent = 50,
                max_frame_gap = "autodetect",
                span = 0.95)

  ## Plot all trajectories by subject
  motive_full %&gt;%
    plot_by_subject()

  ## Add treatment information
  motive_full$treatment &lt;- c(rep("latA", 100), rep("latB", 100),
                             rep("latA", 100), rep("latB", 149))

  ## Plot all trajectories by subject, color by treatment
  motive_full %&gt;%
    plot_by_subject(col_by_treat = TRUE)
}
</code></pre>

<hr>
<h2 id='plot_viewr_trajectories'>Plot each trajectory within a viewr object</h2><span id='topic+plot_viewr_trajectories'></span>

<h3>Description</h3>

<p>Plot each trajectory within a viewr object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_viewr_trajectories(
  obj_name,
  plot_axes = c("length", "width"),
  multi_plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_viewr_trajectories_+3A_obj_name">obj_name</code></td>
<td>
<p>A viewr object (a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) that has been passed
through <code>separate_trajectories()</code> or <code>get_full_trajectories()</code>.</p>
</td></tr>
<tr><td><code id="plot_viewr_trajectories_+3A_plot_axes">plot_axes</code></td>
<td>
<p>Which position axes should be plotted? A character vector
including exactly two of the following choices must be supplied:
<code>length</code>, <code>width</code>, <code>height</code>. Default is c(&quot;length&quot;,
&quot;width&quot;).</p>
</td></tr>
<tr><td><code id="plot_viewr_trajectories_+3A_multi_plot">multi_plot</code></td>
<td>
<p>Should separate plots (one per trajectory) be created or
should one multi-plot grid be generated. Defaults to FALSE, which produces
separate plots.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A (base-R) series of plots or single plot (if <code>multi_plot =
  TRUE</code>) that depict each trajectory along the chosen axes.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other plotting functions: 
<code><a href="#topic+plot_by_subject">plot_by_subject</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

motive_full &lt;-
  motive_data %&gt;%
  clean_viewr(desired_percent = 50,
              max_frame_gap = "autodetect",
              span = 0.95)

plot_viewr_trajectories(motive_full, multi_plot = FALSE)
plot_viewr_trajectories(motive_full, multi_plot = TRUE)
</code></pre>

<hr>
<h2 id='quick_separate_trajectories'>Quick version of separate_trajectories()</h2><span id='topic+quick_separate_trajectories'></span>

<h3>Description</h3>

<p>Mostly meant for internal use but available nevertheless.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quick_separate_trajectories(obj_name, max_frame_gap = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quick_separate_trajectories_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="quick_separate_trajectories_+3A_max_frame_gap">max_frame_gap</code></td>
<td>
<p>Unlike the corresponding parameter in
<code>separate_trajectories</code>, must be a single numeric here.</p>
</td></tr>
<tr><td><code id="quick_separate_trajectories_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed to separate rows of data into separately
labeled trajectories.
</p>
<p>The <code>max_frame_gap</code> parameter determines how trajectories will be
separated. <code>max_frame_gap</code> defines the largest permissible gap in data
before a new trajectory is forced to be defined. In this function, only a
single numeric can be supplied to this parameter (unlike the case in
<code>separate_trajectories</code>).
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which a new column
<code>file_sub_traj</code> is added, which labels trajectories within the data by
concatenating file name, subject name, and a trajectory number (all
separated by underscores).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other functions that define or clean trajectories: 
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This function is not recommended for general use.
## See separate_trajectories() instead
</code></pre>

<hr>
<h2 id='rad_2_deg'>Convert radians to degrees</h2><span id='topic+rad_2_deg'></span>

<h3>Description</h3>

<p>Convert radians to degrees
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rad_2_deg(rad)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rad_2_deg_+3A_rad">rad</code></td>
<td>
<p>Radians (a numeric of any length &gt;= 1)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The angle(s) in degrees (as a numeric vector of the same length)
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other mathematical functions: 
<code><a href="#topic+calc_min_dist_v">calc_min_dist_v</a>()</code>,
<code><a href="#topic+deg_2_rad">deg_2_rad</a>()</code>,
<code><a href="#topic+find_curve_elbow">find_curve_elbow</a>()</code>,
<code><a href="#topic+get_2d_angle">get_2d_angle</a>()</code>,
<code><a href="#topic+get_3d_angle">get_3d_angle</a>()</code>,
<code><a href="#topic+get_3d_cross_prod">get_3d_cross_prod</a>()</code>,
<code><a href="#topic+get_dist_point_line">get_dist_point_line</a>()</code>,
<code><a href="#topic+get_traj_velocities">get_traj_velocities</a>()</code>,
<code><a href="#topic+get_velocity">get_velocity</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## One input
rad_2_deg(pi/2)

## Multiple inputs
rad_2_deg(c(pi / 2, pi, 2 * pi))
</code></pre>

<hr>
<h2 id='read_flydra_mat'>Import data from a MAT file exported from Flydra software</h2><span id='topic+read_flydra_mat'></span>

<h3>Description</h3>

<p><code>read_flydra_mat()</code> is designed to import data from a <code>.mat</code> file
that has been exported from Flydra software. The resultant object is a tibble
that additionally has important metadata stored as attributes (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_flydra_mat(mat_file, file_id = NA, subject_name, frame_rate = 100, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_flydra_mat_+3A_mat_file">mat_file</code></td>
<td>
<p>A file (or path to file) in .mat format, exported from Flydra</p>
</td></tr>
<tr><td><code id="read_flydra_mat_+3A_file_id">file_id</code></td>
<td>
<p>(Optional) identifier for this file. If not supplied, this
defaults to <code>basename(file_name)</code>.</p>
</td></tr>
<tr><td><code id="read_flydra_mat_+3A_subject_name">subject_name</code></td>
<td>
<p>Name that will be assigned to the subject</p>
</td></tr>
<tr><td><code id="read_flydra_mat_+3A_frame_rate">frame_rate</code></td>
<td>
<p>The capture frame rate of the session</p>
</td></tr>
<tr><td><code id="read_flydra_mat_+3A_...">...</code></td>
<td>
<p>Additional arguments that may be passed from other pathviewr
functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with numerical data in columns. The first two columns will
have frame numbers and time (assumed to be in secs), respectively. Columns
3 through 5 will contain position data. Note that unlike the behavior of
<code>read_motive_csv()</code> this function produces &quot;tidy&quot; data that have
already been gathered into key-value pairs based on subject.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_motive_csv">read_motive_csv</a></code> for importing Motive data
</p>
<p>Other data import functions: 
<code><a href="#topic+as_viewr">as_viewr</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>,
<code><a href="#topic+read_motive_csv">read_motive_csv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Flydra data included in the package
flydra_data &lt;-
  read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                             package = 'pathviewr'),
                  subject_name = "birdie_wooster")

## Names of variables in the resulting tibble
names(flydra_data)

## A variety of metadata are stored as attributes. Of particular interest:
attr(flydra_data, "pathviewr_steps")
</code></pre>

<hr>
<h2 id='read_motive_csv'>Import data from a CSV exported from Optitrack's Motive software</h2><span id='topic+read_motive_csv'></span>

<h3>Description</h3>

<p><code>read_motive_csv()</code> is designed to import data from a CSV that has been
exported from Optitrack's Motive software. The resultant object is a tibble
that additionally has important metadata stored as attributes (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_motive_csv(file_name, file_id = NA, simplify_marker_naming = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_motive_csv_+3A_file_name">file_name</code></td>
<td>
<p>A file (or path to file) in CSV format</p>
</td></tr>
<tr><td><code id="read_motive_csv_+3A_file_id">file_id</code></td>
<td>
<p>(Optional) identifier for this file. If not supplied, this
defaults to <code>basename(file_name)</code>.</p>
</td></tr>
<tr><td><code id="read_motive_csv_+3A_simplify_marker_naming">simplify_marker_naming</code></td>
<td>
<p>If Markers are encountered, should they be
renamed from &quot;Subject:marker&quot; to &quot;marker&quot;? Defaults to TRUE</p>
</td></tr>
<tr><td><code id="read_motive_csv_+3A_...">...</code></td>
<td>
<p>Additional arguments passed from other <code>pathviewr</code> functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Uses <code>data.table::fread()</code> to import data from a CSV file and
ultimately store it in a tibble. This object is also labeled with the
attribute <code>pathviewr_steps</code> with value <code>viewr</code> to indicate that it
has been imported by <code>pathviewr</code> and should be friendly towards use with
other functions in our package. Additionally, the following metadata are
stored in the tibble's attributes: header information from the Motive CSV
file (<code>header</code>), original IDs for each object (<code>Motive_IDs</code>), the
name of each subject in each data column (<code>subject_names_full</code>) and
unique values of subject names (<code>subject_names_simple</code>), the type of
data (rigid body or marker) that appears in each column
(<code>data_types_full</code>) and overall (<code>data_types_simple</code>), and original
data column names in the CSV (<code>d1, d2</code>). See Example below for example
code to inspect attributes.
</p>


<h3>Value</h3>

<p>A tibble with numerical data in columns. The first two columns will
have frame numbers and time (assumed to be in secs), respectively. Columns 3
and beyond will contain the numerical data on the position or rotation of
rigid bodies and/or markers that appear in the Motive CSV file. Each row
corresponds to the position or rotation of all objects at a given time
(frame).
</p>


<h3>Warning</h3>

<p>This function was written to read CSVs exported using Motive's Format Version
1.23 and is not guaranteed to work with those from other versions. Please
file an Issue on our Github page if you encounter any problems.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_flydra_mat">read_flydra_mat</a></code> for importing Flydra data
</p>
<p>Other data import functions: 
<code><a href="#topic+as_viewr">as_viewr</a>()</code>,
<code><a href="#topic+import_and_clean_batch">import_and_clean_batch</a>()</code>,
<code><a href="#topic+import_batch">import_batch</a>()</code>,
<code><a href="#topic+read_flydra_mat">read_flydra_mat</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Names of variables in the resulting tibble
names(motive_data)

## A variety of metadata are stored as attributes. Of particular interest:
attr(motive_data, "pathviewr_steps")
attr(motive_data, "file_id")
attr(motive_data, "header")
attr(motive_data, "Motive_IDs")
attr(motive_data, "subject_names_full")
attr(motive_data, "subject_names_simple")
attr(motive_data, "motive_data_names")
attr(motive_data, "motive_data_types_full")
attr(motive_data, "motive_data_types_simple")

## Of course, all attributes can be viewed as a (long) list via:
attributes(motive_data)

</code></pre>

<hr>
<h2 id='redefine_tunnel_center'>&quot;Center&quot; the tunnel data, i.e. translation but no rotation</h2><span id='topic+redefine_tunnel_center'></span>

<h3>Description</h3>

<p>Redefine the center <code>(0, 0, 0,)</code> of the tunnel data via translating
positions along axes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redefine_tunnel_center(
  obj_name,
  axes = c("position_length", "position_width", "position_height"),
  length_method = c("original", "middle", "median", "user-defined"),
  width_method = c("original", "middle", "median", "user-defined"),
  height_method = c("original", "middle", "median", "user-defined"),
  length_zero = NA,
  width_zero = NA,
  height_zero = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="redefine_tunnel_center_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_axes">axes</code></td>
<td>
<p>Names of axes to be centered</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_length_method">length_method</code></td>
<td>
<p>Method for length</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_width_method">width_method</code></td>
<td>
<p>Method for width</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_height_method">height_method</code></td>
<td>
<p>Method for height</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_length_zero">length_zero</code></td>
<td>
<p>User-defined value</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_width_zero">width_zero</code></td>
<td>
<p>User-defined value</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_height_zero">height_zero</code></td>
<td>
<p>User-defined value</p>
</td></tr>
<tr><td><code id="redefine_tunnel_center_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each <code>_method</code> argument, there are four choices of how centering is
handled: 1) &quot;original&quot; keeps axis as is &ndash; this is how width and (possibly)
height should be handled for flydra data; 2) &quot;middle&quot; is the middle of the
range of data: (min + max) / 2; 3) &quot;median&quot; is the median value of data on
that axis. Probably not recommended; and 4) &quot;user-defined&quot; lets the user
customize where the (0, 0, 0) point in the tunnel will end up. Each
<code>_zero</code> argument is subtracted from its corresponding axis' data.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data have
been translated according to the user's inputs, generally with <code>(0, 0,
  0,)</code> being relocated to the center of the tunnel.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other tunnel standardization functions: 
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the Flydra example data included in
## the package
flydra_data &lt;-
  read_flydra_mat(
    system.file("extdata",
                "pathviewr_flydra_example_data.mat",
                package = 'pathviewr'),
    subject_name = "birdie_wooster"
  )

## Re-center the Flydra data set.
## Width will be untouched
## Length will use the "middle" definition
## And height will be user-defined to be
## zeroed at 1.44 on the original axis
flydra_centered &lt;-
  flydra_data %&gt;%
  redefine_tunnel_center(length_method = "middle",
                         height_method = "user-defined",
                         height_zero = 1.44)
</code></pre>

<hr>
<h2 id='relabel_viewr_axes'>Relabel the dimensions as length, width, and height</h2><span id='topic+relabel_viewr_axes'></span>

<h3>Description</h3>

<p>Axes are commonly labeled as &quot;x&quot;, &quot;y&quot;, and &quot;z&quot; in recording software yet
<code>pathviewr</code> functions require these to be labeled as &quot;length&quot;, &quot;width&quot;,
and &quot;height&quot;. <code>relabel_viewr_axes()</code> is a function that takes a
<code>viewr</code> object and allows the user to rename its variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relabel_viewr_axes(
  obj_name,
  tunnel_length = "_z",
  tunnel_width = "_x",
  tunnel_height = "_y",
  real = "_w",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relabel_viewr_axes_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="relabel_viewr_axes_+3A_tunnel_length">tunnel_length</code></td>
<td>
<p>The dimension that corresponds to tunnel length. Set to
<code>tunnel_length = "_z"</code> by default. Argument should contain a character
vector with a leading underscore (see Details)</p>
</td></tr>
<tr><td><code id="relabel_viewr_axes_+3A_tunnel_width">tunnel_width</code></td>
<td>
<p>The dimension that corresponds to tunnel width. Follows
the same conventions as <code>tunnel_length</code> and defaults to
<code>tunnel_length = "_x"</code></p>
</td></tr>
<tr><td><code id="relabel_viewr_axes_+3A_tunnel_height">tunnel_height</code></td>
<td>
<p>The dimension that corresponds to tunnel height. Follows
the same conventions as <code>tunnel_length</code> and defaults to
<code>tunnel_length = "_y"</code></p>
</td></tr>
<tr><td><code id="relabel_viewr_axes_+3A_real">real</code></td>
<td>
<p>The dimension that corresponds to the &quot;real&quot; parameter in
quaternion notation (for data with &quot;rotation&quot; values). Follows the same
conventions as <code>tunnel_length</code> and defaults to <code>real = "_w"</code></p>
</td></tr>
<tr><td><code id="relabel_viewr_axes_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code>read_motive_csv()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each argument must have a leading underscore (&quot;_&quot;) and each
argument must have an entry. E.g. tunnel_length = &quot;_Y&quot; will replace all
instances of _Y with _length in the names of variables.
</p>


<h3>Value</h3>

<p>A tibble or data.frame with variables that have been renamed.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(pathviewr)

## Import the Motive example data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Names of variables are labeled with _x, _y, _z, which we'd like to rename
names(motive_data)

## Now use relabel_viewr_axes() to rename these variables using _length,
## _width, and _height instead
motive_data_relabeled &lt;-
  relabel_viewr_axes(motive_data,
                     tunnel_length = "_z",
                     tunnel_width = "_x",
                     tunnel_height = "_y",
                     real = "_w")

## See the result
names(motive_data_relabeled)
</code></pre>

<hr>
<h2 id='remove_duplicate_frames'>Remove any duplicates or aliased frames within trajectories</h2><span id='topic+remove_duplicate_frames'></span>

<h3>Description</h3>

<p>Remove any duplicates or aliased frames within trajectories
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_duplicate_frames(obj_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_duplicate_frames_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The separate_trajectories() and get_full_trajectories() must be
run prior to use.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code>.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+clean_by_span">clean_by_span</a>()</code>,
<code><a href="#topic+insert_treatments">insert_treatments</a>()</code>,
<code><a href="#topic+remove_vel_anomalies">remove_vel_anomalies</a>()</code>,
<code><a href="#topic+set_traj_frametime">set_traj_frametime</a>()</code>
</p>

<hr>
<h2 id='remove_vel_anomalies'>Remove any rows which show sharp shifts in velocity that are likely due to
tracking errors</h2><span id='topic+remove_vel_anomalies'></span>

<h3>Description</h3>

<p>Remove any rows which show sharp shifts in velocity that are likely due to
tracking errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_vel_anomalies(
  obj_name,
  target = "velocity",
  method = "gesd",
  alpha = 0.05,
  max_anoms = 0.2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_vel_anomalies_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="remove_vel_anomalies_+3A_target">target</code></td>
<td>
<p>The column to target; defaults to &quot;velocity&quot;</p>
</td></tr>
<tr><td><code id="remove_vel_anomalies_+3A_method">method</code></td>
<td>
<p>The anomaly detection method; see anomalize::anomalize()</p>
</td></tr>
<tr><td><code id="remove_vel_anomalies_+3A_alpha">alpha</code></td>
<td>
<p>The width of the &quot;normal&quot; range; see anomalize::anomalize()</p>
</td></tr>
<tr><td><code id="remove_vel_anomalies_+3A_max_anoms">max_anoms</code></td>
<td>
<p>The max proportion of anomalies; see anomalize::anomalize()</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function runs anomalize::anomalize() on a per-trajectory basis.
The separate_trajectories() and get_full_trajectories() must be run prior
to use.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code>. Rows in which large anomalies were detected have
been removed. No additional columns are created.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+clean_by_span">clean_by_span</a>()</code>,
<code><a href="#topic+insert_treatments">insert_treatments</a>()</code>,
<code><a href="#topic+remove_duplicate_frames">remove_duplicate_frames</a>()</code>,
<code><a href="#topic+set_traj_frametime">set_traj_frametime</a>()</code>
</p>

<hr>
<h2 id='rename_viewr_characters'>Rename subjects in the data via pattern detection</h2><span id='topic+rename_viewr_characters'></span>

<h3>Description</h3>

<p>Quick utility function to use str_replace with mutate(across()) to batch-
rename subjects via pattern detection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename_viewr_characters(
  obj_name,
  target_column = "subject",
  pattern,
  replacement = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rename_viewr_characters_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="rename_viewr_characters_+3A_target_column">target_column</code></td>
<td>
<p>The target column; defaults to &quot;subject&quot;</p>
</td></tr>
<tr><td><code id="rename_viewr_characters_+3A_pattern">pattern</code></td>
<td>
<p>The (regex) pattern to be replaced</p>
</td></tr>
<tr><td><code id="rename_viewr_characters_+3A_replacement">replacement</code></td>
<td>
<p>The replacement text. Must be a character</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble or data frame in which subjects have been renamed according
to the <code>pattern</code> and <code>replacement</code> supplied by the user.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "gather" step before running rescale_tunnel_data().
 motive_gathered &lt;-
   motive_data %&gt;%
   relabel_viewr_axes() %&gt;%
   gather_tunnel_data()

## See the subject names
 unique(motive_gathered$subject)

## Now rename the subjects. We'll get rid of "device" and replace it
## with "subject"
motive_renamed &lt;-
  motive_gathered %&gt;%
  rename_viewr_characters(target_column = "subject",
                          pattern = "device",
                          replacement = "subject")

## See the new subject names
unique(motive_renamed$subject)
</code></pre>

<hr>
<h2 id='rescale_tunnel_data'>Rescale position data within a <code>viewr</code> object</h2><span id='topic+rescale_tunnel_data'></span>

<h3>Description</h3>

<p>Should data have been exported at an incorrect scale, apply an isometric
transformation to the position data and associated mean marker errors (if
found)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale_tunnel_data(obj_name, original_scale = 0.5, desired_scale = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_tunnel_data_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that has been passed
through <code>relabel_viewr_axes()</code> and <code>gather_tunnel_data()</code> (or is
structured as though it has been passed through those functions).</p>
</td></tr>
<tr><td><code id="rescale_tunnel_data_+3A_original_scale">original_scale</code></td>
<td>
<p>The original scale at which data were exported. See
Details if unknown.</p>
</td></tr>
<tr><td><code id="rescale_tunnel_data_+3A_desired_scale">desired_scale</code></td>
<td>
<p>The desired scale</p>
</td></tr>
<tr><td><code id="rescale_tunnel_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>desired_scale</code> is divided by the <code>original_scale</code> to
determine a <code>scale_ratio</code> internally. If the <code>original_scale</code> is
not explicitly known, set it to 1 and then set <code>desired_scale</code> to be
whatever scaling ratio you have in mind. E.g. setting <code>original_scale</code>
to 1 and then <code>desired_scale</code> to 0.7 will multiply all position axis
values by 0.7.
</p>
<p>The default arguments of <code>original_scale = 0.5</code> and
<code>desired_scale = 1</code> apply a doubling of tunnel size isometrically.
</p>


<h3>Value</h3>

<p>A <code>viewr</code> object that has position data (and
<code>mean_marker_error data</code>, if found) adjusted by the ratio of
<code>desired_scale/original_scale</code>.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "gather" step before running rescale_tunnel_data().
 motive_gathered &lt;-
   motive_data %&gt;%
   relabel_viewr_axes() %&gt;%
   gather_tunnel_data()

## Now rescale the tunnel data
motive_rescaled &lt;-
  motive_gathered %&gt;%
  rescale_tunnel_data(original_scale = 0.5,
                      desired_scale = 1)

## See the difference in data range e.g. for length
range(motive_rescaled$position_length)
range(motive_gathered$position_length)
</code></pre>

<hr>
<h2 id='rm_by_trajnum'>Remove subjects by trajectory number</h2><span id='topic+rm_by_trajnum'></span>

<h3>Description</h3>

<p>Specify a minimum number of trajectories that each subject must complete
during a treatment, trial, or session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_by_trajnum(
  obj_name,
  trajnum = 5,
  mirrored = FALSE,
  treatment1,
  treatment2,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm_by_trajnum_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>. Trajectories must be
predefined (i.e. via <code>separate_trajectories()</code>).</p>
</td></tr>
<tr><td><code id="rm_by_trajnum_+3A_trajnum">trajnum</code></td>
<td>
<p>Minimum number of trajectories; must be numeric.</p>
</td></tr>
<tr><td><code id="rm_by_trajnum_+3A_mirrored">mirrored</code></td>
<td>
<p>Does the data have mirrored treatments? If so, arguments
<code>treatment1</code> and <code>treatment2</code> must also be provided, indicating
the names of two mirrored treatments, both of which must meet the trajectory
threshold specified in <code>trajnum</code>. Default is FALSE.</p>
</td></tr>
<tr><td><code id="rm_by_trajnum_+3A_treatment1">treatment1</code></td>
<td>
<p>The first treatment or session during which the threshold
must be met.</p>
</td></tr>
<tr><td><code id="rm_by_trajnum_+3A_treatment2">treatment2</code></td>
<td>
<p>A second treatment or session during which the threshold
must be met.</p>
</td></tr>
<tr><td><code id="rm_by_trajnum_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Depending on analysis needs, users may want to remove subjects that
have not completed a certain number of trajectories during a treatment,
trial, or session. If <code>mirrored = FALSE</code>, no treatment information is
necessary and subjects will be removed based on total number of trajectories
as specified in <code>trajnum</code>. If <code>mirrored = TRUE</code>, the
<code>treatment1</code> and <code>treatment2</code> parameters will allow users to
define during which treatments or sessions subjects must reach threshold as
specified in the <code>trajnum</code> argument. For example, if <code>mirrored =
 TRUE</code>, setting <code>treatment1 = "latA"</code>, <code>treatment2 = "latB"</code> and
<code>trajnum = 5</code> will remove subjects that have fewer than 5 trajectories
during the <code>"latA"</code> treatment AND the <code>"latB"</code> treatment.
<code>treatment1</code> and <code>treatment2</code> should be levels within a column
named <code>"treatment"</code>.
</p>


<h3>Value</h3>

<p>A viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that now has fewer
observations (rows) as a result of removal of subjects with too few
trajectories according to the <code>trajnum</code> parameter.
</p>


<h3>Author(s)</h3>

<p>Melissa S. Armstrong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean, isolate, and label trajectories
motive_full &lt;-
  motive_data %&gt;%
  clean_viewr(desired_percent = 50,
              max_frame_gap = "autodetect",
              span = 0.95)

##Remove subjects that have not completed at least 150 trajectories:
motive_rm_unmirrored &lt;-
  motive_full %&gt;%
  rm_by_trajnum(trajnum = 150)

## Add treatment information
motive_full$treatment &lt;- c(rep("latA", 100),
                           rep("latB", 100),
                           rep("latA", 100),
                           rep("latB", 149))

## Remove subjects by that have not completed at least 10 trajectories in
## both treatments
motive_rm_mirrored &lt;-
  motive_full %&gt;%
  rm_by_trajnum(
    trajnum = 10,
    mirrored = TRUE,
    treatment1 = "latA",
    treatment2 = "latB"
  )
</code></pre>

<hr>
<h2 id='rotate_tunnel'>Rotate a tunnel so that perches are approximately aligned</h2><span id='topic+rotate_tunnel'></span>

<h3>Description</h3>

<p>The rotation is applied about the height axis and affects tunnel length and
width only, i.e. no rotation of height.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotate_tunnel(
  obj_name,
  all_heights_min = 0.11,
  all_heights_max = 0.3,
  perch1_len_min = -0.06,
  perch1_len_max = 0.06,
  perch2_len_min = 2.48,
  perch2_len_max = 2.6,
  perch1_wid_min = 0.09,
  perch1_wid_max = 0.31,
  perch2_wid_min = 0.13,
  perch2_wid_max = 0.35,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rotate_tunnel_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that has been passed
through <code>relabel_viewr_axes()</code> and <code>gather_tunnel_data()</code> (or is
structured as though it has been passed through those functions).</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_all_heights_min">all_heights_min</code></td>
<td>
<p>Minimum perch height</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_all_heights_max">all_heights_max</code></td>
<td>
<p>Maximum perch height</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch1_len_min">perch1_len_min</code></td>
<td>
<p>Minimum length value of perch 1</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch1_len_max">perch1_len_max</code></td>
<td>
<p>Maximum length value of perch 1</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch2_len_min">perch2_len_min</code></td>
<td>
<p>Minimum length value of perch 2</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch2_len_max">perch2_len_max</code></td>
<td>
<p>Maximum length value of perch 2</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch1_wid_min">perch1_wid_min</code></td>
<td>
<p>Minimum width value of perch 1</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch1_wid_max">perch1_wid_max</code></td>
<td>
<p>Maximum width value of perch 1</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch2_wid_min">perch2_wid_min</code></td>
<td>
<p>Minimum width value of perch 2</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_perch2_wid_max">perch2_wid_max</code></td>
<td>
<p>Maximum width value of perch 2</p>
</td></tr>
<tr><td><code id="rotate_tunnel_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user first estimates the locations of the perches by specifying
bounds for where each perch is located. The function then computes the
center of each bounding box and estimates that to be the midpoint of each
perch. Then the center point of the tunnel (center between the perch
midpoints) is estimated. The angle between perch1_center,
tunnel_center_point, and arbitrary point along the length axis
(tunnel_center_point - 1 on length) is estimated. That angle is then used
to rotate the data, again only in the length and width dimensions. Height
is standardized by (approximate) perch height; values greater than 0 are
above the perch and values less than 0 are below the perch level.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data have
been rotated according to user specifications.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other tunnel standardization functions: 
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "trimmed" step before running rotate_tunnel().
motive_trimmed &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers()

## Now rotate the tunnel using default values
motive_rotated &lt;-
  motive_trimmed %&gt;%
  rotate_tunnel()

## The following attributes store information about
## how rotation &amp; translation was applied
attr(motive_rotated, "rotation_degrees")
attr(motive_rotated, "rotation_radians")
attr(motive_rotated, "perch1_midpoint_original")
attr(motive_rotated, "perch1_midpoint_current")
attr(motive_rotated, "tunnel_centerpoint_original")
attr(motive_rotated, "perch2_midpoint_original")
attr(motive_rotated, "perch2_midpoint_current")
</code></pre>

<hr>
<h2 id='section_tunnel_by'>Bin data along a specified axis</h2><span id='topic+section_tunnel_by'></span>

<h3>Description</h3>

<p>Chop data into X sections (of equal size) along a specified axis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>section_tunnel_by(obj_name, axis = "position_length", number_of_sections = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="section_tunnel_by_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="section_tunnel_by_+3A_axis">axis</code></td>
<td>
<p>Chosen axis, must match name of column exactly</p>
</td></tr>
<tr><td><code id="section_tunnel_by_+3A_number_of_sections">number_of_sections</code></td>
<td>
<p>Total number of sections</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The idea is to bin the data along a specified axis, generally
<code>position_length</code>.
</p>


<h3>Value</h3>

<p>A new column added to the input data object called <code>section_id</code>,
which is an ordered factor that indicates grouping.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load data and run section_tunnel_by()
test_mat &lt;-
  read_flydra_mat(system.file("extdata", "pathviewr_flydra_example_data.mat",
                             package = 'pathviewr'),
                  subject_name = "birdie_wooster") %&gt;%
  redefine_tunnel_center(length_method = "middle",
                         height_method = "user-defined",
                         height_zero = 1.44) %&gt;%
  select_x_percent(desired_percent = 50) %&gt;%
  separate_trajectories(max_frame_gap = 1) %&gt;%
  get_full_trajectories(span = 0.95) %&gt;%
  section_tunnel_by(number_of_sections = 10)

## Plot; color by section ID
plot(test_mat$position_length,
     test_mat$position_width,
     asp = 1, col = as.factor(test_mat$section_id))
</code></pre>

<hr>
<h2 id='select_x_percent'>Select a region of interest within the tunnel</h2><span id='topic+select_x_percent'></span>

<h3>Description</h3>

<p>Select data in the middle X percent of the length of the tunnel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_x_percent(obj_name, desired_percent = 33, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_x_percent_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="select_x_percent_+3A_desired_percent">desired_percent</code></td>
<td>
<p>Numeric, the percent of the total length of the tunnel
that will define the region of interest. Measured from the center outwards.</p>
</td></tr>
<tr><td><code id="select_x_percent_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data outside
the region of interest have been removed.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "trimmed" step before running rotate_tunnel().
motive_rotated &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel()

## Now select the middle 50% of the tunnel
motive_selected &lt;-
  motive_rotated %&gt;%
  select_x_percent(desired_percent = 50)

## Compare the ranges of lengths to see the effect
range(motive_rotated$position_length)
range(motive_selected$position_length)
</code></pre>

<hr>
<h2 id='separate_trajectories'>Separate rows of data into separately labeled trajectories.</h2><span id='topic+separate_trajectories'></span>

<h3>Description</h3>

<p>Separate rows of data into separately labeled trajectories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>separate_trajectories(
  obj_name,
  max_frame_gap = 1,
  frame_rate_proportion = 0.1,
  frame_gap_messaging = FALSE,
  frame_gap_plotting = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="separate_trajectories_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="separate_trajectories_+3A_max_frame_gap">max_frame_gap</code></td>
<td>
<p>Default 1; defines the largest permissible gap in data
before a new trajectory is forced to be defined. Can be either a numeric
value or &quot;autodetect&quot;. See Details for more.</p>
</td></tr>
<tr><td><code id="separate_trajectories_+3A_frame_rate_proportion">frame_rate_proportion</code></td>
<td>
<p>Default 0.10; if <code>max_frame_gap =
  "autodetect"</code>, proportion of frame rate to be used as a reference (see
Details).</p>
</td></tr>
<tr><td><code id="separate_trajectories_+3A_frame_gap_messaging">frame_gap_messaging</code></td>
<td>
<p>Default FALSE; should frame gaps be reported in
the console?</p>
</td></tr>
<tr><td><code id="separate_trajectories_+3A_frame_gap_plotting">frame_gap_plotting</code></td>
<td>
<p>Default FALSE; should frame gap diagnostic plots be
shown?</p>
</td></tr>
<tr><td><code id="separate_trajectories_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed to separate rows of data into separately
labeled trajectories.
</p>
<p>The <code>max_frame_gap</code> parameter determines how trajectories will be
separated. If numeric, the function uses the supplied value as the largest
permissible gap in frames before a new trajectory is defined.
</p>
<p>If <code>max_frame_gap = "autodetect"</code> is used, the function
attempts to guesstimate the best value(s) of <code>max_frame_gap</code>. This is
performed separately for each subject in the data set, i.e. as many
<code>max_frame_gap</code> values will be estimated as there are unique subjects.
The highest possible value of any <code>max_frame_gap</code> is first set as a
proportion of the capture frame rate, as defined by the
<code>frame_rate_proportion</code> parameter (default 0.10). For each subject, a
plot of total trajectory counts vs. max frame gap values is created
internally (but can be plotted via setting
<code>frame_gap_plotting = TRUE</code>). As larger max frame gaps are allowed,
trajectory count will necessarily decrease but may reach a value that
likely represents the &quot;best&quot; option. The &quot;elbow&quot; of that plot is then used
to find an estimate of the best max frame gap value to use.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which a new column
<code>file_sub_traj</code> is added, which labels trajectories within the data by
concatenating file name, subject name, and a trajectory number (all
separated by underscores).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga and Melissa S. Armstrong
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other functions that define or clean trajectories: 
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "select" step before running select_x_percent().
motive_selected &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50)

## Now separate trajectories using autodetect
motive_separated &lt;-
  motive_selected %&gt;%
  separate_trajectories(max_frame_gap = "autodetect",
                        frame_rate_proportion = 0.1)

## See new column file_sub_traj for trajectory labeling
names(motive_separated)
</code></pre>

<hr>
<h2 id='set_traj_frametime'>Redefine frames and time stamps on a per-trajectory basis</h2><span id='topic+set_traj_frametime'></span>

<h3>Description</h3>

<p>After a data set has been separated into trajectories, find the earliest
frame in each trajectory and set the corresponding time to 0. All subsequent
time_sec stamps are computed according to successive frame numbering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_traj_frametime(obj_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_traj_frametime_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The separate_trajectories() and get_full_trajectories() must be
run prior to use. The initial traj_time and traj_frame values are set to 0
within each trajectory.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code>. New columns include traj_time (the
trajectory-specific time values) and traj_frame (the trajectory-specific
frame numbering).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+clean_by_span">clean_by_span</a>()</code>,
<code><a href="#topic+insert_treatments">insert_treatments</a>()</code>,
<code><a href="#topic+remove_duplicate_frames">remove_duplicate_frames</a>()</code>,
<code><a href="#topic+remove_vel_anomalies">remove_vel_anomalies</a>()</code>
</p>

<hr>
<h2 id='standardize_tunnel'>Rotate and center a tunnel based on landmarks</h2><span id='topic+standardize_tunnel'></span>

<h3>Description</h3>

<p>Similar to <code>rotate_tunnel()</code>; rotate and center tunnel data based on
landmarks (specific subjects in the data).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardize_tunnel(
  obj_name,
  landmark_one = "perch1",
  landmark_two = "perch2",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="standardize_tunnel_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that has been passed
through <code>relabel_viewr_axes()</code> and <code>gather_tunnel_data()</code> (or is
structured as though it has been passed through those functions).</p>
</td></tr>
<tr><td><code id="standardize_tunnel_+3A_landmark_one">landmark_one</code></td>
<td>
<p>Subject name of the first landmark</p>
</td></tr>
<tr><td><code id="standardize_tunnel_+3A_landmark_two">landmark_two</code></td>
<td>
<p>Subject name of the second landmark</p>
</td></tr>
<tr><td><code id="standardize_tunnel_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The center point of the tunnel is estimated as the point between the
two landmarks. It is therefore recommended that <code>landmark_one</code> and
<code>landmark_two</code> be objects that are placed on opposite ends of the
tunnel (e.g. in an avian flight tunnel, these landmarks may be perches that
are placed at the extreme ends). The angle between landmark_one,
tunnel_center_point, and arbitrary point along the length axis
(tunnel_center_point - 1 on length) is estimated. That angle is then used
to rotate the data, again only in the length and width dimensions. Height
is standardized by average landmark height; values greater than 0 are above
the landmarks and values less than 0 are below the landmark level.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data have
been rotated according to the positions of the landmarks in the data.
</p>


<h3>Warning</h3>

<p>The <code>position_length</code> values of landmark_one MUST be less than
the <code>position_length</code> values of landmark_two; otherwise,
the rotation will apply to a mirror-image of the tunnel
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>
<p>Other tunnel standardization functions: 
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example data that would work with this function are
## not included in this version of pathviewr. Please
## contact the package authors for further guidance
## should you need it.
</code></pre>

<hr>
<h2 id='trim_tunnel_outliers'>Trim out artifacts and other outliers from the extremes of the tunnel</h2><span id='topic+trim_tunnel_outliers'></span>

<h3>Description</h3>

<p>The user provides estimates of min and max values of data. This function then
trims out anything beyond these estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim_tunnel_outliers(
  obj_name,
  lengths_min = 0,
  lengths_max = 3,
  widths_min = -0.4,
  widths_max = 0.8,
  heights_min = -0.2,
  heights_max = 0.5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trim_tunnel_outliers_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that has been passed
through <code>relabel_viewr_axes()</code> and <code>gather_tunnel_data()</code> (or is
structured as though it has been passed through those functions).</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_lengths_min">lengths_min</code></td>
<td>
<p>Minimum length</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_lengths_max">lengths_max</code></td>
<td>
<p>Maximum length</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_widths_min">widths_min</code></td>
<td>
<p>Minimum width</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_widths_max">widths_max</code></td>
<td>
<p>Maximum width</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_heights_min">heights_min</code></td>
<td>
<p>Minimum height</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_heights_max">heights_max</code></td>
<td>
<p>Maximum height</p>
</td></tr>
<tr><td><code id="trim_tunnel_outliers_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Anything supplied to _min or _max arguments should be single numeric
values.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data outside
the specified ranges has been excluded.
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+visualize_frame_gap_choice">visualize_frame_gap_choice</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "gather" step before running trim_tunnel_outliers().
motive_gathered &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data()

## Now trim outliers using default values
motive_trimmed &lt;-
  motive_gathered %&gt;%
  trim_tunnel_outliers(lengths_min = 0,
                       lengths_max = 3,
                       widths_min = -0.4,
                       widths_max = 0.8,
                       heights_min = -0.2,
                       heights_max = 0.5)
</code></pre>

<hr>
<h2 id='visualize_frame_gap_choice'>Visualize the consequence of using various max_frame_gap values</h2><span id='topic+visualize_frame_gap_choice'></span>

<h3>Description</h3>

<p>Run separate_trajectories() with many different frame gaps to help determine
what value to use
</p>


<h3>Usage</h3>

<pre><code class='language-R'>visualize_frame_gap_choice(obj_name, loops = 20, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="visualize_frame_gap_choice_+3A_obj_name">obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td></tr>
<tr><td><code id="visualize_frame_gap_choice_+3A_loops">loops</code></td>
<td>
<p>How many total frame gap entries to consider. Each loop will
increase the <code>max_fram_gap</code> argument in <code>separate_trajectories</code>
by 1.</p>
</td></tr>
<tr><td><code id="visualize_frame_gap_choice_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input viewr object (<code>obj_name</code>) should likely be an object
that has passed through the <code>select_x_percent()</code> step.
</p>


<h3>Value</h3>

<p>A plot and a tibble, each of which shows the total number of
trajectories that result from using the specified range of
<code>max_frame_gap</code> values.
</p>


<h3>Author(s)</h3>

<p>Melissa S. Armstrong and Vikram B. Baliga
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code><a href="#topic+gather_tunnel_data">gather_tunnel_data</a>()</code>,
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+redefine_tunnel_center">redefine_tunnel_center</a>()</code>,
<code><a href="#topic+relabel_viewr_axes">relabel_viewr_axes</a>()</code>,
<code><a href="#topic+rename_viewr_characters">rename_viewr_characters</a>()</code>,
<code><a href="#topic+rotate_tunnel">rotate_tunnel</a>()</code>,
<code><a href="#topic+select_x_percent">select_x_percent</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>,
<code><a href="#topic+standardize_tunnel">standardize_tunnel</a>()</code>,
<code><a href="#topic+trim_tunnel_outliers">trim_tunnel_outliers</a>()</code>
</p>
<p>Other plotting functions: 
<code><a href="#topic+plot_by_subject">plot_by_subject</a>()</code>,
<code><a href="#topic+plot_viewr_trajectories">plot_viewr_trajectories</a>()</code>
</p>
<p>Other functions that define or clean trajectories: 
<code><a href="#topic+get_full_trajectories">get_full_trajectories</a>()</code>,
<code><a href="#topic+quick_separate_trajectories">quick_separate_trajectories</a>()</code>,
<code><a href="#topic+separate_trajectories">separate_trajectories</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pathviewr)

## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                             package = 'pathviewr'))

motive_selected &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  get_velocity() %&gt;%
  select_x_percent(desired_percent = 50)

visualize_frame_gap_choice(motive_selected, loops = 10)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
