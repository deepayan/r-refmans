<!DOCTYPE html><html lang="en"><head><title>Help for package decompr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {decompr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#decompr-package'><p>Global Value Chain Decomposition</p></a></li>
<li><a href='#decomp'><p>Interface Function for Decompositions</p></a></li>
<li><a href='#kww'><p>Koopman-Wang-Wei Decomposition of Gross Exports</p></a></li>
<li><a href='#leather'><p>Leather Example ICIO Data</p></a></li>
<li><a href='#leontief'><p>Leontief Decomposition</p></a></li>
<li><a href='#load_tables'><p>Load the Input-Output and Final Demand Tables: Depreciated Interface</p></a></li>
<li><a href='#load_tables_vectors'><p>Load the Input-Output and Final Demand Tables</p></a></li>
<li><a href='#wwz'><p>Wang-Wei-Zhu Decomposition of Gross Exports</p></a></li>
<li><a href='#wwz2kww'><p>Koopman-Wang-Wei from Wang-Wei-Zhu Decomposition</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>6.4.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Global Value Chain Decomposition</td>
</tr>
<tr>
<td>Description:</td>
<td>Three global value chain (GVC) decompositions are implemented. 
    The Leontief decomposition derives the value added origin of exports by 
    country and industry as in Hummels, Ishii and Yi (2001). The Koopman, 
    Wang and Wei (2014) decomposition splits country-level exports into 9 
    value added components, and the Wang, Wei and Zhu (2013) decomposition 
    splits bilateral exports into 16 value added components. Various GVC 
    indicators based on these decompositions are computed in the 
    complimentary 'gvc' package. 
    &mdash; References: &mdash;
    Hummels, D., Ishii, J., &amp; Yi, K. M. (2001). The nature and growth of 
       vertical specialization in world trade. Journal of international 
       Economics, 54(1), 75-96.
    Koopman, R., Wang, Z., &amp; Wei, S. J. (2014). Tracing value-added and double 
       counting in gross exports. American Economic Review, 104(2), 459-94.
    Wang, Z., Wei, S. J., &amp; Zhu, K. (2013). Quantifying international production 
       sharing at the bilateral and sector levels (No. w19677). 
       National Bureau of Economic Research.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bastiaan Quast &lt;bquast@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>matrixStats</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://qua.st/decompr/">https://qua.st/decompr/</a>, <a href="https://github.com/bquast/decompr">https://github.com/bquast/decompr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bquast/decompr/issues">https://github.com/bquast/decompr/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>gvc, testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-19 09:27:16 UTC; bquast</td>
</tr>
<tr>
<td>Author:</td>
<td>Bastiaan Quast <a href="https://orcid.org/0000-0002-2951-3577"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Fei Wang [aut],
  Victor Stolzenburg [aut],
  Oliver Reiter [ctb],
  Sebastian Krantz [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-19 09:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='decompr-package'>Global Value Chain Decomposition</h2><span id='topic+decompr-package'></span>

<h3>Description</h3>

<p>Three global value chain (GVC) decompositions are implemented. The Leontief decomposition 
derives the value added origin of exports by country and industry as in Hummels, Ishii and Yi (2001). 
The Koopman, Wang and Wei (2014) decomposition splits country-level exports into 9 value added components, 
and the Wang, Wei and Zhu (2013) decomposition splits bilateral exports into 16 value added components. 
Various GVC indicators based on these decompositions are computed in the complimentary 'gvc' package.
</p>


<h3>Contents</h3>

<p>Interface function for quick analysis
</p>
<p><code><a href="#topic+decomp">decomp()</a></code>
</p>
<p>Function to load ICIO table and create a 'decompr' object
</p>
<p><code><a href="#topic+load_tables_vectors">load_tables_vectors()</a></code>
</p>
<p>Functions to perform GVC decompositions on a 'decompr' object
</p>
<p><code><a href="#topic+leontief">leontief()</a></code><br />
<code><a href="#topic+kww">kww()</a></code><br />
<code><a href="#topic+wwz">wwz()</a></code>
</p>
<p>Function to obtain KWW decomposition from WWZ decomposition
</p>
<p><code><a href="#topic+wwz2kww">wwz2kww()</a></code>
</p>
<p>Example ICIO data
</p>
<p><code><a href="#topic+leather">data(&quot;leather&quot;)</a></code>
</p>


<h3>Author(s)</h3>

<p>Bastiaan Quast <a href="mailto:bquast@gmail.com">bquast@gmail.com</a><br />
Fei Wang<br />
Victor Stolzenburg<br />
Sebastian Krantz
</p>


<h3>References</h3>

<p>Hummels, D., Ishii, J., &amp; Yi, K. M. (2001). The nature and growth of vertical specialization in world trade. <em>Journal of international Economics, 54</em>(1), 75-96.
</p>
<p>Koopman, R., Wang, Z., &amp; Wei, S. J. (2014). Tracing value-added and double counting in gross exports. <em>American Economic Review, 104</em>(2), 459-94.
</p>
<p>Wang, Zhi, Shang-Jin Wei, and Kunfu Zhu (2013). Quantifying international production sharing at the bilateral and sector levels (No. w19677). <em>National Bureau of Economic Research</em>.
</p>


<h3>See Also</h3>

<p>https://qua.st/decompr/
</p>

<hr>
<h2 id='decomp'>Interface Function for Decompositions</h2><span id='topic+decomp'></span>

<h3>Description</h3>

<p>This function loads an ICIO table and runs a specified decomposition. It provides a compact interface for quick analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decomp(
  iot,
  x,
  y,
  k,
  i,
  o = NULL,
  v = NULL,
  method = c("leontief", "kww", "wwz"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="decomp_+3A_iot">iot</code></td>
<td>
<p>a Input Output Table object - a list with elements 'inter' (= x), 'final' (= y), 'output' (= o), 'countries' (= k) and 'industries' (= i) of class 'iot'. 
Alternatively these objects can be passed directly to the function, at least x, y, k and i need to be supplied.</p>
</td></tr>
<tr><td><code id="decomp_+3A_x">x</code></td>
<td>
<p>intermediate demand table supplied as a numeric matrix of dimensions GN x GN (G = no. of country, N = no. of industries). 
Both rows and columns should be arranged first by country, then by industry (e.g. C1I1, C1I2, ..., C2I1, C2I2, ...) and should match (symmetry), 
such that rows and columns refer to the same country-industries.</p>
</td></tr>
<tr><td><code id="decomp_+3A_y">y</code></td>
<td>
<p>final demand table supplied as a numeric matrix of dimensions GN x MN (M = no. of final demand categories recorded for each country). 
The rows of y need to match the rows of x, and the columns should also be arranged first by country, then by final demand category (e.g. C1FD1, C1FD2, ..., C2FD1, C2FD2, ...) with the order of the 
countries the same as in x.</p>
</td></tr>
<tr><td><code id="decomp_+3A_k">k</code></td>
<td>
<p>character. A vector of country or region names of length G, arranged in the same order as they occur in the rows and columns of x, y.</p>
</td></tr>
<tr><td><code id="decomp_+3A_i">i</code></td>
<td>
<p>character. A vector of country or region names of length N, arranged in the same order as they occur in the rows and columns of x and rows of y.</p>
</td></tr>
<tr><td><code id="decomp_+3A_o">o</code></td>
<td>
<p>numeric. A vector of final outputs for each country-industry matching the rows of x and y. If not provided it will be computed as <code>rowSums(x) + rowSums(y)</code>.</p>
</td></tr>
<tr><td><code id="decomp_+3A_v">v</code></td>
<td>
<p>numeric. A vector of value added for each country-industry matching the columns of x. If not provided it will be computed as <code>o - colSums(x)</code>.</p>
</td></tr>
<tr><td><code id="decomp_+3A_method">method</code></td>
<td>
<p>character. The decomposition method, either <code>"leontief"</code>, <code>"kww"</code> or <code>"wwz"</code>.</p>
</td></tr>
<tr><td><code id="decomp_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="#topic+leontief">leontief</a></code>, <code><a href="#topic+kww">kww</a></code> or <code><a href="#topic+wwz">wwz</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more detailed analysis with multiple decompositions consider using 
<code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code> to create a 'decompr' class object and then run the decomposition functions <code><a href="#topic+leontief">leontief</a></code>, <code><a href="#topic+kww">kww</a></code> and <code><a href="#topic+wwz">wwz</a></code> on the object.
</p>


<h3>Value</h3>

<p>Depends on the decomposition, see <code><a href="#topic+leontief">leontief</a></code>, <code><a href="#topic+kww">kww</a></code> or <code><a href="#topic+wwz">wwz</a></code>.



</p>


<h3>Author(s)</h3>

<p>Bastiaan Quast
</p>


<h3>References</h3>

<p>Timmer, Marcel P. (ed) (2012), &quot;The World Input-Output Database (WIOD): Contents Sources and Methods&quot;, <em>WIOD Working Paper Number 10</em>, downloadable at http://www.wiod.org/publications/papers/wiod10.pdf 
</p>
<p>Wang, Zhi, Shang-Jin Wei, and Kunfu Zhu (2013). Quantifying international production sharing at the bilateral and sector levels. <em>No. w19677. National Bureau of Economic Research</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load leather example data
data(leather)

# Explore the data
str(leather)

## Decomposing gross exports:

# Perform the Leontief decomposition
decomp(leather, method = "leontief")

# Perform the KWW decomposition
decomp(leather, method = "kww")

# Perform the WWZ decomposition
decomp(leather, method = "wwz")

</code></pre>

<hr>
<h2 id='kww'>Koopman-Wang-Wei Decomposition of Gross Exports</h2><span id='topic+kww'></span>

<h3>Description</h3>

<p>This function performs the Koopman-Wang-Wei (2014) decomposition of a countries gross exports into 9 separate value added components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kww(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="kww_+3A_x">x</code></td>
<td>
<p>an object of the class 'decompr' obtained from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame where a countries gross exports is decomposed into 9 components (columns), as detailed in Figure 1 of the AER paper:
</p>

<table>
<tr>
 <td style="text-align: left;">
 <em>Term</em> </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <em>Description</em> </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports absorbed by direct importers (used to produce a locally consumed final good). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INTrex </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports reexported to third countries and absorbed there. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns home via final imports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns home via intermediate imports (used to produce a domestically consumed final good). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DDC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted DVA in intermediate exports (arising from 2-way trade in intermediate goods). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"> 
 FVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Foreign VA in final goods exports.  </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 FVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Foreign VA in intermediate exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 FDC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted FVA in intermediate exports (arising from 2-way trade in intermediate goods). </td>
</tr>
<tr>
 <td style="text-align: left;"> 
 </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Sebastian Krantz
</p>


<h3>References</h3>

<p>Koopman, R., Wang, Z., &amp; Wei, S. J. (2014). Tracing value-added and double counting in gross exports. <em>American Economic Review, 104</em>(2), 459-94.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wwz">wwz</a></code>, <code><a href="#topic+wwz2kww">wwz2kww</a></code>, <code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data(leather)

# Create intermediate object (class 'decompr')
decompr_object &lt;- load_tables_vectors(leather)
 
# Perform the KWW decomposition
kww(decompr_object)

</code></pre>

<hr>
<h2 id='leather'>Leather Example ICIO Data</h2><span id='topic+leather'></span>

<h3>Description</h3>

<p>An example 3 x 3 ICIO table describing a GVC for leather products with industries 'Agriculture', 'Textile and Leather' and 'Transport Equipment'
for the countries 'Argentina', 'Turkey' and 'Germany'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("leather")
</code></pre>


<h3>Format</h3>

<p>A list of class 'iot' with the following elements:
</p>

<dl>
<dt><code>inter</code></dt><dd><p>9 x 9 input output matrix where each column gives the value of inputs supplied to the corresponding country-industry by each row country-industry.</p>
</dd>
<dt><code>final</code></dt><dd><p>9 x 3 final demand matrix showing the final demand in each country (column) for each country-industry's (rows) produce.</p>
</dd>
<dt><code>countries</code></dt><dd><p>character vector of country names (matching columns of <code>final</code>).</p>
</dd>
<dt><code>industries</code></dt><dd><p>character vector of industries, such that <code>as.vector(t(outer(countries, industries, FUN = paste, sep = ".")))</code> generates the row- and column-names of <code>inter</code> and the rownames of <code>final</code>.</p>
</dd>
<dt><code>out</code></dt><dd><p>A vector of gross country-industry output. In a complete productive system it should be equal to <code>rowSums(inter) + rowSums(final)</code>.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+decompr-package">decompr-package</a></code>
</p>

<hr>
<h2 id='leontief'>Leontief Decomposition</h2><span id='topic+leontief'></span>

<h3>Description</h3>

<p>The Leontief decomposition of gross flows (exports, final demand, output) into their value added origins.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leontief(x, post = c("exports", "output", "final_demand", "none"), long = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="leontief_+3A_x">x</code></td>
<td>
<p>an object of class decompr.</p>
</td></tr>
<tr><td><code id="leontief_+3A_post">post</code></td>
<td>
<p>post-multiply the value added multiplier matrix [<code class="reqn">VB = V(I-A)^{-1}</code>] with something to deduce the value added origins thereof.
The default is <code>"exports"</code> <code class="reqn">VAE = V(I-A)^{-1}E</code>, where <code class="reqn">E</code> is a diagonal matrix with exports along the diagonal yielding the 
country-industry level sources of value added (rows) for each using (column) country-industry; similarly for <code>"output"</code>. 
Option <code>"final_demand"</code> computes value added origins of final demand by source country-industry and importing country, by computing 
<code class="reqn">VAY = V(I-A)^{-1}Y</code> where <code class="reqn">Y</code> is the corresponding GN x G matrix contained in <code>x</code>. Option <code>"none"</code> just returns <code class="reqn">VB</code> which gives the value added shares.</p>
</td></tr>
<tr><td><code id="leontief_+3A_long">long</code></td>
<td>
<p>logical. Transform the output data into a long (tidy) data set or not, default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Leontief decomposition is obtained by pre-multiplying the flow measure (e.g. exports) with 
the value added multiplier matrix [<code class="reqn">VB = V(I-A)^{-1}</code>], obtained by pre-multiplying the Leontief Inverse matrix [<code class="reqn">B = (I-A)^{-1}</code>] with a diagonal matrix [<code class="reqn">V</code>] containing the direct value added share in each industries output.
</p>
<p><code class="reqn">V</code> is obtained as <code>diag(v / o)</code> where <code>o</code> is total industry output. <code>v</code> is either supplied to <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code> or computed as <code>o - colSums(x)</code> with <code>x</code> the raw IO matrix. 
If <code>o</code> is not supplied to <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>, it is computed as <code>rowSums(x) + rowSums(y)</code> where <code>y</code> is the matrix of final demands. If both <code>o</code> and <code>v</code> are not supplied to <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>, this is equivalent to computing <code class="reqn">V</code> as <code>diag(1 - colSums(A))</code>, with <code class="reqn">A</code> is the row-normalized IO matrix also used to compute the Leontief Inverse [<code class="reqn">B</code>].
</p>


<h3>Value</h3>

<p>If <code>long = TRUE</code> a molten data frame containing the elements of the decomposed flows matrix in the final column, preceded by several identifier columns. 
If <code>long = FALSE</code> the decomposed flows matrix is simply returned.
</p>


<h3>Author(s)</h3>

<p>Bastiaan Quast
</p>


<h3>References</h3>

<p>Leontief, W. (Ed.). (1986). Input-output economics. <em>Oxford University Press</em>.
</p>
<p>Hummels, D., Ishii, J., &amp; Yi, K. M. (2001). The nature and growth of vertical specialization in world trade. <em>Journal of international Economics, 54</em>(1), 75-96.
</p>
<p>Wang, Zhi, Shang-Jin Wei, and Kunfu Zhu (2013). Quantifying international production sharing at the bilateral and sector levels (No. w19677). <em>National Bureau of Economic Research</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kww">kww</a></code>, <code><a href="#topic+wwz">wwz</a></code>, <code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data(leather)

# Create intermediate object (class 'decompr')
decompr_object &lt;- load_tables_vectors(leather)

# Perform the Leontief decomposition of each country-industries 
# exports into their value added origins by country-industry
leontief(decompr_object)
</code></pre>

<hr>
<h2 id='load_tables'>Load the Input-Output and Final Demand Tables: Depreciated Interface</h2><span id='topic+load_tables'></span>

<h3>Description</h3>

<p>This function loads the demand tables
and defines all variables for the decomposition. It is kept in the package for backward compatibility. New users should use <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_tables(x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_tables_+3A_x">x</code></td>
<td>
<p>the intermediate demand table, it has dimensions GN x GN (G = no. of country, N = no. of industries),
excluding the first row and the first column which contains the country names,
and the second row and second column which contain the industry names for each country.
In addition, an extra row at the end should contain final demand.</p>
</td></tr>
<tr><td><code id="load_tables_+3A_y">y</code></td>
<td>
<p>the final demand table it has dimensions GN x MN,
excluding the first row and the first column which contains the country names,
the second column which contains the industry names for each country,
and second row which contains the five decomposed final demands (M).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adapted from code by Fei Wang.
</p>


<h3>Value</h3>

<p>A 'decompr' class object.
</p>


<h3>Author(s)</h3>

<p>Bastiaan Quast
</p>


<h3>See Also</h3>

<p><code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>
</p>

<hr>
<h2 id='load_tables_vectors'>Load the Input-Output and Final Demand Tables</h2><span id='topic+load_tables_vectors'></span>

<h3>Description</h3>

<p>This function loads the demand tables
and creates all matrices and variables required for the GVC decompositions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_tables_vectors(
  iot,
  x,
  y,
  k,
  i,
  o = NULL,
  v = NULL,
  null_inventory = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_tables_vectors_+3A_iot">iot</code></td>
<td>
<p>a Input Output Table object - a list with elements 'inter' (= x), 'final' (= y), 'output' (= o), 'countries' (= k) and 'industries' (= i) of class 'iot'. 
Alternatively these objects can be passed directly to the function, at least x, y, k and i need to be supplied.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_x">x</code></td>
<td>
<p>intermediate demand table supplied as a numeric matrix of dimensions GN x GN (G = no. of country, N = no. of industries). 
Both rows and columns should be arranged first by country, then by industry (e.g. C1I1, C1I2, ..., C2I1, C2I2, ...) and should match (symmetry), 
such that rows and columns refer to the same country-industries.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_y">y</code></td>
<td>
<p>final demand table supplied as a numeric matrix of dimensions GN x MN (M = no. of final demand categories recorded for each country). 
The rows of y need to match the rows of x, and the columns should also be arranged first by country, then by final demand category (e.g. C1FD1, C1FD2, ..., C2FD1, C2FD2, ...) with the order of the 
countries the same as in x.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_k">k</code></td>
<td>
<p>character. A vector of country or region names of length G, arranged in the same order as they occur in the rows and columns of x, y.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_i">i</code></td>
<td>
<p>character. A vector of country or region names of length N, arranged in the same order as they occur in the rows and columns of x and rows of y.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_o">o</code></td>
<td>
<p>numeric. A vector of final outputs for each country-industry matching the rows of x and y. If not provided it will be computed as <code>rowSums(x) + rowSums(y)</code>.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_v">v</code></td>
<td>
<p>numeric. A vector of value added for each country-industry matching the columns of x. If not provided it will be computed as <code>o - colSums(x)</code>.</p>
</td></tr>
<tr><td><code id="load_tables_vectors_+3A_null_inventory">null_inventory</code></td>
<td>
<p>logical. <code>TRUE</code> sets the inventory (last final demand category for each country) to zero.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adapted from code by Fei Wang.
</p>


<h3>Value</h3>

<p>A 'decompr' class object - a list with the following elements:
</p>

<table>
<tr>
 <td style="text-align: right;">
 Am </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Imported / Exported goods IO shares matrix (<code>x</code> column-normalized by output <code>o</code>, with domestic entries set to 0). </td>
</tr>
<tr>
 <td style="text-align: right;">
 B  </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Leontief Inverse matrix <code class="reqn">(I - A)^{-1}</code> where <code class="reqn">A</code> is <code>x</code> column-normalized by output <code>o</code>. </td>
</tr>
<tr>
 <td style="text-align: right;">               
 Bd </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Domestic part of Leontief Inverse matrix (inter-country elements of <code class="reqn">B</code> set to 0, needed for WWZ decomposition). </td>
</tr>
<tr>
 <td style="text-align: right;">                 
 Bm </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Imported / Exported part of Leontief Inverse matrix (domestic elements of <code class="reqn">B</code> set to 0, needed for WWZ decomposition). </td>
</tr>
<tr>
 <td style="text-align: right;">              
 L  </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Domestic economy Leontief Inverse matrix <code class="reqn">(I - Ad)^{-1}</code> where <code class="reqn">Ad</code> is <code class="reqn">A</code> with all inter-country elements set to 0. </td>
</tr>
<tr>
 <td style="text-align: right;">
 E  </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Total Exports (output of each country-industry servicing foreign production or foreign final demand). </td>
</tr>
<tr>
 <td style="text-align: right;">
 ESR </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Total Exports by destination country. </td>
</tr>
<tr>
 <td style="text-align: right;">
 Eint </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Exports for intermediate production by destination country. </td>
</tr>
<tr>
 <td style="text-align: right;">
 Efd </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Exports for final demand by destination country. </td>
</tr>
<tr>
 <td style="text-align: right;">
 Vc </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Value added content of output (<code>v / o</code>). </td>
</tr>
<tr>
 <td style="text-align: right;">
 G </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Number of countries. </td>
</tr>
<tr>
 <td style="text-align: right;">
 N </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Number of industries. </td>
</tr>
<tr>
 <td style="text-align: right;">
 GN </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Number of country-industries. </td>
</tr>
<tr>
 <td style="text-align: right;">
 k </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Vector of country names. </td>
</tr>
<tr>
 <td style="text-align: right;">  
 i </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Vector of industry names. </td>
</tr>
<tr>
 <td style="text-align: right;">
 rownam </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Unique country-industry names identifying the rows / columns of x and rows of y. </td>
</tr>
<tr>
 <td style="text-align: right;">
 X </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Total Output (<code> = o</code>). </td>
</tr>
<tr>
 <td style="text-align: right;">
 Y </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Total Final Demand by destination country. </td>
</tr>
<tr>
 <td style="text-align: right;"> 
 Yd </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Domestic Final Demand. </td>
</tr>
<tr>
 <td style="text-align: right;">
 Ym </td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: left;"> Foreign Final Demand. </td>
</tr>
<tr>
 <td style="text-align: right;">
 </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Bastiaan Quast
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leontief">leontief</a></code>, <code><a href="#topic+kww">kww</a></code>, <code><a href="#topic+wwz">wwz</a></code>, <code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data(leather)

# Create intermediate object (class 'decompr')
decompr_object &lt;- load_tables_vectors(leather)

# Examine the object                                    
str(decompr_object)
</code></pre>

<hr>
<h2 id='wwz'>Wang-Wei-Zhu Decomposition of Gross Exports</h2><span id='topic+wwz'></span>

<h3>Description</h3>

<p>This function performs the Wang-Wei-Zhu decomposition of country-sector level gross exports into 16 value added components by importing country.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wwz(x, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wwz_+3A_x">x</code></td>
<td>
<p>an object of the class 'decompr' obtained from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>.</p>
</td></tr>
<tr><td><code id="wwz_+3A_verbose">verbose</code></td>
<td>
<p>logical, should timings of the calculation be displayed? Default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adapted from code by Fei Wang.
</p>


<h3>Value</h3>

<p>A data frame with exports decomposed into 16 components (columns), as detailed in Table E1 in the appendix of the paper, and additional diagnostic items:
</p>

<table>
<tr>
 <td style="text-align: left;">
 <em>Term</em> </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <em>Description</em> </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports used by direct importer to produce domestic final goods consumed at home. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INTrexI1 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports used by the direct importer to produce intermediate exports for production of final goods in third countries that are then imported and consumed by the direct importer. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INTrexF </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports used by the direct importer to produce final goods exports to third countries. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INTrexI2 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in Intermediate exports used by the direct importer to produce intermediate exports to third countries. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns via intermediate imports (i.e. is used to produce a locally consumed final good). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns home via final goods imports from the direct importer. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_FIN2 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns home via in final goods imports from third countries. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 OVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Third countries’ VA in final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Direct importer’s VA in final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 OVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Third countries’ VA in intermediate exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Direct importer’s VA in intermediate exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DDC_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted Domestic VA used to produce final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DDC_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted Domestic VA used to produce intermediate exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 ODC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted third countries’ VA in home country’s exports production. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MDC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted direct importer’s VA in home country’s exports production. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 <em>Diagnostic Item</em> </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <em>Description</em> </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texp </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Total Exports (matrix 'ESR' from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpint </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Exports for intermediate production (matrix 'Eint' from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpfd </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Exports for final demand (matrix 'Efd' from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code>). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpdiff </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Difference between Total Exports and the sum of the 16 terms. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpdiffpercent </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> ... in percent of total exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpfddiff </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Difference between Final Exports and the sum of terms DVA_FIN, OVA_FIN and MVA_FIN. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpfddiffpercent </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> ... in percent of final exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpintdiff </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Difference between Intermediate Exports and the sum of all the remaining terms (except DVA_FIN, OVA_FIN and MVA_FIN). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 texpintdiffpercent </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> ... in percent of intermediate exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DViX_Fsr </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> DVA embodied in gross exports based on forward linkage. </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Bastiaan Quast
</p>


<h3>References</h3>

<p>Wang, Zhi, Shang-Jin Wei, and Kunfu Zhu (2013). Quantifying international production sharing at the bilateral and sector levels (No. w19677). <em>National Bureau of Economic Research</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kww">kww</a></code>, <code><a href="#topic+wwz2kww">wwz2kww</a></code>, <code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data(leather)

# Create intermediate object (class 'decompr')
decompr_object &lt;- load_tables_vectors(leather)

# Perform the WWZ decomposition
wwz(decompr_object)
</code></pre>

<hr>
<h2 id='wwz2kww'>Koopman-Wang-Wei from Wang-Wei-Zhu Decomposition</h2><span id='topic+wwz2kww'></span>

<h3>Description</h3>

<p>This function by default returns a disaggregated version of the the Koopman-Wang-Wei (KWW) decomposition breaking up sector-level gross exports into 9 value added terms,
from an already computed and more detailed (16 term) Wang-Wei-Zhu decomposition of sector-level gross exports. An aggregation option also allows obtaining the aggregate KWW decomposition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wwz2kww(x, aggregate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wwz2kww_+3A_x">x</code></td>
<td>
<p>a data frame with the WWZ decomposition obtained from <code><a href="#topic+wwz">wwz</a></code>. Alternatively a 'decompr' class object from <code><a href="#topic+load_tables_vectors">load_tables_vectors</a></code> can be supplied, which will toggle calling <code>wwz()</code> first.</p>
</td></tr>
<tr><td><code id="wwz2kww_+3A_aggregate">aggregate</code></td>
<td>
<p>logical. <code>TRUE</code> aggregates the KWW decomposition to the country level, giving exactly the same output as <code><a href="#topic+kww">kww</a></code>. <code>FALSE</code> maintains the sector level decomposition in KWW format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The mapping of the 16 terms in the WWZ decomposition to the 9 terms in the KWW decomposition is provided in table E2 in the appendix of the WWZ (2013) paper. The table is reproduced here using the term naming 
conventions followed in this package.
</p>

<table>
<tr>
 <td style="text-align: left;">
 <em>WWZ Terms</em> </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <em>KWW Term</em> </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <em>Description</em> </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> DVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in final goods exports. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INT, DVA_INTrexI1 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> DVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports absorbed by direct importers. 
 WWZ separates VA in final goods produced and consumed by direct importer from VA used by direct importer to produce intermediate exports for production of domestically consumed final goods 
 in third countries (i.e. the VA is absorbed by the direct importer, but it may be exported to third countries as intermediates first before returning to direct importer as final goods). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DVA_INTrexF, DVA_INTrexI2 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> DVA_INTrex </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports reexported to third countries and absorbed there. WWZ separates VA in final goods exports 
 of direct importer to third countries from VA in intermediate exports from direct importers to third countries (that is ultimately absorbed in third countries). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_FIN, RDV_FIN2 </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> RDV_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns home via final imports. WWZ separates final imports from the direct importer and third countries. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 RDV_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> RDV_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Domestic VA in intermediate exports that returns via intermediate imports (i.e. is used to produce a locally consumed final good). </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 DDC_FIN, DDC_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> DDC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted Domestic Value Added in gross exports. WWZ separates double counting due to final and intermediate exports production. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MVA_FIN, OVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> FVA_FIN </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Foreign VA in final goods exports. WWZ separates FVA from direct importer and from third countries.  </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MVA_INT,  OVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> FVA_INT </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Foreign VA in intermediate exports. WWZ separates FVA from direct importer and from third countries. </td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
 MDC, ODC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> FDC </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Double counted Foreign Value Added in gross exports. WWZ separates FDC from direct importer and from third countries. </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td>
</tr>

</table>



<h3>Value</h3>

<p>A data frame with exports decomposed into 9 components (columns), see the table above and <code><a href="#topic+kww">kww</a></code> for a shorter description of the 9 terms.
</p>


<h3>Note</h3>

<p>If both WWZ and KWW decompositions are required, it is computationally more efficient to call <code>wwz2kww(x, aggregate = TRUE)</code> on an already computed WWZ decomposition, than to call <code><a href="#topic+kww">kww</a></code> on a 'decompr' object.
</p>


<h3>Author(s)</h3>

<p>Sebastian Krantz
</p>


<h3>References</h3>

<p>Koopman, R., Wang, Z., &amp; Wei, S. J. (2014). Tracing value-added and double counting in gross exports. <em>American Economic Review, 104</em>(2), 459-94.
</p>
<p>Wang, Zhi, Shang-Jin Wei, and Kunfu Zhu (2013). Quantifying international production sharing at the bilateral and sector levels (No. w19677). <em>National Bureau of Economic Research</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wwz">wwz</a></code>, <code><a href="#topic+kww">kww</a></code>, <code><a href="#topic+decompr-package">decompr-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example data
data(leather)

# Create intermediate object (class 'decompr')
decompr_object &lt;- load_tables_vectors(leather)
 
# Perform the WWZ decomposition
WWZ &lt;- wwz(decompr_object)

# Obtain a disaggregated KWW decomposition
KWW &lt;- wwz2kww(WWZ)

# Aggregate KWW 
wwz2kww(WWZ, aggregate = TRUE)

# Same as running KWW directly, but the former is more efficient 
# if we already have the WWZ
kww(decompr_object)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
