<!DOCTYPE html><html><head><title>Help for package visR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {visR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#visR-package'><p>visR: Clinical Graphs and Tables Adhering to Graphical Principles</p></a></li>
<li><a href='#.convert_alpha'><p>Converts an alpha value between its numeric and its hex-encoded form.</p></a></li>
<li><a href='#.get_alpha_from_hex_colour'><p>Extract the numerical alpha representation of #RRGGBBAA colour</p></a></li>
<li><a href='#.get_strata'><p>Get strata level combinations</p></a></li>
<li><a href='#.replace_hex_alpha'><p>Replaces the AA part of a #RRGGBBAA hex-colour.</p></a></li>
<li><a href='#add_annotation'><p>Add annotations to a visR object</p></a></li>
<li><a href='#add_CI'><p>Add confidence interval (CI) to visR object</p></a></li>
<li><a href='#add_CNSR'><p>Add censoring symbols to a visR object</p></a></li>
<li><a href='#add_highlight'><p>Highlight a specific strata</p></a></li>
<li><a href='#add_quantiles'><p>Add quantile indicators to visR plot</p></a></li>
<li><a href='#add_risktable'><p>Add risk tables to visR plots through an S3 method</p></a></li>
<li><a href='#adtte'><p>adtte - CDISC ADaM compliant time to event data set</p></a></li>
<li><a href='#align_plots'><p>Align multiple ggplot graphs, taking into account the legend</p></a></li>
<li><a href='#apply_attrition'><p>Apply list of inclusion/exclusion criteria to a patient-level dataframe</p></a></li>
<li><a href='#apply_theme'><p>Applies a theme to a ggplot object.</p></a></li>
<li><a href='#brca_cohort'><p>Cancer survival data</p></a></li>
<li><a href='#define_theme'><p>Provides a simple wrapper for themes</p></a></li>
<li><a href='#estimate_cuminc'><p>Competing Events Cumulative Incidence</p></a></li>
<li><a href='#estimate_KM'><p>Wrapper for Kaplan-Meier Time-to-Event analysis</p></a></li>
<li><a href='#get_attrition'><p>Generate cohort attrition table</p></a></li>
<li><a href='#get_COX_HR'><p>Summarize Hazard Ratio from a survival object using S3 method</p></a></li>
<li><a href='#get_pvalue'><p>Summarize the test for equality across strata from a survival object using S3 method</p></a></li>
<li><a href='#get_quantile'><p>Wrapper around quantile methods</p></a></li>
<li><a href='#get_risktable'><p>Obtain risk tables for tables and plots</p></a></li>
<li><a href='#get_summary'><p>Summarize the descriptive statistics across strata from a survival object using S3 method</p></a></li>
<li><a href='#get_tableone'><p>Calculate summary statistics</p></a></li>
<li><a href='#legendopts'><p>Translates options for legend into a list that can be passed to ggplot2</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#render'><p>Render a data.frame, risktable, or tableone object as a table</p></a></li>
<li><a href='#stat_stepribbon'><p>Step ribbon statistic</p></a></li>
<li><a href='#summarize_long'><p>Calculate summary statistics from a vector</p></a></li>
<li><a href='#summarize_short'><p>Create abbreviated variable summary for table1</p></a></li>
<li><a href='#Surv_CNSR'><p>Create a Survival Object from CDISC Data</p></a></li>
<li><a href='#tableone'><p>Display a summary Table (i.e. table one)</p></a></li>
<li><a href='#the_lhs'><p>Find the &quot;lhs&quot; in the pipeline</p></a></li>
<li><a href='#tidyme'><p>Extended tidy cleaning of selected objects using S3 method</p></a></li>
<li><a href='#visr'><p>Plot a supported S3 object</p></a></li>
<li><a href='#visR+20Global'><p><code>visR</code> package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Clinical Graphs and Tables Adhering to Graphical Principles</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>To enable fit-for-purpose, reusable clinical and medical
    research focused visualizations and tables with sensible defaults and
    based on graphical principles as described in: "Vandemeulebroecke et
    al. (2018)" &lt;<a href="https://doi.org/10.1002%2Fpst.1912">doi:10.1002/pst.1912</a>&gt;, "Vandemeulebroecke et al. (2019)"
    &lt;<a href="https://doi.org/10.1002%2Fpsp4.12455">doi:10.1002/psp4.12455</a>&gt;, and "Morris et al. (2019)"
    &lt;<a href="https://doi.org/10.1136%2Fbmjopen-2019-030215">doi:10.1136/bmjopen-2019-030215</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://openpharma.github.io/visR/">https://openpharma.github.io/visR/</a>,
<a href="https://github.com/openpharma/visR">https://github.com/openpharma/visR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/openpharma/visR/issues">https://github.com/openpharma/visR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom (&ge; 0.7.11), cowplot, dplyr (&ge; 1.0.0), DT, forcats,
ggplot2, graphics, grDevices, grid, gridExtra, gt (&ge; 0.3.0),
gtable, kableExtra, knitr, lifecycle, rlang (&ge; 1.0.0), stats,
survival (&ge; 3.4-0), tibble, tidycmprsk (&ge; 0.1.1), tidyr (&ge;
1.0.0), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>data.table, ggpubr, learnr, rmarkdown, spelling, testthat (&ge;
2.1.0), vdiffr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-15 21:32:39 UTC; baillma3</td>
</tr>
<tr>
<td>Author:</td>
<td>Mark Baillie [aut, cre, cph],
  Diego Saldana [aut],
  Charlotta Fruechtenicht [aut],
  Marc Vandemeulebroecke [aut],
  Thanos Siadimas [aut],
  Pawel Kawski [aut],
  Steven Haesendonckx [aut],
  James Black [aut],
  Pelagia Alexandra Papadopoulou [aut],
  Tim Treis [aut],
  Rebecca Albrecht [aut],
  Ardalan Mirshani [ctb],
  Daniel D. Sjoberg <a href="https://orcid.org/0000-0003-0862-2018"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mark Baillie &lt;bailliem@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-15 21:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='visR-package'>visR: Clinical Graphs and Tables Adhering to Graphical Principles</h2><span id='topic+visR'></span><span id='topic+visR-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>To enable fit-for-purpose, reusable clinical and medical research focused visualizations and tables with sensible defaults and based on graphical principles as described in: &quot;Vandemeulebroecke et al. (2018)&quot; <a href="https://doi.org/10.1002/pst.1912">doi:10.1002/pst.1912</a>, &quot;Vandemeulebroecke et al. (2019)&quot; <a href="https://doi.org/10.1002/psp4.12455">doi:10.1002/psp4.12455</a>, and &quot;Morris et al. (2019)&quot; <a href="https://doi.org/10.1136/bmjopen-2019-030215">doi:10.1136/bmjopen-2019-030215</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Mark Baillie <a href="mailto:bailliem@gmail.com">bailliem@gmail.com</a> [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Diego Saldana <a href="mailto:diego.saldana@roche.com">diego.saldana@roche.com</a>
</p>
</li>
<li><p> Charlotta Fruechtenicht <a href="mailto:charlotta.fruechtenicht@roche.com">charlotta.fruechtenicht@roche.com</a>
</p>
</li>
<li><p> Marc Vandemeulebroecke <a href="mailto:marc.vandemeulebroecke@novartis.com">marc.vandemeulebroecke@novartis.com</a>
</p>
</li>
<li><p> Thanos Siadimas <a href="mailto:thanos.siadimas@roche.com">thanos.siadimas@roche.com</a>
</p>
</li>
<li><p> Pawel Kawski <a href="mailto:pawel.kawski@contractors.roche.com">pawel.kawski@contractors.roche.com</a>
</p>
</li>
<li><p> Steven Haesendonckx <a href="mailto:shaesen2@its.jnj.com">shaesen2@its.jnj.com</a>
</p>
</li>
<li><p> James Black <a href="mailto:james.black.jb2@roche.com">james.black.jb2@roche.com</a>
</p>
</li>
<li><p> Pelagia Alexandra Papadopoulou <a href="mailto:PPapadop@its.jnj.com">PPapadop@its.jnj.com</a>
</p>
</li>
<li><p> Tim Treis <a href="mailto:tim.treis@outlook.de">tim.treis@outlook.de</a>
</p>
</li>
<li><p> Rebecca Albrecht <a href="mailto:rebecca.albrecht.dietsch@gmail.com">rebecca.albrecht.dietsch@gmail.com</a>
</p>
</li>
<li><p> Daniel D. Sjoberg <a href="mailto:danield.sjoberg@gmail.com">danield.sjoberg@gmail.com</a> (<a href="https://orcid.org/0000-0003-0862-2018">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Ardalan Mirshani <a href="mailto:ardeeshany@gmail.com">ardeeshany@gmail.com</a> [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://openpharma.github.io/visR/">https://openpharma.github.io/visR/</a>
</p>
</li>
<li> <p><a href="https://github.com/openpharma/visR">https://github.com/openpharma/visR</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/openpharma/visR/issues">https://github.com/openpharma/visR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='.convert_alpha'>Converts an alpha value between its numeric and its hex-encoded form.</h2><span id='topic+.convert_alpha'></span>

<h3>Description</h3>

<p>The function accepts a numeric (or NULL/NA) or a two-character hex encoded alpha representation and returns a the respective other representation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.convert_alpha(numeric_alpha = NULL, hex_alpha = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".convert_alpha_+3A_numeric_alpha">numeric_alpha</code></td>
<td>
<p>A numerical value between 0 and 1.</p>
</td></tr>
<tr><td><code id=".convert_alpha_+3A_hex_alpha">hex_alpha</code></td>
<td>
<p>A two-letter character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>numeric_alpha</code> was specified, its two-letter representation is returned. If <code>hex_alpha</code> was specified, its numeric representation is returned.
</p>

<hr>
<h2 id='.get_alpha_from_hex_colour'>Extract the numerical alpha representation of #RRGGBBAA colour</h2><span id='topic+.get_alpha_from_hex_colour'></span>

<h3>Description</h3>

<p>RGB colours can be encoded as hexadecimal values, as for example internally used by <code>ggplot2</code>.
For this, the numerical RGB values are mapped from their 0-255 value range to two-character hex-values.
This yields a string in the form of '#RRGGBB'. Additionally, a fourth optional block can be present encoding
the alpha transparency of the colour. This extends the string to '#RRGGBBAA'.
This function takes such a string as input for <code>hex_colour</code>, extracts the 'AA' part and returns the
numerical representation if it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_alpha_from_hex_colour(hex_colour = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".get_alpha_from_hex_colour_+3A_hex_colour">hex_colour</code></td>
<td>
<p>A string in the format '#RRGGBBAA'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The numeric representation of the colors' alpha value, rounded to 2 digits.
</p>

<hr>
<h2 id='.get_strata'>Get strata level combinations</h2><span id='topic+.get_strata'></span>

<h3>Description</h3>

<p>Extracts the strata level combinations from a survival objects without the specified strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_strata(strata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".get_strata_+3A_strata">strata</code></td>
<td>
<p>The strata from a survival object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The strata level combinations from a survival objects without the specified strata.
</p>

<hr>
<h2 id='.replace_hex_alpha'>Replaces the AA part of a #RRGGBBAA hex-colour.</h2><span id='topic+.replace_hex_alpha'></span>

<h3>Description</h3>

<p>RGB colours can be encoded as hexadecimal values, as for example internally used by <code>ggplot2</code>. For this, the numerical RGB values are mapped from their 0-255 value range to two-character hex-values. This yields a string in the form of '#RRGGBB'. Additionally, a fourth optional block can be present encoding the alpha transparency of the colour. This extends the string to '#RRGGBBAA'. This function takes an '#RRGGBBAA' string as input for <code>colour</code> and a two-character hex-representation of an alpha value as an input for <code>new_alpha</code>, replaces the 'AA' part of <code>colour</code> with the <code>new_alpha</code> and returns the new colour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.replace_hex_alpha(colour, new_alpha)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".replace_hex_alpha_+3A_colour">colour</code></td>
<td>
<p>A character string of the format #RRGGBBAA.</p>
</td></tr>
<tr><td><code id=".replace_hex_alpha_+3A_new_alpha">new_alpha</code></td>
<td>
<p>A two-character string with the new alpha value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A hex-encoded RGBA colour.
</p>

<hr>
<h2 id='add_annotation'>Add annotations to a visR object</h2><span id='topic+add_annotation'></span>

<h3>Description</h3>

<p>Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class <code>gtable</code> and places them on the specified location on
the <code>ggplot</code>. The layout is fixed: bold column headers and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute <code>component</code>
in the final object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_annotation(
  gg = NULL,
  label = NULL,
  base_family = "sans",
  base_size = 11,
  xmin = -Inf,
  xmax = Inf,
  ymin = -Inf,
  ymax = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_annotation_+3A_gg">gg</code></td>
<td>
<p>Object of class <code>ggplot</code>.</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_label">label</code></td>
<td>
<p><code>String, dataframe, data.table, tibble</code> used to annotate the <code>ggplot</code>.</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_base_family">base_family</code></td>
<td>
<p><code>character</code>. Base font family</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_base_size">base_size</code></td>
<td>
<p><code>numeric</code>. Base font size in pt</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_xmin">xmin</code></td>
<td>
<p>x coordinates giving horizontal location of raster in which to fit annotation.</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_xmax">xmax</code></td>
<td>
<p>x coordinates giving horizontal location of raster in which to fit annotation.</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_ymin">ymin</code></td>
<td>
<p>y coordinates giving vertical location of raster in which to fit annotation.</p>
</td></tr>
<tr><td><code id="add_annotation_+3A_ymax">ymax</code></td>
<td>
<p>y coordinates giving vertical location of raster in which to fit annotation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>ggplot</code> with added annotation with an object of class <code>gtable</code>.
</p>


<h3>See Also</h3>

<p><code><a href="gridExtra.html#topic+tableGrob">tableGrob</a></code> <code><a href="ggplot2.html#topic+annotation_custom">annotation_custom</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Estimate survival
surv_object &lt;- visR::estimate_KM(data = adtte, strata = "TRTP")

## We want to annotate the survival KM plot with a simple string comment
visR::visr(surv_object) %&gt;%
  visR::add_annotation(
    label = "My simple comment",
    base_family = "sans",
    base_size = 15,
    xmin = 110,
    xmax = 180,
    ymin = 0.80
  )

## Currently, care needs to be taken on the x-y values relative
## to the plot data area. Here we are plotting outside of the data area.
visR::visr(surv_object) %&gt;%
  visR::add_annotation(
    label = "My simple comment",
    base_family = "sans",
    base_size = 15,
    xmin = 210,
    xmax = 380,
    ymin = 1.0
  )


## We may also want to annotate a KM plot with information
## from additional tests or estimates. This example we annotate
## with p-values contained in a tibble

## we calculate p-values for "Equality across strata"
lbl &lt;- visR::get_pvalue(surv_object,
  statlist = c("test", "pvalue"),
  type = "All"
)

## display p-values
lbl

## Now annotate survival KM plot with the p-values
visR::visr(surv_object) %&gt;%
  visR::add_annotation(
    label = lbl,
    base_family = "sans",
    base_size = 9,
    xmin = 100,
    xmax = 180,
    ymin = 0.80
  )

</code></pre>

<hr>
<h2 id='add_CI'>Add confidence interval (CI) to visR object</h2><span id='topic+add_CI'></span><span id='topic+add_CI.ggsurvfit'></span><span id='topic+add_CI.ggtidycuminc'></span>

<h3>Description</h3>

<p>Method to add pointwise confidence intervals to a an object
created by visR through an S3 method. The method is set up to use
the pipe <code style="white-space: pre;">&#8288;%&gt;%&#8288;</code>. There are two options to display CI's, a &quot;ribbon&quot; or
as &quot;step&quot; lines.
</p>
<p>No default method is available at the moment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_CI(gg, ...)

## S3 method for class 'ggsurvfit'
add_CI(gg, alpha = 0.1, style = "ribbon", linetype, ...)

## S3 method for class 'ggtidycuminc'
add_CI(gg, alpha = 0.1, style = "ribbon", linetype, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_CI_+3A_gg">gg</code></td>
<td>
<p>A ggplot created with visR</p>
</td></tr>
<tr><td><code id="add_CI_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method to modify <code><a href="ggplot2.html#topic+geom_ribbon">geom_ribbon</a></code></p>
</td></tr>
<tr><td><code id="add_CI_+3A_alpha">alpha</code></td>
<td>
<p>aesthetic of ggplot2 <code><a href="ggplot2.html#topic+geom_ribbon">geom_ribbon</a></code>. Default is 0.1.</p>
</td></tr>
<tr><td><code id="add_CI_+3A_style">style</code></td>
<td>
<p>aesthetic of ggplot2 <code><a href="ggplot2.html#topic+geom_ribbon">geom_ribbon</a></code>. Default is &quot;ribbon&quot;. An alternative option is &quot;step&quot; that uses a line to display interval bounds.</p>
</td></tr>
<tr><td><code id="add_CI_+3A_linetype">linetype</code></td>
<td>
<p>aesthetic of ggplot2 <code><a href="ggplot2.html#topic+geom_ribbon">geom_ribbon</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Pointwise confidence interval overlayed on a visR ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(visR)

# Estimate KM curves by treatment group
survfit_object &lt;- survival::survfit(data = adtte, survival::Surv(AVAL, 1 - CNSR) ~ TRTP)

## plot without confidence intervals (CI)
p &lt;- visR::visr(survfit_object)
p

# add CI to plot with default settings
p %&gt;% add_CI()

# change transparency of CI ribbon
p %&gt;% add_CI(alpha = 0.9, style = "ribbon")

# plot CI as a step line instead of ribbon
p %&gt;% add_CI(alpha = 0.1, style = "step")

# change linetype of CI
p %&gt;% add_CI(style = "step", linetype = 1)

</code></pre>

<hr>
<h2 id='add_CNSR'>Add censoring symbols to a visR object</h2><span id='topic+add_CNSR'></span><span id='topic+add_CNSR.ggsurvfit'></span><span id='topic+add_CNSR.ggtidycuminc'></span>

<h3>Description</h3>

<p>Add censoring symbols to a visR ggplot through an S3 method.
The S3 method is for adding censoring symbols to a visR ggplot.
The method is set up to use the pipe <code style="white-space: pre;">&#8288;%&gt;%&#8288;</code>.
</p>
<p>No default method is available at the moment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_CNSR(gg, ...)

## S3 method for class 'ggsurvfit'
add_CNSR(gg, shape = 3, size = 2, ...)

## S3 method for class 'ggtidycuminc'
add_CNSR(gg, shape = 3, size = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_CNSR_+3A_gg">gg</code></td>
<td>
<p>A ggplot created with visR</p>
</td></tr>
<tr><td><code id="add_CNSR_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method to modify <code><a href="ggplot2.html#topic+geom_point">geom_point</a></code></p>
</td></tr>
<tr><td><code id="add_CNSR_+3A_shape">shape</code></td>
<td>
<p>aesthetic of ggplot2 <code><a href="ggplot2.html#topic+geom_point">geom_point</a></code>. Default is 3.</p>
</td></tr>
<tr><td><code id="add_CNSR_+3A_size">size</code></td>
<td>
<p>aesthetic of ggplot2 <code><a href="ggplot2.html#topic+geom_point">geom_point</a></code>. Default is 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Censoring symbols overlayed on a visR ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(visR)

# Estimate KM curves by treatment group
survfit_object &lt;- survival::survfit(data = adtte, survival::Surv(AVAL, 1 - CNSR) ~ TRTP)

## plot without confidence intervals
p &lt;- visR::visr(survfit_object)
p

# add censoring to plot
p %&gt;% visR::add_CNSR()

# change censor symbol shape
p %&gt;% visR::add_CNSR(shape = 1)

# change size and shape
p %&gt;% visR::add_CNSR(size = 4, shape = 2)

</code></pre>

<hr>
<h2 id='add_highlight'>Highlight a specific strata</h2><span id='topic+add_highlight'></span><span id='topic+add_highlight.ggsurvfit'></span>

<h3>Description</h3>

<p>S3 method for highlighting a specific strata by lowering the opacity of all other strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_highlight(gg, ...)

## S3 method for class 'ggsurvfit'
add_highlight(gg = NULL, strata = NULL, bg_alpha = 0.2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_highlight_+3A_gg">gg</code></td>
<td>
<p>A ggplot created with visR</p>
</td></tr>
<tr><td><code id="add_highlight_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
<tr><td><code id="add_highlight_+3A_strata">strata</code></td>
<td>
<p>String representing the name and value of the strata to be highlighted as shown in the legend.</p>
</td></tr>
<tr><td><code id="add_highlight_+3A_bg_alpha">bg_alpha</code></td>
<td>
<p>A numerical value between 0 and 1 that is used to decrease the opacity off all strata not chosen to be highlighted in <code>strata</code>. The other strata's existing alpha values are multiplied by <code>bg_alpha</code> to decrease their opacity, highlighting the target strata. This works on both <code>colour</code> and <code>fill</code> properties, as for example present after applying <code>visR::add_CI()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input <code>ggsurvfit</code> object with adjusted <code>alpha</code> values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
adtte %&gt;%
  visR::estimate_KM(strata = "SEX") %&gt;%
  visR::visr() %&gt;%
  visR::add_CI(alpha = 0.4) %&gt;%
  visR::add_highlight(strata = "M", bg_alpha = 0.2)

strata &lt;- c("Placebo", "Xanomeline Low Dose")

adtte %&gt;%
  visR::estimate_KM(strata = "TRTP") %&gt;%
  visR::visr() %&gt;%
  visR::add_CI(alpha = 0.4) %&gt;%
  visR::add_highlight(strata = strata, bg_alpha = 0.2)

</code></pre>

<hr>
<h2 id='add_quantiles'>Add quantile indicators to visR plot</h2><span id='topic+add_quantiles'></span><span id='topic+add_quantiles.ggsurvfit'></span>

<h3>Description</h3>

<p>Method to add quantile lines to a plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_quantiles(gg, ...)

## S3 method for class 'ggsurvfit'
add_quantiles(
  gg,
  quantiles = 0.5,
  linetype = "dashed",
  linecolour = "grey50",
  alpha = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_quantiles_+3A_gg">gg</code></td>
<td>
<p>A ggplot created with visR</p>
</td></tr>
<tr><td><code id="add_quantiles_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method to modify <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code></p>
</td></tr>
<tr><td><code id="add_quantiles_+3A_quantiles">quantiles</code></td>
<td>
<p>vector of quantiles to be displayed on the probability scale, default: 0.5</p>
</td></tr>
<tr><td><code id="add_quantiles_+3A_linetype">linetype</code></td>
<td>
<p>string indicating the linetype as described in the aesthetics of ggplot2 <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>, default: dashed (also supports &quot;mixed&quot; -&gt; horizontal lines are solid, vertical ones are dashed)</p>
</td></tr>
<tr><td><code id="add_quantiles_+3A_linecolour">linecolour</code></td>
<td>
<p>string indicating the linetype as described in the aesthetics of ggplot2 <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>, default: grey, (also supports &quot;strata&quot; -&gt; horizontal lines are grey50, vertical ones are the same colour as the respective strata)</p>
</td></tr>
<tr><td><code id="add_quantiles_+3A_alpha">alpha</code></td>
<td>
<p>numeric value between 0 and 1 as described in the aesthetics of ggplot2 <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>, default: 1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Lines indicating the quantiles overlayed on a visR ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(visR)

adtte %&gt;%
  estimate_KM("SEX") %&gt;%
  visr() %&gt;%
  add_quantiles()

adtte %&gt;%
  estimate_KM("SEX") %&gt;%
  visr() %&gt;%
  add_quantiles(quantiles = c(0.25, 0.50))

adtte %&gt;%
  estimate_KM("SEX") %&gt;%
  visr() %&gt;%
  add_quantiles(
    quantiles = c(0.25, 0.50),
    linetype = "solid",
    linecolour = "grey"
  )

adtte %&gt;%
  estimate_KM("SEX") %&gt;%
  visr() %&gt;%
  add_quantiles(
    quantiles = c(0.25, 0.50),
    linetype = "mixed",
    linecolour = "strata"
  )

</code></pre>

<hr>
<h2 id='add_risktable'>Add risk tables to visR plots through an S3 method</h2><span id='topic+add_risktable'></span><span id='topic+add_risktable.ggsurvfit'></span><span id='topic+add_risktable.ggtidycuminc'></span>

<h3>Description</h3>

<p>S3 method for adding risk tables to visR plots. The function has following workflow:
</p>

<ul>
<li>
<p>The risktables are calculated using <code><a href="#topic+get_risktable">get_risktable</a></code>

</p>
</li>
<li>
<p>The risktables are placed underneath visR plots using <code><a href="cowplot.html#topic+plot_grid">plot_grid</a></code>

</p>
</li>
<li>
<p>Both the initial visR plot as the individual risktables are stored as attribute <code>component</code>
in the final object to allow post-modification of the individual plots if desired

</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>add_risktable(gg, ...)

## S3 method for class 'ggsurvfit'
add_risktable(
  gg,
  times = NULL,
  statlist = "n.risk",
  label = NULL,
  group = "strata",
  collapse = FALSE,
  rowgutter = 0.16,
  ...
)

## S3 method for class 'ggtidycuminc'
add_risktable(
  gg,
  times = NULL,
  statlist = "n.risk",
  label = NULL,
  group = "strata",
  collapse = FALSE,
  rowgutter = 0.16,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_risktable_+3A_gg">gg</code></td>
<td>
<p>visR plot of class <code>ggsurvfit</code> or <code>ggtidycmprsk</code></p>
</td></tr>
<tr><td><code id="add_risktable_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method add_risktable</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_times">times</code></td>
<td>
<p>Numeric vector indicating the times at which the risk set, censored subjects, events are calculated.</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_statlist">statlist</code></td>
<td>
<p>Character vector indicating which summary data to present. Current choices are &quot;n.risk&quot; &quot;n.event&quot;
&quot;n.censor&quot;, &quot;cum.event&quot;, &quot;cum.censor&quot;.
Default is &quot;n.risk&quot;.</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_label">label</code></td>
<td>
<p>Character vector with labels for the statlist. Default matches &quot;n.risk&quot; with &quot;At risk&quot;, &quot;n.event&quot; with
&quot;Events&quot;, &quot;n.censor&quot; with &quot;Censored&quot;, &quot;cum.event&quot; with &quot;Cum. Event&quot;, and &quot;cum.censor&quot; with &quot;Cum. Censor&quot;.</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_group">group</code></td>
<td>
<p>String indicating the grouping variable for the risk tables.
Current options are:
</p>

<ul>
<li><p>&quot;strata&quot;: groups the risk tables per stratum.
The <code>label</code> specifies the label within each risk table. The strata levels
are used for the titles of the risk tables. This is the default
</p>
</li>
<li><p>&quot;statlist&quot;: groups the risk tables per statlist.
The <code>label</code> specifies the title for each risk table. The strata levels
are used for labeling within each risk table.
</p>
</li></ul>

<p>Default is &quot;strata&quot;.</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_collapse">collapse</code></td>
<td>
<p>Boolean, indicates whether to present the data overall.
Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_risktable_+3A_rowgutter">rowgutter</code></td>
<td>
<p>A numeric relative value between 0 and 1 indicates the height used by the table versus the height
used by the plot, as described in <code>cowplot::plot_grid(rel_heights=)</code>. The default is 0.16.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>ggplot</code> with added risk table.
</p>


<h3>See Also</h3>

<p><code><a href="cowplot.html#topic+plot_grid">plot_grid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Display 2 risk tables, 1 per statlist
adtte %&gt;%
  visR::estimate_KM(strata = "TRTP") %&gt;%
  visR::visr() %&gt;%
  visR::add_risktable(
    label = c("Subjects at Risk", "Censored"),
    statlist = c("n.risk", "n.censor", "n.event"),
    group = "statlist"
  )

## Display overall risk table at selected times
adtte %&gt;%
  visR::estimate_KM(strata = "TRTP") %&gt;%
  visR::visr() %&gt;%
  visR::add_risktable(
    label = c("Subjects at Risk", "Censored"),
    statlist = c("n.risk", "n.censor"),
    collapse = TRUE,
    times = c(0, 20, 40, 60)
  )

## Add risk set as specified times
adtte %&gt;%
  visR::estimate_KM(strata = "TRTP") %&gt;%
  visR::visr() %&gt;%
  visR::add_risktable(times = c(0, 20, 40, 100, 111, 200))

</code></pre>

<hr>
<h2 id='adtte'>adtte - CDISC ADaM compliant time to event data set</h2><span id='topic+adtte'></span>

<h3>Description</h3>

<p>ADTTE data copied from the 2013 CDISC Pilot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adtte
</code></pre>


<h3>Format</h3>

<p>A data frame with 254 rows and 26 variables:
</p>

<dl>
<dt>STUDYID</dt><dd><p>Study Identifier</p>
</dd>
<dt>SITEID</dt><dd><p>Study Site Identifier</p>
</dd>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>AGE</dt><dd><p>Age</p>
</dd>
<dt>AGEGR1</dt><dd><p>Pooled Age Group 1</p>
</dd>
<dt>AGEGR1N</dt><dd><p>Pooled Age Group 1 (N)</p>
</dd>
<dt>RACE</dt><dd><p>Race</p>
</dd>
<dt>RACEN</dt><dd><p>Race (N)</p>
</dd>
<dt>SEX</dt><dd><p>Sex</p>
</dd>
<dt>TRTSDT</dt><dd><p>Date of First Exposure to Treatment</p>
</dd>
<dt>TRTEDT</dt><dd><p>Date of Last Exposure to Treatment</p>
</dd>
<dt>TRTDUR</dt><dd><p>Duration of treatment (days)</p>
</dd>
<dt>TRTP</dt><dd><p>Planned Treatment</p>
</dd>
<dt>TRTA</dt><dd><p>Actual Treatment</p>
</dd>
<dt>TRTAN</dt><dd><p>Actual Treatment (N)</p>
</dd>
<dt>PARAM</dt><dd><p>Parameter Description</p>
</dd>
<dt>PARAMCD</dt><dd><p>Parameter Code</p>
</dd>
<dt>AVAL</dt><dd><p>Analysis Value</p>
</dd>
<dt>STARTDT</dt><dd><p>Time to Event Origin Date for Subject</p>
</dd>
<dt>ADT</dt><dd><p>Analysis Date</p>
</dd>
<dt>CNSR</dt><dd><p>Censor</p>
</dd>
<dt>EVNTDESC</dt><dd><p>Event or Censoring Description</p>
</dd>
<dt>SRCDOM</dt><dd><p>Source Domain</p>
</dd>
<dt>SRCVAR</dt><dd><p>Source Variable</p>
</dd>
<dt>SRCSEQ</dt><dd><p>Source Sequence Number</p>
</dd>
<dt>SAFFL</dt><dd><p>Safety Population Flag</p>
</dd>
</dl>



<h3>Source</h3>

<p>CDISC SDTM/ADAM Pilot Project.
<a href="https://github.com/phuse-org/phuse-scripts/tree/master/data">https://github.com/phuse-org/phuse-scripts/tree/master/data</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("adtte")
</code></pre>

<hr>
<h2 id='align_plots'>Align multiple ggplot graphs, taking into account the legend</h2><span id='topic+align_plots'></span>

<h3>Description</h3>

<p>This function aligns multiple <code>ggplot</code> graphs by making them the same width by taking into account the legend width.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>align_plots(pltlist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="align_plots_+3A_pltlist">pltlist</code></td>
<td>
<p>A list of plots</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of <code>ggplot</code> with equal width.
</p>


<h3>References</h3>

<p><a href="https://stackoverflow.com/questions/26159495">https://stackoverflow.com/questions/26159495</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## create 2 graphs
p1 &lt;- ggplot2::ggplot(adtte, ggplot2::aes(x = as.numeric(AGE), fill = "Age")) +
  ggplot2::geom_histogram(bins = 15)

p2 &lt;- ggplot2::ggplot(adtte, ggplot2::aes(x = as.numeric(AGE))) +
  ggplot2::geom_histogram(bins = 15)

## default alignment does not take into account legend size
cowplot::plot_grid(
  plotlist = list(p1, p2),
  align = "none",
  nrow = 2
)

## align_plots() takes into account legend width
cowplot::plot_grid(
  plotlist = visR::align_plots(pltlist = list(p1, p2)),
  align = "none",
  nrow = 2
)


</code></pre>

<hr>
<h2 id='apply_attrition'>Apply list of inclusion/exclusion criteria to a patient-level dataframe</h2><span id='topic+apply_attrition'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
Apply list of inclusion/exclusion criteria to a patient-level dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_attrition(data, criteria_conditions)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_attrition_+3A_data">data</code></td>
<td>
<p><code>data.frame</code>. Data set to be filtered</p>
</td></tr>
<tr><td><code id="apply_attrition_+3A_criteria_conditions">criteria_conditions</code></td>
<td>
<p><code>character</code> dplyr-filter compatible conditions
of the filtering criteria. These conditions will be applied to filter the input
data set and obtain final analysis data set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Filtered data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>adtte_filtered &lt;- visR::apply_attrition(adtte,
  criteria_conditions = c(
    "TRTP=='Placebo'", "AGE&gt;=75",
    "RACE=='WHITE'", "SITEID==709"
  )
)

</code></pre>

<hr>
<h2 id='apply_theme'>Applies a theme to a ggplot object.</h2><span id='topic+apply_theme'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
Takes in the styling options defined through <code>visR::define_theme</code> and applies them to a plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_theme(gg, visR_theme_dict = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_theme_+3A_gg">gg</code></td>
<td>
<p>object of class <code>ggplot</code></p>
</td></tr>
<tr><td><code id="apply_theme_+3A_visr_theme_dict">visR_theme_dict</code></td>
<td>
<p>nested list containing possible font options</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class <code>ggplot</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(visR)

theme &lt;- visR::define_theme(
  strata = list(
    "SEX" = list(
      "F" = "red",
      "M" = "blue"
    ),
    "TRTA" = list(
      "Placebo" = "cyan",
      "Xanomeline High Dose" = "purple",
      "Xanomeline Low Dose" = "brown"
    )
  ),
  fontsizes = list(
    "axis" = 12,
    "ticks" = 10,
    "legend_title" = 10,
    "legend_text" = 8
  ),
  fontfamily = "Helvetica",
  grid = FALSE,
  bg = "transparent",
  legend_position = "top"
)


gg &lt;- adtte %&gt;%
  visR::estimate_KM(strata = "SEX") %&gt;%
  visR::visr() %&gt;%
  visR::apply_theme(theme)
gg

</code></pre>

<hr>
<h2 id='brca_cohort'>Cancer survival data</h2><span id='topic+brca_cohort'></span>

<h3>Description</h3>

<p>Creation script in data-raw
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brca_cohort
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 1098 rows and 10 columns.
</p>

<hr>
<h2 id='define_theme'>Provides a simple wrapper for themes</h2><span id='topic+define_theme'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
This function collects several lists if they are present. If absent, reasonable defaults are used.
When strata are not defined in the theme, they default to grey50 and will not be presented in the legend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_theme(
  strata = NULL,
  fontsizes = NULL,
  fontfamily = "Helvetica",
  grid = FALSE,
  bg = "transparent",
  legend_position = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_theme_+3A_strata">strata</code></td>
<td>
<p>named list containing the different strata and name:colour value pairs</p>
</td></tr>
<tr><td><code id="define_theme_+3A_fontsizes">fontsizes</code></td>
<td>
<p>named list containing the font sizes for different options</p>
</td></tr>
<tr><td><code id="define_theme_+3A_fontfamily">fontfamily</code></td>
<td>
<p>string with the name of a supported font</p>
</td></tr>
<tr><td><code id="define_theme_+3A_grid">grid</code></td>
<td>
<p>boolean that specifies whether the major and minor grid should be drawn. The drawing of major and minor
gridlines can be manipulated separately by using a boolean indicator in a named <code>list</code> with elements <code>major</code>
and <code>minor</code>.</p>
</td></tr>
<tr><td><code id="define_theme_+3A_bg">bg</code></td>
<td>
<p>string defining the colour for the background of the plot</p>
</td></tr>
<tr><td><code id="define_theme_+3A_legend_position">legend_position</code></td>
<td>
<p>string defining the legend position. Valid options are NULL, 'top' 'bottom' 'right' 'left'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nested list with styling preferences for a ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
theme &lt;- visR::define_theme(
  strata = list("SEX" = list(
    "F" = "red",
    "M" = "blue"
  )),
  fontsizes = list(
    "axis" = 12,
    "ticks" = 10,
    "legend_title" = 10,
    "legend_text" = 8
  ),
  fontfamily = "Helvetica",
  grid = list(
    "major" = FALSE,
    "minor" = FALSE
  ),
  bg = "transparent",
  legend_position = "top"
)

</code></pre>

<hr>
<h2 id='estimate_cuminc'>Competing Events Cumulative Incidence</h2><span id='topic+estimate_cuminc'></span>

<h3>Description</h3>

<p>Function creates a cumulative incidence object using the
<code>tidycmprsk::cuminc()</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_cuminc(
  data = NULL,
  strata = NULL,
  CNSR = "CNSR",
  AVAL = "AVAL",
  conf.int = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_cuminc_+3A_data">data</code></td>
<td>
<p>A data frame. The dataset is expected to have
one record per subject per analysis parameter. Rows with missing observations included in the analysis are removed.</p>
</td></tr>
<tr><td><code id="estimate_cuminc_+3A_aval">AVAL</code>, <code id="estimate_cuminc_+3A_cnsr">CNSR</code>, <code id="estimate_cuminc_+3A_strata">strata</code></td>
<td>
<p>These arguments are used to construct a formula to be passed to <code>tidycmprsk::cuminc(formula=)</code>.
</p>

<ul>
<li> <p><code>AVAL</code> Analysis value for Time-to-Event analysis. Default is <code>"AVAL"</code>, as per CDISC ADaM guiding principles.
</p>
</li>
<li> <p><code>CNSR</code> Column name indicating the outcome and censoring statuses.
Column must be a factor and the first level indicates censoring, the
next level is the outcome of interest, and the remaining levels are the
competing events. Default is <code>"CNSR"</code>
</p>
</li>
<li> <p><code>strata</code> Character vector, representing the strata for Time-to-Event analysis. When NULL, an overall analysis is performed.
Default is <code>NULL</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="estimate_cuminc_+3A_conf.int">conf.int</code></td>
<td>
<p>Confidence internal level. Default is 0.95. Parameter is passed to <code>tidycmprsk::cuminc(conf.level=)</code></p>
</td></tr>
<tr><td><code id="estimate_cuminc_+3A_...">...</code></td>
<td>
<p>Additional argument passed to <code>tidycmprsk::cuminc()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A cumulative incidence object as explained at https://mskcc-epi-bio.github.io/tidycmprsk/reference/cuminc.html
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cuminc &lt;-
  visR::estimate_cuminc(
    data = tidycmprsk::trial,
    strata = "trt",
    CNSR = "death_cr",
    AVAL = "ttdeath"
  )
cuminc

cuminc %&gt;%
  visR::visr() %&gt;%
  visR::add_CI() %&gt;%
  visR::add_risktable(statlist = c("n.risk", "cum.event"))
</code></pre>

<hr>
<h2 id='estimate_KM'>Wrapper for Kaplan-Meier Time-to-Event analysis</h2><span id='topic+estimate_KM'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>This function is a wrapper around <code>survival::survfit.formula()</code>
to perform a Kaplan-Meier analysis, assuming right-censored data.
The result is an object of class <code>survfit</code> which can be used in
downstream functions and methods that rely on the <code>survfit</code> class.
</p>
<p>The function can leverage the conventions and controlled vocabulary from
<a href="https://www.cdisc.org/standards/foundational/adam/adam-basic-data-structure-bds-time-event-tte-analyses-v1-0">CDISC ADaM ADTTE data model</a>,
and also works with standard, non-CDISC datasets through the <code>formula</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_KM(
  data = NULL,
  strata = NULL,
  CNSR = "CNSR",
  AVAL = "AVAL",
  formula = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_KM_+3A_data">data</code></td>
<td>
<p>A data frame. The dataset is expected to have
one record per subject per analysis parameter. Rows with missing observations included in the analysis are removed.</p>
</td></tr>
<tr><td><code id="estimate_KM_+3A_aval">AVAL</code>, <code id="estimate_KM_+3A_cnsr">CNSR</code>, <code id="estimate_KM_+3A_strata">strata</code></td>
<td>
<p>These arguments are used to construct a formula to be passed to
<code>survival::survfit(formula=Surv(AVAL, 1-CNSR)~strata)</code>. These arguments' default values follow the naming conventions in CDISC.
</p>

<ul>
<li> <p><code>AVAL</code> Analysis value for Time-to-Event analysis. Default is <code>"AVAL"</code>, as per CDISC ADaM guiding principles.
</p>
</li>
<li> <p><code>CNSR</code> Censor for Time-to-Event analysis. Default is <code>"CNSR"</code>, as per CDISC ADaM guiding principles. It is expected that CNSR = 1
for censoring and CNSR = 0 for the event of interest.
</p>
</li>
<li> <p><code>strata</code> Character vector, representing the strata for Time-to-Event analysis. When NULL, an overall analysis is performed.
Default is <code>NULL</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="estimate_KM_+3A_formula">formula</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> formula with <code>Surv()</code> on RHS and stratifying variables on the LHS. Use
<code>~1</code> on the LHS for unstratified estimates. This argument will be passed to <code>survival::survfit(formula=)</code>. When this argument is
used, arguments AVAL, CNSR, and strata are ignored.</p>
</td></tr>
<tr><td><code id="estimate_KM_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to the ellipsis of the call <code>survival::survfit.formula(...)</code>.
Use <code>?survival::survfit.formula</code> and <code>?survival::survfitCI</code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>survfit object ready for downstream processing in estimation or visualization functions and methods.
</p>


<h3>Estimation of 'survfit' object</h3>

<p>The <code>estimate_KM()</code> function utilizes the defaults in <code>survival::survfit()</code>:
</p>

<ul>
<li><p>The Kaplan Meier estimate is estimated directly (stype = 1).
</p>
</li>
<li><p>The cumulative hazard is estimated using the Nelson-Aalen estimator (ctype = 1): H.tilde = cumsum(x$n.event/x$n.risk).
The MLE (H.hat(t) = -log(S.hat(t))) can't be requested.
</p>
</li>
<li><p>A two-sided pointwise 0.95 confidence interval is estimated using a log transformation (conf.type = &quot;log&quot;).
</p>
</li></ul>

<p>When strata are present, the returned survfit object is supplemented with
the a named list of the stratum and associated label.
To support full traceability, the data set name is captured in the named
list and the call is captured within its corresponding environment.
</p>


<h3>PARAM/PARAMCD and CDISC</h3>

<p>If the data frame includes columns PARAM/PARAMCD (part of the CDISC format),
the function expects the data has been filtered on the parameter of interest.
</p>


<h3>References</h3>

<p><a href="https://github.com/therneau/survival">https://github.com/therneau/survival</a>
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+survfit.formula">survfit.formula</a> <a href="survival.html#topic+survfitCI">survfitCI</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## No stratification
visR::estimate_KM(data = adtte)

## Stratified Kaplan-Meier analysis by `TRTP`
visR::estimate_KM(data = adtte, strata = "TRTP")

## Stratified Kaplan-Meier analysis by `TRTP` and `SEX`
visR::estimate_KM(data = adtte, strata = c("TRTP", "SEX"))

## Stratification with one level
visR::estimate_KM(data = adtte, strata = "PARAMCD")

## Analysis on subset of adtte
visR::estimate_KM(data = adtte[adtte$SEX == "F", ])

## Modify the default analysis by using the ellipsis
visR::estimate_KM(
  data = adtte, strata = NULL,
  type = "kaplan-meier", conf.int = FALSE, timefix = TRUE
)

## Example working with non CDISC data
head(survival::veteran[c("time", "status", "trt")])

# Using non-CDSIC data
visR::estimate_KM(data = survival::veteran, formula = Surv(time, status) ~ trt)

</code></pre>

<hr>
<h2 id='get_attrition'>Generate cohort attrition table</h2><span id='topic+get_attrition'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
This is an experimental function that may be developed over time.
</p>
<p>This function calculates the subjects counts excluded and included
for each step of the cohort selection process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_attrition(data, criteria_descriptions, criteria_conditions,
subject_column_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_attrition_+3A_data">data</code></td>
<td>
<p>Dataframe. It is used as the input data to count the subjects
that meets the criteria of interest</p>
</td></tr>
<tr><td><code id="get_attrition_+3A_criteria_descriptions">criteria_descriptions</code></td>
<td>
<p><code>character</code> It contains the descriptions
of the inclusion/exclusion criteria.
Each element of the vector corresponds to the description of each criterion.</p>
</td></tr>
<tr><td><code id="get_attrition_+3A_criteria_conditions">criteria_conditions</code></td>
<td>
<p><code>character</code> It contains the corresponding
conditions of the criteria.
These conditions will be used in the table to compute the counts of the
subjects.</p>
</td></tr>
<tr><td><code id="get_attrition_+3A_subject_column_name">subject_column_name</code></td>
<td>
<p><code>character</code> The column name of the table that
contains the subject id.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>criteria_descriptions and criteria_conditions need to be of same length
</p>


<h3>Value</h3>

<p>The counts and percentages of the remaining and excluded subjects
for each step of the cohort selection in a table format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>visR::get_attrition(adtte,
  criteria_descriptions =
    c(
      "1. Placebo Group", "2. Be 75 years of age or older.",
      "3. White", "4. Site 709"
    ),
  criteria_conditions = c(
    "TRTP=='Placebo'", "AGE&gt;=75",
    "RACE=='WHITE'", "SITEID==709"
  ),
  subject_column_name = "USUBJID"
)
</code></pre>

<hr>
<h2 id='get_COX_HR'>Summarize Hazard Ratio from a survival object using S3 method</h2><span id='topic+get_COX_HR'></span><span id='topic+get_COX_HR.survfit'></span>

<h3>Description</h3>

<p>S3 method for extracting information regarding Hazard Ratios.
The function allows the survival object's formula to be updated.
No default method is available at the moment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_COX_HR(x, ...)

## S3 method for class 'survfit'
get_COX_HR(x, update_formula = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_COX_HR_+3A_x">x</code></td>
<td>
<p>An object of class <code>survfit</code></p>
</td></tr>
<tr><td><code id="get_COX_HR_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method survival::coxph</p>
</td></tr>
<tr><td><code id="get_COX_HR_+3A_update_formula">update_formula</code></td>
<td>
<p>Template which specifies how to update the formula of the survfit object <code><a href="stats.html#topic+update.formula">update.formula</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidied object of class <code>coxph</code> containing Hazard Ratios
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+coxph">coxph</a></code> <code><a href="stats.html#topic+update.formula">update.formula</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## treatment effect
survfit_object_trt &lt;- visR::estimate_KM(data = adtte, strata = c("TRTP"))
visR::get_COX_HR(survfit_object_trt)

## treatment and gender effect
survfit_object_trt_sex &lt;- visR::estimate_KM(data = adtte, strata = c("TRTP", "SEX"))
visR::get_COX_HR(survfit_object_trt_sex)

## update formula of KM estimates by treatment to include "SEX" for HR estimation
visR::get_COX_HR(survfit_object_trt, update_formula = ". ~ . + SEX")

## update formula of KM estimates by treatment to include "AGE" for
## HR estimation with ties considered via the efron method
visR::get_COX_HR(survfit_object_trt,
  update_formula = ". ~ . + survival::strata(AGE)", ties = "efron"
)

</code></pre>

<hr>
<h2 id='get_pvalue'>Summarize the test for equality across strata from a survival object using S3 method</h2><span id='topic+get_pvalue'></span>

<h3>Description</h3>

<p>Wrapper around survival::survdiff that tests the null hypothesis of equality across strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pvalue(
  survfit_object,
  ptype = "All",
  rho = NULL,
  statlist = c("test", "Chisq", "df", "pvalue"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pvalue_+3A_survfit_object">survfit_object</code></td>
<td>
<p>An object of class <code>survfit</code></p>
</td></tr>
<tr><td><code id="get_pvalue_+3A_ptype">ptype</code></td>
<td>
<p>Character vector containing the type of p-value desired. Current options are &quot;Log-Rank&quot; &quot;Wilcoxon&quot; &quot;Tarone-Ware&quot; &quot;Custom&quot; &quot;All&quot;.
&quot;Custom&quot; allows the user to specify the weights on the Kaplan-Meier estimates using the argument <code>rho</code>.
The default is &quot;All&quot; displaying all types possible. When <code>rho</code> is specified in context of &quot;All&quot;, also a custom p-value is displayed.</p>
</td></tr>
<tr><td><code id="get_pvalue_+3A_rho">rho</code></td>
<td>

<p>a scalar parameter that controls the type of test.
</p>
</td></tr>
<tr><td><code id="get_pvalue_+3A_statlist">statlist</code></td>
<td>
<p>Character vector containing the desired information to be displayed. The order of the arguments determines the order in which
they are displayed in the final result. Default is the test name (&quot;test&quot;), Chi-squared test statistic (&quot;Chisq&quot;), degrees of freedom (&quot;df&quot;) and
p-value (&quot;pvalue&quot;).</p>
</td></tr>
<tr><td><code id="get_pvalue_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with summary measures for the Test of Equality Across Strata
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+survdiff">survdiff</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## general examples
survfit_object &lt;- visR::estimate_KM(data = adtte, strata = "TRTP")
visR::get_pvalue(survfit_object)
visR::get_pvalue(survfit_object, ptype = "All")

## examples to obtain specific tests
visR::get_pvalue(survfit_object, ptype = "Log-Rank")
visR::get_pvalue(survfit_object, ptype = "Wilcoxon")
visR::get_pvalue(survfit_object, ptype = "Tarone-Ware")

## Custom example - obtain Harrington and Fleming test
visR::get_pvalue(survfit_object, ptype = "Custom", rho = 1)

## Get specific information and statistics
visR::get_pvalue(survfit_object, ptype = "Log-Rank", statlist = c("test", "Chisq", "df", "pvalue"))
visR::get_pvalue(survfit_object, ptype = "Wilcoxon", statlist = c("pvalue"))

</code></pre>

<hr>
<h2 id='get_quantile'>Wrapper around quantile methods</h2><span id='topic+get_quantile'></span><span id='topic+get_quantile.survfit'></span>

<h3>Description</h3>

<p>S3 method for extracting quantiles.
No default method is available at the moment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_quantile(x, ...)

## S3 method for class 'survfit'
get_quantile(
  x,
  ...,
  probs = c(0.25, 0.5, 0.75),
  conf.int = TRUE,
  tolerance = sqrt(.Machine$double.eps)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_quantile_+3A_x">x</code></td>
<td>
<p>An object of class <code>survfit</code></p>
</td></tr>
<tr><td><code id="get_quantile_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
<tr><td><code id="get_quantile_+3A_probs">probs</code></td>
<td>
<p>probabilities Default = c(0.25,0.50,0.75)</p>
</td></tr>
<tr><td><code id="get_quantile_+3A_conf.int">conf.int</code></td>
<td>
<p>should lower and upper confidence limits be returned?</p>
</td></tr>
<tr><td><code id="get_quantile_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance for checking that the survival curve exactly
equals one of the quantiles</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with quantiles of the object
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+quantile.survfit">quantile.survfit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Kaplan-Meier estimates
survfit_object &lt;- visR::estimate_KM(data = adtte, strata = c("TRTP"))

## visR quantiles
visR::get_quantile(survfit_object)

## survival quantiles
quantile(survfit_object)

</code></pre>

<hr>
<h2 id='get_risktable'>Obtain risk tables for tables and plots</h2><span id='topic+get_risktable'></span><span id='topic+get_risktable.survfit'></span><span id='topic+get_risktable.tidycuminc'></span>

<h3>Description</h3>

<p>Create a risk table from an object using an S3 method.
Currently, no default method is defined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_risktable(x, ...)

## S3 method for class 'survfit'
get_risktable(
  x,
  times = NULL,
  statlist = "n.risk",
  label = NULL,
  group = c("strata", "statlist"),
  collapse = FALSE,
  ...
)

## S3 method for class 'tidycuminc'
get_risktable(
  x,
  times = pretty(x$tidy$time, 10),
  statlist = "n.risk",
  label = NULL,
  group = c("strata", "statlist"),
  collapse = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_risktable_+3A_x">x</code></td>
<td>
<p>an object of class <code>survfit</code> or <code>tidycuminc</code></p>
</td></tr>
<tr><td><code id="get_risktable_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
<tr><td><code id="get_risktable_+3A_times">times</code></td>
<td>
<p>Numeric vector indicating the times at which the risk set, censored subjects, events are calculated.</p>
</td></tr>
<tr><td><code id="get_risktable_+3A_statlist">statlist</code></td>
<td>
<p>Character vector indicating which summary data to present. Current choices are &quot;n.risk&quot; &quot;n.event&quot;
&quot;n.censor&quot;, &quot;cum.event&quot;, &quot;cum.censor&quot;.
Default is &quot;n.risk&quot;.</p>
</td></tr>
<tr><td><code id="get_risktable_+3A_label">label</code></td>
<td>
<p>Character vector with labels for the statlist. Default matches &quot;n.risk&quot; with &quot;At risk&quot;, &quot;n.event&quot; with
&quot;Events&quot;, &quot;n.censor&quot; with &quot;Censored&quot;, &quot;cum.event&quot; with &quot;Cum. Event&quot;, and &quot;cum.censor&quot; with &quot;Cum. Censor&quot;.</p>
</td></tr>
<tr><td><code id="get_risktable_+3A_group">group</code></td>
<td>
<p>String indicating the grouping variable for the risk tables.
Current options are:
</p>

<ul>
<li><p>&quot;strata&quot;: groups the risk tables per stratum.
The <code>label</code> specifies the label within each risk table. The strata levels
are used for the titles of the risk tables. This is the default
</p>
</li>
<li><p>&quot;statlist&quot;: groups the risk tables per statlist.
The <code>label</code> specifies the title for each risk table. The strata levels
are used for labeling within each risk table.
</p>
</li></ul>

<p>Default is &quot;strata&quot;.</p>
</td></tr>
<tr><td><code id="get_risktable_+3A_collapse">collapse</code></td>
<td>
<p>Boolean, indicates whether to present the data overall.
Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return list of attributes the form the risk table i.e.
number of patients at risk per strata
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+summary.survfit">summary.survfit</a></code>
</p>

<hr>
<h2 id='get_summary'>Summarize the descriptive statistics across strata from a survival object using S3 method</h2><span id='topic+get_summary'></span><span id='topic+get_summary.survfit'></span>

<h3>Description</h3>

<p>S3 method for extracting descriptive statistics across strata.
No default method is available at the moment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_summary(x, ...)

## S3 method for class 'survfit'
get_summary(
  x,
  statlist = c("strata", "records", "events", "median", "LCL", "UCL", "CI"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_summary_+3A_x">x</code></td>
<td>
<p>An object of class <code>survfit</code></p>
</td></tr>
<tr><td><code id="get_summary_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
<tr><td><code id="get_summary_+3A_statlist">statlist</code></td>
<td>
<p>Character vector containing the desired information to be displayed. The order of the arguments determines the order in which
they are displayed in the final result. Default is the strata (&quot;strata&quot;), number of subjects (&quot;records&quot;), number of events (&quot;events&quot;),
the median survival time (&quot;median&quot;), the Confidence Interval (&quot;CI&quot;), the Lower Confidence Limit (&quot;UCL&quot;) and the Upper Confidence Limit (&quot;UCL&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of summary statistics from survfit object
</p>
<p>A data frame with summary measures from a <code>survfit</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
survfit_object &lt;- survival::survfit(data = adtte, survival::Surv(AVAL, 1 - CNSR) ~ TRTP)
get_summary(survfit_object)

</code></pre>

<hr>
<h2 id='get_tableone'>Calculate summary statistics</h2><span id='topic+get_tableone'></span><span id='topic+get_tableone.default'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
S3 method for creating a table of summary statistics.
The summary statistics can be used for presentation in tables such as table one or baseline and demography tables.
</p>
<p>The summary statistics estimated are conditional on the variable type: continuous, binary, categorical, etc.
</p>
<p>By default the following summary stats are calculated:
</p>

<ul>
<li><p> Numeric variables: mean, min, 25th-percentile, median, 75th-percentile, maximum, standard deviation
</p>
</li>
<li><p> Factor variables: proportion of each factor level in the overall dataset
</p>
</li>
<li><p> Default: number of unique values and number of missing values
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>get_tableone(
  data,
  strata = NULL,
  overall = TRUE,
  summary_function = summarize_short
)

## Default S3 method:
get_tableone(
  data,
  strata = NULL,
  overall = TRUE,
  summary_function = summarize_short
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_tableone_+3A_data">data</code></td>
<td>
<p>The dataset to summarize as dataframe or tibble</p>
</td></tr>
<tr><td><code id="get_tableone_+3A_strata">strata</code></td>
<td>
<p>Stratifying/Grouping variable name(s) as character vector. If NULL, only overall results are returned</p>
</td></tr>
<tr><td><code id="get_tableone_+3A_overall">overall</code></td>
<td>
<p>If TRUE, the summary statistics for the overall dataset are also calculated</p>
</td></tr>
<tr><td><code id="get_tableone_+3A_summary_function">summary_function</code></td>
<td>
<p>A function defining summary statistics for numeric and categorical values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is possible to provide your own summary function. Please have a loot at summary for inspiration.
</p>


<h3>Value</h3>

<p>object of class tableone. That is a list of data specified summaries
for all input variables.
</p>


<h3>Note</h3>

<p>All columns in the table will be summarized. If only some columns shall be used, please select only those
variables prior to creating the summary table by using dplyr::select()
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example using the ovarian data set

survival::ovarian %&gt;%
  dplyr::select(-fustat) %&gt;%
  dplyr::mutate(
    age_group = factor(
      dplyr::case_when(
        age &lt;= 50 ~ "&lt;= 50 years",
        age &lt;= 60 ~ "&lt;= 60 years",
        age &lt;= 70 ~ "&lt;= 70 years",
        TRUE ~ "&gt; 70 years"
      )
    ),
    rx = factor(rx),
    ecog.ps = factor(ecog.ps)
  ) %&gt;%
  dplyr::select(age, age_group, everything()) %&gt;%
  visR::get_tableone()

# Examples using ADaM data

# display patients in an analysis set
adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(TRTA) %&gt;%
  visR::get_tableone()

## display overall summaries for demog
adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, RACE) %&gt;%
  visR::get_tableone()

## By actual treatment
adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, RACE, TRTA) %&gt;%
  visR::get_tableone(strata = "TRTA")

## By actual treatment, without overall
adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, EVNTDESC, TRTA) %&gt;%
  visR::get_tableone(strata = "TRTA", overall = FALSE)

</code></pre>

<hr>
<h2 id='legendopts'>Translates options for legend into a list that can be passed to ggplot2</h2><span id='topic+legendopts'></span>

<h3>Description</h3>

<p>This function takes the legend position and orientation, defined by the user and puts them into a list for ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>legendopts(legend_position = "right", legend_orientation = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="legendopts_+3A_legend_position">legend_position</code></td>
<td>
<p>Default = &quot;right&quot;.</p>
</td></tr>
<tr><td><code id="legendopts_+3A_legend_orientation">legend_orientation</code></td>
<td>
<p>Default = NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of legend options for ggplot2.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span><span id='topic+Surv'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>dplyr</dt><dd><p><code><a href="dplyr.html#topic+reexports">%&gt;%</a></code></p>
</dd>
<dt>survival</dt><dd><p><code><a href="survival.html#topic+Surv">Surv</a></code></p>
</dd>
</dl>

<hr>
<h2 id='render'>Render a data.frame, risktable, or tableone object as a table</h2><span id='topic+render'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
Render a previously created data.frame, tibble or tableone object to html, rtf or latex
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render(
  data,
  title = "",
  datasource,
  footnote = "",
  output_format = "html",
  engine = "gt",
  download_format = c("copy", "csv", "excel")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_+3A_data">data</code></td>
<td>
<p>Input data.frame or tibble to visualize</p>
</td></tr>
<tr><td><code id="render_+3A_title">title</code></td>
<td>
<p>Specify the title as a text string to be displayed in the rendered table.
Default is no title.</p>
</td></tr>
<tr><td><code id="render_+3A_datasource">datasource</code></td>
<td>
<p>String specifying the data source underlying the data set.
Default is no title.</p>
</td></tr>
<tr><td><code id="render_+3A_footnote">footnote</code></td>
<td>
<p>String specifying additional information to be displayed as a footnote
alongside the data source and specifications of statistical tests.</p>
</td></tr>
<tr><td><code id="render_+3A_output_format">output_format</code></td>
<td>
<p>Type of output that is returned, can be &quot;html&quot; or &quot;latex&quot;.
Default is &quot;html&quot;.</p>
</td></tr>
<tr><td><code id="render_+3A_engine">engine</code></td>
<td>
<p>If &quot;html&quot; is selected as <code>output_format</code>, one can chose between
using <code>kable</code>, <code>gt</code> and <code>DT</code> as engine to render the output table. Default is &quot;gt&quot;.</p>
</td></tr>
<tr><td><code id="render_+3A_download_format">download_format</code></td>
<td>
<p>Options formats generated for downloading the data.
Default is a list &quot;c('copy', 'csv', 'excel')&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table data structure with possible interactive functionality depending on the choice of the engine.
</p>

<hr>
<h2 id='stat_stepribbon'>Step ribbon statistic</h2><span id='topic+stat_stepribbon'></span><span id='topic+StatStepribbon'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
Provides stair-step values for ribbon plots, often using in
conjunction with <code>ggplot2::geom_step()</code>.
The step ribbon can be added with <code>stat_stepribbon()</code> or
identically with <code>ggplot2::geom_ribbon(stat = "stepribbon")</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_stepribbon(
  mapping = NULL,
  data = NULL,
  geom = "ribbon",
  position = "identity",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE,
  direction = "hv",
  ...
)

StatStepribbon
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stat_stepribbon_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_geom">geom</code></td>
<td>
<p>which geom to use; defaults to &quot;<code>ribbon</code>&quot;</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string naming the adjustment
(e.g. <code>"jitter"</code> to use <code>position_jitter</code>), or the result of a call to a
position adjustment function. Use the latter if you need to change the
settings of the adjustment.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_direction">direction</code></td>
<td>
<p><code>hv</code> for horizontal-vertical steps, <code>vh</code> for
vertical-horizontal steps</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>StatStepRibbon</code> (inherits from <code>Stat</code>, <code>ggproto</code>, <code>gg</code>) of length 3.
</p>


<h3>Value</h3>

<p>a ggplot
</p>


<h3>References</h3>

<p><a href="https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs">https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># using ggplot2::geom_ribbon()
survival::survfit(survival::Surv(time, status) ~ 1, data = survival::lung) %&gt;%
  survival::survfit0() %&gt;%
  broom::tidy() %&gt;%
  ggplot2::ggplot(ggplot2::aes(x = time, y = estimate, ymin = conf.low, ymax = conf.high)) +
  ggplot2::geom_step() +
  ggplot2::geom_ribbon(stat = "stepribbon", alpha = 0.2)

# using stat_stepribbon() with the same result
survival::survfit(survival::Surv(time, status) ~ 1, data = survival::lung) %&gt;%
  survival::survfit0() %&gt;%
  broom::tidy() %&gt;%
  ggplot2::ggplot(ggplot2::aes(x = time, y = estimate, ymin = conf.low, ymax = conf.high)) +
  ggplot2::geom_step() +
  visR::stat_stepribbon(alpha = 0.2)
</code></pre>

<hr>
<h2 id='summarize_long'>Calculate summary statistics from a vector</h2><span id='topic+summarize_long'></span><span id='topic+summarize_long.factor'></span><span id='topic+summarize_long.integer'></span><span id='topic+summarize_long.numeric'></span><span id='topic+summarize_long.default'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
Calculates several summary statistics. The summary statistics
depend on the vector class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_long(x)

## S3 method for class 'factor'
summarize_long(x)

## S3 method for class 'integer'
summarize_long(x)

## S3 method for class 'numeric'
summarize_long(x)

## Default S3 method:
summarize_long(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarize_long_+3A_x">x</code></td>
<td>
<p>an object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarized version of the input.
</p>

<hr>
<h2 id='summarize_short'>Create abbreviated variable summary for table1</h2><span id='topic+summarize_short'></span><span id='topic+summarize_short.factor'></span><span id='topic+summarize_short.numeric'></span><span id='topic+summarize_short.integer'></span><span id='topic+summarize_short.default'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
This function creates summaries combines multiple summary
measures in a single formatted string. Create variable summary for numeric variables. Calculates mean
(standard deviation), median (IQR), min-max range and N/% missing elements
for a numeric vector.
</p>
<p>Create variable summary for integer variables
Calculates mean (standard deviation), median (IQR), min-max range
and N/% missing elements for a integer vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_short(x)

## S3 method for class 'factor'
summarize_short(x)

## S3 method for class 'numeric'
summarize_short(x)

## S3 method for class 'integer'
summarize_short(x)

## Default S3 method:
summarize_short(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarize_short_+3A_x">x</code></td>
<td>
<p>a vector to be summarized</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarized less detailed version of the input.
</p>

<hr>
<h2 id='Surv_CNSR'>Create a Survival Object from CDISC Data</h2><span id='topic+Surv_CNSR'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>The aim of <code>Surv_CNSR()</code> is to map the inconsistency in convention between
the <a href="https://cran.r-project.org/package=survival">survival</a> package and
<a href="https://www.cdisc.org/standards/foundational/adam/adam-basic-data-structure-bds-time-event-tte-analyses-v1-0">CDISC ADaM ADTTE data model</a>.
</p>
<p>The function creates a survival object (e.g. <code>survival::Surv()</code>) that
uses CDISC ADaM ADTTE coding conventions and converts the arguments to the
status/event variable convention used in the
<a href="https://cran.r-project.org/package=survival">survival</a> package.
</p>
<p>The <code>AVAL</code> and <code>CNSR</code> arguments are passed to
<code>survival::Surv(time = AVAL, event = 1 - CNSR, type = "right", origin = 0)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Surv_CNSR(AVAL, CNSR)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Surv_CNSR_+3A_aval">AVAL</code></td>
<td>
<p>The follow-up time. The follow-up time is assumed to originate from zero.
When no argument is passed, the default value is a column/vector named <code>AVAL</code>.</p>
</td></tr>
<tr><td><code id="Surv_CNSR_+3A_cnsr">CNSR</code></td>
<td>
<p>The censoring indicator where <code>1=censored</code> and <code>0=death/event</code>.
When no argument is passed, the default value is a column/vector named <code>CNSR</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class 'Surv'
</p>


<h3>Details</h3>

<p>The <code>Surv_CNSR()</code> function creates a survival object utilizing the
expected data structure in the CDISC ADaM ADTTE data model,
mapping the CDISC ADaM ADTTE coding conventions with the expected
status/event variable convention used in the survival package&mdash;specifically,
the coding convention used for the status/event indicator.
The survival package expects the status/event indicator in the
following format: <code>0=alive</code>, <code>1=dead</code>. Other accepted choices are
<code>TRUE</code>/<code>FALSE</code> (<code>TRUE = death</code>) or <code>1</code>/<code>2</code> (<code>2=death</code>).
A final but risky option is to omit the indicator variable, in which case
all subjects are assumed to have an event.
</p>
<p>The CDISC ADaM ADTTE data model adopts a different coding convention for
the event/status indicator. Using this convention, the event/status variable
is named <code>'CNSR'</code> and uses the following coding: <code>censor = 1</code>, <code>status/event = 0</code>.
</p>


<h3>See Also</h3>

<p><code><a href="survival.html#topic+Surv">survival::Surv()</a></code>, <code><a href="#topic+estimate_KM">estimate_KM()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use the `Surv_CNSR()` function with visR functions
adtte %&gt;%
  visR::estimate_KM(formula = visR::Surv_CNSR() ~ SEX)

# Use the `Surv_CNSR()` function with functions from other packages as well
survival::survfit(visR::Surv_CNSR() ~ SEX, data = adtte)
survival::survreg(visR::Surv_CNSR() ~ SEX + AGE, data = adtte) %&gt;%
  broom::tidy()
</code></pre>

<hr>
<h2 id='tableone'>Display a summary Table (i.e. table one)</h2><span id='topic+tableone'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
Wrapper function to produce a summary table (i.e. Table One).
Create and render a summary table for a dataset.
A typical example of a summary table are &quot;table one&quot;, the first table in an applied medical research manuscript.
</p>
<p>Calculate summary statistics and present them in a formatted table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableone(
  data,
  title,
  datasource,
  footnote = "",
  strata = NULL,
  overall = TRUE,
  summary_function = summarize_short,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableone_+3A_data">data</code></td>
<td>
<p>The dataframe or tibble to visualize</p>
</td></tr>
<tr><td><code id="tableone_+3A_title">title</code></td>
<td>
<p>Table title to include in the rendered table. Input is a text string.</p>
</td></tr>
<tr><td><code id="tableone_+3A_datasource">datasource</code></td>
<td>
<p>String specifying the datasource underlying the data set</p>
</td></tr>
<tr><td><code id="tableone_+3A_footnote">footnote</code></td>
<td>
<p>Table footnote to include in the rendered table. Input is a text string.</p>
</td></tr>
<tr><td><code id="tableone_+3A_strata">strata</code></td>
<td>
<p>Character vector with column names to use for
stratification in the summary table. Default: NULL , which indicates no stratification.</p>
</td></tr>
<tr><td><code id="tableone_+3A_overall">overall</code></td>
<td>
<p>If TRUE, the summary statistics for the overall dataset are also calculated</p>
</td></tr>
<tr><td><code id="tableone_+3A_summary_function">summary_function</code></td>
<td>
<p>A function defining summary statistics for numeric and categorical values
Pre-implemented functions are summarize_long and summarize_short</p>
</td></tr>
<tr><td><code id="tableone_+3A_...">...</code></td>
<td>
<p>Pass options to render_table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table-like data structure, possibly interactive depending on the choice of the engine
</p>


<h3>Example Output</h3>

<p>tableone(engine = &quot;gt&quot;)
</p>
<p><img src="../help/figures/tableone_gt_ex.png" width=65% alt="tableone_gt_ex.png" />
</p>
<p>tableone(engine = &quot;DT&quot;)
</p>
<p><img src="../help/figures/tableone_DT_ex.png" width=65% alt="tableone_DT_ex.png" />
</p>
<p>tableone(engine = &quot;kable&quot;)
</p>
<p><img src="../help/figures/tableone_kable_html_ex.png" width=65% alt="tableone_kable_html_ex.png" />
</p>
<p>tableone(engine = &quot;kable&quot;, output_format = &quot;latex&quot;)
</p>
<p><img src="../help/figures/tableone_kable_latex_ex.png" width=65% alt="tableone_kable_latex_ex.png" />
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# metadata for table
t1_title &lt;- "Cohort Summary"
t1_ds &lt;- "ADaM Interim Dataset for Time-to-Event Analysis"
t1_fn &lt;- "My table one footnote"


## table by treatment - without overall and render with GT
tbl_gt &lt;-
  adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, EVNTDESC, TRTA) %&gt;%
  visR::tableone(
    strata = "TRTA",
    overall = FALSE,
    title = t1_title,
    datasource = t1_ds,
    footnote = t1_fn,
    engine = "gt"
  )

## table by treatment - without overall and render with DT
tbl_DT &lt;-
  adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, EVNTDESC, TRTA) %&gt;%
  visR::tableone(
    strata = "TRTA",
    overall = FALSE,
    title = t1_title,
    datasource = t1_ds,
    footnote = t1_fn,
    engine = "DT"
  )

## table by treatment - without overall and render with kable
tbl_kable_html &lt;-
  adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, EVNTDESC, TRTA) %&gt;%
  visR::tableone(
    strata = "TRTA",
    overall = FALSE,
    title = t1_title,
    datasource = t1_ds,
    footnote = t1_fn,
    engine = "kable"
  )

## table by treatment - without overall and render with kable as
## a latex table format rather than html
tbl_kable_latex &lt;-
  adtte %&gt;%
  dplyr::filter(SAFFL == "Y") %&gt;%
  dplyr::select(AGE, AGEGR1, SEX, EVNTDESC, TRTA) %&gt;%
  visR::tableone(
    strata = "TRTA",
    overall = FALSE,
    title = t1_title,
    datasource = t1_ds,
    footnote = t1_fn,
    output_format = "latex",
    engine = "kable"
  )

</code></pre>

<hr>
<h2 id='the_lhs'>Find the &quot;lhs&quot; in the pipeline</h2><span id='topic+the_lhs'></span>

<h3>Description</h3>

<p>This function finds the left-hand sided symbol in a magrittr pipe and returns it as a character.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>the_lhs()
</code></pre>


<h3>Value</h3>

<p>Left-hand sided symbol as string in the magrittr pipe.
</p>


<h3>References</h3>

<p><a href="https://github.com/tidyverse/magrittr/issues/115#issuecomment-173894787">https://github.com/tidyverse/magrittr/issues/115#issuecomment-173894787</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>blah &lt;- function(x) the_lhs()
adtte %&gt;%
  blah()
</code></pre>

<hr>
<h2 id='tidyme'>Extended tidy cleaning of selected objects using S3 method</h2><span id='topic+tidyme'></span><span id='topic+tidyme.default'></span><span id='topic+tidyme.survfit'></span>

<h3>Description</h3>

<p>S3 method for extended tidying of selected model outputs. Note
that the visR method retains the original nomenclature of the objects,
and adds the one of broom::tidy to ensure compatibility with tidy workflows.
The default method relies on <code>broom::tidy</code> to return a tidied object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidyme(x, ...)

## Default S3 method:
tidyme(x, ...)

## S3 method for class 'survfit'
tidyme(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidyme_+3A_x">x</code></td>
<td>
<p>An S3 object</p>
</td></tr>
<tr><td><code id="tidyme_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame containing all list elements of the S3 object as columns.
The column 'strata' is a factor to ensure that the strata are sorted
in agreement with the order in the <code>survfit</code> object
</p>


<h3>See Also</h3>

<p><code><a href="broom.html#topic+tidy">tidy</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Extended tidying for a survfit object
surv_object &lt;- visR::estimate_KM(data = adtte, strata = "TRTA")
tidied &lt;- visR::tidyme(surv_object)

## Tidyme for non-included classes
data &lt;- cars
lm_object &lt;- stats::lm(data = cars, speed ~ dist)
lm_tidied &lt;- visR::tidyme(lm_object)
lm_tidied

</code></pre>

<hr>
<h2 id='visr'>Plot a supported S3 object</h2><span id='topic+visr'></span><span id='topic+visr.default'></span><span id='topic+visr.survfit'></span><span id='topic+visr.attrition'></span><span id='topic+visr.tidycuminc'></span>

<h3>Description</h3>

<p>S3 method for creating plots directly from objects using <code>ggplot2</code>,
similar to the base R <code>plot()</code> function.
</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Methods <code>visr.survfit()</code> and <code>visr.tidycuminc()</code> have been deprecated
in favor of <code>ggsurvfit::ggsurvfit()</code> and <code>ggsurvfit::ggcuminc()</code>, respectively.
</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a>
<code>visr.attrition()</code> function to draw a Consort flow diagram chart is currently being questioned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>visr(x, ...)

## Default S3 method:
visr(x, ...)

## S3 method for class 'survfit'
visr(
  x = NULL,
  x_label = NULL,
  y_label = NULL,
  x_units = NULL,
  x_ticks = NULL,
  y_ticks = NULL,
  fun = "surv",
  legend_position = "right",
  ...
)

## S3 method for class 'attrition'
visr(
  x,
  description_column_name = "Criteria",
  value_column_name = "Remaining N",
  complement_column_name = "",
  box_width = 50,
  font_size = 12,
  fill = "white",
  border = "black",
  ...
)

## S3 method for class 'tidycuminc'
visr(
  x = NULL,
  x_label = "Time",
  y_label = "Cumulative Incidence",
  x_units = NULL,
  x_ticks = pretty(x$tidy$time, 10),
  y_ticks = pretty(c(0, 1), 5),
  legend_position = "right",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="visr_+3A_x">x</code></td>
<td>
<p>Object of class <code>attritiontable</code></p>
</td></tr>
<tr><td><code id="visr_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the method</p>
</td></tr>
<tr><td><code id="visr_+3A_x_label">x_label</code></td>
<td>
<p><code>character</code> Label for the x-axis. When not specified,
the function will look for <code>"PARAM"</code> or <code>"PARAMCD"</code> information in the original data set (CDISC standards).
If no <code>"PARAM"</code>/<code>"PARAMCD"</code> information is available, the default x-axis label is <code>"Time"</code>.</p>
</td></tr>
<tr><td><code id="visr_+3A_y_label">y_label</code></td>
<td>
<p><code>character</code> Label for the y-axis. When not specified,
the default will do a proposal, depending on the <code>fun</code> argument.</p>
</td></tr>
<tr><td><code id="visr_+3A_x_units">x_units</code></td>
<td>
<p>Unit to be added to the x_label (x_label (x_unit)).
Default is NULL.</p>
</td></tr>
<tr><td><code id="visr_+3A_x_ticks">x_ticks</code></td>
<td>
<p>Ticks for the x-axis. When not specified, the default will
do a proposal.</p>
</td></tr>
<tr><td><code id="visr_+3A_y_ticks">y_ticks</code></td>
<td>
<p>Ticks for the y-axis. When not specified,
the default will do a proposal based on the <code>fun</code> argument.</p>
</td></tr>
<tr><td><code id="visr_+3A_fun">fun</code></td>
<td>
<p>Function that represents the scale of the estimate.
The current options are:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>surv</code> </td><td style="text-align: left;"> is the survival probability. This is the default </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>log</code> </td><td style="text-align: left;"> is log of the survival probability </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>event</code> </td><td style="text-align: left;"> is the failure probability </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cloglog</code> </td><td style="text-align: left;"> is log(-log(survival probability)) </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>pct</code> </td><td style="text-align: left;"> is survival as a percentage </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>logpct</code> </td><td style="text-align: left;"> is log survival as a percentage </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cumhaz</code> </td><td style="text-align: left;"> is the cumulative hazard </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="visr_+3A_legend_position">legend_position</code></td>
<td>
<p>Specifies the legend position in the plot.
Character values allowed are &quot;top&quot; &quot;left&quot; &quot;bottom&quot; &quot;right&quot;.
Numeric coordinates are also allowed.
Default is &quot;right&quot;.</p>
</td></tr>
<tr><td><code id="visr_+3A_description_column_name">description_column_name</code></td>
<td>
<p><code>character</code> Name of the column containing
the inclusion descriptions</p>
</td></tr>
<tr><td><code id="visr_+3A_value_column_name">value_column_name</code></td>
<td>
<p><code>character</code> Name of the column containing the
remaining sample counts</p>
</td></tr>
<tr><td><code id="visr_+3A_complement_column_name">complement_column_name</code></td>
<td>
<p><code>character</code> Optional: Name of the column
containing the exclusion descriptions</p>
</td></tr>
<tr><td><code id="visr_+3A_box_width">box_width</code></td>
<td>
<p><code>character</code> The box width for each box in the flow
chart</p>
</td></tr>
<tr><td><code id="visr_+3A_font_size">font_size</code></td>
<td>
<p><code>character</code> The fontsize in pt</p>
</td></tr>
<tr><td><code id="visr_+3A_fill">fill</code></td>
<td>
<p>The color (string or hexcode) to use to fill the boxes in the
flowchart</p>
</td></tr>
<tr><td><code id="visr_+3A_border">border</code></td>
<td>
<p>The color (string or hexcode) to use for the borders of the
boxes in the flowchart</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>ggplot</code> and <code>ggsurvplot</code> for <code>survfit</code> objects.
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit KM
km_fit &lt;- survival::survfit(survival::Surv(AVAL, 1 - CNSR) ~ TRTP, data = adtte)

# plot curves using survival plot function
plot(km_fit)

# plot same curves using visR::visr plotting function
visR::visr(km_fit)

# estimate KM using visR wrapper
survfit_object &lt;- visR::estimate_KM(data = adtte, strata = "TRTP")

# Plot survival probability
visR::visr(survfit_object, fun = "surv")

# Plot survival percentage
visR::visr(survfit_object, fun = "pct")

# Plot cumulative hazard
visR::visr(survfit_object, fun = "cloglog")


## Create attrition
attrition &lt;- visR::get_attrition(adtte,
  criteria_descriptions = c(
    "1. Not in Placebo Group",
    "2. Be 75 years of age or older.",
    "3. White",
    "4. Female"
  ),
  criteria_conditions = c(
    "TRTP != 'Placebo'",
    "AGE &gt;= 75",
    "RACE=='WHITE'",
    "SEX=='F'"
  ),
  subject_column_name = "USUBJID"
)

## Draw a CONSORT attrition chart without specifying extra text for the complement
attrition %&gt;%
  visr("Criteria", "Remaining N")

## Add detailed complement descriptions to the "exclusion" part of the CONSORT diagram
# Step 1. Add new column to attrition dataframe
attrition$Complement &lt;- c(
  "NA",
  "Placebo Group",
  "Younger than 75 years",
  "Non-White",
  "Male"
)

# Step 2. Define the name of the column in the call to the plotting function
attrition %&gt;%
  visr("Criteria", "Remaining N", "Complement")

## Styling the CONSORT flowchart
# Change the fill and outline of the boxes in the flowchart
attrition %&gt;%
  visr("Criteria", "Remaining N", "Complement", fill = "lightblue", border = "grey")

## Adjust the font size in the boxes
attrition %&gt;%
  visr("Criteria", "Remaining N", font_size = 10)

</code></pre>

<hr>
<h2 id='visR+20Global'><code>visR</code> package</h2><span id='topic+visR+20Global'></span>

<h3>Description</h3>

<p>Set global variables
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
