<!DOCTYPE html><html><head><title>Help for package leafgl</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {leafgl}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addGlPolylines'><p>add polylines to a leaflet map using Leaflet.glify</p></a></li>
<li><a href='#checkDim'><p>checkDim</p></a></li>
<li><a href='#checkDimPop'><p>checkDim</p></a></li>
<li><a href='#clearGlLayers'><p>clearGlLayers</p></a></li>
<li><a href='#leafglOutput'><p>Use leafgl in shiny</p></a></li>
<li><a href='#makeColorMatrix'><p>makeColorMatrix</p></a></li>
<li><a href='#makePopup'><p>makePopup</p></a></li>
<li><a href='#removeGlPoints'><p>removeGlPoints</p></a></li>
<li><a href='#removeGlPolygons'><p>removeGlPolygons</p></a></li>
<li><a href='#removeGlPolylines'><p>removeGlPolylines</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>High-Performance 'WebGl' Rendering for Package 'leaflet'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tim Appelhans &lt;tim.appelhans@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides bindings to the 'Leaflet.glify' JavaScript library which extends the 'leaflet' JavaScript library to render large data in the browser using 'WebGl'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>geojsonsf, htmltools, jsonify, leaflet, sf, grDevices</td>
</tr>
<tr>
<td>Suggests:</td>
<td>colourvalues, shiny, testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-25 19:03:04 UTC; timpanse</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Appelhans [cre, aut, cph],
  Colin Fay <a href="https://orcid.org/0000-0001-7343-1846"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Robert Plummer [ctb] (Leaflet.glify plugin),
  Kent Johnson [ctb],
  Sebastian Gatscha [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-28 10:30:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='addGlPolylines'>add polylines to a leaflet map using Leaflet.glify</h2><span id='topic+addGlPolylines'></span><span id='topic+addGlPoints'></span><span id='topic+addGlPolygons'></span>

<h3>Description</h3>

<p>Leaflet.glify is a web gl renderer plugin for leaflet. See
<a href="https://github.com/robertleeplummerjr/Leaflet.glify">https://github.com/robertleeplummerjr/Leaflet.glify</a> for details
and documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addGlPolylines(
  map,
  data,
  color = cbind(0, 0.2, 1),
  opacity = 0.6,
  group = "glpolylines",
  popup = NULL,
  weight = 1,
  layerId = NULL,
  src = FALSE,
  ...
)

addGlPoints(
  map,
  data,
  fillColor = "#0033ff",
  fillOpacity = 0.8,
  radius = 10,
  group = "glpoints",
  popup = NULL,
  layerId = NULL,
  src = FALSE,
  ...
)

addGlPolygons(
  map,
  data,
  color = cbind(0, 0.2, 1),
  fillColor = color,
  fillOpacity = 0.8,
  group = "glpolygons",
  popup = NULL,
  layerId = NULL,
  src = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addGlPolylines_+3A_map">map</code></td>
<td>
<p>a leaflet map to add points/polygons to.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_data">data</code></td>
<td>
<p>sf/sp point/polygon data to add to the map.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_color">color</code></td>
<td>
<p>Object representing the color. Can be of class integer, character with
color names, HEX codes or random characters, factor, matrix, data.frame, list, json or formula.
See the examples or <a href="#topic+makeColorMatrix">makeColorMatrix</a> for more information.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_opacity">opacity</code></td>
<td>
<p>feature opacity. Numeric between 0 and 1.
Note: expect funny results if you set this to &lt; 1.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_group">group</code></td>
<td>
<p>a group name for the feature layer.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_popup">popup</code></td>
<td>
<p>Object representing the popup. Can be of type character with column names,
formula, logical, data.frame or matrix, Spatial, list or JSON. If the lenght does not
match the number of rows in the dataset, the popup vector is repeated to match the dimension.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_weight">weight</code></td>
<td>
<p>line width/thicknes in pixels for <code>addGlPolylines</code>.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_layerid">layerId</code></td>
<td>
<p>the layer id</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_src">src</code></td>
<td>
<p>whether to pass data to the widget via file attachments.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="jsonify.html#topic+to_json">to_json</a></code> for the data coordinates.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_fillcolor">fillColor</code></td>
<td>
<p>fill color.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_fillopacity">fillOpacity</code></td>
<td>
<p>fill opacity.</p>
</td></tr>
<tr><td><code id="addGlPolylines_+3A_radius">radius</code></td>
<td>
<p>point size in pixels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>MULTILINESTRINGs are currently not supported! Make sure you cast your data
to LINETSRING first (e.g. using <code>sf::st_cast(data, "LINESTRING")</code>.
</p>
<p>MULTIPOLYGONs are currently not supported! Make sure you cast your data
to POLYGON first (e.g. using <code>sf::st_cast(data, "POLYGON")</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>addGlPolylines</code>: add polylines to a leaflet map using Leaflet.glify
</p>
</li>
<li> <p><code>addGlPoints</code>: add points to a leaflet map using Leaflet.glify
</p>
</li>
<li> <p><code>addGlPolygons</code>: add polygons to a leaflet map using Leaflet.glify
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
library(leaflet)
library(leafgl)
library(sf)

storms = st_as_sf(atlStorms2005)

cols = heat.colors(nrow(storms))

leaflet() %&gt;%
  addProviderTiles(provider = providers$CartoDB.Positron) %&gt;%
  addGlPolylines(data = storms, color = cols, popup = TRUE, opacity = 1)
}

if (interactive()) {
library(leaflet)
library(leafgl)
library(sf)

n = 1e5

df1 = data.frame(id = 1:n,
                 x = rnorm(n, 10, 1),
                 y = rnorm(n, 49, 0.8))
pts = st_as_sf(df1, coords = c("x", "y"), crs = 4326)

cols = topo.colors(nrow(pts))

leaflet() %&gt;%
  addProviderTiles(provider = providers$CartoDB.DarkMatter) %&gt;%
  addGlPoints(data = pts, fillColor = cols, popup = TRUE)

}

if (interactive()) {
library(leaflet)
library(leafgl)
library(sf)

gadm = st_as_sf(gadmCHE)
gadm = st_cast(gadm, "POLYGON")
cols = grey.colors(nrow(gadm))

leaflet() %&gt;%
  addProviderTiles(provider = providers$CartoDB.DarkMatter) %&gt;%
  addGlPolygons(data = gadm, color = cols, popup = TRUE)
}

</code></pre>

<hr>
<h2 id='checkDim'>checkDim</h2><span id='topic+checkDim'></span>

<h3>Description</h3>

<p>Check the length of the color vector. It must match the
number of rows of the dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDim(x, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkDim_+3A_x">x</code></td>
<td>
<p>The color vector</p>
</td></tr>
<tr><td><code id="checkDim_+3A_data">data</code></td>
<td>
<p>The dataset</p>
</td></tr>
</table>

<hr>
<h2 id='checkDimPop'>checkDim</h2><span id='topic+checkDimPop'></span>

<h3>Description</h3>

<p>Check the length of the popup vector. It must match the
number of rows of the dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDimPop(x, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkDimPop_+3A_x">x</code></td>
<td>
<p>The popup vector</p>
</td></tr>
<tr><td><code id="checkDimPop_+3A_data">data</code></td>
<td>
<p>The dataset</p>
</td></tr>
</table>

<hr>
<h2 id='clearGlLayers'>clearGlLayers</h2><span id='topic+clearGlLayers'></span>

<h3>Description</h3>

<p>Clear all Glify features
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearGlLayers(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearGlLayers_+3A_map">map</code></td>
<td>
<p>The map widget</p>
</td></tr>
</table>

<hr>
<h2 id='leafglOutput'>Use leafgl in shiny</h2><span id='topic+leafglOutput'></span><span id='topic+renderLeafgl'></span>

<h3>Description</h3>

<p>Use leafgl in shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leafglOutput(outputId, width = "100%", height = 400)

renderLeafgl(expr, env = parent.frame(), quoted = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="leafglOutput_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="leafglOutput_+3A_width">width</code>, <code id="leafglOutput_+3A_height">height</code></td>
<td>
<p>the width and height of the map</p>
</td></tr>
<tr><td><code id="leafglOutput_+3A_expr">expr</code></td>
<td>
<p>An expression that generates an HTML widget</p>
</td></tr>
<tr><td><code id="leafglOutput_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate expr.</p>
</td></tr>
<tr><td><code id="leafglOutput_+3A_quoted">quoted</code></td>
<td>
<p>Is expr a quoted expression (with quote())?
This is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="leaflet.html#topic+map-shiny">leaflet::leafletOutput</a> for details.
<code>renderLeafgl</code> is only exported for consistency. You can just as well
use <a href="leaflet.html#topic+map-shiny">leaflet::renderLeaflet</a> (see example).
<code>leafglOutput</code> on the other hand is needed as it will attach all
necessary dependencies.
</p>


<h3>Value</h3>

<p>A UI for rendering leafgl
</p>
<p>A server function for rendering leafgl
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
library(shiny)
library(leaflet)
library(leafgl)
library(sf)

n = 1e4
df1 = data.frame(id = 1:n,
    x = rnorm(n, 10, 3),
    y = rnorm(n, 49, 1.8))
pts = st_as_sf(df1, coords = c("x", "y"), crs = 4326)

m = leaflet() %&gt;%
 addProviderTiles(provider = providers$CartoDB.DarkMatter) %&gt;%
 addGlPoints(data = pts, group = "pts") %&gt;%
 setView(lng = 10.5, lat = 49.5, zoom = 6) %&gt;%
 addLayersControl(overlayGroups = "pts")

ui &lt;- fluidPage(
    leafglOutput("mymap")
)

server &lt;- function(input, output, session) {
    output$mymap &lt;- renderLeaflet(m)
}

shinyApp(ui, server)
}

</code></pre>

<hr>
<h2 id='makeColorMatrix'>makeColorMatrix</h2><span id='topic+makeColorMatrix'></span>

<h3>Description</h3>

<p>Transform object to rgb color matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeColorMatrix(x, data, palette, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeColorMatrix_+3A_x">x</code></td>
<td>
<p>Object representing the color. Can be of class integer, numeric, Date,
POSIX*, character with color names or HEX codes, factor, matrix, data.frame,
list, json or formula.</p>
</td></tr>
<tr><td><code id="makeColorMatrix_+3A_data">data</code></td>
<td>
<p>The dataset</p>
</td></tr>
<tr><td><code id="makeColorMatrix_+3A_palette">palette</code></td>
<td>
<p>Name of a color palette. If <code>colourvalues</code> is installed, it is
passed to <code><a href="colourvalues.html#topic+colour_values_rgb">colour_values_rgb</a></code>. To see all available
palettes, please use <code><a href="colourvalues.html#topic+colour_palettes">colour_palettes</a></code>.
If <code>colourvalues</code> is not installed, the palette is passed to
<code><a href="leaflet.html#topic+colorNumeric">colorNumeric</a></code>.</p>
</td></tr>
<tr><td><code id="makeColorMatrix_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="colourvalues.html#topic+colour_palettes">colour_palettes</a></code> or
<code><a href="leaflet.html#topic+colorNumeric">colorNumeric</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>{
## For Integer/Numeric/Factor
makeColorMatrix(23L)
makeColorMatrix(23)
makeColorMatrix(as.factor(23))

## For POSIXt / Date
makeColorMatrix(as.POSIXlt(Sys.time(), "America/New_York"), NULL)
makeColorMatrix(Sys.time(), NULL)
makeColorMatrix(Sys.Date(), NULL)

## For matrix/data.frame
makeColorMatrix(cbind(130,1,1), NULL)
makeColorMatrix(matrix(1:99, ncol = 3, byrow = TRUE), data.frame(x=c(1:33)))
makeColorMatrix(data.frame(matrix(1:99, ncol = 3, byrow = TRUE)), data.frame(x=c(1:33)))

## For characters
library(leaflet)
makeColorMatrix("red", breweries91)
makeColorMatrix("blue", breweries91)
makeColorMatrix("#36ba01", breweries91)
makeColorMatrix("founded", data.frame(breweries91))

## For formulaes
makeColorMatrix(~founded, breweries91)
makeColorMatrix(~founded + zipcode, breweries91)

## For JSON
library(jsonify)
makeColorMatrix(jsonify::to_json(data.frame(r = 54, g = 186, b = 1)), NULL)

## For Lists
makeColorMatrix(list(1,2), data.frame(x=c(1,2)))
}
</code></pre>

<hr>
<h2 id='makePopup'>makePopup</h2><span id='topic+makePopup'></span>

<h3>Description</h3>

<p>Transform object to popup
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makePopup(x, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makePopup_+3A_x">x</code></td>
<td>
<p>Object representing the popup</p>
</td></tr>
<tr><td><code id="makePopup_+3A_data">data</code></td>
<td>
<p>The dataset</p>
</td></tr>
</table>

<hr>
<h2 id='removeGlPoints'>removeGlPoints</h2><span id='topic+removeGlPoints'></span>

<h3>Description</h3>

<p>Remove points from a map, identified by layerId;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeGlPoints(map, layerId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeGlPoints_+3A_map">map</code></td>
<td>
<p>The map widget</p>
</td></tr>
<tr><td><code id="removeGlPoints_+3A_layerid">layerId</code></td>
<td>
<p>The layerId to remove</p>
</td></tr>
</table>

<hr>
<h2 id='removeGlPolygons'>removeGlPolygons</h2><span id='topic+removeGlPolygons'></span>

<h3>Description</h3>

<p>Remove polygons from a map, identified by layerId;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeGlPolygons(map, layerId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeGlPolygons_+3A_map">map</code></td>
<td>
<p>The map widget</p>
</td></tr>
<tr><td><code id="removeGlPolygons_+3A_layerid">layerId</code></td>
<td>
<p>The layerId to remove</p>
</td></tr>
</table>

<hr>
<h2 id='removeGlPolylines'>removeGlPolylines</h2><span id='topic+removeGlPolylines'></span>

<h3>Description</h3>

<p>Remove lines from a map, identified by layerId;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeGlPolylines(map, layerId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeGlPolylines_+3A_map">map</code></td>
<td>
<p>The map widget</p>
</td></tr>
<tr><td><code id="removeGlPolylines_+3A_layerid">layerId</code></td>
<td>
<p>The layerId to remove</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
