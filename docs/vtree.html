<!DOCTYPE html><html lang="en"><head><title>Help for package vtree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vtree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#vtree-package'><p>vtree: a tool for calculating and drawing variable trees.</p></a></li>
<li><a href='#build.data.frame'><p>Build a data frame to display with vtree</p></a></li>
<li><a href='#crosstabToCases'><p>Convert a crosstabulation into a data frame of cases.</p></a></li>
<li><a href='#FakeData'><p>Fake clinical dataset</p></a></li>
<li><a href='#FakeRCT'><p>Fake Randomized Controlled Trial (RCT) data</p></a></li>
<li><a href='#grVizToImageFile'><p>Export an htmlwidget object into an image file</p></a></li>
<li><a href='#grVizToPNG'><p>Export an htmlwidget object into a PNG file</p></a></li>
<li><a href='#init_js'><p>Initializing JS-Part</p></a></li>
<li><a href='#inlineCssSetup'><p>Setup for inline CSS</p></a></li>
<li><a href='#renderVtree'><p>vtree widget</p></a></li>
<li><a href='#svtree'><p>Create a Shiny vtree, with svg-pan-zoom functionality.</p></a></li>
<li><a href='#the.matrix'><p>The Matrix trilogy characters</p></a></li>
<li><a href='#use_svgzoom'><p>Setup for interactive Vtree</p></a></li>
<li><a href='#VennTable'><p>Format an indicator-based pattern table</p></a></li>
<li><a href='#vtree'><p>Draw a variable tree</p></a></li>
<li><a href='#vtreeOutput'><p>vtree widget</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Display Information About Nested Subsets of a Data Frame</td>
</tr>
<tr>
<td>Version:</td>
<td>5.6.5</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool for calculating and drawing "variable trees". Variable trees display information about nested subsets of a data frame.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/nbarrowman/vtree">https://github.com/nbarrowman/vtree</a>,
<a href="https://nbarrowman.github.io/vtree">https://nbarrowman.github.io/vtree</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/nbarrowman/vtree/issues">https://github.com/nbarrowman/vtree/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, ggplot2, testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>DiagrammeR, DiagrammeRsvg, rsvg, htmlwidgets, shiny, utf8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-10 19:15:32 UTC; nickb</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-10 19:30:02 UTC</td>
</tr>
<tr>
<td>Author:</td>
<td>Nick Barrowman [aut, cre],
  Sebastian Gatscha [aut],
  Franco Momoli [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nick Barrowman &lt;nbarrowman@cheo.on.ca&gt;</td>
</tr>
</table>
<hr>
<h2 id='vtree-package'>vtree: a tool for calculating and drawing variable trees.</h2><span id='topic+vtree-package'></span>

<h3>Description</h3>

<p>vtree is a flexible tool for generating variable trees â€”
diagrams that display information about nested subsets of a data frame.
Given simple specifications,
the <code>vtree</code> function produces these diagrams and automatically
labels them with counts, percentages, and other summaries.
</p>
<p>With vtree, you can:
</p>

<ul>
<li><p> explore a data set interactively, and 
</p>
</li>
<li><p> produce customized figures for reports and publications.
</p>
</li></ul>

<p>For a comprehensive introduction see the <a href="../doc/vtree.html">vignette</a>.
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman &lt;nbarrowman@cheo.on.ca&gt;
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://nbarrowman.github.io/vtree">https://nbarrowman.github.io/vtree</a>
</p>
</li>
<li> <p><a href="https://github.com/nbarrowman/vtree">https://github.com/nbarrowman/vtree</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/nbarrowman/vtree/issues">https://github.com/nbarrowman/vtree/issues</a>
</p>
</li></ul>


<hr>
<h2 id='build.data.frame'>Build a data frame to display with vtree</h2><span id='topic+build.data.frame'></span>

<h3>Description</h3>

<p>Build a data frame by specifying variable names and patterns of values together with frequencies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build.data.frame(varnames, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build.data.frame_+3A_varnames">varnames</code></td>
<td>
<p>A vector of variable names.</p>
</td></tr>
<tr><td><code id="build.data.frame_+3A_...">...</code></td>
<td>
<p>Lists of patterns and the frequency of each pattern.
When a pattern is shorter than the list of variable names
(for example, 3 variable names but only 2 values in the pattern),
<code>NA</code>'s are substituted for the missing variable names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Suppose <code>varnames=c("animal","size","hair")</code>,
then one pattern would be <code>list("dog","small","short",4)</code>,
which specifies 4 dogs that are small and short-haired.
Another pattern could be <code>list("cat","large","long",101)</code>,
specifying 101 large cats.
</p>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman &lt;nbarrowman@cheo.on.ca&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Number of countries in Africa, whether population is over 30 million or not,
# and whether landlocked or not.
# https://www.worldometers.info/geography/how-many-countries-in-africa/
#
df &lt;- build.data.frame(
 c("continent","population","landlocked"),
 list("Africa","Over 30 million","landlocked",2),
 list("Africa","Over 30 million","not landlocked",12),
 list("Africa","Under 30 million","landlocked",14),
 list("Africa","Under 30 million","not landlocked",26))

</code></pre>

<hr>
<h2 id='crosstabToCases'>Convert a crosstabulation into a data frame of cases.</h2><span id='topic+crosstabToCases'></span>

<h3>Description</h3>

<p>Convert a table of crosstabulated counts into a data frame of cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstabToCases(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="crosstabToCases_+3A_x">x</code></td>
<td>
<p>a matrix or table of frequencies representing a crosstabulation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame of cases.
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman, based on the <code>countsToCases</code> function at <a href="http://www.cookbook-r.com/Manipulating_data/Converting_between_data_frames_and_contingency_tables/#countstocases-function">http://www.cookbook-r.com/Manipulating_data/Converting_between_data_frames_and_contingency_tables/#countstocases-function</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The Titanic data set is in the datasets package.
# Convert it from a 4 x 2 x 2 x 2 crosstabulation 
# to a 4-column data frame of 2201 individuals
titanic &lt;- crosstabToCases(Titanic)

</code></pre>

<hr>
<h2 id='FakeData'>Fake clinical dataset</h2><span id='topic+FakeData'></span>

<h3>Description</h3>

<p>A dataset consisting of made-up clinical data.
Note that some observations are missing (i.e. NAs).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FakeData
</code></pre>


<h3>Format</h3>

<p>A small data frame in which the rows represent (imaginary) patients and
the columns represent variables of possible clinical relevance.
</p>

<dl>
<dt>id</dt><dd><p>Integer: Patient ID number</p>
</dd>
<dt>Group</dt><dd><p>Factor: Treatment Group, A or B</p>
</dd>
<dt>Severity</dt><dd><p>Factor representing severity of condition: Mild, Moderate, or Severe</p>
</dd>
<dt>Sex</dt><dd><p>Factor: M or F</p>
</dd>
<dt>Male</dt><dd><p>Integer: Sex coded as 1=M, 0=F</p>
</dd>
<dt>Age</dt><dd><p>Integer: Age in years, continuous</p>
</dd>
<dt>Score</dt><dd><p>Integer: Score on a test</p>
</dd>
<dt>Category</dt><dd><p>Factor: single, double, or triple</p>
</dd>
<dt>Pre</dt><dd><p>Numeric: initial measurement</p>
</dd>
<dt>Post</dt><dd><p>Numeric: measurement taken after something happened</p>
</dd>
<dt>Post2</dt><dd><p>Numeric: measurement taken at the very end of the study</p>
</dd>
<dt>Time</dt><dd><p>Numeric: time to event, or time of censoring</p>
</dd>
<dt>Event</dt><dd><p>Integer: Did the event occur? 1=yes, 0=no (i.e. censoring)</p>
</dd>
<dt>Ind1</dt><dd><p>Integer: Indicator variable for a certain characteristic, 1=present, 0=absent</p>
</dd>
<dt>Ind2</dt><dd><p>Integer: Indicator variable for a certain characteristic, 1=present, 0=absent</p>
</dd>
<dt>Ind3</dt><dd><p>Integer: Indicator variable for a certain characteristic, 1=present, 0=absent</p>
</dd>
<dt>Ind4</dt><dd><p>Integer: Indicator variable for a certain characteristic, 1=present, 0=absent</p>
</dd>
<dt>Viral</dt><dd><p>Logical: Does this patient have a viral illness?</p>
</dd>
</dl>


<hr>
<h2 id='FakeRCT'>Fake Randomized Controlled Trial (RCT) data</h2><span id='topic+FakeRCT'></span>

<h3>Description</h3>

<p>A dataset consisting of made-up RCT data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FakeRCT
</code></pre>


<h3>Format</h3>

<p>A small data frame in which the rows represent (imaginary) patients and
the columns represent variables of possible clinical relevance.
</p>

<dl>
<dt>id</dt><dd><p>String: Patient ID number</p>
</dd>
<dt>eligible</dt><dd><p>Factor: Eligible or Ineligible</p>
</dd>
<dt>randomized</dt><dd><p>Factor: Randomized or Not randomized</p>
</dd>
<dt>group</dt><dd><p>Factor: A or B</p>
</dd>
<dt>followup</dt><dd><p>Factor: Followed up or Not followed up</p>
</dd>
<dt>analyzed</dt><dd><p>Factor: Analyzed or Not analyzed</p>
</dd>
</dl>


<hr>
<h2 id='grVizToImageFile'>Export an htmlwidget object into an image file</h2><span id='topic+grVizToImageFile'></span>

<h3>Description</h3>

<p>Export an <code>htmlwidget</code> object (produced by <code>DiagrammerR::grViz</code>) into a PNG file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grVizToImageFile(g, width = NULL, height = NULL, format = "png",
  folder = ".", filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grVizToImageFile_+3A_g">g</code></td>
<td>
<p>an object produced by the <code>grViz</code> function from the DiagrammmeR package</p>
</td></tr>
<tr><td><code id="grVizToImageFile_+3A_width">width</code></td>
<td>
<p>the width in pixels of the bitmap</p>
</td></tr>
<tr><td><code id="grVizToImageFile_+3A_height">height</code></td>
<td>
<p>the height in pixels of the bitmap</p>
</td></tr>
<tr><td><code id="grVizToImageFile_+3A_format">format</code></td>
<td>
<p>Graphics file format. Currently &quot;png&quot; and &quot;pdf&quot; are supported.</p>
</td></tr>
<tr><td><code id="grVizToImageFile_+3A_folder">folder</code></td>
<td>
<p>path to folder where the PNG file should stored</p>
</td></tr>
<tr><td><code id="grVizToImageFile_+3A_filename">filename</code></td>
<td>
<p>an optional filename stem.
If not provided, the filename stem will be derived from the name 
of the argument of <code>g</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>First the <code>grViz</code> object is exported to an SVG file (using <code>DiagrammeRsvg::export_svg</code>).
Then the SVG file is converted to a bitmap (using <code>rsvg::rsvg</code>).
Then the bitmap is exported as a PNG file (using <code>png::writePNG</code>).
Note that the SVG file and the PNG file will be named using the name of the <code>g</code> parameter
</p>


<h3>Value</h3>

<p>Returns the full path of the imagefile.
</p>


<h3>Note</h3>

<p>In addition to the DiagrammmeR package, the following packages are used: <code>DiagrammeRsvg</code>, <code>rsvg</code>
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman
</p>

<hr>
<h2 id='grVizToPNG'>Export an htmlwidget object into a PNG file</h2><span id='topic+grVizToPNG'></span>

<h3>Description</h3>

<p>Export an <code>htmlwidget</code> object (produced by <code>DiagrammerR::grViz</code>) into a PNG file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grVizToPNG(g, width = NULL, height = NULL, folder = ".", filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grVizToPNG_+3A_g">g</code></td>
<td>
<p>an object produced by the <code>grViz</code> function from the DiagrammmeR package</p>
</td></tr>
<tr><td><code id="grVizToPNG_+3A_width">width</code></td>
<td>
<p>the width in pixels of the bitmap</p>
</td></tr>
<tr><td><code id="grVizToPNG_+3A_height">height</code></td>
<td>
<p>the height in pixels of the bitmap</p>
</td></tr>
<tr><td><code id="grVizToPNG_+3A_folder">folder</code></td>
<td>
<p>path to folder where the PNG file should stored</p>
</td></tr>
<tr><td><code id="grVizToPNG_+3A_filename">filename</code></td>
<td>
<p>an optional filename.
If not provided, the filename will be derived from the name 
of the argument of <code>g</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>First the <code>grViz</code> object is exported to an SVG file (using <code>DiagrammeRsvg::export_svg</code>).
Then the SVG file is converted to a bitmap (using <code>rsvg::rsvg</code>).
Then the bitmap is exported as a PNG file (using <code>png::writePNG</code>).
Note that the SVG file and the PNG file will be named using the name of the <code>g</code> parameter
</p>


<h3>Value</h3>

<p>Returns the full path of the PNG file.
</p>


<h3>Note</h3>

<p>In addition to the DiagrammmeR package, the following packages are used: <code>DiagrammeRsvg</code>, <code>rsvg</code>
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman
</p>

<hr>
<h2 id='init_js'>Initializing JS-Part</h2><span id='topic+init_js'></span>

<h3>Description</h3>

<p>Initializing JS-Part
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_js(init_event, onwindow_resize, shortcuts)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="init_js_+3A_init_event">init_event</code></td>
<td>
<p>The mouse event to activate zooming and panning.
Default is <code>mouseenter</code>.</p>
</td></tr>
<tr><td><code id="init_js_+3A_onwindow_resize">onwindow_resize</code></td>
<td>
<p>Should the SVG be resized when the window size changes?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="init_js_+3A_shortcuts">shortcuts</code></td>
<td>
<p>Should Keyboard shortcuts be used to control the SVG?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Shiny Functions: 
<code><a href="#topic+inlineCssSetup">inlineCssSetup</a>()</code>,
<code><a href="#topic+renderVtree">renderVtree</a>()</code>,
<code><a href="#topic+use_svgzoom">use_svgzoom</a>()</code>,
<code><a href="#topic+vtreeOutput">vtreeOutput</a>()</code>
</p>

<hr>
<h2 id='inlineCssSetup'>Setup for inline CSS</h2><span id='topic+inlineCssSetup'></span>

<h3>Description</h3>

<p>Initial CSS setup for the SVG.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inlineCssSetup(minheight, cursor_all, overflow, position, fill, cursor_text)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inlineCssSetup_+3A_minheight">minheight</code></td>
<td>
<p>minimum height in <code>"px"</code>. Default is &quot;200px&quot;.</p>
</td></tr>
<tr><td><code id="inlineCssSetup_+3A_cursor_all">cursor_all</code></td>
<td>
<p>The cursor symbol for the whole SVG. Default is &quot;all-scroll&quot;.</p>
</td></tr>
<tr><td><code id="inlineCssSetup_+3A_overflow">overflow</code></td>
<td>
<p>Overflow value for the whole SVG. Default is &quot;inherit&quot;.</p>
</td></tr>
<tr><td><code id="inlineCssSetup_+3A_position">position</code></td>
<td>
<p>CSS position of the SVG. Default is &quot;sticky&quot;.</p>
</td></tr>
<tr><td><code id="inlineCssSetup_+3A_fill">fill</code></td>
<td>
<p>Fill color for the SVG background. Default is &quot;transparent&quot;.</p>
</td></tr>
<tr><td><code id="inlineCssSetup_+3A_cursor_text">cursor_text</code></td>
<td>
<p>The cursor symbol for text nodes. Default is &quot;pointer&quot;.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+use_svgzoom">use_svgzoom</a></code>
</p>
<p>Other Shiny Functions: 
<code><a href="#topic+init_js">init_js</a>()</code>,
<code><a href="#topic+renderVtree">renderVtree</a>()</code>,
<code><a href="#topic+use_svgzoom">use_svgzoom</a>()</code>,
<code><a href="#topic+vtreeOutput">vtreeOutput</a>()</code>
</p>

<hr>
<h2 id='renderVtree'>vtree widget</h2><span id='topic+renderVtree'></span>

<h3>Description</h3>

<p>Shiny bindings for vtree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderVtree(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderVtree_+3A_expr">expr</code></td>
<td>
<p>an expression that generates a variable tree</p>
</td></tr>
<tr><td><code id="renderVtree_+3A_env">env</code></td>
<td>
<p>the environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="renderVtree_+3A_quoted">quoted</code></td>
<td>
<p>is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+vtreeOutput">vtreeOutput</a></code>, <code><a href="#topic+vtree">vtree</a></code>
</p>
<p>Other Shiny Functions: 
<code><a href="#topic+init_js">init_js</a>()</code>,
<code><a href="#topic+inlineCssSetup">inlineCssSetup</a>()</code>,
<code><a href="#topic+use_svgzoom">use_svgzoom</a>()</code>,
<code><a href="#topic+vtreeOutput">vtreeOutput</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(shiny)
library(vtree)

ui &lt;- fluidPage(
  vtreeOutput("vtree", width = "100%", height = "800px")
)

server &lt;- function(input, output, session) {
  output$vtree &lt;- renderVtree({
    vtree(FakeData,"Severity Sex",
          labelnode=list(Sex=(c("Male"="M","Female"="F"))),
          pngknit=FALSE)
  })
}

shinyApp(ui, server)

## End(Not run)
</code></pre>

<hr>
<h2 id='svtree'>Create a Shiny vtree, with svg-pan-zoom functionality.</h2><span id='topic+svtree'></span>

<h3>Description</h3>

<p>'svtree' uses Shiny and the svg-pan-zoom JavaScript library to 
create a variable tree with panning and zooming functionality. 
The mousewheel allows you to zoom in or out.
The variable tree can also be dragged to a different position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svtree(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="svtree_+3A_...">...</code></td>
<td>
<p>parameters to be passed to 'vtree'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The svg-pan-zoom library webpage is
https://github.com/ariutta/svg-pan-zoom
</p>

<hr>
<h2 id='the.matrix'>The Matrix trilogy characters</h2><span id='topic+the.matrix'></span>

<h3>Description</h3>

<p>This data set was abstracted from the three movies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>the.matrix
</code></pre>


<h3>Format</h3>

<p>A tibble with 35 rows and 14 variables:
</p>

<dl>
<dt>name</dt><dd><p>Name of character</p>
</dd>
<dt>height</dt><dd><p>Height (m)</p>
</dd>
<dt>sex</dt><dd><p>male, female; by appearance</p>
</dd>
<dt>nature</dt><dd><p>This is the nature of the character, whether plugged into the matrix and took a red pill (coppertop), born free in Zion (born free), or a computer application running in the matrix (app)</p>
</dd>
<dt>sunglasses</dt><dd><p>yes, no</p>
</dd>
<dt>apparel</dt><dd><p>Description of clothing worn</p>
</dd>
<dt>bodycount1, bodycount2, bodycount3</dt><dd><p>A count of the number of onscreen kills, in or out of the matrix, for each of the movies</p>
</dd> 
<dt>ship</dt><dd><p>List of ships</p>
</dd>
<dt>the.matrix, the.matrix.reloaded., the.matrix.revolutions</dt><dd><p>Indicates if the character was in the movie</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Franco Momoli
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# ship within sunglasses within nature
vtree(the.matrix,"nature sunglasses ship")

</code></pre>

<hr>
<h2 id='use_svgzoom'>Setup for interactive Vtree</h2><span id='topic+use_svgzoom'></span>

<h3>Description</h3>

<p>This function must be called in the UI, in order to make the <code><a href="#topic+vtree">vtree</a></code> interactive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_svgzoom(minheight = "200px", cursor_all = "all-scroll",
  overflow = "inherit !important", position = "sticky",
  fill = "transparent", cursor_text = "pointer",
  init_event = c("mouseenter", "click", "dblclick"),
  onwindow_resize = TRUE, shortcuts = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="use_svgzoom_+3A_minheight">minheight</code></td>
<td>
<p>minimum height in <code>"px"</code>. Default is &quot;200px&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_cursor_all">cursor_all</code></td>
<td>
<p>The cursor symbol for the whole SVG. Default is &quot;all-scroll&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_overflow">overflow</code></td>
<td>
<p>Overflow value for the whole SVG. Default is &quot;inherit&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_position">position</code></td>
<td>
<p>CSS position of the SVG. Default is &quot;sticky&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_fill">fill</code></td>
<td>
<p>Fill color for the SVG background. Default is &quot;transparent&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_cursor_text">cursor_text</code></td>
<td>
<p>The cursor symbol for text nodes. Default is &quot;pointer&quot;.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_init_event">init_event</code></td>
<td>
<p>The mouse event to activate zooming and panning.
Default is <code>mouseenter</code>.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_onwindow_resize">onwindow_resize</code></td>
<td>
<p>Should the SVG be resized when the window size changes?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="use_svgzoom_+3A_shortcuts">shortcuts</code></td>
<td>
<p>Should Keyboard shortcuts be used to control the SVG?
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+vtreeOutput">vtreeOutput</a></code>, <code><a href="#topic+vtree">vtree</a></code>
</p>
<p>Other Shiny Functions: 
<code><a href="#topic+init_js">init_js</a>()</code>,
<code><a href="#topic+inlineCssSetup">inlineCssSetup</a>()</code>,
<code><a href="#topic+renderVtree">renderVtree</a>()</code>,
<code><a href="#topic+vtreeOutput">vtreeOutput</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(shiny)
library(vtree)

ui &lt;- fluidPage(
  use_svgzoom(),
  helpText(div(style="font-weight: 800; font-size: large; color: black;",
               HTML("Zooming and Panning is possible with mouse-drag ",
                    "and mouse-wheel &lt;br&gt;, or with shortcuts;",
                    " +,- and arrow-keys and CTRL+Backspace to",
                    " resize+fit+center the svg.."))),
  vtreeOutput("vtree", width = "100%", height = "500px")
)

server &lt;- function(input, output, session) {
  output$vtree &lt;- renderVtree({
    vtree(FakeData,"Severity Sex",
          labelnode=list(Sex=(c("Male"="M","Female"="F"))),
          pngknit=FALSE)
  })
}

shinyApp(ui, server)

## End(Not run)
</code></pre>

<hr>
<h2 id='VennTable'>Format an indicator-based pattern table</h2><span id='topic+VennTable'></span>

<h3>Description</h3>

<p>Given a pattern table produced by <code>vtree</code> for indicator (i.e 0/1) variables,
<code>VennTable</code> returns an augmented table.
The augmented table includes an extra row with the total for each indicator variable
and an extra row with the corresponding percentage
(which will not in general add to 100%).
Also, optionally, does some additional formatting for pandoc markdown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VennTable(x, markdown = FALSE, NAcode = "-", unchecked = c("0", "FALSE",
  "No", "no", "not N/A"), checked = c("1", "TRUE", "Yes", "yes", "N/A"),
  sort = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="VennTable_+3A_x">x</code></td>
<td>
<p>Required: Pattern table produced by <code>vtree</code> for indicator (i.e 0/1) variables</p>
</td></tr>
<tr><td><code id="VennTable_+3A_markdown">markdown</code></td>
<td>
<p>Format nicely for markdown (see Details).</p>
</td></tr>
<tr><td><code id="VennTable_+3A_nacode">NAcode</code></td>
<td>
<p>Code to use to represent NAs in markdown formatting</p>
</td></tr>
<tr><td><code id="VennTable_+3A_unchecked">unchecked</code></td>
<td>
<p>Vector of character strings that represent unchecked values;
by default: <code>c("0","FALSE","No","no","not N/A")</code></p>
</td></tr>
<tr><td><code id="VennTable_+3A_checked">checked</code></td>
<td>
<p>Vector of character strings that represent checked values;
by default: <code>c("1","TRUE","Yes","yes","N/A")</code></p>
</td></tr>
<tr><td><code id="VennTable_+3A_sort">sort</code></td>
<td>
<p>Sort variables by frequency?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The column totals ignore missing values.
</p>
<p>When <code>markdown=TRUE</code>, the row and column headings for percentages are 
labeled &quot;%&quot;, indicator values equal to 1 are replaced by checkmark codes,
indicator values equal to 0 are replaced by spaces, and missing indicator
values are replaced by dashes. Empty headings are replaced by spaces.
Finally the table is transposed.
</p>


<h3>Value</h3>

<p>Returns a character matrix with extra rows containing indicator sums.
</p>


<h3>Author(s)</h3>

<p>Nick Barrowman
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a pattern table for the indicator variables Ind1 and Ind2
ptab &lt;- vtree(FakeData,"Ind1 Ind2",ptable=TRUE)
# Augment the table
ptab2 &lt;- VennTable(ptab)
# Print the result without quotation marks (which are distracting)
print(ptab2,quote=FALSE)
# Generate a table with pandoc markdown formatting
ptab3 &lt;- VennTable(ptab,markdown=TRUE)

</code></pre>

<hr>
<h2 id='vtree'>Draw a variable tree</h2><span id='topic+vtree'></span>

<h3>Description</h3>

<p>Variable trees display information about nested subsets of a data frame,
in which the subsetting is defined by the values of categorical variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vtree(data = NULL, vars, showuniform = TRUE, hideconstant = NULL,
  words = NULL, horiz = TRUE, title = "", sameline = FALSE,
  vp = TRUE, prune = list(), tprune = list(), keep = list(),
  tkeep = list(), prunebelow = list(), tprunebelow = list(),
  follow = list(), tfollow = list(), prunesmaller = NULL,
  prunebigger = NULL, summary = NULL, tsummary = NULL,
  shownodelabels = TRUE, showvarnames = TRUE, showpct = TRUE,
  showlpct = TRUE, showcount = TRUE, prefixcount = "",
  showrootcount = TRUE, showlegend = FALSE, showroot = TRUE,
  showvarinnode = FALSE, showlegendsum = FALSE, labelvar = NULL,
  labelnode = list(), tlabelnode = NULL, digits = 0, cdigits = 1,
  fillcolor = NULL, specfill = NULL, fillnodes = TRUE,
  NAfillcolor = "white", rootfillcolor = "#EFF3FF", palette = NULL,
  gradient = TRUE, revgradient = FALSE, sortfill = FALSE,
  singlecolor = 2, colorvarlabels = TRUE, color = c("blue",
  "forestgreen", "red", "orange", "pink"), colornodes = FALSE,
  plain = FALSE, Venn = FALSE, check.is.na = FALSE, seq = FALSE,
  pattern = FALSE, ptable = FALSE, text = list(), ttext = list(),
  varlabelloc = NULL, font = "Arial", varnamepointsize = 24,
  varnamebold = FALSE, legendpointsize = 14, HTMLtext = FALSE,
  splitwidth = 20, vsplitwidth = 8, splitspaces = TRUE,
  getscript = FALSE, mincount = 1, maxcount, showempty = FALSE,
  choicechecklist = TRUE, just = "c", justtext = NULL, thousands = "",
  folder = NULL, format = "", imageFileOnly = FALSE, pngknit = TRUE,
  pxwidth = NULL, pxheight = NULL, imagewidth = "", imageheight = "",
  width = NULL, height = NULL, maxNodes = 1000, unchecked = c("0",
  "FALSE", "No", "no"), checked = c("1", "TRUE", "Yes", "yes"),
  trim = NULL, rounded = TRUE, varminwidth = NULL, varminheight = NULL,
  squeeze = 1, arrowhead = "normal", nodesep = 0.5, ranksep = 0.5,
  margin = 0.2, graphattr = "", nodeattr = "", edgeattr = "",
  nodefunc = NULL, nodeargs = NULL, verbose = FALSE, runsummary = NULL,
  retain = NULL, auto = FALSE, parent = 1, last = 1, root = TRUE,
  subset = 1:nrow(z), numsmallernodes = 0, sumsmallernodes = 0,
  numbiggernodes = 0, sumbiggernodes = 0, as.if.knit = FALSE,
  prunelone = NULL, pruneNA = FALSE, lsplitwidth = 15,
  showlevels = TRUE, z = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vtree_+3A_data">data</code></td>
<td>
<p>Required: Data frame, or a single vector.</p>
</td></tr>
<tr><td><code id="vtree_+3A_vars">vars</code></td>
<td>
<p>Required (unless <code>data</code> is a single vector):
Variables to use for the tree. Can be 
(1) a character string of whitespace-separated variable names,
(2) a vector of variable names,
(3) a formula without a left-hand side,
e.g. <code>~ Age + Sex</code>,
but note that extended variable specifications cannot be used in this case.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showuniform">showuniform</code></td>
<td>
<p>Show a variable even when it only has one value?</p>
</td></tr>
<tr><td><code id="vtree_+3A_hideconstant">hideconstant</code></td>
<td>
<p>Hide a variable if its only value is one of the specified strings.</p>
</td></tr>
<tr><td><code id="vtree_+3A_words">words</code></td>
<td>
<p>A list of named vectors of values.
Used to build a variable tree 
representing all permutations of these values.
No counts will be shown.</p>
</td></tr>
<tr><td><code id="vtree_+3A_horiz">horiz</code></td>
<td>
<p>Should the tree be drawn horizontally?
(i.e. root node on the left, with the tree growing to the right)</p>
</td></tr>
<tr><td><code id="vtree_+3A_title">title</code></td>
<td>
<p>Label for the root node of the tree.</p>
</td></tr>
<tr><td><code id="vtree_+3A_sameline">sameline</code></td>
<td>
<p>Display node label on the same line as the count and percentage?
A single value (with no names) specifies the setting for all variables.
A logical vector of <code>TRUE</code> for named variables is interpreted as
A logical vector of <code>FALSE</code> for named variables is interpreted as
<code>FALSE</code> for those variables and <code>TRUE</code> for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_vp">vp</code></td>
<td>
<p>Use <em>valid percentages</em>?
Valid percentages are computed by first excluding any missing values,
i.e. restricting attention to the set of &quot;valid&quot; observations.
The denominator is thus the number of non-missing observations.
When <code>vp=TRUE</code>, nodes for missing values show the number of missing values
but do not show a percentage;
all the other nodes show valid percentages.
When <code>vp=FALSE</code>, all nodes (including nodes for missing values)
show percentages of the total number of observations.</p>
</td></tr>
<tr><td><code id="vtree_+3A_prune">prune</code>, <code id="vtree_+3A_keep">keep</code>, <code id="vtree_+3A_prunebelow">prunebelow</code>, <code id="vtree_+3A_follow">follow</code></td>
<td>
<p>List of named vectors that specify pruning.
(see <strong>Pruning</strong> below)</p>
</td></tr>
<tr><td><code id="vtree_+3A_tprune">tprune</code>, <code id="vtree_+3A_tkeep">tkeep</code>, <code id="vtree_+3A_tprunebelow">tprunebelow</code>, <code id="vtree_+3A_tfollow">tfollow</code></td>
<td>
<p>List of lists of named vectors that specify &quot;targeted&quot; pruning.
(see <strong>Pruning</strong> below)</p>
</td></tr>
<tr><td><code id="vtree_+3A_prunesmaller">prunesmaller</code></td>
<td>
<p>Prune any nodes with count less than specified number.</p>
</td></tr>
<tr><td><code id="vtree_+3A_prunebigger">prunebigger</code></td>
<td>
<p>Prune any nodes with count greater than specified number.</p>
</td></tr>
<tr><td><code id="vtree_+3A_summary">summary</code></td>
<td>
<p>A character string used to specify summary statistics to display in the nodes.
See <strong>Displaying summary information</strong> below for details.</p>
</td></tr>
<tr><td><code id="vtree_+3A_tsummary">tsummary</code></td>
<td>
<p>A list of character-string vectors.
The initial elements of each character string vector point to a specific node.
The final element of each character string vector is a summary string,
with the same structure as <code>summary</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_shownodelabels">shownodelabels</code></td>
<td>
<p>Show node labels?
A single value (with no names) specifies the setting for all variables.
Otherwise, a named logical vector indicates which variables should have their
node labels shown.
If the vector consists of only <code>TRUE</code> values,
it is interpreted as <code>TRUE</code> for those variables and <code>FALSE</code> for all others.
Similarly, if the vector consists of only <code>FALSE</code> values, 
it is interpreted as <code>FALSE</code> for those variables and <code>TRUE</code> for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showvarnames">showvarnames</code></td>
<td>
<p>Show the name of the variable next to each layer of the tree?</p>
</td></tr>
<tr><td><code id="vtree_+3A_showpct">showpct</code>, <code id="vtree_+3A_showlpct">showlpct</code></td>
<td>
<p>Show percentage? <code>showpct</code> is for nodes, <code>showlpct</code> is for legends.
A single value (with no names) specifies the setting for all variables.
A logical vector of <code>TRUE</code> for named variables is interpreted as
A logical vector of <code>FALSE</code> for named variables is interpreted as
<code>FALSE</code> for those variables and TRUE for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showcount">showcount</code></td>
<td>
<p>Show count in each node?
A single value (with no names) specifies the setting for all variables.
A logical vector of <code>TRUE</code> for named variables is interpreted as
A logical vector of <code>FALSE</code> for named variables is interpreted as
<code>FALSE</code> for those variables and <code>TRUE</code> for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_prefixcount">prefixcount</code></td>
<td>
<p>Text that will precede each count.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showrootcount">showrootcount</code></td>
<td>
<p>Should count in root node?</p>
</td></tr>
<tr><td><code id="vtree_+3A_showlegend">showlegend</code></td>
<td>
<p>Show legend (including marginal frequencies) for each variable?</p>
</td></tr>
<tr><td><code id="vtree_+3A_showroot">showroot</code></td>
<td>
<p>Show the root node?
When <code>seq=TRUE</code>, it may be useful to set <code>showroot=FALSE</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showvarinnode">showvarinnode</code></td>
<td>
<p>Show the variable name in each node?</p>
</td></tr>
<tr><td><code id="vtree_+3A_showlegendsum">showlegendsum</code></td>
<td>
<p>Show summary information in the legend?
(Provided <code>summary</code> has been specified).</p>
</td></tr>
<tr><td><code id="vtree_+3A_labelvar">labelvar</code></td>
<td>
<p>A named vector of labels for variables.</p>
</td></tr>
<tr><td><code id="vtree_+3A_labelnode">labelnode</code></td>
<td>
<p>List of vectors used to change how values of variables are displayed.
The name of each element of the
list is one of the variable names in <code>vars</code>.
Each element of the list is a vector of character strings,
representing the values of the variable.
The names of the vector represent the labels to be used in place of the values.</p>
</td></tr>
<tr><td><code id="vtree_+3A_tlabelnode">tlabelnode</code></td>
<td>
<p>A list of vectors, each of which specifies a particular node,
as well as a label for that node (a &quot;targeted&quot; label).
The names of each vector specify variable names,
except for an element named <code>label</code>, which specifies the label to use.</p>
</td></tr>
<tr><td><code id="vtree_+3A_digits">digits</code>, <code id="vtree_+3A_cdigits">cdigits</code></td>
<td>
<p>Number of decimal digits to show in percentages (<code>digits</code>)
and in continuous values displayed via the summary parameter (<code>cdigits</code>).</p>
</td></tr>
<tr><td><code id="vtree_+3A_fillcolor">fillcolor</code></td>
<td>
<p>[Color] A named vector of colors for filling the nodes of each variable.
If an unnamed, scalar color is specified,
all nodes will have this color.</p>
</td></tr>
<tr><td><code id="vtree_+3A_specfill">specfill</code></td>
<td>
<p>[Color] A list with specified color values for specified variables.</p>
</td></tr>
<tr><td><code id="vtree_+3A_fillnodes">fillnodes</code></td>
<td>
<p>[Color] Fill the nodes with color?</p>
</td></tr>
<tr><td><code id="vtree_+3A_nafillcolor">NAfillcolor</code></td>
<td>
<p>[Color] Fill-color for missing-value nodes.
If <code>NULL</code>, fill colors of missing value nodes will be consistent
with the fill colors in the rest of the tree.</p>
</td></tr>
<tr><td><code id="vtree_+3A_rootfillcolor">rootfillcolor</code></td>
<td>
<p>[Color] Fill-color for the root node.</p>
</td></tr>
<tr><td><code id="vtree_+3A_palette">palette</code></td>
<td>
<p>[Color] A vector of palette numbers (which can range between 1 and 14).
The names of the vector indicate the corresponding variable.
See <strong>Palettes</strong> below for more information.</p>
</td></tr>
<tr><td><code id="vtree_+3A_gradient">gradient</code></td>
<td>
<p>[Color] Use gradients of fill color across the values of each variable?
A single value (with no names) specifies the setting for all variables.
A logical vector of <code>TRUE</code> values for named variables is interpreted as
<code>TRUE</code> for those variables and <code>FALSE</code> for all others.
A logical vector of <code>FALSE</code> values for named variables is interpreted as
<code>FALSE</code> for those variables and <code>TRUE</code> for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_revgradient">revgradient</code></td>
<td>
<p>[Color] Should the gradient be reversed (i.e. dark to light instead of light to dark)?
A single value (with no names) specifies the setting for all variables.
A logical vector of <code>TRUE</code> values for named variables is interpreted as
A logical vector of <code>FALSE</code> values for named variables is interpreted as
<code>FALSE</code> for those variables and <code>TRUE</code> for all others.</p>
</td></tr>
<tr><td><code id="vtree_+3A_sortfill">sortfill</code></td>
<td>
<p>[Color] Sort colors in order of node count?
When a <code>gradient</code> fill is used, this results in
the nodes with the smallest counts having the lightest shades
and the nodes with the largest counts having the darkest shades.</p>
</td></tr>
<tr><td><code id="vtree_+3A_singlecolor">singlecolor</code></td>
<td>
<p>[Color] When a variable has a single value,
this parameter is used to specify whether nodes should have a
(1) light shade, (2) a medium shade, or (3) a dark shade.
specify <code>singlecolor=1</code> to assign a light shade.</p>
</td></tr>
<tr><td><code id="vtree_+3A_colorvarlabels">colorvarlabels</code></td>
<td>
<p>[Color] Color the variable labels?</p>
</td></tr>
<tr><td><code id="vtree_+3A_color">color</code></td>
<td>
<p>[Color] A vector of color names for the <em>outline</em> of the nodes in each layer.</p>
</td></tr>
<tr><td><code id="vtree_+3A_colornodes">colornodes</code></td>
<td>
<p>[Color] Color the node outlines?</p>
</td></tr>
<tr><td><code id="vtree_+3A_plain">plain</code></td>
<td>
<p>[Color] Use &quot;plain&quot; settings?
These settings are as follows: for each variable all nodes are the same color,
namely a shade of blue (with each successive variable using a darker shade);
all variable labels are black; and the <code>squeeze</code> parameter is set to 0.6.</p>
</td></tr>
<tr><td><code id="vtree_+3A_venn">Venn</code></td>
<td>
<p>Display multi-way set membership information?
This provides an alternative to a Venn diagram.
This sets <code>showpct=FALSE</code> and <code>shownodelabels=FALSE</code>.
Assumption: all of the specified variables are logicals or 0/1 numeric variables.</p>
</td></tr>
<tr><td><code id="vtree_+3A_check.is.na">check.is.na</code></td>
<td>
<p>Replace each variable named in <code>vars</code> with a logical vector indicating
whether or not each of its values is missing?</p>
</td></tr>
<tr><td><code id="vtree_+3A_seq">seq</code></td>
<td>
<p>Display the variable tree using <em>sequences</em>?
Each unique sequence (i.e. pattern) of values will be shown separately.
The sequences are sorted from least frequent to most frequent.</p>
</td></tr>
<tr><td><code id="vtree_+3A_pattern">pattern</code></td>
<td>
<p>Display the variable tree using <em>patterns</em>?
These are the same as <code>seq</code>, but lines without arrows are drawn,
and instead of a sequence variable, a pattern variable is shown.</p>
</td></tr>
<tr><td><code id="vtree_+3A_ptable">ptable</code></td>
<td>
<p>Generate a pattern table instead of a variable tree? 
Only applies when <code>pattern=TRUE</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_text">text</code></td>
<td>
<p>A list of vectors containing extra text to add to
nodes corresponding to specified values of a specified variable.
The name of each element of the list
must be one of the variable names in <code>vars</code>.
Each element is a vector of character strings.
The names of the vector identify the nodes to which the text should be added.</p>
</td></tr>
<tr><td><code id="vtree_+3A_ttext">ttext</code></td>
<td>
<p>A list of vectors, each of which specifies a particular node,
as well as text to add to that node (&quot;targeted&quot; text).
The names of each vector specify variable names,
except for an element named <code>text</code>, which specifies the text to add.</p>
</td></tr>
<tr><td><code id="vtree_+3A_varlabelloc">varlabelloc</code></td>
<td>
<p>A named vector of vertical label locations
(&quot;t&quot;, &quot;c&quot;, or &quot;b&quot; for top, center, or bottom, respectively)
for nodes of each variable.
(Sets the Graphviz <code>labelloc</code> attribute.)</p>
</td></tr>
<tr><td><code id="vtree_+3A_font">font</code></td>
<td>
<p>Font.</p>
</td></tr>
<tr><td><code id="vtree_+3A_varnamepointsize">varnamepointsize</code></td>
<td>
<p>Font size (in points) to use when displaying variable names.</p>
</td></tr>
<tr><td><code id="vtree_+3A_varnamebold">varnamebold</code></td>
<td>
<p>Show the variable name in bold?</p>
</td></tr>
<tr><td><code id="vtree_+3A_legendpointsize">legendpointsize</code></td>
<td>
<p>Font size (in points) to use when displaying legend.</p>
</td></tr>
<tr><td><code id="vtree_+3A_htmltext">HTMLtext</code></td>
<td>
<p>Is the text formatted in HTML?</p>
</td></tr>
<tr><td><code id="vtree_+3A_splitwidth">splitwidth</code>, <code id="vtree_+3A_vsplitwidth">vsplitwidth</code></td>
<td>
<p>The minimum number of characters before an automatic
linebreak is inserted.
<code>splitwidth</code> is for node labels, <code>vsplitwidth</code> is for variable names.</p>
</td></tr>
<tr><td><code id="vtree_+3A_splitspaces">splitspaces</code></td>
<td>
<p>When <code>vars</code> is a character string,
split it by spaces to get variable names?
It is only rarely necessary to use this parameter.
This should only be <code>FALSE</code> when a single variable name
that contains spaces is specified.</p>
</td></tr>
<tr><td><code id="vtree_+3A_getscript">getscript</code></td>
<td>
<p>Instead of displaying the variable tree,
return the DOT script as a character string?</p>
</td></tr>
<tr><td><code id="vtree_+3A_mincount">mincount</code>, <code id="vtree_+3A_maxcount">maxcount</code></td>
<td>
<p>Minimum or maximum count to include in a pattern tree or pattern table.
(<code>maxcount</code> overrides <code>mincount</code>.)</p>
</td></tr>
<tr><td><code id="vtree_+3A_showempty">showempty</code></td>
<td>
<p>Show nodes that do not contain any observations?</p>
</td></tr>
<tr><td><code id="vtree_+3A_choicechecklist">choicechecklist</code></td>
<td>
<p>When REDCap checklists are specified using the <code>stem:</code> syntax,
automatically extract the names of choices and use them as variable names?</p>
</td></tr>
<tr><td><code id="vtree_+3A_just">just</code></td>
<td>
<p>Text justification (&quot;l&quot;=left, &quot;c&quot;=center, &quot;r&quot;=right).</p>
</td></tr>
<tr><td><code id="vtree_+3A_justtext">justtext</code></td>
<td>
<p>Like <code>just</code>, but only for extra text, like summaries.</p>
</td></tr>
<tr><td><code id="vtree_+3A_thousands">thousands</code></td>
<td>
<p>Thousands separator for big numbers.</p>
</td></tr>
<tr><td><code id="vtree_+3A_folder">folder</code>, <code id="vtree_+3A_format">format</code>, <code id="vtree_+3A_imagefileonly">imageFileOnly</code>, <code id="vtree_+3A_pngknit">pngknit</code></td>
<td>
<p>Control image file generation.
<code>folder</code>: a path to a folder where image file will be stored.
<code>format</code>: &quot;png&quot; or &quot;pdf&quot; format.
<code>imageFileOnly</code>: should an image file should be produced but not displayed?
<code>pngknit</code>: generate a PNG file when called during knit?
(See <strong>Knitr, R Markdown, Sweave</strong> below for more information.)</p>
</td></tr>
<tr><td><code id="vtree_+3A_pxwidth">pxwidth</code>, <code id="vtree_+3A_pxheight">pxheight</code></td>
<td>
<p>Width and height of the PNG bitmap to be rendered
when <code>vtree</code> is called from R Markdown.
If neither <code>pxwidth</code> nor <code>pxheight</code> is specified,
<code>pxwidth</code> is automatically set to 2000 pixels.</p>
</td></tr>
<tr><td><code id="vtree_+3A_imagewidth">imagewidth</code>, <code id="vtree_+3A_imageheight">imageheight</code></td>
<td>
<p>Character strings representing width and height of the PNG image
to be rendered when <code>vtree</code> is called from R Markdown,
e.g. <code>"4in"</code>
If neither <code>imageheight</code> nor <code>imagewidth</code> is specified,
<code>imageheight</code> is set to 3 inches.</p>
</td></tr>
<tr><td><code id="vtree_+3A_width">width</code>, <code id="vtree_+3A_height">height</code></td>
<td>
<p>Width and height (in pixels) to be passed to <code>DiagrammeR::grViz</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_maxnodes">maxNodes</code></td>
<td>
<p>An error occurs if the number of nodes exceeds <code>maxNodes</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_unchecked">unchecked</code>, <code id="vtree_+3A_checked">checked</code></td>
<td>
<p>Vector of character strings interpreted as &quot;unchecked&quot; and &quot;checked&quot; respectively.</p>
</td></tr>
<tr><td><code id="vtree_+3A_trim">trim</code></td>
<td>
<p>(LaTeX Sweave only.) Crop the image using a feature
of <code>\includegraphics</code>.
Vector of bp (big points) to trim in the order
left, lower, right, upper.</p>
</td></tr>
<tr><td><code id="vtree_+3A_rounded">rounded</code></td>
<td>
<p>[Graphviz] Use rounded boxes for nodes?</p>
</td></tr>
<tr><td><code id="vtree_+3A_varminwidth">varminwidth</code>, <code id="vtree_+3A_varminheight">varminheight</code></td>
<td>
<p>[Graphviz] Named vector of minimum initial widths or heights for nodes of each variable.
</p>
<p><code>varminwidth</code> sets the Graphviz <code>width</code> attribute.
<code>varminheight</code> sets the Graphviz <code>height</code> attribute.</p>
</td></tr>
<tr><td><code id="vtree_+3A_squeeze">squeeze</code></td>
<td>
<p>[GraphViz] The degree (between 0 and 1) to which the tree will be &quot;squeezed&quot;.
This controls two Graphviz parameters: <code>margin</code> and <code>nodesep</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_arrowhead">arrowhead</code></td>
<td>
<p>[Graphviz] arrowhead style. Defaults to <code>"normal"</code>.
Other choices include <code>"none"</code>, <code>"vee"</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_nodesep">nodesep</code>, <code id="vtree_+3A_ranksep">ranksep</code>, <code id="vtree_+3A_margin">margin</code></td>
<td>
<p>[Graphviz] attributes for node separation amount,
rank separation amount, and node margin.</p>
</td></tr>
<tr><td><code id="vtree_+3A_graphattr">graphattr</code>, <code id="vtree_+3A_nodeattr">nodeattr</code>, <code id="vtree_+3A_edgeattr">edgeattr</code></td>
<td>
<p>[Graphviz] Character string: Graphviz attributes for the graph, node, and edge respectively.</p>
</td></tr>
<tr><td><code id="vtree_+3A_nodefunc">nodefunc</code>, <code id="vtree_+3A_nodeargs">nodeargs</code></td>
<td>
<p>Node function and node arguments (see <strong>Node functions</strong> below).</p>
</td></tr>
<tr><td><code id="vtree_+3A_verbose">verbose</code></td>
<td>
<p>Report additional details?</p>
</td></tr>
<tr><td><code id="vtree_+3A_runsummary">runsummary</code></td>
<td>
<p>A list of functions, with the same length as <code>summary</code>.
Each function must take a data frame as its sole argument,
and return a logical value.
Each string in <code>summary</code> will only be interpreted if
the corresponding logical value is <code>TRUE</code>.
the corresponding string in <code>summary</code> will be evaluated.</p>
</td></tr>
<tr><td><code id="vtree_+3A_retain">retain</code></td>
<td>
<p>Vector of names of additional variables in the data frame that need to be
available to execute the functions in <code>runsummary</code>.</p>
</td></tr>
<tr><td><code id="vtree_+3A_auto">auto</code></td>
<td>
<p>Automatically choose variables? (<code>vars</code> should not be specified)</p>
</td></tr>
<tr><td><code id="vtree_+3A_parent">parent</code>, <code id="vtree_+3A_last">last</code></td>
<td>
<p>[Internal use only.] Node number of parent and last node.</p>
</td></tr>
<tr><td><code id="vtree_+3A_root">root</code></td>
<td>
<p>[Internal use only.] Is this the root node of the tree?</p>
</td></tr>
<tr><td><code id="vtree_+3A_subset">subset</code></td>
<td>
<p>[Internal use only.] A vector representing the subset of observations.</p>
</td></tr>
<tr><td><code id="vtree_+3A_numsmallernodes">numsmallernodes</code></td>
<td>
<p>[Internal use only.] Counting nodes that were suppressed by prunesmaller.</p>
</td></tr>
<tr><td><code id="vtree_+3A_sumsmallernodes">sumsmallernodes</code></td>
<td>
<p>[Internal use only.] Summing nodes that were suppress by prunesmaller.</p>
</td></tr>
<tr><td><code id="vtree_+3A_numbiggernodes">numbiggernodes</code></td>
<td>
<p>[Internal use only.] Counting nodes that were suppressed by prunebigger.</p>
</td></tr>
<tr><td><code id="vtree_+3A_sumbiggernodes">sumbiggernodes</code></td>
<td>
<p>[Internal use only.] Summing nodes that were suppress by prunebigger.</p>
</td></tr>
<tr><td><code id="vtree_+3A_as.if.knit">as.if.knit</code></td>
<td>
<p>(Deprecated) Behave as if called while knitting?</p>
</td></tr>
<tr><td><code id="vtree_+3A_prunelone">prunelone</code></td>
<td>
<p>(Deprecated) A vector of values specifying &quot;lone nodes&quot; (of <em>any</em> variable) to prune.
A lone node is a node that has no siblings (an &quot;only child&quot;).</p>
</td></tr>
<tr><td><code id="vtree_+3A_prunena">pruneNA</code></td>
<td>
<p>(Deprecated) Prune all missing values?
This is problematic because &quot;valid&quot; percentages
are hard to interpret when NAs are pruned.</p>
</td></tr>
<tr><td><code id="vtree_+3A_lsplitwidth">lsplitwidth</code></td>
<td>
<p>(Deprecated) In legends, the minimum number of characters before an automatic
linebreak is inserted.</p>
</td></tr>
<tr><td><code id="vtree_+3A_showlevels">showlevels</code></td>
<td>
<p>(Deprecated) Same as showvarnames.</p>
</td></tr>
<tr><td><code id="vtree_+3A_z">z</code></td>
<td>
<p>(Deprecated) This was replaced by the <code>data</code> parameter</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value returned by <code>vtree</code> varies
depending on both the parameter values specified
and the context in which <code>vtree</code> is called.
</p>
<p>First, there are two special cases where <code>vtree</code> does not show a variable tree:
</p>

<ul>
<li><p> If <code>ptable=TRUE</code>, the return value is a data frame representing a pattern table.
</p>
</li>
<li><p> Otherwise, if <code>getscript=TRUE</code>, the return value is a character string,
consisting of a DOT script that describes the variable tree.
</p>
</li></ul>

<p>If neither of the above cases applies, the return value is as follows.
If knitting is <em>not</em> taking place
(such as when <code>vtree</code> is used <strong>interactively</strong>):
</p>

<ul>
<li><p> the return value is an object of class <code>htmlwidget</code> (see <a href="DiagrammeR.html#topic+DiagrammeR">DiagrammeR</a>).
It will intelligently print itself into HTML in a variety of contexts
including the R console, within R Markdown documents,
and within Shiny output bindings.
</p>
<p>The <code>info</code> attribute of the return object is a list whose top
level represents the root node of the tree.
Within this list is a list named after the first variable in the tree.
In turn, within this list are lists named after the observed
values of that variable.
In turn, each of these lists is an element named after
the next variable in the tree.
And so on.
The root element as well as each list element named after a value of a variable also 
contains elements <code>.n</code> (representing the number of observations),
<code>.pct</code> (representing the percentage), and
<code>.txt</code> (representing additional text such as summaries).
</p>
</li></ul>

<p>If knitting <em>is</em> taking place:
</p>

<ul>
<li><p> If <code>pngknit=TRUE</code> (the default),
the return value is a character string of
pandoc markdown code to embed a PNG file with fully-specified path.
The character string will have class <code>knit_asis</code> so that
knitr will treat it as is
(the effect is the same as the chunk option results = 'asis')
when it is written to the output. (See <code>?knitr::asis_output</code>)
</p>
</li>
<li><p> If <code>pngknit=FALSE</code>, the return value is the same as when knitting is not
taking place, i.e. an object of class <code>htmlwidget</code>.
</p>
</li></ul>



<h3>Knitr, R Markdown, Sweave</h3>

<p>If <code>folder</code> is not specified and knitting to LaTeX,
the folder will be set to the value of <code>knitr::opts_chunk$get("fig.path")</code>.
(If this folder does not exist, it will be created.)
If <code>folder</code> is not specified and knitting to markdown,
a temporary folder will be used.
</p>
<p>If <code>format</code> is not specified and knitting is taking place,
then a PNG file is generated, unless a LaTeX document is 
being generated (e.g. via Sweave), in which case a PDF file is generated.   
PNG image files will end in <code>.png</code>.
PDF image files will end in <code>.pdf</code>.
</p>
<p>As noted in the <strong>Value</strong> section above,
<code>vtree</code> has special support for R Markdown.
</p>
<p>By default, when knitting an R Markdown file,
<code>vtree</code> generates PNG files and embeds them automatically in the output document.
This feature is needed when knitting to a <code>.docx</code> file.
When knitting to HTML, it is not necessary to generate PNG files
because HTML browsers can directly display htmlwidgets.
</p>
<p>To generate htmlwidgets instead of PNG files, specify <code>pngknit=FALSE</code>.
(Note, however, that there are some advantages to embedding PNG files in an HTML file.
For example,
some browsers perform poorly when numerous htmlwidgets are included in an HTML file.)
</p>
<p>When PNG files are generated, they are stored by default in a temporary folder.
The folder can also be specified using the <code>folder</code> parameter.
(Using the base R function <code>options</code>, 
a custom option <code>vtree_folder</code> is used to automatically keep track of this.)
Successive PNG files generated by an R Markdown file
are named <code>vtree001.png</code>, <code>vtree002.png</code>, etc.
(A custom option <code>vtree_count</code> is used to automatically keep track of the number of PNG files.)
</p>


<h3>Pruning</h3>

<p>Each of the parameters <code>prune</code>, <code>keep</code>, <code>prunebelow</code>, <code>follow</code>
takes a named list of vectors as its argument.
Each vector specifies nodes of a variable.
</p>

<ul>
<li> <p><code>prune</code>: which nodes should be pruned.
</p>
</li>
<li> <p><code>keep</code>: which nodes should <em>not</em> be pruned.
</p>
</li>
<li> <p><code>prunebelow</code>: which nodes should have their descendants pruned.
</p>
</li>
<li> <p><code>follow</code>: which nodes should <em>not</em> have their descendants pruned.
</p>
</li></ul>

<p>The <code>tprune</code> parameter specifies &quot;targeted&quot; pruning.
Standard pruning removes all nodes with the specified value of the specified variable.
The <code>tprune</code> parameter specifies one or more particular paths from the root of the tree
down to a node to be pruned.
</p>


<h3>Displaying summary information</h3>

<p>The <code>summary</code> parameter allows you to specify information to display
in each node. The parameter can be specified as a vector of character strings,
where each element represents a different variable to summarize.
When an element of <code>summary</code> is specified as a single variable name, 
the following default set of summary statistics is shown:
the variable name, number of missing values, mean and standard deviation,
median and interquartile range and range.
A customized summary is shown when an element of <code>summary</code>
is specified as a character string with the following structure:
</p>

<ul>
<li><p>First, the name of the variable for which a summary is desired.
</p>
</li>
<li><p>Next a space.
</p>
</li>
<li><p>The remainder of the string specifies what to display, with text as well as special codes (such as <code>%mean%</code>) to indicate the type of summary desired and to control which nodes display the summary, etc. See the vignette for more details.
</p>
</li></ul>



<h3>Palettes</h3>

<p>The following palettes
(obtained from <code>RColorBrewer</code>) are used in the order indicated:
</p>

<table>
<tr>
 <td style="text-align: right;">
 1 </td><td style="text-align: left;"> Reds     </td><td style="text-align: center;"> </td><td style="text-align: right;"> 4 </td><td style="text-align: left;"> Oranges  </td><td style="text-align: center;"> </td><td style="text-align: right;"> 7  </td><td style="text-align: left;"> PuBu   </td><td style="text-align: center;"> </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> PuBuGn </td><td style="text-align: center;"> </td><td style="text-align: center;"> 13 </td><td style="text-align: left;"> RdYlGn </td>
</tr>
<tr>
 <td style="text-align: right;">
 2 </td><td style="text-align: left;"> Blues    </td><td style="text-align: center;"> </td><td style="text-align: right;"> 5 </td><td style="text-align: left;"> Purples  </td><td style="text-align: center;"> </td><td style="text-align: right;"> 8  </td><td style="text-align: left;"> PuRd   </td><td style="text-align: center;"> </td><td style="text-align: right;"> 11 </td><td style="text-align: left;"> BuPu   </td><td style="text-align: center;"> </td><td style="text-align: center;"> 14 </td><td style="text-align: left;"> Set1   </td>
</tr>
<tr>
 <td style="text-align: right;"> 
 3 </td><td style="text-align: left;"> Greens   </td><td style="text-align: center;"> </td><td style="text-align: right;"> 6 </td><td style="text-align: left;"> YlGn     </td><td style="text-align: center;"> </td><td style="text-align: right;"> 9  </td><td style="text-align: left;"> YlOrBr </td><td style="text-align: center;"> </td><td style="text-align: right;"> 12 </td><td style="text-align: left;"> YlOrRd </td><td style="text-align: center;"> </td><td style="text-align: center;">    </td><td style="text-align: left;">        </td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Nick Barrowman &lt;nbarrowman@cheo.on.ca&gt;
</p>


<h3>See Also</h3>

<p><a href="../doc/vtree.html"><code>vignette("vtree")</code></a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Call vtree and give the root node a title
vtree(FakeData,"Sex Severity",title="People")

# R Markdown inline call to vtree
# `r vtree(FakeData,"Sex Severity")`

# Rename some nodes
vtree(FakeData,"Severity Sex",labelnode=list(Sex=(c("Male"="M","Female"="F"))))

# Rename a variable
vtree(FakeData,"Severity Sex",labelvar=c(Severity="How bad?"))

# Show legend. Put labels on the same line as counts and percentages
vtree(FakeData,"Severity Sex Viral",sameline=TRUE,showlegend=TRUE)

# Use the summary parameter to list ID numbers (truncated to 40 characters) in specified nodes
vtree(FakeData,"Severity Sex",summary="id \nid = %list% %var=Severity% %trunc=40%")

# Add text to specified nodes of a tree ("targeted text")
vtree(FakeData,"Severity Sex",ttext=list(
  c(Severity="Severe",Sex="M",text="\nMales with Severe disease"),
  c(Severity="NA",text="\nUnknown severity")))

</code></pre>

<hr>
<h2 id='vtreeOutput'>vtree widget</h2><span id='topic+vtreeOutput'></span>

<h3>Description</h3>

<p>Shiny bindings for vtree. It is actually a wrapper around <code><a href="DiagrammeR.html#topic+grViz">grViz</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vtreeOutput(outputId, width = "100%", height = "100%")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vtreeOutput_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="vtreeOutput_+3A_width">width</code>, <code id="vtreeOutput_+3A_height">height</code></td>
<td>
<p>must be a valid CSS unit in pixels
or a number, which will be coerced to a string and have <code>"px"</code> appended.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+renderVtree">renderVtree</a></code>
</p>
<p>Other Shiny Functions: 
<code><a href="#topic+init_js">init_js</a>()</code>,
<code><a href="#topic+inlineCssSetup">inlineCssSetup</a>()</code>,
<code><a href="#topic+renderVtree">renderVtree</a>()</code>,
<code><a href="#topic+use_svgzoom">use_svgzoom</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(shiny)
library(vtree)

ui &lt;- fluidPage(
  vtreeOutput("vtree", width = "100%", height = "800px")
)

server &lt;- function(input, output, session) {
  output$vtree &lt;- renderVtree({
    vtree(FakeData,"Severity Sex",
          labelnode=list(Sex=(c("Male"="M","Female"="F"))),
          pngknit=FALSE)
  })
}

shinyApp(ui, server)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
