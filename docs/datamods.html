<!DOCTYPE html><html lang="en"><head><title>Help for package datamods</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {datamods}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#create-column'><p>Create new column</p></a></li>
<li><a href='#cut-variable'><p>Module to Convert Numeric to Factor</p></a></li>
<li><a href='#demo_edit'><p>Customer Credit Card Information</p></a></li>
<li><a href='#edit-data'><p>Shiny module to interactively edit a <code>data.frame</code></p></a></li>
<li><a href='#filter-data'><p>Shiny module to interactively filter a <code>data.frame</code></p></a></li>
<li><a href='#get_data_packages'><p>Get packages containing datasets</p></a></li>
<li><a href='#i18n'><p>Internationalization</p></a></li>
<li><a href='#import-copypaste'><p>Import data with copy &amp; paste</p></a></li>
<li><a href='#import-file'><p>Import data from a file</p></a></li>
<li><a href='#import-globalenv'><p>Import data from an Environment</p></a></li>
<li><a href='#import-googlesheets'><p>Import data from Googlesheet</p></a></li>
<li><a href='#import-modal'><p>Import from all sources</p></a></li>
<li><a href='#import-url'><p>Import data from a URL</p></a></li>
<li><a href='#list_pkg_data'><p>List dataset contained in a package</p></a></li>
<li><a href='#module-sample'><p>Shiny module to interactively sample a <code>data.frame</code></p></a></li>
<li><a href='#select-group'><p>Select Group Input Module</p></a></li>
<li><a href='#show_data'><p>Display a table in a window</p></a></li>
<li><a href='#update-factor'><p>Module to Reorder the Levels of a Factor Variable</p></a></li>
<li><a href='#update-variables'><p>Select, rename and convert variables</p></a></li>
<li><a href='#validation_ui'><p>Validation module</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Modules to Import and Manipulate Data in 'Shiny'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.5.3</td>
</tr>
<tr>
<td>Description:</td>
<td>'Shiny' modules to import data into an application or 'addin'
    from various sources, and to manipulate them after that.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dreamRs/datamods">https://github.com/dreamRs/datamods</a>,
<a href="https://dreamrs.github.io/datamods/">https://dreamrs.github.io/datamods/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dreamRs/datamods/issues">https://github.com/dreamRs/datamods/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>bslib, classInt, data.table, htmltools, phosphoricons,
reactable, readxl, rio, rlang, shiny (&ge; 1.5.0), shinyWidgets
(&ge; 0.8.4), tibble, toastui (&ge; 0.3.3), tools, shinybusy,
writexl</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, jsonlite, knitr, MASS, rmarkdown, testthat, validate</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-02 10:05:06 UTC; victorp</td>
</tr>
<tr>
<td>Author:</td>
<td>Victor Perrier [aut, cre, cph],
  Fanny Meyer [aut],
  Samra Goumri [aut],
  Zauad Shahreer Abeer [aut],
  Eduard Sz√∂cs [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Victor Perrier &lt;victor.perrier@dreamrs.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-02 10:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='create-column'>Create new column</h2><span id='topic+create-column'></span><span id='topic+create_column_ui'></span><span id='topic+create_column_server'></span><span id='topic+list_allowed_operations'></span><span id='topic+modal_create_column'></span><span id='topic+winbox_create_column'></span><span id='topic+winbox_update_factor'></span>

<h3>Description</h3>

<p>This module allow to enter an expression to create a new column in a <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_column_ui(id)

create_column_server(
  id,
  data_r = reactive(NULL),
  allowed_operations = list_allowed_operations()
)

list_allowed_operations()

modal_create_column(
  id,
  title = i18n("Create a new column"),
  easyClose = TRUE,
  size = "l",
  footer = NULL
)

winbox_create_column(
  id,
  title = i18n("Create a new column"),
  options = shinyWidgets::wbOptions(),
  controls = shinyWidgets::wbControls()
)

winbox_update_factor(
  id,
  title = i18n("Update levels of a factor"),
  options = shinyWidgets::wbOptions(),
  controls = shinyWidgets::wbControls()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create-column_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="create-column_+3A_data_r">data_r</code></td>
<td>
<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="create-column_+3A_allowed_operations">allowed_operations</code></td>
<td>
<p>A <code>list</code> of allowed operations, see below for details.</p>
</td></tr>
<tr><td><code id="create-column_+3A_title">title</code></td>
<td>
<p>An optional title for the dialog.</p>
</td></tr>
<tr><td><code id="create-column_+3A_easyclose">easyClose</code></td>
<td>
<p>If <code>TRUE</code>, the modal dialog can be dismissed by
clicking outside the dialog box, or be pressing the Escape key. If
<code>FALSE</code> (the default), the modal dialog can't be dismissed in those
ways; instead it must be dismissed by clicking on a <code>modalButton()</code>, or
from a call to <code><a href="shiny.html#topic+removeModal">removeModal()</a></code> on the server.</p>
</td></tr>
<tr><td><code id="create-column_+3A_size">size</code></td>
<td>
<p>One of <code>"s"</code> for small, <code>"m"</code> (the default) for medium,
<code>"l"</code> for large, or <code>"xl"</code> for extra large. Note that <code>"xl"</code> only
works with Bootstrap 4 and above (to opt-in to Bootstrap 4+,
pass <code><a href="bslib.html#topic+bs_theme">bslib::bs_theme()</a></code> to the <code>theme</code> argument of a page container
like <code><a href="shiny.html#topic+fluidPage">fluidPage()</a></code>).</p>
</td></tr>
<tr><td><code id="create-column_+3A_footer">footer</code></td>
<td>
<p>UI for footer. Use <code>NULL</code> for no footer.</p>
</td></tr>
<tr><td><code id="create-column_+3A_options">options</code></td>
<td>
<p>List of options, see <code><a href="shinyWidgets.html#topic+wbOptions">wbOptions()</a></code>.</p>
</td></tr>
<tr><td><code id="create-column_+3A_controls">controls</code></td>
<td>
<p>List of controls, see <code><a href="shinyWidgets.html#topic+wbControls">wbControls()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning the data.
</p>


<h3>Note</h3>

<p>User can only use a subset of function: (, c, +, -, *, ^, %%, %/%, /, ==, &gt;, &lt;, !=, &lt;=, &gt;=, &amp;, |, abs, sign, sqrt, ceiling, floor, trunc, cummax, cummin, cumprod, cumsum, exp, expm1, log, log10, log2, log1p, cos, cosh, sin, sinh, tan, tanh, acos, acosh, asin, asinh, atan, atanh, cospi, sinpi, tanpi, gamma, lgamma, digamma, trigamma, round, signif, max, min, range, prod, sum, any, all, pmin, pmax, mean, paste, paste0, substr, nchar, trimws, gsub, sub, grepl, ifelse, length, as.numeric, as.character, as.integer, as.Date, as.POSIXct, as.factor, factor.
You can add more operations using the <code>allowed_operations</code> argument, for  example if you want to allow to use package lubridate, you can do:
</p>
<div class="sourceCode r"><pre>c(list_allowed_operations(), getNamespaceExports("lubridate"))
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)
library(reactable)

ui &lt;- fluidPage(
  theme = bslib::bs_theme(version = 5L, preset = "bootstrap"),
  shinyWidgets::html_dependency_winbox(),
  tags$h2("Create new column"),
  fluidRow(
    column(
      width = 4,
      create_column_ui("inline"),
      actionButton("modal", "Or click here to open a modal to create a column"),
      tags$br(), tags$br(),
      actionButton("winbox", "Or click here to open a WinBox to create a column")
    ),
    column(
      width = 8,
      reactableOutput(outputId = "table"),
      verbatimTextOutput("code")
    )
  )
)

server &lt;- function(input, output, session) {

  rv &lt;- reactiveValues(data = MASS::Cars93[, c(1, 3, 4, 5, 6, 10)])

  # inline mode
  data_inline_r &lt;- create_column_server(
    id = "inline",
    data_r = reactive(rv$data)
  )
  observeEvent(data_inline_r(), rv$data &lt;- data_inline_r())

  # modal window mode
  observeEvent(input$modal, modal_create_column("modal"))
  data_modal_r &lt;- create_column_server(
    id = "modal",
    data_r = reactive(rv$data)
  )
  observeEvent(data_modal_r(), rv$data &lt;- data_modal_r())

  # WinBox window mode
  observeEvent(input$winbox, winbox_create_column("winbox"))
  data_winbox_r &lt;- create_column_server(
    id = "winbox",
    data_r = reactive(rv$data)
  )
  observeEvent(data_winbox_r(), rv$data &lt;- data_winbox_r())

  # Show result
  output$table &lt;- renderReactable({
    data &lt;- req(rv$data)
    reactable(
      data = data,
      bordered = TRUE,
      compact = TRUE,
      striped = TRUE
    )
  })

  output$code &lt;- renderPrint({
    attr(rv$data, "code")
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='cut-variable'>Module to Convert Numeric to Factor</h2><span id='topic+cut-variable'></span><span id='topic+cut_variable_ui'></span><span id='topic+cut_variable_server'></span><span id='topic+modal_cut_variable'></span><span id='topic+winbox_cut_variable'></span>

<h3>Description</h3>

<p>This module contain an interface to cut a numeric into several intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cut_variable_ui(id)

cut_variable_server(id, data_r = reactive(NULL))

modal_cut_variable(
  id,
  title = i18n("Convert Numeric to Factor"),
  easyClose = TRUE,
  size = "l",
  footer = NULL
)

winbox_cut_variable(
  id,
  title = i18n("Convert Numeric to Factor"),
  options = shinyWidgets::wbOptions(),
  controls = shinyWidgets::wbControls()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cut-variable_+3A_id">id</code></td>
<td>
<p>Module ID.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_data_r">data_r</code></td>
<td>
<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_title">title</code></td>
<td>
<p>An optional title for the dialog.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_easyclose">easyClose</code></td>
<td>
<p>If <code>TRUE</code>, the modal dialog can be dismissed by
clicking outside the dialog box, or be pressing the Escape key. If
<code>FALSE</code> (the default), the modal dialog can't be dismissed in those
ways; instead it must be dismissed by clicking on a <code>modalButton()</code>, or
from a call to <code><a href="shiny.html#topic+removeModal">removeModal()</a></code> on the server.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_size">size</code></td>
<td>
<p>One of <code>"s"</code> for small, <code>"m"</code> (the default) for medium,
<code>"l"</code> for large, or <code>"xl"</code> for extra large. Note that <code>"xl"</code> only
works with Bootstrap 4 and above (to opt-in to Bootstrap 4+,
pass <code><a href="bslib.html#topic+bs_theme">bslib::bs_theme()</a></code> to the <code>theme</code> argument of a page container
like <code><a href="shiny.html#topic+fluidPage">fluidPage()</a></code>).</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_footer">footer</code></td>
<td>
<p>UI for footer. Use <code>NULL</code> for no footer.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_options">options</code></td>
<td>
<p>List of options, see <code><a href="shinyWidgets.html#topic+wbOptions">wbOptions()</a></code>.</p>
</td></tr>
<tr><td><code id="cut-variable_+3A_controls">controls</code></td>
<td>
<p>List of controls, see <code><a href="shinyWidgets.html#topic+wbControls">wbControls()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning the data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)
library(reactable)

ui &lt;- fluidPage(
  theme = bslib::bs_theme(version = 5L, preset = "bootstrap"),
  shinyWidgets::html_dependency_winbox(),
  tags$h2("Convert Numeric to Factor"),
  fluidRow(
    column(
      width = 6,
      cut_variable_ui("inline"),
      actionButton("modal", "Or click here to open a modal to cut a variable"),
      tags$br(), tags$br(),
      actionButton("winbox", "Or click here to open a WinBox to cut a variable")
    ),
    column(
      width = 6,
      reactableOutput(outputId = "table"),
      verbatimTextOutput("code")
    )
  )
)

server &lt;- function(input, output, session) {

  rv &lt;- reactiveValues(data = MASS::Cars93[, c(1, 3, 4, 5, 6, 10)])

  # inline mode
  data_inline_r &lt;- cut_variable_server(
    id = "inline",
    data_r = reactive(rv$data)
  )
  observeEvent(data_inline_r(), rv$data &lt;- data_inline_r())

  # modal window mode
  observeEvent(input$modal, modal_cut_variable("modal"))
  data_modal_r &lt;- cut_variable_server(
    id = "modal",
    data_r = reactive(rv$data)
  )
  observeEvent(data_modal_r(), rv$data &lt;- data_modal_r())

  # WinBox window mode
  observeEvent(input$winbox, winbox_cut_variable("winbox"))
  data_winbox_r &lt;- cut_variable_server(
    id = "winbox",
    data_r = reactive(rv$data)
  )
  observeEvent(data_winbox_r(), rv$data &lt;- data_winbox_r())

  # Show result
  output$table &lt;- renderReactable({
    data &lt;- req(rv$data)
    reactable(
      data = data,
      bordered = TRUE,
      compact = TRUE,
      striped = TRUE
    )
  })

  output$code &lt;- renderPrint({
    attr(rv$data, "code")
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='demo_edit'>Customer Credit Card Information</h2><span id='topic+demo_edit'></span>

<h3>Description</h3>

<p>A subset of fake customer credit card information inspired by the <code>{charlatan}</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_edit
</code></pre>


<h3>Format</h3>



<h4><code>demo_edit</code></h4>

<p>A data frame with 20 rows and 6 columns:
</p>

<dl>
<dt>name</dt><dd><p>Customer name</p>
</dd>
<dt>job</dt><dd><p>Customer job</p>
</dd>
<dt>credit_card_provider</dt><dd><p>Credit card provider</p>
</dd>
<dt>credit_card_security_code</dt><dd><p>Credit card security code</p>
</dd>
<dt>date_obtained</dt><dd><p>Date of obtaining the credit card</p>
</dd>
<dt>contactless_card</dt><dd><p>Contactless card</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=charlatan">https://CRAN.R-project.org/package=charlatan</a>
</p>

<hr>
<h2 id='edit-data'>Shiny module to interactively edit a <code>data.frame</code></h2><span id='topic+edit-data'></span><span id='topic+edit_data_ui'></span><span id='topic+edit_data_server'></span>

<h3>Description</h3>

<p>The module generates different options to edit a <code>data.frame</code>: adding, deleting and modifying rows, exporting data (csv and excel), choosing editable columns, choosing mandatory columns.
This module returns the edited table with the user modifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_data_ui(id)

edit_data_server(
  id,
  data_r = reactive(NULL),
  add = TRUE,
  update = TRUE,
  delete = TRUE,
  download_csv = TRUE,
  download_excel = TRUE,
  file_name_export = "data",
  var_edit = NULL,
  var_mandatory = NULL,
  var_labels = NULL,
  add_default_values = list(),
  n_column = 1,
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reactable_options = NULL,
  modal_size = c("m", "s", "l", "xl"),
  modal_easy_close = TRUE,
  callback_add = NULL,
  callback_update = NULL,
  callback_delete = NULL,
  only_callback = FALSE,
  use_notify = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edit-data_+3A_id">id</code></td>
<td>
<p>Module ID</p>
</td></tr>
<tr><td><code id="edit-data_+3A_data_r">data_r</code></td>
<td>
<p>data_r <code>reactive</code> function containing a <code>data.frame</code> to use in the module.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_add">add</code></td>
<td>
<p><code>boolean</code>, if <code>TRUE</code>, allows you to add a row in the table via a button at the top right.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_update">update</code></td>
<td>
<p><code>boolean</code>, if <code>TRUE</code>, allows you to modify a row of the table via a button located in the table on the row you want to edit.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_delete">delete</code></td>
<td>
<p><code>boolean</code>, if <code>TRUE</code>, allows a row to be deleted from the table via a button in the table.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_download_csv">download_csv</code></td>
<td>
<p>if <code>TRUE</code>, allows to export the table in csv format via a download button.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_download_excel">download_excel</code></td>
<td>
<p>if <code>TRUE</code>, allows to export the table in excel format via a download button.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_file_name_export">file_name_export</code></td>
<td>
<p><code>character</code> that allows you to choose the export name of the downloaded file.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_var_edit">var_edit</code></td>
<td>
<p>vector of <code>character</code> which allows to choose the names of the editable columns.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_var_mandatory">var_mandatory</code></td>
<td>
<p>vector of <code>character</code> which allows to choose obligatory fields to fill.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_var_labels">var_labels</code></td>
<td>
<p>named list, where names are colnames and values are labels to be used in edit modal.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_add_default_values">add_default_values</code></td>
<td>
<p>Default values to use for input control when adding new data, e.g. <code>list(my_var_text = "Default text to display")</code>.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_n_column">n_column</code></td>
<td>
<p>Number of column in the edit modal window, must be a number that divide 12 since it use Bootstrap grid system with <code><a href="shiny.html#topic+column">shiny::column()</a></code>.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_reactable_options">reactable_options</code></td>
<td>
<p>Options passed to <code><a href="reactable.html#topic+reactable">reactable::reactable()</a></code>.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_modal_size">modal_size</code></td>
<td>
<p><code>character</code> which allows to choose the size of the modalDialog. One of &quot;s&quot; for small, &quot;m&quot; (the default) for medium, &quot;l&quot; for large, or &quot;xl&quot; for extra large.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_modal_easy_close">modal_easy_close</code></td>
<td>
<p><code>boolean</code> If TRUE, modalDialog can be dismissed by clicking outside the dialog box, or be pressing the Escape key. If FALSE (the default), modalDialog can't be dismissed in those ways; instead it must be dismissed by clicking on a modalButton(), or from a call to removeModal() on the server.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_callback_add">callback_add</code>, <code id="edit-data_+3A_callback_update">callback_update</code>, <code id="edit-data_+3A_callback_delete">callback_delete</code></td>
<td>
<p>Functions to be executed just before an action (add, update or delete) is performed on the data.
Functions used must be like <code>function(data, row) {...}</code> where :
</p>

<ul>
<li> <p><code>data</code> will be the data in the table at the moment the function is called
</p>
</li>
<li> <p><code>row</code> will contain either a new row of data (add), an updated row (update) or the row that will be deleted (delete).
</p>
</li></ul>

<p>If the return value of a callback function is not truthy (see <code><a href="shiny.html#topic+isTruthy">shiny::isTruthy()</a></code>) then the action is cancelled.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_only_callback">only_callback</code></td>
<td>
<p>Only use callbacks, don't alter data within the module.</p>
</td></tr>
<tr><td><code id="edit-data_+3A_use_notify">use_notify</code></td>
<td>
<p>Display information or not to user through <code><a href="shinybusy.html#topic+notify">shinybusy::notify()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the edited <code>data.frame</code> in reactable format with the user modifications
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)
library(datamods)
library(bslib)
library(reactable)

ui &lt;- fluidPage(
  theme = bs_theme(
    version = 5
  ),
  tags$h2("Edit data", align = "center"),
  edit_data_ui(id = "id"),
  verbatimTextOutput("result")
)


server &lt;- function(input, output, session) {

  edited_r &lt;- edit_data_server(
    id = "id",
    data_r = reactive(demo_edit),
    add = TRUE,
    update = TRUE,
    delete = TRUE,
    download_csv = TRUE,
    download_excel = TRUE,
    file_name_export = "datas",
    # var_edit = c("name", "job", "credit_card_provider", "credit_card_security_code"),
    var_mandatory = c("name", "job"),
    var_labels = list(
      name = "Name",
      credit_card_security_code = "Credit card security code",
      date_obtained = "Date obtained",
      contactless_card = "Contactless Card",
      credit_card_provider = "Credit card provider"
    ),
    add_default_values = list(
      name = "Please enter your name here",
      date_obtained = Sys.Date()
    ),
    n_column = 2,
    modal_size = "l",
    modal_easy_close = TRUE,
    reactable_options = list(
      defaultColDef = colDef(filterable = TRUE),
      selection = "single",
      columns = list(
        name = colDef(name = "Name", style = list(fontWeight = "bold")),
        credit_card_security_code = colDef(name = "Credit card security code"),
        date_obtained = colDef(name = "Date obtained", format = colFormat(date = TRUE)),
        contactless_card = colDef(
          name = "Contactless Card",
          cell = function(value) {
            # Render as an X mark or check mark
            if (value == FALSE) "\u274c No" else "\u2714\ufe0f Yes"
          }),
        credit_card_provider = colDef(
          name = "Credit card provider",
          style = function(value) {
            if (value == "Mastercard") {
              color &lt;- "#e06631"
            } else if (value == "VISA 16 digit") {
              color &lt;- "#0c13cf"
            } else if (value == "American Express") {
              color &lt;- "#4d8be8"
            } else if (value == "JCB 16 digit") {
              color &lt;- "#23c45e"
            } else {
              color &lt;- "#777"
            }
            list(color = color, fontWeight = "bold")
          }
        )
      ),
      bordered = TRUE,
      compact = TRUE,
      searchable = TRUE,
      highlight = TRUE
    )
  )

  output$result &lt;- renderPrint({
    str(edited_r())
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='filter-data'>Shiny module to interactively filter a <code>data.frame</code></h2><span id='topic+filter-data'></span><span id='topic+filter_data_ui'></span><span id='topic+filter_data_server'></span>

<h3>Description</h3>

<p>Module generate inputs to filter <code>data.frame</code> according column's type.
Code to reproduce the filter is returned as an expression with filtered data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_data_ui(id, show_nrow = TRUE, max_height = NULL)

filter_data_server(
  id,
  data = reactive(NULL),
  vars = reactive(NULL),
  name = reactive("data"),
  defaults = reactive(NULL),
  drop_ids = getOption("datamods.filter.drop_ids", default = TRUE),
  widget_char = c("virtualSelect", "select", "picker"),
  widget_num = c("slider", "range"),
  widget_date = c("slider", "range"),
  label_na = "NA",
  value_na = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter-data_+3A_id">id</code></td>
<td>
<p>Module id. See <code><a href="shiny.html#topic+moduleServer">shiny::moduleServer()</a></code>.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_show_nrow">show_nrow</code></td>
<td>
<p>Show number of filtered rows and total.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_max_height">max_height</code></td>
<td>
<p>Maximum height for filters panel, useful
if you have many variables to filter and limited space.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_data">data</code></td>
<td>
<p><code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a
<code>data.frame</code> to filter.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_vars">vars</code></td>
<td>
<p><code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a
<code>character</code> vector of variables for which to add a filter.
If a named <code>list</code>, names are used as labels.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_name">name</code></td>
<td>
<p><code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a
<code>character</code> string representing <code>data</code> name, only used for code generated.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_defaults">defaults</code></td>
<td>
<p><code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a
named <code>list</code> of variable:value pairs which will be used to set the filters.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_drop_ids">drop_ids</code></td>
<td>
<p>Drop columns containing more than 90% of unique values, or than 50 distinct values.
Use <code>FALSE</code> to disable or use <code>list(p = 0.9, n = 50)</code> to customize threshold values.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_widget_char">widget_char</code></td>
<td>
<p>Widget to use for <code>character</code> variables: <code><a href="shinyWidgets.html#topic+pickerInput">shinyWidgets::pickerInput()</a></code>
or <code><a href="shiny.html#topic+selectInput">shiny::selectInput()</a></code> (default).</p>
</td></tr>
<tr><td><code id="filter-data_+3A_widget_num">widget_num</code></td>
<td>
<p>Widget to use for <code>numeric</code> variables: <code><a href="shinyWidgets.html#topic+numericRangeInput">shinyWidgets::numericRangeInput()</a></code>
or <code><a href="shiny.html#topic+sliderInput">shiny::sliderInput()</a></code> (default).</p>
</td></tr>
<tr><td><code id="filter-data_+3A_widget_date">widget_date</code></td>
<td>
<p>Widget to use for <code>date/time</code> variables: <code><a href="shiny.html#topic+dateRangeInput">shiny::dateRangeInput()</a></code>
or <code><a href="shiny.html#topic+sliderInput">shiny::sliderInput()</a></code> (default).</p>
</td></tr>
<tr><td><code id="filter-data_+3A_label_na">label_na</code></td>
<td>
<p>Label for missing value widget.</p>
</td></tr>
<tr><td><code id="filter-data_+3A_value_na">value_na</code></td>
<td>
<p>Default value for all NA's filters.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with four slots:
</p>

<ul>
<li> <p><strong>filtered</strong>: a <code>reactive</code> function returning the data filtered.
</p>
</li>
<li> <p><strong>code</strong>: a <code>reactive</code> function returning the dplyr pipeline to filter data.
</p>
</li>
<li> <p><strong>expr</strong>: a <code>reactive</code> function returning an expression to filter data.
</p>
</li>
<li> <p><strong>values</strong>: a <code>reactive</code> function returning a named list of variables and filter values.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)
library(shinyWidgets)
library(datamods)
library(MASS)

# Add some NAs to mpg
mtcars_na &lt;- mtcars
mtcars_na[] &lt;- lapply(
  X = mtcars_na,
  FUN = function(x) {
    x[sample.int(n = length(x), size = sample(5:10, 1))] &lt;- NA
    x
  }
)

datetime &lt;- data.frame(
  date = seq(Sys.Date(), by = "day", length.out = 300),
  datetime = seq(Sys.time(), by = "hour", length.out = 300),
  num = sample.int(1e5, 300)
)

one_column_numeric &lt;- data.frame(
  var1 = rnorm(100)
)

ui &lt;- fluidPage(
  tags$h2("Filter data.frame"),
  actionButton("saveFilterButton","Save Filter Values"),
  actionButton("loadFilterButton","Load Filter Values"),
  radioButtons(
    inputId = "dataset",
    label = "Data:",
    choices = c(
      "iris",
      "mtcars",
      "mtcars_na",
      "Cars93",
      "datetime",
      "one_column_numeric"
    ),
    inline = TRUE
  ),

  fluidRow(
    column(
      width = 3,
      filter_data_ui("filtering", max_height = "500px")
    ),
    column(
      width = 9,
      progressBar(
        id = "pbar", value = 100,
        total = 100, display_pct = TRUE
      ),
      reactable::reactableOutput(outputId = "table"),
      tags$b("Code dplyr:"),
      verbatimTextOutput(outputId = "code_dplyr"),
      tags$b("Expression:"),
      verbatimTextOutput(outputId = "code"),
      tags$b("Filtered data:"),
      verbatimTextOutput(outputId = "res_str")
    )
  )
)

server &lt;- function(input, output, session) {
  savedFilterValues &lt;- reactiveVal()
  data &lt;- reactive({
    get(input$dataset)
  })

  vars &lt;- reactive({
    if (identical(input$dataset, "mtcars")) {
      setNames(as.list(names(mtcars)[1:5]), c(
        "Miles/(US) gallon",
        "Number of cylinders",
        "Displacement (cu.in.)",
        "Gross horsepower",
        "Rear axle ratio"
      ))
    } else {
      NULL
    }
  })
  
  observeEvent(input$saveFilterButton,{
    savedFilterValues &lt;&lt;- res_filter$values()
  },ignoreInit = T)
  
  defaults &lt;- reactive({
    input$loadFilterButton
    savedFilterValues
  })

  res_filter &lt;- filter_data_server(
    id = "filtering",
    data = data,
    name = reactive(input$dataset),
    vars = vars,
    defaults = defaults,
    widget_num = "slider",
    widget_date = "slider",
    label_na = "Missing"
  )

  observeEvent(res_filter$filtered(), {
    updateProgressBar(
      session = session, id = "pbar",
      value = nrow(res_filter$filtered()), total = nrow(data())
    )
  })

  output$table &lt;- reactable::renderReactable({
    reactable::reactable(res_filter$filtered())
  })


  output$code_dplyr &lt;- renderPrint({
    res_filter$code()
  })
  output$code &lt;- renderPrint({
    res_filter$expr()
  })

  output$res_str &lt;- renderPrint({
    str(res_filter$filtered())
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='get_data_packages'>Get packages containing datasets</h2><span id='topic+get_data_packages'></span>

<h3>Description</h3>

<p>Get packages containing datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data_packages()
</code></pre>


<h3>Value</h3>

<p>a character vector of packages names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

  get_data_packages()

}
</code></pre>

<hr>
<h2 id='i18n'>Internationalization</h2><span id='topic+i18n'></span><span id='topic+i18n_translations'></span><span id='topic+set_i18n'></span>

<h3>Description</h3>

<p>Simple mechanism to translate labels in a Shiny application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>i18n(x, translations = i18n_translations())

i18n_translations(package = packageName(parent.frame(2)))

set_i18n(value, packages = c("datamods", "esquisse"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="i18n_+3A_x">x</code></td>
<td>
<p>Label to translate.</p>
</td></tr>
<tr><td><code id="i18n_+3A_translations">translations</code></td>
<td>
<p>Either a <code>list</code> or a <code>data.frame</code> with translations.</p>
</td></tr>
<tr><td><code id="i18n_+3A_package">package</code></td>
<td>
<p>Name of the package where the function is called, use <code>NULL</code> outside a package.
It will retrieve option <code>"i18n.&lt;PACKAGE&gt;"</code> (or <code>"i18n"</code> if no package) to returns appropriate labels.</p>
</td></tr>
<tr><td><code id="i18n_+3A_value">value</code></td>
<td>
<p>Value to set for translation. Can be:
</p>

<ul>
<li><p> single <code>character</code> to use a supported language (<code>"fr"</code>, <code>"mk"</code>, <code>"al"</code>, <code>"pt"</code> for esquisse and datamods packages).
</p>
</li>
<li><p> a <code>list</code> with labels as names and translations as values.
</p>
</li>
<li><p> a <code>data.frame</code> with 2 column: <code>label</code> &amp; <code>translation</code>.
</p>
</li>
<li><p> path to a CSV file with same structure as for <code>data.frame</code> above.
</p>
</li></ul>
</td></tr>
<tr><td><code id="i18n_+3A_packages">packages</code></td>
<td>
<p>Name of packages for which to set i18n, default to esquisse and datamods</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>i18n()</code> returns a <code>character</code>, <code>i18n_translations()</code> returns a <code>list</code> or a <code>data.frame</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(datamods)

# Use with an objet
my.translations &lt;- list(
  "Hello" = "Bonjour"
)
i18n("Hello", my.translations)

# Use with options()
options("i18n" = list(
  "Hello" = "Bonjour"
))
i18n("Hello")

# With a package
options("datamods.i18n" = "fr")
i18n("Browse...", translations = i18n_translations("datamods"))
# If you call i18n() from within a function of your package
# you don't need second argument, e.g.:
# i18n("Browse...")
</code></pre>

<hr>
<h2 id='import-copypaste'>Import data with copy &amp; paste</h2><span id='topic+import-copypaste'></span><span id='topic+import_copypaste_ui'></span><span id='topic+import_copypaste_server'></span>

<h3>Description</h3>

<p>Let the user copy data from Excel or text file then paste it into a text area to import it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_copypaste_ui(id, title = TRUE, name_field = TRUE)

import_copypaste_server(
  id,
  btn_show_data = TRUE,
  show_data_in = c("popup", "modal"),
  trigger_return = c("button", "change"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reset = reactive(NULL),
  fread_args = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-copypaste_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_name_field">name_field</code></td>
<td>
<p>Show or not a field to add a name to data (that is returned server-side).</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_btn_show_data">btn_show_data</code></td>
<td>
<p>Display or not a button to display data in a modal window if import is successful.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_show_data_in">show_data_in</code></td>
<td>
<p>Where to display data: in a <code>"popup"</code> or in a <code>"modal"</code> window.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_trigger_return">trigger_return</code></td>
<td>
<p>When to update selected data:
<code>"button"</code> (when user click on button) or
<code>"change"</code> (each time user select a dataset in the list).</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_reset">reset</code></td>
<td>
<p>A <code>reactive</code> function that when triggered resets the data.</p>
</td></tr>
<tr><td><code id="import-copypaste_+3A_fread_args">fread_args</code></td>
<td>
<p><code>list</code> of additional arguments to pass to <code><a href="data.table.html#topic+fread">data.table::fread()</a></code> when reading data.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

ui &lt;- fluidPage(
  tags$h3("Import data with copy &amp; paste"),
  fluidRow(
    column(
      width = 4,
      import_copypaste_ui("myid")
    ),
    column(
      width = 8,
      tags$b("Import status:"),
      verbatimTextOutput(outputId = "status"),
      tags$b("Name:"),
      verbatimTextOutput(outputId = "name"),
      tags$b("Data:"),
      verbatimTextOutput(outputId = "data")
    )
  )
)

server &lt;- function(input, output, session) {

  imported &lt;- import_copypaste_server("myid")

  output$status &lt;- renderPrint({
    imported$status()
  })
  output$name &lt;- renderPrint({
    imported$name()
  })
  output$data &lt;- renderPrint({
    imported$data()
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='import-file'>Import data from a file</h2><span id='topic+import-file'></span><span id='topic+import_file_ui'></span><span id='topic+import_file_server'></span>

<h3>Description</h3>

<p>Let user upload a file and import data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_file_ui(
  id,
  title = TRUE,
  preview_data = TRUE,
  file_extensions = c(".csv", ".txt", ".xls", ".xlsx", ".rds", ".fst", ".sas7bdat",
    ".sav"),
  layout_params = c("dropdown", "inline")
)

import_file_server(
  id,
  btn_show_data = TRUE,
  show_data_in = c("popup", "modal"),
  trigger_return = c("button", "change"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reset = reactive(NULL),
  read_fns = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-file_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="import-file_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="import-file_+3A_preview_data">preview_data</code></td>
<td>
<p>Show or not a preview of the data under the file input.</p>
</td></tr>
<tr><td><code id="import-file_+3A_file_extensions">file_extensions</code></td>
<td>
<p>File extensions accepted by <code><a href="shiny.html#topic+fileInput">shiny::fileInput()</a></code>, can also be MIME type.</p>
</td></tr>
<tr><td><code id="import-file_+3A_layout_params">layout_params</code></td>
<td>
<p>How to display import parameters : in a dropdown button or inline below file input.</p>
</td></tr>
<tr><td><code id="import-file_+3A_btn_show_data">btn_show_data</code></td>
<td>
<p>Display or not a button to display data in a modal window if import is successful.</p>
</td></tr>
<tr><td><code id="import-file_+3A_show_data_in">show_data_in</code></td>
<td>
<p>Where to display data: in a <code>"popup"</code> or in a <code>"modal"</code> window.</p>
</td></tr>
<tr><td><code id="import-file_+3A_trigger_return">trigger_return</code></td>
<td>
<p>When to update selected data:
<code>"button"</code> (when user click on button) or
<code>"change"</code> (each time user select a dataset in the list).</p>
</td></tr>
<tr><td><code id="import-file_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-file_+3A_reset">reset</code></td>
<td>
<p>A <code>reactive</code> function that when triggered resets the data.</p>
</td></tr>
<tr><td><code id="import-file_+3A_read_fns">read_fns</code></td>
<td>
<p>Named list with custom function(s) to read data:
</p>

<ul>
<li><p> the name must be the extension of the files to which the function will be applied
</p>
</li>
<li><p> the value must be a function that can have 5 arguments (you can ignore some of them, but you have to use the same names),
passed by user through the interface:
</p>

<ul>
<li> <p><code>file</code>: path to the file
</p>
</li>
<li> <p><code>sheet</code>: for Excel files, sheet to read
</p>
</li>
<li> <p><code>skip</code>: number of row to skip
</p>
</li>
<li> <p><code>dec</code>: decimal separator
</p>
</li>
<li> <p><code>encoding</code>: file encoding
</p>
</li>
<li> <p><code>na.strings</code>: character(s) to interpret as missing values.
</p>
</li></ul>

</li></ul>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>

library(shiny)
library(datamods)

ui &lt;- fluidPage(
  # theme = bslib::bs_theme(version = 5L),
  # theme = bslib::bs_theme(version = 5L, preset = "bootstrap"),
  tags$h3("Import data from a file"),
  fluidRow(
    column(
      width = 4,
      import_file_ui(
        id = "myid",
        file_extensions = c(".csv", ".txt", ".xls", ".xlsx", ".json"),
        layout_params = "inline" # or "dropdown"
      )
    ),
    column(
      width = 8,
      tags$b("Import status:"),
      verbatimTextOutput(outputId = "status"),
      tags$b("Name:"),
      verbatimTextOutput(outputId = "name"),
      tags$b("Code:"),
      verbatimTextOutput(outputId = "code"),
      tags$b("Data:"),
      verbatimTextOutput(outputId = "data")
    )
  )
)

server &lt;- function(input, output, session) {

  imported &lt;- import_file_server(
    id = "myid",
    # Custom functions to read data
    read_fns = list(
      xls = function(file, sheet, skip, encoding) {
        readxl::read_xls(path = file, sheet = sheet, skip = skip)
      },
      json = function(file) {
        jsonlite::read_json(file, simplifyVector = TRUE)
      }
    ),
    show_data_in = "modal"
  )

  output$status &lt;- renderPrint({
    imported$status()
  })
  output$name &lt;- renderPrint({
    imported$name()
  })
  output$code &lt;- renderPrint({
    imported$code()
  })
  output$data &lt;- renderPrint({
    imported$data()
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='import-globalenv'>Import data from an Environment</h2><span id='topic+import-globalenv'></span><span id='topic+import_globalenv_ui'></span><span id='topic+import_globalenv_server'></span>

<h3>Description</h3>

<p>Let the user select a dataset from its own environment or from a package's environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_globalenv_ui(
  id,
  globalenv = TRUE,
  packages = get_data_packages(),
  title = TRUE
)

import_globalenv_server(
  id,
  btn_show_data = TRUE,
  show_data_in = c("popup", "modal"),
  trigger_return = c("button", "change"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reset = reactive(NULL)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-globalenv_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_globalenv">globalenv</code></td>
<td>
<p>Search for data in Global environment.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_packages">packages</code></td>
<td>
<p>Name of packages in which to search data.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_btn_show_data">btn_show_data</code></td>
<td>
<p>Display or not a button to display data in a modal window if import is successful.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_show_data_in">show_data_in</code></td>
<td>
<p>Where to display data: in a <code>"popup"</code> or in a <code>"modal"</code> window.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_trigger_return">trigger_return</code></td>
<td>
<p>When to update selected data:
<code>"button"</code> (when user click on button) or
<code>"change"</code> (each time user select a dataset in the list).</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-globalenv_+3A_reset">reset</code></td>
<td>
<p>A <code>reactive</code> function that when triggered resets the data.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(shiny)
  library(datamods)

  # Create some data.frames

  my_df &lt;- data.frame(
    variable1 = sample(letters, 20, TRUE),
    variable2 = sample(1:100, 20, TRUE)
  )

  results_analysis &lt;- data.frame(
    id = sample(letters, 20, TRUE),
    measure = sample(1:100, 20, TRUE),
    response = sample(1:100, 20, TRUE)
  )


  # Application

  ui &lt;- fluidPage(
    fluidRow(
      column(
        width = 4,
        import_globalenv_ui("myid")
      ),
      column(
        width = 8,
        tags$b("Import status:"),
        verbatimTextOutput(outputId = "status"),
        tags$b("Name:"),
        verbatimTextOutput(outputId = "name"),
        tags$b("Data:"),
        verbatimTextOutput(outputId = "data")
      )
    )
  )

  server &lt;- function(input, output, session) {

    imported &lt;- import_globalenv_server("myid")

    output$status &lt;- renderPrint({
      imported$status()
    })
    output$name &lt;- renderPrint({
      imported$name()
    })
    output$data &lt;- renderPrint({
      imported$data()
    })

  }

  shinyApp(ui, server)
}
</code></pre>

<hr>
<h2 id='import-googlesheets'>Import data from Googlesheet</h2><span id='topic+import-googlesheets'></span><span id='topic+import_googlesheets_ui'></span><span id='topic+import_googlesheets_server'></span>

<h3>Description</h3>

<p>Let user paste link to a Google sheet then import the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_googlesheets_ui(id, title = TRUE)

import_googlesheets_server(
  id,
  btn_show_data = TRUE,
  show_data_in = c("popup", "modal"),
  trigger_return = c("button", "change"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reset = reactive(NULL)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-googlesheets_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_btn_show_data">btn_show_data</code></td>
<td>
<p>Display or not a button to display data in a modal window if import is successful.</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_show_data_in">show_data_in</code></td>
<td>
<p>Where to display data: in a <code>"popup"</code> or in a <code>"modal"</code> window.</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_trigger_return">trigger_return</code></td>
<td>
<p>When to update selected data:
<code>"button"</code> (when user click on button) or
<code>"change"</code> (each time user select a dataset in the list).</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-googlesheets_+3A_reset">reset</code></td>
<td>
<p>A <code>reactive</code> function that when triggered resets the data.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

ui &lt;- fluidPage(
  tags$h3("Import data from Googlesheets"),
  fluidRow(
    column(
      width = 4,
      import_googlesheets_ui("myid")
    ),
    column(
      width = 8,
      tags$b("Import status:"),
      verbatimTextOutput(outputId = "status"),
      tags$b("Name:"),
      verbatimTextOutput(outputId = "name"),
      tags$b("Data:"),
      verbatimTextOutput(outputId = "data")
    )
  )
)

server &lt;- function(input, output, session) {

  imported &lt;- import_googlesheets_server("myid")

  output$status &lt;- renderPrint({
    imported$status()
  })
  output$name &lt;- renderPrint({
    imported$name()
  })
  output$data &lt;- renderPrint({
    imported$data()
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='import-modal'>Import from all sources</h2><span id='topic+import-modal'></span><span id='topic+import_ui'></span><span id='topic+import_server'></span><span id='topic+import_modal'></span>

<h3>Description</h3>

<p>Wrap all import modules into one, can be displayed inline or in a modal window..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_ui(
  id,
  from = c("env", "file", "copypaste", "googlesheets", "url"),
  file_extensions = c(".csv", ".txt", ".xls", ".xlsx", ".rds", ".fst", ".sas7bdat",
    ".sav")
)

import_server(
  id,
  validation_opts = NULL,
  allowed_status = c("OK", "Failed", "Error"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  read_fns = list()
)

import_modal(
  id,
  from,
  title = i18n("Import data"),
  size = "l",
  file_extensions = c(".csv", ".txt", ".xls", ".xlsx", ".rds", ".fst", ".sas7bdat",
    ".sav")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-modal_+3A_id">id</code></td>
<td>
<p>Module's id</p>
</td></tr>
<tr><td><code id="import-modal_+3A_from">from</code></td>
<td>
<p>The import_ui &amp; server to use, i.e. the method.
There are 5 options to choose from. (&quot;env&quot;, &quot;file&quot;, &quot;copypaste&quot;, &quot;googlesheets&quot;, &quot;url&quot;)</p>
</td></tr>
<tr><td><code id="import-modal_+3A_file_extensions">file_extensions</code></td>
<td>
<p>File extensions accepted by <code><a href="shiny.html#topic+fileInput">shiny::fileInput()</a></code>, can also be MIME type.</p>
</td></tr>
<tr><td><code id="import-modal_+3A_validation_opts">validation_opts</code></td>
<td>
<p><code>list</code> of arguments passed to [validation_server().</p>
</td></tr>
<tr><td><code id="import-modal_+3A_allowed_status">allowed_status</code></td>
<td>
<p>Vector of statuses allowed to confirm dataset imported,
if you want that all validation rules are successful before importing data use <code>allowed_status = "OK"</code>.</p>
</td></tr>
<tr><td><code id="import-modal_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-modal_+3A_read_fns">read_fns</code></td>
<td>
<p>Named list with custom function(s) to read data:
</p>

<ul>
<li><p> the name must be the extension of the files to which the function will be applied
</p>
</li>
<li><p> the value must be a function that can have 5 arguments (you can ignore some of them, but you have to use the same names),
passed by user through the interface:
</p>

<ul>
<li> <p><code>file</code>: path to the file
</p>
</li>
<li> <p><code>sheet</code>: for Excel files, sheet to read
</p>
</li>
<li> <p><code>skip</code>: number of row to skip
</p>
</li>
<li> <p><code>dec</code>: decimal separator
</p>
</li>
<li> <p><code>encoding</code>: file encoding
</p>
</li>
<li> <p><code>na.strings</code>: character(s) to interpret as missing values.
</p>
</li></ul>

</li></ul>
</td></tr>
<tr><td><code id="import-modal_+3A_title">title</code></td>
<td>
<p>Modal window title.</p>
</td></tr>
<tr><td><code id="import-modal_+3A_size">size</code></td>
<td>
<p>Modal window size, default to <code>"l"</code> (large).</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

ui &lt;- fluidPage(
  # Try with different Bootstrap version
  theme = bslib::bs_theme(version = 5, preset = "bootstrap"),
  fluidRow(
    column(
      width = 4,
      checkboxGroupInput(
        inputId = "from",
        label = "From",
        choices = c("env", "file", "copypaste", "googlesheets", "url"),
        selected = c("file", "copypaste")
      ),
      actionButton("launch_modal", "Launch modal window")
    ),
    column(
      width = 8,
      tags$b("Imported data:"),
      verbatimTextOutput(outputId = "name"),
      verbatimTextOutput(outputId = "data"),
      verbatimTextOutput(outputId = "str_data")
    )
  )
)

server &lt;- function(input, output, session) {

  observeEvent(input$launch_modal, {
    req(input$from)
    import_modal(
      id = "myid",
      from = input$from,
      title = "Import data to be used in application"
    )
  })

  imported &lt;- import_server("myid", return_class = "tbl_df")

  output$name &lt;- renderPrint({
    req(imported$name())
    imported$name()
  })

  output$data &lt;- renderPrint({
    req(imported$data())
    imported$data()
  })

  output$str_data &lt;- renderPrint({
    req(imported$data())
    str(imported$data())
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='import-url'>Import data from a URL</h2><span id='topic+import-url'></span><span id='topic+import_url_ui'></span><span id='topic+import_url_server'></span>

<h3>Description</h3>

<p>Let user paste link to a JSON then import the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_url_ui(id, title = TRUE)

import_url_server(
  id,
  btn_show_data = TRUE,
  show_data_in = c("popup", "modal"),
  trigger_return = c("button", "change"),
  return_class = c("data.frame", "data.table", "tbl_df", "raw"),
  reset = reactive(NULL)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import-url_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="import-url_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="import-url_+3A_btn_show_data">btn_show_data</code></td>
<td>
<p>Display or not a button to display data in a modal window if import is successful.</p>
</td></tr>
<tr><td><code id="import-url_+3A_show_data_in">show_data_in</code></td>
<td>
<p>Where to display data: in a <code>"popup"</code> or in a <code>"modal"</code> window.</p>
</td></tr>
<tr><td><code id="import-url_+3A_trigger_return">trigger_return</code></td>
<td>
<p>When to update selected data:
<code>"button"</code> (when user click on button) or
<code>"change"</code> (each time user select a dataset in the list).</p>
</td></tr>
<tr><td><code id="import-url_+3A_return_class">return_class</code></td>
<td>
<p>Class of returned data: <code>data.frame</code>, <code>data.table</code>, <code>tbl_df</code> (tibble) or <code>raw</code>.</p>
</td></tr>
<tr><td><code id="import-url_+3A_reset">reset</code></td>
<td>
<p>A <code>reactive</code> function that when triggered resets the data.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with three slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the status: <code>NULL</code>, <code>error</code> or <code>success</code>.
</p>
</li>
<li> <p><strong>name</strong>: a <code>reactive</code> function returning the name of the imported data as <code>character</code>.
</p>
</li>
<li> <p><strong>data</strong>: a <code>reactive</code> function returning the imported <code>data.frame</code>.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

ui &lt;- fluidPage(
  tags$h3("Import data from URL"),
  fluidRow(
    column(
      width = 4,
      import_url_ui("myid")
    ),
    column(
      width = 8,
      tags$b("Import status:"),
      verbatimTextOutput(outputId = "status"),
      tags$b("Name:"),
      verbatimTextOutput(outputId = "name"),
      tags$b("Data:"),
      verbatimTextOutput(outputId = "data")
    )
  )
)

server &lt;- function(input, output, session) {

  imported &lt;- import_url_server(
    "myid",
    btn_show_data = FALSE,
    return_class = "raw"
  )

  output$status &lt;- renderPrint({
    imported$status()
  })
  output$name &lt;- renderPrint({
    imported$name()
  })
  output$data &lt;- renderPrint({
    imported$data()
  })

}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='list_pkg_data'>List dataset contained in a package</h2><span id='topic+list_pkg_data'></span>

<h3>Description</h3>

<p>List dataset contained in a package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_pkg_data(pkg)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_pkg_data_+3A_pkg">pkg</code></td>
<td>
<p>Name of the package, must be installed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>character</code> vector or <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
list_pkg_data("ggplot2")
</code></pre>

<hr>
<h2 id='module-sample'>Shiny module to interactively sample a <code>data.frame</code></h2><span id='topic+module-sample'></span><span id='topic+sample_ui'></span><span id='topic+sample_server'></span>

<h3>Description</h3>

<p>Allow to take a sample of <code>data.frame</code> for a given number or proportion of rows to keep.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_ui(id)

sample_server(id, data_r = reactive(NULL))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="module-sample_+3A_id">id</code></td>
<td>
<p>Module id. See <code><a href="shiny.html#topic+moduleServer">shiny::moduleServer()</a></code>.</p>
</td></tr>
<tr><td><code id="module-sample_+3A_data_r">data_r</code></td>
<td>
<p><code>reactive</code> containing a <code>data.frame</code> to use in the module.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>reactive</code> fgunction with the sampled data.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)
library(datamods)
library(reactable)


ui &lt;- fluidPage(

  tags$h2("Sampling"),

  fluidRow(
    column(
      width = 3,
      sample_ui("myID")
    ),
    column(
      width = 9,
      reactableOutput("table")
    )
  )
)


server &lt;- function(input, output, session) {

  result_sample &lt;- sample_server("myID", reactive(iris))

  output$table &lt;- renderReactable({
    table_sample &lt;- reactable(
      data = result_sample(),
      defaultColDef = colDef(
        align = "center"
      ),
      borderless = TRUE,
      highlight = TRUE,
      striped = TRUE
    )
    return(table_sample)
  })
}

if (interactive())
  shinyApp(ui, server)

</code></pre>

<hr>
<h2 id='select-group'>Select Group Input Module</h2><span id='topic+select-group'></span><span id='topic+select_group_ui'></span><span id='topic+select_group_server'></span>

<h3>Description</h3>

<p>Group of mutually dependent select menus for filtering <code>data.frame</code>'s columns (like in Excel).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_group_ui(
  id,
  params,
  label = NULL,
  btn_reset_label = "Reset filters",
  inline = TRUE,
  vs_args = list()
)

select_group_server(id, data_r, vars_r)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select-group_+3A_id">id</code></td>
<td>
<p>Module's id.</p>
</td></tr>
<tr><td><code id="select-group_+3A_params">params</code></td>
<td>
<p>A list of parameters passed to each <code><a href="shinyWidgets.html#topic+virtualSelectInput">shinyWidgets::virtualSelectInput()</a></code>,
you can use :
</p>

<ul>
<li> <p><code>inputId</code>: mandatory, must correspond to variable name.
</p>
</li>
<li> <p><code>label</code>: Display label for the control.
</p>
</li>
<li> <p><code>placeholder</code>: Text to show when no options selected.
</p>
</li></ul>
</td></tr>
<tr><td><code id="select-group_+3A_label">label</code></td>
<td>
<p>Character, global label on top of all labels.</p>
</td></tr>
<tr><td><code id="select-group_+3A_btn_reset_label">btn_reset_label</code></td>
<td>
<p>Character, reset button label. If <code>NULL</code> no button is added.</p>
</td></tr>
<tr><td><code id="select-group_+3A_inline">inline</code></td>
<td>
<p>If <code>TRUE</code> (the default),
select menus are horizontally positioned, otherwise vertically.</p>
</td></tr>
<tr><td><code id="select-group_+3A_vs_args">vs_args</code></td>
<td>
<p>Arguments passed to all <code><a href="shinyWidgets.html#topic+virtualSelectInput">shinyWidgets::virtualSelectInput()</a></code> created.</p>
</td></tr>
<tr><td><code id="select-group_+3A_data_r">data_r</code></td>
<td>
<p>Either a <code><a href="base.html#topic+data.frame">data.frame()</a></code> or a <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code>
function returning a <code>data.frame</code> (do not use parentheses).</p>
</td></tr>
<tr><td><code id="select-group_+3A_vars_r">vars_r</code></td>
<td>
<p>character, columns to use to create filters,
must correspond to variables listed in <code>params</code>. Can be a
<code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function, but values must be included in the initial ones (in <code>params</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function containing data filtered with an attribute <code>inputs</code> containing a named list of selected inputs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Default -----------------------------------------------------------------

library(shiny)
library(datamods)
library(shinyWidgets)


ui &lt;- fluidPage(
  # theme = bslib::bs_theme(version = 5L),
  fluidRow(
    column(
      width = 10, offset = 1,
      tags$h3("Filter data with select group module"),
      shinyWidgets::panel(
        select_group_ui(
          id = "my-filters",
          params = list(
            list(inputId = "Manufacturer", label = "Manufacturer:"),
            list(inputId = "Type", label = "Type:"),
            list(inputId = "AirBags", label = "AirBags:"),
            list(inputId = "DriveTrain", label = "DriveTrain:")
          ), vs_args = list(disableSelectAll = FALSE)
        ),
        status = "primary"
      ),
      reactable::reactableOutput(outputId = "table"),
      tags$b("Inputs values:"),
      verbatimTextOutput("inputs")
    )
  )
)

server &lt;- function(input, output, session) {
  res_mod &lt;- select_group_server(
    id = "my-filters",
    data = reactive(MASS::Cars93),
    vars = reactive(c("Manufacturer", "Type", "AirBags", "DriveTrain"))
  )

  output$table &lt;- reactable::renderReactable({
    reactable::reactable(res_mod())
  })

  output$inputs &lt;- renderPrint({
    attr(res_mod(), "inputs")
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='show_data'>Display a table in a window</h2><span id='topic+show_data'></span>

<h3>Description</h3>

<p>Display a table in a window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_data(
  data,
  title = NULL,
  options = NULL,
  show_classes = TRUE,
  type = c("popup", "modal", "winbox"),
  width = "65%",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show_data_+3A_data">data</code></td>
<td>
<p>a data object (either a <code>matrix</code> or a <code>data.frame</code>).</p>
</td></tr>
<tr><td><code id="show_data_+3A_title">title</code></td>
<td>
<p>Title to be displayed in window.</p>
</td></tr>
<tr><td><code id="show_data_+3A_options">options</code></td>
<td>
<p>Arguments passed to <code><a href="toastui.html#topic+datagrid">toastui::datagrid()</a></code>.</p>
</td></tr>
<tr><td><code id="show_data_+3A_show_classes">show_classes</code></td>
<td>
<p>Show variables classes under variables names in table header.</p>
</td></tr>
<tr><td><code id="show_data_+3A_type">type</code></td>
<td>
<p>Display table in a pop-up with <code><a href="shinyWidgets.html#topic+sweetalert">shinyWidgets::show_alert()</a></code>,
in modal window with <code><a href="shiny.html#topic+showModal">shiny::showModal()</a></code> or in a WinBox window with <code><a href="shinyWidgets.html#topic+WinBox">shinyWidgets::WinBox()</a></code>.</p>
</td></tr>
<tr><td><code id="show_data_+3A_width">width</code></td>
<td>
<p>Width of the window, only used if <code>type = "popup"</code> or <code>type = "winbox"</code>.</p>
</td></tr>
<tr><td><code id="show_data_+3A_...">...</code></td>
<td>
<p>Additional options, such as <code>wbOptions = wbOptions()</code> or <code>wbControls = wbControls()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Note</h3>

<p>If you use <code>type = "winbox"</code>, you'll need to use <code>shinyWidgets::html_dependency_winbox()</code> somewhere in your UI.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

ui &lt;- fluidPage(
  theme = bslib::bs_theme(version = 5L),
  shinyWidgets::html_dependency_winbox(),
  actionButton(
    inputId = "show1",
    label = "Show data in popup",
    icon = icon("eye")
  ),
  actionButton(
    inputId = "show2",
    label = "Show data in modal",
    icon = icon("eye")
  ),
  actionButton(
    inputId = "show3",
    label = "Show data without classes",
    icon = icon("eye")
  ),
  actionButton(
    inputId = "show4",
    label = "Show data in Winbox",
    icon = icon("eye")
  )
)

server &lt;- function(input, output, session) {
  observeEvent(input$show1, {
    show_data(MASS::Cars93, title = "MASS::Cars93 dataset", type = "popup")
  })
  observeEvent(input$show2, {
    show_data(MASS::Cars93, title = "MASS::Cars93 dataset", type = "modal")
  })
  observeEvent(input$show3, {
    show_data(
      data = MASS::Cars93,
      title = "MASS::Cars93 dataset",
      show_classes = FALSE,
      options = list(pagination = 10),
      type = "modal"
    )
  })
  observeEvent(input$show4, {
    show_data(
      MASS::Cars93,
      title = "MASS::Cars93 dataset",
      type = "winbox",
      wbOptions = shinyWidgets::wbOptions(background = "forestgreen")
    )
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='update-factor'>Module to Reorder the Levels of a Factor Variable</h2><span id='topic+update-factor'></span><span id='topic+update_factor_ui'></span><span id='topic+update_factor_server'></span><span id='topic+modal_update_factor'></span>

<h3>Description</h3>

<p>This module contain an interface to reorder the levels of a factor variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_factor_ui(id)

update_factor_server(id, data_r = reactive(NULL))

modal_update_factor(
  id,
  title = i18n("Update levels of a factor"),
  easyClose = TRUE,
  size = "l",
  footer = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update-factor_+3A_id">id</code></td>
<td>
<p>Module ID.</p>
</td></tr>
<tr><td><code id="update-factor_+3A_data_r">data_r</code></td>
<td>
<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="update-factor_+3A_title">title</code></td>
<td>
<p>An optional title for the dialog.</p>
</td></tr>
<tr><td><code id="update-factor_+3A_easyclose">easyClose</code></td>
<td>
<p>If <code>TRUE</code>, the modal dialog can be dismissed by
clicking outside the dialog box, or be pressing the Escape key. If
<code>FALSE</code> (the default), the modal dialog can't be dismissed in those
ways; instead it must be dismissed by clicking on a <code>modalButton()</code>, or
from a call to <code><a href="shiny.html#topic+removeModal">removeModal()</a></code> on the server.</p>
</td></tr>
<tr><td><code id="update-factor_+3A_size">size</code></td>
<td>
<p>One of <code>"s"</code> for small, <code>"m"</code> (the default) for medium,
<code>"l"</code> for large, or <code>"xl"</code> for extra large. Note that <code>"xl"</code> only
works with Bootstrap 4 and above (to opt-in to Bootstrap 4+,
pass <code><a href="bslib.html#topic+bs_theme">bslib::bs_theme()</a></code> to the <code>theme</code> argument of a page container
like <code><a href="shiny.html#topic+fluidPage">fluidPage()</a></code>).</p>
</td></tr>
<tr><td><code id="update-factor_+3A_footer">footer</code></td>
<td>
<p>UI for footer. Use <code>NULL</code> for no footer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning the data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)
library(ggplot2)

ui &lt;- fluidPage(
  theme = bslib::bs_theme(version = 5L, preset = "bootstrap"),
  shinyWidgets::html_dependency_winbox(),
  tags$h2("Reorder the Levels of a Factor"),
  fluidRow(
    column(
      width = 6,
      update_factor_ui("id"),
      actionButton("modal", "Or click here to open a modal to update factor's level"),
      tags$br(), tags$br(),
      actionButton("winbox", "Or click here to open a WinBox to create a column")
    ),
    column(
      width = 6,
      selectInput(
        "var",
        label = "Variable to plot:",
        choices = NULL
      ),
      plotOutput("plot"),
      verbatimTextOutput("res")
    )
  )
)

server &lt;- function(input, output, session) {

  rv &lt;- reactiveValues(data = MASS::Cars93[c(1, 2, 3, 9, 10, 11, 16, 26, 27)])
  observe(
    updateSelectInput(inputId = "var", choices = names(rv$data))
  )

  # Inline mode
  data_inline_r &lt;- update_factor_server(
    id = "id",
    data_r = reactive(rv$data)
  )
  observeEvent(data_inline_r(), rv$data &lt;- data_inline_r())

  # modal window mode
  observeEvent(input$modal, modal_update_factor("modal"))
  data_modal_r &lt;- update_factor_server(
    id = "modal",
    data_r = reactive(rv$data)
  )
  observeEvent(data_modal_r(), {
    shiny::removeModal()
    rv$data &lt;- data_modal_r()
  })

  # winbox mode
  observeEvent(input$winbox, winbox_update_factor("winbox"))
  data_winbox_r &lt;- update_factor_server(
    id = "winbox",
    data_r = reactive(rv$data)
  )
  observeEvent(data_winbox_r(), rv$data &lt;- data_winbox_r())

  # Plot results
  output$plot &lt;- renderPlot({
    req(input$var, rv$data)
    ggplot(rv$data) +
      aes(x = !!sym(input$var)) +
      geom_bar()
  })
  # Show results
  output$res &lt;- renderPrint({
    data &lt;- req(rv$data)
    str(data)
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='update-variables'>Select, rename and convert variables</h2><span id='topic+update-variables'></span><span id='topic+update_variables_ui'></span><span id='topic+update_variables_server'></span>

<h3>Description</h3>

<p>Select, rename and convert variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_variables_ui(id, title = TRUE)

update_variables_server(
  id,
  data,
  height = NULL,
  return_data_on_init = FALSE,
  try_silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update-variables_+3A_id">id</code></td>
<td>
<p>Module's ID</p>
</td></tr>
<tr><td><code id="update-variables_+3A_title">title</code></td>
<td>
<p>Module's title, if <code>TRUE</code> use the default title,
use <code>NULL</code> for no title or a <code>shiny.tag</code> for a custom one.</p>
</td></tr>
<tr><td><code id="update-variables_+3A_data">data</code></td>
<td>
<p>a <code>data.frame</code> or a <code>reactive</code> function returning a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="update-variables_+3A_height">height</code></td>
<td>
<p>Height for the table.</p>
</td></tr>
<tr><td><code id="update-variables_+3A_return_data_on_init">return_data_on_init</code></td>
<td>
<p>Return initial data when module is called.</p>
</td></tr>
<tr><td><code id="update-variables_+3A_try_silent">try_silent</code></td>
<td>
<p>logical: should the report of error messages be suppressed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="shiny.html#topic+reactive">shiny::reactive()</a></code> function returning the updated data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(shiny)
library(datamods)

testdata &lt;- data.frame(
  date_as_char = as.character(Sys.Date() + 0:9),
  date_as_num = as.numeric(Sys.Date() + 0:9),
  datetime_as_char = as.character(Sys.time() + 0:9 * 3600*24),
  datetime_as_num = as.numeric(Sys.time() + 0:9 * 3600*24),
  num_as_char = as.character(1:10),
  char = month.name[1:10],
  char_na = c("A", "A", "B", NA, "B", "A", NA, "B", "A", "B"),
  stringsAsFactors = FALSE
)

ui &lt;- fluidPage(
  theme = bslib::bs_theme(version = 5L, preset = "bootstrap"),
  tags$h3("Select, rename and convert variables"),
  fluidRow(
    column(
      width = 6,
      # radioButtons()
      update_variables_ui("vars")
    ),
    column(
      width = 6,
      tags$b("original data:"),
      verbatimTextOutput("original"),
      verbatimTextOutput("original_str"),
      tags$b("Modified data:"),
      verbatimTextOutput("modified"),
      verbatimTextOutput("modified_str")
    )
  )
)

server &lt;- function(input, output, session) {

  updated_data &lt;- update_variables_server(
    id = "vars",
    data = reactive(testdata),
    return_data_on_init = FALSE
  )

  output$original &lt;- renderPrint({
    testdata
  })
  output$original_str &lt;- renderPrint({
    str(testdata)
  })

  output$modified &lt;- renderPrint({
    updated_data()
  })
  output$modified_str &lt;- renderPrint({
    str(updated_data())
  })
}

if (interactive())
  shinyApp(ui, server)
</code></pre>

<hr>
<h2 id='validation_ui'>Validation module</h2><span id='topic+validation_ui'></span><span id='topic+validation_server'></span>

<h3>Description</h3>

<p>Check that a dataset respect some validation expectations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validation_ui(id, display = c("dropdown", "inline"), max_height = NULL, ...)

validation_server(
  id,
  data,
  n_row = NULL,
  n_col = NULL,
  n_row_label = i18n("Valid number of rows"),
  n_col_label = i18n("Valid number of columns"),
  btn_label = i18n("Dataset validation:"),
  rules = NULL,
  bs_version = 3
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validation_ui_+3A_id">id</code></td>
<td>
<p>Module's ID.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_display">display</code></td>
<td>
<p>Display validation results in a dropdown menu
by clicking on a button or display results directly in interface.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_max_height">max_height</code></td>
<td>
<p>Maximum height for validation results element, useful if you have many rules.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>actionButton</code> or <code>uiOutput</code> depending on display mode,
you cannot use <code>inputId</code>/<code>outputId</code>, <code>label</code> or <code>icon</code> (button only).</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_data">data</code></td>
<td>
<p>a <code>reactive</code> function returning a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_n_row">n_row</code>, <code id="validation_ui_+3A_n_col">n_col</code></td>
<td>
<p>A one-sided formula to check number of rows and columns respectively, see below for examples.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_n_row_label">n_row_label</code>, <code id="validation_ui_+3A_n_col_label">n_col_label</code></td>
<td>
<p>Text to be displayed with the result of the check for number of rows/columns.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_btn_label">btn_label</code></td>
<td>
<p>Label for the dropdown button, will be followed by validation result.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_rules">rules</code></td>
<td>
<p>An object of class <code>validator</code> created with <code>validate::validator</code>.</p>
</td></tr>
<tr><td><code id="validation_ui_+3A_bs_version">bs_version</code></td>
<td>
<p>Bootstrap version used, it may affect rendering, especially status badges.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> UI: HTML tags that can be included in shiny's UI
</p>
</li>
<li><p> Server: a <code>list</code> with two slots:
</p>

<ul>
<li> <p><strong>status</strong>: a <code>reactive</code> function returning the best status available between <code>"OK"</code>, <code>"Failed"</code> or <code>"Error"</code>.
</p>
</li>
<li> <p><strong>details</strong>: a <code>reactive</code> function returning a <code>list</code> with validation details.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(datamods)
library(shiny)

if (requireNamespace("validate")) {
  library(validate)

  # Define some rules to be applied to data
  myrules &lt;- validator(
    is.character(Manufacturer) | is.factor(Manufacturer),
    is.numeric(Price),
    Price &gt; 12, # we should use 0 for testing positivity, but that's for the example
    !is.na(Luggage.room),
    in_range(Cylinders, min = 4, max = 8),
    Man.trans.avail %in% c("Yes", "No")
  )
  # Add some labels
  label(myrules) &lt;- c(
    "Variable Manufacturer must be character",
    "Variable Price must be numeric",
    "Variable Price must be strictly positive",
    "Luggage.room must not contain any missing values",
    "Cylinders must be between 4 and 8",
    "Man.trans.avail must be 'Yes' or 'No'"
  )
  # you can also add a description()

  ui &lt;- fluidPage(
    tags$h2("Validation"),
    fluidRow(
      column(
        width = 4,
        radioButtons(
          inputId = "dataset",
          label = "Choose dataset:",
          choices = c("mtcars", "MASS::Cars93")
        ),
        tags$p("Dropdown example:"),
        validation_ui("validation1"),

        tags$br(),

        tags$p("Inline example:"),
        validation_ui("validation2", display = "inline")
      ),
      column(
        width = 8,
        tags$b("Status:"),
        verbatimTextOutput("status"),
        tags$b("Details:"),
        verbatimTextOutput("details")
      )
    )
  )

  server &lt;- function(input, output, session) {

    dataset &lt;- reactive({
      if (input$dataset == "mtcars") {
        mtcars
      } else {
        MASS::Cars93
      }
    })

    results &lt;- validation_server(
      id = "validation1",
      data = dataset,
      n_row = ~ . &gt; 20, # more than 20 rows
      n_col = ~ . &gt;= 3, # at least 3 columns
      rules = myrules
    )

    validation_server(
      id = "validation2",
      data = dataset,
      n_row = ~ . &gt; 20, # more than 20 rows
      n_col = ~ . &gt;= 3, # at least 3 columns
      rules = myrules
    )

    output$status &lt;- renderPrint(results$status())
    output$details &lt;- renderPrint(results$details())

  }

  if (interactive())
    shinyApp(ui, server)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
