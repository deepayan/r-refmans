<!DOCTYPE html><html><head><title>Help for package rbi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rbi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#absolute_path'><p>Absolute Path</p></a></li>
<li><a href='#add_block'><p>Add a block to a LibBi model</p></a></li>
<li><a href='#assert_files'><p>Check that a LibBi wrapper has valid output</p></a></li>
<li><a href='#attach_data'><p>Attach a new file or data set to a <code>libbi</code> object</p></a></li>
<li><a href='#bi_contents'><p>Bi contents</p></a></li>
<li><a href='#bi_dim_len'><p>NetCDF dimension length</p></a></li>
<li><a href='#bi_file_summary'><p>NetCDF File Summary</p></a></li>
<li><a href='#bi_generate_dataset'><p>Bi Generate Dataset</p></a></li>
<li><a href='#bi_model'><p>Bi Model</p></a></li>
<li><a href='#bi_open'><p>Bi Open</p></a></li>
<li><a href='#bi_read'><p>Bi Read</p></a></li>
<li><a href='#bi_write'><p>Create (e.g., init or observation) files for LibBi</p></a></li>
<li><a href='#check_sparse_var'><p>Check if a variable is sparse</p></a></li>
<li><a href='#clean_model'><p>Strip model code to its bare bones</p></a></li>
<li><a href='#create_coord_var'><p>Create a coordinate variable</p></a></li>
<li><a href='#create_working_folder'><p>Internal function to create a temporary working folder</p></a></li>
<li><a href='#enable_outputs'><p>Enable outputting variables in a <code>bi_model</code></p></a></li>
<li><a href='#Equals.bi_model'><p>Check if two models are equal</p></a></li>
<li><a href='#Extract_assign.bi_model'><p>Subset and replace model lines</p></a></li>
<li><a href='#extract_sample'><p>Extract a sample from a <code>LibBi</code> run.</p></a></li>
<li><a href='#Extract.bi_model'><p>Subset model lines</p></a></li>
<li><a href='#filter'><p>Using the LibBi wrapper to filter</p></a></li>
<li><a href='#find_block'><p>Find a block in a LibBi model</p></a></li>
<li><a href='#fix'><p>Fix noise term, state or parameter of a libbi model</p></a></li>
<li><a href='#flatten'><p>Flatten list of data frames</p>
This function takes a list of data frames (such as, for example, returned by
<code>bi_read</code>) and converts it to a flat data frame</a></li>
<li><a href='#generate_dataset'><p>Generate Dataset</p></a></li>
<li><a href='#get_block'><p>Get the contents of a block in a LibBi model</p></a></li>
<li><a href='#get_const'><p>Get constants in a LibBi model</p></a></li>
<li><a href='#get_dims'><p>Get dimensions in a LibBi model</p></a></li>
<li><a href='#get_name'><p>Get the name of a bi model</p></a></li>
<li><a href='#get_traces'><p>Get the parameter traces</p></a></li>
<li><a href='#insert_lines'><p>Insert lines in a LibBi model</p></a></li>
<li><a href='#installed_libbi_version'><p>Get the LibBi version</p></a></li>
<li><a href='#is_empty'><p>Check if a model is empty</p></a></li>
<li><a href='#join'><p>Join multiple <code>libbi</code> objects</p></a></li>
<li><a href='#libbi'><p>LibBi Wrapper</p></a></li>
<li><a href='#locate_libbi'><p>Find the libbi executable</p></a></li>
<li><a href='#logLik'><p>Using the LibBi wrapper to logLik</p></a></li>
<li><a href='#optimise'><p>Using the LibBi wrapper to optimise</p></a></li>
<li><a href='#option_list'><p>Convert string to option list</p></a></li>
<li><a href='#option_string'><p>Convert Options</p></a></li>
<li><a href='#predict'><p>Using the LibBi wrapper to predict</p></a></li>
<li><a href='#print_log'><p>Print the log file a <code>libbi</code> object</p></a></li>
<li><a href='#print.bi_model'><p>Print the lines of a LibBi model</p></a></li>
<li><a href='#propose_prior'><p>Propose from the prior in a libbi model</p></a></li>
<li><a href='#read_libbi'><p>Read results of a <code>LibBi</code> run from an RDS file or from a folder.</p>
This completely reconstructs the saved <code>LibBi</code> object</a></li>
<li><a href='#remove_lines'><p>Remove line(s) and/or block(s) in a libbi model</p></a></li>
<li><a href='#remove_vars'><p>Remove variables</p></a></li>
<li><a href='#replace_all'><p>Replace all instances of a string with another in a model</p></a></li>
<li><a href='#rewrite'><p>Using the LibBi wrapper to rewrite</p></a></li>
<li><a href='#run'><p>Using the LibBi wrapper to launch LibBi</p></a></li>
<li><a href='#sample'><p>Using the LibBi wrapper to sample</p></a></li>
<li><a href='#sample_obs'><p>Sample observations from a LibBi model that has been run</p></a></li>
<li><a href='#save_libbi'><p>Write results of a <code>LibBi</code> run to an RDS file</p></a></li>
<li><a href='#set_name'><p>Set the name of a bi model</p></a></li>
<li><a href='#simulate'><p>Using the LibBi wrapper to simulate</p></a></li>
<li><a href='#summary'><p>Print summary information about a <code>libbi</code> object</p></a></li>
<li><a href='#to_input'><p>Convert variables into inputs</p></a></li>
<li><a href='#Unequals.bi_model'><p>Check if two models are unequal</p></a></li>
<li><a href='#update'><p>Update a libbi object</p></a></li>
<li><a href='#var_names'><p>Get variable names in a LibBi model</p></a></li>
<li><a href='#write_model'><p>Writes a bi model to a file.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface to 'LibBi'</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, ncdf4, processx, reshape2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>coda, covr (&ge; 3.2.0), stringi, testthat, ggplot2, knitr,
rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a complete interface to 'LibBi', a library for Bayesian
    inference (see <a href="https://libbi.org">https://libbi.org</a> and Murray, 2015
    &lt;<a href="https://doi.org/10.18637%2Fjss.v067.i10">doi:10.18637/jss.v067.i10</a>&gt; for more information). This includes functions
    for manipulating 'LibBi' models, for reading and writing 'LibBi'
    input/output files, for converting 'LibBi' output to provide traces for use
    with the coda package, and for running 'LibBi' to conduct inference.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/sbfnk/rbi">https://github.com/sbfnk/rbi</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sbfnk/rbi/issues">https://github.com/sbfnk/rbi/issues</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>LibBi (&gt;= 1.4.2)</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-15 08:31:17 UTC; eidesfun</td>
</tr>
<tr>
<td>Author:</td>
<td>Pierre E. Jacob [aut],
  Anthony Lee [ctb],
  Lawrence M. Murray [ctb],
  Sebastian Funk [aut, cre],
  Sam Abbott [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Funk &lt;sebastian.funk@lshtm.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-15 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='absolute_path'>Absolute Path</h2><span id='topic+absolute_path'></span>

<h3>Description</h3>

<p>This function is used to convert relative file paths to absolute file paths
without checking if the file exists as tools::file_as_absolute_path does
</p>


<h3>Usage</h3>

<pre><code class='language-R'>absolute_path(filename, dirname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="absolute_path_+3A_filename">filename</code></td>
<td>
<p>name of a file, absolute or relative to a folder</p>
</td></tr>
<tr><td><code id="absolute_path_+3A_dirname">dirname</code></td>
<td>
<p>name of a folder where the file is supposed to be</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string containing the absolute path
</p>

<hr>
<h2 id='add_block'>Add a block to a LibBi model</h2><span id='topic+add_block'></span><span id='topic+add_block.bi_model'></span>

<h3>Description</h3>

<p>Add a block to a LibBi model. If that block exists, it will be removed first.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
add_block(x, name, lines, options, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_block_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="add_block_+3A_name">name</code></td>
<td>
<p>name of the block</p>
</td></tr>
<tr><td><code id="add_block_+3A_lines">lines</code></td>
<td>
<p>character vector, lines in the block</p>
</td></tr>
<tr><td><code id="add_block_+3A_options">options</code></td>
<td>
<p>any options to the block</p>
</td></tr>
<tr><td><code id="add_block_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+bi_model">bi_model</a></code> object containing the new block
</p>

<hr>
<h2 id='assert_files'>Check that a LibBi wrapper has valid output</h2><span id='topic+assert_files'></span><span id='topic+assert_files.libbi'></span>

<h3>Description</h3>

<p>This checks that the <code><a href="#topic+libbi">libbi</a></code> object given has been run (via
<code><a href="#topic+sample">sample</a></code>, <code><a href="#topic+filter">filter</a></code> or <code><a href="stats.html#topic+optimize">optimize</a></code>)) and
the output file has not been modified since.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
assert_files(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_files_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="assert_files_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing (invisible NULL); an error will be thrown if there is a
problem
</p>

<hr>
<h2 id='attach_data'>Attach a new file or data set to a <code><a href="#topic+libbi">libbi</a></code> object</h2><span id='topic+attach_data'></span><span id='topic+attach_data.libbi'></span>

<h3>Description</h3>

<p>Adds an (output, obs, etc.) file to a <code><a href="#topic+libbi">libbi</a></code> object. This is
useful to recreate a <code><a href="#topic+libbi">libbi</a></code> object from the model and output
files of a previous run
</p>
<p>The <code><a href="#topic+bi_write">bi_write</a></code> options <code>append</code> and <code>overwrite</code>
determine what exactly the file will contain at the end of this. If they
are both FALSE (the default), any existing file will be ignored. If
<code>append</code> is TRUE, the existing data in the file will be preserved, and
any data set passed as <code>data</code> and not already in the file will be
added. If <code>overwrite</code> is TRUE, existing data in the file will be
preserved except for variables that exist in the passed <code>data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
attach_data(
  x,
  file,
  data,
  in_place = FALSE,
  append = FALSE,
  overwrite = FALSE,
  quiet = FALSE,
  time_dim = character(0),
  coord_dims = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_data_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="attach_data_+3A_file">file</code></td>
<td>
<p>the type of the file to attach, one of &quot;output&quot;, &quot;obs&quot;, &quot;input&quot;
or &quot;init&quot;</p>
</td></tr>
<tr><td><code id="attach_data_+3A_data">data</code></td>
<td>
<p>name of the file to attach, or a list of data frames
that contain the outputs; it will be assumed that this is already thinned</p>
</td></tr>
<tr><td><code id="attach_data_+3A_in_place">in_place</code></td>
<td>
<p>if TRUE, replace the file in place if it already exists in
the libbi object; this can speed up the operation if append=TRUE as
otherwise the file will have to be read and used again; it should be used
with care, though, as it can render existing <code><a href="#topic+libbi">libbi</a></code> objects
invalid as the files they are pointing to are changed.</p>
</td></tr>
<tr><td><code id="attach_data_+3A_append">append</code></td>
<td>
<p>if TRUE, will append variables if file exists; default: FALSE</p>
</td></tr>
<tr><td><code id="attach_data_+3A_overwrite">overwrite</code></td>
<td>
<p>if TRUE, will overwrite variables if file exists; default:
FALSE</p>
</td></tr>
<tr><td><code id="attach_data_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, will suppress the warning message normally given if
replace=TRUE and the file exists already</p>
</td></tr>
<tr><td><code id="attach_data_+3A_time_dim">time_dim</code></td>
<td>
<p>the name of the time dimension, if one exists; default:
&quot;time&quot;</p>
</td></tr>
<tr><td><code id="attach_data_+3A_coord_dims">coord_dims</code></td>
<td>
<p>the names of the coordinate dimension, if any; should be a
named list of character vectors, they are matched to variables names</p>
</td></tr>
<tr><td><code id="attach_data_+3A_...">...</code></td>
<td>
<p>any options to <code><a href="#topic+bi_write">bi_write</a></code> (e.g., 'time_dim')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bi &lt;- libbi(model = system.file(package = "rbi", "PZ.bi"))
example_output &lt;- bi_read(system.file(package = "rbi", "example_output.nc"))
bi &lt;- attach_data(bi, "output", example_output)
</code></pre>

<hr>
<h2 id='bi_contents'>Bi contents</h2><span id='topic+bi_contents'></span>

<h3>Description</h3>

<p>This function gets the name of all the variables in the passed file, list or
<code><a href="#topic+libbi">libbi</a></code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_contents(read, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_contents_+3A_read">read</code></td>
<td>
<p>either a path to a NetCDF file, or a NetCDF connection created
using <code>nc_open</code>, or a <code><a href="#topic+libbi">libbi</a></code> object from which to read
the output</p>
</td></tr>
<tr><td><code id="bi_contents_+3A_...">...</code></td>
<td>
<p>any parameters for <code><a href="#topic+bi_open">bi_open</a></code> (especially &quot;file&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of variable names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_output_file &lt;- system.file(package = "rbi", "example_output.nc")
bi_contents(example_output_file)
</code></pre>

<hr>
<h2 id='bi_dim_len'>NetCDF dimension length</h2><span id='topic+bi_dim_len'></span>

<h3>Description</h3>

<p>This function returns the length of a dimension in a NetCDF file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_dim_len(filename, dim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_dim_len_+3A_filename">filename</code></td>
<td>
<p>path to a NetCDF file</p>
</td></tr>
<tr><td><code id="bi_dim_len_+3A_dim">dim</code></td>
<td>
<p>name of the dimension to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a number, the dimension length
</p>

<hr>
<h2 id='bi_file_summary'>NetCDF File Summary</h2><span id='topic+bi_file_summary'></span>

<h3>Description</h3>

<p>This function prints a little summary of the content
of a NetCDF file, as well as its creation time. You can
then retrieve variables of interest using <code><a href="#topic+bi_read">bi_read</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_file_summary(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_file_summary_+3A_...">...</code></td>
<td>
<p>Any extra parameters to <code><a href="#topic+bi_open">bi_open</a></code>, especially <code>x</code>
and <code>file</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_output_file &lt;- system.file(package = "rbi", "example_output.nc")
bi_file_summary(example_output_file)
</code></pre>

<hr>
<h2 id='bi_generate_dataset'>Bi Generate Dataset</h2><span id='topic+bi_generate_dataset'></span>

<h3>Description</h3>

<p>This function is deprecated and has been renamed to
<code><a href="#topic+generate_dataset">generate_dataset</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_generate_dataset(..., output_every = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_generate_dataset_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code><a href="#topic+sample.libbi">sample.libbi</a></code>, especially
'model', 'end_time' and 'seed'.</p>
</td></tr>
<tr><td><code id="bi_generate_dataset_+3A_output_every">output_every</code></td>
<td>
<p>real; if given, <code>noutputs</code> will be set so that there
is output every <code>output_every</code> time steps; if set to 0, only generate
an output at the final time</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>libbi</code> object, the generated data set
</p>

<hr>
<h2 id='bi_model'>Bi Model</h2><span id='topic+bi_model'></span>

<h3>Description</h3>

<p><code>bi_model</code> creates a model object for <code>Rbi</code> from a libbi file, URL
or character vector.  Once the instance is created, the model can be fed to
a <code><a href="#topic+libbi">libbi</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_model(filename, lines, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_model_+3A_filename">filename</code></td>
<td>
<p>the file name of the model file</p>
</td></tr>
<tr><td><code id="bi_model_+3A_lines">lines</code></td>
<td>
<p>lines of the model (if no <code>filename</code> is given), a character
vector</p>
</td></tr>
<tr><td><code id="bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>{bi_model}</code> object containing the newly created model
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fix">fix</a></code>, <code><a href="#topic+insert_lines">insert_lines</a></code>,
<code><a href="#topic+remove_lines">remove_lines</a></code>, <code><a href="#topic+replace_all">replace_all</a></code>,
<code><a href="#topic+get_name">get_name</a></code>, <code><a href="#topic+set_name">set_name</a></code>, <code><a href="#topic+write_model">write_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
</code></pre>

<hr>
<h2 id='bi_open'>Bi Open</h2><span id='topic+bi_open'></span>

<h3>Description</h3>

<p>This function opens an NetCDF file
The file can be specified as a string to the filepath, in which
case a NetCDF connection is opened, or directly as a NetCDF connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_open(x, file = "output")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_open_+3A_x">x</code></td>
<td>
<p>either a path to a NetCDF file, or a NetCDF connection created using
<code>nc_open</code>, or a <code><a href="#topic+libbi">libbi</a></code> object from which to read the
output</p>
</td></tr>
<tr><td><code id="bi_open_+3A_file">file</code></td>
<td>
<p>file to open (out of &quot;input&quot;, &quot;init&quot;, &quot;obs&quot;, &quot;output&quot;), if
<code>x</code> is given as a <code>libbi</code> object; by default, will read output
file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an open NetCDF connection
</p>

<hr>
<h2 id='bi_read'>Bi Read</h2><span id='topic+bi_read'></span>

<h3>Description</h3>

<p>This function reads all variable from a NetCDF file or the output of a
<code><a href="#topic+libbi">libbi</a></code> object.
The file can be specified as a string to the filepath, in which
case a NetCDF connection is opened, or directly as a NetCDF connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_read(
  x,
  vars,
  dims,
  model,
  type,
  file,
  missval_threshold,
  coord_dims = list(),
  thin,
  verbose = FALSE,
  clear_cache = FALSE,
  init_to_param = FALSE,
  burn = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_read_+3A_x">x</code></td>
<td>
<p>either a path to a NetCDF file, or a NetCDF connection created using
<code>nc_open</code>, or a <code><a href="#topic+libbi">libbi</a></code> object from which to read the
output</p>
</td></tr>
<tr><td><code id="bi_read_+3A_vars">vars</code></td>
<td>
<p>variables to read; if not given, all will be read</p>
</td></tr>
<tr><td><code id="bi_read_+3A_dims">dims</code></td>
<td>
<p>factors for dimensions</p>
</td></tr>
<tr><td><code id="bi_read_+3A_model">model</code></td>
<td>
<p>model file or a <code>bi_model</code> object (if <code>x</code> is not a
<code>libbi</code> object)</p>
</td></tr>
<tr><td><code id="bi_read_+3A_type">type</code></td>
<td>
<p>vector of types of variable to read (out of &quot;param&quot;, &quot;state&quot;,
&quot;noise&quot;, &quot;obs&quot;). This needs 'x' to be a <code><a href="#topic+libbi">libbi</a></code> object or
<code>model</code> to be specified</p>
</td></tr>
<tr><td><code id="bi_read_+3A_file">file</code></td>
<td>
<p>which file to read (if <code>x</code> is given as a <code><a href="#topic+libbi">libbi</a></code>
object): one of &quot;output&quot; (default), &quot;init&quot;, &quot;input&quot;, &quot;obs&quot;</p>
</td></tr>
<tr><td><code id="bi_read_+3A_missval_threshold">missval_threshold</code></td>
<td>
<p>upper threshold for the likelihood</p>
</td></tr>
<tr><td><code id="bi_read_+3A_coord_dims">coord_dims</code></td>
<td>
<p>any <code>coord</code> dimensions, given as a named list of
character vectors, where each element corresponds to the variable of the
same name, and the character vector are the <code>coord</code> dimensions</p>
</td></tr>
<tr><td><code id="bi_read_+3A_thin">thin</code></td>
<td>
<p>thinning (keep only 1/thin of samples)</p>
</td></tr>
<tr><td><code id="bi_read_+3A_verbose">verbose</code></td>
<td>
<p>if TRUE, will print variables as they are read</p>
</td></tr>
<tr><td><code id="bi_read_+3A_clear_cache">clear_cache</code></td>
<td>
<p>if TRUE, will clear the cache and re-read the file even if
cached data exists</p>
</td></tr>
<tr><td><code id="bi_read_+3A_init_to_param">init_to_param</code></td>
<td>
<p>logical; if TRUE, convert states to initial values</p>
</td></tr>
<tr><td><code id="bi_read_+3A_burn">burn</code></td>
<td>
<p>number of initial samples to discard; default: 0</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of data frames and/or numbers that have been read
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_output_file &lt;- system.file(package = "rbi", "example_output.nc")
d &lt;- bi_read(example_output_file)
</code></pre>

<hr>
<h2 id='bi_write'>Create (e.g., init or observation) files for LibBi</h2><span id='topic+bi_write'></span>

<h3>Description</h3>

<p>This function creates (or appends to) a NetCDF file for LibBi from the given
list of vectors and/or data frames. Since any files can be passed to
<code><a href="#topic+libbi">libbi</a></code> directly via the <code>init</code>, <code>input</code> and
<code>obs</code> options, this is mostly used internally, this is mostly used
internally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bi_write(
  filename,
  variables,
  append = FALSE,
  overwrite = FALSE,
  time_dim,
  coord_dims,
  dim_factors,
  value_column = "value",
  guess_time = FALSE,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bi_write_+3A_filename">filename</code></td>
<td>
<p>a path to a NetCDF file to write the variables into, which
will be overwritten if it already exists. If necessary, &quot;.nc&quot; will be added
to the file name</p>
</td></tr>
<tr><td><code id="bi_write_+3A_variables">variables</code></td>
<td>
<p>a <code>list</code> object, the names of which should be the
variable names and values should be either single values or data frames</p>
</td></tr>
<tr><td><code id="bi_write_+3A_append">append</code></td>
<td>
<p>if TRUE, will append variables if file exists; default: FALSE</p>
</td></tr>
<tr><td><code id="bi_write_+3A_overwrite">overwrite</code></td>
<td>
<p>if TRUE, will overwrite variables if file exists; default:
FALSE</p>
</td></tr>
<tr><td><code id="bi_write_+3A_time_dim">time_dim</code></td>
<td>
<p>the name of the time dimension, if one exists; default:
&quot;time&quot;</p>
</td></tr>
<tr><td><code id="bi_write_+3A_coord_dims">coord_dims</code></td>
<td>
<p>the names of the coordinate dimension, if any; should be a
named list of character vectors, they are matched to variables names</p>
</td></tr>
<tr><td><code id="bi_write_+3A_dim_factors">dim_factors</code></td>
<td>
<p>factors that dimensions have; this corresponds to the
<code>dims</code> element of a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="bi_write_+3A_value_column">value_column</code></td>
<td>
<p>if any <code>variables</code> are data frames, which column
contains the values (default: &quot;value&quot;)</p>
</td></tr>
<tr><td><code id="bi_write_+3A_guess_time">guess_time</code></td>
<td>
<p>whether to guess time dimension; this would be a numerical
column in the data frame given which is not the <code>value_column</code>; only
one such column must exist</p>
</td></tr>
<tr><td><code id="bi_write_+3A_verbose">verbose</code></td>
<td>
<p>if TRUE, will print variables as they are read</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list of variables must follow the following rules. Each element
of the list must itself be one of:
</p>
<p>1) a data frame with a <code>value_column</code> column (see option 'value_column')
and any number of other columns indicating one or more dimensions
</p>
<p>2) a numeric vector of length one, with no dimensions
</p>
<p>The name of the list elements itself is used to create the
corresponding variable in the NetCDF file.
</p>


<h3>Value</h3>

<p>A list of the time and coord dims, and factors in extra dimensions,
if any
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filename &lt;- tempfile(pattern = "dummy", fileext = ".nc")
a &lt;- 3
b &lt;- data.frame(
  dim_a = rep(1:3, time = 2), dim_b = rep(1:2, each = 3), value = 1:6
)
variables &lt;- list(a = a, b = b)
bi_write(filename, variables)
bi_file_summary(filename)
</code></pre>

<hr>
<h2 id='check_sparse_var'>Check if a variable is sparse</h2><span id='topic+check_sparse_var'></span>

<h3>Description</h3>

<p>Check if a variable is sparse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_sparse_var(x, coord_cols, value_column)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_sparse_var_+3A_x">x</code></td>
<td>
<p>data.table</p>
</td></tr>
<tr><td><code id="check_sparse_var_+3A_coord_cols">coord_cols</code></td>
<td>
<p>character vector of coordinate columns</p>
</td></tr>
<tr><td><code id="check_sparse_var_+3A_value_column">value_column</code></td>
<td>
<p>the name of the value column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Takes a data.table with given coordinate columns and a value column and
checks if all combinations of the coordinate columns are present for each
combination of the other columns.
</p>


<h3>Value</h3>

<p>TRUE if the variable is sparse, FALSE otherwise
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='clean_model'>Strip model code to its bare bones</h2><span id='topic+clean_model'></span>

<h3>Description</h3>

<p>Cleans the model by working out correct indents, removing long comments and
merging lines
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_model(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_model_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='create_coord_var'>Create a coordinate variable</h2><span id='topic+create_coord_var'></span>

<h3>Description</h3>

<p>Create a coordinate variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_coord_var(
  name,
  dims,
  dim_factors,
  coord_dim,
  index_table,
  ns_dim,
  time_dim,
  nr_column,
  value_column
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_coord_var_+3A_name">name</code></td>
<td>
<p>Name of the variable</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_dims">dims</code></td>
<td>
<p>Dimensions of all variables</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_dim_factors">dim_factors</code></td>
<td>
<p>Factors of all dimensions</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_coord_dim">coord_dim</code></td>
<td>
<p>Coordinate dimension</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_index_table">index_table</code></td>
<td>
<p>data.table with index columns</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_ns_dim">ns_dim</code></td>
<td>
<p>ns dimension</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_time_dim">time_dim</code></td>
<td>
<p>time dimension</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_nr_column">nr_column</code></td>
<td>
<p>nr column</p>
</td></tr>
<tr><td><code id="create_coord_var_+3A_value_column">value_column</code></td>
<td>
<p>value column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a coordinate variable with associated dimensions
</p>


<h3>Value</h3>

<p>a list with information on the coordinate variable
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='create_working_folder'>Internal function to create a temporary working folder</h2><span id='topic+create_working_folder'></span>

<h3>Description</h3>

<p>The folder will be removed when the object is destroyed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_working_folder(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_working_folder_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+libbi">libbi</a></code> object with updated working folder
</p>

<hr>
<h2 id='enable_outputs'>Enable outputting variables in a <code><a href="#topic+bi_model">bi_model</a></code></h2><span id='topic+enable_outputs'></span>

<h3>Description</h3>

<p>Any variable type given will have any 'has_output=0' option removed in the
given model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enable_outputs(x, type = "all")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="enable_outputs_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="enable_outputs_+3A_type">type</code></td>
<td>
<p>either &quot;all&quot; (default), or a vector of variable types that are to
have outputs enabled</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ[6] &lt;- "param mu (has_output=0)"
PZ &lt;- enable_outputs(PZ)
</code></pre>

<hr>
<h2 id='Equals.bi_model'>Check if two models are equal</h2><span id='topic+Equals.bi_model'></span><span id='topic++3D+3D.bi_model'></span><span id='topic++60+3D+3D.bi_model+60'></span>

<h3>Description</h3>

<p>Ignores differences in the model name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
e1 == e2, ...
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Equals.bi_model_+3A_e1">e1</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code></p>
</td></tr>
<tr><td><code id="Equals.bi_model_+3A_e2">e2</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code></p>
</td></tr>
<tr><td><code id="Equals.bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE, depending on whether the models are equal or not
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ == PZ # TRUE
</code></pre>

<hr>
<h2 id='Extract_assign.bi_model'>Subset and replace model lines</h2><span id='topic+Extract_assign.bi_model'></span><span id='topic++5B+3C-.bi_model'></span><span id='topic++60+5B+3C-.bi_model+60'></span>

<h3>Description</h3>

<p>Extracts a subset of lines from the model and assigns new character strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'bi_model'
x[i, ...] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract_assign.bi_model_+3A_x">x</code></td>
<td>
<p>A bi_model</p>
</td></tr>
<tr><td><code id="Extract_assign.bi_model_+3A_i">i</code></td>
<td>
<p>A vector of line numbers</p>
</td></tr>
<tr><td><code id="Extract_assign.bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="Extract_assign.bi_model_+3A_value">value</code></td>
<td>
<p>A vector of the same length as <code>i</code>, containing the
replacement strings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ[3:4] &lt;- c("const e = 0.4", "const m_l = 0.05")
</code></pre>

<hr>
<h2 id='extract_sample'>Extract a sample from a <code>LibBi</code> run.</h2><span id='topic+extract_sample'></span>

<h3>Description</h3>

<p>This function takes the provided <code><a href="#topic+libbi">libbi</a></code>
results and extracts a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_sample(x, np, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_sample_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object which has been run, or a
list of data frames containing parameter traces (as returned by
from <code>bi_read</code>)</p>
</td></tr>
<tr><td><code id="extract_sample_+3A_np">np</code></td>
<td>
<p>iteration to extract; if set to &quot;last&quot;, the last sample will be
extracted. If not given a random sample will be extracted</p>
</td></tr>
<tr><td><code id="extract_sample_+3A_...">...</code></td>
<td>
<p>parameters to <code>bi_read</code> (e.g., dimensions)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of data frames or numeric vectors containing parameters and
trajectories
</p>

<hr>
<h2 id='Extract.bi_model'>Subset model lines</h2><span id='topic+Extract.bi_model'></span><span id='topic++5B.bi_model'></span><span id='topic++60+5B.bi_model+60'></span>

<h3>Description</h3>

<p>Extracts a subset of lines from the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
x[i, ...]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract.bi_model_+3A_x">x</code></td>
<td>
<p>A bi_model</p>
</td></tr>
<tr><td><code id="Extract.bi_model_+3A_i">i</code></td>
<td>
<p>A vector of line numbers</p>
</td></tr>
<tr><td><code id="Extract.bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string of the extracted model lines(s)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ[3:4]
</code></pre>

<hr>
<h2 id='filter'>Using the LibBi wrapper to filter</h2><span id='topic+filter'></span><span id='topic+filter.libbi'></span><span id='topic+filter.bi_model'></span>

<h3>Description</h3>

<p>The method <code>filter</code> launches <code>libbi</code> to filter state trajectories.
See the options to <code><a href="#topic+run.libbi">run.libbi</a></code> for how to specify the various
components of sampling with LibBi, and the LibBi manual for all options
that can be passed when the client is <code>filter</code>.
</p>
<p>If <code>x</code> is given as a 'bi_model', a <code><a href="#topic+libbi">libbi</a></code> object will be
created from the model For the help page of the base R <code>filter</code>
function, see <code><a href="stats.html#topic+filter">filter</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
filter(x, ...)

## S3 method for class 'bi_model'
filter(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> or <code><a href="#topic+bi_model">bi_model</a></code> object, or the name
of a file containing the model</p>
</td></tr>
<tr><td><code id="filter_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='find_block'>Find a block in a LibBi model</h2><span id='topic+find_block'></span><span id='topic+find_block.bi_model'></span>

<h3>Description</h3>

<p>Finds a block and returns the range of line numbers encompassed by that
block.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
find_block(x, name, inner = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_block_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="find_block_+3A_name">name</code></td>
<td>
<p>of the block to find</p>
</td></tr>
<tr><td><code id="find_block_+3A_inner">inner</code></td>
<td>
<p>only return the inner part of the block (not the block
definition)</p>
</td></tr>
<tr><td><code id="find_block_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an integerr vector, the range of line numbers
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='fix'>Fix noise term, state or parameter of a libbi model</h2><span id='topic+fix'></span><span id='topic+fix.bi_model'></span>

<h3>Description</h3>

<p>Replaces all variables with fixed values as given ; note that this will not
replace differential equations and lead to an error if applied to states
that are changed inside an &quot;ode&quot; block
</p>
<p>For the help page of the base R <code>fix</code> function, see
<code><a href="utils.html#topic+fix">fix</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
fix(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fix_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="fix_+3A_...">...</code></td>
<td>
<p>values to be assigned to the (named) variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ &lt;- fix(PZ, alpha = 0)
</code></pre>

<hr>
<h2 id='flatten'>Flatten list of data frames
This function takes a list of data frames (such as, for example, returned by
<code><a href="#topic+bi_read">bi_read</a></code>) and converts it to a flat data frame</h2><span id='topic+flatten'></span>

<h3>Description</h3>

<p>Flatten list of data frames
This function takes a list of data frames (such as, for example, returned by
<code><a href="#topic+bi_read">bi_read</a></code>) and converts it to a flat data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flatten(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flatten_+3A_x">x</code></td>
<td>
<p>The list of data frames</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the flattened data
</p>

<hr>
<h2 id='generate_dataset'>Generate Dataset</h2><span id='topic+generate_dataset'></span>

<h3>Description</h3>

<p>This is a wrapper around <code>libbi sample --target joint
  --nsamples 1</code>, to generate a synthetic dataset from a model. Parameters can
be passed via the 'init' option (see <code><a href="#topic+run.libbi">run.libbi</a></code>, otherwise
they are generated from the prior specified in the model. The end time
should be specified using the &quot;end_time&quot; option. If this is not given, only
a parameter set is sampled. Use the 'noutputs' or 'output_every' options to
control the number of data points being generated. By default, output_every
is set to 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_dataset(..., output_every = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_dataset_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code><a href="#topic+sample.libbi">sample.libbi</a></code>, especially
'model', 'end_time' and 'seed'.</p>
</td></tr>
<tr><td><code id="generate_dataset_+3A_output_every">output_every</code></td>
<td>
<p>real; if given, <code>noutputs</code> will be set so that there
is output every <code>output_every</code> time steps; if set to 0, only generate
an output at the final time</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>libbi</code> object, the generated data set
</p>

<hr>
<h2 id='get_block'>Get the contents of a block in a LibBi model</h2><span id='topic+get_block'></span><span id='topic+get_block.bi_model'></span>

<h3>Description</h3>

<p>Returns the contents of a block in a LibBi model as a character vector of
lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
get_block(x, name, shell = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_block_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="get_block_+3A_name">name</code></td>
<td>
<p>name of the block</p>
</td></tr>
<tr><td><code id="get_block_+3A_shell">shell</code></td>
<td>
<p>if TRUE (default:FALSE), will return the shell (i.e., the
definition of the block) as well as content; this is useful, e.g., to see
options passed to a <code>transition</code> or <code>ode</code> block</p>
</td></tr>
<tr><td><code id="get_block_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of the lines in the block
</p>

<hr>
<h2 id='get_const'>Get constants in a LibBi model</h2><span id='topic+get_const'></span>

<h3>Description</h3>

<p>Get constants contained in a LibBi model and their values. This will attempt
to evaluate any calculation on the right hand side. Failing that, it will
be returned verbatim.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_const(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_const_+3A_model">model</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of constants (as names) and their values
</p>

<hr>
<h2 id='get_dims'>Get dimensions in a LibBi model</h2><span id='topic+get_dims'></span>

<h3>Description</h3>

<p>Get dimensions contained in a LibBi model and their sizes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dims(model, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dims_+3A_model">model</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="get_dims_+3A_type">type</code></td>
<td>
<p>a character vector of one or more types</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of dimensions (as names) and their sizes
</p>

<hr>
<h2 id='get_name'>Get the name of a bi model</h2><span id='topic+get_name'></span><span id='topic+get_name.bi_model'></span>

<h3>Description</h3>

<p>Extracts the name of a bi model (first line of the .bi file).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
get_name(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_name_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="get_name_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string, the name of the model
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
get_name(PZ)
</code></pre>

<hr>
<h2 id='get_traces'>Get the parameter traces</h2><span id='topic+get_traces'></span>

<h3>Description</h3>

<p>This function takes the provided <code><a href="#topic+libbi">libbi</a></code> object
which has been run and returns a data frame with the parameter
traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_traces(x, model, burnin, all = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_traces_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object which has been run, or a
list of data frames containing parameter traces (as returned by
<code>bi_read</code>); if it is not a <code><a href="#topic+libbi">libbi</a></code>
object, either 'all' must be TRUE or a model given</p>
</td></tr>
<tr><td><code id="get_traces_+3A_model">model</code></td>
<td>
<p>a model to get the parameter names from; not needed if
'run' is given as a <code><a href="#topic+libbi">libbi</a></code> object or 'all' is set
to TRUE</p>
</td></tr>
<tr><td><code id="get_traces_+3A_burnin">burnin</code></td>
<td>
<p>proportion of iterations to discard as burn-in (if between 0
and 1), or number of samples to discard (if &gt;1)</p>
</td></tr>
<tr><td><code id="get_traces_+3A_all">all</code></td>
<td>
<p>whether all variables in the run file should be
considered (otherwise, just parameters)</p>
</td></tr>
<tr><td><code id="get_traces_+3A_...">...</code></td>
<td>
<p>parameters to <code>bi_read</code> (e.g., dimensions)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ata frame with parameter traces; this can be fed to
<code>coda</code> routines
</p>

<hr>
<h2 id='insert_lines'>Insert lines in a LibBi model</h2><span id='topic+insert_lines'></span><span id='topic+insert_lines.bi_model'></span>

<h3>Description</h3>

<p>Inserts one or more lines into a libbi model. If one of <code>before</code> or
<code>after</code> is given, the line(s) will be inserted before or after a given
line number or block name, respectively. If one of <code>at_beginning of</code>
or <code>at_end_of</code> is given, the lines will be inserted at the
beginning/end of the block, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
insert_lines(x, lines, before, after, at_beginning_of, at_end_of, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="insert_lines_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_lines">lines</code></td>
<td>
<p>vector or line(s)</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_before">before</code></td>
<td>
<p>line number before which to insert line(s)</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_after">after</code></td>
<td>
<p>line number after which to insert line(s)</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_at_beginning_of">at_beginning_of</code></td>
<td>
<p>block at the beginning of which to insert lines(s)</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_at_end_of">at_end_of</code></td>
<td>
<p>block at the end of which to insert lines(s)</p>
</td></tr>
<tr><td><code id="insert_lines_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ &lt;- insert_lines(PZ, lines = "noise beta", after = 8)
</code></pre>

<hr>
<h2 id='installed_libbi_version'>Get the LibBi version</h2><span id='topic+installed_libbi_version'></span>

<h3>Description</h3>

<p>This tries to find the libbi executable to determine the installed version
of LibBi
</p>


<h3>Usage</h3>

<pre><code class='language-R'>installed_libbi_version(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="installed_libbi_version_+3A_...">...</code></td>
<td>
<p>any arguments for <code><a href="#topic+locate_libbi">locate_libbi</a></code> (esp.
<code>path_to_libbi</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string with the installed version
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='is_empty'>Check if a model is empty</h2><span id='topic+is_empty'></span>

<h3>Description</h3>

<p>Checks if a model is empty (i.e., has been initialised without any content)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_empty(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_empty_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE, depending on whether the model is empty
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='join'>Join multiple <code><a href="#topic+libbi">libbi</a></code> objects</h2><span id='topic+join'></span><span id='topic+join.libbi'></span>

<h3>Description</h3>

<p>This function can be used to join multiple <code><a href="#topic+libbi">libbi</a></code> objects into
one (e.g., parallel MCMC runs into one long change)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
join(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="join_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="join_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an joined <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='libbi'>LibBi Wrapper</h2><span id='topic+libbi'></span>

<h3>Description</h3>

<p><code>libbi</code> allows to call <code>LibBi</code>.
Upon creating a new libbi object, the following arguments can be given.
Once the instance is created, <code>LibBi</code> can be run through the
<code><a href="#topic+sample">sample</a></code>, <code><a href="#topic+filter">filter</a></code>, or
<code><a href="#topic+optimise">optimise</a></code>, or <code><a href="#topic+rewrite">rewrite</a></code> methods. Note that
<code><a href="#topic+libbi">libbi</a></code> objects can be plotted using <code><a href="graphics.html#topic+plot">plot</a></code> if the
<code>rbi.helpers</code> package is loaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>libbi(model, path_to_libbi, dims, use_cache = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="libbi_+3A_model">model</code></td>
<td>
<p>either a character vector giving the path to a model file
(typically ending in &quot;.bi&quot;), or a <code>bi_model</code> object</p>
</td></tr>
<tr><td><code id="libbi_+3A_path_to_libbi">path_to_libbi</code></td>
<td>
<p>path to <code>LibBi</code> binary; by default it tries to
locate the <code>libbi</code> binary using the <code>which</code> Unix command, after
having loaded &quot;~/.bashrc&quot; if present; if unsuccessful it tries
&quot;~/PathToBiBin/libbi&quot;; if unsuccessful again it fails.</p>
</td></tr>
<tr><td><code id="libbi_+3A_dims">dims</code></td>
<td>
<p>any named dimensions, as list of character vectors</p>
</td></tr>
<tr><td><code id="libbi_+3A_use_cache">use_cache</code></td>
<td>
<p>logical; whether to use the cache (default: true)</p>
</td></tr>
<tr><td><code id="libbi_+3A_...">...</code></td>
<td>
<p>options passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code><a href="#topic+libbi">libbi</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sample">sample</a></code>, <code><a href="#topic+filter">filter</a></code>, <code><a href="#topic+optimise">optimise</a></code>,
<code><a href="#topic+rewrite">rewrite</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bi_object &lt;- libbi(model = system.file(package = "rbi", "PZ.bi"))
</code></pre>

<hr>
<h2 id='locate_libbi'>Find the libbi executable</h2><span id='topic+locate_libbi'></span>

<h3>Description</h3>

<p>This tries to find the libbi executable; if this does not find libbi but it
is installed, the location can be either passed to this function, or set
globally via 'options(path_to_libbi=&quot;/insert/full/path/here&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>locate_libbi(path_to_libbi)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="locate_libbi_+3A_path_to_libbi">path_to_libbi</code></td>
<td>
<p>path to libbi, as either the path where the libbi
executable resides, or the full path to the executable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>full path to the libbi executable as character string; if it is not
found, an error is thrown
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='logLik'>Using the LibBi wrapper to logLik</h2><span id='topic+logLik'></span><span id='topic+logLik.libbi'></span>

<h3>Description</h3>

<p>The method <code>logLik</code> extracts the log-likelihood of a <code>libbi</code>
object. This can be done, for example, after a call to
<code><a href="#topic+sample">sample</a></code> to inspect the chain log-likelihoods.
</p>
<p>For the help page of the base R <code>logLik</code> function, see
<code><a href="stats.html#topic+logLik">logLik</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
logLik(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logLik_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="logLik_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of log-likelihood
</p>

<hr>
<h2 id='optimise'>Using the LibBi wrapper to optimise</h2><span id='topic+optimise'></span><span id='topic+optimise.libbi'></span><span id='topic+optimise.bi_model'></span>

<h3>Description</h3>

<p>The method <code>optimise</code> launches <code>libbi</code> to optimise the parameters
with respect to the likelihood or posterior distribution. See the options
to <code><a href="#topic+run.libbi">run.libbi</a></code> for how to specify the various components of
sampling with LibBi, and the LibBi manual for all options that can be
passed when the client is <code>optimise</code>.
</p>
<p>If <code>x</code> is given as a 'bi_model', a <code><a href="#topic+libbi">libbi</a></code> object will be
created from the model For the help page of the base R <code>optimise</code>
function, see <code><a href="stats.html#topic+optimise">optimise</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
optimise(x, ...)

## S3 method for class 'bi_model'
optimise(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimise_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> or <code>link{bi_model}</code> object, or the name
of a file containing the model</p>
</td></tr>
<tr><td><code id="optimise_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='option_list'>Convert string to option list</h2><span id='topic+option_list'></span>

<h3>Description</h3>

<p>This function is used to convert an option string into a list of options. If
a list is given, it will be kept as is
</p>


<h3>Usage</h3>

<pre><code class='language-R'>option_list(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="option_list_+3A_...">...</code></td>
<td>
<p>any number of strings to convert</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of options and values
</p>

<hr>
<h2 id='option_string'>Convert Options</h2><span id='topic+option_string'></span>

<h3>Description</h3>

<p>This function is used to convert a list of options into an options string. If
a string is given,  it will be taken as such.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>option_string(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="option_string_+3A_...">...</code></td>
<td>
<p>any number of lists of options, or strings (which will be left
unmodified). If lists are given, later arguments will override earlier ones</p>
</td></tr>
</table>

<hr>
<h2 id='predict'>Using the LibBi wrapper to predict</h2><span id='topic+predict'></span><span id='topic+predict.libbi'></span>

<h3>Description</h3>

<p>The method <code>predict</code> is an alias for <code>sample(target="prediction")</code>.
Usually, an <code>init</code> object or file should be given containing posterior
samples.
</p>
<p>For the help page of the base R <code>optimise</code> function, see
<code><a href="stats.html#topic+optimise">optimise</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
predict(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="predict_+3A_...">...</code></td>
<td>
<p>any arguments to be passed to <code><a href="#topic+sample">sample</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='print_log'>Print the log file a <code><a href="#topic+libbi">libbi</a></code> object</h2><span id='topic+print_log'></span>

<h3>Description</h3>

<p>This is useful for diagnosis after a <code><a href="#topic+libbi">libbi</a></code> run
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_log(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_log_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object, or the name of the log file of a
<code><a href="#topic+libbi">libbi</a></code> run.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing (invisible NULL)
</p>

<hr>
<h2 id='print.bi_model'>Print the lines of a LibBi model</h2><span id='topic+print.bi_model'></span><span id='topic+print'></span><span id='topic+print.libbi'></span>

<h3>Description</h3>

<p>Prints all lines in a LibBi model
</p>
<p>This prints the model name, basic information such as number of iterations
and timesteps run, as well as a list of variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
print(x, spaces = 2, screen = TRUE, ...)

## S3 method for class 'libbi'
print(x, verbose = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.bi_model_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="print.bi_model_+3A_spaces">spaces</code></td>
<td>
<p>number of spaces for indentation</p>
</td></tr>
<tr><td><code id="print.bi_model_+3A_screen">screen</code></td>
<td>
<p>whether to print to screen (default: TRUE). In that case, line
numbers will be added; otherwise, a character vector will be returned.</p>
</td></tr>
<tr><td><code id="print.bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="print.bi_model_+3A_verbose">verbose</code></td>
<td>
<p>logical; if TRUE, locations of files and working folder should
be printed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if <code>screen</code> is <code>FALSE</code>, a character vector of model lines
</p>
<p>nothing (invisible NULL)
</p>

<hr>
<h2 id='propose_prior'>Propose from the prior in a libbi model</h2><span id='topic+propose_prior'></span>

<h3>Description</h3>

<p>Generates a version of the model where the proposal blocks are replaced by
the prior blocks. This is useful for exploration of the likelihood surface.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>propose_prior(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="propose_prior_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='read_libbi'>Read results of a <code>LibBi</code> run from an RDS file or from a folder.
This completely reconstructs the saved <code>LibBi</code> object</h2><span id='topic+read_libbi'></span>

<h3>Description</h3>

<p>This reads all options, files and outputs of a <code>LibBi</code> run from a
specified RDS file or folder (if <code>split = TRUE</code> has been used with
<code>save_libbi</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_libbi(name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_libbi_+3A_name">name</code></td>
<td>
<p>name of the RDS file(s) to read</p>
</td></tr>
<tr><td><code id="read_libbi_+3A_...">...</code></td>
<td>
<p>any extra options to pass to <code><a href="#topic+libbi">libbi</a></code> when creating the
new object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='remove_lines'>Remove line(s) and/or block(s) in a libbi model</h2><span id='topic+remove_lines'></span><span id='topic+remove_lines.bi_model'></span>

<h3>Description</h3>

<p>Removes one or more lines in a libbi model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
remove_lines(
  x,
  what,
  only,
  type = c("all", "assignment", "sample"),
  preserve_shell = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_lines_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="remove_lines_+3A_what">what</code></td>
<td>
<p>either a vector of line number(s) to remove, or a vector of
blocks to remove (e.g., &quot;parameter&quot;)</p>
</td></tr>
<tr><td><code id="remove_lines_+3A_only">only</code></td>
<td>
<p>only remove lines assigning given names (as a vector of character
strings)</p>
</td></tr>
<tr><td><code id="remove_lines_+3A_type">type</code></td>
<td>
<p>which types of lines to remove, either &quot;all&quot;, &quot;sample&quot; (i.e.,
lines with a &quot;~&quot;) or &quot;assignment&quot; (lines with a &quot;&lt;-&quot; or &quot;=&quot;) (default:
&quot;all&quot;)</p>
</td></tr>
<tr><td><code id="remove_lines_+3A_preserve_shell">preserve_shell</code></td>
<td>
<p>if TRUE (default: FALSE), preserve the definition of a
block even if all lines are removed; this is useful to preserve options
passed to a <code>transition</code> or <code>ode</code> block</p>
</td></tr>
<tr><td><code id="remove_lines_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ &lt;- remove_lines(PZ, 2)
</code></pre>

<hr>
<h2 id='remove_vars'>Remove variables</h2><span id='topic+remove_vars'></span>

<h3>Description</h3>

<p>Removes variables from the left-hand side of a model
</p>
<p>Used by <code><a href="#topic+fix">fix</a></code> and <code><a href="#topic+to_input">to_input</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_vars(x, vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_vars_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="remove_vars_+3A_vars">vars</code></td>
<td>
<p>vector of variables to remove</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a bi model object of the new model
</p>
<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='replace_all'>Replace all instances of a string with another in a model</h2><span id='topic+replace_all'></span><span id='topic+replace_all.bi_model'></span>

<h3>Description</h3>

<p>Takes every occurrence of one string and replaces it with another
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
replace_all(x, from, to, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replace_all_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="replace_all_+3A_from">from</code></td>
<td>
<p>string to be replaced (a regular expression)</p>
</td></tr>
<tr><td><code id="replace_all_+3A_to">to</code></td>
<td>
<p>new string (which can refer to the regular expression given as
<code>from</code>)</p>
</td></tr>
<tr><td><code id="replace_all_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='rewrite'>Using the LibBi wrapper to rewrite</h2><span id='topic+rewrite'></span><span id='topic+rewrite.libbi'></span><span id='topic+rewrite.bi_model'></span>

<h3>Description</h3>

<p>The method <code>rewrite</code> launches <code>LibBi</code> to rewrite a model to inspect
its internal representation in <code>LibBi</code>
</p>
<p>If <code>x</code> is given as a 'bi_model', a <code><a href="#topic+libbi">libbi</a></code> object will be
created from the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
rewrite(x, ...)

## S3 method for class 'bi_model'
rewrite(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rewrite_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> or <code><a href="#topic+bi_model">bi_model</a></code> object, or the name
of a file containing the model</p>
</td></tr>
<tr><td><code id="rewrite_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a re-written <code><a href="#topic+bi_model">bi_model</a></code> object
</p>

<hr>
<h2 id='run'>Using the LibBi wrapper to launch LibBi</h2><span id='topic+run'></span><span id='topic+run.libbi'></span>

<h3>Description</h3>

<p>The method <code>run</code> launches <code>LibBi</code> with a particular set of command
line arguments. Normally, this function would not be run by the user,
but instead one of the client functions <code><a href="#topic+sample">sample</a></code>,
<code><a href="#topic+filter">filter</a></code>, or <code><a href="#topic+optimise">optimise</a></code>, or <code><a href="#topic+rewrite">rewrite</a></code>,
which pass any options on to <code>run</code>. Note that any options specified
here are stored in the <code><a href="#topic+libbi">libbi</a></code> object and do not have to be
specified again if another command is run on the object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
run(
  x,
  client,
  proposal = c("model", "prior"),
  model,
  fix,
  config,
  log_file_name = character(0),
  init,
  input,
  obs,
  time_dim = character(0),
  coord_dims = list(),
  thin,
  output_every,
  chain = TRUE,
  seed = TRUE,
  debug = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object; if this is not given, an empty
<code><a href="#topic+libbi">libbi</a></code> object will be created</p>
</td></tr>
<tr><td><code id="run_+3A_client">client</code></td>
<td>
<p>client to pass to LibBi</p>
</td></tr>
<tr><td><code id="run_+3A_proposal">proposal</code></td>
<td>
<p>proposal distribution to use; either &quot;model&quot; (default:
proposal distribution in the model) or &quot;prior&quot; (propose from the prior
distribution)</p>
</td></tr>
<tr><td><code id="run_+3A_model">model</code></td>
<td>
<p>either a character vector giving the path to a model file
(typically ending in &quot;.bi&quot;), or a <code>bi_model</code> object; by default, will
use any model given in <code>x</code></p>
</td></tr>
<tr><td><code id="run_+3A_fix">fix</code></td>
<td>
<p>any variable to fix, as a named vector</p>
</td></tr>
<tr><td><code id="run_+3A_config">config</code></td>
<td>
<p>path to a configuration file, containing multiple arguments</p>
</td></tr>
<tr><td><code id="run_+3A_log_file_name">log_file_name</code></td>
<td>
<p>path to a file to text file to report the output of
<code>LibBi</code>; if set to an empty vector (<code>character(0)</code>) or an empty
string (&quot;&quot;), which is the default, a temporary log file will be generated</p>
</td></tr>
<tr><td><code id="run_+3A_init">init</code></td>
<td>
<p>initialisation of the model, either supplied as a list of values
and/or data frames, or a (netcdf) file name, or a <code><a href="#topic+libbi">libbi</a></code>
object which has been run (in which case the output of that run is used).
If the object given as <code>x</code> has been run before, it will be used here
with <code>init-np</code> set to the last iteration of the previous run, unless
<code>init</code> is given explicitly.</p>
</td></tr>
<tr><td><code id="run_+3A_input">input</code></td>
<td>
<p>input of the model, either supplied as a list of values and/or
data frames, or a (netcdf) file name, or a <code><a href="#topic+libbi">libbi</a></code> object which
has been run (in which case the output of that run is used as input)</p>
</td></tr>
<tr><td><code id="run_+3A_obs">obs</code></td>
<td>
<p>observations of the model, either supplied as a list of values
and/or data frames, or a (netcdf) file name, or a <code><a href="#topic+libbi">libbi</a></code>
object which has been run (in which case the output of that run is used as
observations)</p>
</td></tr>
<tr><td><code id="run_+3A_time_dim">time_dim</code></td>
<td>
<p>The time dimension in any R objects that have been passed
(<code>init</code>, <code>input</code>) and <code>obs</code>); if NULL (default), will be
guessed from the given observation</p>
</td></tr>
<tr><td><code id="run_+3A_coord_dims">coord_dims</code></td>
<td>
<p>The coord dimension(s) in any <code>obs</code> R objects that
have been passed; if NULL (default), will be guessed from the given
observation file given</p>
</td></tr>
<tr><td><code id="run_+3A_thin">thin</code></td>
<td>
<p>any thinning of MCMC chains (1 means all will be kept, 2 skips
every other sample etc.); note that <code>LibBi</code> itself will write all data
to the disk. Only when the results are read in with <code><a href="#topic+bi_read">bi_read</a></code>
will thinning be applied.</p>
</td></tr>
<tr><td><code id="run_+3A_output_every">output_every</code></td>
<td>
<p>real; if given, <code>noutputs</code> will be set so that there
is output every <code>output_every</code> time steps; if set to 0, only generate
an output at the final time</p>
</td></tr>
<tr><td><code id="run_+3A_chain">chain</code></td>
<td>
<p>logical; if set to TRUE and <code>x</code> has been run before, the
previous output file will be used as <code>init</code> file, and <code>init-np</code>
will be set to the last iteration of the previous run (unless
target==&quot;prediction&quot;). This is useful for running inference chains.</p>
</td></tr>
<tr><td><code id="run_+3A_seed">seed</code></td>
<td>
<p>Either a number (the seed to supply to <code>LibBi</code>), or a
logical variable: TRUE if a seed is to be generated for <code>RBi</code>, FALSE
if <code>LibBi</code> is to generate its own seed</p>
</td></tr>
<tr><td><code id="run_+3A_debug">debug</code></td>
<td>
<p>logical; if TRUE, print more verbose messages and write all
variables to the output file, irrespective of their setting of 'has_output'</p>
</td></tr>
<tr><td><code id="run_+3A_...">...</code></td>
<td>
<p>list of additional arguments to pass to the call to <code>LibBi</code>.
Any arguments starting with 'enable'/'disable' can be specified as boolean
(e.g., 'assert=TRUE' or 'cuda=TRUE'). Any 'dry-' options can be specified
with a '&quot;dry&quot;' argument, e.g., 'dry=&quot;parse&quot;'. Any options that would be
specified with 'with'/'without' can be specified as character vector to an
option named 'with'/'without', respectively, e.g.
with=&quot;transform-obs-to-state&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object, except if <code>client</code> is
'rewrite', in which case invisible NULL will be returned but the rewritten
model code printed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libbi">libbi</a></code>
</p>

<hr>
<h2 id='sample'>Using the LibBi wrapper to sample</h2><span id='topic+sample'></span><span id='topic+sample.libbi'></span><span id='topic+sample.bi_model'></span>

<h3>Description</h3>

<p>The method <code>sample</code> launches <code>libbi</code> to sample from a (prior,
posterior or joint) distribution. See the options to
<code><a href="#topic+run.libbi">run.libbi</a></code> for how to specify the various components of
sampling with LibBi, and the LibBi manual for all options that can be
passed when the client is <code>sample</code>.
</p>
<p>If <code>x</code> is given as a 'bi_model', a <code><a href="#topic+libbi">libbi</a></code> object will be
created from the model For the help page of the base R <code>sample</code>
function, see <code><a href="base.html#topic+sample">sample</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
sample(x, ...)

## S3 method for class 'bi_model'
sample(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> or <code><a href="#topic+bi_model">bi_model</a></code> object, or the name
of a file containing the model</p>
</td></tr>
<tr><td><code id="sample_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+libbi">libbi</a></code> object
</p>

<hr>
<h2 id='sample_obs'>Sample observations from a LibBi model that has been run</h2><span id='topic+sample_obs'></span>

<h3>Description</h3>

<p>Sample observations from a LibBi model that has been run
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_obs(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample_obs_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="sample_obs_+3A_...">...</code></td>
<td>
<p>any options to pass to LibBi</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the original <code><a href="#topic+libbi">libbi</a></code> object with added variables in the
output file for sampled observations
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='save_libbi'>Write results of a <code>LibBi</code> run to an RDS file</h2><span id='topic+save_libbi'></span><span id='topic+save_libbi.libbi'></span>

<h3>Description</h3>

<p>This saves all options, files and outputs of a <code>LibBi</code> run to an RDS
file specified
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
save_libbi(x, name, supplement, split = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_libbi_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="save_libbi_+3A_name">name</code></td>
<td>
<p>name of the RDS file(s) to save to. If <code>split=TRUE</code>, this
will be taken as a base for the names of the files to be created, e.g.
'dir/name.rds' to create files of the form name_....rds in directory 'dir'.</p>
</td></tr>
<tr><td><code id="save_libbi_+3A_supplement">supplement</code></td>
<td>
<p>any supplementary data to save</p>
</td></tr>
<tr><td><code id="save_libbi_+3A_split">split</code></td>
<td>
<p>Logical, defaults to <code>FALSE</code>. Should the objects from the
<code>LibBi</code> run be saved separately in a folder.</p>
</td></tr>
<tr><td><code id="save_libbi_+3A_...">...</code></td>
<td>
<p>any options to <code><a href="base.html#topic+saveRDS">saveRDS</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>the return value of <code>saveRDS</code>, i.e. NULL invisibly
</p>

<hr>
<h2 id='set_name'>Set the name of a bi model</h2><span id='topic+set_name'></span><span id='topic+set_name.bi_model'></span>

<h3>Description</h3>

<p>Changes the name of a bi model (first line of the .bi file) to the specified
name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
set_name(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_name_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="set_name_+3A_name">name</code></td>
<td>
<p>Name of the model</p>
</td></tr>
<tr><td><code id="set_name_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ &lt;- set_name(PZ, "new_PZ")
</code></pre>

<hr>
<h2 id='simulate'>Using the LibBi wrapper to simulate</h2><span id='topic+simulate'></span><span id='topic+simulate.libbi'></span><span id='topic+simulate.bi_model'></span>

<h3>Description</h3>

<p>The method <code>simulate</code> launches <code>LibBi</code> to simulate a model by
passing 'target=&quot;joint&quot;' to <code>LibBi</code>
</p>
<p>If <code>x</code> is given as a 'bi_model', a <code><a href="#topic+libbi">libbi</a></code> object will be
created from the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
simulate(x, ...)

## S3 method for class 'bi_model'
simulate(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> or <code><a href="#topic+bi_model">bi_model</a></code> object, or the name
of a file containing the model</p>
</td></tr>
<tr><td><code id="simulate_+3A_...">...</code></td>
<td>
<p>options to be passed to <code><a href="#topic+run.libbi">run.libbi</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an updated <code><a href="#topic+bi_model">bi_model</a></code> object
</p>

<hr>
<h2 id='summary'>Print summary information about a <code><a href="#topic+libbi">libbi</a></code> object</h2><span id='topic+summary'></span><span id='topic+summary.libbi'></span>

<h3>Description</h3>

<p>This reads in the output file of the <code><a href="#topic+libbi">libbi</a></code> object (which has
been run before) and prints summary information of parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
summary(
  object,
  type = c("param", "state", "noise", "obs"),
  quantiles = c(0.25, 0.75),
  na.rm = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="summary_+3A_type">type</code></td>
<td>
<p>one of &quot;param&quot; (default), &quot;state&quot;, &quot;noise&quot; or &quot;obs&quot;, the variable
type to summarise</p>
</td></tr>
<tr><td><code id="summary_+3A_quantiles">quantiles</code></td>
<td>
<p>quantiles to calculate (default: quartiles); minimum,
median, mean and maximum are always calculated</p>
</td></tr>
<tr><td><code id="summary_+3A_na.rm">na.rm</code></td>
<td>
<p>logical; if true, any <code>na</code> and <code>NaN</code>'s are removed
before calculations are performed</p>
</td></tr>
<tr><td><code id="summary_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing (invisible NULL)
</p>

<hr>
<h2 id='to_input'>Convert variables into inputs</h2><span id='topic+to_input'></span>

<h3>Description</h3>

<p>Used for predictions, if one doesn't want to re-simulate state/noise
trajectories
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_input(x, vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_input_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="to_input_+3A_vars">vars</code></td>
<td>
<p>vector of variables to convert to inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the updated <code>bi_model</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>

<hr>
<h2 id='Unequals.bi_model'>Check if two models are unequal</h2><span id='topic+Unequals.bi_model'></span><span id='topic++21+3D.bi_model'></span><span id='topic++60+21+3D.bi_model+60'></span>

<h3>Description</h3>

<p>Ignores differences in the model name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
e1 != e2, ...
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Unequals.bi_model_+3A_e1">e1</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code></p>
</td></tr>
<tr><td><code id="Unequals.bi_model_+3A_e2">e2</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code></p>
</td></tr>
<tr><td><code id="Unequals.bi_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE, depending on whether the models are equal or not
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
PZ != PZ # FALSE
</code></pre>

<hr>
<h2 id='update'>Update a libbi object</h2><span id='topic+update'></span><span id='topic+update.libbi'></span>

<h3>Description</h3>

<p>This updates all the time stamps in a libbi object; it is useful after
(input, output, etc.) files have been changed outside the object itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'libbi'
update(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+libbi">libbi</a></code> object</p>
</td></tr>
<tr><td><code id="update_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+libbi">libbi</a></code> object with updated timestamps
</p>

<hr>
<h2 id='var_names'>Get variable names in a LibBi model</h2><span id='topic+var_names'></span>

<h3>Description</h3>

<p>Get variable names of one or more type(s)
</p>
<p>This returns all variable names of a certain type (&quot;param&quot;, &quot;state&quot;, &quot;obs&quot;,
&quot;noise&quot;, &quot;const&quot;) contained in the model of a <code><a href="#topic+libbi">libbi</a></code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_names(x, vars, type, dim = FALSE, opt = FALSE, aux = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="var_names_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object</p>
</td></tr>
<tr><td><code id="var_names_+3A_vars">vars</code></td>
<td>
<p>a character vector of variable names; if given, only these
variables names will be considered</p>
</td></tr>
<tr><td><code id="var_names_+3A_type">type</code></td>
<td>
<p>a character vector of one or more types</p>
</td></tr>
<tr><td><code id="var_names_+3A_dim">dim</code></td>
<td>
<p>logical; if set to TRUE, names will contain dimensions in brackets</p>
</td></tr>
<tr><td><code id="var_names_+3A_opt">opt</code></td>
<td>
<p>logical; if set to TRUE, names will contain options (e.g.,
has_output)</p>
</td></tr>
<tr><td><code id="var_names_+3A_aux">aux</code></td>
<td>
<p>logical; if set to TRUE, auxiliary names will be returned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector ofvariable names
</p>

<hr>
<h2 id='write_model'>Writes a bi model to a file.</h2><span id='topic+write_model'></span><span id='topic+write_model.bi_model'></span><span id='topic+write_model.libbi'></span>

<h3>Description</h3>

<p>Writes a bi model to a file given by <code>filename</code>. The extension '.bi'
will be added if necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bi_model'
write_model(x, filename, update.name = TRUE, ...)

## S3 method for class 'libbi'
write_model(x, filename, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_model_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+bi_model">bi_model</a></code> object, or a <code><a href="#topic+libbi">libbi</a></code> object
containing a model</p>
</td></tr>
<tr><td><code id="write_model_+3A_filename">filename</code></td>
<td>
<p>name of the file to be written</p>
</td></tr>
<tr><td><code id="write_model_+3A_update.name">update.name</code></td>
<td>
<p>whether to update the model name with the file name</p>
</td></tr>
<tr><td><code id="write_model_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the return value of the <code><a href="base.html#topic+writeLines">writeLines</a></code> call.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bi_model">bi_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_file_name &lt;- system.file(package = "rbi", "PZ.bi")
PZ &lt;- bi_model(filename = model_file_name)
new_file_name &lt;- tempfile("PZ", fileext = ".bi")
write_model(PZ, new_file_name)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
