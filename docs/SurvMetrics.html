<!DOCTYPE html><html><head><title>Help for package SurvMetrics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SurvMetrics}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Brier'><p>The Brier Score</p></a></li>
<li><a href='#Cindex'><p>The Concordance Index for Right-Censored Survival Time Data</p></a></li>
<li><a href='#CindexCR'><p>Concordance index in the Presence of Competing Risks</p></a></li>
<li><a href='#Gt'><p>The Kaplan-Meier Estimate of the Censoring Distribution</p></a></li>
<li><a href='#IAEISE'><p>The Integrate Absolute Error and The Integrate Square Error</p></a></li>
<li><a href='#IBS'><p>The Integration of the Brier Score</p></a></li>
<li><a href='#MAE'><p>The Mean Absolute Error</p></a></li>
<li><a href='#predictSurvProb2survreg'><p>Predicting Survival Probabilities for a 'survreg' Object</p></a></li>
<li><a href='#SDGM1'><p>Survival Data Generation Method 1</p></a></li>
<li><a href='#SDGM2'><p>Survival Data Generation Method 2</p></a></li>
<li><a href='#SDGM3'><p>Survival Data Generation Method 3</p></a></li>
<li><a href='#SDGM4'><p>Survival Data Generation Method 4</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Predictive Evaluation Metrics in Survival Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-09-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Hanpu Zhou [aut, cre],
  Xuewei Cheng [aut],
  Sizheng Wang [aut],
  Yi Zou [aut],
  Hong Wang [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hanpu Zhou &lt;zhouhanpu@csu.edu.cn&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of popular evaluation metrics that are commonly used in survival prediction 
  including Concordance Index, Brier Score, Integrated Brier Score, 
  Integrated Square Error, Integrated Absolute Error and Mean Absolute Error.
  For a detailed information, see (Ishwaran H, Kogalur UB, Blackstone EH and Lauer MS (2008) &lt;<a href="https://doi.org/10.1214%2F08-AOAS169">doi:10.1214/08-AOAS169</a>&gt;) and
  (Moradian H, Larocque D and Bellavance F (2017) &lt;<a href="https://doi.org/10.1007%2Fs10985-016-9372-1">doi:10.1007/s10985-016-9372-1</a>&gt;) for different evaluation metrics.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>false</td>
</tr>
<tr>
<td>Imports:</td>
<td>survminer, stats, survival, MASS, pec, randomForestSRC</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, caret, ggplot2, ggpubr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/skyee1/SurvMetrics">https://github.com/skyee1/SurvMetrics</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/skyee1/SurvMetrics/issues">https://github.com/skyee1/SurvMetrics/issues</a></td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-03 15:37:12 UTC; Lenovo-yi</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-03 21:40:23 UTC</td>
</tr>
</table>
<hr>
<h2 id='Brier'>The Brier Score</h2><span id='topic+Brier'></span>

<h3>Description</h3>

<p>The Brier Score was proposed by Glenn W. Brier in 1950 which is a proper score function that measures the accuracy of probabilistic predictions, usually used to measure the accuracy of a model fit for survival data.
Brier can calculate the value of Brier Score at any timepoint,
regardless of whether it is the event time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Brier(object, pre_sp, t_star = -1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Brier_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function
or a fitted survival model, including the survival model
fitted by <code>coxph</code>, <code>survreg</code>, and <code>rfsrc</code>.</p>
</td></tr>
<tr><td><code id="Brier_+3A_pre_sp">pre_sp</code></td>
<td>
<p>If the input of the parameter <code>object</code> is a fitted survival model,
this parameter should be a survival dataset on which
you want to caculate the Brier Score of the fitted model.
Or with an object of class <code>Surv</code> as the parameter <code>object</code>,
it should be a vector of predicted values of survival probabilities
of each observation in testing set at time t_star.</p>
</td></tr>
<tr><td><code id="Brier_+3A_t_star">t_star</code></td>
<td>
<p>the timepoint at which the Brier Score you want to calculate.
If the input of the parameter <code>object</code> is a fitted survival model, the timepoint is necessary to be specified
at which the survival probability is predicted,
and this function will calculate the Brier Score at that moment.
If the input object is a survival object, this parameter can be ignored
and the value of this parameter will not have any effect on the result of this fuction.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Brier Score is the mean square difference between the true classes and the predicted probabilities. So the Brier Score can be thought of as a cost function.
Therefore, the lower the Brier Score is for a set of predictions, the better the predictions are calibrated.
The Brier Score takes on a value between zero and one, since this is the square of the largest possible difference between a predicted probability and the actual outcome.
As we all know, for the cencoring samples, we do not know the real time of death, so the residual cannot be directly calculated when making the prediction.
So the Brier Score is widely used in survival analysis.
</p>
<p>The Brier Score is a strictly proper score (Gneiting and Raftery, 2007), which means that it takes its minimal value only when the predicted probabilities match the empirical probabilities.
</p>
<p>Judging from the sparse empirical evidence, predictions of duration of survival tend to be rather inaccurate. More precision is achieved by using patient-specific survival probabilities and the Brier score as predictions to discriminate future survivors from failures.
</p>


<h3>Value</h3>

<p>the Brier Score at time t_star between the true classes and the predicted probabilities.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Graf, Erika, Schmoor, Claudia, Sauerbrei, &amp; Willi, et al. (1999). Assessment and comparison of prognostic classification schemes for survival data. Statist. Med., 18(1718), 2529-2545.
</p>
<p>Brier, G. W. (1950). Verification of forecasts expressed in terms of probability. Monthly Weather Review, 78.
</p>
<p>Gneiting, T. , &amp;  Raftery, A. E. . (2007). Strictly Proper Scoring Rules, Prediction, and Estimation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
time &lt;- rexp(50)
status &lt;- sample(c(0, 1), 50, replace = TRUE)
pre_sp &lt;- runif(50)
t_star &lt;- runif(1)
Brier(Surv(time, status), pre_sp, t_star)

</code></pre>

<hr>
<h2 id='Cindex'>The Concordance Index for Right-Censored Survival Time Data</h2><span id='topic+Cindex'></span>

<h3>Description</h3>

<p>Concordance index is a rank correlation measures between a variable X and a possibly
censored variable Y, with event/censoring indicator. In survival analysis, a pair of patients is called concordant if the risk of
the event predicted by a model is lower for the patient who experiences the
event at a later timepoint. The concordance probability (C-index) is the
frequency of concordant pairs among all pairs of subjects. It can be used to
measure and compare the discriminative power of a risk prediction models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Cindex(object, predicted, t_star = -1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Cindex_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function
or a fitted survival model, including the survival model
fitted by <code>coxph</code>, <code>survreg</code>, and <code>rfsrc</code>.</p>
</td></tr>
<tr><td><code id="Cindex_+3A_predicted">predicted</code></td>
<td>
<p>If the input of the parameter <code>object</code> is a fitted survival model,
this parameter should be a survival dataset on which you want to caculate the C-index of the fitted model.
Or with an object of class <code>Surv</code> as the parameter <code>object</code>,
it should be a vector containing the predicted survival time or probability of each observation.</p>
</td></tr>
<tr><td><code id="Cindex_+3A_t_star">t_star</code></td>
<td>
<p>the timepoint at which the C-index you want to calculate.
If the input of the parameter <code>object</code> is a fitted survival model, the timepoint is necessary to be specified
at which the survival probability is predicted,
and this function will calculate the C-index between the survival time and the predicted result at that moment.
If the input object is a survival object, this parameter can be ignored
and the value of this parameter will not have any effect on the result of this fuction.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pairs with identical observed times, where one is uncensored and one is
censored, are always considered usuable (independent of the value of
<code>tiedOutcomeIn</code>), as it can be assumed that the event occurs at a later
timepoint for the censored observation.
</p>
<p>For uncensored response the result equals the one obtained with the
functions <code>rcorr.cens</code> and <code>rcorrcens</code> from the <code>Hmisc</code>
package (see examples).
</p>


<h3>Value</h3>

<p>Estimates of the C-index between the survival time and the predicted result.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Ishwaran, H. ,  Kogalur, U. B. ,  Blackstone, E. H. , &amp;  Lauer, M. S. . (2008). Random survival forests. Journal of Thoracic Oncology Official Publication of the International Association for the Study of Lung Cancer, 2(12), 841-860.
</p>
<p>Kang, L. ,  Chen, W. ,  Petrick, N. A. , &amp;  Gallas, B. D. . (2015). Comparing two correlated c indices with right-censored survival outcome: a one-shot nonparametric approach. Statistics in Medicine, 34(4).
</p>
<p>TA Gerds, MW Kattan, M Schumacher, and C Yu. Estimating a time-dependent
concordance index for survival prediction models with covariate dependent
censoring. Statistics in Medicine, Ahead of print:to appear, 2013. DOI =
10.1002/sim.5681
</p>
<p>Wolbers, M and Koller, MT and Witteman, JCM and Gerds, TA (2013) Concordance
for prognostic models with competing risks Research report 13/3. Department
of Biostatistics, University of Copenhagen
</p>
<p>Andersen, PK (2012) A note on the decomposition of number of life years lost
according to causes of death Research report 12/2. Department of
Biostatistics, University of Copenhagen
</p>
<p>Paul Blanche, Michael W Kattan, and Thomas A Gerds. The c-index is not
proper for the evaluation of-year predicted risks. Biostatistics, 20(2):
347&ndash;357, 2018.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
time &lt;- c(1, 1, 2, 2, 2, 2, 2, 2)
status &lt;- c(0, 1, 1, 0, 1, 1, 0, 1)
predicted &lt;- c(2, 3, 3, 3, 4, 2, 4, 3)
Cindex(Surv(time, status), predicted)

</code></pre>

<hr>
<h2 id='CindexCR'>Concordance index in the Presence of Competing Risks</h2><span id='topic+CindexCR'></span>

<h3>Description</h3>

<p>The C-index (Concordance index) of the prognostic model in the presence of competing risks according to Marcel, W et al.(2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CindexCR(time, status, predicted, Cause_int = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CindexCR_+3A_time">time</code></td>
<td>
<p>minimum value of deletion time and survival time.</p>
</td></tr>
<tr><td><code id="CindexCR_+3A_status">status</code></td>
<td>
<p>the status indicator, for models with competing risks, the status indicator is 0=censored, 1=event at <code>time</code>, 2= competing risks at <code>time</code>.</p>
</td></tr>
<tr><td><code id="CindexCR_+3A_predicted">predicted</code></td>
<td>
<p>a vector of predicted values or the survival time of survival probabilities of each observation.</p>
</td></tr>
<tr><td><code id="CindexCR_+3A_cause_int">Cause_int</code></td>
<td>
<p>event type of interest, the default value is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Estimates of the C-index in the presence of competing risks.
</p>


<h3>Author(s)</h3>

<p>HanPu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Marcel, W. ,  Paul, B. ,  Koller, M. T. ,  Witteman, J. , &amp;  Gerds, T. A. . (2014).Concordance for prognostic models with competing risks. Biostatistics(3), 526.
</p>
<p>Ishwaran, H. ,  Kogalur, U. B. ,  Blackstone, E. H. , &amp;  Lauer, M. S. . (2008). Random survival forests. Journal of Thoracic Oncology Official Publication of the International Association for the Study of Lung Cancer, 2(12), 841-860.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>time &lt;- c(4, 7, 5, 8)
status &lt;- rep(1, 4)
predicted &lt;- c(3, 5, 7, 10)
Cause_int &lt;- 1
CindexCR(time, status, predicted, Cause_int)

</code></pre>

<hr>
<h2 id='Gt'>The Kaplan-Meier Estimate of the Censoring Distribution</h2><span id='topic+Gt'></span>

<h3>Description</h3>

<p>G(t)=P(C&gt;t) denote the Kaplan-Meier estimate of the censoring distribution which is used to adjust for censoring.
Gt is used to calculate G(t) at any timepoint you want.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Gt(object, timepoint)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Gt_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function.</p>
</td></tr>
<tr><td><code id="Gt_+3A_timepoint">timepoint</code></td>
<td>
<p>any point in time you want to get the Kaplan–Meier estimate of the censoring.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The Kaplan–Meier estimate of the censoring distribution and the value of G(t) is between 0 and 1.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Graf, Erika, Schmoor, Claudia, Sauerbrei, &amp; Willi, et al. (1999). Assessment and comparison of prognostic classification schemes for survival data. Statist. Med., 18(1718), 2529-2545.
</p>
<p>Kaplan, E. L. , &amp;  Meier, P. . (1958). Nonparametric estimation from incomplete observations. Journal of the American Statistical Association, 53, 457-481.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
time &lt;- rexp(50)
status &lt;- sample(c(0, 1), 50, replace = TRUE)
pre_sp &lt;- runif(50)
timepoint &lt;- runif(1)
Gt(Surv(time, status), timepoint)

</code></pre>

<hr>
<h2 id='IAEISE'>The Integrate Absolute Error and The Integrate Square Error</h2><span id='topic+IAEISE'></span>

<h3>Description</h3>

<p>Two ways of the continuous-time approach to continuous-time identification based on least-squares and least-absolute errors are proposed.
Integrate Absolute Error and Integrate Square Error.To evaluate the performance of survival models methods
Lower values of IAE or ISE indicate better performances.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IAEISE(object, sp_matrix, IRange = c(-2, -1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IAEISE_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function
or a fitted survival model, including the survival model
fitted by <code>coxph</code>, <code>survreg</code>, and <code>rfsrc</code>.</p>
</td></tr>
<tr><td><code id="IAEISE_+3A_sp_matrix">sp_matrix</code></td>
<td>
<p>a matrix or data.frame of predicted values of survival probabilities for the testing set.
rows denote different samples, columns denote different time points,
and the values in row i and column j of the matrix denote the predicted survival probability
of the ith sample at the time point corresponding to the jth column.</p>
</td></tr>
<tr><td><code id="IAEISE_+3A_irange">IRange</code></td>
<td>
<p>a vector contains all discrete time points corresponding to the predicted probability in sp_matrix.
Or the scale you want to get the IAE and ISE;  .</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Estimates of the Integrate Absolute Error and the Integrate Square Error of the predicted values of survival probabilities.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Marron, J. S. , &amp;  Wand, M. P. . (1992). Exact mean integrated squared error. Annals of Statistics, 20(2), 712-736.
</p>
<p>HooraMoradian, DenisLarocque, &amp; FranoisBellavance. (2017). L1 splitting rules in survival forests. Lifetime Data Analysis, 23(4), 671–691.
</p>
<p>Kowalczuk, &amp; Z. (1998). Integrated squared error and integrated absolute error in recursive identification of continuous-time plants. Control 98 Ukacc International Conference on (Vol.1998, pp.693-698). IET.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survival)
library(SurvMetrics)
set.seed(123)
N &lt;- 100
mydata &lt;- SDGM4(N, p = 20, c_step = -0.5)
index.train &lt;- sample(1:N, 2 / 3 * N)
data.train &lt;- mydata[index.train, ]
data.test &lt;- mydata[-index.train, ]

time_interest &lt;- sort(data.train$time[data.train$status == 1])
sp_matrix &lt;- matrix(sort(runif(nrow(data.test) * length(time_interest)),
  decreasing = TRUE
), nrow = nrow(data.test))
object &lt;- Surv(data.test$time, data.test$status)

# a vector for all the distinct time
IAEISE(object, sp_matrix, time_interest)
# a range
IAEISE(object, sp_matrix, c(12, 350))

</code></pre>

<hr>
<h2 id='IBS'>The Integration of the Brier Score</h2><span id='topic+IBS'></span>

<h3>Description</h3>

<p>IBS is  an integrated version of the Brier which is used to calculate the integration of the Brier Score.
The Brier Score is the mean square difference between the true classes and the predicted probabilities.
Basically, the IBS is an integrated
weighted squared distance between the estimated survival function and the empirical
survival function. The inverse probability censoring weighting(IPCW) is used to adjust for censoring.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IBS(object, sp_matrix, IBSrange = c(-2, -1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IBS_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function
or a fitted survival model, including the survival model
fitted by <code>coxph</code>, <code>survreg</code>, and <code>rfsrc</code>.</p>
</td></tr>
<tr><td><code id="IBS_+3A_sp_matrix">sp_matrix</code></td>
<td>
<p>a matrix or data.frame of predicted values of survival probabilities for the testing set.
Rows denote different samples, columns denote different time points,
and the values in entry (i,j) of the matrix denote the predicted survival probability
of the ith sample at the time point corresponding to the jth column.</p>
</td></tr>
<tr><td><code id="IBS_+3A_ibsrange">IBSrange</code></td>
<td>
<p>a vector contains all discrete time points corresponding to the predicted probability in sp_matrix.
Or the scale you want to get the IBS; and if it is a single point the return value will be the Brier Score at the timepoint.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The percentage of censored observations increases in time, and this will surely affect the dispersion of the empirical Brier Score.
The question of how censoring in finite samples acts on the distribution of our measures of inaccuracy is an interesting subject.
Our recommendation is to choose t* in a way that censoring is not too heavy (for example, the median follow-up time).
We also prefer measures with integrated loss functions since they will reflect inaccuracy over an interval rather than just at one point in time.
In addition, the corresponding empirical measures are likely to have lower dispersion, because censored observations contribute their estimated event-free probabilities to the integrand until the censoring occurs.
</p>


<h3>Value</h3>

<p>The integration of the Brier score of the predicted values of survival probabilities
on the discrete time points or the time scale of interest to users.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>HooraMoradian, DenisLarocque, &amp; FranoisBellavance. (2017). \(l_1\) splitting rules in survival forests. Lifetime Data Analysis, 23(4), 671–691.
</p>
<p>Graf, Erika, Schmoor, Claudia, Sauerbrei, &amp; Willi, et al. (1999). Assessment and comparison of prognostic classification schemes for survival data. Statist. Med., 18(1718), 2529-2545.
</p>
<p>Brier, G. W. . (1950). Verification of forecasts expressed in terms of probability. Monthly Weather Review, 78.
</p>
<p>Gneiting, T. , &amp;  Raftery, A. E. . (2007). Strictly Proper Scoring Rules, Prediction, and Estimation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
library(SurvMetrics)
set.seed(123)
N &lt;- 100
mydata &lt;- SDGM4(N, p = 20, c_step = -0.5)
index.train &lt;- sample(1:N, 2 / 3 * N)
data.train &lt;- mydata[index.train, ]
data.test &lt;- mydata[-index.train, ]

time_interest &lt;- sort(data.train$time[data.train$status == 1])
sp_matrix &lt;- matrix(sort(runif(nrow(data.test) * length(time_interest)),
  decreasing = TRUE
), nrow = nrow(data.test))
object &lt;- Surv(data.test$time, data.test$status)

# the default time points
IBS(object, sp_matrix, time_interest)
# a time range
IBS(object, sp_matrix, c(18:100))

</code></pre>

<hr>
<h2 id='MAE'>The Mean Absolute Error</h2><span id='topic+MAE'></span>

<h3>Description</h3>

<p>A somewhat naive criterion that is sometimes used consists of simply omitting all censored cases from the data set.
For survival analysis problems, the mean absolute error (MAE) can be defined as an average of the differences between the predicted time values and the actual observation time values.
Only the samples for which the event occurs are being considered in this metric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MAE(object, pre_time)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MAE_+3A_object">object</code></td>
<td>
<p>object of class <code>Surv</code> created by Surv function.</p>
</td></tr>
<tr><td><code id="MAE_+3A_pre_time">pre_time</code></td>
<td>
<p>a vector of predicted values of survival time of each observation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Condition: MAE can only be used for the evaluation of survival models which can provide the event time as the predicted target value.
</p>


<h3>Value</h3>

<p>the value of the Mean Absolute Error between the survival time and the predicted result.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Matsuo, K. ,  Purushotham, S. ,  Jiang, B. ,  Mandelbaum, R. S. ,  Takiuchi, T. , &amp;  Liu, Y. , et al. (2018). Survival outcome prediction in cervical cancer: cox models vs deep-learning model. American Journal of Obstetrics &amp; Gynecology.
Coyle, E. J. , &amp;  Lin, J. H. . (1988). Stack filters and the mean absolute error criterion. IEEE Trans Acoustics Speech Signal Processing, 36(8), 1244-1254.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
time &lt;- rexp(50)
status &lt;- sample(c(0, 1), 50, replace = TRUE)
pre_time &lt;- rexp(50)
MAE(Surv(time, status), pre_time)

</code></pre>

<hr>
<h2 id='predictSurvProb2survreg'>Predicting Survival Probabilities for a 'survreg' Object</h2><span id='topic+predictSurvProb2survreg'></span>

<h3>Description</h3>

<p>Function to extract survival probability predictions from <code>survreg</code> modeling approach.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictSurvProb2survreg(object, newdata, time_days)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predictSurvProb2survreg_+3A_object">object</code></td>
<td>
<p>A model fitted by <code>survreg</code> from which to extract predicted survival probabilities</p>
</td></tr>
<tr><td><code id="predictSurvProb2survreg_+3A_newdata">newdata</code></td>
<td>
<p>A data frame containing predictor variable combinations
for which to compute predicted survival probabilities.</p>
</td></tr>
<tr><td><code id="predictSurvProb2survreg_+3A_time_days">time_days</code></td>
<td>
<p>A vector of times in the range of the response variable,
We.g. times when the response is a survival object, at which to return the survival probabilities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix with as many rows as NROW(newdata) and as many columns as length(time_days).
Each entry should be a probability and in rows the values should be decreasing.
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
set.seed(1234)
mydata &lt;- kidney[, -1]
train_index &lt;- sample(1:nrow(mydata), 0.7 * nrow(mydata))
train_data &lt;- mydata[train_index, ]
test_data &lt;- mydata[-train_index, ]
survregfit &lt;- survreg(Surv(time, status) ~ ., dist = 'weibull', data = train_data)
pre_sb &lt;- predictSurvProb2survreg(survregfit, test_data, c(10, 20))

</code></pre>

<hr>
<h2 id='SDGM1'>Survival Data Generation Method 1</h2><span id='topic+SDGM1'></span>

<h3>Description</h3>

<p>Survival data generation method. An example of the proportional hazards model where in the Cox model is expected to perform best.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDGM1(N = 200, p = 15, c_mean = 0.4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDGM1_+3A_n">N</code></td>
<td>
<p>The sample size of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM1_+3A_p">p</code></td>
<td>
<p>The covariate dimension of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM1_+3A_c_mean">c_mean</code></td>
<td>
<p>The parameter which is used to control the censoring rate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the simulated dataset
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Steingrimsson, J. A. ,  Diao, L. , &amp;  Strawderman, R. L. . (2019). Censoring unbiased regression trees and ensembles. Journal of the American Statistical Association, 114.
</p>
<p>Zhu, R. , &amp;  Kosorok, M. R. . (2012). Recursively imputed survival trees. Journal of the American Statistical Association, 107(497), 331-340.
</p>
<p>Ishwaran, H. ,  Kogalur, U. B. ,  Gorodeski, E. Z. ,  Minn, A. J. , &amp;  Lauer, M. S. . (2010). High-dimensional variable selection for survival data. Journal of the American Statistical Association, 105(489), 205-217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>SDGM1(N = 200, p = 15, c_mean = 0.4)

</code></pre>

<hr>
<h2 id='SDGM2'>Survival Data Generation Method 2</h2><span id='topic+SDGM2'></span>

<h3>Description</h3>

<p>Survival data generation method. The dataset represents mild violations of the proportional hazards assumption.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDGM2(N = 200, p = 15, u_max = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDGM2_+3A_n">N</code></td>
<td>
<p>The sample size of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM2_+3A_p">p</code></td>
<td>
<p>The covariate dimension of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM2_+3A_u_max">u_max</code></td>
<td>
<p>The parameter which is used to control the censoring rate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the simulated dataset
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Steingrimsson, J. A. ,  Diao, L. , &amp;  Strawderman, R. L. . (2019). Censoring unbiased regression trees and ensembles. Journal of the American Statistical Association, 114.
</p>
<p>Zhu, R. , &amp;  Kosorok, M. R. . (2012). Recursively imputed survival trees. Journal of the American Statistical Association, 107(497), 331-340.
</p>
<p>Ishwaran, H. ,  Kogalur, U. B. ,  Gorodeski, E. Z. ,  Minn, A. J. , &amp;  Lauer, M. S. . (2010). High-dimensional variable selection for survival data. Journal of the American Statistical Association, 105(489), 205-217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>SDGM2(N = 200, p = 15, u_max = 4)

</code></pre>

<hr>
<h2 id='SDGM3'>Survival Data Generation Method 3</h2><span id='topic+SDGM3'></span>

<h3>Description</h3>

<p>Survival data generation method. The proportional hazards assumption is strongly violated in this dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDGM3(N = 200, p = 15, u_max = 7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDGM3_+3A_n">N</code></td>
<td>
<p>The sample size of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM3_+3A_p">p</code></td>
<td>
<p>The covariate dimension of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM3_+3A_u_max">u_max</code></td>
<td>
<p>The parameter which is used to control the censoring rate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the simulated dataset
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Steingrimsson, J. A. ,  Diao, L. , &amp;  Strawderman, R. L. . (2019). Censoring unbiased regression trees and ensembles. Journal of the American Statistical Association, 114.
</p>
<p>Zhu, R. , &amp;  Kosorok, M. R. . (2012). Recursively imputed survival trees. Journal of the American Statistical Association, 107(497), 331-340.
</p>
<p>Ishwaran, H. ,  Kogalur, U. B. ,  Gorodeski, E. Z. ,  Minn, A. J. , &amp;  Lauer, M. S. . (2010). High-dimensional variable selection for survival data. Journal of the American Statistical Association, 105(489), 205-217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>SDGM3(N = 200, p = 15, u_max = 7)

</code></pre>

<hr>
<h2 id='SDGM4'>Survival Data Generation Method 4</h2><span id='topic+SDGM4'></span>

<h3>Description</h3>

<p>Survival data generation method. An example of the proportional hazards model where in the Cox model is expected to perform best.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDGM4(N = 200, p = 15, c_step = 0.4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDGM4_+3A_n">N</code></td>
<td>
<p>The sample size of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM4_+3A_p">p</code></td>
<td>
<p>The covariate dimension of the simulated dataset.</p>
</td></tr>
<tr><td><code id="SDGM4_+3A_c_step">c_step</code></td>
<td>
<p>The parameter which is used to control the censoring rate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the simulated dataset
</p>


<h3>Author(s)</h3>

<p>Hanpu Zhou <a href="mailto:zhouhanpu@csu.edu.cn">zhouhanpu@csu.edu.cn</a>
</p>


<h3>References</h3>

<p>Steingrimsson, J. A. , Diao, L. , &amp;  Strawderman, R. L. . (2019). Censoring unbiased regression trees and ensembles. Journal of the American Statistical Association, 114.
</p>
<p>Zhu, R. , &amp;  Kosorok, M. R. . (2012). Recursively imputed survival trees. Journal of the American Statistical Association, 107(497), 331-340.
</p>
<p>Ishwaran, H., Kogalur, U. B., Gorodeski, E.Z., Minn, A.J., &amp; Lauer, M. S. . (2010). High-dimensional variable selection for survival data. Journal of the American Statistical Association, 105(489), 205-217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>SDGM4(N = 200, p = 15, c_step = 0.4)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
