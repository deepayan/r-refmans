<!DOCTYPE html><html><head><title>Help for package plumbertableau</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {plumbertableau}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#arg_spec'><p>Describe expected args and return values</p></a></li>
<li><a href='#check_route'><p>Checks a Plumber route for Tableau compliance</p></a></li>
<li><a href='#mock_tableau_request'><p>Create a mock JSON request that mimics the request structure of Tableau</p></a></li>
<li><a href='#plumbertableau-package'><p>plumbertableau: Turn 'Plumber' APIs into 'Tableau' Extensions</p></a></li>
<li><a href='#tableau_extension'><p>Modify a Plumber router to function as a Tableau Analytics Extension</p></a></li>
<li><a href='#tableau_handler'><p>Create a Tableau-compliant handler for a function</p></a></li>
<li><a href='#tableau_invoke'><p>Programatically invoke a Tableau extension function</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Turn 'Plumber' APIs into 'Tableau' Extensions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Build 'Plumber' APIs that can be used in 'Tableau' workbooks.
    Annotations in R comments allow APIs to conform to the 'Tableau Analytics
    Extension' specification, so that R code can be used to power 'Tableau'
    workbooks.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rstudio.github.io/plumbertableau/">https://rstudio.github.io/plumbertableau/</a>,
<a href="https://github.com/rstudio/plumbertableau">https://github.com/rstudio/plumbertableau</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/plumbertableau/issues">https://github.com/rstudio/plumbertableau/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>plumber (&ge; 1.1.0), magrittr, curl, httpuv, jsonlite, later,
promises, rlang, htmltools, debugme, stringi, markdown,
urltools, utils, httr, knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), rmarkdown, covr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-15 18:32:07 UTC; yihui</td>
</tr>
<tr>
<td>Author:</td>
<td>James Blair [aut, cre],
  Joe Cheng [aut],
  Toph Allen [aut],
  Bill Sager [aut],
  RStudio [cph, fnd],
  Tableau [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>James Blair &lt;james@rstudio.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-19 02:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='arg_spec'>Describe expected args and return values</h2><span id='topic+arg_spec'></span><span id='topic+return_spec'></span>

<h3>Description</h3>

<p><code>arg_spec()</code> and <code>return_spec()</code> are used to create arguments for
<code><a href="#topic+tableau_handler">tableau_handler()</a></code>. They describe the data type of the arg or return value,
and can return a human-readable description that can be used to generate
documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arg_spec(
  type = c("character", "integer", "logical", "numeric"),
  desc = "",
  optional = grepl("\\?$", type)
)

return_spec(type = c("character", "integer", "logical", "numeric"), desc = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="arg_spec_+3A_type">type</code></td>
<td>
<p>A string indicating the data type that is required for this
argument.</p>
</td></tr>
<tr><td><code id="arg_spec_+3A_desc">desc</code></td>
<td>
<p>A human-readable description of the argument. Used to generate
documentation.</p>
</td></tr>
<tr><td><code id="arg_spec_+3A_optional">optional</code></td>
<td>
<p>If <code>TRUE</code>, then this argument need not be present in a
request. Defaults to <code>TRUE</code> if <code>type</code> ends with a <code>"?"</code> character.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tableau_arg_spec</code> object, which is a list containing details about
the Tableau argument expectations
</p>
<p>A <code>tableau_return_spec</code> object, which is a list containing details
about the values expected to be returned to Tableau
</p>

<hr>
<h2 id='check_route'>Checks a Plumber route for Tableau compliance</h2><span id='topic+check_route'></span>

<h3>Description</h3>

<p>Checks a route to ensure that it accepts POST requests and uses the default JSON parser and serializer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_route(route)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_route_+3A_route">route</code></td>
<td>
<p>A plumber route</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Provides warnings based on features of <code>route</code>
</p>

<hr>
<h2 id='mock_tableau_request'>Create a mock JSON request that mimics the request structure of Tableau</h2><span id='topic+mock_tableau_request'></span>

<h3>Description</h3>

<p><code>mock_tableau_request()</code> creates a JSON object formatted like a request from
Tableau. The JSON object it returns can be pasted directly into the &quot;Try it
out&quot; field in the Swagger documentation for an endpoint to test its
functionality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mock_tableau_request(script, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mock_tableau_request_+3A_script">script</code></td>
<td>
<p>String indicating the path to the endpoint to be called</p>
</td></tr>
<tr><td><code id="mock_tableau_request_+3A_data">data</code></td>
<td>
<p>A list or dataframe that is serialized to JSON</p>
</td></tr>
<tr><td><code id="mock_tableau_request_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>jsonlite::toJSON()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Behind the scenes, Tableau sends all requests to the <code style="white-space: pre;">&#8288;/evaluate&#8288;</code> endpoint.
Each request is a JSON object containing two items: <code>script</code> and <code>data</code>.
plumbertableau uses <code>script</code> to specify an individual endpoint to call, and
passes the arguments in <code>data</code> on to the function at that endpoint.
</p>


<h3>Value</h3>

<p>A JSON object that can be passed to a Tableau endpoint
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mock_tableau_request("/loess/predict", mtcars[,c("hp", "mpg")])

</code></pre>

<hr>
<h2 id='plumbertableau-package'>plumbertableau: Turn 'Plumber' APIs into 'Tableau' Extensions</h2><span id='topic+plumbertableau'></span><span id='topic+plumbertableau-package'></span>

<h3>Description</h3>

<p>Build 'Plumber' APIs that can be used in 'Tableau' workbooks.
Annotations in R comments allow APIs to conform to the 'Tableau Analytics
Extension' specification, so that R code can be used to power 'Tableau'
workbooks.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: James Blair <a href="mailto:james@rstudio.com">james@rstudio.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Joe Cheng <a href="mailto:joe@rstudio.com">joe@rstudio.com</a>
</p>
</li>
<li><p> Toph Allen <a href="mailto:toph@rstudio.com">toph@rstudio.com</a>
</p>
</li>
<li><p> Bill Sager <a href="mailto:bill.sager@rstudio.com">bill.sager@rstudio.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> RStudio [copyright holder, funder]
</p>
</li>
<li><p> Tableau [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rstudio.github.io/plumbertableau/">https://rstudio.github.io/plumbertableau/</a>
</p>
</li>
<li> <p><a href="https://github.com/rstudio/plumbertableau">https://github.com/rstudio/plumbertableau</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/plumbertableau/issues">https://github.com/rstudio/plumbertableau/issues</a>
</p>
</li></ul>


<hr>
<h2 id='tableau_extension'>Modify a Plumber router to function as a Tableau Analytics Extension</h2><span id='topic+tableau_extension'></span>

<h3>Description</h3>

<p>Most of the time, you won't call this function directly. Instead, you'll
place it at the end of a Plumber router, under a <code style="white-space: pre;">&#8288;#* @plumber&#8288;</code> annotation,
with no trailing parentheses or arguments. This tells Plumber to use the
function to modify the router object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableau_extension

tableau_extension(pr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableau_extension_+3A_pr">pr</code></td>
<td>
<p>A plumber router</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A modified plumber router that functions as a Tableau Analytics
Extension
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(plumber)
library(plumbertableau)

#* Capitalize incoming text
#* @post /capitalize
function(req, res) {
  dat &lt;- req$body$data
  toupper(dat)
}

#* @plumber
tableau_extension

## End(Not run)

</code></pre>

<hr>
<h2 id='tableau_handler'>Create a Tableau-compliant handler for a function</h2><span id='topic+tableau_handler'></span>

<h3>Description</h3>

<p>Creates an object that can translate arguments from Tableau to R, and return
values from R to Tableau.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableau_handler(args, return, func)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableau_handler_+3A_args">args</code></td>
<td>
<p>A named list describing the arguments that are expected from
valid Tableau requests. The names in the named list can be any unique
variable names. The values in the named list must each be either a string
indicating the expected data type for that argument (<code>"character"</code>,
<code>"logical"</code>, <code>"numeric"</code>, or <code>"integer"</code>); or better yet, a specification
object created by <code><a href="#topic+arg_spec">arg_spec()</a></code>. If an argument should be considered
optional, then its data type should be followed by <code style="white-space: pre;">&#8288;?&#8288;</code>, like <code>"numeric?"</code>.</p>
</td></tr>
<tr><td><code id="tableau_handler_+3A_return">return</code></td>
<td>
<p>A string indicating the data type that will be returned from
<code>func</code> (<code>"character"</code>, <code>"logical"</code>, <code>"numeric"</code>, or <code>"integer"</code>); or, a
specification object created by <code><a href="#topic+return_spec">return_spec()</a></code>.</p>
</td></tr>
<tr><td><code id="tableau_handler_+3A_func">func</code></td>
<td>
<p>A function to be used as the handler function. Code in the body
of the function will automatically be able to access Tableau request args
simply by referring to their names in <code>args</code>; see the example below.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tableau_handler</code> object that is a validated version of the
provided <code>func</code> with additional attributes describing the expected arguments
and return values
</p>

<hr>
<h2 id='tableau_invoke'>Programatically invoke a Tableau extension function</h2><span id='topic+tableau_invoke'></span>

<h3>Description</h3>

<p>Simulates invoking a Tableau extension function from a Tableau calculated
field <code style="white-space: pre;">&#8288;SCRIPT_*&#8288;</code> call. Intended for unit testing of plumbertableau extensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableau_invoke(pr, script, ..., .toJSON_args = NULL, .quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableau_invoke_+3A_pr">pr</code></td>
<td>
<p>Either a <a href="#topic+tableau_extension">tableau_extension</a> style Plumber router object, or, the
filename of a plumber.R that implements a Tableau extension.</p>
</td></tr>
<tr><td><code id="tableau_invoke_+3A_script">script</code></td>
<td>
<p>The script string that identifies the plumber route to invoke.
(Equivalent to the first argument to <code>SCRIPT_STR</code>, et al., in Tableau.) URL
query parameters are allowed.</p>
</td></tr>
<tr><td><code id="tableau_invoke_+3A_...">...</code></td>
<td>
<p>Zero or more unnamed arguments to be passed to the script.</p>
</td></tr>
<tr><td><code id="tableau_invoke_+3A_.tojson_args">.toJSON_args</code></td>
<td>
<p>Additional options that should be passed to
<code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code> when the <code>...</code> arguments are serialized; for example,
<code>pretty = TRUE</code> or <code>digits = 8</code>.</p>
</td></tr>
<tr><td><code id="tableau_invoke_+3A_.quiet">.quiet</code></td>
<td>
<p>If <code>TRUE</code>, do not print response bodies when errors occur.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The object that was returned from the request, JSON-decoded using
<code>jsonlite::parse_json</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pr_path &lt;- system.file("plumber/stringutils/plumber.R",
  package = "plumbertableau")

tableau_invoke(pr_path, "/lowercase", LETTERS[1:5])

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
