<!DOCTYPE html><html lang="en"><head><title>Help for package maskr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {maskr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#maskr-package'><p>maskr: Visual Class for Vectors with Non-Publishing Requirements</p></a></li>
<li><a href='#format.maskr_masked'><p>Display and write masked vectors</p></a></li>
<li><a href='#masked'><p>Create a masked atomic vector</p></a></li>
<li><a href='#maskr-imports'><p>Imports from other packages</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Visual Class for Vectors with Non-Publishing Requirements</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Create vectors with sticky flags for elements that should not be
    displayed. Numeric vectors have basic subset and arithmetic methods
    implemented.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, pillar, rlang, vctrs (&ge; 0.6.5)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, fansi, testthat (&ge; 3.0.0), tidyr, withr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/inpowell/maskr">https://github.com/inpowell/maskr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/inpowell/maskr/issues">https://github.com/inpowell/maskr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-17 23:28:03 UTC; ianpowell</td>
</tr>
<tr>
<td>Author:</td>
<td>Ian Powell [cre, aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ian Powell &lt;powell.ian.n@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-08-23 08:50:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='maskr-package'>maskr: Visual Class for Vectors with Non-Publishing Requirements</h2><span id='topic+maskr'></span><span id='topic+maskr-package'></span>

<h3>Description</h3>

<p>Create vectors with sticky flags for elements that should not be displayed. Numeric vectors have basic subset and arithmetic methods implemented.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ian Powell <a href="mailto:powell.ian.n@gmail.com">powell.ian.n@gmail.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/inpowell/maskr">https://github.com/inpowell/maskr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/inpowell/maskr/issues">https://github.com/inpowell/maskr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='format.maskr_masked'>Display and write masked vectors</h2><span id='topic+format.maskr_masked'></span><span id='topic+as.character.maskr_masked'></span>

<h3>Description</h3>

<p>Masked vectors generally cannot be converted to other types without
<a href="#topic+unmask">unmask</a>ing them. However, they can be written as character vectors (losing
the underlying masked data) for printing to the console, and saving to files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'maskr_masked'
format(x, ..., rep = getOption("maskr.replacement", "n.p."))

## S3 method for class 'maskr_masked'
as.character(x, ..., rep = getOption("maskr.replacement", "n.p."))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.maskr_masked_+3A_x">x</code></td>
<td>
<p>A masked vector.</p>
</td></tr>
<tr><td><code id="format.maskr_masked_+3A_...">...</code></td>
<td>
<p>For <code>format()</code>, passed to other format methods. For
<code>as.character()</code>, ignored.</p>
</td></tr>
<tr><td><code id="format.maskr_masked_+3A_rep">rep</code></td>
<td>
<p>A single character value that defines a string to show instead of
the underlying value for data that is masked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with masked values replaced by <code>rep</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>abc &lt;- masked(letters, letters %in% c('a', 'e', 'i', 'o', 'u'))
# Prints with default n.p. label - uses format() under the hood
print(abc)

# Format as string with * instead of n.p.
format(abc, rep = '*')
print(abc, rep = '*') # Also works with print()

as.character(abc) # Similar to format(), but without alignment

# Dispatches format to underlying data
nums &lt;- masked(
  c(1:12, NA, NA, 15:26),
  rep_len(c(FALSE, FALSE, FALSE, TRUE, FALSE), 26L)
)
print(nums)
print(nums, rep = '*') # Automatically right-aligned for numeric types

# as.character() useful for saving tables without revealing data
alphanum &lt;- data.frame(alpha = abc, num = nums)
write.csv(head(alphanum))
</code></pre>

<hr>
<h2 id='masked'>Create a masked atomic vector</h2><span id='topic+masked'></span><span id='topic+unmask'></span><span id='topic+unmask+3C-'></span><span id='topic+mask'></span><span id='topic+mask+3C-'></span>

<h3>Description</h3>

<p>Masked vectors contain a base R data type that can be used in calculations,
but is not revealed by default on the console or when converted to a
character. This can be useful for preventing publication of small cells, such
as in official statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>masked(data = numeric(), mask = logical())

unmask(masked)

unmask(masked) &lt;- value

mask(masked)

mask(masked) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="masked_+3A_data">data</code></td>
<td>
<p>An atomic vector to mask values from. Lists and data frames are
not supported.</p>
</td></tr>
<tr><td><code id="masked_+3A_mask">mask</code></td>
<td>
<p>A logical vector that indicates which values of <code>data</code> to mask.</p>
</td></tr>
<tr><td><code id="masked_+3A_masked">masked</code></td>
<td>
<p>A masked vector to extract fields from.</p>
</td></tr>
<tr><td><code id="masked_+3A_value">value</code></td>
<td>
<p>A replacement vector for unmasked data, or the mask flags.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A masked vector.
</p>


<h3>Pretty printing and conversion to character</h3>

<p>Masked vectors have pretty printing that replaces masked values of a vector
with <code>n.p.</code> in the console (customisable with <code>options(maskr.replacement = ...)</code>).
</p>
<p>Converting a masked vector to character results in masked vectors being
replaced with <code>n.p.</code>, or its alternative in
<code>getOption('maskr.replacement')</code>.
</p>
<p>Masked vectors cannot be converted to their raw types, to prevent
accidental release of data. Instead, use <code><a href="#topic+unmask">unmask()</a></code> to explicitly unmask a
vector.
</p>


<h3>Arithmetic and unary mathematical functions</h3>

<p>Elementwise arithmetic operators have been implemented in masked vectors.
The resulting data will be as if performing the operation on the unmasked
vectors. Mask flags are sticky; the result of any operation involving a
masked value will also be masked.
</p>
<p>Most <a href="base.html#topic+Math">Math</a> and <a href="base.html#topic+Summary">Summary</a> group generics have been implemented. These first
force the underlying data to double type (or logical for <code>any()</code> and
<code>all()</code>). Results from summary functions will be masked if any input is
masked, while elementwise operations will preserve the mask from their
input. Cumulative functions (<code>cumsum()</code>, <code>cummean()</code> and friends) are not
implemented.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Mask vowels in the alphabet
masked(letters, letters %in% c('a', 'e', 'i', 'o', 'u'))

# Mask doubles...
sepals &lt;- head(masked(iris$Sepal.Length, iris$Sepal.Length &gt; 5))
sepals
# ...and get back the underlying values
unmask(sepals)

# Use a different mask character
op &lt;- options(maskr.replacement = '*')
sepals
options(op)

# Mask integers in a vector strictly between 0 and 5
x &lt;- 0:8
xm &lt;- masked(x, 0L &lt; x &amp; x &lt; 5L)

# Arithmetic with unmasked values does not change mask:
xm / xm[8] * 100
2 ^ xm
# But arithmetic with a masked value will mask outputs:
xm + xm[3]
xm - rev(xm)

# The mean will be masked, because at least one if its inputs is masked
mean(xm)
unmask(mean(xm))

# Other mathematical functions will keep the same mask
log1p(xm)
unmask(log1p(xm))
</code></pre>

<hr>
<h2 id='maskr-imports'>Imports from other packages</h2><span id='topic+maskr-imports'></span>

<h3>Description</h3>

<p>Imports from other packages
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
