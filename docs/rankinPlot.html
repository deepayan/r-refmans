<!DOCTYPE html><html><head><title>Help for package rankinPlot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rankinPlot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#alteplase'><p>Effect of time to treatment on efficacy of rt-PA in treating acute stroke</p></a></li>
<li><a href='#grottaBar'><p>grottaBar</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Convenient Plotting for the Modified Rankin Scale and Other
Ordinal Outcome Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hannah Johns &lt;htjohns@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides convenient tools for visualising ordinal outcome data following the "Grotta Bar" approach pioneered by The National Institute of Neurological Disorders and Stroke rt-PA Stroke Study Group (1995) &lt;<a href="https://doi.org/10.1056%2FNEJM199512143332401">doi:10.1056/NEJM199512143332401</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2.0)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 3.3), scales (&ge; 1.2)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>viridis</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-30 03:58:58 UTC; htjoh</td>
</tr>
<tr>
<td>Author:</td>
<td>Hannah Johns <a href="https://orcid.org/0000-0003-2135-0504"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-30 08:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='alteplase'>Effect of time to treatment on efficacy of rt-PA in treating acute stroke</h2><span id='topic+alteplase'></span>

<h3>Description</h3>

<p>A dataset reconstructing reported outcomes after stroke
as reported in Lees et. al. (2010) which pooled the results
of several studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alteplase
</code></pre>


<h3>Format</h3>

<p>A data frame with 3669 rows and 3 variables:
</p>

<dl>
<dt>time</dt><dd><p>Time interval (minutes) between stroke onset and treatment</p>
</dd>
<dt>treat</dt><dd><p>Type of treatment received</p>
</dd>
<dt>mRS</dt><dd><p>Outcome at 3 months measured using the modified Rankin Scale</p>
</dd>
</dl>



<h3>References</h3>

<p>Lees, K. R., Bluhmki, E., Von Kummer, R., Brott, T. G.,
Toni, D., Grotta, J. C.,  Albers, G. W., Kaste, M., Marler, J. R.,
Hamilton, S. A., Tilley, B. C., Davis, S. M., Donnan, G. A., Hacke, W.
(2010).
Time to treatment with intravenous alteplase and outcome in stroke:
an updated pooled analysis of ECASS, ATLANTIS, NINDS, and EPITHET trials.
<em>The Lancet</em>, 375(9727), 1695-1703.
</p>

<hr>
<h2 id='grottaBar'>grottaBar</h2><span id='topic+grottaBar'></span>

<h3>Description</h3>

<p>Automates the production of a Grotta Bar using <code>ggplot()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grottaBar(x,groupName,scoreName,strataName = NULL,
          colorScheme="lowGreen",
          printNumbers = "count",
          nCol = 1, dir = "v",
          width = 0.9,
          textSize = 15, numberSize = 5,
          textFace = "plain",
          textColor = "black", textCut = 0,
          lineSize = 0.5,
          returnData = FALSE,
          ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grottaBar_+3A_x">x</code></td>
<td>
<p>a 2- or 3- dimensional table, returned by the table() function</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_groupname">groupName</code></td>
<td>
<p>a character string giving the name of the group varialble</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_scorename">scoreName</code></td>
<td>
<p>a character string giving outcome (mRS) labels</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_strataname">strataName</code></td>
<td>
<p>a character string giving the strata variable name</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_colorscheme">colorScheme</code></td>
<td>
<p>a character string indicating the colors that should be used by the plot</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_printnumbers">printNumbers</code></td>
<td>
<p>a character string indicating if numbers should be printed for each category.</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_ncol">nCol</code></td>
<td>
<p>an integer indicating the number of columns to use for displaying stratified results. Has no effect if no stratification is used.</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_dir">dir</code></td>
<td>
<p>a character indicating if stratified results should be laid out vertically (<code>"v"</code>) or horizontally <code>"h"</code>.</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_width">width</code></td>
<td>
<p>a number adjusting the width of the lines between bars</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_textsize">textSize</code></td>
<td>
<p>a number indicating the size of text labels</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_numbersize">numberSize</code></td>
<td>
<p>a number indicating the size of printed numbers</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_textface">textFace</code></td>
<td>
<p>a character string indicating font face of printed numbers. Can be &quot;plain&quot;, &quot;bold&quot;, &quot;italic&quot; or &quot;bold.italic&quot;.</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_textcolor">textColor</code></td>
<td>
<p>vector of two colors for text labels</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_textcut">textCut</code></td>
<td>
<p>Controls when the color of the text changes. The first <code>textCut</code> categories will use the first color</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_linesize">lineSize</code></td>
<td>
<p>a number indicating the thickness of lines in the plot</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_returndata">returnData</code></td>
<td>
<p>a boolean indicating if the data used to create the plot should be returned. For expert users only.</p>
</td></tr>
<tr><td><code id="grottaBar_+3A_...">...</code></td>
<td>
<p>additional arguments. Ignored except for <code>colourScheme</code> and <code>textColour</code> which will override their counterpart arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This tool produces a &quot;Grotta&quot; bar chart based on a table of count data.
A Grotta bar chart is a common data visualisation tool in stroke research, and is in essence a horizontally stacked proportional bar
chart showing the distribution of ordinal outcome data (typically the modified Rankin Scale) across groups, with lines drawn connecting
categories across groups.
</p>
<p>The tool provides three default options for <code>colorScheme</code>:
</p>

<ul>
<li><p><code>"lowGreen"</code> A &quot;traffic light&quot; gradient from green to red, where low scores are colored green
</p>
</li>
<li><p><code>"lowRed"</code> A &quot;traffic light&quot; gradient from red to green, where low scores are colored red
</p>
</li>
<li><p><code>"grayscale"</code> A grayscale gradient for producing a black and white plot
</p>
</li></ul>

<p>In addition to these, setting <code>colorScheme="custom"</code> allows for a
user-specified color scheme by using the ggplot2 family of <code>scale_fill_</code> functions.
</p>
<p>The options for <code>printNumbers</code> are:
</p>

<ul>
<li><p><code>"count"</code> The raw counts in the table.
</p>
</li>
<li><p><code>"proportion"</code> The within-group proportion, rounded to 2 decimal places.
</p>
</li>
<li><p><code>"percentage"</code> The within-group percentage, rounded to 2 decimal places.
</p>
</li>
<li><p><code>"count.percentage"</code> The raw count with percentage in parentheses.
</p>
</li>
<li><p><code>"none"</code> Do not print any numbers.
</p>
</li></ul>

<p>These options may be abbreviated. <code>"p"</code> is not a valid abbreviation as it matches to multiple options.
The minimal abbreviation for <code>"count.percentage"</code> is <code>"c.p"</code>
</p>


<h3>Value</h3>

<p>A ggplot object, or a list containing a ggplot object and the data used to generate it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- alteplase
df$mRS &lt;- df$mRS -1
x &lt;- table(mRS=df$mRS,
           Group=df$treat,
           Time=df$time)

grottaBar(x,groupName="Group",
          scoreName = "mRS",
          strataName="Time",
          colorScheme ="lowGreen"
 )

  grottaBar(x,groupName="Time",
          scoreName = "mRS",
          strataName="Group",
          colorScheme ="grayscale"
 )

x &lt;- table(mRS=df$mRS,
          Group=df$treat)

   grottaBar(x,groupName="Group",
             scoreName = "mRS",
             colorScheme ="custom"
   ) + ggplot2::scale_fill_brewer(palette = "Spectral", direction=-1)

  grottaBar(x,groupName="Group",
          scoreName = "mRS",
          colorScheme ="custom",
          textFace = "italic",
          printNumbers = "count.percentage"
 ) + viridis::scale_fill_viridis(discrete = TRUE,direction = -1)


grottaBar(
          x,
          groupName = "Group",
          scoreName = "mRS",
          colorScheme = "custom",
          textFace = "italic",
          printNumbers = "count.percentage"
) + viridis::scale_fill_viridis(discrete = TRUE, direction = -1)


grottaBar(x,groupName="Group",
           scoreName = "mRS",
           colorScheme ="custom",
           textFace = "italic",
           textColor = c("black","white"),
           textCut = 5,
           printNumbers = "count.percentage"
) + viridis::scale_fill_viridis(discrete = TRUE,direction = -1)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
