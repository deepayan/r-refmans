<!DOCTYPE html><html><head><title>Help for package vardpoor</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vardpoor}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#domain'><p>Extra variables for domain estimation</p></a></li>
<li><a href='#incPercentile'><p>Estimation of weighted percentiles</p></a></li>
<li><a href='#lin.ratio'><p>Linearization of the ratio estimator</p></a></li>
<li><a href='#linarpr'><p>Linearization of at-risk-of-poverty rate</p></a></li>
<li><a href='#linarpt'><p>Linearization of at-risk-of-poverty threshold</p></a></li>
<li><a href='#linarr'><p>Linearization of the aggregate replacement ratio</p></a></li>
<li><a href='#lingini'><p>Linearization of the Gini coefficient I</p></a></li>
<li><a href='#lingini2'><p>Linearization of the Gini coefficient II</p></a></li>
<li><a href='#lingpg'><p>Linearization of the gender pay (wage) gap.</p></a></li>
<li><a href='#linpoormed'><p>Linearization of the median income of individuals below the At Risk of Poverty Threshold</p></a></li>
<li><a href='#linqsr'><p>Linearization of the Quintile Share Ratio</p></a></li>
<li><a href='#linrmir'><p>Linearization of the relative median income ratio</p></a></li>
<li><a href='#linrmpg'><p>Linearization of the relative median at-risk-of-poverty gap</p></a></li>
<li><a href='#residual_est'><p>Residual estimation of calibration</p></a></li>
<li><a href='#var_srs'><p>The estimation of the simple random sampling.</p></a></li>
<li><a href='#vardannual'><p>Variance estimation for measures of annual net change or annual for single and multistage stage cluster sampling designs</p></a></li>
<li><a href='#vardchanges'><p>Variance estimation for measures of change for single and multistage stage cluster sampling designs</p></a></li>
<li><a href='#vardchangespoor'><p>Variance estimation for measures of change for sample surveys for indicators on social exclusion and poverty</p></a></li>
<li><a href='#vardchangstrs'><p>Variance estimation for measures of annual net change or annual for single stratified sampling designs</p></a></li>
<li><a href='#vardcros'><p>Variance estimation for cross-sectional, longitudinal measures for single and multistage stage cluster sampling designs</p></a></li>
<li><a href='#vardcrospoor'><p>Variance estimation for cross-sectional, longitudinal measures for indicators on social exclusion and poverty</p></a></li>
<li><a href='#vardom'><p>Variance estimation of the sample surveys in domain by the ultimate cluster method</p></a></li>
<li><a href='#vardom_othstr'><p>Variance estimation for sample surveys in domain by the two stratification</p></a></li>
<li><a href='#vardomh'><p>Variance estimation for sample surveys in domain for one or two stage surveys by the ultimate cluster method</p></a></li>
<li><a href='#variance_est'><p>Variance estimation for sample surveys by the ultimate cluster method</p></a></li>
<li><a href='#variance_othstr'><p>Variance estimation for sample surveys by the new stratification</p></a></li>
<li><a href='#varpoord'><p>Estimation of the variance and deff for sample surveys for indicators on social exclusion and poverty</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Variance Estimation for Sample Surveys by the Ultimate Cluster
Method</td>
</tr>
<tr>
<td>Version:</td>
<td>0.20.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>foreach, data.table (&ge; 1.12.6), MASS, stats, utils, stringr,
surveyplanning, laeken</td>
</tr>
<tr>
<td>Description:</td>
<td>Generation of domain variables, linearization of several non-linear population statistics (the ratio of two totals, weighted income percentile, relative median income ratio, at-risk-of-poverty rate, at-risk-of-poverty threshold, Gini coefficient, gender pay gap, the aggregate replacement ratio, the relative median income ratio, median income below at-risk-of-poverty gap, income quintile share ratio, relative median at-risk-of-poverty gap), computation of regression residuals in case of weight calibration, variance estimation of sample surveys by the ultimate cluster method (Hansen, Hurwitz and Madow, Sample Survey Methods And Theory, vol. I: Methods and Applications; vol. II: Theory. 1953, New York: John Wiley and Sons), variance estimation for longitudinal, cross-sectional measures and measures of change for single and multistage stage cluster sampling designs (Berger, Y. G., 2015, &lt;<a href="https://doi.org/10.1111%2Frssa.12116">doi:10.1111/rssa.12116</a>&gt;). Several other precision measures are derived - standard error, the coefficient of variation, the margin of error, confidence interval, design effect.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://csblatvia.github.io/vardpoor/">https://csblatvia.github.io/vardpoor/</a>,
<a href="https://github.com/CSBLatvia/vardpoor/">https://github.com/CSBLatvia/vardpoor/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/CSBLatvia/vardpoor/issues/">https://github.com/CSBLatvia/vardpoor/issues/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a> | file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-11-30 08:47:33 UTC; MLiberts</td>
</tr>
<tr>
<td>Author:</td>
<td>Juris Breidaks [aut],
  Martins Liberts [aut, cre],
  Santa Ivanova [aut],
  Aleksis Jursevskis [ctb],
  Anthony Damico [ctb],
  Central Statistical Bureau of Latvia [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martins Liberts &lt;martins.liberts@csb.gov.lv&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-11-30 10:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='domain'>Extra variables for domain estimation</h2><span id='topic+domain'></span>

<h3>Description</h3>

<p>The function computes extra variables for domain estimation. Each unique <code>D</code> row defines a domain. Extra variables are computed for each <code>Y</code> variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>domain(Y, D, dataset = NULL, checking = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="domain_+3A_y">Y</code></td>
<td>
<p>Matrix of study variables. Any object convertible to <code>data.table</code> with numeric values, <code>NA</code> values are not allowed. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="domain_+3A_d">D</code></td>
<td>
<p>Matrix of domain variables. Any object convertible to <code>data.table</code>. The number of rows of <code>D</code> must match the number of rows of <code>Y</code>. Duplicated names are not allowed. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="domain_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="domain_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric <code>data.table</code> containing extra variables for domain estimation.
</p>


<h3>References</h3>

<p>Carl-Erik Sarndal, Bengt Swensson, Jan Wretman. Model Assisted Survey Sampling. Springer-Verlag, 1992, p.70.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vardom">vardom</a></code>, <code><a href="#topic+vardomh">vardomh</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
### Example 0
 
domain(Y = 1, D = "A")
 
  
### Example 1

Y1 &lt;- as.matrix(1 : 10)
colnames(Y1) &lt;- "Y1"
D1 &lt;- as.matrix(rep(1, 10))
colnames(D1) &lt;- "D1"
domain(Y = Y1, D = D1)
  
### Example 2
Y &lt;- matrix(1 : 20, 10, 2)
colnames(Y) &lt;- paste0("Y", 1 : 2)
D &lt;- matrix(rep(1 : 2, each = 5), 10, 1)
colnames(D) &lt;- "D"
domain(Y, D)

### Example 3
Y &lt;- matrix(1 : 20, 10, 2)
colnames(Y) &lt;- paste0("Y", 1 : 2)
D &lt;- matrix(rep(1 : 4, each = 5), 10, 2)
colnames(D) &lt;- paste0("D", 1 : 2)
domain(Y, D)
  
### Example 4
Y &lt;- matrix(1 : 20, 10, 2)
colnames(Y) &lt;- paste0("Y", 1 : 2)
D &lt;- matrix(c(rep(1 : 2, each = 5), rep(3, 10)), 10, 2)
colnames(D) &lt;- paste0("D", 1 : 2)
domain(Y, D)

 
</code></pre>

<hr>
<h2 id='incPercentile'>Estimation of weighted percentiles</h2><span id='topic+incPercentile'></span>

<h3>Description</h3>

<p>The function computes the estimates of weighted percentiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>incPercentile(
  Y,
  weights = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  k = c(20, 80),
  dataset = NULL,
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="incPercentile_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_weights">weights</code></td>
<td>
<p>Optional weight variable. One dimensional object convert to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, the estimates of percentiles are computed for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of at-risk-of-poverty threshold is done for each survey period. Object convertible to <code>data.table</code> or variable names as character, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_k">k</code></td>
<td>
<p>A vector of values between 0 and 100 specifying the percentiles to be computed (0 gives the minimum, 100 gives the maximum).</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="incPercentile_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table containing the estimates of weighted income percentiles specified by <code>k</code>.
</p>


<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap. <em>EU-SILC 131-rev/04</em>, Eurostat.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linarpt">linarpt</a></code>, <code><a href="#topic+linarpr">linarpr</a></code>, <code><a href="#topic+linqsr">linqsr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("laeken")
data("eusilc")
incPercentile(Y = "eqIncome", weights = "rb050", Dom = "db040", dataset = eusilc)

</code></pre>

<hr>
<h2 id='lin.ratio'>Linearization of the ratio estimator</h2><span id='topic+lin.ratio'></span>

<h3>Description</h3>

<p>Computes linearized variable for the ratio estimator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lin.ratio(
  Y,
  Z,
  weight,
  Dom = NULL,
  dataset = NULL,
  percentratio = 1,
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lin.ratio_+3A_y">Y</code></td>
<td>
<p>Matrix of numerator variables. Any object convertible to <code>data.table</code> with numeric values, <code>NA</code> values are not allowed.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_z">Z</code></td>
<td>
<p>Matrix of denominator variables. Any object convertible to <code>data.table</code> with numeric values, <code>NA</code> values are not allowed.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_weight">weight</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, the linearized variables are computed for each domain. An object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive integer value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="lin.ratio_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns the <code>data.table</code> of the linearized variables for the ratio estimator.
</p>


<h3>References</h3>

<p>Carl-Erik Sarndal, Bengt Swensson, Jan Wretman. Model Assisted Survey Sampling. Springer-Verlag, 1992, p.178.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>, 
<code><a href="#topic+vardom">vardom</a></code>,
<code><a href="#topic+vardomh">vardomh</a></code>,
<code><a href="#topic+vardcros">vardcros</a></code>,
<code><a href="#topic+vardchanges">vardchanges</a></code>,
<code><a href="#topic+vardannual">vardannual</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
Y &lt;- data.table(Y = rchisq(10, 3))
Z &lt;- data.table(Z = rchisq(10, 3))
weights &lt;- rep(2, 10)
data.table(Y, Z, weights,
           V1 = lin.ratio(Y, Z, weights, percentratio = 1),
           V10 = lin.ratio(Y, Z, weights, percentratio = 10),
           V100 = lin.ratio(Y, Z, weights, percentratio = 100))

</code></pre>

<hr>
<h2 id='linarpr'>Linearization of at-risk-of-poverty rate</h2><span id='topic+linarpr'></span>

<h3>Description</h3>

<p>Estimates the at-risk-of-poverty rate (defined as the proportion of persons with equalized disposable income below at-risk-of-poverty threshold) and computes linearized variable for variance estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linarpr(
  Y,
  id = NULL,
  weight = NULL,
  Y_thres = NULL,
  wght_thres = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  percentage = 60,
  order_quant = 50,
  var_name = "lin_arpr",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linarpr_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number).</p>
</td></tr>
<tr><td><code id="linarpr_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector).</p>
</td></tr>
<tr><td><code id="linarpr_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector).</p>
</td></tr>
<tr><td><code id="linarpr_+3A_y_thres">Y_thres</code></td>
<td>
<p>Variable (for example equalized disposable income) used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>inc</code> is used as <code>income_thres</code> if <code>income_thres</code> is not defined.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_wght_thres">wght_thres</code></td>
<td>
<p>Weight variable used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector. Variable specified for <code>weight</code> is used as <code>wght_thres</code> if <code>wght_thres</code> is not defined.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of at-risk-of-poverty threshold is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of at-risk-of-poverty threshold is done for each survey period. Object convertible to <code>data.table</code> or variable names as character, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">p</code> in the formula for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute at-risk-of-poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> #'should be set equal to 60.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">\alpha</code> in the formula #'for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute at-risk-of-poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linarpr_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The implementation strictly follows the Eurostat definition.
</p>


<h3>Value</h3>

<p>A list with four objects are returned:
</p>

<ul>
<li> <p><code>quantile</code> - a <code>data.table</code> containing the estimated value of the quantile used for at-risk-of-poverty threshold estimation.
</p>
</li>
<li> <p><code>threshold</code> - a <code>data.table</code> containing the estimated at-risk-of-poverty threshold.
</p>
</li>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated at-risk-of-poverty rate (in percentage).
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the at-risk-of-poverty rate (in percentage).
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap. <em>EU-SILC 131-rev/04</em>, Eurostat. <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linarpt">linarpt</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
    
# Full population
d &lt;- linarpr(Y = "eqIncome", id = "IDd",
             weight = "rb050", Dom = NULL,
             dataset = dataset1, percentage = 60,
             order_quant = 50L)
d$value
    
## Not run: 
# By domains
dd &lt;- linarpr(Y = "eqIncome", id = "IDd",
              weight = "rb050", Dom = "db040",
              dataset = dataset1, percentage = 60,
              order_quant = 50L)
dd
## End(Not run)

</code></pre>

<hr>
<h2 id='linarpt'>Linearization of at-risk-of-poverty threshold</h2><span id='topic+linarpt'></span>

<h3>Description</h3>

<p>Estimates the at-risk-of-poverty threshold (defined as percentage (usually 60%) of equalised disposable income after social transfers quantile (usually median)) and computes linearized variable for variance estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linarpt(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  percentage = 60,
  order_quant = 50,
  var_name = "lin_arpt",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linarpt_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalised disposable income after social transfers). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of at-risk-of-poverty threshold is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of at-risk-of-poverty threshold is done for each survey period. Object convertible to <code>data.table</code> or variable names as character, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">p</code> in the formula for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">\alpha</code> in the formula for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linarpt_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The implementation strictly follows the Eurostat definition.
</p>


<h3>Value</h3>

<p>A list with three objects are returned:
</p>

<ul>
<li> <p><code>quantile</code> - a <code>data.table</code> containing the estimated value of the quantile used for at-risk-of-poverty threshold estimation.
</p>
</li>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated at-risk-of-poverty threshold (in percentage).
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the at-risk-of-poverty threshold (in percentage).
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living  Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap. <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linarpr">linarpr</a></code>, <code><a href="#topic+incPercentile">incPercentile</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code> , <code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table") 
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)

# Full population
d1 &lt;- linarpt(Y = "eqIncome", id = "IDd",
              weight = "rb050", Dom = NULL,
              dataset = dataset1, percentage = 60,
              order_quant = 50L)
d1$value

## Not run: 
# By domains
d2 &lt;- linarpt(Y = "eqIncome", id = "IDd",
              weight = "rb050", Dom = "db040",
              dataset = dataset1, percentage = 60,
              order_quant = 50L)
d2$value
## End(Not run)
 
</code></pre>

<hr>
<h2 id='linarr'>Linearization of the aggregate replacement ratio</h2><span id='topic+linarr'></span>

<h3>Description</h3>

<p>Estimates the aggregate replacement ratio (defined as the gross median individual pension income of the population aged 65-74 relative to the gross median individual earnings from work of the population aged 50-59, excluding other social benefits) and computes linearized variable for variance estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linarr(
  Y,
  Y_den,
  id = NULL,
  age,
  pl085,
  month_at_work,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  order_quant = 50,
  var_name = "lin_arr",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linarr_+3A_y">Y</code></td>
<td>
<p>Numerator variable (for gross pension income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_y_den">Y_den</code></td>
<td>
<p>Denominator variable (for example gross individual earnings). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_age">age</code></td>
<td>
<p>Age variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_pl085">pl085</code></td>
<td>
<p>Retirement variable (Number of months spent in retirement or early retirement). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_month_at_work">month_at_work</code></td>
<td>
<p>Variable for total number of month at work (sum of the number of months spent at full-time work as employee, number of months spent at part-time work as employee, number of months spent at full-time work as self-employed (including family worker), number of months spent at part-time work as self-employed (including family worker)).  One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linarr_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of at-risk-of-poverty threshold is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarr_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of at-risk-of-poverty threshold is done for each survey period. Object convertible to <code>data.table</code> or variable names as character, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linarr_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linarr_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">\alpha</code> in the formula #'for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute at-risk-of-poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> #'should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linarr_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linarr_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The implementation strictly follows the Eurostat definition.
</p>


<h3>Value</h3>

<p>A list with four objects are returned:
</p>
  
<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated the aggregate replacement ratio.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the aggregate replacement ratio.
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2015) Task 5 - Improvement and optimization of calculation of net change. <em>LC- 139/15/EN</em>, Eurostat.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
dataset1$pl085 &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
dataset1$month_at_work &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
    
# Full population
d &lt;- linarr(Y = "eqIncome", Y_den = "eqIncome",
            id = "IDd", age = "age",  
            pl085 = "pl085", month_at_work = "month_at_work",
            weight = "rb050",  Dom = NULL,
            dataset = dataset1, order_quant = 50L)
d$value
    
## Not run: 
# By domains
dd &lt;- linarr(Y = "eqIncome", Y_den = "eqIncome",
             id = "IDd", age = "age",  
             pl085 = "pl085", month_at_work = "month_at_work",
             weight = "rb050",  Dom = "db040",
             dataset = dataset1, order_quant = 50L)
 dd
## End(Not run) 

</code></pre>

<hr>
<h2 id='lingini'>Linearization of the Gini coefficient I</h2><span id='topic+lingini'></span>

<h3>Description</h3>

<p>Estimate the Gini coefficient, which is a measure for inequality, and its linearization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lingini(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  var_name = "lin_gini",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lingini_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the Gini is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="lingini_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of the Gini is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="lingini_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lingini_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="lingini_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.
</p>
<p>return A list with two objects are returned by the function:
</p>

<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated Gini coefficients (in percentage) by G. Osier and Eurostat.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the Gini coefficients (in percentage) by G. Osier.</p>
</li></ul>
</td></tr>
</table>


<h3>References</h3>

<p>Working group on Statistics on Income and Living  Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap.  <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lingini2">lingini2</a></code>,
<code><a href="#topic+linqsr">linqsr</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("laeken")
library("data.table")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)[1 : 3,]
 
# Full population
dat1 &lt;- lingini(Y = "eqIncome", id = "IDd",
                weight = "rb050", dataset = dataset1)
dat1$value
  
## Not run: 
# By domains
dat2 &lt;- lingini(Y = "eqIncome", id = "IDd", weight = "rb050",
                Dom = c("db040"), dataset = dataset1)
dat2$value
## End(Not run)

</code></pre>

<hr>
<h2 id='lingini2'>Linearization of the Gini coefficient II</h2><span id='topic+lingini2'></span>

<h3>Description</h3>

<p>Estimate the Gini coefficient, which is a measure for inequality, and its linearization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lingini2(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  var_name = "lin_gini2",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lingini2_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the Gini is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of the Gini is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="lingini2_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two objects are returned by the function:
</p>

<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated Gini coefficients (in percentage) by Langel and Tille (2012) and Eurostat.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the Gini coefficients (in percentage) by Langel and Tille (2012).
</p>
</li></ul>



<h3>References</h3>

<p>Eric Graf, Yves Tille, Variance Estimation Using Linearization for Poverty and Social Exclusion Indicators,  Survey Methodology, June 2014 61 Vol. 40, No. 1, pp. 61-79, Statistics Canada, Catalogue no. 12-001-X, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/12-001-x2014001-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/12-001-x2014001-eng.pdf</a>  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
Matti Langel, Yves Tille, Corrado Gini, a pioneer in balanced sampling and inequality theory. <em>Metron - International Journal of Statistics</em>, 2011, vol. LXIX, n. 1, pp. 45-65, URL <a href="http://dx.doi.org/10.1007/BF03263549">http://dx.doi.org/10.1007/BF03263549</a>. <br />
Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap.  <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lingini">lingini</a></code>,
<code><a href="#topic+linqsr">linqsr</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
    
# Full population
dat1 &lt;- lingini2(Y = "eqIncome", id = "IDd",
                 weight = "rb050",  dataset = dataset1)
dat1$value
    
## Not run: 
# By domains
dat2 &lt;- lingini2(Y = "eqIncome", id = "IDd",
                 weight = "rb050", Dom = c("db040"),
                 dataset = dataset1)
dat2$value
## End(Not run)


</code></pre>

<hr>
<h2 id='lingpg'>Linearization of the gender pay (wage) gap.</h2><span id='topic+lingpg'></span>

<h3>Description</h3>

<p>Estimation of gender pay (wage) gap and computation of linearized variables for variance estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lingpg(
  Y,
  gender = NULL,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  var_name = "lin_gpg",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lingpg_+3A_y">Y</code></td>
<td>
<p>Study variable (for example the gross hourly earning). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, estimation and linearization of gender pay (wage) gap is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, estimation and linearization of gender pay (wage) gap is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="lingpg_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two objects are returned:
</p>

<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated gender pay (wage) gap (in percentage).
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the gender pay (wage) gap (in percentage) for variance estimation.
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap. <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linqsr">linqsr</a></code>, <code><a href="#topic+lingini">lingini</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code> , <code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("ses")
dataset1 &lt;- data.table(ID = paste0("V", 1 : nrow(ses)), ses)

dataset1[, IDnum := .I]

setnames(dataset1, "sex", "sexf")
dataset1[sexf == "male", sex:= 1]
dataset1[sexf == "female", sex:= 2]
  
# Full population
gpgs1 &lt;- lingpg(Y = "earningsHour", gender = "sex",
                id = "IDnum", weight = "weights",
                dataset = dataset1)
gpgs1$value
  
## Not run: 
# Domains by education
gpgs2 &lt;- lingpg(Y = "earningsHour", gender = "sex",
                id = "IDnum", weight = "weights",
                Dom = "education", dataset = dataset1)
gpgs2$value
    
# Sort variable
gpgs3 &lt;- lingpg(Y = "earningsHour", gender = "sex",
                id = "IDnum", weight = "weights",
                sort = "IDnum", Dom = "education",
                dataset = dataset1)
gpgs3$value
    
# Two survey periods
dataset1[, year := 2010]
dataset2 &lt;- copy(dataset1)
dataset2[, year := 2011]
dataset1 &lt;- rbind(dataset1, dataset2)

gpgs4 &lt;- lingpg(Y = "earningsHour", gender = "sex",
                id = "IDnum", weight = "weights", 
                sort = "IDnum", Dom = "education",
                period = "year", dataset = dataset1)
gpgs4$value
names(gpgs4$lin)
## End(Not run)
  
</code></pre>

<hr>
<h2 id='linpoormed'>Linearization of the median income of individuals below the At Risk of Poverty Threshold</h2><span id='topic+linpoormed'></span>

<h3>Description</h3>

<p>Estimation of the median income of individuals below At Risk of Poverty Threshold and computation of linearized variable for variance estimation. The At Risk of Poverty Threshold is estimated for the whole population always. The median income is estimated for the whole population or for each domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linpoormed(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  percentage = 60,
  order_quant = 50,
  var_name = "lin_poormed",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linpoormed_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the median income of persons below a poverty threshold is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of the median income of persons below a poverty threshold is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">p</code> in the formula for poverty threshold computation: </p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>
<p> For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">\alpha</code> in the formula for poverty threshold computation: </p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>
<p>. For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linpoormed_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two objects are returned by the function:
</p>
    
<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated median income of individuals below the At Risk of Poverty Threshold.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the median income below the At Risk of Poverty Threshold.
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap.  <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linarpt">linarpt</a></code>,
<code><a href="#topic+linrmpg">linrmpg</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("laeken")
library("data.table")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
 
# Full population
d &lt;- linpoormed(Y = "eqIncome", id = "IDd",
                weight = "rb050", Dom = NULL,
                dataset = dataset1, percentage = 60,
                order_quant = 50L)
  
## Not run: 
# Domains by location of houshold
dd &lt;- linpoormed(Y = "eqIncome", id = "IDd",
                 weight = "rb050", Dom = "db040",
                 dataset = dataset1, percentage = 60,
                 order_quant = 50L)
dd
## End(Not run)

</code></pre>

<hr>
<h2 id='linqsr'>Linearization of the Quintile Share Ratio</h2><span id='topic+linqsr'></span>

<h3>Description</h3>

<p>Estimate the Quintile Share Ratio, which is defined as the ratio of the sum of equalized disposable income received by the top 20% to the sum of equalized disposable income received by the bottom 20%, and its linearization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linqsr(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  alpha = 20,
  var_name = "lin_qsr",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linqsr_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the income quantile share ratio is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of the income quantile share ratio is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_alpha">alpha</code></td>
<td>
<p>a numeric value in range <code class="reqn">[0,100]</code> for the order of the Quintile Share Ratio.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linqsr_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two objects are returned by the function:
</p>

<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated Quintile Share Ratio by G. Osier and Eurostat papers.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the Quintile Share Ratio by G. Osier paper.
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap. <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+incPercentile">incPercentile</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)

# Full population
dd &lt;- linqsr(Y = "eqIncome", id = "IDd",
             weight = "rb050", Dom = NULL,
             dataset = dataset1, alpha = 20)
dd$value
 
## Not run: 
# By domains
dd &lt;- linqsr(Y = "eqIncome", id = "IDd",
             weight = "rb050", Dom = "db040",
             dataset = dataset1, alpha = 20)
dd$value
## End(Not run)

</code></pre>

<hr>
<h2 id='linrmir'>Linearization of the relative median income ratio</h2><span id='topic+linrmir'></span>

<h3>Description</h3>

<p>Estimates the relative median income ratio (defined as the ratio of the median equivalised disposable income of people aged above age  to the median equivalised disposable income of those aged below 65) and computes linearized variable for variance estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linrmir(
  Y,
  id = NULL,
  age,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  order_quant = 50,
  var_name = "lin_rmir",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linrmir_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_age">age</code></td>
<td>
<p>Age variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of at-risk-of-poverty threshold is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of at-risk-of-poverty threshold is done for each survey period. Object convertible to <code>data.table</code> or variable names as character, column numbers as numeric vector.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">\left[ 0,100 \right]</code> for <code class="reqn">\alpha</code> in the formula for at-risk-of-poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute the relative median income ratio to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linrmir_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The implementation strictly follows the Eurostat definition.
</p>


<h3>Value</h3>

<p>A list with four objects are returned:
</p>
 
<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated relative median income ratio.
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the relative median income ratio.
</p>
</li></ul>



<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2015) Task 5 - Improvement and optimization of calculation of net change. <em>LC- 139/15/EN</em>, Eurostat.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("laeken")
library("data.table")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
 
# Full population
d &lt;- linrmir(Y = "eqIncome", id = "IDd",  age = "age",
             weight = "rb050", Dom = NULL,  
             dataset = dataset1, order_quant = 50L)
 
## Not run: 
 # By domains
 dd &lt;- linrmir(Y = "eqIncome", id = "IDd", age = "age",
               weight = "rb050", Dom = "db040",
               dataset = dataset1, order_quant = 50L)
 dd
## End(Not run)

</code></pre>

<hr>
<h2 id='linrmpg'>Linearization of the relative median at-risk-of-poverty gap</h2><span id='topic+linrmpg'></span>

<h3>Description</h3>

<p>Estimate the relative median at-risk-of-poverty gap, which is defined as the relative difference between the median equalized disposable income of persons below the At Risk of Poverty Threshold and the At Risk of Poverty Threshold itself (expressed as a percentage of the at-risk-of-poverty threshold) and its linearization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linrmpg(
  Y,
  id = NULL,
  weight = NULL,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  dataset = NULL,
  percentage = 60,
  order_quant = 50,
  var_name = "lin_rmpg",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linrmpg_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_weight">weight</code></td>
<td>
<p>Optional weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the relative median at-risk-of-poverty gap is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, linearization of the relative median at-risk-of-poverty gap is done for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">p</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">\alpha</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_var_name">var_name</code></td>
<td>
<p>A character specifying the name of the linearized variable.</p>
</td></tr>
<tr><td><code id="linrmpg_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.
</p>
<p>return A list with two objects are returned by the function:
</p>

<ul>
<li> <p><code>value</code> - a <code>data.table</code> containing the estimated relative median at-risk-of-poverty gap (in percentage).
</p>
</li>
<li> <p><code>lin</code> - a <code>data.table</code> containing the linearized variables of the relative median at-risk-of-poverty gap (in percentage).
</p>
</li></ul>
</td></tr>
</table>


<h3>References</h3>

<p>Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap.  <em>EU-SILC 131-rev/04</em>, Eurostat.  <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.  <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>.  <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linarpt">linarpt</a></code>,
<code><a href="#topic+linarpr">linarpr</a></code>,
<code><a href="#topic+linpoormed">linpoormed</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)

# Full population
d &lt;- linrmpg(Y = "eqIncome", id = "IDd",
             weight = "rb050", Dom = NULL,
             dataset = dataset1, percentage = 60,
             order_quant = 50L)
d$value
d$threshold
  
## Not run: 
# By domains
dd &lt;- linrmpg(Y = "eqIncome", id = "IDd",
              weight = "rb050", Dom = "db040",
              dataset = dataset1, percentage = 60,
              order_quant = 50L)
dd$value
## End(Not run)

</code></pre>

<hr>
<h2 id='residual_est'>Residual estimation of calibration</h2><span id='topic+residual_est'></span>

<h3>Description</h3>

<p>Computes the estimation residuals of calibration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>residual_est(Y, X, weight, q, dataset = NULL, checking = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residual_est_+3A_y">Y</code></td>
<td>
<p>Matrix of the variable of interest.</p>
</td></tr>
<tr><td><code id="residual_est_+3A_x">X</code></td>
<td>
<p>Matrix of the auxiliary variables for the calibration estimator. This is the matrix of the sample calibration variables.</p>
</td></tr>
<tr><td><code id="residual_est_+3A_weight">weight</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="residual_est_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="residual_est_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="residual_est_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function implements the following estimator:
</p>
<p style="text-align: center;"><code class="reqn">e_k=Y_k-X_k^{'}B </code>
</p>

<p>where
</p>
<p style="text-align: center;"><code class="reqn">\hat{B} = \left(\sum_{s} weight_k q_k X_k X^{'}_{k} \right)^{-1} \left(\sum_{s} weight_k q_k X_k Y_k \right)</code>
</p>
<p>.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>residuals</code> - a numeric <code>data.table</code> containing the estimated residuals of calibration.
</p>
</li>
<li> <p><code>betas</code> - a numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li></ul>



<h3>References</h3>

<p>Sixten Lundstrom and Carl-Erik Sarndal. Estimation in the presence of Nonresponse and Frame Imperfections. Statistics Sweden, 2001, p. 43-44.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,   <code><a href="#topic+lin.ratio">lin.ratio</a></code>,    <code><a href="#topic+linarpr">linarpr</a></code>,
<code><a href="#topic+linarpt">linarpt</a></code>,  <code><a href="#topic+lingini">lingini</a></code>,      <code><a href="#topic+lingini2">lingini2</a></code>,
<code><a href="#topic+lingpg">lingpg</a></code>,   <code><a href="#topic+linpoormed">linpoormed</a></code>,   <code><a href="#topic+linqsr">linqsr</a></code>,
<code><a href="#topic+linrmpg">linrmpg</a></code>,  <code><a href="#topic+vardom">vardom</a></code>,       <code><a href="#topic+vardomh">vardomh</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>, <code><a href="#topic+variance_est">variance_est</a></code>, <code><a href="#topic+variance_othstr">variance_othstr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Y &lt;- matrix(rchisq(10, 3), 10, 1)
X &lt;- matrix(rchisq(20, 3), 10, 2)
w &lt;- rep(2, 10)
q &lt;- rep(1, 10)
residual_est(Y, X, w, q)

### Test2
Y &lt;- matrix(rchisq(10, 3), 10, 1)
X &lt;- matrix(c(rchisq(10, 2), rchisq(10, 2) + 10), 10, 2)
w &lt;- rep(2, 10)
q &lt;- rep(1, 10)
residual_est(Y, X, w, q)
as.matrix(lm(Y ~ X - 1, weights = w * q)$residuals)

</code></pre>

<hr>
<h2 id='var_srs'>The estimation of the simple random sampling.</h2><span id='topic+var_srs'></span>

<h3>Description</h3>

<p>Computes the estimation of the simple random sampling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_srs(Y, w = rep(1, length(Y)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="var_srs_+3A_y">Y</code></td>
<td>
<p>The variables of interest.</p>
</td></tr>
<tr><td><code id="var_srs_+3A_w">w</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.frame</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>S2p</code> - a <code>data.table</code> containing the values of the variance estimation of the population.
</p>
</li>
<li> <p><code>varsrs</code> - a <code>data.table</code> containing the values of the variance estimation of the simple random sampling.
</p>
</li></ul>



<h3>References</h3>

<p>Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vardom">vardom</a></code>,
<code><a href="#topic+vardomh">vardomh</a></code>,
<code><a href="#topic+varpoord">varpoord</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Ys &lt;- matrix(rchisq(10, 3), 10, 1)
ws &lt;- c(rep(2, 5), rep(3, 5))
var_srs(Ys, ws)

</code></pre>

<hr>
<h2 id='vardannual'>Variance estimation for measures of annual net change or annual for single and multistage stage cluster sampling designs</h2><span id='topic+vardannual'></span>

<h3>Description</h3>

<p>Computes the variance estimation for measures of annual net change or annual for single and multistage stage cluster sampling designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardannual(
  Y,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  Z = NULL,
  gender = NULL,
  country = NULL,
  years,
  subperiods,
  dataset = NULL,
  year1 = NULL,
  year2 = NULL,
  X = NULL,
  countryX = NULL,
  yearsX = NULL,
  subperiodsX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  frate = 0,
  percentratio = 1,
  use.estVar = FALSE,
  use.gender = FALSE,
  confidence = 0.95,
  method = "cros"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardannual_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_z">Z</code></td>
<td>
<p>Optional variables of denominator for ratio estimation. If supplied, the ratio estimation is computed. Object convertible to <code>data.table</code> or variable names as character, column numbers. This variable is <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_country">country</code></td>
<td>
<p>Variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_years">years</code></td>
<td>
<p>Variable for the all survey years. The values for each year are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_subperiods">subperiods</code></td>
<td>
<p>Variable for the all survey sub-periods. The values for each sub-period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_year1">year1</code></td>
<td>
<p>The vector of years from variable <code>years</code> describes the first year for measures of annual net change.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_year2">year2</code></td>
<td>
<p>The vector of years from variable <code>periods</code> describes the second year for measures of annual net change.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_countryx">countryX</code></td>
<td>
<p>Optional variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_yearsx">yearsX</code></td>
<td>
<p>Variable of the all survey years. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_subperiodsx">subperiodsX</code></td>
<td>
<p>Variable for the all survey sub-periods. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_frate">frate</code></td>
<td>
<p>Positive numeric value. Sampling rate in percentage, by default - 0.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_use.estvar">use.estVar</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then <code>R</code> function <code>estVar</code> is used for the  estimation of covariance matrix of the residuals. If value is <code>FALSE</code>, then <code>R</code> function <code>estVar</code> is not used for the estimation of covariance matrix of the residuals.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_use.gender">use.gender</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then <code>subperiods</code> is defined together with <code>gender</code>.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_confidence">confidence</code></td>
<td>
<p>optional; either a positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_method">method</code></td>
<td>
<p>character value; value 'cros' is for measures of annual or value 'netchanges' is for measures of annual net change. This variable by default is netchanges.</p>
</td></tr>
<tr><td><code id="vardannual_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional</p>
</td></tr></table>
<p>variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.
</p>
<table>
<tr><td><code id="vardannual_+3A_dataset">dataset</code></td>
<td>
<p>Optional</p>
</td></tr></table>
<p>survey data object convertible to <code>data.table</code>.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>crossectional_results</code> -  a <code>data.table</code> containing: <br />
<code>year</code> -  survey years, <br />
<code>subperiods</code> -  survey sub-periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>sample_size</code> - the sample size (in numbers of individuals), <br />
<code>pop_size</code> - the population size (in numbers of individuals), <br />
<code>total</code> - the estimated totals, <br />
<code>variance</code> - the estimated variance of cross-sectional or longitudinal measures, <br />
<code>sd_w</code> - the estimated weighted variance of simple random sample, <br />
<code>sd_nw</code> - the estimated variance estimation of simple random sample, <br />
<code>pop</code> - the population size (in numbers of households), <br />
<code>sampl_siz</code> - the sample size (in numbers of households), <br />
<code>stderr_w</code> - the estimated weighted standard error of simple random sample, <br />
<code>stderr_nw</code> - the estimated standard error of simple random sample, <br />
<code>se</code> - the estimated standard error of cross-sectional or longitudinal, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br /> 
<code>confidence_level</code> - the positive value for confidence interval. 
</p>
</li>
<li> <p><code>crossectional_var_grad</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years, <br />
<code>subperiods</code> -  survey sub-periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>grad</code> - the estimated gradient, <br />
<code>var</code> - the estimated a design-based variance.
</p>
</li>
<li> <p><code>vardchanges_grad_var</code> - a <code>data.table</code> containing: <br />
<code>year_1</code> -  survey years of <code>years1</code>, <br />
<code>subperiods_1</code> -  survey sub-periods of <code>years1</code>, <br />
<code>year_2</code> -  survey years of <code>years2</code>, <br />
<code>subperiods_2</code> -  survey sub-periods of <code>years2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>nams</code> - gradient names, numerator (num) and denominator (den), for each year, <br /> 
<code>grad</code> - the estimated gradient, <br />
<code>cros_var</code> - the estimated a design-based variance.
</p>
</li>
<li> <p><code>vardchanges_rho</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years of <code>years</code> for cross-sectional estimates, <br />
<code>subperiods</code> -  survey sub-periods of <code>years</code> for cross-sectional estimates, <br />
<code>year_1</code> -  survey years of <code>years1</code>, <br />
<code>subperiods_1</code> -  survey sub-periods of <code>years1</code>, <br />
<code>year_2</code> -  survey years of <code>years2</code>, <br />
<code>subperiods_2</code> -  survey sub-periods of <code>years2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>nams</code> - gradient names, numerator (num) and denominator (den), for each year, <br />
<code>rho</code> - the estimated correlation matrix.
</p>
</li>
<li> <p><code>vardchanges_var_tau</code> - a <code>data.table</code> containing: <br />
<code>year_1</code> -  survey years of <code>years1</code>, <br />
<code>subperiods_1</code> -  survey sub-periods of <code>years1</code>, <br />
<code>year_2</code> -  survey years of <code>years2</code>, <br />
<code>subperiods_2</code> -  survey sub-periods of <code>years2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>nams</code> - gradient names, numerator (num) and denominator (den), for each year, <br />
<code>var_tau</code> - the estimated covariance matrix.
</p>
</li>
<li> <p><code>vardchanges_results</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years of <code>years</code> for measures of annual, <br />
<code>subperiods</code> -  survey sub-periods of <code>years</code> for measures of annual, <br />
<code>year_1</code> -  survey years of <code>years1</code> for measures of annual net change, <br />
<code>subperiods_1</code> -  survey sub-periods of <code>years1</code> for measures of annual net change, <br />
<code>year_2</code> -  survey years of <code>years2</code> for measures of annual net change, <br />
<code>subperiods_2</code> -  survey sub-periods of <code>years2</code> for measures of annual net change, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>estim_1</code> - the estimated value for period1, <br />
<code>estim_2</code> - the estimated value for period2, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br /> 
<code>significant</code> - is the the difference significant
</p>
</li>
<li> <p><code>X_annual</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years of <code>years</code> for measures of annual, <br />
<code>year_1</code> -  survey years of <code>years1</code> for measures of annual net change, <br />
<code>year_2</code> -  survey years of <code>years2</code> for measures of annual net change, <br />
<code>period</code> - period1 and period2 together, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>cros_se</code> - the estimated cross-sectional standard error.
</p>
</li>
<li> <p><code>A_matrix</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years of <code>years1</code> for measures of annual, <br />
<code>year_1</code> -  survey years of <code>years1</code> for measures of annual net change, <br />
<code>year_2</code> -  survey years of <code>years2</code> for measures of annual net change, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>cols</code> - the estimated matrix_A columns, <br />
<code>matrix_A</code> - the estimated matrix A.
</p>
</li>
<li> <p><code>annual_sum</code> - a <code>data.table</code> containing: <br />
<code>year</code> - survey years, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>totalY</code> - the estimated value of variables of interest for period1, <br />
<code>totalZ</code> - optional the estimated value of denominator for period2, <br />
<code>estim</code> - the estimated value for year.
</p>
</li>
<li> <p><code>annual_results</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years of <code>years</code> for measures of annual, <br />
<code>year_1</code> -  survey years of <code>years1</code> for measures of annual net change, <br />
<code>year_2</code> -  survey years of <code>years2</code> for measures of annual net change, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>estim_1</code> - the estimated value for period1 for measures of annual net change, <br />
<code>estim_2</code> - the estimated value for period2 for measures of annual net change, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error for period1 for measures of annual, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage for measures of annual, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br /> 
<code>significant</code> - is the the difference significant
</p>
</li></ul>



<h3>References</h3>

<p>Guillaume Osier, Virginie Raymond, (2015), Development of methodology for the estimate of variance of annual net changes for LFS-based indicators. Deliverable 1 - Short document with derivation of the methodology. <br />
Guillaume Osier, Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+vardcros">vardcros</a></code>,
<code><a href="#topic+vardchanges">vardchanges</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
### Example
library("data.table")

set.seed(1)

data("eusilc", package = "laeken")
eusilc1 &lt;- eusilc[1:20, ]
rm(eusilc)

dataset1 &lt;- data.table(rbind(eusilc1, eusilc1),
                       year = c(rep(2010, nrow(eusilc1)),
                                rep(2011, nrow(eusilc1))))
rm(eusilc1)

dataset1[, country := "AT"]
dataset1[, half := .I - 2 * trunc((.I - 1) / 2)]
dataset1[, quarter := .I - 4 * trunc((.I - 1) / 4)]
dataset1[age &lt; 0, age := 0]

PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL][]
PSU[, PSU := trunc(runif(.N, 0, 5))]

dataset1 &lt;- merge(dataset1, PSU, all = TRUE, by = "db030")
rm(PSU)

dataset1[, strata := "XXXX"]
dataset1[, employed := trunc(runif(.N, 0, 2))]
dataset1[, unemployed := trunc(runif(.N, 0, 2))]
dataset1[, labour_force := employed + unemployed]
dataset1[, id_lv2 := paste0("V", .I)]

vardannual(Y = "employed", H = "strata",
           PSU = "PSU", w_final = "rb050",
           ID_level1 = "db030", ID_level2 = "id_lv2",
           Dom = NULL, Z = NULL, years = "year",
           subperiods = "half", dataset = dataset1,
           percentratio = 100, confidence = 0.95,
           method = "cros")
  
## Not run: 
vardannual(Y = "employed", H = "strata",
           PSU = "PSU", w_final = "rb050",
           ID_level1 = "db030", ID_level2 = "id_lv2",
           Dom = NULL, Z = NULL, country = "country",
           years = "year", subperiods = "quarter",
           dataset = dataset1, year1 = 2010, year2 = 2011,
           percentratio = 100, confidence = 0.95,
           method = "netchanges")
    
vardannual(Y = "unemployed", H = "strata",
           PSU = "PSU", w_final = "rb050",
           ID_level1 = "db030", ID_level2 = "id_lv2", 
           Dom = NULL, Z = "labour_force",
           country = "country", years = "year",
           subperiods = "quarter", dataset = dataset1,
           year1 = 2010, year2 = 2011,
           percentratio = 100, confidence = 0.95,
           method = "netchanges")

## End(Not run)

</code></pre>

<hr>
<h2 id='vardchanges'>Variance estimation for measures of change for single and multistage stage cluster sampling designs</h2><span id='topic+vardchanges'></span>

<h3>Description</h3>

<p>Computes the variance estimation for measures of change for single and multistage stage cluster sampling designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardchanges(
  Y,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  Z = NULL,
  gender = NULL,
  country = NULL,
  period,
  dataset = NULL,
  period1,
  period2,
  X = NULL,
  countryX = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  linratio = FALSE,
  percentratio = 1,
  use.estVar = FALSE,
  outp_res = FALSE,
  confidence = 0.95,
  change_type = "absolute",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardchanges_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_z">Z</code></td>
<td>
<p>Optional variables of denominator for ratio estimation. If supplied, the ratio estimation is computed. Object convertible to <code>data.table</code> or variable names as character, column numbers. This variable is <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_country">country</code></td>
<td>
<p>Variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_period">period</code></td>
<td>
<p>Variable for the all survey periods. The values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_period1">period1</code></td>
<td>
<p>The vector of periods from variable <code>periods</code> describes the first period.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_period2">period2</code></td>
<td>
<p>The vector of periods from variable <code>periods</code> describes the second period.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_countryx">countryX</code></td>
<td>
<p>Optional variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the all survey periods. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_linratio">linratio</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then the linearized variables for the ratio estimator is used for variance estimation. If value is <code>FALSE</code>, then the gradients is used for variance estimation.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_use.estvar">use.estVar</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then <code>R</code> function <code>estVar</code> is used for the  estimation of covariance matrix of the residuals. If value is <code>FALSE</code>, then <code>R</code> function <code>estVar</code> is not used for the  estimation of covariance matrix of the residuals.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_confidence">confidence</code></td>
<td>
<p>optional; either a positive value for confidence interval. This variable by default is 0.95 .</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_change_type">change_type</code></td>
<td>
<p>character value net changes type - absolute or relative.</p>
</td></tr>
<tr><td><code id="vardchanges_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU by periods and countries (if available).
#'     </p>
</li>
<li> <p><code>crossectional_results</code> - a <code>data.table</code> containing: <br />
<code>period</code> -  survey periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>sample_size</code> - the sample size (in numbers of individuals), <br />
<code>pop_size</code> - the population size (in numbers of individuals), <br />
<code>total</code> - the estimated totals, <br />
<code>variance</code> - the estimated variance of cross-sectional or longitudinal measures, <br />
<code>sd_w</code> - the estimated weighted variance of simple random sample, <br />
<code>sd_nw</code> - the estimated variance estimation of simple random sample, <br />
<code>pop</code> - the population size (in numbers of households), <br />
<code>sampl_siz</code> - the sample size (in numbers of households), <br />
<code>stderr_w</code> - the estimated weighted standard error of simple random sample, <br />
<code>stderr_nw</code> - the estimated standard error of simple random sample, <br />
<code>se</code> - the estimated standard error of cross-sectional or longitudinal, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound.
#'     </p>
</li>
<li> <p><code>crossectional_var_grad</code> - a <code>data.table</code> containing: <br />
<code>periods</code> -  survey periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>grad</code> - the estimated gradient, <br />
<code>var</code> - the estimated a design-based variance.
</p>
</li>
<li> <p><code>rho</code> - a <code>data.table</code> containing: <br />
<code>periods_1</code> -  survey periods of <code>periods1</code>, <br />
<code>periods_2</code> -  survey periods of <code>periods2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>nams</code> - the variable names in correlation matrix, <br />
<code>rho</code> - the estimated correlation matrix.
</p>
</li>
<li> <p><code>var_tau</code> - a <code>data.table</code> containing: <br />
<code>periods_1</code> -  survey periods of <code>periods1</code>, <br />
<code>periods_2</code> -  survey periods of <code>periods2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>nams</code> - the variable names in correlation matrix, <br />
<code>var_tau</code> - the estimated covariance matrix.
</p>
</li>
<li> <p><code>changes_results</code> - a <code>data.table</code> containing: <br />
<code>periods_1</code> -  survey periods of <code>periods1</code>, <br />
<code>periods_2</code> -  survey periods of <code>periods2</code>, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - variable with names of variables of interest, <br />
<code>namesZ</code> - optional variable with names of denominator for ratio estimation, <br />
<code>estim_1</code> - the estimated value for period1, <br />
<code>estim_2</code> - the estimated value for period2, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound. <br />
<code>significant</code> - is the the difference significant.
</p>
</li></ul>



<h3>References</h3>

<p>Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+vardcros">vardcros</a></code>,
<code><a href="#topic+vardchangespoor">vardchangespoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
### Example 
library("data.table")
library("laeken")
data("eusilc")
set.seed(1)
eusilc1 &lt;- eusilc[1:40,]
set.seed(1)
dataset1 &lt;- data.table(rbind(eusilc1, eusilc1),
                       year = c(rep(2010, nrow(eusilc1)),
                                rep(2011, nrow(eusilc1))))
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 5))]
dataset1 &lt;- merge(dataset1, PSU, all = TRUE, by = "db030")
PSU &lt;- eusilc &lt;- NULL
dataset1[, strata := c("XXXX")]

dataset1[, t_pov := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, exp := 1]

# At-risk-of-poverty (AROP)
dataset1[, pov := ifelse (t_pov == 1, 1, 0)]
dataset1[, id_lev2 := paste0("V", .I)]


result &lt;- vardchanges(Y = "pov", H = "strata", 
                      PSU = "PSU", w_final = "rb050",
                      ID_level1 = "db030", ID_level2 = "id_lev2",
                      Dom = NULL, Z = NULL, period = "year",
                      dataset = dataset1, period1 = 2010,
                      period2 = 2011, change_type = "absolute")
result

## Not run: 
data("eusilc")
dataset1 &lt;- data.table(rbind(eusilc, eusilc),
                       year = c(rep(2010, nrow(eusilc)),
                                rep(2011, nrow(eusilc))))
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[,.N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
dataset1 &lt;- merge(dataset1, PSU, all = TRUE, by = "db030")
PSU &lt;- eusilc &lt;- NULL
dataset1[, strata := "XXXX"]
  
dataset1[, t_pov := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_dep := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_lwi := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, exp := 1]
dataset1[, exp2 := 1 * (age &lt; 60)]
  
# At-risk-of-poverty (AROP)
dataset1[, pov := ifelse (t_pov == 1, 1, 0)]
  
# Severe material deprivation (DEP)
dataset1[, dep := ifelse (t_dep == 1, 1, 0)]
  
# Low work intensity (LWI)
dataset1[, lwi := ifelse (t_lwi == 1 &amp; exp2 == 1, 1, 0)]
  
# At-risk-of-poverty or social exclusion (AROPE)
dataset1[, arope := ifelse (pov == 1 | dep == 1 | lwi == 1, 1, 0)]
dataset1[, dom := 1]
dataset1[, id_lev2 := .I]
  
result &lt;- vardchanges(Y = c("pov", "dep", "lwi", "arope"),
                      H = "strata", PSU = "PSU", w_final = "rb050",
                      ID_level1 = "db030", ID_level2 = "id_lev2",
                      Dom = "rb090", Z = NULL, period = "year",
                      dataset = dataset1, period1 = 2010, 
                      period2 = 2011, change_type = "absolute")
result
## End(Not run)

</code></pre>

<hr>
<h2 id='vardchangespoor'>Variance estimation for measures of change for sample surveys for indicators on social exclusion and poverty</h2><span id='topic+vardchangespoor'></span>

<h3>Description</h3>

<p>Computes the variance estimation for measures of change for indicators on social exclusion and poverty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardchangespoor(
  Y,
  age = NULL,
  pl085 = NULL,
  month_at_work = NULL,
  Y_den = NULL,
  Y_thres = NULL,
  wght_thres = NULL,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  country = NULL,
  period,
  sort = NULL,
  period1,
  period2,
  gender = NULL,
  dataset = NULL,
  X = NULL,
  countryX = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  percentage = 60,
  order_quant = 50,
  alpha = 20,
  use.estVar = FALSE,
  confidence = 0.95,
  outp_lin = FALSE,
  outp_res = FALSE,
  type = "linrmpg",
  change_type = "absolute"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardchangespoor_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income or gross pension income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_age">age</code></td>
<td>
<p>Age variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_pl085">pl085</code></td>
<td>
<p>Retirement variable (Number of months spent in retirement or early retirement). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_month_at_work">month_at_work</code></td>
<td>
<p>Variable for total number of month at work (sum of the number of months spent at full-time work as employee, number of months spent at part-time work as employee, number of months spent at full-time work as self-employed (including family worker), number of months spent at part-time work as self-employed (including family worker)).  One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_y_den">Y_den</code></td>
<td>
<p>Denominator variable (for example gross individual earnings). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_y_thres">Y_thres</code></td>
<td>
<p>Variable (for example equalized disposable income) used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>inc</code> is used as <code>income_thres</code> if <code>income_thres</code> is  not defined.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_wght_thres">wght_thres</code></td>
<td>
<p>Weight variable used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>weight</code> is used as <code>wght_thres</code> if <code>wght_thres</code> is not defined.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_country">country</code></td>
<td>
<p>Variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_period">period</code></td>
<td>
<p>Variable for the all survey periods. The values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_period1">period1</code></td>
<td>
<p>The vector from variable <code>period</code> describes the first period.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_period2">period2</code></td>
<td>
<p>The vector from variable <code>period</code> describes the second period.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_countryx">countryX</code></td>
<td>
<p>Optional variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the survey periods and countries. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">p</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">\alpha</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_alpha">alpha</code></td>
<td>
<p>a numeric value in range <code class="reqn">[0,100]</code> for the order of the income quantile share ratio (in percentage).</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_use.estvar">use.estVar</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then <code>R</code> function <code>estVar</code> is used for the  estimation of covariance matrix of the residuals. If value is <code>FALSE</code>, then <code>R</code> function <code>estVar</code> is not used for the estimation of covariance matrix of the residuals.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_confidence">confidence</code></td>
<td>
<p>optional; either a positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_type">type</code></td>
<td>
<p>a character vector (of length one unless several.ok is TRUE), example &quot;linarpr&quot;,&quot;linarpt&quot;, &quot;lingpg&quot;, &quot;linpoormed&quot;, &quot;linrmpg&quot;, &quot;lingini&quot;, &quot;lingini2&quot;, &quot;linqsr&quot;, &quot;linarr&quot;, &quot;linrmir&quot;, &quot;all_choices&quot;.</p>
</td></tr>
<tr><td><code id="vardchangespoor_+3A_change_type">change_type</code></td>
<td>
<p>character value net changes type - absolute or relative.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>
    
<ul>
<li> <p><code>cros_lin_out</code> - a <code>data.table</code> containing the linearized values of the ratio estimator with ID_level2 and PSU by periods and countries (if available).
</p>
</li>
<li> <p><code>cros_res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU by periods and countries (if available).
</p>
</li>
<li> <p><code>crossectional_results</code> - a <code>data.table</code> containing: <br />
<code>period</code> -  survey periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>type</code> - type variable, <br />
<code>count_respondents</code> - the count of respondents, <br />
<code>pop_size</code> - the population size (in numbers of individuals), <br />
<code>estim</code> - the estimated value, <br />
<code>se</code> - the estimated standard error, <br />
<code>var</code> - the estimated variance, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage.
</p>
</li>
<li> <p><code>changes_results</code> - a <code>data.table</code> containing: <br />
<code>period</code> -  survey periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>type</code> - type variable, <br />
<code>estim_1</code> - the estimated value for period1, <br />
<code>estim_2</code> - the estimated value for period2, <br />
<code>estim</code> - the estimated value, <br />
<code>se</code> - the estimated standard error, <br />
<code>var</code> - the estimated variance, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage.</p>
</li></ul>



<h3>References</h3>

<p>Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+vardchanges">vardchanges</a></code>,
<code><a href="#topic+vardcros">vardcros</a></code>,
<code><a href="#topic+vardcrospoor">vardcrospoor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
### Example 
library("laeken")  
library("data.table")
data(eusilc)
set.seed(1)
dataset1 &lt;- data.table(rbind(eusilc, eusilc),
                       year = c(rep(2010, nrow(eusilc)),
                                rep(2011, nrow(eusilc))),
                       country = c(rep("AT", nrow(eusilc)),
                                   rep("AT", nrow(eusilc))))
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
PSU$inc &lt;- runif(nrow(PSU), 20, 100000)
dataset1 &lt;- merge(dataset1, PSU, all = TRUE, by = "db030")
PSU &lt;- eusilc &lt;- NULL
dataset1[, strata := c("XXXX")]
dataset1$pl085 &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
dataset1$month_at_work &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
dataset1[, id_l2 := paste0("V", .I)]
result &lt;- vardchangespoor(Y = "inc", age = "age",
                          pl085 = "pl085", month_at_work = "month_at_work",
                          Y_den = "inc", Y_thres = "inc",
                          wght_thres = "rb050",  H = "strata", 
                          PSU = "PSU", w_final="rb050",
                          ID_level1 = "db030",  ID_level2 = "id_l2",
                          Dom = c("rb090"), country = "country",
                          period = "year", sort = NULL,  
                          period1 = c(2010, 2011),
                          period2 = c(2011, 2010),
                          gender = NULL, dataset = dataset1,
                          percentage = 60, order_quant = 50L,
                          alpha = 20, confidence = 0.95,
                          type = "linrmpg")
result


</code></pre>

<hr>
<h2 id='vardchangstrs'>Variance estimation for measures of annual net change or annual for single stratified sampling designs</h2><span id='topic+vardchangstrs'></span>

<h3>Description</h3>

<p>Computes the variance estimation for measures of annual net change or annual for single stratified sampling designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardchangstrs(
  Y,
  H,
  PSU,
  w_final,
  Dom = NULL,
  periods = NULL,
  dataset,
  periods1,
  periods2,
  in_sample,
  in_frame,
  confidence = 0.95,
  percentratio = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardchangstrs_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_periods">periods</code></td>
<td>
<p>Variable for the all survey periods. The values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_periods1">periods1</code></td>
<td>
<p>The vector of periods from variable <code>periods</code> describes the first period for measures of change.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_periods2">periods2</code></td>
<td>
<p>The vector of periods from variable <code>periods</code> describes the second period for measures of change.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_in_sample">in_sample</code></td>
<td>
<p>Sample variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_in_frame">in_frame</code></td>
<td>
<p>Frame variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_confidence">confidence</code></td>
<td>
<p>optional; either a positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardchangstrs_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>crossectional_results</code> - a <code>data.table</code> containing: <br />
<code>year</code> -  survey years, <br />
<code>subperiods</code> -  survey sub-periods, <br />
<code>variable</code> - names of variables of interest, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance of cross-sectional and longitudinal measures, <br />
<code>sd_w</code> - the estimated weighted variance of simple random sample, <br />
<code>se</code> - the estimated standard error of cross-sectional or longitudinal, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br /> 
<code>confidence_level</code> - the positive value for confidence interval.
</p>
</li>
<li> <p><code>annual_results</code> - a <code>data.table</code> containing:
<code>year_1</code> -  survey years of <code>years1</code> for measures of annual net change, <br />
<code>year_2</code> -  survey years of <code>years2</code> for measures of annual net change, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>variable</code> - names of variables of interest, <br />
<code>estim_2</code> - the estimated value for period2 for measures of annual net change, <br />
<code>estim_1</code> - the estimated value for period1 for measures of annual net change, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error for period1 for measures of annual, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage for measures of annual, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br /> 
<code>significant</code> - is the the difference significant
</p>
</li></ul>



<h3>References</h3>

<p>Guillaume OSIER, Virginie RAYMOND, (2015), Development of methodology for the estimate of variance of annual net changes for LFS-based indicators. Deliverable 1 - Short document with derivation of the methodology.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vardchanges">vardchanges</a></code>,
<code><a href="#topic+vardannual">vardannual</a></code>
</p>

<hr>
<h2 id='vardcros'>Variance estimation for cross-sectional, longitudinal measures for single and multistage stage cluster sampling designs</h2><span id='topic+vardcros'></span>

<h3>Description</h3>

<p>Computes the variance estimation for cross-sectional and longitudinal measures for any stage cluster sampling designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardcros(
  Y,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  Z = NULL,
  gender = NULL,
  country = NULL,
  period,
  dataset = NULL,
  X = NULL,
  countryX = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  linratio = FALSE,
  percentratio = 1,
  use.estVar = FALSE,
  ID_level1_max = TRUE,
  outp_res = FALSE,
  withperiod = TRUE,
  netchanges = TRUE,
  confidence = 0.95,
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardcros_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_z">Z</code></td>
<td>
<p>Optional variables of denominator for ratio estimation. If supplied, the ratio estimation is computed. Object convertible to <code>data.table</code> or variable names as character, column numbers. This variable is <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_country">country</code></td>
<td>
<p>Variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_period">period</code></td>
<td>
<p>Variable for the survey periods. The values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_countryx">countryX</code></td>
<td>
<p>Optional variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the survey periods and countries. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_linratio">linratio</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then the linearized variables for the ratio estimator is used for variance estimation. If value is <code>FALSE</code>, then the gradients is used for variance estimation.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_use.estvar">use.estVar</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then <code>R</code> function <code>estVar</code> is used for the  estimation of covariance matrix of the residuals. If value is <code>FALSE</code>, then <code>R</code> function <code>estVar</code> is not used for the estimation of covariance matrix of the residuals.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_id_level1_max">ID_level1_max</code></td>
<td>
<p>Logical value. If value is <code>TRUE</code>, then the size of sample for variance under simple random sampling is taken as maximum value of size in ID_level1 . If value is <code>FALSE</code>, then the size of sample for variance under simple random sampling is taken as count of ID_level2 in ID_level1.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_withperiod">withperiod</code></td>
<td>
<p>Logical value. If <code>TRUE</code> is value, the results is with period, if <code>FALSE</code>, without period.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_netchanges">netchanges</code></td>
<td>
<p>Logical value. If value is TRUE, then produce two objects: the first object is aggregation of weighted data by period (if available), country, strata and PSU, the second object is an estimation for Y, the variance, gradient for numerator and denominator by country and period (if available). If value is FALSE, then both objects containing <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardcros_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with four objects are returned by the function:
</p>

<ul>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU.
</p>
</li>
<li> <p><code>data_net_changes</code> - a <code>data.table</code> containing aggregation of weighted data by period (if available) and countries (if available), country, strata, PSU.
</p>
</li>
<li> <p><code>var_grad</code> - a <code>data.table</code> containing estimation for Y, the variance, gradient for numerator and denominator by period, country (if available) and population domains (if available).
</p>
</li>
<li><p> results A <code>data.table</code> containing: <br />
<code>period</code> -  survey periods, <br />
<code>country</code> - survey countries (if available), <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>namesY</code> - names of variables of interest, <br />
<code>namesZ</code> - optional variable for names of denominator for ratio estimation, <br />
<code>sample_size</code> - the sample size (in numbers of individuals), <br />
<code>pop_size</code> - the population size (in numbers of individuals), <br />
<code>total</code> - the estimated totals, <br />
<code>variance</code> - the estimated variance of cross-sectional or longitudinal measures, <br />
<code>sd_w</code> - the estimated weighted variance of simple random sample, <br />
<code>sd_nw</code> - the estimated variance estimation of simple random sample, <br />
<code>pop</code> - the population size (in numbers of households), <br />
<code>sampl_siz</code> - the sample size (in numbers of households), <br />
<code>stderr_w</code> - the estimated weighted standard error of simple random sample, <br />
<code>stderr_nw</code> - the estimated standard error of simple random sample, <br />
<code>se</code> - the estimated standard error of cross-sectional or longitudinal, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval.
</p>
</li></ul>



<h3>References</h3>

<p>Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+lin.ratio">lin.ratio</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")

# Example 1
data(eusilc)
set.seed(1)
dataset1 &lt;- data.table(eusilc)
dataset1[, year := 2010]
dataset1[, country := "AT"]
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
dataset1 &lt;- merge(dataset1, PSU, by = "db030", all = TRUE)
PSU &lt;- eusilc &lt;- 0
  
dataset1[, strata := "XXXX"]
dataset1[, t_pov := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_dep := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_lwi := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, exp := 1]
dataset1[, exp2 := 1 * (age &lt; 60)]
  
# At-risk-of-poverty (AROP)
dataset1[, pov := ifelse (t_pov == 1, 1, 0)]
  
# Severe material deprivation (DEP)
dataset1[, dep := ifelse (t_dep == 1, 1, 0)]
  
# Low work intensity (LWI)
dataset1[, lwi := ifelse (t_lwi == 1 &amp; exp2 == 1, 1, 0)]
  
# At-risk-of-poverty or social exclusion (AROPE)
dataset1[, arope := ifelse (pov == 1 | dep == 1 | lwi == 1, 1, 0)]

result11 &lt;- vardcros(Y="arope", H = "strata",
                     PSU = "PSU", w_final = "rb050",
                     ID_level1 = "db030", ID_level2 = "rb030",
                     Dom = "rb090", Z = NULL, country = "country",
                     period = "year", dataset = dataset1,
                     linratio = FALSE, withperiod = TRUE,
                     netchanges = TRUE, confidence = .95)
   
## Not run: 
# Example 2
data(eusilc)
set.seed(1)
dataset1 &lt;- data.table(rbind(eusilc, eusilc),
                       year = c(rep(2010, nrow(eusilc)),
                                rep(2011, nrow(eusilc))))
dataset1[, country := "AT"]
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
dataset1 &lt;- merge(dataset1, PSU, by = "db030", all = TRUE)
PSU &lt;- eusilc &lt;- 0
dataset1[, strata := "XXXX"]
dataset1[, strata := as.character(strata)]
dataset1[, t_pov := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_dep := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, t_lwi := trunc(runif(nrow(dataset1), 0, 2))]
dataset1[, exp := 1]
dataset1[, exp2 := 1 * (age &lt; 60)]
    
# At-risk-of-poverty (AROP)
dataset1[, pov := ifelse(t_pov == 1, 1, 0)]
    
# Severe material deprivation (DEP)
dataset1[, dep := ifelse(t_dep == 1, 1, 0)]
    
# Low work intensity (LWI)
dataset1[, lwi := ifelse(t_lwi == 1 &amp; exp2 == 1, 1, 0)]
    
# At-risk-of-poverty or social exclusion (AROPE)
dataset1[, arope := ifelse(pov == 1 | dep == 1 | lwi == 1, 1, 0)]
    
result11 &lt;- vardcros(Y = c("pov", "dep", "arope"),
                     H = "strata", PSU = "PSU", w_final = "rb050",
                     ID_level1 = "db030", ID_level2 = "rb030",
                     Dom = "rb090", Z = NULL, country = "country",
                     period = "year", dataset = dataset1,
                     linratio = FALSE, withperiod = TRUE,
                     netchanges = TRUE, confidence = .95)
    
dataset2 &lt;- dataset1[exp2 == 1]
result12 &lt;- vardcros(Y = c("lwi"), H = "strata",
                     PSU = "PSU", w_final = "rb050",
                     ID_level1 = "db030", ID_level2 = "rb030",
                     Dom = "rb090", Z = NULL,
                     country = "country", period = "year",
                     dataset = dataset2, linratio = FALSE, 
                     withperiod = TRUE, netchanges = TRUE,
                     confidence = .95)
    
### Example 3
data(eusilc)
set.seed(1)
year &lt;- 2011
dataset1 &lt;- data.table(rbind(eusilc, eusilc, eusilc, eusilc),
                       rb010 = c(rep(2008, nrow(eusilc)),
                                 rep(2009, nrow(eusilc)),
                                 rep(2010, nrow(eusilc)),
                                 rep(2011, nrow(eusilc))))
dataset1[, rb020 := "AT"]
        
dataset1[, u := 1]
dataset1[age &lt; 0, age := 0]
dataset1[, strata := "XXXX"]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N:=NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
dataset1 &lt;- merge(dataset1, PSU, by = "db030", all = TRUE)
thres &lt;- data.table(rb020 = as.character(rep("AT", 4)),
                   thres = c(11406, 11931, 12371, 12791),
                   rb010 = 2008:2011)
dataset1 &lt;- merge(dataset1, thres, all.x = TRUE, by = c("rb010", "rb020"))
dataset1[is.na(u), u := 0]
dataset1 &lt;- dataset1[u == 1]
    
#############
# T3        #
#############
    
T3 &lt;- dataset1[rb010 == year - 3]
T3[, strata1 := strata]
T3[, PSU1 := PSU]
T3[, w1 := rb050]
T3[, inc1 := eqIncome]
T3[, rb110_1 := db030]
T3[, pov1 := inc1 &lt;= thres]
T3 &lt;- T3[, c("rb020", "rb030", "strata", "PSU", "inc1", "pov1"), with = FALSE]
    
#############
# T2        #
#############
T2 &lt;- dataset1[rb010 == year - 2]
T2[, strata2 := strata]
T2[, PSU2 := PSU]
T2[, w2 := rb050]
T2[, inc2 := eqIncome]
T2[, rb110_2 := db030]
setnames(T2, "thres", "thres2")
T2[, pov2 := inc2 &lt;= thres2]
T2 &lt;- T2[, c("rb020", "rb030", "strata2", "PSU2", "inc2", "pov2"), with = FALSE]
    
#############
# T1        #
#############
T1 &lt;- dataset1[rb010 == year - 1]
T1[, strata3 := strata]
T1[, PSU3 := PSU]
T1[, w3 := rb050]
T1[, inc3 := eqIncome]
T1[, rb110_3 := db030]
setnames(T1, "thres", "thres3")
T1[, pov3 := inc3 &lt;= thres3]
T1 &lt;- T1[, c("rb020", "rb030", "strata3", "PSU3", "inc3", "pov3"), with = FALSE]
    
#############
# T0        #
#############
T0 &lt;- dataset1[rb010 == year]
T0[, PSU4 := PSU]
T0[, strata4 := strata]
T0[, w4 := rb050]
T0[, inc4 := eqIncome]
T0[, rb110_4 := db030]
setnames(T0, "thres", "thres4")
T0[, pov4 := inc4 &lt;= thres4]
T0 &lt;- T0[, c("rb010", "rb020", "rb030", "strata4", "PSU4", "w4", "inc4", "pov4"), with = FALSE]
apv &lt;- merge(T3, T2, all = TRUE, by = c("rb020", "rb030"))
apv &lt;- merge(apv, T1, all = TRUE, by = c("rb020", "rb030"))
apv &lt;- merge(apv, T0, all = TRUE, by = c("rb020", "rb030"))
apv &lt;- apv[(!is.na(inc1)) &amp; (!is.na(inc2)) &amp; (!is.na(inc3)) &amp; (!is.na(inc4))]
apv[, ppr := ifelse(((pov4 == 1) &amp; ((pov1 == 1 &amp; pov2 == 1 &amp; pov3 == 1) 
                                  | (pov1 == 1 &amp; pov2 == 1 &amp; pov3 == 0)
                                  | (pov1 == 1 &amp; pov2 == 0 &amp; pov3 == 1)
                                  | (pov1 == 0 &amp; pov2 ==1 &amp; pov3 == 1))), 1, 0)]
                                  
result20 &lt;- vardcros(Y = "ppr", H = "strata", PSU = "PSU",
                     w_final = "w4", ID_level1 = "rb030",
                     ID_level2 = "rb030", Dom = NULL,
                     Z = NULL, country = "rb020",
                     period = "rb010", dataset = apv,
                     linratio = FALSE, 
                     withperiod = TRUE,
                     netchanges = FALSE,
                     confidence = .95)
result20
## End(Not run)


</code></pre>

<hr>
<h2 id='vardcrospoor'>Variance estimation for cross-sectional, longitudinal measures for indicators on social exclusion and poverty</h2><span id='topic+vardcrospoor'></span>

<h3>Description</h3>

<p>Computes the variance estimation for cross-sectional and longitudinal measures for indicators on social exclusion and poverty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardcrospoor(
  Y,
  age = NULL,
  pl085 = NULL,
  month_at_work = NULL,
  Y_den = NULL,
  Y_thres = NULL,
  wght_thres = NULL,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  country = NULL,
  period,
  sort = NULL,
  gender = NULL,
  dataset = NULL,
  X = NULL,
  countryX = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  percentage = 60,
  order_quant = 50,
  alpha = 20,
  use.estVar = FALSE,
  withperiod = TRUE,
  netchanges = TRUE,
  confidence = 0.95,
  outp_lin = FALSE,
  outp_res = FALSE,
  type = "linrmpg",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardcrospoor_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_age">age</code></td>
<td>
<p>Age variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_pl085">pl085</code></td>
<td>
<p>Retirement variable (Number of months spent in retirement or early retirement). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_month_at_work">month_at_work</code></td>
<td>
<p>Variable for total number of month at work (sum of the number of months spent at full-time work as employee, number of months spent at part-time work as employee, number of months spent at full-time work as self-employed (including family worker), number of months spent at part-time work as self-employed (including family worker)).  One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_y_den">Y_den</code></td>
<td>
<p>Denominator variable (for example gross individual earnings). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_y_thres">Y_thres</code></td>
<td>
<p>Variable (for example equalized disposable income) used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>). Variable specified for <code>inc</code> is used as <code>income_thres</code> if <code>income_thres</code> is  not defined.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_wght_thres">wght_thres</code></td>
<td>
<p>Weight variable used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>weight</code> is used as <code>wght_thres</code> if <code>wght_thres</code> is not defined.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_country">country</code></td>
<td>
<p>Variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_period">period</code></td>
<td>
<p>Variable for the survey periods. The values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_countryx">countryX</code></td>
<td>
<p>Optional variable for the survey countries. The values for each country are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the survey periods and countries. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">p</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">\alpha</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_alpha">alpha</code></td>
<td>
<p>a numeric value in range <code class="reqn">[0,100]</code> for the order of the income quantile share ratio (in percentage).</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_withperiod">withperiod</code></td>
<td>
<p>Logical value. If <code>TRUE</code> is value, the results is with period, if <code>FALSE</code>, without period.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_netchanges">netchanges</code></td>
<td>
<p>Logical value. If value is TRUE, then produce two objects: the first object is aggregation of weighted data by period (if available), country, strata and PSU, the second object is an estimation for Y, the variance, gradient for numerator and denominator by country and period (if available). If value is FALSE, then both objects containing <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_type">type</code></td>
<td>
<p>a character vector (of length one unless several.ok is TRUE), example &quot;linarpr&quot;,&quot;linarpt&quot;, &quot;lingpg&quot;, &quot;linpoormed&quot;, &quot;linrmpg&quot;, &quot;lingini&quot;, &quot;lingini2&quot;, &quot;linqsr&quot;, &quot;linarr&quot;, &quot;linrmir&quot;.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
<tr><td><code id="vardcrospoor_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional</p>
</td></tr></table>
<p>variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.
</p>
<table>
<tr><td><code id="vardcrospoor_+3A_use.estvar">use.estVar</code></td>
<td>
<p>Logical</p>
</td></tr></table>
<p>value. If value is <code>TRUE</code>, then <code>R</code> function <code>estVar</code> is used for the  estimation of covariance matrix of the residuals. If value is <code>FALSE</code>, then <code>R</code> function <code>estVar</code> is not used for the estimation of covariance matrix of the residuals.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>lin_out</code> - a <code>data.table</code> containing the linearized values of the ratio estimator with ID_level2 and PSU.
</p>
</li>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU.
</p>
</li>
<li> <p><code>data_net_changes</code> - a <code>data.table</code> containing aggregation of weighted data by period (if available), country, strata, PSU.
</p>
</li>
<li> <p><code>results</code> - a <code>data.table</code> containing: <br />
<code>period</code> -  survey periods, <br />
<code>country</code> - survey countries, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>type</code> - type variable, <br />
<code>count_respondents</code> - the count of respondents, <br />
<code>pop_size</code> - the population size (in numbers of individuals), <br />
<code>estim</code> - the estimated value, <br />
<code>se</code> - the estimated standard error, <br />
<code>var</code> - the estimated variance, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage.</p>
</li></ul>



<h3>References</h3>

<p>Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>.
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a>
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+linrmir">linrmir</a></code>,
<code><a href="#topic+linarr">linarr</a></code>,
<code><a href="#topic+vardchanges">vardchanges</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("data.table")
library("laeken")
data(eusilc)
set.seed(1)
dataset1 &lt;- data.table(rbind(eusilc, eusilc),
                       year = c(rep(2010, nrow(eusilc)),
                                rep(2011, nrow(eusilc))))
dataset1[age &lt; 0, age := 0]
PSU &lt;- dataset1[, .N, keyby = "db030"][, N := NULL]
PSU[, PSU := trunc(runif(nrow(PSU), 0, 100))]
PSU$inc &lt;- runif(nrow(PSU), 20, 100000)
dataset1 &lt;- merge(dataset1, PSU, all = TRUE, by = "db030")
PSU &lt;- eusilc &lt;- NULL
dataset1[, strata := "XXXX"]
dataset1[, strata := as.character(strata)]
dataset1$pl085 &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
dataset1$month_at_work &lt;- 12 * trunc(runif(nrow(dataset1), 0, 2))
dataset1[, id_l2 := paste0("V", .I)]

result &lt;- vardcrospoor(Y = "inc", age = "age",
                       pl085 = "pl085", 
                       month_at_work = "month_at_work",
                       Y_den = "inc", Y_thres = "inc",
                       wght_thres = "rb050",
                       H = "strata", PSU = "PSU", 
                       w_final = "rb050", ID_level1 = "db030",
                       ID_level2 = "id_l2",
                       Dom = c("rb090", "db040"),
                       country = NULL, period = "year",
                       sort = NULL, gender = NULL,
                       dataset = dataset1,
                       percentage = 60,
                       order_quant = 50L,
                       alpha = 20,
                       confidence = 0.95,
                       type = "linrmpg")
 
 ## Not run: 
 result2 &lt;- vardcrospoor(Y = "inc", age = "age",
                         pl085 = "pl085", 
                         month_at_work = "month_at_work",
                         Y_den = "inc", Y_thres = "inc",
                         wght_thres = "rb050",
                         H = "strata", PSU = "PSU", 
                         w_final = "rb050", ID_level1 = "db030",
                         ID_level2 = "id_l2",
                         Dom = c("rb090", "db040"),
                         period = "year", sort = NULL,
                         gender = NULL, dataset = dataset1,
                         percentage = 60,
                         order_quant = 50L,
                         alpha = 20,
                         confidence = 0.95,
                         type = "linrmpg")
result2
## End(Not run)
  
</code></pre>

<hr>
<h2 id='vardom'>Variance estimation of the sample surveys in domain by the ultimate cluster method</h2><span id='topic+vardom'></span>

<h3>Description</h3>

<p>Computes the variance estimation of the sample surveys in domain by the ultimate cluster method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardom(
  Y,
  H,
  PSU,
  w_final,
  id = NULL,
  Dom = NULL,
  period = NULL,
  PSU_sort = NULL,
  N_h = NULL,
  fh_zero = FALSE,
  PSU_level = TRUE,
  Z = NULL,
  X = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  dataset = NULL,
  confidence = 0.95,
  percentratio = 1,
  outp_lin = FALSE,
  outp_res = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardom_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables of interest are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, residual estimation of calibration is done independently for each time period. One dimensional object convertible to one-column <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardom_+3A_psu_sort">PSU_sort</code></td>
<td>
<p>optional; if PSU_sort is defined, then variance is calculated for systematic sample.</p>
</td></tr>
<tr><td><code id="vardom_+3A_n_h">N_h</code></td>
<td>
<p>Number of primary sampling units in population for each stratum (and period if <code>period</code> is not <code>NULL</code>). If <code>N_h = NULL</code> and <code>fh_zero = FALSE</code> (default), <code>N_h</code> is estimated from sample data as sum of weights (<code>w_final</code>) in each stratum (and period if <code>period</code> is not <code>NULL</code>). Optional for single-stage sampling design as it will be estimated from sample data. Recommended for multi-stage sampling design as <code>N_h</code> can not be correctly estimated from the sample data in this case. If <code>N_h</code> is not used in case of multi-stage sampling design (for example, because this information is not available), it is advisable to set <code>fh_zero = TRUE</code>. If <code>period</code> <b>is</b> <code>NULL</code>. A two-column matrix with rows for each stratum. The first column should contain stratum code. The second column - the number of primary sampling units in the population of each stratum. If <code>period</code> <b>is not</b> <code>NULL</code>. A three-column matrix with rows for each intersection of strata and period. The first column should contain period. The second column should contain stratum code. The third column - the number of primary sampling units in the population of each stratum and period.</p>
</td></tr>
<tr><td><code id="vardom_+3A_fh_zero">fh_zero</code></td>
<td>
<p>by default FALSE; <code>fh</code> is calculated as division of n_h and N_h in each strata, if TRUE, <code>fh</code> value is zero in each strata.</p>
</td></tr>
<tr><td><code id="vardom_+3A_psu_level">PSU_level</code></td>
<td>
<p>by default TRUE; if PSU_level is TRUE, in each strata <code>fh</code> is calculated as division of count of PSU in sample (n_h) and count of PSU in frame(N_h). if PSU_level is FALSE, in each strata <code>fh</code> is calculated as division of count of units in sample (n_h) and count of units in frame (N_h), which calculated as sum of weights.</p>
</td></tr>
<tr><td><code id="vardom_+3A_z">Z</code></td>
<td>
<p>Optional variables of denominator for ratio estimation. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardom_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardom_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="vardom_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="vardom_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate variance estimation in domains based on book of Hansen, Hurwitz and Madow.
</p>


<h3>Value</h3>

<p>A list with objects is returned by the function:
</p>

<ul>
<li> <p><code>lin_out</code> - a <code>data.table</code> containing the linearized values of the ratio estimator with id and PSU.
</p>
</li>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with id and PSU.
</p>
</li>
<li> <p><code>betas</code> - a numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li>
<li> <p><code>all_result</code> - a <code>data.table</code>, which containing variables:
<code>variable</code> - names of variables of interest, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>period</code> - optional variable of the survey periods, <br />
<code>respondent_count</code> - the count of respondents, <br />
<code>pop_size</code> - the estimated size of population, <br />
<code>n_nonzero</code> - the count of respondents, who answers are larger than zero, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br />       
<code>S2_y_HT</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using non-calibrated weights, <br />
<code>S2_y_ca</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using calibrated weights, <br />
<code>S2_res</code> - the estimated variance of the regression residuals, <br />
<code>var_srs_HT</code> - the estimated variance of the HT estimator under SRS, <br />
<code>var_cur_HT</code> - the estimated variance of the HT estimator under current design, <br />
<code>var_srs_ca</code> - the estimated variance of the calibrated estimator under SRS, <br />
<code>deff_sam</code> - the estimated design effect of sample design, <br />
<code>deff_est</code> - the estimated design effect of estimator, <br />
<code>deff</code> - the overall estimated design effect of sample design and estimator, <br />
<code>n_eff</code> - the effective sample size.
</p>
</li></ul>



<h3>References</h3>

<p>Morris H. Hansen, William N. Hurwitz, William G. Madow, (1953), Sample survey methods and theory Volume I Methods and applications, 257-258, Wiley. <br />
Guillaume Osier and Emilio Di Meglio. The linearisation approach implemented by Eurostat for the first wave of EU-SILC: what could be done from the second wave onwards? 2012 <br />
Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>. <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,   
<code><a href="#topic+lin.ratio">lin.ratio</a></code>,
<code><a href="#topic+residual_est">residual_est</a></code>,
<code><a href="#topic+vardomh">vardomh</a></code>,
<code><a href="#topic+var_srs">var_srs</a></code>,
<code><a href="#topic+variance_est">variance_est</a></code>,
<code><a href="#topic+variance_othstr">variance_othstr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data(eusilc)
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)

aa &lt;- vardom(Y = "eqIncome", H = "db040", PSU = "db030",
             w_final = "rb050", id = "rb030", Dom = "db040",
             period = NULL, N_h = NULL, Z = NULL,
             X = NULL, g = NULL, q = NULL, dataset = dataset1,
             confidence = .95, percentratio = 100, 
             outp_lin = TRUE, outp_res = TRUE)


</code></pre>

<hr>
<h2 id='vardom_othstr'>Variance estimation for sample surveys in domain by the two stratification</h2><span id='topic+vardom_othstr'></span>

<h3>Description</h3>

<p>Computes the variance estimation for sample surveys in domain by the two stratification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardom_othstr(
  Y,
  H,
  H2,
  PSU,
  w_final,
  id = NULL,
  Dom = NULL,
  period = NULL,
  N_h = NULL,
  N_h2 = NULL,
  Z = NULL,
  X = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  dataset = NULL,
  confidence = 0.95,
  percentratio = 1,
  outp_lin = FALSE,
  outp_res = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardom_othstr_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_h2">H2</code></td>
<td>
<p>The unit new stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_id">id</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, linearization of the at-risk-of-poverty rate is done for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, residual estimation of calibration is done independently for each time period. One dimensional object convertible to one-column <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_n_h">N_h</code></td>
<td>
<p>optional data object convertible to <code>data.table</code>. If period is supplied, the time period is at the beginning of the object and after time period in the object is stratum. If period is not supplied, the first column in the object is stratum. In the last column is the total of the population in each stratum.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_n_h2">N_h2</code></td>
<td>
<p>optional data object convertible to <code>data.table</code>. If period is supplied, the time period is at the beginning of the object and after time period in the object is new stratum. If period is not supplied, the first column in the object is new stratum. In the last column is the total of the population in each stratum.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_z">Z</code></td>
<td>
<p>optional variables of denominator for ratio estimation. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="vardom_othstr_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive</p>
</td></tr></table>
<p>numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>lin_out</code> - a <code>data.table</code> containing the linearized values of the ratio estimator with id and PSU.
</p>
</li>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with id and PSU.
</p>
</li>
<li> <p><code>betas</code> - a numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li>
<li> <p><code>s2g</code> - a <code>data.table</code> containing the s^2g value.
</p>
</li>
<li> <p><code>all_result</code> - a <code>data.table</code>, which containing variables: <br />
<code>respondent_count</code> - the count of respondents, <br />
<code>pop_size</code> - the estimated size of population, <br />
<code>n_nonzero</code> - the count of respondents, who answers are larger than zero, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br />       
<code>var_srs_HT</code> - the estimated variance of the HT estimator under SRS, <br />
<code>var_cur_HT</code> - the estimated variance of the HT estimator under current design, <br />
<code>var_srs_ca</code> - the estimated variance of the calibrated estimator under SRS, <br />
<code>deff_sam</code> - the estimated design effect of sample design, <br />
<code>deff_est</code> - the estimated design effect of estimator, <br />
<code>deff</code> - the overall estimated design effect of sample design and estimator. <br />
</p>
</li></ul>



<h3>References</h3>

<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>. <br />
M. Liberts. (2004) Non-response Analysis and Bias Estimation in a Survey on Transportation of Goods by Road. <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+lin.ratio">lin.ratio</a></code>,
<code><a href="#topic+residual_est">residual_est</a></code>,
<code><a href="#topic+vardomh">vardomh</a></code>,
<code><a href="#topic+var_srs">var_srs</a></code>,
<code><a href="#topic+variance_est">variance_est</a></code>,
<code><a href="#topic+variance_othstr">variance_othstr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("laeken")
library("data.table")
data("eusilc")
  
# Example 1
eusilc1 &lt;- eusilc[1:1000, ]
dataset1 &lt;- data.table(IDd = paste0("V", 1:nrow(eusilc1)), eusilc1)
dataset1[, db040_2 := get("db040")]
N_h2 &lt;- dataset1[, sum(rb050, na.rm = FALSE), keyby = "db040_2"]
  
aa &lt;- vardom_othstr(Y = "eqIncome", H = "db040", H2 = "db040_2",  
                    PSU = "db030", w_final = "rb050", id = "rb030",
                    Dom = "db040", period = NULL, N_h = NULL,
                    N_h2 = N_h2, Z = NULL, X = NULL, g = NULL,
                    q = NULL, dataset = dataset1, confidence = .95,           
                    outp_lin = TRUE, outp_res = TRUE)
  
## Not run: 
# Example 2
dataset1 &lt;- data.table(IDd = 1:nrow(eusilc), eusilc)
dataset1[, db040_2 := get("db040")]
N_h2 &lt;- dataset1[, sum(rb050, na.rm = FALSE), keyby = "db040_2"]
    
aa &lt;- vardom_othstr(Y = "eqIncome", H = "db040", H2 = "db040_2",
                    PSU = "db030", w_final = "rb050", id = "rb030",
                    Dom = "db040", period = NULL, N_h2 = N_h2,
                    Z = NULL, X = NULL, g = NULL, dataset = dataset1,
                    q = NULL, confidence = .95, outp_lin = TRUE,
                    outp_res = TRUE)
 aa
## End(Not run)


</code></pre>

<hr>
<h2 id='vardomh'>Variance estimation for sample surveys in domain for one or two stage surveys by the ultimate cluster method</h2><span id='topic+vardomh'></span>

<h3>Description</h3>

<p>Computes the variance estimation in domain for ID_level1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vardomh(
  Y,
  H,
  PSU,
  w_final,
  ID_level1,
  ID_level2,
  Dom = NULL,
  period = NULL,
  N_h = NULL,
  PSU_sort = NULL,
  fh_zero = FALSE,
  PSU_level = TRUE,
  Z = NULL,
  dataset = NULL,
  X = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  confidence = 0.95,
  percentratio = 1,
  outp_lin = FALSE,
  outp_res = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vardomh_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_id_level2">ID_level2</code></td>
<td>
<p>Variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, values are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_period">period</code></td>
<td>
<p>Optional variable for the survey periods. If supplied, the values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_n_h">N_h</code></td>
<td>
<p>Number of primary sampling units in population for each stratum (and period if <code>period</code> is not <code>NULL</code>). If <code>N_h = NULL</code> and <code>fh_zero = FALSE</code> (default), <code>N_h</code> is estimated from sample data as sum of weights (<code>w_final</code>) in each stratum (and period if <code>period</code> is not <code>NULL</code>)
Optional for single-stage sampling design as it will be estimated from sample data. Recommended for multi-stage sampling design as <code>N_h</code> can not be correctly estimated from the sample data in this case. If <code>N_h</code> is not used in case of multi-stage sampling design (for example, because this information is not available), it is advisable to set <code>fh_zero = TRUE</code>.
If <code>period</code> <b>is</b> <code>NULL</code>. A two-column data object convertible to <code>data.table</code> with rows for each stratum. The first column should contain stratum code. The second column - the number of primary sampling units in the population of each stratum.
If <code>period</code> <b>is not</b> <code>NULL</code>. A three-column data object convertible to <code>data.table</code> with rows for each intersection of strata and period. The first column should contain period. The second column should contain stratum code. The third column - the number of primary sampling units in the population of each stratum and period.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_psu_sort">PSU_sort</code></td>
<td>
<p>optional; if PSU_sort is defined, then variance is calculated for systematic sample.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_fh_zero">fh_zero</code></td>
<td>
<p>by default FALSE; <code>fh</code> is calculated as division of n_h and N_h in each strata, if TRUE, <code>fh</code> value is zero in each strata.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_psu_level">PSU_level</code></td>
<td>
<p>by default TRUE; if PSU_level is TRUE, in each strata <code>fh</code> is calculated as division of count of PSU in sample (n_h) and count of PSU in frame (N_h). if PSU_level is FALSE, in each strata <code>fh</code> is calculated as division of count of units in sample (n_h) and count of units in frame (N_h), which calculated as sum of weights.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_z">Z</code></td>
<td>
<p>Optional variables of denominator for ratio estimation. Object convertible to <code>data.table</code> or variable names as character, column numbers or logical vector (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="vardomh_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the survey periods. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in level1 convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_percentratio">percentratio</code></td>
<td>
<p>Positive numeric value. All linearized variables are multiplied with <code>percentratio</code> value, by default - 1.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="vardomh_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate variance estimation in domains for household surveys based on book of Hansen, Hurwitz and Madow.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li><p> lin_out A <code>data.table</code> containing the linearized values of the ratio estimator with ID_level2 and PSU.
</p>
</li>
<li><p> res_out A <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU.
</p>
</li>
<li><p> betas A numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li>
<li><p> all_result A <code>data.table</code>, which containing variables:
<code>variable</code> - names of variables of interest, <br />
<code>Dom</code> - optional variable of the population domains, <br />
<code>period</code> - optional variable of the survey periods, <br />
<code>respondent_count</code> - the count of respondents, <br />
<code>pop_size</code> - the estimated size of population, <br />
<code>n_nonzero</code> - the count of respondents, who answers are larger than zero, <br />
<code>estim</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br />
<code>S2_y_HT</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using non-calibrated weights, <br />
<code>S2_y_ca</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using calibrated weights, <br />       <code>S2_res</code> - the estimated variance of the regression residuals, <br />
<code>S2_res</code> - the estimated variance of the regression residuals, <br />
<code>var_srs_HT</code> - the estimated variance of the HT estimator under SRS for household, <br />
<code>var_cur_HT</code> - the estimated variance of the HT estimator under current design for household, <br />
<code>var_srs_ca</code> - the estimated variance of the calibrated estimator under SRS for household, <br />
<code>deff_sam</code> - the estimated design effect of sample design for household, <br />
<code>deff_est</code> - the estimated design effect of estimator for household, <br />
<code>deff</code> - the overall estimated design effect of sample design and estimator for household
</p>
</li></ul>



<h3>References</h3>

<p>Morris H. Hansen, William N. Hurwitz, William G. Madow, (1953), Sample survey methods and theory Volume I Methods and applications, 257-258, Wiley. <br />
Guillaume Osier and Emilio Di Meglio. The linearisation approach implemented by Eurostat for the first wave of EU-SILC: what could be done from the second wave onwards? 2012 <br />
Guillaume Osier,  Yves Berger,  Tim Goedeme, (2013), Standard error estimation for the EU-SILC indicators of poverty and social exclusion,  Eurostat Methodologies and Working papers, URL <a href="http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF">http://ec.europa.eu/eurostat/documents/3888793/5855973/KS-RA-13-024-EN.PDF</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>. <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,
<code><a href="#topic+lin.ratio">lin.ratio</a></code>,
<code><a href="#topic+residual_est">residual_est</a></code>,
<code><a href="#topic+var_srs">var_srs</a></code>,
<code><a href="#topic+variance_est">variance_est</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset1 &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
aa &lt;- vardomh(Y = "eqIncome", H = "db040", PSU = "db030",
             w_final = "rb050", ID_level1 = "db030",
             ID_level2 = "rb030", Dom = "db040", period = NULL,
             N_h = NULL, Z = NULL, dataset = dataset1, X = NULL,
             X_ID_level1 = NULL, g = NULL, q = NULL, 
             datasetX = NULL, confidence = 0.95, percentratio = 1,
             outp_lin = TRUE, outp_res = TRUE)

## Not run: 
dataset2 &lt;- copy(dataset1)
dataset1$period &lt;- 1
dataset2$period &lt;- 2
dataset1 &lt;- data.table(rbind(dataset1, dataset2))

# by default without using fh_zero (finite population correction)
aa2 &lt;- vardomh(Y = "eqIncome", H = "db040", PSU = "db030",
               w_final = "rb050", ID_level1 = "db030",
               ID_level2 = "rb030", Dom = "db040", period = "period",
               N_h = NULL, Z = NULL, dataset = dataset1,
               X = NULL, X_ID_level1 = NULL,  
               g = NULL, q = NULL, datasetX = NULL,
               confidence = .95, percentratio = 1,
               outp_lin = TRUE, outp_res = TRUE)
aa2

# without using fh_zero (finite population correction)
aa3 &lt;- vardomh(Y = "eqIncome", H = "db040", PSU = "db030",
               w_final = "rb050", ID_level1 = "db030", 
               ID_level2 = "rb030", Dom = "db040",
               period = "period", N_h = NULL, fh_zero = FALSE, 
               Z = NULL, dataset = dataset1, X = NULL,
               X_ID_level1 = NULL, g = NULL, q = NULL,
               datasetX = NULL, confidence = .95,
               percentratio = 1, outp_lin = TRUE,
               outp_res = TRUE)
aa3

# with using fh_zero (finite population correction)
aa4 &lt;- vardomh(Y = "eqIncome", H = "db040", PSU = "db030",
               w_final = "rb050", ID_level1 = "db030",
               ID_level2 = "rb030", Dom = "db040",
               period = "period", N_h = NULL, fh_zero = TRUE, 
               Z = NULL, dataset = dataset1,
               X = NULL, X_ID_level1 = NULL, 
               g = NULL, q = NULL, datasetX = NULL,
               confidence = .95, percentratio = 1,
               outp_lin = TRUE, outp_res = TRUE)
aa4
## End(Not run)


</code></pre>

<hr>
<h2 id='variance_est'>Variance estimation for sample surveys by the ultimate cluster method</h2><span id='topic+variance_est'></span>

<h3>Description</h3>

<p>Computes the variance estimation by the ultimate cluster method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variance_est(
  Y,
  H,
  PSU,
  w_final,
  N_h = NULL,
  fh_zero = FALSE,
  PSU_level = TRUE,
  PSU_sort = NULL,
  period = NULL,
  dataset = NULL,
  msg = "",
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variance_est_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_n_h">N_h</code></td>
<td>
<p>Number of primary sampling units in population for each stratum (and period if <code>period</code> is not <code>NULL</code>). If <code>N_h = NULL</code> and <code>fh_zero = FALSE</code> (default), <code>N_h</code> is estimated from sample data as sum of weights (<code>w_final</code>) in each stratum (and period if <code>period</code> is not <code>NULL</code>).
Optional for single-stage sampling design as it will be estimated from sample data. Recommended for multi-stage sampling design as <code>N_h</code> can not be correctly estimated from the sample data in this case. If <code>N_h</code> is not used in case of multi-stage sampling design (for example, because this information is not available), it is advisable to set <code>fh_zero = TRUE</code>.
If <code>period</code> <b>is</b> <code>NULL</code>. A two-column matrix with rows for each stratum. The first column should contain stratum code. The second column - the number of primary sampling units in the population of each stratum.
If <code>period</code> <b>is not</b> <code>NULL</code>. A three-column matrix with rows for each intersection of strata and period. The first column should contain period. The second column should contain stratum code. The third column - the number of primary sampling units in the population of each stratum and period.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_fh_zero">fh_zero</code></td>
<td>
<p>by default FALSE; <code>fh</code> is calculated as division of n_h and N_h in each strata, if TRUE, <code>fh</code> value is zero in each strata.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_psu_level">PSU_level</code></td>
<td>
<p>by default TRUE; if PSU_level is TRUE, in each strata <code>fh</code> is calculated as division of count of PSU in sample (n_h) and count of PSU in frame (N_h). if PSU_level is FALSE, in each strata <code>fh</code> is calculated as division of count of units in sample (n_h) and count of units in frame (N_h), which calculated as sum of weights.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_psu_sort">PSU_sort</code></td>
<td>
<p>optional; if PSU_sort is defined, then variance is calculated for systematic sample.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_period">period</code></td>
<td>
<p>Optional variable for the survey periods. If supplied, the values for each period are computed independently. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_dataset">dataset</code></td>
<td>
<p>an optional name of the individual dataset  <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_msg">msg</code></td>
<td>
<p>an optional printed text, when function print error.</p>
</td></tr>
<tr><td><code id="variance_est_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If we assume that <code class="reqn">n_h \geq 2</code> for all <code class="reqn">h</code>, that is, two or more PSUs are selected from each stratum, then the variance of <code class="reqn">\hat{\theta}</code> can be estimated from the variation among the estimated PSU totals of the variable <code class="reqn">Z</code>:
</p>
<p style="text-align: center;"><code class="reqn">\hat{V} \left(\hat{\theta} \right)=\sum\limits_{h=1}^{H} \left(1-f_h \right) \frac{n_h}{n_{h}-1} \sum\limits_{i=1}^{n_h} \left( z_{hi\bullet}-\bar{z}_{h\bullet\bullet}\right)^2, </code>
</p>

<p>where
<code class="reqn">\bullet</code>
<code class="reqn">z_{hi\bullet}=\sum\limits_{j=1}^{m_{hi}} \omega_{hij} z_{hij}</code>
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">\bar{z}_{h\bullet\bullet}=\frac{\left( \sum\limits_{i=1}^{n_h} z_{hi\bullet} \right)}{n_h}</code>
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">f_h</code> is the sampling fraction of PSUs within stratum
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">h</code> is the stratum number, with a total of H strata
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">i</code> is the primary sampling unit (PSU) number within stratum <code class="reqn">h</code>, with a total of <code class="reqn">n_h</code> PSUs
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">j</code> is the household number within cluster <code class="reqn">i</code> of stratum <code class="reqn">h</code>, with a total of <code class="reqn">m_{hi}</code> household
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">w_{hij}</code> is the sampling weight for household <code class="reqn">j</code> in PSU <code class="reqn">i</code> of stratum <code class="reqn">h</code>
</p>
<p><code class="reqn">\bullet</code>
<code class="reqn">z_{hij}</code> denotes the observed value of the analysis variable <code class="reqn">z</code> for household <code class="reqn">j</code> in PSU <code class="reqn">i</code> of stratum <code class="reqn">h</code>
</p>


<h3>Value</h3>

<p>a <code>data.table</code> containing the  values of the variance estimation by totals.
</p>


<h3>References</h3>

<p>Morris H. Hansen, William N. Hurwitz, William G. Madow, (1953), Sample survey methods and theory Volume I Methods and applications, 257-258, Wiley. <br />
Guillaume Osier and Emilio Di Meglio. The linearisation approach implemented by Eurostat for the first wave of EU-SILC: what could be done from the second onwards? 2012 <br />
Eurostat Methodologies and Working papers, Standard error estimation for the EU-SILC indicators of poverty and social exclusion, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br /> 
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,   <code><a href="#topic+lin.ratio">lin.ratio</a></code>,    <code><a href="#topic+linarpr">linarpr</a></code>,
<code><a href="#topic+linarpt">linarpt</a></code>,  <code><a href="#topic+lingini">lingini</a></code>,      <code><a href="#topic+lingini2">lingini2</a></code>,
<code><a href="#topic+lingpg">lingpg</a></code>,   <code><a href="#topic+linpoormed">linpoormed</a></code>,   <code><a href="#topic+linqsr">linqsr</a></code>,
<code><a href="#topic+linrmpg">linrmpg</a></code>,  <code><a href="#topic+residual_est">residual_est</a></code>, <code><a href="#topic+vardom">vardom</a></code>,
<code><a href="#topic+vardomh">vardomh</a></code>, <code><a href="#topic+varpoord">varpoord</a></code>,     <code><a href="#topic+variance_othstr">variance_othstr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Ys &lt;- rchisq(10, 3)
w &lt;- rep(2, 10)
PSU &lt;- 1 : length(Ys)
H &lt;- rep("Strata_1", 10)

# by default without using fh_zero (finite population correction)
variance_est(Y = Ys, H = H, PSU = PSU, w_final = w)


## Not run: 
 # without using fh_zero (finite population correction)
 variance_est(Y = Ys, H = H, PSU = PSU, w_final = w, fh_zero = FALSE)
 
 # with using fh_zero (finite population correction)
 variance_est(Y = Ys, H = H, PSU = PSU, w_final = w, fh_zero = TRUE)
 
## End(Not run)

</code></pre>

<hr>
<h2 id='variance_othstr'>Variance estimation for sample surveys by the new stratification</h2><span id='topic+variance_othstr'></span>

<h3>Description</h3>

<p>Computes s2g and the variance estimation by the new stratification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variance_othstr(
  Y,
  H,
  H2,
  w_final,
  N_h = NULL,
  N_h2,
  period = NULL,
  dataset = NULL,
  checking = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variance_othstr_+3A_y">Y</code></td>
<td>
<p>Variables of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_h2">H2</code></td>
<td>
<p>The unit new stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_n_h">N_h</code></td>
<td>
<p>optional; either a <code>data.frame</code> giving the first column - stratum, but the second column - the total of the population in each stratum.</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_n_h2">N_h2</code></td>
<td>
<p>optional; either a <code>data.frame</code> giving the first column - new stratum, but the second column - the total of the population in each new stratum.</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_period">period</code></td>
<td>
<p>Optional variable for the survey periods. If supplied, the values for each period are computed independently. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number or logical vector with only one <code>TRUE</code> value (length of the vector has to be the same as the column count of <code>dataset</code>).</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="variance_othstr_+3A_checking">checking</code></td>
<td>
<p>Optional variable if this variable is TRUE, then function checks data preparation errors, otherwise not checked. This variable by default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is possible to compute population size <code class="reqn">M_g</code> from sampling frame. The standard deviation of <code class="reqn">g</code>-th stratum is
</p>
<p style="text-align: center;"><code class="reqn">S_g^2 =\frac{1}{M_g-1} \sum\limits_{k=1}^{M_g} \left(y_{gk}-\bar{Y}_g \right)^2= \frac{1}{M_g-1} \sum\limits_{k=1}^{M_g} y_{gk}^2 - \frac{M_g}{M_g-1}\bar{Y}_g^2</code>
</p>

<p><code class="reqn">\sum\limits_{k=1}^{M_g} y_{gk} ^2</code> and <code class="reqn">\bar{Y}_g^2</code> have to be estimated to estimate <code class="reqn">S_g^2</code>. Estimate of <code class="reqn">\sum\limits_{k=1}^{M_g} y_{gk}^2</code> is <code class="reqn">\sum\limits_{h=1}^{H} \frac{N_h}{n_h} \sum\limits_{i=1}^{n_h} y_{gi}^2 z_{hi}</code>, where
</p>
<p><code class="reqn"> z_{hi} = \left\{
 \begin{array}{ll}
 0, &amp; h_i \notin \theta_g \\
 1, &amp; h_i \in \theta_g
 \end{array}
 \right. </code>
, <code class="reqn">\theta_g</code>  is the index group of successfully surveyed units belonging to <code class="reqn">g</code>-th stratum. #'Estimate of <code class="reqn">\bar{Y}_g^2</code>
is 
</p>
<p style="text-align: center;"><code class="reqn">\hat{\bar{Y}}_g^2=\left( \hat{\bar{Y}}_g \right)^2-\hat{Var} \left(\hat{\bar{Y}} \right)</code>
</p>

<p style="text-align: center;"><code class="reqn">\hat{\bar{Y}}_g =\frac{\hat{Y}_g}{M_g}= \frac{1}{M_g} \sum\limits_{h=1}^{H} \frac{N_h}{n_h} \sum\limits_{i=1}^{n_h} y_{hi} z_{hi}</code>
</p>

<p>So the estimate of <code class="reqn">S_g^2</code> is
</p>
<p><code class="reqn">s_g^2=\frac{1}{M_g-1} \sum\limits_{h=1}^{H} \frac{N_h}{n_h} \sum\limits_{i=1}^{n_h} y_{hi}^2 z_{hi} -</code>
</p>
<p><code class="reqn">-\frac{M_g}{M_g-1} \left( \left( \frac{1}{M_g} \sum\limits_{h=1}^{H} \frac{N_h}{n_h} \sum\limits_{i=1}^{n_h} y_{hi} z_{hi} \right)^2 - \frac{1}{M_g^2} \sum\limits_{h=1}^{H} N_h^2 \left(\frac{1}{n_h} - \frac{1}{N_h}\right) \frac{1}{n_h-1} \sum\limits_{i=1}^{n_h} \left(y_{hi} z_{hi} - \frac{1}{n_h} \sum\limits_{t=1}^{n_h} y_{ht} z_{ht} \right)^2 \right)</code>
</p>
<p>Two conditions have to realize to estimate <code class="reqn">S_g^2: n_h&gt;1, \forall g</code> and <code class="reqn">\theta_g \ne 0, \forall g.</code>
</p>
<p>Variance of <code class="reqn">\hat{Y}</code> is
</p>
<p style="text-align: center;"><code class="reqn"> Var\left( \hat{Y} \right) = \sum\limits_{g=1}^{G} M_g^2 \left( \frac{1}{m_g} - \frac{1}{M_g} \right) S_g^2 </code>
</p>

<p>Estimate of <code class="reqn">\hat{Var}\left( \hat{Y} \right)</code> is
</p>
<p style="text-align: center;"><code class="reqn">\hat{Var}\left( \hat{Y} \right) = \sum\limits_{g=1}^{G} M_g^2 \left( \frac{1}{m_g} - \frac{1}{M_g} \right)s_g^2</code>
</p>



<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li><p> betas A numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li>
<li><p> s2g A <code>data.table</code> containing the s^2g value.        
</p>
</li>
<li><p> var_est A <code>data.table</code> containing the values of the variance estimation.
</p>
</li></ul>



<h3>References</h3>

<p>M. Liberts. (2004) Non-response Analysis and Bias Estimation in a Survey on Transportation of Goods by Road.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+domain">domain</a></code>,         <code><a href="#topic+lin.ratio">lin.ratio</a></code>,    <code><a href="#topic+linarpr">linarpr</a></code>,
<code><a href="#topic+linarpt">linarpt</a></code>,        <code><a href="#topic+lingini">lingini</a></code>,      <code><a href="#topic+lingini2">lingini2</a></code>,
<code><a href="#topic+lingpg">lingpg</a></code>,         <code><a href="#topic+linpoormed">linpoormed</a></code>,   <code><a href="#topic+linqsr">linqsr</a></code>,
<code><a href="#topic+linrmpg">linrmpg</a></code>,        <code><a href="#topic+residual_est">residual_est</a></code>, <code><a href="#topic+vardom">vardom</a></code>,
<code><a href="#topic+vardom_othstr">vardom_othstr</a></code>,  <code><a href="#topic+vardomh">vardomh</a></code>,      <code><a href="#topic+varpoord">varpoord</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
Y &lt;- data.table(matrix(runif(50) * 5, ncol = 5))
   
H &lt;- data.table(H = as.integer(trunc(5 * runif(10))))
H2 &lt;- data.table(H2 = as.integer(trunc(3 * runif(10))))
   
N_h &lt;- data.table(matrix(0 : 4, 5, 1))
setnames(N_h, names(N_h), "H")
N_h[, sk:= 10]
   
N_h2 &lt;- data.table(matrix(0 : 2, 3, 1))
setnames(N_h2, names(N_h2), "H2")
N_h2[, sk2:= 4]
   
w_final &lt;- rep(2, 10)
   
vo &lt;- variance_othstr(Y = Y, H = H, H2 = H2,
                      w_final = w_final,
                      N_h = N_h, N_h2 = N_h2,
                      period = NULL,
                      dataset = NULL)
vo

</code></pre>

<hr>
<h2 id='varpoord'>Estimation of the variance and deff for sample surveys for indicators on social exclusion and poverty</h2><span id='topic+varpoord'></span>

<h3>Description</h3>

<p>Computes the estimation of the variance for indicators on social exclusion and poverty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varpoord(
  Y,
  w_final,
  age = NULL,
  pl085 = NULL,
  month_at_work = NULL,
  Y_den = NULL,
  Y_thres = NULL,
  wght_thres = NULL,
  ID_level1,
  ID_level2 = NULL,
  H,
  PSU,
  N_h,
  PSU_sort = NULL,
  fh_zero = FALSE,
  PSU_level = TRUE,
  sort = NULL,
  Dom = NULL,
  period = NULL,
  gender = NULL,
  dataset = NULL,
  X = NULL,
  periodX = NULL,
  X_ID_level1 = NULL,
  ind_gr = NULL,
  g = NULL,
  q = NULL,
  datasetX = NULL,
  percentage = 60,
  order_quant = 50,
  alpha = 20,
  confidence = 0.95,
  outp_lin = FALSE,
  outp_res = FALSE,
  type = "linrmpg"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="varpoord_+3A_y">Y</code></td>
<td>
<p>Study variable (for example equalized disposable income or gross pension income). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_w_final">w_final</code></td>
<td>
<p>Weight variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_age">age</code></td>
<td>
<p>Age variable. One dimensional object convertible to one-column <code>data.frame</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_pl085">pl085</code></td>
<td>
<p>Retirement variable (Number of months spent in retirement or early retirement). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_y_den">Y_den</code></td>
<td>
<p>Denominator variable (for example gross individual earnings). One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_y_thres">Y_thres</code></td>
<td>
<p>Variable (for example equalized disposable income) used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>inc</code> is used as <code>income_thres</code> if <code>income_thres</code> is  not defined.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_wght_thres">wght_thres</code></td>
<td>
<p>Weight variable used for computation and linearization of poverty threshold. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number. Variable specified for <code>weight</code> is used as <code>wght_thres</code> if <code>wght_thres</code> is not defined.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_id_level1">ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_id_level2">ID_level2</code></td>
<td>
<p>Optional variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_h">H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_psu">PSU</code></td>
<td>
<p>Primary sampling unit variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_n_h">N_h</code></td>
<td>
<p>Number of primary sampling units in population for each stratum (and period if <code>period</code> is not <code>NULL</code>). If <code>N_h = NULL</code> and <code>fh_zero = FALSE</code> (default), <code>N_h</code> is estimated from sample data as sum of weights (<code>w_final</code>) in each stratum (and period if <code>period</code> is not <code>NULL</code>).
Optional for single-stage sampling design as it will be estimated from sample data. Recommended for multi-stage sampling design as <code>N_h</code> can not be correctly estimated from the sample data in this case. If <code>N_h</code> is not used in case of multi-stage sampling design (for example, because this information is not available), it is advisable to set <code>fh_zero = TRUE</code>.
If <code>period</code> <b>is</b> <code>NULL</code>. A two-column data object convertible to <code>data.table</code> with rows for each stratum. The first column should contain stratum code. The second column - the number of primary sampling units in the population of each stratum.
If <code>period</code> <b>is not</b> <code>NULL</code>. A three-column data object convertible to <code>data.table</code> with rows for each intersection of strata and period. The first column should contain period. The second column should contain stratum code. The third column - the number of primary sampling units in the population of each stratum and period.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_psu_sort">PSU_sort</code></td>
<td>
<p>optional; if PSU_sort is defined, then variance is calculated for systematic sample.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_fh_zero">fh_zero</code></td>
<td>
<p>by default FALSE; <code>fh</code> is calculated as division of n_h and N_h in each strata, if TRUE, <code>fh</code> value is zero in each strata.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_psu_level">PSU_level</code></td>
<td>
<p>by default TRUE; if PSU_level is TRUE, in each strata <code>fh</code> is calculated as division of count of PSU in sample (n_h) and count of PSU in frame(N_h). if PSU_level is FALSE, in each strata <code>fh</code> is calculated as division of count of units in sample (n_h) and count of units in frame(N_h), which calculated as sum of weights.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_sort">sort</code></td>
<td>
<p>Optional variable to be used as tie-breaker for sorting. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_dom">Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, variables is calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_period">period</code></td>
<td>
<p>Optional variable for survey period. If supplied, variables is calculated for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_gender">gender</code></td>
<td>
<p>Numerical variable for gender, where 1 is for males, but 2 is for females. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_dataset">dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_x">X</code></td>
<td>
<p>Optional matrix of the auxiliary variables for the calibration estimator. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_periodx">periodX</code></td>
<td>
<p>Optional variable of the survey periods. If supplied, residual estimation of calibration is done independently for each time period. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_x_id_level1">X_ID_level1</code></td>
<td>
<p>Variable for level1 ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_ind_gr">ind_gr</code></td>
<td>
<p>Optional variable by which divided independently X matrix of the auxiliary variables for the calibration. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_g">g</code></td>
<td>
<p>Optional variable of the g weights. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_q">q</code></td>
<td>
<p>Variable of the positive values accounting for heteroscedasticity. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_datasetx">datasetX</code></td>
<td>
<p>Optional survey data object in household level convertible to <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_percentage">percentage</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">p</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to 60% of some income quantile, <code class="reqn">p</code> should be set equal to 60.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_order_quant">order_quant</code></td>
<td>
<p>A numeric value in range <code class="reqn">[0,100]</code> for <code class="reqn">\alpha</code> in the formula for poverty threshold computation:
</p>
<p style="text-align: center;"><code class="reqn">\frac{p}{100} \cdot Z_{\frac{\alpha}{100}}.</code>
</p>

<p>For example, to compute poverty threshold equal to some percentage of median income, <code class="reqn">\alpha</code> should be set equal to 50.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_alpha">alpha</code></td>
<td>
<p>a numeric value in range <code class="reqn">[0,100]</code> for the order of the income quantile share ratio (in percentage).</p>
</td></tr>
<tr><td><code id="varpoord_+3A_confidence">confidence</code></td>
<td>
<p>Optional positive value for confidence interval. This variable by default is 0.95.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_outp_lin">outp_lin</code></td>
<td>
<p>Logical value. If <code>TRUE</code> linearized values of the ratio estimator will be printed out.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_outp_res">outp_res</code></td>
<td>
<p>Logical value. If <code>TRUE</code> estimated residuals of calibration will be printed out.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_type">type</code></td>
<td>
<p>a character vector (of length one unless several.ok is TRUE), example &quot;linarpr&quot;,&quot;linarpt&quot;, &quot;lingpg&quot;, &quot;linpoormed&quot;, &quot;linrmpg&quot;, &quot;lingini&quot;, &quot;lingini2&quot;, &quot;linqsr&quot;, &quot;linarr&quot;, &quot;linrmir&quot;.</p>
</td></tr>
<tr><td><code id="varpoord_+3A_month_at_work">month_at_work</code></td>
<td>
<p>Variable</p>
</td></tr></table>
<p>for total number of month at work (sum of the number of months spent at full-time work as employee, number of months spent at part-time work as employee, number of months spent at full-time work as self-employed (including family worker), number of months spent at part-time work as self-employed (including family worker)).  One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.
</p>


<h3>Value</h3>

<p>A list with objects are returned by the function:
</p>

<ul>
<li> <p><code>lin_out</code> - a <code>data.table</code> containing the linearized values of the ratio estimator with ID_level2 and PSU.
</p>
</li>
<li> <p><code>res_out</code> - a <code>data.table</code> containing the estimated residuals of calibration with ID_level1 and PSU. 
</p>
</li>
<li> <p><code>betas</code> - a numeric <code>data.table</code> containing the estimated coefficients of calibration.
</p>
</li>
<li> <p><code>all_result</code> - a <code>data.table</code>, which containing variables: <br />
<code>respondent_count</code> - the count of respondents, <br />
<code>pop_size</code> - the estimated size of population, <br />
<code>n_nonzero</code> - the count of respondents, who answers are larger than zero, <br />
<code>value</code> - the estimated value, <br />
<code>var</code> - the estimated variance, <br />
<code>se</code> - the estimated standard error, <br />
<code>rse</code> - the estimated relative standard error (coefficient of variation), <br />
<code>cv</code> - the estimated relative standard error (coefficient of variation) in percentage, <br />
<code>absolute_margin_of_error</code> - the estimated absolute margin of error, <br />
<code>relative_margin_of_error</code> - the estimated relative margin of error in percentage, <br />
<code>CI_lower</code> - the estimated confidence interval lower bound, <br />
<code>CI_upper</code> - the estimated confidence interval upper bound, <br />
<code>confidence_level</code> - the positive value for confidence interval, <br /> 
<code>S2_y_HT</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using non-calibrated weights, <br />
<code>S2_y_ca</code> - the estimated variance of the y variable in case of total or the estimated variance of the linearised variable in case of the ratio of two totals using calibrated weights, <br />
<code>S2_res</code> - the estimated variance of the regression residuals, <br />
<code>var_srs_HT</code> - the estimated variance of the HT estimator under SRS for household, <br />
<code>var_cur_HT</code> - the estimated variance of the HT estimator under current design for household, <br />
<code>var_srs_ca</code> - the estimated variance of the calibrated estimator under SRS  for household, <br />
<code>deff_sam</code> - the estimated design effect of sample design for household, <br />
<code>deff_est</code> - the estimated design effect of estimator for household, <br />
<code>deff</code> - the overall estimated design effect of sample design and estimator for household
</p>
</li></ul>



<h3>References</h3>

<p>Eric Graf and Yves Tille, Variance Estimation Using Linearization for Poverty and Social Exclusion Indicators,  Survey Methodology, June 2014 61 Vol. 40, No. 1, pp. 61-79, Statistics Canada, Catalogue no. 12-001-X, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/12-001-x2014001-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/12-001-x2014001-eng.pdf</a> <br />
Guillaume Osier and Emilio Di Meglio. The linearisation approach implemented by Eurostat for the first wave of EU-SILC: what could be done from the second wave onwards? 2012 <br />
Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality. <em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195, ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>. <br />
Eurostat Methodologies and Working papers, Standard error estimation for the EU-SILC indicators of poverty and social exclusion, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators: linearization and residual techniques. Survey Methodology, 25, 193-203, URL <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf">https://www150.statcan.gc.ca/n1/pub/12-001-x/1999002/article/4882-eng.pdf</a>. <br />
Eurostat Methodologies and Working papers, Handbook on precision requirements and variance estimation for ESS household surveys, 2013, URL <a href="http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF">http://ec.europa.eu/eurostat/documents/3859598/5927001/KS-RA-13-029-EN.PDF</a>. <br />
Matti Langel, Yves Tille, Corrado Gini, a pioneer in balanced sampling and inequality theory. <em>Metron - International Journal of Statistics</em>, 2011, vol. LXIX, n. 1, pp. 45-65, URL <a href="http://dx.doi.org/10.1007/BF03263549">http://dx.doi.org/10.1007/BF03263549</a>. <br />
Morris H. Hansen, William N. Hurwitz, William G. Madow, (1953), Sample survey methods and theory Volume I Methods and applications, 257-258, Wiley. <br />
Yves G. Berger, Tim Goedeme, Guillame Osier (2013). Handbook on standard error estimation and other related sampling issues in EU-SILC, URL <a href="https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en">https://ec.europa.eu/eurostat/cros/content/handbook-standard-error-estimation-and-other-related-sampling-issues-ver-29072013_en</a> <br />
Working group on Statistics on Income and Living Conditions (2004) Common cross-sectional EU indicators based on EU-SILC; the gender pay gap.  <em>EU-SILC 131-rev/04</em>, Eurostat.<br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vardom">vardom</a></code>, <code><a href="#topic+vardomh">vardomh</a></code>, <code><a href="#topic+linarpt">linarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("data.table")
library("laeken")
data("eusilc")
dataset &lt;- data.table(IDd = paste0("V", 1 : nrow(eusilc)), eusilc)
dataset1 &lt;- dataset[1 : 1000]
 
#use dataset1 by default without using fh_zero (finite population correction)
aa &lt;- varpoord(Y = "eqIncome", w_final = "rb050",
               Y_thres = NULL, wght_thres = NULL,
               ID_level1 = "db030", ID_level2 = "IDd", 
               H = "db040", PSU = "rb030", N_h = NULL,
               sort = NULL, Dom = NULL,
               gender = NULL, X = NULL,
               X_ID_level1 = NULL, g = NULL,
               q = NULL, datasetX = NULL,             
               dataset = dataset1, percentage = 60,
               order_quant = 50L, alpha = 20, 
               confidence = .95, outp_lin = FALSE,
               outp_res = FALSE, type = "linarpt")
aa
 
## Not run: 
 # use dataset1 by default with using fh_zero (finite population correction)
 aa2 &lt;- varpoord(Y = "eqIncome", w_final = "rb050",
                 Y_thres = NULL, wght_thres = NULL,
                 ID_level1 = "db030", ID_level2 = "IDd", 
                 H = "db040", PSU = "rb030", N_h = NULL,
                 fh_zero = TRUE, sort = NULL, Dom = "db040",
                 gender = NULL, X = NULL, X_ID_level1 = NULL,
                 g = NULL, datasetX = NULL, dataset =  dataset1,
                 percentage = 60, order_quant = 50L,
                 alpha = 20, confidence = .95, outp_lin = FALSE,
                 outp_res = FALSE, type = "linarpt")
 aa2
 aa2$all_result
 
 
 # using dataset1
 aa4 &lt;- varpoord(Y = "eqIncome", w_final = "rb050",
                 Y_thres = NULL, wght_thres = NULL,
                 ID_level1 = "db030", ID_level2 = "IDd", 
                 H = "db040", PSU = "rb030", N_h = NULL,
                 sort = NULL, Dom = "db040",
                 gender = NULL, X = NULL,
                 X_ID_level1 = NULL, g = NULL,
                 datasetX = NULL, dataset =  dataset,
                 percentage = 60, order_quant = 50L,
                 alpha = 20, confidence = .95,
                 outp_lin = TRUE, outp_res = TRUE,
                 type = "linarpt")
 aa4$lin_out[20 : 40]
## End(Not run)
 

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
