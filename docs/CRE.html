<!DOCTYPE html><html lang="en-US"><head><title>Help for package CRE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CRE}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CRE-package'><p>The CRE package</p></a></li>
<li><a href='#autoplot.cre'><p>A helper function for cre object</p></a></li>
<li><a href='#check_hyper_params'><p>Check input parameters</p></a></li>
<li><a href='#check_input_data'><p>Check input data</p></a></li>
<li><a href='#check_method_params'><p>Check method-related parameters</p></a></li>
<li><a href='#cre'><p>Causal rule ensemble</p></a></li>
<li><a href='#discover_rules'><p>Discover rules</p></a></li>
<li><a href='#estimate_cate'><p>Estimate the Conditional Average Treatment Effect</p></a></li>
<li><a href='#estimate_ite'><p>Estimate the Individual Treatment Effect (ITE)</p></a></li>
<li><a href='#estimate_ite_aipw'><p>Estimate the Individual Treatment Effect (ITE) using Augmented Inverse</p>
Probability Weighting (AIPW)</a></li>
<li><a href='#estimate_ite_bart'><p>Estimate the Individual Treatment Effect (ITE) using Bayesian Additive</p>
Regression Trees (BART)</a></li>
<li><a href='#estimate_ite_cf'><p>Estimate the Individual Treatment Effect (ITE) using Causal Forest (CF)</p></a></li>
<li><a href='#estimate_ite_slearner'><p>Estimate the Individual Treatment Effect (ITE) using S-Learner</p></a></li>
<li><a href='#estimate_ite_tlearner'><p>Estimate the Individual Treatment Effect (ITE) using T-Learner</p></a></li>
<li><a href='#estimate_ite_tpoisson'><p>Estimate the Individual Treatment Effect (ITE) using T-Poisson regression</p></a></li>
<li><a href='#estimate_ite_xlearner'><p>Estimate the Individual Treatment Effect (ITE) using X-Learner</p></a></li>
<li><a href='#estimate_ps'><p>Estimate the propensity score</p></a></li>
<li><a href='#evaluate'><p>Discovery (performance) evaluation</p></a></li>
<li><a href='#extract_effect_modifiers'><p>Extract effect modifiers</p></a></li>
<li><a href='#extract_rules'><p>Extract (causal) decision rules</p></a></li>
<li><a href='#filter_correlated_rules'><p>Filter correlated rules</p></a></li>
<li><a href='#filter_extreme_rules'><p>Filter extreme decision rules</p></a></li>
<li><a href='#filter_irrelevant_rules'><p>Filter irrelevant decision rules using leave-one-out pruning</p></a></li>
<li><a href='#generate_cre_dataset'><p>Generate CRE synthetic data</p></a></li>
<li><a href='#generate_rules'><p>Generate rules</p></a></li>
<li><a href='#generate_rules_matrix'><p>Generate rules matrix</p></a></li>
<li><a href='#get_logger'><p>Get Logger settings</p></a></li>
<li><a href='#honest_splitting'><p>Honest splitting</p></a></li>
<li><a href='#interpret_rules'><p>Interpret rules</p></a></li>
<li><a href='#plot.cre'><p>Extend generic plot functions for cre class</p></a></li>
<li><a href='#predict.cre'><p>Predict individual treatment effect via causal rule ensemble</p></a></li>
<li><a href='#print.cre'><p>Extend print function for the CRE object</p></a></li>
<li><a href='#select_rules'><p>Select rules</p></a></li>
<li><a href='#set_logger'><p>Set Logger settings</p></a></li>
<li><a href='#standardize_rules_matrix'><p>Standardize Rules Matrix</p></a></li>
<li><a href='#summary.cre'><p>Print summary of CRE object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interpretable Discovery and Inference of Heterogeneous Treatment
Effects</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Falco Joannes Bargagli Stoffi &lt;fbargaglistoffi@hsph.harvard.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a new method for interpretable heterogeneous 
    treatment effects characterization in terms of decision rules 
    via an extensive exploration of heterogeneity patterns by an 
    ensemble-of-trees approach, enforcing high stability in the 
    discovery. It relies on a two-stage pseudo-outcome regression, and 
    it is supported by theoretical convergence guarantees. Bargagli-Stoffi, 
    F. J., Cadei, R., Lee, K., &amp; Dominici, F. (2023) Causal rule ensemble: 
    Interpretable Discovery and Inference of Heterogeneous Treatment Effects.  
    arXiv preprint &lt;<a href="https://doi.org/10.48550%2FarXiv.2009.09036">doi:10.48550/arXiv.2009.09036</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/NSAPH-Software/CRE">https://github.com/NSAPH-Software/CRE</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/NSAPH-Software/CRE/issues">https://github.com/NSAPH-Software/CRE/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS, stats, logger, gbm, randomForest, methods, xgboost, RRF,
data.table, xtable, glmnet, bartCause, stabs, stringr,
SuperLearner, magrittr, ggplot2, arules</td>
</tr>
<tr>
<td>Suggests:</td>
<td>grf, BART, gnm, covr, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Copyright:</td>
<td>Harvard University</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-18 18:23:19 UTC; falco</td>
</tr>
<tr>
<td>Author:</td>
<td>Naeem Khoshnevis <a href="https://orcid.org/0000-0003-4315-1426"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Daniela Maria Garcia
    <a href="https://orcid.org/0000-0003-3226-3561"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Riccardo Cadei <a href="https://orcid.org/0000-0003-2416-8943"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kwonsang Lee <a href="https://orcid.org/0000-0002-5823-4331"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Falco Joannes Bargagli Stoffi
    <a href="https://orcid.org/0000-0002-6131-8165"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-19 15:00:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='CRE-package'>The CRE package</h2><span id='topic+CRE-package'></span><span id='topic+CRE'></span>

<h3>Description</h3>

<p>In health and social sciences, it is critically important to
identify subgroups of the study population where a treatment
has notable heterogeneity in the causal effects with respect
to the average treatment effect. Data-driven discovery of
heterogeneous treatment effects (HTE) via decision tree methods
has been proposed for this task. Despite its high interpretability,
the single-tree discovery of HTE tends to be highly unstable and to
find an oversimplified representation of treatment heterogeneity.
To accommodate these shortcomings, we propose Causal Rule Ensemble
(CRE), a new method to discover heterogeneous subgroups through an
ensemble-of-trees approach. CRE has the following features:
</p>

<ol>
<li><p> provides an interpretable representation of the HTE; 2) allows
extensive exploration of complex heterogeneity patterns; and 3)
guarantees high stability in the discovery. The discovered subgroups
are defined in terms of interpretable decision rules, and we develop
a general two-stage approach for subgroup-specific conditional
causal effects estimation, providing theoretical guarantees.
</p>
</li></ol>



<h3>Author(s)</h3>

<p>Naeem Khoshnevis
</p>
<p>Daniela Maria Garcia
</p>
<p>Riccardo Cadei
</p>
<p>Kwonsang Lee
</p>
<p>Falco Joannes Bargagli Stoffi
</p>


<h3>References</h3>

<p>Bargagli-Stoffi, F. J., Cadei, R., Lee, K. and Dominici, F. (2023).
Causal rule ensemble: Interpretable Discovery and Inference of
Heterogeneous Treatment Effects,arXiv preprint arXiv:2009.09036
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/NSAPH-Software/CRE">https://github.com/NSAPH-Software/CRE</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/NSAPH-Software/CRE/issues">https://github.com/NSAPH-Software/CRE/issues</a>
</p>
</li></ul>


<hr>
<h2 id='autoplot.cre'>A helper function for cre object</h2><span id='topic+autoplot.cre'></span>

<h3>Description</h3>

<p>A helper function to plot cre object using ggplot2 package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cre'
autoplot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.cre_+3A_object">object</code></td>
<td>
<p>A <code>cre</code> object.</p>
</td></tr>
<tr><td><code id="autoplot.cre_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to customize the plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a ggplot object.
</p>

<hr>
<h2 id='check_hyper_params'>Check input parameters</h2><span id='topic+check_hyper_params'></span>

<h3>Description</h3>

<p>Checks consistency in input (hyper) parameters for the <code>cre</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_hyper_params(X_names, params)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_hyper_params_+3A_x_names">X_names</code></td>
<td>
<p>The observed covariates names.</p>
</td></tr>
<tr><td><code id="check_hyper_params_+3A_params">params</code></td>
<td>
<p>The list of parameters required to run the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A modified input <code>params</code>. A list of parameters that might be changed during
the checks.
</p>

<hr>
<h2 id='check_input_data'>Check input data</h2><span id='topic+check_input_data'></span>

<h3>Description</h3>

<p>Conducts sanity checks for the input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_input_data(y, z, X, ite = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_input_data_+3A_y">y</code></td>
<td>
<p>The observed response vector.</p>
</td></tr>
<tr><td><code id="check_input_data_+3A_z">z</code></td>
<td>
<p>The treatment vector.</p>
</td></tr>
<tr><td><code id="check_input_data_+3A_x">X</code></td>
<td>
<p>The features matrix.</p>
</td></tr>
<tr><td><code id="check_input_data_+3A_ite">ite</code></td>
<td>
<p>The estimated ITE vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The number of data samples.
</p>

<hr>
<h2 id='check_method_params'>Check method-related parameters</h2><span id='topic+check_method_params'></span>

<h3>Description</h3>

<p>Checks method-related parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_method_params(y, ite, params)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_method_params_+3A_y">y</code></td>
<td>
<p>The observed response vector.</p>
</td></tr>
<tr><td><code id="check_method_params_+3A_ite">ite</code></td>
<td>
<p>The estimated ITE vector.</p>
</td></tr>
<tr><td><code id="check_method_params_+3A_params">params</code></td>
<td>
<p>The list of parameters required to run the method functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A modified input <code>params</code>. A list of parameters that might be changed during
the checks.
</p>

<hr>
<h2 id='cre'>Causal rule ensemble</h2><span id='topic+cre'></span>

<h3>Description</h3>

<p>Performs the Causal Rule Ensemble on a data set with a response variable,
a treatment variable, and various features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cre(y, z, X, method_params = NULL, hyper_params = NULL, ite = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cre_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="cre_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="cre_+3A_x">X</code></td>
<td>
<p>A covariate matrix (or a data frame). Should be provided as
numerical values.</p>
</td></tr>
<tr><td><code id="cre_+3A_method_params">method_params</code></td>
<td>
<p>The list of parameters to define the models used,
including:
</p>

<ul>
<li> <p><em>Parameters for Honest Splitting</em>
</p>

<ul>
<li> <p><em>ratio_dis</em>: The ratio of data delegated to rules discovery
(default: 0.5).
</p>
</li></ul>

</li>
<li> <p><em>Parameters for Discovery and Inference</em>
</p>

<ul>
<li> <p><em>ite_method</em>: The method for ITE (pseudo-outcome) estimation
(default: <code>"aipw"</code>, options: <code>"aipw"</code> for Augmented Inverse
Probability Weighting, <code>"cf"</code> for Causal Forest, <code>"bart"</code> for
Causal Bayesian Additive Regression Trees, <code>"slearner"</code> for S-Learner,
<code>"tlearner"</code> for T-Learner, <code>"xlearner"</code> for X-Learner,
<code>"tpoisson"</code> for T-Learner with Poisson regression).
</p>
</li>
<li> <p><em>learner_ps</em>: The model for the propensity score estimation
(default: <code>"SL.xgboost"</code>, options: any SuperLearner prediction model
i.e., <code>"SL.lm"</code>, <code>"SL.svm"</code>, used only for <code>"aipw"</code>,
<code>"bart"</code>, <code>"cf"</code> ITE estimators).
</p>
</li>
<li> <p><em>learner_y</em>: The model for the outcome estimation
(default: <code>"SL.xgboost"</code>, options: any SuperLearner prediction model
i.e., <code>"SL.lm"</code>, <code>"SL.svm"</code>, used only for <code>"aipw"</code>,
<code>"slearner"</code>, <code>"tlearner"</code> and <code>"xlearner"</code> ITE
estimators).
</p>
</li></ul>

</li></ul>
</td></tr>
<tr><td><code id="cre_+3A_hyper_params">hyper_params</code></td>
<td>
<p>The list of hyper parameters to fine-tune the method,
including:
</p>

<ul>
<li> <p><em>General hyper parameters</em>
</p>

<ul>
<li> <p><em>intervention_vars</em>: Array with intervention-able covariates names used
for Rules Generation. Empty or null array means that all the covariates
are considered as intervention-able (default: <code>NULL</code>).
</p>
</li>
<li> <p><em>ntrees</em>: The number of decision trees for random forest (default: 20).
</p>
</li>
<li> <p><em>node_size</em>: Minimum size of the trees' terminal nodes (default: 20).
</p>
</li>
<li> <p><em>max_rules</em>: Maximum number of generated candidates rules (default: 50).
</p>
</li>
<li> <p><em>max_depth</em>: Maximum rules length (default: 3).
</p>
</li>
<li> <p><em>t_decay</em>: The decay threshold for rules pruning. Higher values will
carry out an aggressive pruning (default: 0.025).
</p>
</li>
<li> <p><em>t_ext</em>: The threshold to truncate too generic or too specific (extreme)
rules (default: 0.01, range: [0, 0.5)).
</p>
</li>
<li> <p><em>t_corr</em>: The threshold to define correlated rules (default: 1,
range: <code style="white-space: pre;">&#8288;[0,+inf)&#8288;</code>).
</p>
</li>
<li> <p><em>stability_selection</em>: Method for stability selection for selecting the
rules. <code>"vanilla"</code> for stability selection, <code>"error_control"</code>
for stability selection with error control and  <code>"no"</code> for no
stability selection (default: <code>"vanilla"</code>).
</p>
</li>
<li> <p><em>B</em>: Number of bootstrap samples for stability selection in rules
selection and uncertainty quantification in estimation (default: 20).
</p>
</li>
<li> <p><em>subsample</em>: Bootstrap ratio subsample for stability selection in rules
selection and uncertainty quantification in estimation (default: 0.5).
</p>
</li></ul>

</li>
<li> <p><em>Method specific hyper parameters</em>
</p>

<ul>
<li> <p><em>offset</em>: Name of the covariate to use as offset (i.e., <code>"x1"</code>) for
T-Poisson ITE estimation. Use <code>NULL</code> if offset is not used (default:
<code>NULL</code>).
</p>
</li>
<li> <p><em>cutoff</em>:  Threshold (percentage) defining the minimum cutoff value for
the stability scores for Stability Selection (default: 0.9).
</p>
</li>
<li> <p><em>pfer</em>: Upper bound for the per-family error rate (tolerated amount of
falsely selected rules) for Error Control Stability Selection (default: 1).
</p>
</li></ul>

</li></ul>
</td></tr>
<tr><td><code id="cre_+3A_ite">ite</code></td>
<td>
<p>The estimated ITE vector. If given both the ITE estimation steps
in Discovery and Inference are skipped (default: <code>NULL</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object composed by:
</p>
<table role = "presentation">
<tr><td><code>M</code></td>
<td>
<p>the number of Decision Rules extracted at each step,</p>
</td></tr>
<tr><td><code>CATE</code></td>
<td>
<p>the data.frame of Conditional Average Treatment Effect
decomposition estimates with corresponding uncertainty quantification,</p>
</td></tr>
<tr><td><code>method_params</code></td>
<td>
<p>the list of method parameters,</p>
</td></tr>
<tr><td><code>hyper_params</code></td>
<td>
<p>the list of hyper parameters,</p>
</td></tr>
<tr><td><code>rules</code></td>
<td>
<p>the list of rules (implicit form) decomposing the CATE.</p>
</td></tr>
</table>


<h3>Note</h3>


<ul>
<li><p> If <code>intervention_vars</code> are provided, it is important to note that the
individual treatment effect will still be computed using all covariates.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>

set.seed(123)
dataset &lt;- generate_cre_dataset(n = 400,
                                rho = 0,
                                n_rules = 2,
                                p = 10,
                                effect_size = 2,
                                binary_covariates = TRUE,
                                binary_outcome = FALSE,
                                confounding = "no")
y &lt;- dataset[["y"]]
z &lt;- dataset[["z"]]
X &lt;- dataset[["X"]]

method_params &lt;- list(ratio_dis = 0.5,
                      ite_method ="aipw",
                      learner_ps = "SL.xgboost",
                      learner_y = "SL.xgboost")

hyper_params &lt;- list(intervention_vars = NULL,
                     offset = NULL,
                     ntrees = 20,
                     node_size = 20,
                     max_rules = 50,
                     max_depth = 3,
                     t_decay = 0.025,
                     t_ext = 0.025,
                     t_corr = 1,
                     stability_selection = "vanilla",
                     cutoff = 0.6,
                     pfer = 1,
                     B = 20,
                     subsample = 0.5)

cre_results &lt;- cre(y, z, X, method_params, hyper_params)


</code></pre>

<hr>
<h2 id='discover_rules'>Discover rules</h2><span id='topic+discover_rules'></span>

<h3>Description</h3>

<p>Discover the minimal set of rules linearly decomposing the Conditional
Average Treatment Effect (CATE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discover_rules(X, ite, method_params, hyper_params)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="discover_rules_+3A_x">X</code></td>
<td>
<p>A covariate matrix.</p>
</td></tr>
<tr><td><code id="discover_rules_+3A_ite">ite</code></td>
<td>
<p>An estimated ITE.</p>
</td></tr>
<tr><td><code id="discover_rules_+3A_method_params">method_params</code></td>
<td>
<p>A vector of method parameters.</p>
</td></tr>
<tr><td><code id="discover_rules_+3A_hyper_params">hyper_params</code></td>
<td>
<p>A vector of hyper parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A minimal set of rules linearly decomposing the Conditional Average
Treatment Effect (CATE).
</p>

<hr>
<h2 id='estimate_cate'>Estimate the Conditional Average Treatment Effect</h2><span id='topic+estimate_cate'></span>

<h3>Description</h3>

<p>Estimates the Conditional Average Treatment Effect (CATE) by
linearly modeling the Individual Treatment Effect by a set of rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_cate(rules_matrix, rules_explicit, ite, B = 1, subsample = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_cate_+3A_rules_matrix">rules_matrix</code></td>
<td>
<p>A rules matrix.</p>
</td></tr>
<tr><td><code id="estimate_cate_+3A_rules_explicit">rules_explicit</code></td>
<td>
<p>A list of select rules in terms of covariate names.</p>
</td></tr>
<tr><td><code id="estimate_cate_+3A_ite">ite</code></td>
<td>
<p>The estimated ITEs.</p>
</td></tr>
<tr><td><code id="estimate_cate_+3A_b">B</code></td>
<td>
<p>The number of bootstrap samples for uncertainty quantification in
estimation.</p>
</td></tr>
<tr><td><code id="estimate_cate_+3A_subsample">subsample</code></td>
<td>
<p>The bootstrap ratio subsample for uncertainty quantification
in estimation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 2 elements:
<code>summary</code>: A data frame summarizing the CATE linear decomposition:
</p>

<ul>
<li> <p><code>Rule</code>: rule name,
</p>
</li>
<li> <p><code>Estimate</code>: linear contribution to CATE,
</p>
</li>
<li> <p><code>CI_lower</code>: lower bound 95% confidence interval on the estimate,
</p>
</li>
<li> <p><code>CI_upper</code>: upper bound 95% confidence interval on the estimate,
</p>
</li>
<li> <p><code>P_Value</code>: p-value (from Z-test).
<code>model</code>: A linear model for CATE-ATE estimation.
</p>
</li></ul>


<hr>
<h2 id='estimate_ite'>Estimate the Individual Treatment Effect (ITE)</h2><span id='topic+estimate_ite'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect given a response vector,
a treatment vector, a covariate matrix, and a desired algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite(y, z, X, ite_method, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_+3A_z">z</code></td>
<td>
<p>An observed treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_+3A_x">X</code></td>
<td>
<p>A covariate matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_+3A_ite_method">ite_method</code></td>
<td>
<p>A method for estimating the Individual Treatment Effect.
Some methods requires additional parameters. These parameters are mentioned
in the indented blocks for each method and their definitions are provided at
the end of this parameters list.
</p>

<ul>
<li> <p><code>"slearner"</code>: S-Learner.
- <code>learner_y</code>
</p>
</li>
<li> <p><code>"tlearner"</code>: T-Learner.
</p>

<ul>
<li> <p><code>learner_y</code>
</p>
</li></ul>

</li>
<li> <p><code>"tpoisson"</code>: T-Poisson.
</p>

<ul>
<li> <p><code>offset</code>
</p>
</li></ul>

</li>
<li> <p><code>"xlearner"</code>: X-Learner.
</p>

<ul>
<li> <p><code>learner_y</code>
</p>
</li></ul>

</li>
<li> <p><code>"aipw"</code>: Augmented Inverse Probability Weighting.
</p>

<ul>
<li> <p><code>learner_ps</code> and  <code>learner_y</code>
</p>
</li></ul>

</li>
<li> <p><code>"bart"</code>: Bayesian Additive Regression Trees.
</p>

<ul>
<li> <p><code>learner_ps</code>
</p>
</li></ul>

</li>
<li> <p><code>"cf"</code>: Causal Forest.
</p>

<ul>
<li> <p><code>learner_ps</code>
</p>
</li></ul>

</li></ul>
</td></tr>
<tr><td><code id="estimate_ite_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to different models.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Additional parameters</h4>


<ul>
<li> <p><strong>learner_ps</strong>: An estimation method for the propensity score. This
includes libraries for the SuperLearner package.
</p>
</li>
<li> <p><strong>learner_y</strong>: An estimation model for the outcome. This includes
libraries for the SuperLearner package.
</p>
</li>
<li> <p><strong>offset</strong>: Name of the covariate to use as offset (i.e. <code>"x1"</code>) for
Poisson ITE Estimation. <code>NULL</code> if offset is not used.
</p>
</li></ul>




<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_aipw'>Estimate the Individual Treatment Effect (ITE) using Augmented Inverse
Probability Weighting (AIPW)</h2><span id='topic+estimate_ite_aipw'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using Augmented Inverse Probability
Weighting given a response vector, a treatment vector, a features matrix,
an estimation model for the propensity score and estimation model for the
outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_aipw(y, z, X, learner_ps = "SL.xgboost", learner_y = "SL.xgboost")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_aipw_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_aipw_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_aipw_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_aipw_+3A_learner_ps">learner_ps</code></td>
<td>
<p>A estimation model for the propensity score.</p>
</td></tr>
<tr><td><code id="estimate_ite_aipw_+3A_learner_y">learner_y</code></td>
<td>
<p>A estimation model for the outcome.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_bart'>Estimate the Individual Treatment Effect (ITE) using Bayesian Additive
Regression Trees (BART)</h2><span id='topic+estimate_ite_bart'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using Bayesian Additive Regression
Trees given a response vector, a treatment vector, and a features matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_bart(y, z, X, learner_ps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_bart_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_bart_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_bart_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_bart_+3A_learner_ps">learner_ps</code></td>
<td>
<p>Method for the estimation of the propensity score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>


<h3>Note</h3>

<p>The number of samples and the number of burn are set by default equal
to 500.
</p>

<hr>
<h2 id='estimate_ite_cf'>Estimate the Individual Treatment Effect (ITE) using Causal Forest (CF)</h2><span id='topic+estimate_ite_cf'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using Causal Forest given a
response vector, a treatment vector, and a features matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_cf(y, z, X, learner_ps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_cf_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_cf_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_cf_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_cf_+3A_learner_ps">learner_ps</code></td>
<td>
<p>A method for the estimation of the propensity score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_slearner'>Estimate the Individual Treatment Effect (ITE) using S-Learner</h2><span id='topic+estimate_ite_slearner'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using S-Learner given a response
vector, a treatment vector, a features matrix and estimation model for the
outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_slearner(y, z, X, learner_y = "SL.xgboost")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_slearner_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_slearner_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_slearner_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_slearner_+3A_learner_y">learner_y</code></td>
<td>
<p>An estimation model for the outcome.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_tlearner'>Estimate the Individual Treatment Effect (ITE) using T-Learner</h2><span id='topic+estimate_ite_tlearner'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using T-Learner given a response
vector, a treatment vector, a features matrix and estimation model for the
outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_tlearner(y, z, X, learner_y = "SL.xgboost")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_tlearner_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_tlearner_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_tlearner_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_tlearner_+3A_learner_y">learner_y</code></td>
<td>
<p>A estimation model for the outcome.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_tpoisson'>Estimate the Individual Treatment Effect (ITE) using T-Poisson regression</h2><span id='topic+estimate_ite_tpoisson'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using Poisson regression given a
response vector, a treatment vector, and a features matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_tpoisson(y, z, X, offset)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_tpoisson_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_tpoisson_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_tpoisson_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_tpoisson_+3A_offset">offset</code></td>
<td>
<p>A name of the covariate to use as offset (i.e. &ldquo;x1&rdquo;) to
model the corresponding outcome rate. <code>NULL</code> to model directly the outcome
counts without offset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of ITE estimates.
</p>

<hr>
<h2 id='estimate_ite_xlearner'>Estimate the Individual Treatment Effect (ITE) using X-Learner</h2><span id='topic+estimate_ite_xlearner'></span>

<h3>Description</h3>

<p>Estimates the Individual Treatment Effect using X-Learner given a response
vector, a treatment vector, a features matrix and an estimation model for
the outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ite_xlearner(y, z, X, learner_y = "SL.xgboost")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ite_xlearner_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_xlearner_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ite_xlearner_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="estimate_ite_xlearner_+3A_learner_y">learner_y</code></td>
<td>
<p>A estimation model for the outcome.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ITE estimates.
</p>

<hr>
<h2 id='estimate_ps'>Estimate the propensity score</h2><span id='topic+estimate_ps'></span>

<h3>Description</h3>

<p>Estimates the Propensity Score given a treatment vector and
features data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_ps(z, X, ps_method = "SL.xgboost")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_ps_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="estimate_ps_+3A_x">X</code></td>
<td>
<p>A features data frame.</p>
</td></tr>
<tr><td><code id="estimate_ps_+3A_ps_method">ps_method</code></td>
<td>
<p>An estimation model for the propensity score
(default: <code>SL.xgboost</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of propensity score estimates.
</p>

<hr>
<h2 id='evaluate'>Discovery (performance) evaluation</h2><span id='topic+evaluate'></span>

<h3>Description</h3>

<p>Computes different metrics for discovery evaluation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate(ground_truth, prediction)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evaluate_+3A_ground_truth">ground_truth</code></td>
<td>
<p>List of true (CDR/EM) values.</p>
</td></tr>
<tr><td><code id="evaluate_+3A_prediction">prediction</code></td>
<td>
<p>List of predicted (CDR/EM) values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Intersection over union, precision, recall.
</p>

<hr>
<h2 id='extract_effect_modifiers'>Extract effect modifiers</h2><span id='topic+extract_effect_modifiers'></span>

<h3>Description</h3>

<p>Extracts the effect modifiers from a list of (causal) decision rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_effect_modifiers(rules_list, X_names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_effect_modifiers_+3A_rules_list">rules_list</code></td>
<td>
<p>A list of (causal) decision rules.</p>
</td></tr>
<tr><td><code id="extract_effect_modifiers_+3A_x_names">X_names</code></td>
<td>
<p>A list of the covariate names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the effect modifiers.
</p>

<hr>
<h2 id='extract_rules'>Extract (causal) decision rules</h2><span id='topic+extract_rules'></span>

<h3>Description</h3>

<p>Extracts causal rules from the random forest or the gradient
boosting algorithms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_rules(treelist, X, max_depth, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_rules_+3A_treelist">treelist</code></td>
<td>
<p>A list of decision trees.</p>
</td></tr>
<tr><td><code id="extract_rules_+3A_x">X</code></td>
<td>
<p>Features matrix.</p>
</td></tr>
<tr><td><code id="extract_rules_+3A_max_depth">max_depth</code></td>
<td>
<p>A number of top levels from each tree considered.</p>
</td></tr>
<tr><td><code id="extract_rules_+3A_digits">digits</code></td>
<td>
<p>A Number of digits for rounding decision rules to extract
conditions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of (causal) decision rules.
</p>

<hr>
<h2 id='filter_correlated_rules'>Filter correlated rules</h2><span id='topic+filter_correlated_rules'></span>

<h3>Description</h3>

<p>Discards highly correlated rules (i.e., <code class="reqn">Cov(rule_1,rule_2) &gt; t_{corr}</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_correlated_rules(rules_matrix, rules_list, t_corr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_correlated_rules_+3A_rules_matrix">rules_matrix</code></td>
<td>
<p>A rules matrix.</p>
</td></tr>
<tr><td><code id="filter_correlated_rules_+3A_rules_list">rules_list</code></td>
<td>
<p>A list of rules (names).</p>
</td></tr>
<tr><td><code id="filter_correlated_rules_+3A_t_corr">t_corr</code></td>
<td>
<p>A threshold to define correlated rules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rules matrix without the highly correlated rules (columns).
</p>

<hr>
<h2 id='filter_extreme_rules'>Filter extreme decision rules</h2><span id='topic+filter_extreme_rules'></span>

<h3>Description</h3>

<p>Discards rules with too few or too many observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_extreme_rules(rules_matrix, rules_list, t_ext)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_extreme_rules_+3A_rules_matrix">rules_matrix</code></td>
<td>
<p>A rules matrix.</p>
</td></tr>
<tr><td><code id="filter_extreme_rules_+3A_rules_list">rules_list</code></td>
<td>
<p>A list of rules (names).</p>
</td></tr>
<tr><td><code id="filter_extreme_rules_+3A_t_ext">t_ext</code></td>
<td>
<p>A threshold in [0, 0.5) range to truncate too generic or too
specific rules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rules matrix without the rare/common rules.
</p>

<hr>
<h2 id='filter_irrelevant_rules'>Filter irrelevant decision rules using leave-one-out pruning</h2><span id='topic+filter_irrelevant_rules'></span>

<h3>Description</h3>

<p>Filters the irrelevant decision rules. The irrelevant rules are interpreted
as an error increase after removing a variable-value pair from the decision
rules (see &ldquo;Interpreting tree ensembles with the inTrees package&rdquo; by
Houtao Deng, 2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_irrelevant_rules(rules, X, ite, t_decay)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_irrelevant_rules_+3A_rules">rules</code></td>
<td>
<p>A list of rules.</p>
</td></tr>
<tr><td><code id="filter_irrelevant_rules_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="filter_irrelevant_rules_+3A_ite">ite</code></td>
<td>
<p>An estimated ITE.</p>
</td></tr>
<tr><td><code id="filter_irrelevant_rules_+3A_t_decay">t_decay</code></td>
<td>
<p>The decay threshold for rules pruning.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of &ldquo;relevant&rdquo; rules.
</p>

<hr>
<h2 id='generate_cre_dataset'>Generate CRE synthetic data</h2><span id='topic+generate_cre_dataset'></span>

<h3>Description</h3>

<p>Generates synthetic data sets to run simulation for causal inference
experiments composed by an outcome vector (<code>y</code>), a treatment vector (<code>z</code>),
a covariates matrix (<code>X</code>), and an unobserved individual treatment effects
vector (<code>ite</code>).
The arguments specify the data set characteristic, including the
number of individuals (<code>n</code>), the number of covariates (<code>p</code>), the correlation
within the covariates (<code>rho</code>),  the number of decision rules
(<code>n_rules</code>) decomposing the Conditional Average Treatment Effect (CATE), the
treatment effect magnitude (<code>effect_size</code>), the confounding mechanism
(<code>confounding</code>), and whether the covariates and outcomes are binary or
continuous (<code>binary_covariates</code>, <code>binary_outcome</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_cre_dataset(
  n = 1000,
  rho = 0,
  n_rules = 2,
  p = 10,
  effect_size = 2,
  binary_covariates = TRUE,
  binary_outcome = TRUE,
  confounding = "no"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_cre_dataset_+3A_n">n</code></td>
<td>
<p>An integer number that represents the number of observations.
Non-integer values will be converted into an integer number.</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_rho">rho</code></td>
<td>
<p>A positive double number that represents the correlation
within the covariates (default: 0, range: [0,1)).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_n_rules">n_rules</code></td>
<td>
<p>The number of causal rules (default: 2, range: {1,2,3,4}).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_p">p</code></td>
<td>
<p>The number of covariates (default: 10).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_effect_size">effect_size</code></td>
<td>
<p>The treatment effect size magnitude (default: 2,
range: <code class="reqn">\geq</code>0).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_binary_covariates">binary_covariates</code></td>
<td>
<p>Whether to use binary or continuous covariates
(default: <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_binary_outcome">binary_outcome</code></td>
<td>
<p>Whether to use binary or continuous outcomes
(default: <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="generate_cre_dataset_+3A_confounding">confounding</code></td>
<td>
<p>Only for continuous outcome, add confounding variables:
</p>

<ul>
<li> <p><code>"lin"</code> for linear confounding,
</p>
</li>
<li> <p><code>"nonlin"</code> for non-linear confounding,
</p>
</li>
<li> <p><code>"no"</code> for no confounding (default).
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>The covariates matrix is generated with the specified correlation among
individuals, and each covariate is sampled either from a
<code>Bernoulli(0.5)</code> if binary, or a <code>Gaussian(0,1)</code> if continuous.
The treatment vector is sampled from a
<code>Bernoulli</code>(<code class="reqn">\frac{1}{1+ \exp(1-x_1+x_2-x_3)}</code>), enforcing the treatment
assignment probabilities to be a function of observed covariates.
The potential outcomes (<code class="reqn">y(0)</code> and <code class="reqn">y(1)</code>) are then sampled from a Bernoulli
if binary, or a Gaussian (with standard deviation equal to 1) if continuous.
Their mean is equal to a confounding term (null, linear or non-linear and
always null for binary outcome) plus 1-4 decision rules weighted by the
treatment effect magnitude. The two potential outcomes characterizes the CATE
(and then the unobserved individual treatment effects vector) as the sum of
different additive contributions for each decision rules considered
(plus an intercept).
The final expression of the CATE depends on the treatment effect magnitude
and the number of decision rules considered.
</p>
<p>The 4 decision rules are:
</p>

<ul>
<li><p> Rule 1: <code class="reqn">1\{x_1 &gt; 0.5; x_2 \leq 0.5\}(\textbf{x})</code>
</p>
</li>
<li><p> Rule 2: <code class="reqn">1\{x_5 &gt; 0.5; x_6 \leq 0.5\}(\textbf{x})</code>
</p>
</li>
<li><p> Rule 3: <code class="reqn">1\{x_4 \leq 0.5\}(\textbf{x})</code>
</p>
</li>
<li><p> Rule 4: <code class="reqn">1\{x_5 \leq 0.5; x_7 &gt; 0.5; x_8 \leq 0.5\}(\textbf{x})</code>
with corresponding additive average treatment effect (AATE) equal to:
</p>
</li>
<li><p> Rule 1: <code class="reqn">-</code> <code>effect_size</code>,
</p>
</li>
<li><p> Rule 2: <code class="reqn">+</code> <code>effect_size</code>,
</p>
</li>
<li><p> Rule 3: <code class="reqn">- 0.5 \cdot</code> <code>effect_size</code>,
</p>
</li>
<li><p> Rule 4: <code class="reqn">+ 2 \cdot</code> <code>effect_size</code>.
</p>
</li></ul>

<p>In example, setting <code>effect_size</code>=4 and <code>n_rules</code>=2:
</p>
<p style="text-align: center;"><code class="reqn">\text{CATE}(\textbf{x}) = -4 \cdot 1\{x_1 &gt; 0.5; x_2 \leq 0.5\}(\textbf{x}) +
4 \cdot 1\{x_5 &gt; 0.5; x_6 \leq 0.5\}(\textbf{x})</code>
</p>

<p>The final outcome vector <code>y</code> is finally computed by combining the potential
outcomes according to the treatment assignment.
</p>


<h3>Value</h3>

<p>A list, representing the generated synthetic data set, containing:
</p>
<table role = "presentation">
<tr><td><code>y</code></td>
<td>
<p>an outcome vector,</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>a treatment vector,</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>a covariates matrix,</p>
</td></tr>
<tr><td><code>ite</code></td>
<td>
<p>an individual treatment vector.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Set the covariates domain (<code>binary_covariates</code>) and outcome domain
(<code>binary_outcome</code>) according to the experiment of interest.
Increase complexity in heterogeneity discovery:
</p>

<ul>
<li><p> decreasing the sample size (<code>n</code>),
</p>
</li>
<li><p> adding correlation among covariates (<code>rho</code>),
</p>
</li>
<li><p> increasing the number of rules (<code>n_rules</code>),
</p>
</li>
<li><p> increasing the number of covariates (<code>p</code>),
</p>
</li>
<li><p> decreasing the absolute value of the causal effect (<code>effect_size</code>),
</p>
</li>
<li><p> adding linear or not-linear confounders (<code>confounding</code>).
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
dataset &lt;- generate_cre_dataset(n = 1000, rho = 0, n_rules = 2, p = 10,
                                effect_size = 2, binary_covariates = TRUE,
                                binary_outcome = TRUE, confounding = "no")

</code></pre>

<hr>
<h2 id='generate_rules'>Generate rules</h2><span id='topic+generate_rules'></span>

<h3>Description</h3>

<p>Generates a list of rules characterizing the heterogeneity in the Conditional
Average Treatment Effect (CATE) by tree-based methods (i.e., random forest).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_rules(X, ite, ntrees, node_size, max_rules, max_depth)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_rules_+3A_x">X</code></td>
<td>
<p>A covariate matrix.</p>
</td></tr>
<tr><td><code id="generate_rules_+3A_ite">ite</code></td>
<td>
<p>A vector of estimated ITE.</p>
</td></tr>
<tr><td><code id="generate_rules_+3A_ntrees">ntrees</code></td>
<td>
<p>The number of decision trees for the random forest algorithm.</p>
</td></tr>
<tr><td><code id="generate_rules_+3A_node_size">node_size</code></td>
<td>
<p>Minimum size of the trees' terminal nodes.</p>
</td></tr>
<tr><td><code id="generate_rules_+3A_max_rules">max_rules</code></td>
<td>
<p>Maximum number of candidate decision rules.</p>
</td></tr>
<tr><td><code id="generate_rules_+3A_max_depth">max_depth</code></td>
<td>
<p>Maximum rules length.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of rules (names).
</p>

<hr>
<h2 id='generate_rules_matrix'>Generate rules matrix</h2><span id='topic+generate_rules_matrix'></span>

<h3>Description</h3>

<p>Generates the rules matrix from the feature covariate matrix and a vector of
rules. The number of rows in rules_matrix is equal to the number of samples
in <code>X</code>, and the number of columns is equal to the number of rules in
<code>rules_list</code>. Each element of rules_matrix corresponds to a specific data
sample and rule. If the data sample satisfies a rule, the corresponding
element in rules_matrix is set to 1. Otherwise, the element is set to 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_rules_matrix(X, rules_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_rules_matrix_+3A_x">X</code></td>
<td>
<p>Features matrix.</p>
</td></tr>
<tr><td><code id="generate_rules_matrix_+3A_rules_list">rules_list</code></td>
<td>
<p>A vector of rules.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A causal rules matrix.
</p>

<hr>
<h2 id='get_logger'>Get Logger settings</h2><span id='topic+get_logger'></span>

<h3>Description</h3>

<p>Returns current logger settings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_logger()
</code></pre>


<h3>Value</h3>

<p>Returns a list that includes <strong>logger_file_path</strong> and <strong>logger_level</strong>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_logger">set_logger</a></code> for information on setting the log level and file path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_logger("mylogger.log", "INFO")
log_meta &lt;- get_logger()

</code></pre>

<hr>
<h2 id='honest_splitting'>Honest splitting</h2><span id='topic+honest_splitting'></span>

<h3>Description</h3>

<p>Splits data into discovery and inference sub-samples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>honest_splitting(y, z, X, ratio_dis, ite = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="honest_splitting_+3A_y">y</code></td>
<td>
<p>An observed response vector.</p>
</td></tr>
<tr><td><code id="honest_splitting_+3A_z">z</code></td>
<td>
<p>A treatment vector.</p>
</td></tr>
<tr><td><code id="honest_splitting_+3A_x">X</code></td>
<td>
<p>A features matrix.</p>
</td></tr>
<tr><td><code id="honest_splitting_+3A_ratio_dis">ratio_dis</code></td>
<td>
<p>A double number indicating the ratio of data delegated to
the discovery sub-sample.</p>
</td></tr>
<tr><td><code id="honest_splitting_+3A_ite">ite</code></td>
<td>
<p>A vector of estimated ITE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the discovery and inference sub-samples.
</p>

<hr>
<h2 id='interpret_rules'>Interpret rules</h2><span id='topic+interpret_rules'></span>

<h3>Description</h3>

<p>Replaces the column numbers in the rules vector with their real names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpret_rules(rules, X_names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpret_rules_+3A_rules">rules</code></td>
<td>
<p>A vector of rules.</p>
</td></tr>
<tr><td><code id="interpret_rules_+3A_x_names">X_names</code></td>
<td>
<p>A vector of real names of the covariates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of explicit (human-readable) rules.
</p>

<hr>
<h2 id='plot.cre'>Extend generic plot functions for cre class</h2><span id='topic+plot.cre'></span>

<h3>Description</h3>

<p>A wrapper function to extend generic plot functions for cre class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cre'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.cre_+3A_x">x</code></td>
<td>
<p>A <code>cre</code> object.</p>
</td></tr>
<tr><td><code id="plot.cre_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to customize the plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a ggplot2 object, invisibly. This function is called for side
effects.
</p>

<hr>
<h2 id='predict.cre'>Predict individual treatment effect via causal rule ensemble</h2><span id='topic+predict.cre'></span>

<h3>Description</h3>

<p>Predicts individual treatment effect via causal rule ensemble algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cre'
predict(object, X, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.cre_+3A_object">object</code></td>
<td>
<p>A <code>cre</code> object from running the CRE function.</p>
</td></tr>
<tr><td><code id="predict.cre_+3A_x">X</code></td>
<td>
<p>A covariate matrix (or data.frame)</p>
</td></tr>
<tr><td><code id="predict.cre_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to customize the prediction.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array with the estimated Individual Treatment Effects
</p>

<hr>
<h2 id='print.cre'>Extend print function for the CRE object</h2><span id='topic+print.cre'></span>

<h3>Description</h3>

<p>Prints a brief summary of the CRE object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cre'
print(x, verbose = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.cre_+3A_x">x</code></td>
<td>
<p>A cre object from running the CRE function.</p>
</td></tr>
<tr><td><code id="print.cre_+3A_verbose">verbose</code></td>
<td>
<p>Set level of results description details: 0 for only results
summary, 1 for results and parameters summary, 2 for results and parameters
and rules summary (default 2).</p>
</td></tr>
<tr><td><code id="print.cre_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to customize the results description.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. This function is called for side effects.
</p>

<hr>
<h2 id='select_rules'>Select rules</h2><span id='topic+select_rules'></span>

<h3>Description</h3>

<p>Given a set of rules, selects the minimal set linearly decomposing the
Conditional Average Treatment Effect (CATE) by LASSO (optionally with
Stability Selection).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_rules(rules_matrix, rules, ite, stability_selection, cutoff, pfer, B)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select_rules_+3A_rules_matrix">rules_matrix</code></td>
<td>
<p>The rules matrix.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_rules">rules</code></td>
<td>
<p>A list of rules.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_ite">ite</code></td>
<td>
<p>The estimated ITE.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_stability_selection">stability_selection</code></td>
<td>
<p>Stability selection method.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_cutoff">cutoff</code></td>
<td>
<p>Threshold (percentage) defining the minimum cutoff value for
the stability scores. Only for stability selection.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_pfer">pfer</code></td>
<td>
<p>Upper bound for the per-family error rate (tolerated amount of
falsely selected rules). Only for stability selection.</p>
</td></tr>
<tr><td><code id="select_rules_+3A_b">B</code></td>
<td>
<p>Number of bootstrap samples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A minimal set of rules linearly decomposing the CATE.
</p>

<hr>
<h2 id='set_logger'>Set Logger settings</h2><span id='topic+set_logger'></span>

<h3>Description</h3>

<p>Updates logger settings, including log level and location of the file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_logger(logger_file_path = "CRE.log", logger_level = "INFO")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_logger_+3A_logger_file_path">logger_file_path</code></td>
<td>
<p>A path (including file name) to log the messages.
(Default: CRE.log)</p>
</td></tr>
<tr><td><code id="set_logger_+3A_logger_level">logger_level</code></td>
<td>
<p>The log level. When a log level is set, all log levels
below it are also activated (if implemented). Available levels include:
</p>

<ul>
<li><p> TRACE: Provides verbose detailed logging, including the steps taken to
achieve a result, often used for debugging. Activating TRACE will also
enable DEBUG, INFO, SUCCESS, WARN, ERROR, and FATAL logs.
</p>
</li>
<li><p> DEBUG: Provides detailed logging about the flow of the application, used
mostly by developers to understand potential issues. Activating DEBUG will
also enable INFO, SUCCESS, WARN, ERROR, and FATAL logs.
</p>
</li>
<li><p> INFO (Default): Standard messages that inform the user about the normal
operation of the system. Activating INFO will also enable SUCCESS, WARN,
ERROR, and FATAL logs.
</p>
</li>
<li><p> SUCCESS: Messages indicating successful completion of a particular
operation or task. Activating SUCCESS will also enable WARN, ERROR, and
FATAL logs.
</p>
</li>
<li><p> WARN: Warning messages about events that might cause problems in the
future, but are not yet errors. Activating WARN will also enable ERROR
and FATAL logs.
</p>
</li>
<li><p> ERROR: Reports an error due to which the system may not be able to
achieve its functionality, but the application won't halt. Activating
ERROR will also enable FATAL logs.
</p>
</li>
<li><p> FATAL: Reports very severe error events that will presumably lead the
application to abort.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. This function is called for side effects.
</p>


<h3>Note</h3>

<p>Log levels are specified by developers during the initial implementation.
Future developers or contributors can leverage these log levels to better
capture and document the application's processes and events.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_logger("Debug")

</code></pre>

<hr>
<h2 id='standardize_rules_matrix'>Standardize Rules Matrix</h2><span id='topic+standardize_rules_matrix'></span>

<h3>Description</h3>

<p>Standardize (i.e. mean=0 and stdev=1) the rules matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardize_rules_matrix(rules_matrix)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="standardize_rules_matrix_+3A_rules_matrix">rules_matrix</code></td>
<td>
<p>The rules matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Standardized rules matrix
</p>

<hr>
<h2 id='summary.cre'>Print summary of CRE object</h2><span id='topic+summary.cre'></span>

<h3>Description</h3>

<p>Prints a brief summary of the CRE object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cre'
summary(object, verbose = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.cre_+3A_object">object</code></td>
<td>
<p>A cre object from running the CRE function.</p>
</td></tr>
<tr><td><code id="summary.cre_+3A_verbose">verbose</code></td>
<td>
<p>Set level of results description details: only results summary
0, results+parameters summary 1, results+parameters+rules summary
(default 2).</p>
</td></tr>
<tr><td><code id="summary.cre_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to customize the results description.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary of the CRE object
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
