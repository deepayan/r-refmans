<!DOCTYPE html><html><head><title>Help for package UncDecomp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {UncDecomp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apply_sweep'><p>Slight modifications of apply() and sweep()</p></a></li>
<li><a href='#cum_uncertainty'><p>Cumulative uncertainty(DEPRECATED)</p></a></li>
<li><a href='#drange'><p>Range(DEPRECATED)</p></a></li>
<li><a href='#plotUDlist'><p>Plot UD_list</p></a></li>
<li><a href='#printUD'><p>Print UD</p></a></li>
<li><a href='#scenario_uncertainty'><p>Scenario uncertainty(DEPRECATED)</p></a></li>
<li><a href='#stage_uncertainty'><p>Stage uncertainty(DEPRECATED)</p></a></li>
<li><a href='#UD_ANOVA_model'><p>Model-wise uncertainty based on the second order interaction ANOVA</p></a></li>
<li><a href='#UD_ANOVA_stage'><p>Stage-wise uncertainty based on the second order interaction ANOVA</p></a></li>
<li><a href='#UD_bal_model'><p>Model-wise balanced uncertainty</p></a></li>
<li><a href='#UD_bal_stage'><p>Stage-wise balanced uncertainty</p></a></li>
<li><a href='#UD_cum_stage'><p>Stage-wise uncertainty based on cumulative uncertainty</p></a></li>
<li><a href='#UD_model2stage'><p>Convert model uncertainty to stage uncertainty</p></a></li>
<li><a href='#UDtable'><p>Make uncertainty table</p></a></li>
<li><a href='#unc_measures'><p>uncertainty measures</p></a></li>
<li><a href='#unc_postprocess'><p>Postprocess UD</p></a></li>
<li><a href='#var0'><p>Variance(DEPRECATED)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Uncertainty Decomposition</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Seonghyeon Kim [aut, cre],
  Yongdai Kim [aut],
  Ilsang Ohn [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Seonghyeon Kim &lt;shkim93@snu.ac.kr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>If a procedure consists of several stages and there are several models that can be selected for each stage,
	uncertainty of the procedure can be decomposed by stages or models.
	This package includes the ANOVA-based method, the cumulative uncertainty-based method, and the balanced decomposition method.
	Yongdai Kim et al. (2019) &lt;<a href="https://doi.org/10.1016%2Fj.hydroa.2019.100024">doi:10.1016/j.hydroa.2019.100024</a>&gt; is a related paper which is accessible via the URL below.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.4)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.sciencedirect.com/science/article/pii/S2589915519300082">https://www.sciencedirect.com/science/article/pii/S2589915519300082</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-11-07 01:28:34 UTC; ksh</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, dplyr</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-11-07 11:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='apply_sweep'>Slight modifications of apply() and sweep()</h2><span id='topic+apply_sweep'></span><span id='topic+apply0'></span><span id='topic+sweep0'></span><span id='topic+msweep'></span>

<h3>Description</h3>

<p>Slightly modified version of apply() and sweep(). apply0() and sweep0() are modification of apply() and sweep() so that they can be used when the length(MARGIN) is zero. 
msweep() is a modification of sweep() so that it can be used when function receives multiple summary statistic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply0(X, MARGIN, FUN, ...)

sweep0(X, MARGIN, STATS, FUN, ...)

msweep(X, MARGIN, STATS, FUN, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_sweep_+3A_x">X</code></td>
<td>
<p>an array.</p>
</td></tr>
<tr><td><code id="apply_sweep_+3A_margin">MARGIN</code></td>
<td>
<p>apply0() : a vector giving the subscripts which the function will be applied over. sweep0(), msweep() : a vector of indices giving the extent(s) of x which correspond to STATS.</p>
</td></tr>
<tr><td><code id="apply_sweep_+3A_fun">FUN</code></td>
<td>
<p>the function to be applied. For msweep(), a function that receives the elements of X and list in order</p>
</td></tr>
<tr><td><code id="apply_sweep_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="apply_sweep_+3A_stats">STATS</code></td>
<td>
<p>the summary statistic array which is to be swept out. For msweep(), list of summary statistic array.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If each call to FUN returns a vector of length n, then apply() returns an array of dimension c(n, dim(X)[MARGIN]) if n &gt; 1. If n equals 1, apply() returns a scalar if MARGIN has length 0, a vector if MARGIN has length 1 and an array of dimension dim(X)[MARGIN] otherwise.
sweep0() and msweep() return an array with the same shape as x, but with the summary statistics swept out.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
A &lt;- array(rnorm(24), dim = 4:2)
meanA0 &lt;- apply0(A, numeric(0), mean)
meanA12 &lt;- apply0(A, 1:2, mean)
sdA12 &lt;- apply0(A, 1:2, sd)
ctrArray &lt;- function(a,mu) return(a-mu)
sweep0(A, numeric(0), meanA0, ctrArray)
sweep0(A, 1:2, meanA12, ctrArray)
statsA12 &lt;- list(meanA12, sdA12)
stdArray &lt;- function(a,mu,sigma) return((a-mu)/sigma)
msweep(A, 1:2, statsA12, stdArray)
</code></pre>

<hr>
<h2 id='cum_uncertainty'>Cumulative uncertainty(DEPRECATED)</h2><span id='topic+cum_uncertainty'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition based on the cumulative uncertainty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cum_uncertainty(data, var_name, stages = setdiff(names(data), var_name),
  U = var0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cum_uncertainty_+3A_data">data</code></td>
<td>
<p>a data frame containing scenarios(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of scenarios.</p>
</td></tr>
<tr><td><code id="cum_uncertainty_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="cum_uncertainty_+3A_stages">stages</code></td>
<td>
<p>names of the stages in the modeling chain. should be ordered by the order of the modeling chain</p>
</td></tr>
<tr><td><code id="cum_uncertainty_+3A_u">U</code></td>
<td>
<p>a function that returns uncertainty such as range and variance of a given numeric vector.
This package have built-in uncertainty functions var0() and drange(). Default is var0().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>summary of uncertainties
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
data &lt;- cbind(data, y)
# cum_uncertainty() is deprecated. Use UD_cum_stage()
# cum_uncertainty(data,"y", names(data)[-4])
# cum_uncertainty(data,"y", names(data)[-4],drange)
</code></pre>

<hr>
<h2 id='drange'>Range(DEPRECATED)</h2><span id='topic+drange'></span>

<h3>Description</h3>

<p>This function returns the difference of maximum and minimum of a given vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drange(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drange_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the difference of maximum and minimum of a given vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;- rnorm(5))
# drange() is deprecated. Use U_range()
# drange(x)
</code></pre>

<hr>
<h2 id='plotUDlist'>Plot UD_list</h2><span id='topic+plotUDlist'></span>

<h3>Description</h3>

<p>This function plots how ppud's result changes as lambda increases.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotUDlist_+3A_x">x</code></td>
<td>
<p>output of ppud(UD_list class)</p>
</td></tr>
<tr><td><code id="plotUDlist_+3A_lwd">lwd</code></td>
<td>
<p>line width in plot</p>
</td></tr>
<tr><td><code id="plotUDlist_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot showing how the result of ppud changes as lambda increases
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
UD_bal_model_range 

UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
UD_bal_stage_range 

UD_model_list = ppud(UD_bal_model_range)
plot(UD_model_list)

UD_stage_list = ppud(UD_bal_stage_range)
plot(UD_stage_list)

</code></pre>

<hr>
<h2 id='printUD'>Print UD</h2><span id='topic+printUD'></span><span id='topic+print.UD_model'></span><span id='topic+print.UD_stage'></span>

<h3>Description</h3>

<p>This function creates a table summarizing the uncertainty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'UD_model'
print(x, ...)

## S3 method for class 'UD_stage'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="printUD_+3A_x">x</code></td>
<td>
<p>model wise uncertainty(UD_model class) or stage wise uncertainty(UD_stage class)</p>
</td></tr>
<tr><td><code id="printUD_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
print(UD_bal_model_range)

UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
print(UD_bal_stage_range)
</code></pre>

<hr>
<h2 id='scenario_uncertainty'>Scenario uncertainty(DEPRECATED)</h2><span id='topic+scenario_uncertainty'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition by scenario based on the second order interaction ANOVA model.
The uncertainty from interaction effect from two scenarios is divided equally and assigned to each scenario.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scenario_uncertainty(data, var_name, stages = setdiff(names(data),
  var_name))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scenario_uncertainty_+3A_data">data</code></td>
<td>
<p>a data frame containing scenarios(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of scenarios.</p>
</td></tr>
<tr><td><code id="scenario_uncertainty_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="scenario_uncertainty_+3A_stages">stages</code></td>
<td>
<p>names of the stages of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of 4 elements
</p>
<table>
<tr><td><code>summary</code></td>
<td>
<p>summary of uncertainties</p>
</td></tr>
<tr><td><code>main_uncer</code></td>
<td>
<p>list of which element is a vector of uncertainties from the main effects of scenarios in the corresponding stage</p>
</td></tr>
<tr><td><code>int_uncer</code></td>
<td>
<p>list of which element is a vector of uncertainties from the interaction effects of scenarios in the corresponding stage</p>
</td></tr>
<tr><td><code>scenario_uncer</code></td>
<td>
<p>list of which element is a vector of uncertainties of scenarios in the corresponding stage</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
data &lt;- cbind(data, y)
# scenario_uncertainty() is deprecated. Use UD_ANOVA_model()
# scenario_uncertainty(data,"y", names(data)[-4])
</code></pre>

<hr>
<h2 id='stage_uncertainty'>Stage uncertainty(DEPRECATED)</h2><span id='topic+stage_uncertainty'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition by stage based on the second order interaction ANOVA model.
The uncertainty from interaction effect from two stages is divided equally and assigned to each stage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stage_uncertainty(data, var_name, stages = setdiff(names(data),
  var_name))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stage_uncertainty_+3A_data">data</code></td>
<td>
<p>a data frame containing scenarios(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of scenarios. columns scenarios</p>
</td></tr>
<tr><td><code id="stage_uncertainty_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="stage_uncertainty_+3A_stages">stages</code></td>
<td>
<p>names of the stages in the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of 4 elements
</p>
<table>
<tr><td><code>summary</code></td>
<td>
<p>summary of uncertainties</p>
</td></tr>
<tr><td><code>main_uncer</code></td>
<td>
<p>a vector of uncertainties from the main effects of the stages</p>
</td></tr>
<tr><td><code>int_uncer</code></td>
<td>
<p>a vector of uncertainties from the interaction effects of the stages</p>
</td></tr>
<tr><td><code>scenario_uncer</code></td>
<td>
<p>a vector of uncertainties of the stages</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
data &lt;- cbind(data, y)
# stage_uncertainty() is deprecated. Use UD_ANOVA_stage()
# stage_uncertainty(data,"y", names(data)[-4])
</code></pre>

<hr>
<h2 id='UD_ANOVA_model'>Model-wise uncertainty based on the second order interaction ANOVA</h2><span id='topic+UD_ANOVA_model'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition by model based on the second order interaction ANOVA model.
The uncertainty from interaction effect from two models is divided equally and assigned to each model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_ANOVA_model(data, var_name, stages = setdiff(names(data), var_name))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_ANOVA_model_+3A_data">data</code></td>
<td>
<p>a data frame containing models(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of models.</p>
</td></tr>
<tr><td><code id="UD_ANOVA_model_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="UD_ANOVA_model_+3A_stages">stages</code></td>
<td>
<p>names of the stages of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List(UD_model class) including uncertainties of models, uncertainties from main effects, uncertainties from interaction, total uncertainty, names of stages and models
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_ANOVA_model &lt;- UD_ANOVA_model(data, "y", stages)
UD_ANOVA_model
UD_ANOVA_stage &lt;- UD_model2stage(UD_ANOVA_model)
UD_ANOVA_stage
</code></pre>

<hr>
<h2 id='UD_ANOVA_stage'>Stage-wise uncertainty based on the second order interaction ANOVA</h2><span id='topic+UD_ANOVA_stage'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition by stage based on the second order interaction ANOVA model.
The uncertainty from interaction effect from two stages is divided equally and assigned to each stage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_ANOVA_stage(data, var_name, stages = setdiff(names(data), var_name))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_ANOVA_stage_+3A_data">data</code></td>
<td>
<p>a data frame containing models(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of models.</p>
</td></tr>
<tr><td><code id="UD_ANOVA_stage_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="UD_ANOVA_stage_+3A_stages">stages</code></td>
<td>
<p>names of the stages in the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List(UD_stage class) including uncertainties of stages, uncertainties from main effects, uncertainties from interaction, total uncertainty, names of stages.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)
UD_ANOVA_stage(data,"y", stages)
</code></pre>

<hr>
<h2 id='UD_bal_model'>Model-wise balanced uncertainty</h2><span id='topic+UD_bal_model'></span>

<h3>Description</h3>

<p>This function performs the balanced uncertainty decomposition. 
In balanced uncertainty decomposition, we assume that the total uncertainty decomposes into the uncertainty of all main effects and all orders of interaction between models.
This method distributes the uncertainties of each element evenly among the associated models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_bal_model(data, var_name, stages, u = u_var, flist = flist_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_bal_model_+3A_data">data</code></td>
<td>
<p>a data frame containing models(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of models.</p>
</td></tr>
<tr><td><code id="UD_bal_model_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="UD_bal_model_+3A_stages">stages</code></td>
<td>
<p>names of the stages of interest.</p>
</td></tr>
<tr><td><code id="UD_bal_model_+3A_u">u</code></td>
<td>
<p>a function that returns uncertainty of each element of the vector like difference or square of difference between each element and summary statistics.
This package have built-in uncertainty functions u_var(), u_mad() and u_range(). Default is u_var().</p>
</td></tr>
<tr><td><code id="UD_bal_model_+3A_flist">flist</code></td>
<td>
<p>list of functions that summarize vector like mean or median.
This package have built-in uncertainty functions flist_var(), flist_mad() and flist_range(). Default is flist_var().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>model-wise uncertainties(UD_model class)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_var &lt;- UD_bal_model(data, "y", stages, u_var, flist_var)
UD_bal_model_var
UD_bal_model_mad &lt;- UD_bal_model(data, "y", stages, u_mad, flist_mad)
UD_bal_model_mad 
UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
UD_bal_model_range 

UD_bal_stage_var &lt;- UD_model2stage(UD_bal_model_var)
UD_bal_stage_var 
UD_bal_stage_mad &lt;- UD_model2stage(UD_bal_model_mad)
UD_bal_stage_mad 
UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
UD_bal_stage_range 

UD_list = ppud(UD_bal_model_range)
plot(UD_list)

lambda = min_lambda_calc(UD_bal_model_range, 0.01)
UD_1percent = ppud(UD_bal_model_range, lambda)
UD_1percent$UD[[1]]
</code></pre>

<hr>
<h2 id='UD_bal_stage'>Stage-wise balanced uncertainty</h2><span id='topic+UD_bal_stage'></span>

<h3>Description</h3>

<p>This function performs the balanced uncertainty decomposition. 
In balanced uncertainty decomposition, we assume that the total uncertainty decomposes into the uncertainty of all main effects and all orders of interaction between stages.
This method distributes the uncertainties of each element evenly among the associated stages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_bal_stage(data, var_name, stages, U = U_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_bal_stage_+3A_data">data</code></td>
<td>
<p>a data frame containing models(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of models.</p>
</td></tr>
<tr><td><code id="UD_bal_stage_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="UD_bal_stage_+3A_stages">stages</code></td>
<td>
<p>names of the stages of interest.</p>
</td></tr>
<tr><td><code id="UD_bal_stage_+3A_u">U</code></td>
<td>
<p>a function that returns uncertainty such as range and variance of a given numeric vector.
This package have built-in uncertainty functions U_var(), U_mad() and U_range(). Default is U_var().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stage-wise uncertainties(UD_stage class)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)
UD_bal_stage(data, "y", stages, U_var)
UD_bal_stage(data, "y", stages, U_mad)
UD_bal_stage(data, "y", stages, U_range)
</code></pre>

<hr>
<h2 id='UD_cum_stage'>Stage-wise uncertainty based on cumulative uncertainty</h2><span id='topic+UD_cum_stage'></span>

<h3>Description</h3>

<p>This function performs uncertainty decomposition based on the cumulative uncertainty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_cum_stage(data, var_name, stages = setdiff(names(data), var_name),
  U = U_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_cum_stage_+3A_data">data</code></td>
<td>
<p>a data frame containing models(factor or character) for each stages and the variable of interest(numeric).
data should contain all combinations of models.</p>
</td></tr>
<tr><td><code id="UD_cum_stage_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable of interest</p>
</td></tr>
<tr><td><code id="UD_cum_stage_+3A_stages">stages</code></td>
<td>
<p>names of the stages in the modeling chain. should be ordered by the order of the modeling chain</p>
</td></tr>
<tr><td><code id="UD_cum_stage_+3A_u">U</code></td>
<td>
<p>a function that returns uncertainty such as range and variance of a given numeric vector.
This package have built-in uncertainty functions U_var(), U_mad() and U_range(). Default is U_var().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stage-wise uncertainties(UD_stage class)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_cum_stage(data, "y", stages, U_var)
UD_cum_stage(data, "y", stages, U_mad)
UD_cum_stage(data, "y", stages, U_range)
</code></pre>

<hr>
<h2 id='UD_model2stage'>Convert model uncertainty to stage uncertainty</h2><span id='topic+UD_model2stage'></span>

<h3>Description</h3>

<p>This function converts model uncertainty to stage uncertainty by summing by stage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_model2stage(UD)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UD_model2stage_+3A_ud">UD</code></td>
<td>
<p>model wise uncertainty(UD_model class), output of function that returns model wise uncertainty such as UD_bal_model and UD_ANOVA_model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stage wise uncertainties(UD_stage class)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_var &lt;- UD_bal_model(data, "y", stages, u_var, flist_var)
UD_bal_model_var
UD_bal_model_mad &lt;- UD_bal_model(data, "y", stages, u_mad, flist_mad)
UD_bal_model_mad 
UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
UD_bal_model_range 

UD_bal_stage_var &lt;- UD_model2stage(UD_bal_model_var)
UD_bal_stage_var 
UD_bal_stage_mad &lt;- UD_model2stage(UD_bal_model_mad)
UD_bal_stage_mad 
UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
UD_bal_stage_range 
</code></pre>

<hr>
<h2 id='UDtable'>Make uncertainty table</h2><span id='topic+UDtable'></span><span id='topic+UD_table'></span><span id='topic+UD_table.UD_model'></span><span id='topic+UD_table.UD_stage'></span>

<h3>Description</h3>

<p>This function summarizes the uncertainty into a table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UD_table(UD, ...)

## S3 method for class 'UD_model'
UD_table(UD, include.nat = TRUE, include.tot = TRUE,
  ...)

## S3 method for class 'UD_stage'
UD_table(UD, include.nat = TRUE, include.tot = TRUE,
  ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="UDtable_+3A_ud">UD</code></td>
<td>
<p>model-wise uncertainty or stage-wise uncertainty</p>
</td></tr>
<tr><td><code id="UDtable_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods. include.nat or include.tot</p>
</td></tr>
<tr><td><code id="UDtable_+3A_include.nat">include.nat</code></td>
<td>
<p>If include.nat is TRUE and UD has nat_unc, create a table containing it.</p>
</td></tr>
<tr><td><code id="UDtable_+3A_include.tot">include.tot</code></td>
<td>
<p>If include.tot is TRUE, create a table containing it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>uncertainty table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
UD_bal_model_range 

UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
UD_bal_stage_range 

UD_table(UD_bal_model_range)
UD_table(UD_bal_stage_range)
</code></pre>

<hr>
<h2 id='unc_measures'>uncertainty measures</h2><span id='topic+unc_measures'></span><span id='topic+U_range'></span><span id='topic+u_range'></span><span id='topic+flist_range'></span><span id='topic+U_mad'></span><span id='topic+u_mad'></span><span id='topic+flist_mad'></span><span id='topic+U_var'></span><span id='topic+u_var'></span><span id='topic+flist_var'></span>

<h3>Description</h3>

<p>Functions beginning with U are uncertainty measure that return a scalar given a vector, such as mean absolute deviation or variance. Functions beginning with flist are lists of functions that summarize vector like mean or median. 
Functions beginning with u are the uncertainty of each element of the vector, which is calculated from the elements of the vector and summary statistics of the vector, like difference or square of difference between two values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>U_range(x)

u_range(x, a, b, n)

flist_range

U_mad(x)

u_mad(x, m)

flist_mad

U_var(x)

u_var(x, m)

flist_var
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unc_measures_+3A_x">x</code></td>
<td>
<p>a vector.</p>
</td></tr>
<tr><td><code id="unc_measures_+3A_a">a</code>, <code id="unc_measures_+3A_b">b</code>, <code id="unc_measures_+3A_n">n</code></td>
<td>
<p>summary statistics for u_range(), a and b are minimum and maximum of x. n is length of x</p>
</td></tr>
<tr><td><code id="unc_measures_+3A_m">m</code></td>
<td>
<p>summary statistics. median for u_mad() and mean for u_var()</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 3.</p>

<hr>
<h2 id='unc_postprocess'>Postprocess UD</h2><span id='topic+unc_postprocess'></span><span id='topic+ppud'></span><span id='topic+min_lambda_calc'></span>

<h3>Description</h3>

<p>ppud() adjusts uncertainty so that it is not less than a certain value. In particular, it is often used for UD_bal_model, where the uncertainty may be negative.
min_lambda_calc() finds lambda such that the proportion of the minimum uncertainty is the specified value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppud(UD, lambda_list)

min_lambda_calc(UD, prop)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unc_postprocess_+3A_ud">UD</code></td>
<td>
<p>model-wise uncertainty or stage-wise uncertainty</p>
</td></tr>
<tr><td><code id="unc_postprocess_+3A_lambda_list">lambda_list</code></td>
<td>
<p>a numeric vector that adjust the degree to which uncertainties and average uncertainty are close.</p>
</td></tr>
<tr><td><code id="unc_postprocess_+3A_prop">prop</code></td>
<td>
<p>target proportion of least uncertainty</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(0)
stage1 &lt;- LETTERS[1:3]
stage2 &lt;- LETTERS[1:2]
stage3 &lt;- LETTERS[1:4]
y &lt;- rnorm(3*2*4)
data &lt;- expand.grid(stage1=stage1,
                    stage2=stage2,
                    stage3=stage3)
stages &lt;- names(data)
data &lt;- cbind(data, y)

UD_bal_model_var &lt;- UD_bal_model(data, "y", stages, u_var, flist_var)
UD_bal_model_var
UD_bal_model_mad &lt;- UD_bal_model(data, "y", stages, u_mad, flist_mad)
UD_bal_model_mad 
UD_bal_model_range &lt;- UD_bal_model(data, "y", stages, u_range, flist_range)
UD_bal_model_range 

UD_bal_stage_var &lt;- UD_model2stage(UD_bal_model_var)
UD_bal_stage_var 
UD_bal_stage_mad &lt;- UD_model2stage(UD_bal_model_mad)
UD_bal_stage_mad 
UD_bal_stage_range &lt;- UD_model2stage(UD_bal_model_range)
UD_bal_stage_range 

UD_list = ppud(UD_bal_model_range)
plot(UD_list)

lambda = min_lambda_calc(UD_bal_model_range, 0.01)
UD_1percent = ppud(UD_bal_model_range, lambda)
UD_1percent$UD[[1]]

</code></pre>

<hr>
<h2 id='var0'>Variance(DEPRECATED)</h2><span id='topic+var0'></span>

<h3>Description</h3>

<p>This function returns the population variance of a given vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var0(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="var0_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the population variance of a given vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;- rnorm(5))
# var0() is deprecated. Use U_var()
# var0(x)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
