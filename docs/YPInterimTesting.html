<!DOCTYPE html><html><head><title>Help for package YPInterimTesting</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {YPInterimTesting}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#YPInterimTesting-package'>
<p>Interim Monitoring Using Adaptively Weighted Log-rank Test in Clinical Trials</p></a></li>
<li><a href='#+20virtual'><p>virtual Data Set for the example</p></a></li>
<li><a href='#ypinterim'><p>The main function of the package performing the adaptively weighted log-rank test for interim monitoring</p></a></li>
<li><a href='#YPInterimTesting-internal'><p>Internal Functions for Interim Monitoring Using Adaptively Weighted Log-rank Test in Clinical Trials</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interim Monitoring Using Adaptively Weighted Log-Rank Test in
Clinical Trials</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Author:</td>
<td>Daewoo Pak and Song Yang</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daewoo Pak &lt;heavyrain.pak@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>For any spending function specified by the user, this 
    package provides corresponding boundaries for interim testing using
    the adaptively weighted log-rank test developed by Yang and Prentice
    (2010 &lt;<a href="https://doi.org/10.1111%2Fj.1541-0420.2009.01243.x">doi:10.1111/j.1541-0420.2009.01243.x</a>&gt;). 
    The package uses a re-sampling method to obtain stopping boundaries 
    at the interim looks.The output consists of stopping boundaries 
    and observed values of the test statistics at the interim looks, 
    along with nominal p-values defined as the probability of the test 
    exceeding the specific observed test statistic value or critical 
    value, regardless of the test behavior at other looks. 
    The asymptotic validity of the stopping boundaries is established
    in Yang (2018 &lt;<a href="https://doi.org/10.1002%2Fsim.7958">doi:10.1002/sim.7958</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, MASS</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-06-07 14:12:19 UTC; Daewoo Pak</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-06-07 15:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='YPInterimTesting-package'>
Interim Monitoring Using Adaptively Weighted Log-rank Test in Clinical Trials
</h2><span id='topic+YPInterimTesting-package'></span>

<h3>Description</h3>

<p>This package provides monitoring boundary for interim testing using the adaptively weighted log-rank test developed by Yang and Prentice (2010). It is shown in Yang (2018) that the adaptively weighted log-rank test is asymptotically fully efficient when the limiting censoring distributions in two groups are equal. For a given spending function, the main function of the package <code>ypinterim</code> provides stopping boundaries at the interim looks, along with nominal p-values. The object being returned by the function <code><a href="#topic+ypinterim">ypinterim</a></code> can be formatted to a table using the function <code><a href="base.html#topic+summary">summary</a></code>.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> YPInterimTesting</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2018-10-31</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 3)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Daewoo Pak and Song Yang
</p>


<h3>References</h3>

<p>Yang, S. (2018). Interim monitoring using the adaptively weighted log-rank test in clinical trials for survival outcomes. Statistics in Medicine. &lt;doi:10.1002/sim.7958&gt;
</p>
<p>Yang, S., &amp; Prentice, R. (2010). Improved logrank-type tests for survival data using adaptive weights. Biometrics, 66(1), 30-38.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ypinterim">ypinterim</a></code>
</p>

<hr>
<h2 id='+20virtual'>virtual Data Set for the example</h2><span id='topic+virtual'></span>

<h3>Description</h3>

<p>This virtual data set is created to show how to use the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(virtual)</code></pre>


<h3>Format</h3>

<p>The data has the following information:
</p>

<dl>
<dt><code>time</code></dt><dd><p>the numeric matrix of event times for all interim looks up to the current look.</p>
</dd>
<dt><code>event</code></dt><dd><p>the numeric matrix of right-censoring indicators corresponding to <code>time</code> (event = 1, censored = 0).</p>
</dd>
<dt><code>group</code></dt><dd><p>the numeric vector of the group indicator (treatment = 1, control = 0).</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+ypinterim">ypinterim</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>library(YPInterimTesting)
data(virtual)
time &lt;- virtual$time
colnames(time) # Check the order of the column names.
head(time)
</code></pre>

<hr>
<h2 id='ypinterim'>The main function of the package performing the adaptively weighted log-rank test for interim monitoring</h2><span id='topic+ypinterim'></span><span id='topic+ypinterim.default'></span><span id='topic+summary.ypinterim'></span><span id='topic+print.ypinterim'></span>

<h3>Description</h3>

<p>Provides stopping boundaries and nominal p-values at the interim looks using the adaptively weighted log-rank test developed by Yang and Prentice (2010). The full details are available on Yang (2018).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
ypinterim(time, event, group, spendfun, critvalue = NULL,
  repnum = 1E4, bound = 50, seed.fix = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ypinterim_+3A_...">...</code></td>
<td>
<p>for S4 method only.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_time">time</code></td>
<td>
<p>A numeric matrix of event times for all interim looks up to the current look. The columns of the matrix represent interim looks in date order.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_event">event</code></td>
<td>
<p>A numeric matrix of right-censoring indicators corresponding to <code>time</code> (event = 1, censored = 0). The dimension of the matrix should be equivalent to that of <code>time</code>.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_group">group</code></td>
<td>
<p>A numeric vector of the group indicator (treatment = 1, control = 0).</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_spendfun">spendfun</code></td>
<td>
<p>A numeric vector of the values for the spending function <code class="reqn">\alpha(t)</code>. Must be user-specified.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_critvalue">critvalue</code></td>
<td>
<p>A vector of the previous critical values for the prior interim looks. If it is not supplied, the critical values at all the interim looks will be obtained all at once using the re-sampling method. This is only for the scenario when the user wants to test with historical data where all interim data are available. When using the package for an ongoing trial, at the first look, when the user supplies the data and the value of the spending function at the first look, the package provides the stopping boundary, the test statistic value and the nominal p-values at the first look. Then, at the <code class="reqn">i</code>-th look, <code class="reqn">i&gt;1</code>, when the user supplies the data and the values of the spending function at the <code class="reqn">i</code> looks, as well as the previous <code class="reqn">i-1</code> critical values that have already been obtained, the package provides the stopping boundary, the test statistics value and the nominal p-values at the <code class="reqn">i</code>th look, and display results for all <code class="reqn">i</code> looks.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_repnum">repnum</code></td>
<td>
<p>The number of replications for the re-sampling method used in the calculations. The default value is one million. When the  alpha allocated is less than 1E-4 at some early looks, the package uses numerical integration  to obtain the critical values at those looks.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_bound">bound</code></td>
<td>

<p>A boundary (<code>-bound</code>, <code>bound</code>) for estimating the parameters in the short-term and long-term hazard ratio model (Yang and Prentice, 2005). These parameters are <code class="reqn">\beta_1</code> and <code class="reqn">\beta_2</code> in their notations. The default boundary is <code class="reqn">(-50, 50)</code>.</p>
</td></tr>
<tr><td><code id="ypinterim_+3A_seed.fix">seed.fix</code></td>
<td>
<p>A value for <code>set.seed</code>. The default value is 0. Should be FALSE or a numeric number.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The object being returned by the function <code><a href="#topic+ypinterim">ypinterim</a></code> can be formatted to a table using the function <code><a href="base.html#topic+summary">summary</a></code>.
</p>


<h3>References</h3>

<p>Yang, S. (2018). Interim monitoring using the adaptively weighted log-rank test in clinical trials for survival outcomes. Statistics in Medicine. &lt;doi:10.1002/sim.7958&gt;
</p>
<p>Yang, S., &amp; Prentice, R. (2010). Improved logrank-type tests for survival data using adaptive weights. Biometrics, 66(1), 30-38.
</p>
<p>Yang, S., &amp; Prentice, R. (2005). Semiparametric analysis of short-term and long-term hazard ratios with two-sample survival data. Biometrika, 92(1), 1-17.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(YPInterimTesting)
data(virtual)

time &lt;- virtual$time
event &lt;- virtual$event
group &lt;- virtual$group

spendfun &lt;- c(1.3E-5, 4.4E-4, 0.003, 0.008)

result_all &lt;- ypinterim(time, event, group, spendfun=spendfun)
result_all
summary(result_all)

## The example shows how to test the package with a historical data where 
## interim data at all looks are available.

## When calculating the boundary at the first look,
## the spending function value at the first look is needed:

time &lt;- virtual$time[, 1]
event &lt;- virtual$event[, 1]
group &lt;- virtual$group

spendfun &lt;- c(1.3E-5)

result_look1 &lt;- ypinterim(time, event, group, spendfun=spendfun)
result_look1
summary(result_look1)

## When calculating the boundary at the second look,
## the spending function at the two looks,
## and boundary at the first look, should be supplied:

time &lt;- virtual$time[, 1:2]
event &lt;- virtual$event[, 1:2]
group &lt;- virtual$group

spendfun &lt;- c(1.3E-5, 4.4E-4)
critvalue &lt;- c(4.36) # the boundary of the first look is supplied.

result_look2 &lt;- ypinterim(time, event, group, spendfun=spendfun, critvalue = critvalue)
result_look2
summary(result_look2)

## Similarly, when calculating the boundary at the third look,
## the spending function at the three looks, and boundaries
## at the first two looks, should be supplied:
time &lt;- virtual$time[, 1:3]
event &lt;- virtual$event[, 1:3]
group &lt;- virtual$group

spendfun &lt;- c(1.3E-5, 4.4E-4, 0.003)
critvalue &lt;- c(4.36, 3.42) # the boundaries at the first two looks are supplied.

result_look3 &lt;- ypinterim(time, event, group, spendfun=spendfun, critvalue = critvalue)
result_look3
summary(result_look3)

</code></pre>

<hr>
<h2 id='YPInterimTesting-internal'>Internal Functions for Interim Monitoring Using Adaptively Weighted Log-rank Test in Clinical Trials</h2><span id='topic+YPInterimTesting-internal'></span><span id='topic+fun_estimate'></span><span id='topic+fun_interpol'></span><span id='topic+awlrstat'></span><span id='topic+fun_less'></span>

<h3>Description</h3>

<p>Internal functions for the YPInterimTesting package.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
