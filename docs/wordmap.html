<!DOCTYPE html><html lang="en-US"><head><title>Help for package wordmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {wordmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#accuracy'><p>Evaluate classification accuracy in precision and recall</p></a></li>
<li><a href='#afe'><p>Compute Average Feature Entropy (AFE)</p></a></li>
<li><a href='#as.coefficients_textmodel'><p>Coerce various objects to coefficients_textmodel</p>
This is a helper function used in <code style="white-space: pre;">&#8288;summary.textmodel_*&#8288;</code>.</a></li>
<li><a href='#as.dictionary.textmodel_wordmap'><p>Create lexicon from a Wordmap model</p></a></li>
<li><a href='#as.statistics_textmodel'><p>Coerce various objects to statistics_textmodel</p></a></li>
<li><a href='#as.summary.textmodel'><p>Assign the summary.textmodel class to a list</p></a></li>
<li><a href='#coef.textmodel_wordmap'><p>Extract coefficients from a Wordmap model</p></a></li>
<li><a href='#data_corpus_ungd2017'><p>UN General Debate speeches from 2017</p></a></li>
<li><a href='#data_dictionary_topic'><p>Seed topic dictionary</p></a></li>
<li><a href='#predict.textmodel_wordmap'><p>Predict the most likely class of documents</p></a></li>
<li><a href='#print.coefficients_textmodel'><p>Print methods for textmodel features estimates</p>
This is a helper function used in <code>print.summary.textmodel</code>.</a></li>
<li><a href='#print.statistics_textmodel'><p>Implements print methods for textmodel_statistics</p></a></li>
<li><a href='#print.summary.textmodel'><p>print method for summary.textmodel</p></a></li>
<li><a href='#textmodel_wordmap'><p>A model for multinomial feature extraction and document classification</p></a></li>
<li><a href='#textplot_terms'><p>Plot coefficients of words</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Feature Extraction and Document Classification with Noisy Labels</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kohei Watanabe &lt;watanabe.kohei@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Extract features and classify documents with noisy labels given by document-meta data or keyword matching Watanabe &amp; Zhou (2020) &lt;<a href="https://doi.org/10.1177%2F0894439320907027">doi:10.1177/0894439320907027</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/koheiw/wordmap">https://github.com/koheiw/wordmap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/koheiw/wordmap/issues">https://github.com/koheiw/wordmap/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, Matrix, quanteda (&ge; 2.1), stringi, ggplot2, ggrepel</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, testthat</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-07 21:43:35 UTC; watan</td>
</tr>
<tr>
<td>Author:</td>
<td>Kohei Watanabe [aut, cre, cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-07 22:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='accuracy'>Evaluate classification accuracy in precision and recall</h2><span id='topic+accuracy'></span><span id='topic+summary.textmodel_wordmap_accuracy'></span>

<h3>Description</h3>

<p><code>accuracy()</code> counts the number of true positive,
false positive, true negative, and false negative cases
for each predicted class and calculates precision, recall and F1 score
based on these counts.
<code>summary()</code> calculates micro-average precision and recall, and
macro-average precision and recall based on the output of
<code>accuracy()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>accuracy(x, y)

## S3 method for class 'textmodel_wordmap_accuracy'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="accuracy_+3A_x">x</code></td>
<td>
<p>vector of predicted classes.</p>
</td></tr>
<tr><td><code id="accuracy_+3A_y">y</code></td>
<td>
<p>vector of true classes.</p>
</td></tr>
<tr><td><code id="accuracy_+3A_object">object</code></td>
<td>
<p>output of <code>accuracy()</code>.</p>
</td></tr>
<tr><td><code id="accuracy_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>accuracy()</code> returns a data.frame with following columns:
</p>
<table role = "presentation">
<tr><td><code>tp</code></td>
<td>
<p>the number of true positive cases.</p>
</td></tr>
<tr><td><code>fp</code></td>
<td>
<p>the number of false positive cases.</p>
</td></tr>
<tr><td><code>tn</code></td>
<td>
<p>the number of true negative cases.</p>
</td></tr>
<tr><td><code>fn</code></td>
<td>
<p>the number of false negative cases.</p>
</td></tr>
<tr><td><code>precision</code></td>
<td>
<p><code class="reqn">tp / (tp + fp)</code>.</p>
</td></tr>
<tr><td><code>recall</code></td>
<td>
<p><code class="reqn">tp / (tp + fn)</code>.</p>
</td></tr>
<tr><td><code>f1</code></td>
<td>
<p>the harmonic mean of precision and recall.</p>
</td></tr>
</table>
<p><code>summary()</code> returns a named numeric vector with the following elements:
</p>
<table role = "presentation">
<tr><td><code>p</code></td>
<td>
<p>micro-average precision.</p>
</td></tr>
<tr><td><code>r</code></td>
<td>
<p>micro-average recall</p>
</td></tr>
<tr><td><code>P</code></td>
<td>
<p>macro-average precision.</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>macro-average recall.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>class_pred &lt;- c('US', 'GB', 'US', 'CN', 'JP', 'FR', 'CN') # prediction
class_true &lt;- c('US', 'FR', 'US', 'CN', 'KP', 'EG', 'US') # true class
acc &lt;- accuracy(class_pred, class_true)
print(acc)
summary(acc)
</code></pre>

<hr>
<h2 id='afe'>Compute Average Feature Entropy (AFE)</h2><span id='topic+afe'></span>

<h3>Description</h3>

<p><code>afe()</code> computes Average Feature Entropy (AFE), which measures randomness of
occurrences of features in labelled documents (Watanabe &amp; Zhou, 2020). In
creating seed dictionaries, AFE can be used to avoid adding seed words that would
decrease classification accuracy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>afe(x, y, smooth = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="afe_+3A_x">x</code></td>
<td>
<p>a dfm for features.</p>
</td></tr>
<tr><td><code id="afe_+3A_y">y</code></td>
<td>
<p>a dfm for labels.</p>
</td></tr>
<tr><td><code id="afe_+3A_smooth">smooth</code></td>
<td>
<p>a numeric value for smoothing to include all the features.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a single numeric value.
</p>


<h3>References</h3>

<p>Watanabe, Kohei &amp; Zhou, Yuan (2020). &quot;Theory-Driven Analysis of
Large Corpora: Semisupervised Topic Classification of the UN Speeches&quot;.
doi:10.1177/0894439320907027. <em>Social Science Computer Review</em>.
</p>

<hr>
<h2 id='as.coefficients_textmodel'>Coerce various objects to coefficients_textmodel
This is a helper function used in <code style="white-space: pre;">&#8288;summary.textmodel_*&#8288;</code>.</h2><span id='topic+as.coefficients_textmodel'></span>

<h3>Description</h3>

<p>Coerce various objects to coefficients_textmodel
This is a helper function used in <code style="white-space: pre;">&#8288;summary.textmodel_*&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.coefficients_textmodel(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.coefficients_textmodel_+3A_x">x</code></td>
<td>
<p>an object to be coerced</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a coefficients_textmodel object
</p>

<hr>
<h2 id='as.dictionary.textmodel_wordmap'>Create lexicon from a Wordmap model</h2><span id='topic+as.dictionary.textmodel_wordmap'></span><span id='topic+as.list.textmodel_wordmap'></span>

<h3>Description</h3>

<p><code>as.list()</code> returns features with the largest coefficients as a list of
character vector. <code>as.dictionary()</code> returns a <a href="quanteda.html#topic+dictionary">quanteda::dictionary</a> object
that can be use for dictionary analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'textmodel_wordmap'
as.dictionary(x, separator = NULL, ...)

## S3 method for class 'textmodel_wordmap'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.dictionary.textmodel_wordmap_+3A_x">x</code></td>
<td>
<p>a model fitted by <code><a href="#topic+textmodel_wordmap">textmodel_wordmap()</a></code>.</p>
</td></tr>
<tr><td><code id="as.dictionary.textmodel_wordmap_+3A_separator">separator</code></td>
<td>
<p>the character in between multi-word dictionary values. If
<code>NULL</code>, <code>x$concatenator</code> will be used.</p>
</td></tr>
<tr><td><code id="as.dictionary.textmodel_wordmap_+3A_...">...</code></td>
<td>
<p>passed to <a href="#topic+coef.textmodel_wordmap">coef.textmodel_wordmap</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list or a <a href="quanteda.html#topic+dictionary">quanteda::dictionary</a> object.
</p>

<hr>
<h2 id='as.statistics_textmodel'>Coerce various objects to statistics_textmodel</h2><span id='topic+as.statistics_textmodel'></span>

<h3>Description</h3>

<p>This is a helper function used in <code style="white-space: pre;">&#8288;summary.textmodel_*&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.statistics_textmodel(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.statistics_textmodel_+3A_x">x</code></td>
<td>
<p>an object to be coerced</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A statistics_textmodel object
</p>

<hr>
<h2 id='as.summary.textmodel'>Assign the summary.textmodel class to a list</h2><span id='topic+as.summary.textmodel'></span>

<h3>Description</h3>

<p>Assign the summary.textmodel class to a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.summary.textmodel(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.summary.textmodel_+3A_x">x</code></td>
<td>
<p>a named list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a summary.textmodel object.
</p>

<hr>
<h2 id='coef.textmodel_wordmap'>Extract coefficients from a Wordmap model</h2><span id='topic+coef.textmodel_wordmap'></span><span id='topic+coefficients.textmodel_wordmap'></span>

<h3>Description</h3>

<p><code>coef()</code> extracts top <code>n</code> features with largest coefficients for each class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'textmodel_wordmap'
coef(object, n = 10, select = NULL, ...)

## S3 method for class 'textmodel_wordmap'
coefficients(object, n = 10, select = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coef.textmodel_wordmap_+3A_object">object</code></td>
<td>
<p>a model fitted by <code><a href="#topic+textmodel_wordmap">textmodel_wordmap()</a></code>.</p>
</td></tr>
<tr><td><code id="coef.textmodel_wordmap_+3A_n">n</code></td>
<td>
<p>the number of coefficients to extract.</p>
</td></tr>
<tr><td><code id="coef.textmodel_wordmap_+3A_select">select</code></td>
<td>
<p>returns the coefficients for the selected class; specify by the
names of rows in <code>object$model</code>.</p>
</td></tr>
<tr><td><code id="coef.textmodel_wordmap_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of named numeric vectors sorted in descending order.
</p>

<hr>
<h2 id='data_corpus_ungd2017'>UN General Debate speeches from 2017</h2><span id='topic+data_corpus_ungd2017'></span>

<h3>Description</h3>

<p>A corpus of 196 speeches from the 2017 UN General Debate (Mikhaylov and
Baturo, 2017). The economic data for 2017 (GDP and GDP per capita) are
downloaded from the World Bank website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_corpus_ungd2017
</code></pre>


<h3>Format</h3>

<p>The corpus includes the following document variables: </p>

<dl>
<dt>country_iso</dt><dd><p>ISO3c country code, e.g. &quot;AFG&quot; for Afghanistan</p>
</dd>
<dt>un_session</dt><dd><p>UN session, a numeric identifier (in this case, 72)</p>
</dd>
<dt>year</dt><dd><p>4-digit year (2017).</p>
</dd>
<dt>country</dt><dd><p>country name, in English.</p>
</dd>
<dt>continent</dt><dd><p>continent of the country, one of: Africa, Americas, Asia,
Europe, Oceania. Note that the speech delivered on behalf of the
European Union is coded as &quot;Europe&quot;.</p>
</dd>
<dt>gdp</dt><dd><p>GDP in $US for 2017, from the World Bank. Contains missing
values for 9 countries.</p>
</dd>
<dt>gdp_per_capita</dt><dd><p>GDP per capita in $US for 2017, derived from the
World Bank. Contains missing values for 9 countries.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Mikhaylov, M., Baturo, A., &amp; Dasandi, N. (2017). &quot;United Nations
General Debate Corpus&quot;. doi:10.7910/DVN/0TJX8Y. Harvard Dataverse, V4.
</p>


<h3>References</h3>

<p>Baturo, A., Dasandi, N., &amp; Mikhaylov, S. (2017). &quot;Understanding
State Preferences With Text As Data: Introducing the UN General Debate
Corpus&quot;. doi:10.1177/2053168017712821. <em>Research and Politics</em>.
</p>

<hr>
<h2 id='data_dictionary_topic'>Seed topic dictionary</h2><span id='topic+data_dictionary_topic'></span>

<h3>Description</h3>

<p>A dictionary with seed words for size common topics at the United Nations
General Assembly (Watanabe and Zhou, 2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_dictionary_topic
</code></pre>


<h3>Format</h3>

<p>An object of class <code>dictionary2</code> of length 6.
</p>


<h3>Author(s)</h3>

<p>Kohei Watanabe <a href="mailto:watanabe.kohei@gmail.com">watanabe.kohei@gmail.com</a>
</p>


<h3>References</h3>

<p>Watanabe, Kohei &amp; Zhou, Yuan (2020). &quot;Theory-Driven Analysis of
Large Corpora: Semisupervised Topic Classification of the UN Speeches&quot;.
doi:10.1177/0894439320907027. <em>Social Science Computer Review</em>.
</p>

<hr>
<h2 id='predict.textmodel_wordmap'>Predict the most likely class of documents</h2><span id='topic+predict.textmodel_wordmap'></span>

<h3>Description</h3>

<p>Predict document class using fitted Wordmap models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'textmodel_wordmap'
predict(
  object,
  newdata = NULL,
  confidence = FALSE,
  rank = 1L,
  type = c("top", "all"),
  rescale = FALSE,
  min_conf = -Inf,
  min_n = 0L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.textmodel_wordmap_+3A_object">object</code></td>
<td>
<p>a model fitted by <code><a href="#topic+textmodel_wordmap">textmodel_wordmap()</a></code>.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_newdata">newdata</code></td>
<td>
<p>a dfm on which prediction will be made.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_confidence">confidence</code></td>
<td>
<p>if <code>TRUE</code>, it returns likelihood ratio scores.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_rank">rank</code></td>
<td>
<p>rank of the class to be predicted. Only used when <code>type = "top"</code>.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_type">type</code></td>
<td>
<p>if <code>top</code>, returns the most likely class specified by <code>rank</code>;
otherwise return a matrix of likelihood ratio scores for all possible
classes.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_rescale">rescale</code></td>
<td>
<p>if <code>TRUE</code>, likelihood ratio scores are normalized using <code><a href="base.html#topic+scale">scale()</a></code>.
This affects both types of results.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_min_conf">min_conf</code></td>
<td>
<p>returns <code>NA</code> when confidence is lower than this value.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_min_n">min_n</code></td>
<td>
<p>set the minimum number of polarity words in documents.</p>
</td></tr>
<tr><td><code id="predict.textmodel_wordmap_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns predicted classes as a vector. If <code>confidence = TRUE</code>,
it returns a list of two vectors:
</p>
<table role = "presentation">
<tr><td><code>class</code></td>
<td>
<p>predicted classes of documents.</p>
</td></tr>
<tr><td><code>confidence.fit</code></td>
<td>
<p>the confidence of predictions.</p>
</td></tr>
</table>

<hr>
<h2 id='print.coefficients_textmodel'>Print methods for textmodel features estimates
This is a helper function used in <code>print.summary.textmodel</code>.</h2><span id='topic+print.coefficients_textmodel'></span>

<h3>Description</h3>

<p>Print methods for textmodel features estimates
This is a helper function used in <code>print.summary.textmodel</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'coefficients_textmodel'
print(x, digits = max(3L, getOption("digits") - 3L), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.coefficients_textmodel_+3A_x">x</code></td>
<td>
<p>a coefficients_textmodel object</p>
</td></tr>
<tr><td><code id="print.coefficients_textmodel_+3A_digits">digits</code></td>
<td>
<p>minimal number of <em>significant digits</em>, see
<code><a href="base.html#topic+print.default">print.default()</a></code></p>
</td></tr>
<tr><td><code id="print.coefficients_textmodel_+3A_...">...</code></td>
<td>
<p>additional arguments not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return anything
</p>

<hr>
<h2 id='print.statistics_textmodel'>Implements print methods for textmodel_statistics</h2><span id='topic+print.statistics_textmodel'></span>

<h3>Description</h3>

<p>Implements print methods for textmodel_statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'statistics_textmodel'
print(x, digits = max(3L, getOption("digits") - 3L), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.statistics_textmodel_+3A_x">x</code></td>
<td>
<p>a textmodel_wordscore_statistics object</p>
</td></tr>
<tr><td><code id="print.statistics_textmodel_+3A_digits">digits</code></td>
<td>
<p>minimal number of <em>significant digits</em>, see
<code><a href="base.html#topic+print.default">print.default()</a></code></p>
</td></tr>
<tr><td><code id="print.statistics_textmodel_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return anything
</p>

<hr>
<h2 id='print.summary.textmodel'>print method for summary.textmodel</h2><span id='topic+print.summary.textmodel'></span>

<h3>Description</h3>

<p>print method for summary.textmodel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.textmodel'
print(x, digits = max(3L, getOption("digits") - 3L), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.textmodel_+3A_x">x</code></td>
<td>
<p>a <code>summary.textmodel</code> object.</p>
</td></tr>
<tr><td><code id="print.summary.textmodel_+3A_digits">digits</code></td>
<td>
<p>minimal number of <em>significant digits</em>, see
<code><a href="base.html#topic+print.default">print.default()</a></code>.</p>
</td></tr>
<tr><td><code id="print.summary.textmodel_+3A_...">...</code></td>
<td>
<p>additional arguments not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return anything
</p>

<hr>
<h2 id='textmodel_wordmap'>A model for multinomial feature extraction and document classification</h2><span id='topic+textmodel_wordmap'></span>

<h3>Description</h3>

<p>Wordmap is a model for multinomial feature extraction and document
classification. Its naive Bayesian algorithm allows users to train the model
on a large corpus with noisy labels given by document meta-data or keyword
matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textmodel_wordmap(
  x,
  y,
  label = c("all", "max"),
  smooth = 0.01,
  boolean = FALSE,
  drop_label = TRUE,
  entropy = c("none", "global", "local", "average"),
  residual = FALSE,
  verbose = quanteda_options("verbose"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="textmodel_wordmap_+3A_x">x</code></td>
<td>
<p>a dfm or fcm created by <code><a href="quanteda.html#topic+dfm">quanteda::dfm()</a></code></p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_y">y</code></td>
<td>
<p>a dfm or a sparse matrix that record class membership of the
documents. It can be created applying <code><a href="quanteda.html#topic+dfm_lookup">quanteda::dfm_lookup()</a></code> to <code>x</code>.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_label">label</code></td>
<td>
<p>if &quot;max&quot;, uses only labels for the maximum value in each row of
<code>y</code>.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_smooth">smooth</code></td>
<td>
<p>the amount of smoothing in computing coefficients.
When <code>smooth = 0.01</code>, 1% of the mean frequency of words in each class
is added to smooth likelihood ratios.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_boolean">boolean</code></td>
<td>
<p>if <code>TRUE</code>, only consider presence or absence of features in
each document to limit the impact of words repeated in few documents.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_drop_label">drop_label</code></td>
<td>
<p>if <code>TRUE</code>, drops empty columns of <code>y</code> and ignore their
labels.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_entropy">entropy</code></td>
<td>
<p>the scheme to compute the entropy to
regularize likelihood ratios. The entropy of features are computed over
labels if <code>global</code> or over documents with the same labels if <code>local</code>. Local
entropy is averaged if <code>average</code>. See the details.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_residual">residual</code></td>
<td>
<p>if <code>TRUE</code>, a residual class is added to <code>y</code>. It is named
&quot;other&quot; but can be changed via <code>base::options(wordmap_residual_name)</code>.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_verbose">verbose</code></td>
<td>
<p>if <code>TRUE</code>, shows progress of training.</p>
</td></tr>
<tr><td><code id="textmodel_wordmap_+3A_...">...</code></td>
<td>
<p>additional arguments passed to internal functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wordmap learns association between words in <code>x</code> and classes in <code>y</code>
based on likelihood ratios. The large
likelihood ratios tend to concentrate to a small number of features but the
entropy of their frequencies over labels or documents helps to disperse the
distribution.
</p>
<p>A residual class is created internally by adding a new column to <code>y</code>.
The column is given 1 if the other values in the same row are all zero
(i.e. <code>rowSums(y) == 0</code>); otherwise 0. It is useful when users cannot create
an exhaustive dictionary that covers all the categories.
</p>


<h3>Value</h3>

<p>Returns a fitted textmodel_wordmap object with the following
elements: </p>
<table role = "presentation">
<tr><td><code>model</code></td>
<td>
<p>a matrix that records the association between
classes and features.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>the original input of <code>x</code>.</p>
</td></tr>
<tr><td><code>feature</code></td>
<td>
<p>the feature set in <code>x</code></p>
</td></tr>
<tr><td><code>class</code></td>
<td>
<p>the class labels in <code>y</code>.</p>
</td></tr>
<tr><td><code>concatenator</code></td>
<td>
<p>the concatenator in <code>x</code>.</p>
</td></tr>
<tr><td><code>entropy</code></td>
<td>
<p>the scheme to compute entropy weights.</p>
</td></tr>
<tr><td><code>boolean</code></td>
<td>
<p>the use of the Boolean transformation of <code>x</code>.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>the command used to execute the function.</p>
</td></tr>
<tr><td><code>version</code></td>
<td>
<p>the version of the wordmap package.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Watanabe, Kohei (2018). &quot;Newsmap: semi-supervised approach to
geographical news classification&quot;. doi.org/10.1080/21670811.2017.1293487,
<em>Digital Journalism</em>.
</p>
<p>Watanabe, Kohei &amp; Zhou, Yuan (2020). &quot;Theory-Driven Analysis of
Large Corpora: Semisupervised Topic Classification of the UN Speeches&quot;.
doi:10.1177/0894439320907027. <em>Social Science Computer Review</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(quanteda)

# split into sentences
corp &lt;- corpus_reshape(data_corpus_ungd2017)

# tokenize
toks &lt;- tokens(corp, remove_punct = TRUE) %&gt;%
   tokens_remove(stopwords("en"))

# apply seed dictionary
toks_dict &lt;- tokens_lookup(toks, data_dictionary_topic)

# form dfm
dfmt_feat &lt;- dfm(toks)
dfmt_dict &lt;- dfm(toks_dict)

# fit wordmap model
map &lt;- textmodel_wordmap(dfmt_feat, dfmt_dict)
coef(map)
predict(map)

</code></pre>

<hr>
<h2 id='textplot_terms'>Plot coefficients of words</h2><span id='topic+textplot_terms'></span>

<h3>Description</h3>

<p>Plot coefficients of words
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_terms(
  x,
  highlighted = NULL,
  max_highlighted = 50,
  max_words = 1000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="textplot_terms_+3A_x">x</code></td>
<td>
<p>a fitted textmodel_wordmap object.</p>
</td></tr>
<tr><td><code id="textplot_terms_+3A_highlighted">highlighted</code></td>
<td>
<p><a href="quanteda.html#topic+pattern">quanteda::pattern</a> to select words to highlight. If a
<a href="quanteda.html#topic+dictionary">quanteda::dictionary</a> is passed, words in the top-level categories are
highlighted in different colors.</p>
</td></tr>
<tr><td><code id="textplot_terms_+3A_max_highlighted">max_highlighted</code></td>
<td>
<p>the maximum number of words to highlight. When
<code>highlighted = NULL</code>, words to highlight are randomly selected
proportionally to <code>coef ^ 2</code>.</p>
</td></tr>
<tr><td><code id="textplot_terms_+3A_max_words">max_words</code></td>
<td>
<p>the maximum number of words to plot. Words are randomly
sampled to keep the number below the limit.</p>
</td></tr>
<tr><td><code id="textplot_terms_+3A_...">...</code></td>
<td>
<p>passed to underlying functions. See the Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users can customize the plots through <code>...</code>, which is
passed to <code><a href="ggplot2.html#topic+geom_text">ggplot2::geom_text()</a></code> and <code><a href="ggrepel.html#topic+geom_text_repel">ggrepel::geom_text_repel()</a></code>. The
colors are specified internally but users can override the settings by appending
<code><a href="ggplot2.html#topic+scale_manual">ggplot2::scale_colour_manual()</a></code> or <code><a href="ggplot2.html#topic+scale_brewer">ggplot2::scale_colour_brewer()</a></code>. The
legend title can also be modified using <code><a href="ggplot2.html#topic+labs">ggplot2::labs()</a></code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
