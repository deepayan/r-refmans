<!DOCTYPE html><html><head><title>Help for package dwctaxon</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dwctaxon}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dwctaxon-package'><p>dwctaxon: Edit and Validate Darwin Core Taxon Data</p></a></li>
<li><a href='#dct_add_row'><p>Add row(s) to a taxonomic database</p></a></li>
<li><a href='#dct_check_mapping'><p>Check mapping of usage taxonomic IDs</p></a></li>
<li><a href='#dct_check_sci_name'><p>Check scientificName</p></a></li>
<li><a href='#dct_check_tax_status'><p>Check that taxonomicStatus is within valid values in</p>
Darwin Core taxonomic data</a></li>
<li><a href='#dct_check_taxon_id'><p>Check taxonID</p></a></li>
<li><a href='#dct_drop_row'><p>Drop row(s) of a taxonomic database</p></a></li>
<li><a href='#dct_fill_col'><p>Fill a column of a taxonomic database</p></a></li>
<li><a href='#dct_filmies'><p>Taxonomic data of filmy ferns</p></a></li>
<li><a href='#dct_modify_row'><p>Modify row(s) of a taxonomic database</p></a></li>
<li><a href='#dct_options'><p>Get and set function arguments via options</p></a></li>
<li><a href='#dct_terms'><p>Darwin Core Taxon terms</p></a></li>
<li><a href='#dct_validate'><p>Validate a taxonomic database</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Edit and Validate Darwin Core Taxon Data</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Edit and validate taxonomic data in compliance with Darwin Core
    standards (Darwin Core 'Taxon' class <a href="https://dwc.tdwg.org/terms/#taxon">https://dwc.tdwg.org/terms/#taxon</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, digest, dplyr, glue, purrr, rlang, settings,
stringr, tibble</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), mockery, readr, usethis, knitr,
rmarkdown, patrick, stringi, english, tidyr, utils, curl, httr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/dwctaxon/">https://docs.ropensci.org/dwctaxon/</a>,
<a href="https://github.com/ropensci/dwctaxon">https://github.com/ropensci/dwctaxon</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/dwctaxon/issues">https://github.com/ropensci/dwctaxon/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-13 09:14:23 UTC; joelnitta</td>
</tr>
<tr>
<td>Author:</td>
<td>Joel H. Nitta <a href="https://orcid.org/0000-0003-4719-7472"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Wataru Iwasaki <a href="https://orcid.org/0000-0002-9169-9245"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Collin Schwantes [rev] (Collin reviewed the package (v. 1.0.0.9000) for
    rOpenSci, see
    &lt;https://github.com/ropensci/software-review/issues/574&gt;),
  Stephen Formel [rev] (Stephen reviewed the package (v. 1.0.0.9000) for
    rOpenSci, see
    &lt;https://github.com/ropensci/software-review/issues/574&gt;)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joel H. Nitta &lt;joelnitta@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-13 17:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dwctaxon-package'>dwctaxon: Edit and Validate Darwin Core Taxon Data</h2><span id='topic+dwctaxon'></span><span id='topic+dwctaxon-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Edit and validate taxonomic data in compliance with Darwin Core standards (Darwin Core 'Taxon' class <a href="https://dwc.tdwg.org/terms/#taxon">https://dwc.tdwg.org/terms/#taxon</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Joel H. Nitta <a href="mailto:joelnitta@gmail.com">joelnitta@gmail.com</a> (<a href="https://orcid.org/0000-0003-4719-7472">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Wataru Iwasaki (<a href="https://orcid.org/0000-0002-9169-9245">ORCID</a>) [contributor]
</p>
</li>
<li><p> Collin Schwantes (Collin reviewed the package (v. 1.0.0.9000) for rOpenSci, see &lt;https://github.com/ropensci/software-review/issues/574&gt;) [reviewer]
</p>
</li>
<li><p> Stephen Formel (Stephen reviewed the package (v. 1.0.0.9000) for rOpenSci, see &lt;https://github.com/ropensci/software-review/issues/574&gt;) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/dwctaxon/">https://docs.ropensci.org/dwctaxon/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/dwctaxon">https://github.com/ropensci/dwctaxon</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/dwctaxon/issues">https://github.com/ropensci/dwctaxon/issues</a>
</p>
</li></ul>


<hr>
<h2 id='dct_add_row'>Add row(s) to a taxonomic database</h2><span id='topic+dct_add_row'></span>

<h3>Description</h3>

<p>Add one or more rows to a taxonomic database in Darwin Core (DwC) format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_add_row(
  tax_dat,
  taxonID = NULL,
  scientificName = NULL,
  taxonomicStatus = NULL,
  acceptedNameUsageID = NULL,
  acceptedNameUsage = NULL,
  new_dat = NULL,
  fill_taxon_id = dct_options()$fill_taxon_id,
  fill_usage_id = dct_options()$fill_usage_id,
  taxon_id_length = dct_options()$taxon_id_length,
  stamp_modified = dct_options()$stamp_modified,
  strict = dct_options()$strict,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_add_row_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_taxonid">taxonID</code></td>
<td>
<p>Character or numeric vector; values to add to taxonID column.
Ignored if <code>new_dat</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_scientificname">scientificName</code></td>
<td>
<p>Character vector; values to add to scientificName
column. Ignored if <code>new_dat</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_taxonomicstatus">taxonomicStatus</code></td>
<td>
<p>Character vector; values to add to taxonomicStatus
column. Ignored if <code>new_dat</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_acceptednameusageid">acceptedNameUsageID</code></td>
<td>
<p>Character or numeric vector; values to add to
acceptedNameUsageID column. Ignored if <code>new_dat</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_acceptednameusage">acceptedNameUsage</code></td>
<td>
<p>Character vector; values to add to acceptedNameUsage
column. Ignored if <code>new_dat</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_new_dat">new_dat</code></td>
<td>
<p>A dataframe including columns corresponding to one or more of
the above arguments, except for <code>tax_dat</code>. Other DwC terms can also be
included as additional columns. All rows in <code>new_dat</code> will be appended to the
input data (<code>tax_dat</code>).</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_fill_taxon_id">fill_taxon_id</code></td>
<td>
<p>Logical vector of length 1; if <code>taxon_id</code> is not provided, should values in the taxonID column be filled in by generating them automatically from the scientificName? If the <code>taxonID</code> column does not yet exist it will be created. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_fill_usage_id">fill_usage_id</code></td>
<td>
<p>Logical vector of length 1; if <code>usage_id</code> is not provided, should values in the acceptedNameUsageID column be filled in by matching acceptedNameUsage to scientificName? If the <code>acceptedNameUsageID</code> column does not yet exist it will be created. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_taxon_id_length">taxon_id_length</code></td>
<td>
<p>Numeric vector of length 1; how many characters should be included in automatically generated values of taxonID? Must be between 1 and 32, inclusive. Default <code>32</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_stamp_modified">stamp_modified</code></td>
<td>
<p>Logical vector of length 1; should the <code>modified</code> column of any newly created or modified row include a timestamp with the date and time of its creation/modification? If the <code>modified</code> column does not yet exist it will be created. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_strict">strict</code></td>
<td>
<p>Logical vector of length 1; should taxonomic checks be run on the updated taxonomic database? Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dct_add_row_+3A_...">...</code></td>
<td>
<p>Additional data to add, specified as sets of named
character or numeric vectors; e.g., <code>parentNameUsageID = "6SH4"</code>. The name of
each must be a valid column name for data in DwC format. Ignored if <code>new_dat</code>
is not <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>fill_taxon_id</code> and <code>fill_usage_id</code> only act on the newly added data (they
do not fill columns in <code>tax_dat</code>).
</p>
<p>If &quot;taxonID&quot; is not provided for the new row and <code>fill_taxon_id</code> is <code>TRUE</code>,
a value for taxonID will be automatically generated from the md5 hash digest
of the scientific name.
</p>
<p>To modify settings used for validation if <code>strict</code> is <code>TRUE</code>,
use <code>dct_options()</code>.
</p>


<h3>Value</h3>

<p>Dataframe; taxonomic database in DwC format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tibble::tibble(
  taxonID = "123",
  scientificName = "Foogenus barspecies",
  acceptedNameUsageID = NA_character_,
  taxonomicStatus = "accepted"
) |&gt;
  dct_add_row(
    scientificName = "Foogenus barspecies var. bla",
    parentNameUsageID = "123",
    nameAccordingTo = "me",
    strict = TRUE
  )
</code></pre>

<hr>
<h2 id='dct_check_mapping'>Check mapping of usage taxonomic IDs</h2><span id='topic+dct_check_mapping'></span>

<h3>Description</h3>

<p>Check that values of terms like 'acceptedUsageID' map properly to taxonID in
Darwin Core (DwC) taxonomic data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_check_mapping(
  tax_dat,
  on_fail = dct_options()$on_fail,
  on_success = dct_options()$on_success,
  col_select = "acceptedNameUsageID",
  quiet = dct_options()$quiet
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_check_mapping_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_check_mapping_+3A_on_fail">on_fail</code></td>
<td>
<p>Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_mapping_+3A_on_success">on_success</code></td>
<td>
<p>Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_mapping_+3A_col_select">col_select</code></td>
<td>
<p>Character vector of length 1; the name of the column
(DwC term) to check. Default <code>"acceptedNameUsageID"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_mapping_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following rules are enforced:
</p>

<ul>
<li><p> Value of taxonID may not be identical to that of the selected column within
a single row (in other words, a name cannot be its own accepted name,
parent taxon, or basionym).
</p>
</li>
<li><p> Every value in the selected column must have a corresponding taxonID.
</p>
</li></ul>

<p><code>col_select</code> can take one of the following values:
</p>

<ul>
<li> <p><code>"acceptedNameUsageID"</code>: taxonID corresponding to the accepted name (of
a synonym).
</p>
</li>
<li> <p><code>"parentNameUsageID"</code>: taxonID corresponding to the immediate parent taxon
of a name (for example, for a species, this would be the genus).
</p>
</li>
<li> <p><code>"originalNameUsageID"</code>: taxonID corresponding to the basionym of a name.
</p>
</li></ul>



<h3>Value</h3>

<p>Depends on the result of the check and on values of <code>on_fail</code> and
<code>on_success</code>:
</p>

<ul>
<li><p> If the check passes and <code>on_success</code> is &quot;logical&quot;, return <code>TRUE</code>
</p>
</li>
<li><p> If the check passes and <code>on_success</code> is &quot;data&quot;, return the input dataframe
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;error&quot;, return an error
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;summary&quot;, issue a warning and
return a dataframe with a summary of the reasons for failure
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># The bad data has an acceptedNameUsageID (third row, "4") that lacks a
# corresponding taxonID
bad_dat &lt;- tibble::tribble(
  ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,
  "1", NA, "accepted", "Species foo",
  "2", "1", "synonym", "Species bar",
  "3", "4", "synonym", "Species bat"
)

dct_check_mapping(bad_dat, on_fail = "summary", quiet = TRUE)
</code></pre>

<hr>
<h2 id='dct_check_sci_name'>Check scientificName</h2><span id='topic+dct_check_sci_name'></span>

<h3>Description</h3>

<p>Check for correctly formatted scientificName column in Darwin Core
taxonomic data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_check_sci_name(
  tax_dat,
  on_fail = dct_options()$on_fail,
  on_success = dct_options()$on_success,
  quiet = dct_options()$quiet
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_check_sci_name_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_check_sci_name_+3A_on_fail">on_fail</code></td>
<td>
<p>Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_sci_name_+3A_on_success">on_success</code></td>
<td>
<p>Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_sci_name_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following rules are enforced:
</p>

<ul>
<li><p> scientificName may not be missing (NA)
</p>
</li>
<li><p> scientificName must be unique
</p>
</li></ul>



<h3>Value</h3>

<p>Depends on the result of the check and on values of <code>on_fail</code> and
<code>on_success</code>:
</p>

<ul>
<li><p> If the check passes and <code>on_success</code> is &quot;logical&quot;, return <code>TRUE</code>
</p>
</li>
<li><p> If the check passes and <code>on_success</code> is &quot;data&quot;, return the input dataframe
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;error&quot;, return an error
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;summary&quot;, issue a warning and
return a dataframe with a summary of the reasons for failure
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>dct_check_sci_name(
  data.frame(scientificName = NA_character_),
  on_fail = "summary", quiet = TRUE
)

dct_check_sci_name(data.frame(scientificName = "a"))
</code></pre>

<hr>
<h2 id='dct_check_tax_status'>Check that taxonomicStatus is within valid values in
Darwin Core taxonomic data</h2><span id='topic+dct_check_tax_status'></span>

<h3>Description</h3>

<p>Check that taxonomicStatus is within valid values in
Darwin Core taxonomic data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_check_tax_status(
  tax_dat,
  on_fail = dct_options()$on_fail,
  on_success = dct_options()$on_success,
  valid_tax_status = dct_options()$valid_tax_status,
  quiet = dct_options()$quiet
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_check_tax_status_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_check_tax_status_+3A_on_fail">on_fail</code></td>
<td>
<p>Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_tax_status_+3A_on_success">on_success</code></td>
<td>
<p>Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_tax_status_+3A_valid_tax_status">valid_tax_status</code></td>
<td>
<p>Character vector of length 1; valid values for <code>taxonomicStatus</code>. Each value must be separated by a comma. Default <code style="white-space: pre;">&#8288;accepted, synonym, variant, NA&#8288;</code>. <code>"NA"</code> indicates that missing (NA) values are valid. Case-sensitive. (see Examples).</p>
</td></tr>
<tr><td><code id="dct_check_tax_status_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depends on the result of the check and on values of <code>on_fail</code> and
<code>on_success</code>:
</p>

<ul>
<li><p> If the check passes and <code>on_success</code> is &quot;logical&quot;, return <code>TRUE</code>
</p>
</li>
<li><p> If the check passes and <code>on_success</code> is &quot;data&quot;, return the input dataframe
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;error&quot;, return an error
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;summary&quot;, issue a warning and
return a dataframe with a summary of the reasons for failure
</p>
</li></ul>



<h3>References</h3>

<p><a href="https://dwc.tdwg.org/terms/#dwc:taxonomicStatus">https://dwc.tdwg.org/terms/#dwc:taxonomicStatus</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The bad data has an taxonomicStatus (third row, "foo") that is not
# a valid value
bad_dat &lt;- tibble::tribble(
  ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,
  "1", NA, "accepted", "Species foo",
  "2", "1", "synonym", "Species bar",
  "3", NA, "foo", "Species bat"
)

dct_check_tax_status(bad_dat, on_fail = "summary", quiet = TRUE)

# Example of setting valid values of taxonomicStatus via dct_options()

# First store existing settings, including any changes made by the user
old_settings &lt;- dct_options()

# Change options for valid_tax_status
dct_options(valid_tax_status = "provisionally accepted, synonym, NA")
tibble::tribble(
  ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,
  "1", NA, "provisionally accepted", "Species foo",
  "2", "1", "synonym", "Species bar",
  "3", NA, NA, "Strange name"
) |&gt;
  dct_check_tax_status()

# Reset options to those before this example was run
do.call(dct_options, old_settings)
</code></pre>

<hr>
<h2 id='dct_check_taxon_id'>Check taxonID</h2><span id='topic+dct_check_taxon_id'></span>

<h3>Description</h3>

<p>Check for correctly formatted taxonID column in Darwin Core taxonomic data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_check_taxon_id(
  tax_dat,
  on_fail = dct_options()$on_fail,
  on_success = dct_options()$on_success,
  quiet = dct_options()$quiet
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_check_taxon_id_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_check_taxon_id_+3A_on_fail">on_fail</code></td>
<td>
<p>Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_taxon_id_+3A_on_success">on_success</code></td>
<td>
<p>Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="dct_check_taxon_id_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following rules are enforced:
</p>

<ul>
<li><p> taxonID may not be missing (NA)
</p>
</li>
<li><p> taxonID must be unique
</p>
</li></ul>



<h3>Value</h3>

<p>Depends on the result of the check and on values of <code>on_fail</code> and
<code>on_success</code>:
</p>

<ul>
<li><p> If the check passes and <code>on_success</code> is &quot;logical&quot;, return <code>TRUE</code>
</p>
</li>
<li><p> If the check passes and <code>on_success</code> is &quot;data&quot;, return the input dataframe
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;error&quot;, return an error
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;summary&quot;, issue a warning and
return a dataframe with a summary of the reasons for failure
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>dct_check_taxon_id(
  data.frame(taxonID = NA_character_),
  on_fail = "summary", quiet = TRUE
)
dct_check_taxon_id(data.frame(taxonID = 1))
</code></pre>

<hr>
<h2 id='dct_drop_row'>Drop row(s) of a taxonomic database</h2><span id='topic+dct_drop_row'></span>

<h3>Description</h3>

<p>Drop one or more rows from a taxonomic database in Darwin Core (DwC) format
by taxonID or scientificName.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_drop_row(tax_dat, taxonID = NULL, scientificName = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_drop_row_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_drop_row_+3A_taxonid">taxonID</code></td>
<td>
<p>Character or numeric vector; taxonID of the row(s)
to be dropped.</p>
</td></tr>
<tr><td><code id="dct_drop_row_+3A_scientificname">scientificName</code></td>
<td>
<p>Character vector; scientificName of the row(s)
to be dropped.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only works if values of taxonID or scientificName are unique and non-missing
in the taxonomic database (tax_dat).
</p>
<p>Either taxonID or scientificName should be provided, but not both.
</p>


<h3>Value</h3>

<p>Dataframe; taxonomic database in DwC format
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Can drop rows by scientificName or taxonID
dct_filmies |&gt;
  dct_drop_row(scientificName = "Cephalomanes atrovirens Presl")

dct_filmies |&gt;
  dct_drop_row(taxonID = "54133783")

# Can drop multiple rows at once by providing multiple values for
# scientificName or taxonID
dct_filmies |&gt;
  dct_drop_row(
    scientificName = c(
      "Cephalomanes atrovirens Presl",
      "Trichomanes crassum Copel."
    )
  )

dct_filmies |&gt;
  dct_drop_row(
    taxonID = c(
      "54133783", "54133783"
    )
  )
</code></pre>

<hr>
<h2 id='dct_fill_col'>Fill a column of a taxonomic database</h2><span id='topic+dct_fill_col'></span>

<h3>Description</h3>

<p>Fill a column in a taxonomic database in Darwin Core (DwC) format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_fill_col(
  tax_dat,
  fill_to = "acceptedNameUsage",
  fill_from = "scientificName",
  match_to = "taxonID",
  match_from = "acceptedNameUsageID",
  stamp_modified = dct_options()$stamp_modified
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_fill_col_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_fill_col_+3A_fill_to">fill_to</code></td>
<td>
<p>Character vector of length 1; name of column to fill.
If the column does not yet exist it will be created.</p>
</td></tr>
<tr><td><code id="dct_fill_col_+3A_fill_from">fill_from</code></td>
<td>
<p>Character vector of length 1; name of column to copy
values from when filling.</p>
</td></tr>
<tr><td><code id="dct_fill_col_+3A_match_to">match_to</code></td>
<td>
<p>Character vector of length 1; name of column to match to.</p>
</td></tr>
<tr><td><code id="dct_fill_col_+3A_match_from">match_from</code></td>
<td>
<p>Character vector of length 1; name of column to match from.</p>
</td></tr>
<tr><td><code id="dct_fill_col_+3A_stamp_modified">stamp_modified</code></td>
<td>
<p>Logical vector of length 1; should the <code>modified</code> column of any newly created or modified row include a timestamp with the date and time of its creation/modification? If the <code>modified</code> column does not yet exist it will be created. Default <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Several terms (columns) in DwC format come in pairs of &quot;term&quot; and &quot;termID&quot;;
for example, &quot;acceptedNameUsage&quot; and &quot;acceptedNameUsageID&quot;, where the first
is the value in a human-readable form (in this case, scientific name of the
accepted taxon) and the second is the value used by a machine (in this case,
taxonID of the accepted taxon). Other pairs include &quot;parentNameUsage&quot; and
&quot;parentNameUsageID&quot;, &quot;scientificName&quot; and &quot;scientificNameID&quot;, etc. None are
required to be used in a given DwC dataset.
</p>
<p>Often when updating data, the user may only fill in one value or the other
(e.g., &quot;acceptedNameUsage&quot; or &quot;acceptedNameUsageID&quot;), but not both. The
purpose of <code>dct_fill_col()</code> is to fill the missing column.
</p>
<p><code>match_from</code> and <code>match_to</code> are used to locate the values used for filling
each cell. The values in the <code>match_to</code> column must be unique.
</p>
<p>The default settings are to fill acceptedNameUsage with values from
scientificName by matching acceptedNameUsageID to taxonID (see Example).
</p>
<p>When adding timestamps with <code>stamp_modified</code>, any row that differs from the
original data (<code>tax_dat</code>) is considered modified. This includes when a new
column is added, in which case all rows will be considered modified.
</p>


<h3>Value</h3>

<p>Dataframe; taxonomic database in DwC format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Fill acceptedNameUsage with values from scientificName by
# matching acceptedNameUsageID to taxonID
(head(dct_filmies, 5)) |&gt;
  dct_fill_col(
    fill_to = "acceptedNameUsage",
    fill_from = "scientificName",
    match_to = "taxonID",
    match_from = "acceptedNameUsageID"
  )
</code></pre>

<hr>
<h2 id='dct_filmies'>Taxonomic data of filmy ferns</h2><span id='topic+dct_filmies'></span>

<h3>Description</h3>

<p>Taxonomic data of filmy ferns (family Hymenophyllaceae) in Darwin Core
format. Non-ASCII characters have been converted to ASCII, so some author
names may not be as expected. Meant for demonstration purposes only, not
formal data analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_filmies
</code></pre>


<h3>Format</h3>

<p>Dataframe (tibble), with 2451 rows and
5 columns. For details about data format, see
<a href="https://dwc.tdwg.org/terms/#taxon">https://dwc.tdwg.org/terms/#taxon</a>.
</p>


<h3>Details</h3>

<p>Modified from data downloaded from the <a href="https://www.catalogueoflife.org/">Catalog of Life</a> under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution (CC BY) 4.0</a>
license.
</p>


<h3>Source</h3>

<p><a href="https://www.catalogueoflife.org/">https://www.catalogueoflife.org/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dct_filmies
</code></pre>

<hr>
<h2 id='dct_modify_row'>Modify row(s) of a taxonomic database</h2><span id='topic+dct_modify_row'></span>

<h3>Description</h3>

<p>Modify one or more rows in a taxonomic database in Darwin Core (DwC) format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_modify_row(
  tax_dat,
  taxonID = NULL,
  scientificName = NULL,
  taxonomicStatus = NULL,
  acceptedNameUsageID = NULL,
  acceptedNameUsage = NULL,
  clear_usage_id = dct_options()$clear_usage_id,
  clear_usage_name = dct_options()$clear_usage_name,
  fill_usage_name = dct_options()$fill_usage_name,
  remap_names = dct_options()$remap_names,
  remap_variant = dct_options()$remap_variant,
  stamp_modified = dct_options()$stamp_modified,
  strict = dct_options()$strict,
  quiet = dct_options()$quiet,
  args_tbl = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_modify_row_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_taxonid">taxonID</code></td>
<td>
<p>Character or numeric vector of length 1; taxonID of the row
to be modified (the selected row).</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_scientificname">scientificName</code></td>
<td>
<p>Character vector of length 1; scientificName of the row
to be modified if <code>taxonID</code> is <code>NULL</code>, OR the scientificName to assign to the
selected row if <code>taxonID</code> is provided (see Details).</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_taxonomicstatus">taxonomicStatus</code></td>
<td>
<p>Character vector of length 1; taxonomicStatus to
assign to the selected row.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_acceptednameusageid">acceptedNameUsageID</code></td>
<td>
<p>Character or numeric vector of length 1;
acceptedNameUsageID to assign to the selected row.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_acceptednameusage">acceptedNameUsage</code></td>
<td>
<p>Character vector of length 1; acceptedNameUsage to
assign to the selected row.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_clear_usage_id">clear_usage_id</code></td>
<td>
<p>Logical vector of length 1; should acceptedNameUsageID of the selected row be set to <code>NA</code> if the word &quot;accepted&quot; is detected in tax_status (not case-sensitive)? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_clear_usage_name">clear_usage_name</code></td>
<td>
<p>Logical vector of length 1; should acceptedNameUsageID of the selected row be set to <code>NA</code> if the word &quot;accepted&quot; is detected in tax_status (not case-sensitive)? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_fill_usage_name">fill_usage_name</code></td>
<td>
<p>Logical vector of length 1; should the acceptedNameUsage of the selected row be set to the scientificName corresponding to its acceptedNameUsageID? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_remap_names">remap_names</code></td>
<td>
<p>Logical vector of length 1; should the acceptedNameUsageID be updated (remapped) for rows with the same acceptedNameUsageID as the taxonID of the row to be modified? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_remap_variant">remap_variant</code></td>
<td>
<p>Same as <code>remap_names</code>, but applies specifically to rows with taxonomicStatus of &quot;variant&quot;. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_stamp_modified">stamp_modified</code></td>
<td>
<p>Logical vector of length 1; should the <code>modified</code> column of any newly created or modified row include a timestamp with the date and time of its creation/modification? If the <code>modified</code> column does not yet exist it will be created. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_strict">strict</code></td>
<td>
<p>Logical vector of length 1; should taxonomic checks be run on the updated taxonomic database? Default <code>FALSE</code>..</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>..</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_args_tbl">args_tbl</code></td>
<td>
<p>A dataframe including columns corresponding to one or more of
the above arguments, except for <code>tax_dat</code>. In this case, the input taxonomic
database will be modified sequentially over each row of input in <code>args_tbl</code>.
Other DwC terms can also be included as additional columns,
similar to using <code>...</code> to modify a single row.</p>
</td></tr>
<tr><td><code id="dct_modify_row_+3A_...">...</code></td>
<td>
<p>other DwC terms to modify, specified as sets of named values.
Each element of the vector must have a name corresponding to a valid
DwC term; see <a href="#topic+dct_terms">dct_terms</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>taxonID</code> is only used to identify the row(s) to modify and is not itself
modified. <code>scientificName</code> can be used in the same way if <code>taxonID</code> is not
provided (as long as <code>scientificName</code> matches a single row). If both
<code>taxonID</code> and <code>scientificName</code> are provided, <code>scientificName</code> will be
assigned to the scientificName of the row identified by <code>taxonID</code>, replacing
any value that already exists.
</p>
<p><code>acceptedNameUsageID</code> and <code>acceptedNameUsage</code> must match existing values of
acceptedNameUsageID and acceptedNameUsage in the input data (<code>tax_dat</code>). On
default settings, either can be used and the other will be filled in
automatically (<code>fill_usage_id</code> and <code>fill_usage_name</code> are both <code>TRUE</code>).
</p>
<p>Any other arguments provided that are DwC terms will be assigned to the
selected row (i.e., they will modify the row).
</p>
<p>If <code>remap_names</code> is <code>TRUE</code> (default) and <code>acceptedNameUsageID</code> is provided,
any names that have an acceptedNameUsageID matching the taxonID of the
selected row (i.e., synonyms of that row) will also have their
acceptedNameUsageID replaced with the new acceptedNameUsageID. This behavior
is not applied to names with taxonomicStatus of &quot;variant&quot; by default, but can
be turned on for such names with <code>remap_variant</code>.
</p>
<p>If <code>clear_usage_id</code> or <code>clear_usage_name</code> is <code>TRUE</code> and <code>taxonomicStatus</code>
includes the word &quot;accepted&quot;, acceptedNameUsageID
or acceptedNameUsage will be set to NA respectively, regardless of the
values of <code>acceptedNameUsageID</code>, <code>acceptedNameUsage</code>, or <code>fill_usage_name</code>.
</p>
<p>Can either modify a single row in the input taxonomic database if each
argument is supplied as a vector of length 1, or can apply a set of changes
to the taxonomic database if the input is supplied as a dataframe via
<code>args_tbl</code>.
</p>


<h3>Value</h3>

<p>Dataframe; taxonomic database in DwC format
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Swap the accepted / synonym status of
# Cephalomanes crassum (Copel.) M. G. Price
# and Trichomanes crassum Copel.
dct_filmies |&gt;
  dct_modify_row(
    scientificName = "Cephalomanes crassum (Copel.) M. G. Price",
    taxonomicStatus = "synonym",
    acceptedNameUsage = "Trichomanes crassum Copel."
  ) |&gt;
  dct_modify_row(
    scientificName = "Trichomanes crassum Copel.",
    taxonomicStatus = "accepted"
  ) |&gt;
  dct_validate(
    check_tax_status = FALSE,
    check_mapping_accepted_status = FALSE,
    check_sci_name = FALSE
  )
# Sometimes changing one name will affect others, if they map
# to the new synonym
dct_modify_row(
  tax_dat = dct_filmies |&gt; head(),
  scientificName = "Cephalomanes crassum (Copel.) M. G. Price",
  taxonomicStatus = "synonym",
  acceptedNameUsage = "Cephalomanes densinervium (Copel.) Copel."
)
# Apply a set of changes
library(tibble)
updates &lt;- tibble(
  scientificName = c(
    "Cephalomanes atrovirens Presl",
    "Cephalomanes crassum (Copel.) M. G. Price"
  ),
  taxonomicStatus = "synonym",
  acceptedNameUsage = "Trichomanes crassum Copel."
)
dct_filmies |&gt;
  dct_modify_row(args_tbl = updates) |&gt;
  dct_modify_row(
    scientificName = "Trichomanes crassum Copel.",
    taxonomicStatus = "accepted"
  )
</code></pre>

<hr>
<h2 id='dct_options'>Get and set function arguments via options</h2><span id='topic+dct_options'></span>

<h3>Description</h3>

<p>Changes the default values of function arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_options(reset = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_options_+3A_reset">reset</code></td>
<td>
<p>Logical vector of length 1; if TRUE, reset all options to their
default values.</p>
</td></tr>
<tr><td><code id="dct_options_+3A_...">...</code></td>
<td>
<p>Any number of <code>argument = value</code> pairs, where the left side is the
name of the argument and the right side is its value. See Details and
Examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use this to change the default values of function arguments. That way, you
don't have to type the same thing each time you call a function.
</p>
<p>The arguments that can be set with this function are as follows:
</p>


<h4>Validation arguments</h4>


<ul>
<li> <p><code>check_col_names</code>: Logical vector of length 1; should all column names be required to be a valid DwC term? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_mapping_accepted_status</code>: Logical vector of length 1; should rules about mapping of variants and synonyms be enforced? Default <code>FALSE</code>.
(See <code>dct_validate()</code>).
</p>
</li>
<li> <p><code>check_mapping_accepted</code>: Logical vector of length 1; should all values of <code>acceptedNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_mapping_original</code>: Logical vector of length 1; should all values of <code>originalNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_mapping_parent</code>: Logical vector of length 1; should all values of <code>parentNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_sci_name</code>: Logical vector of length 1; should all instances of <code>scientificName</code> be required to be non-missing and unique? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_status_diff</code>: Logical vector of length 1; should each scientific name be allowed to have only one taxonomic status? Default <code>FALSE</code>.
</p>
</li>
<li> <p><code>check_tax_status</code>: Logical vector of length 1; should all taxonomic names be required to have a valid value for taxonomic status (by default, &quot;accepted&quot;, &quot;synonym&quot;, or &quot;variant&quot;)? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>check_taxon_id</code>: Logical vector of length 1; should all instances of  <code>taxonID</code> be required to be non-missing and unique? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>extra_cols</code>: Character vector; names of columns that should be allowed beyond
those defined by the DwC taxon standard. Default NULL. Providing column name(s) that are valid DwC taxon column(s) has no effect.
</p>
</li>
<li> <p><code>on_fail</code>: Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.
</p>
</li>
<li> <p><code>on_success</code>: Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.
</p>
</li>
<li> <p><code>skip_missing_cols</code>: Logical vector of length 1; should checks be silently skipped if any of the
columns they inspect are missing? Default <code>FALSE</code>.
</p>
</li>
<li> <p><code>valid_tax_status</code>: Character vector of length 1; valid values for <code>taxonomicStatus</code>. Each value must be separated by a comma. Default <code style="white-space: pre;">&#8288;accepted, synonym, variant, NA&#8288;</code>. <code>"NA"</code> indicates that missing (NA) values are valid. Case-sensitive.
</p>
</li></ul>




<h4>Editing arguments</h4>


<ul>
<li> <p><code>clear_usage_id</code>: Logical vector of length 1; should acceptedNameUsageID of the selected row be set to <code>NA</code> if the word &quot;accepted&quot; is detected in tax_status (not case-sensitive)? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>clear_usage_name</code>: Logical vector of length 1; should acceptedNameUsage of the selected row be set to <code>NA</code> if the word &quot;accepted&quot; is detected in tax_status (not case-sensitive)? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>fill_taxon_id</code>: Logical vector of length 1; if <code>taxon_id</code> is not provided, should values in the taxonID column be filled in by generating them automatically from the scientificName? If the <code>taxonID</code> column does not yet exist it will be created. Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>fill_usage_id</code>: Logical vector of length 1; if <code>usage_id</code> is not provided, should values in the acceptedNameUsageID column be filled in by matching acceptedNameUsage to scientificName? If the <code>acceptedNameUsageID</code> column does not yet exist it will be created. Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>fill_usage_name</code>: Logical vector of length 1; should the acceptedNameUsage of the selected row be set to the scientificName corresponding to its acceptedNameUsageID? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>remap_names</code>: Logical vector of length 1; should the acceptedNameUsageID be updated (remapped) for rows with the same acceptedNameUsageID as the taxonID of the row to be modified? Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>remap_variant</code>: Same as <code>remap_names</code>, but applies specifically to rows with taxonomicStatus of &quot;variant&quot;. Default <code>FALSE</code>.
</p>
</li>
<li> <p><code>stamp_modified</code>: Logical vector of length 1; should the <code>modified</code> column of any newly created or modified row include a timestamp with the date and time of its creation/modification? If the <code>modified</code> column does not yet exist it will be created. Default <code>TRUE</code>.
</p>
</li>
<li> <p><code>taxon_id_length</code>: Numeric vector of length 1; how many characters should be included in automatically generated values of taxonID? Must be between 1 and 32, inclusive. Default <code>32</code>.
</p>
</li></ul>




<h4>General arguments</h4>


<ul>
<li> <p><code>quiet</code>: Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.
</p>
</li>
<li> <p><code>strict</code>: Logical vector of length 1; should taxonomic checks be run on the updated taxonomic database? Default <code>FALSE</code>.
</p>
</li></ul>




<h3>Value</h3>

<p>Nothing; used for its side-effect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Show all options
dct_options()

# Store existing settings, including any changes made by the user
old_settings &lt;- dct_options()

# View one option
dct_options()$valid_tax_status

# Change one option
dct_options(valid_tax_status = "accepted, weird, whatever")
dct_options()$valid_tax_status

# Reset to default values
dct_options(reset = TRUE)
dct_options()$valid_tax_status

# Multiple options may also be set at once
dct_options(check_taxon_id = FALSE, check_status_diff = TRUE)

# Reset options to those before this example was run
do.call(dct_options, old_settings)
</code></pre>

<hr>
<h2 id='dct_terms'>Darwin Core Taxon terms</h2><span id='topic+dct_terms'></span>

<h3>Description</h3>

<p>A table of valid Darwin Core terms. Only terms in the Taxon class or at the
record-level are included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_terms
</code></pre>


<h3>Format</h3>

<p>Dataframe (tibble), including two columns:
</p>

<ul>
<li> <p><code>group</code>: Darwin Core term group; either &quot;taxon&quot; (terms in the Taxon class)
or &quot;record-level&quot; (terms that are generic in that they might apply
to any type of record in a dataset.)
</p>
</li>
<li> <p><code>term</code>: Darwin Core term
</p>
</li></ul>

<p>with two additional attributes:
</p>

<ul>
<li> <p><code>retrieved</code>: Date the terms were obtained
</p>
</li>
<li> <p><code>url</code>: URL from which the terms were obtained
</p>
</li></ul>



<h3>Details</h3>

<p>Modified from data downloaded from <a href="https://dwc.tdwg.org/">TDWG Darwin Core</a>
under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution (CC BY) 4.0</a>
license.
</p>


<h3>Source</h3>

<p><a href="https://dwc.tdwg.org/terms/#taxon">https://dwc.tdwg.org/terms/#taxon</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dct_terms
</code></pre>

<hr>
<h2 id='dct_validate'>Validate a taxonomic database</h2><span id='topic+dct_validate'></span>

<h3>Description</h3>

<p>Runs a series of automated checks on a taxonomic database in Darwin Core
(DwC) format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dct_validate(
  tax_dat,
  check_taxon_id = dct_options()$check_taxon_id,
  check_tax_status = dct_options()$check_tax_status,
  check_mapping_accepted = dct_options()$check_mapping_accepted,
  check_mapping_parent = dct_options()$check_mapping_parent,
  check_mapping_original = dct_options()$check_mapping_original,
  check_mapping_accepted_status = dct_options()$check_mapping_accepted_status,
  check_sci_name = dct_options()$check_sci_name,
  check_status_diff = dct_options()$check_status_diff,
  check_col_names = dct_options()$check_col_names,
  valid_tax_status = dct_options()$valid_tax_status,
  extra_cols = dct_options()$extra_cols,
  on_success = dct_options()$on_success,
  on_fail = dct_options()$on_fail,
  skip_missing_cols = dct_options()$skip_missing_cols,
  quiet = dct_options()$quiet
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dct_validate_+3A_tax_dat">tax_dat</code></td>
<td>
<p>Dataframe; taxonomic database in DwC format.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_taxon_id">check_taxon_id</code></td>
<td>
<p>Logical vector of length 1; should all instances of  <code>taxonID</code> be required to be non-missing and unique? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_tax_status">check_tax_status</code></td>
<td>
<p>Logical vector of length 1; should all taxonomic names be required to have a valid value for taxonomic status (by default, &quot;accepted&quot;, &quot;synonym&quot;, or &quot;variant&quot;)? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_mapping_accepted">check_mapping_accepted</code></td>
<td>
<p>Logical vector of length 1; should all values of <code>acceptedNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_mapping_parent">check_mapping_parent</code></td>
<td>
<p>Logical vector of length 1; should all values of <code>parentNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_mapping_original">check_mapping_original</code></td>
<td>
<p>Logical vector of length 1; should all values of <code>originalNameUsageID</code> be required to map to the <code>taxonID</code> of an existing name? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_mapping_accepted_status">check_mapping_accepted_status</code></td>
<td>
<p>Logical vector of length 1; should rules about mapping of variants and synonyms be enforced? Default <code>FALSE</code>.
(see Details).</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_sci_name">check_sci_name</code></td>
<td>
<p>Logical vector of length 1; should all instances of <code>scientificName</code> be required to be non-missing and unique? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_status_diff">check_status_diff</code></td>
<td>
<p>Logical vector of length 1; should each scientific name be allowed to have only one taxonomic status? Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_check_col_names">check_col_names</code></td>
<td>
<p>Logical vector of length 1; should all column names be required to be a valid DwC term? Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_valid_tax_status">valid_tax_status</code></td>
<td>
<p>Character vector of length 1; valid values for <code>taxonomicStatus</code>. Each value must be separated by a comma. Default <code style="white-space: pre;">&#8288;accepted, synonym, variant, NA&#8288;</code>. <code>"NA"</code> indicates that missing (NA) values are valid. Case-sensitive.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_extra_cols">extra_cols</code></td>
<td>
<p>Character vector; names of columns that should be allowed beyond
those defined by the DwC taxon standard. Default NULL. Providing column name(s) that are valid DwC taxon column(s) has no effect.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_on_success">on_success</code></td>
<td>
<p>Character vector of length 1, either &quot;logical&quot; or &quot;data&quot;. Describes what to do if the check passes. Default <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_on_fail">on_fail</code></td>
<td>
<p>Character vector of length 1, either &quot;error&quot; or &quot;summary&quot;. Describes what to do if the check fails. Default <code>"error"</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_skip_missing_cols">skip_missing_cols</code></td>
<td>
<p>Logical vector of length 1; should checks be silently skipped if any of the
columns they inspect are missing? Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dct_validate_+3A_quiet">quiet</code></td>
<td>
<p>Logical vector of length 1; should warnings be silenced? Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For <code>check_mapping_accepted_status</code> and <code>check_status_diff</code>, &quot;accepted&quot;,
&quot;synonym&quot;, and &quot;variant&quot; are determined by string matching of
<code>taxonomicStatus</code>; so &quot;provisionally accepted&quot; is counted as &quot;accepted&quot;,
&quot;ambiguous synonym&quot; is counted as &quot;synonym&quot;, etc. (case-sensitive).
</p>
<p>For <code>check_mapping_accepted_status</code>, the following rules are enforced:
</p>

<ul>
<li><p> Rows with <code>taxonomicStatus</code> of &quot;synonym&quot; (synonyms) must have an
<code>acceptedNameUsageID</code> matching the <code>taxonID</code> of an accepted name
(<code>taxonomicStatus</code> of &quot;accepted&quot;)
</p>
</li>
<li><p> Rows with <code>taxonomicStatus</code> of &quot;variant&quot; (orthographic variants) must
have an <code>acceptedNameUsageID</code> matching the <code>taxonID</code> of an accepted name or
synonym (but not another variant)
</p>
</li>
<li><p> Rows with <code>taxonomicStatus</code> of &quot;accepted&quot; must not have any value entered
for <code>acceptedNameUsageID</code>
</p>
</li>
<li><p> Rows with a value for <code>acceptedNameUsageID</code> must have a valid value for
<code>taxonomicStatus</code>.
</p>
</li></ul>

<p>Default settings of all arguments can be modified with <code>dct_options()</code> (see
Examples).
</p>
<p>Most columns are expected to be vectors of class character, but this is not
checked for all columns. Columns (DwC terms) with names including 'ID', for
example 'taxonID', may be character, numeric, or integer.
</p>


<h3>Value</h3>

<p>Depends on the result of the check and on values of <code>on_fail</code> and
<code>on_success</code>:
</p>

<ul>
<li><p> If the check passes and <code>on_success</code> is &quot;logical&quot;, return <code>TRUE</code>
</p>
</li>
<li><p> If the check passes and <code>on_success</code> is &quot;data&quot;, return the input dataframe
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;error&quot;, return an error
</p>
</li>
<li><p> If the check fails and <code>on_fail</code> is &quot;summary&quot;, issue a warning and
return a dataframe with a summary of the reasons for failure
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># The example dataset dct_filmies is already correctly formatted and passes
# validation
dct_validate(dct_filmies)

# So make some bad data on purpose with a duplicated scientific name
bad_dat &lt;- dct_filmies
bad_dat$scientificName[1] &lt;- bad_dat$scientificName[2]

# The incorrectly formatted data won't pass
try(
  dct_validate(bad_dat)
)

# It will pass if we allow duplicated scientific names though
dct_validate(bad_dat, check_sci_name = FALSE)

# Individual checks can also be turned or off with dct_options()

# First save the current settings before making any changes
old_settings &lt;- dct_options()

# Let's allow duplicated scientific names by default
dct_options(check_sci_name = FALSE)

# The data passes validation as before, but we don't have to specify
# `check_sci_name = FALSE` in the function call
dct_validate(bad_dat)

# Reset options to those before this example was run
do.call(dct_options, old_settings)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
